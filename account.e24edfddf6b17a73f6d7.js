(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[20],{

/***/ 2536:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(556);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(540);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(701);
/* harmony import */ var stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2233);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1833);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1834);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(760);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(557);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _Page404_Page404__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2362);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(716);
/* harmony import */ var _AccountAssets__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2537);
/* harmony import */ var _AccountAssetCreate__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2539);
/* harmony import */ var _AccountAssetUpdate__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2540);
/* harmony import */ var _AccountMembership__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2544);
/* harmony import */ var _AccountVesting__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2546);
/* harmony import */ var _AccountPermissions__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2547);
/* harmony import */ var _AccountSignedMessages__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2562);
/* harmony import */ var _AccountWhitelist__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2565);
/* harmony import */ var _AccountVoting__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2566);
/* harmony import */ var _AccountOverview__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(2569);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






// import AccountLeftPanel from "./AccountLeftPanel";








/* Nested routes */











var AccountPage = function (_React$Component) {
    _inherits(AccountPage, _React$Component);

    function AccountPage() {
        _classCallCheck(this, AccountPage);

        return _possibleConstructorReturn(this, (AccountPage.__proto__ || Object.getPrototypeOf(AccountPage)).apply(this, arguments));
    }

    _createClass(AccountPage, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            if (this.props.account) {
                actions_AccountActions__WEBPACK_IMPORTED_MODULE_1__["default"].setCurrentAccount.defer(this.props.account.get("name"));

                // Fetch possible fee assets here to avoid async issues later (will resolve assets)
                common_account_utils__WEBPACK_IMPORTED_MODULE_8__["default"].getPossibleFees(this.props.account, "transfer");
            }
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.account) {
                var npName = np.account.get("name");
                var currentName = this.props.account && this.props.account.get("name");

                if (!this.props.account || npName !== currentName) {
                    // Update the current account in order to access the header right menu options
                    actions_AccountActions__WEBPACK_IMPORTED_MODULE_1__["default"].setCurrentAccount.defer(npName);
                    // Fetch possible fee assets here to avoid async issues later (will resolve assets)
                    common_account_utils__WEBPACK_IMPORTED_MODULE_8__["default"].getPossibleFees(np.account, "transfer");
                }
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                myActiveAccounts = _props.myActiveAccounts,
                searchAccounts = _props.searchAccounts,
                settings = _props.settings,
                wallet_locked = _props.wallet_locked,
                account = _props.account,
                hiddenAssets = _props.hiddenAssets;


            if (!account) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Page404_Page404__WEBPACK_IMPORTED_MODULE_10__["default"], null);
            }
            var account_name = this.props.account.get("name");
            var isMyAccount = stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].isMyAccount(account);

            var passOnProps = {
                account_name: account_name,
                myActiveAccounts: myActiveAccounts,
                searchAccounts: searchAccounts,
                settings: settings,
                wallet_locked: wallet_locked,
                account: account,
                isMyAccount: isMyAccount,
                hiddenAssets: hiddenAssets,
                contained: true,
                balances: account.get("balances", Object(immutable__WEBPACK_IMPORTED_MODULE_9__["List"])()).toList(),
                orders: account.get("orders", Object(immutable__WEBPACK_IMPORTED_MODULE_9__["List"])()).toList(),
                viewSettings: this.props.viewSettings,
                proxy: account.getIn(["options", "voting_account"]),
                history: this.props.history
            };

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-block page-layout" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block no-padding" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Switch"],
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name,
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountOverview__WEBPACK_IMPORTED_MODULE_21__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Redirect"], {
                            from: "/account/" + account_name + "/overview",
                            to: "/account/" + account_name
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/assets",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssets__WEBPACK_IMPORTED_MODULE_12__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/create-asset",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssetCreate__WEBPACK_IMPORTED_MODULE_13__["AccountAssetCreate"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/update-asset/:asset",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssetUpdate__WEBPACK_IMPORTED_MODULE_14__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/member-stats",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountMembership__WEBPACK_IMPORTED_MODULE_15__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/vesting",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountVesting__WEBPACK_IMPORTED_MODULE_16__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/permissions",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissions__WEBPACK_IMPORTED_MODULE_17__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/voting",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountVoting__WEBPACK_IMPORTED_MODULE_20__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/whitelist",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountWhitelist__WEBPACK_IMPORTED_MODULE_19__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/signedmessages",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountSignedMessages__WEBPACK_IMPORTED_MODULE_18__["default"], passOnProps);
                            }
                        })
                    )
                )
            );
        }
    }]);

    return AccountPage;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPage.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAccount.isRequired
};

AccountPage = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(AccountPage, {
    show_loader: true
});

var AccountPageStoreWrapper = function (_React$Component2) {
    _inherits(AccountPageStoreWrapper, _React$Component2);

    function AccountPageStoreWrapper() {
        _classCallCheck(this, AccountPageStoreWrapper);

        return _possibleConstructorReturn(this, (AccountPageStoreWrapper.__proto__ || Object.getPrototypeOf(AccountPageStoreWrapper)).apply(this, arguments));
    }

    _createClass(AccountPageStoreWrapper, [{
        key: "render",
        value: function render() {
            var account_name = this.props.match.params.account_name;
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPage, _extends({}, this.props, { account: account_name }));
        }
    }]);

    return AccountPageStoreWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(alt_react__WEBPACK_IMPORTED_MODULE_7__["connect"])(AccountPageStoreWrapper, {
    listenTo: function listenTo() {
        return [stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"], stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"], stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_4__["default"]];
    },
    getProps: function getProps() {
        return {
            myActiveAccounts: stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].getState().myActiveAccounts,
            searchAccounts: stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].getState().searchAccounts,
            settings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().settings,
            hiddenAssets: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().hiddenAssets,
            wallet_locked: stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().locked,
            viewSettings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().viewSettings
        };
    }
}));

/***/ }),

/***/ 2537:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1958);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(716);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2259);
/* harmony import */ var stores_AssetStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2258);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(556);
/* harmony import */ var _Modal_BaseModal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1960);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1970);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(709);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _LoadingIndicator__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1819);
/* harmony import */ var _Modal_IssueModal__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2538);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(760);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(1987);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2187);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2516);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(774);


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }





















var AccountAssets = function (_React$Component) {
    _inherits(AccountAssets, _React$Component);

    function AccountAssets(props) {
        _classCallCheck(this, AccountAssets);

        var _this = _possibleConstructorReturn(this, (AccountAssets.__proto__ || Object.getPrototypeOf(AccountAssets)).call(this, props));

        _this.state = {
            create: {
                symbol: "",
                name: "",
                description: "",
                max_supply: 1000000000000000,
                precision: 4
            },
            issue: {
                amount: 0,
                to: "",
                to_id: "",
                asset_id: "",
                symbol: ""
            },
            errors: {
                symbol: null
            },
            isValid: false,
            searchTerm: ""
        };

        _this._searchAccounts = Object(lodash_es_debounce__WEBPACK_IMPORTED_MODULE_0__["default"])(_this._searchAccounts, 150);
        return _this;
    }

    _createClass(AccountAssets, [{
        key: "_checkAssets",
        value: function _checkAssets(assets, force) {
            if (this.props.account.get("assets").size) return;
            var lastAsset = assets.sort(function (a, b) {
                if (a.symbol > b.symbol) {
                    return 1;
                } else if (a.symbol < b.symbol) {
                    return -1;
                } else {
                    return 0;
                }
            }).last();

            if (assets.size === 0 || force) {
                actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__["default"].getAssetList.defer("A", 100);
                this.setState({ assetsFetched: 100 });
            } else if (assets.size >= this.state.assetsFetched) {
                actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__["default"].getAssetList.defer(lastAsset.symbol, 100);
                this.setState({ assetsFetched: this.state.assetsFetched + 99 });
            }
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            this._checkAssets(nextProps.assets);
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            this._checkAssets(this.props.assets, true);
        }
    }, {
        key: "_onIssueInput",
        value: function _onIssueInput(value, e) {
            var key = e.target.id;
            var issue = this.state.issue;


            if (key === "to") {
                this._searchAccounts(e.target.value);
                issue.to = e.target.value;
                var account = this.props.searchAccounts.findEntry(function (name) {
                    return name === e.target.value;
                });

                issue.to_id = account ? account[0] : null;
            } else {
                issue[value] = e.target.value;
            }

            this.setState({ issue: issue });
        }
    }, {
        key: "_searchAccounts",
        value: function _searchAccounts(searchTerm) {
            actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__["default"].accountSearch(searchTerm);
        }
    }, {
        key: "_issueButtonClick",
        value: function _issueButtonClick(asset_id, symbol, e) {
            e.preventDefault();
            var issue = this.state.issue;

            issue.asset_id = asset_id;
            issue.symbol = symbol;
            this.setState({ issue: issue });
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_10___default.a.publish("issue_asset", "open");
        }
    }, {
        key: "_editButtonClick",
        value: function _editButtonClick(symbol, account_name, e) {
            e.preventDefault();
            this.props.history.push("/account/" + account_name + "/update-asset/" + symbol);
        }
    }, {
        key: "_createButtonClick",
        value: function _createButtonClick(account_name) {
            this.props.history.push("/account/" + account_name + "/create-asset");
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var _props = this.props,
                account = _props.account,
                account_name = _props.account_name,
                assets = _props.assets,
                assetsList = _props.assetsList;


            var accountExists = true;
            if (!account) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_LoadingIndicator__WEBPACK_IMPORTED_MODULE_11__["default"], { type: "circle" });
            } else if (account.notFound) {
                accountExists = false;
            }
            if (!accountExists) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "grid-block" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "h5",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            component: "h5",
                            content: "account.errors.not_found",
                            name: account_name
                        })
                    )
                );
            }

            if (assetsList.length) {
                assets = assets.clear();
                assetsList.forEach(function (a) {
                    if (a) assets = assets.set(a.get("id"), a.toJS());
                });
            }
            var myAssets = assets.filter(function (asset) {
                return asset.issuer === account.get("id");
            }).sort(function (a, b) {
                return parseInt(a.id.substring(4, a.id.length), 10) - parseInt(b.id.substring(4, b.id.length), 10);
            }).map(function (asset) {
                var description = common_asset_utils__WEBPACK_IMPORTED_MODULE_14__["default"].parseDescription(asset.options.description);
                var desc = description.short_name ? description.short_name : description.main;

                if (desc.length > 100) {
                    desc = desc.substr(0, 100) + "...";
                }

                var dynamicObject = _this2.props.getDynamicObject(asset.dynamic_asset_data_id);

                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "tr",
                    { key: asset.symbol },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "left" } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"],
                            { to: "/asset/" + asset.symbol },
                            asset.symbol
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "left" } },
                        "bitasset" in asset ? asset.bitasset.is_prediction_market ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.pm" }) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.mpa" }) : "User Issued Asset"
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "right" } },
                        dynamicObject ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_9__["default"], {
                            hide_asset: true,
                            amount: parseInt(dynamicObject.get("current_supply"), 10),
                            asset: asset.id
                        }) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "right" } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_9__["default"], {
                            hide_asset: true,
                            amount: parseInt(asset.options.max_supply, 10),
                            asset: asset.id
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        null,
                        !asset.bitasset_data_id ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "a",
                            {
                                onClick: _this2._issueButtonClick.bind(_this2, asset.id, asset.symbol)
                            },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_18__["default"], {
                                name: "cross-circle",
                                className: "rotate45"
                            })
                        ) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "a",
                            {
                                onClick: _this2._editButtonClick.bind(_this2, asset.symbol, account_name)
                            },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_18__["default"], { name: "dashboard" })
                        )
                    )
                );
            }).toArray();

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tabs"],
                            {
                                segmented: false,
                                setting: "issuedAssetsTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding"
                            },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                { title: "account.user_issued_assets.issued_assets" },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "div",
                                    { className: "content-block" },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "table",
                                        { className: "table dashboard-table" },
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            "thead",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                "tr",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    { style: { textAlign: "left" } },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.symbol" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    { style: { textAlign: "left" } },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.asset.summary.asset_type" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                                    component: "th",
                                                    content: "markets.supply",
                                                    style: { textAlign: "right" }
                                                }),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    {
                                                        style: { textAlign: "right" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.max_supply" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    {
                                                        style: {
                                                            textAlign: "center"
                                                        }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "transaction.trxTypes.asset_issue" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    {
                                                        style: {
                                                            textAlign: "center"
                                                        }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "transaction.trxTypes.asset_update" })
                                                )
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            "tbody",
                                            null,
                                            myAssets
                                        )
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "div",
                                    { className: "content-block" },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "button",
                                        {
                                            className: "button",
                                            onClick: this._createButtonClick.bind(this, account_name)
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "transaction.trxTypes.asset_create" })
                                    )
                                )
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        _Modal_BaseModal__WEBPACK_IMPORTED_MODULE_8__["default"],
                        { id: "issue_asset", overlay: true },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "grid-block vertical" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Modal_IssueModal__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                asset_to_issue: this.state.issue.asset_id,
                                onClose: function onClose() {
                                    react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_10___default.a.publish("issue_asset", "close");
                                }
                            })
                        )
                    )
                )
            );
        }
    }]);

    return AccountAssets;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

AccountAssets.defaultProps = {
    symbol: "",
    name: "",
    description: "",
    max_supply: 0,
    precision: 0
};
AccountAssets.propTypes = {
    symbol: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string.isRequired
};


AccountAssets = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_16__["default"])(AccountAssets, {
    propNames: ["assetsList"],
    asList: true,
    withDynamic: true
});

/* harmony default export */ __webpack_exports__["default"] = (Object(alt_react__WEBPACK_IMPORTED_MODULE_13__["connect"])(AccountAssets, {
    listenTo: function listenTo() {
        return [stores_AssetStore__WEBPACK_IMPORTED_MODULE_6__["default"]];
    },
    getProps: function getProps(props) {
        var assets = Object(immutable__WEBPACK_IMPORTED_MODULE_15__["Map"])(),
            assetsList = Object(immutable__WEBPACK_IMPORTED_MODULE_15__["List"])();
        if (props.account.get("assets", []).size) {
            props.account.get("assets", []).forEach(function (id) {
                assetsList = assetsList.push(id);
            });
        } else {
            assets = stores_AssetStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().assets;
        }
        return { assets: assets, assetsList: assetsList };
    }
}));

/***/ }),

/***/ 2538:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(Buffer) {/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1833);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1834);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(558);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var api_ApplicationApi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(578);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2190);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1969);
/* harmony import */ var actions_NotificationActions__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(580);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }












var IssueModal = function (_React$Component) {
    _inherits(IssueModal, _React$Component);

    function IssueModal(props) {
        _classCallCheck(this, IssueModal);

        var _this = _possibleConstructorReturn(this, (IssueModal.__proto__ || Object.getPrototypeOf(IssueModal)).call(this, props));

        _this.state = {
            amount: props.amount,
            to: props.to,
            to_id: null,
            memo: ""
        };
        return _this;
    }

    _createClass(IssueModal, [{
        key: "onAmountChanged",
        value: function onAmountChanged(_ref) {
            var amount = _ref.amount;

            this.setState({ amount: amount });
        }
    }, {
        key: "onToAccountChanged",
        value: function onToAccountChanged(to) {
            var state = to ? { to: to.get("name"), to_id: to.get("id") } : { to_id: null };
            this.setState(state);
        }
    }, {
        key: "onToChanged",
        value: function onToChanged(to) {
            this.setState({ to: to, to_id: null });
        }
    }, {
        key: "onSubmit",
        value: function onSubmit() {
            var asset_to_issue = this.props.asset_to_issue;

            var precision = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_precision(asset_to_issue.get("precision"));
            var amount = this.state.amount.toString().replace(/,/g, "");
            amount *= precision;

            api_ApplicationApi__WEBPACK_IMPORTED_MODULE_6__["default"].issue_asset(this.state.to_id, asset_to_issue.get("issuer"), asset_to_issue.get("id"), amount, this.state.memo ? new Buffer(this.state.memo, "utf-8") : this.state.memo).catch(function (err) {
                console.log("issue error caught here:", err);
                actions_NotificationActions__WEBPACK_IMPORTED_MODULE_9__["default"].addNotification({
                    message: "Failed to issue the asset, probably due to an invalid amount being issued", //: ${this.state.wallet_public_name}
                    level: "error",
                    autoDismiss: 10
                });
            });

            this.setState({
                amount: 0,
                to: "",
                to_id: null,
                memo: ""
            });
        }
    }, {
        key: "onMemoChanged",
        value: function onMemoChanged(e) {
            this.setState({ memo: e.target.value });
        }
    }, {
        key: "render",
        value: function render() {
            var asset_to_issue = this.props.asset_to_issue.get("id");
            var tabIndex = 1;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "form",
                { className: "grid-block vertical full-width-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-container ", style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_7__["default"], {
                            label: "modal.issue.to",
                            accountName: this.state.to,
                            onAccountChanged: this.onToAccountChanged.bind(this),
                            onChange: this.onToChanged.bind(this),
                            account: this.state.to,
                            tabIndex: tabIndex++
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_8__["default"], {
                            label: "modal.issue.amount",
                            amount: this.state.amount,
                            onChange: this.onAmountChanged.bind(this),
                            asset: asset_to_issue,
                            assets: [asset_to_issue],
                            tabIndex: tabIndex++
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "label",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                component: "span",
                                content: "transfer.memo"
                            }),
                            " ",
                            "(",
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "transfer.optional" }),
                            ")"
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                            rows: "3",
                            value: this.state.memo,
                            tabIndex: tabIndex++,
                            onChange: this.onMemoChanged.bind(this)
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block button-group" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                type: "submit",
                                className: "button primary",
                                onClick: this.onSubmit.bind(this, this.state.to, this.state.amount),
                                disabled: !this.state.to_id || !this.state.amount,
                                tabIndex: tabIndex++
                            },
                            counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("modal.issue.submit")
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                className: "button primary hollow",
                                onClick: this.props.onClose,
                                tabIndex: tabIndex++
                            },
                            counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("cancel")
                        )
                    )
                )
            );
        }
    }]);

    return IssueModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

IssueModal.propTypes = {
    asset_to_issue: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAsset.isRequired
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(IssueModal));
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(414).Buffer))

/***/ }),

/***/ 2539:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AccountAssetCreate", function() { return AccountAssetCreate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BitAssetOptions", function() { return BitAssetOptions; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(931);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2259);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2017);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(558);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(407);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1970);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1833);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1834);
/* harmony import */ var _Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2454);
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(574);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(1987);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2516);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(1969);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(1988);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(chain_asset_constants__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var common_trxHelper__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(572);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_18__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






















var GRAPHENE_MAX_SHARE_SUPPLY = new bignumber_js__WEBPACK_IMPORTED_MODULE_12__["default"](chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_MAX_SHARE_SUPPLY);

var BitAssetOptions = function (_React$Component) {
    _inherits(BitAssetOptions, _React$Component);

    function BitAssetOptions(props) {
        _classCallCheck(this, BitAssetOptions);

        var _this = _possibleConstructorReturn(this, (BitAssetOptions.__proto__ || Object.getPrototypeOf(BitAssetOptions)).call(this, props));

        _this.state = {
            backingAsset: props.backingAsset.get("symbol"),
            error: null
        };
        return _this;
    }

    _createClass(BitAssetOptions, [{
        key: "_onInputBackingAsset",
        value: function _onInputBackingAsset(asset) {
            this.setState({
                backingAsset: asset.toUpperCase(),
                error: null
            });
        }
    }, {
        key: "_onFoundBackingAsset",
        value: function _onFoundBackingAsset(asset) {
            if (asset) {
                var backing = asset.get("bitasset") && bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(asset.getIn(["bitasset", "options", "short_backing_asset"]));
                var backing_backing = backing && backing.get("bitasset") && bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(backing.getIn(["bitasset", "options", "short_backing_asset"]));
                if (backing_backing && backing_backing !== "1.3.0") {
                    this.setState({
                        error: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.error_too_deep")
                    });
                    this.props.onUpdate("invalid", true);
                } else if (!asset.getIn(["bitasset", "is_prediction_market"])) {
                    if (this.props.isPredictionMarket && asset.get("precision") !== parseInt(this.props.assetPrecision, 10)) {
                        this.setState({
                            error: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.error_precision", { asset: this.props.assetSymbol })
                        });
                        this.props.onUpdate("invalid", true);
                    } else {
                        this.props.onUpdate("short_backing_asset", asset.get("id"));
                        this.props.onUpdate("invalid", false);
                    }
                } else {
                    this.setState({
                        error: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.error_invalid")
                    });
                    this.props.onUpdate("invalid", true);
                }
            } else {
                this.props.onUpdate("invalid", true);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var bitasset_opts = this.props.bitasset_opts;
            var error = this.state.error;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "small-12 grid-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.feed_lifetime_sec" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.feed_lifetime_sec / 60,
                        onChange: this.props.onUpdate.bind(this, "feed_lifetime_sec")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.minimum_feeds" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.minimum_feeds,
                        onChange: this.props.onUpdate.bind(this, "minimum_feeds")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.force_settlement_delay_sec" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.force_settlement_delay_sec / 60,
                        onChange: this.props.onUpdate.bind(this, "force_settlement_delay_sec")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.force_settlement_offset_percent" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.force_settlement_offset_percent / chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                        onChange: this.props.onUpdate.bind(this, "force_settlement_offset_percent")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.maximum_force_settlement_volume" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.maximum_force_settlement_volume / chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                        onChange: this.props.onUpdate.bind(this, "maximum_force_settlement_volume")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block no-margin small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_11__["default"], {
                        label: "account.user_issued_assets.backing",
                        onChange: this._onInputBackingAsset.bind(this),
                        asset: this.state.backingAsset,
                        assetInput: this.state.backingAsset,
                        tabIndex: 1,
                        style: { width: "100%", paddingRight: "10px" },
                        onFound: this._onFoundBackingAsset.bind(this)
                    }),
                    error ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block has-error" },
                        error
                    ) : null
                )
            );
        }
    }]);

    return BitAssetOptions;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

BitAssetOptions.propTypes = {
    backingAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainAsset.isRequired,
    isUpdate: prop_types__WEBPACK_IMPORTED_MODULE_18___default.a.bool
};
BitAssetOptions.defaultProps = {
    isUpdate: false
};

BitAssetOptions = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__["default"])(BitAssetOptions);

var AccountAssetCreate = function (_React$Component2) {
    _inherits(AccountAssetCreate, _React$Component2);

    function AccountAssetCreate(props) {
        _classCallCheck(this, AccountAssetCreate);

        var _this2 = _possibleConstructorReturn(this, (AccountAssetCreate.__proto__ || Object.getPrototypeOf(AccountAssetCreate)).call(this, props));

        _this2.state = _this2.resetState(props);
        return _this2;
    }

    _createClass(AccountAssetCreate, [{
        key: "resetState",
        value: function resetState(props) {
            // let asset = props.asset.toJS();
            var isBitAsset = false;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(4);
            var corePrecision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(props.core.get("precision"));

            var _getPermissions2 = this._getPermissions({
                isBitAsset: isBitAsset
            }),
                flagBooleans = _getPermissions2.flagBooleans,
                permissionBooleans = _getPermissions2.permissionBooleans;

            // let flags = assetUtils.getFlags(flagBooleans);
            // let permissions = assetUtils.getPermissions(permissionBooleans, isBitAsset);
            // console.log("all permissions:", permissionBooleans, permissions)

            var coreRateBaseAssetName = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset("1.3.0").get("symbol");

            return {
                update: {
                    symbol: "",
                    precision: 4,
                    max_supply: 100000,
                    max_market_fee: 0,
                    market_fee_percent: 0,
                    description: { main: "" }
                },
                errors: {
                    max_supply: null
                },
                isValid: true,
                flagBooleans: flagBooleans,
                permissionBooleans: permissionBooleans,
                isBitAsset: isBitAsset,
                is_prediction_market: false,
                core_exchange_rate: {
                    quote: {
                        asset_id: null,
                        amount: 1
                    },
                    base: {
                        asset_id: "1.3.0",
                        amount: 1
                    }
                },
                bitasset_opts: {
                    feed_lifetime_sec: 60 * 60 * 24,
                    minimum_feeds: 7,
                    force_settlement_delay_sec: 60 * 60 * 24,
                    force_settlement_offset_percent: 1 * chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                    maximum_force_settlement_volume: 20 * chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                    short_backing_asset: "1.3.0"
                },
                marketInput: ""
            };
        }
    }, {
        key: "_getPermissions",
        value: function _getPermissions(state) {
            var flagBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getFlagBooleans(0, state.isBitAsset);
            var permissionBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getFlagBooleans("all", state.isBitAsset);

            return {
                flagBooleans: flagBooleans,
                permissionBooleans: permissionBooleans
            };
        }
    }, {
        key: "_createAsset",
        value: function _createAsset(e) {
            e.preventDefault();
            var _state = this.state,
                update = _state.update,
                flagBooleans = _state.flagBooleans,
                permissionBooleans = _state.permissionBooleans,
                core_exchange_rate = _state.core_exchange_rate,
                isBitAsset = _state.isBitAsset,
                is_prediction_market = _state.is_prediction_market,
                bitasset_opts = _state.bitasset_opts;
            var account = this.props.account;


            var flags = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getFlags(flagBooleans, isBitAsset);
            var permissions = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getPermissions(permissionBooleans, isBitAsset);

            if (this.state.marketInput !== update.description.market) {
                update.description.market = "";
            }
            var description = JSON.stringify(update.description);

            actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__["default"].createAsset(account.get("id"), update, flags, permissions, core_exchange_rate, isBitAsset, is_prediction_market, bitasset_opts, description).then(function (result) {
                console.log("... AssetActions.createAsset(account_id, update)", account.get("id"), update, flags, permissions);
            });
        }
    }, {
        key: "_hasChanged",
        value: function _hasChanged() {
            return !common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].are_equal_shallow(this.state, this.resetState(this.props));
        }
    }, {
        key: "_reset",
        value: function _reset(e) {
            e.preventDefault();

            this.setState(this.resetState(this.props));
        }
    }, {
        key: "_forcePositive",
        value: function _forcePositive(number) {
            return parseFloat(number) < 0 ? "0" : number;
        }
    }, {
        key: "_onUpdateDescription",
        value: function _onUpdateDescription(value, e) {
            var update = this.state.update;

            var updateState = true;

            switch (value) {
                case "condition":
                    if (e.target.value.length > 60) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "short_name":
                    if (e.target.value.length > 32) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "market":
                    update.description[value] = e;
                    break;

                case "visible":
                    update.description[value] = !update.description[value];
                    break;

                default:
                    update.description[value] = e.target.value;
                    break;
            }

            if (updateState) {
                this.forceUpdate();
                this._validateEditFields(update);
            }
        }
    }, {
        key: "onChangeBitAssetOpts",
        value: function onChangeBitAssetOpts(value, e) {
            var _state2 = this.state,
                bitasset_opts = _state2.bitasset_opts,
                errors = _state2.errors;


            switch (value) {
                case "force_settlement_offset_percent":
                case "maximum_force_settlement_volume":
                    bitasset_opts[value] = parseFloat(e.target.value) * chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT;
                    break;
                case "minimum_feeds":
                    bitasset_opts[value] = parseInt(e.target.value, 10);
                    break;
                case "feed_lifetime_sec":
                case "force_settlement_delay_sec":
                    console.log(e.target.value, parseInt(parseFloat(e.target.value) * 60, 10));
                    bitasset_opts[value] = parseInt(parseFloat(e.target.value) * 60, 10);
                    break;

                case "short_backing_asset":
                    bitasset_opts[value] = e;
                    break;

                case "invalid":
                    errors.invalid_bitasset = e;
                    break;

                default:
                    bitasset_opts[value] = e.target.value;
                    break;
            }

            var isValid = !errors.symbol && !errors.max_supply && !errors.invalid_bitasset;

            this.setState({ isValid: isValid, errors: errors });
        }
    }, {
        key: "_onUpdateInput",
        value: function _onUpdateInput(value, e) {
            var _state3 = this.state,
                update = _state3.update,
                errors = _state3.errors;

            var updateState = true;
            var shouldRestoreCursor = false;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(this.state.update.precision);
            var target = e.target;
            var caret = target.selectionStart;
            var inputValue = target.value;

            switch (value) {
                case "market_fee_percent":
                    update[value] = this._forcePositive(target.value);
                    break;

                case "max_market_fee":
                    if (new bignumber_js__WEBPACK_IMPORTED_MODULE_12__["default"](inputValue).times(precision).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                        errors.max_market_fee = "The number you tried to enter is too large";
                        return this.setState({ errors: errors });
                    }
                    target.value = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(target.value, this.state.update.precision);
                    update[value] = target.value;
                    break;

                case "precision":
                    // Enforce positive number
                    update[value] = this._forcePositive(target.value);
                    break;

                case "max_supply":
                    shouldRestoreCursor = true;

                    var regexp_numeral = new RegExp(/[[:digit:]]/);

                    // Ensure input is valid
                    if (!regexp_numeral.test(target.value)) {
                        target.value = target.value.replace(/[^0-9.]/g, "");
                    }

                    // Catch initial decimal input
                    if (target.value.charAt(0) == ".") {
                        target.value = "0.";
                    }

                    // Catch double decimal and remove if invalid
                    if (target.value.charAt(target.value.length) != target.value.search(".")) {
                        target.value.substr(1);
                    }

                    target.value = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(target.value, this.state.update.precision);
                    update[value] = target.value;

                    // if ((new big(target.value)).times(Math.pow(10, precision).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                    //     return this.setState({
                    //         update,
                    //         errors: {max_supply: "The number you tried to enter is too large"
                    //     }});
                    // }
                    break;

                case "symbol":
                    shouldRestoreCursor = true;
                    // Enforce uppercase
                    var symbol = target.value.toUpperCase();
                    // Enforce characters
                    var regexp = new RegExp("^[.A-Z0-9]+$");
                    if (symbol !== "" && !regexp.test(symbol)) {
                        break;
                    }
                    bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(symbol);
                    update[value] = this._forcePositive(symbol);
                    break;

                default:
                    update[value] = target.value;
                    break;
            }

            if (updateState) {
                this.setState({ update: update }, function () {
                    if (shouldRestoreCursor) {
                        var selectionStart = caret - (inputValue.length - update[value].length);
                        target.setSelectionRange(selectionStart, selectionStart);
                    }
                });
                this._validateEditFields(update);
            }
        }
    }, {
        key: "_validateEditFields",
        value: function _validateEditFields(new_state) {
            var errors = this.state.errors;

            errors.max_supply = null;

            errors.symbol = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainValidation"].is_valid_symbol_error(new_state.symbol);
            var existingAsset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(new_state.symbol);
            if (existingAsset) {
                errors.symbol = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.exists");
            }

            try {
                errors.max_supply = new_state.max_supply <= 0 ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.max_positive") : new bignumber_js__WEBPACK_IMPORTED_MODULE_12__["default"](new_state.max_supply).times(Math.pow(10, new_state.precision)).gt(GRAPHENE_MAX_SHARE_SUPPLY) ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large") : null;
            } catch (err) {
                console.log("err:", err);
                errors.max_supply = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large");
            }

            var isValid = !errors.symbol && !errors.max_supply && !errors.invalid_bitasset;

            this.setState({ isValid: isValid, errors: errors });
        }
    }, {
        key: "_onFlagChange",
        value: function _onFlagChange(key) {
            var booleans = this.state.flagBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                flagBooleans: booleans
            });
        }
    }, {
        key: "_onPermissionChange",
        value: function _onPermissionChange(key) {
            var booleans = this.state.permissionBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                permissionBooleans: booleans
            });
        }
    }, {
        key: "_onInputCoreAsset",
        value: function _onInputCoreAsset(type, asset) {
            if (type === "quote") {
                this.setState({
                    quoteAssetInput: asset
                });
            } else if (type === "base") {
                this.setState({
                    baseAssetInput: asset
                });
            }
        }
    }, {
        key: "_onFoundCoreAsset",
        value: function _onFoundCoreAsset(type, asset) {
            if (asset) {
                var core_rate = this.state.core_exchange_rate;
                core_rate[type].asset_id = asset.get("id");

                this.setState({
                    core_exchange_rate: core_rate
                });

                this._validateEditFields({
                    max_supply: this.state.max_supply,
                    core_exchange_rate: core_rate
                });
            }
        }
    }, {
        key: "_onInputMarket",
        value: function _onInputMarket(asset) {
            this.setState({
                marketInput: asset
            });
        }
    }, {
        key: "_onFoundMarketAsset",
        value: function _onFoundMarketAsset(asset) {
            if (asset) {
                this._onUpdateDescription("market", asset.get("symbol"));
            }
        }
    }, {
        key: "_onCoreRateChange",
        value: function _onCoreRateChange(type, e) {
            var amount = void 0,
                asset = void 0;
            if (type === "quote") {
                amount = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(e.target.value, this.state.update.precision);
                asset = null;
            } else {
                if (!e || !("amount" in e)) {
                    return;
                }
                amount = e.amount == "" ? "0" : common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(e.amount.toString().replace(/,/g, ""), this.props.core.get("precision"));
                asset = e.asset.get("id");
            }

            var core_exchange_rate = this.state.core_exchange_rate;

            core_exchange_rate[type] = {
                amount: amount,
                asset_id: asset
            };
            this.forceUpdate();
        }
    }, {
        key: "_onToggleBitAsset",
        value: function _onToggleBitAsset() {
            var update = this.state.update;

            this.state.isBitAsset = !this.state.isBitAsset;
            if (!this.state.isBitAsset) {
                this.state.is_prediction_market = false;
            }

            var _getPermissions3 = this._getPermissions(this.state),
                flagBooleans = _getPermissions3.flagBooleans,
                permissionBooleans = _getPermissions3.permissionBooleans;

            this.state.flagBooleans = flagBooleans;
            this.state.permissionBooleans = permissionBooleans;

            this.forceUpdate();
        }
    }, {
        key: "_onTogglePM",
        value: function _onTogglePM() {
            this.state.is_prediction_market = !this.state.is_prediction_market;
            this.state.update.precision = this.props.core.get("precision");
            this.state.core_exchange_rate.base.asset_id = this.props.core.get("id");
            this.forceUpdate();
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                globalObject = _props.globalObject,
                core = _props.core;
            var _state4 = this.state,
                errors = _state4.errors,
                isValid = _state4.isValid,
                update = _state4.update,
                flagBooleans = _state4.flagBooleans,
                permissionBooleans = _state4.permissionBooleans,
                core_exchange_rate = _state4.core_exchange_rate,
                is_prediction_market = _state4.is_prediction_market,
                isBitAsset = _state4.isBitAsset,
                bitasset_opts = _state4.bitasset_opts;

            // Estimate the asset creation fee from the symbol character length

            var symbolLength = update.symbol.length,
                createFee = "N/A";

            if (symbolLength === 3) {
                createFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__["default"], {
                    amount: Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_17__["estimateFee"])("asset_create", ["symbol3"], globalObject),
                    asset: "1.3.0"
                });
            } else if (symbolLength === 4) {
                createFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__["default"], {
                    amount: Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_17__["estimateFee"])("asset_create", ["symbol4"], globalObject),
                    asset: "1.3.0"
                });
            } else if (symbolLength > 4) {
                createFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__["default"], {
                    amount: Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_17__["estimateFee"])("asset_create", ["long_symbol"], globalObject),
                    asset: "1.3.0"
                });
            }

            // Loop over flags
            var flags = [];
            var getFlag = function getFlag(key, onClick, isChecked) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { key: "table_" + key, className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none", width: "80%" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.user_issued_assets." + key
                                }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "switch",
                                        style: { marginBottom: "10px" },
                                        onClick: onClick
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                        type: "checkbox",
                                        checked: isChecked
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                )
                            )
                        )
                    )
                );
            };
            for (var key in permissionBooleans) {
                if (permissionBooleans[key] && key !== "charge_market_fee") {
                    flags.push(getFlag(key, this._onFlagChange.bind(this, key), flagBooleans[key]));
                }
            }

            flags.push(getFlag("visible", this._onUpdateDescription.bind(this, "visible"), update.description.visible ? false : update.description.visible === false ? true : false));

            // Loop over permissions
            var permissions = [];
            for (var _key in permissionBooleans) {
                permissions.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { key: "table_" + _key, className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none", width: "80%" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.user_issued_assets." + _key
                                }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "switch",
                                        style: { marginBottom: "10px" },
                                        onClick: this._onPermissionChange.bind(this, _key)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                        type: "checkbox",
                                        checked: permissionBooleans[_key],
                                        onChange: function onChange() {}
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                )
                            )
                        )
                    )
                ));
            }

            var confirmButtons = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: "button",
                        onClick: this._reset.bind(this),
                        value: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.perm.reset")
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.reset" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_2___default()("button", { disabled: !isValid }),
                        onClick: this._createAsset.bind(this)
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "header.create_asset" })
                )
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "tabs-header" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "h3",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "header.create_asset" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tabs"],
                            {
                                setting: "createAssetTab",
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block",
                                contentClass: "grid-block shrink small-vertical medium-horizontal padding",
                                segmented: false,
                                actionButtons: confirmButtons
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.primary" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.symbol" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            value: update.symbol,
                                            onChange: this._onUpdateInput.bind(this, "symbol")
                                        })
                                    ),
                                    errors.symbol ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.symbol
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.max_supply" }),
                                        " ",
                                        update.symbol ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "span",
                                            null,
                                            "(",
                                            update.symbol,
                                            ")"
                                        ) : null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            value: update.max_supply,
                                            onChange: this._onUpdateInput.bind(this, "max_supply")
                                        })
                                    ),
                                    errors.max_supply ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.max_supply
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.decimals" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            min: "0",
                                            max: "8",
                                            step: "1",
                                            type: "range",
                                            value: update.precision,
                                            onChange: this._onUpdateInput.bind(this, "precision")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        update.precision
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        {
                                            style: { marginBottom: 10 },
                                            className: "txtlabel cancel"
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.precision_warning" })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "table",
                                        {
                                            className: "table",
                                            style: { width: "inherit" }
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tbody",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tr",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    { style: { border: "none" } },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                                        content: "account.user_issued_assets.mpa"
                                                    }),
                                                    ":"
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    { style: { border: "none" } },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "div",
                                                        {
                                                            className: "switch",
                                                            style: {
                                                                marginBottom: "10px"
                                                            },
                                                            onClick: this._onToggleBitAsset.bind(this)
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                            type: "checkbox",
                                                            checked: isBitAsset
                                                        }),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                                    )
                                                )
                                            )
                                        )
                                    ),
                                    isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "table",
                                        {
                                            className: "table",
                                            style: { width: "inherit" }
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tbody",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tr",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    {
                                                        style: { border: "none" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                                        content: "account.user_issued_assets.pm"
                                                    }),
                                                    ":"
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    {
                                                        style: { border: "none" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "div",
                                                        {
                                                            className: "switch",
                                                            style: {
                                                                marginBottom: "10px"
                                                            },
                                                            onClick: this._onTogglePM.bind(this)
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                            type: "checkbox",
                                                            checked: is_prediction_market
                                                        }),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                                    )
                                                )
                                            )
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.core_exchange_rate"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "grid-block no-margin" },
                                            errors.quote_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.quote_asset
                                            ) : null,
                                            errors.base_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.base_asset
                                            ) : null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    {
                                                        className: "amount-selector",
                                                        style: {
                                                            width: "100%",
                                                            paddingRight: "10px"
                                                        }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                                        component: "label",
                                                        content: "account.user_issued_assets.quote"
                                                    }),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "div",
                                                        { className: "inline-label" },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                            type: "text",
                                                            placeholder: "0.0",
                                                            onChange: this._onCoreRateChange.bind(this, "quote"),
                                                            value: core_exchange_rate.quote.amount
                                                        })
                                                    )
                                                )
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                                    label: "account.user_issued_assets.base",
                                                    amount: core_exchange_rate.base.amount,
                                                    onChange: this._onCoreRateChange.bind(this, "base"),
                                                    asset: core_exchange_rate.base.asset_id,
                                                    assets: [core_exchange_rate.base.asset_id],
                                                    placeholder: "0.0",
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingLeft: "10px"
                                                    }
                                                })
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "h5",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "exchange.price" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "span",
                                                    null,
                                                    ":",
                                                    " ",
                                                    common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].format_number(common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_price(core_exchange_rate.quote.amount * common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(update.precision), {
                                                        precision: update.precision
                                                    }, core_exchange_rate.base.amount * common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(core), core), 2 + (parseInt(update.precision, 10) || 8))
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "span",
                                                    null,
                                                    " ",
                                                    update.symbol,
                                                    "/",
                                                    core.get("symbol")
                                                )
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_1",
                                            component: "label",
                                            className: "has-error"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_2",
                                            component: "p"
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        createFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.description" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "label",
                                        content: "account.user_issued_assets.description"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                            style: { height: "7rem" },
                                            rows: "1",
                                            value: update.description.main,
                                            onChange: this._onUpdateDescription.bind(this, "main")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "label",
                                        content: "account.user_issued_assets.short"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            rows: "1",
                                            value: update.description.short_name,
                                            onChange: this._onUpdateDescription.bind(this, "short_name")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "label",
                                        content: "account.user_issued_assets.market"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_11__["default"], {
                                        label: "account.user_issued_assets.name",
                                        onChange: this._onInputMarket.bind(this),
                                        asset: this.state.marketInput,
                                        assetInput: this.state.marketInput,
                                        style: {
                                            width: "100%",
                                            paddingRight: "10px"
                                        },
                                        onFound: this._onFoundMarketAsset.bind(this)
                                    }),
                                    is_prediction_market ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.condition"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "text",
                                                rows: "1",
                                                value: update.description.condition,
                                                onChange: this._onUpdateDescription.bind(this, "condition")
                                            })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.expiry"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "date",
                                                value: update.description.expiry,
                                                onChange: this._onUpdateDescription.bind(this, "expiry")
                                            })
                                        )
                                    ) : null
                                )
                            ),
                            isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.bitasset_opts" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BitAssetOptions, {
                                    bitasset_opts: bitasset_opts,
                                    onUpdate: this.onChangeBitAssetOpts.bind(this),
                                    backingAsset: bitasset_opts.short_backing_asset,
                                    assetPrecision: update.precision,
                                    assetSymbol: update.symbol,
                                    isPredictionMarket: is_prediction_market
                                })
                            ) : null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.permissions" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { maxWidth: 800 } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                            path: "components/AccountAssetCreate",
                                            section: "permissions"
                                        })
                                    ),
                                    permissions
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.flags" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { maxWidth: 800 } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                            path: "components/AccountAssetCreate",
                                            section: "flags"
                                        })
                                    ),
                                    permissionBooleans["charge_market_fee"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.market_fee"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "table",
                                            { className: "table" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tbody",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "tr",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        {
                                                            style: {
                                                                border: "none",
                                                                width: "80%"
                                                            }
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.charge_market_fee" }),
                                                        ":"
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        {
                                                            style: {
                                                                border: "none"
                                                            }
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "div",
                                                            {
                                                                className: "switch",
                                                                style: {
                                                                    marginBottom: "10px"
                                                                },
                                                                onClick: this._onFlagChange.bind(this, "charge_market_fee")
                                                            },
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                                type: "checkbox",
                                                                checked: flagBooleans.charge_market_fee
                                                            }),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                                        )
                                                    )
                                                )
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_2___default()({
                                                    disabled: !flagBooleans.charge_market_fee
                                                })
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.market_fee" }),
                                                " ",
                                                "(%)",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                    type: "number",
                                                    value: update.market_fee_percent,
                                                    onChange: this._onUpdateInput.bind(this, "market_fee_percent")
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.max_market_fee" }),
                                                " ",
                                                "(",
                                                update.symbol,
                                                ")",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                    type: "number",
                                                    value: update.max_market_fee,
                                                    onChange: this._onUpdateInput.bind(this, "max_market_fee")
                                                })
                                            ),
                                            errors.max_market_fee ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.max_market_fee
                                            ) : null
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "h3",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.flags" })
                                    ),
                                    flags
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountAssetCreate;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountAssetCreate.propTypes = {
    core: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainAsset.isRequired,
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainObject.isRequired
};
AccountAssetCreate.defaultProps = {
    globalObject: "2.0.0",
    core: "1.3.0"
};


AccountAssetCreate = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__["default"])(AccountAssetCreate);



/***/ }),

/***/ 2540:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(931);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2259);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2017);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(558);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(407);
/* harmony import */ var _Utility_FormattedFee__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2541);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1833);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1834);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2187);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1969);
/* harmony import */ var _Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2306);
/* harmony import */ var _Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2454);
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(574);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(1987);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2516);
/* harmony import */ var _AccountAssetCreate__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2539);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(1988);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(chain_asset_constants__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var _AssetWhitelist__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2542);
/* harmony import */ var _AssetFeedProducers__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(2543);
/* harmony import */ var components_Modal_BaseModal__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(1960);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(709);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(716);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }




























var GRAPHENE_MAX_SHARE_SUPPLY = new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](chain_asset_constants__WEBPACK_IMPORTED_MODULE_19___default.a.GRAPHENE_MAX_SHARE_SUPPLY);

var AccountAssetUpdate = function (_React$Component) {
    _inherits(AccountAssetUpdate, _React$Component);

    function AccountAssetUpdate(props) {
        _classCallCheck(this, AccountAssetUpdate);

        var _this = _possibleConstructorReturn(this, (AccountAssetUpdate.__proto__ || Object.getPrototypeOf(AccountAssetUpdate)).call(this, props));

        _this.state = _this.resetState(props);
        return _this;
    }

    _createClass(AccountAssetUpdate, [{
        key: "_openConfirm",
        value: function _openConfirm() {
            this.refs.confirm_modal.show();
        }
    }, {
        key: "_cancelConfirm",
        value: function _cancelConfirm() {
            this.refs.confirm_modal.onClose();
        }
    }, {
        key: "resetState",
        value: function resetState(props) {
            var asset = props.asset.toJS();
            var isBitAsset = asset.bitasset_data_id !== undefined;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(asset.precision);
            var corePrecision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(props.core.get("precision"));

            var max_market_fee = new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](asset.options.max_market_fee).div(precision).toString();
            var max_supply = new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](asset.options.max_supply).div(precision).toString();
            var core_exchange_rate = asset.options.core_exchange_rate;
            core_exchange_rate.quote.amount = core_exchange_rate.quote.asset_id === asset.id ? new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](core_exchange_rate.quote.amount).div(precision).toString() : new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](core_exchange_rate.quote.amount).div(corePrecision).toString();

            core_exchange_rate.base.amount = core_exchange_rate.base.asset_id === asset.id ? new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](core_exchange_rate.base.amount).div(precision).toString() : new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](core_exchange_rate.base.amount).div(corePrecision).toString();

            var flagBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlagBooleans(asset.options.flags, isBitAsset);
            var permissionBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlagBooleans(asset.options.issuer_permissions, isBitAsset);
            asset.options.market_fee_percent /= 100;

            var coreRateQuoteAssetName = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.quote.asset_id).get("symbol");
            var coreRateBaseAssetName = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.base.asset_id).get("symbol");

            return {
                update: {
                    max_supply: max_supply,
                    max_market_fee: max_market_fee,
                    market_fee_percent: asset.options.market_fee_percent,
                    description: common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].parseDescription(asset.options.description)
                },
                core_exchange_rate: core_exchange_rate,
                issuer: asset.issuer,
                new_issuer_account_id: null,
                new_funder_account: props.account.get("id"),
                asset_to_update: asset.id,
                errors: {
                    max_supply: null
                },
                new_authority_id: null,
                authority_name: null,
                isValid: true,
                flagBooleans: flagBooleans,
                permissionBooleans: permissionBooleans,
                isBitAsset: isBitAsset,
                coreRateQuoteAssetName: coreRateQuoteAssetName,
                quoteAssetInput: coreRateQuoteAssetName,
                coreRateBaseAssetName: coreRateBaseAssetName,
                baseAssetInput: coreRateBaseAssetName,
                claimFeesAmount: 0,
                bitasset_opts: isBitAsset ? asset.bitasset.options : null,
                original_bitasset_opts: isBitAsset ? props.asset.getIn(["bitasset", "options"]).toJS() : null,
                marketInput: "",
                whitelist_authorities: props.asset.getIn(["options", "whitelist_authorities"]),
                blacklist_authorities: props.asset.getIn(["options", "blacklist_authorities"]),
                whitelist_markets: props.asset.getIn(["options", "whitelist_markets"]),
                blacklist_markets: props.asset.getIn(["options", "blacklist_markets"]),
                maxFeedProducers: props.globalObject.getIn(["parameters", "maximum_asset_feed_publishers"]),
                feedProducers: isBitAsset ? props.asset.getIn(["bitasset", "feeds"], []).map(function (a) {
                    return a.first();
                }) : null,
                originalFeedProducers: isBitAsset ? props.asset.getIn(["bitasset", "feeds"], []).map(function (a) {
                    return a.first();
                }) : null
            };
        }

        // Using JSON.stringify for (fast?) comparsion, could be improved, but seems enough here as the order is fixed

    }, {
        key: "assetChanged",
        value: function assetChanged() {
            var s = this.state;
            var p = this.resetState(this.props);
            return JSON.stringify(s.update) !== JSON.stringify(p.update) || JSON.stringify(s.core_exchange_rate) !== JSON.stringify(p.core_exchange_rate) || s.new_issuer_account_id !== null && s.new_issuer_account_id !== s.issuer || JSON.stringify(s.flagBooleans) !== JSON.stringify(p.flagBooleans) || JSON.stringify(s.permissionBooleans) !== JSON.stringify(p.permissionBooleans) || JSON.stringify(s.whitelist_authorities) !== JSON.stringify(p.whitelist_authorities) || JSON.stringify(s.blacklist_authorities) !== JSON.stringify(p.blacklist_authorities) || JSON.stringify(s.whitelist_markets) !== JSON.stringify(p.whitelist_markets) || JSON.stringify(s.blacklist_markets) !== JSON.stringify(p.blacklist_markets);
        }

        // Return tab ID on change

    }, {
        key: "tabChanged",
        value: function tabChanged(tabId) {
            var tabsChanged = this.tabsChanged();
            return tabsChanged[tabId] ? tabsChanged[tabId] : false;
        }
    }, {
        key: "tabsChanged",
        value: function tabsChanged() {
            var s = this.state;
            var p = this.resetState(this.props);

            var tabUpdateIndex = [];

            /* Primary */
            if (s.update.max_supply !== p.update.max_supply || s.core_exchange_rate.base.amount !== p.core_exchange_rate.base.amount || s.core_exchange_rate.quote.amount !== p.core_exchange_rate.quote.amount) tabUpdateIndex["0"] = true;

            /* Whitelist */
            if (JSON.stringify(s.whitelist_authorities) !== JSON.stringify(p.whitelist_authorities) || JSON.stringify(s.blacklist_authorities) !== JSON.stringify(p.blacklist_authorities) || JSON.stringify(s.whitelist_markets) !== JSON.stringify(p.whitelist_markets) || JSON.stringify(s.blacklist_markets) !== JSON.stringify(p.blacklist_markets)) tabUpdateIndex["1"] = true;

            /* Description */
            if (s.update.description.main !== p.update.description.main || s.update.description.short_name !== p.update.description.short_name || s.update.description.market !== p.update.description.market) tabUpdateIndex["2"] = true;

            /* Bitasset options */
            if (JSON.stringify(s.bitasset_opts) !== JSON.stringify(p.original_bitasset_opts)) tabUpdateIndex["3"] = true;

            /* Permissions */
            if (JSON.stringify(s.permissionBooleans) !== JSON.stringify(p.permissionBooleans)) tabUpdateIndex["4"] = true;

            /* Flags */
            if (JSON.stringify(s.flagBooleans) !== JSON.stringify(p.flagBooleans) || s.update.market_fee_percent !== p.update.market_fee_percent || s.update.max_market_fee !== p.update.max_market_fee) tabUpdateIndex["5"] = true;

            if (JSON.stringify(s.feedProducers) !== JSON.stringify(p.originalFeedProducers)) tabUpdateIndex["6"] = true;

            return tabUpdateIndex;
        }
    }, {
        key: "pageChanged",
        value: function pageChanged() {
            var _state = this.state,
                isBitAsset = _state.isBitAsset,
                bitasset_opts = _state.bitasset_opts,
                original_bitasset_opts = _state.original_bitasset_opts,
                feedProducers = _state.feedProducers,
                originalFeedProducers = _state.originalFeedProducers;

            return this.assetChanged() || isBitAsset && (JSON.stringify(bitasset_opts) !== JSON.stringify(original_bitasset_opts) || !common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].are_equal_shallow(feedProducers.toJS(), originalFeedProducers.toJS()));
        }
    }, {
        key: "_updateAsset",
        value: function _updateAsset(e) {
            var _this2 = this;

            e.preventDefault();

            // Close confirm_modal if it's open
            this.refs.confirm_modal.onClose();

            var _state2 = this.state,
                update = _state2.update,
                issuer = _state2.issuer,
                new_issuer_account_id = _state2.new_issuer_account_id,
                core_exchange_rate = _state2.core_exchange_rate,
                flagBooleans = _state2.flagBooleans,
                permissionBooleans = _state2.permissionBooleans,
                isBitAsset = _state2.isBitAsset,
                bitasset_opts = _state2.bitasset_opts,
                original_bitasset_opts = _state2.original_bitasset_opts,
                feedProducers = _state2.feedProducers,
                originalFeedProducers = _state2.originalFeedProducers;


            var flags = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlags(flagBooleans);

            // Handle incorrect flag from genesis
            if (this.props.asset.getIn(["options", "flags"]) & 128 && !(this.props.asset.getIn(["options", "issuer_permissions"]) & 128)) {
                flags += 128;
            }
            var permissions = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getPermissions(permissionBooleans, isBitAsset);

            if (this.state.marketInput !== update.description.market) {
                update.description.market = "";
            }
            var description = JSON.stringify(update.description);

            var auths = {
                whitelist_authorities: this.state.whitelist_authorities,
                blacklist_authorities: this.state.blacklist_authorities,
                whitelist_markets: this.state.whitelist_markets,
                blacklist_markets: this.state.blacklist_markets
            };

            var feedProducersJS = isBitAsset ? feedProducers.toJS() : null;
            var originalFeedProducersJS = isBitAsset ? originalFeedProducers.toJS() : null;

            actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__["default"].updateAsset(issuer, new_issuer_account_id, update, core_exchange_rate, this.props.asset, flags, permissions, isBitAsset, bitasset_opts, original_bitasset_opts, description, auths, feedProducersJS, originalFeedProducersJS, this.assetChanged()).then(function () {
                console.log("... AssetActions.updateAsset(account_id, update)", issuer, new_issuer_account_id, _this2.props.asset.get("id"), update);
                setTimeout(function () {
                    bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(_this2.props.asset.get("id"));
                    _this2.setState(_this2.resetState(_this2.props));
                }, 3000);
            });
        }
    }, {
        key: "_reset",
        value: function _reset(e) {
            e.preventDefault();

            this.setState(this.resetState(this.props));
        }
    }, {
        key: "_forcePositive",
        value: function _forcePositive(number) {
            return parseFloat(number) < 0 ? "0" : number;
        }
    }, {
        key: "_onUpdateDescription",
        value: function _onUpdateDescription(value, e) {
            var update = this.state.update;

            var updateState = true;

            switch (value) {
                case "condition":
                    if (e.target.value.length > 60) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "short_name":
                    if (e.target.value.length > 32) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "market":
                    update.description[value] = e;
                    break;

                case "visible":
                    update.description[value] = !update.description[value];
                    break;

                default:
                    update.description[value] = e.target.value;
                    break;
            }

            if (updateState) {
                this.forceUpdate();
                this._validateEditFields(update);
            }
        }
    }, {
        key: "onChangeBitAssetOpts",
        value: function onChangeBitAssetOpts(value, e) {
            var bitasset_opts = this.state.bitasset_opts;


            switch (value) {
                case "force_settlement_offset_percent":
                case "maximum_force_settlement_volume":
                    bitasset_opts[value] = parseFloat(e.target.value) * chain_asset_constants__WEBPACK_IMPORTED_MODULE_19___default.a.GRAPHENE_1_PERCENT;
                    break;

                case "feed_lifetime_sec":
                case "force_settlement_delay_sec":
                    console.log(e.target.value, parseInt(parseFloat(e.target.value) * 60, 10));
                    bitasset_opts[value] = parseInt(parseFloat(e.target.value) * 60, 10);
                    break;

                case "short_backing_asset":
                    bitasset_opts[value] = e;
                    break;

                default:
                    break;
            }

            this.forceUpdate();
        }
    }, {
        key: "_onUpdateInput",
        value: function _onUpdateInput(value, e) {
            var update = this.state.update;

            var updateState = true;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(this.props.asset.get("precision"));

            switch (value) {
                case "market_fee_percent":
                    update[value] = this._forcePositive(e.target.value);
                    break;

                case "max_market_fee":
                    var marketFee = e.amount.replace(/,/g, "");
                    if (new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](marketFee).times(precision).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                        updateState = false;
                        return this.setState({
                            errors: {
                                max_market_fee: "The number you tried to enter is too large"
                            }
                        });
                    }
                    update[value] = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(marketFee, this.props.asset.get("precision"));
                    break;

                case "max_supply":
                    var maxSupply = e.amount.replace(/,/g, "");
                    // try {
                    //     if ((new big(maxSupply)).times(Math.pow(10, precision)).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                    //         updateState = false;
                    //         return this.setState({errors: {max_supply: "The number you tried to enter is too large"}});
                    //     }
                    update[value] = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(maxSupply, this.props.asset.get("precision"));
                    // } catch(e) {}
                    break;

                default:
                    update[value] = e.target.value;
                    break;
            }

            if (updateState) {
                this.setState({ update: update });
                this._validateEditFields(update);
            }
        }
    }, {
        key: "_validateEditFields",
        value: function _validateEditFields(new_state) {
            var cer = new_state.core_exchange_rate;
            var feedProducers = new_state.feedProducers ? new_state.feedProducers : this.state.feedProducers;
            var flagBooleans = this.state.flagBooleans;
            var _props = this.props,
                asset = _props.asset,
                core = _props.core;


            var errors = {
                max_supply: null,
                quote_asset: null,
                base_asset: null,
                max_feed_producer: null,
                conflict_producer: null,
                invalid_market_pair: null
            };

            var p = this.props.asset.get("precision");
            try {
                errors.max_supply = new_state.max_supply <= 0 ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.max_positive") : new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](parseInt(new_state.max_supply, 10)).times(Math.pow(10, p)).gt(GRAPHENE_MAX_SHARE_SUPPLY) ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large") : null;
            } catch (err) {
                console.log("err:", err);
                errors.max_supply = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large");
            }

            if (cer) {
                if (cer.quote.asset_id !== asset.get("id") && cer.base.asset_id !== asset.get("id")) {
                    errors.quote_asset = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.need_asset", { name: asset.get("symbol") });
                }

                if (cer.quote.asset_id !== core.get("id") && cer.base.asset_id !== core.get("id")) {
                    errors.base_asset = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.need_asset", { name: core.get("symbol") });
                }
            }
            if (feedProducers) {
                if (feedProducers.size > this.state.maxFeedProducers) {
                    errors.max_feed_producer = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_many_feed", { max: this.state.maxFeedProducers });
                }
            }
            if (flagBooleans.committee_fed_asset && flagBooleans.witness_fed_asset) {
                errors.conflict_producer = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.conflict_feed");
            }

            if (this.state.marketInput == this.props.asset.get("symbol")) {
                errors.invalid_market_pair = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.invalid_market_pair");
            }

            var isValid = !errors.invalid_market_pair && !errors.max_supply && !errors.base_asset && !errors.quote_asset && !errors.max_feed_producer && !errors.conflict_producer;

            this.setState({ isValid: isValid, errors: errors });
        }
    }, {
        key: "_onCoreRateChange",
        value: function _onCoreRateChange(type, amount) {
            amount.amount = amount.amount == "" ? "0" : amount.amount.replace(/,/g, "");

            amount.amount = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(amount.amount, amount.asset.get("precision"));

            var core_exchange_rate = this.state.core_exchange_rate;

            core_exchange_rate[type] = {
                amount: amount.amount,
                asset_id: amount.asset.get("id")
            };
            this.forceUpdate();
        }
    }, {
        key: "onAccountChanged",
        value: function onAccountChanged(key, account) {
            this.setState(_defineProperty({}, key, account ? account.get("id") : null));
        }
    }, {
        key: "onAccountNameChanged",
        value: function onAccountNameChanged(key, name) {
            this.setState(_defineProperty({}, key, name));
        }
    }, {
        key: "_onInputCoreAsset",
        value: function _onInputCoreAsset(type, asset) {
            if (type === "quote") {
                this.setState({
                    quoteAssetInput: asset
                });
            } else if (type === "base") {
                this.setState({
                    baseAssetInput: asset
                });
            }
        }
    }, {
        key: "_onFoundCoreAsset",
        value: function _onFoundCoreAsset(type, asset) {
            if (asset) {
                var core_rate = this.state.core_exchange_rate;
                core_rate[type].asset_id = asset.get("id");

                this.setState({
                    core_exchange_rate: core_rate
                });

                this._validateEditFields({
                    max_supply: this.state.max_supply,
                    core_exchange_rate: core_rate
                });
            }
        }
    }, {
        key: "_onInputMarket",
        value: function _onInputMarket(asset) {
            this.setState({
                marketInput: asset
            });
        }
    }, {
        key: "_onFoundMarketAsset",
        value: function _onFoundMarketAsset(asset) {
            if (asset) {
                this._onUpdateDescription("market", asset.get("symbol"));
            }
        }
    }, {
        key: "_onFlagChange",
        value: function _onFlagChange(key) {
            var booleans = this.state.flagBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                flagBooleans: booleans
            });
            this._validateEditFields({});
        }
    }, {
        key: "_onPermissionChange",
        value: function _onPermissionChange(key) {
            var booleans = this.state.permissionBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                permissionBooleans: booleans
            });
        }
    }, {
        key: "_onClaimInput",
        value: function _onClaimInput(asset) {
            this.setState({
                claimFeesAmount: asset.amount
            });
        }
    }, {
        key: "onChangeList",
        value: function onChangeList(key) {
            var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "add";
            var id = arguments[2];

            var current = this.state[key];
            if (action === "add" && !current.includes(id)) {
                current = current.push(id);
            } else if (action === "remove" && current.includes(id)) {
                current = current.remove(current.indexOf(id));
            }
            this.setState(_defineProperty({}, key, current));
        }
    }, {
        key: "onChangeFeedProducerList",
        value: function onChangeFeedProducerList() {
            var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "add";
            var id = arguments[1];

            var current = this.state.feedProducers;
            if (action === "add" && !current.includes(id)) {
                current = current.push(id);
            } else if (action === "remove" && current.includes(id)) {
                current = current.remove(current.indexOf(id));
            }
            this.setState({ feedProducers: current });
            this._validateEditFields({ feedProducers: current });
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var asset = this.props.asset;
            var _state3 = this.state,
                errors = _state3.errors,
                isValid = _state3.isValid,
                update = _state3.update,
                core_exchange_rate = _state3.core_exchange_rate,
                flagBooleans = _state3.flagBooleans,
                permissionBooleans = _state3.permissionBooleans,
                claimFeesAmount = _state3.claimFeesAmount,
                isBitAsset = _state3.isBitAsset,
                bitasset_opts = _state3.bitasset_opts;

            // Estimate the asset update fee

            var symbol = asset.get("symbol");
            var updateFee = "N/A";

            updateFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedFee__WEBPACK_IMPORTED_MODULE_7__["default"], { opType: "asset_update" });

            var cr_quote_asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.quote.asset_id);
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(cr_quote_asset.get("precision"));
            var cr_base_asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.base.asset_id);
            var basePrecision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(cr_base_asset.get("precision"));

            var cr_quote_amount = parseFloat(core_exchange_rate.quote.amount) * precision;
            var cr_base_amount = parseFloat(core_exchange_rate.base.amount) * basePrecision;
            var originalPermissions = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlagBooleans(asset.getIn(["options", "issuer_permissions"]), asset.get("bitasset") !== undefined);
            // Loop over flags
            var flags = [];
            var getFlag = function getFlag(key, onClick, isChecked) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { key: "table_" + key, className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none", width: "80%" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.user_issued_assets." + key
                                }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "switch",
                                        style: { marginBottom: "10px" },
                                        onClick: onClick
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                        type: "checkbox",
                                        checked: isChecked
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                )
                            )
                        )
                    )
                );
            };

            for (var key in originalPermissions) {
                if (originalPermissions[key] && key !== "charge_market_fee") {
                    flags.push(getFlag(key, this._onFlagChange.bind(this, key), flagBooleans[key]));
                }
            }

            flags.push(getFlag("visible", this._onUpdateDescription.bind(this, "visible"), update.description.visible ? false : update.description.visible === false ? true : false));

            // Loop over permissions
            var permissions = [];
            for (var _key in originalPermissions) {
                if (true) {
                    permissions.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "table",
                        { key: "table_" + _key, className: "table" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tbody",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { border: "none", width: "80%" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        content: "account.user_issued_assets." + _key
                                    }),
                                    ":"
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { border: "none" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        {
                                            className: "switch",
                                            style: { marginBottom: "10px" },
                                            onClick: this._onPermissionChange.bind(this, _key)
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "checkbox",
                                            checked: permissionBooleans[_key],
                                            onChange: function onChange() {}
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                    )
                                )
                            )
                        )
                    ));
                }
            }

            var tabsChangedCount = 0;
            this.tabsChanged().forEach(function () {
                tabsChangedCount++;
            });

            var confirmButtons = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_2___default()("button", {
                            disabled: !isValid || !this.pageChanged()
                        }),
                        style: { width: "9rem" },
                        onClick: tabsChangedCount > 1 ? this._openConfirm.bind(this) : this._updateAsset.bind(this)
                    },
                    tabsChangedCount > 1 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.save_all" }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.save" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_2___default()("button primary hollow", {
                            disabled: !this.pageChanged()
                        }),
                        onClick: this._reset.bind(this)
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.reset" })
                )
            );

            var cerValid = false;

            if ((cr_quote_asset.get("id") === "1.3.0" || cr_base_asset.get("id") === "1.3.0") && (cr_quote_asset.get("id") === asset.get("id") || cr_base_asset.get("id") === asset.get("id"))) {
                cerValid = true;
            }

            var isPredictionMarketAsset = asset.getIn(["bitasset", "is_prediction_market"]);

            var asset_description = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].parseDescription(this.props.asset.toJS().options.description);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "tabs-header" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "h3",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "header.update_asset" }),
                                ":",
                                " ",
                                symbol
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tabs"],
                            {
                                setting: "updateAssetTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "grid-block padding-top shrink small-vertical medium-horizontal",
                                segmented: false,
                                actionButtons: confirmButtons,
                                onChangeTab: function onChangeTab(i) {
                                    _this3.setState({ activeTab: i });
                                }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.primary",
                                    updatedTab: this.tabChanged(0)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.precision" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "span",
                                            null,
                                            ": ",
                                            asset.get("precision")
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                            label: "account.user_issued_assets.max_supply",
                                            amount: update.max_supply,
                                            onChange: this._onUpdateInput.bind(this, "max_supply"),
                                            asset: asset.get("id"),
                                            assets: [asset.get("id")],
                                            placeholder: "0.0",
                                            tabIndex: 1
                                        })
                                    ),
                                    errors.max_supply ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.max_supply
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.core_exchange_rate"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "grid-block no-margin" },
                                            cerValid ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__["default"], {
                                                    label: "account.user_issued_assets.quote_name",
                                                    onChange: this._onInputCoreAsset.bind(this, "quote"),
                                                    asset: this.state.quoteAssetInput,
                                                    assetInput: this.state.quoteAssetInput,
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingRight: "10px"
                                                    },
                                                    onFound: this._onFoundCoreAsset.bind(this, "quote")
                                                })
                                            ),
                                            cerValid ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__["default"], {
                                                    label: "account.user_issued_assets.base_name",
                                                    onChange: this._onInputCoreAsset.bind(this, "base"),
                                                    asset: this.state.baseAssetInput,
                                                    assetInput: this.state.baseAssetInput,
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingLeft: "10px"
                                                    },
                                                    onFound: this._onFoundCoreAsset.bind(this, "base")
                                                })
                                            ),
                                            errors.quote_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.quote_asset
                                            ) : null,
                                            errors.base_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.base_asset
                                            ) : null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                                    label: "account.user_issued_assets.quote",
                                                    amount: core_exchange_rate.quote.amount,
                                                    onChange: this._onCoreRateChange.bind(this, "quote"),
                                                    asset: core_exchange_rate.quote.asset_id,
                                                    assets: [core_exchange_rate.quote.asset_id],
                                                    placeholder: "0.0",
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingRight: "10px"
                                                    }
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                                    label: "account.user_issued_assets.base",
                                                    amount: core_exchange_rate.base.amount,
                                                    onChange: this._onCoreRateChange.bind(this, "base"),
                                                    asset: core_exchange_rate.base.asset_id,
                                                    assets: [core_exchange_rate.base.asset_id],
                                                    placeholder: "0.0",
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingLeft: "10px"
                                                    }
                                                })
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "h5",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "exchange.price" }),
                                                ":",
                                                " ",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_13__["default"], {
                                                    style: { fontWeight: "bold" },
                                                    quote_amount: cr_quote_amount,
                                                    quote_asset: core_exchange_rate.quote.asset_id,
                                                    base_asset: core_exchange_rate.base.asset_id,
                                                    base_amount: cr_base_amount
                                                })
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_1",
                                            component: "label",
                                            className: "has-error"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_2",
                                            component: "p"
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.whitelist.title",
                                    updatedTab: this.tabChanged(1)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    _AssetWhitelist__WEBPACK_IMPORTED_MODULE_20__["default"],
                                    {
                                        whiteListEnabled: flagBooleans["white_list"],
                                        whitelist_authorities: this.state.whitelist_authorities,
                                        blacklist_authorities: this.state.blacklist_authorities,
                                        whitelist_markets: this.state.whitelist_markets,
                                        blacklist_markets: this.state.blacklist_markets,
                                        new_authority_id: this.state.new_authority_id,
                                        authority_name: this.state.authority_name,
                                        onAccountNameChanged: this.onAccountNameChanged.bind(this),
                                        onAccountChanged: this.onAccountChanged.bind(this),
                                        onChangeList: this.onChangeList.bind(this)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.description",
                                    updatedTab: this.tabChanged(2)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                            style: { height: "7rem" },
                                            rows: "1",
                                            value: update.description.main || "",
                                            onChange: this._onUpdateDescription.bind(this, "main")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.short"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            rows: "1",
                                            value: update.description.short_name || "",
                                            onChange: this._onUpdateDescription.bind(this, "short_name")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.market"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__["default"], {
                                        label: "account.user_issued_assets.name",
                                        onChange: this._onInputMarket.bind(this),
                                        placeholder: asset_description.market,
                                        asset: this.state.marketInput,
                                        assetInput: this.state.marketInput,
                                        style: {
                                            width: "100%",
                                            paddingRight: "10px",
                                            paddingBottom: "20px"
                                        },
                                        onFound: this._onFoundMarketAsset.bind(this)
                                    }),
                                    errors.invalid_market_pair ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.invalid_market_pair
                                    ) : null,
                                    isPredictionMarketAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.condition"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "text",
                                                rows: "1",
                                                value: update.description.condition,
                                                onChange: this._onUpdateDescription.bind(this, "condition")
                                            })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.expiry"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "date",
                                                value: update.description.expiry,
                                                onChange: this._onUpdateDescription.bind(this, "expiry")
                                            })
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.bitasset_opts",
                                    updatedTab: this.tabChanged(3)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssetCreate__WEBPACK_IMPORTED_MODULE_18__["BitAssetOptions"], {
                                        bitasset_opts: bitasset_opts,
                                        onUpdate: this.onChangeBitAssetOpts.bind(this),
                                        backingAsset: bitasset_opts.short_backing_asset,
                                        assetPrecision: asset.get("precision"),
                                        assetSymbol: asset.get("symbol")
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ) : null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.permissions",
                                    updatedTab: this.tabChanged(4)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                        path: "components/AccountAssetCreate",
                                        section: "permissions"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.perm_warning" })
                                    ),
                                    permissions,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.flags",
                                    updatedTab: this.tabChanged(5)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                        path: "components/AccountAssetCreate",
                                        section: "flags"
                                    }),
                                    originalPermissions["charge_market_fee"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.market_fee"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "table",
                                            { className: "table" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tbody",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "tr",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        {
                                                            style: {
                                                                border: "none",
                                                                width: "80%"
                                                            }
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.charge_market_fee" }),
                                                        ":"
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        {
                                                            style: {
                                                                border: "none"
                                                            }
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "div",
                                                            {
                                                                className: "switch",
                                                                style: {
                                                                    marginBottom: "10px"
                                                                },
                                                                onClick: this._onFlagChange.bind(this, "charge_market_fee")
                                                            },
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                                type: "checkbox",
                                                                onChange: function onChange() {},
                                                                checked: flagBooleans.charge_market_fee
                                                            }),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                                        )
                                                    )
                                                )
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_2___default()({
                                                    disabled: !flagBooleans.charge_market_fee
                                                })
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.market_fee" }),
                                                " ",
                                                "(%)",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                    type: "number",
                                                    value: update.market_fee_percent,
                                                    onChange: this._onUpdateInput.bind(this, "market_fee_percent")
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                                    label: "account.user_issued_assets.max_market_fee",
                                                    amount: update.max_market_fee,
                                                    onChange: this._onUpdateInput.bind(this, "max_market_fee"),
                                                    asset: asset.get("id"),
                                                    assets: [asset.get("id")],
                                                    placeholder: "0.0",
                                                    tabIndex: 1
                                                })
                                            ),
                                            errors.max_market_fee ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.max_market_fee
                                            ) : null
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "h3",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.flags" })
                                    ),
                                    flags,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    ),
                                    errors.conflict_producer ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.conflict_producer
                                    ) : null
                                )
                            ),
                            isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.feed_producers",
                                    updatedTab: this.tabChanged(6)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AssetFeedProducers__WEBPACK_IMPORTED_MODULE_21__["default"], {
                                    asset: this.props.asset,
                                    account: this.props.account,
                                    witnessFed: flagBooleans["witness_fed_asset"],
                                    committeeFed: flagBooleans["committee_fed_asset"],
                                    producers: this.state.feedProducers,
                                    onChangeList: this.onChangeFeedProducerList.bind(this)
                                }),
                                errors.max_feed_producer ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "p",
                                    {
                                        className: "grid-content has-error large-8 large-offset-2",
                                        style: { marginTop: "20px" }
                                    },
                                    errors.max_feed_producer
                                ) : null
                            ) : null
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ConfirmModal, _extends({
                    modalId: "asset_update_modal",
                    ref: "confirm_modal",
                    tabsChanged: this.tabsChanged(),
                    _cancelConfirm: this._cancelConfirm.bind(this),
                    _updateAsset: this._updateAsset.bind(this)
                }, this.props))
            );
        }
    }]);

    return AccountAssetUpdate;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountAssetUpdate.propTypes = {
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainObject.isRequired
};
AccountAssetUpdate.defaultProps = {
    globalObject: "2.0.0"
};

AccountAssetUpdate = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__["default"])(AccountAssetUpdate);
AccountAssetUpdate = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_11__["default"])(AccountAssetUpdate, {
    propNames: ["asset", "core"],
    defaultProps: {
        core: "1.3.0"
    },
    withDynamic: true
});

var ConfirmModal = function (_React$Component2) {
    _inherits(ConfirmModal, _React$Component2);

    function ConfirmModal() {
        _classCallCheck(this, ConfirmModal);

        var _this4 = _possibleConstructorReturn(this, (ConfirmModal.__proto__ || Object.getPrototypeOf(ConfirmModal)).call(this));

        _this4.state = { open: false };
        return _this4;
    }

    _createClass(ConfirmModal, [{
        key: "show",
        value: function show() {
            var _this5 = this;

            this.setState({ open: true }, function () {
                react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_23___default.a.publish(_this5.props.modalId, "open");
            });
        }
    }, {
        key: "onClose",
        value: function onClose() {
            this.setState({ open: false });
        }
    }, {
        key: "render",
        value: function render() {
            var tabsChanged = this.props.tabsChanged;


            return !this.state.open ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                components_Modal_BaseModal__WEBPACK_IMPORTED_MODULE_22__["default"],
                {
                    id: this.props.modalId,
                    overlay: true,
                    modalHeader: "account.confirm_asset_modal.header",
                    noLogo: true
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                    content: "account.confirm_asset_modal.are_you_sure",
                    component: "div",
                    style: { paddingBottom: "1rem" }
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "ul",
                        null,
                        tabsChanged["0"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.primary" })
                        ) : null,
                        tabsChanged["1"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.whitelist.title" })
                        ) : null,
                        tabsChanged["2"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.description" })
                        ) : null,
                        tabsChanged["3"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.bitasset_opts" })
                        ) : null,
                        tabsChanged["4"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.permissions" })
                        ) : null,
                        tabsChanged["5"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.flags" })
                        ) : null,
                        tabsChanged["6"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.feed_producers" })
                        ) : null
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            className: "button primary",
                            onClick: this.props._updateAsset.bind(this)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "global.confirm" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            className: "button primary hollow",
                            onClick: this.props._cancelConfirm.bind(this)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "global.cancel" })
                    )
                )
            );
        }
    }]);

    return ConfirmModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var AssetUpdateWrapper = function (_React$Component3) {
    _inherits(AssetUpdateWrapper, _React$Component3);

    function AssetUpdateWrapper() {
        _classCallCheck(this, AssetUpdateWrapper);

        return _possibleConstructorReturn(this, (AssetUpdateWrapper.__proto__ || Object.getPrototypeOf(AssetUpdateWrapper)).apply(this, arguments));
    }

    _createClass(AssetUpdateWrapper, [{
        key: "render",
        value: function render() {
            var asset = this.props.match.params.asset;
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountAssetUpdate, _extends({ asset: asset }, this.props));
        }
    }]);

    return AssetUpdateWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_24__["withRouter"])(AssetUpdateWrapper));

/***/ }),

/***/ 2541:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _FormattedAsset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1970);
/* harmony import */ var _ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1833);
/* harmony import */ var _BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1834);
/* harmony import */ var common_trxHelper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(572);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








/**
 *
 *  Given an operation type, displays the CORE fee for that operation
 *
 */

var FormattedFee = function (_React$Component) {
    _inherits(FormattedFee, _React$Component);

    function FormattedFee() {
        _classCallCheck(this, FormattedFee);

        return _possibleConstructorReturn(this, (FormattedFee.__proto__ || Object.getPrototypeOf(FormattedFee)).apply(this, arguments));
    }

    _createClass(FormattedFee, [{
        key: "getFee",
        value: function getFee() {
            // Return fee via refs
            return Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_5__["estimateFee"])(this.props.opType, this.props.options, this.props.globalObject);
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                opType = _props.opType,
                options = _props.options,
                globalObject = _props.globalObject;


            if (!opType || !options || !globalObject) {
                return null;
            }

            var amount = Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_5__["estimateFee"])(opType, options, globalObject);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], { amount: amount, asset: "1.3.0" });
        }
    }]);

    return FormattedFee;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

FormattedFee.propTypes = {
    globalObject: _ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired,
    opType: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,
    options: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.array
};
FormattedFee.defaultProps = {
    globalObject: "2.0.0",
    options: []
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(FormattedFee));

/***/ }),

/***/ 2542:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2304);
/* harmony import */ var _Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2305);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(774);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2190);
/* harmony import */ var _Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2454);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(931);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(760);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(701);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(702);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }













var AssetWhitelist = function (_React$Component) {
    _inherits(AssetWhitelist, _React$Component);

    function AssetWhitelist(props) {
        _classCallCheck(this, AssetWhitelist);

        var _this = _possibleConstructorReturn(this, (AssetWhitelist.__proto__ || Object.getPrototypeOf(AssetWhitelist)).call(this));

        _this.state = {
            listType: props.assetWhiteListType,
            accountTable: props.assetWhiteListType.indexOf("market") === -1,
            listTypes: ["whitelist_authorities", "blacklist_authorities", "whitelist_markets", "blacklist_markets"],
            assetInput: null,
            asset_id: null
        };
        return _this;
    }

    _createClass(AssetWhitelist, [{
        key: "renderAccountTables",
        value: function renderAccountTables() {
            var _this2 = this;

            var listType = this.state.listType;


            if (!this.props.whiteListEnabled) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, {
                    className: "txtlabel cancel",
                    component: "p",
                    content: "explorer.asset.whitelist.enable_flag"
                })
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "explorer.account.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "account.perm.remove_text" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        this.props[listType].map(function (a) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                { key: a },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_1__["default"], { account: a })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    {
                                        className: "clickable",
                                        onClick: _this2.props.onChangeList.bind(_this2, listType, "remove", a)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                        name: "cross-circle",
                                        title: "icons.cross_circle.remove",
                                        className: "icon-14px"
                                    })
                                )
                            );
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        label: "account.whitelist." + listType,
                        accountName: this.props.authority_name,
                        account: this.props.authority_name,
                        onChange: this.props.onAccountNameChanged.bind(this, "authority_name"),
                        onAccountChanged: this.props.onAccountChanged.bind(this, "new_authority_id"),
                        error: null,
                        tabIndex: 1,
                        action_label: "account.perm.confirm_add",
                        onAction: this.props.onChangeList.bind(this, listType, "add", this.props.new_authority_id)
                    })
                )
            );
        }
    }, {
        key: "_onAssetChange",
        value: function _onAssetChange(asset) {
            this.setState({
                assetInput: asset
            });
        }
    }, {
        key: "_onAssetFound",
        value: function _onAssetFound(asset) {
            this.setState({
                asset_id: asset ? asset.get("id") : null
            });
        }
    }, {
        key: "renderMarketTable",
        value: function renderMarketTable() {
            var _this3 = this;

            var listType = this.state.listType;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "explorer.asset.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "account.perm.remove_text" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        this.props[listType].map(function (a) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                { key: a },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_2__["default"], { asset: a })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    {
                                        className: "clickable",
                                        onClick: _this3.props.onChangeList.bind(_this3, listType, "remove", a)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                        name: "cross-circle",
                                        title: "icons.cross_circle.remove",
                                        className: "icon-14px"
                                    })
                                )
                            );
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_5__["default"], {
                        label: "explorer.asset.whitelist." + listType,
                        onChange: this._onAssetChange.bind(this),
                        asset: this.state.assetInput,
                        assetInput: this.state.assetInput,
                        tabIndex: 1,
                        style: { width: "100%" },
                        onFound: this._onAssetFound.bind(this),
                        action_label: "account.perm.confirm_add",
                        onAction: this.props.onChangeList.bind(this, listType, "add", this.state.asset_id)
                    })
                )
            );
        }
    }, {
        key: "_onSwitchType",
        value: function _onSwitchType(type) {
            this.setState({
                listType: type,
                accountTable: type.indexOf("market") === -1
            });
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeViewSetting({
                assetWhiteListType: type
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var accountTable = this.state.accountTable;

            var activeIndex = this.state.listTypes.indexOf(this.state.listType);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "small-12 large-8 large-offset-2 grid-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "header-selector",
                            style: { paddingBottom: "2rem" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "selector" },
                            this.state.listTypes.map(function (type, index) {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        key: type,
                                        className: classnames__WEBPACK_IMPORTED_MODULE_6___default()("inline-block", {
                                            inactive: activeIndex !== index
                                        }),
                                        onClick: _this4._onSwitchType.bind(_this4, type)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, {
                                        content: "explorer.asset.whitelist." + type
                                    })
                                );
                            })
                        )
                    ),
                    accountTable ? this.renderAccountTables() : this.renderMarketTable(),
                    this.props.children
                )
            );
        }
    }]);

    return AssetWhitelist;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(alt_react__WEBPACK_IMPORTED_MODULE_8__["connect"])(AssetWhitelist, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__["default"]];
    },
    getProps: function getProps() {
        return {
            assetWhiteListType: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__["default"].getState().viewSettings.get("assetWhiteListType", "whitelist_authorities")
        };
    }
}));

/***/ }),

/***/ 2543:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2259);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2190);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2304);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(774);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








var AccountFeedProducers = function (_React$Component) {
    _inherits(AccountFeedProducers, _React$Component);

    function AccountFeedProducers(props) {
        _classCallCheck(this, AccountFeedProducers);

        var _this = _possibleConstructorReturn(this, (AccountFeedProducers.__proto__ || Object.getPrototypeOf(AccountFeedProducers)).call(this, props));

        _this.state = {
            producer_name: null
        };
        return _this;
    }

    _createClass(AccountFeedProducers, [{
        key: "onAccountChanged",
        value: function onAccountChanged(account) {
            this.setState({
                new_producer_id: account ? account.get("id") : null
            });
        }
    }, {
        key: "onAccountNameChanged",
        value: function onAccountNameChanged(name) {
            this.setState({
                producer_name: name
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var _props = this.props,
                witnessFed = _props.witnessFed,
                committeeFed = _props.committeeFed;


            if (witnessFed || committeeFed) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-content small-12 large-8 large-offset-2" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                        component: "p",
                        content: "account.user_issued_assets.feed_not_allowed_1",
                        className: "has-error"
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                        component: "p",
                        content: "account.user_issued_assets.feed_not_allowed_2"
                    })
                );
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content small-12 large-8 large-offset-2" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { textAlign: "left" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.account.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.perm.remove_text" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        this.props.producers.map(function (a, i) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                { key: a },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { textAlign: "left" } },
                                    "#",
                                    i + 1
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { textAlign: "left" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_3__["default"], { account: a })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    {
                                        className: "clickable",
                                        onClick: _this2.props.onChangeList.bind(_this2, "remove", a)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                        name: "cross-circle",
                                        title: "icons.cross_circle.remove",
                                        className: "icon-14px"
                                    })
                                )
                            );
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        label: "account.user_issued_assets.add_feed",
                        accountName: this.state.producer_name,
                        account: this.state.producer_name,
                        onChange: this.onAccountNameChanged.bind(this),
                        onAccountChanged: this.onAccountChanged.bind(this),
                        error: null,
                        tabIndex: 1,
                        action_label: "account.perm.confirm_add",
                        onAction: this.props.onChangeList.bind(this, "add", this.state.new_producer_id)
                    })
                )
            );
        }
    }]);

    return AccountFeedProducers;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountFeedProducers);

/***/ }),

/***/ 2544:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(716);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(407);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1833);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1834);
/* harmony import */ var _Statistics__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2545);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(556);
/* harmony import */ var _Utility_TimeAgo__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2333);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2017);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(557);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2516);
/* harmony import */ var branding__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(560);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
















var FeeHelp = function (_React$Component) {
    _inherits(FeeHelp, _React$Component);

    function FeeHelp() {
        _classCallCheck(this, FeeHelp);

        return _possibleConstructorReturn(this, (FeeHelp.__proto__ || Object.getPrototypeOf(FeeHelp)).apply(this, arguments));
    }

    _createClass(FeeHelp, [{
        key: "render",
        value: function render() {
            var dprops = this.props.dprops;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_9__["default"], _extends({}, this.props, {
                path: "components/AccountMembership",
                section: "fee-division",
                nextMaintenanceTime: {
                    time: dprops.get("next_maintenance_time")
                }
            }));
        }
    }]);

    return FeeHelp;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

FeeHelp.propTypes = {
    dprops: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainObject.isRequired
};
FeeHelp.defaultProps = {
    dprops: "2.1.0"
};

FeeHelp = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(FeeHelp);

var AccountMembership = function (_React$Component2) {
    _inherits(AccountMembership, _React$Component2);

    function AccountMembership() {
        _classCallCheck(this, AccountMembership);

        return _possibleConstructorReturn(this, (AccountMembership.__proto__ || Object.getPrototypeOf(AccountMembership)).apply(this, arguments));
    }

    _createClass(AccountMembership, [{
        key: "upgradeAccount",
        value: function upgradeAccount(id, lifetime, e) {
            e.preventDefault();
            actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__["default"].upgradeAccount(id, lifetime);
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            common_account_utils__WEBPACK_IMPORTED_MODULE_10__["default"].getFinalFeeAsset(this.props.account, "account_upgrade");
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                gprops = _props.gprops,
                core_asset = _props.core_asset;


            var account = this.props.account.toJS();

            var ltr = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccount(account.lifetime_referrer, false);
            if (ltr) account.lifetime_referrer_name = ltr.get("name");
            var ref = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccount(account.referrer, false);
            if (ref) account.referrer_name = ref.get("name");
            var reg = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccount(account.registrar, false);
            if (reg) account.registrar_name = reg.get("name");

            var account_name = account.name;

            var network_fee = account.network_fee_percentage / 100;
            var lifetime_fee = account.lifetime_referrer_fee_percentage / 100;
            var referrer_total_fee = 100 - network_fee - lifetime_fee;
            var referrer_fee = referrer_total_fee * account.referrer_rewards_percentage / 10000;
            var registrar_fee = 100 - referrer_fee - lifetime_fee - network_fee;

            var lifetime_cost = gprops.getIn(["parameters", "current_fees", "parameters", 8, 1, "membership_lifetime_fee"]) * gprops.getIn(["parameters", "current_fees", "scale"]) / 10000;

            var member_status = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccountMemberStatus(this.props.account);
            var membership = "account.member." + member_status;
            var expiration = null;
            if (member_status === "annual") expiration = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                "(",
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.expires" }),
                " ",
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TimeAgo__WEBPACK_IMPORTED_MODULE_8__["default"], { time: account.membership_expiration_date }),
                ")"
            );
            var expiration_date = account.membership_expiration_date;
            if (expiration_date === "1969-12-31T23:59:59") expiration_date = "Never";else if (expiration_date === "1970-01-01T00:00:00") expiration_date = "N/A";

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tabs"],
                            {
                                segmented: false,
                                setting: "membershipTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.member.membership" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "h3",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: membership }),
                                    " ",
                                    expiration
                                ),
                                member_status === "lifetime" ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "large-6 medium-8" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_9__["default"], {
                                            path: "components/AccountMembership",
                                            section: "lifetime",
                                            feesCashback: 100 - network_fee,
                                            price: {
                                                amount: lifetime_cost,
                                                asset: core_asset
                                            }
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: "button no-margin",
                                                onClick: this.upgradeAccount.bind(this, account.id, true)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.upgrade_lifetime" })
                                        ),
                                        " ",
                                        "\xA0 \xA0",
                                         true ? null : undefined
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("hr", null)
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block no-margin" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "no-margin grid-block vertical large-horizontal" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "no-margin grid-block large-5" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-content" },
                                                member_status === "lifetime" ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "h4",
                                                        null,
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.referral_link" })
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                                        content: "account.member.referral_text",
                                                        wallet_name: Object(branding__WEBPACK_IMPORTED_MODULE_12__["getWalletName"])()
                                                    }),
                                                    ":",
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "h5",
                                                        null,
                                                        Object(branding__WEBPACK_IMPORTED_MODULE_12__["getWalletURL"])() + ("/?r=" + account.name)
                                                    )
                                                ) : null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "h4",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.fee_allocation" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "table",
                                                    { className: "table key-value-table" },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "tbody",
                                                        null,
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.network_percentage" })
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                network_fee,
                                                                "%"
                                                            )
                                                        ),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.lifetime_referrer" }),
                                                                " ",
                                                                "\xA0 (",
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                                                                    {
                                                                        to: "account/" + account.lifetime_referrer_name
                                                                    },
                                                                    account.lifetime_referrer_name
                                                                ),
                                                                ")"
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                lifetime_fee,
                                                                "%"
                                                            )
                                                        ),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.registrar" }),
                                                                " ",
                                                                "\xA0 (",
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                                                                    {
                                                                        to: "account/" + account.registrar_name
                                                                    },
                                                                    account.registrar_name
                                                                ),
                                                                ")"
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                registrar_fee,
                                                                "%"
                                                            )
                                                        ),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.referrer" }),
                                                                " ",
                                                                "\xA0 (",
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                                                                    {
                                                                        to: "account/" + account.referrer_name
                                                                    },
                                                                    account.referrer_name
                                                                ),
                                                                ")"
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                referrer_fee,
                                                                "%"
                                                            )
                                                        ),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.membership_expiration" }),
                                                                " "
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                expiration_date
                                                            )
                                                        )
                                                    )
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "h4",
                                                    {
                                                        style: { paddingTop: "1rem" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.fees_cashback" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "table",
                                                    { className: "table key-value-table" },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Statistics__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                                        stat_object: account.statistics
                                                    })
                                                )
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "grid-block large-7" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-content" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FeeHelp, {
                                                    account: account_name,
                                                    networkFee: network_fee,
                                                    referrerFee: referrer_fee,
                                                    registrarFee: registrar_fee,
                                                    lifetimeFee: lifetime_fee,
                                                    referrerTotalFee: referrer_total_fee,
                                                    maintenanceInterval: gprops.getIn(["parameters", "maintenance_interval"]),
                                                    vestingThreshold: {
                                                        amount: gprops.getIn(["parameters", "cashback_vesting_threshold"]),
                                                        asset: core_asset
                                                    },
                                                    vestingPeriod: gprops.getIn(["parameters", "cashback_vesting_period_seconds"]) / 60 / 60 / 24
                                                })
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountMembership;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountMembership.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccount.isRequired,
    gprops: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainObject.isRequired,
    core_asset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAsset.isRequired
};
AccountMembership.defaultProps = {
    gprops: "2.0.0",
    core_asset: "1.3.0"
};

AccountMembership = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(AccountMembership);

/* harmony default export */ __webpack_exports__["default"] = (AccountMembership);

/***/ }),

/***/ 2545:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1970);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1833);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1834);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }







var Statistics = function (_React$Component) {
    _inherits(Statistics, _React$Component);

    function Statistics() {
        _classCallCheck(this, Statistics);

        return _possibleConstructorReturn(this, (Statistics.__proto__ || Object.getPrototypeOf(Statistics)).apply(this, arguments));
    }

    _createClass(Statistics, [{
        key: "render",
        value: function render() {
            var stat_object = this.props.stat_object.toJS();
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tbody",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.fees_paid" }),
                        " "
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], {
                            amount: parseFloat(stat_object.lifetime_fees_paid),
                            asset: "1.3.0"
                        })
                    )
                )
            );
        }
    }]);

    return Statistics;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

Statistics.propTypes = {
    stat_object: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(Statistics));

/***/ }),

/***/ 2546:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1970);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(407);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(558);
/* harmony import */ var actions_WalletActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(713);
/* harmony import */ var bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(476);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2516);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }










var VestingBalance = function (_React$Component) {
    _inherits(VestingBalance, _React$Component);

    function VestingBalance() {
        _classCallCheck(this, VestingBalance);

        return _possibleConstructorReturn(this, (VestingBalance.__proto__ || Object.getPrototypeOf(VestingBalance)).apply(this, arguments));
    }

    _createClass(VestingBalance, [{
        key: "_onClaim",
        value: function _onClaim(claimAll, e) {
            var _this2 = this;

            e.preventDefault();
            actions_WalletActions__WEBPACK_IMPORTED_MODULE_5__["default"].claimVestingBalance(this.props.account.id, this.props.vb, claimAll).then(function () {
                typeof _this2.props.handleChanged == "function" && _this2.props.handleChanged();
            });
        }
    }, {
        key: "render",
        value: function render() {
            var vb = this.props.vb;

            if (!this.props.vb) {
                return null;
            }

            var cvbAsset = void 0,
                vestingPeriod = void 0,
                earned = void 0,
                secondsPerDay = 60 * 60 * 24,
                availablePercent = void 0,
                balance = void 0;
            if (vb) {
                balance = vb.balance.amount;
                cvbAsset = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAsset(vb.balance.asset_id);
                earned = vb.policy[1].coin_seconds_earned;
                vestingPeriod = vb.policy[1].vesting_seconds;
                availablePercent = vestingPeriod === 0 || vb.balance_type == "market_fee_sharing" ? 1 : earned / (vestingPeriod * balance);
            }

            if (!cvbAsset) {
                return null;
            }

            if (!balance) {
                return null;
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                    component: "h5",
                    content: "account.vesting.balance_number",
                    id: vb.id
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table key-value-table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.cashback" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], {
                                    amount: vb.balance.amount,
                                    asset: vb.balance.asset_id
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.earned" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_amount(earned / secondsPerDay, cvbAsset), 0),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.coindays" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.required" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_amount(vb.balance.amount * vestingPeriod / secondsPerDay, cvbAsset), 0),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.coindays" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.remaining" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(vestingPeriod * (1 - availablePercent) / secondsPerDay || 0, 2),
                                "\xA0days"
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.available" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(availablePercent * 100, 2),
                                "% /",
                                " ",
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], {
                                    amount: availablePercent * vb.balance.amount,
                                    asset: cvbAsset.get("id")
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { colSpan: "2", style: { textAlign: "right" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "button",
                                    {
                                        onClick: this._onClaim.bind(this, false),
                                        className: "button"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.claim" })
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return VestingBalance;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var AccountVesting = function (_React$Component2) {
    _inherits(AccountVesting, _React$Component2);

    function AccountVesting() {
        _classCallCheck(this, AccountVesting);

        var _this3 = _possibleConstructorReturn(this, (AccountVesting.__proto__ || Object.getPrototypeOf(AccountVesting)).call(this));

        _this3.state = {
            vbs: null
        };
        return _this3;
    }

    _createClass(AccountVesting, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this.retrieveVestingBalances.call(this, this.props.account.get("id"));
        }
    }, {
        key: "componentWillUpdate",
        value: function componentWillUpdate(nextProps) {
            var newId = nextProps.account.get("id");
            var oldId = this.props.account.get("id");

            if (newId !== oldId) {
                this.retrieveVestingBalances.call(this, newId);
            }
        }
    }, {
        key: "retrieveVestingBalances",
        value: function retrieveVestingBalances(accountId) {
            var _this4 = this;

            accountId = accountId || this.props.account.get("id");
            bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_6__["Apis"].instance().db_api().exec("get_vesting_balances", [accountId]).then(function (vbs) {
                _this4.setState({ vbs: vbs });
            }).catch(function (err) {
                console.log("error:", err);
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this5 = this;

            var vbs = this.state.vbs;

            if (!vbs || !this.props.account || !this.props.account.get("vesting_balances")) {
                return null;
            }

            var account = this.props.account.toJS();

            var balances = vbs.map(function (vb) {
                if (vb.balance.amount) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(VestingBalance, {
                        key: vb.id,
                        vb: vb,
                        account: account,
                        handleChanged: _this5.retrieveVestingBalances.bind(_this5)
                    });
                }
            }).filter(function (a) {
                return !!a;
            });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_7__["Tabs"],
                            {
                                segmented: false,
                                setting: "vestingTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_7__["Tab"],
                                { title: "account.vesting.title" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.vesting.explain",
                                    component: "p"
                                }),
                                !balances.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "h4",
                                    { style: { paddingTop: "1rem" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        content: "account.vesting.no_balances"
                                    })
                                ) : balances
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountVesting;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountVesting.VestingBalance = VestingBalance;
/* harmony default export */ __webpack_exports__["default"] = (AccountVesting);

/***/ }),

/***/ 2547:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(558);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(557);
/* harmony import */ var api_ApplicationApi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(578);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(407);
/* harmony import */ var _AccountPermissionsList__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2548);
/* harmony import */ var _AccountPermissionsMigrate__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2552);
/* harmony import */ var _Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2553);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2516);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2017);
/* harmony import */ var _RecentTransactions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2554);
/* harmony import */ var actions_NotificationActions__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(580);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

















var AccountPermissions = function (_React$Component) {
    _inherits(AccountPermissions, _React$Component);

    function AccountPermissions(props) {
        _classCallCheck(this, AccountPermissions);

        var _this = _possibleConstructorReturn(this, (AccountPermissions.__proto__ || Object.getPrototypeOf(AccountPermissions)).call(this, props));

        _this.state = {};
        _this.onPublish = _this.onPublish.bind(_this);
        _this.onReset = _this.onReset.bind(_this);
        return _this;
    }

    _createClass(AccountPermissions, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this.updateAccountData(this.props.account);
            common_account_utils__WEBPACK_IMPORTED_MODULE_5__["default"].getFinalFeeAsset(this.props.account, "account_update");
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            if (nextProps.account !== this.props.account) this.updateAccountData(nextProps.account);
        }
    }, {
        key: "permissionsFromImmutableObj",
        value: function permissionsFromImmutableObj(auths) {
            var threshold = auths.get("weight_threshold");
            var account_auths = auths.get("account_auths");
            var key_auths = auths.get("key_auths");
            var address_auths = auths.get("address_auths");

            var accounts = account_auths.map(function (a) {
                return a.get(0);
            });
            var keys = key_auths.map(function (a) {
                return a.get(0);
            });
            var addresses = address_auths.map(function (a) {
                return a.get(0);
            });

            var weights = account_auths.reduce(function (res, a) {
                res[a.get(0)] = a.get(1);
                return res;
            }, {});
            weights = key_auths.reduce(function (res, a) {
                res[a.get(0)] = a.get(1);
                return res;
            }, weights);
            weights = address_auths.reduce(function (res, a) {
                res[a.get(0)] = a.get(1);
                return res;
            }, weights);

            return { threshold: threshold, accounts: accounts, keys: keys, addresses: addresses, weights: weights };
        }
    }, {
        key: "permissionsToJson",
        value: function permissionsToJson(threshold, accounts, keys, addresses, weights) {
            var res = { weight_threshold: threshold };
            res["account_auths"] = accounts.sort(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].sortID).map(function (a) {
                return [a, weights[a]];
            }).toJS();
            res["key_auths"] = keys.sort(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].sortID).map(function (a) {
                return [a, weights[a]];
            }).toJS();
            res["address_auths"] = addresses.sort(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].sortID).map(function (a) {
                return [a, weights[a]];
            }).toJS();
            return res;
        }
    }, {
        key: "updateAccountData",
        value: function updateAccountData(account) {
            var active = this.permissionsFromImmutableObj(account.get("active"));
            var owner = this.permissionsFromImmutableObj(account.get("owner"));
            var memo_key = account.get("options").get("memo_key");
            var state = {
                active_accounts: active.accounts,
                active_keys: active.keys,
                active_addresses: active.addresses,
                owner_accounts: owner.accounts,
                owner_keys: owner.keys,
                owner_addresses: owner.addresses,
                active_weights: active.weights,
                owner_weights: owner.weights,
                active_threshold: active.threshold,
                owner_threshold: owner.threshold,
                memo_key: memo_key,
                prev_active_accounts: active.accounts,
                prev_active_keys: active.keys,
                prev_active_addresses: active.addresses,
                prev_owner_accounts: owner.accounts,
                prev_owner_keys: owner.keys,
                prev_owner_addresses: owner.addresses,
                prev_active_weights: active.weights,
                prev_owner_weights: owner.weights,
                prev_active_threshold: active.threshold,
                prev_owner_threshold: owner.threshold,
                prev_memo_key: memo_key
            };
            this.setState(state);
        }
    }, {
        key: "isChanged",
        value: function isChanged() {
            var s = this.state;
            return s.active_accounts !== s.prev_active_accounts || s.active_keys !== s.prev_active_keys || s.active_addresses !== s.prev_active_addresses || s.owner_accounts !== s.prev_owner_accounts || s.owner_keys !== s.prev_owner_keys || s.owner_addresses !== s.prev_owner_addresses || s.active_threshold !== s.prev_active_threshold || s.owner_threshold !== s.prev_owner_threshold || s.memo_key !== s.prev_memo_key;
        }
    }, {
        key: "didChange",
        value: function didChange(type) {
            var s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state;

            if (type === "memo") {
                return s.memo_key !== s.prev_memo_key;
            }
            var didChange = false;
            ["_keys", "_active_addresses", "_accounts", "_threshold"].forEach(function (key) {
                var current = type + key;
                if (s[current] !== s["prev_" + current]) {
                    didChange = true;
                }
            });
            return didChange;
        }
    }, {
        key: "onPublish",
        value: function onPublish() {
            var s = this.state;
            var updated_account = this.props.account.toJS();

            // Set fee asset
            updated_account.fee = {
                amount: 0,
                asset_id: common_account_utils__WEBPACK_IMPORTED_MODULE_5__["default"].getFinalFeeAsset(updated_account.id, "account_update")
            };

            var updateObject = {
                account: updated_account.id
            };

            if (this.didChange("active")) {
                updateObject.active = this.permissionsToJson(s.active_threshold, s.active_accounts, s.active_keys, s.active_addresses, s.active_weights);
            }
            if (this.didChange("owner")) {
                updateObject.owner = this.permissionsToJson(s.owner_threshold, s.owner_accounts, s.owner_keys, s.owner_addresses, s.owner_weights);
            }
            if (this.didChange("owner") && s.owner_keys.size === 0 && s.owner_addresses.size === 0 && s.owner_accounts.size === 1 && s.owner_accounts.first() === updated_account.id) {
                return actions_NotificationActions__WEBPACK_IMPORTED_MODULE_14__["default"].addNotification({
                    message: "Setting your owner permissions like this will render your account permanently unusable. Please make sure you know what you're doing before modifying account authorities!",
                    level: "error",
                    autoDismiss: 10
                });
            }
            if (s.memo_key && this.didChange("memo") && this.isValidPubKey(s.memo_key)) {
                updateObject.new_options = this.props.account.get("options").toJS();
                updateObject.new_options.memo_key = s.memo_key;
            }

            // console.log("-- AccountPermissions.onPublish -->", updateObject, s.memo_key);
            api_ApplicationApi__WEBPACK_IMPORTED_MODULE_6__["default"].updateAccount(updateObject);
        }
    }, {
        key: "isValidPubKey",
        value: function isValidPubKey(value) {
            return !!bitsharesjs__WEBPACK_IMPORTED_MODULE_7__["PublicKey"].fromPublicKeyString(value);
        }
    }, {
        key: "onReset",
        value: function onReset() {
            var s = this.state;
            this.setState({
                active_accounts: s.prev_active_accounts,
                active_keys: s.prev_active_keys,
                active_addresses: s.prev_active_addresses,
                owner_accounts: s.prev_owner_accounts,
                owner_keys: s.prev_owner_keys,
                owner_addresses: s.prev_owner_addresses,
                active_weights: s.prev_active_weights,
                owner_weights: s.prev_owner_weights,
                active_threshold: s.prev_active_threshold,
                owner_threshold: s.prev_owner_threshold,
                memo_key: s.prev_memo_key
            });
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(collection, item_value, weight) {
            var state = {};
            var list = collection + (common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].is_object_id(item_value) ? "_accounts" : "_keys");
            state[list] = this.state[list].push(item_value);
            this.state[collection + "_weights"][item_value] = weight;
            this.setState(state);
        }
    }, {
        key: "onRemoveItem",
        value: function onRemoveItem(collection, item_value, listSuffix) {
            console.log("onRemoveItem", collection, item_value, listSuffix);
            var state = {};
            var list = collection + listSuffix;

            state[list] = this.state[list].filter(function (i) {
                return i !== item_value;
            });
            this.setState(state);
        }
    }, {
        key: "onThresholdChanged",
        value: function onThresholdChanged(var_name, event) {
            var value = parseInt(event.target.value.trim());
            var state = {};
            state[var_name] = value;
            this.setState(state);
        }
    }, {
        key: "validateAccount",
        value: function validateAccount(collection, account) {
            return null;
        }
    }, {
        key: "sumUpWeights",
        value: function sumUpWeights(accounts, keys, addresses, weights) {
            var sum = accounts.reduce(function (sum, a) {
                return sum + weights[a];
            }, 0);
            sum = keys.reduce(function (sum, a) {
                return sum + weights[a];
            }, sum);
            return addresses.reduce(function (sum, a) {
                return sum + weights[a];
            }, sum);
        }
    }, {
        key: "onMemoKeyChanged",
        value: function onMemoKeyChanged(memo_key) {
            this.setState({ memo_key: memo_key });
        }
    }, {
        key: "onSetPasswordKeys",
        value: function onSetPasswordKeys(keys) {
            var roles = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ["active", "owner", "memo"];

            var newState = {};

            roles.forEach(function (role) {
                newState["password_" + role] = keys[role];
            });

            this.setState(newState);
        }
    }, {
        key: "render",
        value: function render() {
            var error1 = void 0,
                error2 = void 0;

            var _state = this.state,
                active_accounts = _state.active_accounts,
                active_keys = _state.active_keys,
                active_addresses = _state.active_addresses,
                active_weights = _state.active_weights;
            var _state2 = this.state,
                owner_accounts = _state2.owner_accounts,
                owner_keys = _state2.owner_keys,
                owner_addresses = _state2.owner_addresses,
                owner_weights = _state2.owner_weights;


            var threshold = this.state.active_threshold > 0 ? this.state.active_threshold : 0;
            var weights_total = this.sumUpWeights(active_accounts, active_keys, active_addresses, active_weights);
            if (this.didChange("active") && weights_total < threshold) error1 = counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.warning1", {
                weights_total: weights_total,
                threshold: threshold
            });

            threshold = this.state.owner_threshold > 0 ? this.state.owner_threshold : 0;
            weights_total = this.sumUpWeights(owner_accounts, owner_keys, owner_addresses, owner_weights);
            if (this.didChange("owner") && weights_total < threshold) error2 = counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.warning2", {
                weights_total: weights_total,
                threshold: threshold
            });

            var publish_buttons_class = "button" + (!(error1 || error2) && this.isChanged() && this.isValidPubKey(this.state.memo_key) ? "" : " disabled");
            var reset_buttons_class = "button" + (this.isChanged() ? "" : " disabled");

            var accountsList = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set();
            accountsList = accountsList.add(this.props.account.get("id"));

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tabs"],
                            {
                                defaultActiveTab: 1,
                                segmented: false,
                                setting: "permissionsTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding",
                                actionButtons: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "action-buttons" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "button",
                                        {
                                            className: reset_buttons_class,
                                            onClick: this.onReset,
                                            tabIndex: 8
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.reset" })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "button",
                                        {
                                            className: publish_buttons_class,
                                            onClick: this.onPublish,
                                            tabIndex: 9
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.publish" })
                                    )
                                )
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.perm.active" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_12__["default"], { path: "components/AccountPermActive" }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "form",
                                    { className: "threshold" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        { className: "horizontal" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.threshold" }),
                                        " ",
                                        "\xA0 \xA0",
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "number",
                                            placeholder: "0",
                                            size: "5",
                                            value: this.state.active_threshold,
                                            onChange: this.onThresholdChanged.bind(this, "active_threshold"),
                                            autoComplete: "off",
                                            tabIndex: 1
                                        })
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissionsList__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                    label: "account.perm.add_permission_label",
                                    accounts: active_accounts,
                                    keys: active_keys,
                                    weights: active_weights,
                                    addresses: active_addresses,
                                    validateAccount: this.validateAccount.bind(this, "active"),
                                    onAddItem: this.onAddItem.bind(this, "active"),
                                    onRemoveItem: this.onRemoveItem.bind(this, "active"),
                                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.account_name_or_key"),
                                    tabIndex: 2
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                error1 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block has-error" },
                                    error1
                                ) : null
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.perm.owner" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_12__["default"], { path: "components/AccountPermOwner" }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "form",
                                    { className: "threshold" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        { className: "horizontal" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.threshold" }),
                                        " ",
                                        "\xA0 \xA0",
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "number",
                                            placeholder: "0",
                                            size: "5",
                                            value: this.state.owner_threshold,
                                            onChange: this.onThresholdChanged.bind(this, "owner_threshold"),
                                            autoComplete: "off",
                                            tabIndex: 4
                                        })
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissionsList__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                    label: "account.perm.add_permission_label",
                                    accounts: owner_accounts,
                                    keys: owner_keys,
                                    weights: owner_weights,
                                    addresses: owner_addresses,
                                    validateAccount: this.validateAccount.bind(this, "owner"),
                                    onAddItem: this.onAddItem.bind(this, "owner"),
                                    onRemoveItem: this.onRemoveItem.bind(this, "owner"),
                                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.account_name_or_key"),
                                    tabIndex: 5
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                error2 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block has-error" },
                                    error2
                                ) : null
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.perm.memo_key" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                    style: { maxWidth: "800px" },
                                    path: "components/AccountPermMemo"
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                    ref: "memo_key",
                                    value: this.state.memo_key,
                                    label: "account.perm.memo_public_key",
                                    placeholder: "Public Key",
                                    onChange: this.onMemoKeyChanged.bind(this),
                                    tabIndex: 7
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.perm.password_model" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissionsMigrate__WEBPACK_IMPORTED_MODULE_9__["default"], {
                                    active: this.state.password_active,
                                    owner: this.state.password_owner,
                                    memo: this.state.password_memo,
                                    onSetPasswordKeys: this.onSetPasswordKeys.bind(this),
                                    account: this.props.account,
                                    activeKeys: this.state.active_keys,
                                    ownerKeys: this.state.owner_keys,
                                    memoKey: this.state.memo_key,
                                    onAddActive: this.onAddItem.bind(this, "active"),
                                    onRemoveActive: this.onRemoveItem.bind(this, "active"),
                                    onAddOwner: this.onAddItem.bind(this, "owner"),
                                    onRemoveOwner: this.onRemoveItem.bind(this, "owner"),
                                    onSetMemo: this.onMemoKeyChanged.bind(this)
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "tab-content", style: { padding: 10 } },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "divider" }),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_RecentTransactions__WEBPACK_IMPORTED_MODULE_13__["RecentTransactions"], {
                                accountsList: accountsList,
                                limit: 25,
                                compactView: false,
                                filter: "account_update",
                                style: { paddingBottom: "2rem" }
                            })
                        )
                    )
                )
            );
        }
    }]);

    return AccountPermissions;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountPermissions);

/***/ }),

/***/ 2548:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(716);
/* harmony import */ var _AccountSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2190);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _AccountImage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2191);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1833);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1834);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(774);
/* harmony import */ var components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2549);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(558);
/* harmony import */ var stores_AddressIndex__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(699);
/* harmony import */ var stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(694);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_13__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
















var AccountPermissionRow = function (_React$Component) {
    _inherits(AccountPermissionRow, _React$Component);

    function AccountPermissionRow() {
        _classCallCheck(this, AccountPermissionRow);

        return _possibleConstructorReturn(this, (AccountPermissionRow.__proto__ || Object.getPrototypeOf(AccountPermissionRow)).apply(this, arguments));
    }

    _createClass(AccountPermissionRow, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps) {
            return !common_utils__WEBPACK_IMPORTED_MODULE_10__["default"].are_equal_shallow(nextProps, this.props);
        }
    }, {
        key: "_lookUpPubKeyForAddress",
        value: function _lookUpPubKeyForAddress(address) {
            var addresses = stores_AddressIndex__WEBPACK_IMPORTED_MODULE_11__["default"].getState().addresses;
            var pubkey = addresses.get(address);
            return pubkey;
        }
    }, {
        key: "render",
        value: function render() {
            var name = void 0,
                item_id = void 0,
                name_or_key = void 0;
            var suffix = "_accounts";
            var pubKey = this.props.pubkey;

            var keys = stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_12__["default"].getState().keys;

            var has_private = false;

            if (this.props.account) {
                name = this.props.account.get("name");
                item_id = this.props.account.get("id");
                name_or_key = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                    { to: "/account/" + name + "/permissions" },
                    name
                );
            } else if (pubKey) {
                name = item_id = pubKey;
                name_or_key = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__["default"],
                    { pubkey: pubKey },
                    pubKey
                );
                suffix = "_keys";
                has_private = keys.has(pubKey);
            } else if (this.props.address) {
                pubKey = this._lookUpPubKeyForAddress(this.props.address);
                item_id = this.props.address;
                name_or_key = !pubKey ? this.props.address : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__["default"],
                    { pubkey: pubKey },
                    pubKey
                );
                suffix = "_addresses";
                has_private = keys.has(pubKey);
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { key: name },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    this.props.account ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountImage__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        size: { height: 30, width: 30 },
                        account: name
                    }) : pubKey ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "account-image" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__["default"],
                            { pubkey: pubKey },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_7__["default"], { name: "key", title: "icons.key", size: "4x" })
                        )
                    ) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { className: (has_private ? "my-key" : "") + " pub-key" },
                    name_or_key
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    this.props.weights[item_id]
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            className: "button",
                            onClick: this.props.onRemoveItem.bind(this, item_id, suffix)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.votes.remove_witness" })
                    )
                )
            );
        }
    }]);

    return AccountPermissionRow;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPermissionRow.propTypes = {
    account: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.object,
    pubkey: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string,
    address: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string,
    onRemoveItem: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func.isRequired,
    weights: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.object
};

var AccountPermissionsList = function (_React$Component2) {
    _inherits(AccountPermissionsList, _React$Component2);

    function AccountPermissionsList(props) {
        _classCallCheck(this, AccountPermissionsList);

        var _this2 = _possibleConstructorReturn(this, (AccountPermissionsList.__proto__ || Object.getPrototypeOf(AccountPermissionsList)).call(this, props));

        _this2.state = {
            selected_item: null,
            item_name_input: "",
            weight_input: "",
            error: null
        };
        _this2.onItemChange = _this2.onItemChange.bind(_this2);
        _this2.onItemAccountChange = _this2.onItemAccountChange.bind(_this2);
        _this2.onAddItem = _this2.onAddItem.bind(_this2);
        return _this2;
    }

    _createClass(AccountPermissionsList, [{
        key: "onItemChange",
        value: function onItemChange(item_name_input) {
            this.setState({ item_name_input: item_name_input });
        }
    }, {
        key: "onItemAccountChange",
        value: function onItemAccountChange(selected_item) {
            var _this3 = this;

            this.setState({ selected_item: selected_item, error: null });
            if (selected_item && this.props.validateAccount) {
                var res = this.props.validateAccount(selected_item);
                if (res === null) return;
                if (typeof res === "string") this.setState({ error: res });else res.then(function (error) {
                    return _this3.setState({ error: error });
                });
            }
        }
    }, {
        key: "onWeightChanged",
        value: function onWeightChanged(event) {
            var value = event.target.value.trim();
            this.setState({ weight_input: parseInt(value) });
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(item) {
            if (!item) return;
            var next_state = {
                selected_item: null,
                item_name_input: "",
                weight_input: "",
                error: null
            };
            this.setState(next_state);
            var item_value = typeof item === "string" ? item : item.get("id");
            this.props.onAddItem(item_value, this.state.weight_input);
        }
    }, {
        key: "onWeightKeyDown",
        value: function onWeightKeyDown(event) {
            if (event.keyCode === 13 && this.state.weight_input && this.state.selected_item) this.onAddItem(this.state.selected_item);
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var key = 0;
            var account_rows = this.props.accounts.filter(function (i) {
                if (!i) return false;
                //if (this.state.item_name_input) return i.get("name").indexOf(this.state.item_name_input) !== -1;
                return true;
            }).sort(function (a, b) {
                if (a.get("name") > b.get("name")) return 1;else if (a.get("name") < b.get("name")) return -1;
                return 0;
            }).map(function (i) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPermissionRow, {
                    key: key++,
                    account: i,
                    weights: _this4.props.weights,
                    onRemoveItem: _this4.props.onRemoveItem
                });
            });

            var key_rows = this.props.keys.map(function (k) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPermissionRow, {
                    key: key++,
                    pubkey: k,
                    weights: _this4.props.weights,
                    onRemoveItem: _this4.props.onRemoveItem
                });
            });

            var address_rows = this.props.addresses.map(function (k) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPermissionRow, {
                    key: key++,
                    address: k,
                    weights: _this4.props.weights,
                    onRemoveItem: _this4.props.onRemoveItem
                });
            });

            var error = this.state.error;
            if (!error && this.state.selected_item && this.props.accounts.indexOf(this.state.selected_item) !== -1) error = counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.perm.warning3");
            if (!error && this.state.item_name_input && this.props.keys.indexOf(this.state.item_name_input) !== -1) error = counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.perm.warning4");

            var cw = ["10%", "70%", "30%", "10%"];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    _AccountSelector__WEBPACK_IMPORTED_MODULE_2__["default"],
                    {
                        label: this.props.label,
                        error: error,
                        placeholder: this.props.placeholder,
                        account: this.state.item_name_input,
                        accountName: this.state.item_name_input,
                        onChange: this.onItemChange,
                        onAccountChanged: this.onItemAccountChange,
                        onAction: this.onAddItem,
                        action_label: "account.votes.add_witness",
                        tabIndex: this.props.tabIndex,
                        allowPubKey: true,
                        disableActionButton: !this.state.weight_input,
                        allowUppercase: true
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        value: this.state.weight_input,
                        onChange: this.onWeightChanged.bind(this),
                        className: "weight-input",
                        type: "number",
                        autoComplete: "off",
                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.perm.weight"),
                        onKeyDown: this.onWeightKeyDown.bind(this),
                        tabIndex: this.props.tabIndex + 1
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "table",
                        { className: "table" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "thead",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", { style: { width: cw[0] } }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "th",
                                    { style: { width: cw[1] } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.acct_or_key" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "th",
                                    { style: { width: cw[2] } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.weight" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "th",
                                    { style: { width: cw[3] } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.action" })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tbody",
                            null,
                            account_rows,
                            key_rows,
                            address_rows
                        )
                    )
                )
            );
        }
    }]);

    return AccountPermissionsList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPermissionsList.propTypes = {
    accounts: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainObjectsList,
    onAddItem: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func.isRequired,
    onRemoveItem: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func.isRequired,
    validateAccount: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func,
    label: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string.isRequired, // a translation key for the label,
    placeholder: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string, // the placeholder text to be displayed when there is no user_input
    tabIndex: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.number, // tabindex property to be passed to input tag
    weights: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.object // weights: hash of {account id -> weight}
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(AccountPermissionsList, { autosubscribe: false }));

/***/ }),

/***/ 2549:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Modal_BaseModal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1960);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(709);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(579);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(581);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(694);
/* harmony import */ var _Modal_QrcodeModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2550);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var PrivateKeyView = function (_Component) {
    _inherits(PrivateKeyView, _Component);

    function PrivateKeyView() {
        _classCallCheck(this, PrivateKeyView);

        var _this = _possibleConstructorReturn(this, (PrivateKeyView.__proto__ || Object.getPrototypeOf(PrivateKeyView)).call(this));

        _this.state = _this._getInitialState();
        return _this;
    }

    _createClass(PrivateKeyView, [{
        key: "_getInitialState",
        value: function _getInitialState() {
            return { wif: null };
        }
    }, {
        key: "reset",
        value: function reset() {
            this.setState(this._getInitialState());
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this2 = this;

            var modalId = "key_view_modal" + this.props.pubkey;
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default.a.subscribe(modalId, function (name, msg) {
                if (name !== modalId) return;
                if (msg === "close") _this2.reset();
            });
        }
    }, {
        key: "render",
        value: function render() {
            var modalId = "key_view_modal" + this.props.pubkey;
            var keys = stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().keys;

            var has_private = keys.has(this.props.pubkey);
            if (!has_private) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                this.props.children
            );
            var key = keys.get(this.props.pubkey);
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "a",
                    { onClick: this.onOpen.bind(this) },
                    this.props.children
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    _Modal_BaseModal__WEBPACK_IMPORTED_MODULE_1__["default"],
                    {
                        ref: modalId,
                        id: modalId,
                        overlay: true,
                        overlayClose: false
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "h3",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.perm.key_viewer" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "grid-block vertical" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "content-block" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.perm.public" })
                                ),
                                this.props.pubkey
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-block grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.perm.private" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    null,
                                    this.state.wif ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "p",
                                            { style: { fontWeight: 600 } },
                                            this.state.wif
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "button-group" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                {
                                                    className: "button",
                                                    onClick: this.onHide.bind(this)
                                                },
                                                "hide"
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                {
                                                    className: "clickable",
                                                    onClick: this.showQrCode.bind(this)
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
                                                    style: { height: 50 },
                                                    src: __webpack_require__(2551)
                                                })
                                            )
                                        )
                                    ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: "button",
                                                onClick: this.onShow.bind(this)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.perm.show" })
                                        )
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-block grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.perm.brain" })
                                ),
                                key.brainkey_sequence == null ? "Non-deterministic" : key.brainkey_sequence
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                            key.import_account_names && key.import_account_names.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-block grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.perm.from" })
                                ),
                                key.import_account_names.join(", "),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null)
                            ) : null
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "button-group" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                onClick: this.onClose.bind(this),
                                className: " button"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "transfer.close" })
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_QrcodeModal__WEBPACK_IMPORTED_MODULE_7__["default"], { ref: "qrmodal", keyValue: this.state.wif })
            );
        }
    }, {
        key: "onOpen",
        value: function onOpen() {
            var modalId = "key_view_modal" + this.props.pubkey;
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default.a.publish(modalId, "open");
        }
    }, {
        key: "onClose",
        value: function onClose() {
            this.reset();
            var modalId = "key_view_modal" + this.props.pubkey;
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default.a.publish(modalId, "close");
        }
    }, {
        key: "onShow",
        value: function onShow() {
            var _this3 = this;

            actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_3__["default"].unlock().then(function () {
                var private_key = stores_WalletDb__WEBPACK_IMPORTED_MODULE_4__["default"].getPrivateKey(_this3.props.pubkey);
                _this3.setState({ wif: private_key.toWif() });
            }).catch(function () {});
        }
    }, {
        key: "onHide",
        value: function onHide() {
            this.setState({ wif: null });
        }
    }, {
        key: "showQrCode",
        value: function showQrCode() {
            this.refs.qrmodal.show();
        }
    }]);

    return PrivateKeyView;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

PrivateKeyView.propTypes = {
    pubkey: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.string.isRequired
};
/* harmony default export */ __webpack_exports__["default"] = (PrivateKeyView);

/***/ }),

/***/ 2550:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(709);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _BaseModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1960);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2223);
/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(qrcode_react__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(407);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }









var QrcodeModal = function (_React$Component) {
    _inherits(QrcodeModal, _React$Component);

    function QrcodeModal(props) {
        _classCallCheck(this, QrcodeModal);

        var _this = _possibleConstructorReturn(this, (QrcodeModal.__proto__ || Object.getPrototypeOf(QrcodeModal)).call(this, props));

        _this.state = _this._getInitialState();
        _this.onPasswordEnter = _this.onPasswordEnter.bind(_this);
        _this.onKeyDown = _this.onKeyDown.bind(_this);
        _this.onCancel = _this.onCancel.bind(_this);
        _this.onClose = _this.onClose.bind(_this);
        return _this;
    }

    _createClass(QrcodeModal, [{
        key: "_getInitialState",
        value: function _getInitialState() {
            return {
                isShowQrcode: false,
                keyString: null
            };
        }
    }, {
        key: "show",
        value: function show() {
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default.a.publish(this.props.modalId, "open");
        }
    }, {
        key: "onCancel",
        value: function onCancel() {
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default.a.publish(this.props.modalId, "close");
            this.onClose();
        }
    }, {
        key: "onClose",
        value: function onClose() {
            if (this.refs.password_input) this.refs.password_input.value = "";
            this.setState(this._getInitialState());
        }
    }, {
        key: "onPasswordEnter",
        value: function onPasswordEnter(e) {
            e.preventDefault();
            var pwd = this.refs.password_input.value;
            var key = this.props.keyValue;
            if (pwd != null && pwd != "") {
                if (key !== undefined && key != null && key != "") {
                    var pwd_aes = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["Aes"].fromSeed(pwd);
                    var qrkey = pwd_aes.encryptToHex(key);
                    this.setState({ isShowQrcode: true, keyString: qrkey });
                }
            } else {
                //notify.error("You'd better enter a password to encrypt the qr code");
                this.setState({ isShowQrcode: true, keyString: key });
            }
        }
    }, {
        key: "onKeyDown",
        value: function onKeyDown(e) {
            if (e.keyCode === 13) this.onPasswordEnter(e);
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var pos = null;
            if (this.state.isShowQrcode) pos = { textAlign: "center" };
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                _BaseModal__WEBPACK_IMPORTED_MODULE_3__["default"],
                {
                    onClose: this.onClose,
                    id: this.props.modalId,
                    ref: "modal",
                    overlay: true,
                    overlayClose: false
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "text-center" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { style: { margin: "1.5rem 0" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            component: "h4",
                            content: "modal.qrcode.title"
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "form",
                        {
                            className: "full-width",
                            style: { margin: "0 3.5rem" },
                            onSubmit: this.onPasswordEnter,
                            noValidate: true
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "form-group" },
                            this.state.isShowQrcode ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "section",
                                { style: pos },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "span",
                                    {
                                        style: {
                                            background: "#fff",
                                            padding: ".75rem",
                                            display: "inline-block"
                                        }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(qrcode_react__WEBPACK_IMPORTED_MODULE_5___default.a, {
                                        size: 256,
                                        value: this.state.keyString
                                    })
                                )
                            ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "section",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    { className: "left-label" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                        unsafe: true,
                                        content: "modal.qrcode.input_message"
                                    })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                    name: "password",
                                    type: "text",
                                    onFocus: function onFocus() {
                                        _this2.refs.password_input.setAttribute("type", "password");
                                    },
                                    ref: "password_input",
                                    autoComplete: "off",
                                    onKeyDown: this.onKeyDown
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { style: pos },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "button-group" },
                                this.state.isShowQrcode == false ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "button",
                                    {
                                        className: "button",
                                        onClick: this.onPasswordEnter
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "modal.ok" })
                                ) : null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "button",
                                    {
                                        className: "button primary hollow",
                                        onClick: this.onCancel
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "cancel" })
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return QrcodeModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

QrcodeModal.propTypes = {
    modalId: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,
    keyValue: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string
};
QrcodeModal.defaultProps = {
    modalId: "qr_code_password_modal"
};
/* harmony default export */ __webpack_exports__["default"] = (QrcodeModal);

/***/ }),

/***/ 2551:
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QoLBzEKr7oFDgAAIABJREFUeNq9fXmYXVWV71p773PuvVUVSAL2o40KmjCEgiSEVFUSAiRR6U9Bwan9tPG1OPLk2bQTaQd89rOfooJD80RBUfTz4RPnVpx9bZuEzIHMAaICraIiZKjpnrP3Xuv9se5dtetU1U1SiveP+m5uztln77XXtH9rOPjWt751y5YtzrkQQpZlIQRjjDGGiOB4PsxsjIkxjoyMbNmyhZkBABHlf4nIGNPX19fT0+O9995v2rQpvRcR5Rr5rrfLP/VKItq7d+/VV19tjAGAPM9DCMyc5/ncuXM//elPy4179ux54xvfWK/XiUjWJU/pPH9rbQgBAJQC8mhmjjEODAy4bdu2rV+/Xn6NMSKizDud4rF8ZHSZ9+joaKPRkAGNMTJUWZbbt2+31nrv0ykKlWUE/V1ukQ2T+cgFiHjo0KFt27Z57+VHWaG1ttlsxhittcw8ODh4zz336MR0qDzP06dPJJbuUIxRZyKTQUSnU0nvkWUfF7F09BBCvV6X7/J4mXGe50RUYVjdGyGZ8pE8XcmnXxDRGNNsNnVVwgsxRiGZ/g4AzjkdWTfsWJZQobLOygh10l2Vx0/jY4yR+SFiCCHGGGMU6lRIL49LJ2etFUKkgsnM3nsdR4aSnRDKKhWMMYcOHdIHOefku0wmxigD6uZN/MjTZUD5yO7qjiKikbHkV6GiPIOP8yO3K6Gdc9Zaa22WZTKPPM9VlFSCAMB7X6vVdELOOUTMsuzss88GgCzLZBxZSQhBuIOIGo1GX1+fEDHGuG/fvnSzRT7yPO/v75cZeu/Lspxq/rorIQQZcGhoSMbUa5xMSNSkiqtz7njFUJlfNbGKmLU2xijKoiKGwtf6Vy8wxsyYMUNuF8WvnJvnuQw4OjqqkiKqUDZG9kDYVigrukz5cdL5V5hOGPbIkSOqsIwxTqiYXic8fLwKPtWFKkcVXSCLnHhL5Ue5RamWqggiKopCZVnkS9aZZZkaKL1ApqG0Vqp1sIk6iOyfEFekzaRaUK47qpXt8CRlHNFBkyopXbyqM/lF1bPcqOJQUXYiLHLlyMiIXiwjqJirdVYpUbJ2mLxogImMYoyx1o55E8LM6YZ3/lRYWr/rbug/RdlX3BGdligXdVxE8RHR5z73uSzLRIUtWLBAx1yxYoWMFkK47777ZObOOSWrem3yFO+9PnfTpk1TLUc0IyL29fWJUkpdxTGd9WR/KhZduS/lLN18nZ+QTHZVLIA6bsqbqon0u4wwUa6Pa7YVsRhTUE82pYSh1PmUL7KZ+stE56uyYDFBYmGFHMIv6iLIIMKGcv00dIgq8qn0tXmyiSXP1s1XaRKFolqywho6b71S6SJKXSRUr1RJ9N6L1P/pM6/ok78EsVQp1Go18R7UysinKAphhJRwHZhU2WdkZOSee+7Rwc8991xx65xzqQE9Xsue0qhy41+Is1Kekm0XfklVe2V++r8VudBxurq61MtBxO7ubvmvoiimYc0nEjT1Qv5yOit1GlSRy+anB2YlxMSjiRybU59DbbeMmVrbPM//FJ3VaeP/AtZQ6aKnqFSFjx1Tk4Oh+Maqs9QRVYMoBqurq0tdBIWV5OxSYcNjF8aUtSscOh3OEke8glV1dvZSRKEyJ/HgJ4rh4sWLVWDVeiLixo0bL7zwQgWFjooaHaOyT7EzdWv/DJyVrqGCQx0LZx0jJ2ZZpkBNyon1el3tpvpcuiXq7oqva4xRZK0zSKfjpMeMytLctGUq3fOjmjD5e1SyKjuo5lY8T72qoihkPQpsioJT5i3LUqFBEWE5Y3c+xumYuhzxQo6JWFORQDlf/JqjqlL1sPTGzqdZuSyEMDw8rFCvc857L6c84ZQU85LP8PCwzFncfbUSWZbJJIWCHbZW2HNwcFDuTV25oxBrKlGfqKo6L16vd86NjIyIgBzVKgHAvn37lIsXLFhw3333idz19vYqgdJTt2xeyshyLBUaiR+7bNmyzuuStYQQJp4ipslZFZC+8+J1wQpadRZbPdwdOXJE/ICyLOv1uopJrVar6GAhop6H1O+VQ1Ke54pVTHXoUz4VwU/PBn8GnSVzOkadVbn3qFYpna5Em1J0xXsvroOqcEVBlNbiOsjBSHScTniqOYjjVoHX/wwefIoWHIvzUkEpjxpkkxkL1i7+p/hZcrsKsnq2qd8r85Fly152dXUp4NFhtxRfVdFzzvX09Iy7aNWqVRUf51j2v4PY1mo1USiKdqrzIu7iRGcvBf51AuJnyTg7duww7U05d+ECHwMzx+jvWb9WWXvhwoXq9G7atCm1/ROduOP9OOdWrlxpFEVVn2UaQcP0uFAURQhBxEcRD3WanHNydlMWSO1UigurBy+IqJDXWtvV1WWNsKrLs7oAEhKMkaiSkr5er6e70gGAPyoTyLBG5D/d2GnDygrIOucErdYQVqpKxLTL3og2ybJMNHSK0lRg28xlFcsrke0KDi6EE93UbDbTcOT0FpXiqO7gwYOpEtGNnUZ0R2ght3vv5QGyAPHuxN9RJkoJquqvBeA6J0sV859lWRliltWIwuGDh2IIzrksy2yWi2ir/hZTIGMKb+oJtHJKOy4FTUQHDx5EsRdijysw5vESS7ZdpViEQiiVenf6T+9jltlEhNl7v2XLNg2JHzlyRDDlPM8HBpYZA0VR1GrCYgxgjhw58sAD+/M8HxkZmT179rx583Q/hFjNZlMMgrLk9EJ83vs8z1E34c8FLaaHNRWZtWvXilopy/Lss8+eMWMGMWaZQ4RI0RobyYsmwraBVn4RP4sBKEZrkSmgMQCGGQGRYgwh1Gq19GAEAAww2hxt1BsMDAAISEyIaACnvTpMcV6Vwc5AwhRjRZFE2duhoaG77rrrK1/5yo9//FOhYJ7nzWZTNtkYc/6S/he84AVXXXXVnDl/TUwx+sxlPvjcTVi2RGuADTBD/MC//Mt3v/tdtBbBRobcZUVRCP+q64uIz7v0+b29vZdffrkGe2KMeZbj8ftJY6Sg9kfPENOI3UsAfLQ5yOx//ZuHXvqyK4wFQDAWJoYPWs9Gi8YBmKXLl+27fz9xHC1GiKOi7OlMZH7eF8z+da/9rwiABowBMGMpLhoebqk/BOMsILzs5X978PAhYg4UI09vaa0pQX9/fyUW3dnVcpD1zj+HmQP5yJL9wUwcikPM5fXvfg8AIIKoUYO5WpM0+IqIFiCzDsCYrAts7Y3//R+bkT1zJCbmZrPJHJkjM4fQoplnH0bpmte8yBpwCHUE42am3tP4g5cxxunfO7/81cDsmYk9M0dPzEzMgWMZCiYW1mPmtWvX6vIlXjmW69DV1aVjKyLRwcmOEJ/ylKeIQjFowAAAMZHN6osXLLpv195arVEUo8ZZFo8HuK+v77nPfa44FkT005/+dOvWrcEXIQZrbfRNNO7WT/7vdT9fu337VrRQFr5eqwFA2Szyes1aJAKG4ME3cnFKoF53ZTNQCJVjnSIctSwrysIAGgNE8MpXvGJ4tPmqv7/SGEYAY0WviQ/sUjdAbhe6a+5U67N69eo07iQOZGcxXr58ufctWaHofTnCsTnv1DkZQmZzAAcGAeHZz7nke9//sdj+iSy9e/ful7/8ZQjQlVsEQLSu1nPK0+cG5sBclG3fMqjoRM+eA1991eUtcUP42C13qrRKBEywmo0bN77rnWsa9byWOxk8r3Wjaxx4+NEg1xPHGCNTYBYeUydGUxKNMcuXLx+XKXTxxRdXDpCdw/fG4cBA39hK2DM3L1x+ngWo2xqCA3A9M078fz/79xDZB05dapmNOCtl8MzxoV/sP23OUxyAFRG3XQMrVgbmIjIJlYmZAlPwvvBccuDXXvl8RMzrNQDz/o/ekaq2siyTjYkc/Esuv6yROVEJYGqrLrnMMweKvmzG6Ik5EkdiVWUhhB07dqjTd84551SJlToUqZqf9AMIS5f2hxA4cvSByb/33W/PDCBA7moA2V8/9dQ/PPZ4SVGmImvQAfWfgTlGT36E/fAFSxZ059aiQ5ODyT904ycCs2+rqhhK0V+jNMKB33L1y1sQALr/8dEvCKumzCsIJ1Ng9hzL8xeeU3c2z3MAB7b26BMj8mhmT8whMkVm4jVr1ogMLlq0SBIpJqp5I7iPeqFCXXUjJkmgMJYIrLFgCDk++utff+ADNwYCBihDnDV79oO/+MXsk2cDBQAyCIq3qFLIsoyIENgYgy6LxOvu2XjKKacAB6ASmNasecfhI8MRUDSnsVZcOIcOAgyPDAmDi24ty1JObEVRiKoVVCsSMQEgfu72z8YQfVkCEMS4cdN2knMikdgFNABI9XpdDkZyxkyTvMZBNJXjzsSI7ngElWtZ3mwOAxNmeO2116I1AIBZDgg/X7eOgYjJWRNjCUBi/iSpTASwZd0BY2QAZ/MGZNnP/uM/LEJN3NJI1113nbMABoghBAJs62PD9Sw3yBQiAGdWWKaFdggs04I6rItEALBg8aIsw66aQyAAuu++vRSF+Gn0hCrhyDQ3cYxYgsaKQVFCdggfGbBEUK/XAPmJxx77+rf+LQRicBzDG6+55oyz5jXqGSISk7Nj2QmyJImzt3wWZmMtAxBgCPTUpz/tmmvewBGAIyDeftttPjAxMIJ1jhlBrAZiCMG0Y9tEAZIkWM2xISIGtM6R9wBw3sJziyI4BAQYGhpBCwRs2qgpM8vpQ1hECDIpu4zL9tYg+5g3NG5EAADKOQwPA3oosls+doOzmQMACGC6P3zTTQbZcHSMljPgVjJuZX9agwNCJARCJrTO2Ox97/ufooktRIT4ma98N+NmACAA5BIRS4hgAZwNDE5svzUa5kmZAhENAHNhsgawa8e7awYoy2xgYITIDAwWAGgMfUfEtWvXimwpviSfgYEBk+Z5p7lbim2l6fNEBD64Wj1yBAvf+Ma3yuAZwLr88he/pOasBQQAppbgdDozoT7RGjQA0N3dGOg7p21q8Gt3fQXQUtsXijE6cHJUtBaNzYCNgr+CzAjPtpL/mAw0KBwBsHv27rSmzraIkC1c0OuEzuLKIqABAGw0GgJMpjCWhiattY1Gw3TOGUwLH9LsfotZeeSJfff/J4DJrI2RX//611oDDGPIkSxzyjMXMBhmljkBANh6dvnllwG0VMnPf/pDQOsQkAkArLEGAAgQDUUoyxLQMKPiPCoHLbgVgSIb2/PQLzY0R2qem4EMYL6s/zxhv/ZSQU7Waapqmgc85gZIHnyadZfmRlWSbzT3sCQGgK2bN4h3xIyA+UUrlqfPOJYjavpQ0ZLPee5qC0RM1uUwOvy7Px7G1iYjAEQKLdgaENEaY9OET0gqMmQTEBGweNd17wcogDOwpndJ/zPmzERg4DaR2uqoLEtNPtdjX5oHD62TaJIKkSauVMJzLeeewToHjLt3b/XRABIRnXzas7rqxjAARTkTHhUIkSsMCpIFzAjMZ83vtQAGTYzBONjzwC8BwLQ4lJxxgC2eyPOcoo+hFEnUmpukIMIgFnd+8Utf/9b32QABQ6x9+MMfRAAD7GxOkcVgyapvuOGGI0eOiL2W+C4R7dmzp+o6TBqkmYqznEUwBhB//9uHIxhAQOBnnXGmITCYhnCOGh0Yz30GmV02Y5YFcJkBRi5H//N3f7TQZl4iHtttKotRAGqM54U0wEMB3v+B66989Zvy7oYnAAyve8ObL1k5EKMHMAAGUBSsEMsIz8oZQ1hMY5fqUTupLKhAo2kIU3V8i6xEzTIA46O/fUigOiSeefJJDICgUU8wRm7sAIABMyGKr2AZLYABcCd2ZwebEYyzBIOj5RiohMjAwGAzY42NFOs1e+D+PRs2bBDtLvF9Y8wDDzywfv36Oz7/mZGRwEhDw7Wsy/3N6hd/4uPvdQwkW8ggVqUSixa4TbPn06CJMcZphcZUWSVCKVV1BiCr5QAwNHwYwIADDnDCzBPboSpqsQwfBUFEAAALEAGIARAtAEbPM2ee8NhvHofMGoJmIcQitA6BI4QMIcYYKRoAX8Q7brv1i5++MVXGCvk7BMQcnOE4/L73fmrNmqstBPCMmSGGGME5YAaDQj3UkK2WmSGiFOGNBQk3bdpUyTHTUGiadaaAHKIJcRTIFUgAkEOtsIBNZGgVaJVlCQiMR1HzRIJ7QaCIgMxABNYZ9l5QHwvQ3d0NzEyi4AwCC4GFKXIECM0xuQMGBEAbAgGYgFnXjJPf8Y63HRp8Ys2aq1sbaBHBGITMtUZsiWSbP2KMa9eubTQaAi4sWLAg9Q1dyodpKYB+EaRYAf/ABMQQY6PelWeuLIYB4fDBx8VyhxD1/IHGMMcpFZcBQAg+uiwPxMaARYLgDw0NGWsgxgDQ090FKA4mMIPFdpCRyVosI4PJiYpWhIVaxX/W2RDC7JNOueVTn3zpS64QkSnKop7XiL2BrAN8rABMxUMQp9epA0VEgmSlxX1iUNWsil9Syyw4+9Snneb9RgCT1+HXDz1EDIjWOIHiRMF3ygFBBCJyWQZgrAEfPLN3GR8ZIXYZoPEMp845JfEzEIABwGUZgwkRnIUVq56zesUCIBZ1s3nzxu/823djCM7CE4899qq/e8mtn/6bH/7ge2iplteCB5dR55wBEUD5m6Y0id/r9u3b9/jjj0sYbuHChYr8CSsJjbZv3y5kbsX+iQHo6afNM0CAObP/5YP7GYEiW4vel3luseWg89ReFgmGaQzECIjsHD70wO4SgMXuYXb6M0+NAA4MACFihOioVaDCjMZlqy953vve8XpisihcjAD0T29/x003fdyY6Ev695/85LLnv+TuH36dCGwGDNzBQpdlaa096aSTFi5cWKvVarWaJj5ba8844wwYGBiQpBxNXVU8q1JqpIGGpQN9HMPPfvLtOkLN1MEAQPejfzwyOFpGJgHORQ16X0wVAgjkiYJAXEVJzDE0H//eN28Xmwim5mb8VWAuSIA5z8yeS/Z8zWuvQLQADkz2z5/4QmQKFFtoH8fm6CCTv/3WWxCh0egGcADuIx/5lA9MXPpYHjU2IV5bBeAVspju7m6tkqnIoFaXpmIMBh0wIPf1r2AGZAQEC/R/7/pavZ5xy3UBHB+Cn0wMbTvVC2wmpSnuhz/4KYJFZGvw/P5llluBDwhtFARbyfFoDDCHEBDQokgQee9r9a4Y6TVveP11b/9vzdHCGAIM7/yndz36+8eK6NFkHUJeGlFPk7xUwROREUqpX5omM8pfyYfSMltgOShxV8/ss8+cE5kBwUC87bO3h7YuTAORU7ukaE1G0QMSAEQmzBqf/9ydLZc9lle++iqITZZjEfIYjYENMHAEpkZeK4tCwZksqwEYBgPgPvi/bjj9WXMyZwAxxKFLL73U2a4OyU7GGFXZac556naZFNZQVJOINm/evGHDhu3bt+/fv3/+/PlLliy54IILLrjgAjDGMABiUfrXv/Yq1zqN8L4dO3bu3BMpapFN56wVjiCQFmLL+H79K18tPAASMhHTi150udBRWFRdWSICJrmrKJridreML4APZJ0LkdE1vvntL3sfgCyg371n1+dvv4v46GkNlRyp9HAOK1eurKTJT5U/1U57dsuXXcTEVI6ODj0uoAxCDpift2TZaGDPXDI3y1Fmz1SkiH4K8HtmHyWUVzI3mctTTp5lAWytDuguu+IlxOwDE7OPgUjUhw+R3/yaKyS2g2Cu//jnp9Q9xMzxTa9+KQJ0AQD0mKzn9yPEHCn6EIKEKUIIzJFjmQY+UsU9DoPvnLFXqaQxxlhniEPwEV1W757xxte92jlAiIh479atH7vpY+JC5Vk9RgY06tBWKgYsgDMIAL4sgfEt//APTzxxkBFiGcCYG264QfgJAZyxiPa4UxMQIDRv/tyXZtVhBFzdlBT4NVe+MpIhcNbaGALqQaV97hcdouJVHbQzZ4kuS2kMCEv6+9pb533zsEMwCNZmYnq+ffcPPHNJHChOzAQQW0NEzLE5Oszkmcsv3XE7ihZDB1h71WveEJgLX5IYuJHRFmMdD2cFZt8cJC6/8KmbAEzNALguQPez9ZuGi0DMRDQyPMgchec1yzCFWyqfKZNnent7TzjhBAAYHh7etWvX4OAgEfX09Cw679zzzjuvLCjLDRDYrHb33d+89NIXxeidyVyeXX7pZV+88/+88hV/K9HqNP1M82iZGZhqeQYAN97w4Xe/+3rB9YBh5sl/ddttt8o2C4xTq4SFj5W1CGs9GIdedfU//uvNt2zb+6scRjy6573gikOP/zYCOMRGVxcwhwiI8PvfPfrII49o0a0IxIwZM/TE04mzlJtE649Fh7iITMQcvMh2ydxc8/Y316zJTSvDwbr6ylXP/ePjh6mt6dJcD2Gu0Bx+cN/uhb1n1Z1FgFqtkde6AbI9+x8OzJ4pchniaKQilL4dBD0OziKOgZmpJOZf7d3mnHFyejeNa697z6gfm5oor+uuu64SrM/zvK+v71h1lmSjaQ5Eq6gFDBBTAOPAOUfMAPaGj3z0yitfGYmNAWOAol+/fu3JJ8164QuvuOOOO/bu3avyX5bltm3bbr755sV9S86Yf87+Bw+UgVxWKwpflsWO3bvnn/mMUAYjRDcO2NjMwXQyHI0FKinDWD79rEVv+PuXm8zmBkxmPvGRDz388MMhsgDbEkA84YQTpGuLwqST9GLpwFlqAdPshxhKJiZiYiaOkUNbyMuP3/ghZzF3rYvzei3FSzUzU8+G2mnGufzU0+bdf+Bhzxxa8WcmotHRUXXNp8FZTMJcftQHLg/Va5mcb11WO7N3gSTtUMv2xfe+970aoNX46bJly46Js9atW7dx48atW7fu2rUrRaZ++eAvt2zeKuSNFBHQOgcMwHzt296ye/fOufOe6YwFgFAWEsJJGyuNtY6QI6Zk70R++OGHvvHNr/sA1kKkVpSlXq8TME2Lr4ACgbEERXR1W3LW/dlb/pXRNDITfHH/vn233voZAAgMzhmg2EZNgkKhk9SwXXTRRWnFiLBJ6tNPzM1dvHhxNdMs+e598cMffv/Zz17lsrGYQBo91EolQepdO+wAprZwyfKDR0Ylkab0LW5q+WLEZTHKXL7uqldiCzzM3vfBj3Vws6g1pUAUIhXM/vzFCwABrRHn8A9/fCxITgbT9ddfr417dMlLly4dZw0llATjuzBV+kRVMt3T+ra0ME6QL+fcRRdddMkllwDAj370o02btuzdu/dXv/qVbECWZX19ffPmzbvkkuc8bc6cvr7z9+y5HwEYyFnYsXXLSSed9PVvfO2Flz7POQmAsLU2xBIYszxnCmvWvPMNV18TyQSwzzj1tCkZi4mIMtuqPkdwAHT33Xf/6pHfGGPKshwDFRA0mT5FDSY5fqxevVrjiJwYL72n0g3GGDMwMDA6OjppcmVZtjJevC/ky/g0oNZR3ntfFEWMPobm2992bWunEa3NrKsDuDddc20rH4hJNl98Lopehm3BFfHoaY9ERBTaU/I+tn13ij4GsezE/J73vKdSjiGZaOM46/TTTy/LsizLQ4cOaaMFa+3555+f6uO0r1xfX1+atq6+Rft03gq3yAPUOAjaoxPK8xyAKPJHbrxx1apVV7zgCmKG6CNEALjlkzd/5zvfXrfhnlNOOcUaEwEsQKDoTAYERIwWECgz1LlWq51G3soMLssyz+ut2ESSuCy/CAKqNZ+T5HxMzMxTVyh1jlImkhiHlJ2k7pj6vul3oZE+Qsdsd7OKMTRjaP7u1w8/8+lPdQAAJs/r7WiVu+NLX24GDsyRA3FszYJa/OLDaAeeknnKE4W52kmqraVpXQIzizWs1D1VdJZJs9W1wEP7e02sDxJmEQw6TWLS4J0mH4zlaCTYhvZTkZBtWQZjMzTuv8x56i8ffvhlL3sxAJVlExGNtYjw6iv/7tkrV40MNSlEBCPujXKEs3nn8pgELLIxcrNZwvgmZzp/TQZJeapaIy0+p1bITkz+rhT0TKzLa38n76Mo+HaHMFspINDKV+ccUEtIGZAgxDJkzt1511fvbKeMSa2A4M4hkHNS6KNWxYUg+MmUcUmKMTLJ1nrvXZbV2qUWmpmkG6k1bFoRqsDWGLH27t176NAh6X2SBlNTcCflrBjjzJkzzzrrrEr9u8Y7tNpEVpi2+xrnkSAyE7bIx1leR5A8Wi91T1LThczAxlkDDKJjrMUQAxA45yjClHgEs7HWoB13OIVxRZ5CR1msODRZlp1wwglz586Vy6SV3thnxYoVlRLKzmH3tO/ZpEV8abOLFJnRDJyJI0xsulkRJfmrmJx+0lsWLVokmiiEsH79eu13IEm0or/Wrl2rK01T8yu52JyAEKkRb0XKFLpKY6udC75Vso5a+at5pGkNvmq09MexfBXTSj4QXFz+aiwvxZG0DHliHwi5sdFoqFEWPZvGBCskU99dvcj0MqOPl3KhSnX1pA3ZpJxQmeio9f/GGNGmaVHOuCBIkjymRiDPc8mZ0h5uabqdaBblYqnVShvhaRfX9GCr9bWpAtWOcJC0VEnT/nRrnWbL5Hm+cOHCPM8nPxYlOksD1/rXGLNu3bpJr1+wYIH0H5LOKJroUunPptO48MILpZPf8PDw3r17hR0ajcb8+fMhaYIiBvcPf/jDAw88UOmgV5bljBkzlixZIlpv3rx5WgIp/qBo7jzPL7zwQlHkRVFIbFRbwAkTSPdNGX/WrFlw8cUXKwnFJ2o7JpN/JtZKaBvaSXVWmlMum59WCFWYJc0L27Fjh2h6AEhP/22glUMIO3fuVEkcGBiooOZSd98+sXpm3rBhg4r5qlWrNEFfa6oBYMmSJfqgLVu2QLuP3sDAgEvL1CZqzUlDIAp4KlMctbMsjG/5WommaN2xyLgQd2hoqFUhNN7mpJMcHBxMu1bD+P47mnKQ9mtRB2h4eFi742nerPpPojFED4gf09XVZVJ9UelEMOlHSVOWpZ5yOseXlLHTnnyqNer1ujKL+ofSE6WS0pkGPmTDFKSW85NSTTZGRpPEhVRWVNgSAAAGi0lEQVS1yZakiQpSWSzcJDXxyg0y51aJHkzR9Xnz5s2TOg3qEBCRSEfnGuGNGzcK73R3d/f29tbrdc2U0y8iHTLU3r17Dx48mOf5gQMHFi1aJC1v58yZs23bNslFkLvEYtx3333aXvXgwYP33nuvKCaxntKjW4UmhLBnzx7t9TM0NLR9+3ahzoEDBxYsWCAe9Zw5c/bv3z8yMkJEBw4cSBMwjyluOJV8pQqis5+lajVt+aDaJC201z07//zzVQdt27atcvKYWJwFEzrJVqrd0hbiFdu6ZMkSndvmzZtTjaR/V65c+aR3ZktFQ/suaIRNjFpqYVVsU+9EEKEErgDtuZyufFyoPTlpac/o1JdMp6fz0RYOk4rLk04sFRwFDlPnKFWRaSWU5mJUWqqkFaQV9VrJG06746V5oROLBaW6P6W4NDefWBvypDdIlP0UG7d79+7BwUEhRH9/vxhBY4xgZ7KSjRs3lmWZZdnhw4d37tzZbDadcw8++OCiRYvErT106ND999+vO5G+EkA3YNasWWeccUZ6NhJH9IknntBO6GkV3GOPPbZz586yLEdGRn7729+ec845YgdGRkZ27dp1rBHpP11nTVQTlWcp6qR8pFVReq+g/vLZs2dPxTvT1Cj5kue5WB61sCJZMcatW7dW/I+Kk2GM6e/vV8fw3nvv/YvqrNSGqkylCLfYbFUx9Xq9LMvKqz4UBdGMfrXo6TlJdFZZllo1m7qBFcgl9QEkRCjgkiLsIQSJJP7ldFbaLjhtJ5civymckEY6lRCNRkOP1uJApOiuSLoM7pyTwkP1wjTRTKDdiWcGOepqtCLtjT6h88CTr7PUIe7r64N208IdO3boOxCWLl1aMfnMPGPGjHPPPVfuFQUkpJk5c+a5557b3d2drk3eYbF//37xRYeHh7dv3y4EmjVr1llnnSUSeuKJJy5evFiUetq7SFOQnXNnn3228mDV5V61alXlKCN71QHYUt83zWaahi5Ta6UnuLTwbPny5fK7nhYrXyr/u23btkoqmvxzYGBgqsSYdD4TowREpGdJa+3FF19slC6VFxp0AB4qR7zOPf86q7NKiV5abyt4gPayVQBW0xP1bKSYn0JMqX+nAYEOQGYlg3Ri6+AWF2uHz/TSChqXeuG686p0p9eaSsOUqcKKMcqCBbQTH0KWKm6X9tiC9ksr5AAg/6Xd7tJWd5U1T7T4+r3SAFqvh3ZHfTdp93RjzJIlS9SOVPpcyv2HDx/WDmHH+64sADjzzDNnzpwpHVd37twpYddZs2bJgrMsO3LkyO7du8W0dXd3L1y4UN9YsmvXrjzPRSbkJOi9P3DggAaZ6vX6GWec0dXVVRTF/PnzhXnT0odJ+asiWIg4e/Zs8QGzLDv99NNh1apVAjNpJ2JFi1KRTk9zFQ1yLH7WpDiXfqnA+SmviaD19/crLrZu3brJOwElH4n3pXwkkXoh/URgLlXWqQKVu8Yw+PSFHCkgN/H1JtWmne3I4DTelZWCpemrwFIUVFEzsffp4UPP3np4qlgefbGUOCLSKgzajfZSEVGhmQhwV5xVKZ7J0hCpJn9PVdOlb4CqFPpMz6uotHytsJvIuD5C27Zqs0AxNbVaTb6oNdBGi5LMJ+GSSY97KXUq3Z+FyzSwhIhOnFcR6fvvv//gwYOaV5MqyIluhEYiBCOfBhqhYTsdSpWr6J1FixYVRYGIc+fO3b59u0z1kUcekdoaY8zQ0NCePXtEzc2ePXvu3LnyEr/TTjtN8C9jTE9PT29vr1BheHh49+7dijHos5xzixYtSskkNB0dHd2+fbsQoaenB1avXj2pppg2xqDsnQKbaRbJRAgfxveOlL9Lly5VGRckMs0Ok3u3bt2qYpXmJQgmJQOed955qnTknRcw4S0olYwzVVvy3j+5bOnSpW7iy7umfaypvJFv0hdPTBVPrUTCK+9tCO0+WaqY5H9Tf3iqF+mJ3ql0R0yNTxpDqQAS6VSzLHOpIKgfMO2mrjLjZrMp8HGqCwTxkP44aRxfGgGmTo22OSmKQpD1sX4S1koSWnp4lKH0eo1Oaj9Z8dfSh6YaXU3ZxFWri9cC4yR7WWHfNCB4XMTSd44NDg6KWpUR+vv7G40GEY2MjKRd4NRLFt0k75xTQF2aTmqudXd394oVK4QEvb296ql3dXUtX75cFLz+Lnj/8uXLRX/19vZqw4aenp5ly5al4ShZsrSrm9g2uVarLVu2TDasv7///wMCmdZm6AM8jAAAAABJRU5ErkJggg=="

/***/ }),

/***/ 2552:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Forms_PasswordInput__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2335);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(581);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(407);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








var AccountPermissionsMigrate = function (_React$Component) {
    _inherits(AccountPermissionsMigrate, _React$Component);

    function AccountPermissionsMigrate() {
        _classCallCheck(this, AccountPermissionsMigrate);

        var _this = _possibleConstructorReturn(this, (AccountPermissionsMigrate.__proto__ || Object.getPrototypeOf(AccountPermissionsMigrate)).call(this));

        _this.state = {
            validPassword: false,
            pass: null,
            generatedPassword: "P" + bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["key"].get_random_key().toWif().toString()
        };
        return _this;
    }

    _createClass(AccountPermissionsMigrate, [{
        key: "onSubmit",
        value: function onSubmit() {}
    }, {
        key: "onPasswordChange",
        value: function onPasswordChange(e) {
            var valid = e.valid;

            var name = this.props.account.get("name");

            var active = !valid ? null : stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__["default"].generateKeyFromPassword(name, "active", e.value).pubKey;
            var owner = !valid ? null : stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__["default"].generateKeyFromPassword(name, "owner", e.value).pubKey;
            var memo = !valid ? null : stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__["default"].generateKeyFromPassword(name, "memo", e.value).pubKey;
            this.setState({ validPassword: e.valid, pass: e.value });
            this.props.onSetPasswordKeys({ active: active, owner: owner, memo: memo });
        }
    }, {
        key: "checkKeyUse",
        value: function checkKeyUse(key, role) {
            if (!key) return false;
            if (role === "memo") {
                return key === this.props.memoKey;
            } else {
                return this.props[role + "Keys"].reduce(function (a, b) {
                    return b === key || a;
                }, false);
            }
        }
    }, {
        key: "_onUseKey",
        value: function _onUseKey(role) {
            var remove = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

            if (remove) {
                this.props[role === "active" ? "onRemoveActive" : "onRemoveOwner"](this.props[role], "_keys");
            } else if (this.props[role]) {
                var weights = {
                    active: this.props.account.getIn(["active", "weight_threshold"]),
                    owner: this.props.account.getIn(["owner", "weight_threshold"])
                };
                console.log("key", this.props[role], "weights", weights, "weight of role:", weights[role]);
                this.props[role === "active" ? "onAddActive" : role === "owner" ? "onAddOwner" : "onSetMemo"](this.props[role], weights[role]);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var activeInUse = this.checkKeyUse(this.props.active && this.props.active, "active");
            var ownerInUse = this.checkKeyUse(this.props.owner && this.props.owner, "owner");
            var memoInUse = this.checkKeyUse(this.props.memo && this.props.memo, "memo");

            var useText = counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("account.perm.use_text");
            var removeText = counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("account.perm.remove_text");

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    { style: { maxWidth: "800px" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.password_model_1" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    { style: { maxWidth: "800px" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "wallet.password_model_1" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    { style: { maxWidth: "800px" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { unsafe: true, content: "wallet.password_model_2" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "divider" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "form",
                    {
                        style: { maxWidth: "40rem" },
                        onSubmit: this.onSubmit.bind(this),
                        noValidate: true
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "label",
                        { className: "left-label" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "wallet.generated" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "p",
                        null,
                        this.state.generatedPassword
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "p",
                        { style: { fontWeight: "bold" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.password_model_2" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Forms_PasswordInput__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        ref: "password",
                        confirmation: true,
                        onChange: this.onPasswordChange.bind(this),
                        noLabel: true,
                        passwordLength: 12,
                        checkStrength: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            { className: activeInUse ? "in-use" : "" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.new_active" }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                this.props.active
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "text-right" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "button",
                                        onClick: this._onUseKey.bind(this, "active", activeInUse)
                                    },
                                    activeInUse ? removeText : useText
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            { className: ownerInUse ? "in-use" : "" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.new_owner" }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                this.props.owner
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "text-right" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "button",
                                        onClick: this._onUseKey.bind(this, "owner", ownerInUse)
                                    },
                                    ownerInUse ? removeText : useText
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            { className: memoInUse ? "in-use" : "" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.new_memo" }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                this.props.memo
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "text-right" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "button",
                                        style: {
                                            visibility: memoInUse ? "hidden" : ""
                                        },
                                        onClick: this._onUseKey.bind(this, "memo", memoInUse)
                                    },
                                    useText
                                )
                            )
                        )
                    )
                ),
                memoInUse ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    {
                        style: { maxWidth: "800px", paddingTop: 10 },
                        className: "has-error"
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.memo_warning" })
                ) : null
            );
        }
    }]);

    return AccountPermissionsMigrate;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountPermissionsMigrate);

/***/ }),

/***/ 2553:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(931);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2549);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(407);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(774);
/* harmony import */ var stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(694);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_7__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }










/**
 * @brief Allows the user to enter a public key
 */

var PubKeyInput = function (_React$Component) {
    _inherits(PubKeyInput, _React$Component);

    function PubKeyInput(props) {
        _classCallCheck(this, PubKeyInput);

        return _possibleConstructorReturn(this, (PubKeyInput.__proto__ || Object.getPrototypeOf(PubKeyInput)).call(this, props));
    }

    _createClass(PubKeyInput, [{
        key: "isValidPubKey",
        value: function isValidPubKey(value) {
            return !!bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["PublicKey"].fromPublicKeyString(value);
        }
    }, {
        key: "onInputChanged",
        value: function onInputChanged(event) {
            var value = event.target.value.trim();
            this.props.onChange(value);
        }
    }, {
        key: "onKeyDown",
        value: function onKeyDown(event) {
            if (event.keyCode === 13) this.onAction(event);
        }
    }, {
        key: "onAction",
        value: function onAction(event) {
            event.preventDefault();
            if (this.props.onAction && this.state.valid && !this.props.disableActionButton) {
                this.props.onAction(event);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var error = this.props.error;
            if (!error && this.props.value && !this.isValidPubKey(this.props.value)) error = "Not a valid public key";
            var action_class = classnames__WEBPACK_IMPORTED_MODULE_1___default()("button", {
                disabled: error || this.props.disableActionButton
            });
            var keys = stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().keys;
            var has_private = this.isValidPubKey(this.props.value) && keys.has(this.props.value);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "pubkey-input no-overflow" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-area" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "header-area" },
                        !error && this.props.value && this.isValidPubKey(this.props.value) ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "label",
                            { className: "right-label" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.valid_pub" })
                        ) : null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                            className: "left-label",
                            component: "label",
                            content: this.props.label
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "input-area" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            { className: "inline-label" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "account-image" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_3__["default"],
                                    { pubkey: this.props.value },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                        name: "key",
                                        title: "icons.key",
                                        size: "4x"
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                type: "text",
                                className: has_private ? "my-key" : "",
                                value: this.props.value,
                                placeholder: this.props.placeholder || counterpart.translate("account.public_key"),
                                ref: "user_input",
                                onChange: this.onInputChanged.bind(this),
                                onKeyDown: this.onKeyDown.bind(this),
                                tabIndex: this.props.tabIndex
                            }),
                            this.props.onAction ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "button",
                                {
                                    className: action_class,
                                    onClick: this.onAction.bind(this)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                    content: this.props.action_label
                                })
                            ) : null
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "error-area has-error" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            null,
                            error
                        )
                    )
                )
            );
        }
    }]);

    return PubKeyInput;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

PubKeyInput.propTypes = {
    label: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string.isRequired, // a translation key for the label
    value: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string, // current value
    error: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string, // the error message override
    placeholder: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string, // the placeholder text to be displayed when there is no user_input
    onChange: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.func, // a method to be called any time user input changes
    onAction: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.func, // a method called when Add button is clicked
    tabIndex: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.number, // tabindex property to be passed to input tag
    disableActionButton: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.bool // use it if you need to disable action button
};

/* harmony default export */ __webpack_exports__["default"] = (PubKeyInput);

/***/ }),

/***/ 2562:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2553);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1833);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1834);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2516);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2563);
/* harmony import */ var _Account_SignedMessage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2564);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











/** This component gives a user interface for signing and verifying messages with the bitShares memo key.
 *  It consists of two tabs:
 *    - Sign message tab (code prefix: tabSM)
 *    - Verify message tab (code prefix: tabVM)
 *
 *  See SignedMessageAction for details on message format.
 *
 *    @author Stefan Schiessl <stefan.schiessl@blockchainprojectsbv.com>
 */

var AccountSignedMessages = function (_React$Component) {
    _inherits(AccountSignedMessages, _React$Component);

    function AccountSignedMessages(props) {
        _classCallCheck(this, AccountSignedMessages);

        // initialize state (do not use setState method!)
        var _this = _possibleConstructorReturn(this, (AccountSignedMessages.__proto__ || Object.getPrototypeOf(AccountSignedMessages)).call(this, props));

        _this.state = {
            tabsm_memo_key: _this.props.account.get("options").get("memo_key"),
            tabsm_popup: "",
            tabsm_message_text: "",
            tabsm_message_signed: "",
            tabvm_popup: "",
            tabvm_message_signed: "",
            tabvm_verified: null,
            tabvm_message_signed_and_verified: null,
            tabvm_flag_verifyonchange: false
        };
        return _this;
    }

    /**
     * Event when user pushes sign button. Memo message and meta will be signed and displayed
     * in the bottom textarea
     *
     * @param event
     */


    _createClass(AccountSignedMessages, [{
        key: "_tabSMSignAction",
        value: function _tabSMSignAction(event) {
            var _this2 = this;

            event.preventDefault();

            try {
                // validate keys are still the same. Better: make public memokey field uneditable
                var storedKey = this.props.account.get("options").get("memo_key");
                if (this.state.tabsm_memo_key !== storedKey) {
                    throw Error(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.keymismatch"));
                }

                // there should be a message entered
                if (this.state.tabsm_message_text) {
                    this._tabSMPopMessage(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.signing"), 0);
                    _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_7__["default"].signMessage(this.props.account, this.state.tabsm_message_text).then(function (res) {
                        _this2.setState({
                            tabsm_message_signed: res,
                            tabsm_popup: "" // clear loading message
                        });
                    }).catch(function (err) {
                        _this2._tabSMPopMessage(err.message);
                        _this2.setState({
                            tabsm_message_signed: null
                        });
                    });
                }
            } catch (err) {
                this._tabSMPopMessage(err.message);
                this.setState({
                    tabsm_message_signed: null
                });
            }
        }
    }, {
        key: "_tabSMHandleChange",
        value: function _tabSMHandleChange(event) {
            // event for textarea
            this.setState({ tabsm_message_text: event.target.value });
        }
    }, {
        key: "_tabSMHandleChangeKey",
        value: function _tabSMHandleChangeKey(value) {
            // event for textfield of public key
            this.setState({ tabsm_memo_key: value });
        }
    }, {
        key: "_tabSMCopyToClipBoard",
        value: function _tabSMCopyToClipBoard(event) {
            // event when user clicks into the signed message textarea
            if (event.target.value !== "") {
                event.target.focus();
                event.target.select();

                try {
                    var successful = document.execCommand("copy");
                    this._tabSMPopMessage(successful ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.copysuccessful") : counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.copyunsuccessful"));
                } catch (err) {
                    this._tabSMPopMessage(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.copyunsuccessful"));
                }
            }
        }

        /**
         * Displays an information to the user that disappears over time
         *
         * @param message
         * @param timeout
         */

    }, {
        key: "_tabSMPopMessage",
        value: function _tabSMPopMessage(message) {
            var _this3 = this;

            var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3000;

            this.setState({
                tabsm_popup: message
            });

            if (message !== "" && timeout > 0) {
                setTimeout(function () {
                    _this3.setState({
                        tabsm_popup: ""
                    });
                }, timeout);
            }
        }

        /**
         * Event when the user tries to verify a message, either manual through the button or onChange of the textarea.
         * The message is parsed and verified, the user gets the message restated in the bottom part of the site
         *
         * @param event
         */

    }, {
        key: "_tabVMAction",
        value: function _tabVMAction(event) {
            var _this4 = this;

            event.preventDefault();

            // reset to unverified state
            this.setState({
                tabvm_message_signed_and_verified: null,
                tabvm_verified: false
            });

            // attempt verifying
            if (this.state.tabvm_message_signed) {
                this._tabVMPopMessage(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.verifying"), 0);

                setTimeout(function () {
                    // do not block gui
                    try {
                        var message_signed_and_verified = _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_7__["default"].verifyMemo(_this4.state.tabvm_message_signed);
                        _this4.setState({
                            tabvm_message_signed_and_verified: message_signed_and_verified,
                            tabvm_verified: true,
                            tabvm_popup: "" // clear verifying message
                        });
                    } catch (err) {
                        _this4._tabVMPopMessage(err.message);
                        _this4.setState({
                            tabvm_message_signed_and_verified: null,
                            tabvm_verified: false
                        });
                    }
                }, 0);
            }
        }
    }, {
        key: "_tabVMHandleChange",
        value: function _tabVMHandleChange(event) {
            // onchange event of the input textarea
            this.setState({
                tabvm_message_signed: event.target.value,
                tabvm_verified: false,
                tabvm_message_signed_and_verified: null
            });
            if (this.state.tabvm_flag_verifyonchange) {
                this._tabVMAction(event);
            }
        }

        /**
         * Displays an information to the user that disappears over time
         *
         * @param message
         * @param timeout
         */

    }, {
        key: "_tabVMPopMessage",
        value: function _tabVMPopMessage(message) {
            var _this5 = this;

            var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3000;

            this.setState({
                tabvm_popup: message
            });

            if (message !== "" && timeout > 0) {
                setTimeout(function () {
                    _this5.setState({
                        tabvm_popup: ""
                    });
                }, timeout);
            }
        }
    }, {
        key: "_tabVMToggleVerifyOnChange",
        value: function _tabVMToggleVerifyOnChange() {
            // event when the user enables / disables verifying while typing
            this.setState({
                tabvm_flag_verifyonchange: !this.state.tabvm_flag_verifyonchange
            });
        }
    }, {
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tabs"],
                            {
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block",
                                setting: "accountSignedMessagesTab",
                                contentClass: "grid-content shrink small-vertical medium-horizontal padding",
                                segmented: false
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tab"],
                                { title: "account.signedmessages.signmessage" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "grid-content",
                                        style: { overflowX: "hidden" }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "content-block no-margin" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "h3",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.signmessage" })
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_2__["default"], {
                                        ref: "memo_key",
                                        value: this.state.tabsm_memo_key,
                                        label: "account.perm.memo_public_key",
                                        placeholder: "Public Key",
                                        tabIndex: 7,
                                        onChange: this._tabSMHandleChangeKey.bind(this),
                                        disableActionButton: true
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                        rows: "10",
                                        value: this.state.tabsm_message_text,
                                        onChange: this._tabSMHandleChange.bind(this),
                                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.entermessage")
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "button",
                                            {
                                                className: "button",
                                                onClick: this._tabSMSignAction.bind(this)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.sign" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { style: { color: "gray" } },
                                            this.state.tabsm_popup
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                        rows: "14",
                                        value: this.state.tabsm_message_signed,
                                        style: { editable: false },
                                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.automaticcreation"),
                                        onClick: this._tabSMCopyToClipBoard.bind(this)
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tab"],
                                { title: "account.signedmessages.verifymessage" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "grid-content",
                                        style: { overflowX: "hidden" }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "content-block no-margin" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "h3",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.verifymessage" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: {
                                                    float: "right",
                                                    marginTop: "0.1em",
                                                    marginBottom: "0.5em"
                                                }
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "table",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "tr",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        null,
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "label",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.verifyonchange" })
                                                        )
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        null,
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "div",
                                                            {
                                                                className: "switch",
                                                                onClick: this._tabVMToggleVerifyOnChange.bind(this)
                                                            },
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                                type: "checkbox",
                                                                checked: this.state.tabvm_flag_verifyonchange,
                                                                value: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.verifyonchange")
                                                            }),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                        rows: "10",
                                        value: this.state.tabvm_message_signed,
                                        onChange: this._tabVMHandleChange.bind(this),
                                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.entermessage")
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "button",
                                            {
                                                className: "button",
                                                onClick: this._tabVMAction.bind(this)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.verify" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "text",
                                            { style: { color: "gray" } },
                                            this.state.tabvm_popup
                                        ),
                                        this.state.tabvm_verified !== null && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { style: { float: "right" } },
                                            "Message is:",
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                {
                                                    style: {
                                                        backgroundColor: this.state.tabvm_verified ? "green" : "red"
                                                    }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "label",
                                                    null,
                                                    this.state.tabvm_verified ? "verified" : "not verified"
                                                )
                                            )
                                        ),
                                        (this.state.tabvm_verified && this.state.tabvm_message_signed_and_verified !== null || this.state.tabvm_flag_verifyonchange) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_SignedMessage__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                                message: this.state.tabvm_message_signed
                                            })
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountSignedMessages;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountSignedMessages.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAccount.isRequired
};

AccountSignedMessages = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(AccountSignedMessages);

/* harmony default export */ __webpack_exports__["default"] = (AccountSignedMessages);

/***/ }),

/***/ 2563:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var alt_instance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(542);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(407);
/* harmony import */ var actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(579);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(581);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }







var MSG_HEAD = "-----BEGIN BITSHARES SIGNED MESSAGE-----";
var MSG_META = "-----BEGIN META-----";
var MSG_SIGNATURE = "-----BEGIN SIGNATURE-----";
var MSG_FOOT = "-----END BITSHARES SIGNED MESSAGE-----";
var MSG_SENDER = "account";
var MSG_PUBLICKEY = "memokey";
var MSG_BLOCK = "block";
var MSG_DATE = "timestamp";

/** This action provides following functionalities:
 *    - Sign a message
 *    - Verify a given message
 *
 *  The message format that is underlying is as follows:
 *  -----BEGIN BITSHARES SIGNED MESSAGE-----
 *  <message from the account>
 *  -----BEGIN META-----
 *  account=<account name>
 *  memokey=<account memo public key>
 *  block=<last irreversible block>
 *  timestamp=<current time>
 *  -----BEGIN SIGNATURE-----
 *  <signature>
 *  -----END BITSHARES SIGNED MESSAGE-----
 *
 *    @author Stefan Schiessl <stefan.schiessl@blockchainprojectsbv.com>
 */

var SignedMessageAction = function () {
    function SignedMessageAction() {
        _classCallCheck(this, SignedMessageAction);
    }

    _createClass(SignedMessageAction, [{
        key: "parseMessage",

        /**
         * Parses the given raw string to a processing friendly dictionary
         *
         * @param message Message as raw string, properly formatted with head/meta/signature/footer
         *
         * @returns {*} parsed message as dictionary with the following fields:
         *              content : User message of the message
         *              meta : Dictionary with the meta data
         *                      account : Account name of the signer
         *                      key : Memo public key of the signer
         *                      block : Current last irreversible block of the bitShares blockchain
         *                      timestamp : Time the message was signed in UTC format
         *              signed : Seperate string that contains all data that will be signed (content + meta)
         *              signature : Signature of the signed data
         */
        value: function parseMessage(message) {
            var messageContent = void 0,
                messageMeta = void 0,
                messageSignature = void 0,
                messageSignedContent = void 0;
            try {
                // cut the sections
                messageContent = message.split(MSG_HEAD)[1]; // everything before the head is ignored
                messageMeta = messageContent.split(MSG_META);
                messageContent = messageMeta[0].replace(/^\n|\n$/g, "");
                messageSignature = messageMeta[1].split(MSG_SIGNATURE);
                messageMeta = messageSignature[0].trim();
                messageSignature = messageSignature[1].split(MSG_FOOT)[0].trim(); // everything after footer is ignored

                // how the signed content it built is crucial, consider encapsulating
                messageSignedContent = messageContent + "\n" + messageMeta;
            } catch (err) {
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidformat"));
            }

            var messageMetaAccount = void 0,
                messageMetaKey = void 0,
                messageMetaBlock = void 0,
                messageMetaTimestamp = void 0;
            if (messageMeta) {
                try {
                    // process meta
                    // ... sender
                    messageMetaAccount = messageMeta.split(MSG_SENDER + "=");
                    messageMetaAccount = messageMetaAccount[1].split("\n")[0].trim();

                    // ... and its public key
                    messageMetaKey = messageMeta.split(MSG_PUBLICKEY + "=");
                    messageMetaKey = messageMetaKey[1].split("\n")[0].trim();

                    // ... block number
                    messageMetaBlock = messageMeta.split(MSG_BLOCK + "=");
                    messageMetaBlock = messageMetaBlock[1].split("\n")[0].trim();

                    // ... time stamp
                    messageMetaTimestamp = messageMeta.split(MSG_DATE + "=");
                    messageMetaTimestamp = messageMetaTimestamp[1].split("\n")[0].trim();
                } catch (err) {
                    throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidformat"));
                }
            }

            return {
                content: messageContent,
                meta: {
                    account: messageMetaAccount,
                    key: messageMetaKey,
                    block: messageMetaBlock,
                    timestamp: messageMetaTimestamp
                },
                signed: messageSignedContent,
                signature: messageSignature
            };
        }

        /**
         * The given string message is parsed and then its signature verified. A positive verification return the parsed
         * message, anything else throws an exeption.
         *
         * @param message Message as raw string, properly formatted with head/meta/signature/footer, or already parsed message
         *
         * @returns parsed message, see parseMessage
         */

    }, {
        key: "verifyMemo",
        value: function verifyMemo(message) {
            var message_signed = void 0;
            if (typeof message === "string" || message instanceof String) {
                message_signed = this.parseMessage(message);
            } else {
                // assume its a dictionary
                message_signed = message;
            }

            // validate account and key
            var storedAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getAccount(message_signed.meta.account);
            if (storedAccount == null) {
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invaliduser"));
            }

            // verify message signed
            var verified = false;
            try {
                verified = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["Signature"].fromHex(message_signed.signature).verifyBuffer(message_signed.signed, bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["PublicKey"].fromPublicKeyString(message_signed.meta.key));
            } catch (err) {
                // wrap message that could be raised from Signature
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.errorverifying"));
            }
            if (!verified) {
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidsignature"));
            }
            return message_signed;
        }

        /**
         * Given an account and the message text
         * @param account Account that writes the message
         * @param messageText String text of the message
         * @returns {Promise}
         */

    }, {
        key: "signMessage",
        value: function signMessage(account, messageText) {
            return new Promise(function (resolve, reject) {
                // make sure wallet is unlocked (we need private key)
                actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_3__["default"].unlock().then(function () {
                    try {
                        // obtain all necessary keys
                        var memo_from_public = account.get("options").get("memo_key");
                        // The 1s are base58 for all zeros (null)
                        if (/111111111111111111111/.test(memo_from_public)) {
                            memo_from_public = null;
                        }
                        var memo_from_privkey = void 0;
                        if (messageText && memo_from_public) {
                            memo_from_privkey = stores_WalletDb__WEBPACK_IMPORTED_MODULE_4__["default"].getPrivateKey(memo_from_public);
                            if (!memo_from_privkey) {
                                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidkey"));
                            }
                        }
                        // get other meta data
                        var irr_block = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getObject("2.1.0").get("last_irreversible_block_num");
                        var now = new Date();

                        var meta = MSG_SENDER + "=" + account.get("name") + "\n" + MSG_PUBLICKEY + "=" + memo_from_public + "\n" + MSG_BLOCK + "=" + irr_block + "\n" + MSG_DATE + "=" + now.toUTCString();

                        var messageContentToBeSigned = messageText + "\n" + meta;

                        setTimeout(function () {
                            // do not block gui
                            try {
                                var memo_signature = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["Signature"].signBuffer(messageContentToBeSigned, memo_from_privkey, memo_from_public);
                                var memo_formatted = MSG_HEAD + "\n" + messageText + "\n" + MSG_META + "\n" + meta + "\n" + MSG_SIGNATURE + "\n" + memo_signature.toHex() + "\n" + MSG_FOOT;
                                resolve(memo_formatted);
                            } catch (err) {
                                reject(err);
                            }
                        }, 0);
                    } catch (err) {
                        reject(err);
                    }
                }).catch(function (res) {
                    reject(res);
                });
            });
        }
    }]);

    return SignedMessageAction;
}();

/* harmony default export */ __webpack_exports__["default"] = (alt_instance__WEBPACK_IMPORTED_MODULE_0__["default"].createActions(SignedMessageAction));

/***/ }),

/***/ 2564:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2563);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }







/** This component allows to display and verify a signed message
 *
 *  See SignedMessageAction for details on message format.
 *
 *    @author Stefan Schiessl <stefan.schiessl@blockchainprojectsbv.com>
 */

var SignedMessage = function (_React$Component) {
    _inherits(SignedMessage, _React$Component);

    function SignedMessage(props) {
        _classCallCheck(this, SignedMessage);

        var _this = _possibleConstructorReturn(this, (SignedMessage.__proto__ || Object.getPrototypeOf(SignedMessage)).call(this, props));

        _this.state = {
            message: _this.props.message,
            messageParsed: null,
            showRawMessage: false,
            //
            noVerification: _this.props.noVerification,
            //
            verified: null,
            //
            notification: null
        };
        return _this;
    }
    // static propTypes = {
    //     signedMessage: PropTypes.string.isRequired
    //    noVerification
    // };

    _createClass(SignedMessage, [{
        key: "_verifyMessage",
        value: function _verifyMessage(signedMessage) {
            var _this2 = this;

            this.setState({
                message: signedMessage,
                messageParsed: null,
                verified: null
            });
            var messageParsed = null;
            try {
                messageParsed = _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_4__["default"].parseMessage(signedMessage);
                this.setState({
                    verified: null,
                    messageParsed: messageParsed
                });

                if (!this.state.noVerification) {
                    this.setState({
                        verified: null,
                        notification: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.signedmessages.verifying")
                    });
                    setTimeout(function () {
                        // do not block gui
                        try {
                            _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_4__["default"].verifyMemo(messageParsed);
                            _this2.setState({
                                verified: true,
                                notification: "" // clear popup
                            });
                        } catch (err) {
                            _this2._warning(err.message);
                            _this2.setState({
                                verified: false
                            });
                        }
                    }, 0);
                }
            } catch (err) {
                this._warning(err.message);
            }
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            this._verifyMessage(this.state.message);
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            var signedMessage = nextProps.message;
            if (signedMessage != undefined && signedMessage != null && signedMessage == this.state.message) {
                // already done
                return;
            }
            this._verifyMessage(signedMessage);
        }
    }, {
        key: "_warning",
        value: function _warning(message) {
            this.setState({
                notification: message
            });
        }
    }, {
        key: "_toggleRawMessage",
        value: function _toggleRawMessage() {
            this.setState({
                showRawMessage: !this.state.showRawMessage
            });
        }
    }, {
        key: "render",
        value: function render() {
            var legendMessage = void 0;
            var borderColor = void 0;
            if (this.state.messageParsed != null) {
                if (this.state.verified == null) {
                    borderColor = "#FFF";
                    legendMessage = "Unverified message from " + this.state.messageParsed.meta.account;
                } else if (this.state.verified) {
                    borderColor = "#FFF";
                    legendMessage = "Verified message from " + this.state.messageParsed.meta.account;
                } else {
                    borderColor = "#F00";
                    legendMessage = "Refuted message, indicated sender " + this.state.messageParsed.meta.account;
                }
            }
            var messageGiven = this.props.message != null && this.props.message != "";
            var notificationGiven = this.state.notification && this.state.notification != "";
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { style: { color: "gray", margin: "10px 10px" } },
                this.state.messageParsed != null && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "fieldset",
                    { style: { borderColor: borderColor } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "legend",
                        { style: { color: "white", weight: "bold" } },
                        legendMessage
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "pre",
                        {
                            style: {
                                position: "relative",
                                width: "100%",
                                display: "table"
                            }
                        },
                        this.state.messageParsed.content,
                        notificationGiven && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                style: {
                                    textAlign: "center",
                                    display: "table-cell",
                                    verticalAlign: "middle",
                                    position: "absolute",
                                    width: "calc(100% - 30px)",
                                    height: "calc(100% + 15px)",
                                    top: "0px",
                                    right: "30px",
                                    backgroundColor: "rgba(50,50,50,0.5)"
                                },
                                id: "overlay"
                            },
                            this.state.notification
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                fontSize: "small",
                                float: "right"
                            }
                        },
                        "Signed on ",
                        this.state.messageParsed.meta.timestamp,
                        " ",
                        "\xA0",
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                className: "button",
                                type: "button",
                                style: {
                                    fontSize: "small",
                                    float: "right",
                                    padding: "0px 0px",
                                    background: "#777"
                                },
                                onClick: this._toggleRawMessage.bind(this)
                            },
                            "\uD83D\uDD0D"
                        )
                    ),
                    this.state.showRawMessage && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                    this.state.showRawMessage && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                    this.state.showRawMessage && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            style: {
                                overflow: "auto",
                                width: "calc(100%)",
                                maxWidth: "1000px"
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "pre",
                            null,
                            this.state.message
                        )
                    )
                ),
                messageGiven && this.state.messageParsed == null && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "fieldset",
                    { style: { borderColor: "#F00" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "legend",
                        {
                            style: { color: "red", weight: "bold" },
                            className: "error"
                        },
                        "Error while parsing message, please check syntax from message below"
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "pre",
                        null,
                        this.props.message
                    )
                )
            );
        }
    }]);

    return SignedMessage;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

SignedMessage.defaultProps = {
    noVerification: false
};


/* harmony default export */ __webpack_exports__["default"] = (SignedMessage);

/***/ }),

/***/ 2565:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2516);
/* harmony import */ var chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2307);
/* harmony import */ var chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2190);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1833);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1834);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2304);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(577);
/* harmony import */ var stores_WalletDb_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(581);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }













var AccountRow = function (_React$Component) {
    _inherits(AccountRow, _React$Component);

    function AccountRow() {
        _classCallCheck(this, AccountRow);

        return _possibleConstructorReturn(this, (AccountRow.__proto__ || Object.getPrototypeOf(AccountRow)).apply(this, arguments));
    }

    _createClass(AccountRow, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                account = _props.account,
                onRemove = _props.onRemove;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    this.props.index
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    account.get("id")
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_8__["default"], { account: account.get("id") })
                ),
                onRemove ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            onClick: onRemove.bind(this, account.get("id")),
                            className: "button outline"
                        },
                        "Remove"
                    )
                ) : null
            );
        }
    }]);

    return AccountRow;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountRow.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_6__["default"].ChainAccount.isRequired
};
AccountRow.defaultProps = {
    tempComponent: "tr"
};

AccountRow = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(AccountRow);

var AccountList = function (_React$Component2) {
    _inherits(AccountList, _React$Component2);

    function AccountList() {
        _classCallCheck(this, AccountList);

        return _possibleConstructorReturn(this, (AccountList.__proto__ || Object.getPrototypeOf(AccountList)).apply(this, arguments));
    }

    _createClass(AccountList, [{
        key: "_onRemove",
        value: function _onRemove(listing, account, e) {
            if (account) {
                var currentState = this.props.getCurrentState(account);
                var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_9__["default"].new_transaction();
                tr.add_type_operation("account_whitelist", {
                    fee: {
                        amount: 0,
                        asset_id: "1.3.0"
                    },
                    authorizing_account: this.props.account.get("id"),
                    account_to_list: account,
                    new_listing: currentState - chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing[listing]
                });
                stores_WalletDb_js__WEBPACK_IMPORTED_MODULE_10__["default"].process_transaction(tr, null, true);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props2 = this.props,
                removeButton = _props2.removeButton,
                white = _props2.white,
                list = _props2.list;


            var rows = list.map(function (account, index) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountRow, {
                    key: account,
                    onRemove: removeButton ? _this3._onRemove.bind(_this3, white ? "white_listed" : "black_listed") : null,
                    account: account,
                    index: index + 1
                });
            }).toArray();

            var showHeaders = true;
            if (!rows.length) {
                showHeaders = false;
                rows.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: "empty" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { padding: "1rem 0" },
                            colSpan: removeButton ? 4 : 3
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, {
                            content: this.props.emptyText,
                            account: this.props.account.get("name")
                        })
                    )
                ));
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "table",
                { className: "table compact dashboard-table" },
                showHeaders ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "thead",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tr",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            "#"
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.id" })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.name" })
                        ),
                        removeButton ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null) : null
                    )
                ) : null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tbody",
                    null,
                    rows
                )
            );
        }
    }]);

    return AccountList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var AccountWhitelist = function (_React$Component3) {
    _inherits(AccountWhitelist, _React$Component3);

    function AccountWhitelist() {
        _classCallCheck(this, AccountWhitelist);

        var _this4 = _possibleConstructorReturn(this, (AccountWhitelist.__proto__ || Object.getPrototypeOf(AccountWhitelist)).call(this));

        _this4.state = {
            accountName: "",
            accountToList: null
        };
        return _this4;
    }

    _createClass(AccountWhitelist, [{
        key: "_getCurrentState",
        value: function _getCurrentState(id) {
            var account = this.props.account;

            var white = account.get("whitelisted_accounts") || immutable__WEBPACK_IMPORTED_MODULE_4___default.a.List();
            var black = account.get("blacklisted_accounts") || immutable__WEBPACK_IMPORTED_MODULE_4___default.a.List();
            var current = chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing.no_listing;

            if (white.includes(id)) {
                current += chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing.white_listed;
            }

            if (black.includes(id)) {
                current += chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing.black_listed;
            }

            return current;
        }
    }, {
        key: "_onAdd",
        value: function _onAdd(listing, e) {
            var accountToList = this.state.accountToList;
            var account = this.props.account;


            var currentState = this._getCurrentState(accountToList);

            if (accountToList) {
                var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_9__["default"].new_transaction();
                tr.add_type_operation("account_whitelist", {
                    fee: {
                        amount: 0,
                        asset_id: "1.3.0"
                    },
                    authorizing_account: account.get("id"),
                    account_to_list: accountToList,
                    new_listing: currentState + chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing[listing]
                });
                stores_WalletDb_js__WEBPACK_IMPORTED_MODULE_10__["default"].process_transaction(tr, null, true);
            }
        }
    }, {
        key: "_onAccountFound",
        value: function _onAccountFound(account) {
            console.log("accountFound:", account);
            this.setState({
                accountName: account ? account.get("name") : null,
                accountToList: account ? account.get("id") : null
            });
        }
    }, {
        key: "_onAccountChanged",
        value: function _onAccountChanged(account) {
            console.log("account changed:", account);
            this.setState({
                accountName: account,
                accountToList: null
            });
        }
    }, {
        key: "render",
        value: function render() {
            var account = this.props.account;
            var accountName = this.state.accountName;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tabs"],
                            {
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block",
                                setting: "whitelistTab",
                                contentClass: "grid-content shrink small-vertical medium-horizontal no-padding",
                                segmented: false
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tab"],
                                { title: "account.whitelist.title" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty",
                                            account: account,
                                            getCurrentState: this._getCurrentState.bind(this),
                                            list: account.get("whitelisted_accounts") || immutable__WEBPACK_IMPORTED_MODULE_4___default.a.List(),
                                            removeButton: true,
                                            white: true
                                        })
                                    ),
                                    !account.get("whitelisted_accounts") ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "has-error" },
                                        "Please note, whitelisting is not working yet due to unresolved backend issue."
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { padding: "2rem 0" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                            label: "account.whitelist.add",
                                            accountName: accountName,
                                            onAccountChanged: this._onAccountFound.bind(this),
                                            onChange: this._onAccountChanged.bind(this),
                                            account: accountName,
                                            tabIndex: 2,
                                            onAction: this._onAdd.bind(this, "white_listed"),
                                            action_label: "account.perm.confirm_add",
                                            white: false,
                                            typeahead: true
                                        })
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tab"],
                                { title: "account.whitelist.black" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty_black",
                                            account: account,
                                            getCurrentState: this._getCurrentState.bind(this),
                                            list: account.get("blacklisted_accounts"),
                                            removeButton: true
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { padding: "2rem 1rem" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                            label: "account.whitelist.add_black",
                                            accountName: accountName,
                                            onAccountChanged: this._onAccountFound.bind(this),
                                            onChange: this._onAccountChanged.bind(this),
                                            account: accountName,
                                            tabIndex: 2,
                                            onAction: this._onAdd.bind(this, "black_listed"),
                                            action_label: "account.perm.confirm_add",
                                            typeahead: true
                                        })
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tab"],
                                { title: "account.whitelist.white_by" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty_white_by",
                                            account: account,
                                            list: account.get("whitelisting_accounts")
                                        })
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tab"],
                                { title: "account.whitelist.black_by" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty_black_by",
                                            account: account,
                                            list: account.get("blacklisting_accounts")
                                        })
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountWhitelist;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountWhitelist);

/***/ }),

/***/ 2566:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(557);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(407);
/* harmony import */ var _WorkerApproval__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2567);
/* harmony import */ var _VotingAccountsList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2568);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(931);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2516);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1834);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1833);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(716);
/* harmony import */ var api_ApplicationApi__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(578);
/* harmony import */ var _AccountSelector__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2190);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(774);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2186);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2439);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(1970);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(701);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






















var AccountVoting = function (_React$Component) {
    _inherits(AccountVoting, _React$Component);

    function AccountVoting(props) {
        _classCallCheck(this, AccountVoting);

        var _this = _possibleConstructorReturn(this, (AccountVoting.__proto__ || Object.getPrototypeOf(AccountVoting)).call(this, props));

        _this.onRemoveProxy = function () {
            _this.publish(null);
        };

        var proxyId = props.proxy.get("id");
        var proxyName = props.proxy.get("name");
        _this.state = {
            proxy_account_id: proxyId === "1.2.5" ? "" : proxyId, //"1.2.16",
            prev_proxy_account_id: proxyId === "1.2.5" ? "" : proxyId,
            current_proxy_input: proxyId === "1.2.5" ? "" : proxyName,
            witnesses: null,
            committee: null,
            vote_ids: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(),
            proxy_vote_ids: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(),
            lastBudgetObject: props.initialBudget.get("id"),
            workerTableIndex: props.viewSettings.get("workerTableIndex", 1),
            all_witnesses: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
            all_committee: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List()
        };
        _this.onProxyAccountFound = _this.onProxyAccountFound.bind(_this);
        _this.onPublish = _this.onPublish.bind(_this);
        _this.onReset = _this.onReset.bind(_this);
        _this._getVoteObjects = _this._getVoteObjects.bind(_this);
        return _this;
    }

    _createClass(AccountVoting, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            common_account_utils__WEBPACK_IMPORTED_MODULE_3__["default"].getFinalFeeAsset(this.props.account, "account_update");
            bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].fetchAllWorkers();
            this.getBudgetObject();
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            this.updateAccountData(this.props);
            this._getVoteObjects();
            this._getVoteObjects("committee");
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.account !== this.props.account) {
                var proxyId = np.proxy.get("id");
                var newState = {
                    proxy_account_id: proxyId === "1.2.5" ? "" : proxyId
                };
                this.setState({ prev_proxy_account_id: newState.proxy_account_id });
                this.updateAccountData(np, newState);
            }
            this.getBudgetObject();
        }
    }, {
        key: "updateAccountData",
        value: function updateAccountData(_ref) {
            var _this2 = this;

            var account = _ref.account;
            var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state;
            var proxy_account_id = state.proxy_account_id;

            var proxy = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAccount(proxy_account_id);
            var options = account.get("options");
            var proxyOptions = proxy ? proxy.get("options") : null;
            // let proxy_account_id = proxy ? proxy.get("id") : "1.2.5";
            var current_proxy_input = proxy ? proxy.get("name") : "";
            if (proxy_account_id === "1.2.5") {
                proxy_account_id = "";
                current_proxy_input = "";
            }

            var votes = options.get("votes");
            var vote_ids = votes.toArray();
            var vids = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(vote_ids);
            bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObjectsByVoteIds(vote_ids);

            var proxyPromise = null,
                proxy_vids = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set([]);
            var hasProxy = proxy_account_id !== "1.2.5";
            if (hasProxy && proxyOptions) {
                var proxy_votes = proxyOptions.get("votes");
                var proxy_vote_ids = proxy_votes.toArray();
                proxy_vids = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(proxy_vote_ids);
                bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObjectsByVoteIds(proxy_vote_ids);

                proxyPromise = Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObjectByVoteID, proxy_vote_ids, 10000);
            }

            Promise.all([Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObjectByVoteID, vote_ids, 10000), proxyPromise]).then(function (res) {
                var _res = _slicedToArray(res, 2),
                    vote_objs = _res[0],
                    proxy_vote_objs = _res[1];

                function sortVoteObjects(objects) {
                    var witnesses = new immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List();
                    var committee = new immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List();
                    var workers = new immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set();
                    objects.forEach(function (obj) {
                        var account_id = obj.get("committee_member_account");
                        if (account_id) {
                            committee = committee.push(account_id);
                        } else if (account_id = obj.get("worker_account")) {
                            // console.log( "worker: ", obj );
                            //     workers = workers.add(obj.get("id"));
                        } else if (account_id = obj.get("witness_account")) {
                            witnesses = witnesses.push(account_id);
                        }
                    });

                    return { witnesses: witnesses, committee: committee, workers: workers };
                }

                var _sortVoteObjects = sortVoteObjects(vote_objs),
                    witnesses = _sortVoteObjects.witnesses,
                    committee = _sortVoteObjects.committee,
                    workers = _sortVoteObjects.workers;

                var _sortVoteObjects2 = sortVoteObjects(proxy_vote_objs || []),
                    proxy_witnesses = _sortVoteObjects2.witnesses,
                    proxy_committee = _sortVoteObjects2.committee,
                    proxy_workers = _sortVoteObjects2.workers;

                var state = {
                    proxy_account_id: proxy_account_id,
                    current_proxy_input: current_proxy_input,
                    witnesses: witnesses,
                    committee: committee,
                    workers: workers,
                    proxy_witnesses: proxy_witnesses,
                    proxy_committee: proxy_committee,
                    proxy_workers: proxy_workers,
                    vote_ids: vids,
                    proxy_vote_ids: proxy_vids,
                    prev_witnesses: witnesses,
                    prev_committee: committee,
                    prev_workers: workers,
                    prev_vote_ids: vids
                };
                _this2.setState(state);
            });
        }
    }, {
        key: "isChanged",
        value: function isChanged() {
            var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state;

            return s.proxy_account_id !== s.prev_proxy_account_id || s.witnesses !== s.prev_witnesses || s.committee !== s.prev_committee || !immutable__WEBPACK_IMPORTED_MODULE_1___default.a.is(s.vote_ids, s.prev_vote_ids);
        }
    }, {
        key: "_getVoteObjects",
        value: function _getVoteObjects() {
            var _this3 = this;

            var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "witnesses";
            var vote_ids = arguments[1];

            var current = this.state["all_" + type];
            var isWitness = type === "witnesses";
            var lastIdx = void 0;
            if (!vote_ids) {
                vote_ids = [];
                var active = this.props.globalObject.get(isWitness ? "active_witnesses" : "active_committee_members").sort(function (a, b) {
                    return parseInt(a.split(".")[2], 10) - parseInt(b.split(".")[2], 10);
                });
                var lastActive = active.last() || "1." + (isWitness ? "6" : "5") + ".1";
                lastIdx = parseInt(lastActive.split(".")[2], 10);
                for (var i = 1; i <= lastIdx + 10; i++) {
                    vote_ids.push("1." + (isWitness ? "6" : "5") + "." + i);
                }
            } else {
                lastIdx = parseInt(vote_ids[vote_ids.length - 1].split(".")[2], 10);
            }
            Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject, vote_ids, 5000, {}).then(function (vote_objs) {
                _this3.state["all_" + type] = current.concat(immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(vote_objs.filter(function (a) {
                    return !!a;
                }).map(function (a) {
                    return a.get(isWitness ? "witness_account" : "committee_member_account");
                })));
                if (!!vote_objs[vote_objs.length - 1]) {
                    // there are more valid vote objs, fetch 10 more
                    vote_ids = [];
                    for (var i = lastIdx + 11; i <= lastIdx + 20; i++) {
                        vote_ids.push("1." + (isWitness ? "6" : "5") + "." + i);
                    }
                    return _this3._getVoteObjects(type, vote_ids);
                }
                _this3.forceUpdate();
            });
        }
    }, {
        key: "onPublish",
        value: function onPublish() {
            this.publish(this.state.proxy_account_id);
        }
    }, {
        key: "publish",
        value: function publish(new_proxy_id) {
            var _this4 = this;

            var updated_account = this.props.account.toJS();
            var updateObject = { account: updated_account.id };
            var new_options = { memo_key: updated_account.options.memo_key };
            // updated_account.new_options = updated_account.options;
            new_options.voting_account = new_proxy_id ? new_proxy_id : "1.2.5";
            new_options.num_witness = this.state.witnesses.size;
            new_options.num_committee = this.state.committee.size;

            updateObject.new_options = new_options;
            // Set fee asset
            updateObject.fee = {
                amount: 0,
                asset_id: common_account_utils__WEBPACK_IMPORTED_MODULE_3__["default"].getFinalFeeAsset(updated_account.id, "account_update")
            };

            // Remove votes for expired workers
            var vote_ids = this.state.vote_ids;

            var workers = this._getWorkerArray();
            var now = new Date();

            function removeVote(list, vote) {
                if (list.includes(vote)) {
                    list = list.delete(vote);
                }
                return list;
            }

            workers.forEach(function (worker) {
                if (worker) {
                    if (new Date(worker.get("work_end_date")) <= now) {
                        vote_ids = removeVote(vote_ids, worker.get("vote_for"));
                    }

                    // TEMP Remove vote_against since they're no longer used
                    vote_ids = removeVote(vote_ids, worker.get("vote_against"));
                }
            });

            // Submit votes
            Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getWitnessById, this.state.witnesses.toArray(), 4000).then(function (res) {
                var witnesses_vote_ids = res.map(function (o) {
                    return o.get("vote_id");
                });
                return Promise.all([Promise.resolve(witnesses_vote_ids), Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getCommitteeMemberById, _this4.state.committee.toArray(), 4000)]);
            }).then(function (res) {
                updateObject.new_options.votes = res[0].concat(res[1].map(function (o) {
                    return o.get("vote_id");
                })).concat(vote_ids.filter(function (id) {
                    return id.split(":")[0] === "2";
                }).toArray()).sort(function (a, b) {
                    var a_split = a.split(":");
                    var b_split = b.split(":");

                    return parseInt(a_split[1], 10) - parseInt(b_split[1], 10);
                });
                api_ApplicationApi__WEBPACK_IMPORTED_MODULE_12__["default"].updateAccount(updateObject);
            });
        }
    }, {
        key: "onReset",
        value: function onReset() {
            var _this5 = this;

            var s = this.state;
            if (this.refs.voting_proxy && this.refs.voting_proxy.refs.bound_component) this.refs.voting_proxy.refs.bound_component.onResetProxy();
            this.setState({
                proxy_account_id: s.prev_proxy_account_id,
                current_proxy_input: s.prev_proxy_input,
                witnesses: s.prev_witnesses,
                committee: s.prev_committee,
                workers: s.prev_workers,
                vote_ids: s.prev_vote_ids
            }, function () {
                _this5.updateAccountData(_this5.props);
            });
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(collection, item_id) {
            var state = {};
            state[collection] = this.state[collection].push(item_id);
            this.setState(state);
        }
    }, {
        key: "onRemoveItem",
        value: function onRemoveItem(collection, item_id) {
            var state = {};
            state[collection] = this.state[collection].filter(function (i) {
                return i !== item_id;
            });
            this.setState(state);
        }
    }, {
        key: "onChangeVotes",
        value: function onChangeVotes(addVotes, removeVotes) {
            var state = {};
            state.vote_ids = this.state.vote_ids;
            if (addVotes.length) {
                addVotes.forEach(function (vote) {
                    state.vote_ids = state.vote_ids.add(vote);
                });
            }
            if (removeVotes) {
                removeVotes.forEach(function (vote) {
                    state.vote_ids = state.vote_ids.delete(vote);
                });
            }

            this.setState(state);
        }
    }, {
        key: "validateAccount",
        value: function validateAccount(collection, account) {
            if (!account) return null;
            if (collection === "witnesses") {
                return Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getWitnessById, [account.get("id")], 3000).then(function (res) {
                    return res[0] ? null : "Not a witness";
                });
            }
            if (collection === "committee") {
                return Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getCommitteeMemberById, [account.get("id")], 3000).then(function (res) {
                    return res[0] ? null : "Not a committee member";
                });
            }
            return null;
        }
    }, {
        key: "onProxyChange",
        value: function onProxyChange(current_proxy_input) {
            var proxyAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAccount(current_proxy_input);
            if (!proxyAccount || proxyAccount && proxyAccount.get("id") !== this.state.proxy_account_id) {
                this.setState({
                    proxy_account_id: "",
                    proxy_witnesses: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(),
                    proxy_committee: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(),
                    proxy_workers: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set()
                });
            }
            this.setState({ current_proxy_input: current_proxy_input });
        }
    }, {
        key: "onProxyAccountFound",
        value: function onProxyAccountFound(proxy_account) {
            var _this6 = this;

            var proxy_account_id = proxy_account ? proxy_account.get("id") : "";
            if (this.state.proxy_account_id !== proxy_account_id) this.setState({
                proxy_account_id: proxy_account_id
            }, function () {
                _this6.updateAccountData(_this6.props);
            });
        }
    }, {
        key: "onClearProxy",
        value: function onClearProxy() {
            this.setState({
                proxy_account_id: ""
            });
        }
    }, {
        key: "_getTotalVotes",
        value: function _getTotalVotes(worker) {
            return parseInt(worker.get("total_votes_for"), 10) - parseInt(worker.get("total_votes_against"), 10);
        }
    }, {
        key: "getBudgetObject",
        value: function getBudgetObject() {
            var _this7 = this;

            var lastBudgetObject = this.state.lastBudgetObject;

            var budgetObject = void 0;
            budgetObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(lastBudgetObject);
            var idIndex = parseInt(lastBudgetObject.split(".")[2], 10);
            if (budgetObject) {
                var timestamp = budgetObject.get("time");
                if (!/Z$/.test(timestamp)) {
                    timestamp += "Z";
                }
                var now = new Date();

                /* Use the last valid budget object to estimate the current budget object id.
                ** Budget objects are created once per hour
                */
                var currentID = idIndex + Math.floor((now - new Date(timestamp).getTime()) / 1000 / 60 / 60) - 1;
                if (idIndex >= currentID) return;
                var newID = "2.13." + Math.max(idIndex, currentID);
                var newIDInt = parseInt(newID.split(".")[2], 10);
                Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject, [newID], undefined, {}).then(function (res) {
                    var _res2 = _slicedToArray(res, 1),
                        lbo = _res2[0];

                    if (lbo === null) {
                        // The object does not exist, the id was too high
                        _this7.setState({ lastBudgetObject: "2.13." + (newIDInt - 1) }, _this7.getBudgetObject);
                    } else {
                        stores_SettingsStore__WEBPACK_IMPORTED_MODULE_19__["default"].setLastBudgetObject(newID);

                        _this7.setState({ lastBudgetObject: newID });
                    }
                });
            } else {
                // The object does not exist, decrement the ID
                var _newID = "2.13." + (idIndex - 1);
                Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject, [_newID], undefined, {}).then(function (res) {
                    var _res3 = _slicedToArray(res, 1),
                        lbo = _res3[0];

                    if (lbo === null) {
                        // The object does not exist, the id was too high
                        _this7.setState({ lastBudgetObject: "2.13." + (idIndex - 2) }, _this7.getBudgetObject);
                    } else {
                        stores_SettingsStore__WEBPACK_IMPORTED_MODULE_19__["default"].setLastBudgetObject(_newID);
                        _this7.setState({ lastBudgetObject: _newID });
                    }
                });
            }
        }
    }, {
        key: "_getWorkerArray",
        value: function _getWorkerArray() {
            var workerArray = [];

            bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].workers.forEach(function (workerId) {
                var worker = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(workerId, false, false);
                if (worker) workerArray.push(worker);
            });

            return workerArray;
        }
    }, {
        key: "_setWorkerTableIndex",
        value: function _setWorkerTableIndex(index) {
            this.setState({
                workerTableIndex: index
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this8 = this;

            var _state = this.state,
                workerTableIndex = _state.workerTableIndex,
                prev_proxy_account_id = _state.prev_proxy_account_id;

            var accountHasProxy = !!prev_proxy_account_id;
            var preferredUnit = this.props.settings.get("unit") || "1.3.0";
            var hasProxy = !!this.state.proxy_account_id; // this.props.account.getIn(["options", "voting_account"]) !== "1.2.5";
            var publish_buttons_class = classnames__WEBPACK_IMPORTED_MODULE_7___default()("button", {
                disabled: !this.isChanged()
            });
            var globalObject = this.props.globalObject;

            var budgetObject = void 0;
            if (this.state.lastBudgetObject) {
                budgetObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(this.state.lastBudgetObject);
            }

            var totalBudget = 0;
            // let unusedBudget = 0;
            var workerBudget = globalObject ? parseInt(globalObject.getIn(["parameters", "worker_budget_per_day"]), 10) : 0;

            if (budgetObject) {
                workerBudget = Math.min(24 * budgetObject.getIn(["record", "worker_budget"]), workerBudget);
                totalBudget = Math.min(24 * budgetObject.getIn(["record", "worker_budget"]), workerBudget);
            }

            var now = new Date();
            var workerArray = this._getWorkerArray();

            var voteThreshold = 0;
            var workers = workerArray.filter(function (a) {
                if (!a) {
                    return false;
                }

                return new Date(a.get("work_end_date") + "Z") > now && new Date(a.get("work_begin_date") + "Z") <= now;
            }).sort(function (a, b) {
                return _this8._getTotalVotes(b) - _this8._getTotalVotes(a);
            }).map(function (worker, index) {
                var dailyPay = parseInt(worker.get("daily_pay"), 10);
                workerBudget = workerBudget - dailyPay;
                var votes = worker.get("total_votes_for") - worker.get("total_votes_against");
                if (workerBudget <= 0 && !voteThreshold) {
                    voteThreshold = votes;
                }

                if (voteThreshold && votes < voteThreshold) return null;

                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_WorkerApproval__WEBPACK_IMPORTED_MODULE_5__["default"], {
                    preferredUnit: preferredUnit,
                    rest: workerBudget + dailyPay,
                    rank: index + 1,
                    key: worker.get("id"),
                    worker: worker.get("id"),
                    vote_ids: _this8.state[hasProxy ? "proxy_vote_ids" : "vote_ids"],
                    onChangeVotes: _this8.onChangeVotes.bind(_this8),
                    proxy: hasProxy,
                    voteThreshold: voteThreshold
                });
            }).filter(function (a) {
                return !!a;
            });

            // unusedBudget = Math.max(0, workerBudget);

            var newWorkers = workerArray.filter(function (a) {
                if (!a) {
                    return false;
                }

                var votes = a.get("total_votes_for") - a.get("total_votes_against");
                return new Date(a.get("work_end_date") + "Z") > now && votes < voteThreshold || new Date(a.get("work_begin_date") + "Z") > now;
            }).sort(function (a, b) {
                return _this8._getTotalVotes(b) - _this8._getTotalVotes(a);
            }).map(function (worker, index) {
                // let dailyPay = parseInt(worker.get("daily_pay"), 10);
                // workerBudget = workerBudget - dailyPay;

                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_WorkerApproval__WEBPACK_IMPORTED_MODULE_5__["default"], {
                    preferredUnit: preferredUnit,
                    rest: 0,
                    rank: index + 1,
                    key: worker.get("id"),
                    worker: worker.get("id"),
                    vote_ids: _this8.state[hasProxy ? "proxy_vote_ids" : "vote_ids"],
                    onChangeVotes: _this8.onChangeVotes.bind(_this8),
                    proxy: hasProxy,
                    voteThreshold: voteThreshold
                });
            });

            var expiredWorkers = workerArray.filter(function (a) {
                if (!a) {
                    return false;
                }

                return new Date(a.get("work_end_date")) <= now;
            }).sort(function (a, b) {
                return _this8._getTotalVotes(b) - _this8._getTotalVotes(a);
            }).map(function (worker, index) {
                // let dailyPay = parseInt(worker.get("daily_pay"), 10);
                // workerBudget = workerBudget - dailyPay;

                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_WorkerApproval__WEBPACK_IMPORTED_MODULE_5__["default"], {
                    preferredUnit: preferredUnit,
                    rest: 0,
                    rank: index + 1,
                    key: worker.get("id"),
                    worker: worker.get("id"),
                    vote_ids: _this8.state[hasProxy ? "proxy_vote_ids" : "vote_ids"],
                    onChangeVotes: _this8.onChangeVotes.bind(_this8),
                    proxy: hasProxy,
                    voteThreshold: voteThreshold
                });
            });

            var actionButtons = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_7___default()(publish_buttons_class, {
                            success: this.isChanged()
                        }),
                        onClick: this.onPublish,
                        tabIndex: 4
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.publish" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: "button " + publish_buttons_class,
                        onClick: this.onReset,
                        tabIndex: 8
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.reset" })
                ),
                accountHasProxy && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: "button",
                        onClick: this.onRemoveProxy,
                        tabIndex: 9
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.remove_proxy" })
                )
            );

            var proxyInput = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                _AccountSelector__WEBPACK_IMPORTED_MODULE_13__["default"],
                {
                    style: { width: "50%", maxWidth: 250, marginBottom: 10 },
                    account: this.state.current_proxy_input,
                    accountName: this.state.current_proxy_input,
                    onChange: this.onProxyChange.bind(this),
                    onAccountChanged: this.onProxyAccountFound,
                    tabIndex: 1,
                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_16___default.a.translate("account.votes.set_proxy"),
                    tooltip: counterpart__WEBPACK_IMPORTED_MODULE_16___default.a.translate(!this.state.proxy_account_id ? "tooltip.proxy_search" : "tooltip.proxy_remove"),
                    hideImage: true
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    {
                        style: {
                            paddingLeft: 5,
                            position: "relative",
                            top: 9,
                            display: hasProxy ? "" : "none"
                        }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_14__["default"], { name: "locked", size: "1x" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    {
                        style: {
                            paddingLeft: 5,
                            position: "relative",
                            top: 9,
                            display: !hasProxy ? "" : "none"
                        }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Link"],
                        { to: "/help/voting" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_14__["default"], {
                            name: "question-circle",
                            title: "icons.question_circle",
                            size: "1x"
                        })
                    )
                )
            );

            var showExpired = workerTableIndex === 2;

            var saveText = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                {
                    className: "inline-block",
                    style: {
                        float: "right",
                        visibility: this.isChanged() ? "visible" : "hidden",
                        color: "red",
                        padding: "0.85rem",
                        fontSize: "0.9rem"
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.save_finish" })
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__["Tabs"],
                            {
                                setting: "votingTab",
                                className: "account-tabs",
                                defaultActiveTab: 1,
                                segmented: false,
                                actionButtons: saveText,
                                tabsClass: "account-overview no-padding bordered-header content-block"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__["Tab"],
                                { title: "explorer.witnesses.title" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("content-block") },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "header-selector" },
                                        proxyInput,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: {
                                                    float: "right",
                                                    marginTop: "-2.5rem"
                                                }
                                            },
                                            actionButtons
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_VotingAccountsList__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                        type: "witness",
                                        label: "account.votes.add_witness_label",
                                        items: this.state.all_witnesses,
                                        validateAccount: this.validateAccount.bind(this, "witnesses"),
                                        onAddItem: this.onAddItem.bind(this, "witnesses"),
                                        onRemoveItem: this.onRemoveItem.bind(this, "witnesses"),
                                        tabIndex: hasProxy ? -1 : 2,
                                        supported: this.state[hasProxy ? "proxy_witnesses" : "witnesses"],
                                        withSelector: false,
                                        active: globalObject.get("active_witnesses"),
                                        proxy: this.state.proxy_account_id
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__["Tab"],
                                { title: "explorer.committee_members.title" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("content-block") },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "header-selector" },
                                        proxyInput,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: {
                                                    float: "right",
                                                    marginTop: "-2.5rem"
                                                }
                                            },
                                            actionButtons
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_VotingAccountsList__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                        type: "committee",
                                        label: "account.votes.add_committee_label",
                                        items: this.state.all_committee,
                                        validateAccount: this.validateAccount.bind(this, "committee"),
                                        onAddItem: this.onAddItem.bind(this, "committee"),
                                        onRemoveItem: this.onRemoveItem.bind(this, "committee"),
                                        tabIndex: hasProxy ? -1 : 3,
                                        supported: this.state[hasProxy ? "proxy_committee" : "committee"],
                                        withSelector: false,
                                        active: globalObject.get("active_committee_members"),
                                        proxy: this.state.proxy_account_id
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__["Tab"],
                                { title: "account.votes.workers_short" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "header-selector" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { float: "right" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Link"],
                                            { to: "/create-worker" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "button" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.create_worker" })
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "selector" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: { paddingLeft: 10 },
                                                className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("inline-block", {
                                                    inactive: workerTableIndex !== 0
                                                }),
                                                onClick: this._setWorkerTableIndex.bind(this, 0)
                                            },
                                            counterpart__WEBPACK_IMPORTED_MODULE_16___default.a.translate("account.votes.new", { count: newWorkers.length })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("inline-block", {
                                                    inactive: workerTableIndex !== 1
                                                }),
                                                onClick: this._setWorkerTableIndex.bind(this, 1)
                                            },
                                            counterpart__WEBPACK_IMPORTED_MODULE_16___default.a.translate("account.votes.active", { count: workers.length })
                                        ),
                                        expiredWorkers.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("inline-block", { inactive: !showExpired }),
                                                onClick: !showExpired ? this._setWorkerTableIndex.bind(this, 2) : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.expired" })
                                        ) : null
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { marginTop: "2rem" } },
                                        proxyInput,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: {
                                                    float: "right",
                                                    marginTop: "-2.5rem"
                                                }
                                            },
                                            actionButtons
                                        )
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "table",
                                    { className: "table dashboard-table table-hover" },
                                    workerTableIndex === 2 ? null : workerTableIndex === 0 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "thead",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    colSpan: "3",
                                                    style: { textAlign: "left" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.threshold" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_18__["default"], {
                                                    decimalOffset: 5,
                                                    hide_asset: true,
                                                    amount: voteThreshold,
                                                    asset: "1.3.0"
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", { colSpan: "3" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", {
                                                style: {
                                                    border: "none",
                                                    backgroundColor: "transparent"
                                                }
                                            })
                                        )
                                    ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "thead",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    colSpan: "4",
                                                    style: { textAlign: "left" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.total_budget" }),
                                                " ",
                                                "(",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                                    name: preferredUnit
                                                }),
                                                ")"
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", {
                                                colSpan: "2",
                                                className: "hide-column-small"
                                            }),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                globalObject ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_17__["EquivalentValueComponent"], {
                                                    hide_asset: true,
                                                    fromAsset: "1.3.0",
                                                    toAsset: preferredUnit,
                                                    amount: totalBudget
                                                }) : null
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", { className: "hide-column-small" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", {
                                                style: {
                                                    border: "none",
                                                    backgroundColor: "transparent"
                                                }
                                            })
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "thead",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            workerTableIndex === 2 ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.line" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                { style: { textAlign: "center" } },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.user_issued_assets.id" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                { style: { textAlign: "left" } },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.user_issued_assets.description" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" },
                                                    className: "hide-column-small"
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.total_votes" })
                                            ),
                                            workerTableIndex === 0 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.missing" })
                                            ) : null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "explorer.workers.period" })
                                            ),
                                            workerTableIndex === 2 || workerTableIndex === 0 ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" },
                                                    className: "hide-column-small"
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.funding" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" },
                                                    className: "hide-column-small"
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.daily_pay" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    {
                                                        style: {
                                                            paddingTop: 5,
                                                            fontSize: "0.8rem"
                                                        }
                                                    },
                                                    "(",
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                                        name: preferredUnit
                                                    }),
                                                    ")"
                                                )
                                            ),
                                            workerTableIndex === 2 || workerTableIndex === 0 ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "explorer.witnesses.budget" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    {
                                                        style: {
                                                            paddingTop: 5,
                                                            fontSize: "0.8rem"
                                                        }
                                                    },
                                                    "(",
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                                        name: preferredUnit
                                                    }),
                                                    ")"
                                                )
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.toggle" })
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "tbody",
                                        null,
                                        workerTableIndex === 0 ? newWorkers : workerTableIndex === 1 ? workers : expiredWorkers
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountVoting;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountVoting.propTypes = {
    initialBudget: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_10__["default"].ChainObject.isRequired,
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_10__["default"].ChainObject.isRequired,
    proxy: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_10__["default"].ChainAccount.isRequired
};
AccountVoting.defaultProps = {
    globalObject: "2.0.0"
};

AccountVoting = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_9__["default"])(AccountVoting);

var BudgetObjectWrapper = function BudgetObjectWrapper(props) {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountVoting, _extends({}, props, {
        initialBudget: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_19__["default"].getLastBudgetObject()
    }));
};

/* harmony default export */ __webpack_exports__["default"] = (BudgetObjectWrapper);

/***/ }),

/***/ 2567:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(558);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1833);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1970);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2304);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1834);
/* harmony import */ var _Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2439);
/* harmony import */ var components_Icon_Icon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(774);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }












var WorkerApproval = function (_React$Component) {
    _inherits(WorkerApproval, _React$Component);

    function WorkerApproval(props) {
        _classCallCheck(this, WorkerApproval);

        return _possibleConstructorReturn(this, (WorkerApproval.__proto__ || Object.getPrototypeOf(WorkerApproval)).call(this, props));
    }

    _createClass(WorkerApproval, [{
        key: "onApprove",
        value: function onApprove() {
            var addVotes = [],
                removeVotes = [];

            if (this.props.vote_ids.has(this.props.worker.get("vote_against"))) {
                removeVotes.push(this.props.worker.get("vote_against"));
            }

            if (!this.props.vote_ids.has(this.props.worker.get("vote_for"))) {
                addVotes.push(this.props.worker.get("vote_for"));
            }

            this.props.onChangeVotes(addVotes, removeVotes);
        }
    }, {
        key: "onReject",
        value: function onReject() {
            var addVotes = [],
                removeVotes = [];

            if (this.props.vote_ids.has(this.props.worker.get("vote_against"))) {
                removeVotes.push(this.props.worker.get("vote_against"));
            }

            if (this.props.vote_ids.has(this.props.worker.get("vote_for"))) {
                removeVotes.push(this.props.worker.get("vote_for"));
            }

            this.props.onChangeVotes(addVotes, removeVotes);
        }
    }, {
        key: "render",
        value: function render() {
            var rank = this.props.rank;

            var worker = this.props.worker.toJS();
            var total_votes = worker.total_votes_for - worker.total_votes_against;
            var approvalState = this.props.vote_ids.has(worker.vote_for) ? true : this.props.vote_ids.has(worker.vote_against) ? false : null;

            var fundedPercent = 0;

            if (worker.daily_pay < this.props.rest) {
                fundedPercent = 100;
            } else if (this.props.rest > 0) {
                fundedPercent = this.props.rest / worker.daily_pay * 100;
            }

            var startDate = counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.localize(new Date(worker.work_begin_date + "Z"), { type: "date", format: "short_custom" });
            var endDate = counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.localize(new Date(worker.work_end_date + "Z"), { type: "date", format: "short_custom" });

            var now = new Date();
            var isExpired = new Date(worker.work_end_date + "Z") <= now;
            var hasStarted = new Date(worker.work_begin_date + "Z") <= now;
            var isProposed = !isExpired && total_votes < this.props.voteThreshold || !hasStarted;
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { className: approvalState ? "" : "unsupported" },
                isExpired ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        style: {
                            textAlign: "right",
                            paddingRight: 10,
                            paddingLeft: 0
                        }
                    },
                    rank
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { className: "worker-id", style: { textAlign: "left" } },
                    worker.id
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { className: "worker-name", style: { textAlign: "left" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "inline-block",
                            style: { paddingRight: 5, position: "relative", top: -1 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            {
                                style: {
                                    visibility: worker.url && worker.url.indexOf(".") !== -1 ? "visible" : "hidden"
                                },
                                href: worker.url,
                                target: "_blank",
                                rel: "noopener noreferrer"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Icon_Icon__WEBPACK_IMPORTED_MODULE_8__["default"], { name: "share", title: "icons.share" })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "inline-block" },
                        worker.name,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_5__["default"], { account: worker.worker_account })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" }, className: "hide-column-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        amount: total_votes,
                        asset: "1.3.0",
                        decimalOffset: 5,
                        hide_asset: true
                    })
                ),
                !isProposed ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        amount: Math.max(0, this.props.voteThreshold - total_votes),
                        asset: "1.3.0",
                        hide_asset: true,
                        decimalOffset: 5
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    startDate,
                    " - ",
                    endDate
                ),
                isExpired || isProposed ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        style: { textAlign: "right" },
                        className: "hide-column-small"
                    },
                    common_utils__WEBPACK_IMPORTED_MODULE_2__["default"].format_number(fundedPercent, 2),
                    "%"
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" }, className: "hide-column-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_7__["EquivalentValueComponent"], {
                        hide_asset: true,
                        fromAsset: "1.3.0",
                        toAsset: this.props.preferredUnit,
                        amount: worker.daily_pay
                    })
                ),
                isExpired || isProposed ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    this.props.rest <= 0 ? "0.00" : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_7__["EquivalentValueComponent"], {
                        hide_asset: true,
                        fromAsset: "1.3.0",
                        toAsset: this.props.preferredUnit,
                        amount: this.props.rest
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        className: "clickable",
                        onClick: this.props.proxy ? function () {} : this[approvalState ? "onReject" : "onApprove"].bind(this)
                    },
                    !this.props.proxy ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Icon_Icon__WEBPACK_IMPORTED_MODULE_8__["default"], {
                        name: approvalState ? "checkmark-circle" : "minus-circle",
                        title: approvalState ? "icons.checkmark_circle.approved" : "icons.minus_circle.disapproved"
                    }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Icon_Icon__WEBPACK_IMPORTED_MODULE_8__["default"], { name: "locked", title: "icons.locked.action" })
                )
            );
        }
    }]);

    return WorkerApproval;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

WorkerApproval.propTypes = {
    worker: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired,
    onAddVote: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func, /// called with vote id to add
    onRemoveVote: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func, /// called with vote id to remove
    vote_ids: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.object /// Set of items currently being voted for
};
WorkerApproval.defaultProps = {
    tempComponent: "tr"
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(WorkerApproval));

/***/ }),

/***/ 2568:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _AccountSelector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2190);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(774);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(407);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1833);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1970);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1834);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2304);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var sanitize__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1989);
/* harmony import */ var sanitize__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(sanitize__WEBPACK_IMPORTED_MODULE_11__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }














function getWitnessOrCommittee(type, acct) {
    var url = "",
        votes = 0,
        account = void 0;
    if (type === "witness") {
        account = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getWitnessById(acct.get("id"));
    } else if (type === "committee") {
        account = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getCommitteeMemberById(acct.get("id"));
    }

    url = account ? account.get("url") : url;
    url = sanitize__WEBPACK_IMPORTED_MODULE_11___default()(url, {
        whiteList: [], // empty, means filter out all tags
        stripIgnoreTag: true // filter out all HTML not in the whilelist
    });
    votes = account ? account.get("total_votes") : votes;
    return {
        url: url,
        votes: votes,
        id: account.get("id")
    };
}

var AccountItemRow = function (_React$Component) {
    _inherits(AccountItemRow, _React$Component);

    function AccountItemRow() {
        _classCallCheck(this, AccountItemRow);

        return _possibleConstructorReturn(this, (AccountItemRow.__proto__ || Object.getPrototypeOf(AccountItemRow)).apply(this, arguments));
    }

    _createClass(AccountItemRow, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps) {
            return nextProps.account !== this.props.account || nextProps.action !== this.props.action || nextProps.isActive !== this.props.isActive || nextProps.idx !== this.props.idx || nextProps.proxy !== this.props.proxy;
        }
    }, {
        key: "onAction",
        value: function onAction(item_id) {
            this.props.onAction(item_id);
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                account = _props.account,
                type = _props.type,
                action = _props.action,
                isActive = _props.isActive;

            var item_id = account.get("id");

            var _getWitnessOrCommitte = getWitnessOrCommittee(type, account),
                url = _getWitnessOrCommitte.url,
                votes = _getWitnessOrCommitte.votes;

            var link = url && url.length > 0 && url.indexOf("http") === -1 ? "http://" + url : url;
            var isSupported = action === "remove";

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { className: isSupported ? "" : "unsupported" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    this.props.idx + 1
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "left" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_8__["default"], { account: account.get("id") })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    link && link.indexOf(".") !== -1 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            href: link,
                            target: "_blank",
                            rel: "noopener noreferrer"
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], { name: "share", title: "icons.share" })
                    ) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_6__["default"], {
                        amount: votes,
                        asset: "1.3.0",
                        decimalOffset: 5,
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                        content: "account.votes." + (isActive ? "active_short" : "inactive")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "center" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                        content: "settings." + (isSupported ? "yes" : "no")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        className: this.props.proxy ? "" : "clickable",
                        onClick: this.props.proxy ? function () {} : this.onAction.bind(this, item_id)
                    },
                    !this.props.proxy ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], {
                        name: isSupported ? "checkmark-circle" : "minus-circle",
                        title: isSupported ? "icons.checkmark_circle.yes" : "icons.minus_circle.no"
                    }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], { name: "locked", title: "icons.locked.action" })
                )
            );
        }
    }]);

    return AccountItemRow;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountItemRow.propTypes = {
    account: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.object.isRequired,
    onAction: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func.isRequired
};

var VotingAccountsList = function (_React$Component2) {
    _inherits(VotingAccountsList, _React$Component2);

    function VotingAccountsList(props) {
        _classCallCheck(this, VotingAccountsList);

        var _this2 = _possibleConstructorReturn(this, (VotingAccountsList.__proto__ || Object.getPrototypeOf(VotingAccountsList)).call(this, props));

        _this2.state = {
            selected_item: null,
            item_name_input: "",
            error: null
        };
        _this2.onItemChange = _this2.onItemChange.bind(_this2);
        _this2.onItemAccountChange = _this2.onItemAccountChange.bind(_this2);
        _this2.onAddItem = _this2.onAddItem.bind(_this2);
        return _this2;
    }

    _createClass(VotingAccountsList, [{
        key: "onItemChange",
        value: function onItemChange(item_name_input) {
            this.setState({ item_name_input: item_name_input });
        }
    }, {
        key: "onItemAccountChange",
        value: function onItemAccountChange(selected_item) {
            var _this3 = this;

            this.setState({ selected_item: selected_item, error: null });
            if (selected_item && this.props.validateAccount) {
                var res = this.props.validateAccount(selected_item);
                if (res === null) return;
                if (typeof res === "string") this.setState({ error: res });else res.then(function (error) {
                    return _this3.setState({ error: error });
                });
            }
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(item) {
            if (!item) return;
            var next_state = {
                selected_item: null,
                item_name_input: "",
                error: null
            };
            this.setState(next_state);
            this.props.onAddItem(item.get("id"));
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            if (!this.props.items) return null;

            var item_rows = this.props.items.filter(function (i) {
                if (!i) return false;
                //if (this.state.item_name_input) return i.get("name").indexOf(this.state.item_name_input) !== -1;
                return true;
            }).sort(function (a, b) {
                var _getWitnessOrCommitte2 = getWitnessOrCommittee(_this4.props.type, a),
                    a_votes = _getWitnessOrCommitte2.votes;

                var _getWitnessOrCommitte3 = getWitnessOrCommittee(_this4.props.type, b),
                    b_votes = _getWitnessOrCommitte3.votes;

                if (a_votes !== b_votes) {
                    return parseInt(b_votes, 10) - parseInt(a_votes, 10);
                } else if (a.get("name") > b.get("name")) {
                    return 1;
                } else if (a.get("name") < b.get("name")) {
                    return -1;
                } else {
                    return 0;
                }
            }).map(function (i, idx) {
                var action = _this4.props.supported && _this4.props.supported.includes(i.get("id")) ? "remove" : "add";
                var isActive = _this4.props.active.includes(getWitnessOrCommittee(_this4.props.type, i).id);
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountItemRow, {
                    idx: idx,
                    key: i.get("name"),
                    account: i,
                    type: _this4.props.type,
                    onAction: action === "add" ? _this4.props.onAddItem : _this4.props.onRemoveItem,
                    isSelected: _this4.props.items.indexOf(i) !== -1,
                    action: action,
                    isActive: isActive,
                    proxy: _this4.props.proxy
                });
            });

            var error = this.state.error;
            if (!error && this.state.selected_item && this.props.items.indexOf(this.state.selected_item) !== -1) {
                error = counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.votes.already");
            }

            var cw = ["10%", "20%", "40%", "20%", "10%"];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                this.props.withSelector ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountSelector__WEBPACK_IMPORTED_MODULE_1__["default"], {
                    style: { maxWidth: "600px" },
                    label: this.props.label,
                    error: error,
                    placeholder: this.props.placeholder,
                    account: this.state.item_name_input,
                    accountName: this.state.item_name_input,
                    onChange: this.onItemChange,
                    onAccountChanged: this.onItemAccountChange,
                    onAction: this.onAddItem,
                    action_label: "account.votes.add_witness",
                    tabIndex: this.props.tabIndex
                }) : null,
                this.props.title && item_rows.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "h4",
                    null,
                    this.props.title
                ) : null,
                item_rows.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { textAlign: "right" } },
                                "#"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                {
                                    style: { textAlign: "left", maxWidth: cw[1] }
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.name" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[2] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.about" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[3] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.votes" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[4] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.status.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[0] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.supported" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[5] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.toggle" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        item_rows
                    )
                ) : null
            );
        }
    }]);

    return VotingAccountsList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

VotingAccountsList.propTypes = {
    items: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainObjectsList,
    onAddItem: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func.isRequired,
    onRemoveItem: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func.isRequired,
    validateAccount: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func,
    label: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.string.isRequired, // a translation key for the label,
    placeholder: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.string, // the placeholder text to be displayed when there is no user_input
    tabIndex: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.number, // tabindex property to be passed to input tag
    action: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.string,
    withSelector: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.bool
};
VotingAccountsList.defaultProps = {
    action: "remove",
    withSelector: true,
    autosubscribe: false
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(VotingAccountsList));

/***/ }),

/***/ 2569:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2234);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2186);
/* harmony import */ var _Utility_AssetImage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2453);
/* harmony import */ var _MarginPositions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2570);
/* harmony import */ var _RecentTransactions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2554);
/* harmony import */ var components_Account_Proposals__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2571);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(407);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(702);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(558);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2516);
/* harmony import */ var _AccountOrders__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2576);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(931);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2310);
/* harmony import */ var common_accountHelper__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2577);
/* harmony import */ var _BalanceWrapper__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2260);
/* harmony import */ var _AccountTreemap__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2578);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2187);
/* harmony import */ var _AccountPortfolioList__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2581);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(837);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(838);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }


























var AccountOverview = function (_React$Component) {
    _inherits(AccountOverview, _React$Component);

    function AccountOverview(props) {
        _classCallCheck(this, AccountOverview);

        var _this = _possibleConstructorReturn(this, (AccountOverview.__proto__ || Object.getPrototypeOf(AccountOverview)).call(this));

        _this.state = {
            sortKey: props.viewSettings.get("portfolioSort", "totalValue"),
            sortDirection: props.viewSettings.get("portfolioSortDirection", true), // alphabetical A -> B, numbers high to low
            shownAssets: props.viewSettings.get("shownAssets", "active"),
            alwaysShowAssets: ["BTS"
            // "USD",
            // "CNY",
            // "OPEN.BTC",
            // "OPEN.USDT",
            // "OPEN.ETH",
            // "OPEN.MAID",
            // "OPEN.STEEM",
            // "OPEN.DASH"
            ],
            hideFishingProposals: true
        };

        _this._handleFilterInput = _this._handleFilterInput.bind(_this);
        return _this;
    }

    _createClass(AccountOverview, [{
        key: "_handleFilterInput",
        value: function _handleFilterInput(e) {
            e.preventDefault();
            this.setState({
                filterValue: e.target.value
            });
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            this._checkMarginStatus();
        }
    }, {
        key: "_checkMarginStatus",
        value: function _checkMarginStatus() {
            var _this2 = this;

            var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;

            Object(common_accountHelper__WEBPACK_IMPORTED_MODULE_16__["checkMarginStatus"])(props.account).then(function (status) {
                var globalMarginStatus = null;
                for (var asset in status) {
                    globalMarginStatus = status[asset].statusClass || globalMarginStatus;
                }
                _this2.setState({ globalMarginStatus: globalMarginStatus });
            });
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.account !== this.props.account) {
                this._checkMarginStatus(np);
            }
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps, nextState) {
            return !common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].are_equal_shallow(nextProps.balances, this.props.balances) || nextProps.account !== this.props.account || nextProps.settings !== this.props.settings || nextProps.hiddenAssets !== this.props.hiddenAssets || !common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].are_equal_shallow(nextState, this.state) || this.state.filterValue !== nextState.filterValue;
        }
    }, {
        key: "_changeShownAssets",
        value: function _changeShownAssets() {
            var shownAssets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "active";

            this.setState({
                shownAssets: shownAssets
            });
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeViewSetting({
                shownAssets: shownAssets
            });
        }
    }, {
        key: "_toggleHideProposal",
        value: function _toggleHideProposal() {
            this.setState({
                hideFishingProposals: !this.state.hideFishingProposals
            });
        }
    }, {
        key: "_toggleSortOrder",
        value: function _toggleSortOrder(key) {
            if (this.state.sortKey === key) {
                actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeViewSetting({
                    portfolioSortDirection: !this.state.sortDirection
                });
                this.setState({
                    sortDirection: !this.state.sortDirection
                });
            } else {
                actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeViewSetting({
                    portfolioSort: key
                });
                this.setState({
                    sortDirection: false,
                    sortKey: key
                });
            }
        }
    }, {
        key: "getHeader",
        value: function getHeader() {
            var settings = this.props.settings;
            var shownAssets = this.state.shownAssets;


            var preferredUnit = settings.get("unit") || this.props.core_asset.get("symbol");
            var showAssetPercent = settings.get("showAssetPercent", false);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        style: { textAlign: "left" },
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("clickable is-sortable", {
                            "is-active": this.state.sortKey === "alphabetic"
                        }),
                        onClick: this._toggleSortOrder.bind(this, "alphabetic")
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { component: "span", content: "account.asset" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        onClick: this._toggleSortOrder.bind(this, "qty"),
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("clickable is-sortable", {
                            "is-active": this.state.sortKey === "qty"
                        }),
                        style: { textAlign: "right" }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.qty" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        onClick: this._toggleSortOrder.bind(this, "priceValue"),
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("column-hide-small clickable is-sortable", { "is-active": this.state.sortKey === "priceValue" }),
                        style: { textAlign: "right" }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "exchange.price" }),
                    " (",
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: preferredUnit, noTip: true }),
                    ")"
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        onClick: this._toggleSortOrder.bind(this, "changeValue"),
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("column-hide-small clickable is-sortable", { "is-active": this.state.sortKey === "changeValue" }),
                        style: { textAlign: "right" }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.hour_24_short" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        onClick: this._toggleSortOrder.bind(this, "totalValue"),
                        style: { textAlign: "right" },
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("column-hide-small clickable is-sortable", { "is-active": this.state.sortKey === "totalValue" })
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_15__["default"], {
                        noLink: true,
                        string: "account.eq_value_header",
                        keys: [{
                            type: "asset",
                            value: preferredUnit,
                            arg: "asset"
                        }],
                        noTip: true
                    })
                ),
                showAssetPercent ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        style: {
                            textAlign: "right"
                        }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { component: "span", content: "account.percent" })
                ) : null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "header.payments" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "exchange.buy" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "modal.deposit.submit" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "modal.withdraw.submit" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.trade" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "exchange.borrow_short" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.settle" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "modal.reserve.submit" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                        content: shownAssets == "active" ? "exchange.hide" : "account.perm.show"
                    })
                )
            );
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props = this.props,
                account = _props.account,
                hiddenAssets = _props.hiddenAssets,
                settings = _props.settings,
                orders = _props.orders;
            var shownAssets = this.state.shownAssets;


            if (!account) {
                return null;
            }

            var preferredUnit = settings.get("unit") || this.props.core_asset.get("symbol");

            var call_orders = [],
                collateral = {},
                debt = {};

            if (account.toJS && account.has("call_orders")) call_orders = account.get("call_orders").toJS();
            var includedPortfolioList = void 0,
                hiddenPortfolioList = void 0;
            var account_balances = account.get("balances");
            var includedBalancesList = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                hiddenBalancesList = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List();
            call_orders.forEach(function (callID) {
                var position = bitsharesjs__WEBPACK_IMPORTED_MODULE_9__["ChainStore"].getObject(callID);
                if (position) {
                    var collateralAsset = position.getIn(["call_price", "base", "asset_id"]);
                    if (!collateral[collateralAsset]) {
                        collateral[collateralAsset] = parseInt(position.get("collateral"), 10);
                    } else {
                        collateral[collateralAsset] += parseInt(position.get("collateral"), 10);
                    }
                    var debtAsset = position.getIn(["call_price", "quote", "asset_id"]);
                    if (!debt[debtAsset]) {
                        debt[debtAsset] = parseInt(position.get("debt"), 10);
                    } else {
                        debt[debtAsset] += parseInt(position.get("debt"), 10);
                    }
                }
            });

            if (account_balances) {
                // Filter out balance objects that have 0 balance or are not included in open orders
                account_balances = account_balances.filter(function (a, index) {
                    var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_9__["ChainStore"].getObject(a);
                    if (balanceObject && !balanceObject.get("balance") && !orders[index]) {
                        return false;
                    } else {
                        return true;
                    }
                });

                // Separate balances into hidden and included
                account_balances.forEach(function (a, asset_type) {
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_9__["ChainStore"].getAsset(asset_type);

                    var assetName = "";
                    var filter = "";

                    if (_this3.state.filterValue) {
                        filter = _this3.state.filterValue ? String(_this3.state.filterValue).toLowerCase() : "";
                        assetName = asset.get("symbol").toLowerCase();

                        var _utils$replaceName = common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].replaceName(asset),
                            isBitAsset = _utils$replaceName.isBitAsset;

                        if (isBitAsset) {
                            assetName = "bit" + assetName;
                        }
                    }

                    if (hiddenAssets.includes(asset_type) && assetName.includes(filter)) {
                        hiddenBalancesList = hiddenBalancesList.push(a);
                    } else if (assetName.includes(filter)) {
                        includedBalancesList = includedBalancesList.push(a);
                    }
                });
            }

            var portfolioHiddenAssetsBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], { noTip: true, balances: hiddenBalancesList, hide_asset: true });

            var portfolioActiveAssetsBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: includedBalancesList,
                hide_asset: true
            });
            var ordersValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                openOrders: orders,
                hide_asset: true
            });
            var marginValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                debt: debt,
                collateral: collateral,
                hide_asset: true
            });
            var debtValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                debt: debt,
                hide_asset: true
            });
            var collateralValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                collateral: collateral,
                hide_asset: true
            });

            var totalValueText = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_15__["default"], {
                noLink: true,
                string: "account.total",
                keys: [{ type: "asset", value: preferredUnit, arg: "asset" }]
            });

            var includedPortfolioBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { key: "portfolio", className: "total-value" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { colSpan: "2", style: { textAlign: "left" } },
                    totalValueText
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    portfolioActiveAssetsBalance
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { colSpan: "9" })
            );

            var hiddenPortfolioBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { key: "portfolio", className: "total-value" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { colSpan: "2", style: { textAlign: "left" } },
                    totalValueText
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    portfolioHiddenAssetsBalance
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { colSpan: "9" })
            );

            includedPortfolioList = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPortfolioList__WEBPACK_IMPORTED_MODULE_20__["default"], {
                balanceList: includedBalancesList,
                optionalAssets: !this.state.filterValue ? this.state.alwaysShowAssets : null,
                visible: true,
                preferredUnit: preferredUnit,
                coreAsset: this.props.core_asset,
                coreSymbol: this.props.core_asset.get("symbol"),
                hiddenAssets: hiddenAssets,
                orders: orders,
                account: this.props.account,
                sortKey: this.state.sortKey,
                sortDirection: this.state.sortDirection,
                isMyAccount: this.props.isMyAccount,
                balances: this.props.balances,
                header: this.getHeader(),
                extraRow: includedPortfolioBalance
            });

            hiddenPortfolioList = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPortfolioList__WEBPACK_IMPORTED_MODULE_20__["default"], {
                balanceList: hiddenBalancesList,
                optionalAssets: !this.state.filterValue ? this.state.alwaysShowAsset : null,
                visible: false,
                preferredUnit: preferredUnit,
                coreSymbol: this.props.core_asset.get("symbol"),
                settings: settings,
                hiddenAssets: hiddenAssets,
                orders: orders,
                account: this.props.account,
                sortKey: this.state.sortKey,
                sortDirection: this.state.sortDirection,
                isMyAccount: this.props.isMyAccount,
                balances: this.props.balances,
                header: this.getHeader(),
                extraRow: hiddenPortfolioBalance
            });

            // add unicode non-breaking space as subtext to Activity Tab to ensure that all titles are aligned
            // horizontally
            var hiddenSubText = "\xA0";

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tabs"],
                            {
                                defaultActiveTab: 0,
                                segmented: false,
                                setting: "overviewTab",
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "account.portfolio",
                                    subText: portfolioActiveAssetsBalance
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "header-selector" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "filter inline-block" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            placeholder: "Filter",
                                            onChange: this._handleFilterInput
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "selector inline-block" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("inline-block", {
                                                    inactive: shownAssets != "active"
                                                }),
                                                onClick: shownAssets != "active" ? this._changeShownAssets.bind(this, "active") : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.hide_hidden" })
                                        ),
                                        hiddenBalancesList.size ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("inline-block", {
                                                    inactive: shownAssets != "hidden"
                                                }),
                                                onClick: shownAssets != "hidden" ? this._changeShownAssets.bind(this, "hidden") : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.show_hidden" })
                                        ) : null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("inline-block", {
                                                    inactive: shownAssets != "visual"
                                                }),
                                                onClick: shownAssets != "visual" ? this._changeShownAssets.bind(this, "visual") : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.show_visual" })
                                        )
                                    )
                                ),
                                shownAssets != "visual" ? shownAssets === "hidden" && hiddenBalancesList.size ? hiddenPortfolioList : includedPortfolioList : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountTreemap__WEBPACK_IMPORTED_MODULE_18__["default"], {
                                    balanceObjects: includedBalancesList
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "account.open_orders",
                                    subText: ordersValue
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    _AccountOrders__WEBPACK_IMPORTED_MODULE_13__["default"],
                                    this.props,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "tr",
                                        { className: "total-value" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "td",
                                            {
                                                colSpan: "8",
                                                style: { textAlign: "right" }
                                            },
                                            totalValueText
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "td",
                                            {
                                                colSpan: "1",
                                                style: { textAlign: "right" }
                                            },
                                            ordersValue
                                        ),
                                        this.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null) : null
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "account.collaterals",
                                    subText: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        {
                                            className: this.state.globalMarginStatus
                                        },
                                        marginValue
                                    )
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "generic-bordered-box" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            _MarginPositions__WEBPACK_IMPORTED_MODULE_6__["default"],
                                            {
                                                preferredUnit: preferredUnit,
                                                className: "dashboard-table",
                                                callOrders: call_orders,
                                                account: account
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tr",
                                                { className: "total-value" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    null,
                                                    totalValueText
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    null,
                                                    debtValue
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    { className: "column-hide-medium" },
                                                    collateralValue
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    null,
                                                    marginValue
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { colSpan: "3" })
                                            )
                                        )
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "account.activity",
                                    subText: hiddenSubText
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_RecentTransactions__WEBPACK_IMPORTED_MODULE_7__["RecentTransactions"], {
                                    accountsList: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.fromJS([account.get("id")]),
                                    compactView: false,
                                    showMore: true,
                                    fullHeight: true,
                                    limit: 100,
                                    showFilters: true,
                                    dashboard: true
                                })
                            ),
                            account.get("proposals") && account.get("proposals").size && this.props.settings.get("showProposedTx") ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "explorer.proposals.title",
                                    subText: String(account.get("proposals") ? account.get("proposals").size : 0)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        onClick: this._toggleHideProposal.bind(this),
                                        style: { cursor: "pointer" }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        antd__WEBPACK_IMPORTED_MODULE_23__["Tooltip"],
                                        {
                                            title: counterpart__WEBPACK_IMPORTED_MODULE_22___default.a.translate("tooltip.propose_unhide"),
                                            placement: "bottom"
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_21__["Switch"], {
                                            style: { margin: 16 },
                                            checked: this.state.hideFishingProposals,
                                            onChange: this._toggleHideProposal.bind(this)
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.deactivate_suspicious_proposals" })
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Account_Proposals__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                    className: "dashboard-table",
                                    account: account,
                                    hideFishingProposals: this.state.hideFishingProposals
                                })
                            ) : null
                        )
                    )
                )
            );
        }
    }]);

    return AccountOverview;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountOverview = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_19__["default"])(AccountOverview, { propNames: ["core_asset"] });

var AccountOverviewWrapper = function (_React$Component2) {
    _inherits(AccountOverviewWrapper, _React$Component2);

    function AccountOverviewWrapper() {
        _classCallCheck(this, AccountOverviewWrapper);

        return _possibleConstructorReturn(this, (AccountOverviewWrapper.__proto__ || Object.getPrototypeOf(AccountOverviewWrapper)).apply(this, arguments));
    }

    _createClass(AccountOverviewWrapper, [{
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_BalanceWrapper__WEBPACK_IMPORTED_MODULE_17__["default"], _extends({}, this.props, { wrap: AccountOverview }));
        }
    }]);

    return AccountOverviewWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountOverviewWrapper);

/***/ }),

/***/ 2570:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1970);
/* harmony import */ var _Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2306);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1833);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1834);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2187);
/* harmony import */ var _Utility_AssetImage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2453);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2186);
/* harmony import */ var _Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2502);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(577);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(407);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(581);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(558);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(774);
/* harmony import */ var _Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2234);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(716);
/* harmony import */ var _Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2310);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }























var alignRight = { textAlign: "right" };
var alignLeft = { textAlign: "left" };

/**
 *  Given a collateral position object (call order) and account,
 *  display it in a pretty way
 *
 *  Expects property, 'object' which should be a call order id
 *  and another property called 'account' which should be an
 *  account.
 */

var MarginPosition = function (_React$Component) {
    _inherits(MarginPosition, _React$Component);

    function MarginPosition() {
        _classCallCheck(this, MarginPosition);

        return _possibleConstructorReturn(this, (MarginPosition.__proto__ || Object.getPrototypeOf(MarginPosition)).apply(this, arguments));
    }

    _createClass(MarginPosition, [{
        key: "_onUpdatePosition",
        value: function _onUpdatePosition(e) {
            e.preventDefault();
            var ref = "cp_modal_" + this.props.object.getIn(["call_price", "quote", "asset_id"]);
            this.refs[ref].show();
        }
    }, {
        key: "_onClosePosition",
        value: function _onClosePosition(e) {
            e.preventDefault();
            var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_9__["default"].new_transaction();

            tr.add_type_operation("call_order_update", {
                fee: {
                    amount: 0,
                    asset_id: 0
                },
                funding_account: this.props.object.get("borrower"),
                delta_collateral: {
                    amount: -this.props.object.get("collateral"),
                    asset_id: this.props.object.getIn(["call_price", "base", "asset_id"])
                },
                delta_debt: {
                    amount: -this.props.object.get("debt"),
                    asset_id: this.props.object.getIn(["call_price", "quote", "asset_id"])
                }
            });

            stores_WalletDb__WEBPACK_IMPORTED_MODULE_11__["default"].process_transaction(tr, null, true);
        }

        // how many units of the debt asset the borrower has
        // in his/her wallet. This has nothing to do with
        // how many of the asset the borrower has borrowed.

    }, {
        key: "_getBalance",
        value: function _getBalance() {
            var account = this.props.account;
            // the debt asset id which we want to display
            var row_asset_id = this.props.object.getIn(["call_price", "quote", "asset_id"]);

            var account_balances = account.get("balances");

            var balance = 0;

            // really this iteration should be called once, and
            // each asset_id matched once with its balance

            // for every debt the account has, we iterate
            // through every balance the user has
            if (account_balances) {
                account_balances.forEach(function (a, asset_type) {
                    if (asset_type == row_asset_id) {
                        var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_10__["ChainStore"].getObject(a);

                        // get the balance
                        balance = balanceObject.get("balance");
                    }
                });
            }

            // it's possible that the account doesn't hold
            // any of the asset here
            return balance;
        }
    }, {
        key: "_getFeedPrice",
        value: function _getFeedPrice() {
            if (!this.props) {
                return 1;
            }

            return 1 / common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_price(this.props.debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "quote", "amount"]), this.props.collateralAsset, this.props.debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "base", "amount"]), this.props.debtAsset);
        }
    }, {
        key: "_getCollateralRatio",
        value: function _getCollateralRatio() {
            var co = this.props.object.toJS();
            var c = common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_amount(co.collateral, this.props.collateralAsset);
            var d = common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_amount(co.debt, this.props.debtAsset);
            return c / (d / this._getFeedPrice());
        }
    }, {
        key: "_getMR",
        value: function _getMR() {
            return this.props.debtAsset.getIn(["bitasset", "current_feed", "maintenance_collateral_ratio"]) / 1000;
        }
    }, {
        key: "_getStatusClass",
        value: function _getStatusClass() {
            var cr = this._getCollateralRatio();
            var mr = this._getMR();

            if (isNaN(cr)) return null;
            if (cr < mr) {
                return "danger";
            } else if (cr < mr + 0.5) {
                return "warning";
            } else {
                return "";
            }
        }
    }, {
        key: "_getCRTip",
        value: function _getCRTip() {
            var statusClass = this._getStatusClass();
            var mr = this._getMR();
            if (!statusClass || statusClass === "") return null;

            if (statusClass === "danger") {
                return counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.cr_danger", { mr: mr });
            } else if (statusClass === "warning") {
                return counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.cr_warning", { mr: mr });
            } else {
                return null;
            }
        }
    }, {
        key: "_getTargetCollateralRatio",
        value: function _getTargetCollateralRatio() {
            var co = this.props.object && this.props.object.toJS();

            return co && !isNaN(co.target_collateral_ratio) ? co.target_collateral_ratio / 1000 : 0;
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                debtAsset = _props.debtAsset,
                collateralAsset = _props.collateralAsset,
                object = _props.object;


            var has_order = object != null;

            var co = has_order ? object.toJS() : null;
            var cr = this._getCollateralRatio();
            var d = common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_amount(co.debt, this.props.debtAsset);
            var balance = this._getBalance();

            var statusClass = this._getStatusClass();

            var debt_amount = has_order ? co.debt : 0;
            var collateral_amount = has_order ? co.collateral : 0;
            var collateral_asset = has_order ? co.call_price.base.asset_id : collateralAsset.get("id");
            var target_collateral_ratio = this._getTargetCollateralRatio();

            var mcr = this.props.debtAsset.getIn(["bitasset", "current_feed", "maintenance_collateral_ratio"]);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { className: "margin-row" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetImage__WEBPACK_IMPORTED_MODULE_6__["default"], {
                        replaceNoneToBts: false,
                        maxWidth: 30,
                        name: debtAsset.get("symbol")
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_18__["Link"],
                        { to: "/asset/" + debtAsset.get("symbol") },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_7__["default"], { noTip: true, name: debtAsset.get("symbol") })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        amount: balance,
                        asset: co.call_price.quote.asset_id,
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        amount: co.debt,
                        asset: co.call_price.quote.asset_id,
                        hide_asset: true
                    }) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-medium" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        decimalOffset: 3,
                        amount: collateral_amount,
                        asset: collateral_asset
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            "data-place": "bottom",
                            "data-tip": this._getCRTip(),
                            className: "center-content " + statusClass
                        },
                        common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].format_number(cr, 2)
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-medium-2" },
                    target_collateral_ratio ? common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].format_number(target_collateral_ratio, 2) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-medium-1" },
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_16__["default"], {
                        noTip: true,
                        balances: Object(immutable__WEBPACK_IMPORTED_MODULE_17__["List"])(),
                        debt: _defineProperty({}, debtAsset.get("id"), co.debt),
                        collateral: _defineProperty({}, collateralAsset.get("id"), parseInt(co.collateral, 10)),
                        hide_asset: true
                    }) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-small-2" },
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        base_amount: collateral_amount,
                        base_asset: collateralAsset.get("id"),
                        quote_amount: debt_amount * (mcr / 1000),
                        quote_asset: debtAsset.get("id"),
                        hide_symbols: true
                    }) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-small-1" },
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        base_amount: debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "base", "amount"]),
                        base_asset: co.call_price.quote.asset_id,
                        quote_amount: debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "quote", "amount"]),
                        quote_asset: co.call_price.base.asset_id,
                        hide_symbols: true
                    }) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        className: "center-content column-hide-small",
                        style: alignLeft
                    },
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        base_amount: co.call_price.base.amount,
                        base_asset: co.call_price.base.asset_id,
                        quote_amount: co.call_price.quote.amount,
                        quote_asset: co.call_price.quote.asset_id,
                        hide_value: true
                    }) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "center" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_18__["Link"],
                        {
                            to: "/market/" + debtAsset.get("symbol") + "_" + collateralAsset.get("symbol")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                            name: "trade",
                            title: "icons.trade.trade",
                            className: "icon-14px",
                            style: { marginRight: 5 }
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            "data-place": "left",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.update_position"),
                            style: { paddingBottom: 5 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            { onClick: this._onUpdatePosition.bind(this) },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                name: "adjust",
                                title: "icons.adjust",
                                className: "icon-14px rotate90"
                            })
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            "data-place": "left",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.close_position", { amount: d, asset: debtAsset.get("symbol") }),
                            style: { paddingBottom: 5 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            { onClick: this._onClosePosition.bind(this) },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                name: "cross-circle",
                                title: "icons.cross_circle.close_position",
                                className: "icon-14px"
                            })
                        )
                    ) : null,
                    debtAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_8__["default"], {
                        ref: "cp_modal_" + co.call_price.quote.asset_id,
                        modalId: "cp_modal_" + co.call_price.quote.asset_id,
                        quote_asset: co.call_price.quote.asset_id,
                        backing_asset: debtAsset.getIn(["bitasset", "options", "short_backing_asset"]),
                        account: this.props.account
                    }) : null
                )
            );
        }
    }]);

    return MarginPosition;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarginPosition.propTypes = {
    debtAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAsset.isRequired,
    collateralAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAsset.isRequired
};
MarginPosition.defaultProps = {
    tempComponent: "tr"
};


MarginPosition = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(MarginPosition);

var MarginPositionWrapper = function (_React$Component2) {
    _inherits(MarginPositionWrapper, _React$Component2);

    function MarginPositionWrapper() {
        _classCallCheck(this, MarginPositionWrapper);

        return _possibleConstructorReturn(this, (MarginPositionWrapper.__proto__ || Object.getPrototypeOf(MarginPositionWrapper)).apply(this, arguments));
    }

    _createClass(MarginPositionWrapper, [{
        key: "render",
        value: function render() {
            var _props2 = this.props,
                object = _props2.object,
                account = _props2.account;

            var debtAsset = object.getIn(["call_price", "quote", "asset_id"]);
            var collateralAsset = object.getIn(["call_price", "base", "asset_id"]);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarginPosition, _extends({
                debtAsset: debtAsset,
                collateralAsset: collateralAsset,
                account: account
            }, this.props));
        }
    }]);

    return MarginPositionWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarginPositionWrapper.propTypes = {
    object: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired
};


MarginPositionWrapper = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(MarginPositionWrapper);

var MarginPositionPlaceHolder = function (_React$Component3) {
    _inherits(MarginPositionPlaceHolder, _React$Component3);

    function MarginPositionPlaceHolder() {
        _classCallCheck(this, MarginPositionPlaceHolder);

        return _possibleConstructorReturn(this, (MarginPositionPlaceHolder.__proto__ || Object.getPrototypeOf(MarginPositionPlaceHolder)).apply(this, arguments));
    }

    _createClass(MarginPositionPlaceHolder, [{
        key: "_onUpdatePosition",
        value: function _onUpdatePosition(e) {
            e.preventDefault();
            var ref = "cp_modal_" + this.props.debtAsset.get("id");
            this.refs[ref].show();
        }
    }, {
        key: "_getFeedPrice",
        value: function _getFeedPrice() {
            if (!this.props) {
                return 1;
            }

            return 1 / common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_price(this.props.debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "quote", "amount"]), this.props.collateralAsset, this.props.debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "base", "amount"]), this.props.debtAsset);
        }
    }, {
        key: "render",
        value: function render() {
            var _props3 = this.props,
                debtAsset = _props3.debtAsset,
                collateralAsset = _props3.collateralAsset,
                account = _props3.account;

            // get the balance

            // the debt asset id which we want to display

            var row_asset_id = debtAsset.get("id");

            var account_balances = account.get("balances");

            var balance = 0;

            // really this iteration should be called once, and
            // each asset_id matched once with its balance

            // for every debt the account has, we iterate
            // through every balance the user has
            if (account_balances) {
                account_balances.forEach(function (a, asset_type) {
                    if (asset_type == row_asset_id) {
                        var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_10__["ChainStore"].getObject(a);

                        // get the balance
                        balance = balanceObject.get("balance");
                    }
                });
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { className: "margin-row" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetImage__WEBPACK_IMPORTED_MODULE_6__["default"], {
                        replaceNoneToBts: false,
                        maxWidth: 30,
                        name: debtAsset.get("symbol")
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_18__["Link"],
                        { to: "/asset/" + debtAsset.get("symbol") },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_7__["default"], { noTip: true, name: debtAsset.get("symbol") })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        amount: balance,
                        asset: debtAsset.get("id"),
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        amount: 0,
                        asset: debtAsset.get("id"),
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-medium" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        decimalOffset: 3,
                        amount: 0,
                        asset: collateralAsset.get("id")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { style: alignRight }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { style: alignRight, className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { style: alignRight, className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { style: alignRight, className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", {
                    className: "center-content column-hide-small",
                    style: alignLeft
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "center" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_18__["Link"],
                        {
                            to: "/market/" + debtAsset.get("symbol") + "_" + collateralAsset.get("symbol")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                            name: "trade",
                            title: "icons.trade.trade",
                            className: "icon-14px",
                            style: { marginRight: 5 }
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            "data-place": "left",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.update_position"),
                            style: { paddingBottom: 5 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            { onClick: this._onUpdatePosition.bind(this) },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                name: "adjust",
                                title: "icons.adjust",
                                className: "icon-14px rotate90"
                            })
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    debtAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_8__["default"], {
                        ref: "cp_modal_" + debtAsset.get("id"),
                        modalId: "cp_modal_" + debtAsset.get("id"),
                        quote_asset: debtAsset.get("id"),
                        backing_asset: debtAsset.getIn(["bitasset", "options", "short_backing_asset"]),
                        account: this.props.account
                    }) : null
                )
            );
        }
    }]);

    return MarginPositionPlaceHolder;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarginPositionPlaceHolder.propTypes = {
    debtAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAsset.isRequired,
    collateralAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAsset.isRequired
};
MarginPositionPlaceHolder.defaultProps = {
    tempComponent: "tr"
};


MarginPositionPlaceHolder = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(MarginPositionPlaceHolder);

var PlaceHolderWrapper = function (_React$Component4) {
    _inherits(PlaceHolderWrapper, _React$Component4);

    function PlaceHolderWrapper() {
        _classCallCheck(this, PlaceHolderWrapper);

        return _possibleConstructorReturn(this, (PlaceHolderWrapper.__proto__ || Object.getPrototypeOf(PlaceHolderWrapper)).apply(this, arguments));
    }

    _createClass(PlaceHolderWrapper, [{
        key: "render",
        value: function render() {
            var _this5 = this;

            var _props4 = this.props,
                account = _props4.account,
                callOrders = _props4.callOrders,
                bitAssets = _props4.bitAssets;

            callOrders = callOrders.filter(function (o) {
                return !!o;
            });
            bitAssets = bitAssets.filter(function (o) {
                return !!o;
            });
            if (!bitAssets.length) return null;
            callOrders.forEach(function (object) {
                /*
                * Existing call orders are already rendered elsewhere, so we filter
                * out assets from the bitAssets list for which the account already
                * has a position
                */
                if (object) {
                    var index = bitAssets.findIndex(function (o) {
                        return o && o.get("id") === object.getIn(["call_price", "quote", "asset_id"]);
                    });
                    if (index !== -1) {
                        bitAssets.splice(index, 1);
                    }
                }
            });

            if (!bitAssets.length) return null;
            var rows = bitAssets.map(function (a) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarginPositionPlaceHolder, _extends({
                    key: a.get("id"),
                    debtAsset: a.get("id"),
                    collateralAsset: a.getIn(["bitasset", "options", "short_backing_asset"]),
                    account: account
                }, _this5.props));
            });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tbody",
                null,
                rows
            );
        }
    }]);

    return PlaceHolderWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

PlaceHolderWrapper.propTypes = {
    callOrders: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObjectsList
};


PlaceHolderWrapper = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(PlaceHolderWrapper);
PlaceHolderWrapper = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_5__["default"])(PlaceHolderWrapper, {
    propNames: ["bitAssets"],
    defaultProps: {
        bitAssets: ["1.3.103", "1.3.113", "1.3.120", "1.3.121", "1.3.958", "1.3.1325", "1.3.1362", "1.3.105", "1.3.106"]
    },
    asList: true
});

var CollateralTable = function CollateralTable(_ref3) {
    var callOrders = _ref3.callOrders,
        account = _ref3.account,
        className = _ref3.className,
        children = _ref3.children,
        preferredUnit = _ref3.preferredUnit;

    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "table",
        { className: "table table-hover " + className },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "thead",
            null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "explorer.asset.title" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.balance" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "transaction.borrow_amount" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight, className: "column-hide-medium" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "transaction.collateral" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "tooltip inline-block",
                            "data-place": "top",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.coll_ratio")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "borrow.coll_ratio" })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "tooltip inline-block",
                            "data-place": "top",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("borrow.target_collateral_ratio")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "borrow.target_collateral_ratio_short" })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        noLink: true,
                        string: "account.total",
                        keys: [{
                            type: "asset",
                            value: preferredUnit,
                            arg: "asset"
                        }]
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight, className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "tooltip inline-block",
                            "data-place": "top",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.call_price")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.call" })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight, className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.price" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { className: "column-hide-small", style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "explorer.assets.units" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: { textAlign: "center" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.market" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "borrow.adjust_short" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "transfer.close" })
                )
            )
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "tbody",
            null,
            callOrders.sort(function (a, b) {
                return a.split(".")[2] - b.split(".")[2];
            }).map(function (id) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarginPositionWrapper, {
                    key: id,
                    object: id,
                    account: account
                });
            })
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaceHolderWrapper, {
            account: account,
            callOrders: immutable__WEBPACK_IMPORTED_MODULE_17___default.a.List(callOrders)
        }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "tbody",
            null,
            children
        )
    );
};

/* harmony default export */ __webpack_exports__["default"] = (CollateralTable);

/***/ }),

/***/ 2571:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var components_Blockchain_ProposedOperation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2308);
/* harmony import */ var components_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1834);
/* harmony import */ var components_Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1833);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(558);
/* harmony import */ var _Modal_ProposalApproveModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2572);
/* harmony import */ var _Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2573);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(407);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var common_permission_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2574);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2304);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(540);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(557);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(838);
var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }


















var Proposals = function (_Component) {
    _inherits(Proposals, _Component);

    function Proposals() {
        _classCallCheck(this, Proposals);

        var _this = _possibleConstructorReturn(this, (Proposals.__proto__ || Object.getPrototypeOf(Proposals)).call(this));

        _this.forceUpdate = _this.forceUpdate.bind(_this);

        _this._isScam = _this._isScam.bind(_this);
        _this._isUnknown = _this._isUnknown.bind(_this);
        return _this;
    }

    _createClass(Proposals, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            /*
             * Account objects don't get updated by underlying proposal changes, but
             * the ChainStore does, so in order to update this component when a proposal
             * changes, we need to update it whenever the ChainStore itself updates
             */
            bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].subscribe(this.forceUpdate);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].unsubscribe(this.forceUpdate);
        }
    }, {
        key: "_onApproveModal",
        value: function _onApproveModal(id, action) {
            if (this.refs[id + "_" + action]) {
                this.refs[id + "_" + action].show();
            }
        }
    }, {
        key: "_canReject",
        value: function _canReject(proposal) {
            return proposal.available_active_approvals.length || proposal.available_owner_approvals.length || proposal.available_key_approvals.length;
        }
    }, {
        key: "_isScam",
        value: function _isScam(proposal) {
            var _this2 = this;

            var isScam = false;

            var touchedAccounts = [];
            proposal.operations.forEach(function (o) {
                if (o.get(0) == 6) {
                    touchedAccounts.push(o.getIn([1, "active", "account_auths", 0, 0]));
                    touchedAccounts.push(o.getIn([1, "owner", "account_auths", 0, 0]));
                } else {
                    touchedAccounts.push(o.getIn([1, "to"]));
                }
            });

            var proposer = proposal.proposal.get("proposer");

            touchedAccounts.push(proposer);

            /* if (__DEV__) {
                console.log(
                    "Proposed transactions: ",
                    proposal,
                    " touching accounts ",
                    touchedAccounts
                );
            } */

            touchedAccounts.forEach(function (_account) {
                if (common_account_utils__WEBPACK_IMPORTED_MODULE_13__["default"].isKnownScammer(_account)) {
                    isScam = true;
                }
                if (_this2.props.account.get("blacklisted_accounts").some(function (item) {
                    return item === _account;
                })) {
                    isScam = true;
                }
            });
            return isScam;
        }
    }, {
        key: "_isUnknown",
        value: function _isUnknown(proposal) {
            var _this3 = this;

            var isUnknown = true;

            var touchedAccounts = [];
            proposal.operations.forEach(function (o) {
                if (o.get(0) == 6) {
                    touchedAccounts.push(o.getIn([1, "active", "account_auths", 0, 0]));
                    touchedAccounts.push(o.getIn([1, "owner", "account_auths", 0, 0]));
                } else {
                    touchedAccounts.push(o.getIn([1, "to"]));
                }
            });

            var proposer = proposal.proposal.get("proposer");

            touchedAccounts.push(proposer);
            touchedAccounts.forEach(function (_account) {
                if (_this3.props.account.get("whitelisted_accounts").some(function (item) {
                    return item === _account;
                })) {
                    isUnknown = false;
                }
                var starred = stores_AccountStore__WEBPACK_IMPORTED_MODULE_12__["default"].getState().starredAccounts;
                if (starred.some(function (item) {
                    var name = bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].getAccount(item, false);
                    if (!!name) {
                        return name.get("id") == _account;
                    } else {
                        return false;
                    }
                })) {
                    isUnknown = false;
                }
                var contacts = stores_AccountStore__WEBPACK_IMPORTED_MODULE_12__["default"].getState().accountContacts;
                if (contacts.some(function (item) {
                    var name = bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].getAccount(item, false);
                    if (!!name) {
                        return name.get("id") == _account;
                    }
                    return false;
                })) {
                    isUnknown = false;
                }
            });
            return isUnknown;
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var account = this.props.account;

            if (!account) return null;

            var proposals = [];

            if (account.get("proposals").size) {
                account.get("proposals").forEach(function (proposal_id) {
                    var proposal = bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].getObject(proposal_id);
                    if (proposal) {
                        var proposed_transaction = proposal.get("proposed_transaction");
                        var operations = proposed_transaction.get("operations");
                        proposals.push({ operations: operations, account: account, proposal: proposal });
                    }
                });
            }

            var proposalRows = proposals.sort(function (a, b) {
                return common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].sortID(a.proposal.get("id"), b.proposal.get("id"), true);
            }).reduce(function (result, proposal, index) {
                var id = proposal.proposal.get("id");
                var proposer = proposal.proposal.get("proposer");
                var expiration = proposal.proposal.get("expiration_time");
                var text = proposal.operations.map(function (o, index) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Blockchain_ProposedOperation__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        key: proposal.proposal.get("id") + "_operation_" + index,
                        expiration: expiration,
                        index: index,
                        op: o.toJS(),
                        inverted: false,
                        hideFee: true,
                        hideOpLabel: true,
                        hideExpiration: true,
                        hideDate: true,
                        proposal: true,
                        id: id,
                        proposer: proposer
                    });
                }).toArray();

                var canReject = _this4._canReject(proposal.proposal.toJS());
                var proposalId = proposal.proposal.get("id");

                var type = proposal.proposal.get("required_active_approvals").size ? "active" : "owner";
                result.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: proposalId + "_id" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            colSpan: "4",
                            className: "proposal" + (index === 0 ? " first" : "")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Blockchain_ProposedOperation__WEBPACK_IMPORTED_MODULE_2__["TransactionIDAndExpiry"], {
                            id: id,
                            expiration: expiration
                        })
                    )
                ));

                var available = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.proposal.get("available_" + type + "_approvals"));
                var availableKeys = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.proposal.get("available_key_approvals"));

                var required = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.proposal.get("required_" + type + "_approvals"));
                var requiredPermissions = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].unnest(required, type);

                var _finalRequiredPerms = Object(_Modal_ProposalApproveModal__WEBPACK_IMPORTED_MODULE_6__["finalRequiredPerms"])(requiredPermissions, available, availableKeys),
                    _finalRequiredPerms2 = _slicedToArray(_finalRequiredPerms, 2),
                    accounts = _finalRequiredPerms2[0],
                    keys = _finalRequiredPerms2[1];

                var accountNames = [];

                if (accounts.length) {
                    accounts.forEach(function (account) {
                        if (account && !proposal.proposal.get("available_" + type + "_approvals").includes(account)) {
                            accountNames.push(account);
                        }
                    });
                }

                var keyNames = [];
                if (keys.length) {
                    keys.forEach(function (key) {
                        var isMine = stores_AccountStore__WEBPACK_IMPORTED_MODULE_12__["default"].isMyKey(key);
                        if (isMine && !proposal.proposal.get("available_key_approvals").includes(key)) {
                            keyNames.push(key);
                        }
                    });
                }

                var canApprove = accountNames.length + keyNames.length > 0;

                var isScam = _this4._isScam(proposal);
                var isUnknown = _this4._isUnknown(proposal);

                result.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    {
                        className: "top-left-align",
                        key: proposalId + "_content"
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        text
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        requiredPermissions.map(function (account, index) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                {
                                    className: "list-item",
                                    key: proposalId + "_approver_" + index
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_11__["default"], {
                                    subpage: "permissions",
                                    account: account.id
                                })
                            );
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_7__["default"], {
                            proposal: proposal.proposal.get("id"),
                            type: type
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { className: "approval-buttons" },
                        isScam && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            antd__WEBPACK_IMPORTED_MODULE_14__["Tooltip"],
                            {
                                title: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("tooltip.propose_scam")
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "span",
                                { className: "tooltip has-error scam-error" },
                                "SCAM ATTEMPT"
                            )
                        ),
                        _this4.props.hideFishingProposals && !isScam && isUnknown && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            antd__WEBPACK_IMPORTED_MODULE_14__["Tooltip"],
                            {
                                title: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("tooltip.propose_unknown")
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "tooltip has-error scam-error" },
                                "UNKNOWN SOURCE"
                            )
                        ),
                        !isScam && (!isUnknown || !_this4.props.hideFishingProposals) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                onClick: canApprove ? _this4._onApproveModal.bind(_this4, proposalId, "approve") : function () {},
                                className: "button primary hollow" + (canApprove ? "" : " hidden")
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "span",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.approve" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_ProposalApproveModal__WEBPACK_IMPORTED_MODULE_6__["default"], {
                            ref: proposalId + "_" + "approve",
                            modalId: proposalId + "_" + "approve",
                            account: proposal.account.get("id"),
                            proposal: proposalId,
                            action: "approve"
                        }),
                        canReject ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                onClick: _this4._onApproveModal.bind(_this4, proposalId, "reject"),
                                className: "button primary hollow"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.reject" })
                        ) : null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_ProposalApproveModal__WEBPACK_IMPORTED_MODULE_6__["default"], {
                            ref: proposalId + "_" + "reject",
                            modalId: proposalId + "_" + "reject",
                            account: proposal.account.get("id"),
                            proposal: proposalId,
                            action: "reject"
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                onClick: _this4._onApproveModal.bind(_this4, proposalId, "delete"),
                                className: "button primary hollow"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.delete" })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_ProposalApproveModal__WEBPACK_IMPORTED_MODULE_6__["default"], {
                            ref: proposalId + "_" + "delete",
                            modalId: proposalId + "_" + "delete",
                            account: proposal.account.get("id"),
                            proposal: proposalId,
                            action: "delete"
                        })
                    )
                ));
                result.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: proposalId + "_separator" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { colSpan: "4" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("hr", null)
                    )
                ));
                return result;
            }, []);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "table",
                {
                    className: "table proposals compact " + this.props.className
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "thead",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tr",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.proposals" })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.approvers" })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.status" })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.action" })
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tbody",
                    null,
                    proposalRows
                )
            );
        }
    }]);

    return Proposals;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

Proposals.propTypes = {
    account: components_Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccount.isRequired
};


/* harmony default export */ __webpack_exports__["default"] = (Object(components_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(Proposals));

/***/ }),

/***/ 2572:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "finalRequiredPerms", function() { return finalRequiredPerms; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(709);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _BaseModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1960);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1833);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1834);
/* harmony import */ var components_Forms_AccountSelect__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1968);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(540);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(581);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(577);
/* harmony import */ var _Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2573);
/* harmony import */ var common_permission_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2574);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(407);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }















var finalRequiredPerms = function finalRequiredPerms(requiredPermissions, available, availableKeys) {
    var finalRequired = [];

    requiredPermissions.forEach(function (account) {
        finalRequired = finalRequired.concat(account.getMissingSigs(available));
    });

    var finalRequiredKeys = [];

    requiredPermissions.forEach(function (account) {
        finalRequiredKeys = finalRequiredKeys.concat(account.getMissingKeys(availableKeys));
    });

    return [finalRequired, finalRequiredKeys];
};

var ProposalApproveModal = function (_React$Component) {
    _inherits(ProposalApproveModal, _React$Component);

    function ProposalApproveModal(props) {
        _classCallCheck(this, ProposalApproveModal);

        var _this = _possibleConstructorReturn(this, (ProposalApproveModal.__proto__ || Object.getPrototypeOf(ProposalApproveModal)).call(this));

        _this.state = {
            active: null,
            key: null,
            owner: null,
            payee: null
        };
        return _this;
    }

    _createClass(ProposalApproveModal, [{
        key: "onActiveAccount",
        value: function onActiveAccount(accountMap, keyMap, type, account) {
            var newState = {};

            if (keyMap[account]) {
                newState["key"] = account;
                newState[type] = null;
            } else if (account) {
                newState[type] = accountMap[account];
                newState["key"] = null;
            } else {
                newState[type] = null;
                newState["key"] = null;
            }
            this.setState(newState);
        }
    }, {
        key: "_onProposalAction",
        value: function _onProposalAction(oldProposal) {
            var _this2 = this;

            var proposalObject = oldProposal.toJS();
            var _state = this.state,
                active = _state.active,
                key = _state.key,
                owner = _state.owner,
                payee = _state.payee;


            var proposal = {
                fee_paying_account: payee || active,
                proposal: proposalObject.id,
                active_approvals_to_add: [],
                active_approvals_to_remove: [],
                owner_approvals_to_add: [],
                owner_approvals_to_remove: [],
                key_approvals_to_add: [],
                key_approvals_to_remove: []
            };

            var isAdd = this.props.action === "approve";

            var neededKeys = [];

            ["active", "owner", "key"].forEach(function (auth_type) {
                var value = _this2.state[auth_type];
                if (value) {
                    var hasValue = proposalObject["available_" + auth_type + "_approvals"].indexOf(value) !== -1;
                    if (isAdd && !hasValue || !isAdd && hasValue) {
                        if (_this2.props.action === "approve") {
                            proposal[auth_type + "_approvals_to_add"] = [value];
                            if (auth_type === "key") neededKeys.push(value);
                        } else if (_this2.props.action === "reject") {
                            proposal[auth_type + "_approvals_to_remove"] = [value];
                            if (auth_type === "key") neededKeys.push(value);
                        }
                    }
                }
            });

            var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_9__["default"].new_transaction();
            tr.add_type_operation("proposal_update", proposal);
            stores_WalletDb__WEBPACK_IMPORTED_MODULE_8__["default"].process_transaction(tr, null, true, neededKeys);

            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default.a.publish(this.props.modalId, "close");
        }
    }, {
        key: "onChangePayee",
        value: function onChangePayee(account) {
            var fullAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_12__["ChainStore"].getAccount(account);

            if (fullAccount) {
                this.setState({
                    payee: fullAccount.get("id")
                });
            }
        }
    }, {
        key: "onCancel",
        value: function onCancel() {
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default.a.publish(this.props.modalId, "close");
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                proposal = _props.proposal,
                type = _props.type;


            var accountNames = [];
            var accountMap = {};
            var isAdd = this.props.action === "approve";

            if (this.props.accounts.length) {
                this.props.accounts.forEach(function (account) {
                    var accountCheck = isAdd ? account && !proposal.get("available_" + type + "_approvals").includes(account.get("id")) : account && proposal.get("available_" + type + "_approvals").includes(account.get("id"));
                    if (accountCheck) {
                        accountMap[account.get("name")] = account.get("id");
                        accountNames.push(account.get("name"));
                    }
                });
            }

            var keyNames = [];
            var keyMap = {};
            if (this.props.keys.length) {
                this.props.keys.forEach(function (key) {
                    var isMine = stores_AccountStore__WEBPACK_IMPORTED_MODULE_7__["default"].isMyKey(key);
                    var hasValue = proposal.get("available_key_approvals").includes(key);
                    if (isMine && isAdd && !hasValue || isMine && !isAdd && hasValue) {
                        keyMap[key] = true;
                        keyNames.push(key);
                    }
                });
            }

            var myAccounts = stores_AccountStore__WEBPACK_IMPORTED_MODULE_7__["default"].getMyAccounts();

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "form",
                { className: "grid-block vertical full-width-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-container" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                            content: "modal.proposals.actions." + this.props.action,
                            component: "h4"
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "content-block",
                            style: { paddingRight: "20%" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_10__["default"], {
                            expanded: true,
                            proposal: proposal.get("id"),
                            type: type,
                            added: isAdd ? this.state.key ? this.state.key : this.state[type] || null : null,
                            removed: !isAdd ? this.state.key ? this.state.key : this.state[type] || null : null,
                            noFail: true
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block full-width-content" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "full-width-content form-group" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                                content: "modal.proposals.pay_with",
                                component: "label"
                            }),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Forms_AccountSelect__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                account_names: myAccounts,
                                onChange: this.onChangePayee.bind(this)
                            })
                        ),
                        accountNames.length || keyNames.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "full-width-content form-group" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                                content: "modal.proposals.approval_" + (isAdd ? "add" : "remove"),
                                component: "label"
                            }),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Forms_AccountSelect__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                account_names: accountNames.concat(keyNames),
                                onChange: this.onActiveAccount.bind(this, accountMap, keyMap, type)
                            })
                        ) : null,
                         false ? undefined : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                            type: "submit",
                            className: "button",
                            onClick: this._onProposalAction.bind(this, proposal),
                            value: isAdd ? "Approve" : "Remove"
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                onClick: this.onCancel.bind(this),
                                className: " button"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.cancel" })
                        )
                    )
                )
            );
        }
    }]);

    return ProposalApproveModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ProposalApproveModal.propTypes = {
    accounts: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccountsList
};

ProposalApproveModal = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(ProposalApproveModal);

var FirstLevel = function (_React$Component2) {
    _inherits(FirstLevel, _React$Component2);

    function FirstLevel() {
        _classCallCheck(this, FirstLevel);

        var _this3 = _possibleConstructorReturn(this, (FirstLevel.__proto__ || Object.getPrototypeOf(FirstLevel)).call(this));

        _this3._updateState = _this3._updateState.bind(_this3);
        return _this3;
    }

    _createClass(FirstLevel, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this._updateState();

            bitsharesjs__WEBPACK_IMPORTED_MODULE_12__["ChainStore"].subscribe(this._updateState);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            bitsharesjs__WEBPACK_IMPORTED_MODULE_12__["ChainStore"].unsubscribe(this._updateState);
        }
    }, {
        key: "_updateState",
        value: function _updateState() {
            var _props2 = this.props,
                proposal = _props2.proposal,
                account = _props2.account;

            var type = proposal.get("required_active_approvals").size ? "active" : "owner";

            var required = common_permission_utils__WEBPACK_IMPORTED_MODULE_11__["default"].listToIDs(proposal.get("required_" + type + "_approvals"));
            var available = common_permission_utils__WEBPACK_IMPORTED_MODULE_11__["default"].listToIDs(proposal.get("available_" + type + "_approvals"));
            var availableKeys = common_permission_utils__WEBPACK_IMPORTED_MODULE_11__["default"].listToIDs(proposal.get("available_key_approvals"));

            this.setState({
                requiredPermissions: common_permission_utils__WEBPACK_IMPORTED_MODULE_11__["default"].unnest(required, type),
                available: available,
                availableKeys: availableKeys,
                type: type
            });
        }
    }, {
        key: "render",
        value: function render() {
            var action = this.props.action;
            var _state2 = this.state,
                requiredPermissions = _state2.requiredPermissions,
                available = _state2.available,
                availableKeys = _state2.availableKeys,
                type = _state2.type;

            var _finalRequiredPerms = finalRequiredPerms(requiredPermissions, available, availableKeys),
                _finalRequiredPerms2 = _slicedToArray(_finalRequiredPerms, 2),
                finalRequired = _finalRequiredPerms2[0],
                finalRequiredKeys = _finalRequiredPerms2[1];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ProposalApproveModal, _extends({}, this.props, {
                type: type,
                accounts: action === "approve" ? finalRequired : available,
                keys: action === "approve" ? finalRequiredKeys : availableKeys
            }));
        }
    }]);

    return FirstLevel;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

FirstLevel.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccount.isRequired,
    proposal: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainObject.isRequired
};

FirstLevel = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(FirstLevel);

var ModalWrapper = function (_React$Component3) {
    _inherits(ModalWrapper, _React$Component3);

    function ModalWrapper() {
        _classCallCheck(this, ModalWrapper);

        var _this4 = _possibleConstructorReturn(this, (ModalWrapper.__proto__ || Object.getPrototypeOf(ModalWrapper)).call(this));

        _this4.state = {
            open: false
        };
        return _this4;
    }

    _createClass(ModalWrapper, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this5 = this;

            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default.a.subscribe(this.props.modalId, function (msg, data) {
                _this5.setState({
                    open: data === "open"
                });
            });
        }
    }, {
        key: "show",
        value: function show() {
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default.a.publish(this.props.modalId, "open");
        }
    }, {
        key: "render",
        value: function render() {
            var _props3 = this.props,
                modalId = _props3.modalId,
                proposal = _props3.proposal;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                _BaseModal__WEBPACK_IMPORTED_MODULE_2__["default"],
                { id: modalId, overlay: true, ref: modalId },
                this.state.open ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block vertical" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FirstLevel, this.props)
                ) : null
            );
        }
    }]);

    return ModalWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (ModalWrapper);

/***/ }),

/***/ 2573:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(582);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1833);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1834);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2304);
/* harmony import */ var common_permission_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2574);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(407);
/* harmony import */ var _NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2575);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__);


var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var AccountPermissionTree = function (_React$Component) {
    _inherits(AccountPermissionTree, _React$Component);

    function AccountPermissionTree(props) {
        _classCallCheck(this, AccountPermissionTree);

        var _this = _possibleConstructorReturn(this, (AccountPermissionTree.__proto__ || Object.getPrototypeOf(AccountPermissionTree)).call(this, props));

        _this.handleExpandToggle = function () {
            _this.setState({ expanded: !_this.state.expanded });
        };

        _this.state = { expanded: !!props.expanded };
        return _this;
    }

    _createClass(AccountPermissionTree, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                account = _props.account,
                available = _props.available,
                availableKeys = _props.availableKeys,
                permission = _props.permission,
                threshold = _props.threshold,
                level = _props.level,
                maxAuthorityDepth = _props.maxAuthorityDepth,
                hideRoot = _props.hideRoot;
            var expanded = this.state.expanded;


            var isOK = Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["isApproved"])(permission, available, availableKeys);
            var isNested = permission.isNested();
            var isMultiSig = permission.isMultiSig();

            var notNestedWeight = Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["notNestdWeight"])(permission.weight, threshold) || 1;

            var nestedWeight = Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["statusText"])(permission, available, availableKeys);

            var authorityDepthOverflow = level >= maxAuthorityDepth;

            var rootPerm = !isNested && !isMultiSig ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    { colSpan: "2" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ApprovedIcon"], { approved: isOK }),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        subpage: "permissions",
                        account: account.get("id")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    null,
                    !isNested && notNestedWeight ? "" + (notNestedWeight && notNestedWeight.length === 2 ? "\xA0\xA0" : "") + notNestedWeight + " " : null
                )
            ) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    { colSpan: "2" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ApprovedIcon"], { approved: isOK }),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        subpage: "permissions",
                        account: account.get("id")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    null,
                    expanded ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        { className: isOK ? "success-text" : "" },
                        notNestedWeight
                    ) : notNestedWeight && "" + (notNestedWeight && notNestedWeight.length === 2 ? "\xA0\xA0" : "") + notNestedWeight + " ",
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ExpandButton"], {
                        onToggle: this.handleExpandToggle,
                        expanded: expanded
                    }),
                    expanded && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        { className: "appended" },
                        "(",
                        nestedWeight,
                        ")"
                    ),
                    authorityDepthOverflow ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["AuthorityDepthOverflowWarning"], null) : Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["hasAuthorityDepthProblem"])(maxAuthorityDepth, permission, level) && !expanded && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ChildAuthorityDepthOverflowWarning"], null)
                )
            );

            var status = [];

            if ((isNested || isMultiSig) && expanded) {
                permission.accounts.forEach(function (subAccount) {
                    status.push(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(BoundAccountPermissionTree, {
                        key: subAccount.id,
                        account: subAccount.id,
                        accounts: subAccount.accounts,
                        permission: subAccount,
                        available: available,
                        availableKeys: availableKeys,
                        threshold: permission.threshold,
                        level: level + 1,
                        maxAuthorityDepth: maxAuthorityDepth
                    }));
                });

                if (permission.keys.length) {
                    permission.keys.forEach(function (key) {
                        return status.push(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["KeyPermissionBranch"], {
                            key: key.id,
                            permission: key,
                            available: availableKeys,
                            level: level + (hideRoot ? 0 : 1),
                            weight: Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["notNestdWeight"])(key.weight, threshold)
                        }));
                    });
                }
            }

            return status.length > 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tbody",
                null,
                hideRoot || rootPerm,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "tr",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { colSpan: "3", className: "heading-perm" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: hideRoot ? "" : "table-container" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "table",
                                null,
                                status
                            )
                        ),
                        expanded && level === 0 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "spacer" })
                    )
                )
            ) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tbody",
                null,
                rootPerm
            );
        }
    }]);

    return AccountPermissionTree;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

AccountPermissionTree.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccount.isRequired,
    accounts: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccountsList,
    level: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.number.isRequired
};
AccountPermissionTree.defaultProps = {
    level: 0
};

var BoundAccountPermissionTree = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(AccountPermissionTree);

var FirstLevel = function (_React$Component2) {
    _inherits(FirstLevel, _React$Component2);

    function FirstLevel(props) {
        _classCallCheck(this, FirstLevel);

        var _this2 = _possibleConstructorReturn(this, (FirstLevel.__proto__ || Object.getPrototypeOf(FirstLevel)).call(this, props));

        _this2.handleExpandToggle = function () {
            return _this2.setState({ expanded: !_this2.state.expanded });
        };

        _this2.state = {
            requiredPermissions: [],
            expanded: props.expanded
        };

        _this2._updateState = _this2._updateState.bind(_this2);
        return _this2;
    }

    _createClass(FirstLevel, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this._updateState();

            bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].subscribe(this._updateState);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].unsubscribe(this._updateState);
        }
    }, {
        key: "_updateState",
        value: function _updateState() {
            var required = common_permission_utils__WEBPACK_IMPORTED_MODULE_5__["default"].listToIDs(this.props.required);
            var available = common_permission_utils__WEBPACK_IMPORTED_MODULE_5__["default"].listToIDs(this.props.available);

            this.setState({
                requiredPermissions: common_permission_utils__WEBPACK_IMPORTED_MODULE_5__["default"].unnest(required, this.props.type),
                required: required,
                available: available
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props2 = this.props,
                type = _props2.type,
                added = _props2.added,
                removed = _props2.removed,
                availableKeys = _props2.availableKeys,
                globalObject = _props2.globalObject,
                reviewPeriodTime = _props2.reviewPeriodTime,
                noFail = _props2.noFail;
            var _state = this.state,
                requiredPermissions = _state.requiredPermissions,
                required = _state.required,
                available = _state.available,
                expanded = _state.expanded;


            available = Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__["default"])(available);
            availableKeys = availableKeys.toJS();

            if (added) {
                available.push(added);
                availableKeys.push(added);
            }

            if (removed) {
                if (available.indexOf(removed) !== -1) {
                    available.splice(available.indexOf(removed), 1);
                }
                if (availableKeys.indexOf(removed) !== -1) {
                    availableKeys.splice(availableKeys.indexOf(removed), 1);
                }
            }

            var approvedCount = requiredPermissions.reduce(function (total, perm) {
                return total + (Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["isApproved"])(perm, available, availableKeys) ? 1 : 0);
            }, 0);
            var approversCount = requiredPermissions.length;
            var isOK = approvedCount === approversCount;

            var failed = isOK && !reviewPeriodTime && !noFail;
            var pendingReview = isOK && reviewPeriodTime;

            var maxAuthorityDepth = globalObject.get("parameters").get("max_authority_depth");

            var onePerm = requiredPermissions.length === 1;
            var oPermission = onePerm ? requiredPermissions[0] : null;

            var nestedWeight = !onePerm && approvedCount + " / " + approversCount;

            var rows = requiredPermissions.map(function (account) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(BoundAccountPermissionTree, {
                    key: account.id,
                    account: account.id,
                    accounts: account.accounts,
                    permission: account,
                    available: available,
                    availableKeys: availableKeys,
                    expanded: _this3.props.expanded || onePerm,
                    level: 0,
                    maxAuthorityDepth: maxAuthorityDepth,
                    hideRoot: onePerm
                });
            });

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "div",
                { className: "nested-approval-state" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "root-status" },
                    failed ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["Failed"], null) : pendingReview ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["Review"], null) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["Pending"], null),
                    " ",
                    !oPermission ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        null,
                        "(",
                        nestedWeight,
                        ")"
                    ) : oPermission.threshold > 1 && Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["statusText"])(oPermission, available, availableKeys),
                    (!oPermission || oPermission.isMultiSig() || oPermission.isNested()) && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ExpandButton"], {
                        onToggle: this.handleExpandToggle,
                        expanded: expanded
                    }),
                    !expanded && requiredPermissions.some(function (permission) {
                        return Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["hasAuthorityDepthProblem"])(maxAuthorityDepth, permission, 0);
                    }) && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ChildAuthorityDepthOverflowWarning"], null)
                ),
                expanded && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "table",
                    null,
                    rows
                )
            );
        }
    }]);

    return FirstLevel;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

FirstLevel.propTypes = {
    required: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccountsList,
    available: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccountsList
};
FirstLevel.defaultProps = {
    type: "active",
    added: null,
    removed: null
};

FirstLevel = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(FirstLevel);

var ProposalWrapper = function (_React$Component3) {
    _inherits(ProposalWrapper, _React$Component3);

    function ProposalWrapper() {
        _classCallCheck(this, ProposalWrapper);

        return _possibleConstructorReturn(this, (ProposalWrapper.__proto__ || Object.getPrototypeOf(ProposalWrapper)).apply(this, arguments));
    }

    _createClass(ProposalWrapper, [{
        key: "render",
        value: function render() {
            var _props3 = this.props,
                proposal = _props3.proposal,
                type = _props3.type;

            var available = proposal.get("available_" + type + "_approvals");
            var availableKeys = proposal.get("available_key_approvals");
            var required = proposal.get("required_" + type + "_approvals");

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(FirstLevel, _extends({}, this.props, {
                required: required,
                available: available,
                availableKeys: availableKeys,
                reviewPeriodTime: proposal.get("review_period_time")
            }));
        }
    }]);

    return ProposalWrapper;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

ProposalWrapper.propTypes = {
    proposal: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainObject.isRequired,
    type: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.string.isRequired,
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainObject.isRequired
};
ProposalWrapper.defaultProps = {
    type: "active",
    added: null,
    globalObject: "2.0.0"
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(ProposalWrapper));

/***/ }),

/***/ 2574:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(407);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);



var KeyAuth = function KeyAuth(auth) {
    var _this = this;

    this.id = auth.toJS ? auth.get(0) : auth[0];
    this.weight = auth.toJS ? auth.get(1) : auth[1];

    this.isAvailable = function (auths) {
        return auths.includes ? auths.includes(_this.id) : auths.indexOf(_this) !== -1;
    };
};

var permissionUtils = {
    AccountPermission: function AccountPermission(account, weight, type) {
        var _this2 = this;

        this.id = account.get("id");
        this.weight = weight;
        this.threshold = account.getIn([type, "weight_threshold"]);
        this.accounts = [];
        this.keys = account.getIn([type, "key_auths"]).map(function (auth) {
            return new KeyAuth(auth);
        }).toArray();

        this.isAvailable = function (auths) {
            return auths.includes ? auths.includes(_this2.id) : auths.indexOf(_this2) !== -1;
        };

        this._sumWeights = function (auths) {
            if (!_this2.isNested() && !_this2.isMultiSig()) {
                return _this2.isAvailable(auths) ? _this2.weight : 0;
            } else {
                var sum = _this2.accounts.reduce(function (status, account) {
                    return status + (account._sumWeights(auths) ? account.weight : 0);
                }, 0);

                return Math.floor(sum / _this2.threshold);
            }
        };

        this.getStatus = function (auths, keyAuths) {
            if (!_this2.isNested()) {
                var sum = _this2._sumWeights(auths);
                if (_this2.isMultiSig()) {
                    sum += _this2.sumKeys(keyAuths);
                }
                return sum;
            } else {
                var _sum = _this2.accounts.reduce(function (status, account) {
                    return status + account._sumWeights(auths);
                }, 0);

                if (_this2.keys.length) {
                    _sum += _this2.sumKeys(keyAuths);
                }

                return _sum;
            }
        };

        this.sumKeys = function (keyAuths) {
            var keySum = _this2.keys.reduce(function (s, key) {
                return s + (key.isAvailable(keyAuths) ? key.weight : 0);
            }, 0);
            return keySum;
        };

        this.isNested = function () {
            return _this2.accounts.length > 0;
        };

        this.isMultiSig = function () {
            return _this2.keys.reduce(function (final, key) {
                return final || key.weight < _this2.threshold;
            }, false);
        };

        this.getMissingSigs = function (auths) {
            var missing = [];
            var nested = [];
            if (_this2.isNested()) {
                nested = _this2.accounts.reduce(function (a, account) {
                    return a.concat(account.getMissingSigs(auths));
                }, []);
            } else if (!_this2.isAvailable(auths)) {
                missing.push(_this2.id);
            }

            return missing.concat(nested);
        };

        this.getMissingKeys = function (auths) {
            var missing = [];
            var nested = [];
            if (_this2.keys.length && (_this2.isNested() || _this2.isMultiSig())) {
                _this2.keys.forEach(function (key) {
                    if (!key.isAvailable(auths)) {
                        missing.push(key.id);
                    }
                });
            }

            if (_this2.isNested()) {
                nested = _this2.accounts.reduce(function (a, account) {
                    return a.concat(account.getMissingKeys(auths));
                }, []);
            }

            return missing.concat(nested);
        };
    },

    listToIDs: function listToIDs(accountList) {
        var allAccounts = [];

        accountList.forEach(function (account) {
            if (account) {
                allAccounts.push(account.get ? account.get("id") : account);
            }
        });

        return allAccounts;
    },

    unravel: function unravel(accountPermission, type) {
        var _this3 = this;

        var recursive_count = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

        if (recursive_count < 3) {
            var account = bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["ChainStore"].getAccount(accountPermission.id);
            if (account && account.getIn([type, "account_auths"]).size) {
                account.getIn([type, "account_auths"]).forEach(function (auth) {
                    var nestedAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["ChainStore"].getAccount(auth.get(0));
                    if (nestedAccount) {
                        accountPermission.accounts.push(_this3.unravel(new _this3.AccountPermission(nestedAccount, auth.get(1), type), type, recursive_count + 1));
                    }
                });
            }
        }

        return accountPermission;
    },

    unnest: function unnest(accounts, type) {
        var _this4 = this;

        var map = [];
        accounts.forEach(function (id) {
            var fullAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["ChainStore"].getAccount(id);
            var currentPermission = _this4.unravel(new _this4.AccountPermission(fullAccount, null, type), type);
            map.push(currentPermission);
        });

        return map;
    },

    flatten_auths: function flatten_auths(auths) {
        var existingAuths = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List();

        if (!auths.size) {
            return existingAuths;
        }

        auths.forEach(function (owner) {
            if (!existingAuths.includes(owner.get(0))) {
                existingAuths = existingAuths.push(owner.get(0));
            }
        });
        return existingAuths;
    }
};

/* harmony default export */ __webpack_exports__["default"] = (permissionUtils);

/***/ }),

/***/ 2575:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tooltip", function() { return Tooltip; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthorityDepthOverflowWarning", function() { return AuthorityDepthOverflowWarning; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChildAuthorityDepthOverflowWarning", function() { return ChildAuthorityDepthOverflowWarning; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Pending", function() { return Pending; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Review", function() { return Review; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Failed", function() { return Failed; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExpandButton", function() { return ExpandButton; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ApprovedIcon", function() { return ApprovedIcon; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KeyPermissionBranch", function() { return KeyPermissionBranch; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAuthorityDepthProblem", function() { return hasAuthorityDepthProblem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getStatus", function() { return getStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isApproved", function() { return isApproved; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "statusText", function() { return statusText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "notNestdWeight", function() { return notNestdWeight; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(774);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2239);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(558);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_5__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








var Tooltip = function (_React$Component) {
    _inherits(Tooltip, _React$Component);

    function Tooltip() {
        _classCallCheck(this, Tooltip);

        return _possibleConstructorReturn(this, (Tooltip.__proto__ || Object.getPrototypeOf(Tooltip)).apply(this, arguments));
    }

    _createClass(Tooltip, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            react_tooltip__WEBPACK_IMPORTED_MODULE_2___default.a.rebuild();
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                className = _props.className,
                children = _props.children,
                dataTip = _props.dataTip,
                content = _props.content;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                {
                    className: "tooltip " + className,
                    "data-html": true,
                    "data-tip": dataTip || counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate(content)
                },
                children
            );
        }
    }]);

    return Tooltip;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var AuthorityDepthOverflowWarning = function AuthorityDepthOverflowWarning() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        {
            className: "error appended",
            content: "explorer.proposals.authority_depth_warning"
        },
        "/!\\"
    );
};

var ChildAuthorityDepthOverflowWarning = function ChildAuthorityDepthOverflowWarning() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        {
            className: "error appended",
            content: "explorer.proposals.children_authority_depth_warning"
        },
        "/!\\"
    );
};

var Pending = function Pending() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        { className: "warning", content: "explorer.proposals.pending_approval" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "explorer.proposals.pending" })
    );
};

var Review = function Review() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        { className: "warning", content: "explorer.proposals.pending_review" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "explorer.proposals.review" })
    );
};

var Failed = function Failed() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        { className: "error", content: "explorer.proposals.failed_execute" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "explorer.proposals.failed" })
    );
};

var ExpandButton = function ExpandButton(_ref) {
    var onToggle = _ref.onToggle,
        expanded = _ref.expanded;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "a",
        { className: "expand-button", onClick: onToggle },
        "[",
        expanded ? "-" : "+",
        "]"
    );
};

var ApprovedIcon = function ApprovedIcon(_ref2) {
    var approved = _ref2.approved;
    return approved ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_1__["default"], {
        name: "checkmark-circle",
        size: "1x",
        className: "success",
        title: "icons.checkmark_circle.operation_succeed"
    }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_1__["default"], {
        name: "cross-circle",
        size: "1x",
        className: "error",
        title: "icons.cross_circle.operation_failed"
    });
};

var KeyPermissionBranch = function KeyPermissionBranch(_ref3) {
    var available = _ref3.available,
        permission = _ref3.permission,
        weight = _ref3.weight,
        level = _ref3.level;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "tbody",
        null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "tr",
            null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "td",
                { colSpan: "2" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ApprovedIcon, { approved: permission.isAvailable(available) }),
                permission.id.substr(0, 20 - 4 * level),
                "..."
            ),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "td",
                null,
                weight
            )
        )
    );
};

var hasAuthorityDepthProblem = function hasAuthorityDepthProblem(maxAuthorityDepth, permission) {
    var level = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

    if (level > maxAuthorityDepth) {
        return true;
    } else if (!permission.isNested() && !permission.isMultiSig()) {
        return false;
    } else {
        return permission.accounts.some(function (subAccount) {
            return hasAuthorityDepthProblem(maxAuthorityDepth, subAccount, level + 1);
        });
    }
};

var getStatus = function getStatus(permission, available, availableKeys) {
    return permission.accounts.reduce(function (amount, subPermission) {
        return amount + (isApproved(subPermission, available, availableKeys) ? subPermission.weight : 0);
    }, 0) + permission.keys.reduce(function (amount, key) {
        return amount + (key.isAvailable(availableKeys) ? key.weight : 0);
    }, 0);
};

var isApproved = function isApproved(permission, available, availableKeys) {
    return permission.isNested() || permission.isMultiSig() ? getStatus(permission, available, availableKeys) >= permission.threshold : permission.isAvailable(available);
};

var statusText = function statusText(permission, available, availableKeys) {
    return permission && permission.threshold > 10 ? common_utils__WEBPACK_IMPORTED_MODULE_3__["default"].get_percentage(permission.getStatus(available, availableKeys), permission.threshold) + " / 100%" : permission.getStatus(available, availableKeys) + " / " + permission.threshold;
};

var notNestdWeight = function notNestdWeight(weight, threshold) {
    return threshold && threshold > 10 ? common_utils__WEBPACK_IMPORTED_MODULE_3__["default"].get_percentage(weight, threshold) : weight;
};

/***/ }),

/***/ 2576:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Exchange_MyOpenOrders__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2400);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_MarketsActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2237);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(407);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(573);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(760);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(701);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(702);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2235);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2531);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }














var AccountOrders = function (_React$Component) {
    _inherits(AccountOrders, _React$Component);

    function AccountOrders(props) {
        _classCallCheck(this, AccountOrders);

        var _this = _possibleConstructorReturn(this, (AccountOrders.__proto__ || Object.getPrototypeOf(AccountOrders)).call(this, props));

        _this.state = {
            selectedOrders: [],
            filterValue: ""
        };
        return _this;
    }

    _createClass(AccountOrders, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var cancelHeader = document.getElementById("cancelAllOrders");

            if (cancelHeader) {
                cancelHeader.addEventListener("click", function () {
                    var orders = this._getFilteredOrders.call(this);
                    orders = orders.toJS ? orders.toJS() : orders;

                    this.setState({ selectedOrders: orders });

                    var checkboxes = document.querySelectorAll(".orderCancel");

                    checkboxes.forEach(function (item) {
                        if (!item.checked) item.checked = true;
                    });
                }.bind(this));
            }
        }
    }, {
        key: "_getFilteredOrders",
        value: function _getFilteredOrders() {
            var filterValue = this.state.filterValue;


            var orders = this.props.account.get("orders") || [];

            return orders.filter(function (item) {
                var order = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(item).toJS();
                var base = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(order.sell_price.base.asset_id);
                var quote = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(order.sell_price.quote.asset_id);

                var baseSymbol = base.get("symbol").toLowerCase();
                var quoteSymbol = quote.get("symbol").toLowerCase();

                return baseSymbol.indexOf(filterValue) > -1 || quoteSymbol.indexOf(filterValue) > -1;
            });
        }
    }, {
        key: "_cancelLimitOrder",
        value: function _cancelLimitOrder(orderID, e) {
            e.preventDefault();

            actions_MarketsActions__WEBPACK_IMPORTED_MODULE_3__["default"].cancelLimitOrder(this.props.account.get("id"), orderID, // order id to cancel
            false // Don't show normal confirms
            ).catch(function (err) {
                console.log("cancel order error:", err);
            });
        }
    }, {
        key: "_cancelLimitOrders",
        value: function _cancelLimitOrders(orderId) {
            var _this2 = this;

            actions_MarketsActions__WEBPACK_IMPORTED_MODULE_3__["default"].cancelLimitOrders(this.props.account.get("id"), this.state.selectedOrders).then(function () {
                _this2.resetSelected();
            }).catch(function (err) {
                console.log("cancel orders error:", err);
            });
        }
    }, {
        key: "onFlip",
        value: function onFlip(marketId) {
            var setting = {};
            setting[marketId] = !this.props.marketDirections.get(marketId);
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_8__["default"].changeMarketDirection(setting);
        }
    }, {
        key: "onCheckCancel",
        value: function onCheckCancel(orderId, evt) {
            var selectedOrders = this.state.selectedOrders;

            var checked = evt.target.checked;

            if (checked) {
                this.setState({ selectedOrders: selectedOrders.concat([orderId]) });
            } else {
                var index = selectedOrders.indexOf(orderId);

                if (index > -1) {
                    this.setState({
                        selectedOrders: selectedOrders.slice(0, index).concat(selectedOrders.slice(index + 1))
                    });
                }
            }
        }
    }, {
        key: "setFilterValue",
        value: function setFilterValue(evt) {
            this.setState({ filterValue: evt.target.value.toLowerCase() });
        }
    }, {
        key: "resetSelected",
        value: function resetSelected() {
            this.setState({ selectedOrders: [] });

            var checkboxes = document.querySelectorAll(".orderCancel");

            checkboxes.forEach(function (item) {
                if (item.checked) item.checked = false;
            });
        }
    }, {
        key: "cancelSelected",
        value: function cancelSelected() {
            this._cancelLimitOrders.call(this);
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props = this.props,
                account = _props.account,
                marketDirections = _props.marketDirections;
            var _state = this.state,
                filterValue = _state.filterValue,
                selectedOrders = _state.selectedOrders;

            var cancel = counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("account.perm.cancel");
            var markets = {};

            var marketOrders = {};

            if (!account.get("orders")) {
                return null;
            }

            var orders = account.get("orders");
            var ordersCount = orders.size;
            if (filterValue) {
                orders = this._getFilteredOrders.call(this);
            }

            orders.forEach(function (orderID) {
                var order = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(orderID).toJS();
                var base = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(order.sell_price.base.asset_id);
                var quote = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(order.sell_price.quote.asset_id);

                if (base && quote) {
                    var _assets;

                    var assets = (_assets = {}, _defineProperty(_assets, base.get("id"), { precision: base.get("precision") }), _defineProperty(_assets, quote.get("id"), { precision: quote.get("precision") }), _assets);
                    // let baseID = parseInt(order.sell_price.base.asset_id.split(".")[2], 10);
                    // let quoteID = parseInt(order.sell_price.quote.asset_id.split(".")[2], 10);

                    // let marketName = quoteID > baseID ? `${quote.get("symbol")}_${base.get("symbol")}` : `${base.get("symbol")}_${quote.get("symbol")}`;

                    var _marketUtils$getMarke = common_market_utils__WEBPACK_IMPORTED_MODULE_9__["default"].getMarketName(base, quote),
                        marketName = _marketUtils$getMarke.marketName;

                    var direction = marketDirections.get(marketName);

                    if (!markets[marketName]) {
                        if (direction) {
                            markets[marketName] = {
                                base: {
                                    id: base.get("id"),
                                    symbol: base.get("symbol"),
                                    precision: base.get("precision")
                                },
                                quote: {
                                    id: quote.get("id"),
                                    symbol: quote.get("symbol"),
                                    precision: quote.get("precision")
                                }
                            };
                        } else {
                            markets[marketName] = {
                                base: {
                                    id: quote.get("id"),
                                    symbol: quote.get("symbol"),
                                    precision: quote.get("precision")
                                },
                                quote: {
                                    id: base.get("id"),
                                    symbol: base.get("symbol"),
                                    precision: base.get("precision")
                                }
                            };
                        }
                    }
                    var limitOrder = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_5__["LimitOrder"](order, assets, markets[marketName].quote.id);

                    var marketBase = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(markets[marketName].base.id);
                    var marketQuote = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(markets[marketName].quote.id);

                    if (!marketOrders[marketName]) {
                        marketOrders[marketName] = [];
                    }

                    marketOrders[marketName].push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Exchange_MyOpenOrders__WEBPACK_IMPORTED_MODULE_1__["OrderRow"], {
                        ref: markets[marketName].base.symbol,
                        key: order.id,
                        order: limitOrder,
                        base: marketBase,
                        quote: marketQuote,
                        cancel_text: cancel,
                        showSymbols: false,
                        invert: true,
                        onCancel: _this3._cancelLimitOrder.bind(_this3, order.id),
                        price: limitOrder.getPrice(),
                        dashboard: true,
                        isMyAccount: _this3.props.isMyAccount,
                        settings: _this3.props.settings,
                        onFlip: _this3.onFlip.bind(_this3, marketName),
                        onCheckCancel: _this3.onCheckCancel.bind(_this3, order.id)
                    }));
                }
            });

            var tables = [];

            for (var market in marketOrders) {
                if (marketOrders[market].length) {
                    tables = tables.concat(marketOrders[market].sort(function (a, b) {
                        return a.props.price - b.props.price;
                    }));
                    // tables.push(
                    //     <tbody key={market}>
                    //         {/* {marketIndex > 0 ? <tr><td colSpan={this.props.isMyAccount ? "7" : "6"}><span style={{visibility: "hidden"}}>H</span></td></tr> : null} */}
                    //         {marketOrders[market].sort((a, b) => {
                    //             return a.props.price - b.props.price;
                    //         })}
                    //     </tbody>
                    // );
                    // marketIndex++;
                }
            }

            // tables.sort((a, b) => {
            //     return parseInt(a.key, 10) - parseInt(b.key, 10);
            // })

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                {
                    className: "grid-content no-overflow no-padding",
                    style: { paddingBottom: 15 }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "header-selector" },
                    orders && ordersCount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "text",
                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("account.filter_orders"),
                        style: {
                            display: "inline-block",
                            maxWidth: "50%",
                            marginRight: "1em",
                            marginBottom: "0"
                        },
                        onChange: this.setFilterValue.bind(this)
                    }) : null,
                    selectedOrders.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            className: "button",
                            onClick: this.resetSelected.bind(this)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_10___default.a, { content: "account.reset_orders" })
                    ) : null,
                    selectedOrders.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            className: "button",
                            onClick: this.cancelSelected.bind(this)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_10___default.a, { content: "account.submit_orders" })
                    ) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_11__["default"], {
                    pageSize: 20,
                    className: "table table-striped dashboard-table table-hover",
                    header: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Exchange_MyOpenOrders__WEBPACK_IMPORTED_MODULE_1__["TableHeader"], {
                        settings: this.props.settings,
                        dashboard: true,
                        isMyAccount: this.props.isMyAccount
                    }),
                    rows: tables,
                    extraRow: this.props.children
                })
            );
        }
    }]);

    return AccountOrders;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountOrders = Object(alt_react__WEBPACK_IMPORTED_MODULE_6__["connect"])(AccountOrders, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_7__["default"]];
    },
    getProps: function getProps() {
        return {
            marketDirections: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_7__["default"].getState().marketDirections
        };
    }
});

/* harmony default export */ __webpack_exports__["default"] = (AccountOrders);

/***/ }),

/***/ 2577:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkMarginStatus", function() { return checkMarginStatus; });
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(407);
/* harmony import */ var _MarketClasses__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(573);



var asyncCache = {};
var checkMarginStatusTTL = 60000 * 1; // 1 minute

function checkMarginStatus(account) {
    if (!account || account && !account.get("call_orders", []).size) return Promise.resolve(null);

    var key = account.get("name") + JSON.stringify(account.get("call_orders"));
    if (asyncCache[key]) {
        if (asyncCache[key].result) {
            return Promise.resolve(asyncCache[key].result);
        }
        return new Promise(function (res, rej) {
            asyncCache[key].queue.push({ res: res, rej: rej });
        });
    }
    return new Promise(function (res, rej) {
        asyncCache[key] = { queue: [{ res: res, rej: rej }], result: null };

        Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["FetchChain"])("getObject", account.get("call_orders").toArray()).then(function (call_orders) {
            var assets = [];
            call_orders.forEach(function (a) {
                var baseId = a.getIn(["call_price", "base", "asset_id"]);
                var quoteId = a.getIn(["call_price", "quote", "asset_id"]);
                if (assets.indexOf(baseId) === -1) assets.push(baseId);
                if (assets.indexOf(quoteId) === -1) assets.push(quoteId);
            });
            Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["FetchChain"])("getAsset", assets, 6000).then(function (assets) {
                var assetsMap = {};
                assets.forEach(function (asset) {
                    assetsMap[asset.get("id")] = asset.toJS();
                });
                var status = {};
                call_orders.forEach(function (co) {
                    var debtAsset = assetsMap[co.getIn(["call_price", "quote", "asset_id"])];
                    var collateralAsset = assetsMap[co.getIn(["call_price", "base", "asset_id"])];
                    var sp = debtAsset.bitasset.current_feed.settlement_price;
                    if (sp.base.asset_id === sp.quote.asset_id) {
                        status[debtAsset.id] = { ratio: null };
                    } else {
                        var collateral = new _MarketClasses__WEBPACK_IMPORTED_MODULE_1__["Asset"]({
                            amount: co.get("collateral"),
                            asset_id: collateralAsset.id,
                            precision: collateralAsset.precision
                        });
                        var debt = new _MarketClasses__WEBPACK_IMPORTED_MODULE_1__["Asset"]({
                            amount: co.get("debt"),
                            asset_id: debtAsset.id,
                            precision: debtAsset.precision
                        });
                        var mr = debtAsset.bitasset.current_feed.maintenance_collateral_ratio / 1000;
                        var price = new _MarketClasses__WEBPACK_IMPORTED_MODULE_1__["FeedPrice"]({
                            priceObject: debtAsset.bitasset.current_feed.settlement_price,
                            market_base: debtAsset.bitasset.current_feed.settlement_price.quote.asset_id,
                            sqr: debtAsset.bitasset.current_feed.maximum_short_squeeze_ratio,
                            assets: assetsMap
                        });
                        var current = {
                            ratio: collateral.getAmount({ real: true }) / (debt.getAmount({ real: true }) / price.toReal())
                        };
                        if (isNaN(current.ratio)) return null;
                        if (current.ratio < mr) {
                            current.statusClass = "danger";
                        } else if (current.ratio < mr + 0.5) {
                            current.statusClass = "warning";
                        } else {
                            current.statusClass = null;
                        }
                        status[debtAsset.id] = current;
                    }
                });
                asyncCache[key].queue.forEach(function (promise) {
                    promise.res(status);
                });
                asyncCache[key] = { result: status };
                setTimeout(function () {
                    delete asyncCache[key];
                }, checkMarginStatusTTL);
            });
        }).catch(function () {
            asyncCache[key].queue.forEach(function (promise) {
                promise.rej();
            });
        });
    });
}



/***/ }),

/***/ 2578:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_highcharts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2500);
/* harmony import */ var react_highcharts__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_highcharts__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2579);
/* harmony import */ var highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2580);
/* harmony import */ var highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(558);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1833);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(407);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1834);
/* harmony import */ var alt_container__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1821);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2235);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2236);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(701);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }














highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2___default()(react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts);
highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3___default()(react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts);

var AccountTreemap = function (_React$Component) {
    _inherits(AccountTreemap, _React$Component);

    function AccountTreemap() {
        _classCallCheck(this, AccountTreemap);

        return _possibleConstructorReturn(this, (AccountTreemap.__proto__ || Object.getPrototypeOf(AccountTreemap)).apply(this, arguments));
    }

    _createClass(AccountTreemap, [{
        key: "render",


        // shouldComponentUpdate(nextProps) {
        //     return (
        //         !utils.are_equal_shallow(nextProps.balanceObjects, this.props.balanceObjects) ||
        //         !utils.are_equal_shallow(nextProps.assets, this.props.assets)
        //     );
        // }

        value: function render() {
            var _props = this.props,
                balanceObjects = _props.balanceObjects,
                core_asset = _props.core_asset,
                marketStats = _props.marketStats,
                preferredAsset = _props.preferredAsset;


            var accountBalances = null;

            if (balanceObjects && balanceObjects.length > 0) {
                var totalValue = 0;
                accountBalances = balanceObjects.forEach(function (balance) {
                    if (!balance) return;
                    var balanceObject = typeof balance == "string" ? bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getObject(balance) : balance;
                    var asset_type = balanceObject.get("asset_type");
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(asset_type);
                    if (!asset || !preferredAsset) return;
                    var amount = Number(balanceObject.get("balance"));
                    var eqValue = common_market_utils__WEBPACK_IMPORTED_MODULE_9__["default"].convertValue(amount, preferredAsset, asset, marketStats, core_asset);

                    if (!eqValue) return;
                    var precision = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_precision(preferredAsset.get("precision"));
                    totalValue += eqValue / precision;
                });

                accountBalances = balanceObjects.map(function (balance, index) {
                    if (!balance) return null;
                    var balanceObject = typeof balance == "string" ? bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getObject(balance) : balance;
                    var asset_type = balanceObject.get("asset_type");
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(asset_type);
                    if (!asset) return null;
                    var amount = Number(balanceObject.get("balance"));

                    var eqValue = common_market_utils__WEBPACK_IMPORTED_MODULE_9__["default"].convertValue(amount, preferredAsset, asset, marketStats, core_asset);

                    if (!eqValue) {
                        return null;
                    }

                    var precision = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_precision(preferredAsset.get("precision"));
                    var finalValue = eqValue / precision;
                    var percent = finalValue / totalValue * 100;

                    /*
                    * Filter out assets that make up a small percentage of
                    * the total value of the account
                    */
                    if (percent < 0.5) return null;

                    return finalValue >= 1 ? {
                        name: asset.get("symbol") + " (" + (totalValue === 0 ? 0 : percent.toFixed(2)) + "%)",
                        value: finalValue,
                        color: react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts.getOptions().colors[index]
                    } : null;
                }).filter(function (n) {
                    return !!n;
                });
            }

            if (accountBalances && accountBalances.length === 1 && accountBalances[0].value === 0) {
                accountBalances = null;
            }

            var config = {
                chart: {
                    backgroundColor: "rgba(255, 0, 0, 0)",
                    height: 250,
                    spacingLeft: 0,
                    spacingRight: 0,
                    spacingBottom: 0
                },
                // colorAxis: {
                //     min: 0,
                //     minColor: "#ffffff",
                //     maxColor: ReactHighcharts.Highcharts.getOptions().colors[0]
                // },
                credits: {
                    enabled: false
                },
                legend: {
                    enabled: false
                },
                plotOptions: {
                    treemap: {
                        animation: false,
                        tooltip: {
                            pointFormatter: function pointFormatter() {
                                return "<b>" + this.name + "</b>: " + react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts.numberFormat(this.value, 0) + " " + preferredAsset.get("symbol");
                            }
                        }
                    }
                },
                series: [{
                    type: "treemap",
                    levels: [{
                        level: 1,
                        layoutAlgorithm: "sliceAndDice",
                        dataLabels: {
                            enabled: true,
                            align: "center",
                            verticalAlign: "middle"
                        }
                    }],
                    data: accountBalances
                }],
                title: {
                    text: null
                }
            };

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "account-treemap" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a, { config: config })
            );
        }
    }]);

    return AccountTreemap;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountTreemap.propTypes = {
    assets: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAssetsList,
    preferredAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAsset.isRequired
};
AccountTreemap.defaultProps = {
    assets: [],
    preferredAsset: "1.3.0"
};


AccountTreemap = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(AccountTreemap);

var AccountTreemapBalanceWrapper = function (_React$Component2) {
    _inherits(AccountTreemapBalanceWrapper, _React$Component2);

    function AccountTreemapBalanceWrapper() {
        _classCallCheck(this, AccountTreemapBalanceWrapper);

        return _possibleConstructorReturn(this, (AccountTreemapBalanceWrapper.__proto__ || Object.getPrototypeOf(AccountTreemapBalanceWrapper)).apply(this, arguments));
    }

    _createClass(AccountTreemapBalanceWrapper, [{
        key: "render",
        value: function render() {
            var assets = this.props.balanceObjects.filter(function (a) {
                return !!a;
            }).map(function (a) {
                return a.get("asset_type");
            });
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountTreemap, _extends({
                preferredAsset: this.props.settings.get("unit", "1.3.0"),
                assets: assets
            }, this.props));
        }
    }]);

    return AccountTreemapBalanceWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountTreemapBalanceWrapper.propTypes = {
    balanceObjects: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainObjectsList,
    core_asset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAsset.isRequired
};
AccountTreemapBalanceWrapper.defaultProps = {
    balanceObjects: [],
    core_asset: "1.3.0"
};


AccountTreemapBalanceWrapper = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(AccountTreemapBalanceWrapper);

var AccountTreemapWrapper = function (_React$Component3) {
    _inherits(AccountTreemapWrapper, _React$Component3);

    function AccountTreemapWrapper() {
        _classCallCheck(this, AccountTreemapWrapper);

        return _possibleConstructorReturn(this, (AccountTreemapWrapper.__proto__ || Object.getPrototypeOf(AccountTreemapWrapper)).apply(this, arguments));
    }

    _createClass(AccountTreemapWrapper, [{
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                alt_container__WEBPACK_IMPORTED_MODULE_8__["default"],
                {
                    stores: [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_11__["default"], stores_MarketsStore__WEBPACK_IMPORTED_MODULE_10__["default"]],
                    inject: {
                        marketStats: function marketStats() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_10__["default"].getState().allMarketStats;
                        },
                        settings: function settings() {
                            return stores_SettingsStore__WEBPACK_IMPORTED_MODULE_11__["default"].getState().settings;
                        }
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountTreemapBalanceWrapper, _extends({}, this.props, {
                    ref: this.props.refCallback
                }))
            );
        }
    }]);

    return AccountTreemapWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountTreemapWrapper);

/***/ }),

/***/ 2581:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_debounce_render__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2455);
/* harmony import */ var react_debounce_render__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_debounce_render__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2201);
/* harmony import */ var _Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2439);
/* harmony import */ var _Utility_MarketChangeComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2582);
/* harmony import */ var _Utility_AssetImage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2453);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1987);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(716);
/* harmony import */ var _Utility_EquivalentPrice__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2583);
/* harmony import */ var _Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2305);
/* harmony import */ var _Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2502);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2239);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var common_gatewayUtils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2221);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(407);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(760);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(701);
/* harmony import */ var stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2218);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2236);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(774);
/* harmony import */ var _Icon_PulseIcon__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2584);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(558);
/* harmony import */ var _Modal_SendModal__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(1955);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(702);
/* harmony import */ var _Modal_SettleModal__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(2585);
/* harmony import */ var _Modal_DepositModal__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(2202);
/* harmony import */ var _Dashboard_SimpleDepositWithdraw__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(2458);
/* harmony import */ var _Dashboard_SimpleDepositBlocktradesBridge__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(2459);
/* harmony import */ var _Modal_WithdrawModalNew__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(2252);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(709);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_29__);
/* harmony import */ var _Modal_ReserveAssetModal__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(2586);
/* harmony import */ var _Modal_BaseModal__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(1960);
/* harmony import */ var _Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(2531);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(2235);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }




































var AccountPortfolioList = function (_React$Component) {
    _inherits(AccountPortfolioList, _React$Component);

    function AccountPortfolioList() {
        _classCallCheck(this, AccountPortfolioList);

        var _this = _possibleConstructorReturn(this, (AccountPortfolioList.__proto__ || Object.getPrototypeOf(AccountPortfolioList)).call(this));

        _this.sortFunctions = {
            qty: function qty(a, b, force) {
                if (Number(this.qtyRefs[a.key]) < Number(this.qtyRefs[b.key])) return this.props.sortDirection || force ? -1 : 1;

                if (Number(this.qtyRefs[a.key]) > Number(this.qtyRefs[b.key])) return this.props.sortDirection || force ? 1 : -1;
            },
            alphabetic: function alphabetic(a, b, force) {
                if (a.key > b.key) return this.props.sortDirection || force ? 1 : -1;
                if (a.key < b.key) return this.props.sortDirection || force ? -1 : 1;
                return 0;
            },
            priceValue: function priceValue(a, b) {
                var aPrice = this.priceRefs[a.key];
                var bPrice = this.priceRefs[b.key];
                if (aPrice && bPrice) {
                    return this.props.sortDirection ? aPrice - bPrice : bPrice - aPrice;
                } else if (aPrice === null && bPrice !== null) {
                    return 1;
                } else if (aPrice !== null && bPrice === null) {
                    return -1;
                } else {
                    return this.sortFunctions.alphabetic(a, b, true);
                }
            },
            totalValue: function totalValue(a, b) {
                var aValue = this.valueRefs[a.key];
                var bValue = this.valueRefs[b.key];
                if (aValue && bValue) {
                    return this.props.sortDirection ? aValue - bValue : bValue - aValue;
                } else if (!aValue && bValue) {
                    return 1;
                } else if (aValue && !bValue) {
                    return -1;
                } else {
                    return this.sortFunctions.alphabetic(a, b, true);
                }
            },
            changeValue: function changeValue(a, b) {
                var aValue = this.changeRefs[a.key];
                var bValue = this.changeRefs[b.key];

                if (aValue && bValue) {
                    var aChange = parseFloat(aValue) != "NaN" ? parseFloat(aValue) : aValue;
                    var bChange = parseFloat(bValue) != "NaN" ? parseFloat(bValue) : bValue;
                    var direction = typeof this.props.sortDirection !== "undefined" ? this.props.sortDirection : true;

                    return direction ? aChange - bChange : bChange - aChange;
                }
            }
        };

        _this._renderBuy = function (symbol, canBuy, assetName, emptyCell, balance) {
            if (symbol === "BTS" && balance <= 100000) {
                // Precision of 5, 1 = 10^5
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            onClick: _this._showDepositWithdraw.bind(_this, "bridge_modal", assetName, false)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_PulseIcon__WEBPACK_IMPORTED_MODULE_20__["default"], {
                            onIcon: "dollar",
                            offIcon: "dollar-green",
                            title: "icons.dollar.buy",
                            duration: 1000,
                            className: "icon-14px"
                        })
                    )
                );
            } else {
                return canBuy && _this.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            onClick: _this._showDepositWithdraw.bind(_this, "bridge_modal", assetName, false)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                            name: "dollar",
                            title: "icons.dollar.buy",
                            className: "icon-14px"
                        })
                    )
                ) : emptyCell;
            }
        };

        _this.state = {
            settleAsset: "1.3.0",
            depositAsset: null,
            withdrawAsset: null,
            bridgeAsset: null,
            allRefsAssigned: false
        };

        _this.qtyRefs = {};
        _this.priceRefs = {};
        _this.valueRefs = {};
        _this.changeRefs = {};
        for (var key in _this.sortFunctions) {
            _this.sortFunctions[key] = _this.sortFunctions[key].bind(_this);
        }
        _this._checkRefAssignments = _this._checkRefAssignments.bind(_this);
        return _this;
    }

    _createClass(AccountPortfolioList, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this.refCheckInterval = setInterval(this._checkRefAssignments);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            clearInterval(this.refCheckInterval);
        }
    }, {
        key: "_checkRefAssignments",
        value: function _checkRefAssignments() {
            var _this2 = this;

            /*
            * In order for sorting to work all refs must be assigned, so we check
            * this here and update the state to trigger a rerender
            */
            if (!this.state.allRefsAssigned) {
                var refKeys = ["qtyRefs", "priceRefs", "valueRefs", "changeRefs"];
                var allRefsAssigned = refKeys.reduce(function (a, b) {
                    if (a === undefined) return !!Object.keys(_this2[b]).length;
                    return !!Object.keys(_this2[b]).length && a;
                }, undefined);
                if (allRefsAssigned) {
                    clearInterval(this.refCheckInterval);
                    this.setState({ allRefsAssigned: allRefsAssigned });
                }
            }
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, ns) {
            var _this3 = this;

            return !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(ns, this.state) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.backedCoins, this.props.backedCoins) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.balances, this.props.balances) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.balanceList, this.props.balanceList) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.optionalAssets, this.props.optionalAssets) || np.account !== this.props.account || np.visible !== this.props.visible || np.settings !== this.props.settings || np.hiddenAssets !== this.props.hiddenAssets || np.sortDirection !== this.props.sortDirection || np.sortKey !== this.props.sortKey || np.allMarketStats.reduce(function (a, value, key) {
                return common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].check_market_stats(value, _this3.props.allMarketStats.get(key)) || a;
            }, false);
        }
    }, {
        key: "triggerSend",
        value: function triggerSend(asset) {
            var _this4 = this;

            this.setState({ send_asset: asset }, function () {
                if (_this4.send_modal) _this4.send_modal.show();
            });
        }
    }, {
        key: "_onSettleAsset",
        value: function _onSettleAsset(id, e) {
            e.preventDefault();
            this.setState({
                settleAsset: id
            });

            this.refs.settlement_modal.show();
        }
    }, {
        key: "_hideAsset",
        value: function _hideAsset(asset, status) {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_23__["default"].hideAsset(asset, status);
        }
    }, {
        key: "_burnAsset",
        value: function _burnAsset(asset, e) {
            e.preventDefault();
            this.setState({ reserve: asset });
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_29___default.a.publish("reserve_asset", "open");
        }
    }, {
        key: "_showDepositModal",
        value: function _showDepositModal(asset, e) {
            var _this5 = this;

            e.preventDefault();
            this.setState({ depositAsset: asset }, function () {
                _this5.refs.deposit_modal_new.show();
            });
        }
    }, {
        key: "_showDepositWithdraw",
        value: function _showDepositWithdraw(action, asset, fiatModal, e) {
            var _setState,
                _this6 = this;

            e.preventDefault();
            this.setState((_setState = {}, _defineProperty(_setState, action === "bridge_modal" ? "bridgeAsset" : action === "deposit_modal" ? "depositAsset" : "withdrawAsset", asset), _defineProperty(_setState, "fiatModal", fiatModal), _setState), function () {
                _this6.refs[action].show();
            });
        }
    }, {
        key: "_getSeparator",
        value: function _getSeparator(render) {
            return render ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                "\xA0|\xA0"
            ) : null;
        }
    }, {
        key: "_renderBalances",
        value: function _renderBalances(balanceList, optionalAssets, visible) {
            var _this7 = this;

            var _props = this.props,
                coreSymbol = _props.coreSymbol,
                preferredUnit = _props.preferredUnit,
                settings = _props.settings,
                hiddenAssets = _props.hiddenAssets,
                orders = _props.orders;

            var showAssetPercent = settings.get("showAssetPercent", false);

            var renderBorrow = function renderBorrow(asset, account) {
                var isBitAsset = asset && asset.has("bitasset_data_id");
                var modalRef = "cp_modal_" + asset.get("id");
                return {
                    isBitAsset: isBitAsset,
                    borrowModal: !isBitAsset ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_11__["default"], {
                        ref: modalRef,
                        modalId: "borrow_modal_" + asset.get("id"),
                        quote_asset: asset.get("id"),
                        backing_asset: asset.getIn(["bitasset", "options", "short_backing_asset"]),
                        account: account
                    }),
                    borrowLink: !isBitAsset ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            onClick: function onClick() {
                                react_tooltip__WEBPACK_IMPORTED_MODULE_12___default.a.hide();
                                _this7.refs[modalRef].show();
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                            name: "dollar",
                            title: "icons.dollar.borrow",
                            className: "icon-14px"
                        })
                    )
                };
            };

            var balances = [];
            var emptyCell = "-";
            balanceList.forEach(function (balance) {
                var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getObject(balance);
                if (!balanceObject) return;
                var asset_type = balanceObject.get("asset_type");
                var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getObject(asset_type);
                if (!asset) return;

                var directMarketLink = void 0,
                    settleLink = void 0,
                    transferLink = void 0;
                var symbol = "";

                var assetName = asset.get("symbol");
                var notCore = asset.get("id") !== "1.3.0";
                var notCorePrefUnit = preferredUnit !== coreSymbol;

                var _assetUtils$parseDesc = common_asset_utils__WEBPACK_IMPORTED_MODULE_6__["default"].parseDescription(asset.getIn(["options", "description"])),
                    market = _assetUtils$parseDesc.market;

                symbol = asset.get("symbol");
                if (symbol.indexOf("OPEN.") !== -1 && !market) market = "USD";
                if (["RUDEX.GOLOS", "RUDEX.GBG"].indexOf(symbol) !== -1) market = "RUBLE";
                // let preferredMarket = market ? market : preferredUnit;
                var preferredMarket = market ? market : coreSymbol;

                /* Table content */
                directMarketLink = notCore ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                    { to: "/market/" + asset.get("symbol") + "_" + preferredMarket },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "trade",
                        title: "icons.trade.trade",
                        className: "icon-14px"
                    })
                ) : notCorePrefUnit ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                    { to: "/market/" + asset.get("symbol") + "_" + preferredUnit },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "trade",
                        title: "icons.trade.trade",
                        className: "icon-14px"
                    })
                ) : emptyCell;
                transferLink = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                    { to: "/transfer?asset=" + asset.get("id") },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "transfer",
                        title: "icons.transfer",
                        className: "icon-14px"
                    })
                );

                var _renderBorrow = renderBorrow(asset, _this7.props.account),
                    isBitAsset = _renderBorrow.isBitAsset,
                    borrowModal = _renderBorrow.borrowModal,
                    borrowLink = _renderBorrow.borrowLink;

                /* Popover content */


                settleLink = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "a",
                    { onClick: _this7._onSettleAsset.bind(_this7, asset.get("id")) },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "settle",
                        title: "icons.settle",
                        className: "icon-14px"
                    })
                );

                var includeAsset = !hiddenAssets.includes(asset_type);
                var hasBalance = !!balanceObject.get("balance");
                var hasOnOrder = !!orders[asset_type];

                var backedCoin = Object(common_gatewayUtils__WEBPACK_IMPORTED_MODULE_13__["getBackedCoin"])(asset.get("symbol"), _this7.props.backedCoins);
                // const canDeposit =
                //     (backedCoin && backedCoin.depositAllowed) ||
                //     asset.get("symbol") == "BTS";
                var canDeposit = false; // disable till stable version

                // const canWithdraw =
                //     backedCoin &&
                //     backedCoin.withdrawalAllowed &&
                //     (hasBalance && balanceObject.get("balance") != 0);
                var canWithdraw = false; // disable till stable version

                var canBuy = !!_this7.props.bridgeCoins.get(symbol);
                var assetAmount = balanceObject.get("balance");

                /* Sorting refs */
                _this7.qtyRefs[asset.get("symbol")] = common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].get_asset_amount(assetAmount, asset);

                {
                    /* Asset and Backing Asset Prefixes */
                }
                var options = asset && asset.getIn(["bitasset", "options"]) ? asset.getIn(["bitasset", "options"]).toJS() : null;
                var backingAsset = options && options.short_backing_asset ? bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getAsset(options.short_backing_asset) : null;

                var _utils$replaceName = common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].replaceName(asset),
                    isAssetBitAsset = _utils$replaceName.isBitAsset;

                var _utils$replaceName2 = common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].replaceName(backingAsset),
                    isBackingBitAsset = _utils$replaceName2.isBitAsset;

                var preferredAsset = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getAsset(preferredUnit);
                _this7.valueRefs[asset.get("symbol")] = hasBalance && !!preferredAsset ? common_market_utils__WEBPACK_IMPORTED_MODULE_33__["default"].convertValue(assetAmount, preferredAsset, asset, _this7.props.allMarketStats, _this7.props.coreAsset, true) : null;

                _this7.priceRefs[asset.get("symbol")] = !preferredAsset ? null : common_market_utils__WEBPACK_IMPORTED_MODULE_33__["default"].getFinalPrice(_this7.props.coreAsset, asset, preferredAsset, _this7.props.allMarketStats, true);

                var marketId = asset.get("symbol") + "_" + preferredUnit;
                var currentMarketStats = _this7.props.allMarketStats.get(marketId);
                _this7.changeRefs[asset.get("symbol")] = currentMarketStats && currentMarketStats.change ? currentMarketStats.change : 0;

                balances.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: asset.get("symbol"), style: { maxWidth: "100rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { style: { textAlign: "left" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetImage__WEBPACK_IMPORTED_MODULE_5__["default"], {
                            replaceNoneToBts: false,
                            maxWidth: 30,
                            name: asset.get("symbol")
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_10__["default"], { asset: asset.get("id") })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { style: { textAlign: "right" } },
                        hasBalance || hasOnOrder ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__["default"], { balance: balance, hide_asset: true }) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "right" },
                            className: "column-hide-small"
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentPrice__WEBPACK_IMPORTED_MODULE_9__["default"], {
                            fromAsset: asset.get("id"),
                            pulsate: { reverse: true, fill: "forwards" },
                            hide_symbols: true
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "right" },
                            className: "column-hide-small"
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_MarketChangeComponent__WEBPACK_IMPORTED_MODULE_4__["Market24HourChangeComponent"], {
                            base: asset.get("id"),
                            quote: preferredUnit,
                            marketId: marketId,
                            hide_symbols: true
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "right" },
                            className: "column-hide-small"
                        },
                        hasBalance || hasOnOrder ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_3__["BalanceValueComponent"], {
                            balance: balance,
                            toAsset: preferredUnit,
                            hide_asset: true
                        }) : null
                    ),
                    showAssetPercent ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { style: { textAlign: "right" } },
                        hasBalance ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__["default"], {
                            balance: balance,
                            asPercentage: true
                        }) : null
                    ) : null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        transferLink
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        _this7._renderBuy(asset.get("symbol"), canBuy, assetName, emptyCell, balanceObject.get("balance"))
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        canDeposit && _this7.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                style: { cursor: "pointer" },
                                name: "deposit",
                                title: "icons.deposit.deposit",
                                className: "icon-14x",
                                onClick: _this7._showDepositModal.bind(_this7, assetName)
                            })
                        ) : emptyCell
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        canWithdraw && _this7.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "a",
                                {
                                    className: !canWithdraw ? "disabled" : "",
                                    onClick: canWithdraw ? _this7._showDepositWithdraw.bind(_this7, "withdraw_modal_new", assetName, false) : function () {}
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                    name: "withdraw",
                                    title: "icons.withdraw",
                                    className: "icon-14px"
                                })
                            )
                        ) : emptyCell
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        directMarketLink
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                className: "inline-block",
                                "data-place": "bottom",
                                "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.borrow", { asset: symbol })
                            },
                            borrowLink,
                            borrowModal
                        ) : emptyCell
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        isBitAsset && backingAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                className: "inline-block",
                                "data-place": "bottom",
                                "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.settle", {
                                    asset: isAssetBitAsset ? "bit" + symbol : symbol,
                                    backingAsset: isBackingBitAsset ? "bit" + backingAsset.get("symbol") : backingAsset.get("symbol"),
                                    settleDelay: options.force_settlement_delay_sec / 3600
                                })
                            },
                            settleLink
                        ) : emptyCell
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "center" },
                            className: "column-hide-small"
                        },
                        !isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            {
                                style: { marginRight: 0 },
                                onClick: _this7._burnAsset.bind(_this7, asset.get("id"))
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], { name: "fire", className: "icon-14px" })
                        ) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "center" },
                            className: "column-hide-small",
                            "data-place": "bottom",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip." + (includeAsset ? "hide_asset" : "show_asset"))
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            {
                                style: { marginRight: 0 },
                                className: includeAsset ? "order-cancel" : "action-plus",
                                onClick: _this7._hideAsset.bind(_this7, asset_type, includeAsset)
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                name: includeAsset ? "cross-circle" : "plus-circle",
                                title: includeAsset ? "icons.cross_circle.hide_asset" : "icons.plus_circle.show_asset",
                                className: "icon-14px"
                            })
                        )
                    )
                ));
            });

            if (optionalAssets) {
                optionalAssets.filter(function (asset) {
                    var isAvailable = false;
                    _this7.props.backedCoins.get("OPEN", []).forEach(function (coin) {
                        if (coin && coin.symbol === asset) {
                            isAvailable = true;
                        }
                    });
                    if (!!_this7.props.bridgeCoins.get(asset)) {
                        isAvailable = true;
                    }
                    var keep = true;
                    balances.forEach(function (a) {
                        if (a.key === asset) keep = false;
                    });
                    return keep && isAvailable;
                }).forEach(function (a) {
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getAsset(a);
                    if (asset && _this7.props.isMyAccount) {
                        var includeAsset = !hiddenAssets.includes(asset.get("id"));

                        var thisAssetName = asset.get("symbol").split(".");
                        var canDeposit = !!_this7.props.backedCoins.get("OPEN", []).find(function (a) {
                            return a.backingCoinType === thisAssetName[1];
                        }) || !!_this7.props.backedCoins.get("RUDEX", []).find(function (a) {
                            return a.backingCoin === thisAssetName[1];
                        }) || asset.get("symbol") == "BTS";

                        var canBuy = !!_this7.props.bridgeCoins.get(asset.get("symbol"));

                        var notCore = asset.get("id") !== "1.3.0";

                        var _assetUtils$parseDesc2 = common_asset_utils__WEBPACK_IMPORTED_MODULE_6__["default"].parseDescription(asset.getIn(["options", "description"])),
                            market = _assetUtils$parseDesc2.market;

                        if (asset.get("symbol").indexOf("OPEN.") !== -1 && !market) market = "USD";
                        var preferredMarket = market ? market : coreSymbol;

                        var directMarketLink = notCore ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                            {
                                to: "/market/" + asset.get("symbol") + "_" + preferredMarket
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                name: "trade",
                                title: "icons.trade.trade",
                                className: "icon-14px"
                            })
                        ) : emptyCell;

                        var _renderBorrow2 = renderBorrow(asset, _this7.props.account),
                            isBitAsset = _renderBorrow2.isBitAsset,
                            borrowModal = _renderBorrow2.borrowModal,
                            borrowLink = _renderBorrow2.borrowLink;

                        if (includeAsset && visible || !includeAsset && !visible) balances.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            {
                                key: asset.get("symbol"),
                                style: { maxWidth: "100rem" }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { textAlign: "left" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetImage__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                    replaceNoneToBts: false,
                                    maxWidth: 30,
                                    name: asset.get("symbol")
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                    asset: asset.get("id")
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "column-hide-small" },
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "column-hide-small" },
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "column-hide-small" },
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { textAlign: "center" } },
                                canBuy && _this7.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "span",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "a",
                                        {
                                            onClick: _this7._showDepositWithdraw.bind(_this7, "bridge_modal", a, false)
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                            name: "dollar",
                                            title: "icons.dollar.buy",
                                            className: "icon-14px"
                                        })
                                    )
                                ) : emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                canDeposit && _this7.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "span",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                        style: { cursor: "pointer" },
                                        name: "deposit",
                                        title: "icons.deposit.deposit",
                                        className: "icon-14x",
                                        onClick: _this7._showDepositModal.bind(_this7, asset.get("symbol"))
                                    })
                                ) : emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { textAlign: "center" } },
                                directMarketLink
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "inline-block",
                                        "data-place": "bottom",
                                        "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.borrow", { asset: asset.get("symbol") })
                                    },
                                    borrowLink,
                                    borrowModal
                                ) : emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                {
                                    style: { textAlign: "center" },
                                    className: "column-hide-small",
                                    "data-place": "bottom",
                                    "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip." + (includeAsset ? "hide_asset" : "show_asset"))
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "a",
                                    {
                                        style: { marginRight: 0 },
                                        className: includeAsset ? "order-cancel" : "action-plus",
                                        onClick: _this7._hideAsset.bind(_this7, asset.get("id"), includeAsset)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                        name: includeAsset ? "cross-circle" : "plus-circle",
                                        title: includeAsset ? "icons.cross_circle.hide_asset" : "icons.plus_circle.show_asset",
                                        className: "icon-14px"
                                    })
                                )
                            )
                        ));
                    }
                });
            }

            balances.sort(this.sortFunctions[this.props.sortKey]);
            return balances;
        }
    }, {
        key: "_renderSendModal",
        value: function _renderSendModal() {
            var _this8 = this;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_SendModal__WEBPACK_IMPORTED_MODULE_22__["default"], {
                id: "send_modal_portfolio",
                refCallback: function refCallback(e) {
                    if (e) _this8.send_modal = e;
                },
                from_name: this.props.account.get("name"),
                asset_id: this.state.send_asset || "1.3.0"
            });
        }
    }, {
        key: "_renderSettleModal",
        value: function _renderSettleModal() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_SettleModal__WEBPACK_IMPORTED_MODULE_24__["default"], {
                ref: "settlement_modal",
                modalId: "settlement_modal",
                asset: this.state.settleAsset,
                account: this.props.account.get("name")
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this9 = this;

            var currentWithdrawAsset = this.props.backedCoins.get("OPEN", []).find(function (c) {
                return c.symbol === _this9.state.withdrawAsset;
            }) || {};
            var currentBridges = this.props.bridgeCoins.get(this.state.bridgeAsset) || null;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    _Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_32__["default"],
                    {
                        style: { padding: 0 },
                        className: "table dashboard-table table-hover",
                        rows: this._renderBalances(this.props.balanceList, this.props.optionalAssets, this.props.visible),
                        header: this.props.header,
                        pageSize: 20,
                        label: "utility.total_x_assets",
                        extraRow: this.props.extraRow,
                        leftPadding: "1.5rem"
                    },
                    this._renderSendModal(),
                    this._renderSettleModal(),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Dashboard_SimpleDepositWithdraw__WEBPACK_IMPORTED_MODULE_26__["default"], _extends({
                        ref: "withdraw_modal",
                        action: "withdraw",
                        fiatModal: this.state.fiatModal,
                        account: this.props.account.get("name"),
                        sender: this.props.account.get("id"),
                        asset: this.state.withdrawAsset,
                        modalId: "simple_withdraw_modal",
                        balances: this.props.balances
                    }, currentWithdrawAsset, {
                        isDown: this.props.gatewayDown.get("OPEN")
                    })),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_WithdrawModalNew__WEBPACK_IMPORTED_MODULE_28__["default"], {
                        ref: "withdraw_modal_new",
                        modalId: "withdraw_modal_new",
                        backedCoins: this.props.backedCoins,
                        initialSymbol: this.state.withdrawAsset
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_DepositModal__WEBPACK_IMPORTED_MODULE_25__["default"], {
                        ref: "deposit_modal_new",
                        modalId: "deposit_modal_new",
                        asset: this.state.depositAsset,
                        account: this.props.account.get("name"),
                        backedCoins: this.props.backedCoins
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Dashboard_SimpleDepositBlocktradesBridge__WEBPACK_IMPORTED_MODULE_27__["default"], {
                        ref: "bridge_modal",
                        action: "deposit",
                        account: this.props.account.get("name"),
                        sender: this.props.account.get("id"),
                        asset: this.state.bridgeAsset,
                        modalId: "simple_bridge_modal",
                        balances: this.props.balances,
                        bridges: currentBridges,
                        isDown: this.props.gatewayDown.get("TRADE")
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        _Modal_BaseModal__WEBPACK_IMPORTED_MODULE_31__["default"],
                        { id: "reserve_asset", overlay: true },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "grid-block vertical" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_ReserveAssetModal__WEBPACK_IMPORTED_MODULE_30__["default"], {
                                asset: this.state.reserve,
                                account: this.props.account,
                                onClose: function onClose() {
                                    react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_29___default.a.publish("reserve_asset", "close");
                                }
                            })
                        )
                    )
                )
            );
        }
    }]);

    return AccountPortfolioList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPortfolioList = Object(alt_react__WEBPACK_IMPORTED_MODULE_15__["connect"])(AccountPortfolioList, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"], stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"], stores_MarketsStore__WEBPACK_IMPORTED_MODULE_18__["default"]];
    },
    getProps: function getProps() {
        return {
            settings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"].getState().settings,
            viewSettings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"].getState().viewSettings,
            backedCoins: stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"].getState().backedCoins,
            bridgeCoins: stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"].getState().bridgeCoins,
            gatewayDown: stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"].getState().down,
            allMarketStats: stores_MarketsStore__WEBPACK_IMPORTED_MODULE_18__["default"].getState().allMarketStats
        };
    }
});

AccountPortfolioList = react_debounce_render__WEBPACK_IMPORTED_MODULE_1___default()(AccountPortfolioList, 50, {
    leading: false
});

/* harmony default export */ __webpack_exports__["default"] = (AccountPortfolioList);

/***/ }),

/***/ 2582:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Market24HourChangeComponent", function() { return Market24HourChangeComponent; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1971);
/* harmony import */ var _AssetWrapper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2187);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(760);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2236);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2239);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Utility_MarketPrice__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2440);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }









/**
 *  Displays change in market value for an asset
 *
 *  Expects three properties
 *  -'quote' which should be a asset id
 *  -'base' which is the asset id of the original asset amount
 */

var MarketChangeComponent = function (_MarketStats) {
    _inherits(MarketChangeComponent, _MarketStats);

    function MarketChangeComponent(props) {
        _classCallCheck(this, MarketChangeComponent);

        return _possibleConstructorReturn(this, (MarketChangeComponent.__proto__ || Object.getPrototypeOf(MarketChangeComponent)).call(this, props));
    }

    _createClass(MarketChangeComponent, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            react_tooltip__WEBPACK_IMPORTED_MODULE_5___default.a.rebuild();
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np) {
            return _get(MarketChangeComponent.prototype.__proto__ || Object.getPrototypeOf(MarketChangeComponent.prototype), "shouldComponentUpdate", this).call(this, np) || np.base !== this.props.base;
        }
    }, {
        key: "getValue",
        value: function getValue() {
            var marketStats = this.props.marketStats;

            return marketStats && marketStats.change ? marketStats.change : 0;
        }
    }, {
        key: "render",
        value: function render() {
            var marketChangeValue = this.getValue();
            var dayChangeClass = parseFloat(marketChangeValue) === 0 ? "" : parseFloat(marketChangeValue) < 0 ? "change-down" : "change-up";
            var marketChangeFormattedValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_1__["FormattedNumber"], {
                style: "decimal",
                value: marketChangeValue,
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                { className: "value " + dayChangeClass },
                marketChangeFormattedValue,
                "%"
            );
        }
    }]);

    return MarketChangeComponent;
}(_Utility_MarketPrice__WEBPACK_IMPORTED_MODULE_6__["MarketStats"]);

MarketChangeComponent.defaultProps = {
    fullPrecision: false,
    noDecimals: false,
    hide_asset: false
};

MarketChangeComponent = Object(_AssetWrapper__WEBPACK_IMPORTED_MODULE_2__["default"])(MarketChangeComponent, {
    propNames: ["quote", "base"],
    defaultProps: { quote: "1.3.0" }
});

var Market24HourChangeComponent = function (_React$Component) {
    _inherits(Market24HourChangeComponent, _React$Component);

    function Market24HourChangeComponent() {
        _classCallCheck(this, Market24HourChangeComponent);

        return _possibleConstructorReturn(this, (Market24HourChangeComponent.__proto__ || Object.getPrototypeOf(Market24HourChangeComponent)).apply(this, arguments));
    }

    _createClass(Market24HourChangeComponent, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                refCallback = _props.refCallback,
                others = _objectWithoutProperties(_props, ["refCallback"]);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarketChangeComponent, _extends({}, others, { ref: refCallback }));
        }
    }]);

    return Market24HourChangeComponent;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

Market24HourChangeComponent = Object(alt_react__WEBPACK_IMPORTED_MODULE_3__["connect"])(Market24HourChangeComponent, {
    listenTo: function listenTo() {
        return [stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__["default"]];
    },
    getProps: function getProps(props) {
        return {
            marketStats: stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().allMarketStats.get(props.marketId),
            allMarketStats: stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().allMarketStats
        };
    }
});



/***/ }),

/***/ 2583:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(558);
/* harmony import */ var alt_container__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1821);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(701);
/* harmony import */ var _FormattedPrice__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2306);
/* harmony import */ var _MarketStatsCheck__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2238);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2236);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2235);
/* harmony import */ var _AssetWrapper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2187);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var EquivalentPrice = function (_MarketStatsCheck) {
    _inherits(EquivalentPrice, _MarketStatsCheck);

    function EquivalentPrice() {
        _classCallCheck(this, EquivalentPrice);

        return _possibleConstructorReturn(this, (EquivalentPrice.__proto__ || Object.getPrototypeOf(EquivalentPrice)).apply(this, arguments));
    }

    _createClass(EquivalentPrice, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, nextState) {
            return _get(EquivalentPrice.prototype.__proto__ || Object.getPrototypeOf(EquivalentPrice.prototype), "shouldComponentUpdate", this).call(this, np) || np.base_amount !== this.props.base_amount || np.quote_amount !== this.props.quote_amount || np.decimals !== this.props.decimals || !common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].are_equal_shallow(np.pulsate, this.props.pulsate) || !common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].are_equal_shallow(nextState, this.state);
        }
    }, {
        key: "getFinalPrice",
        value: function getFinalPrice() {
            var real = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
            var _props = this.props,
                coreAsset = _props.coreAsset,
                fromAsset = _props.fromAsset,
                toAsset = _props.toAsset,
                allMarketStats = _props.allMarketStats;

            return common_market_utils__WEBPACK_IMPORTED_MODULE_7__["default"].getFinalPrice(coreAsset, fromAsset, toAsset, allMarketStats, real);
        }
    }, {
        key: "render",
        value: function render() {
            var _props2 = this.props,
                toAsset = _props2.toAsset,
                forceDirection = _props2.forceDirection,
                others = _objectWithoutProperties(_props2, ["toAsset", "forceDirection"]);

            var finalPrice = this.getFinalPrice();

            if (finalPrice === 1) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    "1.00"
                );
            }

            if (!finalPrice) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                "--"
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FormattedPrice__WEBPACK_IMPORTED_MODULE_4__["default"], _extends({
                force_direction: forceDirection ? toAsset.get("symbol") : false,
                base_amount: finalPrice.base.amount,
                base_asset: finalPrice.base.asset_id,
                quote_amount: finalPrice.quote.amount,
                quote_asset: finalPrice.quote.asset_id
            }, others));
        }
    }]);

    return EquivalentPrice;
}(_MarketStatsCheck__WEBPACK_IMPORTED_MODULE_5__["default"]);

EquivalentPrice.defaultProps = {
    forceDirection: true
};


EquivalentPrice = Object(_AssetWrapper__WEBPACK_IMPORTED_MODULE_8__["default"])(EquivalentPrice, {
    propNames: ["toAsset", "fromAsset", "coreAsset"],
    defaultProps: {
        toAsset: "1.3.0",
        coreAsset: "1.3.0"
    }
});

var EquivalentPriceWrapper = function (_React$Component) {
    _inherits(EquivalentPriceWrapper, _React$Component);

    function EquivalentPriceWrapper() {
        _classCallCheck(this, EquivalentPriceWrapper);

        return _possibleConstructorReturn(this, (EquivalentPriceWrapper.__proto__ || Object.getPrototypeOf(EquivalentPriceWrapper)).apply(this, arguments));
    }

    _createClass(EquivalentPriceWrapper, [{
        key: "render",
        value: function render() {
            var _this3 = this;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                alt_container__WEBPACK_IMPORTED_MODULE_2__["default"],
                {
                    stores: [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"], stores_MarketsStore__WEBPACK_IMPORTED_MODULE_6__["default"]],
                    inject: {
                        toAsset: function toAsset() {
                            return _this3.props.toAsset || stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().settings.get("unit", "1.3.0");
                        },
                        allMarketStats: function allMarketStats() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().allMarketStats;
                        }
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EquivalentPrice, _extends({}, this.props, { ref: this.props.refCallback }))
            );
        }
    }]);

    return EquivalentPriceWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (EquivalentPriceWrapper);

/***/ }),

/***/ 2584:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(774);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






var PulseIcon = function (_Component) {
    _inherits(PulseIcon, _Component);

    function PulseIcon() {
        var _ref;

        var _temp, _this, _ret;

        _classCallCheck(this, PulseIcon);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = PulseIcon.__proto__ || Object.getPrototypeOf(PulseIcon)).call.apply(_ref, [this].concat(args))), _this), _this.tick = function () {
            var _this$props = _this.props,
                onIcon = _this$props.onIcon,
                offIcon = _this$props.offIcon;

            var _ref2 = _this.state || {},
                _ref2$name = _ref2.name,
                name = _ref2$name === undefined ? onIcon : _ref2$name;

            _this.setState({
                name: name === onIcon ? offIcon : onIcon
            });
        }, _temp), _possibleConstructorReturn(_this, _ret);
    }

    _createClass(PulseIcon, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var duration = this.props.duration;

            this.interval = setInterval(this.tick, duration);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            this.interval && clearInterval(this.interval);
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                onIcon = _props.onIcon,
                rest = _props.rest;

            var _ref3 = this.state || {},
                _ref3$name = _ref3.name,
                name = _ref3$name === undefined ? onIcon : _ref3$name;

            var title = this.props.title;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({ name: name, title: title }, rest));
        }
    }]);

    return PulseIcon;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

PulseIcon.propTypes = {
    duration: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.number.isRequired,
    offIcon: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,
    onIcon: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,
    title: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired
};
/* harmony default export */ __webpack_exports__["default"] = (PulseIcon);

/***/ }),

/***/ 2585:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(709);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _BaseModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1960);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1833);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1834);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(558);
/* harmony import */ var _Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2201);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(577);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(581);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(407);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1969);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }















var ModalContent = function (_React$Component) {
    _inherits(ModalContent, _React$Component);

    function ModalContent() {
        _classCallCheck(this, ModalContent);

        var _this = _possibleConstructorReturn(this, (ModalContent.__proto__ || Object.getPrototypeOf(ModalContent)).call(this));

        _this.state = {
            amount: 0
        };
        return _this;
    }

    _createClass(ModalContent, [{
        key: "onAmountChanged",
        value: function onAmountChanged(_ref) {
            var amount = _ref.amount,
                asset = _ref.asset;

            this.setState({ amount: amount });
        }
    }, {
        key: "onSubmit",
        value: function onSubmit(e) {
            e.preventDefault();
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default.a.publish("settlement_modal", "close");

            var precision = common_utils__WEBPACK_IMPORTED_MODULE_6__["default"].get_asset_precision(this.props.asset.get("precision"));
            var amount = this.state.amount.replace(/,/g, "");
            amount *= precision;

            var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_8__["default"].new_transaction();
            tr.add_type_operation("asset_settle", {
                fee: {
                    amount: 0,
                    asset_id: 0
                },
                account: this.props.account.get("id"),
                amount: {
                    amount: amount,
                    asset_id: this.props.asset.get("id")
                }
            });
            return stores_WalletDb__WEBPACK_IMPORTED_MODULE_9__["default"].process_transaction(tr, null, true).then(function (result) {
                // console.log("asset settle result:", result);
                // this.dispatch(account_id);
                return true;
            }).catch(function (error) {
                console.error("asset settle error: ", error);
                return false;
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                asset = _props.asset,
                account = _props.account;
            var amount = this.state.amount;


            if (!asset) {
                return null;
            }

            var assetID = asset.get("id");

            var account_balances = account.get("balances");

            var currentBalance = null,
                balanceAmount = 0;

            account_balances && account_balances.forEach(function (balance) {
                var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_11__["ChainStore"].getObject(balance);
                if (!balanceObject.get("balance")) {
                    return null;
                }
                if (balanceObject.get("asset_type") === assetID) {
                    currentBalance = balance;
                    balanceAmount = balanceObject.get("balance");
                }
            });

            var precision = common_utils__WEBPACK_IMPORTED_MODULE_6__["default"].get_asset_precision(asset.get("precision"));
            var parsedAmount = amount ? amount.replace(/,/g, "") : 0;
            var submit_btn_class = parseFloat(parsedAmount) > 0 && parseFloat(parsedAmount) * precision <= parseFloat(balanceAmount) ? "button success" : "button disabled";

            var balanceText = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.balance" }),
                ":\xA0",
                currentBalance ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_7__["default"], { balance: currentBalance }) : "0 " + asset.get("symbol")
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "form",
                { className: "grid-block vertical full-width-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                    component: "h3",
                    style: { textAlign: "center" },
                    content: "modal.settle.title",
                    asset: asset.get("symbol")
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-container ", style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                            label: "modal.settle.amount",
                            amount: amount,
                            onChange: this.onAmountChanged.bind(this),
                            display_balance: balanceText,
                            asset: assetID,
                            assets: [assetID],
                            tabIndex: 1
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                            type: "submit",
                            className: submit_btn_class,
                            onClick: this.onSubmit.bind(this),
                            value: counterpart__WEBPACK_IMPORTED_MODULE_10___default.a.translate("modal.settle.submit")
                        })
                    )
                )
            );
        }
    }]);

    return ModalContent;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ModalContent.propTypes = {
    asset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAsset.isRequired,
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccount.isRequired
};

ModalContent = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(ModalContent);

var SettleModal = function (_React$Component2) {
    _inherits(SettleModal, _React$Component2);

    function SettleModal() {
        _classCallCheck(this, SettleModal);

        var _this2 = _possibleConstructorReturn(this, (SettleModal.__proto__ || Object.getPrototypeOf(SettleModal)).call(this));

        _this2.state = { open: false };
        return _this2;
    }

    _createClass(SettleModal, [{
        key: "show",
        value: function show() {
            var _this3 = this;

            this.setState({ open: true }, function () {
                react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default.a.publish(_this3.props.modalId, "open");
            });
        }
    }, {
        key: "onClose",
        value: function onClose() {
            this.setState({ open: false });
        }
    }, {
        key: "render",
        value: function render() {
            return !this.state.open ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                _BaseModal__WEBPACK_IMPORTED_MODULE_2__["default"],
                {
                    id: this.props.modalId,
                    onClose: this.onClose.bind(this),
                    overlay: true,
                    ref: "settlement_modal"
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block vertical" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ModalContent, this.props)
                )
            );
        }
    }]);

    return SettleModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (SettleModal);

/***/ }),

/***/ 2586:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2201);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1969);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2259);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(407);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(573);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2187);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var ReserveAssetModal = function (_React$Component) {
    _inherits(ReserveAssetModal, _React$Component);

    function ReserveAssetModal(props) {
        _classCallCheck(this, ReserveAssetModal);

        var _this = _possibleConstructorReturn(this, (ReserveAssetModal.__proto__ || Object.getPrototypeOf(ReserveAssetModal)).call(this, props));

        _this.state = _this.getInitialState(props);
        return _this;
    }

    _createClass(ReserveAssetModal, [{
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.asset && this.props.asset && np.asset.get("id") !== this.props.asset.get("id")) {
                this.setState(this.getInitialState(np));
            }
        }
    }, {
        key: "getInitialState",
        value: function getInitialState(props) {
            return {
                amount: 0,
                amountAsset: new common_MarketClasses__WEBPACK_IMPORTED_MODULE_7__["Asset"]({
                    amount: 0,
                    asset_id: props.asset.get("id"),
                    precision: props.asset.get("precision")
                })
            };
        }
    }, {
        key: "onAmountChanged",
        value: function onAmountChanged(_ref) {
            var amount = _ref.amount,
                asset = _ref.asset;

            this.state.amountAsset.setAmount({ real: amount });
            this.setState({ amount: amount, asset: asset });
        }
    }, {
        key: "onSubmit",
        value: function onSubmit() {
            var _this2 = this;

            actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__["default"].reserveAsset(this.state.amountAsset.getAmount(), this.props.asset.get("id"), this.props.account.get("id")).then(function () {
                _this2.state.amountAsset.setAmount({ sats: 0 });
                _this2.setState({ amount: 0 });
            });
            this.props.onClose();
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var assetId = this.props.asset.get("id");

            var currentBalance = this.props.account && this.props.account.get("balances", []).size && !!this.props.account.getIn(["balances", assetId]) ? bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getObject(this.props.account.getIn(["balances", assetId])) : null;
            if (!currentBalance) return null;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "form",
                { className: "grid-block vertical full-width-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { component: "h3", content: "modal.reserve.title" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-container ", style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_4__["default"], {
                            label: "modal.reserve.amount",
                            amount: this.state.amount,
                            onChange: this.onAmountChanged.bind(this),
                            asset: assetId,
                            assets: [assetId],
                            display_balance: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                {
                                    onClick: function onClick() {
                                        _this3.state.amountAsset.setAmount({
                                            sats: currentBalance.get("balance")
                                        });
                                        _this3.setState({
                                            amount: _this3.state.amountAsset.getAmount({ real: true })
                                        });
                                    }
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__["default"], {
                                    balance: this.props.account.getIn(["balances", assetId])
                                })
                            ),
                            tabIndex: 1
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block button-group" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                            type: "submit",
                            className: "button success",
                            onClick: this.onSubmit.bind(this),
                            value: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("modal.reserve.submit"),
                            tabIndex: 2
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                className: "button",
                                onClick: this.props.onClose,
                                tabIndex: 3
                            },
                            counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("cancel")
                        )
                    )
                )
            );
        }
    }]);

    return ReserveAssetModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ReserveAssetModal = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_8__["default"])(ReserveAssetModal, {
    propNames: ["asset"]
});

/* harmony default export */ __webpack_exports__["default"] = (ReserveAssetModal);

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3VudC5lMjRlZGZkZGY2YjE3YTczZjZkNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRQYWdlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50QXNzZXRzLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvTW9kYWwvSXNzdWVNb2RhbC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudEFzc2V0Q3JlYXRlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50QXNzZXRVcGRhdGUuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9VdGlsaXR5L0Zvcm1hdHRlZEZlZS5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQXNzZXRXaGl0ZWxpc3QuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0Fzc2V0RmVlZFByb2R1Y2Vycy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudE1lbWJlcnNoaXAuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L1N0YXRpc3RpY3MuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRWZXN0aW5nLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50UGVybWlzc2lvbnMuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRQZXJtaXNzaW9uc0xpc3QuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9Qcml2YXRlS2V5Vmlldy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL01vZGFsL1FyY29kZU1vZGFsLmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvYXNzZXRzL3FyLnBuZyIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50UGVybWlzc2lvbnNNaWdyYXRlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvRm9ybXMvUHViS2V5SW5wdXQuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRTaWduZWRNZXNzYWdlcy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9hY3Rpb25zL1NpZ25lZE1lc3NhZ2VBY3Rpb24uanMiLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvU2lnbmVkTWVzc2FnZS5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudFdoaXRlbGlzdC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudFZvdGluZy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvV29ya2VyQXBwcm92YWwuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L1ZvdGluZ0FjY291bnRzTGlzdC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudE92ZXJ2aWV3LmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9NYXJnaW5Qb3NpdGlvbnMuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L1Byb3Bvc2Fscy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL01vZGFsL1Byb3Bvc2FsQXBwcm92ZU1vZGFsLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9OZXN0ZWRBcHByb3ZhbFN0YXRlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2xpYi9jb21tb24vcGVybWlzc2lvbl91dGlscy5qcyIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9OZXN0ZWRBcHByb3ZhbFN0YXRlTGliLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50T3JkZXJzLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2xpYi9jb21tb24vYWNjb3VudEhlbHBlci5qcyIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50VHJlZW1hcC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudFBvcnRmb2xpb0xpc3QuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9VdGlsaXR5L01hcmtldENoYW5nZUNvbXBvbmVudC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL1V0aWxpdHkvRXF1aXZhbGVudFByaWNlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvSWNvbi9QdWxzZUljb24uanMiLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL01vZGFsL1NldHRsZU1vZGFsLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvTW9kYWwvUmVzZXJ2ZUFzc2V0TW9kYWwuanN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IEFjY291bnRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL0FjY291bnRBY3Rpb25zXCI7XHJcbmltcG9ydCBBY2NvdW50U3RvcmUgZnJvbSBcInN0b3Jlcy9BY2NvdW50U3RvcmVcIjtcclxuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XHJcbmltcG9ydCBXYWxsZXRVbmxvY2tTdG9yZSBmcm9tIFwic3RvcmVzL1dhbGxldFVubG9ja1N0b3JlXCI7XHJcbi8vIGltcG9ydCBBY2NvdW50TGVmdFBhbmVsIGZyb20gXCIuL0FjY291bnRMZWZ0UGFuZWxcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCB7Y29ubmVjdH0gZnJvbSBcImFsdC1yZWFjdFwiO1xyXG5pbXBvcnQgYWNjb3VudFV0aWxzIGZyb20gXCJjb21tb24vYWNjb3VudF91dGlsc1wiO1xyXG5pbXBvcnQge0xpc3R9IGZyb20gXCJpbW11dGFibGVcIjtcclxuaW1wb3J0IFBhZ2U0MDQgZnJvbSBcIi4uL1BhZ2U0MDQvUGFnZTQwNFwiO1xyXG5pbXBvcnQge1JvdXRlLCBTd2l0Y2gsIFJlZGlyZWN0fSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5cclxuLyogTmVzdGVkIHJvdXRlcyAqL1xyXG5pbXBvcnQgQWNjb3VudEFzc2V0cyBmcm9tIFwiLi9BY2NvdW50QXNzZXRzXCI7XHJcbmltcG9ydCB7QWNjb3VudEFzc2V0Q3JlYXRlfSBmcm9tIFwiLi9BY2NvdW50QXNzZXRDcmVhdGVcIjtcclxuaW1wb3J0IEFjY291bnRBc3NldFVwZGF0ZSBmcm9tIFwiLi9BY2NvdW50QXNzZXRVcGRhdGVcIjtcclxuaW1wb3J0IEFjY291bnRNZW1iZXJzaGlwIGZyb20gXCIuL0FjY291bnRNZW1iZXJzaGlwXCI7XHJcbmltcG9ydCBBY2NvdW50VmVzdGluZyBmcm9tIFwiLi9BY2NvdW50VmVzdGluZ1wiO1xyXG5pbXBvcnQgQWNjb3VudFBlcm1pc3Npb25zIGZyb20gXCIuL0FjY291bnRQZXJtaXNzaW9uc1wiO1xyXG5pbXBvcnQgQWNjb3VudFNpZ25lZE1lc3NhZ2VzIGZyb20gXCIuL0FjY291bnRTaWduZWRNZXNzYWdlc1wiO1xyXG5pbXBvcnQgQWNjb3VudFdoaXRlbGlzdCBmcm9tIFwiLi9BY2NvdW50V2hpdGVsaXN0XCI7XHJcbmltcG9ydCBBY2NvdW50Vm90aW5nIGZyb20gXCIuL0FjY291bnRWb3RpbmdcIjtcclxuaW1wb3J0IEFjY291bnRPdmVydmlldyBmcm9tIFwiLi9BY2NvdW50T3ZlcnZpZXdcIjtcclxuXHJcbmNsYXNzIEFjY291bnRQYWdlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYWNjb3VudDogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnQuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY2NvdW50KSB7XHJcbiAgICAgICAgICAgIEFjY291bnRBY3Rpb25zLnNldEN1cnJlbnRBY2NvdW50LmRlZmVyKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcIm5hbWVcIilcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEZldGNoIHBvc3NpYmxlIGZlZSBhc3NldHMgaGVyZSB0byBhdm9pZCBhc3luYyBpc3N1ZXMgbGF0ZXIgKHdpbGwgcmVzb2x2ZSBhc3NldHMpXHJcbiAgICAgICAgICAgIGFjY291bnRVdGlscy5nZXRQb3NzaWJsZUZlZXModGhpcy5wcm9wcy5hY2NvdW50LCBcInRyYW5zZmVyXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5wKSB7XHJcbiAgICAgICAgaWYgKG5wLmFjY291bnQpIHtcclxuICAgICAgICAgICAgY29uc3QgbnBOYW1lID0gbnAuYWNjb3VudC5nZXQoXCJuYW1lXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TmFtZSA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnQgJiYgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcIm5hbWVcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMucHJvcHMuYWNjb3VudCB8fCBucE5hbWUgIT09IGN1cnJlbnROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGN1cnJlbnQgYWNjb3VudCBpbiBvcmRlciB0byBhY2Nlc3MgdGhlIGhlYWRlciByaWdodCBtZW51IG9wdGlvbnNcclxuICAgICAgICAgICAgICAgIEFjY291bnRBY3Rpb25zLnNldEN1cnJlbnRBY2NvdW50LmRlZmVyKG5wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBGZXRjaCBwb3NzaWJsZSBmZWUgYXNzZXRzIGhlcmUgdG8gYXZvaWQgYXN5bmMgaXNzdWVzIGxhdGVyICh3aWxsIHJlc29sdmUgYXNzZXRzKVxyXG4gICAgICAgICAgICAgICAgYWNjb3VudFV0aWxzLmdldFBvc3NpYmxlRmVlcyhucC5hY2NvdW50LCBcInRyYW5zZmVyXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICBteUFjdGl2ZUFjY291bnRzLFxyXG4gICAgICAgICAgICBzZWFyY2hBY2NvdW50cyxcclxuICAgICAgICAgICAgc2V0dGluZ3MsXHJcbiAgICAgICAgICAgIHdhbGxldF9sb2NrZWQsXHJcbiAgICAgICAgICAgIGFjY291bnQsXHJcbiAgICAgICAgICAgIGhpZGRlbkFzc2V0c1xyXG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBpZiAoIWFjY291bnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDxQYWdlNDA0IC8+O1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYWNjb3VudF9uYW1lID0gdGhpcy5wcm9wcy5hY2NvdW50LmdldChcIm5hbWVcIik7XHJcbiAgICAgICAgbGV0IGlzTXlBY2NvdW50ID0gQWNjb3VudFN0b3JlLmlzTXlBY2NvdW50KGFjY291bnQpO1xyXG5cclxuICAgICAgICBsZXQgcGFzc09uUHJvcHMgPSB7XHJcbiAgICAgICAgICAgIGFjY291bnRfbmFtZSxcclxuICAgICAgICAgICAgbXlBY3RpdmVBY2NvdW50cyxcclxuICAgICAgICAgICAgc2VhcmNoQWNjb3VudHMsXHJcbiAgICAgICAgICAgIHNldHRpbmdzLFxyXG4gICAgICAgICAgICB3YWxsZXRfbG9ja2VkLFxyXG4gICAgICAgICAgICBhY2NvdW50LFxyXG4gICAgICAgICAgICBpc015QWNjb3VudCxcclxuICAgICAgICAgICAgaGlkZGVuQXNzZXRzLFxyXG4gICAgICAgICAgICBjb250YWluZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGJhbGFuY2VzOiBhY2NvdW50LmdldChcImJhbGFuY2VzXCIsIExpc3QoKSkudG9MaXN0KCksXHJcbiAgICAgICAgICAgIG9yZGVyczogYWNjb3VudC5nZXQoXCJvcmRlcnNcIiwgTGlzdCgpKS50b0xpc3QoKSxcclxuICAgICAgICAgICAgdmlld1NldHRpbmdzOiB0aGlzLnByb3BzLnZpZXdTZXR0aW5ncyxcclxuICAgICAgICAgICAgcHJveHk6IGFjY291bnQuZ2V0SW4oW1wib3B0aW9uc1wiLCBcInZvdGluZ19hY2NvdW50XCJdKSxcclxuICAgICAgICAgICAgaGlzdG9yeTogdGhpcy5wcm9wcy5oaXN0b3J5XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIHBhZ2UtbGF5b3V0XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tcGFkZGluZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxTd2l0Y2g+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxSb3V0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoKSA9PiA8QWNjb3VudE92ZXJ2aWV3IHsuLi5wYXNzT25Qcm9wc30gLz59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxSZWRpcmVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbT17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS9vdmVydmlld2B9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxSb3V0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS9hc3NldHNgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gPEFjY291bnRBc3NldHMgey4uLnBhc3NPblByb3BzfSAvPn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFJvdXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9L2NyZWF0ZS1hc3NldGB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoKSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRBc3NldENyZWF0ZSB7Li4ucGFzc09uUHJvcHN9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Um91dGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e2AvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vdXBkYXRlLWFzc2V0Lzphc3NldGB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoKSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRBc3NldFVwZGF0ZSB7Li4ucGFzc09uUHJvcHN9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Um91dGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e2AvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vbWVtYmVyLXN0YXRzYH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eygpID0+IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudE1lbWJlcnNoaXAgey4uLnBhc3NPblByb3BzfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFJvdXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9L3Zlc3RpbmdgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gPEFjY291bnRWZXN0aW5nIHsuLi5wYXNzT25Qcm9wc30gLz59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxSb3V0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS9wZXJtaXNzaW9uc2B9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoKSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRQZXJtaXNzaW9ucyB7Li4ucGFzc09uUHJvcHN9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Um91dGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e2AvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vdm90aW5nYH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eygpID0+IDxBY2NvdW50Vm90aW5nIHsuLi5wYXNzT25Qcm9wc30gLz59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxSb3V0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS93aGl0ZWxpc3RgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gPEFjY291bnRXaGl0ZWxpc3Qgey4uLnBhc3NPblByb3BzfSAvPn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFJvdXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9L3NpZ25lZG1lc3NhZ2VzYH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eygpID0+IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNpZ25lZE1lc3NhZ2VzIHsuLi5wYXNzT25Qcm9wc30gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Td2l0Y2g+XHJcbiAgICAgICAgICAgICAgICAgICAgey8qIHtSZWFjdC5jbG9uZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkNoaWxkcmVuLm9ubHkodGhpcy5wcm9wcy5jaGlsZHJlbiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15QWN0aXZlQWNjb3VudHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hBY2NvdW50cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FsbGV0X2xvY2tlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc015QWNjb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbkFzc2V0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzOiBhY2NvdW50LmdldChcImJhbGFuY2VzXCIsIExpc3QoKSkudG9MaXN0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcnM6IGFjY291bnQuZ2V0KFwib3JkZXJzXCIsIExpc3QoKSkudG9MaXN0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZWRDb2luczogdGhpcy5wcm9wcy5iYWNrZWRDb2lucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaWRnZUNvaW5zOiB0aGlzLnByb3BzLmJyaWRnZUNvaW5zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheURvd246IHRoaXMucHJvcHMuZ2F0ZXdheURvd24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3U2V0dGluZ3M6IHRoaXMucHJvcHMudmlld1NldHRpbmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHk6IGFjY291bnQuZ2V0SW4oW1wib3B0aW9uc1wiLCBcInZvdGluZ19hY2NvdW50XCJdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKX0gKi99XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5BY2NvdW50UGFnZSA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudFBhZ2UsIHtcclxuICAgIHNob3dfbG9hZGVyOiB0cnVlXHJcbn0pO1xyXG5cclxuY2xhc3MgQWNjb3VudFBhZ2VTdG9yZVdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBhY2NvdW50X25hbWUgPSB0aGlzLnByb3BzLm1hdGNoLnBhcmFtcy5hY2NvdW50X25hbWU7XHJcbiAgICAgICAgcmV0dXJuIDxBY2NvdW50UGFnZSB7Li4udGhpcy5wcm9wc30gYWNjb3VudD17YWNjb3VudF9uYW1lfSAvPjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcclxuICAgIEFjY291bnRQYWdlU3RvcmVXcmFwcGVyLFxyXG4gICAge1xyXG4gICAgICAgIGxpc3RlblRvKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW0FjY291bnRTdG9yZSwgU2V0dGluZ3NTdG9yZSwgV2FsbGV0VW5sb2NrU3RvcmVdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0UHJvcHMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBteUFjdGl2ZUFjY291bnRzOiBBY2NvdW50U3RvcmUuZ2V0U3RhdGUoKS5teUFjdGl2ZUFjY291bnRzLFxyXG4gICAgICAgICAgICAgICAgc2VhcmNoQWNjb3VudHM6IEFjY291bnRTdG9yZS5nZXRTdGF0ZSgpLnNlYXJjaEFjY291bnRzLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKS5zZXR0aW5ncyxcclxuICAgICAgICAgICAgICAgIGhpZGRlbkFzc2V0czogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLmhpZGRlbkFzc2V0cyxcclxuICAgICAgICAgICAgICAgIHdhbGxldF9sb2NrZWQ6IFdhbGxldFVubG9ja1N0b3JlLmdldFN0YXRlKCkubG9ja2VkLFxyXG4gICAgICAgICAgICAgICAgdmlld1NldHRpbmdzOiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkudmlld1NldHRpbmdzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4pO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuaW1wb3J0IHtMaW5rfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBBc3NldEFjdGlvbnMgZnJvbSBcImFjdGlvbnMvQXNzZXRBY3Rpb25zXCI7XHJcbmltcG9ydCBBc3NldFN0b3JlIGZyb20gXCJzdG9yZXMvQXNzZXRTdG9yZVwiO1xyXG5pbXBvcnQgQWNjb3VudEFjdGlvbnMgZnJvbSBcImFjdGlvbnMvQWNjb3VudEFjdGlvbnNcIjtcclxuaW1wb3J0IEJhc2VNb2RhbCBmcm9tIFwiLi4vTW9kYWwvQmFzZU1vZGFsXCI7XHJcbmltcG9ydCBGb3JtYXR0ZWRBc3NldCBmcm9tIFwiLi4vVXRpbGl0eS9Gb3JtYXR0ZWRBc3NldFwiO1xyXG5pbXBvcnQgWmZBcGkgZnJvbSBcInJlYWN0LWZvdW5kYXRpb24tYXBwcy9zcmMvdXRpbHMvZm91bmRhdGlvbi1hcGlcIjtcclxuaW1wb3J0IHtkZWJvdW5jZX0gZnJvbSBcImxvZGFzaC1lc1wiO1xyXG5pbXBvcnQgTG9hZGluZ0luZGljYXRvciBmcm9tIFwiLi4vTG9hZGluZ0luZGljYXRvclwiO1xyXG5pbXBvcnQgSXNzdWVNb2RhbCBmcm9tIFwiLi4vTW9kYWwvSXNzdWVNb2RhbFwiO1xyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gXCJhbHQtcmVhY3RcIjtcclxuaW1wb3J0IGFzc2V0VXRpbHMgZnJvbSBcImNvbW1vbi9hc3NldF91dGlsc1wiO1xyXG5pbXBvcnQge01hcCwgTGlzdH0gZnJvbSBcImltbXV0YWJsZVwiO1xyXG5pbXBvcnQgQXNzZXRXcmFwcGVyIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0V3JhcHBlclwiO1xyXG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xyXG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XHJcblxyXG5jbGFzcyBBY2NvdW50QXNzZXRzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgc3ltYm9sOiBcIlwiLFxyXG4gICAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IFwiXCIsXHJcbiAgICAgICAgbWF4X3N1cHBseTogMCxcclxuICAgICAgICBwcmVjaXNpb246IDBcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBzeW1ib2w6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgY3JlYXRlOiB7XHJcbiAgICAgICAgICAgICAgICBzeW1ib2w6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBtYXhfc3VwcGx5OiAxMDAwMDAwMDAwMDAwMDAwLFxyXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiA0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlzc3VlOiB7XHJcbiAgICAgICAgICAgICAgICBhbW91bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICB0bzogXCJcIixcclxuICAgICAgICAgICAgICAgIHRvX2lkOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBzeW1ib2w6IFwiXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3JzOiB7XHJcbiAgICAgICAgICAgICAgICBzeW1ib2w6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNWYWxpZDogZmFsc2UsXHJcbiAgICAgICAgICAgIHNlYXJjaFRlcm06IFwiXCJcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl9zZWFyY2hBY2NvdW50cyA9IGRlYm91bmNlKHRoaXMuX3NlYXJjaEFjY291bnRzLCAxNTApO1xyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja0Fzc2V0cyhhc3NldHMsIGZvcmNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJhc3NldHNcIikuc2l6ZSkgcmV0dXJuO1xyXG4gICAgICAgIGxldCBsYXN0QXNzZXQgPSBhc3NldHNcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChhLnN5bWJvbCA+IGIuc3ltYm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEuc3ltYm9sIDwgYi5zeW1ib2wpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAubGFzdCgpO1xyXG5cclxuICAgICAgICBpZiAoYXNzZXRzLnNpemUgPT09IDAgfHwgZm9yY2UpIHtcclxuICAgICAgICAgICAgQXNzZXRBY3Rpb25zLmdldEFzc2V0TGlzdC5kZWZlcihcIkFcIiwgMTAwKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YXNzZXRzRmV0Y2hlZDogMTAwfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhc3NldHMuc2l6ZSA+PSB0aGlzLnN0YXRlLmFzc2V0c0ZldGNoZWQpIHtcclxuICAgICAgICAgICAgQXNzZXRBY3Rpb25zLmdldEFzc2V0TGlzdC5kZWZlcihsYXN0QXNzZXQuc3ltYm9sLCAxMDApO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHthc3NldHNGZXRjaGVkOiB0aGlzLnN0YXRlLmFzc2V0c0ZldGNoZWQgKyA5OX0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrQXNzZXRzKG5leHRQcm9wcy5hc3NldHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcclxuICAgICAgICB0aGlzLl9jaGVja0Fzc2V0cyh0aGlzLnByb3BzLmFzc2V0cywgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uSXNzdWVJbnB1dCh2YWx1ZSwgZSkge1xyXG4gICAgICAgIGxldCBrZXkgPSBlLnRhcmdldC5pZDtcclxuICAgICAgICBsZXQge2lzc3VlfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIGlmIChrZXkgPT09IFwidG9cIikge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hBY2NvdW50cyhlLnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgICAgIGlzc3VlLnRvID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgIGxldCBhY2NvdW50ID0gdGhpcy5wcm9wcy5zZWFyY2hBY2NvdW50cy5maW5kRW50cnkobmFtZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZSA9PT0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXNzdWUudG9faWQgPSBhY2NvdW50ID8gYWNjb3VudFswXSA6IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaXNzdWVbdmFsdWVdID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc3N1ZTogaXNzdWV9KTtcclxuICAgIH1cclxuXHJcbiAgICBfc2VhcmNoQWNjb3VudHMoc2VhcmNoVGVybSkge1xyXG4gICAgICAgIEFjY291bnRBY3Rpb25zLmFjY291bnRTZWFyY2goc2VhcmNoVGVybSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2lzc3VlQnV0dG9uQ2xpY2soYXNzZXRfaWQsIHN5bWJvbCwgZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBsZXQge2lzc3VlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgaXNzdWUuYXNzZXRfaWQgPSBhc3NldF9pZDtcclxuICAgICAgICBpc3N1ZS5zeW1ib2wgPSBzeW1ib2w7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNzdWU6IGlzc3VlfSk7XHJcbiAgICAgICAgWmZBcGkucHVibGlzaChcImlzc3VlX2Fzc2V0XCIsIFwib3BlblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBfZWRpdEJ1dHRvbkNsaWNrKHN5bWJvbCwgYWNjb3VudF9uYW1lLCBlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMucHJvcHMuaGlzdG9yeS5wdXNoKFxyXG4gICAgICAgICAgICBgL2FjY291bnQvJHthY2NvdW50X25hbWV9L3VwZGF0ZS1hc3NldC8ke3N5bWJvbH1gXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQnV0dG9uQ2xpY2soYWNjb3VudF9uYW1lKSB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goYC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS9jcmVhdGUtYXNzZXRgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHthY2NvdW50LCBhY2NvdW50X25hbWUsIGFzc2V0cywgYXNzZXRzTGlzdH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBsZXQgYWNjb3VudEV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiA8TG9hZGluZ0luZGljYXRvciB0eXBlPVwiY2lyY2xlXCIgLz47XHJcbiAgICAgICAgfSBlbHNlIGlmIChhY2NvdW50Lm5vdEZvdW5kKSB7XHJcbiAgICAgICAgICAgIGFjY291bnRFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFhY2NvdW50RXhpc3RzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImg1XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LmVycm9ycy5ub3RfZm91bmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17YWNjb3VudF9uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvaDU+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhc3NldHNMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBhc3NldHMgPSBhc3NldHMuY2xlYXIoKTtcclxuICAgICAgICAgICAgYXNzZXRzTGlzdC5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEpIGFzc2V0cyA9IGFzc2V0cy5zZXQoYS5nZXQoXCJpZFwiKSwgYS50b0pTKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG15QXNzZXRzID0gYXNzZXRzXHJcbiAgICAgICAgICAgIC5maWx0ZXIoYXNzZXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFzc2V0Lmlzc3VlciA9PT0gYWNjb3VudC5nZXQoXCJpZFwiKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoYS5pZC5zdWJzdHJpbmcoNCwgYS5pZC5sZW5ndGgpLCAxMCkgLVxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGIuaWQuc3Vic3RyaW5nKDQsIGIuaWQubGVuZ3RoKSwgMTApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAubWFwKGFzc2V0ID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IGFzc2V0VXRpbHMucGFyc2VEZXNjcmlwdGlvbihcclxuICAgICAgICAgICAgICAgICAgICBhc3NldC5vcHRpb25zLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRlc2MgPSBkZXNjcmlwdGlvbi5zaG9ydF9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgPyBkZXNjcmlwdGlvbi5zaG9ydF9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgOiBkZXNjcmlwdGlvbi5tYWluO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkZXNjLmxlbmd0aCA+IDEwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc2MgPSBkZXNjLnN1YnN0cigwLCAxMDApICsgXCIuLi5cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkeW5hbWljT2JqZWN0ID0gdGhpcy5wcm9wcy5nZXREeW5hbWljT2JqZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0LmR5bmFtaWNfYXNzZXRfZGF0YV9pZFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2Fzc2V0LnN5bWJvbH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL2Fzc2V0LyR7YXNzZXQuc3ltYm9sfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthc3NldC5zeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcImJpdGFzc2V0XCIgaW4gYXNzZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuYml0YXNzZXQuaXNfcHJlZGljdGlvbl9tYXJrZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnBtXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tcGFcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJVc2VyIElzc3VlZCBBc3NldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2R5bmFtaWNPYmplY3QgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtwYXJzZUludChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR5bmFtaWNPYmplY3QuZ2V0KFwiY3VycmVudF9zdXBwbHlcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17YXNzZXQuaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17cGFyc2VJbnQoYXNzZXQub3B0aW9ucy5tYXhfc3VwcGx5LCAxMCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2Fzc2V0LmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFhc3NldC5iaXRhc3NldF9kYXRhX2lkID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX2lzc3VlQnV0dG9uQ2xpY2suYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LnN5bWJvbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJjcm9zcy1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm90YXRlNDVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9lZGl0QnV0dG9uQ2xpY2suYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuc3ltYm9sLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJkYXNoYm9hcmRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudG9BcnJheSgpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBhcHAtdGFibGVzIG5vLXBhZGRpbmdcIiByZWY9XCJhcHBUYWJsZXNcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBzbWFsbC0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1jb250YWluZXIgZ2VuZXJpYy1ib3JkZXJlZC1ib3hcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwiaXNzdWVkQXNzZXRzVGFiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFjY291bnQtdGFic1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2xhc3M9XCJhY2NvdW50LW92ZXJ2aWV3IGJvcmRlcmVkLWhlYWRlciBjb250ZW50LWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cInBhZGRpbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuaXNzdWVkX2Fzc2V0c1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUgZGFzaGJvYXJkLXRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5zeW1ib2xcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5hc3NldC5zdW1tYXJ5LmFzc2V0X3R5cGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJ0aFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwibWFya2V0cy5zdXBwbHlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1heF9zdXBwbHlcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ0cmFuc2FjdGlvbi50cnhUeXBlcy5hc3NldF9pc3N1ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFwiY2VudGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInRyYW5zYWN0aW9uLnRyeFR5cGVzLmFzc2V0X3VwZGF0ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+e215QXNzZXRzfTwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fY3JlYXRlQnV0dG9uQ2xpY2suYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNhY3Rpb24udHJ4VHlwZXMuYXNzZXRfY3JlYXRlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8QmFzZU1vZGFsIGlkPVwiaXNzdWVfYXNzZXRcIiBvdmVybGF5PXt0cnVlfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPElzc3VlTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldF90b19pc3N1ZT17dGhpcy5zdGF0ZS5pc3N1ZS5hc3NldF9pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFpmQXBpLnB1Ymxpc2goXCJpc3N1ZV9hc3NldFwiLCBcImNsb3NlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L0Jhc2VNb2RhbD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5BY2NvdW50QXNzZXRzID0gQXNzZXRXcmFwcGVyKEFjY291bnRBc3NldHMsIHtcclxuICAgIHByb3BOYW1lczogW1wiYXNzZXRzTGlzdFwiXSxcclxuICAgIGFzTGlzdDogdHJ1ZSxcclxuICAgIHdpdGhEeW5hbWljOiB0cnVlXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcclxuICAgIEFjY291bnRBc3NldHMsXHJcbiAgICB7XHJcbiAgICAgICAgbGlzdGVuVG8oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbQXNzZXRTdG9yZV07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRQcm9wcyhwcm9wcykge1xyXG4gICAgICAgICAgICBsZXQgYXNzZXRzID0gTWFwKCksXHJcbiAgICAgICAgICAgICAgICBhc3NldHNMaXN0ID0gTGlzdCgpO1xyXG4gICAgICAgICAgICBpZiAocHJvcHMuYWNjb3VudC5nZXQoXCJhc3NldHNcIiwgW10pLnNpemUpIHtcclxuICAgICAgICAgICAgICAgIHByb3BzLmFjY291bnQuZ2V0KFwiYXNzZXRzXCIsIFtdKS5mb3JFYWNoKGlkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NldHNMaXN0ID0gYXNzZXRzTGlzdC5wdXNoKGlkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXNzZXRzID0gQXNzZXRTdG9yZS5nZXRTdGF0ZSgpLmFzc2V0cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4ge2Fzc2V0cywgYXNzZXRzTGlzdH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4pO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IEFwcGxpY2F0aW9uQXBpIGZyb20gXCJhcGkvQXBwbGljYXRpb25BcGlcIjtcclxuaW1wb3J0IEFjY291bnRTZWxlY3RvciBmcm9tIFwiLi4vQWNjb3VudC9BY2NvdW50U2VsZWN0b3JcIjtcclxuaW1wb3J0IEFtb3VudFNlbGVjdG9yIGZyb20gXCIuLi9VdGlsaXR5L0Ftb3VudFNlbGVjdG9yXCI7XHJcbmltcG9ydCBub3RpZnkgZnJvbSBcImFjdGlvbnMvTm90aWZpY2F0aW9uQWN0aW9uc1wiO1xyXG5cclxuY2xhc3MgSXNzdWVNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFzc2V0X3RvX2lzc3VlOiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBhbW91bnQ6IHByb3BzLmFtb3VudCxcclxuICAgICAgICAgICAgdG86IHByb3BzLnRvLFxyXG4gICAgICAgICAgICB0b19pZDogbnVsbCxcclxuICAgICAgICAgICAgbWVtbzogXCJcIlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgb25BbW91bnRDaGFuZ2VkKHthbW91bnR9KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YW1vdW50OiBhbW91bnR9KTtcclxuICAgIH1cclxuXHJcbiAgICBvblRvQWNjb3VudENoYW5nZWQodG8pIHtcclxuICAgICAgICBsZXQgc3RhdGUgPSB0b1xyXG4gICAgICAgICAgICA/IHt0bzogdG8uZ2V0KFwibmFtZVwiKSwgdG9faWQ6IHRvLmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICA6IHt0b19pZDogbnVsbH07XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Ub0NoYW5nZWQodG8pIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHt0bzogdG8sIHRvX2lkOiBudWxsfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25TdWJtaXQoKSB7XHJcbiAgICAgICAgbGV0IHthc3NldF90b19pc3N1ZX0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCBwcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKFxyXG4gICAgICAgICAgICBhc3NldF90b19pc3N1ZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBhbW91bnQgPSB0aGlzLnN0YXRlLmFtb3VudC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgXCJcIik7XHJcbiAgICAgICAgYW1vdW50ICo9IHByZWNpc2lvbjtcclxuXHJcbiAgICAgICAgQXBwbGljYXRpb25BcGkuaXNzdWVfYXNzZXQoXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudG9faWQsXHJcbiAgICAgICAgICAgIGFzc2V0X3RvX2lzc3VlLmdldChcImlzc3VlclwiKSxcclxuICAgICAgICAgICAgYXNzZXRfdG9faXNzdWUuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgIGFtb3VudCxcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5tZW1vXHJcbiAgICAgICAgICAgICAgICA/IG5ldyBCdWZmZXIodGhpcy5zdGF0ZS5tZW1vLCBcInV0Zi04XCIpXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuc3RhdGUubWVtb1xyXG4gICAgICAgICkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJpc3N1ZSBlcnJvciBjYXVnaHQgaGVyZTpcIiwgZXJyKTtcclxuICAgICAgICAgICAgbm90aWZ5LmFkZE5vdGlmaWNhdGlvbih7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGlzc3VlIHRoZSBhc3NldCwgcHJvYmFibHkgZHVlIHRvIGFuIGludmFsaWQgYW1vdW50IGJlaW5nIGlzc3VlZGAsIC8vOiAke3RoaXMuc3RhdGUud2FsbGV0X3B1YmxpY19uYW1lfVxyXG4gICAgICAgICAgICAgICAgbGV2ZWw6IFwiZXJyb3JcIixcclxuICAgICAgICAgICAgICAgIGF1dG9EaXNtaXNzOiAxMFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGFtb3VudDogMCxcclxuICAgICAgICAgICAgdG86IFwiXCIsXHJcbiAgICAgICAgICAgIHRvX2lkOiBudWxsLFxyXG4gICAgICAgICAgICBtZW1vOiBcIlwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25NZW1vQ2hhbmdlZChlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bWVtbzogZS50YXJnZXQudmFsdWV9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IGFzc2V0X3RvX2lzc3VlID0gdGhpcy5wcm9wcy5hc3NldF90b19pc3N1ZS5nZXQoXCJpZFwiKTtcclxuICAgICAgICBsZXQgdGFiSW5kZXggPSAxO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8Zm9ybSBjbGFzc05hbWU9XCJncmlkLWJsb2NrIHZlcnRpY2FsIGZ1bGwtd2lkdGgtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRhaW5lciBcIiBzdHlsZT17e3BhZGRpbmdUb3A6IFwiMnJlbVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgey8qIFQgTyAqL31cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e1wibW9kYWwuaXNzdWUudG9cIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lPXt0aGlzLnN0YXRlLnRvfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5vblRvQWNjb3VudENoYW5nZWQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25Ub0NoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMuc3RhdGUudG99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGFiSW5kZXgrK31cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgey8qIEEgTSBPIFUgTiBUICovfVxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QW1vdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwibW9kYWwuaXNzdWUuYW1vdW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dGhpcy5zdGF0ZS5hbW91bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkFtb3VudENoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldF90b19pc3N1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W2Fzc2V0X3RvX2lzc3VlXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXt0YWJJbmRleCsrfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7LyogIE0gRSBNIE8gICovfVxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwic3BhblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cInRyYW5zZmVyLm1lbW9cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNmZXIub3B0aW9uYWxcIiAvPilcclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPVwiM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5tZW1vfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9e3RhYkluZGV4Kyt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbk1lbW9DaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBidXR0b24tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b24gcHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uU3VibWl0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnRvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLnRvX2lkIHx8ICF0aGlzLnN0YXRlLmFtb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXt0YWJJbmRleCsrfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwibW9kYWwuaXNzdWUuc3VibWl0XCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvbiBwcmltYXJ5IGhvbGxvd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2xvc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGFiSW5kZXgrK31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImNhbmNlbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJpbmRUb0NoYWluU3RhdGUoSXNzdWVNb2RhbCk7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xyXG5pbXBvcnQgQXNzZXRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL0Fzc2V0QWN0aW9uc1wiO1xyXG5pbXBvcnQgSGVscENvbnRlbnQgZnJvbSBcIi4uL1V0aWxpdHkvSGVscENvbnRlbnRcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlLCBDaGFpblZhbGlkYXRpb259IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcclxuaW1wb3J0IEFzc2V0U2VsZWN0b3IgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXRTZWxlY3RvclwiO1xyXG5pbXBvcnQgYmlnIGZyb20gXCJiaWdudW1iZXIuanNcIjtcclxuaW1wb3J0IGNuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xyXG5pbXBvcnQgYXNzZXRVdGlscyBmcm9tIFwiY29tbW9uL2Fzc2V0X3V0aWxzXCI7XHJcbmltcG9ydCB7VGFicywgVGFifSBmcm9tIFwiLi4vVXRpbGl0eS9UYWJzXCI7XHJcbmltcG9ydCBBbW91bnRTZWxlY3RvciBmcm9tIFwiLi4vVXRpbGl0eS9BbW91bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgYXNzZXRDb25zdGFudHMgZnJvbSBcImNoYWluL2Fzc2V0X2NvbnN0YW50c1wiO1xyXG5pbXBvcnQge2VzdGltYXRlRmVlfSBmcm9tIFwiY29tbW9uL3RyeEhlbHBlclwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcblxyXG5sZXQgR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWSA9IG5ldyBiaWcoXHJcbiAgICBhc3NldENvbnN0YW50cy5HUkFQSEVORV9NQVhfU0hBUkVfU1VQUExZXHJcbik7XHJcblxyXG5jbGFzcyBCaXRBc3NldE9wdGlvbnMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBiYWNraW5nQXNzZXQ6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIGlzVXBkYXRlOiBQcm9wVHlwZXMuYm9vbFxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIGlzVXBkYXRlOiBmYWxzZVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBiYWNraW5nQXNzZXQ6IHByb3BzLmJhY2tpbmdBc3NldC5nZXQoXCJzeW1ib2xcIiksXHJcbiAgICAgICAgICAgIGVycm9yOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBfb25JbnB1dEJhY2tpbmdBc3NldChhc3NldCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBiYWNraW5nQXNzZXQ6IGFzc2V0LnRvVXBwZXJDYXNlKCksXHJcbiAgICAgICAgICAgIGVycm9yOiBudWxsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uRm91bmRCYWNraW5nQXNzZXQoYXNzZXQpIHtcclxuICAgICAgICBpZiAoYXNzZXQpIHtcclxuICAgICAgICAgICAgbGV0IGJhY2tpbmcgPVxyXG4gICAgICAgICAgICAgICAgYXNzZXQuZ2V0KFwiYml0YXNzZXRcIikgJiZcclxuICAgICAgICAgICAgICAgIENoYWluU3RvcmUuZ2V0QXNzZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQuZ2V0SW4oW1wiYml0YXNzZXRcIiwgXCJvcHRpb25zXCIsIFwic2hvcnRfYmFja2luZ19hc3NldFwiXSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGxldCBiYWNraW5nX2JhY2tpbmcgPVxyXG4gICAgICAgICAgICAgICAgYmFja2luZyAmJlxyXG4gICAgICAgICAgICAgICAgYmFja2luZy5nZXQoXCJiaXRhc3NldFwiKSAmJlxyXG4gICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRBc3NldChcclxuICAgICAgICAgICAgICAgICAgICBiYWNraW5nLmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG9ydF9iYWNraW5nX2Fzc2V0XCJcclxuICAgICAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKGJhY2tpbmdfYmFja2luZyAmJiBiYWNraW5nX2JhY2tpbmcgIT09IFwiMS4zLjBcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5lcnJvcl90b29fZGVlcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uVXBkYXRlKFwiaW52YWxpZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghYXNzZXQuZ2V0SW4oW1wiYml0YXNzZXRcIiwgXCJpc19wcmVkaWN0aW9uX21hcmtldFwiXSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmlzUHJlZGljdGlvbk1hcmtldCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcInByZWNpc2lvblwiKSAhPT1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGhpcy5wcm9wcy5hc3NldFByZWNpc2lvbiwgMTApXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZXJyb3JfcHJlY2lzaW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YXNzZXQ6IHRoaXMucHJvcHMuYXNzZXRTeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uVXBkYXRlKFwiaW52YWxpZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZShcInNob3J0X2JhY2tpbmdfYXNzZXRcIiwgYXNzZXQuZ2V0KFwiaWRcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25VcGRhdGUoXCJpbnZhbGlkXCIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZXJyb3JfaW52YWxpZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uVXBkYXRlKFwiaW52YWxpZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25VcGRhdGUoXCJpbnZhbGlkXCIsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtiaXRhc3NldF9vcHRzfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IHtlcnJvcn0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZlZWRfbGlmZXRpbWVfc2VjXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtiaXRhc3NldF9vcHRzLmZlZWRfbGlmZXRpbWVfc2VjIC8gNjB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uVXBkYXRlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmZWVkX2xpZmV0aW1lX3NlY1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcblxyXG4gICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1pbmltdW1fZmVlZHNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2JpdGFzc2V0X29wdHMubWluaW11bV9mZWVkc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMucHJvcHMub25VcGRhdGUuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1pbmltdW1fZmVlZHNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mb3JjZV9zZXR0bGVtZW50X2RlbGF5X3NlY1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Yml0YXNzZXRfb3B0cy5mb3JjZV9zZXR0bGVtZW50X2RlbGF5X3NlYyAvIDYwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vblVwZGF0ZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZm9yY2Vfc2V0dGxlbWVudF9kZWxheV9zZWNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mb3JjZV9zZXR0bGVtZW50X29mZnNldF9wZXJjZW50XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHMuZm9yY2Vfc2V0dGxlbWVudF9vZmZzZXRfcGVyY2VudCAvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldENvbnN0YW50cy5HUkFQSEVORV8xX1BFUkNFTlRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vblVwZGF0ZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZm9yY2Vfc2V0dGxlbWVudF9vZmZzZXRfcGVyY2VudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcblxyXG4gICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1heGltdW1fZm9yY2Vfc2V0dGxlbWVudF92b2x1bWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0cy5tYXhpbXVtX2ZvcmNlX3NldHRsZW1lbnRfdm9sdW1lIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0Q29uc3RhbnRzLkdSQVBIRU5FXzFfUEVSQ0VOVFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uVXBkYXRlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXhpbXVtX2ZvcmNlX3NldHRsZW1lbnRfdm9sdW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tbWFyZ2luIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFzc2V0U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5iYWNraW5nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uSW5wdXRCYWNraW5nQXNzZXQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUuYmFja2luZ0Fzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldElucHV0PXt0aGlzLnN0YXRlLmJhY2tpbmdBc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwiLCBwYWRkaW5nUmlnaHQ6IFwiMTBweFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Gb3VuZD17dGhpcy5fb25Gb3VuZEJhY2tpbmdBc3NldC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAge2Vycm9yID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgaGFzLWVycm9yXCI+e2Vycm9yfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuQml0QXNzZXRPcHRpb25zID0gQmluZFRvQ2hhaW5TdGF0ZShCaXRBc3NldE9wdGlvbnMpO1xyXG5cclxuY2xhc3MgQWNjb3VudEFzc2V0Q3JlYXRlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgY29yZTogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBnbG9iYWxPYmplY3Q6IFwiMi4wLjBcIixcclxuICAgICAgICBjb3JlOiBcIjEuMy4wXCJcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLnJlc2V0U3RhdGUocHJvcHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0U3RhdGUocHJvcHMpIHtcclxuICAgICAgICAvLyBsZXQgYXNzZXQgPSBwcm9wcy5hc3NldC50b0pTKCk7XHJcbiAgICAgICAgbGV0IGlzQml0QXNzZXQgPSBmYWxzZTtcclxuICAgICAgICBsZXQgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbig0KTtcclxuICAgICAgICBsZXQgY29yZVByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXHJcbiAgICAgICAgICAgIHByb3BzLmNvcmUuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IHtmbGFnQm9vbGVhbnMsIHBlcm1pc3Npb25Cb29sZWFuc30gPSB0aGlzLl9nZXRQZXJtaXNzaW9ucyh7XHJcbiAgICAgICAgICAgIGlzQml0QXNzZXRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gbGV0IGZsYWdzID0gYXNzZXRVdGlscy5nZXRGbGFncyhmbGFnQm9vbGVhbnMpO1xyXG4gICAgICAgIC8vIGxldCBwZXJtaXNzaW9ucyA9IGFzc2V0VXRpbHMuZ2V0UGVybWlzc2lvbnMocGVybWlzc2lvbkJvb2xlYW5zLCBpc0JpdEFzc2V0KTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImFsbCBwZXJtaXNzaW9uczpcIiwgcGVybWlzc2lvbkJvb2xlYW5zLCBwZXJtaXNzaW9ucylcclxuXHJcbiAgICAgICAgbGV0IGNvcmVSYXRlQmFzZUFzc2V0TmFtZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQoXCIxLjMuMFwiKS5nZXQoXCJzeW1ib2xcIik7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVwZGF0ZToge1xyXG4gICAgICAgICAgICAgICAgc3ltYm9sOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiA0LFxyXG4gICAgICAgICAgICAgICAgbWF4X3N1cHBseTogMTAwMDAwLFxyXG4gICAgICAgICAgICAgICAgbWF4X21hcmtldF9mZWU6IDAsXHJcbiAgICAgICAgICAgICAgICBtYXJrZXRfZmVlX3BlcmNlbnQ6IDAsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge21haW46IFwiXCJ9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yczoge1xyXG4gICAgICAgICAgICAgICAgbWF4X3N1cHBseTogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpc1ZhbGlkOiB0cnVlLFxyXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnM6IGZsYWdCb29sZWFucyxcclxuICAgICAgICAgICAgcGVybWlzc2lvbkJvb2xlYW5zOiBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGlzQml0QXNzZXQ6IGlzQml0QXNzZXQsXHJcbiAgICAgICAgICAgIGlzX3ByZWRpY3Rpb25fbWFya2V0OiBmYWxzZSxcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlOiB7XHJcbiAgICAgICAgICAgICAgICBxdW90ZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogMVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJhc2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NldF9pZDogXCIxLjMuMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogMVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiaXRhc3NldF9vcHRzOiB7XHJcbiAgICAgICAgICAgICAgICBmZWVkX2xpZmV0aW1lX3NlYzogNjAgKiA2MCAqIDI0LFxyXG4gICAgICAgICAgICAgICAgbWluaW11bV9mZWVkczogNyxcclxuICAgICAgICAgICAgICAgIGZvcmNlX3NldHRsZW1lbnRfZGVsYXlfc2VjOiA2MCAqIDYwICogMjQsXHJcbiAgICAgICAgICAgICAgICBmb3JjZV9zZXR0bGVtZW50X29mZnNldF9wZXJjZW50OlxyXG4gICAgICAgICAgICAgICAgICAgIDEgKiBhc3NldENvbnN0YW50cy5HUkFQSEVORV8xX1BFUkNFTlQsXHJcbiAgICAgICAgICAgICAgICBtYXhpbXVtX2ZvcmNlX3NldHRsZW1lbnRfdm9sdW1lOlxyXG4gICAgICAgICAgICAgICAgICAgIDIwICogYXNzZXRDb25zdGFudHMuR1JBUEhFTkVfMV9QRVJDRU5ULFxyXG4gICAgICAgICAgICAgICAgc2hvcnRfYmFja2luZ19hc3NldDogXCIxLjMuMFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1hcmtldElucHV0OiBcIlwiXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0UGVybWlzc2lvbnMoc3RhdGUpIHtcclxuICAgICAgICBsZXQgZmxhZ0Jvb2xlYW5zID0gYXNzZXRVdGlscy5nZXRGbGFnQm9vbGVhbnMoMCwgc3RhdGUuaXNCaXRBc3NldCk7XHJcbiAgICAgICAgbGV0IHBlcm1pc3Npb25Cb29sZWFucyA9IGFzc2V0VXRpbHMuZ2V0RmxhZ0Jvb2xlYW5zKFxyXG4gICAgICAgICAgICBcImFsbFwiLFxyXG4gICAgICAgICAgICBzdGF0ZS5pc0JpdEFzc2V0XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnNcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVBc3NldChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIHVwZGF0ZSxcclxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZSxcclxuICAgICAgICAgICAgaXNCaXRBc3NldCxcclxuICAgICAgICAgICAgaXNfcHJlZGljdGlvbl9tYXJrZXQsXHJcbiAgICAgICAgICAgIGJpdGFzc2V0X29wdHNcclxuICAgICAgICB9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgbGV0IHthY2NvdW50fSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGxldCBmbGFncyA9IGFzc2V0VXRpbHMuZ2V0RmxhZ3MoZmxhZ0Jvb2xlYW5zLCBpc0JpdEFzc2V0KTtcclxuICAgICAgICBsZXQgcGVybWlzc2lvbnMgPSBhc3NldFV0aWxzLmdldFBlcm1pc3Npb25zKFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGlzQml0QXNzZXRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5tYXJrZXRJbnB1dCAhPT0gdXBkYXRlLmRlc2NyaXB0aW9uLm1hcmtldCkge1xyXG4gICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb24ubWFya2V0ID0gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gSlNPTi5zdHJpbmdpZnkodXBkYXRlLmRlc2NyaXB0aW9uKTtcclxuXHJcbiAgICAgICAgQXNzZXRBY3Rpb25zLmNyZWF0ZUFzc2V0KFxyXG4gICAgICAgICAgICBhY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICB1cGRhdGUsXHJcbiAgICAgICAgICAgIGZsYWdzLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9ucyxcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLFxyXG4gICAgICAgICAgICBpc0JpdEFzc2V0LFxyXG4gICAgICAgICAgICBpc19wcmVkaWN0aW9uX21hcmtldCxcclxuICAgICAgICAgICAgYml0YXNzZXRfb3B0cyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb25cclxuICAgICAgICApLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgICAgICBcIi4uLiBBc3NldEFjdGlvbnMuY3JlYXRlQXNzZXQoYWNjb3VudF9pZCwgdXBkYXRlKVwiLFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZSxcclxuICAgICAgICAgICAgICAgIGZsYWdzLFxyXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbnNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFzQ2hhbmdlZCgpIHtcclxuICAgICAgICByZXR1cm4gIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLFxyXG4gICAgICAgICAgICB0aGlzLnJlc2V0U3RhdGUodGhpcy5wcm9wcylcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZXNldChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMucmVzZXRTdGF0ZSh0aGlzLnByb3BzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2ZvcmNlUG9zaXRpdmUobnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQobnVtYmVyKSA8IDAgPyBcIjBcIiA6IG51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICBfb25VcGRhdGVEZXNjcmlwdGlvbih2YWx1ZSwgZSkge1xyXG4gICAgICAgIGxldCB7dXBkYXRlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHVwZGF0ZVN0YXRlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiY29uZGl0aW9uXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUubGVuZ3RoID4gNjApIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTdGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV0gPSBlLnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcInNob3J0X25hbWVcIjpcclxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZS5sZW5ndGggPiAzMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVN0YXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uW3ZhbHVlXSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwibWFya2V0XCI6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcInZpc2libGVcIjpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV0gPSAhdXBkYXRlLmRlc2NyaXB0aW9uW3ZhbHVlXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV0gPSBlLnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHVwZGF0ZVN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGVFZGl0RmllbGRzKHVwZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlQml0QXNzZXRPcHRzKHZhbHVlLCBlKSB7XHJcbiAgICAgICAgbGV0IHtiaXRhc3NldF9vcHRzLCBlcnJvcnN9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZm9yY2Vfc2V0dGxlbWVudF9vZmZzZXRfcGVyY2VudFwiOlxyXG4gICAgICAgICAgICBjYXNlIFwibWF4aW11bV9mb3JjZV9zZXR0bGVtZW50X3ZvbHVtZVwiOlxyXG4gICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0c1t2YWx1ZV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpICpcclxuICAgICAgICAgICAgICAgICAgICBhc3NldENvbnN0YW50cy5HUkFQSEVORV8xX1BFUkNFTlQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIm1pbmltdW1fZmVlZHNcIjpcclxuICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHNbdmFsdWVdID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUsIDEwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZmVlZF9saWZldGltZV9zZWNcIjpcclxuICAgICAgICAgICAgY2FzZSBcImZvcmNlX3NldHRsZW1lbnRfZGVsYXlfc2VjXCI6XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChwYXJzZUZsb2F0KGUudGFyZ2V0LnZhbHVlKSAqIDYwLCAxMClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzW3ZhbHVlXSA9IHBhcnNlSW50KFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpICogNjAsXHJcbiAgICAgICAgICAgICAgICAgICAgMTBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJzaG9ydF9iYWNraW5nX2Fzc2V0XCI6XHJcbiAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzW3ZhbHVlXSA9IGU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJpbnZhbGlkXCI6XHJcbiAgICAgICAgICAgICAgICBlcnJvcnMuaW52YWxpZF9iaXRhc3NldCA9IGU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzW3ZhbHVlXSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaXNWYWxpZCA9XHJcbiAgICAgICAgICAgICFlcnJvcnMuc3ltYm9sICYmICFlcnJvcnMubWF4X3N1cHBseSAmJiAhZXJyb3JzLmludmFsaWRfYml0YXNzZXQ7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzVmFsaWQ6IGlzVmFsaWQsIGVycm9yczogZXJyb3JzfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uVXBkYXRlSW5wdXQodmFsdWUsIGUpIHtcclxuICAgICAgICBsZXQge3VwZGF0ZSwgZXJyb3JzfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHVwZGF0ZVN0YXRlID0gdHJ1ZTtcclxuICAgICAgICBsZXQgc2hvdWxkUmVzdG9yZUN1cnNvciA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBwcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKHRoaXMuc3RhdGUudXBkYXRlLnByZWNpc2lvbik7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XHJcbiAgICAgICAgY29uc3QgY2FyZXQgPSB0YXJnZXQuc2VsZWN0aW9uU3RhcnQ7XHJcbiAgICAgICAgY29uc3QgaW5wdXRWYWx1ZSA9IHRhcmdldC52YWx1ZTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwibWFya2V0X2ZlZV9wZXJjZW50XCI6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdGhpcy5fZm9yY2VQb3NpdGl2ZSh0YXJnZXQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwibWF4X21hcmtldF9mZWVcIjpcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICBuZXcgYmlnKGlucHV0VmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aW1lcyhwcmVjaXNpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5ndChHUkFQSEVORV9NQVhfU0hBUkVfU1VQUExZKVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzLm1heF9tYXJrZXRfZmVlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJUaGUgbnVtYmVyIHlvdSB0cmllZCB0byBlbnRlciBpcyB0b28gbGFyZ2VcIjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7ZXJyb3JzfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWUgPSB1dGlscy5saW1pdEJ5UHJlY2lzaW9uKFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnVwZGF0ZS5wcmVjaXNpb25cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwicHJlY2lzaW9uXCI6XHJcbiAgICAgICAgICAgICAgICAvLyBFbmZvcmNlIHBvc2l0aXZlIG51bWJlclxyXG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IHRoaXMuX2ZvcmNlUG9zaXRpdmUodGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcIm1heF9zdXBwbHlcIjpcclxuICAgICAgICAgICAgICAgIHNob3VsZFJlc3RvcmVDdXJzb3IgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4cF9udW1lcmFsID0gbmV3IFJlZ0V4cCgvW1s6ZGlnaXQ6XV0vKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgaW5wdXQgaXMgdmFsaWRcclxuICAgICAgICAgICAgICAgIGlmICghcmVnZXhwX251bWVyYWwudGVzdCh0YXJnZXQudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlID0gdGFyZ2V0LnZhbHVlLnJlcGxhY2UoL1teMC05Ll0vZywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ2F0Y2ggaW5pdGlhbCBkZWNpbWFsIGlucHV0XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LnZhbHVlLmNoYXJBdCgwKSA9PSBcIi5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZSA9IFwiMC5cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDYXRjaCBkb3VibGUgZGVjaW1hbCBhbmQgcmVtb3ZlIGlmIGludmFsaWRcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWUuY2hhckF0KHRhcmdldC52YWx1ZS5sZW5ndGgpICE9XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlLnNlYXJjaChcIi5cIilcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZS5zdWJzdHIoMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlID0gdXRpbHMubGltaXRCeVByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS51cGRhdGUucHJlY2lzaW9uXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IHRhcmdldC52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiAoKG5ldyBiaWcodGFyZ2V0LnZhbHVlKSkudGltZXMoTWF0aC5wb3coMTAsIHByZWNpc2lvbikuZ3QoR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWSkpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHVwZGF0ZSxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgZXJyb3JzOiB7bWF4X3N1cHBseTogXCJUaGUgbnVtYmVyIHlvdSB0cmllZCB0byBlbnRlciBpcyB0b28gbGFyZ2VcIlxyXG4gICAgICAgICAgICAgICAgLy8gICAgIH19KTtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxyXG4gICAgICAgICAgICAgICAgc2hvdWxkUmVzdG9yZUN1cnNvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBFbmZvcmNlIHVwcGVyY2FzZVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3ltYm9sID0gdGFyZ2V0LnZhbHVlLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBFbmZvcmNlIGNoYXJhY3RlcnNcclxuICAgICAgICAgICAgICAgIGxldCByZWdleHAgPSBuZXcgUmVnRXhwKFwiXlsuQS1aMC05XSskXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN5bWJvbCAhPT0gXCJcIiAmJiAhcmVnZXhwLnRlc3Qoc3ltYm9sKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRBc3NldChzeW1ib2wpO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IHRoaXMuX2ZvcmNlUG9zaXRpdmUoc3ltYm9sKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVt2YWx1ZV0gPSB0YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh1cGRhdGVTdGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHt1cGRhdGU6IHVwZGF0ZX0sICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzaG91bGRSZXN0b3JlQ3Vyc29yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0aW9uU3RhcnQgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJldCAtIChpbnB1dFZhbHVlLmxlbmd0aCAtIHVwZGF0ZVt2YWx1ZV0ubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2Uoc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvblN0YXJ0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRlRWRpdEZpZWxkcyh1cGRhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfdmFsaWRhdGVFZGl0RmllbGRzKG5ld19zdGF0ZSkge1xyXG4gICAgICAgIGxldCB7ZXJyb3JzfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgZXJyb3JzLm1heF9zdXBwbHkgPSBudWxsO1xyXG5cclxuICAgICAgICBlcnJvcnMuc3ltYm9sID0gQ2hhaW5WYWxpZGF0aW9uLmlzX3ZhbGlkX3N5bWJvbF9lcnJvcihuZXdfc3RhdGUuc3ltYm9sKTtcclxuICAgICAgICBsZXQgZXhpc3RpbmdBc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQobmV3X3N0YXRlLnN5bWJvbCk7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nQXNzZXQpIHtcclxuICAgICAgICAgICAgZXJyb3JzLnN5bWJvbCA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZXhpc3RzXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5tYXhfc3VwcGx5ID1cclxuICAgICAgICAgICAgICAgIG5ld19zdGF0ZS5tYXhfc3VwcGx5IDw9IDBcclxuICAgICAgICAgICAgICAgICAgICA/IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1heF9wb3NpdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgYmlnKG5ld19zdGF0ZS5tYXhfc3VwcGx5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC50aW1lcyhNYXRoLnBvdygxMCwgbmV3X3N0YXRlLnByZWNpc2lvbikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmd0KEdSQVBIRU5FX01BWF9TSEFSRV9TVVBQTFkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnRvb19sYXJnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICBlcnJvcnMubWF4X3N1cHBseSA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMudG9vX2xhcmdlXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpc1ZhbGlkID1cclxuICAgICAgICAgICAgIWVycm9ycy5zeW1ib2wgJiYgIWVycm9ycy5tYXhfc3VwcGx5ICYmICFlcnJvcnMuaW52YWxpZF9iaXRhc3NldDtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNWYWxpZDogaXNWYWxpZCwgZXJyb3JzOiBlcnJvcnN9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25GbGFnQ2hhbmdlKGtleSkge1xyXG4gICAgICAgIGxldCBib29sZWFucyA9IHRoaXMuc3RhdGUuZmxhZ0Jvb2xlYW5zO1xyXG4gICAgICAgIGJvb2xlYW5zW2tleV0gPSAhYm9vbGVhbnNba2V5XTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zOiBib29sZWFuc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblBlcm1pc3Npb25DaGFuZ2Uoa2V5KSB7XHJcbiAgICAgICAgbGV0IGJvb2xlYW5zID0gdGhpcy5zdGF0ZS5wZXJtaXNzaW9uQm9vbGVhbnM7XHJcbiAgICAgICAgYm9vbGVhbnNba2V5XSA9ICFib29sZWFuc1trZXldO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnM6IGJvb2xlYW5zXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uSW5wdXRDb3JlQXNzZXQodHlwZSwgYXNzZXQpIHtcclxuICAgICAgICBpZiAodHlwZSA9PT0gXCJxdW90ZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgcXVvdGVBc3NldElucHV0OiBhc3NldFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiYmFzZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgYmFzZUFzc2V0SW5wdXQ6IGFzc2V0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25Gb3VuZENvcmVBc3NldCh0eXBlLCBhc3NldCkge1xyXG4gICAgICAgIGlmIChhc3NldCkge1xyXG4gICAgICAgICAgICBsZXQgY29yZV9yYXRlID0gdGhpcy5zdGF0ZS5jb3JlX2V4Y2hhbmdlX3JhdGU7XHJcbiAgICAgICAgICAgIGNvcmVfcmF0ZVt0eXBlXS5hc3NldF9pZCA9IGFzc2V0LmdldChcImlkXCIpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGU6IGNvcmVfcmF0ZVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRlRWRpdEZpZWxkcyh7XHJcbiAgICAgICAgICAgICAgICBtYXhfc3VwcGx5OiB0aGlzLnN0YXRlLm1heF9zdXBwbHksXHJcbiAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGU6IGNvcmVfcmF0ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uSW5wdXRNYXJrZXQoYXNzZXQpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgbWFya2V0SW5wdXQ6IGFzc2V0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uRm91bmRNYXJrZXRBc3NldChhc3NldCkge1xyXG4gICAgICAgIGlmIChhc3NldCkge1xyXG4gICAgICAgICAgICB0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uKFwibWFya2V0XCIsIGFzc2V0LmdldChcInN5bWJvbFwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vbkNvcmVSYXRlQ2hhbmdlKHR5cGUsIGUpIHtcclxuICAgICAgICBsZXQgYW1vdW50LCBhc3NldDtcclxuICAgICAgICBpZiAodHlwZSA9PT0gXCJxdW90ZVwiKSB7XHJcbiAgICAgICAgICAgIGFtb3VudCA9IHV0aWxzLmxpbWl0QnlQcmVjaXNpb24oXHJcbiAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSxcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudXBkYXRlLnByZWNpc2lvblxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBhc3NldCA9IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCFlIHx8ICEoXCJhbW91bnRcIiBpbiBlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFtb3VudCA9XHJcbiAgICAgICAgICAgICAgICBlLmFtb3VudCA9PSBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgPyBcIjBcIlxyXG4gICAgICAgICAgICAgICAgICAgIDogdXRpbHMubGltaXRCeVByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBlLmFtb3VudC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgXCJcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jb3JlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgYXNzZXQgPSBlLmFzc2V0LmdldChcImlkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHtjb3JlX2V4Y2hhbmdlX3JhdGV9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVbdHlwZV0gPSB7XHJcbiAgICAgICAgICAgIGFtb3VudDogYW1vdW50LFxyXG4gICAgICAgICAgICBhc3NldF9pZDogYXNzZXRcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Ub2dnbGVCaXRBc3NldCgpIHtcclxuICAgICAgICBsZXQge3VwZGF0ZX0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIHRoaXMuc3RhdGUuaXNCaXRBc3NldCA9ICF0aGlzLnN0YXRlLmlzQml0QXNzZXQ7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmlzQml0QXNzZXQpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc19wcmVkaWN0aW9uX21hcmtldCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHtmbGFnQm9vbGVhbnMsIHBlcm1pc3Npb25Cb29sZWFuc30gPSB0aGlzLl9nZXRQZXJtaXNzaW9ucyhcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5mbGFnQm9vbGVhbnMgPSBmbGFnQm9vbGVhbnM7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5wZXJtaXNzaW9uQm9vbGVhbnMgPSBwZXJtaXNzaW9uQm9vbGVhbnM7XHJcblxyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Ub2dnbGVQTSgpIHtcclxuICAgICAgICB0aGlzLnN0YXRlLmlzX3ByZWRpY3Rpb25fbWFya2V0ID0gIXRoaXMuc3RhdGUuaXNfcHJlZGljdGlvbl9tYXJrZXQ7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS51cGRhdGUucHJlY2lzaW9uID0gdGhpcy5wcm9wcy5jb3JlLmdldChcInByZWNpc2lvblwiKTtcclxuICAgICAgICB0aGlzLnN0YXRlLmNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFzc2V0X2lkID0gdGhpcy5wcm9wcy5jb3JlLmdldChcImlkXCIpO1xyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtnbG9iYWxPYmplY3QsIGNvcmV9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICBlcnJvcnMsXHJcbiAgICAgICAgICAgIGlzVmFsaWQsXHJcbiAgICAgICAgICAgIHVwZGF0ZSxcclxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZSxcclxuICAgICAgICAgICAgaXNfcHJlZGljdGlvbl9tYXJrZXQsXHJcbiAgICAgICAgICAgIGlzQml0QXNzZXQsXHJcbiAgICAgICAgICAgIGJpdGFzc2V0X29wdHNcclxuICAgICAgICB9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgLy8gRXN0aW1hdGUgdGhlIGFzc2V0IGNyZWF0aW9uIGZlZSBmcm9tIHRoZSBzeW1ib2wgY2hhcmFjdGVyIGxlbmd0aFxyXG4gICAgICAgIGxldCBzeW1ib2xMZW5ndGggPSB1cGRhdGUuc3ltYm9sLmxlbmd0aCxcclxuICAgICAgICAgICAgY3JlYXRlRmVlID0gXCJOL0FcIjtcclxuXHJcbiAgICAgICAgaWYgKHN5bWJvbExlbmd0aCA9PT0gMykge1xyXG4gICAgICAgICAgICBjcmVhdGVGZWUgPSAoXHJcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2VzdGltYXRlRmVlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImFzc2V0X2NyZWF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbXCJzeW1ib2wzXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxPYmplY3RcclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcIjEuMy4wXCJ9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc3ltYm9sTGVuZ3RoID09PSA0KSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZUZlZSA9IChcclxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudD17ZXN0aW1hdGVGZWUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfY3JlYXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcInN5bWJvbDRcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbE9iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e1wiMS4zLjBcIn1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzeW1ib2xMZW5ndGggPiA0KSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZUZlZSA9IChcclxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudD17ZXN0aW1hdGVGZWUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfY3JlYXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcImxvbmdfc3ltYm9sXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxPYmplY3RcclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcIjEuMy4wXCJ9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTG9vcCBvdmVyIGZsYWdzXHJcbiAgICAgICAgbGV0IGZsYWdzID0gW107XHJcbiAgICAgICAgbGV0IGdldEZsYWcgPSAoa2V5LCBvbkNsaWNrLCBpc0NoZWNrZWQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDx0YWJsZSBrZXk9e1widGFibGVfXCIgKyBrZXl9IGNsYXNzTmFtZT1cInRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwiLCB3aWR0aDogXCI4MCVcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17YGFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLiR7a2V5fWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiBcIm5vbmVcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic3dpdGNoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5Cb3R0b206IFwiMTBweFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2lzQ2hlY2tlZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHBlcm1pc3Npb25Cb29sZWFucykge1xyXG4gICAgICAgICAgICBpZiAocGVybWlzc2lvbkJvb2xlYW5zW2tleV0gJiYga2V5ICE9PSBcImNoYXJnZV9tYXJrZXRfZmVlXCIpIHtcclxuICAgICAgICAgICAgICAgIGZsYWdzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0RmxhZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkZsYWdDaGFuZ2UuYmluZCh0aGlzLCBrZXkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnQm9vbGVhbnNba2V5XVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZsYWdzLnB1c2goXHJcbiAgICAgICAgICAgIGdldEZsYWcoXHJcbiAgICAgICAgICAgICAgICBcInZpc2libGVcIixcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24uYmluZCh0aGlzLCBcInZpc2libGVcIiksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb24udmlzaWJsZVxyXG4gICAgICAgICAgICAgICAgICAgID8gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICA6IHVwZGF0ZS5kZXNjcmlwdGlvbi52aXNpYmxlID09PSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gTG9vcCBvdmVyIHBlcm1pc3Npb25zXHJcbiAgICAgICAgbGV0IHBlcm1pc3Npb25zID0gW107XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHBlcm1pc3Npb25Cb29sZWFucykge1xyXG4gICAgICAgICAgICBwZXJtaXNzaW9ucy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgPHRhYmxlIGtleT17XCJ0YWJsZV9cIiArIGtleX0gY2xhc3NOYW1lPVwidGFibGVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e2JvcmRlcjogXCJub25lXCIsIHdpZHRoOiBcIjgwJVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtgYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuJHtrZXl9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzd2l0Y2hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbkJvdHRvbTogXCIxMHB4XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblBlcm1pc3Npb25DaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3Blcm1pc3Npb25Cb29sZWFuc1trZXldfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHt9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjb25maXJtQnV0dG9ucyA9IChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3Jlc2V0LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQucGVybS5yZXNldFwiKX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucmVzZXRcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKFwiYnV0dG9uXCIsIHtkaXNhYmxlZDogIWlzVmFsaWR9KX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9jcmVhdGVBc3NldC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImhlYWRlci5jcmVhdGVfYXNzZXRcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLWNvbnRhaW5lciBnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiaGVhZGVyLmNyZWF0ZV9hc3NldFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwiY3JlYXRlQXNzZXRUYWJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWNjb3VudC10YWJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNDbGFzcz1cImFjY291bnQtb3ZlcnZpZXcgbm8tcGFkZGluZyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50Q2xhc3M9XCJncmlkLWJsb2NrIHNocmluayBzbWFsbC12ZXJ0aWNhbCBtZWRpdW0taG9yaXpvbnRhbCBwYWRkaW5nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b25zPXtjb25maXJtQnV0dG9uc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnByaW1hcnlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5zeW1ib2xcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt1cGRhdGUuc3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZUlucHV0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3ltYm9sXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5zeW1ib2wgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5zeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWF4X3N1cHBseVwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3VwZGF0ZS5zeW1ib2wgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+KHt1cGRhdGUuc3ltYm9sfSk8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dXBkYXRlLm1heF9zdXBwbHl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXhfc3VwcGx5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfc3VwcGx5ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMubWF4X3N1cHBseX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5kZWNpbWFsc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW49XCIwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg9XCI4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwPVwiMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInJhbmdlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dXBkYXRlLnByZWNpc2lvbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVJbnB1dC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInByZWNpc2lvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPnt1cGRhdGUucHJlY2lzaW9ufTwvcD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luQm90dG9tOiAxMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0eHRsYWJlbCBjYW5jZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wcmVjaXNpb25fd2FybmluZ1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiBcImluaGVyaXRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e2JvcmRlcjogXCJub25lXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tcGFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e2JvcmRlcjogXCJub25lXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzd2l0Y2hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogXCIxMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uVG9nZ2xlQml0QXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2lzQml0QXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lzQml0QXNzZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCJpbmhlcml0XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2JvcmRlcjogXCJub25lXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic3dpdGNoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjEwcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblRvZ2dsZVBNLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19wcmVkaWN0aW9uX21hcmtldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIENFUiAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiaDNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmNvcmVfZXhjaGFuZ2VfcmF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tbWFyZ2luXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5xdW90ZV9hc3NldCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5xdW90ZV9hc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMuYmFzZV9hc3NldCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5iYXNlX2Fzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpbiBzbWFsbC0xMiBtZWRpdW0tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhbW91bnQtc2VsZWN0b3JcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBcIjEwcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMucXVvdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5saW5lLWxhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25Db3JlUmF0ZUNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicXVvdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucXVvdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1tYXJnaW4gc21hbGwtMTIgbWVkaXVtLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFtb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmJhc2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25Db3JlUmF0ZUNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLmJhc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFzc2V0X2lkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHM9e1tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiBcIjEwcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnByaWNlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3V0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuZ2V0X2Fzc2V0X3ByaWNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5xdW90ZS5hbW91bnQgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucHJlY2lzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVjaXNpb246XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLnByZWNpc2lvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYXNlLmFtb3VudCAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocGFyc2VJbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucHJlY2lzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB8fCA4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1cGRhdGUuc3ltYm9sfS9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb3JlLmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY2VyX3dhcm5pbmdfMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwibGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhhcy1lcnJvclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5jZXJfd2FybmluZ18yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5hcHByb3hfZmVlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHtjcmVhdGVGZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5kZXNjcmlwdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5kZXNjcmlwdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7aGVpZ2h0OiBcIjdyZW1cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz1cIjFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt1cGRhdGUuZGVzY3JpcHRpb24ubWFpbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVEZXNjcmlwdGlvbi5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1haW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwibGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnNob3J0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvbi5zaG9ydF9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2hvcnRfbmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJsYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWFya2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25JbnB1dE1hcmtldC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17dGhpcy5zdGF0ZS5tYXJrZXRJbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0SW5wdXQ9e3RoaXMuc3RhdGUubWFya2V0SW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IFwiMTBweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Gb3VuZD17dGhpcy5fb25Gb3VuZE1hcmtldEFzc2V0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc19wcmVkaWN0aW9uX21hcmtldCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5jb25kaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmRpdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29uZGl0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5leHBpcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJkYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmV4cGlyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhwaXJ5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0JpdEFzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5iaXRhc3NldF9vcHRzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCaXRBc3NldE9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHM9e2JpdGFzc2V0X29wdHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZT17dGhpcy5vbkNoYW5nZUJpdEFzc2V0T3B0cy5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNraW5nQXNzZXQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHMuc2hvcnRfYmFja2luZ19hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRQcmVjaXNpb249e3VwZGF0ZS5wcmVjaXNpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldFN5bWJvbD17dXBkYXRlLnN5bWJvbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUHJlZGljdGlvbk1hcmtldD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcHJlZGljdGlvbl9tYXJrZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnBlcm1pc3Npb25zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e21heFdpZHRoOiA4MDB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIZWxwQ29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbXBvbmVudHMvQWNjb3VudEFzc2V0Q3JlYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbj1cInBlcm1pc3Npb25zXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cGVybWlzc2lvbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZmxhZ3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7bWF4V2lkdGg6IDgwMH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEhlbHBDb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29tcG9uZW50cy9BY2NvdW50QXNzZXRDcmVhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uPVwiZmxhZ3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwZXJtaXNzaW9uQm9vbGVhbnNbXCJjaGFyZ2VfbWFya2V0X2ZlZVwiXSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXJrZXRfZmVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiODAlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmNoYXJnZV9tYXJrZXRfZmVlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzd2l0Y2hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiMTBweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25GbGFnQ2hhbmdlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNoYXJnZV9tYXJrZXRfZmVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdCb29sZWFucy5jaGFyZ2VfbWFya2V0X2ZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhZmxhZ0Jvb2xlYW5zLmNoYXJnZV9tYXJrZXRfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWFya2V0X2ZlZVwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5tYXJrZXRfZmVlX3BlcmNlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXJrZXRfZmVlX3BlcmNlbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWF4X21hcmtldF9mZWVcIiAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh7dXBkYXRlLnN5bWJvbH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5tYXhfbWFya2V0X2ZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVJbnB1dC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1heF9tYXJrZXRfZmVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfbWFya2V0X2ZlZSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBoYXMtZXJyb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLm1heF9tYXJrZXRfZmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZsYWdzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZsYWdzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5BY2NvdW50QXNzZXRDcmVhdGUgPSBCaW5kVG9DaGFpblN0YXRlKEFjY291bnRBc3NldENyZWF0ZSk7XHJcblxyXG5leHBvcnQge0FjY291bnRBc3NldENyZWF0ZSwgQml0QXNzZXRPcHRpb25zfTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XHJcbmltcG9ydCBBc3NldEFjdGlvbnMgZnJvbSBcImFjdGlvbnMvQXNzZXRBY3Rpb25zXCI7XHJcbmltcG9ydCBIZWxwQ29udGVudCBmcm9tIFwiLi4vVXRpbGl0eS9IZWxwQ29udGVudFwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgRm9ybWF0dGVkRmVlIGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZEZlZVwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgQXNzZXRXcmFwcGVyIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0V3JhcHBlclwiO1xyXG5pbXBvcnQgQW1vdW50U2VsZWN0b3IgZnJvbSBcIi4uL1V0aWxpdHkvQW1vdW50U2VsZWN0b3JcIjtcclxuaW1wb3J0IEZvcm1hdHRlZFByaWNlIGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZFByaWNlXCI7XHJcbmltcG9ydCBBc3NldFNlbGVjdG9yIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0U2VsZWN0b3JcIjtcclxuaW1wb3J0IGJpZyBmcm9tIFwiYmlnbnVtYmVyLmpzXCI7XHJcbmltcG9ydCBjbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcclxuaW1wb3J0IGFzc2V0VXRpbHMgZnJvbSBcImNvbW1vbi9hc3NldF91dGlsc1wiO1xyXG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xyXG5pbXBvcnQge0JpdEFzc2V0T3B0aW9uc30gZnJvbSBcIi4vQWNjb3VudEFzc2V0Q3JlYXRlXCI7XHJcbmltcG9ydCBhc3NldENvbnN0YW50cyBmcm9tIFwiY2hhaW4vYXNzZXRfY29uc3RhbnRzXCI7XHJcbmltcG9ydCBBc3NldFdoaXRlbGlzdCBmcm9tIFwiLi9Bc3NldFdoaXRlbGlzdFwiO1xyXG5pbXBvcnQgQXNzZXRGZWVkUHJvZHVjZXJzIGZyb20gXCIuL0Fzc2V0RmVlZFByb2R1Y2Vyc1wiO1xyXG5pbXBvcnQgQmFzZU1vZGFsIGZyb20gXCJjb21wb25lbnRzL01vZGFsL0Jhc2VNb2RhbFwiO1xyXG5pbXBvcnQgWmZBcGkgZnJvbSBcInJlYWN0LWZvdW5kYXRpb24tYXBwcy9zcmMvdXRpbHMvZm91bmRhdGlvbi1hcGlcIjtcclxuaW1wb3J0IHt3aXRoUm91dGVyfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5cclxubGV0IEdSQVBIRU5FX01BWF9TSEFSRV9TVVBQTFkgPSBuZXcgYmlnKFxyXG4gICAgYXNzZXRDb25zdGFudHMuR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWVxyXG4pO1xyXG5cclxuY2xhc3MgQWNjb3VudEFzc2V0VXBkYXRlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBnbG9iYWxPYmplY3Q6IFwiMi4wLjBcIlxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMucmVzZXRTdGF0ZShwcm9wcyk7XHJcbiAgICB9XHJcblxyXG4gICAgX29wZW5Db25maXJtKCkge1xyXG4gICAgICAgIHRoaXMucmVmcy5jb25maXJtX21vZGFsLnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICBfY2FuY2VsQ29uZmlybSgpIHtcclxuICAgICAgICB0aGlzLnJlZnMuY29uZmlybV9tb2RhbC5vbkNsb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRTdGF0ZShwcm9wcykge1xyXG4gICAgICAgIGxldCBhc3NldCA9IHByb3BzLmFzc2V0LnRvSlMoKTtcclxuICAgICAgICBsZXQgaXNCaXRBc3NldCA9IGFzc2V0LmJpdGFzc2V0X2RhdGFfaWQgIT09IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihhc3NldC5wcmVjaXNpb24pO1xyXG4gICAgICAgIGxldCBjb3JlUHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihcclxuICAgICAgICAgICAgcHJvcHMuY29yZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBsZXQgbWF4X21hcmtldF9mZWUgPSBuZXcgYmlnKGFzc2V0Lm9wdGlvbnMubWF4X21hcmtldF9mZWUpXHJcbiAgICAgICAgICAgIC5kaXYocHJlY2lzaW9uKVxyXG4gICAgICAgICAgICAudG9TdHJpbmcoKTtcclxuICAgICAgICBsZXQgbWF4X3N1cHBseSA9IG5ldyBiaWcoYXNzZXQub3B0aW9ucy5tYXhfc3VwcGx5KVxyXG4gICAgICAgICAgICAuZGl2KHByZWNpc2lvbilcclxuICAgICAgICAgICAgLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgbGV0IGNvcmVfZXhjaGFuZ2VfcmF0ZSA9IGFzc2V0Lm9wdGlvbnMuY29yZV9leGNoYW5nZV9yYXRlO1xyXG4gICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZS5hbW91bnQgPVxyXG4gICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGUuYXNzZXRfaWQgPT09IGFzc2V0LmlkXHJcbiAgICAgICAgICAgICAgICA/IG5ldyBiaWcoY29yZV9leGNoYW5nZV9yYXRlLnF1b3RlLmFtb3VudClcclxuICAgICAgICAgICAgICAgICAgICAgIC5kaXYocHJlY2lzaW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgIDogbmV3IGJpZyhjb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGUuYW1vdW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgLmRpdihjb3JlUHJlY2lzaW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFtb3VudCA9XHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFzc2V0X2lkID09PSBhc3NldC5pZFxyXG4gICAgICAgICAgICAgICAgPyBuZXcgYmlnKGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFtb3VudClcclxuICAgICAgICAgICAgICAgICAgICAgIC5kaXYocHJlY2lzaW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgIDogbmV3IGJpZyhjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZS5hbW91bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAuZGl2KGNvcmVQcmVjaXNpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgbGV0IGZsYWdCb29sZWFucyA9IGFzc2V0VXRpbHMuZ2V0RmxhZ0Jvb2xlYW5zKFxyXG4gICAgICAgICAgICBhc3NldC5vcHRpb25zLmZsYWdzLFxyXG4gICAgICAgICAgICBpc0JpdEFzc2V0XHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgcGVybWlzc2lvbkJvb2xlYW5zID0gYXNzZXRVdGlscy5nZXRGbGFnQm9vbGVhbnMoXHJcbiAgICAgICAgICAgIGFzc2V0Lm9wdGlvbnMuaXNzdWVyX3Blcm1pc3Npb25zLFxyXG4gICAgICAgICAgICBpc0JpdEFzc2V0XHJcbiAgICAgICAgKTtcclxuICAgICAgICBhc3NldC5vcHRpb25zLm1hcmtldF9mZWVfcGVyY2VudCAvPSAxMDA7XHJcblxyXG4gICAgICAgIGxldCBjb3JlUmF0ZVF1b3RlQXNzZXROYW1lID0gQ2hhaW5TdG9yZS5nZXRBc3NldChcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLnF1b3RlLmFzc2V0X2lkXHJcbiAgICAgICAgKS5nZXQoXCJzeW1ib2xcIik7XHJcbiAgICAgICAgbGV0IGNvcmVSYXRlQmFzZUFzc2V0TmFtZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQoXHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFzc2V0X2lkXHJcbiAgICAgICAgKS5nZXQoXCJzeW1ib2xcIik7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVwZGF0ZToge1xyXG4gICAgICAgICAgICAgICAgbWF4X3N1cHBseTogbWF4X3N1cHBseSxcclxuICAgICAgICAgICAgICAgIG1heF9tYXJrZXRfZmVlOiBtYXhfbWFya2V0X2ZlZSxcclxuICAgICAgICAgICAgICAgIG1hcmtldF9mZWVfcGVyY2VudDogYXNzZXQub3B0aW9ucy5tYXJrZXRfZmVlX3BlcmNlbnQsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYXNzZXRVdGlscy5wYXJzZURlc2NyaXB0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0Lm9wdGlvbnMuZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlOiBjb3JlX2V4Y2hhbmdlX3JhdGUsXHJcbiAgICAgICAgICAgIGlzc3VlcjogYXNzZXQuaXNzdWVyLFxyXG4gICAgICAgICAgICBuZXdfaXNzdWVyX2FjY291bnRfaWQ6IG51bGwsXHJcbiAgICAgICAgICAgIG5ld19mdW5kZXJfYWNjb3VudDogcHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgYXNzZXRfdG9fdXBkYXRlOiBhc3NldC5pZCxcclxuICAgICAgICAgICAgZXJyb3JzOiB7XHJcbiAgICAgICAgICAgICAgICBtYXhfc3VwcGx5OiBudWxsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG5ld19hdXRob3JpdHlfaWQ6IG51bGwsXHJcbiAgICAgICAgICAgIGF1dGhvcml0eV9uYW1lOiBudWxsLFxyXG4gICAgICAgICAgICBpc1ZhbGlkOiB0cnVlLFxyXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnM6IGZsYWdCb29sZWFucyxcclxuICAgICAgICAgICAgcGVybWlzc2lvbkJvb2xlYW5zOiBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGlzQml0QXNzZXQ6IGlzQml0QXNzZXQsXHJcbiAgICAgICAgICAgIGNvcmVSYXRlUXVvdGVBc3NldE5hbWU6IGNvcmVSYXRlUXVvdGVBc3NldE5hbWUsXHJcbiAgICAgICAgICAgIHF1b3RlQXNzZXRJbnB1dDogY29yZVJhdGVRdW90ZUFzc2V0TmFtZSxcclxuICAgICAgICAgICAgY29yZVJhdGVCYXNlQXNzZXROYW1lOiBjb3JlUmF0ZUJhc2VBc3NldE5hbWUsXHJcbiAgICAgICAgICAgIGJhc2VBc3NldElucHV0OiBjb3JlUmF0ZUJhc2VBc3NldE5hbWUsXHJcbiAgICAgICAgICAgIGNsYWltRmVlc0Ftb3VudDogMCxcclxuICAgICAgICAgICAgYml0YXNzZXRfb3B0czogaXNCaXRBc3NldCA/IGFzc2V0LmJpdGFzc2V0Lm9wdGlvbnMgOiBudWxsLFxyXG4gICAgICAgICAgICBvcmlnaW5hbF9iaXRhc3NldF9vcHRzOiBpc0JpdEFzc2V0XHJcbiAgICAgICAgICAgICAgICA/IHByb3BzLmFzc2V0LmdldEluKFtcImJpdGFzc2V0XCIsIFwib3B0aW9uc1wiXSkudG9KUygpXHJcbiAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgIG1hcmtldElucHV0OiBcIlwiLFxyXG4gICAgICAgICAgICB3aGl0ZWxpc3RfYXV0aG9yaXRpZXM6IHByb3BzLmFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgIFwib3B0aW9uc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJ3aGl0ZWxpc3RfYXV0aG9yaXRpZXNcIlxyXG4gICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgYmxhY2tsaXN0X2F1dGhvcml0aWVzOiBwcm9wcy5hc3NldC5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcclxuICAgICAgICAgICAgICAgIFwiYmxhY2tsaXN0X2F1dGhvcml0aWVzXCJcclxuICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgIHdoaXRlbGlzdF9tYXJrZXRzOiBwcm9wcy5hc3NldC5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcclxuICAgICAgICAgICAgICAgIFwid2hpdGVsaXN0X21hcmtldHNcIlxyXG4gICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgYmxhY2tsaXN0X21hcmtldHM6IHByb3BzLmFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgIFwib3B0aW9uc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJibGFja2xpc3RfbWFya2V0c1wiXHJcbiAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICBtYXhGZWVkUHJvZHVjZXJzOiBwcm9wcy5nbG9iYWxPYmplY3QuZ2V0SW4oW1xyXG4gICAgICAgICAgICAgICAgXCJwYXJhbWV0ZXJzXCIsXHJcbiAgICAgICAgICAgICAgICBcIm1heGltdW1fYXNzZXRfZmVlZF9wdWJsaXNoZXJzXCJcclxuICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgIGZlZWRQcm9kdWNlcnM6IGlzQml0QXNzZXRcclxuICAgICAgICAgICAgICAgID8gcHJvcHMuYXNzZXQuZ2V0SW4oW1wiYml0YXNzZXRcIiwgXCJmZWVkc1wiXSwgW10pLm1hcChhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsRmVlZFByb2R1Y2VyczogaXNCaXRBc3NldFxyXG4gICAgICAgICAgICAgICAgPyBwcm9wcy5hc3NldC5nZXRJbihbXCJiaXRhc3NldFwiLCBcImZlZWRzXCJdLCBbXSkubWFwKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIDogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXNpbmcgSlNPTi5zdHJpbmdpZnkgZm9yIChmYXN0PykgY29tcGFyc2lvbiwgY291bGQgYmUgaW1wcm92ZWQsIGJ1dCBzZWVtcyBlbm91Z2ggaGVyZSBhcyB0aGUgb3JkZXIgaXMgZml4ZWRcclxuICAgIGFzc2V0Q2hhbmdlZCgpIHtcclxuICAgICAgICBsZXQgcyA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHAgPSB0aGlzLnJlc2V0U3RhdGUodGhpcy5wcm9wcyk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy51cGRhdGUpICE9PSBKU09OLnN0cmluZ2lmeShwLnVwZGF0ZSkgfHxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy5jb3JlX2V4Y2hhbmdlX3JhdGUpICE9PVxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC5jb3JlX2V4Y2hhbmdlX3JhdGUpIHx8XHJcbiAgICAgICAgICAgIChzLm5ld19pc3N1ZXJfYWNjb3VudF9pZCAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgcy5uZXdfaXNzdWVyX2FjY291bnRfaWQgIT09IHMuaXNzdWVyKSB8fFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLmZsYWdCb29sZWFucykgIT09IEpTT04uc3RyaW5naWZ5KHAuZmxhZ0Jvb2xlYW5zKSB8fFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLnBlcm1pc3Npb25Cb29sZWFucykgIT09XHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLnBlcm1pc3Npb25Cb29sZWFucykgfHxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy53aGl0ZWxpc3RfYXV0aG9yaXRpZXMpICE9PVxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC53aGl0ZWxpc3RfYXV0aG9yaXRpZXMpIHx8XHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMuYmxhY2tsaXN0X2F1dGhvcml0aWVzKSAhPT1cclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAuYmxhY2tsaXN0X2F1dGhvcml0aWVzKSB8fFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLndoaXRlbGlzdF9tYXJrZXRzKSAhPT1cclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAud2hpdGVsaXN0X21hcmtldHMpIHx8XHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMuYmxhY2tsaXN0X21hcmtldHMpICE9PVxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC5ibGFja2xpc3RfbWFya2V0cylcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0YWIgSUQgb24gY2hhbmdlXHJcbiAgICB0YWJDaGFuZ2VkKHRhYklkKSB7XHJcbiAgICAgICAgbGV0IHRhYnNDaGFuZ2VkID0gdGhpcy50YWJzQ2hhbmdlZCgpO1xyXG4gICAgICAgIHJldHVybiB0YWJzQ2hhbmdlZFt0YWJJZF0gPyB0YWJzQ2hhbmdlZFt0YWJJZF0gOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB0YWJzQ2hhbmdlZCgpIHtcclxuICAgICAgICBsZXQgcyA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHAgPSB0aGlzLnJlc2V0U3RhdGUodGhpcy5wcm9wcyk7XHJcblxyXG4gICAgICAgIGxldCB0YWJVcGRhdGVJbmRleCA9IFtdO1xyXG5cclxuICAgICAgICAvKiBQcmltYXJ5ICovXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBzLnVwZGF0ZS5tYXhfc3VwcGx5ICE9PSBwLnVwZGF0ZS5tYXhfc3VwcGx5IHx8XHJcbiAgICAgICAgICAgIHMuY29yZV9leGNoYW5nZV9yYXRlLmJhc2UuYW1vdW50ICE9PVxyXG4gICAgICAgICAgICAgICAgcC5jb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZS5hbW91bnQgfHxcclxuICAgICAgICAgICAgcy5jb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGUuYW1vdW50ICE9PVxyXG4gICAgICAgICAgICAgICAgcC5jb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGUuYW1vdW50XHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICB0YWJVcGRhdGVJbmRleFtcIjBcIl0gPSB0cnVlO1xyXG5cclxuICAgICAgICAvKiBXaGl0ZWxpc3QgKi9cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMud2hpdGVsaXN0X2F1dGhvcml0aWVzKSAhPT1cclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAud2hpdGVsaXN0X2F1dGhvcml0aWVzKSB8fFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLmJsYWNrbGlzdF9hdXRob3JpdGllcykgIT09XHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLmJsYWNrbGlzdF9hdXRob3JpdGllcykgfHxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy53aGl0ZWxpc3RfbWFya2V0cykgIT09XHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLndoaXRlbGlzdF9tYXJrZXRzKSB8fFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLmJsYWNrbGlzdF9tYXJrZXRzKSAhPT1cclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAuYmxhY2tsaXN0X21hcmtldHMpXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICB0YWJVcGRhdGVJbmRleFtcIjFcIl0gPSB0cnVlO1xyXG5cclxuICAgICAgICAvKiBEZXNjcmlwdGlvbiAqL1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgcy51cGRhdGUuZGVzY3JpcHRpb24ubWFpbiAhPT0gcC51cGRhdGUuZGVzY3JpcHRpb24ubWFpbiB8fFxyXG4gICAgICAgICAgICBzLnVwZGF0ZS5kZXNjcmlwdGlvbi5zaG9ydF9uYW1lICE9PVxyXG4gICAgICAgICAgICAgICAgcC51cGRhdGUuZGVzY3JpcHRpb24uc2hvcnRfbmFtZSB8fFxyXG4gICAgICAgICAgICBzLnVwZGF0ZS5kZXNjcmlwdGlvbi5tYXJrZXQgIT09IHAudXBkYXRlLmRlc2NyaXB0aW9uLm1hcmtldFxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgdGFiVXBkYXRlSW5kZXhbXCIyXCJdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLyogQml0YXNzZXQgb3B0aW9ucyAqL1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy5iaXRhc3NldF9vcHRzKSAhPT1cclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC5vcmlnaW5hbF9iaXRhc3NldF9vcHRzKVxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgdGFiVXBkYXRlSW5kZXhbXCIzXCJdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLyogUGVybWlzc2lvbnMgKi9cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMucGVybWlzc2lvbkJvb2xlYW5zKSAhPT1cclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC5wZXJtaXNzaW9uQm9vbGVhbnMpXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICB0YWJVcGRhdGVJbmRleFtcIjRcIl0gPSB0cnVlO1xyXG5cclxuICAgICAgICAvKiBGbGFncyAqL1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy5mbGFnQm9vbGVhbnMpICE9PSBKU09OLnN0cmluZ2lmeShwLmZsYWdCb29sZWFucykgfHxcclxuICAgICAgICAgICAgcy51cGRhdGUubWFya2V0X2ZlZV9wZXJjZW50ICE9PSBwLnVwZGF0ZS5tYXJrZXRfZmVlX3BlcmNlbnQgfHxcclxuICAgICAgICAgICAgcy51cGRhdGUubWF4X21hcmtldF9mZWUgIT09IHAudXBkYXRlLm1heF9tYXJrZXRfZmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICB0YWJVcGRhdGVJbmRleFtcIjVcIl0gPSB0cnVlO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMuZmVlZFByb2R1Y2VycykgIT09XHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAub3JpZ2luYWxGZWVkUHJvZHVjZXJzKVxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgdGFiVXBkYXRlSW5kZXhbXCI2XCJdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRhYlVwZGF0ZUluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHBhZ2VDaGFuZ2VkKCkge1xyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIGlzQml0QXNzZXQsXHJcbiAgICAgICAgICAgIGJpdGFzc2V0X29wdHMsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsX2JpdGFzc2V0X29wdHMsXHJcbiAgICAgICAgICAgIGZlZWRQcm9kdWNlcnMsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsRmVlZFByb2R1Y2Vyc1xyXG4gICAgICAgIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHRoaXMuYXNzZXRDaGFuZ2VkKCkgfHxcclxuICAgICAgICAgICAgKGlzQml0QXNzZXQgJiZcclxuICAgICAgICAgICAgICAgIChKU09OLnN0cmluZ2lmeShiaXRhc3NldF9vcHRzKSAhPT1cclxuICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShvcmlnaW5hbF9iaXRhc3NldF9vcHRzKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmVlZFByb2R1Y2Vycy50b0pTKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRmVlZFByb2R1Y2Vycy50b0pTKClcclxuICAgICAgICAgICAgICAgICAgICApKSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIF91cGRhdGVBc3NldChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAvLyBDbG9zZSBjb25maXJtX21vZGFsIGlmIGl0J3Mgb3BlblxyXG4gICAgICAgIHRoaXMucmVmcy5jb25maXJtX21vZGFsLm9uQ2xvc2UoKTtcclxuXHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgdXBkYXRlLFxyXG4gICAgICAgICAgICBpc3N1ZXIsXHJcbiAgICAgICAgICAgIG5ld19pc3N1ZXJfYWNjb3VudF9pZCxcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLFxyXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb29sZWFucyxcclxuICAgICAgICAgICAgaXNCaXRBc3NldCxcclxuICAgICAgICAgICAgYml0YXNzZXRfb3B0cyxcclxuICAgICAgICAgICAgb3JpZ2luYWxfYml0YXNzZXRfb3B0cyxcclxuICAgICAgICAgICAgZmVlZFByb2R1Y2VycyxcclxuICAgICAgICAgICAgb3JpZ2luYWxGZWVkUHJvZHVjZXJzXHJcbiAgICAgICAgfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIGxldCBmbGFncyA9IGFzc2V0VXRpbHMuZ2V0RmxhZ3MoZmxhZ0Jvb2xlYW5zKTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIGluY29ycmVjdCBmbGFnIGZyb20gZ2VuZXNpc1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXRJbihbXCJvcHRpb25zXCIsIFwiZmxhZ3NcIl0pICYgMTI4ICYmXHJcbiAgICAgICAgICAgICEodGhpcy5wcm9wcy5hc3NldC5nZXRJbihbXCJvcHRpb25zXCIsIFwiaXNzdWVyX3Blcm1pc3Npb25zXCJdKSAmIDEyOClcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgZmxhZ3MgKz0gMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcGVybWlzc2lvbnMgPSBhc3NldFV0aWxzLmdldFBlcm1pc3Npb25zKFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGlzQml0QXNzZXRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5tYXJrZXRJbnB1dCAhPT0gdXBkYXRlLmRlc2NyaXB0aW9uLm1hcmtldCkge1xyXG4gICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb24ubWFya2V0ID0gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gSlNPTi5zdHJpbmdpZnkodXBkYXRlLmRlc2NyaXB0aW9uKTtcclxuXHJcbiAgICAgICAgbGV0IGF1dGhzID0ge1xyXG4gICAgICAgICAgICB3aGl0ZWxpc3RfYXV0aG9yaXRpZXM6IHRoaXMuc3RhdGUud2hpdGVsaXN0X2F1dGhvcml0aWVzLFxyXG4gICAgICAgICAgICBibGFja2xpc3RfYXV0aG9yaXRpZXM6IHRoaXMuc3RhdGUuYmxhY2tsaXN0X2F1dGhvcml0aWVzLFxyXG4gICAgICAgICAgICB3aGl0ZWxpc3RfbWFya2V0czogdGhpcy5zdGF0ZS53aGl0ZWxpc3RfbWFya2V0cyxcclxuICAgICAgICAgICAgYmxhY2tsaXN0X21hcmtldHM6IHRoaXMuc3RhdGUuYmxhY2tsaXN0X21hcmtldHNcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgZmVlZFByb2R1Y2Vyc0pTID0gaXNCaXRBc3NldCA/IGZlZWRQcm9kdWNlcnMudG9KUygpIDogbnVsbDtcclxuICAgICAgICBsZXQgb3JpZ2luYWxGZWVkUHJvZHVjZXJzSlMgPSBpc0JpdEFzc2V0XHJcbiAgICAgICAgICAgID8gb3JpZ2luYWxGZWVkUHJvZHVjZXJzLnRvSlMoKVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcblxyXG4gICAgICAgIEFzc2V0QWN0aW9ucy51cGRhdGVBc3NldChcclxuICAgICAgICAgICAgaXNzdWVyLFxyXG4gICAgICAgICAgICBuZXdfaXNzdWVyX2FjY291bnRfaWQsXHJcbiAgICAgICAgICAgIHVwZGF0ZSxcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFzc2V0LFxyXG4gICAgICAgICAgICBmbGFncyxcclxuICAgICAgICAgICAgcGVybWlzc2lvbnMsXHJcbiAgICAgICAgICAgIGlzQml0QXNzZXQsXHJcbiAgICAgICAgICAgIGJpdGFzc2V0X29wdHMsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsX2JpdGFzc2V0X29wdHMsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBhdXRocyxcclxuICAgICAgICAgICAgZmVlZFByb2R1Y2Vyc0pTLFxyXG4gICAgICAgICAgICBvcmlnaW5hbEZlZWRQcm9kdWNlcnNKUyxcclxuICAgICAgICAgICAgdGhpcy5hc3NldENoYW5nZWQoKVxyXG4gICAgICAgICkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgICAgICAgXCIuLi4gQXNzZXRBY3Rpb25zLnVwZGF0ZUFzc2V0KGFjY291bnRfaWQsIHVwZGF0ZSlcIixcclxuICAgICAgICAgICAgICAgIGlzc3VlcixcclxuICAgICAgICAgICAgICAgIG5ld19pc3N1ZXJfYWNjb3VudF9pZCxcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldEFzc2V0KHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwiaWRcIikpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnJlc2V0U3RhdGUodGhpcy5wcm9wcykpO1xyXG4gICAgICAgICAgICB9LCAzMDAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVzZXQoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnJlc2V0U3RhdGUodGhpcy5wcm9wcykpO1xyXG4gICAgfVxyXG5cclxuICAgIF9mb3JjZVBvc2l0aXZlKG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KG51bWJlcikgPCAwID8gXCIwXCIgOiBudW1iZXI7XHJcbiAgICB9XHJcblxyXG4gICAgX29uVXBkYXRlRGVzY3JpcHRpb24odmFsdWUsIGUpIHtcclxuICAgICAgICBsZXQge3VwZGF0ZX0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGxldCB1cGRhdGVTdGF0ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIHN3aXRjaCAodmFsdWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImNvbmRpdGlvblwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlLmxlbmd0aCA+IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU3RhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJzaG9ydF9uYW1lXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUubGVuZ3RoID4gMzIpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTdGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV0gPSBlLnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcIm1hcmtldFwiOlxyXG4gICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uW3ZhbHVlXSA9IGU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJ2aXNpYmxlXCI6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gIXVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh1cGRhdGVTdGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRlRWRpdEZpZWxkcyh1cGRhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNoYW5nZUJpdEFzc2V0T3B0cyh2YWx1ZSwgZSkge1xyXG4gICAgICAgIGxldCB7Yml0YXNzZXRfb3B0c30gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJmb3JjZV9zZXR0bGVtZW50X29mZnNldF9wZXJjZW50XCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJtYXhpbXVtX2ZvcmNlX3NldHRsZW1lbnRfdm9sdW1lXCI6XHJcbiAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzW3ZhbHVlXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChlLnRhcmdldC52YWx1ZSkgKlxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0Q29uc3RhbnRzLkdSQVBIRU5FXzFfUEVSQ0VOVDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcImZlZWRfbGlmZXRpbWVfc2VjXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJmb3JjZV9zZXR0bGVtZW50X2RlbGF5X3NlY1wiOlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQocGFyc2VGbG9hdChlLnRhcmdldC52YWx1ZSkgKiA2MCwgMTApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0c1t2YWx1ZV0gPSBwYXJzZUludChcclxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGUudGFyZ2V0LnZhbHVlKSAqIDYwLFxyXG4gICAgICAgICAgICAgICAgICAgIDEwXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwic2hvcnRfYmFja2luZ19hc3NldFwiOlxyXG4gICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0c1t2YWx1ZV0gPSBlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uVXBkYXRlSW5wdXQodmFsdWUsIGUpIHtcclxuICAgICAgICBsZXQge3VwZGF0ZX0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGxldCB1cGRhdGVTdGF0ZSA9IHRydWU7XHJcbiAgICAgICAgbGV0IHByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwibWFya2V0X2ZlZV9wZXJjZW50XCI6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdGhpcy5fZm9yY2VQb3NpdGl2ZShlLnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJtYXhfbWFya2V0X2ZlZVwiOlxyXG4gICAgICAgICAgICAgICAgbGV0IG1hcmtldEZlZSA9IGUuYW1vdW50LnJlcGxhY2UoLywvZywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IGJpZyhtYXJrZXRGZWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aW1lcyhwcmVjaXNpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5ndChHUkFQSEVORV9NQVhfU0hBUkVfU1VQUExZKVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU3RhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4X21hcmtldF9mZWU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJUaGUgbnVtYmVyIHlvdSB0cmllZCB0byBlbnRlciBpcyB0b28gbGFyZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdXRpbHMubGltaXRCeVByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRGZWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJtYXhfc3VwcGx5XCI6XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4U3VwcGx5ID0gZS5hbW91bnQucmVwbGFjZSgvLC9nLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIC8vIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgaWYgKChuZXcgYmlnKG1heFN1cHBseSkpLnRpbWVzKE1hdGgucG93KDEwLCBwcmVjaXNpb24pKS5ndChHUkFQSEVORV9NQVhfU0hBUkVfU1VQUExZKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB1cGRhdGVTdGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7ZXJyb3JzOiB7bWF4X3N1cHBseTogXCJUaGUgbnVtYmVyIHlvdSB0cmllZCB0byBlbnRlciBpcyB0b28gbGFyZ2VcIn19KTtcclxuICAgICAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdXRpbHMubGltaXRCeVByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICBtYXhTdXBwbHksXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAvLyB9IGNhdGNoKGUpIHt9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh1cGRhdGVTdGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHt1cGRhdGU6IHVwZGF0ZX0pO1xyXG4gICAgICAgICAgICB0aGlzLl92YWxpZGF0ZUVkaXRGaWVsZHModXBkYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3ZhbGlkYXRlRWRpdEZpZWxkcyhuZXdfc3RhdGUpIHtcclxuICAgICAgICBsZXQgY2VyID0gbmV3X3N0YXRlLmNvcmVfZXhjaGFuZ2VfcmF0ZTtcclxuICAgICAgICBsZXQgZmVlZFByb2R1Y2VycyA9IG5ld19zdGF0ZS5mZWVkUHJvZHVjZXJzXHJcbiAgICAgICAgICAgID8gbmV3X3N0YXRlLmZlZWRQcm9kdWNlcnNcclxuICAgICAgICAgICAgOiB0aGlzLnN0YXRlLmZlZWRQcm9kdWNlcnM7XHJcbiAgICAgICAgbGV0IGZsYWdCb29sZWFucyA9IHRoaXMuc3RhdGUuZmxhZ0Jvb2xlYW5zO1xyXG4gICAgICAgIGxldCB7YXNzZXQsIGNvcmV9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgbGV0IGVycm9ycyA9IHtcclxuICAgICAgICAgICAgbWF4X3N1cHBseTogbnVsbCxcclxuICAgICAgICAgICAgcXVvdGVfYXNzZXQ6IG51bGwsXHJcbiAgICAgICAgICAgIGJhc2VfYXNzZXQ6IG51bGwsXHJcbiAgICAgICAgICAgIG1heF9mZWVkX3Byb2R1Y2VyOiBudWxsLFxyXG4gICAgICAgICAgICBjb25mbGljdF9wcm9kdWNlcjogbnVsbCxcclxuICAgICAgICAgICAgaW52YWxpZF9tYXJrZXRfcGFpcjogbnVsbFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLnByb3BzLmFzc2V0LmdldChcInByZWNpc2lvblwiKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBlcnJvcnMubWF4X3N1cHBseSA9XHJcbiAgICAgICAgICAgICAgICBuZXdfc3RhdGUubWF4X3N1cHBseSA8PSAwXHJcbiAgICAgICAgICAgICAgICAgICAgPyBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXhfcG9zaXRpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIDogbmV3IGJpZyhwYXJzZUludChuZXdfc3RhdGUubWF4X3N1cHBseSwgMTApKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC50aW1lcyhNYXRoLnBvdygxMCwgcCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmd0KEdSQVBIRU5FX01BWF9TSEFSRV9TVVBQTFkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnRvb19sYXJnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICBlcnJvcnMubWF4X3N1cHBseSA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMudG9vX2xhcmdlXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjZXIpIHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgY2VyLnF1b3RlLmFzc2V0X2lkICE9PSBhc3NldC5nZXQoXCJpZFwiKSAmJlxyXG4gICAgICAgICAgICAgICAgY2VyLmJhc2UuYXNzZXRfaWQgIT09IGFzc2V0LmdldChcImlkXCIpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnF1b3RlX2Fzc2V0ID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubmVlZF9hc3NldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHtuYW1lOiBhc3NldC5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBjZXIucXVvdGUuYXNzZXRfaWQgIT09IGNvcmUuZ2V0KFwiaWRcIikgJiZcclxuICAgICAgICAgICAgICAgIGNlci5iYXNlLmFzc2V0X2lkICE9PSBjb3JlLmdldChcImlkXCIpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLmJhc2VfYXNzZXQgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5uZWVkX2Fzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAge25hbWU6IGNvcmUuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZmVlZFByb2R1Y2Vycykge1xyXG4gICAgICAgICAgICBpZiAoZmVlZFByb2R1Y2Vycy5zaXplID4gdGhpcy5zdGF0ZS5tYXhGZWVkUHJvZHVjZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvcnMubWF4X2ZlZWRfcHJvZHVjZXIgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy50b29fbWFueV9mZWVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAge21heDogdGhpcy5zdGF0ZS5tYXhGZWVkUHJvZHVjZXJzfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGZsYWdCb29sZWFucy5jb21taXR0ZWVfZmVkX2Fzc2V0ICYmXHJcbiAgICAgICAgICAgIGZsYWdCb29sZWFucy53aXRuZXNzX2ZlZF9hc3NldFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBlcnJvcnMuY29uZmxpY3RfcHJvZHVjZXIgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmNvbmZsaWN0X2ZlZWRcIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUubWFya2V0SW5wdXQgPT0gdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJzeW1ib2xcIikpIHtcclxuICAgICAgICAgICAgZXJyb3JzLmludmFsaWRfbWFya2V0X3BhaXIgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmludmFsaWRfbWFya2V0X3BhaXJcIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGlzVmFsaWQgPVxyXG4gICAgICAgICAgICAhZXJyb3JzLmludmFsaWRfbWFya2V0X3BhaXIgJiZcclxuICAgICAgICAgICAgIWVycm9ycy5tYXhfc3VwcGx5ICYmXHJcbiAgICAgICAgICAgICFlcnJvcnMuYmFzZV9hc3NldCAmJlxyXG4gICAgICAgICAgICAhZXJyb3JzLnF1b3RlX2Fzc2V0ICYmXHJcbiAgICAgICAgICAgICFlcnJvcnMubWF4X2ZlZWRfcHJvZHVjZXIgJiZcclxuICAgICAgICAgICAgIWVycm9ycy5jb25mbGljdF9wcm9kdWNlcjtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNWYWxpZDogaXNWYWxpZCwgZXJyb3JzOiBlcnJvcnN9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Db3JlUmF0ZUNoYW5nZSh0eXBlLCBhbW91bnQpIHtcclxuICAgICAgICBhbW91bnQuYW1vdW50ID1cclxuICAgICAgICAgICAgYW1vdW50LmFtb3VudCA9PSBcIlwiID8gXCIwXCIgOiBhbW91bnQuYW1vdW50LnJlcGxhY2UoLywvZywgXCJcIik7XHJcblxyXG4gICAgICAgIGFtb3VudC5hbW91bnQgPSB1dGlscy5saW1pdEJ5UHJlY2lzaW9uKFxyXG4gICAgICAgICAgICBhbW91bnQuYW1vdW50LFxyXG4gICAgICAgICAgICBhbW91bnQuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IHtjb3JlX2V4Y2hhbmdlX3JhdGV9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVbdHlwZV0gPSB7XHJcbiAgICAgICAgICAgIGFtb3VudDogYW1vdW50LmFtb3VudCxcclxuICAgICAgICAgICAgYXNzZXRfaWQ6IGFtb3VudC5hc3NldC5nZXQoXCJpZFwiKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQWNjb3VudENoYW5nZWQoa2V5LCBhY2NvdW50KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIFtrZXldOiBhY2NvdW50ID8gYWNjb3VudC5nZXQoXCJpZFwiKSA6IG51bGxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkFjY291bnROYW1lQ2hhbmdlZChrZXksIG5hbWUpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgW2tleV06IG5hbWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25JbnB1dENvcmVBc3NldCh0eXBlLCBhc3NldCkge1xyXG4gICAgICAgIGlmICh0eXBlID09PSBcInF1b3RlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBxdW90ZUFzc2V0SW5wdXQ6IGFzc2V0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJiYXNlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBiYXNlQXNzZXRJbnB1dDogYXNzZXRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vbkZvdW5kQ29yZUFzc2V0KHR5cGUsIGFzc2V0KSB7XHJcbiAgICAgICAgaWYgKGFzc2V0KSB7XHJcbiAgICAgICAgICAgIGxldCBjb3JlX3JhdGUgPSB0aGlzLnN0YXRlLmNvcmVfZXhjaGFuZ2VfcmF0ZTtcclxuICAgICAgICAgICAgY29yZV9yYXRlW3R5cGVdLmFzc2V0X2lkID0gYXNzZXQuZ2V0KFwiaWRcIik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZTogY29yZV9yYXRlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGVFZGl0RmllbGRzKHtcclxuICAgICAgICAgICAgICAgIG1heF9zdXBwbHk6IHRoaXMuc3RhdGUubWF4X3N1cHBseSxcclxuICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZTogY29yZV9yYXRlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25JbnB1dE1hcmtldChhc3NldCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBtYXJrZXRJbnB1dDogYXNzZXRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Gb3VuZE1hcmtldEFzc2V0KGFzc2V0KSB7XHJcbiAgICAgICAgaWYgKGFzc2V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24oXCJtYXJrZXRcIiwgYXNzZXQuZ2V0KFwic3ltYm9sXCIpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uRmxhZ0NoYW5nZShrZXkpIHtcclxuICAgICAgICBsZXQgYm9vbGVhbnMgPSB0aGlzLnN0YXRlLmZsYWdCb29sZWFucztcclxuICAgICAgICBib29sZWFuc1trZXldID0gIWJvb2xlYW5zW2tleV07XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGZsYWdCb29sZWFuczogYm9vbGVhbnNcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl92YWxpZGF0ZUVkaXRGaWVsZHMoe30pO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblBlcm1pc3Npb25DaGFuZ2Uoa2V5KSB7XHJcbiAgICAgICAgbGV0IGJvb2xlYW5zID0gdGhpcy5zdGF0ZS5wZXJtaXNzaW9uQm9vbGVhbnM7XHJcbiAgICAgICAgYm9vbGVhbnNba2V5XSA9ICFib29sZWFuc1trZXldO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnM6IGJvb2xlYW5zXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uQ2xhaW1JbnB1dChhc3NldCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBjbGFpbUZlZXNBbW91bnQ6IGFzc2V0LmFtb3VudFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlTGlzdChrZXksIGFjdGlvbiA9IFwiYWRkXCIsIGlkKSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnN0YXRlW2tleV07XHJcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gXCJhZGRcIiAmJiAhY3VycmVudC5pbmNsdWRlcyhpZCkpIHtcclxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucHVzaChpZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwicmVtb3ZlXCIgJiYgY3VycmVudC5pbmNsdWRlcyhpZCkpIHtcclxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucmVtb3ZlKGN1cnJlbnQuaW5kZXhPZihpZCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtba2V5XTogY3VycmVudH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlRmVlZFByb2R1Y2VyTGlzdChhY3Rpb24gPSBcImFkZFwiLCBpZCkge1xyXG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5zdGF0ZS5mZWVkUHJvZHVjZXJzO1xyXG4gICAgICAgIGlmIChhY3Rpb24gPT09IFwiYWRkXCIgJiYgIWN1cnJlbnQuaW5jbHVkZXMoaWQpKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnB1c2goaWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBcInJlbW92ZVwiICYmIGN1cnJlbnQuaW5jbHVkZXMoaWQpKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnJlbW92ZShjdXJyZW50LmluZGV4T2YoaWQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZmVlZFByb2R1Y2VyczogY3VycmVudH0pO1xyXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlRWRpdEZpZWxkcyh7ZmVlZFByb2R1Y2VyczogY3VycmVudH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2Fzc2V0fSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgZXJyb3JzLFxyXG4gICAgICAgICAgICBpc1ZhbGlkLFxyXG4gICAgICAgICAgICB1cGRhdGUsXHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZSxcclxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGNsYWltRmVlc0Ftb3VudCxcclxuICAgICAgICAgICAgaXNCaXRBc3NldCxcclxuICAgICAgICAgICAgYml0YXNzZXRfb3B0c1xyXG4gICAgICAgIH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICAvLyBFc3RpbWF0ZSB0aGUgYXNzZXQgdXBkYXRlIGZlZVxyXG4gICAgICAgIGxldCBzeW1ib2wgPSBhc3NldC5nZXQoXCJzeW1ib2xcIik7XHJcbiAgICAgICAgbGV0IHVwZGF0ZUZlZSA9IFwiTi9BXCI7XHJcblxyXG4gICAgICAgIHVwZGF0ZUZlZSA9IDxGb3JtYXR0ZWRGZWUgb3BUeXBlPVwiYXNzZXRfdXBkYXRlXCIgLz47XHJcblxyXG4gICAgICAgIGxldCBjcl9xdW90ZV9hc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQoXHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZS5hc3NldF9pZFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IHByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXHJcbiAgICAgICAgICAgIGNyX3F1b3RlX2Fzc2V0LmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IGNyX2Jhc2VfYXNzZXQgPSBDaGFpblN0b3JlLmdldEFzc2V0KFxyXG4gICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZS5hc3NldF9pZFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IGJhc2VQcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKFxyXG4gICAgICAgICAgICBjcl9iYXNlX2Fzc2V0LmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGxldCBjcl9xdW90ZV9hbW91bnQgPVxyXG4gICAgICAgICAgICBwYXJzZUZsb2F0KGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZS5hbW91bnQpICogcHJlY2lzaW9uO1xyXG4gICAgICAgIGxldCBjcl9iYXNlX2Ftb3VudCA9XHJcbiAgICAgICAgICAgIHBhcnNlRmxvYXQoY29yZV9leGNoYW5nZV9yYXRlLmJhc2UuYW1vdW50KSAqIGJhc2VQcmVjaXNpb247XHJcbiAgICAgICAgbGV0IG9yaWdpbmFsUGVybWlzc2lvbnMgPSBhc3NldFV0aWxzLmdldEZsYWdCb29sZWFucyhcclxuICAgICAgICAgICAgYXNzZXQuZ2V0SW4oW1wib3B0aW9uc1wiLCBcImlzc3Vlcl9wZXJtaXNzaW9uc1wiXSksXHJcbiAgICAgICAgICAgIGFzc2V0LmdldChcImJpdGFzc2V0XCIpICE9PSB1bmRlZmluZWRcclxuICAgICAgICApO1xyXG4gICAgICAgIC8vIExvb3Agb3ZlciBmbGFnc1xyXG4gICAgICAgIGxldCBmbGFncyA9IFtdO1xyXG4gICAgICAgIGxldCBnZXRGbGFnID0gKGtleSwgb25DbGljaywgaXNDaGVja2VkKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8dGFibGUga2V5PXtcInRhYmxlX1wiICsga2V5fSBjbGFzc05hbWU9XCJ0YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiBcIm5vbmVcIiwgd2lkdGg6IFwiODAlXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2BhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy4ke2tleX1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e2JvcmRlcjogXCJub25lXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInN3aXRjaFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luQm90dG9tOiBcIjEwcHhcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtpc0NoZWNrZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gb3JpZ2luYWxQZXJtaXNzaW9ucykge1xyXG4gICAgICAgICAgICBpZiAob3JpZ2luYWxQZXJtaXNzaW9uc1trZXldICYmIGtleSAhPT0gXCJjaGFyZ2VfbWFya2V0X2ZlZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBmbGFncy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIGdldEZsYWcoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25GbGFnQ2hhbmdlLmJpbmQodGhpcywga2V5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zW2tleV1cclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmbGFncy5wdXNoKFxyXG4gICAgICAgICAgICBnZXRGbGFnKFxyXG4gICAgICAgICAgICAgICAgXCJ2aXNpYmxlXCIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQodGhpcywgXCJ2aXNpYmxlXCIpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uLnZpc2libGVcclxuICAgICAgICAgICAgICAgICAgICA/IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgOiB1cGRhdGUuZGVzY3JpcHRpb24udmlzaWJsZSA9PT0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIExvb3Agb3ZlciBwZXJtaXNzaW9uc1xyXG4gICAgICAgIGxldCBwZXJtaXNzaW9ucyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBvcmlnaW5hbFBlcm1pc3Npb25zKSB7XHJcbiAgICAgICAgICAgIGlmICh0cnVlIHx8IG9yaWdpbmFsUGVybWlzc2lvbnNba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbnMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICA8dGFibGUga2V5PXtcInRhYmxlX1wiICsga2V5fSBjbGFzc05hbWU9XCJ0YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiBcIm5vbmVcIiwgd2lkdGg6IFwiODAlXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17YGFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLiR7a2V5fWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e2JvcmRlcjogXCJub25lXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic3dpdGNoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luQm90dG9tOiBcIjEwcHhcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblBlcm1pc3Npb25DaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtwZXJtaXNzaW9uQm9vbGVhbnNba2V5XX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4ge319XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGFic0NoYW5nZWRDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy50YWJzQ2hhbmdlZCgpLmZvckVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRhYnNDaGFuZ2VkQ291bnQrKztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGNvbmZpcm1CdXR0b25zID0gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhcImJ1dHRvblwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhaXNWYWxpZCB8fCAhdGhpcy5wYWdlQ2hhbmdlZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCI5cmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2hhbmdlZENvdW50ID4gMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9vcGVuQ29uZmlybS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX3VwZGF0ZUFzc2V0LmJpbmQodGhpcylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAge3RhYnNDaGFuZ2VkQ291bnQgPiAxID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0uc2F2ZV9hbGxcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5zYXZlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKFwiYnV0dG9uIHByaW1hcnkgaG9sbG93XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICF0aGlzLnBhZ2VDaGFuZ2VkKClcclxuICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9yZXNldC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5yZXNldFwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IGNlclZhbGlkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgKGNyX3F1b3RlX2Fzc2V0LmdldChcImlkXCIpID09PSBcIjEuMy4wXCIgfHxcclxuICAgICAgICAgICAgICAgIGNyX2Jhc2VfYXNzZXQuZ2V0KFwiaWRcIikgPT09IFwiMS4zLjBcIikgJiZcclxuICAgICAgICAgICAgKGNyX3F1b3RlX2Fzc2V0LmdldChcImlkXCIpID09PSBhc3NldC5nZXQoXCJpZFwiKSB8fFxyXG4gICAgICAgICAgICAgICAgY3JfYmFzZV9hc3NldC5nZXQoXCJpZFwiKSA9PT0gYXNzZXQuZ2V0KFwiaWRcIikpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGNlclZhbGlkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpc1ByZWRpY3Rpb25NYXJrZXRBc3NldCA9IGFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxyXG4gICAgICAgICAgICBcImlzX3ByZWRpY3Rpb25fbWFya2V0XCJcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgbGV0IGFzc2V0X2Rlc2NyaXB0aW9uID0gYXNzZXRVdGlscy5wYXJzZURlc2NyaXB0aW9uKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFzc2V0LnRvSlMoKS5vcHRpb25zLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgYXBwLXRhYmxlcyBuby1wYWRkaW5nXCIgcmVmPVwiYXBwVGFibGVzXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgc21hbGwtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtY29udGFpbmVyIGdlbmVyaWMtYm9yZGVyZWQtYm94XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1oZWFkZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJoZWFkZXIudXBkYXRlX2Fzc2V0XCIgLz46e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmc9XCJ1cGRhdGVBc3NldFRhYlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY2NvdW50LXRhYnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic0NsYXNzPVwiYWNjb3VudC1vdmVydmlldyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50Q2xhc3M9XCJncmlkLWJsb2NrIHBhZGRpbmctdG9wIHNocmluayBzbWFsbC12ZXJ0aWNhbCBtZWRpdW0taG9yaXpvbnRhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9ucz17Y29uZmlybUJ1dHRvbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZVRhYj17aSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YWN0aXZlVGFiOiBpfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wcmltYXJ5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVGFiPXt0aGlzLnRhYkNoYW5nZWQoMCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBsYXJnZS04IGxhcmdlLW9mZnNldC0yIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wcmVjaXNpb25cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+OiB7YXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QW1vdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1heF9zdXBwbHlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dXBkYXRlLm1heF9zdXBwbHl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXhfc3VwcGx5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHM9e1thc3NldC5nZXQoXCJpZFwiKV19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfc3VwcGx5ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMubWF4X3N1cHBseX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY29yZV9leGNoYW5nZV9yYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjZXJWYWxpZCA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1tYXJnaW4gc21hbGwtMTIgbWVkaXVtLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5xdW90ZV9uYW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25JbnB1dENvcmVBc3NldC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInF1b3RlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnF1b3RlQXNzZXRJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldElucHV0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnF1b3RlQXNzZXRJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogXCIxMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRm91bmQ9e3RoaXMuX29uRm91bmRDb3JlQXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NlclZhbGlkID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpbiBzbWFsbC0xMiBtZWRpdW0tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmJhc2VfbmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uSW5wdXRDb3JlQXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhc2VBc3NldElucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0SW5wdXQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFzZUFzc2V0SW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDogXCIxMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRm91bmQ9e3RoaXMuX29uRm91bmRDb3JlQXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLnF1b3RlX2Fzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLnF1b3RlX2Fzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5iYXNlX2Fzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLmJhc2VfYXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tbWFyZ2luIHNtYWxsLTEyIG1lZGl1bS02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBbW91bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5xdW90ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25Db3JlUmF0ZUNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogXCIxMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpbiBzbWFsbC0xMiBtZWRpdW0tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QW1vdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYmFzZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hbW91bnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbkNvcmVSYXRlQ2hhbmdlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJhc2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hc3NldF9pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMC4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6IFwiMTBweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UucHJpY2VcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkUHJpY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7Zm9udFdlaWdodDogXCJib2xkXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYW1vdW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcl9xdW90ZV9hbW91bnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlX2Fzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFzc2V0X2lkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlX2Fzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VfYW1vdW50PXtjcl9iYXNlX2Ftb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g1PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmNlcl93YXJuaW5nXzFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoYXMtZXJyb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY2VyX3dhcm5pbmdfMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwicFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmFwcHJveF9mZWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoge3VwZGF0ZUZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC53aGl0ZWxpc3QudGl0bGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUYWI9e3RoaXMudGFiQ2hhbmdlZCgxKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXRXaGl0ZWxpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVMaXN0RW5hYmxlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnQm9vbGVhbnNbXCJ3aGl0ZV9saXN0XCJdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVsaXN0X2F1dGhvcml0aWVzPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUud2hpdGVsaXN0X2F1dGhvcml0aWVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhY2tsaXN0X2F1dGhvcml0aWVzPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYmxhY2tsaXN0X2F1dGhvcml0aWVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVsaXN0X21hcmtldHM9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS53aGl0ZWxpc3RfbWFya2V0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWNrbGlzdF9tYXJrZXRzPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYmxhY2tsaXN0X21hcmtldHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdfYXV0aG9yaXR5X2lkPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubmV3X2F1dGhvcml0eV9pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml0eV9uYW1lPXt0aGlzLnN0YXRlLmF1dGhvcml0eV9uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY291bnROYW1lQ2hhbmdlZD17dGhpcy5vbkFjY291bnROYW1lQ2hhbmdlZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY291bnRDaGFuZ2VkPXt0aGlzLm9uQWNjb3VudENoYW5nZWQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VMaXN0PXt0aGlzLm9uQ2hhbmdlTGlzdC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYXBwcm94X2ZlZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7dXBkYXRlRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Bc3NldFdoaXRlbGlzdD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmRlc2NyaXB0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVGFiPXt0aGlzLnRhYkNoYW5nZWQoMil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBsYXJnZS04IGxhcmdlLW9mZnNldC0yIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2hlaWdodDogXCI3cmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvbi5tYWluIHx8IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYWluXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImgzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5zaG9ydFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPVwiMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb24uc2hvcnRfbmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2hvcnRfbmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWFya2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25JbnB1dE1hcmtldC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YXNzZXRfZGVzY3JpcHRpb24ubWFya2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUubWFya2V0SW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldElucHV0PXt0aGlzLnN0YXRlLm1hcmtldElucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBcIjEwcHhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nQm90dG9tOiBcIjIwcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRm91bmQ9e3RoaXMuX29uRm91bmRNYXJrZXRBc3NldC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMuaW52YWxpZF9tYXJrZXRfcGFpciA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBoYXMtZXJyb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLmludmFsaWRfbWFya2V0X3BhaXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lzUHJlZGljdGlvbk1hcmtldEFzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImgzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmNvbmRpdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz1cIjFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uZGl0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVEZXNjcmlwdGlvbi5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb25kaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImgzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmV4cGlyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImRhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXhwaXJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVEZXNjcmlwdGlvbi5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleHBpcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYXBwcm94X2ZlZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7dXBkYXRlRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXNCaXRBc3NldCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYml0YXNzZXRfb3B0c1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUYWI9e3RoaXMudGFiQ2hhbmdlZCgzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgbGFyZ2UtOCBsYXJnZS1vZmZzZXQtMiBncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCaXRBc3NldE9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzPXtiaXRhc3NldF9vcHRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlPXt0aGlzLm9uQ2hhbmdlQml0QXNzZXRPcHRzLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tpbmdBc3NldD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHMuc2hvcnRfYmFja2luZ19hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldFByZWNpc2lvbj17YXNzZXQuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInByZWNpc2lvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldFN5bWJvbD17YXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYXBwcm94X2ZlZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoge3VwZGF0ZUZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC5wZXJtaXNzaW9uc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFRhYj17dGhpcy50YWJDaGFuZ2VkKDQpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgbGFyZ2UtOCBsYXJnZS1vZmZzZXQtMiBncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEhlbHBDb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtcImNvbXBvbmVudHMvQWNjb3VudEFzc2V0Q3JlYXRlXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uPVwicGVybWlzc2lvbnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wZXJtX3dhcm5pbmdcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwZXJtaXNzaW9uc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYXBwcm94X2ZlZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7dXBkYXRlRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mbGFnc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFRhYj17dGhpcy50YWJDaGFuZ2VkKDUpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgbGFyZ2UtOCBsYXJnZS1vZmZzZXQtMiBncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEhlbHBDb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtcImNvbXBvbmVudHMvQWNjb3VudEFzc2V0Q3JlYXRlXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uPVwiZmxhZ3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3JpZ2luYWxQZXJtaXNzaW9uc1tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hhcmdlX21hcmtldF9mZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImgzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1hcmtldF9mZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogXCJub25lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCI4MCVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY2hhcmdlX21hcmtldF9mZWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogXCJub25lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInN3aXRjaFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIxMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vbkZsYWdDaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hhcmdlX21hcmtldF9mZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4ge319XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdCb29sZWFucy5jaGFyZ2VfbWFya2V0X2ZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhZmxhZ0Jvb2xlYW5zLmNoYXJnZV9tYXJrZXRfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWFya2V0X2ZlZVwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5tYXJrZXRfZmVlX3BlcmNlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXJrZXRfZmVlX3BlcmNlbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFtb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXhfbWFya2V0X2ZlZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLm1heF9tYXJrZXRfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZUlucHV0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWF4X21hcmtldF9mZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2Fzc2V0LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJpZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfbWFya2V0X2ZlZSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBoYXMtZXJyb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLm1heF9tYXJrZXRfZmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZsYWdzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZsYWdzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5hcHByb3hfZmVlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt1cGRhdGVGZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5jb25mbGljdF9wcm9kdWNlciA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBoYXMtZXJyb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLmNvbmZsaWN0X3Byb2R1Y2VyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0JpdEFzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mZWVkX3Byb2R1Y2Vyc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUYWI9e3RoaXMudGFiQ2hhbmdlZCg2KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldEZlZWRQcm9kdWNlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXt0aGlzLnByb3BzLmFzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5wcm9wcy5hY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0bmVzc0ZlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zW1wid2l0bmVzc19mZWRfYXNzZXRcIl1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdHRlZUZlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zW1wiY29tbWl0dGVlX2ZlZF9hc3NldFwiXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjZXJzPXt0aGlzLnN0YXRlLmZlZWRQcm9kdWNlcnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUxpc3Q9e3RoaXMub25DaGFuZ2VGZWVkUHJvZHVjZXJMaXN0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfZmVlZF9wcm9kdWNlciA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvciBsYXJnZS04IGxhcmdlLW9mZnNldC0yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpblRvcDogXCIyMHB4XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMubWF4X2ZlZWRfcHJvZHVjZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgey8qIENvbmZpcm1hdGlvbiBNb2RhbCBvbiBNdWx0aXBsZSBDaGFuZ2VzICovfVxyXG4gICAgICAgICAgICAgICAgPENvbmZpcm1Nb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsSWQ9XCJhc3NldF91cGRhdGVfbW9kYWxcIlxyXG4gICAgICAgICAgICAgICAgICAgIHJlZj1cImNvbmZpcm1fbW9kYWxcIlxyXG4gICAgICAgICAgICAgICAgICAgIHRhYnNDaGFuZ2VkPXt0aGlzLnRhYnNDaGFuZ2VkKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgX2NhbmNlbENvbmZpcm09e3RoaXMuX2NhbmNlbENvbmZpcm0uYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICBfdXBkYXRlQXNzZXQ9e3RoaXMuX3VwZGF0ZUFzc2V0LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbkFjY291bnRBc3NldFVwZGF0ZSA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudEFzc2V0VXBkYXRlKTtcclxuQWNjb3VudEFzc2V0VXBkYXRlID0gQXNzZXRXcmFwcGVyKEFjY291bnRBc3NldFVwZGF0ZSwge1xyXG4gICAgcHJvcE5hbWVzOiBbXCJhc3NldFwiLCBcImNvcmVcIl0sXHJcbiAgICBkZWZhdWx0UHJvcHM6IHtcclxuICAgICAgICBjb3JlOiBcIjEuMy4wXCJcclxuICAgIH0sXHJcbiAgICB3aXRoRHluYW1pYzogdHJ1ZVxyXG59KTtcclxuXHJcbmNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7b3BlbjogZmFsc2V9O1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7b3BlbjogdHJ1ZX0sICgpID0+IHtcclxuICAgICAgICAgICAgWmZBcGkucHVibGlzaCh0aGlzLnByb3BzLm1vZGFsSWQsIFwib3BlblwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe29wZW46IGZhbHNlfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7dGFic0NoYW5nZWR9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgcmV0dXJuICF0aGlzLnN0YXRlLm9wZW4gPyBudWxsIDogKFxyXG4gICAgICAgICAgICA8QmFzZU1vZGFsXHJcbiAgICAgICAgICAgICAgICBpZD17dGhpcy5wcm9wcy5tb2RhbElkfVxyXG4gICAgICAgICAgICAgICAgb3ZlcmxheT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgIG1vZGFsSGVhZGVyPVwiYWNjb3VudC5jb25maXJtX2Fzc2V0X21vZGFsLmhlYWRlclwiXHJcbiAgICAgICAgICAgICAgICBub0xvZ29cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LmNvbmZpcm1fYXNzZXRfbW9kYWwuYXJlX3lvdV9zdXJlXCJcclxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJkaXZcIlxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIxcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPHVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGFic0NoYW5nZWRbXCIwXCJdID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnByaW1hcnlcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0YWJzQ2hhbmdlZFtcIjFcIl0gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC53aGl0ZWxpc3QudGl0bGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0YWJzQ2hhbmdlZFtcIjJcIl0gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZGVzY3JpcHRpb25cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0YWJzQ2hhbmdlZFtcIjNcIl0gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYml0YXNzZXRfb3B0c1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0YWJzQ2hhbmdlZFtcIjRcIl0gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtaXNzaW9uc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RhYnNDaGFuZ2VkW1wiNVwiXSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mbGFnc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBORUVEUyBDSEVDS0lORyAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RhYnNDaGFuZ2VkW1wiNlwiXSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mZWVkX3Byb2R1Y2Vyc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uIHByaW1hcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLl91cGRhdGVBc3NldC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZ2xvYmFsLmNvbmZpcm1cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uIHByaW1hcnkgaG9sbG93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5fY2FuY2VsQ29uZmlybS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZ2xvYmFsLmNhbmNlbFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9CYXNlTW9kYWw+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQXNzZXRVcGRhdGVXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgYXNzZXQgPSB0aGlzLnByb3BzLm1hdGNoLnBhcmFtcy5hc3NldDtcclxuICAgICAgICByZXR1cm4gPEFjY291bnRBc3NldFVwZGF0ZSBhc3NldD17YXNzZXR9IHsuLi50aGlzLnByb3BzfSAvPjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcihBc3NldFVwZGF0ZVdyYXBwZXIpO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuaW1wb3J0IEZvcm1hdHRlZEFzc2V0IGZyb20gXCIuL0Zvcm1hdHRlZEFzc2V0XCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuL0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4vQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQge2VzdGltYXRlRmVlfSBmcm9tIFwiY29tbW9uL3RyeEhlbHBlclwiO1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqICBHaXZlbiBhbiBvcGVyYXRpb24gdHlwZSwgZGlzcGxheXMgdGhlIENPUkUgZmVlIGZvciB0aGF0IG9wZXJhdGlvblxyXG4gKlxyXG4gKi9cclxuXHJcbmNsYXNzIEZvcm1hdHRlZEZlZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGdsb2JhbE9iamVjdDogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIG9wVHlwZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgICAgICBvcHRpb25zOiBQcm9wVHlwZXMuYXJyYXlcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBnbG9iYWxPYmplY3Q6IFwiMi4wLjBcIixcclxuICAgICAgICBvcHRpb25zOiBbXVxyXG4gICAgfTtcclxuXHJcbiAgICBnZXRGZWUoKSB7XHJcbiAgICAgICAgLy8gUmV0dXJuIGZlZSB2aWEgcmVmc1xyXG4gICAgICAgIHJldHVybiBlc3RpbWF0ZUZlZShcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vcFR5cGUsXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMub3B0aW9ucyxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5nbG9iYWxPYmplY3RcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge29wVHlwZSwgb3B0aW9ucywgZ2xvYmFsT2JqZWN0fSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGlmICghb3BUeXBlIHx8ICFvcHRpb25zIHx8ICFnbG9iYWxPYmplY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYW1vdW50ID0gZXN0aW1hdGVGZWUob3BUeXBlLCBvcHRpb25zLCBnbG9iYWxPYmplY3QpO1xyXG5cclxuICAgICAgICByZXR1cm4gPEZvcm1hdHRlZEFzc2V0IGFtb3VudD17YW1vdW50fSBhc3NldD1cIjEuMy4wXCIgLz47XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJpbmRUb0NoYWluU3RhdGUoRm9ybWF0dGVkRmVlKTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgTGlua1RvQWNjb3VudEJ5SWQgZnJvbSBcIi4uL1V0aWxpdHkvTGlua1RvQWNjb3VudEJ5SWRcIjtcclxuaW1wb3J0IExpbmtUb0Fzc2V0QnlJZCBmcm9tIFwiLi4vVXRpbGl0eS9MaW5rVG9Bc3NldEJ5SWRcIjtcclxuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuLi9BY2NvdW50L0FjY291bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgQXNzZXRTZWxlY3RvciBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldFNlbGVjdG9yXCI7XHJcbmltcG9ydCBjbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gXCJhbHQtcmVhY3RcIjtcclxuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XHJcbmltcG9ydCBTZXR0aW5nc0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvU2V0dGluZ3NBY3Rpb25zXCI7XHJcblxyXG5jbGFzcyBBc3NldFdoaXRlbGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGxpc3RUeXBlOiBwcm9wcy5hc3NldFdoaXRlTGlzdFR5cGUsXHJcbiAgICAgICAgICAgIGFjY291bnRUYWJsZTogcHJvcHMuYXNzZXRXaGl0ZUxpc3RUeXBlLmluZGV4T2YoXCJtYXJrZXRcIikgPT09IC0xLFxyXG4gICAgICAgICAgICBsaXN0VHlwZXM6IFtcclxuICAgICAgICAgICAgICAgIFwid2hpdGVsaXN0X2F1dGhvcml0aWVzXCIsXHJcbiAgICAgICAgICAgICAgICBcImJsYWNrbGlzdF9hdXRob3JpdGllc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJ3aGl0ZWxpc3RfbWFya2V0c1wiLFxyXG4gICAgICAgICAgICAgICAgXCJibGFja2xpc3RfbWFya2V0c1wiXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIGFzc2V0SW5wdXQ6IG51bGwsXHJcbiAgICAgICAgICAgIGFzc2V0X2lkOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJBY2NvdW50VGFibGVzKCkge1xyXG4gICAgICAgIGNvbnN0IHtsaXN0VHlwZX0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMucHJvcHMud2hpdGVMaXN0RW5hYmxlZClcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0eHRsYWJlbCBjYW5jZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4cGxvcmVyLmFzc2V0LndoaXRlbGlzdC5lbmFibGVfZmxhZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGRhc2hib2FyZC10YWJsZSB0YWJsZS1ob3ZlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLmFjY291bnQudGl0bGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucmVtb3ZlX3RleHRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHNbbGlzdFR5cGVdLm1hcChhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17YX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rVG9BY2NvdW50QnlJZCBhY2NvdW50PXthfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNsaWNrYWJsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2hhbmdlTGlzdC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZW1vdmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJjcm9zcy1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMuY3Jvc3NfY2lyY2xlLnJlbW92ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e3BhZGRpbmdUb3A6IFwiMnJlbVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17YGFjY291bnQud2hpdGVsaXN0LiR7bGlzdFR5cGV9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU9e3RoaXMucHJvcHMuYXV0aG9yaXR5X25hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYXV0aG9yaXR5X25hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uQWNjb3VudE5hbWVDaGFuZ2VkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhdXRob3JpdHlfbmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjb3VudENoYW5nZWQ9e3RoaXMucHJvcHMub25BY2NvdW50Q2hhbmdlZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmV3X2F1dGhvcml0eV9pZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yPXtudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uX2xhYmVsPVwiYWNjb3VudC5wZXJtLmNvbmZpcm1fYWRkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY3Rpb249e3RoaXMucHJvcHMub25DaGFuZ2VMaXN0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5uZXdfYXV0aG9yaXR5X2lkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkFzc2V0Q2hhbmdlKGFzc2V0KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGFzc2V0SW5wdXQ6IGFzc2V0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uQXNzZXRGb3VuZChhc3NldCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBhc3NldF9pZDogYXNzZXQgPyBhc3NldC5nZXQoXCJpZFwiKSA6IG51bGxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJNYXJrZXRUYWJsZSgpIHtcclxuICAgICAgICBjb25zdCB7bGlzdFR5cGV9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZSBkYXNoYm9hcmQtdGFibGUgdGFibGUtaG92ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5hc3NldC50aXRsZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5yZW1vdmVfdGV4dFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wc1tsaXN0VHlwZV0ubWFwKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIga2V5PXthfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtUb0Fzc2V0QnlJZCBhc3NldD17YX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjbGlja2FibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNoYW5nZUxpc3QuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicmVtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmNyb3NzX2NpcmNsZS5yZW1vdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3twYWRkaW5nVG9wOiBcIjJyZW1cIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxBc3NldFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtgZXhwbG9yZXIuYXNzZXQud2hpdGVsaXN0LiR7bGlzdFR5cGV9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uQXNzZXRDaGFuZ2UuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUuYXNzZXRJbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRJbnB1dD17dGhpcy5zdGF0ZS5hc3NldElucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCIxMDAlXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkZvdW5kPXt0aGlzLl9vbkFzc2V0Rm91bmQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uX2xhYmVsPVwiYWNjb3VudC5wZXJtLmNvbmZpcm1fYWRkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY3Rpb249e3RoaXMucHJvcHMub25DaGFuZ2VMaXN0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5hc3NldF9pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Td2l0Y2hUeXBlKHR5cGUpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgbGlzdFR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgIGFjY291bnRUYWJsZTogdHlwZS5pbmRleE9mKFwibWFya2V0XCIpID09PSAtMVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIGFzc2V0V2hpdGVMaXN0VHlwZTogdHlwZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB7YWNjb3VudFRhYmxlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlSW5kZXggPSB0aGlzLnN0YXRlLmxpc3RUeXBlcy5pbmRleE9mKHRoaXMuc3RhdGUubGlzdFR5cGUpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGxhcmdlLTggbGFyZ2Utb2Zmc2V0LTIgZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGVhZGVyLXNlbGVjdG9yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiBcIjJyZW1cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlbGVjdG9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5saXN0VHlwZXMubWFwKCh0eXBlLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17dHlwZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFwiaW5saW5lLWJsb2NrXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmFjdGl2ZTogYWN0aXZlSW5kZXggIT09IGluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uU3dpdGNoVHlwZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2BleHBsb3Jlci5hc3NldC53aGl0ZWxpc3QuJHt0eXBlfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIHthY2NvdW50VGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnJlbmRlckFjY291bnRUYWJsZXMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMucmVuZGVyTWFya2V0VGFibGUoKX1cclxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KEFzc2V0V2hpdGVsaXN0LCB7XHJcbiAgICBsaXN0ZW5UbygpIHtcclxuICAgICAgICByZXR1cm4gW1NldHRpbmdzU3RvcmVdO1xyXG4gICAgfSxcclxuICAgIGdldFByb3BzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFzc2V0V2hpdGVMaXN0VHlwZTogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnZpZXdTZXR0aW5ncy5nZXQoXHJcbiAgICAgICAgICAgICAgICBcImFzc2V0V2hpdGVMaXN0VHlwZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJ3aGl0ZWxpc3RfYXV0aG9yaXRpZXNcIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSk7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IEFzc2V0QWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9Bc3NldEFjdGlvbnNcIjtcclxuaW1wb3J0IEFjY291bnRTZWxlY3RvciBmcm9tIFwiLi4vQWNjb3VudC9BY2NvdW50U2VsZWN0b3JcIjtcclxuaW1wb3J0IExpbmtUb0FjY291bnRCeUlkIGZyb20gXCIuLi9VdGlsaXR5L0xpbmtUb0FjY291bnRCeUlkXCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWNjb3VudEZlZWRQcm9kdWNlcnMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHByb2R1Y2VyX25hbWU6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIG9uQWNjb3VudENoYW5nZWQoYWNjb3VudCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBuZXdfcHJvZHVjZXJfaWQ6IGFjY291bnQgPyBhY2NvdW50LmdldChcImlkXCIpIDogbnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQWNjb3VudE5hbWVDaGFuZ2VkKG5hbWUpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgcHJvZHVjZXJfbmFtZTogbmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB7d2l0bmVzc0ZlZCwgY29tbWl0dGVlRmVkfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGlmICh3aXRuZXNzRmVkIHx8IGNvbW1pdHRlZUZlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgc21hbGwtMTIgbGFyZ2UtOCBsYXJnZS1vZmZzZXQtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwicFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mZWVkX25vdF9hbGxvd2VkXzFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoYXMtZXJyb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZlZWRfbm90X2FsbG93ZWRfMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgc21hbGwtMTIgbGFyZ2UtOCBsYXJnZS1vZmZzZXQtMlwiPlxyXG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGRhc2hib2FyZC10YWJsZSB0YWJsZS1ob3ZlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIuYWNjb3VudC50aXRsZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5yZW1vdmVfdGV4dFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5wcm9kdWNlcnMubWFwKChhLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2F9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAje2kgKyAxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQWNjb3VudEJ5SWQgYWNjb3VudD17YX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjbGlja2FibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNoYW5nZUxpc3QuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicmVtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmNyb3NzX2NpcmNsZS5yZW1vdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3twYWRkaW5nVG9wOiBcIjJyZW1cIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e1wiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYWRkX2ZlZWRcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU9e3RoaXMuc3RhdGUucHJvZHVjZXJfbmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5zdGF0ZS5wcm9kdWNlcl9uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkFjY291bnROYW1lQ2hhbmdlZC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFjY291bnRDaGFuZ2VkPXt0aGlzLm9uQWNjb3VudENoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I9e251bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25fbGFiZWw9XCJhY2NvdW50LnBlcm0uY29uZmlybV9hZGRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFjdGlvbj17dGhpcy5wcm9wcy5vbkNoYW5nZUxpc3QuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5uZXdfcHJvZHVjZXJfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQge0xpbmt9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCBTdGF0aXN0aWNzIGZyb20gXCIuL1N0YXRpc3RpY3NcIjtcclxuaW1wb3J0IEFjY291bnRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL0FjY291bnRBY3Rpb25zXCI7XHJcbmltcG9ydCBUaW1lQWdvIGZyb20gXCIuLi9VdGlsaXR5L1RpbWVBZ29cIjtcclxuaW1wb3J0IEhlbHBDb250ZW50IGZyb20gXCIuLi9VdGlsaXR5L0hlbHBDb250ZW50XCI7XHJcbmltcG9ydCBhY2NvdW50VXRpbHMgZnJvbSBcImNvbW1vbi9hY2NvdW50X3V0aWxzXCI7XHJcbmltcG9ydCB7VGFicywgVGFifSBmcm9tIFwiLi4vVXRpbGl0eS9UYWJzXCI7XHJcbmltcG9ydCB7Z2V0V2FsbGV0TmFtZX0gZnJvbSBcImJyYW5kaW5nXCI7XHJcbmltcG9ydCB7Z2V0V2FsbGV0VVJMfSBmcm9tIFwiLi4vLi4vYnJhbmRpbmdcIjtcclxuXHJcbmNsYXNzIEZlZUhlbHAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBkcHJvcHM6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgZHByb3BzOiBcIjIuMS4wXCJcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7ZHByb3BzfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxIZWxwQ29udGVudFxyXG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgICAgICBwYXRoPVwiY29tcG9uZW50cy9BY2NvdW50TWVtYmVyc2hpcFwiXHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uPVwiZmVlLWRpdmlzaW9uXCJcclxuICAgICAgICAgICAgICAgIG5leHRNYWludGVuYW5jZVRpbWU9e3tcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBkcHJvcHMuZ2V0KFwibmV4dF9tYWludGVuYW5jZV90aW1lXCIpXHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuRmVlSGVscCA9IEJpbmRUb0NoYWluU3RhdGUoRmVlSGVscCk7XHJcblxyXG5jbGFzcyBBY2NvdW50TWVtYmVyc2hpcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFjY291bnQ6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgZ3Byb3BzOiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgY29yZV9hc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIGdwcm9wczogXCIyLjAuMFwiLFxyXG4gICAgICAgIGNvcmVfYXNzZXQ6IFwiMS4zLjBcIlxyXG4gICAgfTtcclxuXHJcbiAgICB1cGdyYWRlQWNjb3VudChpZCwgbGlmZXRpbWUsIGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgQWNjb3VudEFjdGlvbnMudXBncmFkZUFjY291bnQoaWQsIGxpZmV0aW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICAgICAgYWNjb3VudFV0aWxzLmdldEZpbmFsRmVlQXNzZXQodGhpcy5wcm9wcy5hY2NvdW50LCBcImFjY291bnRfdXBncmFkZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtncHJvcHMsIGNvcmVfYXNzZXR9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgbGV0IGFjY291bnQgPSB0aGlzLnByb3BzLmFjY291bnQudG9KUygpO1xyXG5cclxuICAgICAgICBsZXQgbHRyID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGFjY291bnQubGlmZXRpbWVfcmVmZXJyZXIsIGZhbHNlKTtcclxuICAgICAgICBpZiAobHRyKSBhY2NvdW50LmxpZmV0aW1lX3JlZmVycmVyX25hbWUgPSBsdHIuZ2V0KFwibmFtZVwiKTtcclxuICAgICAgICBsZXQgcmVmID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGFjY291bnQucmVmZXJyZXIsIGZhbHNlKTtcclxuICAgICAgICBpZiAocmVmKSBhY2NvdW50LnJlZmVycmVyX25hbWUgPSByZWYuZ2V0KFwibmFtZVwiKTtcclxuICAgICAgICBsZXQgcmVnID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGFjY291bnQucmVnaXN0cmFyLCBmYWxzZSk7XHJcbiAgICAgICAgaWYgKHJlZykgYWNjb3VudC5yZWdpc3RyYXJfbmFtZSA9IHJlZy5nZXQoXCJuYW1lXCIpO1xyXG5cclxuICAgICAgICBsZXQgYWNjb3VudF9uYW1lID0gYWNjb3VudC5uYW1lO1xyXG5cclxuICAgICAgICBsZXQgbmV0d29ya19mZWUgPSBhY2NvdW50Lm5ldHdvcmtfZmVlX3BlcmNlbnRhZ2UgLyAxMDA7XHJcbiAgICAgICAgbGV0IGxpZmV0aW1lX2ZlZSA9IGFjY291bnQubGlmZXRpbWVfcmVmZXJyZXJfZmVlX3BlcmNlbnRhZ2UgLyAxMDA7XHJcbiAgICAgICAgbGV0IHJlZmVycmVyX3RvdGFsX2ZlZSA9IDEwMCAtIG5ldHdvcmtfZmVlIC0gbGlmZXRpbWVfZmVlO1xyXG4gICAgICAgIGxldCByZWZlcnJlcl9mZWUgPVxyXG4gICAgICAgICAgICAocmVmZXJyZXJfdG90YWxfZmVlICogYWNjb3VudC5yZWZlcnJlcl9yZXdhcmRzX3BlcmNlbnRhZ2UpIC8gMTAwMDA7XHJcbiAgICAgICAgbGV0IHJlZ2lzdHJhcl9mZWUgPSAxMDAgLSByZWZlcnJlcl9mZWUgLSBsaWZldGltZV9mZWUgLSBuZXR3b3JrX2ZlZTtcclxuXHJcbiAgICAgICAgbGV0IGxpZmV0aW1lX2Nvc3QgPVxyXG4gICAgICAgICAgICAoZ3Byb3BzLmdldEluKFtcclxuICAgICAgICAgICAgICAgIFwicGFyYW1ldGVyc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJjdXJyZW50X2ZlZXNcIixcclxuICAgICAgICAgICAgICAgIFwicGFyYW1ldGVyc1wiLFxyXG4gICAgICAgICAgICAgICAgOCxcclxuICAgICAgICAgICAgICAgIDEsXHJcbiAgICAgICAgICAgICAgICBcIm1lbWJlcnNoaXBfbGlmZXRpbWVfZmVlXCJcclxuICAgICAgICAgICAgXSkgKlxyXG4gICAgICAgICAgICAgICAgZ3Byb3BzLmdldEluKFtcInBhcmFtZXRlcnNcIiwgXCJjdXJyZW50X2ZlZXNcIiwgXCJzY2FsZVwiXSkpIC9cclxuICAgICAgICAgICAgMTAwMDA7XHJcblxyXG4gICAgICAgIGxldCBtZW1iZXJfc3RhdHVzID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50TWVtYmVyU3RhdHVzKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnRcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBtZW1iZXJzaGlwID0gXCJhY2NvdW50Lm1lbWJlci5cIiArIG1lbWJlcl9zdGF0dXM7XHJcbiAgICAgICAgbGV0IGV4cGlyYXRpb24gPSBudWxsO1xyXG4gICAgICAgIGlmIChtZW1iZXJfc3RhdHVzID09PSBcImFubnVhbFwiKVxyXG4gICAgICAgICAgICBleHBpcmF0aW9uID0gKFxyXG4gICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLmV4cGlyZXNcIiAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICA8VGltZUFnbyB0aW1lPXthY2NvdW50Lm1lbWJlcnNoaXBfZXhwaXJhdGlvbl9kYXRlfSAvPilcclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBsZXQgZXhwaXJhdGlvbl9kYXRlID0gYWNjb3VudC5tZW1iZXJzaGlwX2V4cGlyYXRpb25fZGF0ZTtcclxuICAgICAgICBpZiAoZXhwaXJhdGlvbl9kYXRlID09PSBcIjE5NjktMTItMzFUMjM6NTk6NTlcIilcclxuICAgICAgICAgICAgZXhwaXJhdGlvbl9kYXRlID0gXCJOZXZlclwiO1xyXG4gICAgICAgIGVsc2UgaWYgKGV4cGlyYXRpb25fZGF0ZSA9PT0gXCIxOTcwLTAxLTAxVDAwOjAwOjAwXCIpXHJcbiAgICAgICAgICAgIGV4cGlyYXRpb25fZGF0ZSA9IFwiTi9BXCI7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLWNvbnRhaW5lciBnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFic1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmc9XCJtZW1iZXJzaGlwVGFiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFjY291bnQtdGFic1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2xhc3M9XCJhY2NvdW50LW92ZXJ2aWV3IGJvcmRlcmVkLWhlYWRlciBjb250ZW50LWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cInBhZGRpbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5tZW1iZXIubWVtYmVyc2hpcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PXttZW1iZXJzaGlwfSAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2V4cGlyYXRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bWVtYmVyX3N0YXR1cyA9PT0gXCJsaWZldGltZVwiID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGFyZ2UtNiBtZWRpdW0tOFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIZWxwQ29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPVwiY29tcG9uZW50cy9BY2NvdW50TWVtYmVyc2hpcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb249XCJsaWZldGltZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlZXNDYXNoYmFjaz17MTAwIC0gbmV0d29ya19mZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGxpZmV0aW1lX2Nvc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldDogY29yZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b24gbm8tbWFyZ2luXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy51cGdyYWRlQWNjb3VudC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci51cGdyYWRlX2xpZmV0aW1lXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7ICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0cnVlIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyX3N0YXR1cyA9PT1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhbm51YWxcIiA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnVwZ3JhZGVBY2NvdW50LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5zdWJzY3JpYmVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgbm8tbWFyZ2luXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibm8tbWFyZ2luIGdyaWQtYmxvY2sgdmVydGljYWwgbGFyZ2UtaG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJuby1tYXJnaW4gZ3JpZC1ibG9jayBsYXJnZS01XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge21lbWJlcl9zdGF0dXMgPT09XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGlmZXRpbWVcIiA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5yZWZlcnJhbF9saW5rXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQubWVtYmVyLnJlZmVycmFsX3RleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXRfbmFtZT17Z2V0V2FsbGV0TmFtZSgpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2dldFdhbGxldFVSTCgpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAvP3I9JHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50Lm5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLmZlZV9hbGxvY2F0aW9uXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGtleS12YWx1ZS10YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIubmV0d29ya19wZXJjZW50YWdlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25ldHdvcmtfZmVlfSVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIubGlmZXRpbWVfcmVmZXJyZXJcIiAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwOyAoPExpbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17YGFjY291bnQvJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5saWZldGltZV9yZWZlcnJlcl9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmxpZmV0aW1lX3JlZmVycmVyX25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGlmZXRpbWVfZmVlfSVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIucmVnaXN0cmFyXCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDsgKDxMaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG89e2BhY2NvdW50LyR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQucmVnaXN0cmFyX25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQucmVnaXN0cmFyX25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVnaXN0cmFyX2ZlZX0lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLnJlZmVycmVyXCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDsgKDxMaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG89e2BhY2NvdW50LyR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQucmVmZXJyZXJfbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5yZWZlcnJlcl9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlZmVycmVyX2ZlZX0lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLm1lbWJlcnNoaXBfZXhwaXJhdGlvblwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbl9kYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ1RvcDogXCIxcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5mZWVzX2Nhc2hiYWNrXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGtleS12YWx1ZS10YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFN0YXRpc3RpY3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0X29iamVjdD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuc3RhdGlzdGljc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBsYXJnZS03XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZlZUhlbHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnRfbmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtGZWU9e25ldHdvcmtfZmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJyZXJGZWU9e3JlZmVycmVyX2ZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhckZlZT17cmVnaXN0cmFyX2ZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpZmV0aW1lRmVlPXtsaWZldGltZV9mZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcnJlclRvdGFsRmVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcnJlcl90b3RhbF9mZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW50ZW5hbmNlSW50ZXJ2YWw9e2dwcm9wcy5nZXRJbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYW1ldGVyc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1haW50ZW5hbmNlX2ludGVydmFsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVzdGluZ1RocmVzaG9sZD17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZ3Byb3BzLmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhbWV0ZXJzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2FzaGJhY2tfdmVzdGluZ190aHJlc2hvbGRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0OiBjb3JlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVzdGluZ1BlcmlvZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3Byb3BzLmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhbWV0ZXJzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2FzaGJhY2tfdmVzdGluZ19wZXJpb2Rfc2Vjb25kc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSkgL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYwIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA2MCAvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMjRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5BY2NvdW50TWVtYmVyc2hpcCA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudE1lbWJlcnNoaXApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWNjb3VudE1lbWJlcnNoaXA7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcblxyXG5jbGFzcyBTdGF0aXN0aWNzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgc3RhdF9vYmplY3Q6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHN0YXRfb2JqZWN0ID0gdGhpcy5wcm9wcy5zdGF0X29iamVjdC50b0pTKCk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuZmVlc19wYWlkXCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtwYXJzZUZsb2F0KHN0YXRfb2JqZWN0LmxpZmV0aW1lX2ZlZXNfcGFpZCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD1cIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCaW5kVG9DaGFpblN0YXRlKFN0YXRpc3RpY3MpO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IEZvcm1hdHRlZEFzc2V0IGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZEFzc2V0XCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBXYWxsZXRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL1dhbGxldEFjdGlvbnNcIjtcclxuaW1wb3J0IHtBcGlzfSBmcm9tIFwiYml0c2hhcmVzanMtd3NcIjtcclxuaW1wb3J0IHtUYWJzLCBUYWJ9IGZyb20gXCIuLi9VdGlsaXR5L1RhYnNcIjtcclxuXHJcbmNsYXNzIFZlc3RpbmdCYWxhbmNlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIF9vbkNsYWltKGNsYWltQWxsLCBlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIFdhbGxldEFjdGlvbnMuY2xhaW1WZXN0aW5nQmFsYW5jZShcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmlkLFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLnZiLFxyXG4gICAgICAgICAgICBjbGFpbUFsbFxyXG4gICAgICAgICkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLnByb3BzLmhhbmRsZUNoYW5nZWQgPT0gXCJmdW5jdGlvblwiICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmhhbmRsZUNoYW5nZWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHt2Yn0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGlmICghdGhpcy5wcm9wcy52Yikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBjdmJBc3NldCxcclxuICAgICAgICAgICAgdmVzdGluZ1BlcmlvZCxcclxuICAgICAgICAgICAgZWFybmVkLFxyXG4gICAgICAgICAgICBzZWNvbmRzUGVyRGF5ID0gNjAgKiA2MCAqIDI0LFxyXG4gICAgICAgICAgICBhdmFpbGFibGVQZXJjZW50LFxyXG4gICAgICAgICAgICBiYWxhbmNlO1xyXG4gICAgICAgIGlmICh2Yikge1xyXG4gICAgICAgICAgICBiYWxhbmNlID0gdmIuYmFsYW5jZS5hbW91bnQ7XHJcbiAgICAgICAgICAgIGN2YkFzc2V0ID0gQ2hhaW5TdG9yZS5nZXRBc3NldCh2Yi5iYWxhbmNlLmFzc2V0X2lkKTtcclxuICAgICAgICAgICAgZWFybmVkID0gdmIucG9saWN5WzFdLmNvaW5fc2Vjb25kc19lYXJuZWQ7XHJcbiAgICAgICAgICAgIHZlc3RpbmdQZXJpb2QgPSB2Yi5wb2xpY3lbMV0udmVzdGluZ19zZWNvbmRzO1xyXG4gICAgICAgICAgICBhdmFpbGFibGVQZXJjZW50ID1cclxuICAgICAgICAgICAgICAgIHZlc3RpbmdQZXJpb2QgPT09IDAgfHwgdmIuYmFsYW5jZV90eXBlID09IFwibWFya2V0X2ZlZV9zaGFyaW5nXCJcclxuICAgICAgICAgICAgICAgICAgICA/IDFcclxuICAgICAgICAgICAgICAgICAgICA6IGVhcm5lZCAvICh2ZXN0aW5nUGVyaW9kICogYmFsYW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWN2YkFzc2V0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFiYWxhbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoNVwiXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudmVzdGluZy5iYWxhbmNlX251bWJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ9e3ZiLmlkfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUga2V5LXZhbHVlLXRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuY2FzaGJhY2tcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXt2Yi5iYWxhbmNlLmFtb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3ZiLmJhbGFuY2UuYXNzZXRfaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5lYXJuZWRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuZ2V0X2Fzc2V0X2Ftb3VudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhcm5lZCAvIHNlY29uZHNQZXJEYXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdmJBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5jb2luZGF5c1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIucmVxdWlyZWRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuZ2V0X2Fzc2V0X2Ftb3VudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh2Yi5iYWxhbmNlLmFtb3VudCAqIHZlc3RpbmdQZXJpb2QpIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzUGVyRGF5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3ZiQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuY29pbmRheXNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLnJlbWFpbmluZ1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1dGlscy5mb3JtYXRfbnVtYmVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodmVzdGluZ1BlcmlvZCAqICgxIC0gYXZhaWxhYmxlUGVyY2VudCkpIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHNQZXJEYXkgfHwgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7ZGF5c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLmF2YWlsYWJsZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1dGlscy5mb3JtYXRfbnVtYmVyKGF2YWlsYWJsZVBlcmNlbnQgKiAxMDAsIDIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICUgL3tcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZVBlcmNlbnQgKiB2Yi5iYWxhbmNlLmFtb3VudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtjdmJBc3NldC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49XCIyXCIgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25DbGFpbS5iaW5kKHRoaXMsIGZhbHNlKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLmNsYWltXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEFjY291bnRWZXN0aW5nIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHZiczogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMucmV0cmlldmVWZXN0aW5nQmFsYW5jZXMuY2FsbCh0aGlzLCB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIikpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxVcGRhdGUobmV4dFByb3BzKSB7XHJcbiAgICAgICAgbGV0IG5ld0lkID0gbmV4dFByb3BzLmFjY291bnQuZ2V0KFwiaWRcIik7XHJcbiAgICAgICAgbGV0IG9sZElkID0gdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpO1xyXG5cclxuICAgICAgICBpZiAobmV3SWQgIT09IG9sZElkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmV0cmlldmVWZXN0aW5nQmFsYW5jZXMuY2FsbCh0aGlzLCBuZXdJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHJpZXZlVmVzdGluZ0JhbGFuY2VzKGFjY291bnRJZCkge1xyXG4gICAgICAgIGFjY291bnRJZCA9IGFjY291bnRJZCB8fCB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIik7XHJcbiAgICAgICAgQXBpcy5pbnN0YW5jZSgpXHJcbiAgICAgICAgICAgIC5kYl9hcGkoKVxyXG4gICAgICAgICAgICAuZXhlYyhcImdldF92ZXN0aW5nX2JhbGFuY2VzXCIsIFthY2NvdW50SWRdKVxyXG4gICAgICAgICAgICAudGhlbih2YnMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dmJzfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlcnJvcjpcIiwgZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7dmJzfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhdmJzIHx8XHJcbiAgICAgICAgICAgICF0aGlzLnByb3BzLmFjY291bnQgfHxcclxuICAgICAgICAgICAgIXRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJ2ZXN0aW5nX2JhbGFuY2VzXCIpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGFjY291bnQgPSB0aGlzLnByb3BzLmFjY291bnQudG9KUygpO1xyXG5cclxuICAgICAgICBsZXQgYmFsYW5jZXMgPSB2YnNcclxuICAgICAgICAgICAgLm1hcCh2YiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmIuYmFsYW5jZS5hbW91bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VmVzdGluZ0JhbGFuY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17dmIuaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Yj17dmJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ2hhbmdlZD17dGhpcy5yZXRyaWV2ZVZlc3RpbmdCYWxhbmNlcy5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihhID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIWE7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBhcHAtdGFibGVzIG5vLXBhZGRpbmdcIiByZWY9XCJhcHBUYWJsZXNcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBzbWFsbC0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1jb250YWluZXIgZ2VuZXJpYy1ib3JkZXJlZC1ib3hcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwidmVzdGluZ1RhYlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY2NvdW50LXRhYnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic0NsYXNzPVwiYWNjb3VudC1vdmVydmlldyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50Q2xhc3M9XCJwYWRkaW5nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQudmVzdGluZy50aXRsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudmVzdGluZy5leHBsYWluXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwicFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFiYWxhbmNlcy5sZW5ndGggPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBzdHlsZT17e3BhZGRpbmdUb3A6IFwiMXJlbVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC52ZXN0aW5nLm5vX2JhbGFuY2VzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuQWNjb3VudFZlc3RpbmcuVmVzdGluZ0JhbGFuY2UgPSBWZXN0aW5nQmFsYW5jZTtcclxuZXhwb3J0IGRlZmF1bHQgQWNjb3VudFZlc3Rpbmc7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IEltbXV0YWJsZSBmcm9tIFwiaW1tdXRhYmxlXCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgYWNjb3VudFV0aWxzIGZyb20gXCJjb21tb24vYWNjb3VudF91dGlsc1wiO1xyXG5pbXBvcnQgQXBwbGljYXRpb25BcGkgZnJvbSBcImFwaS9BcHBsaWNhdGlvbkFwaVwiO1xyXG5pbXBvcnQge1B1YmxpY0tleX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBBY2NvdW50UGVybWlzc2lvbnNMaXN0IGZyb20gXCIuL0FjY291bnRQZXJtaXNzaW9uc0xpc3RcIjtcclxuaW1wb3J0IEFjY291bnRQZXJtaXNzaW9uc01pZ3JhdGUgZnJvbSBcIi4vQWNjb3VudFBlcm1pc3Npb25zTWlncmF0ZVwiO1xyXG5pbXBvcnQgUHViS2V5SW5wdXQgZnJvbSBcIi4uL0Zvcm1zL1B1YktleUlucHV0XCI7XHJcbmltcG9ydCB7VGFicywgVGFifSBmcm9tIFwiLi4vVXRpbGl0eS9UYWJzXCI7XHJcbmltcG9ydCBIZWxwQ29udGVudCBmcm9tIFwiLi4vVXRpbGl0eS9IZWxwQ29udGVudFwiO1xyXG5pbXBvcnQge1JlY2VudFRyYW5zYWN0aW9uc30gZnJvbSBcIi4vUmVjZW50VHJhbnNhY3Rpb25zXCI7XHJcbmltcG9ydCBub3RpZnkgZnJvbSBcImFjdGlvbnMvTm90aWZpY2F0aW9uQWN0aW9uc1wiO1xyXG5cclxuY2xhc3MgQWNjb3VudFBlcm1pc3Npb25zIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7fTtcclxuICAgICAgICB0aGlzLm9uUHVibGlzaCA9IHRoaXMub25QdWJsaXNoLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vblJlc2V0ID0gdGhpcy5vblJlc2V0LmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlQWNjb3VudERhdGEodGhpcy5wcm9wcy5hY2NvdW50KTtcclxuICAgICAgICBhY2NvdW50VXRpbHMuZ2V0RmluYWxGZWVBc3NldCh0aGlzLnByb3BzLmFjY291bnQsIFwiYWNjb3VudF91cGRhdGVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcclxuICAgICAgICBpZiAobmV4dFByb3BzLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudClcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVBY2NvdW50RGF0YShuZXh0UHJvcHMuYWNjb3VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcGVybWlzc2lvbnNGcm9tSW1tdXRhYmxlT2JqKGF1dGhzKSB7XHJcbiAgICAgICAgbGV0IHRocmVzaG9sZCA9IGF1dGhzLmdldChcIndlaWdodF90aHJlc2hvbGRcIik7XHJcbiAgICAgICAgbGV0IGFjY291bnRfYXV0aHMgPSBhdXRocy5nZXQoXCJhY2NvdW50X2F1dGhzXCIpO1xyXG4gICAgICAgIGxldCBrZXlfYXV0aHMgPSBhdXRocy5nZXQoXCJrZXlfYXV0aHNcIik7XHJcbiAgICAgICAgbGV0IGFkZHJlc3NfYXV0aHMgPSBhdXRocy5nZXQoXCJhZGRyZXNzX2F1dGhzXCIpO1xyXG5cclxuICAgICAgICBsZXQgYWNjb3VudHMgPSBhY2NvdW50X2F1dGhzLm1hcChhID0+IGEuZ2V0KDApKTtcclxuICAgICAgICBsZXQga2V5cyA9IGtleV9hdXRocy5tYXAoYSA9PiBhLmdldCgwKSk7XHJcbiAgICAgICAgbGV0IGFkZHJlc3NlcyA9IGFkZHJlc3NfYXV0aHMubWFwKGEgPT4gYS5nZXQoMCkpO1xyXG5cclxuICAgICAgICBsZXQgd2VpZ2h0cyA9IGFjY291bnRfYXV0aHMucmVkdWNlKChyZXMsIGEpID0+IHtcclxuICAgICAgICAgICAgcmVzW2EuZ2V0KDApXSA9IGEuZ2V0KDEpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgIH0sIHt9KTtcclxuICAgICAgICB3ZWlnaHRzID0ga2V5X2F1dGhzLnJlZHVjZSgocmVzLCBhKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc1thLmdldCgwKV0gPSBhLmdldCgxKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICB9LCB3ZWlnaHRzKTtcclxuICAgICAgICB3ZWlnaHRzID0gYWRkcmVzc19hdXRocy5yZWR1Y2UoKHJlcywgYSkgPT4ge1xyXG4gICAgICAgICAgICByZXNbYS5nZXQoMCldID0gYS5nZXQoMSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgfSwgd2VpZ2h0cyk7XHJcblxyXG4gICAgICAgIHJldHVybiB7dGhyZXNob2xkLCBhY2NvdW50cywga2V5cywgYWRkcmVzc2VzLCB3ZWlnaHRzfTtcclxuICAgIH1cclxuXHJcbiAgICBwZXJtaXNzaW9uc1RvSnNvbih0aHJlc2hvbGQsIGFjY291bnRzLCBrZXlzLCBhZGRyZXNzZXMsIHdlaWdodHMpIHtcclxuICAgICAgICBsZXQgcmVzID0ge3dlaWdodF90aHJlc2hvbGQ6IHRocmVzaG9sZH07XHJcbiAgICAgICAgcmVzW1wiYWNjb3VudF9hdXRoc1wiXSA9IGFjY291bnRzXHJcbiAgICAgICAgICAgIC5zb3J0KHV0aWxzLnNvcnRJRClcclxuICAgICAgICAgICAgLm1hcChhID0+IFthLCB3ZWlnaHRzW2FdXSlcclxuICAgICAgICAgICAgLnRvSlMoKTtcclxuICAgICAgICByZXNbXCJrZXlfYXV0aHNcIl0gPSBrZXlzXHJcbiAgICAgICAgICAgIC5zb3J0KHV0aWxzLnNvcnRJRClcclxuICAgICAgICAgICAgLm1hcChhID0+IFthLCB3ZWlnaHRzW2FdXSlcclxuICAgICAgICAgICAgLnRvSlMoKTtcclxuICAgICAgICByZXNbXCJhZGRyZXNzX2F1dGhzXCJdID0gYWRkcmVzc2VzXHJcbiAgICAgICAgICAgIC5zb3J0KHV0aWxzLnNvcnRJRClcclxuICAgICAgICAgICAgLm1hcChhID0+IFthLCB3ZWlnaHRzW2FdXSlcclxuICAgICAgICAgICAgLnRvSlMoKTtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUFjY291bnREYXRhKGFjY291bnQpIHtcclxuICAgICAgICBsZXQgYWN0aXZlID0gdGhpcy5wZXJtaXNzaW9uc0Zyb21JbW11dGFibGVPYmooYWNjb3VudC5nZXQoXCJhY3RpdmVcIikpO1xyXG4gICAgICAgIGxldCBvd25lciA9IHRoaXMucGVybWlzc2lvbnNGcm9tSW1tdXRhYmxlT2JqKGFjY291bnQuZ2V0KFwib3duZXJcIikpO1xyXG4gICAgICAgIGxldCBtZW1vX2tleSA9IGFjY291bnQuZ2V0KFwib3B0aW9uc1wiKS5nZXQoXCJtZW1vX2tleVwiKTtcclxuICAgICAgICBsZXQgc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZV9hY2NvdW50czogYWN0aXZlLmFjY291bnRzLFxyXG4gICAgICAgICAgICBhY3RpdmVfa2V5czogYWN0aXZlLmtleXMsXHJcbiAgICAgICAgICAgIGFjdGl2ZV9hZGRyZXNzZXM6IGFjdGl2ZS5hZGRyZXNzZXMsXHJcbiAgICAgICAgICAgIG93bmVyX2FjY291bnRzOiBvd25lci5hY2NvdW50cyxcclxuICAgICAgICAgICAgb3duZXJfa2V5czogb3duZXIua2V5cyxcclxuICAgICAgICAgICAgb3duZXJfYWRkcmVzc2VzOiBvd25lci5hZGRyZXNzZXMsXHJcbiAgICAgICAgICAgIGFjdGl2ZV93ZWlnaHRzOiBhY3RpdmUud2VpZ2h0cyxcclxuICAgICAgICAgICAgb3duZXJfd2VpZ2h0czogb3duZXIud2VpZ2h0cyxcclxuICAgICAgICAgICAgYWN0aXZlX3RocmVzaG9sZDogYWN0aXZlLnRocmVzaG9sZCxcclxuICAgICAgICAgICAgb3duZXJfdGhyZXNob2xkOiBvd25lci50aHJlc2hvbGQsXHJcbiAgICAgICAgICAgIG1lbW9fa2V5OiBtZW1vX2tleSxcclxuICAgICAgICAgICAgcHJldl9hY3RpdmVfYWNjb3VudHM6IGFjdGl2ZS5hY2NvdW50cyxcclxuICAgICAgICAgICAgcHJldl9hY3RpdmVfa2V5czogYWN0aXZlLmtleXMsXHJcbiAgICAgICAgICAgIHByZXZfYWN0aXZlX2FkZHJlc3NlczogYWN0aXZlLmFkZHJlc3NlcyxcclxuICAgICAgICAgICAgcHJldl9vd25lcl9hY2NvdW50czogb3duZXIuYWNjb3VudHMsXHJcbiAgICAgICAgICAgIHByZXZfb3duZXJfa2V5czogb3duZXIua2V5cyxcclxuICAgICAgICAgICAgcHJldl9vd25lcl9hZGRyZXNzZXM6IG93bmVyLmFkZHJlc3NlcyxcclxuICAgICAgICAgICAgcHJldl9hY3RpdmVfd2VpZ2h0czogYWN0aXZlLndlaWdodHMsXHJcbiAgICAgICAgICAgIHByZXZfb3duZXJfd2VpZ2h0czogb3duZXIud2VpZ2h0cyxcclxuICAgICAgICAgICAgcHJldl9hY3RpdmVfdGhyZXNob2xkOiBhY3RpdmUudGhyZXNob2xkLFxyXG4gICAgICAgICAgICBwcmV2X293bmVyX3RocmVzaG9sZDogb3duZXIudGhyZXNob2xkLFxyXG4gICAgICAgICAgICBwcmV2X21lbW9fa2V5OiBtZW1vX2tleVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNDaGFuZ2VkKCkge1xyXG4gICAgICAgIGxldCBzID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzLmFjdGl2ZV9hY2NvdW50cyAhPT0gcy5wcmV2X2FjdGl2ZV9hY2NvdW50cyB8fFxyXG4gICAgICAgICAgICBzLmFjdGl2ZV9rZXlzICE9PSBzLnByZXZfYWN0aXZlX2tleXMgfHxcclxuICAgICAgICAgICAgcy5hY3RpdmVfYWRkcmVzc2VzICE9PSBzLnByZXZfYWN0aXZlX2FkZHJlc3NlcyB8fFxyXG4gICAgICAgICAgICBzLm93bmVyX2FjY291bnRzICE9PSBzLnByZXZfb3duZXJfYWNjb3VudHMgfHxcclxuICAgICAgICAgICAgcy5vd25lcl9rZXlzICE9PSBzLnByZXZfb3duZXJfa2V5cyB8fFxyXG4gICAgICAgICAgICBzLm93bmVyX2FkZHJlc3NlcyAhPT0gcy5wcmV2X293bmVyX2FkZHJlc3NlcyB8fFxyXG4gICAgICAgICAgICBzLmFjdGl2ZV90aHJlc2hvbGQgIT09IHMucHJldl9hY3RpdmVfdGhyZXNob2xkIHx8XHJcbiAgICAgICAgICAgIHMub3duZXJfdGhyZXNob2xkICE9PSBzLnByZXZfb3duZXJfdGhyZXNob2xkIHx8XHJcbiAgICAgICAgICAgIHMubWVtb19rZXkgIT09IHMucHJldl9tZW1vX2tleVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZGlkQ2hhbmdlKHR5cGUsIHMgPSB0aGlzLnN0YXRlKSB7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09IFwibWVtb1wiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzLm1lbW9fa2V5ICE9PSBzLnByZXZfbWVtb19rZXk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBkaWRDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICBbXCJfa2V5c1wiLCBcIl9hY3RpdmVfYWRkcmVzc2VzXCIsIFwiX2FjY291bnRzXCIsIFwiX3RocmVzaG9sZFwiXS5mb3JFYWNoKFxyXG4gICAgICAgICAgICBrZXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnQgPSB0eXBlICsga2V5O1xyXG4gICAgICAgICAgICAgICAgaWYgKHNbY3VycmVudF0gIT09IHNbXCJwcmV2X1wiICsgY3VycmVudF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBkaWRDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gZGlkQ2hhbmdlO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUHVibGlzaCgpIHtcclxuICAgICAgICBsZXQgcyA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHVwZGF0ZWRfYWNjb3VudCA9IHRoaXMucHJvcHMuYWNjb3VudC50b0pTKCk7XHJcblxyXG4gICAgICAgIC8vIFNldCBmZWUgYXNzZXRcclxuICAgICAgICB1cGRhdGVkX2FjY291bnQuZmVlID0ge1xyXG4gICAgICAgICAgICBhbW91bnQ6IDAsXHJcbiAgICAgICAgICAgIGFzc2V0X2lkOiBhY2NvdW50VXRpbHMuZ2V0RmluYWxGZWVBc3NldChcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRfYWNjb3VudC5pZCxcclxuICAgICAgICAgICAgICAgIFwiYWNjb3VudF91cGRhdGVcIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IHVwZGF0ZU9iamVjdCA9IHtcclxuICAgICAgICAgICAgYWNjb3VudDogdXBkYXRlZF9hY2NvdW50LmlkXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGlkQ2hhbmdlKFwiYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZU9iamVjdC5hY3RpdmUgPSB0aGlzLnBlcm1pc3Npb25zVG9Kc29uKFxyXG4gICAgICAgICAgICAgICAgcy5hY3RpdmVfdGhyZXNob2xkLFxyXG4gICAgICAgICAgICAgICAgcy5hY3RpdmVfYWNjb3VudHMsXHJcbiAgICAgICAgICAgICAgICBzLmFjdGl2ZV9rZXlzLFxyXG4gICAgICAgICAgICAgICAgcy5hY3RpdmVfYWRkcmVzc2VzLFxyXG4gICAgICAgICAgICAgICAgcy5hY3RpdmVfd2VpZ2h0c1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5kaWRDaGFuZ2UoXCJvd25lclwiKSkge1xyXG4gICAgICAgICAgICB1cGRhdGVPYmplY3Qub3duZXIgPSB0aGlzLnBlcm1pc3Npb25zVG9Kc29uKFxyXG4gICAgICAgICAgICAgICAgcy5vd25lcl90aHJlc2hvbGQsXHJcbiAgICAgICAgICAgICAgICBzLm93bmVyX2FjY291bnRzLFxyXG4gICAgICAgICAgICAgICAgcy5vd25lcl9rZXlzLFxyXG4gICAgICAgICAgICAgICAgcy5vd25lcl9hZGRyZXNzZXMsXHJcbiAgICAgICAgICAgICAgICBzLm93bmVyX3dlaWdodHNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLmRpZENoYW5nZShcIm93bmVyXCIpICYmXHJcbiAgICAgICAgICAgIHMub3duZXJfa2V5cy5zaXplID09PSAwICYmXHJcbiAgICAgICAgICAgIHMub3duZXJfYWRkcmVzc2VzLnNpemUgPT09IDAgJiZcclxuICAgICAgICAgICAgcy5vd25lcl9hY2NvdW50cy5zaXplID09PSAxICYmXHJcbiAgICAgICAgICAgIHMub3duZXJfYWNjb3VudHMuZmlyc3QoKSA9PT0gdXBkYXRlZF9hY2NvdW50LmlkXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub3RpZnkuYWRkTm90aWZpY2F0aW9uKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6XHJcbiAgICAgICAgICAgICAgICAgICAgXCJTZXR0aW5nIHlvdXIgb3duZXIgcGVybWlzc2lvbnMgbGlrZSB0aGlzIHdpbGwgcmVuZGVyIHlvdXIgYWNjb3VudCBwZXJtYW5lbnRseSB1bnVzYWJsZS4gUGxlYXNlIG1ha2Ugc3VyZSB5b3Uga25vdyB3aGF0IHlvdSdyZSBkb2luZyBiZWZvcmUgbW9kaWZ5aW5nIGFjY291bnQgYXV0aG9yaXRpZXMhXCIsXHJcbiAgICAgICAgICAgICAgICBsZXZlbDogXCJlcnJvclwiLFxyXG4gICAgICAgICAgICAgICAgYXV0b0Rpc21pc3M6IDEwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHMubWVtb19rZXkgJiZcclxuICAgICAgICAgICAgdGhpcy5kaWRDaGFuZ2UoXCJtZW1vXCIpICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNWYWxpZFB1YktleShzLm1lbW9fa2V5KVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB1cGRhdGVPYmplY3QubmV3X29wdGlvbnMgPSB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwib3B0aW9uc1wiKS50b0pTKCk7XHJcbiAgICAgICAgICAgIHVwZGF0ZU9iamVjdC5uZXdfb3B0aW9ucy5tZW1vX2tleSA9IHMubWVtb19rZXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIi0tIEFjY291bnRQZXJtaXNzaW9ucy5vblB1Ymxpc2ggLS0+XCIsIHVwZGF0ZU9iamVjdCwgcy5tZW1vX2tleSk7XHJcbiAgICAgICAgQXBwbGljYXRpb25BcGkudXBkYXRlQWNjb3VudCh1cGRhdGVPYmplY3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVmFsaWRQdWJLZXkodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gISFQdWJsaWNLZXkuZnJvbVB1YmxpY0tleVN0cmluZyh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZXNldCgpIHtcclxuICAgICAgICBsZXQgcyA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGFjdGl2ZV9hY2NvdW50czogcy5wcmV2X2FjdGl2ZV9hY2NvdW50cyxcclxuICAgICAgICAgICAgYWN0aXZlX2tleXM6IHMucHJldl9hY3RpdmVfa2V5cyxcclxuICAgICAgICAgICAgYWN0aXZlX2FkZHJlc3Nlczogcy5wcmV2X2FjdGl2ZV9hZGRyZXNzZXMsXHJcbiAgICAgICAgICAgIG93bmVyX2FjY291bnRzOiBzLnByZXZfb3duZXJfYWNjb3VudHMsXHJcbiAgICAgICAgICAgIG93bmVyX2tleXM6IHMucHJldl9vd25lcl9rZXlzLFxyXG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzZXM6IHMucHJldl9vd25lcl9hZGRyZXNzZXMsXHJcbiAgICAgICAgICAgIGFjdGl2ZV93ZWlnaHRzOiBzLnByZXZfYWN0aXZlX3dlaWdodHMsXHJcbiAgICAgICAgICAgIG93bmVyX3dlaWdodHM6IHMucHJldl9vd25lcl93ZWlnaHRzLFxyXG4gICAgICAgICAgICBhY3RpdmVfdGhyZXNob2xkOiBzLnByZXZfYWN0aXZlX3RocmVzaG9sZCxcclxuICAgICAgICAgICAgb3duZXJfdGhyZXNob2xkOiBzLnByZXZfb3duZXJfdGhyZXNob2xkLFxyXG4gICAgICAgICAgICBtZW1vX2tleTogcy5wcmV2X21lbW9fa2V5XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25BZGRJdGVtKGNvbGxlY3Rpb24sIGl0ZW1fdmFsdWUsIHdlaWdodCkge1xyXG4gICAgICAgIGxldCBzdGF0ZSA9IHt9O1xyXG4gICAgICAgIGxldCBsaXN0ID1cclxuICAgICAgICAgICAgY29sbGVjdGlvbiArXHJcbiAgICAgICAgICAgICh1dGlscy5pc19vYmplY3RfaWQoaXRlbV92YWx1ZSkgPyBcIl9hY2NvdW50c1wiIDogXCJfa2V5c1wiKTtcclxuICAgICAgICBzdGF0ZVtsaXN0XSA9IHRoaXMuc3RhdGVbbGlzdF0ucHVzaChpdGVtX3ZhbHVlKTtcclxuICAgICAgICB0aGlzLnN0YXRlW2NvbGxlY3Rpb24gKyBcIl93ZWlnaHRzXCJdW2l0ZW1fdmFsdWVdID0gd2VpZ2h0O1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVtb3ZlSXRlbShjb2xsZWN0aW9uLCBpdGVtX3ZhbHVlLCBsaXN0U3VmZml4KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJvblJlbW92ZUl0ZW1cIiwgY29sbGVjdGlvbiwgaXRlbV92YWx1ZSwgbGlzdFN1ZmZpeCk7XHJcbiAgICAgICAgbGV0IHN0YXRlID0ge307XHJcbiAgICAgICAgbGV0IGxpc3QgPSBjb2xsZWN0aW9uICsgbGlzdFN1ZmZpeDtcclxuXHJcbiAgICAgICAgc3RhdGVbbGlzdF0gPSB0aGlzLnN0YXRlW2xpc3RdLmZpbHRlcihpID0+IGkgIT09IGl0ZW1fdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVGhyZXNob2xkQ2hhbmdlZCh2YXJfbmFtZSwgZXZlbnQpIHtcclxuICAgICAgICBsZXQgdmFsdWUgPSBwYXJzZUludChldmVudC50YXJnZXQudmFsdWUudHJpbSgpKTtcclxuICAgICAgICBsZXQgc3RhdGUgPSB7fTtcclxuICAgICAgICBzdGF0ZVt2YXJfbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICB2YWxpZGF0ZUFjY291bnQoY29sbGVjdGlvbiwgYWNjb3VudCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHN1bVVwV2VpZ2h0cyhhY2NvdW50cywga2V5cywgYWRkcmVzc2VzLCB3ZWlnaHRzKSB7XHJcbiAgICAgICAgbGV0IHN1bSA9IGFjY291bnRzLnJlZHVjZSgoc3VtLCBhKSA9PiBzdW0gKyB3ZWlnaHRzW2FdLCAwKTtcclxuICAgICAgICBzdW0gPSBrZXlzLnJlZHVjZSgoc3VtLCBhKSA9PiBzdW0gKyB3ZWlnaHRzW2FdLCBzdW0pO1xyXG4gICAgICAgIHJldHVybiBhZGRyZXNzZXMucmVkdWNlKChzdW0sIGEpID0+IHN1bSArIHdlaWdodHNbYV0sIHN1bSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25NZW1vS2V5Q2hhbmdlZChtZW1vX2tleSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe21lbW9fa2V5fSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25TZXRQYXNzd29yZEtleXMoa2V5cywgcm9sZXMgPSBbXCJhY3RpdmVcIiwgXCJvd25lclwiLCBcIm1lbW9cIl0pIHtcclxuICAgICAgICBsZXQgbmV3U3RhdGUgPSB7fTtcclxuXHJcbiAgICAgICAgcm9sZXMuZm9yRWFjaChyb2xlID0+IHtcclxuICAgICAgICAgICAgbmV3U3RhdGVbYHBhc3N3b3JkXyR7cm9sZX1gXSA9IGtleXNbcm9sZV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgZXJyb3IxLCBlcnJvcjI7XHJcblxyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIGFjdGl2ZV9hY2NvdW50cyxcclxuICAgICAgICAgICAgYWN0aXZlX2tleXMsXHJcbiAgICAgICAgICAgIGFjdGl2ZV9hZGRyZXNzZXMsXHJcbiAgICAgICAgICAgIGFjdGl2ZV93ZWlnaHRzXHJcbiAgICAgICAgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgb3duZXJfYWNjb3VudHMsXHJcbiAgICAgICAgICAgIG93bmVyX2tleXMsXHJcbiAgICAgICAgICAgIG93bmVyX2FkZHJlc3NlcyxcclxuICAgICAgICAgICAgb3duZXJfd2VpZ2h0c1xyXG4gICAgICAgIH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBsZXQgdGhyZXNob2xkID1cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5hY3RpdmVfdGhyZXNob2xkID4gMCA/IHRoaXMuc3RhdGUuYWN0aXZlX3RocmVzaG9sZCA6IDA7XHJcbiAgICAgICAgbGV0IHdlaWdodHNfdG90YWwgPSB0aGlzLnN1bVVwV2VpZ2h0cyhcclxuICAgICAgICAgICAgYWN0aXZlX2FjY291bnRzLFxyXG4gICAgICAgICAgICBhY3RpdmVfa2V5cyxcclxuICAgICAgICAgICAgYWN0aXZlX2FkZHJlc3NlcyxcclxuICAgICAgICAgICAgYWN0aXZlX3dlaWdodHNcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmICh0aGlzLmRpZENoYW5nZShcImFjdGl2ZVwiKSAmJiB3ZWlnaHRzX3RvdGFsIDwgdGhyZXNob2xkKVxyXG4gICAgICAgICAgICBlcnJvcjEgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0ud2FybmluZzFcIiwge1xyXG4gICAgICAgICAgICAgICAgd2VpZ2h0c190b3RhbCxcclxuICAgICAgICAgICAgICAgIHRocmVzaG9sZFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhyZXNob2xkID1cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5vd25lcl90aHJlc2hvbGQgPiAwID8gdGhpcy5zdGF0ZS5vd25lcl90aHJlc2hvbGQgOiAwO1xyXG4gICAgICAgIHdlaWdodHNfdG90YWwgPSB0aGlzLnN1bVVwV2VpZ2h0cyhcclxuICAgICAgICAgICAgb3duZXJfYWNjb3VudHMsXHJcbiAgICAgICAgICAgIG93bmVyX2tleXMsXHJcbiAgICAgICAgICAgIG93bmVyX2FkZHJlc3NlcyxcclxuICAgICAgICAgICAgb3duZXJfd2VpZ2h0c1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlkQ2hhbmdlKFwib3duZXJcIikgJiYgd2VpZ2h0c190b3RhbCA8IHRocmVzaG9sZClcclxuICAgICAgICAgICAgZXJyb3IyID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5wZXJtLndhcm5pbmcyXCIsIHtcclxuICAgICAgICAgICAgICAgIHdlaWdodHNfdG90YWwsXHJcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGRcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBwdWJsaXNoX2J1dHRvbnNfY2xhc3MgPVxyXG4gICAgICAgICAgICBcImJ1dHRvblwiICtcclxuICAgICAgICAgICAgKCEoZXJyb3IxIHx8IGVycm9yMikgJiZcclxuICAgICAgICAgICAgdGhpcy5pc0NoYW5nZWQoKSAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzVmFsaWRQdWJLZXkodGhpcy5zdGF0ZS5tZW1vX2tleSlcclxuICAgICAgICAgICAgICAgID8gXCJcIlxyXG4gICAgICAgICAgICAgICAgOiBcIiBkaXNhYmxlZFwiKTtcclxuICAgICAgICBsZXQgcmVzZXRfYnV0dG9uc19jbGFzcyA9XHJcbiAgICAgICAgICAgIFwiYnV0dG9uXCIgKyAodGhpcy5pc0NoYW5nZWQoKSA/IFwiXCIgOiBcIiBkaXNhYmxlZFwiKTtcclxuXHJcbiAgICAgICAgbGV0IGFjY291bnRzTGlzdCA9IEltbXV0YWJsZS5TZXQoKTtcclxuICAgICAgICBhY2NvdW50c0xpc3QgPSBhY2NvdW50c0xpc3QuYWRkKHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLWNvbnRhaW5lciBnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFic1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEFjdGl2ZVRhYj17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwicGVybWlzc2lvbnNUYWJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWNjb3VudC10YWJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNDbGFzcz1cImFjY291bnQtb3ZlcnZpZXcgYm9yZGVyZWQtaGVhZGVyIGNvbnRlbnQtYmxvY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudENsYXNzPVwicGFkZGluZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b25zPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbi1idXR0b25zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17cmVzZXRfYnV0dG9uc19jbGFzc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25SZXNldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucmVzZXRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17cHVibGlzaF9idXR0b25zX2NsYXNzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vblB1Ymxpc2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17OX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnB1Ymxpc2hcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQucGVybS5hY3RpdmVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SGVscENvbnRlbnQgcGF0aD1cImNvbXBvbmVudHMvQWNjb3VudFBlcm1BY3RpdmVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtIGNsYXNzTmFtZT1cInRocmVzaG9sZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnRocmVzaG9sZFwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7ICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwiNVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuYWN0aXZlX3RocmVzaG9sZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vblRocmVzaG9sZENoYW5nZWQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVfdGhyZXNob2xkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFBlcm1pc3Npb25zTGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQucGVybS5hZGRfcGVybWlzc2lvbl9sYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRzPXthY3RpdmVfYWNjb3VudHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXM9e2FjdGl2ZV9rZXlzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzPXthY3RpdmVfd2VpZ2h0c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzc2VzPXthY3RpdmVfYWRkcmVzc2VzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUFjY291bnQ9e3RoaXMudmFsaWRhdGVBY2NvdW50LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFkZEl0ZW09e3RoaXMub25BZGRJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZUl0ZW09e3RoaXMub25SZW1vdmVJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnBlcm0uYWNjb3VudF9uYW1lX29yX2tleVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9yMSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIGhhcy1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9yMX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5wZXJtLm93bmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEhlbHBDb250ZW50IHBhdGg9XCJjb21wb25lbnRzL0FjY291bnRQZXJtT3duZXJcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtIGNsYXNzTmFtZT1cInRocmVzaG9sZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnRocmVzaG9sZFwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7ICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwiNVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUub3duZXJfdGhyZXNob2xkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uVGhyZXNob2xkQ2hhbmdlZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm93bmVyX3RocmVzaG9sZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvQ29tcGxldGU9XCJvZmZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRQZXJtaXNzaW9uc0xpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnBlcm0uYWRkX3Blcm1pc3Npb25fbGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50cz17b3duZXJfYWNjb3VudHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXM9e293bmVyX2tleXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHM9e293bmVyX3dlaWdodHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3Nlcz17b3duZXJfYWRkcmVzc2VzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUFjY291bnQ9e3RoaXMudmFsaWRhdGVBY2NvdW50LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvd25lclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWRkSXRlbT17dGhpcy5vbkFkZEl0ZW0uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm93bmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZW1vdmVJdGVtPXt0aGlzLm9uUmVtb3ZlSXRlbS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3duZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnBlcm0uYWNjb3VudF9uYW1lX29yX2tleVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs1fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9yMiA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIGhhcy1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9yMn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5wZXJtLm1lbW9fa2V5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEhlbHBDb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWF4V2lkdGg6IFwiODAwcHhcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9XCJjb21wb25lbnRzL0FjY291bnRQZXJtTWVtb1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHViS2V5SW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwibWVtb19rZXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5tZW1vX2tleX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnBlcm0ubWVtb19wdWJsaWNfa2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQdWJsaWMgS2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25NZW1vS2V5Q2hhbmdlZC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17N31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQucGVybS5wYXNzd29yZF9tb2RlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50UGVybWlzc2lvbnNNaWdyYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZT17dGhpcy5zdGF0ZS5wYXNzd29yZF9hY3RpdmV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyPXt0aGlzLnN0YXRlLnBhc3N3b3JkX293bmVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vPXt0aGlzLnN0YXRlLnBhc3N3b3JkX21lbW99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2V0UGFzc3dvcmRLZXlzPXt0aGlzLm9uU2V0UGFzc3dvcmRLZXlzLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlS2V5cz17dGhpcy5zdGF0ZS5hY3RpdmVfa2V5c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3duZXJLZXlzPXt0aGlzLnN0YXRlLm93bmVyX2tleXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9LZXk9e3RoaXMuc3RhdGUubWVtb19rZXl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWRkQWN0aXZlPXt0aGlzLm9uQWRkSXRlbS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWN0aXZlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZW1vdmVBY3RpdmU9e3RoaXMub25SZW1vdmVJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFkZE93bmVyPXt0aGlzLm9uQWRkSXRlbS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3duZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZU93bmVyPXt0aGlzLm9uUmVtb3ZlSXRlbS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3duZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNldE1lbW89e3RoaXMub25NZW1vS2V5Q2hhbmdlZC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWItY29udGVudFwiIHN0eWxlPXt7cGFkZGluZzogMTB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGl2aWRlclwiIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJlY2VudFRyYW5zYWN0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRzTGlzdD17YWNjb3VudHNMaXN0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0PXsyNX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYWN0Vmlldz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyPVwiYWNjb3VudF91cGRhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIycmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWNjb3VudFBlcm1pc3Npb25zO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7TGlua30gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcclxuaW1wb3J0IEFjY291bnRTZWxlY3RvciBmcm9tIFwiLi9BY2NvdW50U2VsZWN0b3JcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgQWNjb3VudEltYWdlIGZyb20gXCIuL0FjY291bnRJbWFnZVwiO1xyXG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcclxuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xyXG5pbXBvcnQgUHJpdmF0ZUtleVZpZXcgZnJvbSBcImNvbXBvbmVudHMvUHJpdmF0ZUtleVZpZXdcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgQWRkcmVzc0luZGV4IGZyb20gXCJzdG9yZXMvQWRkcmVzc0luZGV4XCI7XHJcbmltcG9ydCBQcml2YXRlS2V5U3RvcmUgZnJvbSBcInN0b3Jlcy9Qcml2YXRlS2V5U3RvcmVcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5cclxuY2xhc3MgQWNjb3VudFBlcm1pc3Npb25Sb3cgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBhY2NvdW50OiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gICAgICAgIHB1YmtleTogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgICAgICBhZGRyZXNzOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgICAgIG9uUmVtb3ZlSXRlbTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgICAgICB3ZWlnaHRzOiBQcm9wVHlwZXMub2JqZWN0XHJcbiAgICB9O1xyXG5cclxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMpIHtcclxuICAgICAgICByZXR1cm4gIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KG5leHRQcm9wcywgdGhpcy5wcm9wcyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2xvb2tVcFB1YktleUZvckFkZHJlc3MoYWRkcmVzcykge1xyXG4gICAgICAgIHZhciBhZGRyZXNzZXMgPSBBZGRyZXNzSW5kZXguZ2V0U3RhdGUoKS5hZGRyZXNzZXM7XHJcbiAgICAgICAgdmFyIHB1YmtleSA9IGFkZHJlc3Nlcy5nZXQoYWRkcmVzcyk7XHJcbiAgICAgICAgcmV0dXJuIHB1YmtleTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IG5hbWUsIGl0ZW1faWQsIG5hbWVfb3Jfa2V5O1xyXG4gICAgICAgIGxldCBzdWZmaXggPSBcIl9hY2NvdW50c1wiO1xyXG4gICAgICAgIGxldCBwdWJLZXkgPSB0aGlzLnByb3BzLnB1YmtleTtcclxuXHJcbiAgICAgICAgY29uc3Qga2V5cyA9IFByaXZhdGVLZXlTdG9yZS5nZXRTdGF0ZSgpLmtleXM7XHJcblxyXG4gICAgICAgIGxldCBoYXNfcHJpdmF0ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY2NvdW50KSB7XHJcbiAgICAgICAgICAgIG5hbWUgPSB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwibmFtZVwiKTtcclxuICAgICAgICAgICAgaXRlbV9pZCA9IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKTtcclxuICAgICAgICAgICAgbmFtZV9vcl9rZXkgPSAoXHJcbiAgICAgICAgICAgICAgICA8TGluayB0bz17YC9hY2NvdW50LyR7bmFtZX0vcGVybWlzc2lvbnNgfT57bmFtZX08L0xpbms+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwdWJLZXkpIHtcclxuICAgICAgICAgICAgbmFtZSA9IGl0ZW1faWQgPSBwdWJLZXk7XHJcbiAgICAgICAgICAgIG5hbWVfb3Jfa2V5ID0gKFxyXG4gICAgICAgICAgICAgICAgPFByaXZhdGVLZXlWaWV3IHB1YmtleT17cHViS2V5fT57cHViS2V5fTwvUHJpdmF0ZUtleVZpZXc+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHN1ZmZpeCA9IFwiX2tleXNcIjtcclxuICAgICAgICAgICAgaGFzX3ByaXZhdGUgPSBrZXlzLmhhcyhwdWJLZXkpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5hZGRyZXNzKSB7XHJcbiAgICAgICAgICAgIHB1YktleSA9IHRoaXMuX2xvb2tVcFB1YktleUZvckFkZHJlc3ModGhpcy5wcm9wcy5hZGRyZXNzKTtcclxuICAgICAgICAgICAgaXRlbV9pZCA9IHRoaXMucHJvcHMuYWRkcmVzcztcclxuICAgICAgICAgICAgbmFtZV9vcl9rZXkgPSAhcHViS2V5ID8gKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hZGRyZXNzXHJcbiAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICA8UHJpdmF0ZUtleVZpZXcgcHVia2V5PXtwdWJLZXl9PntwdWJLZXl9PC9Qcml2YXRlS2V5Vmlldz5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgc3VmZml4ID0gXCJfYWRkcmVzc2VzXCI7XHJcbiAgICAgICAgICAgIGhhc19wcml2YXRlID0ga2V5cy5oYXMocHViS2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDx0ciBrZXk9e25hbWV9PlxyXG4gICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmFjY291bnQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50SW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9e3toZWlnaHQ6IDMwLCB3aWR0aDogMzB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17bmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApIDogcHViS2V5ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjY291bnQtaW1hZ2VcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQcml2YXRlS2V5VmlldyBwdWJrZXk9e3B1YktleX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb24gbmFtZT1cImtleVwiIHRpdGxlPVwiaWNvbnMua2V5XCIgc2l6ZT1cIjR4XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvUHJpdmF0ZUtleVZpZXc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9eyhoYXNfcHJpdmF0ZSA/IFwibXkta2V5XCIgOiBcIlwiKSArIFwiIHB1Yi1rZXlcIn0+XHJcbiAgICAgICAgICAgICAgICAgICAge25hbWVfb3Jfa2V5fVxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD57dGhpcy5wcm9wcy53ZWlnaHRzW2l0ZW1faWRdfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uUmVtb3ZlSXRlbS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1faWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMucmVtb3ZlX3dpdG5lc3NcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBBY2NvdW50UGVybWlzc2lvbnNMaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYWNjb3VudHM6IENoYWluVHlwZXMuQ2hhaW5PYmplY3RzTGlzdCxcclxuICAgICAgICBvbkFkZEl0ZW06IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXHJcbiAgICAgICAgb25SZW1vdmVJdGVtOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgICAgIHZhbGlkYXRlQWNjb3VudDogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgICAgICAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCwgLy8gYSB0cmFuc2xhdGlvbiBrZXkgZm9yIHRoZSBsYWJlbCxcclxuICAgICAgICBwbGFjZWhvbGRlcjogUHJvcFR5cGVzLnN0cmluZywgLy8gdGhlIHBsYWNlaG9sZGVyIHRleHQgdG8gYmUgZGlzcGxheWVkIHdoZW4gdGhlcmUgaXMgbm8gdXNlcl9pbnB1dFxyXG4gICAgICAgIHRhYkluZGV4OiBQcm9wVHlwZXMubnVtYmVyLCAvLyB0YWJpbmRleCBwcm9wZXJ0eSB0byBiZSBwYXNzZWQgdG8gaW5wdXQgdGFnXHJcbiAgICAgICAgd2VpZ2h0czogUHJvcFR5cGVzLm9iamVjdCAvLyB3ZWlnaHRzOiBoYXNoIG9mIHthY2NvdW50IGlkIC0+IHdlaWdodH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRfaXRlbTogbnVsbCxcclxuICAgICAgICAgICAgaXRlbV9uYW1lX2lucHV0OiBcIlwiLFxyXG4gICAgICAgICAgICB3ZWlnaHRfaW5wdXQ6IFwiXCIsXHJcbiAgICAgICAgICAgIGVycm9yOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm9uSXRlbUNoYW5nZSA9IHRoaXMub25JdGVtQ2hhbmdlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbkl0ZW1BY2NvdW50Q2hhbmdlID0gdGhpcy5vbkl0ZW1BY2NvdW50Q2hhbmdlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbkFkZEl0ZW0gPSB0aGlzLm9uQWRkSXRlbS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uSXRlbUNoYW5nZShpdGVtX25hbWVfaW5wdXQpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpdGVtX25hbWVfaW5wdXR9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkl0ZW1BY2NvdW50Q2hhbmdlKHNlbGVjdGVkX2l0ZW0pIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZF9pdGVtLCBlcnJvcjogbnVsbH0pO1xyXG4gICAgICAgIGlmIChzZWxlY3RlZF9pdGVtICYmIHRoaXMucHJvcHMudmFsaWRhdGVBY2NvdW50KSB7XHJcbiAgICAgICAgICAgIGxldCByZXMgPSB0aGlzLnByb3BzLnZhbGlkYXRlQWNjb3VudChzZWxlY3RlZF9pdGVtKTtcclxuICAgICAgICAgICAgaWYgKHJlcyA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlcyA9PT0gXCJzdHJpbmdcIikgdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6IHJlc30pO1xyXG4gICAgICAgICAgICBlbHNlIHJlcy50aGVuKGVycm9yID0+IHRoaXMuc2V0U3RhdGUoe2Vycm9yOiBlcnJvcn0pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25XZWlnaHRDaGFuZ2VkKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IHZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlLnRyaW0oKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHt3ZWlnaHRfaW5wdXQ6IHBhcnNlSW50KHZhbHVlKX0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQWRkSXRlbShpdGVtKSB7XHJcbiAgICAgICAgaWYgKCFpdGVtKSByZXR1cm47XHJcbiAgICAgICAgbGV0IG5leHRfc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkX2l0ZW06IG51bGwsXHJcbiAgICAgICAgICAgIGl0ZW1fbmFtZV9pbnB1dDogXCJcIixcclxuICAgICAgICAgICAgd2VpZ2h0X2lucHV0OiBcIlwiLFxyXG4gICAgICAgICAgICBlcnJvcjogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShuZXh0X3N0YXRlKTtcclxuICAgICAgICBsZXQgaXRlbV92YWx1ZSA9IHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiID8gaXRlbSA6IGl0ZW0uZ2V0KFwiaWRcIik7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5vbkFkZEl0ZW0oaXRlbV92YWx1ZSwgdGhpcy5zdGF0ZS53ZWlnaHRfaW5wdXQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uV2VpZ2h0S2V5RG93bihldmVudCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMTMgJiZcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS53ZWlnaHRfaW5wdXQgJiZcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZF9pdGVtXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICB0aGlzLm9uQWRkSXRlbSh0aGlzLnN0YXRlLnNlbGVjdGVkX2l0ZW0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB2YXIga2V5ID0gMDtcclxuICAgICAgICBsZXQgYWNjb3VudF9yb3dzID0gdGhpcy5wcm9wcy5hY2NvdW50c1xyXG4gICAgICAgICAgICAuZmlsdGVyKGkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvL2lmICh0aGlzLnN0YXRlLml0ZW1fbmFtZV9pbnB1dCkgcmV0dXJuIGkuZ2V0KFwibmFtZVwiKS5pbmRleE9mKHRoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0KSAhPT0gLTE7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChhLmdldChcIm5hbWVcIikgPiBiLmdldChcIm5hbWVcIikpIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYS5nZXQoXCJuYW1lXCIpIDwgYi5nZXQoXCJuYW1lXCIpKSByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm1hcChpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEFjY291bnRQZXJtaXNzaW9uUm93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17a2V5Kyt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2l9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHM9e3RoaXMucHJvcHMud2VpZ2h0c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25SZW1vdmVJdGVtPXt0aGlzLnByb3BzLm9uUmVtb3ZlSXRlbX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBrZXlfcm93cyA9IHRoaXMucHJvcHMua2V5cy5tYXAoayA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8QWNjb3VudFBlcm1pc3Npb25Sb3dcclxuICAgICAgICAgICAgICAgICAgICBrZXk9e2tleSsrfVxyXG4gICAgICAgICAgICAgICAgICAgIHB1YmtleT17a31cclxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzPXt0aGlzLnByb3BzLndlaWdodHN9XHJcbiAgICAgICAgICAgICAgICAgICAgb25SZW1vdmVJdGVtPXt0aGlzLnByb3BzLm9uUmVtb3ZlSXRlbX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBhZGRyZXNzX3Jvd3MgPSB0aGlzLnByb3BzLmFkZHJlc3Nlcy5tYXAoayA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8QWNjb3VudFBlcm1pc3Npb25Sb3dcclxuICAgICAgICAgICAgICAgICAgICBrZXk9e2tleSsrfVxyXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3M9e2t9XHJcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cz17dGhpcy5wcm9wcy53ZWlnaHRzfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlSXRlbT17dGhpcy5wcm9wcy5vblJlbW92ZUl0ZW19XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgZXJyb3IgPSB0aGlzLnN0YXRlLmVycm9yO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgIWVycm9yICYmXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRfaXRlbSAmJlxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnRzLmluZGV4T2YodGhpcy5zdGF0ZS5zZWxlY3RlZF9pdGVtKSAhPT0gLTFcclxuICAgICAgICApXHJcbiAgICAgICAgICAgIGVycm9yID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5wZXJtLndhcm5pbmczXCIpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgIWVycm9yICYmXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0ICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMua2V5cy5pbmRleE9mKHRoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0KSAhPT0gLTFcclxuICAgICAgICApXHJcbiAgICAgICAgICAgIGVycm9yID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5wZXJtLndhcm5pbmc0XCIpO1xyXG5cclxuICAgICAgICBsZXQgY3cgPSBbXCIxMCVcIiwgXCI3MCVcIiwgXCIzMCVcIiwgXCIxMCVcIl07XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3RoaXMucHJvcHMubGFiZWx9XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9yfVxyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0aGlzLnByb3BzLnBsYWNlaG9sZGVyfVxyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lPXt0aGlzLnN0YXRlLml0ZW1fbmFtZV9pbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkl0ZW1DaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5vbkl0ZW1BY2NvdW50Q2hhbmdlfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQWN0aW9uPXt0aGlzLm9uQWRkSXRlbX1cclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25fbGFiZWw9XCJhY2NvdW50LnZvdGVzLmFkZF93aXRuZXNzXCJcclxuICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGhpcy5wcm9wcy50YWJJbmRleH1cclxuICAgICAgICAgICAgICAgICAgICBhbGxvd1B1YktleT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlQWN0aW9uQnV0dG9uPXshdGhpcy5zdGF0ZS53ZWlnaHRfaW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dVcHBlcmNhc2U9e3RydWV9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLndlaWdodF9pbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25XZWlnaHRDaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIndlaWdodC1pbnB1dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvQ29tcGxldGU9XCJvZmZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnBlcm0ud2VpZ2h0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLm9uV2VpZ2h0S2V5RG93bi5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGhpcy5wcm9wcy50YWJJbmRleCArIDF9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvQWNjb3VudFNlbGVjdG9yPlxyXG5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3twYWRkaW5nVG9wOiBcIjJyZW1cIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7d2lkdGg6IGN3WzBdfX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t3aWR0aDogY3dbMV19fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLmFjY3Rfb3Jfa2V5XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3dpZHRoOiBjd1syXX19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ud2VpZ2h0XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3dpZHRoOiBjd1szXX19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0uYWN0aW9uXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2FjY291bnRfcm93c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtrZXlfcm93c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthZGRyZXNzX3Jvd3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCaW5kVG9DaGFpblN0YXRlKEFjY291bnRQZXJtaXNzaW9uc0xpc3QsIHthdXRvc3Vic2NyaWJlOiBmYWxzZX0pO1xyXG4iLCJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgQmFzZU1vZGFsIGZyb20gXCIuL01vZGFsL0Jhc2VNb2RhbFwiO1xyXG5pbXBvcnQgWmZBcGkgZnJvbSBcInJlYWN0LWZvdW5kYXRpb24tYXBwcy9zcmMvdXRpbHMvZm91bmRhdGlvbi1hcGlcIjtcclxuaW1wb3J0IFdhbGxldFVubG9ja0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvV2FsbGV0VW5sb2NrQWN0aW9uc1wiO1xyXG5pbXBvcnQgV2FsbGV0RGIgZnJvbSBcInN0b3Jlcy9XYWxsZXREYlwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBQcml2YXRlS2V5U3RvcmUgZnJvbSBcInN0b3Jlcy9Qcml2YXRlS2V5U3RvcmVcIjtcclxuaW1wb3J0IFFyY29kZU1vZGFsIGZyb20gXCIuL01vZGFsL1FyY29kZU1vZGFsXCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByaXZhdGVLZXlWaWV3IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgcHVia2V5OiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5fZ2V0SW5pdGlhbFN0YXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldEluaXRpYWxTdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4ge3dpZjogbnVsbH07XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLl9nZXRJbml0aWFsU3RhdGUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgdmFyIG1vZGFsSWQgPSBcImtleV92aWV3X21vZGFsXCIgKyB0aGlzLnByb3BzLnB1YmtleTtcclxuICAgICAgICBaZkFwaS5zdWJzY3JpYmUobW9kYWxJZCwgKG5hbWUsIG1zZykgPT4ge1xyXG4gICAgICAgICAgICBpZiAobmFtZSAhPT0gbW9kYWxJZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAobXNnID09PSBcImNsb3NlXCIpIHRoaXMucmVzZXQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgdmFyIG1vZGFsSWQgPSBcImtleV92aWV3X21vZGFsXCIgKyB0aGlzLnByb3BzLnB1YmtleTtcclxuICAgICAgICB2YXIga2V5cyA9IFByaXZhdGVLZXlTdG9yZS5nZXRTdGF0ZSgpLmtleXM7XHJcblxyXG4gICAgICAgIHZhciBoYXNfcHJpdmF0ZSA9IGtleXMuaGFzKHRoaXMucHJvcHMucHVia2V5KTtcclxuICAgICAgICBpZiAoIWhhc19wcml2YXRlKSByZXR1cm4gPHNwYW4+e3RoaXMucHJvcHMuY2hpbGRyZW59PC9zcGFuPjtcclxuICAgICAgICB2YXIga2V5ID0ga2V5cy5nZXQodGhpcy5wcm9wcy5wdWJrZXkpO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgPGEgb25DbGljaz17dGhpcy5vbk9wZW4uYmluZCh0aGlzKX0+e3RoaXMucHJvcHMuY2hpbGRyZW59PC9hPlxyXG4gICAgICAgICAgICAgICAgPEJhc2VNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgIHJlZj17bW9kYWxJZH1cclxuICAgICAgICAgICAgICAgICAgICBpZD17bW9kYWxJZH1cclxuICAgICAgICAgICAgICAgICAgICBvdmVybGF5PXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXlDbG9zZT17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ua2V5X3ZpZXdlclwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgdmVydGljYWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnB1YmxpY1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5wdWJrZXl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5wcml2YXRlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLndpZiA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPXt7Zm9udFdlaWdodDogNjAwfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLndpZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b24tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25IaWRlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY2xpY2thYmxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2hvd1FyQ29kZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2hlaWdodDogNTB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17cmVxdWlyZShcImFzc2V0cy9xci5wbmdcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vblNob3cuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5zaG93XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLmJyYWluXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtrZXkuYnJhaW5rZXlfc2VxdWVuY2UgPT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiTm9uLWRldGVybWluaXN0aWNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGtleS5icmFpbmtleV9zZXF1ZW5jZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2tleS5pbXBvcnRfYWNjb3VudF9uYW1lcyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5LmltcG9ydF9hY2NvdW50X25hbWVzLmxlbmd0aCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5mcm9tXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2tleS5pbXBvcnRfYWNjb3VudF9uYW1lcy5qb2luKFwiLCBcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25DbG9zZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiIGJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInRyYW5zZmVyLmNsb3NlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L0Jhc2VNb2RhbD5cclxuICAgICAgICAgICAgICAgIDxRcmNvZGVNb2RhbCByZWY9XCJxcm1vZGFsXCIga2V5VmFsdWU9e3RoaXMuc3RhdGUud2lmfSAvPlxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgdmFyIG1vZGFsSWQgPSBcImtleV92aWV3X21vZGFsXCIgKyB0aGlzLnByb3BzLnB1YmtleTtcclxuICAgICAgICBaZkFwaS5wdWJsaXNoKG1vZGFsSWQsIFwib3BlblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICB2YXIgbW9kYWxJZCA9IFwia2V5X3ZpZXdfbW9kYWxcIiArIHRoaXMucHJvcHMucHVia2V5O1xyXG4gICAgICAgIFpmQXBpLnB1Ymxpc2gobW9kYWxJZCwgXCJjbG9zZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBvblNob3coKSB7XHJcbiAgICAgICAgV2FsbGV0VW5sb2NrQWN0aW9ucy51bmxvY2soKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJpdmF0ZV9rZXkgPSBXYWxsZXREYi5nZXRQcml2YXRlS2V5KHRoaXMucHJvcHMucHVia2V5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3dpZjogcHJpdmF0ZV9rZXkudG9XaWYoKX0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4ge30pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uSGlkZSgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHt3aWY6IG51bGx9KTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93UXJDb2RlKCkge1xyXG4gICAgICAgIHRoaXMucmVmcy5xcm1vZGFsLnNob3coKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuaW1wb3J0IFpmQXBpIGZyb20gXCJyZWFjdC1mb3VuZGF0aW9uLWFwcHMvc3JjL3V0aWxzL2ZvdW5kYXRpb24tYXBpXCI7XHJcbmltcG9ydCBCYXNlTW9kYWwgZnJvbSBcIi4vQmFzZU1vZGFsXCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IFFSQ29kZSBmcm9tIFwicXJjb2RlLnJlYWN0XCI7XHJcbmltcG9ydCB7QWVzfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuXHJcbmNsYXNzIFFyY29kZU1vZGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLl9nZXRJbml0aWFsU3RhdGUoKTtcclxuICAgICAgICB0aGlzLm9uUGFzc3dvcmRFbnRlciA9IHRoaXMub25QYXNzd29yZEVudGVyLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbktleURvd24gPSB0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub25DYW5jZWwgPSB0aGlzLm9uQ2FuY2VsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbkNsb3NlID0gdGhpcy5vbkNsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldEluaXRpYWxTdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpc1Nob3dRcmNvZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBrZXlTdHJpbmc6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgWmZBcGkucHVibGlzaCh0aGlzLnByb3BzLm1vZGFsSWQsIFwib3BlblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNhbmNlbCgpIHtcclxuICAgICAgICBaZkFwaS5wdWJsaXNoKHRoaXMucHJvcHMubW9kYWxJZCwgXCJjbG9zZVwiKTtcclxuICAgICAgICB0aGlzLm9uQ2xvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlZnMucGFzc3dvcmRfaW5wdXQpIHRoaXMucmVmcy5wYXNzd29yZF9pbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLl9nZXRJbml0aWFsU3RhdGUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25QYXNzd29yZEVudGVyKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgbGV0IHB3ZCA9IHRoaXMucmVmcy5wYXNzd29yZF9pbnB1dC52YWx1ZTtcclxuICAgICAgICBsZXQga2V5ID0gdGhpcy5wcm9wcy5rZXlWYWx1ZTtcclxuICAgICAgICBpZiAocHdkICE9IG51bGwgJiYgcHdkICE9IFwiXCIpIHtcclxuICAgICAgICAgICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkICYmIGtleSAhPSBudWxsICYmIGtleSAhPSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcHdkX2FlcyA9IEFlcy5mcm9tU2VlZChwd2QpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHFya2V5ID0gcHdkX2Flcy5lbmNyeXB0VG9IZXgoa2V5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzU2hvd1FyY29kZTogdHJ1ZSwga2V5U3RyaW5nOiBxcmtleX0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy9ub3RpZnkuZXJyb3IoXCJZb3UnZCBiZXR0ZXIgZW50ZXIgYSBwYXNzd29yZCB0byBlbmNyeXB0IHRoZSBxciBjb2RlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc1Nob3dRcmNvZGU6IHRydWUsIGtleVN0cmluZzoga2V5fSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uS2V5RG93bihlKSB7XHJcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHRoaXMub25QYXNzd29yZEVudGVyKGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgcG9zID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc1Nob3dRcmNvZGUpIHBvcyA9IHt0ZXh0QWxpZ246IFwiY2VudGVyXCJ9O1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxCYXNlTW9kYWxcclxuICAgICAgICAgICAgICAgIG9uQ2xvc2U9e3RoaXMub25DbG9zZX1cclxuICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLm1vZGFsSWR9XHJcbiAgICAgICAgICAgICAgICByZWY9XCJtb2RhbFwiXHJcbiAgICAgICAgICAgICAgICBvdmVybGF5PXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgb3ZlcmxheUNsb3NlPXtmYWxzZX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ttYXJnaW46IFwiMS41cmVtIDBcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwibW9kYWwucXJjb2RlLnRpdGxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8Zm9ybVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmdWxsLXdpZHRoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW46IFwiMCAzLjVyZW1cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU3VibWl0PXt0aGlzLm9uUGFzc3dvcmRFbnRlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9WYWxpZGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc1Nob3dRcmNvZGUgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gc3R5bGU9e3Bvc30+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiI2ZmZlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IFwiLjc1cmVtXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFFSQ29kZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9ezI1Nn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5rZXlTdHJpbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImxlZnQtbGFiZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNhZmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwibW9kYWwucXJjb2RlLmlucHV0X21lc3NhZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Gb2N1cz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcy5wYXNzd29yZF9pbnB1dC5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cInBhc3N3b3JkX2lucHV0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMub25LZXlEb3dufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXtwb3N9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b24tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc1Nob3dRcmNvZGUgPT0gZmFsc2UgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uUGFzc3dvcmRFbnRlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwibW9kYWwub2tcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvbiBwcmltYXJ5IGhvbGxvd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25DYW5jZWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJjYW5jZWxcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L0Jhc2VNb2RhbD5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5RcmNvZGVNb2RhbC5wcm9wVHlwZXMgPSB7XHJcbiAgICBtb2RhbElkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXHJcbiAgICBrZXlWYWx1ZTogUHJvcFR5cGVzLnN0cmluZ1xyXG59O1xyXG5RcmNvZGVNb2RhbC5kZWZhdWx0UHJvcHMgPSB7XHJcbiAgICBtb2RhbElkOiBcInFyX2NvZGVfcGFzc3dvcmRfbW9kYWxcIlxyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBRcmNvZGVNb2RhbDtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSBcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBR1FBQUFCa0NBSUFBQUQvZ0FJREFBQUFDWEJJV1hNQUFBc1RBQUFMRXdFQW1wd1lBQUFBQjNSSlRVVUg0UW9MQnpFS3I3b0ZEZ0FBSUFCSlJFRlVlTnE5ZlhtWVhWV1Y3MXA3NzNQdXZWVVZTQUwybzQwS21qQ0VnaVNFVkZVU0FpUlI2VTlCd2FuOXRQRzFPUExrMmJRVGFRZDg5ck9mb29KRDgwUkJVZlR6NFJQblZweDliWnVFeklITUFhSUNyYUlpWktqcG5yUDNYdXY5c2U1ZHRldFUxVTFTaXZlUCttNXV6dGxuNzdYWHRIOXJPUGpXdDc1MXk1WXR6cmtRUXBabElRUmpqREdHaU9CNFBzeHNqSWt4am95TWJObXloWmtCQUJIbGY0bklHTlBYMTlmVDArTzk5OTV2MnJRcHZSY1I1UnI1cnJmTFAvVktJdHE3ZCsvVlYxOXRqQUdBUE05RENNeWM1L25jdVhNLy9lbFB5NDE3OXV4NTR4dmZXSy9YaVVqV0pVL3BQSDlyYlFnQkFKUUM4bWhtampFT0RBeTRiZHUyclYrL1huNk5NU0tpekR1ZDRyRjhaSFNaOStqb2FLUFJrQUdOTVRKVVdaYmJ0MiszMW5ydjB5a0tsV1VFL1YxdWtRMlQrY2dGaUhqbzBLRnQyN1o1NytWSFdhRzF0dGxzeGhpdHRjdzhPRGg0enozMzZNUjBxRHpQMDZkUEpKYnVVSXhSWnlLVFFVU25VMG52a1dVZkY3RjA5QkJDdlY2WDcvSjRtWEdlNTBSVVlWamRHeUdaOHBFOFhjbW5YeERSR05Oc05uVlZ3Z3N4UmlHWi9nNEF6amtkV1Rmc1dKWlFvYkxPeWdoMTBsMlZ4MC9qWTR5UitTRmlDQ0hHR0dNVTZsUklMNDlMSjJldEZVS2tnc25NM25zZFI0YVNuUkRLS2hXTU1ZY09IZElIT2Vma3Uwd214aWdENnVaTi9NalRaVUQ1eU83cWppS2lrYkhrVjZHaVBJT1A4eU8zSzZHZGM5WmFhMjJXWlRLUFBNOVZsRlNDQU1CN1g2dlZkRUxPT1VUTXN1enNzODhHZ0N6TFpCeFpTUWhCdUlPSUdvMUdYMStmRURIR3VHL2Z2blN6UlQ3eVBPL3Y3NWNaZXUvTHNweHEvcm9ySVFRWmNHaG9TTWJVYTV4TVNOU2tpcXR6N25qRlVKbGZOYkdLbUxVMnhpaktvaUtHd3RmNlZ5OHd4c3lZTVVOdUY4V3ZuSnZudVF3NE9qcXFraUtxVURaRzlrRFlWaWdydWt6NWNkTDVWNWhPR1BiSWtTT3FzSXd4VHFpWVhpYzhmTHdLUHRXRktrY1ZYU0NMbkhoTDVVZTVSYW1XcWdnaUtvcENaVm5rUzlhWlpaa2FLTDFBcHFHMFZxcDFzSWs2aU95ZkVGZWt6YVJhVUs0N3FwWHQ4Q1JsSE5GQmt5b3BYYnlxTS9sRjFiUGNxT0pRVVhZaUxITGx5TWlJWGl3anFKaXJkVllwVWJKMm1MeG9nSW1NWW95eDFvNTVFOExNNllaMy9sUllXci9yYnVnL1JkbFgzQkdkbGlnWGRWeEU4UkhSNXo3M3VTekxSSVV0V0xCQXgxeXhZb1dNRmtLNDc3NzdaT2JPT1NXcmVtM3lGTys5UG5mVHBrMVRMVWMwSXlMMjlmV0pVa3BkeFRHZDlXUi9LaFpkdVMvbExOMThuWitRVEhaVkxJQTZic3FicW9uMHU0d3dVYTZQYTdZVnNSaFRVRTgycFlTaDFQbVVMN0taK3N0RTU2dXlZREZCWW1HRkhNSXY2aUxJSU1LR2N2MDBkSWdxOHFuMHRYbXlpU1hQMXMxWGFSS0ZvbHF5d2hvNmI3MVM2U0pLWFNSVXIxUko5TjZMMVAvcE02L29rNzhFc1ZRcDFHbzE4UjdVeXNpbktBcGhoSlJ3SFpoVTJXZGtaT1NlZSs3UndjODk5MXh4NjV4enFRRTlYc3VlMHFoeTQxK0lzMUtla20wWGZrbFZlMlYrK3I4VnVkQnh1cnE2MU10QnhPN3Vidm12b2lpbVljMG5FalQxUXY1eU9pdDFHbFNSeSthbkIyWWx4TVNqaVJ5YlU1OURiYmVNbVZyYlBNLy9GSjNWYWVQL0F0WlE2YUtucUZTRmp4MVRrNE9oK01hcXM5UVJWWU1vQnF1cnEwdGRCSVdWNU94U1ljTmpGOGFVdFNzY09oM09Fa2U4Z2xWMWR2WlNSS0V5Si9IZ0o0cmg0c1dMVldEVmVpTGl4bzBiTDd6d1FnV0Zqb29hSGFPeVQ3RXpkV3YvREp5VnJxR0NReDBMWngwakoyWlpwa0JOeW9uMWVsM3RwdnBjdWlYcTdvcXZhNHhSWkswelNLZmpwTWVNeXRMY3RHVXEzZk9qbWpENWUxU3lLanVvNWxZOFQ3MnFvaWhrUFFwc2lvSlQ1aTNMVXFGQkVXRTVZM2MreHVtWXVoenhRbzZKV0ZPUlFEbGYvSnFqcWxMMXNQVEd6cWRadVN5RU1EdzhyRkN2Yzg1N0w2Yzg0WlFVODVMUDhQQ3d6Rm5jZmJVU1daYkpKSVdDSGJaVzJITndjRkR1VFYyNW94QnJLbEdmcUtvNkwxNnZkODZOakl5SWdCelZLZ0hBdm4zN2xJc1hMRmh3MzMzM2lkejE5dllxZ2RKVHQyeGV5c2h5TEJVYWlSKzdiTm15enV1U3RZUVFKcDRpcHNsWkZaQys4K0oxd1FwYWRSWmJQZHdkT1hKRS9JQ3lMT3YxdW9wSnJWYXI2R0Fob3A2SDFPK1ZRMUtlNTRwVlRIWG9VejRWd1UvUEJuOEduU1Z6T2thZFZibjNxRllwbmE1RW0xSjB4WHN2cm9PcWNFVkJsTmJpT3NqQlNIU2NUbmlxT1lqalZvSFgvd3dlZklvV0hJdnpVa0Vwanhwa2t4a0wxaTcrcC9oWmNyc0tzbnEycWQ4cjg1Rmx5MTUyZFhVcDRORmh0eFJmVmRGenp2WDA5SXk3YU5XcVZSVWY1MWoydjRQWTFtbzFVU2lLZHFyekl1N2lSR2N2QmY1MUF1Sm55VGc3ZHV3dzdVMDVkK0VDSHdNengranZXYjlXV1h2aHdvWHE5RzdhdENtMS9ST2R1T1A5T09kV3JseHBGRVZWbjJVYVFjUDB1RkFVUlFoQnhFY1JEM1dhbkhOeWRsTVdTTzFVaWd1ckJ5K0lxSkRYV3R2VjFXV05zS3JMczdvQUVoS01rYWlTa3I1ZXI2ZTcwZ0dBUHlvVHlMQkc1RC9kMkduRHlncklPdWNFcmRZUVZxcEt4TFRMM29nMnliSk1OSFNLMGxSZzI4eGxGY3Nya2UwS0RpNkVFOTNVYkRiVGNPVDBGcFhpcU83Z3dZT3BFdEdOblVaMFIyZ2h0M3Z2NVFHeUFQSHV4TjlSSmtvSnF1cXZCZUE2SjBzVjg1OWxXUmxpbHRXSXd1R0RoMklJenJrc3kyeVdpMmlyL2haVElHTUtiK29KdEhKS095NEZUVVFIRHg1RXNSZGlqeXN3NXZFU1M3WmRwVmlFUWlpVmVuZjZUKzlqbHRsRWhObDd2MlhMTmcySkh6bHlSRERsUE04SEJwWVpBMFZSMUdyQ1lneGdqaHc1OHNBRCsvTThIeGtabVQxNzlyeDU4M1EvaEZqTlpsTU1nckxrOUVKODN2czh6MUUzNGM4RkxhYUhOUldadFd2WGlsb3B5L0xzczgrZU1XTUdNV2FaUTRSSTBSb2J5WXNtd3JhQlZuNFJQNHNCS0VacmtTbWdNUUNHR1FHUllnd2gxR3ExOUdBRUFBd3cyaHh0MUJzTURBQUlTRXlJYUFDbnZUcE1jVjZWd2M1QXdoUmpSWkZFMmR1aG9hRzc3cnJySzEvNXlvOS8vRk9oWUo3bnpXWlROdGtZYy82Uy9oZTg0QVZYWFhYVm5EbC9UVXd4K3N4bFB2amNUVmkyUkd1QURUQkQvTUMvL010M3YvdGR0QmJCUm9iY1pVVlJDUCtxNjR1SXo3djArYjI5dlpkZmZya0dlMktNZVpiajhmdEpZNlNnOWtmUEVOT0kzVXNBZkxRNXlPeC8vWnVIWHZxeUs0d0ZRREFXSm9ZUFdzOUdpOFlCbUtYTGwrMjdmejl4SEMxR2lLT2k3T2xNWkg3ZUY4eitkYS85cndpQUJvd0JNR01wTGhvZWJxay9CT01zSUx6czVYOTc4UEFoWWc0VUkwOXZhYTBwUVg5L2Z5VVczZG5WY3BEMXpqK0htUVA1eUpMOXdVd2Npa1BNNWZYdmZnOEFJSUtvVVlPNVdwTTArSXFJRmlDekRzQ1lyQXRzN1kzLy9SK2JrVDF6SkNibVpyUEpISmtqTTRmUW9wbG5IMGJwbXRlOHlCcHdDSFVFNDJhbTN0UDRnNWN4eHVuZk83LzgxY0RzbVlrOU0wZFB6RXpNZ1dNWkNpWVcxbVBtdFd2WDZ2SWxYam1XNjlEVjFhVmpLeUxSd2NtT0VKL3lsS2VJUWpGb3dBQUFNWkhONm9zWExMcHYxOTVhclZFVW84WlpGbzhIdUsrdjc3blBmYTQ0RmtUMDA1LytkT3ZXcmNFWElRWnJiZlJOTk83V1QvN3ZkVDlmdTMzN1ZyUlFGcjVlcXdGQTJTenllczFhSkFLRzRNRTNjbkZLb0Y1M1pUTlFDSlZqblNJY3RTd3J5c0lBR2dORThNcFh2R0o0dFBtcXY3L1NHRVlBWTBXdmlRL3NVamRBYmhlNmErNVU2N042OWVvMDdpUU9aR2N4WHI1OHVmY3RXYUhvZlRuQ3NUbnYxRGtaUW1aekFBY0dBZUhaejdua2U5Ly9zZGoraVN5OWUvZnVsNy84WlFqUWxWc0VRTFN1MW5QSzArY0c1c0JjbEczZk1xam9STStlQTE5OTFlVXRjVVA0MkMxM3FyUktCRXl3bW8wYk43N3JuV3NhOWJ5V094azhyM1dqYXh4NCtORWcxeFBIR0NOVFlCWWVVeWRHVXhLTk1jdVhMeCtYS1hUeHhSZFhEcENkdy9mRzRjQkEzOWhLMkRNM0wxeCtuZ1dvMnhxQ0EzQTlNMDc4ZnovNzl4RFpCMDVkYXBtTk9DdGw4TXp4b1Yvc1AyM09VeHlBRlJHM1hRTXJWZ2JtSWpJSmxZbVpBbFB3dnZCY2N1RFhYdmw4Uk16ck5RRHovby9la2FxMnNpeVRqWWtjL0VzdXY2eVJPVkVKWUdxckxybk1Nd2VLdm16RzZJazVFa2RpVldVaGhCMDdkcWpUZDg0NTUxU0psVG9VcVpxZjlBTUlTNWYyaHhBNGN2U0J5Yi8zM1cvUERDQkE3bW9BMlY4LzlkUS9QUFo0U1ZHbUltdlFBZldmZ1RsR1QzNkUvZkFGU3haMDU5YWlRNU9EeVQ5MDR5Y0NzMitycWhoSzBWK2pOTUtCMzNMMXkxc1FBTHIvOGRFdkNLdW16Q3NJSjFOZzloekw4eGVlVTNjMnozTUFCN2IyNkJNajhtaG1UOHdoTWtWbTRqVnIxb2dNTGxxMFNCSXBKcXA1STdpUGVxRkNYWFVqSmttZ01KWUlyTEZnQ0RrKyt1dGZmK0FETndZQ0JpaERuRFY3OW9PLytNWHNrMmNEQlFBeUNJcTNxRkxJc295SUVOZ1lneTZMeE92dTJYaktLYWNBQjZBU21OYXNlY2ZoSThNUlVEU25zVlpjT0ljT0FneVBEQW1EaTI0dHkxSk9iRVZSaUtvVlZDc1NNUUVnZnU3Mno4WVFmVmtDRU1TNGNkTjJrbk1pa2RnRk5BQkk5WHBkRGtaeXhreVR2TVpCTkpYanpzU0k3bmdFbFd0WjNtd09BeE5tZU8yMTE2STFBSUJaRGdnL1g3ZU9nWWpKV1JOakNVQmkvaVNwVEFTd1pkMEJZMlFBWi9NR1pOblAvdU0vTEVKTjNOSkkxMTEzbmJNQUJvZ2hCQUpzNjJQRDlTdzN5QlFpQUdkV1dLYUZkZ2dzMDRJNnJJdEVBTEJnOGFJc3c2NmFReUFBdXUrK3ZSU0YrR24waENyaHlEUTNjWXhZZ3NhS1FWRkNkZ2dmR2JCRVVLL1hBUG1KeHg3NytyZitMUVJpY0J6REc2KzU1b3l6NWpYcUdTSVNrN05qMlFteUpJbXp0M3dXWm1NdEF4QmdDUFRVcHovdG1tdmV3QkdBSXlEZWZ0dHRQakF4TUlKMWpobEJyQVppQ01HMFk5dEVBWklrV00yeElTSUd0TTZSOXdCdzNzSnppeUk0QkFRWUdocEJDd1JzMnFncE04dnBRMWhFQ0RJcHU0ekw5dFlnKzVnM05HNUVBQURLT1F3UEEzb29zbHMrZG9Pem1RTUFDR0M2UDN6VFRRYlpjSFNNbGpQZ1ZqSnVaWDlhZ3dOQ0pBUkNKclRPMk94OTcvdWZvb2t0UklUNG1hOThOK05tQUNBQTVCSVJTNGhnQVp3TkRFNXN2elVhNWttWkFoRU5BSE5oc2dhd2E4ZTdhd1lveTJ4Z1lJVElEQXdXQUdnTWZVZkV0V3ZYaW13cHZpU2ZnWUVCaytaNXA3bGJpbTJsNmZORUJENjRXajF5QkF2ZitNYTN5dUFad0xyODhoZS9wT2FzQlFRQXBwYmdkRG96b1Q3UkdqUUEwTjNkR09nN3AyMXE4R3QzZlFYUVV0c1hpakU2Y0hKVXRCYU56WUNOZ3IrQ3pBalB0cEwvbUF3MEtCd0JzSHYyN3JTbXpyYUlrQzFjME91RXp1TEtJcUFCQUd3MEdnSk1wakNXaGlhdHRZMUd3M1RPR1V3TEg5THNmb3RaZWVTSmZmZi9KNERKckkyUlgvLzYxMW9EREdQSWtTeHp5ak1YTUJobWxqa0JBTmg2ZHZubGx3RzBWTW5QZi9wRFFPc1FrQWtBckxFR0FBZ1FEVVVveXhMUU1LUGlQQ29ITGJnVmdTSWIyL1BRTHpZMFIycWVtNEVNWUw2cy96eGh2L1pTUVU3V2FhcHFtZ2M4NWdaSUhueWFkWmZtUmxXU2J6VDNzQ1FHZ0syYk40aDN4SXlBK1VVcmxxZlBPSllqYXZwUTBaTFBlZTVxQzBSTTF1VXdPdnk3UHg3RzFpWWpBRVFLTGRnYUVORWFZOU9FVDBncU1tUVRFQkd3ZU5kMTd3Y29nRE93cG5kSi96UG16RVJnNERhUjJ1cW9MRXROUHRkalg1b0hENjJUYUpJS2tTYXVWTUp6TGVlZXdUb0hqTHQzYi9YUkFCSVJuWHphczdycXhqQUFSVGtUSGhVSWtTc01DcElGekFqTVo4M3Z0UUFHVFl6Qk9Oanp3QzhCd0xRNGxKeHhnQzJleVBPY29vK2hGRW5VbXB1a0lNSWdGbmQrOFV0Zi85YjMyUUFCUTZ4OStNTWZSQUFEN0d4T2tjVmd5YXB2dU9HR0kwZU9pTDJXK0M0UjdkbXpwK282VEJxa21ZcXpuRVV3QmhCLy85dUhJeGhBUU9Cbm5YR21JVENZaG5DT0doMFl6MzBHbVYwMlk1WUZjSmtCUmk1SC8vTjNmN1RRWmw0aUh0dHRLb3RSQUdxTTU0VTB3RU1CM3YrQjY2OTg5WnZ5N29ZbkFBeXZlOE9iTDFrNUVLTUhNQUFHVUJTc0VNc0l6OG9aUTFoTVk1ZnFVVHVwTEtoQW8ya0lVM1Y4aTZ4RXpUSUE0Nk8vZlVpZ09pU2VlZkpKRElDZ1VVOHdSbTdzQUlBQk15R0tyMkFaTFlBQmNDZDJad2ViRVl5ekJJT2o1UmlvaE1qQXdHQXpZNDJORk9zMWUrRCtQUnMyYkJEdEx2RjlZOHdERHp5d2Z2MzZPejcvbVpHUndFaER3N1dzeS8zTjZoZC80dVB2ZFF3a1c4Z2dWcVVTaXhhNFRiUG4wNkNKTWNacGhjWlVXU1ZDS1ZWMUJpQ3I1UUF3Tkh3WXdJQUREbkRDekJQYm9TcHFzUXdmQlVGRUFBQUxFQUdJQVJBdEFFYlBNMmVlOE5odkhvZk1Hb0ptSWNRaXRBNkJJNFFNSWNZWUtSb0FYOFE3YnJ2MWk1KytNVlhHQ3ZrN0JNUWNuT0U0L0w3M2Ztck5tcXN0QlBDTW1TR0dHTUU1WUFhRFFqM1VrSzJXbVNHaUZPR05CUWszYmRwVXlUSFRVR2lhZGFhQUhLSUpjUlRJRlVnQWtFT3RzSUJOWkdnVmFKVmxDUWlNUjFIelJJSjdRYUNJZ014QUJOWVo5bDVRSHd2UTNkME56RXlpNEF3Q0M0R0ZLWElFQ00weHVRTUdCRUFiQWdHWWdGblhqSlBmOFk2M0hScDhZczJhcTFzYmFCSEJHSVRNdFVac2lXU2JQMktNYTlldWJUUWFBaTRzV0xBZzlRMWR5b2RwS1lCK0VhUllBZi9BQk1RUVk2UGVsV2V1TElZQjRmREJ4OFZ5aHhEMS9JSEdNTWNwRlpjQlFBZyt1aXdQeE1hQVJZTGdEdzBOR1dzZ3hnRFEwOTBGS0E0bU1JUEZkcENSeVZvc0k0UEppWXBXaElWYXhYL1cyUkRDN0pOT3VlVlRuM3pwUzY0UWtTbktvcDdYaUwyQnJBTjhyQUJNeFVNUXA5ZXBBMFZFZ21TbHhYMWlVTldzaWw5U3l5dzQrOVNubmViOVJnQ1QxK0hYRHoxRURJaldPSUhpUk1GM3lnRkJCQ0p5V1FaZ3JBRWZQTE4zR1I4WklYWVpvUEVNcDg0NUpmRXpFSUFCd0dVWmd3a1JuSVVWcTU2emVzVUNJQloxczNuenh1LzgyM2RqQ003Q0U0ODk5cXEvZThtdG4vNmJILzdnZTJpcGx0ZUNCNWRSNTV3QkVVRDVtNlkwaWQvcjl1M2I5L2pqajBzWWJ1SENoWXI4Q1NzSmpiWnYzeTVrYnNYK2lRSG82YWZOTTBDQU9iUC81WVA3R1lFaVc0dmVsM2x1c2VXZzg5UmVGZ21HYVF6RUNJanNIRDcwd080U2dNWHVZWGI2TTArTkFBNE1BQ0ZpaE9pb1ZhRENqTVpscXk5NTN2dmU4WHBpc2loY2pBRDBUMjkveDAwM2ZkeVk2RXY2OTUvODVMTG52K1R1SDM2ZENHd0dETnpCUXBkbGFhMDk2YVNURmk1Y1dLdlZhcldhSmo1YmE4ODQ0d3dZR0JpUXBCeE5YVlU4cTFKcXBJR0dwUU45SE1QUGZ2THRPa0xOMU1FQVFQZWpmend5T0ZwR0pnSE9SUTE2WDB3VkFnamtpWUpBWEVWSnpERTBILy9lTjI4WG13aW01bWI4VldBdVNJQTV6OHllUy9aOHpXdXZRTFFBRGt6Mno1LzRRbVFLRkZ0b0g4Zm02Q0NUdi8zV1d4Q2gwZWdHY0FEdUl4LzVsQTlNWFBwWUhqVTJJVjViQmVBVnNwanU3bTZ0a3FuSW9GYVhwbUlNQmgwd0lQZjFyMkFHWkFRRUMvUi83L3Bhdlo1eHkzVUJIQitDbjB3TWJUdlZDMndtcFNudWh6LzRLWUpGWkd2dy9QNWxsbHVCRHdodEZBUmJ5ZkZvRERDSEVCRFFva2dRZWU5cjlhNFk2VFZ2ZVAxMWIvOXZ6ZEhDR0FJTTcveW5kejM2KzhlSzZORmtIVUplR2xGUGs3eFV3Uk9SRVVxcFg1b21NOHBmeVlmU01sdGdPU2h4Vjgvc3M4K2NFNWtCd1VDODdiTzNoN1l1VEFPUlU3dWthRTFHMFFNU0FFUW16QnFmLzl5ZExaYzlsbGUrK2lxSVRaWmpFZklZallFTk1IQUVwa1plSzR0Q3daa3Nxd0VZQmdQZ1B2aS9iamo5V1hNeVp3QXh4S0ZMTDczVTJhNE95VTdHR0ZYWmFjNTU2bmFaRk5aUVZKT0lObS9ldkdIRGh1M2J0Ky9mdjMvKy9QbExsaXk1NElJTExyamdBakRHTUFCaVVmclh2L1lxMXpxTjhMNGRPM2J1M0JNcGFwRk41NndWamlDUUZtTEwrSDc5SzE4dFBBQVNNaEhUaTE1MHVkQlJXRlJkV1NJQ0pybXJLSnJpZHJlTUw0QVBaSjBMa2RFMXZ2bnRMM3NmZ0N5ZzM3MW4xK2R2djR2NDZHa05sUnlwOUhBT0sxZXVyS1RKVDVVLzFVNTdkc3VYWGNURVZJNk9EajB1b0F4Q0RwaWZ0MlRaYUdEUFhESTN5MUZtejFTa2lINEs4SHRtSHlXVVZ6STNtY3RUVHA1bEFXeXREdWd1dStJbHhPd0RFN09QZ1VqVWh3K1IzL3lhS3lTMmcyQ3UvL2pucDlROXhNenhUYTkrS1FKMEFRRDBtS3puOXlQRUhDbjZFSUtFS1VJSXpKRmptUVkrVXNVOURvUHZuTEZYcWFReHhsaG5pRVB3RVYxVzc1N3h4dGU5MmpsQWlJaDQ3OWF0SDd2cFkrSkM1Vms5UmdZMDZ0QldLZ1lzZ0RNSUFMNHNnZkV0Ly9BUFR6eHhrQkZpR2NDWUcyNjRRZmdKQVp5eGlQYTRVeE1RSURSdi90eVhadFZoQkZ6ZGxCVDROVmUrTXBJaGNOYmFHQUxxUWFWOTdoY2RvdUpWSGJRelo0a3VTMmtNQ0V2Nis5cGI1MzN6c0VNd0NOWm1ZbnErZmZjUFBITkpIQ2hPekFRUVcwTkV6TEU1T3N6a21jc3YzWEU3aWhaREIxaDcxV3ZlRUpnTFg1SVl1SkhSRm1NZEQyY0ZadDhjSkM2LzhLbWJBRXpOQUxndVFQZXo5WnVHaTBETVJEUXlQTWdjaGVjMXl6Q0ZXeXFmS1pObmVudDdUempoQkFBWUhoN2V0V3ZYNE9BZ0VmWDA5Q3c2Nzl6enpqdXZMQ2pMRFJEWXJIYjMzZCs4OU5JWHhlaWR5VnllWFg3cFpWKzg4Lys4OGhWL0s5SHFOUDFNODJpWkdaaHFlUVlBTjk3dzRYZS8rM3JCOVlCaDVzbC9kZHR0dDhvMkM0eFRxNFNGajVXMUNHczlHSWRlZGZVLy91dk50MnpiKzZzY1JqeTY1NzNnaWtPUC96WUNPTVJHVnhjd2h3aUk4UHZmUGZySUk0OW8wYTBJeEl3Wk0vVEUwNG16bEp0RTY0OUZoN2lJVE1RY3ZNaDJ5ZHhjOC9ZMzE2ekpUU3ZEd2JyNnlsWFAvZVBqaDZtdDZkSmNEMkd1MEJ4K2NOL3VoYjFuMVoxRmdGcXRrZGU2QWJJOSt4OE96SjRwY2huaWFLUWlsTDRkQkQwT3ppS09nWm1wSk9aZjdkM21uSEZ5ZWplTmE2OTd6NmdmbTVvb3IrdXV1NjRTck0venZLK3Y3MWgxbG1TamFRNUVxNmdGREJCVEFPUEFPVWZNQVBhR2ozejB5aXRmR1ltTkFXT0FvbCsvZnUzSko4MTY0UXV2dU9PT08vYnUzYXZ5WDVibHRtM2Jicjc1NXNWOVM4NllmODcrQncrVWdWeFdLd3BmbHNXTzNidm5uL21NVUFZalJEY08yTmpNd1hReUhJMEZLaW5EV0Q3OXJFVnYrUHVYbTh6bUJreG1QdkdSRHozODhNTWhzZ0RiRWtBODRZUVRwR3VMd3FTVDlHTHB3RmxxQWRQc2h4aEtKaVppWWlhT2tVTmJ5TXVQMy9naFp6RjNyWXZ6ZWkzRlN6VXpVOCtHMm1uR3VmelUwK2JkZitCaHp4eGE4V2Ntb3RIUlVYWE5wOEZaVE1KY2Z0UUhMZy9WYTVtY2IxMVdPN04zZ1NUdFVNdjJ4ZmUrOTcwYW9OWDQ2YkpseTQ2SnM5YXRXN2R4NDhhdFc3ZnUyclVyUmFaKytlQXZ0MnplS3VTTkZCSFFPZ2NNd0h6dDI5NnllL2ZPdWZPZTZZd0ZnRkFXRXNKSkd5dU50WTZRSTZaazcwUisrT0dIdnZITnIvc0Exa0trVnBTbFhxOFRNRTJMcjRBQ2diRUVSWFIxVzNMVy9kbGIvcFhSTkRJVGZISC92bjIzM3ZvWkFBZ016aG1nMkVaTmdrS2hrOVN3WFhUUlJXbkZpTEJKNnROUHpNMWR2SGh4TmRNcytlNTk4Y01mZnYvWnoxN2xzckdZUUJvOTFFb2xRZXBkTyt3QXByWnd5ZktEUjBZbGthYjBMVzVxK1dMRVpUSEtYTDd1cWxkaUN6ek0zdmZCajNWd3M2ZzFwVUFVSWhYTS92ekZDd0FCclJIbjhBOS9mQ3hJVGdiVDlkZGZyNDE3ZE1sTGx5NGRadzBsbEFUanV6QlYra1JWTXQzVCtyYTBNRTZRTCtmY1JSZGRkTWtsbHdEQWozNzBvMDJidHV6ZHUvZFh2L3FWYkVDV1pYMTlmZlBtemJ2a2t1YzhiYzZjdnI3ejkreTVId0VZeUZuWXNYWExTU2VkOVBWdmZPMkZsejdQT1FtQXNMVTJ4QklZc3p4bkNtdld2UE1OVjE4VHlRU3d6emoxdENrWmk0bUlNdHVxUGtkd0FIVDMzWGYvNnBIZkdHUEtzaHdERlJBMG1UNUZEU1k1ZnF4ZXZWcmppSndZTDcybjBnM0dHRE13TURBNk9qcHBjbVZadGpKZXZDL2t5L2cwb05aUjNudGZGRVdNUG9ibTI5OTJiV3VuRWEzTnJLc0R1RGRkYzIwckg0aEpObDk4TG9wZWhtM0JGZkhvYVk5RVJCVGFVL0krdG4xM2lqNEdzZXpFL0o3M3ZLZFNqaUdaYU9NNDYvVFRUeS9Mc2l6TFE0Y09hYU1GYSszNTU1K2Y2dU8wcjF4ZlgxK2F0cTYrUmZ0MDNncTN5QVBVT0FqYW94UEs4eHlBS1BKSGJyeHgxYXBWVjd6Z0NtS0c2Q05FQUxqbGt6ZC81enZmWHJmaG5sTk9PY1VhRXdFc1FLRG9UQVlFUkl3V0VDZ3oxTGxXcTUxRzNzb01Mc3N5eit1dDJFU1N1Q3kvQ0FLcU5aK1Q1SHhNek14VFZ5aDFqbElta2hpSGxKMms3cGo2dnVsM29aRStRc2RzZDdPS01UUmphUDd1MXc4LzgrbFBkUUFBSnMvcjdXaVZ1K05MWDI0R0RzeVJBM0ZzellKYS9PTERhQWVla25uS0U0VzUya21xcmFWcFhRSXppeldzMUQxVmRKWkpzOVcxd0VQN2UwMnNEeEptRVF3NlRXTFM0SjBtSDR6bGFDVFlodlpUa1pCdFdRWmpNelR1djh4NTZpOGZmdmhsTDNzeEFKVmxFeEdOdFlqdzZpdi83dGtyVjQwTU5TbEVCQ1B1alhLRXMzbm44cGdFTExJeGNyTlp3dmdtWnpwL1RRWkplYXBhSXkwK3AxYklUa3orcmhUMFRLekxhMzhuNzZNbytIYUhNRnNwSU5ES1YrY2NVRXRJR1pBZ3hESmt6dDE1MTFmdmJLZU1TYTJBNE00aGtITlM2S05XeFlVZytNbVVjVW1LTVRMSjFucnZYWmJWMnFVV21wbWtHNmsxYkZvUnFzRFdHTEgyN3QxNzZOQWg2WDJTQmxOVGNDZmxyQmpqekprenp6cnJyRXI5dThZN3ROcEVWcGkyK3hybmtTQXlFN2JJeDFsZVI1QThXaTkxVDFMVGhjekF4bGtEREtKanJNVVFBeEE0NXlqQ2xIZ0VzN0hXb0IxM09JVnhSWjVDUjFtc09EUlpscDF3d2dsejU4NlZ5NlNWM3RobnhZb1ZsUkxLem1IM3RPL1pwRVY4YWJPTEZKblJESnlKSTB4c3Vsa1JKZm1ybUp4KzBsc1dMVm9rbWlpRXNINzlldTEzSUVtMG9yL1dybDJySzAxVDh5dTUySnlBRUtrUmIwWEtGTHBLWTZ1ZEM3NVZzbzVhK2F0NXBHa052bXEwOU1leGZCWFRTajRRWEZ6K2Fpd3Z4WkcwREhsaUh3aTVzZEZvcUZFV1BadkdCQ3NrVTk5ZHZjajBNcU9QbDNLaFNuWDFwQTNacEp4UW1laW85Zi9HR05HbWFWSE91Q0JJa2p5bVJpRFBjOG1aMGg1dWFicWRhQmJsWXFuVlNodmhhUmZYOUdDcjliV3BBdFdPY0pDMFZFblQvblJybldiTDVIbStjT0hDUE04blB4WWxPa3NEMS9yWEdMTnUzYnBKcjErd1lJSDBINUxPS0pyb1V1blBwdE80OE1JTHBaUGY4UER3M3IxN2hSMGFqY2I4K2ZNaGFZSWlCdmNQZi9qREF3ODhVT21nVjVibGpCa3psaXhaSWxwdjNyeDVXZ0lwL3FCbzdqelBMN3p3UWxIa1JWRkliRlJid0FrVFNQZE5HWC9XckZsdzhjVVhLd25GSjJvN0pwTi9KdFpLYUJ2YVNYVldtbE11bTU5V0NGV1lKYzBMMjdGamgyaDZBRWhQLzIyZ2xVTUlPM2Z1VkVrY0dCaW9vT1pTZDk4K3NYcG0zckJoZzRyNXFsV3JORUZmYTZvQllNbVNKZnFnTFZ1MlFMdVAzc0RBZ0V2TDFDWnF6VWxESUFwNEtsTWN0Yk1zakcvNVdvbW1hTjJ4eUxnUWQyaG9xRlVoTk43bXBKTWNIQnhNdTFiRCtQNDdtbktROW10UkIyaDRlRmk3NDJuZXJQcFBvakZFRDRnZjA5WFZaVko5VWVsRU1PbEhTVk9XcFo1eU9zZVhsTEhUbm55cU5lcjF1aktMK29mU0U2V1MwcGtHUG1UREZLU1c4NU5TVFRaR1JwUEVoVlJXVk5nU0FBQUdpMGxFUVZTMXlaYWtpUXBTV1N6Y0pEWHh5ZzB5NTFhSkhrelI5WG56NXMyVE9nM3FFQkNSU0Vmbkd1R05HemNLNzNSM2QvZjI5dGJyZGMyVTB5OGlIVExVM3IxN0R4NDhtT2Y1Z1FNSEZpMWFKQzF2NTh5WnMyM2JOc2xGa0x2RVl0eDMzMzNhWHZYZ3dZUDMzbnV2S0NheG50S2pXNFVtaExCbnp4N3Q5VE0wTkxSOSszYWh6b0VEQnhZc1dDQWU5Wnc1Yy9idjN6OHlNa0pFQnc0Y1NCTXdqeWx1T0pWOHBRcWlzNStsYWpWdCthRGFKQzIwMXowNy8venpWUWR0MjdhdGN2S1lXSndGRXpySlZxcmQwaGJpRmR1NlpNa1NuZHZtelp0VGphUi9WNjVjK2FSM1prdEZRL3N1YUlSTmpGcHFZVlZzVSs5RUVLRUVyZ0R0dVp5dWZGeW9QVGxwYWMvbzFKZE1wNmZ6MFJZT2s0ckxrMDRzRlJ3RkRsUG5LRldSYVNXVTVtSlVXcXFrRmFRVjlWckpHMDY3NDZWNW9ST0xCYVc2UDZXNE5EZWZXQnZ5cERkSWxQMFVHN2Q3OSs3QndVRWhSSDkvdnhoQlk0eGdaN0tTalJzM2xtV1paZG5odzRkMzd0elpiRGFkY3c4KytPQ2lSWXZFclQxMDZORDk5OSt2TzVHK0VrQTNZTmFzV1dlY2NVWjZOaEpIOUlrbm50Qk82R2tWM0dPUFBiWno1ODZ5TEVkR1JuNzcyOStlYzg0NVlnZEdSa1oyN2RwMXJCSHBQMTFuVFZRVGxXY3A2cVI4cEZWUmVxK2cvdkxaczJkUHhUdlQxQ2o1a3VlNVdCNjFzQ0paTWNhdFc3ZFcvSStLazJHTTZlL3ZWOGZ3M252di9ZdnFyTlNHcWt5bENMZlliRlV4OVhxOUxNdktxejRVQmRHTWZyWG82VGxKZEZaWmxsbzFtN3FCRmNnbDlRRWtSQ2pna2lMc0lRU0pKUDdsZEZiYUxqaHRKNWNpdnltY2tFWTZsUkNOUmtPUDF1SkFwT2l1U0xvTTdweVR3a1Axd2pUUlRLRGRpV2NHT2VwcXRDTHRqVDZoODhDVHI3UFVJZTdyNjROMjA4SWRPM2JvT3hDV0xsMWFNZm5NUEdQR2pIUFBQVmZ1RlFVa3BKazVjK2E1NTU3YjNkMmRyazNlWWJGLy8zN3hSWWVIaDdkdjN5NEVtalZyMWxsbm5TVVNldUtKSnk1ZXZGaVVldHE3U0ZPUW5YTm5uMzIyOG1EVjVWNjFhbFhsS0NONzFRSFlVdDgzeldhYWhpNVRhNlVudUxUd2JQbnk1Zks3bmhZclh5ci91MjNidGtvcW12eHpZR0JncXNTWWRENFRvd1JFcEdkSmErM0ZGMTlzbEM2VkZ4cDBBQjRxUjd6T1BmODZxN05LaVY1YWJ5dDRnUGF5VlFCVzB4UDFiS1NZbjBKTXFYK25BWUVPUUdZbGczUmk2K0FXRjJ1SHovVFNDaHFYZXVHNjg2cDBwOWVhU3NPVXFjS0tNY3FDQmJRVEgwS1dLbTZYOXRpQzlrc3I1QUFnLzZYZDd0SldkNVUxVDdUNCtyM1NBRnF2aDNaSGZUZHA5M1JqekpJbFM5U09WUHBjeXYySER4L1dEbUhIKzY0c0FEanp6RE5uenB3cEhWZDM3dHdwWWRkWnMyYkpnck1zTzNMa3lPN2R1OFcwZFhkM0wxeTRVTjlZc212WHJqelBSU2JrSk9pOVAzRGdnQWFaNnZYNkdXZWMwZFhWVlJURi9QbnpoWG5UMG9kSithc2lXSWc0ZS9aczhRR3pMRHY5OU5OaDFhcFZBak5wSjJKRmkxS1JUazl6RlExeUxIN1dwRGlYZnFuQStTbXZpYUQxOS9jckxyWnUzYnJKT3dFbEg0bjNwWHdra1hvaC9VUmdMbFhXcVFLVnU4WXcrUFNGSENrZ04vSDFKdFdtbmUzSTREVGVsWldDcGVtcndGSVVWRkV6c2ZmcDRVUFAzbnA0cWxnZWZiR1VPQ0xTS2d6YWpmWlNFVkdobVFod1Y1eFZLWjdKMGhDcEpuOVBWZE9sYjRDcUZQcE16NnVvdEh5dHNKdkl1RDVDMjdacXMwQXhOYlZhVGI2b05kQkdpNUxNSitHU1NZOTdLWFVxM1orRnl6U3doSWhPbkZjUjZmdnZ2Ly9nd1lPYVY1TXF5SWx1aEVZaUJDT2ZCaHFoWVRzZFNwV3I2SjFGaXhZVlJZR0ljK2ZPM2I1OXUwejFrVWNla2RvYVk4elEwTkNlUFh0RXpjMmVQWHZ1M0xueUVyL1RUanROOEM5alRFOVBUMjl2cjFCaGVIaDQ5KzdkaWpIb3M1eHppeFl0U3Nra05CMGRIZDIrZmJzUW9hZW5CMWF2WGoycHBwZzJ4cURzblFLYmFSYkpSQWdmeHZlT2xMOUxseTVWR1Jja01zME9rM3UzYnQycVlwWG1KUWdtSlFPZWQ5NTVxblRrblJjdzRTMG9sWXd6VlZ2eTNqKzViT25TcFc3aXk3dW1mYXlwdkpGdjBoZFBUQlZQclVUQ0srOXRDTzArV2FxWTVIOVRmM2lxRittSjNxbDBSMHlOVHhwRHFRQVM2VlN6TEhPcElLZ2ZNTzJtcmpMalpyTXA4SEdxQ3dUeGtQNDRhUnhmR2dHbVRvMjJPU21LUXBEMXNYNFMxa29TV25wNGxLSDBlbzFPYWo5WjhkZlNoNllhWFUzWnhGV3JpOWNDNHlSN1dXSGZOQ0I0WE1UU2Q0NE5EZzZLV3BVUit2djdHNDBHRVkyTWpLUmQ0TlJMRnQwazc1eFRRRjJhVG1xdWRYZDM5NG9WSzRRRXZiMjk2cWwzZFhVdFg3NWNGTHorTG5qLzh1WExSWC8xOXZacXc0YWVucDVseTVhbDRTaFpzclNybTlnMnVWYXJMVnUyVERhc3Y3Ly8vd01DbWRabTZBTThqQUFBQUFCSlJVNUVya0pnZ2c9PVwiIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgUGFzc3dvcmRJbnB1dCBmcm9tIFwiLi8uLi9Gb3Jtcy9QYXNzd29yZElucHV0XCI7XHJcbmltcG9ydCBXYWxsZXREYiBmcm9tIFwic3RvcmVzL1dhbGxldERiXCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQge2tleX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBY2NvdW50UGVybWlzc2lvbnNNaWdyYXRlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgdmFsaWRQYXNzd29yZDogZmFsc2UsXHJcbiAgICAgICAgICAgIHBhc3M6IG51bGwsXHJcbiAgICAgICAgICAgIGdlbmVyYXRlZFBhc3N3b3JkOlxyXG4gICAgICAgICAgICAgICAgXCJQXCIgK1xyXG4gICAgICAgICAgICAgICAga2V5XHJcbiAgICAgICAgICAgICAgICAgICAgLmdldF9yYW5kb21fa2V5KClcclxuICAgICAgICAgICAgICAgICAgICAudG9XaWYoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50b1N0cmluZygpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBvblN1Ym1pdCgpIHt9XHJcblxyXG4gICAgb25QYXNzd29yZENoYW5nZShlKSB7XHJcbiAgICAgICAgbGV0IHt2YWxpZH0gPSBlO1xyXG4gICAgICAgIGxldCBuYW1lID0gdGhpcy5wcm9wcy5hY2NvdW50LmdldChcIm5hbWVcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGl2ZSA9ICF2YWxpZFxyXG4gICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgOiBXYWxsZXREYi5nZW5lcmF0ZUtleUZyb21QYXNzd29yZChuYW1lLCBcImFjdGl2ZVwiLCBlLnZhbHVlKS5wdWJLZXk7XHJcbiAgICAgICAgY29uc3Qgb3duZXIgPSAhdmFsaWRcclxuICAgICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICAgIDogV2FsbGV0RGIuZ2VuZXJhdGVLZXlGcm9tUGFzc3dvcmQobmFtZSwgXCJvd25lclwiLCBlLnZhbHVlKS5wdWJLZXk7XHJcbiAgICAgICAgY29uc3QgbWVtbyA9ICF2YWxpZFxyXG4gICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgOiBXYWxsZXREYi5nZW5lcmF0ZUtleUZyb21QYXNzd29yZChuYW1lLCBcIm1lbW9cIiwgZS52YWx1ZSkucHViS2V5O1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3ZhbGlkUGFzc3dvcmQ6IGUudmFsaWQsIHBhc3M6IGUudmFsdWV9KTtcclxuICAgICAgICB0aGlzLnByb3BzLm9uU2V0UGFzc3dvcmRLZXlzKHthY3RpdmUsIG93bmVyLCBtZW1vfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tLZXlVc2Uoa2V5LCByb2xlKSB7XHJcbiAgICAgICAgaWYgKCFrZXkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZiAocm9sZSA9PT0gXCJtZW1vXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGtleSA9PT0gdGhpcy5wcm9wcy5tZW1vS2V5O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzW2Ake3JvbGV9S2V5c2BdLnJlZHVjZSgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGIgPT09IGtleSB8fCBhO1xyXG4gICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vblVzZUtleShyb2xlLCByZW1vdmUgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmIChyZW1vdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wc1tyb2xlID09PSBcImFjdGl2ZVwiID8gXCJvblJlbW92ZUFjdGl2ZVwiIDogXCJvblJlbW92ZU93bmVyXCJdKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wc1tyb2xlXSxcclxuICAgICAgICAgICAgICAgIFwiX2tleXNcIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wc1tyb2xlXSkge1xyXG4gICAgICAgICAgICBjb25zdCB3ZWlnaHRzID0ge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlOiB0aGlzLnByb3BzLmFjY291bnQuZ2V0SW4oW1xyXG4gICAgICAgICAgICAgICAgICAgIFwiYWN0aXZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ3ZWlnaHRfdGhyZXNob2xkXCJcclxuICAgICAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICAgICAgb3duZXI6IHRoaXMucHJvcHMuYWNjb3VudC5nZXRJbihbXCJvd25lclwiLCBcIndlaWdodF90aHJlc2hvbGRcIl0pXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgICAgICAgXCJrZXlcIixcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHNbcm9sZV0sXHJcbiAgICAgICAgICAgICAgICBcIndlaWdodHNcIixcclxuICAgICAgICAgICAgICAgIHdlaWdodHMsXHJcbiAgICAgICAgICAgICAgICBcIndlaWdodCBvZiByb2xlOlwiLFxyXG4gICAgICAgICAgICAgICAgd2VpZ2h0c1tyb2xlXVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzW1xyXG4gICAgICAgICAgICAgICAgcm9sZSA9PT0gXCJhY3RpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgID8gXCJvbkFkZEFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgOiByb2xlID09PSBcIm93bmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcIm9uQWRkT3duZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwib25TZXRNZW1vXCJcclxuICAgICAgICAgICAgXSh0aGlzLnByb3BzW3JvbGVdLCB3ZWlnaHRzW3JvbGVdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBhY3RpdmVJblVzZSA9IHRoaXMuY2hlY2tLZXlVc2UoXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWN0aXZlICYmIHRoaXMucHJvcHMuYWN0aXZlLFxyXG4gICAgICAgICAgICBcImFjdGl2ZVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgb3duZXJJblVzZSA9IHRoaXMuY2hlY2tLZXlVc2UoXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMub3duZXIgJiYgdGhpcy5wcm9wcy5vd25lcixcclxuICAgICAgICAgICAgXCJvd25lclwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgbWVtb0luVXNlID0gdGhpcy5jaGVja0tleVVzZShcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5tZW1vICYmIHRoaXMucHJvcHMubWVtbyxcclxuICAgICAgICAgICAgXCJtZW1vXCJcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBsZXQgdXNlVGV4dCA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQucGVybS51c2VfdGV4dFwiKTtcclxuICAgICAgICBsZXQgcmVtb3ZlVGV4dCA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQucGVybS5yZW1vdmVfdGV4dFwiKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPXt7bWF4V2lkdGg6IFwiODAwcHhcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5wYXNzd29yZF9tb2RlbF8xXCIgLz5cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuXHJcbiAgICAgICAgICAgICAgICA8cCBzdHlsZT17e21heFdpZHRoOiBcIjgwMHB4XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ3YWxsZXQucGFzc3dvcmRfbW9kZWxfMVwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICA8cCBzdHlsZT17e21heFdpZHRoOiBcIjgwMHB4XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIHVuc2FmZSBjb250ZW50PVwid2FsbGV0LnBhc3N3b3JkX21vZGVsXzJcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9wPlxyXG5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGl2aWRlclwiIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgPGZvcm1cclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21heFdpZHRoOiBcIjQwcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uU3VibWl0PXt0aGlzLm9uU3VibWl0LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgbm9WYWxpZGF0ZVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJsZWZ0LWxhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cIndhbGxldC5nZW5lcmF0ZWRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+e3RoaXMuc3RhdGUuZ2VuZXJhdGVkUGFzc3dvcmR9PC9wPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT17e2ZvbnRXZWlnaHQ6IFwiYm9sZFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5wYXNzd29yZF9tb2RlbF8yXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3A+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxQYXNzd29yZElucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cInBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybWF0aW9uPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vblBhc3N3b3JkQ2hhbmdlLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vTGFiZWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRMZW5ndGg9ezEyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja1N0cmVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuXHJcbiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9e2FjdGl2ZUluVXNlID8gXCJpbi11c2VcIiA6IFwiXCJ9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5uZXdfYWN0aXZlXCIgLz46XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnt0aGlzLnByb3BzLmFjdGl2ZX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInRleHQtcmlnaHRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uVXNlS2V5LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUluVXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWN0aXZlSW5Vc2UgPyByZW1vdmVUZXh0IDogdXNlVGV4dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9e293bmVySW5Vc2UgPyBcImluLXVzZVwiIDogXCJcIn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLm5ld19vd25lclwiIC8+OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57dGhpcy5wcm9wcy5vd25lcn08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInRleHQtcmlnaHRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uVXNlS2V5LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvd25lclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3duZXJJblVzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge293bmVySW5Vc2UgPyByZW1vdmVUZXh0IDogdXNlVGV4dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9e21lbW9JblVzZSA/IFwiaW4tdXNlXCIgOiBcIlwifT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ubmV3X21lbW9cIiAvPjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e3RoaXMucHJvcHMubWVtb308L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInRleHQtcmlnaHRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBtZW1vSW5Vc2UgPyBcImhpZGRlblwiIDogXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblVzZUtleS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWVtb1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb0luVXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXNlVGV4dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcblxyXG4gICAgICAgICAgICAgICAge21lbW9JblVzZSA/IChcclxuICAgICAgICAgICAgICAgICAgICA8cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21heFdpZHRoOiBcIjgwMHB4XCIsIHBhZGRpbmdUb3A6IDEwfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGFzLWVycm9yXCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5tZW1vX3dhcm5pbmdcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgUHJpdmF0ZUtleVZpZXcgZnJvbSBcImNvbXBvbmVudHMvUHJpdmF0ZUtleVZpZXdcIjtcclxuaW1wb3J0IHtQdWJsaWNLZXl9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XHJcbmltcG9ydCBQcml2YXRlS2V5U3RvcmUgZnJvbSBcInN0b3Jlcy9Qcml2YXRlS2V5U3RvcmVcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5cclxuLyoqXHJcbiAqIEBicmllZiBBbGxvd3MgdGhlIHVzZXIgdG8gZW50ZXIgYSBwdWJsaWMga2V5XHJcbiAqL1xyXG5cclxuY2xhc3MgUHViS2V5SW5wdXQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLCAvLyBhIHRyYW5zbGF0aW9uIGtleSBmb3IgdGhlIGxhYmVsXHJcbiAgICAgICAgdmFsdWU6IFByb3BUeXBlcy5zdHJpbmcsIC8vIGN1cnJlbnQgdmFsdWVcclxuICAgICAgICBlcnJvcjogUHJvcFR5cGVzLnN0cmluZywgLy8gdGhlIGVycm9yIG1lc3NhZ2Ugb3ZlcnJpZGVcclxuICAgICAgICBwbGFjZWhvbGRlcjogUHJvcFR5cGVzLnN0cmluZywgLy8gdGhlIHBsYWNlaG9sZGVyIHRleHQgdG8gYmUgZGlzcGxheWVkIHdoZW4gdGhlcmUgaXMgbm8gdXNlcl9pbnB1dFxyXG4gICAgICAgIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYywgLy8gYSBtZXRob2QgdG8gYmUgY2FsbGVkIGFueSB0aW1lIHVzZXIgaW5wdXQgY2hhbmdlc1xyXG4gICAgICAgIG9uQWN0aW9uOiBQcm9wVHlwZXMuZnVuYywgLy8gYSBtZXRob2QgY2FsbGVkIHdoZW4gQWRkIGJ1dHRvbiBpcyBjbGlja2VkXHJcbiAgICAgICAgdGFiSW5kZXg6IFByb3BUeXBlcy5udW1iZXIsIC8vIHRhYmluZGV4IHByb3BlcnR5IHRvIGJlIHBhc3NlZCB0byBpbnB1dCB0YWdcclxuICAgICAgICBkaXNhYmxlQWN0aW9uQnV0dG9uOiBQcm9wVHlwZXMuYm9vbCAvLyB1c2UgaXQgaWYgeW91IG5lZWQgdG8gZGlzYWJsZSBhY3Rpb24gYnV0dG9uXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVmFsaWRQdWJLZXkodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gISFQdWJsaWNLZXkuZnJvbVB1YmxpY0tleVN0cmluZyh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25JbnB1dENoYW5nZWQoZXZlbnQpIHtcclxuICAgICAgICBsZXQgdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWUudHJpbSgpO1xyXG4gICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uS2V5RG93bihldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykgdGhpcy5vbkFjdGlvbihldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25BY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkFjdGlvbiAmJlxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnZhbGlkICYmXHJcbiAgICAgICAgICAgICF0aGlzLnByb3BzLmRpc2FibGVBY3Rpb25CdXR0b25cclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkFjdGlvbihldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgZXJyb3IgPSB0aGlzLnByb3BzLmVycm9yO1xyXG4gICAgICAgIGlmICghZXJyb3IgJiYgdGhpcy5wcm9wcy52YWx1ZSAmJiAhdGhpcy5pc1ZhbGlkUHViS2V5KHRoaXMucHJvcHMudmFsdWUpKVxyXG4gICAgICAgICAgICBlcnJvciA9IFwiTm90IGEgdmFsaWQgcHVibGljIGtleVwiO1xyXG4gICAgICAgIGxldCBhY3Rpb25fY2xhc3MgPSBjbGFzc25hbWVzKFwiYnV0dG9uXCIsIHtcclxuICAgICAgICAgICAgZGlzYWJsZWQ6IGVycm9yIHx8IHRoaXMucHJvcHMuZGlzYWJsZUFjdGlvbkJ1dHRvblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGtleXMgPSBQcml2YXRlS2V5U3RvcmUuZ2V0U3RhdGUoKS5rZXlzO1xyXG4gICAgICAgIGNvbnN0IGhhc19wcml2YXRlID1cclxuICAgICAgICAgICAgdGhpcy5pc1ZhbGlkUHViS2V5KHRoaXMucHJvcHMudmFsdWUpICYmIGtleXMuaGFzKHRoaXMucHJvcHMudmFsdWUpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB1YmtleS1pbnB1dCBuby1vdmVyZmxvd1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWFyZWFcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1hcmVhXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHshZXJyb3IgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy52YWx1ZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVmFsaWRQdWJLZXkodGhpcy5wcm9wcy52YWx1ZSkgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwicmlnaHQtbGFiZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0udmFsaWRfcHViXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJsZWZ0LWxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e3RoaXMucHJvcHMubGFiZWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dC1hcmVhXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImlubGluZS1sYWJlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY2NvdW50LWltYWdlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFByaXZhdGVLZXlWaWV3IHB1YmtleT17dGhpcy5wcm9wcy52YWx1ZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwia2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMua2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCI0eFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qcml2YXRlS2V5Vmlldz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17aGFzX3ByaXZhdGUgPyBcIm15LWtleVwiIDogXCJcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5wcm9wcy52YWx1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucGxhY2Vob2xkZXIgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5wdWJsaWNfa2V5XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cInVzZXJfaW5wdXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uSW5wdXRDaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXt0aGlzLnByb3BzLnRhYkluZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLm9uQWN0aW9uID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXthY3Rpb25fY2xhc3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25BY3Rpb24uYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e3RoaXMucHJvcHMuYWN0aW9uX2xhYmVsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVycm9yLWFyZWEgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntlcnJvcn08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBQdWJLZXlJbnB1dDtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBQdWJLZXlJbnB1dCBmcm9tIFwiLi4vRm9ybXMvUHViS2V5SW5wdXRcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCB7VGFicywgVGFifSBmcm9tIFwiLi4vVXRpbGl0eS9UYWJzXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IFNpZ25lZE1lc3NhZ2VBY3Rpb24gZnJvbSBcIi4uLy4uL2FjdGlvbnMvU2lnbmVkTWVzc2FnZUFjdGlvblwiO1xyXG5pbXBvcnQgU2lnbmVkTWVzc2FnZSBmcm9tIFwiLi4vQWNjb3VudC9TaWduZWRNZXNzYWdlXCI7XHJcblxyXG4vKiogVGhpcyBjb21wb25lbnQgZ2l2ZXMgYSB1c2VyIGludGVyZmFjZSBmb3Igc2lnbmluZyBhbmQgdmVyaWZ5aW5nIG1lc3NhZ2VzIHdpdGggdGhlIGJpdFNoYXJlcyBtZW1vIGtleS5cclxuICogIEl0IGNvbnNpc3RzIG9mIHR3byB0YWJzOlxyXG4gKiAgICAtIFNpZ24gbWVzc2FnZSB0YWIgKGNvZGUgcHJlZml4OiB0YWJTTSlcclxuICogICAgLSBWZXJpZnkgbWVzc2FnZSB0YWIgKGNvZGUgcHJlZml4OiB0YWJWTSlcclxuICpcclxuICogIFNlZSBTaWduZWRNZXNzYWdlQWN0aW9uIGZvciBkZXRhaWxzIG9uIG1lc3NhZ2UgZm9ybWF0LlxyXG4gKlxyXG4gKiAgICBAYXV0aG9yIFN0ZWZhbiBTY2hpZXNzbCA8c3RlZmFuLnNjaGllc3NsQGJsb2NrY2hhaW5wcm9qZWN0c2J2LmNvbT5cclxuICovXHJcbmNsYXNzIEFjY291bnRTaWduZWRNZXNzYWdlcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFjY291bnQ6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBzdGF0ZSAoZG8gbm90IHVzZSBzZXRTdGF0ZSBtZXRob2QhKVxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHRhYnNtX21lbW9fa2V5OiB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwib3B0aW9uc1wiKS5nZXQoXCJtZW1vX2tleVwiKSxcclxuICAgICAgICAgICAgdGFic21fcG9wdXA6IFwiXCIsXHJcbiAgICAgICAgICAgIHRhYnNtX21lc3NhZ2VfdGV4dDogXCJcIixcclxuICAgICAgICAgICAgdGFic21fbWVzc2FnZV9zaWduZWQ6IFwiXCIsXHJcbiAgICAgICAgICAgIHRhYnZtX3BvcHVwOiBcIlwiLFxyXG4gICAgICAgICAgICB0YWJ2bV9tZXNzYWdlX3NpZ25lZDogXCJcIixcclxuICAgICAgICAgICAgdGFidm1fdmVyaWZpZWQ6IG51bGwsXHJcbiAgICAgICAgICAgIHRhYnZtX21lc3NhZ2Vfc2lnbmVkX2FuZF92ZXJpZmllZDogbnVsbCxcclxuICAgICAgICAgICAgdGFidm1fZmxhZ192ZXJpZnlvbmNoYW5nZTogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZlbnQgd2hlbiB1c2VyIHB1c2hlcyBzaWduIGJ1dHRvbi4gTWVtbyBtZXNzYWdlIGFuZCBtZXRhIHdpbGwgYmUgc2lnbmVkIGFuZCBkaXNwbGF5ZWRcclxuICAgICAqIGluIHRoZSBib3R0b20gdGV4dGFyZWFcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRcclxuICAgICAqL1xyXG4gICAgX3RhYlNNU2lnbkFjdGlvbihldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIHZhbGlkYXRlIGtleXMgYXJlIHN0aWxsIHRoZSBzYW1lLiBCZXR0ZXI6IG1ha2UgcHVibGljIG1lbW9rZXkgZmllbGQgdW5lZGl0YWJsZVxyXG4gICAgICAgICAgICBsZXQgc3RvcmVkS2V5ID0gdGhpcy5wcm9wcy5hY2NvdW50LmdldChcIm9wdGlvbnNcIikuZ2V0KFwibWVtb19rZXlcIik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnRhYnNtX21lbW9fa2V5ICE9PSBzdG9yZWRLZXkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQuc2lnbmVkbWVzc2FnZXMua2V5bWlzbWF0Y2hcIilcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHRoZXJlIHNob3VsZCBiZSBhIG1lc3NhZ2UgZW50ZXJlZFxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS50YWJzbV9tZXNzYWdlX3RleHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RhYlNNUG9wTWVzc2FnZShcclxuICAgICAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLnNpZ25pbmdcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgMFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIFNpZ25lZE1lc3NhZ2VBY3Rpb24uc2lnbk1lc3NhZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudGFic21fbWVzc2FnZV90ZXh0XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzbV9tZXNzYWdlX3NpZ25lZDogcmVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic21fcG9wdXA6IFwiXCIgLy8gY2xlYXIgbG9hZGluZyBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RhYlNNUG9wTWVzc2FnZShlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic21fbWVzc2FnZV9zaWduZWQ6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGFiU01Qb3BNZXNzYWdlKGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICB0YWJzbV9tZXNzYWdlX3NpZ25lZDogbnVsbFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3RhYlNNSGFuZGxlQ2hhbmdlKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gZXZlbnQgZm9yIHRleHRhcmVhXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dGFic21fbWVzc2FnZV90ZXh0OiBldmVudC50YXJnZXQudmFsdWV9KTtcclxuICAgIH1cclxuXHJcbiAgICBfdGFiU01IYW5kbGVDaGFuZ2VLZXkodmFsdWUpIHtcclxuICAgICAgICAvLyBldmVudCBmb3IgdGV4dGZpZWxkIG9mIHB1YmxpYyBrZXlcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHt0YWJzbV9tZW1vX2tleTogdmFsdWV9KTtcclxuICAgIH1cclxuXHJcbiAgICBfdGFiU01Db3B5VG9DbGlwQm9hcmQoZXZlbnQpIHtcclxuICAgICAgICAvLyBldmVudCB3aGVuIHVzZXIgY2xpY2tzIGludG8gdGhlIHNpZ25lZCBtZXNzYWdlIHRleHRhcmVhXHJcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICBldmVudC50YXJnZXQuZm9jdXMoKTtcclxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnNlbGVjdCgpO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzZnVsID0gZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGFiU01Qb3BNZXNzYWdlKFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NmdWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5jb3B5c3VjY2Vzc2Z1bFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmNvcHl1bnN1Y2Nlc3NmdWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGFiU01Qb3BNZXNzYWdlKFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmNvcHl1bnN1Y2Nlc3NmdWxcIlxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwbGF5cyBhbiBpbmZvcm1hdGlvbiB0byB0aGUgdXNlciB0aGF0IGRpc2FwcGVhcnMgb3ZlciB0aW1lXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB0aW1lb3V0XHJcbiAgICAgKi9cclxuICAgIF90YWJTTVBvcE1lc3NhZ2UobWVzc2FnZSwgdGltZW91dCA9IDMwMDApIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgdGFic21fcG9wdXA6IG1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKG1lc3NhZ2UgIT09IFwiXCIgJiYgdGltZW91dCA+IDApIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJzbV9wb3B1cDogXCJcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50IHdoZW4gdGhlIHVzZXIgdHJpZXMgdG8gdmVyaWZ5IGEgbWVzc2FnZSwgZWl0aGVyIG1hbnVhbCB0aHJvdWdoIHRoZSBidXR0b24gb3Igb25DaGFuZ2Ugb2YgdGhlIHRleHRhcmVhLlxyXG4gICAgICogVGhlIG1lc3NhZ2UgaXMgcGFyc2VkIGFuZCB2ZXJpZmllZCwgdGhlIHVzZXIgZ2V0cyB0aGUgbWVzc2FnZSByZXN0YXRlZCBpbiB0aGUgYm90dG9tIHBhcnQgb2YgdGhlIHNpdGVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRcclxuICAgICAqL1xyXG4gICAgX3RhYlZNQWN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgLy8gcmVzZXQgdG8gdW52ZXJpZmllZCBzdGF0ZVxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICB0YWJ2bV9tZXNzYWdlX3NpZ25lZF9hbmRfdmVyaWZpZWQ6IG51bGwsXHJcbiAgICAgICAgICAgIHRhYnZtX3ZlcmlmaWVkOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBhdHRlbXB0IHZlcmlmeWluZ1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnRhYnZtX21lc3NhZ2Vfc2lnbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RhYlZNUG9wTWVzc2FnZShcclxuICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQuc2lnbmVkbWVzc2FnZXMudmVyaWZ5aW5nXCIpLFxyXG4gICAgICAgICAgICAgICAgMFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBkbyBub3QgYmxvY2sgZ3VpXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlX3NpZ25lZF9hbmRfdmVyaWZpZWQgPSBTaWduZWRNZXNzYWdlQWN0aW9uLnZlcmlmeU1lbW8oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudGFidm1fbWVzc2FnZV9zaWduZWRcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJ2bV9tZXNzYWdlX3NpZ25lZF9hbmRfdmVyaWZpZWQ6IG1lc3NhZ2Vfc2lnbmVkX2FuZF92ZXJpZmllZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFidm1fdmVyaWZpZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYnZtX3BvcHVwOiBcIlwiIC8vIGNsZWFyIHZlcmlmeWluZyBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90YWJWTVBvcE1lc3NhZ2UoZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJ2bV9tZXNzYWdlX3NpZ25lZF9hbmRfdmVyaWZpZWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYnZtX3ZlcmlmaWVkOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3RhYlZNSGFuZGxlQ2hhbmdlKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gb25jaGFuZ2UgZXZlbnQgb2YgdGhlIGlucHV0IHRleHRhcmVhXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHRhYnZtX21lc3NhZ2Vfc2lnbmVkOiBldmVudC50YXJnZXQudmFsdWUsXHJcbiAgICAgICAgICAgIHRhYnZtX3ZlcmlmaWVkOiBmYWxzZSxcclxuICAgICAgICAgICAgdGFidm1fbWVzc2FnZV9zaWduZWRfYW5kX3ZlcmlmaWVkOiBudWxsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUudGFidm1fZmxhZ192ZXJpZnlvbmNoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLl90YWJWTUFjdGlvbihldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGlzcGxheXMgYW4gaW5mb3JtYXRpb24gdG8gdGhlIHVzZXIgdGhhdCBkaXNhcHBlYXJzIG92ZXIgdGltZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0gdGltZW91dFxyXG4gICAgICovXHJcbiAgICBfdGFiVk1Qb3BNZXNzYWdlKG1lc3NhZ2UsIHRpbWVvdXQgPSAzMDAwKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHRhYnZtX3BvcHVwOiBtZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChtZXNzYWdlICE9PSBcIlwiICYmIHRpbWVvdXQgPiAwKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFidm1fcG9wdXA6IFwiXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3RhYlZNVG9nZ2xlVmVyaWZ5T25DaGFuZ2UoKSB7XHJcbiAgICAgICAgLy8gZXZlbnQgd2hlbiB0aGUgdXNlciBlbmFibGVzIC8gZGlzYWJsZXMgdmVyaWZ5aW5nIHdoaWxlIHR5cGluZ1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICB0YWJ2bV9mbGFnX3ZlcmlmeW9uY2hhbmdlOiAhdGhpcy5zdGF0ZS50YWJ2bV9mbGFnX3ZlcmlmeW9uY2hhbmdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLWNvbnRhaW5lciBnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFic1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWNjb3VudC10YWJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNDbGFzcz1cImFjY291bnQtb3ZlcnZpZXcgbm8tcGFkZGluZyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwiYWNjb3VudFNpZ25lZE1lc3NhZ2VzVGFiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cImdyaWQtY29udGVudCBzaHJpbmsgc21hbGwtdmVydGljYWwgbWVkaXVtLWhvcml6b250YWwgcGFkZGluZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5zaWdubWVzc2FnZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tvdmVyZmxvd1g6IFwiaGlkZGVuXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIG5vLW1hcmdpblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuc2lnbmVkbWVzc2FnZXMuc2lnbm1lc3NhZ2VcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQdWJLZXlJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwibWVtb19rZXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudGFic21fbWVtb19rZXl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQucGVybS5tZW1vX3B1YmxpY19rZXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQdWJsaWMgS2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs3fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX3RhYlNNSGFuZGxlQ2hhbmdlS2V5LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVBY3Rpb25CdXR0b249e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS50YWJzbV9tZXNzYWdlX3RleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fdGFiU01IYW5kbGVDaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQuc2lnbmVkbWVzc2FnZXMuZW50ZXJtZXNzYWdlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fdGFiU01TaWduQWN0aW9uLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuc2lnbmVkbWVzc2FnZXMuc2lnblwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tjb2xvcjogXCJncmF5XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS50YWJzbV9wb3B1cH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPVwiMTRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudGFic21fbWVzc2FnZV9zaWduZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2VkaXRhYmxlOiBmYWxzZX19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5hdXRvbWF0aWNjcmVhdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fdGFiU01Db3B5VG9DbGlwQm9hcmQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQuc2lnbmVkbWVzc2FnZXMudmVyaWZ5bWVzc2FnZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tvdmVyZmxvd1g6IFwiaGlkZGVuXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIG5vLW1hcmdpblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuc2lnbmVkbWVzc2FnZXMudmVyaWZ5bWVzc2FnZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0OiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogXCIwLjFlbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206IFwiMC41ZW1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLnZlcmlmeW9uY2hhbmdlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInN3aXRjaFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3RhYlZNVG9nZ2xlVmVyaWZ5T25DaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRhYnZtX2ZsYWdfdmVyaWZ5b25jaGFuZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLnZlcmlmeW9uY2hhbmdlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS50YWJ2bV9tZXNzYWdlX3NpZ25lZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl90YWJWTUhhbmRsZUNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5lbnRlcm1lc3NhZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90YWJWTUFjdGlvbi5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLnZlcmlmeVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0IHN0eWxlPXt7Y29sb3I6IFwiZ3JheVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUudGFidm1fcG9wdXB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RleHQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS50YWJ2bV92ZXJpZmllZCAhPT0gbnVsbCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Zsb2F0OiBcInJpZ2h0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZSBpczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50YWJ2bV92ZXJpZmllZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiZ3JlZW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwicmVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGFidm1fdmVyaWZpZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcInZlcmlmaWVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIm5vdCB2ZXJpZmllZFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeygodGhpcy5zdGF0ZS50YWJ2bV92ZXJpZmllZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRhYnZtX21lc3NhZ2Vfc2lnbmVkX2FuZF92ZXJpZmllZCAhPT1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50YWJ2bV9mbGFnX3ZlcmlmeW9uY2hhbmdlKSAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTaWduZWRNZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50YWJ2bV9tZXNzYWdlX3NpZ25lZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbkFjY291bnRTaWduZWRNZXNzYWdlcyA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudFNpZ25lZE1lc3NhZ2VzKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFjY291bnRTaWduZWRNZXNzYWdlcztcclxuIiwiaW1wb3J0IGFsdCBmcm9tIFwiYWx0LWluc3RhbmNlXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IHtTaWduYXR1cmUsIENoYWluU3RvcmUsIFB1YmxpY0tleX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBXYWxsZXRVbmxvY2tBY3Rpb25zIGZyb20gXCJhY3Rpb25zL1dhbGxldFVubG9ja0FjdGlvbnNcIjtcclxuaW1wb3J0IFdhbGxldERiIGZyb20gXCJzdG9yZXMvV2FsbGV0RGJcIjtcclxuXHJcbmNvbnN0IE1TR19IRUFEID0gXCItLS0tLUJFR0lOIEJJVFNIQVJFUyBTSUdORUQgTUVTU0FHRS0tLS0tXCI7XHJcbmNvbnN0IE1TR19NRVRBID0gXCItLS0tLUJFR0lOIE1FVEEtLS0tLVwiO1xyXG5jb25zdCBNU0dfU0lHTkFUVVJFID0gXCItLS0tLUJFR0lOIFNJR05BVFVSRS0tLS0tXCI7XHJcbmNvbnN0IE1TR19GT09UID0gXCItLS0tLUVORCBCSVRTSEFSRVMgU0lHTkVEIE1FU1NBR0UtLS0tLVwiO1xyXG5jb25zdCBNU0dfU0VOREVSID0gXCJhY2NvdW50XCI7XHJcbmNvbnN0IE1TR19QVUJMSUNLRVkgPSBcIm1lbW9rZXlcIjtcclxuY29uc3QgTVNHX0JMT0NLID0gXCJibG9ja1wiO1xyXG5jb25zdCBNU0dfREFURSA9IFwidGltZXN0YW1wXCI7XHJcblxyXG4vKiogVGhpcyBhY3Rpb24gcHJvdmlkZXMgZm9sbG93aW5nIGZ1bmN0aW9uYWxpdGllczpcclxuICogICAgLSBTaWduIGEgbWVzc2FnZVxyXG4gKiAgICAtIFZlcmlmeSBhIGdpdmVuIG1lc3NhZ2VcclxuICpcclxuICogIFRoZSBtZXNzYWdlIGZvcm1hdCB0aGF0IGlzIHVuZGVybHlpbmcgaXMgYXMgZm9sbG93czpcclxuICogIC0tLS0tQkVHSU4gQklUU0hBUkVTIFNJR05FRCBNRVNTQUdFLS0tLS1cclxuICogIDxtZXNzYWdlIGZyb20gdGhlIGFjY291bnQ+XHJcbiAqICAtLS0tLUJFR0lOIE1FVEEtLS0tLVxyXG4gKiAgYWNjb3VudD08YWNjb3VudCBuYW1lPlxyXG4gKiAgbWVtb2tleT08YWNjb3VudCBtZW1vIHB1YmxpYyBrZXk+XHJcbiAqICBibG9jaz08bGFzdCBpcnJldmVyc2libGUgYmxvY2s+XHJcbiAqICB0aW1lc3RhbXA9PGN1cnJlbnQgdGltZT5cclxuICogIC0tLS0tQkVHSU4gU0lHTkFUVVJFLS0tLS1cclxuICogIDxzaWduYXR1cmU+XHJcbiAqICAtLS0tLUVORCBCSVRTSEFSRVMgU0lHTkVEIE1FU1NBR0UtLS0tLVxyXG4gKlxyXG4gKiAgICBAYXV0aG9yIFN0ZWZhbiBTY2hpZXNzbCA8c3RlZmFuLnNjaGllc3NsQGJsb2NrY2hhaW5wcm9qZWN0c2J2LmNvbT5cclxuICovXHJcbmNsYXNzIFNpZ25lZE1lc3NhZ2VBY3Rpb24ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgdGhlIGdpdmVuIHJhdyBzdHJpbmcgdG8gYSBwcm9jZXNzaW5nIGZyaWVuZGx5IGRpY3Rpb25hcnlcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBNZXNzYWdlIGFzIHJhdyBzdHJpbmcsIHByb3Blcmx5IGZvcm1hdHRlZCB3aXRoIGhlYWQvbWV0YS9zaWduYXR1cmUvZm9vdGVyXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgeyp9IHBhcnNlZCBtZXNzYWdlIGFzIGRpY3Rpb25hcnkgd2l0aCB0aGUgZm9sbG93aW5nIGZpZWxkczpcclxuICAgICAqICAgICAgICAgICAgICBjb250ZW50IDogVXNlciBtZXNzYWdlIG9mIHRoZSBtZXNzYWdlXHJcbiAgICAgKiAgICAgICAgICAgICAgbWV0YSA6IERpY3Rpb25hcnkgd2l0aCB0aGUgbWV0YSBkYXRhXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50IDogQWNjb3VudCBuYW1lIG9mIHRoZSBzaWduZXJcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIGtleSA6IE1lbW8gcHVibGljIGtleSBvZiB0aGUgc2lnbmVyXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICBibG9jayA6IEN1cnJlbnQgbGFzdCBpcnJldmVyc2libGUgYmxvY2sgb2YgdGhlIGJpdFNoYXJlcyBibG9ja2NoYWluXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXAgOiBUaW1lIHRoZSBtZXNzYWdlIHdhcyBzaWduZWQgaW4gVVRDIGZvcm1hdFxyXG4gICAgICogICAgICAgICAgICAgIHNpZ25lZCA6IFNlcGVyYXRlIHN0cmluZyB0aGF0IGNvbnRhaW5zIGFsbCBkYXRhIHRoYXQgd2lsbCBiZSBzaWduZWQgKGNvbnRlbnQgKyBtZXRhKVxyXG4gICAgICogICAgICAgICAgICAgIHNpZ25hdHVyZSA6IFNpZ25hdHVyZSBvZiB0aGUgc2lnbmVkIGRhdGFcclxuICAgICAqL1xyXG4gICAgcGFyc2VNZXNzYWdlKG1lc3NhZ2UpIHtcclxuICAgICAgICBsZXQgbWVzc2FnZUNvbnRlbnQsIG1lc3NhZ2VNZXRhLCBtZXNzYWdlU2lnbmF0dXJlLCBtZXNzYWdlU2lnbmVkQ29udGVudDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBjdXQgdGhlIHNlY3Rpb25zXHJcbiAgICAgICAgICAgIG1lc3NhZ2VDb250ZW50ID0gbWVzc2FnZS5zcGxpdChNU0dfSEVBRClbMV07IC8vIGV2ZXJ5dGhpbmcgYmVmb3JlIHRoZSBoZWFkIGlzIGlnbm9yZWRcclxuICAgICAgICAgICAgbWVzc2FnZU1ldGEgPSBtZXNzYWdlQ29udGVudC5zcGxpdChNU0dfTUVUQSk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDb250ZW50ID0gbWVzc2FnZU1ldGFbMF0ucmVwbGFjZSgvXlxcbnxcXG4kL2csIFwiXCIpO1xyXG4gICAgICAgICAgICBtZXNzYWdlU2lnbmF0dXJlID0gbWVzc2FnZU1ldGFbMV0uc3BsaXQoTVNHX1NJR05BVFVSRSk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VNZXRhID0gbWVzc2FnZVNpZ25hdHVyZVswXS50cmltKCk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VTaWduYXR1cmUgPSBtZXNzYWdlU2lnbmF0dXJlWzFdLnNwbGl0KE1TR19GT09UKVswXS50cmltKCk7IC8vIGV2ZXJ5dGhpbmcgYWZ0ZXIgZm9vdGVyIGlzIGlnbm9yZWRcclxuXHJcbiAgICAgICAgICAgIC8vIGhvdyB0aGUgc2lnbmVkIGNvbnRlbnQgaXQgYnVpbHQgaXMgY3J1Y2lhbCwgY29uc2lkZXIgZW5jYXBzdWxhdGluZ1xyXG4gICAgICAgICAgICBtZXNzYWdlU2lnbmVkQ29udGVudCA9IG1lc3NhZ2VDb250ZW50ICsgXCJcXG5cIiArIG1lc3NhZ2VNZXRhO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmludmFsaWRmb3JtYXRcIilcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBtZXNzYWdlTWV0YUFjY291bnQsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VNZXRhS2V5LFxyXG4gICAgICAgICAgICBtZXNzYWdlTWV0YUJsb2NrLFxyXG4gICAgICAgICAgICBtZXNzYWdlTWV0YVRpbWVzdGFtcDtcclxuICAgICAgICBpZiAobWVzc2FnZU1ldGEpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIHByb2Nlc3MgbWV0YVxyXG4gICAgICAgICAgICAgICAgLy8gLi4uIHNlbmRlclxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFBY2NvdW50ID0gbWVzc2FnZU1ldGEuc3BsaXQoTVNHX1NFTkRFUiArIFwiPVwiKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VNZXRhQWNjb3VudCA9IG1lc3NhZ2VNZXRhQWNjb3VudFsxXVxyXG4gICAgICAgICAgICAgICAgICAgIC5zcGxpdChcIlxcblwiKVswXVxyXG4gICAgICAgICAgICAgICAgICAgIC50cmltKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gLi4uIGFuZCBpdHMgcHVibGljIGtleVxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFLZXkgPSBtZXNzYWdlTWV0YS5zcGxpdChNU0dfUFVCTElDS0VZICsgXCI9XCIpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFLZXkgPSBtZXNzYWdlTWV0YUtleVsxXS5zcGxpdChcIlxcblwiKVswXS50cmltKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gLi4uIGJsb2NrIG51bWJlclxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFCbG9jayA9IG1lc3NhZ2VNZXRhLnNwbGl0KE1TR19CTE9DSyArIFwiPVwiKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VNZXRhQmxvY2sgPSBtZXNzYWdlTWV0YUJsb2NrWzFdLnNwbGl0KFwiXFxuXCIpWzBdLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAuLi4gdGltZSBzdGFtcFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFUaW1lc3RhbXAgPSBtZXNzYWdlTWV0YS5zcGxpdChNU0dfREFURSArIFwiPVwiKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VNZXRhVGltZXN0YW1wID0gbWVzc2FnZU1ldGFUaW1lc3RhbXBbMV1cclxuICAgICAgICAgICAgICAgICAgICAuc3BsaXQoXCJcXG5cIilbMF1cclxuICAgICAgICAgICAgICAgICAgICAudHJpbSgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5pbnZhbGlkZm9ybWF0XCJcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlQ29udGVudCxcclxuICAgICAgICAgICAgbWV0YToge1xyXG4gICAgICAgICAgICAgICAgYWNjb3VudDogbWVzc2FnZU1ldGFBY2NvdW50LFxyXG4gICAgICAgICAgICAgICAga2V5OiBtZXNzYWdlTWV0YUtleSxcclxuICAgICAgICAgICAgICAgIGJsb2NrOiBtZXNzYWdlTWV0YUJsb2NrLFxyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBtZXNzYWdlTWV0YVRpbWVzdGFtcFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzaWduZWQ6IG1lc3NhZ2VTaWduZWRDb250ZW50LFxyXG4gICAgICAgICAgICBzaWduYXR1cmU6IG1lc3NhZ2VTaWduYXR1cmVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGdpdmVuIHN0cmluZyBtZXNzYWdlIGlzIHBhcnNlZCBhbmQgdGhlbiBpdHMgc2lnbmF0dXJlIHZlcmlmaWVkLiBBIHBvc2l0aXZlIHZlcmlmaWNhdGlvbiByZXR1cm4gdGhlIHBhcnNlZFxyXG4gICAgICogbWVzc2FnZSwgYW55dGhpbmcgZWxzZSB0aHJvd3MgYW4gZXhlcHRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgTWVzc2FnZSBhcyByYXcgc3RyaW5nLCBwcm9wZXJseSBmb3JtYXR0ZWQgd2l0aCBoZWFkL21ldGEvc2lnbmF0dXJlL2Zvb3Rlciwgb3IgYWxyZWFkeSBwYXJzZWQgbWVzc2FnZVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHBhcnNlZCBtZXNzYWdlLCBzZWUgcGFyc2VNZXNzYWdlXHJcbiAgICAgKi9cclxuICAgIHZlcmlmeU1lbW8obWVzc2FnZSkge1xyXG4gICAgICAgIGxldCBtZXNzYWdlX3NpZ25lZDtcclxuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgfHwgbWVzc2FnZSBpbnN0YW5jZW9mIFN0cmluZykge1xyXG4gICAgICAgICAgICBtZXNzYWdlX3NpZ25lZCA9IHRoaXMucGFyc2VNZXNzYWdlKG1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGFzc3VtZSBpdHMgYSBkaWN0aW9uYXJ5XHJcbiAgICAgICAgICAgIG1lc3NhZ2Vfc2lnbmVkID0gbWVzc2FnZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHZhbGlkYXRlIGFjY291bnQgYW5kIGtleVxyXG4gICAgICAgIGxldCBzdG9yZWRBY2NvdW50ID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KG1lc3NhZ2Vfc2lnbmVkLm1ldGEuYWNjb3VudCk7XHJcbiAgICAgICAgaWYgKHN0b3JlZEFjY291bnQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmludmFsaWR1c2VyXCIpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB2ZXJpZnkgbWVzc2FnZSBzaWduZWRcclxuICAgICAgICBsZXQgdmVyaWZpZWQgPSBmYWxzZTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2ZXJpZmllZCA9IFNpZ25hdHVyZS5mcm9tSGV4KG1lc3NhZ2Vfc2lnbmVkLnNpZ25hdHVyZSkudmVyaWZ5QnVmZmVyKFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZV9zaWduZWQuc2lnbmVkLFxyXG4gICAgICAgICAgICAgICAgUHVibGljS2V5LmZyb21QdWJsaWNLZXlTdHJpbmcobWVzc2FnZV9zaWduZWQubWV0YS5rZXkpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIC8vIHdyYXAgbWVzc2FnZSB0aGF0IGNvdWxkIGJlIHJhaXNlZCBmcm9tIFNpZ25hdHVyZVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmVycm9ydmVyaWZ5aW5nXCIpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdmVyaWZpZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5pbnZhbGlkc2lnbmF0dXJlXCIpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlX3NpZ25lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIGFuIGFjY291bnQgYW5kIHRoZSBtZXNzYWdlIHRleHRcclxuICAgICAqIEBwYXJhbSBhY2NvdW50IEFjY291bnQgdGhhdCB3cml0ZXMgdGhlIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlVGV4dCBTdHJpbmcgdGV4dCBvZiB0aGUgbWVzc2FnZVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICAgKi9cclxuICAgIHNpZ25NZXNzYWdlKGFjY291bnQsIG1lc3NhZ2VUZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHdhbGxldCBpcyB1bmxvY2tlZCAod2UgbmVlZCBwcml2YXRlIGtleSlcclxuICAgICAgICAgICAgV2FsbGV0VW5sb2NrQWN0aW9ucy51bmxvY2soKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9idGFpbiBhbGwgbmVjZXNzYXJ5IGtleXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lbW9fZnJvbV9wdWJsaWMgPSBhY2NvdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KFwib3B0aW9uc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldChcIm1lbW9fa2V5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgMXMgYXJlIGJhc2U1OCBmb3IgYWxsIHplcm9zIChudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoLzExMTExMTExMTExMTExMTExMTExMS8udGVzdChtZW1vX2Zyb21fcHVibGljKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb19mcm9tX3B1YmxpYyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lbW9fZnJvbV9wcml2a2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZVRleHQgJiYgbWVtb19mcm9tX3B1YmxpYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb19mcm9tX3ByaXZrZXkgPSBXYWxsZXREYi5nZXRQcml2YXRlS2V5KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9fZnJvbV9wdWJsaWNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lbW9fZnJvbV9wcml2a2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQuc2lnbmVkbWVzc2FnZXMuaW52YWxpZGtleVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBvdGhlciBtZXRhIGRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlycl9ibG9jayA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KFwiMi4xLjBcIikuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJsYXN0X2lycmV2ZXJzaWJsZV9ibG9ja19udW1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZXRhID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TR19TRU5ERVIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI9XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5nZXQoXCJuYW1lXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTVNHX1BVQkxJQ0tFWSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIj1cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vX2Zyb21fcHVibGljICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTVNHX0JMT0NLICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPVwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlycl9ibG9jayArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcblwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TR19EQVRFICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPVwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdy50b1VUQ1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2VDb250ZW50VG9CZVNpZ25lZCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlVGV4dCArIFwiXFxuXCIgKyBtZXRhO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3QgYmxvY2sgZ3VpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZW1vX3NpZ25hdHVyZSA9IFNpZ25hdHVyZS5zaWduQnVmZmVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQ29udGVudFRvQmVTaWduZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9fZnJvbV9wcml2a2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vX2Zyb21fcHVibGljXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVtb19mb3JtYXR0ZWQgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNU0dfSEVBRCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlVGV4dCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNU0dfTUVUQSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TR19TSUdOQVRVUkUgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcblwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb19zaWduYXR1cmUudG9IZXgoKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNU0dfRk9PVDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG1lbW9fZm9ybWF0dGVkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXMpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFsdC5jcmVhdGVBY3Rpb25zKFNpZ25lZE1lc3NhZ2VBY3Rpb24pO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCBTaWduZWRNZXNzYWdlQWN0aW9uIGZyb20gXCIuLi8uLi9hY3Rpb25zL1NpZ25lZE1lc3NhZ2VBY3Rpb25cIjtcclxuXHJcbi8qKiBUaGlzIGNvbXBvbmVudCBhbGxvd3MgdG8gZGlzcGxheSBhbmQgdmVyaWZ5IGEgc2lnbmVkIG1lc3NhZ2VcclxuICpcclxuICogIFNlZSBTaWduZWRNZXNzYWdlQWN0aW9uIGZvciBkZXRhaWxzIG9uIG1lc3NhZ2UgZm9ybWF0LlxyXG4gKlxyXG4gKiAgICBAYXV0aG9yIFN0ZWZhbiBTY2hpZXNzbCA8c3RlZmFuLnNjaGllc3NsQGJsb2NrY2hhaW5wcm9qZWN0c2J2LmNvbT5cclxuICovXHJcbmNsYXNzIFNpZ25lZE1lc3NhZ2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgLy8gc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgIC8vICAgICBzaWduZWRNZXNzYWdlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcclxuICAgIC8vICAgIG5vVmVyaWZpY2F0aW9uXHJcbiAgICAvLyB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgbm9WZXJpZmljYXRpb246IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMucHJvcHMubWVzc2FnZSxcclxuICAgICAgICAgICAgbWVzc2FnZVBhcnNlZDogbnVsbCxcclxuICAgICAgICAgICAgc2hvd1Jhd01lc3NhZ2U6IGZhbHNlLFxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICBub1ZlcmlmaWNhdGlvbjogdGhpcy5wcm9wcy5ub1ZlcmlmaWNhdGlvbixcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgdmVyaWZpZWQ6IG51bGwsXHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbjogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgX3ZlcmlmeU1lc3NhZ2Uoc2lnbmVkTWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBzaWduZWRNZXNzYWdlLFxyXG4gICAgICAgICAgICBtZXNzYWdlUGFyc2VkOiBudWxsLFxyXG4gICAgICAgICAgICB2ZXJpZmllZDogbnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBtZXNzYWdlUGFyc2VkID0gbnVsbDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBtZXNzYWdlUGFyc2VkID0gU2lnbmVkTWVzc2FnZUFjdGlvbi5wYXJzZU1lc3NhZ2Uoc2lnbmVkTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgdmVyaWZpZWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlUGFyc2VkOiBtZXNzYWdlUGFyc2VkXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLm5vVmVyaWZpY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJpZmllZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb246IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLnZlcmlmeWluZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3QgYmxvY2sgZ3VpXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2lnbmVkTWVzc2FnZUFjdGlvbi52ZXJpZnlNZW1vKG1lc3NhZ2VQYXJzZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmaWVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uOiBcIlwiIC8vIGNsZWFyIHBvcHVwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl93YXJuaW5nKGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZmllZDogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgdGhpcy5fd2FybmluZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcclxuICAgICAgICB0aGlzLl92ZXJpZnlNZXNzYWdlKHRoaXMuc3RhdGUubWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcclxuICAgICAgICBsZXQgc2lnbmVkTWVzc2FnZSA9IG5leHRQcm9wcy5tZXNzYWdlO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgc2lnbmVkTWVzc2FnZSAhPSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgc2lnbmVkTWVzc2FnZSAhPSBudWxsICYmXHJcbiAgICAgICAgICAgIHNpZ25lZE1lc3NhZ2UgPT0gdGhpcy5zdGF0ZS5tZXNzYWdlXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIC8vIGFscmVhZHkgZG9uZVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3ZlcmlmeU1lc3NhZ2Uoc2lnbmVkTWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3dhcm5pbmcobWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb246IG1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlUmF3TWVzc2FnZSgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2hvd1Jhd01lc3NhZ2U6ICF0aGlzLnN0YXRlLnNob3dSYXdNZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBsZWdlbmRNZXNzYWdlO1xyXG4gICAgICAgIGxldCBib3JkZXJDb2xvcjtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5tZXNzYWdlUGFyc2VkICE9IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUudmVyaWZpZWQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyQ29sb3IgPSBcIiNGRkZcIjtcclxuICAgICAgICAgICAgICAgIGxlZ2VuZE1lc3NhZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgIFwiVW52ZXJpZmllZCBtZXNzYWdlIGZyb20gXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubWVzc2FnZVBhcnNlZC5tZXRhLmFjY291bnQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS52ZXJpZmllZCkge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyQ29sb3IgPSBcIiNGRkZcIjtcclxuICAgICAgICAgICAgICAgIGxlZ2VuZE1lc3NhZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgIFwiVmVyaWZpZWQgbWVzc2FnZSBmcm9tIFwiICtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLm1lc3NhZ2VQYXJzZWQubWV0YS5hY2NvdW50O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyQ29sb3IgPSBcIiNGMDBcIjtcclxuICAgICAgICAgICAgICAgIGxlZ2VuZE1lc3NhZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgIFwiUmVmdXRlZCBtZXNzYWdlLCBpbmRpY2F0ZWQgc2VuZGVyIFwiICtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLm1lc3NhZ2VQYXJzZWQubWV0YS5hY2NvdW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBtZXNzYWdlR2l2ZW4gPVxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLm1lc3NhZ2UgIT0gbnVsbCAmJiB0aGlzLnByb3BzLm1lc3NhZ2UgIT0gXCJcIjtcclxuICAgICAgICBsZXQgbm90aWZpY2F0aW9uR2l2ZW4gPVxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLm5vdGlmaWNhdGlvbiAmJiB0aGlzLnN0YXRlLm5vdGlmaWNhdGlvbiAhPSBcIlwiO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tjb2xvcjogXCJncmF5XCIsIG1hcmdpbjogXCIxMHB4IDEwcHhcIn19PlxyXG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUubWVzc2FnZVBhcnNlZCAhPSBudWxsICYmIChcclxuICAgICAgICAgICAgICAgICAgICA8ZmllbGRzZXQgc3R5bGU9e3tib3JkZXJDb2xvcjogYm9yZGVyQ29sb3J9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxlZ2VuZCBzdHlsZT17e2NvbG9yOiBcIndoaXRlXCIsIHdlaWdodDogXCJib2xkXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsZWdlbmRNZXNzYWdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xlZ2VuZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHByZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcInRhYmxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLm1lc3NhZ2VQYXJzZWQuY29udGVudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtub3RpZmljYXRpb25HaXZlbiAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJ0YWJsZS1jZWxsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcImNhbGMoMTAwJSAtIDMwcHgpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFwiY2FsYygxMDAlICsgMTVweClcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogXCIwcHhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBcIjMwcHhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDUwLDUwLDUwLDAuNSlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cIm92ZXJsYXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUubm90aWZpY2F0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wcmU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcInNtYWxsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IFwicmlnaHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2lnbmVkIG9uIHt0aGlzLnN0YXRlLm1lc3NhZ2VQYXJzZWQubWV0YS50aW1lc3RhbXB9e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogXCJzbWFsbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdDogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiBcIjBweCAwcHhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjNzc3XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3RvZ2dsZVJhd01lc3NhZ2UuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmI3gxZjUwZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnNob3dSYXdNZXNzYWdlICYmIDxiciAvPn1cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuc2hvd1Jhd01lc3NhZ2UgJiYgPGJyIC8+fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5zaG93UmF3TWVzc2FnZSAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCJjYWxjKDEwMCUpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiBcIjEwMDBweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cHJlPnt0aGlzLnN0YXRlLm1lc3NhZ2V9PC9wcmU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA8L2ZpZWxkc2V0PlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIHttZXNzYWdlR2l2ZW4gJiZcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLm1lc3NhZ2VQYXJzZWQgPT0gbnVsbCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxmaWVsZHNldCBzdHlsZT17e2JvcmRlckNvbG9yOiBcIiNGMDBcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxlZ2VuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7Y29sb3I6IFwicmVkXCIsIHdlaWdodDogXCJib2xkXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImVycm9yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcnJvciB3aGlsZSBwYXJzaW5nIG1lc3NhZ2UsIHBsZWFzZSBjaGVjayBzeW50YXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tIG1lc3NhZ2UgYmVsb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGVnZW5kPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHByZT57dGhpcy5wcm9wcy5tZXNzYWdlfTwvcHJlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2ZpZWxkc2V0PlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNpZ25lZE1lc3NhZ2U7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHtUYWJzLCBUYWJ9IGZyb20gXCIuLi9VdGlsaXR5L1RhYnNcIjtcclxuaW1wb3J0IGNvbnN0YW50cyBmcm9tIFwiY2hhaW4vYWNjb3VudF9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IEFjY291bnRTZWxlY3RvciBmcm9tIFwiLi4vQWNjb3VudC9BY2NvdW50U2VsZWN0b3JcIjtcclxuaW1wb3J0IEltbXV0YWJsZSBmcm9tIFwiaW1tdXRhYmxlXCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCBMaW5rVG9BY2NvdW50QnlJZCBmcm9tIFwiLi4vVXRpbGl0eS9MaW5rVG9BY2NvdW50QnlJZFwiO1xyXG5pbXBvcnQgV2FsbGV0QXBpIGZyb20gXCJhcGkvV2FsbGV0QXBpXCI7XHJcbmltcG9ydCBXYWxsZXREYiBmcm9tIFwic3RvcmVzL1dhbGxldERiLmpzXCI7XHJcblxyXG5jbGFzcyBBY2NvdW50Um93IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYWNjb3VudDogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnQuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIHRlbXBDb21wb25lbnQ6IFwidHJcIlxyXG4gICAgfTtcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHthY2NvdW50LCBvblJlbW92ZX0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICA8dGQ+e3RoaXMucHJvcHMuaW5kZXh9PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD57YWNjb3VudC5nZXQoXCJpZFwiKX08L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgIDxMaW5rVG9BY2NvdW50QnlJZCBhY2NvdW50PXthY2NvdW50LmdldChcImlkXCIpfSAvPlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIHtvblJlbW92ZSA/IChcclxuICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uUmVtb3ZlLmJpbmQodGhpcywgYWNjb3VudC5nZXQoXCJpZFwiKSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b24gb3V0bGluZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbW92ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5BY2NvdW50Um93ID0gQmluZFRvQ2hhaW5TdGF0ZShBY2NvdW50Um93KTtcclxuXHJcbmNsYXNzIEFjY291bnRMaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIF9vblJlbW92ZShsaXN0aW5nLCBhY2NvdW50LCBlKSB7XHJcbiAgICAgICAgaWYgKGFjY291bnQpIHtcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRTdGF0ZSA9IHRoaXMucHJvcHMuZ2V0Q3VycmVudFN0YXRlKGFjY291bnQpO1xyXG4gICAgICAgICAgICBsZXQgdHIgPSBXYWxsZXRBcGkubmV3X3RyYW5zYWN0aW9uKCk7XHJcbiAgICAgICAgICAgIHRyLmFkZF90eXBlX29wZXJhdGlvbihcImFjY291bnRfd2hpdGVsaXN0XCIsIHtcclxuICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICBhc3NldF9pZDogXCIxLjMuMFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXppbmdfYWNjb3VudDogdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudF90b19saXN0OiBhY2NvdW50LFxyXG4gICAgICAgICAgICAgICAgbmV3X2xpc3Rpbmc6IGN1cnJlbnRTdGF0ZSAtIGNvbnN0YW50cy5hY2NvdW50X2xpc3RpbmdbbGlzdGluZ11cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFdhbGxldERiLnByb2Nlc3NfdHJhbnNhY3Rpb24odHIsIG51bGwsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtyZW1vdmVCdXR0b24sIHdoaXRlLCBsaXN0fSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGxldCByb3dzID0gbGlzdFxyXG4gICAgICAgICAgICAubWFwKChhY2NvdW50LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFJvd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5fb25SZW1vdmUuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlID8gXCJ3aGl0ZV9saXN0ZWRcIiA6IFwiYmxhY2tfbGlzdGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleD17aW5kZXggKyAxfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudG9BcnJheSgpO1xyXG5cclxuICAgICAgICBsZXQgc2hvd0hlYWRlcnMgPSB0cnVlO1xyXG4gICAgICAgIGlmICghcm93cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc2hvd0hlYWRlcnMgPSBmYWxzZTtcclxuICAgICAgICAgICAgcm93cy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgPHRyIGtleT1cImVtcHR5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZzogXCIxcmVtIDBcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbFNwYW49e3JlbW92ZUJ1dHRvbiA/IDQgOiAzfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17dGhpcy5wcm9wcy5lbXB0eVRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwibmFtZVwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZSBjb21wYWN0IGRhc2hib2FyZC10YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAge3Nob3dIZWFkZXJzID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPiM8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuaWRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm5hbWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW1vdmVCdXR0b24gPyA8dGggLz4gOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgIDx0Ym9keT57cm93c308L3Rib2R5PlxyXG4gICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEFjY291bnRXaGl0ZWxpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgYWNjb3VudE5hbWU6IFwiXCIsXHJcbiAgICAgICAgICAgIGFjY291bnRUb0xpc3Q6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRDdXJyZW50U3RhdGUoaWQpIHtcclxuICAgICAgICBsZXQge2FjY291bnR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQgd2hpdGUgPSBhY2NvdW50LmdldChcIndoaXRlbGlzdGVkX2FjY291bnRzXCIpIHx8IEltbXV0YWJsZS5MaXN0KCk7XHJcbiAgICAgICAgbGV0IGJsYWNrID0gYWNjb3VudC5nZXQoXCJibGFja2xpc3RlZF9hY2NvdW50c1wiKSB8fCBJbW11dGFibGUuTGlzdCgpO1xyXG4gICAgICAgIGxldCBjdXJyZW50ID0gY29uc3RhbnRzLmFjY291bnRfbGlzdGluZy5ub19saXN0aW5nO1xyXG5cclxuICAgICAgICBpZiAod2hpdGUuaW5jbHVkZXMoaWQpKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgKz0gY29uc3RhbnRzLmFjY291bnRfbGlzdGluZy53aGl0ZV9saXN0ZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYmxhY2suaW5jbHVkZXMoaWQpKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgKz0gY29uc3RhbnRzLmFjY291bnRfbGlzdGluZy5ibGFja19saXN0ZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY3VycmVudDtcclxuICAgIH1cclxuXHJcbiAgICBfb25BZGQobGlzdGluZywgZSkge1xyXG4gICAgICAgIGxldCB7YWNjb3VudFRvTGlzdH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGxldCB7YWNjb3VudH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBsZXQgY3VycmVudFN0YXRlID0gdGhpcy5fZ2V0Q3VycmVudFN0YXRlKGFjY291bnRUb0xpc3QpO1xyXG5cclxuICAgICAgICBpZiAoYWNjb3VudFRvTGlzdCkge1xyXG4gICAgICAgICAgICBsZXQgdHIgPSBXYWxsZXRBcGkubmV3X3RyYW5zYWN0aW9uKCk7XHJcbiAgICAgICAgICAgIHRyLmFkZF90eXBlX29wZXJhdGlvbihcImFjY291bnRfd2hpdGVsaXN0XCIsIHtcclxuICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICBhc3NldF9pZDogXCIxLjMuMFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXppbmdfYWNjb3VudDogYWNjb3VudC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgIGFjY291bnRfdG9fbGlzdDogYWNjb3VudFRvTGlzdCxcclxuICAgICAgICAgICAgICAgIG5ld19saXN0aW5nOiBjdXJyZW50U3RhdGUgKyBjb25zdGFudHMuYWNjb3VudF9saXN0aW5nW2xpc3RpbmddXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBXYWxsZXREYi5wcm9jZXNzX3RyYW5zYWN0aW9uKHRyLCBudWxsLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uQWNjb3VudEZvdW5kKGFjY291bnQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImFjY291bnRGb3VuZDpcIiwgYWNjb3VudCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGFjY291bnROYW1lOiBhY2NvdW50ID8gYWNjb3VudC5nZXQoXCJuYW1lXCIpIDogbnVsbCxcclxuICAgICAgICAgICAgYWNjb3VudFRvTGlzdDogYWNjb3VudCA/IGFjY291bnQuZ2V0KFwiaWRcIikgOiBudWxsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uQWNjb3VudENoYW5nZWQoYWNjb3VudCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiYWNjb3VudCBjaGFuZ2VkOlwiLCBhY2NvdW50KTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgYWNjb3VudE5hbWU6IGFjY291bnQsXHJcbiAgICAgICAgICAgIGFjY291bnRUb0xpc3Q6IG51bGxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHthY2NvdW50fSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IHthY2NvdW50TmFtZX0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBhcHAtdGFibGVzIG5vLXBhZGRpbmdcIiByZWY9XCJhcHBUYWJsZXNcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBzbWFsbC0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1jb250YWluZXIgZ2VuZXJpYy1ib3JkZXJlZC1ib3hcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFjY291bnQtdGFic1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2xhc3M9XCJhY2NvdW50LW92ZXJ2aWV3IG5vLXBhZGRpbmcgYm9yZGVyZWQtaGVhZGVyIGNvbnRlbnQtYmxvY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZz1cIndoaXRlbGlzdFRhYlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50Q2xhc3M9XCJncmlkLWNvbnRlbnQgc2hyaW5rIHNtYWxsLXZlcnRpY2FsIG1lZGl1bS1ob3Jpem9udGFsIG5vLXBhZGRpbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQud2hpdGVsaXN0LnRpdGxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206IFwiMXJlbVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic21hbGwtMTJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50TGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5VGV4dD1cImFjY291bnQud2hpdGVsaXN0LmVtcHR5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEN1cnJlbnRTdGF0ZT17dGhpcy5fZ2V0Q3VycmVudFN0YXRlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmdldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2hpdGVsaXN0ZWRfYWNjb3VudHNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHx8IEltbXV0YWJsZS5MaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGU9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFhY2NvdW50LmdldChcIndoaXRlbGlzdGVkX2FjY291bnRzXCIpID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGxlYXNlIG5vdGUsIHdoaXRlbGlzdGluZyBpcyBub3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JraW5nIHlldCBkdWUgdG8gdW5yZXNvbHZlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQgaXNzdWUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZzogXCIycmVtIDBcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtcImFjY291bnQud2hpdGVsaXN0LmFkZFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lPXthY2NvdW50TmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY291bnRDaGFuZ2VkPXt0aGlzLl9vbkFjY291bnRGb3VuZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25BY2NvdW50Q2hhbmdlZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50TmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17Mn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjdGlvbj17dGhpcy5fb25BZGQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aGl0ZV9saXN0ZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uX2xhYmVsPVwiYWNjb3VudC5wZXJtLmNvbmZpcm1fYWRkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZT17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZWFoZWFkPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC53aGl0ZWxpc3QuYmxhY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIxcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzbWFsbC0xMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlUZXh0PVwiYWNjb3VudC53aGl0ZWxpc3QuZW1wdHlfYmxhY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Q3VycmVudFN0YXRlPXt0aGlzLl9nZXRDdXJyZW50U3RhdGUuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdD17YWNjb3VudC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYmxhY2tsaXN0ZWRfYWNjb3VudHNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e3BhZGRpbmc6IFwiMnJlbSAxcmVtXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC53aGl0ZWxpc3QuYWRkX2JsYWNrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU9e2FjY291bnROYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjb3VudENoYW5nZWQ9e3RoaXMuX29uQWNjb3VudEZvdW5kLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbkFjY291bnRDaGFuZ2VkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnROYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWN0aW9uPXt0aGlzLl9vbkFkZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJsYWNrX2xpc3RlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25fbGFiZWw9XCJhY2NvdW50LnBlcm0uY29uZmlybV9hZGRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVhaGVhZD17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQud2hpdGVsaXN0LndoaXRlX2J5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206IFwiMXJlbVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic21hbGwtMTJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50TGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5VGV4dD1cImFjY291bnQud2hpdGVsaXN0LmVtcHR5X3doaXRlX2J5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q9e2FjY291bnQuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndoaXRlbGlzdGluZ19hY2NvdW50c1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQud2hpdGVsaXN0LmJsYWNrX2J5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206IFwiMXJlbVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic21hbGwtMTJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50TGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5VGV4dD1cImFjY291bnQud2hpdGVsaXN0LmVtcHR5X2JsYWNrX2J5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q9e2FjY291bnQuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJsYWNrbGlzdGluZ19hY2NvdW50c1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBY2NvdW50V2hpdGVsaXN0O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBJbW11dGFibGUgZnJvbSBcImltbXV0YWJsZVwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBhY2NvdW50VXRpbHMgZnJvbSBcImNvbW1vbi9hY2NvdW50X3V0aWxzXCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZSwgRmV0Y2hDaGFpbk9iamVjdHN9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgV29ya2VyQXBwcm92YWwgZnJvbSBcIi4vV29ya2VyQXBwcm92YWxcIjtcclxuaW1wb3J0IFZvdGluZ0FjY291bnRzTGlzdCBmcm9tIFwiLi9Wb3RpbmdBY2NvdW50c0xpc3RcIjtcclxuaW1wb3J0IGNuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xyXG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IHtMaW5rfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5pbXBvcnQgQXBwbGljYXRpb25BcGkgZnJvbSBcImFwaS9BcHBsaWNhdGlvbkFwaVwiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuL0FjY291bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XHJcbmltcG9ydCBBc3NldE5hbWUgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXROYW1lXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IHtFcXVpdmFsZW50VmFsdWVDb21wb25lbnR9IGZyb20gXCIuLi9VdGlsaXR5L0VxdWl2YWxlbnRWYWx1ZUNvbXBvbmVudFwiO1xyXG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcclxuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XHJcblxyXG5jbGFzcyBBY2NvdW50Vm90aW5nIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgaW5pdGlhbEJ1ZGdldDogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIGdsb2JhbE9iamVjdDogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIHByb3h5OiBDaGFpblR5cGVzLkNoYWluQWNjb3VudC5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBcIjIuMC4wXCJcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgY29uc3QgcHJveHlJZCA9IHByb3BzLnByb3h5LmdldChcImlkXCIpO1xyXG4gICAgICAgIGNvbnN0IHByb3h5TmFtZSA9IHByb3BzLnByb3h5LmdldChcIm5hbWVcIik7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgcHJveHlfYWNjb3VudF9pZDogcHJveHlJZCA9PT0gXCIxLjIuNVwiID8gXCJcIiA6IHByb3h5SWQsIC8vXCIxLjIuMTZcIixcclxuICAgICAgICAgICAgcHJldl9wcm94eV9hY2NvdW50X2lkOiBwcm94eUlkID09PSBcIjEuMi41XCIgPyBcIlwiIDogcHJveHlJZCxcclxuICAgICAgICAgICAgY3VycmVudF9wcm94eV9pbnB1dDogcHJveHlJZCA9PT0gXCIxLjIuNVwiID8gXCJcIiA6IHByb3h5TmFtZSxcclxuICAgICAgICAgICAgd2l0bmVzc2VzOiBudWxsLFxyXG4gICAgICAgICAgICBjb21taXR0ZWU6IG51bGwsXHJcbiAgICAgICAgICAgIHZvdGVfaWRzOiBJbW11dGFibGUuU2V0KCksXHJcbiAgICAgICAgICAgIHByb3h5X3ZvdGVfaWRzOiBJbW11dGFibGUuU2V0KCksXHJcbiAgICAgICAgICAgIGxhc3RCdWRnZXRPYmplY3Q6IHByb3BzLmluaXRpYWxCdWRnZXQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgIHdvcmtlclRhYmxlSW5kZXg6IHByb3BzLnZpZXdTZXR0aW5ncy5nZXQoXCJ3b3JrZXJUYWJsZUluZGV4XCIsIDEpLFxyXG4gICAgICAgICAgICBhbGxfd2l0bmVzc2VzOiBJbW11dGFibGUuTGlzdCgpLFxyXG4gICAgICAgICAgICBhbGxfY29tbWl0dGVlOiBJbW11dGFibGUuTGlzdCgpXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm9uUHJveHlBY2NvdW50Rm91bmQgPSB0aGlzLm9uUHJveHlBY2NvdW50Rm91bmQuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uUHVibGlzaCA9IHRoaXMub25QdWJsaXNoLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vblJlc2V0ID0gdGhpcy5vblJlc2V0LmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5fZ2V0Vm90ZU9iamVjdHMgPSB0aGlzLl9nZXRWb3RlT2JqZWN0cy5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcclxuICAgICAgICBhY2NvdW50VXRpbHMuZ2V0RmluYWxGZWVBc3NldCh0aGlzLnByb3BzLmFjY291bnQsIFwiYWNjb3VudF91cGRhdGVcIik7XHJcbiAgICAgICAgQ2hhaW5TdG9yZS5mZXRjaEFsbFdvcmtlcnMoKTtcclxuICAgICAgICB0aGlzLmdldEJ1ZGdldE9iamVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlQWNjb3VudERhdGEodGhpcy5wcm9wcyk7XHJcbiAgICAgICAgdGhpcy5fZ2V0Vm90ZU9iamVjdHMoKTtcclxuICAgICAgICB0aGlzLl9nZXRWb3RlT2JqZWN0cyhcImNvbW1pdHRlZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5wKSB7XHJcbiAgICAgICAgaWYgKG5wLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudCkge1xyXG4gICAgICAgICAgICBjb25zdCBwcm94eUlkID0gbnAucHJveHkuZ2V0KFwiaWRcIik7XHJcbiAgICAgICAgICAgIGxldCBuZXdTdGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWQ6IHByb3h5SWQgPT09IFwiMS4yLjVcIiA/IFwiXCIgOiBwcm94eUlkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3ByZXZfcHJveHlfYWNjb3VudF9pZDogbmV3U3RhdGUucHJveHlfYWNjb3VudF9pZH0pO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFjY291bnREYXRhKG5wLCBuZXdTdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ2V0QnVkZ2V0T2JqZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQWNjb3VudERhdGEoe2FjY291bnR9LCBzdGF0ZSA9IHRoaXMuc3RhdGUpIHtcclxuICAgICAgICBsZXQge3Byb3h5X2FjY291bnRfaWR9ID0gc3RhdGU7XHJcbiAgICAgICAgY29uc3QgcHJveHkgPSBDaGFpblN0b3JlLmdldEFjY291bnQocHJveHlfYWNjb3VudF9pZCk7XHJcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBhY2NvdW50LmdldChcIm9wdGlvbnNcIik7XHJcbiAgICAgICAgbGV0IHByb3h5T3B0aW9ucyA9IHByb3h5ID8gcHJveHkuZ2V0KFwib3B0aW9uc1wiKSA6IG51bGw7XHJcbiAgICAgICAgLy8gbGV0IHByb3h5X2FjY291bnRfaWQgPSBwcm94eSA/IHByb3h5LmdldChcImlkXCIpIDogXCIxLjIuNVwiO1xyXG4gICAgICAgIGxldCBjdXJyZW50X3Byb3h5X2lucHV0ID0gcHJveHkgPyBwcm94eS5nZXQoXCJuYW1lXCIpIDogXCJcIjtcclxuICAgICAgICBpZiAocHJveHlfYWNjb3VudF9pZCA9PT0gXCIxLjIuNVwiKSB7XHJcbiAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWQgPSBcIlwiO1xyXG4gICAgICAgICAgICBjdXJyZW50X3Byb3h5X2lucHV0ID0gXCJcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2b3RlcyA9IG9wdGlvbnMuZ2V0KFwidm90ZXNcIik7XHJcbiAgICAgICAgbGV0IHZvdGVfaWRzID0gdm90ZXMudG9BcnJheSgpO1xyXG4gICAgICAgIGxldCB2aWRzID0gSW1tdXRhYmxlLlNldCh2b3RlX2lkcyk7XHJcbiAgICAgICAgQ2hhaW5TdG9yZS5nZXRPYmplY3RzQnlWb3RlSWRzKHZvdGVfaWRzKTtcclxuXHJcbiAgICAgICAgbGV0IHByb3h5UHJvbWlzZSA9IG51bGwsXHJcbiAgICAgICAgICAgIHByb3h5X3ZpZHMgPSBJbW11dGFibGUuU2V0KFtdKTtcclxuICAgICAgICBjb25zdCBoYXNQcm94eSA9IHByb3h5X2FjY291bnRfaWQgIT09IFwiMS4yLjVcIjtcclxuICAgICAgICBpZiAoaGFzUHJveHkgJiYgcHJveHlPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGxldCBwcm94eV92b3RlcyA9IHByb3h5T3B0aW9ucy5nZXQoXCJ2b3Rlc1wiKTtcclxuICAgICAgICAgICAgbGV0IHByb3h5X3ZvdGVfaWRzID0gcHJveHlfdm90ZXMudG9BcnJheSgpO1xyXG4gICAgICAgICAgICBwcm94eV92aWRzID0gSW1tdXRhYmxlLlNldChwcm94eV92b3RlX2lkcyk7XHJcbiAgICAgICAgICAgIENoYWluU3RvcmUuZ2V0T2JqZWN0c0J5Vm90ZUlkcyhwcm94eV92b3RlX2lkcyk7XHJcblxyXG4gICAgICAgICAgICBwcm94eVByb21pc2UgPSBGZXRjaENoYWluT2JqZWN0cyhcclxuICAgICAgICAgICAgICAgIENoYWluU3RvcmUuZ2V0T2JqZWN0QnlWb3RlSUQsXHJcbiAgICAgICAgICAgICAgICBwcm94eV92b3RlX2lkcyxcclxuICAgICAgICAgICAgICAgIDEwMDAwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIEZldGNoQ2hhaW5PYmplY3RzKENoYWluU3RvcmUuZ2V0T2JqZWN0QnlWb3RlSUQsIHZvdGVfaWRzLCAxMDAwMCksXHJcbiAgICAgICAgICAgIHByb3h5UHJvbWlzZVxyXG4gICAgICAgIF0pLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgW3ZvdGVfb2JqcywgcHJveHlfdm90ZV9vYmpzXSA9IHJlcztcclxuICAgICAgICAgICAgZnVuY3Rpb24gc29ydFZvdGVPYmplY3RzKG9iamVjdHMpIHtcclxuICAgICAgICAgICAgICAgIGxldCB3aXRuZXNzZXMgPSBuZXcgSW1tdXRhYmxlLkxpc3QoKTtcclxuICAgICAgICAgICAgICAgIGxldCBjb21taXR0ZWUgPSBuZXcgSW1tdXRhYmxlLkxpc3QoKTtcclxuICAgICAgICAgICAgICAgIGxldCB3b3JrZXJzID0gbmV3IEltbXV0YWJsZS5TZXQoKTtcclxuICAgICAgICAgICAgICAgIG9iamVjdHMuZm9yRWFjaChvYmogPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhY2NvdW50X2lkID0gb2JqLmdldChcImNvbW1pdHRlZV9tZW1iZXJfYWNjb3VudFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWNjb3VudF9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21taXR0ZWUgPSBjb21taXR0ZWUucHVzaChhY2NvdW50X2lkKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChhY2NvdW50X2lkID0gb2JqLmdldChcIndvcmtlcl9hY2NvdW50XCIpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyggXCJ3b3JrZXI6IFwiLCBvYmogKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHdvcmtlcnMgPSB3b3JrZXJzLmFkZChvYmouZ2V0KFwiaWRcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKGFjY291bnRfaWQgPSBvYmouZ2V0KFwid2l0bmVzc19hY2NvdW50XCIpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aXRuZXNzZXMgPSB3aXRuZXNzZXMucHVzaChhY2NvdW50X2lkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge3dpdG5lc3NlcywgY29tbWl0dGVlLCB3b3JrZXJzfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHt3aXRuZXNzZXMsIGNvbW1pdHRlZSwgd29ya2Vyc30gPSBzb3J0Vm90ZU9iamVjdHModm90ZV9vYmpzKTtcclxuICAgICAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgICAgIHdpdG5lc3NlczogcHJveHlfd2l0bmVzc2VzLFxyXG4gICAgICAgICAgICAgICAgY29tbWl0dGVlOiBwcm94eV9jb21taXR0ZWUsXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJzOiBwcm94eV93b3JrZXJzXHJcbiAgICAgICAgICAgIH0gPSBzb3J0Vm90ZU9iamVjdHMocHJveHlfdm90ZV9vYmpzIHx8IFtdKTtcclxuICAgICAgICAgICAgbGV0IHN0YXRlID0ge1xyXG4gICAgICAgICAgICAgICAgcHJveHlfYWNjb3VudF9pZCxcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRfcHJveHlfaW5wdXQsXHJcbiAgICAgICAgICAgICAgICB3aXRuZXNzZXM6IHdpdG5lc3NlcyxcclxuICAgICAgICAgICAgICAgIGNvbW1pdHRlZTogY29tbWl0dGVlLFxyXG4gICAgICAgICAgICAgICAgd29ya2Vyczogd29ya2VycyxcclxuICAgICAgICAgICAgICAgIHByb3h5X3dpdG5lc3NlczogcHJveHlfd2l0bmVzc2VzLFxyXG4gICAgICAgICAgICAgICAgcHJveHlfY29tbWl0dGVlOiBwcm94eV9jb21taXR0ZWUsXHJcbiAgICAgICAgICAgICAgICBwcm94eV93b3JrZXJzOiBwcm94eV93b3JrZXJzLFxyXG4gICAgICAgICAgICAgICAgdm90ZV9pZHM6IHZpZHMsXHJcbiAgICAgICAgICAgICAgICBwcm94eV92b3RlX2lkczogcHJveHlfdmlkcyxcclxuICAgICAgICAgICAgICAgIHByZXZfd2l0bmVzc2VzOiB3aXRuZXNzZXMsXHJcbiAgICAgICAgICAgICAgICBwcmV2X2NvbW1pdHRlZTogY29tbWl0dGVlLFxyXG4gICAgICAgICAgICAgICAgcHJldl93b3JrZXJzOiB3b3JrZXJzLFxyXG4gICAgICAgICAgICAgICAgcHJldl92b3RlX2lkczogdmlkc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpc0NoYW5nZWQocyA9IHRoaXMuc3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzLnByb3h5X2FjY291bnRfaWQgIT09IHMucHJldl9wcm94eV9hY2NvdW50X2lkIHx8XHJcbiAgICAgICAgICAgIHMud2l0bmVzc2VzICE9PSBzLnByZXZfd2l0bmVzc2VzIHx8XHJcbiAgICAgICAgICAgIHMuY29tbWl0dGVlICE9PSBzLnByZXZfY29tbWl0dGVlIHx8XHJcbiAgICAgICAgICAgICFJbW11dGFibGUuaXMocy52b3RlX2lkcywgcy5wcmV2X3ZvdGVfaWRzKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFZvdGVPYmplY3RzKHR5cGUgPSBcIndpdG5lc3Nlc1wiLCB2b3RlX2lkcykge1xyXG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5zdGF0ZVtgYWxsXyR7dHlwZX1gXTtcclxuICAgICAgICBjb25zdCBpc1dpdG5lc3MgPSB0eXBlID09PSBcIndpdG5lc3Nlc1wiO1xyXG4gICAgICAgIGxldCBsYXN0SWR4O1xyXG4gICAgICAgIGlmICghdm90ZV9pZHMpIHtcclxuICAgICAgICAgICAgdm90ZV9pZHMgPSBbXTtcclxuICAgICAgICAgICAgbGV0IGFjdGl2ZSA9IHRoaXMucHJvcHMuZ2xvYmFsT2JqZWN0XHJcbiAgICAgICAgICAgICAgICAuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgIGlzV2l0bmVzcyA/IFwiYWN0aXZlX3dpdG5lc3Nlc1wiIDogXCJhY3RpdmVfY29tbWl0dGVlX21lbWJlcnNcIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChhLnNwbGl0KFwiLlwiKVsyXSwgMTApIC1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoYi5zcGxpdChcIi5cIilbMl0sIDEwKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgbGFzdEFjdGl2ZSA9IGFjdGl2ZS5sYXN0KCkgfHwgYDEuJHtpc1dpdG5lc3MgPyBcIjZcIiA6IFwiNVwifS4xYDtcclxuICAgICAgICAgICAgbGFzdElkeCA9IHBhcnNlSW50KGxhc3RBY3RpdmUuc3BsaXQoXCIuXCIpWzJdLCAxMCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IGxhc3RJZHggKyAxMDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2b3RlX2lkcy5wdXNoKGAxLiR7aXNXaXRuZXNzID8gXCI2XCIgOiBcIjVcIn0uJHtpfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGFzdElkeCA9IHBhcnNlSW50KHZvdGVfaWRzW3ZvdGVfaWRzLmxlbmd0aCAtIDFdLnNwbGl0KFwiLlwiKVsyXSwgMTApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBGZXRjaENoYWluT2JqZWN0cyhDaGFpblN0b3JlLmdldE9iamVjdCwgdm90ZV9pZHMsIDUwMDAsIHt9KS50aGVuKFxyXG4gICAgICAgICAgICB2b3RlX29ianMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVtgYWxsXyR7dHlwZX1gXSA9IGN1cnJlbnQuY29uY2F0KFxyXG4gICAgICAgICAgICAgICAgICAgIEltbXV0YWJsZS5MaXN0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b3RlX29ianNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYSA9PiAhIWEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGEgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmdldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNXaXRuZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwid2l0bmVzc19hY2NvdW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJjb21taXR0ZWVfbWVtYmVyX2FjY291bnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEhdm90ZV9vYmpzW3ZvdGVfb2Jqcy5sZW5ndGggLSAxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlIGFyZSBtb3JlIHZhbGlkIHZvdGUgb2JqcywgZmV0Y2ggMTAgbW9yZVxyXG4gICAgICAgICAgICAgICAgICAgIHZvdGVfaWRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGxhc3RJZHggKyAxMTsgaSA8PSBsYXN0SWR4ICsgMjA7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b3RlX2lkcy5wdXNoKGAxLiR7aXNXaXRuZXNzID8gXCI2XCIgOiBcIjVcIn0uJHtpfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Vm90ZU9iamVjdHModHlwZSwgdm90ZV9pZHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlbW92ZVByb3h5ID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucHVibGlzaChudWxsKTtcclxuICAgIH07XHJcblxyXG4gICAgb25QdWJsaXNoKCkge1xyXG4gICAgICAgIHRoaXMucHVibGlzaCh0aGlzLnN0YXRlLnByb3h5X2FjY291bnRfaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1Ymxpc2gobmV3X3Byb3h5X2lkKSB7XHJcbiAgICAgICAgbGV0IHVwZGF0ZWRfYWNjb3VudCA9IHRoaXMucHJvcHMuYWNjb3VudC50b0pTKCk7XHJcbiAgICAgICAgbGV0IHVwZGF0ZU9iamVjdCA9IHthY2NvdW50OiB1cGRhdGVkX2FjY291bnQuaWR9O1xyXG4gICAgICAgIGxldCBuZXdfb3B0aW9ucyA9IHttZW1vX2tleTogdXBkYXRlZF9hY2NvdW50Lm9wdGlvbnMubWVtb19rZXl9O1xyXG4gICAgICAgIC8vIHVwZGF0ZWRfYWNjb3VudC5uZXdfb3B0aW9ucyA9IHVwZGF0ZWRfYWNjb3VudC5vcHRpb25zO1xyXG4gICAgICAgIG5ld19vcHRpb25zLnZvdGluZ19hY2NvdW50ID0gbmV3X3Byb3h5X2lkID8gbmV3X3Byb3h5X2lkIDogXCIxLjIuNVwiO1xyXG4gICAgICAgIG5ld19vcHRpb25zLm51bV93aXRuZXNzID0gdGhpcy5zdGF0ZS53aXRuZXNzZXMuc2l6ZTtcclxuICAgICAgICBuZXdfb3B0aW9ucy5udW1fY29tbWl0dGVlID0gdGhpcy5zdGF0ZS5jb21taXR0ZWUuc2l6ZTtcclxuXHJcbiAgICAgICAgdXBkYXRlT2JqZWN0Lm5ld19vcHRpb25zID0gbmV3X29wdGlvbnM7XHJcbiAgICAgICAgLy8gU2V0IGZlZSBhc3NldFxyXG4gICAgICAgIHVwZGF0ZU9iamVjdC5mZWUgPSB7XHJcbiAgICAgICAgICAgIGFtb3VudDogMCxcclxuICAgICAgICAgICAgYXNzZXRfaWQ6IGFjY291bnRVdGlscy5nZXRGaW5hbEZlZUFzc2V0KFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZF9hY2NvdW50LmlkLFxyXG4gICAgICAgICAgICAgICAgXCJhY2NvdW50X3VwZGF0ZVwiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBSZW1vdmUgdm90ZXMgZm9yIGV4cGlyZWQgd29ya2Vyc1xyXG4gICAgICAgIGxldCB7dm90ZV9pZHN9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBsZXQgd29ya2VycyA9IHRoaXMuX2dldFdvcmtlckFycmF5KCk7XHJcbiAgICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZVZvdGUobGlzdCwgdm90ZSkge1xyXG4gICAgICAgICAgICBpZiAobGlzdC5pbmNsdWRlcyh2b3RlKSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdCA9IGxpc3QuZGVsZXRlKHZvdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd29ya2Vycy5mb3JFYWNoKHdvcmtlciA9PiB7XHJcbiAgICAgICAgICAgIGlmICh3b3JrZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChuZXcgRGF0ZSh3b3JrZXIuZ2V0KFwid29ya19lbmRfZGF0ZVwiKSkgPD0gbm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm90ZV9pZHMgPSByZW1vdmVWb3RlKHZvdGVfaWRzLCB3b3JrZXIuZ2V0KFwidm90ZV9mb3JcIikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRFTVAgUmVtb3ZlIHZvdGVfYWdhaW5zdCBzaW5jZSB0aGV5J3JlIG5vIGxvbmdlciB1c2VkXHJcbiAgICAgICAgICAgICAgICB2b3RlX2lkcyA9IHJlbW92ZVZvdGUodm90ZV9pZHMsIHdvcmtlci5nZXQoXCJ2b3RlX2FnYWluc3RcIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN1Ym1pdCB2b3Rlc1xyXG4gICAgICAgIEZldGNoQ2hhaW5PYmplY3RzKFxyXG4gICAgICAgICAgICBDaGFpblN0b3JlLmdldFdpdG5lc3NCeUlkLFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLndpdG5lc3Nlcy50b0FycmF5KCksXHJcbiAgICAgICAgICAgIDQwMDBcclxuICAgICAgICApXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgd2l0bmVzc2VzX3ZvdGVfaWRzID0gcmVzLm1hcChvID0+IG8uZ2V0KFwidm90ZV9pZFwiKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSh3aXRuZXNzZXNfdm90ZV9pZHMpLFxyXG4gICAgICAgICAgICAgICAgICAgIEZldGNoQ2hhaW5PYmplY3RzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldENvbW1pdHRlZU1lbWJlckJ5SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuY29tbWl0dGVlLnRvQXJyYXkoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgNDAwMFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlT2JqZWN0Lm5ld19vcHRpb25zLnZvdGVzID0gcmVzWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChyZXNbMV0ubWFwKG8gPT4gby5nZXQoXCJ2b3RlX2lkXCIpKSlcclxuICAgICAgICAgICAgICAgICAgICAuY29uY2F0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b3RlX2lkc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihpZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkLnNwbGl0KFwiOlwiKVswXSA9PT0gXCIyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvQXJyYXkoKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYV9zcGxpdCA9IGEuc3BsaXQoXCI6XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYl9zcGxpdCA9IGIuc3BsaXQoXCI6XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGFfc3BsaXRbMV0sIDEwKSAtIHBhcnNlSW50KGJfc3BsaXRbMV0sIDEwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgQXBwbGljYXRpb25BcGkudXBkYXRlQWNjb3VudCh1cGRhdGVPYmplY3QpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlc2V0KCkge1xyXG4gICAgICAgIGxldCBzID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMucmVmcy52b3RpbmdfcHJveHkgJiZcclxuICAgICAgICAgICAgdGhpcy5yZWZzLnZvdGluZ19wcm94eS5yZWZzLmJvdW5kX2NvbXBvbmVudFxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgdGhpcy5yZWZzLnZvdGluZ19wcm94eS5yZWZzLmJvdW5kX2NvbXBvbmVudC5vblJlc2V0UHJveHkoKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwcm94eV9hY2NvdW50X2lkOiBzLnByZXZfcHJveHlfYWNjb3VudF9pZCxcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRfcHJveHlfaW5wdXQ6IHMucHJldl9wcm94eV9pbnB1dCxcclxuICAgICAgICAgICAgICAgIHdpdG5lc3Nlczogcy5wcmV2X3dpdG5lc3NlcyxcclxuICAgICAgICAgICAgICAgIGNvbW1pdHRlZTogcy5wcmV2X2NvbW1pdHRlZSxcclxuICAgICAgICAgICAgICAgIHdvcmtlcnM6IHMucHJldl93b3JrZXJzLFxyXG4gICAgICAgICAgICAgICAgdm90ZV9pZHM6IHMucHJldl92b3RlX2lkc1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFjY291bnREYXRhKHRoaXMucHJvcHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkFkZEl0ZW0oY29sbGVjdGlvbiwgaXRlbV9pZCkge1xyXG4gICAgICAgIGxldCBzdGF0ZSA9IHt9O1xyXG4gICAgICAgIHN0YXRlW2NvbGxlY3Rpb25dID0gdGhpcy5zdGF0ZVtjb2xsZWN0aW9uXS5wdXNoKGl0ZW1faWQpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVtb3ZlSXRlbShjb2xsZWN0aW9uLCBpdGVtX2lkKSB7XHJcbiAgICAgICAgbGV0IHN0YXRlID0ge307XHJcbiAgICAgICAgc3RhdGVbY29sbGVjdGlvbl0gPSB0aGlzLnN0YXRlW2NvbGxlY3Rpb25dLmZpbHRlcihpID0+IGkgIT09IGl0ZW1faWQpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlVm90ZXMoYWRkVm90ZXMsIHJlbW92ZVZvdGVzKSB7XHJcbiAgICAgICAgbGV0IHN0YXRlID0ge307XHJcbiAgICAgICAgc3RhdGUudm90ZV9pZHMgPSB0aGlzLnN0YXRlLnZvdGVfaWRzO1xyXG4gICAgICAgIGlmIChhZGRWb3Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgYWRkVm90ZXMuZm9yRWFjaCh2b3RlID0+IHtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnZvdGVfaWRzID0gc3RhdGUudm90ZV9pZHMuYWRkKHZvdGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlbW92ZVZvdGVzKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZVZvdGVzLmZvckVhY2godm90ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS52b3RlX2lkcyA9IHN0YXRlLnZvdGVfaWRzLmRlbGV0ZSh2b3RlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICB2YWxpZGF0ZUFjY291bnQoY29sbGVjdGlvbiwgYWNjb3VudCkge1xyXG4gICAgICAgIGlmICghYWNjb3VudCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgaWYgKGNvbGxlY3Rpb24gPT09IFwid2l0bmVzc2VzXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEZldGNoQ2hhaW5PYmplY3RzKFxyXG4gICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRXaXRuZXNzQnlJZCxcclxuICAgICAgICAgICAgICAgIFthY2NvdW50LmdldChcImlkXCIpXSxcclxuICAgICAgICAgICAgICAgIDMwMDBcclxuICAgICAgICAgICAgKS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzWzBdID8gbnVsbCA6IFwiTm90IGEgd2l0bmVzc1wiO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbGxlY3Rpb24gPT09IFwiY29tbWl0dGVlXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEZldGNoQ2hhaW5PYmplY3RzKFxyXG4gICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRDb21taXR0ZWVNZW1iZXJCeUlkLFxyXG4gICAgICAgICAgICAgICAgW2FjY291bnQuZ2V0KFwiaWRcIildLFxyXG4gICAgICAgICAgICAgICAgMzAwMFxyXG4gICAgICAgICAgICApLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNbMF0gPyBudWxsIDogXCJOb3QgYSBjb21taXR0ZWUgbWVtYmVyXCI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBvblByb3h5Q2hhbmdlKGN1cnJlbnRfcHJveHlfaW5wdXQpIHtcclxuICAgICAgICBsZXQgcHJveHlBY2NvdW50ID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGN1cnJlbnRfcHJveHlfaW5wdXQpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgIXByb3h5QWNjb3VudCB8fFxyXG4gICAgICAgICAgICAocHJveHlBY2NvdW50ICYmXHJcbiAgICAgICAgICAgICAgICBwcm94eUFjY291bnQuZ2V0KFwiaWRcIikgIT09IHRoaXMuc3RhdGUucHJveHlfYWNjb3VudF9pZClcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBwcm94eV9hY2NvdW50X2lkOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgcHJveHlfd2l0bmVzc2VzOiBJbW11dGFibGUuU2V0KCksXHJcbiAgICAgICAgICAgICAgICBwcm94eV9jb21taXR0ZWU6IEltbXV0YWJsZS5TZXQoKSxcclxuICAgICAgICAgICAgICAgIHByb3h5X3dvcmtlcnM6IEltbXV0YWJsZS5TZXQoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudF9wcm94eV9pbnB1dH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUHJveHlBY2NvdW50Rm91bmQocHJveHlfYWNjb3VudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3h5X2FjY291bnRfaWQgPSBwcm94eV9hY2NvdW50ID8gcHJveHlfYWNjb3VudC5nZXQoXCJpZFwiKSA6IFwiXCI7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucHJveHlfYWNjb3VudF9pZCAhPT0gcHJveHlfYWNjb3VudF9pZClcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm94eV9hY2NvdW50X2lkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQWNjb3VudERhdGEodGhpcy5wcm9wcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbGVhclByb3h5KCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBwcm94eV9hY2NvdW50X2lkOiBcIlwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRvdGFsVm90ZXMod29ya2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgcGFyc2VJbnQod29ya2VyLmdldChcInRvdGFsX3ZvdGVzX2ZvclwiKSwgMTApIC1cclxuICAgICAgICAgICAgcGFyc2VJbnQod29ya2VyLmdldChcInRvdGFsX3ZvdGVzX2FnYWluc3RcIiksIDEwKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QnVkZ2V0T2JqZWN0KCkge1xyXG4gICAgICAgIGxldCB7bGFzdEJ1ZGdldE9iamVjdH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGxldCBidWRnZXRPYmplY3Q7XHJcbiAgICAgICAgYnVkZ2V0T2JqZWN0ID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QobGFzdEJ1ZGdldE9iamVjdCk7XHJcbiAgICAgICAgbGV0IGlkSW5kZXggPSBwYXJzZUludChsYXN0QnVkZ2V0T2JqZWN0LnNwbGl0KFwiLlwiKVsyXSwgMTApO1xyXG4gICAgICAgIGlmIChidWRnZXRPYmplY3QpIHtcclxuICAgICAgICAgICAgbGV0IHRpbWVzdGFtcCA9IGJ1ZGdldE9iamVjdC5nZXQoXCJ0aW1lXCIpO1xyXG4gICAgICAgICAgICBpZiAoIS9aJC8udGVzdCh0aW1lc3RhbXApKSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXAgKz0gXCJaXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgICAgICAgICAvKiBVc2UgdGhlIGxhc3QgdmFsaWQgYnVkZ2V0IG9iamVjdCB0byBlc3RpbWF0ZSB0aGUgY3VycmVudCBidWRnZXQgb2JqZWN0IGlkLlxyXG4gICAgICAgICAgICAqKiBCdWRnZXQgb2JqZWN0cyBhcmUgY3JlYXRlZCBvbmNlIHBlciBob3VyXHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50SUQgPVxyXG4gICAgICAgICAgICAgICAgaWRJbmRleCArXHJcbiAgICAgICAgICAgICAgICBNYXRoLmZsb29yKFxyXG4gICAgICAgICAgICAgICAgICAgIChub3cgLSBuZXcgRGF0ZSh0aW1lc3RhbXApLmdldFRpbWUoKSkgLyAxMDAwIC8gNjAgLyA2MFxyXG4gICAgICAgICAgICAgICAgKSAtXHJcbiAgICAgICAgICAgICAgICAxO1xyXG4gICAgICAgICAgICBpZiAoaWRJbmRleCA+PSBjdXJyZW50SUQpIHJldHVybjtcclxuICAgICAgICAgICAgbGV0IG5ld0lEID0gXCIyLjEzLlwiICsgTWF0aC5tYXgoaWRJbmRleCwgY3VycmVudElEKTtcclxuICAgICAgICAgICAgbGV0IG5ld0lESW50ID0gcGFyc2VJbnQobmV3SUQuc3BsaXQoXCIuXCIpWzJdLCAxMCk7XHJcbiAgICAgICAgICAgIEZldGNoQ2hhaW5PYmplY3RzKFxyXG4gICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRPYmplY3QsXHJcbiAgICAgICAgICAgICAgICBbbmV3SURdLFxyXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAge31cclxuICAgICAgICAgICAgKS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgW2xib10gPSByZXM7XHJcbiAgICAgICAgICAgICAgICBpZiAobGJvID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG9iamVjdCBkb2VzIG5vdCBleGlzdCwgdGhlIGlkIHdhcyB0b28gaGlnaFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtsYXN0QnVkZ2V0T2JqZWN0OiBgMi4xMy4ke25ld0lESW50IC0gMX1gfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRCdWRnZXRPYmplY3RcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc1N0b3JlLnNldExhc3RCdWRnZXRPYmplY3QobmV3SUQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtsYXN0QnVkZ2V0T2JqZWN0OiBuZXdJRH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUaGUgb2JqZWN0IGRvZXMgbm90IGV4aXN0LCBkZWNyZW1lbnQgdGhlIElEXHJcbiAgICAgICAgICAgIGxldCBuZXdJRCA9IGAyLjEzLiR7aWRJbmRleCAtIDF9YDtcclxuICAgICAgICAgICAgRmV0Y2hDaGFpbk9iamVjdHMoXHJcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldE9iamVjdCxcclxuICAgICAgICAgICAgICAgIFtuZXdJRF0sXHJcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICB7fVxyXG4gICAgICAgICAgICApLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBbbGJvXSA9IHJlcztcclxuICAgICAgICAgICAgICAgIGlmIChsYm8gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgb2JqZWN0IGRvZXMgbm90IGV4aXN0LCB0aGUgaWQgd2FzIHRvbyBoaWdoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAge2xhc3RCdWRnZXRPYmplY3Q6IGAyLjEzLiR7aWRJbmRleCAtIDJ9YH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0QnVkZ2V0T2JqZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3NTdG9yZS5zZXRMYXN0QnVkZ2V0T2JqZWN0KG5ld0lEKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtsYXN0QnVkZ2V0T2JqZWN0OiBuZXdJRH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFdvcmtlckFycmF5KCkge1xyXG4gICAgICAgIGxldCB3b3JrZXJBcnJheSA9IFtdO1xyXG5cclxuICAgICAgICBDaGFpblN0b3JlLndvcmtlcnMuZm9yRWFjaCh3b3JrZXJJZCA9PiB7XHJcbiAgICAgICAgICAgIGxldCB3b3JrZXIgPSBDaGFpblN0b3JlLmdldE9iamVjdCh3b3JrZXJJZCwgZmFsc2UsIGZhbHNlKTtcclxuICAgICAgICAgICAgaWYgKHdvcmtlcikgd29ya2VyQXJyYXkucHVzaCh3b3JrZXIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gd29ya2VyQXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldFdvcmtlclRhYmxlSW5kZXgoaW5kZXgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgd29ya2VyVGFibGVJbmRleDogaW5kZXhcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHt3b3JrZXJUYWJsZUluZGV4LCBwcmV2X3Byb3h5X2FjY291bnRfaWR9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBjb25zdCBhY2NvdW50SGFzUHJveHkgPSAhIXByZXZfcHJveHlfYWNjb3VudF9pZDtcclxuICAgICAgICBsZXQgcHJlZmVycmVkVW5pdCA9IHRoaXMucHJvcHMuc2V0dGluZ3MuZ2V0KFwidW5pdFwiKSB8fCBcIjEuMy4wXCI7XHJcbiAgICAgICAgbGV0IGhhc1Byb3h5ID0gISF0aGlzLnN0YXRlLnByb3h5X2FjY291bnRfaWQ7IC8vIHRoaXMucHJvcHMuYWNjb3VudC5nZXRJbihbXCJvcHRpb25zXCIsIFwidm90aW5nX2FjY291bnRcIl0pICE9PSBcIjEuMi41XCI7XHJcbiAgICAgICAgbGV0IHB1Ymxpc2hfYnV0dG9uc19jbGFzcyA9IGNuYW1lcyhcImJ1dHRvblwiLCB7XHJcbiAgICAgICAgICAgIGRpc2FibGVkOiAhdGhpcy5pc0NoYW5nZWQoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCB7Z2xvYmFsT2JqZWN0fSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IGJ1ZGdldE9iamVjdDtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5sYXN0QnVkZ2V0T2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGJ1ZGdldE9iamVjdCA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KHRoaXMuc3RhdGUubGFzdEJ1ZGdldE9iamVjdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdG90YWxCdWRnZXQgPSAwO1xyXG4gICAgICAgIC8vIGxldCB1bnVzZWRCdWRnZXQgPSAwO1xyXG4gICAgICAgIGxldCB3b3JrZXJCdWRnZXQgPSBnbG9iYWxPYmplY3RcclxuICAgICAgICAgICAgPyBwYXJzZUludChcclxuICAgICAgICAgICAgICAgICAgZ2xvYmFsT2JqZWN0LmdldEluKFtcInBhcmFtZXRlcnNcIiwgXCJ3b3JrZXJfYnVkZ2V0X3Blcl9kYXlcIl0pLFxyXG4gICAgICAgICAgICAgICAgICAxMFxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgOiAwO1xyXG5cclxuICAgICAgICBpZiAoYnVkZ2V0T2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHdvcmtlckJ1ZGdldCA9IE1hdGgubWluKFxyXG4gICAgICAgICAgICAgICAgMjQgKiBidWRnZXRPYmplY3QuZ2V0SW4oW1wicmVjb3JkXCIsIFwid29ya2VyX2J1ZGdldFwiXSksXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJCdWRnZXRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdG90YWxCdWRnZXQgPSBNYXRoLm1pbihcclxuICAgICAgICAgICAgICAgIDI0ICogYnVkZ2V0T2JqZWN0LmdldEluKFtcInJlY29yZFwiLCBcIndvcmtlcl9idWRnZXRcIl0pLFxyXG4gICAgICAgICAgICAgICAgd29ya2VyQnVkZ2V0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBsZXQgd29ya2VyQXJyYXkgPSB0aGlzLl9nZXRXb3JrZXJBcnJheSgpO1xyXG5cclxuICAgICAgICBsZXQgdm90ZVRocmVzaG9sZCA9IDA7XHJcbiAgICAgICAgbGV0IHdvcmtlcnMgPSB3b3JrZXJBcnJheVxyXG4gICAgICAgICAgICAuZmlsdGVyKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoYS5nZXQoXCJ3b3JrX2VuZF9kYXRlXCIpICsgXCJaXCIpID4gbm93ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoYS5nZXQoXCJ3b3JrX2JlZ2luX2RhdGVcIikgKyBcIlpcIikgPD0gbm93XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFRvdGFsVm90ZXMoYikgLSB0aGlzLl9nZXRUb3RhbFZvdGVzKGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAubWFwKCh3b3JrZXIsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGFpbHlQYXkgPSBwYXJzZUludCh3b3JrZXIuZ2V0KFwiZGFpbHlfcGF5XCIpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICB3b3JrZXJCdWRnZXQgPSB3b3JrZXJCdWRnZXQgLSBkYWlseVBheTtcclxuICAgICAgICAgICAgICAgIGxldCB2b3RlcyA9XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLmdldChcInRvdGFsX3ZvdGVzX2ZvclwiKSAtXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLmdldChcInRvdGFsX3ZvdGVzX2FnYWluc3RcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAod29ya2VyQnVkZ2V0IDw9IDAgJiYgIXZvdGVUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2b3RlVGhyZXNob2xkID0gdm90ZXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHZvdGVUaHJlc2hvbGQgJiYgdm90ZXMgPCB2b3RlVGhyZXNob2xkKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxXb3JrZXJBcHByb3ZhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRVbml0PXtwcmVmZXJyZWRVbml0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN0PXt3b3JrZXJCdWRnZXQgKyBkYWlseVBheX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuaz17aW5kZXggKyAxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3dvcmtlci5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyPXt3b3JrZXIuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVfaWRzPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVbaGFzUHJveHkgPyBcInByb3h5X3ZvdGVfaWRzXCIgOiBcInZvdGVfaWRzXCJdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VWb3Rlcz17dGhpcy5vbkNoYW5nZVZvdGVzLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5PXtoYXNQcm94eX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdm90ZVRocmVzaG9sZD17dm90ZVRocmVzaG9sZH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihhID0+ICEhYSk7XHJcblxyXG4gICAgICAgIC8vIHVudXNlZEJ1ZGdldCA9IE1hdGgubWF4KDAsIHdvcmtlckJ1ZGdldCk7XHJcblxyXG4gICAgICAgIGxldCBuZXdXb3JrZXJzID0gd29ya2VyQXJyYXlcclxuICAgICAgICAgICAgLmZpbHRlcihhID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdm90ZXMgPVxyXG4gICAgICAgICAgICAgICAgICAgIGEuZ2V0KFwidG90YWxfdm90ZXNfZm9yXCIpIC0gYS5nZXQoXCJ0b3RhbF92b3Rlc19hZ2FpbnN0XCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAobmV3IERhdGUoYS5nZXQoXCJ3b3JrX2VuZF9kYXRlXCIpICsgXCJaXCIpID4gbm93ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVzIDwgdm90ZVRocmVzaG9sZCkgfHxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShhLmdldChcIndvcmtfYmVnaW5fZGF0ZVwiKSArIFwiWlwiKSA+IG5vd1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRUb3RhbFZvdGVzKGIpIC0gdGhpcy5fZ2V0VG90YWxWb3RlcyhhKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm1hcCgod29ya2VyLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gbGV0IGRhaWx5UGF5ID0gcGFyc2VJbnQod29ya2VyLmdldChcImRhaWx5X3BheVwiKSwgMTApO1xyXG4gICAgICAgICAgICAgICAgLy8gd29ya2VyQnVkZ2V0ID0gd29ya2VyQnVkZ2V0IC0gZGFpbHlQYXk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICA8V29ya2VyQXBwcm92YWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkVW5pdD17cHJlZmVycmVkVW5pdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdD17MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuaz17aW5kZXggKyAxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3dvcmtlci5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyPXt3b3JrZXIuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVfaWRzPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVbaGFzUHJveHkgPyBcInByb3h5X3ZvdGVfaWRzXCIgOiBcInZvdGVfaWRzXCJdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VWb3Rlcz17dGhpcy5vbkNoYW5nZVZvdGVzLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5PXtoYXNQcm94eX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdm90ZVRocmVzaG9sZD17dm90ZVRocmVzaG9sZH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBleHBpcmVkV29ya2VycyA9IHdvcmtlckFycmF5XHJcbiAgICAgICAgICAgIC5maWx0ZXIoYSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGEuZ2V0KFwid29ya19lbmRfZGF0ZVwiKSkgPD0gbm93O1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFRvdGFsVm90ZXMoYikgLSB0aGlzLl9nZXRUb3RhbFZvdGVzKGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAubWFwKCh3b3JrZXIsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgZGFpbHlQYXkgPSBwYXJzZUludCh3b3JrZXIuZ2V0KFwiZGFpbHlfcGF5XCIpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAvLyB3b3JrZXJCdWRnZXQgPSB3b3JrZXJCdWRnZXQgLSBkYWlseVBheTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxXb3JrZXJBcHByb3ZhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRVbml0PXtwcmVmZXJyZWRVbml0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN0PXswfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5rPXtpbmRleCArIDF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17d29ya2VyLmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXI9e3dvcmtlci5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdm90ZV9pZHM9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVtoYXNQcm94eSA/IFwicHJveHlfdm90ZV9pZHNcIiA6IFwidm90ZV9pZHNcIl1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZVZvdGVzPXt0aGlzLm9uQ2hhbmdlVm90ZXMuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJveHk9e2hhc1Byb3h5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b3RlVGhyZXNob2xkPXt2b3RlVGhyZXNob2xkfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGFjdGlvbkJ1dHRvbnMgPSAoXHJcbiAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKHB1Ymxpc2hfYnV0dG9uc19jbGFzcywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0aGlzLmlzQ2hhbmdlZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vblB1Ymxpc2h9XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezR9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5wdWJsaXNoXCIgLz5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XCJidXR0b24gXCIgKyBwdWJsaXNoX2J1dHRvbnNfY2xhc3N9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vblJlc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs4fVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5yZXNldFwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIHthY2NvdW50SGFzUHJveHkgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcImJ1dHRvblwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uUmVtb3ZlUHJveHl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs5fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnJlbW92ZV9wcm94eVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IHByb3h5SW5wdXQgPSAoXHJcbiAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiNTAlXCIsIG1heFdpZHRoOiAyNTAsIG1hcmdpbkJvdHRvbTogMTB9fVxyXG4gICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5zdGF0ZS5jdXJyZW50X3Byb3h5X2lucHV0fVxyXG4gICAgICAgICAgICAgICAgYWNjb3VudE5hbWU9e3RoaXMuc3RhdGUuY3VycmVudF9wcm94eV9pbnB1dH1cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uUHJveHlDaGFuZ2UuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgIG9uQWNjb3VudENoYW5nZWQ9e3RoaXMub25Qcm94eUFjY291bnRGb3VuZH1cclxuICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQudm90ZXMuc2V0X3Byb3h5XCIpfVxyXG4gICAgICAgICAgICAgICAgdG9vbHRpcD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICF0aGlzLnN0YXRlLnByb3h5X2FjY291bnRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcInRvb2x0aXAucHJveHlfc2VhcmNoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcInRvb2x0aXAucHJveHlfcmVtb3ZlXCJcclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICBoaWRlSW1hZ2VcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDogNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiA5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBoYXNQcm94eSA/IFwiXCIgOiBcIm5vbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPEljb24gbmFtZT1cImxvY2tlZFwiIHNpemU9XCIxeFwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiA1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICFoYXNQcm94eSA/IFwiXCIgOiBcIm5vbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89XCIvaGVscC92b3RpbmdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJxdWVzdGlvbi1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5xdWVzdGlvbl9jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cIjF4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgIDwvQWNjb3VudFNlbGVjdG9yPlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3dFeHBpcmVkID0gd29ya2VyVGFibGVJbmRleCA9PT0gMjtcclxuXHJcbiAgICAgICAgY29uc3Qgc2F2ZVRleHQgPSAoXHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlubGluZS1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0OiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogdGhpcy5pc0NoYW5nZWQoKSA/IFwidmlzaWJsZVwiIDogXCJoaWRkZW5cIixcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCJyZWRcIixcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiBcIjAuODVyZW1cIixcclxuICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogXCIwLjlyZW1cIlxyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5zYXZlX2ZpbmlzaFwiIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLWNvbnRhaW5lciBnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFic1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZz1cInZvdGluZ1RhYlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY2NvdW50LXRhYnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEFjdGl2ZVRhYj17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b25zPXtzYXZlVGV4dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNDbGFzcz1cImFjY291bnQtb3ZlcnZpZXcgbm8tcGFkZGluZyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJleHBsb3Jlci53aXRuZXNzZXMudGl0bGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y25hbWVzKFwiY29udGVudC1ibG9ja1wiKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLXNlbGVjdG9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogPExpbmsgdG89XCIvaGVscC92b3Rpbmcvd2l0bmVzc1wiPjxJY29uIG5hbWU9XCJxdWVzdGlvbi1jaXJjbGVcIiB0aXRsZT1cImljb25zLnF1ZXN0aW9uX2NpcmxjZVwiIC8+PC9MaW5rPiAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwcm94eUlucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0OiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogXCItMi41cmVtXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3Rpb25CdXR0b25zfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFZvdGluZ0FjY291bnRzTGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIndpdG5lc3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnZvdGVzLmFkZF93aXRuZXNzX2xhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zPXt0aGlzLnN0YXRlLmFsbF93aXRuZXNzZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUFjY291bnQ9e3RoaXMudmFsaWRhdGVBY2NvdW50LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndpdG5lc3Nlc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BZGRJdGVtPXt0aGlzLm9uQWRkSXRlbS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aXRuZXNzZXNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlSXRlbT17dGhpcy5vblJlbW92ZUl0ZW0uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2l0bmVzc2VzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17aGFzUHJveHkgPyAtMSA6IDJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1Byb3h5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwicHJveHlfd2l0bmVzc2VzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJ3aXRuZXNzZXNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhTZWxlY3Rvcj17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU9e2dsb2JhbE9iamVjdC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVfd2l0bmVzc2VzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm94eT17dGhpcy5zdGF0ZS5wcm94eV9hY2NvdW50X2lkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImV4cGxvcmVyLmNvbW1pdHRlZV9tZW1iZXJzLnRpdGxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NuYW1lcyhcImNvbnRlbnQtYmxvY2tcIil9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1zZWxlY3RvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIDxMaW5rIHRvPVwiL2hlbHAvdm90aW5nL2NvbW1pdHRlZVwiPjxJY29uIG5hbWU9XCJxdWVzdGlvbi1jaXJjbGVcIiB0aXRsZT1cImljb25zLnF1ZXN0aW9uX2NpcmxjZVwiIC8+PC9MaW5rPiAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwcm94eUlucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0OiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogXCItMi41cmVtXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3Rpb25CdXR0b25zfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Vm90aW5nQWNjb3VudHNMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY29tbWl0dGVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC52b3Rlcy5hZGRfY29tbWl0dGVlX2xhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zPXt0aGlzLnN0YXRlLmFsbF9jb21taXR0ZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUFjY291bnQ9e3RoaXMudmFsaWRhdGVBY2NvdW50LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbW1pdHRlZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BZGRJdGVtPXt0aGlzLm9uQWRkSXRlbS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb21taXR0ZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlSXRlbT17dGhpcy5vblJlbW92ZUl0ZW0uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29tbWl0dGVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17aGFzUHJveHkgPyAtMSA6IDN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1Byb3h5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwicHJveHlfY29tbWl0dGVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJjb21taXR0ZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhTZWxlY3Rvcj17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU9e2dsb2JhbE9iamVjdC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVfY29tbWl0dGVlX21lbWJlcnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5PXt0aGlzLnN0YXRlLnByb3h5X2FjY291bnRfaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC52b3Rlcy53b3JrZXJzX3Nob3J0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXItc2VsZWN0b3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Zsb2F0OiBcInJpZ2h0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPVwiL2NyZWF0ZS13b3JrZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLmNyZWF0ZV93b3JrZXJcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3RvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIDxMaW5rIHRvPVwiL2hlbHAvdm90aW5nL3dvcmtlclwiPjxJY29uIG5hbWU9XCJxdWVzdGlvbi1jaXJjbGVcIiB0aXRsZT1cImljb25zLnF1ZXN0aW9uX2NpcmxjZVwiIC8+PC9MaW5rPiAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdMZWZ0OiAxMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMoXCJpbmxpbmUtYmxvY2tcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmFjdGl2ZTogd29ya2VyVGFibGVJbmRleCAhPT0gMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3NldFdvcmtlclRhYmxlSW5kZXguYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnZvdGVzLm5ld1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291bnQ6IG5ld1dvcmtlcnMubGVuZ3RofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcImlubGluZS1ibG9ja1wiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlOiB3b3JrZXJUYWJsZUluZGV4ICE9PSAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fc2V0V29ya2VyVGFibGVJbmRleC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudm90ZXMuYWN0aXZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudDogd29ya2Vycy5sZW5ndGh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtleHBpcmVkV29ya2Vycy5sZW5ndGggPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaW5saW5lLWJsb2NrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aW5hY3RpdmU6ICFzaG93RXhwaXJlZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhc2hvd0V4cGlyZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX3NldFdvcmtlclRhYmxlSW5kZXguYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgpID0+IHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuZXhwaXJlZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ttYXJnaW5Ub3A6IFwiMnJlbVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cHJveHlJbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdDogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6IFwiLTIuNXJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWN0aW9uQnV0dG9uc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIHtzaG93RXhwaXJlZCA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e3BhZGRpbmdUb3A6IDEwLCBwYWRkaW5nQm90dG9tOiAyMH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLnRvdGFsX2J1ZGdldFwiIC8+OjwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3BhZGRpbmdMZWZ0OiAyMCwgdGV4dEFsaWduOiBcInJpZ2h0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO3tnbG9iYWxPYmplY3QgPyA8Rm9ybWF0dGVkQXNzZXQgYW1vdW50PXt0b3RhbEJ1ZGdldH0gYXNzZXQ9XCIxLjMuMFwiIGRlY2ltYWxPZmZzZXQ9ezV9Lz4gOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+Jm5ic3A7KHtnbG9iYWxPYmplY3QgPyA8RXF1aXZhbGVudFZhbHVlQ29tcG9uZW50IGZyb21Bc3NldD1cIjEuMy4wXCIgdG9Bc3NldD17cHJlZmVycmVkVW5pdH0gYW1vdW50PXt0b3RhbEJ1ZGdldH0vPiA6IG51bGx9KTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD48L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMudW51c2VkX2J1ZGdldFwiIC8+OjwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3BhZGRpbmdMZWZ0OiAyMCwgdGV4dEFsaWduOiBcInJpZ2h0XCJ9fT4ge2dsb2JhbE9iamVjdCA/IDxGb3JtYXR0ZWRBc3NldCBhbW91bnQ9e3VudXNlZEJ1ZGdldH0gYXNzZXQ9XCIxLjMuMFwiIGRlY2ltYWxPZmZzZXQ9ezV9Lz4gOiBudWxsfTwvdGQ+PC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+KX0gKi99XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZSBkYXNoYm9hcmQtdGFibGUgdGFibGUtaG92ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3dvcmtlclRhYmxlSW5kZXggPT09XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgPyBudWxsIDogd29ya2VyVGFibGVJbmRleCA9PT0gMCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbFNwYW49XCIzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMudGhyZXNob2xkXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjaW1hbE9mZnNldD17NX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXt2b3RlVGhyZXNob2xkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PVwiMS4zLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNvbFNwYW49XCIzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogXCJub25lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRyYW5zcGFyZW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xTcGFuPVwiNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLnRvdGFsX2J1ZGdldFwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3ByZWZlcnJlZFVuaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbFNwYW49XCIyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGUtY29sdW1uLXNtYWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2dsb2JhbE9iamVjdCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RXF1aXZhbGVudFZhbHVlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUFzc2V0PVwiMS4zLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0Fzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZlcnJlZFVuaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3RvdGFsQnVkZ2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cImhpZGUtY29sdW1uLXNtYWxsXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogXCJub25lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRyYW5zcGFyZW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7d29ya2VyVGFibGVJbmRleCA9PT0gMiA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMubGluZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwiY2VudGVyXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuaWRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5kZXNjcmlwdGlvblwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGUtY29sdW1uLXNtYWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMudG90YWxfdm90ZXNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3dvcmtlclRhYmxlSW5kZXggPT09IDAgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMubWlzc2luZ1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci53b3JrZXJzLnBlcmlvZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7d29ya2VyVGFibGVJbmRleCA9PT0gMiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlclRhYmxlSW5kZXggPT09IDAgPyBudWxsIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZS1jb2x1bW4tc21hbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLmZ1bmRpbmdcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRlLWNvbHVtbi1zbWFsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLmRhaWx5X3BheVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1RvcDogNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogXCIwLjhyZW1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3ByZWZlcnJlZFVuaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt3b3JrZXJUYWJsZUluZGV4ID09PSAyIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyVGFibGVJbmRleCA9PT0gMCA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLndpdG5lc3Nlcy5idWRnZXRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdUb3A6IDUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjAuOHJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtwcmVmZXJyZWRVbml0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLnRvZ2dsZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7d29ya2VyVGFibGVJbmRleCA9PT0gMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3V29ya2Vyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogd29ya2VyVGFibGVJbmRleCA9PT0gMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHdvcmtlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBleHBpcmVkV29ya2Vyc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbkFjY291bnRWb3RpbmcgPSBCaW5kVG9DaGFpblN0YXRlKEFjY291bnRWb3RpbmcpO1xyXG5cclxuY29uc3QgQnVkZ2V0T2JqZWN0V3JhcHBlciA9IHByb3BzID0+IHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPEFjY291bnRWb3RpbmdcclxuICAgICAgICAgICAgey4uLnByb3BzfVxyXG4gICAgICAgICAgICBpbml0aWFsQnVkZ2V0PXtTZXR0aW5nc1N0b3JlLmdldExhc3RCdWRnZXRPYmplY3QoKX1cclxuICAgICAgICAvPlxyXG4gICAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJ1ZGdldE9iamVjdFdyYXBwZXI7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XHJcbmltcG9ydCBGb3JtYXR0ZWRBc3NldCBmcm9tIFwiLi4vVXRpbGl0eS9Gb3JtYXR0ZWRBc3NldFwiO1xyXG5pbXBvcnQgTGlua1RvQWNjb3VudEJ5SWQgZnJvbSBcIi4uL1V0aWxpdHkvTGlua1RvQWNjb3VudEJ5SWRcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQge0VxdWl2YWxlbnRWYWx1ZUNvbXBvbmVudH0gZnJvbSBcIi4uL1V0aWxpdHkvRXF1aXZhbGVudFZhbHVlQ29tcG9uZW50XCI7XHJcbmltcG9ydCBJY29uIGZyb20gXCJjb21wb25lbnRzL0ljb24vSWNvblwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcblxyXG5jbGFzcyBXb3JrZXJBcHByb3ZhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIHdvcmtlcjogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIG9uQWRkVm90ZTogUHJvcFR5cGVzLmZ1bmMsIC8vLyBjYWxsZWQgd2l0aCB2b3RlIGlkIHRvIGFkZFxyXG4gICAgICAgIG9uUmVtb3ZlVm90ZTogUHJvcFR5cGVzLmZ1bmMsIC8vLyBjYWxsZWQgd2l0aCB2b3RlIGlkIHRvIHJlbW92ZVxyXG4gICAgICAgIHZvdGVfaWRzOiBQcm9wVHlwZXMub2JqZWN0IC8vLyBTZXQgb2YgaXRlbXMgY3VycmVudGx5IGJlaW5nIHZvdGVkIGZvclxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIHRlbXBDb21wb25lbnQ6IFwidHJcIlxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkFwcHJvdmUoKSB7XHJcbiAgICAgICAgbGV0IGFkZFZvdGVzID0gW10sXHJcbiAgICAgICAgICAgIHJlbW92ZVZvdGVzID0gW107XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZvdGVfaWRzLmhhcyh0aGlzLnByb3BzLndvcmtlci5nZXQoXCJ2b3RlX2FnYWluc3RcIikpKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZVZvdGVzLnB1c2godGhpcy5wcm9wcy53b3JrZXIuZ2V0KFwidm90ZV9hZ2FpbnN0XCIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5wcm9wcy52b3RlX2lkcy5oYXModGhpcy5wcm9wcy53b3JrZXIuZ2V0KFwidm90ZV9mb3JcIikpKSB7XHJcbiAgICAgICAgICAgIGFkZFZvdGVzLnB1c2godGhpcy5wcm9wcy53b3JrZXIuZ2V0KFwidm90ZV9mb3JcIikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZVZvdGVzKGFkZFZvdGVzLCByZW1vdmVWb3Rlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZWplY3QoKSB7XHJcbiAgICAgICAgbGV0IGFkZFZvdGVzID0gW10sXHJcbiAgICAgICAgICAgIHJlbW92ZVZvdGVzID0gW107XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZvdGVfaWRzLmhhcyh0aGlzLnByb3BzLndvcmtlci5nZXQoXCJ2b3RlX2FnYWluc3RcIikpKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZVZvdGVzLnB1c2godGhpcy5wcm9wcy53b3JrZXIuZ2V0KFwidm90ZV9hZ2FpbnN0XCIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZvdGVfaWRzLmhhcyh0aGlzLnByb3BzLndvcmtlci5nZXQoXCJ2b3RlX2ZvclwiKSkpIHtcclxuICAgICAgICAgICAgcmVtb3ZlVm90ZXMucHVzaCh0aGlzLnByb3BzLndvcmtlci5nZXQoXCJ2b3RlX2ZvclwiKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlVm90ZXMoYWRkVm90ZXMsIHJlbW92ZVZvdGVzKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtyYW5rfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IHdvcmtlciA9IHRoaXMucHJvcHMud29ya2VyLnRvSlMoKTtcclxuICAgICAgICBsZXQgdG90YWxfdm90ZXMgPSB3b3JrZXIudG90YWxfdm90ZXNfZm9yIC0gd29ya2VyLnRvdGFsX3ZvdGVzX2FnYWluc3Q7XHJcbiAgICAgICAgbGV0IGFwcHJvdmFsU3RhdGUgPSB0aGlzLnByb3BzLnZvdGVfaWRzLmhhcyh3b3JrZXIudm90ZV9mb3IpXHJcbiAgICAgICAgICAgID8gdHJ1ZVxyXG4gICAgICAgICAgICA6IHRoaXMucHJvcHMudm90ZV9pZHMuaGFzKHdvcmtlci52b3RlX2FnYWluc3QpXHJcbiAgICAgICAgICAgICAgICA/IGZhbHNlXHJcbiAgICAgICAgICAgICAgICA6IG51bGw7XHJcblxyXG4gICAgICAgIGxldCBmdW5kZWRQZXJjZW50ID0gMDtcclxuXHJcbiAgICAgICAgaWYgKHdvcmtlci5kYWlseV9wYXkgPCB0aGlzLnByb3BzLnJlc3QpIHtcclxuICAgICAgICAgICAgZnVuZGVkUGVyY2VudCA9IDEwMDtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucmVzdCA+IDApIHtcclxuICAgICAgICAgICAgZnVuZGVkUGVyY2VudCA9ICh0aGlzLnByb3BzLnJlc3QgLyB3b3JrZXIuZGFpbHlfcGF5KSAqIDEwMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzdGFydERhdGUgPSBjb3VudGVycGFydC5sb2NhbGl6ZShcclxuICAgICAgICAgICAgbmV3IERhdGUod29ya2VyLndvcmtfYmVnaW5fZGF0ZSArIFwiWlwiKSxcclxuICAgICAgICAgICAge3R5cGU6IFwiZGF0ZVwiLCBmb3JtYXQ6IFwic2hvcnRfY3VzdG9tXCJ9XHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgZW5kRGF0ZSA9IGNvdW50ZXJwYXJ0LmxvY2FsaXplKFxyXG4gICAgICAgICAgICBuZXcgRGF0ZSh3b3JrZXIud29ya19lbmRfZGF0ZSArIFwiWlwiKSxcclxuICAgICAgICAgICAge3R5cGU6IFwiZGF0ZVwiLCBmb3JtYXQ6IFwic2hvcnRfY3VzdG9tXCJ9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgbGV0IGlzRXhwaXJlZCA9IG5ldyBEYXRlKHdvcmtlci53b3JrX2VuZF9kYXRlICsgXCJaXCIpIDw9IG5vdztcclxuICAgICAgICBsZXQgaGFzU3RhcnRlZCA9IG5ldyBEYXRlKHdvcmtlci53b3JrX2JlZ2luX2RhdGUgKyBcIlpcIikgPD0gbm93O1xyXG4gICAgICAgIGxldCBpc1Byb3Bvc2VkID1cclxuICAgICAgICAgICAgKCFpc0V4cGlyZWQgJiYgdG90YWxfdm90ZXMgPCB0aGlzLnByb3BzLnZvdGVUaHJlc2hvbGQpIHx8XHJcbiAgICAgICAgICAgICFoYXNTdGFydGVkO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9e2FwcHJvdmFsU3RhdGUgPyBcIlwiIDogXCJ1bnN1cHBvcnRlZFwifT5cclxuICAgICAgICAgICAgICAgIHtpc0V4cGlyZWQgPyBudWxsIDogKFxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtyYW5rfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ3b3JrZXItaWRcIiBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICB7d29ya2VyLmlkfVxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwid29ya2VyLW5hbWVcIiBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlubGluZS1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ1JpZ2h0OiA1LCBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLCB0b3A6IC0xfX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlci51cmwgJiYgd29ya2VyLnVybC5pbmRleE9mKFwiLlwiKSAhPT0gLTFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJ2aXNpYmxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJoaWRkZW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9e3dvcmtlci51cmx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJzaGFyZVwiIHRpdGxlPVwiaWNvbnMuc2hhcmVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3dvcmtlci5uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtUb0FjY291bnRCeUlkIGFjY291bnQ9e3dvcmtlci53b3JrZXJfYWNjb3VudH0gLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fSBjbGFzc05hbWU9XCJoaWRlLWNvbHVtbi1zbWFsbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3RvdGFsX3ZvdGVzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD1cIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVjaW1hbE9mZnNldD17NX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgIHshaXNQcm9wb3NlZCA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e01hdGgubWF4KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy52b3RlVGhyZXNob2xkIC0gdG90YWxfdm90ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD1cIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2ltYWxPZmZzZXQ9ezV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgIHtzdGFydERhdGV9IC0ge2VuZERhdGV9XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgIHtpc0V4cGlyZWQgfHwgaXNQcm9wb3NlZCA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRlLWNvbHVtbi1zbWFsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihmdW5kZWRQZXJjZW50LCAyKX0lXHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fSBjbGFzc05hbWU9XCJoaWRlLWNvbHVtbi1zbWFsbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxFcXVpdmFsZW50VmFsdWVDb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tQXNzZXQ9XCIxLjMuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvQXNzZXQ9e3RoaXMucHJvcHMucHJlZmVycmVkVW5pdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXt3b3JrZXIuZGFpbHlfcGF5fVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgIHtpc0V4cGlyZWQgfHwgaXNQcm9wb3NlZCA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMucmVzdCA8PSAwID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIwLjAwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFcXVpdmFsZW50VmFsdWVDb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUFzc2V0PVwiMS4zLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvQXNzZXQ9e3RoaXMucHJvcHMucHJlZmVycmVkVW5pdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3RoaXMucHJvcHMucmVzdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY2xpY2thYmxlXCJcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5wcm94eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKSA9PiB7fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwcm92YWxTdGF0ZSA/IFwib25SZWplY3RcIiA6IFwib25BcHByb3ZlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIHshdGhpcy5wcm9wcy5wcm94eSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsU3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImNoZWNrbWFyay1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwibWludXMtY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbFN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJpY29ucy5jaGVja21hcmtfY2lyY2xlLmFwcHJvdmVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImljb25zLm1pbnVzX2NpcmNsZS5kaXNhcHByb3ZlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPEljb24gbmFtZT1cImxvY2tlZFwiIHRpdGxlPVwiaWNvbnMubG9ja2VkLmFjdGlvblwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQmluZFRvQ2hhaW5TdGF0ZShXb3JrZXJBcHByb3ZhbCk7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IEFjY291bnRTZWxlY3RvciBmcm9tIFwiLi9BY2NvdW50U2VsZWN0b3JcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEZvcm1hdHRlZEFzc2V0IGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZEFzc2V0XCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcclxuaW1wb3J0IExpbmtUb0FjY291bnRCeUlkIGZyb20gXCIuLi9VdGlsaXR5L0xpbmtUb0FjY291bnRCeUlkXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5pbXBvcnQgc2FuaXRpemUgZnJvbSBcInNhbml0aXplXCI7XHJcblxyXG5mdW5jdGlvbiBnZXRXaXRuZXNzT3JDb21taXR0ZWUodHlwZSwgYWNjdCkge1xyXG4gICAgbGV0IHVybCA9IFwiXCIsXHJcbiAgICAgICAgdm90ZXMgPSAwLFxyXG4gICAgICAgIGFjY291bnQ7XHJcbiAgICBpZiAodHlwZSA9PT0gXCJ3aXRuZXNzXCIpIHtcclxuICAgICAgICBhY2NvdW50ID0gQ2hhaW5TdG9yZS5nZXRXaXRuZXNzQnlJZChhY2N0LmdldChcImlkXCIpKTtcclxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJjb21taXR0ZWVcIikge1xyXG4gICAgICAgIGFjY291bnQgPSBDaGFpblN0b3JlLmdldENvbW1pdHRlZU1lbWJlckJ5SWQoYWNjdC5nZXQoXCJpZFwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdXJsID0gYWNjb3VudCA/IGFjY291bnQuZ2V0KFwidXJsXCIpIDogdXJsO1xyXG4gICAgdXJsID0gc2FuaXRpemUodXJsLCB7XHJcbiAgICAgICAgd2hpdGVMaXN0OiBbXSwgLy8gZW1wdHksIG1lYW5zIGZpbHRlciBvdXQgYWxsIHRhZ3NcclxuICAgICAgICBzdHJpcElnbm9yZVRhZzogdHJ1ZSAvLyBmaWx0ZXIgb3V0IGFsbCBIVE1MIG5vdCBpbiB0aGUgd2hpbGVsaXN0XHJcbiAgICB9KTtcclxuICAgIHZvdGVzID0gYWNjb3VudCA/IGFjY291bnQuZ2V0KFwidG90YWxfdm90ZXNcIikgOiB2b3RlcztcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdXJsLFxyXG4gICAgICAgIHZvdGVzLFxyXG4gICAgICAgIGlkOiBhY2NvdW50LmdldChcImlkXCIpXHJcbiAgICB9O1xyXG59XHJcblxyXG5jbGFzcyBBY2NvdW50SXRlbVJvdyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFjY291bnQ6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcclxuICAgICAgICBvbkFjdGlvbjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgbmV4dFByb3BzLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudCB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuYWN0aW9uICE9PSB0aGlzLnByb3BzLmFjdGlvbiB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuaXNBY3RpdmUgIT09IHRoaXMucHJvcHMuaXNBY3RpdmUgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLmlkeCAhPT0gdGhpcy5wcm9wcy5pZHggfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLnByb3h5ICE9PSB0aGlzLnByb3BzLnByb3h5XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkFjdGlvbihpdGVtX2lkKSB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5vbkFjdGlvbihpdGVtX2lkKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHthY2NvdW50LCB0eXBlLCBhY3Rpb24sIGlzQWN0aXZlfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IGl0ZW1faWQgPSBhY2NvdW50LmdldChcImlkXCIpO1xyXG5cclxuICAgICAgICBsZXQge3VybCwgdm90ZXN9ID0gZ2V0V2l0bmVzc09yQ29tbWl0dGVlKHR5cGUsIGFjY291bnQpO1xyXG5cclxuICAgICAgICBsZXQgbGluayA9XHJcbiAgICAgICAgICAgIHVybCAmJiB1cmwubGVuZ3RoID4gMCAmJiB1cmwuaW5kZXhPZihcImh0dHBcIikgPT09IC0xXHJcbiAgICAgICAgICAgICAgICA/IFwiaHR0cDovL1wiICsgdXJsXHJcbiAgICAgICAgICAgICAgICA6IHVybDtcclxuICAgICAgICBjb25zdCBpc1N1cHBvcnRlZCA9IGFjdGlvbiA9PT0gXCJyZW1vdmVcIjtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT17aXNTdXBwb3J0ZWQgPyBcIlwiIDogXCJ1bnN1cHBvcnRlZFwifT5cclxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX0+e3RoaXMucHJvcHMuaWR4ICsgMX08L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxMaW5rVG9BY2NvdW50QnlJZCBhY2NvdW50PXthY2NvdW50LmdldChcImlkXCIpfSAvPlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICB7bGluayAmJiBsaW5rLmluZGV4T2YoXCIuXCIpICE9PSAtMSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9e2xpbmt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJzaGFyZVwiIHRpdGxlPVwiaWNvbnMuc2hhcmVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3ZvdGVzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD1cIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVjaW1hbE9mZnNldD17NX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17YGFjY291bnQudm90ZXMuJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlID8gXCJhY3RpdmVfc2hvcnRcIiA6IFwiaW5hY3RpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17YHNldHRpbmdzLiR7aXNTdXBwb3J0ZWQgPyBcInllc1wiIDogXCJub1wifWB9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3RoaXMucHJvcHMucHJveHkgPyBcIlwiIDogXCJjbGlja2FibGVcIn1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5wcm94eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKSA9PiB7fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLm9uQWN0aW9uLmJpbmQodGhpcywgaXRlbV9pZClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgeyF0aGlzLnByb3BzLnByb3h5ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTdXBwb3J0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImNoZWNrbWFyay1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwibWludXMtY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1N1cHBvcnRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiaWNvbnMuY2hlY2ttYXJrX2NpcmNsZS55ZXNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiaWNvbnMubWludXNfY2lyY2xlLm5vXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8SWNvbiBuYW1lPVwibG9ja2VkXCIgdGl0bGU9XCJpY29ucy5sb2NrZWQuYWN0aW9uXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBWb3RpbmdBY2NvdW50c0xpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBpdGVtczogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdHNMaXN0LFxyXG4gICAgICAgIG9uQWRkSXRlbTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgICAgICBvblJlbW92ZUl0ZW06IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXHJcbiAgICAgICAgdmFsaWRhdGVBY2NvdW50OiBQcm9wVHlwZXMuZnVuYyxcclxuICAgICAgICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLCAvLyBhIHRyYW5zbGF0aW9uIGtleSBmb3IgdGhlIGxhYmVsLFxyXG4gICAgICAgIHBsYWNlaG9sZGVyOiBQcm9wVHlwZXMuc3RyaW5nLCAvLyB0aGUgcGxhY2Vob2xkZXIgdGV4dCB0byBiZSBkaXNwbGF5ZWQgd2hlbiB0aGVyZSBpcyBubyB1c2VyX2lucHV0XHJcbiAgICAgICAgdGFiSW5kZXg6IFByb3BUeXBlcy5udW1iZXIsIC8vIHRhYmluZGV4IHByb3BlcnR5IHRvIGJlIHBhc3NlZCB0byBpbnB1dCB0YWdcclxuICAgICAgICBhY3Rpb246IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICAgICAgd2l0aFNlbGVjdG9yOiBQcm9wVHlwZXMuYm9vbFxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIGFjdGlvbjogXCJyZW1vdmVcIixcclxuICAgICAgICB3aXRoU2VsZWN0b3I6IHRydWUsXHJcbiAgICAgICAgYXV0b3N1YnNjcmliZTogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRfaXRlbTogbnVsbCxcclxuICAgICAgICAgICAgaXRlbV9uYW1lX2lucHV0OiBcIlwiLFxyXG4gICAgICAgICAgICBlcnJvcjogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vbkl0ZW1DaGFuZ2UgPSB0aGlzLm9uSXRlbUNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub25JdGVtQWNjb3VudENoYW5nZSA9IHRoaXMub25JdGVtQWNjb3VudENoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub25BZGRJdGVtID0gdGhpcy5vbkFkZEl0ZW0uYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkl0ZW1DaGFuZ2UoaXRlbV9uYW1lX2lucHV0KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXRlbV9uYW1lX2lucHV0fSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25JdGVtQWNjb3VudENoYW5nZShzZWxlY3RlZF9pdGVtKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRfaXRlbSwgZXJyb3I6IG51bGx9KTtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRfaXRlbSAmJiB0aGlzLnByb3BzLnZhbGlkYXRlQWNjb3VudCkge1xyXG4gICAgICAgICAgICBsZXQgcmVzID0gdGhpcy5wcm9wcy52YWxpZGF0ZUFjY291bnQoc2VsZWN0ZWRfaXRlbSk7XHJcbiAgICAgICAgICAgIGlmIChyZXMgPT09IG51bGwpIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiByZXMgPT09IFwic3RyaW5nXCIpIHRoaXMuc2V0U3RhdGUoe2Vycm9yOiByZXN9KTtcclxuICAgICAgICAgICAgZWxzZSByZXMudGhlbihlcnJvciA9PiB0aGlzLnNldFN0YXRlKHtlcnJvcjogZXJyb3J9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQWRkSXRlbShpdGVtKSB7XHJcbiAgICAgICAgaWYgKCFpdGVtKSByZXR1cm47XHJcbiAgICAgICAgbGV0IG5leHRfc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkX2l0ZW06IG51bGwsXHJcbiAgICAgICAgICAgIGl0ZW1fbmFtZV9pbnB1dDogXCJcIixcclxuICAgICAgICAgICAgZXJyb3I6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUobmV4dF9zdGF0ZSk7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5vbkFkZEl0ZW0oaXRlbS5nZXQoXCJpZFwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5pdGVtcykgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIGxldCBpdGVtX3Jvd3MgPSB0aGlzLnByb3BzLml0ZW1zXHJcbiAgICAgICAgICAgIC5maWx0ZXIoaSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vaWYgKHRoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0KSByZXR1cm4gaS5nZXQoXCJuYW1lXCIpLmluZGV4T2YodGhpcy5zdGF0ZS5pdGVtX25hbWVfaW5wdXQpICE9PSAtMTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHt2b3RlczogYV92b3Rlc30gPSBnZXRXaXRuZXNzT3JDb21taXR0ZWUoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIGFcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBsZXQge3ZvdGVzOiBiX3ZvdGVzfSA9IGdldFdpdG5lc3NPckNvbW1pdHRlZShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgYlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGlmIChhX3ZvdGVzICE9PSBiX3ZvdGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGJfdm90ZXMsIDEwKSAtIHBhcnNlSW50KGFfdm90ZXMsIDEwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYS5nZXQoXCJuYW1lXCIpID4gYi5nZXQoXCJuYW1lXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEuZ2V0KFwibmFtZVwiKSA8IGIuZ2V0KFwibmFtZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5tYXAoKGksIGlkeCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFjdGlvbiA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zdXBwb3J0ZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnN1cHBvcnRlZC5pbmNsdWRlcyhpLmdldChcImlkXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwicmVtb3ZlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcImFkZFwiO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlzQWN0aXZlID0gdGhpcy5wcm9wcy5hY3RpdmUuaW5jbHVkZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0V2l0bmVzc09yQ29tbWl0dGVlKHRoaXMucHJvcHMudHlwZSwgaSkuaWRcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxBY2NvdW50SXRlbVJvd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZHg9e2lkeH1cclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpLmdldChcIm5hbWVcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2l9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9e3RoaXMucHJvcHMudHlwZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY3Rpb249e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uID09PSBcImFkZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLm9uQWRkSXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5wcm9wcy5vblJlbW92ZUl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkPXt0aGlzLnByb3BzLml0ZW1zLmluZGV4T2YoaSkgIT09IC0xfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb249e2FjdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBY3RpdmU9e2lzQWN0aXZlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm94eT17dGhpcy5wcm9wcy5wcm94eX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBlcnJvciA9IHRoaXMuc3RhdGUuZXJyb3I7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhZXJyb3IgJiZcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZF9pdGVtICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaXRlbXMuaW5kZXhPZih0aGlzLnN0YXRlLnNlbGVjdGVkX2l0ZW0pICE9PSAtMVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBlcnJvciA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQudm90ZXMuYWxyZWFkeVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBjdyA9IFtcIjEwJVwiLCBcIjIwJVwiLCBcIjQwJVwiLCBcIjIwJVwiLCBcIjEwJVwiXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLndpdGhTZWxlY3RvciA/IChcclxuICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWF4V2lkdGg6IFwiNjAwcHhcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0aGlzLnByb3BzLmxhYmVsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcj17ZXJyb3J9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0aGlzLnByb3BzLnBsYWNlaG9sZGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnN0YXRlLml0ZW1fbmFtZV9pbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU9e3RoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkl0ZW1DaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjb3VudENoYW5nZWQ9e3RoaXMub25JdGVtQWNjb3VudENoYW5nZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY3Rpb249e3RoaXMub25BZGRJdGVtfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25fbGFiZWw9XCJhY2NvdW50LnZvdGVzLmFkZF93aXRuZXNzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9e3RoaXMucHJvcHMudGFiSW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMudGl0bGUgJiYgaXRlbV9yb3dzLmxlbmd0aCA/IChcclxuICAgICAgICAgICAgICAgICAgICA8aDQ+e3RoaXMucHJvcHMudGl0bGV9PC9oND5cclxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAge2l0ZW1fcm93cy5sZW5ndGggPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGRhc2hib2FyZC10YWJsZSB0YWJsZS1ob3ZlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fT4jPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwiLCBtYXhXaWR0aDogY3dbMV19fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5uYW1lXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e21heFdpZHRoOiBjd1syXX19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLmFib3V0XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e21heFdpZHRoOiBjd1szXX19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLnZvdGVzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e21heFdpZHRoOiBjd1s0XX19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLnN0YXR1cy50aXRsZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3ttYXhXaWR0aDogY3dbMF19fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5zdXBwb3J0ZWRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7bWF4V2lkdGg6IGN3WzVdfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMudG9nZ2xlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PntpdGVtX3Jvd3N9PC90Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJpbmRUb0NoYWluU3RhdGUoVm90aW5nQWNjb3VudHNMaXN0KTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IEltbXV0YWJsZSBmcm9tIFwiaW1tdXRhYmxlXCI7XG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XG5pbXBvcnQgVG90YWxCYWxhbmNlVmFsdWUgZnJvbSBcIi4uL1V0aWxpdHkvVG90YWxCYWxhbmNlVmFsdWVcIjtcbmltcG9ydCBBc3NldE5hbWUgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXROYW1lXCI7XG5pbXBvcnQgQXNzZXRJbWFnZSBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldEltYWdlXCI7XG5pbXBvcnQgTWFyZ2luUG9zaXRpb25zIGZyb20gXCIuL01hcmdpblBvc2l0aW9uc1wiO1xuaW1wb3J0IHtSZWNlbnRUcmFuc2FjdGlvbnN9IGZyb20gXCIuL1JlY2VudFRyYW5zYWN0aW9uc1wiO1xuaW1wb3J0IFByb3Bvc2FscyBmcm9tIFwiY29tcG9uZW50cy9BY2NvdW50L1Byb3Bvc2Fsc1wiO1xuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcbmltcG9ydCBTZXR0aW5nc0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvU2V0dGluZ3NBY3Rpb25zXCI7XG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xuaW1wb3J0IHtUYWJzLCBUYWJ9IGZyb20gXCIuLi9VdGlsaXR5L1RhYnNcIjtcbmltcG9ydCBBY2NvdW50T3JkZXJzIGZyb20gXCIuL0FjY291bnRPcmRlcnNcIjtcbmltcG9ydCBjbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmltcG9ydCBUcmFuc2xhdGVXaXRoTGlua3MgZnJvbSBcIi4uL1V0aWxpdHkvVHJhbnNsYXRlV2l0aExpbmtzXCI7XG5pbXBvcnQge2NoZWNrTWFyZ2luU3RhdHVzfSBmcm9tIFwiY29tbW9uL2FjY291bnRIZWxwZXJcIjtcbmltcG9ydCBCYWxhbmNlV3JhcHBlciBmcm9tIFwiLi9CYWxhbmNlV3JhcHBlclwiO1xuaW1wb3J0IEFjY291bnRUcmVlbWFwIGZyb20gXCIuL0FjY291bnRUcmVlbWFwXCI7XG5pbXBvcnQgQXNzZXRXcmFwcGVyIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0V3JhcHBlclwiO1xuaW1wb3J0IEFjY291bnRQb3J0Zm9saW9MaXN0IGZyb20gXCIuL0FjY291bnRQb3J0Zm9saW9MaXN0XCI7XG5pbXBvcnQge1N3aXRjaH0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xuaW1wb3J0IHtUb29sdGlwfSBmcm9tIFwiYW50ZFwiO1xuXG5jbGFzcyBBY2NvdW50T3ZlcnZpZXcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzb3J0S2V5OiBwcm9wcy52aWV3U2V0dGluZ3MuZ2V0KFwicG9ydGZvbGlvU29ydFwiLCBcInRvdGFsVmFsdWVcIiksXG4gICAgICAgICAgICBzb3J0RGlyZWN0aW9uOiBwcm9wcy52aWV3U2V0dGluZ3MuZ2V0KFxuICAgICAgICAgICAgICAgIFwicG9ydGZvbGlvU29ydERpcmVjdGlvblwiLFxuICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICksIC8vIGFscGhhYmV0aWNhbCBBIC0+IEIsIG51bWJlcnMgaGlnaCB0byBsb3dcbiAgICAgICAgICAgIHNob3duQXNzZXRzOiBwcm9wcy52aWV3U2V0dGluZ3MuZ2V0KFwic2hvd25Bc3NldHNcIiwgXCJhY3RpdmVcIiksXG4gICAgICAgICAgICBhbHdheXNTaG93QXNzZXRzOiBbXG4gICAgICAgICAgICAgICAgXCJCVFNcIlxuICAgICAgICAgICAgICAgIC8vIFwiVVNEXCIsXG4gICAgICAgICAgICAgICAgLy8gXCJDTllcIixcbiAgICAgICAgICAgICAgICAvLyBcIk9QRU4uQlRDXCIsXG4gICAgICAgICAgICAgICAgLy8gXCJPUEVOLlVTRFRcIixcbiAgICAgICAgICAgICAgICAvLyBcIk9QRU4uRVRIXCIsXG4gICAgICAgICAgICAgICAgLy8gXCJPUEVOLk1BSURcIixcbiAgICAgICAgICAgICAgICAvLyBcIk9QRU4uU1RFRU1cIixcbiAgICAgICAgICAgICAgICAvLyBcIk9QRU4uREFTSFwiXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaGlkZUZpc2hpbmdQcm9wb3NhbHM6IHRydWVcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9oYW5kbGVGaWx0ZXJJbnB1dCA9IHRoaXMuX2hhbmRsZUZpbHRlcklucHV0LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgX2hhbmRsZUZpbHRlcklucHV0KGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGZpbHRlclZhbHVlOiBlLnRhcmdldC52YWx1ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrTWFyZ2luU3RhdHVzKCk7XG4gICAgfVxuXG4gICAgX2NoZWNrTWFyZ2luU3RhdHVzKHByb3BzID0gdGhpcy5wcm9wcykge1xuICAgICAgICBjaGVja01hcmdpblN0YXR1cyhwcm9wcy5hY2NvdW50KS50aGVuKHN0YXR1cyA9PiB7XG4gICAgICAgICAgICBsZXQgZ2xvYmFsTWFyZ2luU3RhdHVzID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAobGV0IGFzc2V0IGluIHN0YXR1cykge1xuICAgICAgICAgICAgICAgIGdsb2JhbE1hcmdpblN0YXR1cyA9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1thc3NldF0uc3RhdHVzQ2xhc3MgfHwgZ2xvYmFsTWFyZ2luU3RhdHVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Z2xvYmFsTWFyZ2luU3RhdHVzfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobnApIHtcbiAgICAgICAgaWYgKG5wLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudCkge1xuICAgICAgICAgICAgdGhpcy5fY2hlY2tNYXJnaW5TdGF0dXMobnApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobmV4dFByb3BzLmJhbGFuY2VzLCB0aGlzLnByb3BzLmJhbGFuY2VzKSB8fFxuICAgICAgICAgICAgbmV4dFByb3BzLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudCB8fFxuICAgICAgICAgICAgbmV4dFByb3BzLnNldHRpbmdzICE9PSB0aGlzLnByb3BzLnNldHRpbmdzIHx8XG4gICAgICAgICAgICBuZXh0UHJvcHMuaGlkZGVuQXNzZXRzICE9PSB0aGlzLnByb3BzLmhpZGRlbkFzc2V0cyB8fFxuICAgICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KG5leHRTdGF0ZSwgdGhpcy5zdGF0ZSkgfHxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZmlsdGVyVmFsdWUgIT09IG5leHRTdGF0ZS5maWx0ZXJWYWx1ZVxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9jaGFuZ2VTaG93bkFzc2V0cyhzaG93bkFzc2V0cyA9IFwiYWN0aXZlXCIpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93bkFzc2V0c1xuICAgICAgICB9KTtcbiAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcbiAgICAgICAgICAgIHNob3duQXNzZXRzXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF90b2dnbGVIaWRlUHJvcG9zYWwoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaGlkZUZpc2hpbmdQcm9wb3NhbHM6ICF0aGlzLnN0YXRlLmhpZGVGaXNoaW5nUHJvcG9zYWxzXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF90b2dnbGVTb3J0T3JkZXIoa2V5KSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNvcnRLZXkgPT09IGtleSkge1xuICAgICAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcbiAgICAgICAgICAgICAgICBwb3J0Zm9saW9Tb3J0RGlyZWN0aW9uOiAhdGhpcy5zdGF0ZS5zb3J0RGlyZWN0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHNvcnREaXJlY3Rpb246ICF0aGlzLnN0YXRlLnNvcnREaXJlY3Rpb25cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcbiAgICAgICAgICAgICAgICBwb3J0Zm9saW9Tb3J0OiBrZXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc29ydERpcmVjdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgc29ydEtleToga2V5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEhlYWRlcigpIHtcbiAgICAgICAgbGV0IHtzZXR0aW5nc30gPSB0aGlzLnByb3BzO1xuICAgICAgICBsZXQge3Nob3duQXNzZXRzfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgY29uc3QgcHJlZmVycmVkVW5pdCA9XG4gICAgICAgICAgICBzZXR0aW5ncy5nZXQoXCJ1bml0XCIpIHx8IHRoaXMucHJvcHMuY29yZV9hc3NldC5nZXQoXCJzeW1ib2xcIik7XG4gICAgICAgIGNvbnN0IHNob3dBc3NldFBlcmNlbnQgPSBzZXR0aW5ncy5nZXQoXCJzaG93QXNzZXRQZXJjZW50XCIsIGZhbHNlKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcImNsaWNrYWJsZSBpcy1zb3J0YWJsZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImlzLWFjdGl2ZVwiOiB0aGlzLnN0YXRlLnNvcnRLZXkgPT09IFwiYWxwaGFiZXRpY1wiXG4gICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90b2dnbGVTb3J0T3JkZXIuYmluZCh0aGlzLCBcImFscGhhYmV0aWNcIil9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbXBvbmVudD1cInNwYW5cIiBjb250ZW50PVwiYWNjb3VudC5hc3NldFwiIC8+XG4gICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICA8dGhcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fdG9nZ2xlU29ydE9yZGVyLmJpbmQodGhpcywgXCJxdHlcIil9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFwiY2xpY2thYmxlIGlzLXNvcnRhYmxlXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaXMtYWN0aXZlXCI6IHRoaXMuc3RhdGUuc29ydEtleSA9PT0gXCJxdHlcIlxuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnF0eVwiIC8+XG4gICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICA8dGhcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fdG9nZ2xlU29ydE9yZGVyLmJpbmQodGhpcywgXCJwcmljZVZhbHVlXCIpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sdW1uLWhpZGUtc21hbGwgY2xpY2thYmxlIGlzLXNvcnRhYmxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XCJpcy1hY3RpdmVcIjogdGhpcy5zdGF0ZS5zb3J0S2V5ID09PSBcInByaWNlVmFsdWVcIn1cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5wcmljZVwiIC8+IChcbiAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBuYW1lPXtwcmVmZXJyZWRVbml0fSBub1RpcCAvPilcbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90b2dnbGVTb3J0T3JkZXIuYmluZCh0aGlzLCBcImNoYW5nZVZhbHVlXCIpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sdW1uLWhpZGUtc21hbGwgY2xpY2thYmxlIGlzLXNvcnRhYmxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XCJpcy1hY3RpdmVcIjogdGhpcy5zdGF0ZS5zb3J0S2V5ID09PSBcImNoYW5nZVZhbHVlXCJ9XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5ob3VyXzI0X3Nob3J0XCIgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90b2dnbGVTb3J0T3JkZXIuYmluZCh0aGlzLCBcInRvdGFsVmFsdWVcIil9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sdW1uLWhpZGUtc21hbGwgY2xpY2thYmxlIGlzLXNvcnRhYmxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XCJpcy1hY3RpdmVcIjogdGhpcy5zdGF0ZS5zb3J0S2V5ID09PSBcInRvdGFsVmFsdWVcIn1cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVXaXRoTGlua3NcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vTGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nPVwiYWNjb3VudC5lcV92YWx1ZV9oZWFkZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5cz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcHJlZmVycmVkVW5pdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnOiBcImFzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgbm9UaXBcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIHtzaG93QXNzZXRQZXJjZW50ID8gKFxuICAgICAgICAgICAgICAgICAgICA8dGhcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcInJpZ2h0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29tcG9uZW50PVwic3BhblwiIGNvbnRlbnQ9XCJhY2NvdW50LnBlcmNlbnRcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiaGVhZGVyLnBheW1lbnRzXCIgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UuYnV5XCIgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwibW9kYWwuZGVwb3NpdC5zdWJtaXRcIiAvPlxuICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJtb2RhbC53aXRoZHJhdy5zdWJtaXRcIiAvPlxuICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnRyYWRlXCIgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UuYm9ycm93X3Nob3J0XCIgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5zZXR0bGVcIiAvPlxuICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cIm1vZGFsLnJlc2VydmUuc3VibWl0XCIgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiPlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93bkFzc2V0cyA9PSBcImFjdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJleGNoYW5nZS5oaWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImFjY291bnQucGVybS5zaG93XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7YWNjb3VudCwgaGlkZGVuQXNzZXRzLCBzZXR0aW5ncywgb3JkZXJzfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB7c2hvd25Bc3NldHN9ID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJlZmVycmVkVW5pdCA9XG4gICAgICAgICAgICBzZXR0aW5ncy5nZXQoXCJ1bml0XCIpIHx8IHRoaXMucHJvcHMuY29yZV9hc3NldC5nZXQoXCJzeW1ib2xcIik7XG5cbiAgICAgICAgbGV0IGNhbGxfb3JkZXJzID0gW10sXG4gICAgICAgICAgICBjb2xsYXRlcmFsID0ge30sXG4gICAgICAgICAgICBkZWJ0ID0ge307XG5cbiAgICAgICAgaWYgKGFjY291bnQudG9KUyAmJiBhY2NvdW50LmhhcyhcImNhbGxfb3JkZXJzXCIpKVxuICAgICAgICAgICAgY2FsbF9vcmRlcnMgPSBhY2NvdW50LmdldChcImNhbGxfb3JkZXJzXCIpLnRvSlMoKTtcbiAgICAgICAgbGV0IGluY2x1ZGVkUG9ydGZvbGlvTGlzdCwgaGlkZGVuUG9ydGZvbGlvTGlzdDtcbiAgICAgICAgbGV0IGFjY291bnRfYmFsYW5jZXMgPSBhY2NvdW50LmdldChcImJhbGFuY2VzXCIpO1xuICAgICAgICBsZXQgaW5jbHVkZWRCYWxhbmNlc0xpc3QgPSBJbW11dGFibGUuTGlzdCgpLFxuICAgICAgICAgICAgaGlkZGVuQmFsYW5jZXNMaXN0ID0gSW1tdXRhYmxlLkxpc3QoKTtcbiAgICAgICAgY2FsbF9vcmRlcnMuZm9yRWFjaChjYWxsSUQgPT4ge1xuICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QoY2FsbElEKTtcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIGxldCBjb2xsYXRlcmFsQXNzZXQgPSBwb3NpdGlvbi5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgIFwiY2FsbF9wcmljZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImJhc2VcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgaWYgKCFjb2xsYXRlcmFsW2NvbGxhdGVyYWxBc3NldF0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGF0ZXJhbFtjb2xsYXRlcmFsQXNzZXRdID0gcGFyc2VJbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi5nZXQoXCJjb2xsYXRlcmFsXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgMTBcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2xsYXRlcmFsW2NvbGxhdGVyYWxBc3NldF0gKz0gcGFyc2VJbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi5nZXQoXCJjb2xsYXRlcmFsXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgMTBcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGRlYnRBc3NldCA9IHBvc2l0aW9uLmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgXCJjYWxsX3ByaWNlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwicXVvdGVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgaWYgKCFkZWJ0W2RlYnRBc3NldF0pIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidFtkZWJ0QXNzZXRdID0gcGFyc2VJbnQocG9zaXRpb24uZ2V0KFwiZGVidFwiKSwgMTApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnRbZGVidEFzc2V0XSArPSBwYXJzZUludChwb3NpdGlvbi5nZXQoXCJkZWJ0XCIpLCAxMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYWNjb3VudF9iYWxhbmNlcykge1xuICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBiYWxhbmNlIG9iamVjdHMgdGhhdCBoYXZlIDAgYmFsYW5jZSBvciBhcmUgbm90IGluY2x1ZGVkIGluIG9wZW4gb3JkZXJzXG4gICAgICAgICAgICBhY2NvdW50X2JhbGFuY2VzID0gYWNjb3VudF9iYWxhbmNlcy5maWx0ZXIoKGEsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGJhbGFuY2VPYmplY3QgPSBDaGFpblN0b3JlLmdldE9iamVjdChhKTtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGJhbGFuY2VPYmplY3QgJiZcbiAgICAgICAgICAgICAgICAgICAgKCFiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIikgJiYgIW9yZGVyc1tpbmRleF0pXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gU2VwYXJhdGUgYmFsYW5jZXMgaW50byBoaWRkZW4gYW5kIGluY2x1ZGVkXG4gICAgICAgICAgICBhY2NvdW50X2JhbGFuY2VzLmZvckVhY2goKGEsIGFzc2V0X3R5cGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQoYXNzZXRfdHlwZSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgYXNzZXROYW1lID0gXCJcIjtcbiAgICAgICAgICAgICAgICBsZXQgZmlsdGVyID0gXCJcIjtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlciA9IHRoaXMuc3RhdGUuZmlsdGVyVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gU3RyaW5nKHRoaXMuc3RhdGUuZmlsdGVyVmFsdWUpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXROYW1lID0gYXNzZXQuZ2V0KFwic3ltYm9sXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB7aXNCaXRBc3NldH0gPSB1dGlscy5yZXBsYWNlTmFtZShhc3NldCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0JpdEFzc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWUgPSBcImJpdFwiICsgYXNzZXROYW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBoaWRkZW5Bc3NldHMuaW5jbHVkZXMoYXNzZXRfdHlwZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgYXNzZXROYW1lLmluY2x1ZGVzKGZpbHRlcilcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuQmFsYW5jZXNMaXN0ID0gaGlkZGVuQmFsYW5jZXNMaXN0LnB1c2goYSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhc3NldE5hbWUuaW5jbHVkZXMoZmlsdGVyKSkge1xuICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZEJhbGFuY2VzTGlzdCA9IGluY2x1ZGVkQmFsYW5jZXNMaXN0LnB1c2goYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcG9ydGZvbGlvSGlkZGVuQXNzZXRzQmFsYW5jZSA9IChcbiAgICAgICAgICAgIDxUb3RhbEJhbGFuY2VWYWx1ZSBub1RpcCBiYWxhbmNlcz17aGlkZGVuQmFsYW5jZXNMaXN0fSBoaWRlX2Fzc2V0IC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IHBvcnRmb2xpb0FjdGl2ZUFzc2V0c0JhbGFuY2UgPSAoXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWVcbiAgICAgICAgICAgICAgICBub1RpcFxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXtpbmNsdWRlZEJhbGFuY2VzTGlzdH1cbiAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgICBsZXQgb3JkZXJzVmFsdWUgPSAoXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWVcbiAgICAgICAgICAgICAgICBub1RpcFxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXtJbW11dGFibGUuTGlzdCgpfVxuICAgICAgICAgICAgICAgIG9wZW5PcmRlcnM9e29yZGVyc31cbiAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgICBsZXQgbWFyZ2luVmFsdWUgPSAoXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWVcbiAgICAgICAgICAgICAgICBub1RpcFxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXtJbW11dGFibGUuTGlzdCgpfVxuICAgICAgICAgICAgICAgIGRlYnQ9e2RlYnR9XG4gICAgICAgICAgICAgICAgY29sbGF0ZXJhbD17Y29sbGF0ZXJhbH1cbiAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgICBsZXQgZGVidFZhbHVlID0gKFxuICAgICAgICAgICAgPFRvdGFsQmFsYW5jZVZhbHVlXG4gICAgICAgICAgICAgICAgbm9UaXBcbiAgICAgICAgICAgICAgICBiYWxhbmNlcz17SW1tdXRhYmxlLkxpc3QoKX1cbiAgICAgICAgICAgICAgICBkZWJ0PXtkZWJ0fVxuICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgICAgIGxldCBjb2xsYXRlcmFsVmFsdWUgPSAoXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWVcbiAgICAgICAgICAgICAgICBub1RpcFxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXtJbW11dGFibGUuTGlzdCgpfVxuICAgICAgICAgICAgICAgIGNvbGxhdGVyYWw9e2NvbGxhdGVyYWx9XG4gICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCB0b3RhbFZhbHVlVGV4dCA9IChcbiAgICAgICAgICAgIDxUcmFuc2xhdGVXaXRoTGlua3NcbiAgICAgICAgICAgICAgICBub0xpbmtcbiAgICAgICAgICAgICAgICBzdHJpbmc9XCJhY2NvdW50LnRvdGFsXCJcbiAgICAgICAgICAgICAgICBrZXlzPXtbe3R5cGU6IFwiYXNzZXRcIiwgdmFsdWU6IHByZWZlcnJlZFVuaXQsIGFyZzogXCJhc3NldFwifV19XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGluY2x1ZGVkUG9ydGZvbGlvQmFsYW5jZSA9IChcbiAgICAgICAgICAgIDx0ciBrZXk9XCJwb3J0Zm9saW9cIiBjbGFzc05hbWU9XCJ0b3RhbC12YWx1ZVwiPlxuICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiMlwiIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxuICAgICAgICAgICAgICAgICAgICB7dG90YWxWYWx1ZVRleHR9XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIiAvPlxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiIC8+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fT5cbiAgICAgICAgICAgICAgICAgICAge3BvcnRmb2xpb0FjdGl2ZUFzc2V0c0JhbGFuY2V9XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj1cIjlcIiAvPlxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBoaWRkZW5Qb3J0Zm9saW9CYWxhbmNlID0gKFxuICAgICAgICAgICAgPHRyIGtleT1cInBvcnRmb2xpb1wiIGNsYXNzTmFtZT1cInRvdGFsLXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49XCIyXCIgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XG4gICAgICAgICAgICAgICAgICAgIHt0b3RhbFZhbHVlVGV4dH1cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiIC8+XG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCIgLz5cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxuICAgICAgICAgICAgICAgICAgICB7cG9ydGZvbGlvSGlkZGVuQXNzZXRzQmFsYW5jZX1cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiOVwiIC8+XG4gICAgICAgICAgICA8L3RyPlxuICAgICAgICApO1xuXG4gICAgICAgIGluY2x1ZGVkUG9ydGZvbGlvTGlzdCA9IChcbiAgICAgICAgICAgIDxBY2NvdW50UG9ydGZvbGlvTGlzdFxuICAgICAgICAgICAgICAgIGJhbGFuY2VMaXN0PXtpbmNsdWRlZEJhbGFuY2VzTGlzdH1cbiAgICAgICAgICAgICAgICBvcHRpb25hbEFzc2V0cz17XG4gICAgICAgICAgICAgICAgICAgICF0aGlzLnN0YXRlLmZpbHRlclZhbHVlID8gdGhpcy5zdGF0ZS5hbHdheXNTaG93QXNzZXRzIDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt0cnVlfVxuICAgICAgICAgICAgICAgIHByZWZlcnJlZFVuaXQ9e3ByZWZlcnJlZFVuaXR9XG4gICAgICAgICAgICAgICAgY29yZUFzc2V0PXt0aGlzLnByb3BzLmNvcmVfYXNzZXR9XG4gICAgICAgICAgICAgICAgY29yZVN5bWJvbD17dGhpcy5wcm9wcy5jb3JlX2Fzc2V0LmdldChcInN5bWJvbFwiKX1cbiAgICAgICAgICAgICAgICBoaWRkZW5Bc3NldHM9e2hpZGRlbkFzc2V0c31cbiAgICAgICAgICAgICAgICBvcmRlcnM9e29yZGVyc31cbiAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnR9XG4gICAgICAgICAgICAgICAgc29ydEtleT17dGhpcy5zdGF0ZS5zb3J0S2V5fVxuICAgICAgICAgICAgICAgIHNvcnREaXJlY3Rpb249e3RoaXMuc3RhdGUuc29ydERpcmVjdGlvbn1cbiAgICAgICAgICAgICAgICBpc015QWNjb3VudD17dGhpcy5wcm9wcy5pc015QWNjb3VudH1cbiAgICAgICAgICAgICAgICBiYWxhbmNlcz17dGhpcy5wcm9wcy5iYWxhbmNlc31cbiAgICAgICAgICAgICAgICBoZWFkZXI9e3RoaXMuZ2V0SGVhZGVyKCl9XG4gICAgICAgICAgICAgICAgZXh0cmFSb3c9e2luY2x1ZGVkUG9ydGZvbGlvQmFsYW5jZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgaGlkZGVuUG9ydGZvbGlvTGlzdCA9IChcbiAgICAgICAgICAgIDxBY2NvdW50UG9ydGZvbGlvTGlzdFxuICAgICAgICAgICAgICAgIGJhbGFuY2VMaXN0PXtoaWRkZW5CYWxhbmNlc0xpc3R9XG4gICAgICAgICAgICAgICAgb3B0aW9uYWxBc3NldHM9e1xuICAgICAgICAgICAgICAgICAgICAhdGhpcy5zdGF0ZS5maWx0ZXJWYWx1ZSA/IHRoaXMuc3RhdGUuYWx3YXlzU2hvd0Fzc2V0IDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aXNpYmxlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICBwcmVmZXJyZWRVbml0PXtwcmVmZXJyZWRVbml0fVxuICAgICAgICAgICAgICAgIGNvcmVTeW1ib2w9e3RoaXMucHJvcHMuY29yZV9hc3NldC5nZXQoXCJzeW1ib2xcIil9XG4gICAgICAgICAgICAgICAgc2V0dGluZ3M9e3NldHRpbmdzfVxuICAgICAgICAgICAgICAgIGhpZGRlbkFzc2V0cz17aGlkZGVuQXNzZXRzfVxuICAgICAgICAgICAgICAgIG9yZGVycz17b3JkZXJzfVxuICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudH1cbiAgICAgICAgICAgICAgICBzb3J0S2V5PXt0aGlzLnN0YXRlLnNvcnRLZXl9XG4gICAgICAgICAgICAgICAgc29ydERpcmVjdGlvbj17dGhpcy5zdGF0ZS5zb3J0RGlyZWN0aW9ufVxuICAgICAgICAgICAgICAgIGlzTXlBY2NvdW50PXt0aGlzLnByb3BzLmlzTXlBY2NvdW50fVxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXt0aGlzLnByb3BzLmJhbGFuY2VzfVxuICAgICAgICAgICAgICAgIGhlYWRlcj17dGhpcy5nZXRIZWFkZXIoKX1cbiAgICAgICAgICAgICAgICBleHRyYVJvdz17aGlkZGVuUG9ydGZvbGlvQmFsYW5jZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gYWRkIHVuaWNvZGUgbm9uLWJyZWFraW5nIHNwYWNlIGFzIHN1YnRleHQgdG8gQWN0aXZpdHkgVGFiIHRvIGVuc3VyZSB0aGF0IGFsbCB0aXRsZXMgYXJlIGFsaWduZWRcbiAgICAgICAgLy8gaG9yaXpvbnRhbGx5XG4gICAgICAgIGNvbnN0IGhpZGRlblN1YlRleHQgPSBcIlxcdTAwYTBcIjtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgYXBwLXRhYmxlcyBuby1wYWRkaW5nXCIgcmVmPVwiYXBwVGFibGVzXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1jb250YWluZXIgZ2VuZXJpYy1ib3JkZXJlZC1ib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEFjdGl2ZVRhYj17MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmc9XCJvdmVydmlld1RhYlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWNjb3VudC10YWJzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2xhc3M9XCJhY2NvdW50LW92ZXJ2aWV3IG5vLXBhZGRpbmcgYm9yZGVyZWQtaGVhZGVyIGNvbnRlbnQtYmxvY2tcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LnBvcnRmb2xpb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRleHQ9e3BvcnRmb2xpb0FjdGl2ZUFzc2V0c0JhbGFuY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1zZWxlY3RvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWx0ZXIgaW5saW5lLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJGaWx0ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5faGFuZGxlRmlsdGVySW5wdXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3RvciBpbmxpbmUtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFwiaW5saW5lLWJsb2NrXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3duQXNzZXRzICE9IFwiYWN0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgIT0gXCJhY3RpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5fY2hhbmdlU2hvd25Bc3NldHMuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWN0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgpID0+IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuaGlkZV9oaWRkZW5cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtoaWRkZW5CYWxhbmNlc0xpc3Quc2l6ZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbmxpbmUtYmxvY2tcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgIT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaGlkZGVuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgIT0gXCJoaWRkZW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX2NoYW5nZVNob3duQXNzZXRzLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaGlkZGVuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCkgPT4ge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5zaG93X2hpZGRlblwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMoXCJpbmxpbmUtYmxvY2tcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5hY3RpdmU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgIT0gXCJ2aXN1YWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93bkFzc2V0cyAhPSBcInZpc3VhbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9jaGFuZ2VTaG93bkFzc2V0cy5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ2aXN1YWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCkgPT4ge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5zaG93X3Zpc3VhbFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Nob3duQXNzZXRzICE9IFwidmlzdWFsXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93bkFzc2V0cyA9PT0gXCJoaWRkZW5cIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZGVuQmFsYW5jZXNMaXN0LnNpemUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZGVuUG9ydGZvbGlvTGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZFBvcnRmb2xpb0xpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50VHJlZW1hcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VPYmplY3RzPXtpbmNsdWRlZEJhbGFuY2VzTGlzdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC5vcGVuX29yZGVyc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRleHQ9e29yZGVyc1ZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRPcmRlcnMgey4uLnRoaXMucHJvcHN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT1cInRvdGFsLXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbFNwYW49XCI4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dG90YWxWYWx1ZVRleHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sU3Bhbj1cIjFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvcmRlcnNWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmlzTXlBY2NvdW50ID8gPHRkIC8+IDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQWNjb3VudE9yZGVycz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LmNvbGxhdGVyYWxzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViVGV4dD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZ2xvYmFsTWFyZ2luU3RhdHVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttYXJnaW5WYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdlbmVyaWMtYm9yZGVyZWQtYm94XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPE1hcmdpblBvc2l0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRVbml0PXtwcmVmZXJyZWRVbml0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJkYXNoYm9hcmQtdGFibGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsT3JkZXJzPXtjYWxsX29yZGVyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9XCJ0b3RhbC12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnt0b3RhbFZhbHVlVGV4dH08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2RlYnRWYWx1ZX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLW1lZGl1bVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb2xsYXRlcmFsVmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e21hcmdpblZhbHVlfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiM1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9NYXJnaW5Qb3NpdGlvbnM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC5hY3Rpdml0eVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRleHQ9e2hpZGRlblN1YlRleHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UmVjZW50VHJhbnNhY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50c0xpc3Q9e0ltbXV0YWJsZS5mcm9tSlMoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuZ2V0KFwiaWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFjdFZpZXc9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd01vcmU9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxsSGVpZ2h0PXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ9ezEwMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJzPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzaGJvYXJkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWNjb3VudC5nZXQoXCJwcm9wb3NhbHNcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmdldChcInByb3Bvc2Fsc1wiKS5zaXplICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zZXR0aW5ncy5nZXQoXCJzaG93UHJvcG9zZWRUeFwiKSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJleHBsb3Jlci5wcm9wb3NhbHMudGl0bGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViVGV4dD17U3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuZ2V0KFwicHJvcG9zYWxzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYWNjb3VudC5nZXQoXCJwcm9wb3NhbHNcIikuc2l6ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90b2dnbGVIaWRlUHJvcG9zYWwuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tjdXJzb3I6IFwicG9pbnRlclwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLnByb3Bvc2VfdW5oaWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTd2l0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luOiAxNn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlRmlzaGluZ1Byb3Bvc2Fsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX3RvZ2dsZUhpZGVQcm9wb3NhbC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuZGVhY3RpdmF0ZV9zdXNwaWNpb3VzX3Byb3Bvc2Fsc1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJvcG9zYWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZGFzaGJvYXJkLXRhYmxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVGaXNoaW5nUHJvcG9zYWxzPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5oaWRlRmlzaGluZ1Byb3Bvc2Fsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuQWNjb3VudE92ZXJ2aWV3ID0gQXNzZXRXcmFwcGVyKEFjY291bnRPdmVydmlldywge3Byb3BOYW1lczogW1wiY29yZV9hc3NldFwiXX0pO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBY2NvdW50T3ZlcnZpZXdXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiA8QmFsYW5jZVdyYXBwZXIgey4uLnRoaXMucHJvcHN9IHdyYXA9e0FjY291bnRPdmVydmlld30gLz47XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcclxuaW1wb3J0IEZvcm1hdHRlZFByaWNlIGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZFByaWNlXCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgQXNzZXRXcmFwcGVyIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0V3JhcHBlclwiO1xyXG5pbXBvcnQgQXNzZXRJbWFnZSBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldEltYWdlXCI7XHJcbmltcG9ydCBBc3NldE5hbWUgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXROYW1lXCI7XHJcbmltcG9ydCBCb3Jyb3dNb2RhbCBmcm9tIFwiLi4vTW9kYWwvQm9ycm93TW9kYWxcIjtcclxuaW1wb3J0IFdhbGxldEFwaSBmcm9tIFwiYXBpL1dhbGxldEFwaVwiO1xyXG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgV2FsbGV0RGIgZnJvbSBcInN0b3Jlcy9XYWxsZXREYlwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xyXG5pbXBvcnQgVG90YWxCYWxhbmNlVmFsdWUgZnJvbSBcIi4uL1V0aWxpdHkvVG90YWxCYWxhbmNlVmFsdWVcIjtcclxuaW1wb3J0IHtMaXN0fSBmcm9tIFwiaW1tdXRhYmxlXCI7XHJcbmltcG9ydCB7TGlua30gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcclxuaW1wb3J0IFRyYW5zbGF0ZVdpdGhMaW5rcyBmcm9tIFwiLi4vVXRpbGl0eS9UcmFuc2xhdGVXaXRoTGlua3NcIjtcclxuaW1wb3J0IEltbXV0YWJsZSBmcm9tIFwiaW1tdXRhYmxlXCI7XHJcblxyXG5jb25zdCBhbGlnblJpZ2h0ID0ge3RleHRBbGlnbjogXCJyaWdodFwifTtcclxuY29uc3QgYWxpZ25MZWZ0ID0ge3RleHRBbGlnbjogXCJsZWZ0XCJ9O1xyXG5cclxuLyoqXHJcbiAqICBHaXZlbiBhIGNvbGxhdGVyYWwgcG9zaXRpb24gb2JqZWN0IChjYWxsIG9yZGVyKSBhbmQgYWNjb3VudCxcclxuICogIGRpc3BsYXkgaXQgaW4gYSBwcmV0dHkgd2F5XHJcbiAqXHJcbiAqICBFeHBlY3RzIHByb3BlcnR5LCAnb2JqZWN0JyB3aGljaCBzaG91bGQgYmUgYSBjYWxsIG9yZGVyIGlkXHJcbiAqICBhbmQgYW5vdGhlciBwcm9wZXJ0eSBjYWxsZWQgJ2FjY291bnQnIHdoaWNoIHNob3VsZCBiZSBhblxyXG4gKiAgYWNjb3VudC5cclxuICovXHJcblxyXG5jbGFzcyBNYXJnaW5Qb3NpdGlvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGRlYnRBc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgY29sbGF0ZXJhbEFzc2V0OiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIHRlbXBDb21wb25lbnQ6IFwidHJcIlxyXG4gICAgfTtcclxuXHJcbiAgICBfb25VcGRhdGVQb3NpdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGxldCByZWYgPVxyXG4gICAgICAgICAgICBcImNwX21vZGFsX1wiICtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vYmplY3QuZ2V0SW4oW1wiY2FsbF9wcmljZVwiLCBcInF1b3RlXCIsIFwiYXNzZXRfaWRcIl0pO1xyXG4gICAgICAgIHRoaXMucmVmc1tyZWZdLnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25DbG9zZVBvc2l0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgbGV0IHRyID0gV2FsbGV0QXBpLm5ld190cmFuc2FjdGlvbigpO1xyXG5cclxuICAgICAgICB0ci5hZGRfdHlwZV9vcGVyYXRpb24oXCJjYWxsX29yZGVyX3VwZGF0ZVwiLCB7XHJcbiAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgYW1vdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ6IDBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuZGluZ19hY2NvdW50OiB0aGlzLnByb3BzLm9iamVjdC5nZXQoXCJib3Jyb3dlclwiKSxcclxuICAgICAgICAgICAgZGVsdGFfY29sbGF0ZXJhbDoge1xyXG4gICAgICAgICAgICAgICAgYW1vdW50OiAtdGhpcy5wcm9wcy5vYmplY3QuZ2V0KFwiY29sbGF0ZXJhbFwiKSxcclxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiB0aGlzLnByb3BzLm9iamVjdC5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYWxsX3ByaWNlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhc3NldF9pZFwiXHJcbiAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkZWx0YV9kZWJ0OiB7XHJcbiAgICAgICAgICAgICAgICBhbW91bnQ6IC10aGlzLnByb3BzLm9iamVjdC5nZXQoXCJkZWJ0XCIpLFxyXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ6IHRoaXMucHJvcHMub2JqZWN0LmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICBcImNhbGxfcHJpY2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcInF1b3RlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhc3NldF9pZFwiXHJcbiAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIFdhbGxldERiLnByb2Nlc3NfdHJhbnNhY3Rpb24odHIsIG51bGwsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGhvdyBtYW55IHVuaXRzIG9mIHRoZSBkZWJ0IGFzc2V0IHRoZSBib3Jyb3dlciBoYXNcclxuICAgIC8vIGluIGhpcy9oZXIgd2FsbGV0LiBUaGlzIGhhcyBub3RoaW5nIHRvIGRvIHdpdGhcclxuICAgIC8vIGhvdyBtYW55IG9mIHRoZSBhc3NldCB0aGUgYm9ycm93ZXIgaGFzIGJvcnJvd2VkLlxyXG4gICAgX2dldEJhbGFuY2UoKSB7XHJcbiAgICAgICAgbGV0IGFjY291bnQgPSB0aGlzLnByb3BzLmFjY291bnQ7XHJcbiAgICAgICAgLy8gdGhlIGRlYnQgYXNzZXQgaWQgd2hpY2ggd2Ugd2FudCB0byBkaXNwbGF5XHJcbiAgICAgICAgbGV0IHJvd19hc3NldF9pZCA9IHRoaXMucHJvcHMub2JqZWN0LmdldEluKFtcclxuICAgICAgICAgICAgXCJjYWxsX3ByaWNlXCIsXHJcbiAgICAgICAgICAgIFwicXVvdGVcIixcclxuICAgICAgICAgICAgXCJhc3NldF9pZFwiXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIGxldCBhY2NvdW50X2JhbGFuY2VzID0gYWNjb3VudC5nZXQoXCJiYWxhbmNlc1wiKTtcclxuXHJcbiAgICAgICAgbGV0IGJhbGFuY2UgPSAwO1xyXG5cclxuICAgICAgICAvLyByZWFsbHkgdGhpcyBpdGVyYXRpb24gc2hvdWxkIGJlIGNhbGxlZCBvbmNlLCBhbmRcclxuICAgICAgICAvLyBlYWNoIGFzc2V0X2lkIG1hdGNoZWQgb25jZSB3aXRoIGl0cyBiYWxhbmNlXHJcblxyXG4gICAgICAgIC8vIGZvciBldmVyeSBkZWJ0IHRoZSBhY2NvdW50IGhhcywgd2UgaXRlcmF0ZVxyXG4gICAgICAgIC8vIHRocm91Z2ggZXZlcnkgYmFsYW5jZSB0aGUgdXNlciBoYXNcclxuICAgICAgICBpZiAoYWNjb3VudF9iYWxhbmNlcykge1xyXG4gICAgICAgICAgICBhY2NvdW50X2JhbGFuY2VzLmZvckVhY2goKGEsIGFzc2V0X3R5cGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChhc3NldF90eXBlID09IHJvd19hc3NldF9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBiYWxhbmNlT2JqZWN0ID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QoYSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgYmFsYW5jZVxyXG4gICAgICAgICAgICAgICAgICAgIGJhbGFuY2UgPSBiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBhY2NvdW50IGRvZXNuJ3QgaG9sZFxyXG4gICAgICAgIC8vIGFueSBvZiB0aGUgYXNzZXQgaGVyZVxyXG4gICAgICAgIHJldHVybiBiYWxhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRGZWVkUHJpY2UoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgMSAvXHJcbiAgICAgICAgICAgIHV0aWxzLmdldF9hc3NldF9wcmljZShcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZGVidEFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICBcImJpdGFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjdXJyZW50X2ZlZWRcIixcclxuICAgICAgICAgICAgICAgICAgICBcInNldHRsZW1lbnRfcHJpY2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcInF1b3RlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhbW91bnRcIlxyXG4gICAgICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvbGxhdGVyYWxBc3NldCxcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZGVidEFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICBcImJpdGFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjdXJyZW50X2ZlZWRcIixcclxuICAgICAgICAgICAgICAgICAgICBcInNldHRsZW1lbnRfcHJpY2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcImJhc2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcImFtb3VudFwiXHJcbiAgICAgICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZGVidEFzc2V0XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRDb2xsYXRlcmFsUmF0aW8oKSB7XHJcbiAgICAgICAgY29uc3QgY28gPSB0aGlzLnByb3BzLm9iamVjdC50b0pTKCk7XHJcbiAgICAgICAgY29uc3QgYyA9IHV0aWxzLmdldF9hc3NldF9hbW91bnQoXHJcbiAgICAgICAgICAgIGNvLmNvbGxhdGVyYWwsXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuY29sbGF0ZXJhbEFzc2V0XHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25zdCBkID0gdXRpbHMuZ2V0X2Fzc2V0X2Ftb3VudChjby5kZWJ0LCB0aGlzLnByb3BzLmRlYnRBc3NldCk7XHJcbiAgICAgICAgcmV0dXJuIGMgLyAoZCAvIHRoaXMuX2dldEZlZWRQcmljZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0TVIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5kZWJ0QXNzZXQuZ2V0SW4oW1xyXG4gICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxyXG4gICAgICAgICAgICAgICAgXCJjdXJyZW50X2ZlZWRcIixcclxuICAgICAgICAgICAgICAgIFwibWFpbnRlbmFuY2VfY29sbGF0ZXJhbF9yYXRpb1wiXHJcbiAgICAgICAgICAgIF0pIC8gMTAwMFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFN0YXR1c0NsYXNzKCkge1xyXG4gICAgICAgIGxldCBjciA9IHRoaXMuX2dldENvbGxhdGVyYWxSYXRpbygpO1xyXG4gICAgICAgIGNvbnN0IG1yID0gdGhpcy5fZ2V0TVIoKTtcclxuXHJcbiAgICAgICAgaWYgKGlzTmFOKGNyKSkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgaWYgKGNyIDwgbXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiZGFuZ2VyXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjciA8IG1yICsgMC41KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIndhcm5pbmdcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2dldENSVGlwKCkge1xyXG4gICAgICAgIGNvbnN0IHN0YXR1c0NsYXNzID0gdGhpcy5fZ2V0U3RhdHVzQ2xhc3MoKTtcclxuICAgICAgICBjb25zdCBtciA9IHRoaXMuX2dldE1SKCk7XHJcbiAgICAgICAgaWYgKCFzdGF0dXNDbGFzcyB8fCBzdGF0dXNDbGFzcyA9PT0gXCJcIikgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIGlmIChzdGF0dXNDbGFzcyA9PT0gXCJkYW5nZXJcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gY291bnRlcnBhcnQudHJhbnNsYXRlKFwidG9vbHRpcC5jcl9kYW5nZXJcIiwge21yfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0dXNDbGFzcyA9PT0gXCJ3YXJuaW5nXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInRvb2x0aXAuY3Jfd2FybmluZ1wiLCB7bXJ9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRhcmdldENvbGxhdGVyYWxSYXRpbygpIHtcclxuICAgICAgICBjb25zdCBjbyA9IHRoaXMucHJvcHMub2JqZWN0ICYmIHRoaXMucHJvcHMub2JqZWN0LnRvSlMoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvICYmICFpc05hTihjby50YXJnZXRfY29sbGF0ZXJhbF9yYXRpbylcclxuICAgICAgICAgICAgPyBjby50YXJnZXRfY29sbGF0ZXJhbF9yYXRpbyAvIDEwMDBcclxuICAgICAgICAgICAgOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2RlYnRBc3NldCwgY29sbGF0ZXJhbEFzc2V0LCBvYmplY3R9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgbGV0IGhhc19vcmRlciA9IG9iamVjdCAhPSBudWxsO1xyXG5cclxuICAgICAgICBsZXQgY28gPSBoYXNfb3JkZXIgPyBvYmplY3QudG9KUygpIDogbnVsbDtcclxuICAgICAgICBjb25zdCBjciA9IHRoaXMuX2dldENvbGxhdGVyYWxSYXRpbygpO1xyXG4gICAgICAgIGNvbnN0IGQgPSB1dGlscy5nZXRfYXNzZXRfYW1vdW50KGNvLmRlYnQsIHRoaXMucHJvcHMuZGVidEFzc2V0KTtcclxuICAgICAgICBjb25zdCBiYWxhbmNlID0gdGhpcy5fZ2V0QmFsYW5jZSgpO1xyXG5cclxuICAgICAgICBjb25zdCBzdGF0dXNDbGFzcyA9IHRoaXMuX2dldFN0YXR1c0NsYXNzKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRlYnRfYW1vdW50ID0gaGFzX29yZGVyID8gY28uZGVidCA6IDA7XHJcbiAgICAgICAgY29uc3QgY29sbGF0ZXJhbF9hbW91bnQgPSBoYXNfb3JkZXIgPyBjby5jb2xsYXRlcmFsIDogMDtcclxuICAgICAgICBjb25zdCBjb2xsYXRlcmFsX2Fzc2V0ID0gaGFzX29yZGVyXHJcbiAgICAgICAgICAgID8gY28uY2FsbF9wcmljZS5iYXNlLmFzc2V0X2lkXHJcbiAgICAgICAgICAgIDogY29sbGF0ZXJhbEFzc2V0LmdldChcImlkXCIpO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldF9jb2xsYXRlcmFsX3JhdGlvID0gdGhpcy5fZ2V0VGFyZ2V0Q29sbGF0ZXJhbFJhdGlvKCk7XHJcblxyXG4gICAgICAgIGxldCBtY3IgPSB0aGlzLnByb3BzLmRlYnRBc3NldC5nZXRJbihbXHJcbiAgICAgICAgICAgIFwiYml0YXNzZXRcIixcclxuICAgICAgICAgICAgXCJjdXJyZW50X2ZlZWRcIixcclxuICAgICAgICAgICAgXCJtYWludGVuYW5jZV9jb2xsYXRlcmFsX3JhdGlvXCJcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT1cIm1hcmdpbi1yb3dcIj5cclxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17YWxpZ25MZWZ0fT5cclxuICAgICAgICAgICAgICAgICAgICA8QXNzZXRJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlTm9uZVRvQnRzPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg9ezMwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtkZWJ0QXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89e2AvYXNzZXQvJHtkZWJ0QXNzZXQuZ2V0KFwic3ltYm9sXCIpfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lIG5vVGlwIG5hbWU9e2RlYnRBc3NldC5nZXQoXCJzeW1ib2xcIil9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduUmlnaHR9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2JhbGFuY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtjby5jYWxsX3ByaWNlLnF1b3RlLmFzc2V0X2lkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fT5cclxuICAgICAgICAgICAgICAgICAgICB7aGFzX29yZGVyID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17Y28uZGVidH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtjby5jYWxsX3ByaWNlLnF1b3RlLmFzc2V0X2lkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduUmlnaHR9IGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLW1lZGl1bVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsT2Zmc2V0PXszfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2NvbGxhdGVyYWxfYW1vdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17Y29sbGF0ZXJhbF9hc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwiYm90dG9tXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e3RoaXMuX2dldENSVGlwKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XCJjZW50ZXItY29udGVudCBcIiArIHN0YXR1c0NsYXNzfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3V0aWxzLmZvcm1hdF9udW1iZXIoY3IsIDIpfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduUmlnaHR9IGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLW1lZGl1bS0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge3RhcmdldF9jb2xsYXRlcmFsX3JhdGlvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdXRpbHMuZm9ybWF0X251bWJlcih0YXJnZXRfY29sbGF0ZXJhbF9yYXRpbywgMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduUmlnaHR9IGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLW1lZGl1bS0xXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge2hhc19vcmRlciA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRvdGFsQmFsYW5jZVZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub1RpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZXM9e0xpc3QoKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnQ9e3tbZGVidEFzc2V0LmdldChcImlkXCIpXTogY28uZGVidH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXRlcmFsPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NvbGxhdGVyYWxBc3NldC5nZXQoXCJpZFwiKV06IHBhcnNlSW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjby5jb2xsYXRlcmFsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17YWxpZ25SaWdodH0gY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGwtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHtoYXNfb3JkZXIgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRQcmljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9hbW91bnQ9e2NvbGxhdGVyYWxfYW1vdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9hc3NldD17Y29sbGF0ZXJhbEFzc2V0LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYW1vdW50PXtkZWJ0X2Ftb3VudCAqIChtY3IgLyAxMDAwKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlX2Fzc2V0PXtkZWJ0QXNzZXQuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX3N5bWJvbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbC0xXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge2hhc19vcmRlciA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZFByaWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlX2Ftb3VudD17ZGVidEFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJpdGFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjdXJyZW50X2ZlZWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNldHRsZW1lbnRfcHJpY2VcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJhc2VcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFtb3VudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VfYXNzZXQ9e2NvLmNhbGxfcHJpY2UucXVvdGUuYXNzZXRfaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZV9hbW91bnQ9e2RlYnRBc3NldC5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY3VycmVudF9mZWVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZXR0bGVtZW50X3ByaWNlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYW1vdW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYXNzZXQ9e2NvLmNhbGxfcHJpY2UuYmFzZS5hc3NldF9pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfc3ltYm9sc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1wiY2VudGVyLWNvbnRlbnQgY29sdW1uLWhpZGUtc21hbGxcIn1cclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17YWxpZ25MZWZ0fVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIHtoYXNfb3JkZXIgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRQcmljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9hbW91bnQ9e2NvLmNhbGxfcHJpY2UuYmFzZS5hbW91bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlX2Fzc2V0PXtjby5jYWxsX3ByaWNlLmJhc2UuYXNzZXRfaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZV9hbW91bnQ9e2NvLmNhbGxfcHJpY2UucXVvdGUuYW1vdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYXNzZXQ9e2NvLmNhbGxfcHJpY2UucXVvdGUuYXNzZXRfaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX3ZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxMaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvPXtgL21hcmtldC8ke2RlYnRBc3NldC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN5bWJvbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XyR7Y29sbGF0ZXJhbEFzc2V0LmdldChcInN5bWJvbFwiKX1gfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0cmFkZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLnRyYWRlLnRyYWRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpblJpZ2h0OiA1fX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJsZWZ0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC51cGRhdGVfcG9zaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206IDV9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgb25DbGljaz17dGhpcy5fb25VcGRhdGVQb3NpdGlvbi5iaW5kKHRoaXMpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImFkanVzdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5hZGp1c3RcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweCByb3RhdGU5MFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICB7aGFzX29yZGVyID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwibGVmdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRpcD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5jbG9zZV9wb3NpdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthbW91bnQ6IGQsIGFzc2V0OiBkZWJ0QXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogNX19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIG9uQ2xpY2s9e3RoaXMuX29uQ2xvc2VQb3NpdGlvbi5iaW5kKHRoaXMpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5jcm9zc19jaXJjbGUuY2xvc2VfcG9zaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIHtkZWJ0QXNzZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxCb3Jyb3dNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtcImNwX21vZGFsX1wiICsgY28uY2FsbF9wcmljZS5xdW90ZS5hc3NldF9pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsSWQ9e1wiY3BfbW9kYWxfXCIgKyBjby5jYWxsX3ByaWNlLnF1b3RlLmFzc2V0X2lkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYXNzZXQ9e2NvLmNhbGxfcHJpY2UucXVvdGUuYXNzZXRfaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNraW5nX2Fzc2V0PXtkZWJ0QXNzZXQuZ2V0SW4oW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNob3J0X2JhY2tpbmdfYXNzZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbk1hcmdpblBvc2l0aW9uID0gQmluZFRvQ2hhaW5TdGF0ZShNYXJnaW5Qb3NpdGlvbik7XHJcblxyXG5jbGFzcyBNYXJnaW5Qb3NpdGlvbldyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBvYmplY3Q6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtvYmplY3QsIGFjY291bnR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQgZGVidEFzc2V0ID0gb2JqZWN0LmdldEluKFtcImNhbGxfcHJpY2VcIiwgXCJxdW90ZVwiLCBcImFzc2V0X2lkXCJdKTtcclxuICAgICAgICBsZXQgY29sbGF0ZXJhbEFzc2V0ID0gb2JqZWN0LmdldEluKFtcImNhbGxfcHJpY2VcIiwgXCJiYXNlXCIsIFwiYXNzZXRfaWRcIl0pO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8TWFyZ2luUG9zaXRpb25cclxuICAgICAgICAgICAgICAgIGRlYnRBc3NldD17ZGVidEFzc2V0fVxyXG4gICAgICAgICAgICAgICAgY29sbGF0ZXJhbEFzc2V0PXtjb2xsYXRlcmFsQXNzZXR9XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuTWFyZ2luUG9zaXRpb25XcmFwcGVyID0gQmluZFRvQ2hhaW5TdGF0ZShNYXJnaW5Qb3NpdGlvbldyYXBwZXIpO1xyXG5cclxuY2xhc3MgTWFyZ2luUG9zaXRpb25QbGFjZUhvbGRlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGRlYnRBc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgY29sbGF0ZXJhbEFzc2V0OiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIHRlbXBDb21wb25lbnQ6IFwidHJcIlxyXG4gICAgfTtcclxuXHJcbiAgICBfb25VcGRhdGVQb3NpdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGxldCByZWYgPSBcImNwX21vZGFsX1wiICsgdGhpcy5wcm9wcy5kZWJ0QXNzZXQuZ2V0KFwiaWRcIik7XHJcbiAgICAgICAgdGhpcy5yZWZzW3JlZl0uc2hvdygpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRGZWVkUHJpY2UoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgMSAvXHJcbiAgICAgICAgICAgIHV0aWxzLmdldF9hc3NldF9wcmljZShcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZGVidEFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICBcImJpdGFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjdXJyZW50X2ZlZWRcIixcclxuICAgICAgICAgICAgICAgICAgICBcInNldHRsZW1lbnRfcHJpY2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcInF1b3RlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhbW91bnRcIlxyXG4gICAgICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvbGxhdGVyYWxBc3NldCxcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZGVidEFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICBcImJpdGFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjdXJyZW50X2ZlZWRcIixcclxuICAgICAgICAgICAgICAgICAgICBcInNldHRsZW1lbnRfcHJpY2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcImJhc2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcImFtb3VudFwiXHJcbiAgICAgICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZGVidEFzc2V0XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2RlYnRBc3NldCwgY29sbGF0ZXJhbEFzc2V0LCBhY2NvdW50fSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIC8vIGdldCB0aGUgYmFsYW5jZVxyXG5cclxuICAgICAgICAvLyB0aGUgZGVidCBhc3NldCBpZCB3aGljaCB3ZSB3YW50IHRvIGRpc3BsYXlcclxuICAgICAgICBsZXQgcm93X2Fzc2V0X2lkID0gZGVidEFzc2V0LmdldChcImlkXCIpO1xyXG5cclxuICAgICAgICBsZXQgYWNjb3VudF9iYWxhbmNlcyA9IGFjY291bnQuZ2V0KFwiYmFsYW5jZXNcIik7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlID0gMDtcclxuXHJcbiAgICAgICAgLy8gcmVhbGx5IHRoaXMgaXRlcmF0aW9uIHNob3VsZCBiZSBjYWxsZWQgb25jZSwgYW5kXHJcbiAgICAgICAgLy8gZWFjaCBhc3NldF9pZCBtYXRjaGVkIG9uY2Ugd2l0aCBpdHMgYmFsYW5jZVxyXG5cclxuICAgICAgICAvLyBmb3IgZXZlcnkgZGVidCB0aGUgYWNjb3VudCBoYXMsIHdlIGl0ZXJhdGVcclxuICAgICAgICAvLyB0aHJvdWdoIGV2ZXJ5IGJhbGFuY2UgdGhlIHVzZXIgaGFzXHJcbiAgICAgICAgaWYgKGFjY291bnRfYmFsYW5jZXMpIHtcclxuICAgICAgICAgICAgYWNjb3VudF9iYWxhbmNlcy5mb3JFYWNoKChhLCBhc3NldF90eXBlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXNzZXRfdHlwZSA9PSByb3dfYXNzZXRfaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYmFsYW5jZU9iamVjdCA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIGJhbGFuY2VcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlID0gYmFsYW5jZU9iamVjdC5nZXQoXCJiYWxhbmNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9XCJtYXJnaW4tcm93XCI+XHJcbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduTGVmdH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFzc2V0SW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZU5vbmVUb0J0cz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoPXszMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17ZGVidEFzc2V0LmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL2Fzc2V0LyR7ZGVidEFzc2V0LmdldChcInN5bWJvbFwiKX1gfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBub1RpcCBuYW1lPXtkZWJ0QXNzZXQuZ2V0KFwic3ltYm9sXCIpfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduUmlnaHR9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2JhbGFuY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtkZWJ0QXNzZXQuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17YWxpZ25SaWdodH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2RlYnRBc3NldC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1tZWRpdW1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVjaW1hbE9mZnNldD17M31cclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXswfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17Y29sbGF0ZXJhbEFzc2V0LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkIC8+XHJcbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduUmlnaHR9IC8+XHJcbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduUmlnaHR9IGNsYXNzTmFtZT17XCJjb2x1bW4taGlkZS1zbWFsbFwifSAvPlxyXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9e1wiY29sdW1uLWhpZGUtc21hbGxcIn0gLz5cclxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17YWxpZ25SaWdodH0gY2xhc3NOYW1lPXtcImNvbHVtbi1oaWRlLXNtYWxsXCJ9IC8+XHJcbiAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1wiY2VudGVyLWNvbnRlbnQgY29sdW1uLWhpZGUtc21hbGxcIn1cclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17YWxpZ25MZWZ0fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIHsvKiA8dGQ+PEFzc2V0TmFtZSBuYW1lPXtkZWJ0QXNzZXQuZ2V0KFwic3ltYm9sXCIpfSAvPi88QXNzZXROYW1lIG5hbWU9e2NvbGxhdGVyYWxBc3NldC5nZXQoXCJzeW1ib2xcIil9IC8+PC90ZD4gKi99XHJcbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwiY2VudGVyXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICA8TGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bz17YC9tYXJrZXQvJHtkZWJ0QXNzZXQuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzeW1ib2xcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfV8ke2NvbGxhdGVyYWxBc3NldC5nZXQoXCJzeW1ib2xcIil9YH1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwidHJhZGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy50cmFkZS50cmFkZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5SaWdodDogNX19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJsZWZ0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC51cGRhdGVfcG9zaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206IDV9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgb25DbGljaz17dGhpcy5fb25VcGRhdGVQb3NpdGlvbi5iaW5kKHRoaXMpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImFkanVzdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5hZGp1c3RcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweCByb3RhdGU5MFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgIHtkZWJ0QXNzZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxCb3Jyb3dNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtcImNwX21vZGFsX1wiICsgZGVidEFzc2V0LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxJZD17XCJjcF9tb2RhbF9cIiArIGRlYnRBc3NldC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlX2Fzc2V0PXtkZWJ0QXNzZXQuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNraW5nX2Fzc2V0PXtkZWJ0QXNzZXQuZ2V0SW4oW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNob3J0X2JhY2tpbmdfYXNzZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbk1hcmdpblBvc2l0aW9uUGxhY2VIb2xkZXIgPSBCaW5kVG9DaGFpblN0YXRlKE1hcmdpblBvc2l0aW9uUGxhY2VIb2xkZXIpO1xyXG5cclxuY2xhc3MgUGxhY2VIb2xkZXJXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgY2FsbE9yZGVyczogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdHNMaXN0XHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2FjY291bnQsIGNhbGxPcmRlcnMsIGJpdEFzc2V0c30gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGNhbGxPcmRlcnMgPSBjYWxsT3JkZXJzLmZpbHRlcihvID0+ICEhbyk7XHJcbiAgICAgICAgYml0QXNzZXRzID0gYml0QXNzZXRzLmZpbHRlcihvID0+ICEhbyk7XHJcbiAgICAgICAgaWYgKCFiaXRBc3NldHMubGVuZ3RoKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBjYWxsT3JkZXJzLmZvckVhY2gob2JqZWN0ID0+IHtcclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgKiBFeGlzdGluZyBjYWxsIG9yZGVycyBhcmUgYWxyZWFkeSByZW5kZXJlZCBlbHNld2hlcmUsIHNvIHdlIGZpbHRlclxyXG4gICAgICAgICAgICAqIG91dCBhc3NldHMgZnJvbSB0aGUgYml0QXNzZXRzIGxpc3QgZm9yIHdoaWNoIHRoZSBhY2NvdW50IGFscmVhZHlcclxuICAgICAgICAgICAgKiBoYXMgYSBwb3NpdGlvblxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBiaXRBc3NldHMuZmluZEluZGV4KG8gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG8gJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgby5nZXQoXCJpZFwiKSA9PT1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5nZXRJbihbXCJjYWxsX3ByaWNlXCIsIFwicXVvdGVcIiwgXCJhc3NldF9pZFwiXSlcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYml0QXNzZXRzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFiaXRBc3NldHMubGVuZ3RoKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBsZXQgcm93cyA9IGJpdEFzc2V0cy5tYXAoYSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8TWFyZ2luUG9zaXRpb25QbGFjZUhvbGRlclxyXG4gICAgICAgICAgICAgICAgICAgIGtleT17YS5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICBkZWJ0QXNzZXQ9e2EuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGF0ZXJhbEFzc2V0PXthLmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG9ydF9iYWNraW5nX2Fzc2V0XCJcclxuICAgICAgICAgICAgICAgICAgICBdKX1cclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIDx0Ym9keT57cm93c308L3Rib2R5PjtcclxuICAgIH1cclxufVxyXG5cclxuUGxhY2VIb2xkZXJXcmFwcGVyID0gQmluZFRvQ2hhaW5TdGF0ZShQbGFjZUhvbGRlcldyYXBwZXIpO1xyXG5QbGFjZUhvbGRlcldyYXBwZXIgPSBBc3NldFdyYXBwZXIoUGxhY2VIb2xkZXJXcmFwcGVyLCB7XHJcbiAgICBwcm9wTmFtZXM6IFtcImJpdEFzc2V0c1wiXSxcclxuICAgIGRlZmF1bHRQcm9wczoge1xyXG4gICAgICAgIGJpdEFzc2V0czogW1xyXG4gICAgICAgICAgICBcIjEuMy4xMDNcIixcclxuICAgICAgICAgICAgXCIxLjMuMTEzXCIsXHJcbiAgICAgICAgICAgIFwiMS4zLjEyMFwiLFxyXG4gICAgICAgICAgICBcIjEuMy4xMjFcIixcclxuICAgICAgICAgICAgXCIxLjMuOTU4XCIsXHJcbiAgICAgICAgICAgIFwiMS4zLjEzMjVcIixcclxuICAgICAgICAgICAgXCIxLjMuMTM2MlwiLFxyXG4gICAgICAgICAgICBcIjEuMy4xMDVcIixcclxuICAgICAgICAgICAgXCIxLjMuMTA2XCJcclxuICAgICAgICBdXHJcbiAgICB9LFxyXG4gICAgYXNMaXN0OiB0cnVlXHJcbn0pO1xyXG5cclxuY29uc3QgQ29sbGF0ZXJhbFRhYmxlID0gKHtcclxuICAgIGNhbGxPcmRlcnMsXHJcbiAgICBhY2NvdW50LFxyXG4gICAgY2xhc3NOYW1lLFxyXG4gICAgY2hpbGRyZW4sXHJcbiAgICBwcmVmZXJyZWRVbml0XHJcbn0pID0+IHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT17XCJ0YWJsZSB0YWJsZS1ob3ZlciBcIiArIGNsYXNzTmFtZX0+XHJcbiAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e2FsaWduTGVmdH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLmFzc2V0LnRpdGxlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17YWxpZ25SaWdodH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLmJhbGFuY2VcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXthbGlnblJpZ2h0fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNhY3Rpb24uYm9ycm93X2Ftb3VudFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e2FsaWduUmlnaHR9IGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLW1lZGl1bVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ0cmFuc2FjdGlvbi5jb2xsYXRlcmFsXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidG9vbHRpcCBpbmxpbmUtYmxvY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1wbGFjZT1cInRvcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRpcD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5jb2xsX3JhdGlvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImJvcnJvdy5jb2xsX3JhdGlvXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRvb2x0aXAgaW5saW5lLWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJ0b3BcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJvcnJvdy50YXJnZXRfY29sbGF0ZXJhbF9yYXRpb1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJib3Jyb3cudGFyZ2V0X2NvbGxhdGVyYWxfcmF0aW9fc2hvcnRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8dGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVXaXRoTGlua3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vTGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nPVwiYWNjb3VudC50b3RhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzPXtbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcmVmZXJyZWRVbml0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmc6IFwiYXNzZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e2FsaWduUmlnaHR9IGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRvb2x0aXAgaW5saW5lLWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJ0b3BcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAuY2FsbF9wcmljZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5jYWxsXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e2FsaWduUmlnaHR9IGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnByaWNlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiIHN0eWxlPXthbGlnbkxlZnR9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5hc3NldHMudW5pdHNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5tYXJrZXRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJib3Jyb3cuYWRqdXN0X3Nob3J0XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNmZXIuY2xvc2VcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICB7Y2FsbE9yZGVyc1xyXG4gICAgICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLnNwbGl0KFwiLlwiKVsyXSAtIGIuc3BsaXQoXCIuXCIpWzJdKVxyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoaWQgPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TWFyZ2luUG9zaXRpb25XcmFwcGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0PXtpZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgIDxQbGFjZUhvbGRlcldyYXBwZXJcclxuICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICBjYWxsT3JkZXJzPXtJbW11dGFibGUuTGlzdChjYWxsT3JkZXJzKX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPHRib2R5PntjaGlsZHJlbn08L3Rib2R5PlxyXG4gICAgICAgIDwvdGFibGU+XHJcbiAgICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ29sbGF0ZXJhbFRhYmxlO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge0NvbXBvbmVudH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XG5pbXBvcnQgUHJvcG9zZWRPcGVyYXRpb24sIHtcbiAgICBUcmFuc2FjdGlvbklEQW5kRXhwaXJ5XG59IGZyb20gXCJjb21wb25lbnRzL0Jsb2NrY2hhaW4vUHJvcG9zZWRPcGVyYXRpb25cIjtcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCJjb21wb25lbnRzL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcImNvbXBvbmVudHMvVXRpbGl0eS9DaGFpblR5cGVzXCI7XG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xuaW1wb3J0IFByb3Bvc2FsQXBwcm92ZU1vZGFsLCB7XG4gICAgZmluYWxSZXF1aXJlZFBlcm1zXG59IGZyb20gXCIuLi9Nb2RhbC9Qcm9wb3NhbEFwcHJvdmVNb2RhbFwiO1xuaW1wb3J0IE5lc3RlZEFwcHJvdmFsU3RhdGUgZnJvbSBcIi4uL0FjY291bnQvTmVzdGVkQXBwcm92YWxTdGF0ZVwiO1xuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcbmltcG9ydCBwdSBmcm9tIFwiY29tbW9uL3Blcm1pc3Npb25fdXRpbHNcIjtcbmltcG9ydCBMaW5rVG9BY2NvdW50QnlJZCBmcm9tIFwiLi4vVXRpbGl0eS9MaW5rVG9BY2NvdW50QnlJZFwiO1xuaW1wb3J0IEFjY291bnRTdG9yZSBmcm9tIFwic3RvcmVzL0FjY291bnRTdG9yZVwiO1xuaW1wb3J0IGFjY291bnRVdGlscyBmcm9tIFwiY29tbW9uL2FjY291bnRfdXRpbHNcIjtcbmltcG9ydCB7VG9vbHRpcH0gZnJvbSBcImFudGRcIjtcblxuY2xhc3MgUHJvcG9zYWxzIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBhY2NvdW50OiBDaGFpblR5cGVzLkNoYWluQWNjb3VudC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUgPSB0aGlzLmZvcmNlVXBkYXRlLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5faXNTY2FtID0gdGhpcy5faXNTY2FtLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2lzVW5rbm93biA9IHRoaXMuX2lzVW5rbm93bi5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAvKlxuICAgICAgICAgKiBBY2NvdW50IG9iamVjdHMgZG9uJ3QgZ2V0IHVwZGF0ZWQgYnkgdW5kZXJseWluZyBwcm9wb3NhbCBjaGFuZ2VzLCBidXRcbiAgICAgICAgICogdGhlIENoYWluU3RvcmUgZG9lcywgc28gaW4gb3JkZXIgdG8gdXBkYXRlIHRoaXMgY29tcG9uZW50IHdoZW4gYSBwcm9wb3NhbFxuICAgICAgICAgKiBjaGFuZ2VzLCB3ZSBuZWVkIHRvIHVwZGF0ZSBpdCB3aGVuZXZlciB0aGUgQ2hhaW5TdG9yZSBpdHNlbGYgdXBkYXRlc1xuICAgICAgICAgKi9cbiAgICAgICAgQ2hhaW5TdG9yZS5zdWJzY3JpYmUodGhpcy5mb3JjZVVwZGF0ZSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIENoYWluU3RvcmUudW5zdWJzY3JpYmUodGhpcy5mb3JjZVVwZGF0ZSk7XG4gICAgfVxuXG4gICAgX29uQXBwcm92ZU1vZGFsKGlkLCBhY3Rpb24pIHtcbiAgICAgICAgaWYgKHRoaXMucmVmc1tpZCArIFwiX1wiICsgYWN0aW9uXSkge1xuICAgICAgICAgICAgdGhpcy5yZWZzW2lkICsgXCJfXCIgKyBhY3Rpb25dLnNob3coKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9jYW5SZWplY3QocHJvcG9zYWwpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHByb3Bvc2FsLmF2YWlsYWJsZV9hY3RpdmVfYXBwcm92YWxzLmxlbmd0aCB8fFxuICAgICAgICAgICAgcHJvcG9zYWwuYXZhaWxhYmxlX293bmVyX2FwcHJvdmFscy5sZW5ndGggfHxcbiAgICAgICAgICAgIHByb3Bvc2FsLmF2YWlsYWJsZV9rZXlfYXBwcm92YWxzLmxlbmd0aFxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9pc1NjYW0ocHJvcG9zYWwpIHtcbiAgICAgICAgbGV0IGlzU2NhbSA9IGZhbHNlO1xuXG4gICAgICAgIGxldCB0b3VjaGVkQWNjb3VudHMgPSBbXTtcbiAgICAgICAgcHJvcG9zYWwub3BlcmF0aW9ucy5mb3JFYWNoKG8gPT4ge1xuICAgICAgICAgICAgaWYgKG8uZ2V0KDApID09IDYpIHtcbiAgICAgICAgICAgICAgICB0b3VjaGVkQWNjb3VudHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgby5nZXRJbihbMSwgXCJhY3RpdmVcIiwgXCJhY2NvdW50X2F1dGhzXCIsIDAsIDBdKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdG91Y2hlZEFjY291bnRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIG8uZ2V0SW4oWzEsIFwib3duZXJcIiwgXCJhY2NvdW50X2F1dGhzXCIsIDAsIDBdKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRvdWNoZWRBY2NvdW50cy5wdXNoKG8uZ2V0SW4oWzEsIFwidG9cIl0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHByb3Bvc2VyID0gcHJvcG9zYWwucHJvcG9zYWwuZ2V0KFwicHJvcG9zZXJcIik7XG5cbiAgICAgICAgdG91Y2hlZEFjY291bnRzLnB1c2gocHJvcG9zZXIpO1xuXG4gICAgICAgIC8qIGlmIChfX0RFVl9fKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBcIlByb3Bvc2VkIHRyYW5zYWN0aW9uczogXCIsXG4gICAgICAgICAgICAgICAgcHJvcG9zYWwsXG4gICAgICAgICAgICAgICAgXCIgdG91Y2hpbmcgYWNjb3VudHMgXCIsXG4gICAgICAgICAgICAgICAgdG91Y2hlZEFjY291bnRzXG4gICAgICAgICAgICApO1xuICAgICAgICB9ICovXG5cbiAgICAgICAgdG91Y2hlZEFjY291bnRzLmZvckVhY2goX2FjY291bnQgPT4ge1xuICAgICAgICAgICAgaWYgKGFjY291bnRVdGlscy5pc0tub3duU2NhbW1lcihfYWNjb3VudCkpIHtcbiAgICAgICAgICAgICAgICBpc1NjYW0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJibGFja2xpc3RlZF9hY2NvdW50c1wiKS5zb21lKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSA9PT0gX2FjY291bnQ7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGlzU2NhbSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaXNTY2FtO1xuICAgIH1cblxuICAgIF9pc1Vua25vd24ocHJvcG9zYWwpIHtcbiAgICAgICAgbGV0IGlzVW5rbm93biA9IHRydWU7XG5cbiAgICAgICAgbGV0IHRvdWNoZWRBY2NvdW50cyA9IFtdO1xuICAgICAgICBwcm9wb3NhbC5vcGVyYXRpb25zLmZvckVhY2gobyA9PiB7XG4gICAgICAgICAgICBpZiAoby5nZXQoMCkgPT0gNikge1xuICAgICAgICAgICAgICAgIHRvdWNoZWRBY2NvdW50cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICBvLmdldEluKFsxLCBcImFjdGl2ZVwiLCBcImFjY291bnRfYXV0aHNcIiwgMCwgMF0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0b3VjaGVkQWNjb3VudHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgby5nZXRJbihbMSwgXCJvd25lclwiLCBcImFjY291bnRfYXV0aHNcIiwgMCwgMF0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdG91Y2hlZEFjY291bnRzLnB1c2goby5nZXRJbihbMSwgXCJ0b1wiXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgcHJvcG9zZXIgPSBwcm9wb3NhbC5wcm9wb3NhbC5nZXQoXCJwcm9wb3NlclwiKTtcblxuICAgICAgICB0b3VjaGVkQWNjb3VudHMucHVzaChwcm9wb3Nlcik7XG4gICAgICAgIHRvdWNoZWRBY2NvdW50cy5mb3JFYWNoKF9hY2NvdW50ID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwid2hpdGVsaXN0ZWRfYWNjb3VudHNcIikuc29tZShpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0gPT09IF9hY2NvdW50O1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBpc1Vua25vd24gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzdGFycmVkID0gQWNjb3VudFN0b3JlLmdldFN0YXRlKCkuc3RhcnJlZEFjY291bnRzO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHN0YXJyZWQuc29tZShpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5hbWUgPSBDaGFpblN0b3JlLmdldEFjY291bnQoaXRlbSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISFuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZS5nZXQoXCJpZFwiKSA9PSBfYWNjb3VudDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBpc1Vua25vd24gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjb250YWN0cyA9IEFjY291bnRTdG9yZS5nZXRTdGF0ZSgpLmFjY291bnRDb250YWN0cztcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBjb250YWN0cy5zb21lKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IENoYWluU3RvcmUuZ2V0QWNjb3VudChpdGVtLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIW5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lLmdldChcImlkXCIpID09IF9hY2NvdW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgaXNVbmtub3duID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaXNVbmtub3duO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHthY2NvdW50fSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmICghYWNjb3VudCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgbGV0IHByb3Bvc2FscyA9IFtdO1xuXG4gICAgICAgIGlmIChhY2NvdW50LmdldChcInByb3Bvc2Fsc1wiKS5zaXplKSB7XG4gICAgICAgICAgICBhY2NvdW50LmdldChcInByb3Bvc2Fsc1wiKS5mb3JFYWNoKHByb3Bvc2FsX2lkID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcG9zYWwgPSBDaGFpblN0b3JlLmdldE9iamVjdChwcm9wb3NhbF9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKHByb3Bvc2FsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9wb3NlZF90cmFuc2FjdGlvbiA9IHByb3Bvc2FsLmdldChcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicHJvcG9zZWRfdHJhbnNhY3Rpb25cIlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3BlcmF0aW9ucyA9IHByb3Bvc2VkX3RyYW5zYWN0aW9uLmdldChcIm9wZXJhdGlvbnNcIik7XG4gICAgICAgICAgICAgICAgICAgIHByb3Bvc2Fscy5wdXNoKHtvcGVyYXRpb25zLCBhY2NvdW50LCBwcm9wb3NhbH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHByb3Bvc2FsUm93cyA9IHByb3Bvc2Fsc1xuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXRpbHMuc29ydElEKFxuICAgICAgICAgICAgICAgICAgICBhLnByb3Bvc2FsLmdldChcImlkXCIpLFxuICAgICAgICAgICAgICAgICAgICBiLnByb3Bvc2FsLmdldChcImlkXCIpLFxuICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAucmVkdWNlKChyZXN1bHQsIHByb3Bvc2FsLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gcHJvcG9zYWwucHJvcG9zYWwuZ2V0KFwiaWRcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcG9zZXIgPSBwcm9wb3NhbC5wcm9wb3NhbC5nZXQoXCJwcm9wb3NlclwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBleHBpcmF0aW9uID0gcHJvcG9zYWwucHJvcG9zYWwuZ2V0KFwiZXhwaXJhdGlvbl90aW1lXCIpO1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0ID0gcHJvcG9zYWwub3BlcmF0aW9uc1xuICAgICAgICAgICAgICAgICAgICAubWFwKChvLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJvcG9zZWRPcGVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsLmdldChcImlkXCIpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiX29wZXJhdGlvbl9cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb249e2V4cGlyYXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A9e28udG9KUygpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnRlZD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVGZWU9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVPcExhYmVsPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlRXhwaXJhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlRGF0ZT17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWw9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtpZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zZXI9e3Byb3Bvc2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudG9BcnJheSgpO1xuXG4gICAgICAgICAgICAgICAgbGV0IGNhblJlamVjdCA9IHRoaXMuX2NhblJlamVjdChwcm9wb3NhbC5wcm9wb3NhbC50b0pTKCkpO1xuICAgICAgICAgICAgICAgIGxldCBwcm9wb3NhbElkID0gcHJvcG9zYWwucHJvcG9zYWwuZ2V0KFwiaWRcIik7XG5cbiAgICAgICAgICAgICAgICBsZXQgdHlwZSA9IHByb3Bvc2FsLnByb3Bvc2FsLmdldChcInJlcXVpcmVkX2FjdGl2ZV9hcHByb3ZhbHNcIilcbiAgICAgICAgICAgICAgICAgICAgLnNpemVcbiAgICAgICAgICAgICAgICAgICAgPyBcImFjdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgIDogXCJvd25lclwiO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8dHIga2V5PXtgJHtwcm9wb3NhbElkfV9pZGB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sU3Bhbj1cIjRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHJvcG9zYWxcIiArIChpbmRleCA9PT0gMCA/IFwiIGZpcnN0XCIgOiBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNhY3Rpb25JREFuZEV4cGlyeVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17aWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb249e2V4cGlyYXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZSA9IHB1Lmxpc3RUb0lEcyhcbiAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWwuZ2V0KGBhdmFpbGFibGVfJHt0eXBlfV9hcHByb3ZhbHNgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXZhaWxhYmxlS2V5cyA9IHB1Lmxpc3RUb0lEcyhcbiAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWwuZ2V0KFwiYXZhaWxhYmxlX2tleV9hcHByb3ZhbHNcIilcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWQgPSBwdS5saXN0VG9JRHMoXG4gICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsLmdldChgcmVxdWlyZWRfJHt0eXBlfV9hcHByb3ZhbHNgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWRQZXJtaXNzaW9ucyA9IHB1LnVubmVzdChyZXF1aXJlZCwgdHlwZSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBbYWNjb3VudHMsIGtleXNdID0gZmluYWxSZXF1aXJlZFBlcm1zKFxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFBlcm1pc3Npb25zLFxuICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGUsXG4gICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZUtleXNcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudE5hbWVzID0gW107XG5cbiAgICAgICAgICAgICAgICBpZiAoYWNjb3VudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRzLmZvckVhY2goYWNjb3VudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFwcm9wb3NhbC5wcm9wb3NhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KGBhdmFpbGFibGVfJHt0eXBlfV9hcHByb3ZhbHNgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoYWNjb3VudClcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lcy5wdXNoKGFjY291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBrZXlOYW1lcyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChrZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc01pbmUgPSBBY2NvdW50U3RvcmUuaXNNeUtleShrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTWluZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFwcm9wb3NhbC5wcm9wb3NhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KFwiYXZhaWxhYmxlX2tleV9hcHByb3ZhbHNcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleU5hbWVzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgY2FuQXBwcm92ZSA9IGFjY291bnROYW1lcy5sZW5ndGggKyBrZXlOYW1lcy5sZW5ndGggPiAwO1xuXG4gICAgICAgICAgICAgICAgbGV0IGlzU2NhbSA9IHRoaXMuX2lzU2NhbShwcm9wb3NhbCk7XG4gICAgICAgICAgICAgICAgbGV0IGlzVW5rbm93biA9IHRoaXMuX2lzVW5rbm93bihwcm9wb3NhbCk7XG5cbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPHRyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0b3AtbGVmdC1hbGlnblwiXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake3Byb3Bvc2FsSWR9X2NvbnRlbnRgfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e3RleHR9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVxdWlyZWRQZXJtaXNzaW9ucy5tYXAoKGFjY291bnQsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImxpc3QtaXRlbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake3Byb3Bvc2FsSWR9X2FwcHJvdmVyXyR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtUb0FjY291bnRCeUlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VicGFnZT1cInBlcm1pc3Npb25zXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50LmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxOZXN0ZWRBcHByb3ZhbFN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsPXtwcm9wb3NhbC5wcm9wb3NhbC5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT17dHlwZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJhcHByb3ZhbC1idXR0b25zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2lzU2NhbSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5wcm9wb3NlX3NjYW1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidG9vbHRpcCBoYXMtZXJyb3Igc2NhbS1lcnJvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNDQU0gQVRURU1QVFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5oaWRlRmlzaGluZ1Byb3Bvc2FscyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaXNTY2FtICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVW5rbm93biAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5wcm9wb3NlX3Vua25vd25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0b29sdGlwIGhhcy1lcnJvciBzY2FtLWVycm9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVOS05PV04gU09VUkNFXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFpc1NjYW0gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFpc1Vua25vd24gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnByb3BzLmhpZGVGaXNoaW5nUHJvcG9zYWxzKSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkFwcHJvdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5fb25BcHByb3ZlTW9kYWwuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhcHByb3ZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoKSA9PiB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJ1dHRvbiBwcmltYXJ5IGhvbGxvd1wiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNhbkFwcHJvdmUgPyBcIlwiIDogXCIgaGlkZGVuXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJwcm9wb3NhbC5hcHByb3ZlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJvcG9zYWxBcHByb3ZlTW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtwcm9wb3NhbElkICsgXCJfXCIgKyBcImFwcHJvdmVcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxJZD17cHJvcG9zYWxJZCArIFwiX1wiICsgXCJhcHByb3ZlXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3Byb3Bvc2FsLmFjY291bnQuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsPXtwcm9wb3NhbElkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb249XCJhcHByb3ZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjYW5SZWplY3QgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uQXBwcm92ZU1vZGFsLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicmVqZWN0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b24gcHJpbWFyeSBob2xsb3dcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJwcm9wb3NhbC5yZWplY3RcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJvcG9zYWxBcHByb3ZlTW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtwcm9wb3NhbElkICsgXCJfXCIgKyBcInJlamVjdFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RhbElkPXtwcm9wb3NhbElkICsgXCJfXCIgKyBcInJlamVjdFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXtwcm9wb3NhbC5hY2NvdW50LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbD17cHJvcG9zYWxJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPVwicmVqZWN0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25BcHByb3ZlTW9kYWwuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkZWxldGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b24gcHJpbWFyeSBob2xsb3dcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwicHJvcG9zYWwuZGVsZXRlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJvcG9zYWxBcHByb3ZlTW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtwcm9wb3NhbElkICsgXCJfXCIgKyBcImRlbGV0ZVwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RhbElkPXtwcm9wb3NhbElkICsgXCJfXCIgKyBcImRlbGV0ZVwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXtwcm9wb3NhbC5hY2NvdW50LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbD17cHJvcG9zYWxJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPVwiZGVsZXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8dHIga2V5PXtgJHtwcm9wb3NhbElkfV9zZXBhcmF0b3JgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDx0YWJsZVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XCJ0YWJsZSBwcm9wb3NhbHMgY29tcGFjdCBcIiArIHRoaXMucHJvcHMuY2xhc3NOYW1lfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInByb3Bvc2FsLnByb3Bvc2Fsc1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInByb3Bvc2FsLmFwcHJvdmVyc1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInByb3Bvc2FsLnN0YXR1c1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInByb3Bvc2FsLmFjdGlvblwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgICAgICAgPHRib2R5Pntwcm9wb3NhbFJvd3N9PC90Ym9keT5cbiAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCaW5kVG9DaGFpblN0YXRlKFByb3Bvc2Fscyk7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgWmZBcGkgZnJvbSBcInJlYWN0LWZvdW5kYXRpb24tYXBwcy9zcmMvdXRpbHMvZm91bmRhdGlvbi1hcGlcIjtcbmltcG9ydCBCYXNlTW9kYWwgZnJvbSBcIi4vQmFzZU1vZGFsXCI7XG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XG5pbXBvcnQgQWNjb3VudFNlbGVjdCBmcm9tIFwiY29tcG9uZW50cy9Gb3Jtcy9BY2NvdW50U2VsZWN0XCI7XG5pbXBvcnQgQWNjb3VudFN0b3JlIGZyb20gXCJzdG9yZXMvQWNjb3VudFN0b3JlXCI7XG5pbXBvcnQgV2FsbGV0RGIgZnJvbSBcInN0b3Jlcy9XYWxsZXREYlwiO1xuaW1wb3J0IFdhbGxldEFwaSBmcm9tIFwiYXBpL1dhbGxldEFwaVwiO1xuaW1wb3J0IE5lc3RlZEFwcHJvdmFsU3RhdGUgZnJvbSBcIi4uL0FjY291bnQvTmVzdGVkQXBwcm92YWxTdGF0ZVwiO1xuaW1wb3J0IHB1IGZyb20gXCJjb21tb24vcGVybWlzc2lvbl91dGlsc1wiO1xuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcblxuZXhwb3J0IGNvbnN0IGZpbmFsUmVxdWlyZWRQZXJtcyA9IChcbiAgICByZXF1aXJlZFBlcm1pc3Npb25zLFxuICAgIGF2YWlsYWJsZSxcbiAgICBhdmFpbGFibGVLZXlzXG4pID0+IHtcbiAgICBsZXQgZmluYWxSZXF1aXJlZCA9IFtdO1xuXG4gICAgcmVxdWlyZWRQZXJtaXNzaW9ucy5mb3JFYWNoKGFjY291bnQgPT4ge1xuICAgICAgICBmaW5hbFJlcXVpcmVkID0gZmluYWxSZXF1aXJlZC5jb25jYXQoYWNjb3VudC5nZXRNaXNzaW5nU2lncyhhdmFpbGFibGUpKTtcbiAgICB9KTtcblxuICAgIGxldCBmaW5hbFJlcXVpcmVkS2V5cyA9IFtdO1xuXG4gICAgcmVxdWlyZWRQZXJtaXNzaW9ucy5mb3JFYWNoKGFjY291bnQgPT4ge1xuICAgICAgICBmaW5hbFJlcXVpcmVkS2V5cyA9IGZpbmFsUmVxdWlyZWRLZXlzLmNvbmNhdChcbiAgICAgICAgICAgIGFjY291bnQuZ2V0TWlzc2luZ0tleXMoYXZhaWxhYmxlS2V5cylcbiAgICAgICAgKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBbZmluYWxSZXF1aXJlZCwgZmluYWxSZXF1aXJlZEtleXNdO1xufTtcblxuY2xhc3MgUHJvcG9zYWxBcHByb3ZlTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGFjY291bnRzOiBDaGFpblR5cGVzLkNoYWluQWNjb3VudHNMaXN0XG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBhY3RpdmU6IG51bGwsXG4gICAgICAgICAgICBrZXk6IG51bGwsXG4gICAgICAgICAgICBvd25lcjogbnVsbCxcbiAgICAgICAgICAgIHBheWVlOiBudWxsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgb25BY3RpdmVBY2NvdW50KGFjY291bnRNYXAsIGtleU1hcCwgdHlwZSwgYWNjb3VudCkge1xuICAgICAgICBsZXQgbmV3U3RhdGUgPSB7fTtcblxuICAgICAgICBpZiAoa2V5TWFwW2FjY291bnRdKSB7XG4gICAgICAgICAgICBuZXdTdGF0ZVtcImtleVwiXSA9IGFjY291bnQ7XG4gICAgICAgICAgICBuZXdTdGF0ZVt0eXBlXSA9IG51bGw7XG4gICAgICAgIH0gZWxzZSBpZiAoYWNjb3VudCkge1xuICAgICAgICAgICAgbmV3U3RhdGVbdHlwZV0gPSBhY2NvdW50TWFwW2FjY291bnRdO1xuICAgICAgICAgICAgbmV3U3RhdGVbXCJrZXlcIl0gPSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3U3RhdGVbdHlwZV0gPSBudWxsO1xuICAgICAgICAgICAgbmV3U3RhdGVbXCJrZXlcIl0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpO1xuICAgIH1cblxuICAgIF9vblByb3Bvc2FsQWN0aW9uKG9sZFByb3Bvc2FsKSB7XG4gICAgICAgIGxldCBwcm9wb3NhbE9iamVjdCA9IG9sZFByb3Bvc2FsLnRvSlMoKTtcbiAgICAgICAgbGV0IHthY3RpdmUsIGtleSwgb3duZXIsIHBheWVlfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgbGV0IHByb3Bvc2FsID0ge1xuICAgICAgICAgICAgZmVlX3BheWluZ19hY2NvdW50OiBwYXllZSB8fCBhY3RpdmUsXG4gICAgICAgICAgICBwcm9wb3NhbDogcHJvcG9zYWxPYmplY3QuaWQsXG4gICAgICAgICAgICBhY3RpdmVfYXBwcm92YWxzX3RvX2FkZDogW10sXG4gICAgICAgICAgICBhY3RpdmVfYXBwcm92YWxzX3RvX3JlbW92ZTogW10sXG4gICAgICAgICAgICBvd25lcl9hcHByb3ZhbHNfdG9fYWRkOiBbXSxcbiAgICAgICAgICAgIG93bmVyX2FwcHJvdmFsc190b19yZW1vdmU6IFtdLFxuICAgICAgICAgICAga2V5X2FwcHJvdmFsc190b19hZGQ6IFtdLFxuICAgICAgICAgICAga2V5X2FwcHJvdmFsc190b19yZW1vdmU6IFtdXG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IGlzQWRkID0gdGhpcy5wcm9wcy5hY3Rpb24gPT09IFwiYXBwcm92ZVwiO1xuXG4gICAgICAgIGxldCBuZWVkZWRLZXlzID0gW107XG5cbiAgICAgICAgW1wiYWN0aXZlXCIsIFwib3duZXJcIiwgXCJrZXlcIl0uZm9yRWFjaChhdXRoX3R5cGUgPT4ge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5zdGF0ZVthdXRoX3R5cGVdO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbGV0IGhhc1ZhbHVlID1cbiAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWxPYmplY3RbYGF2YWlsYWJsZV8ke2F1dGhfdHlwZX1fYXBwcm92YWxzYF0uaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICkgIT09IC0xO1xuICAgICAgICAgICAgICAgIGlmICgoaXNBZGQgJiYgIWhhc1ZhbHVlKSB8fCAoIWlzQWRkICYmIGhhc1ZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3Rpb24gPT09IFwiYXBwcm92ZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbFtgJHthdXRoX3R5cGV9X2FwcHJvdmFsc190b19hZGRgXSA9IFt2YWx1ZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV0aF90eXBlID09PSBcImtleVwiKSBuZWVkZWRLZXlzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuYWN0aW9uID09PSBcInJlamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbFtgJHthdXRoX3R5cGV9X2FwcHJvdmFsc190b19yZW1vdmVgXSA9IFt2YWx1ZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV0aF90eXBlID09PSBcImtleVwiKSBuZWVkZWRLZXlzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgdHIgPSBXYWxsZXRBcGkubmV3X3RyYW5zYWN0aW9uKCk7XG4gICAgICAgIHRyLmFkZF90eXBlX29wZXJhdGlvbihcInByb3Bvc2FsX3VwZGF0ZVwiLCBwcm9wb3NhbCk7XG4gICAgICAgIFdhbGxldERiLnByb2Nlc3NfdHJhbnNhY3Rpb24odHIsIG51bGwsIHRydWUsIG5lZWRlZEtleXMpO1xuXG4gICAgICAgIFpmQXBpLnB1Ymxpc2godGhpcy5wcm9wcy5tb2RhbElkLCBcImNsb3NlXCIpO1xuICAgIH1cblxuICAgIG9uQ2hhbmdlUGF5ZWUoYWNjb3VudCkge1xuICAgICAgICBsZXQgZnVsbEFjY291bnQgPSBDaGFpblN0b3JlLmdldEFjY291bnQoYWNjb3VudCk7XG5cbiAgICAgICAgaWYgKGZ1bGxBY2NvdW50KSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBwYXllZTogZnVsbEFjY291bnQuZ2V0KFwiaWRcIilcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25DYW5jZWwoKSB7XG4gICAgICAgIFpmQXBpLnB1Ymxpc2godGhpcy5wcm9wcy5tb2RhbElkLCBcImNsb3NlXCIpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHtwcm9wb3NhbCwgdHlwZX0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIGxldCBhY2NvdW50TmFtZXMgPSBbXTtcbiAgICAgICAgbGV0IGFjY291bnRNYXAgPSB7fTtcbiAgICAgICAgbGV0IGlzQWRkID0gdGhpcy5wcm9wcy5hY3Rpb24gPT09IFwiYXBwcm92ZVwiO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjY291bnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50cy5mb3JFYWNoKGFjY291bnQgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBhY2NvdW50Q2hlY2sgPSBpc0FkZFxuICAgICAgICAgICAgICAgICAgICA/IGFjY291bnQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAhcHJvcG9zYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldChgYXZhaWxhYmxlXyR7dHlwZX1fYXBwcm92YWxzYClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGFjY291bnQuZ2V0KFwiaWRcIikpXG4gICAgICAgICAgICAgICAgICAgIDogYWNjb3VudCAmJlxuICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoYGF2YWlsYWJsZV8ke3R5cGV9X2FwcHJvdmFsc2ApXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhhY2NvdW50LmdldChcImlkXCIpKTtcbiAgICAgICAgICAgICAgICBpZiAoYWNjb3VudENoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRNYXBbYWNjb3VudC5nZXQoXCJuYW1lXCIpXSA9IGFjY291bnQuZ2V0KFwiaWRcIik7XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lcy5wdXNoKGFjY291bnQuZ2V0KFwibmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQga2V5TmFtZXMgPSBbXTtcbiAgICAgICAgbGV0IGtleU1hcCA9IHt9O1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5rZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5rZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaXNNaW5lID0gQWNjb3VudFN0b3JlLmlzTXlLZXkoa2V5KTtcbiAgICAgICAgICAgICAgICBsZXQgaGFzVmFsdWUgPSBwcm9wb3NhbFxuICAgICAgICAgICAgICAgICAgICAuZ2V0KFwiYXZhaWxhYmxlX2tleV9hcHByb3ZhbHNcIilcbiAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAoaXNNaW5lICYmIGlzQWRkICYmICFoYXNWYWx1ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKGlzTWluZSAmJiAhaXNBZGQgJiYgaGFzVmFsdWUpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleU1hcFtrZXldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAga2V5TmFtZXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG15QWNjb3VudHMgPSBBY2NvdW50U3RvcmUuZ2V0TXlBY2NvdW50cygpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8Zm9ybSBjbGFzc05hbWU9XCJncmlkLWJsb2NrIHZlcnRpY2FsIGZ1bGwtd2lkdGgtY29udGVudFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17YG1vZGFsLnByb3Bvc2Fscy5hY3Rpb25zLiR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiaDRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2tcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nUmlnaHQ6IFwiMjAlXCJ9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TmVzdGVkQXBwcm92YWxTdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWw9e3Byb3Bvc2FsLmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9e3R5cGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FkZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnN0YXRlLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5zdGF0ZS5rZXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuc3RhdGVbdHlwZV0gfHwgbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaXNBZGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5zdGF0ZS5rZXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUua2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnN0YXRlW3R5cGVdIHx8IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub0ZhaWxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBmdWxsLXdpZHRoLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbC13aWR0aC1jb250ZW50IGZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJtb2RhbC5wcm9wb3NhbHMucGF5X3dpdGhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJsYWJlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X25hbWVzPXtteUFjY291bnRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZVBheWVlLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICB7YWNjb3VudE5hbWVzLmxlbmd0aCB8fCBrZXlOYW1lcy5sZW5ndGggPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmdWxsLXdpZHRoLWNvbnRlbnQgZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtgbW9kYWwucHJvcG9zYWxzLmFwcHJvdmFsXyR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBZGQgPyBcImFkZFwiIDogXCJyZW1vdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJsYWJlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X25hbWVzPXthY2NvdW50TmFtZXMuY29uY2F0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleU5hbWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25BY3RpdmVBY2NvdW50LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50TWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleU1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtmYWxzZSAmJiBrZXlOYW1lcy5sZW5ndGggPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmdWxsLXdpZHRoLWNvbnRlbnQgZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtgbW9kYWwucHJvcG9zYWxzLmtleV9hcHByb3ZhbF8ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWRkID8gXCJhZGRcIiA6IFwicmVtb3ZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwibGFiZWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudF9uYW1lcz17a2V5TmFtZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkFjdGl2ZUFjY291bnQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleU1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImtleVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblByb3Bvc2FsQWN0aW9uLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17aXNBZGQgPyBcIkFwcHJvdmVcIiA6IFwiUmVtb3ZlXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25DYW5jZWwuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCIgYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0uY2FuY2VsXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgKTtcbiAgICB9XG59XG5Qcm9wb3NhbEFwcHJvdmVNb2RhbCA9IEJpbmRUb0NoYWluU3RhdGUoUHJvcG9zYWxBcHByb3ZlTW9kYWwpO1xuXG5jbGFzcyBGaXJzdExldmVsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBhY2NvdW50OiBDaGFpblR5cGVzLkNoYWluQWNjb3VudC5pc1JlcXVpcmVkLFxuICAgICAgICBwcm9wb3NhbDogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlKCk7XG5cbiAgICAgICAgQ2hhaW5TdG9yZS5zdWJzY3JpYmUodGhpcy5fdXBkYXRlU3RhdGUpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBDaGFpblN0b3JlLnVuc3Vic2NyaWJlKHRoaXMuX3VwZGF0ZVN0YXRlKTtcbiAgICB9XG5cbiAgICBfdXBkYXRlU3RhdGUoKSB7XG4gICAgICAgIGxldCB7cHJvcG9zYWwsIGFjY291bnR9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgbGV0IHR5cGUgPSBwcm9wb3NhbC5nZXQoXCJyZXF1aXJlZF9hY3RpdmVfYXBwcm92YWxzXCIpLnNpemVcbiAgICAgICAgICAgID8gXCJhY3RpdmVcIlxuICAgICAgICAgICAgOiBcIm93bmVyXCI7XG5cbiAgICAgICAgbGV0IHJlcXVpcmVkID0gcHUubGlzdFRvSURzKHByb3Bvc2FsLmdldChgcmVxdWlyZWRfJHt0eXBlfV9hcHByb3ZhbHNgKSk7XG4gICAgICAgIGxldCBhdmFpbGFibGUgPSBwdS5saXN0VG9JRHMoXG4gICAgICAgICAgICBwcm9wb3NhbC5nZXQoYGF2YWlsYWJsZV8ke3R5cGV9X2FwcHJvdmFsc2ApXG4gICAgICAgICk7XG4gICAgICAgIGxldCBhdmFpbGFibGVLZXlzID0gcHUubGlzdFRvSURzKFxuICAgICAgICAgICAgcHJvcG9zYWwuZ2V0KFwiYXZhaWxhYmxlX2tleV9hcHByb3ZhbHNcIilcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHJlcXVpcmVkUGVybWlzc2lvbnM6IHB1LnVubmVzdChyZXF1aXJlZCwgdHlwZSksXG4gICAgICAgICAgICBhdmFpbGFibGUsXG4gICAgICAgICAgICBhdmFpbGFibGVLZXlzLFxuICAgICAgICAgICAgdHlwZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7YWN0aW9ufSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB7cmVxdWlyZWRQZXJtaXNzaW9ucywgYXZhaWxhYmxlLCBhdmFpbGFibGVLZXlzLCB0eXBlfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgY29uc3QgW2ZpbmFsUmVxdWlyZWQsIGZpbmFsUmVxdWlyZWRLZXlzXSA9IGZpbmFsUmVxdWlyZWRQZXJtcyhcbiAgICAgICAgICAgIHJlcXVpcmVkUGVybWlzc2lvbnMsXG4gICAgICAgICAgICBhdmFpbGFibGUsXG4gICAgICAgICAgICBhdmFpbGFibGVLZXlzXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxQcm9wb3NhbEFwcHJvdmVNb2RhbFxuICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICAgICAgICAgIHR5cGU9e3R5cGV9XG4gICAgICAgICAgICAgICAgYWNjb3VudHM9e2FjdGlvbiA9PT0gXCJhcHByb3ZlXCIgPyBmaW5hbFJlcXVpcmVkIDogYXZhaWxhYmxlfVxuICAgICAgICAgICAgICAgIGtleXM9e2FjdGlvbiA9PT0gXCJhcHByb3ZlXCIgPyBmaW5hbFJlcXVpcmVkS2V5cyA6IGF2YWlsYWJsZUtleXN9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cbn1cbkZpcnN0TGV2ZWwgPSBCaW5kVG9DaGFpblN0YXRlKEZpcnN0TGV2ZWwpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBvcGVuOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBaZkFwaS5zdWJzY3JpYmUodGhpcy5wcm9wcy5tb2RhbElkLCAobXNnLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBvcGVuOiBkYXRhID09PSBcIm9wZW5cIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3coKSB7XG4gICAgICAgIFpmQXBpLnB1Ymxpc2godGhpcy5wcm9wcy5tb2RhbElkLCBcIm9wZW5cIik7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge21vZGFsSWQsIHByb3Bvc2FsfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxCYXNlTW9kYWwgaWQ9e21vZGFsSWR9IG92ZXJsYXk9e3RydWV9IHJlZj17bW9kYWxJZH0+XG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUub3BlbiA/IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIHZlcnRpY2FsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rmlyc3RMZXZlbCB7Li4udGhpcy5wcm9wc30gLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8L0Jhc2VNb2RhbD5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgTGlua1RvQWNjb3VudEJ5SWQgZnJvbSBcIi4uL1V0aWxpdHkvTGlua1RvQWNjb3VudEJ5SWRcIjtcclxuaW1wb3J0IHB1IGZyb20gXCJjb21tb24vcGVybWlzc2lvbl91dGlsc1wiO1xyXG5pbXBvcnQge2Nsb25lRGVlcH0gZnJvbSBcImxvZGFzaC1lc1wiO1xyXG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQge1xyXG4gICAgQXV0aG9yaXR5RGVwdGhPdmVyZmxvd1dhcm5pbmcsXHJcbiAgICBDaGlsZEF1dGhvcml0eURlcHRoT3ZlcmZsb3dXYXJuaW5nLFxyXG4gICAgUGVuZGluZyxcclxuICAgIFJldmlldyxcclxuICAgIEZhaWxlZCxcclxuICAgIEV4cGFuZEJ1dHRvbixcclxuICAgIEFwcHJvdmVkSWNvbixcclxuICAgIEtleVBlcm1pc3Npb25CcmFuY2gsXHJcbiAgICBoYXNBdXRob3JpdHlEZXB0aFByb2JsZW0sXHJcbiAgICBpc0FwcHJvdmVkLFxyXG4gICAgc3RhdHVzVGV4dCxcclxuICAgIG5vdE5lc3RkV2VpZ2h0XHJcbn0gZnJvbSBcIi4vTmVzdGVkQXBwcm92YWxTdGF0ZUxpYlwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcblxyXG5jbGFzcyBBY2NvdW50UGVybWlzc2lvblRyZWUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtleHBhbmRlZDogISFwcm9wcy5leHBhbmRlZH07XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFjY291bnQ6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgYWNjb3VudHM6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50c0xpc3QsXHJcbiAgICAgICAgbGV2ZWw6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIGxldmVsOiAwXHJcbiAgICB9O1xyXG5cclxuICAgIGhhbmRsZUV4cGFuZFRvZ2dsZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtleHBhbmRlZDogIXRoaXMuc3RhdGUuZXhwYW5kZWR9KTtcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgYWNjb3VudCxcclxuICAgICAgICAgICAgYXZhaWxhYmxlLFxyXG4gICAgICAgICAgICBhdmFpbGFibGVLZXlzLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uLFxyXG4gICAgICAgICAgICB0aHJlc2hvbGQsXHJcbiAgICAgICAgICAgIGxldmVsLFxyXG4gICAgICAgICAgICBtYXhBdXRob3JpdHlEZXB0aCxcclxuICAgICAgICAgICAgaGlkZVJvb3RcclxuICAgICAgICB9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCB7ZXhwYW5kZWR9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgY29uc3QgaXNPSyA9IGlzQXBwcm92ZWQocGVybWlzc2lvbiwgYXZhaWxhYmxlLCBhdmFpbGFibGVLZXlzKTtcclxuICAgICAgICBjb25zdCBpc05lc3RlZCA9IHBlcm1pc3Npb24uaXNOZXN0ZWQoKTtcclxuICAgICAgICBjb25zdCBpc011bHRpU2lnID0gcGVybWlzc2lvbi5pc011bHRpU2lnKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5vdE5lc3RlZFdlaWdodCA9XHJcbiAgICAgICAgICAgIG5vdE5lc3RkV2VpZ2h0KHBlcm1pc3Npb24ud2VpZ2h0LCB0aHJlc2hvbGQpIHx8IDE7XHJcblxyXG4gICAgICAgIGNvbnN0IG5lc3RlZFdlaWdodCA9IHN0YXR1c1RleHQocGVybWlzc2lvbiwgYXZhaWxhYmxlLCBhdmFpbGFibGVLZXlzKTtcclxuXHJcbiAgICAgICAgY29uc3QgYXV0aG9yaXR5RGVwdGhPdmVyZmxvdyA9IGxldmVsID49IG1heEF1dGhvcml0eURlcHRoO1xyXG5cclxuICAgICAgICBjb25zdCByb290UGVybSA9XHJcbiAgICAgICAgICAgICFpc05lc3RlZCAmJiAhaXNNdWx0aVNpZyA/IChcclxuICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj1cIjJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEFwcHJvdmVkSWNvbiBhcHByb3ZlZD17aXNPS30gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtUb0FjY291bnRCeUlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJwYWdlPVwicGVybWlzc2lvbnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeyFpc05lc3RlZCAmJiBub3ROZXN0ZWRXZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYCR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3ROZXN0ZWRXZWlnaHQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdE5lc3RlZFdlaWdodC5sZW5ndGggPT09IDJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiXFx1MDBBMFxcdTAwQTBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9JHtub3ROZXN0ZWRXZWlnaHR9IGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj1cIjJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEFwcHJvdmVkSWNvbiBhcHByb3ZlZD17aXNPS30gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtUb0FjY291bnRCeUlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJwYWdlPVwicGVybWlzc2lvbnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2V4cGFuZGVkID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtpc09LID8gXCJzdWNjZXNzLXRleHRcIiA6IFwiXCJ9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtub3ROZXN0ZWRXZWlnaHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3ROZXN0ZWRXZWlnaHQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdE5lc3RlZFdlaWdodCAmJiBub3ROZXN0ZWRXZWlnaHQubGVuZ3RoID09PSAyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJcXHUwMEEwXFx1MDBBMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSR7bm90TmVzdGVkV2VpZ2h0fSBgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxFeHBhbmRCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVG9nZ2xlPXt0aGlzLmhhbmRsZUV4cGFuZFRvZ2dsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZGVkPXtleHBhbmRlZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2V4cGFuZGVkICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFwcGVuZGVkXCI+KHtuZXN0ZWRXZWlnaHR9KTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAge2F1dGhvcml0eURlcHRoT3ZlcmZsb3cgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXV0aG9yaXR5RGVwdGhPdmVyZmxvd1dhcm5pbmcgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0F1dGhvcml0eURlcHRoUHJvYmxlbShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBdXRob3JpdHlEZXB0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZXhwYW5kZWQgJiYgPENoaWxkQXV0aG9yaXR5RGVwdGhPdmVyZmxvd1dhcm5pbmcgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gW107XHJcblxyXG4gICAgICAgIGlmICgoaXNOZXN0ZWQgfHwgaXNNdWx0aVNpZykgJiYgZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgcGVybWlzc2lvbi5hY2NvdW50cy5mb3JFYWNoKHN1YkFjY291bnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgc3RhdHVzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgPEJvdW5kQWNjb3VudFBlcm1pc3Npb25UcmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17c3ViQWNjb3VudC5pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17c3ViQWNjb3VudC5pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudHM9e3N1YkFjY291bnQuYWNjb3VudHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb249e3N1YkFjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZT17YXZhaWxhYmxlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVLZXlzPXthdmFpbGFibGVLZXlzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJlc2hvbGQ9e3Blcm1pc3Npb24udGhyZXNob2xkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbD17bGV2ZWwgKyAxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhBdXRob3JpdHlEZXB0aD17bWF4QXV0aG9yaXR5RGVwdGh9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBlcm1pc3Npb24ua2V5cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb24ua2V5cy5mb3JFYWNoKGtleSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8S2V5UGVybWlzc2lvbkJyYW5jaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtrZXkuaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uPXtrZXl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGU9e2F2YWlsYWJsZUtleXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbD17bGV2ZWwgKyAoaGlkZVJvb3QgPyAwIDogMSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9e25vdE5lc3RkV2VpZ2h0KGtleS53ZWlnaHQsIHRocmVzaG9sZCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN0YXR1cy5sZW5ndGggPiAwID8gKFxyXG4gICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICB7aGlkZVJvb3QgfHwgcm9vdFBlcm19XHJcbiAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49XCIzXCIgY2xhc3NOYW1lPVwiaGVhZGluZy1wZXJtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtoaWRlUm9vdCA/IFwiXCIgOiBcInRhYmxlLWNvbnRhaW5lclwifT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZT57c3RhdHVzfTwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZXhwYW5kZWQgJiYgbGV2ZWwgPT09IDAgJiYgPGRpdiBjbGFzc05hbWU9XCJzcGFjZXJcIiAvPn1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICApIDogKFxyXG4gICAgICAgICAgICA8dGJvZHk+e3Jvb3RQZXJtfTwvdGJvZHk+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5jb25zdCBCb3VuZEFjY291bnRQZXJtaXNzaW9uVHJlZSA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudFBlcm1pc3Npb25UcmVlKTtcclxuXHJcbmNsYXNzIEZpcnN0TGV2ZWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICByZXF1aXJlZDogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnRzTGlzdCxcclxuICAgICAgICBhdmFpbGFibGU6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50c0xpc3RcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICB0eXBlOiBcImFjdGl2ZVwiLFxyXG4gICAgICAgIGFkZGVkOiBudWxsLFxyXG4gICAgICAgIHJlbW92ZWQ6IG51bGxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkUGVybWlzc2lvbnM6IFtdLFxyXG4gICAgICAgICAgICBleHBhbmRlZDogcHJvcHMuZXhwYW5kZWRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlKCk7XHJcblxyXG4gICAgICAgIENoYWluU3RvcmUuc3Vic2NyaWJlKHRoaXMuX3VwZGF0ZVN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgICAgICBDaGFpblN0b3JlLnVuc3Vic2NyaWJlKHRoaXMuX3VwZGF0ZVN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBfdXBkYXRlU3RhdGUoKSB7XHJcbiAgICAgICAgbGV0IHJlcXVpcmVkID0gcHUubGlzdFRvSURzKHRoaXMucHJvcHMucmVxdWlyZWQpO1xyXG4gICAgICAgIGxldCBhdmFpbGFibGUgPSBwdS5saXN0VG9JRHModGhpcy5wcm9wcy5hdmFpbGFibGUpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgcmVxdWlyZWRQZXJtaXNzaW9uczogcHUudW5uZXN0KHJlcXVpcmVkLCB0aGlzLnByb3BzLnR5cGUpLFxyXG4gICAgICAgICAgICByZXF1aXJlZCxcclxuICAgICAgICAgICAgYXZhaWxhYmxlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlRXhwYW5kVG9nZ2xlID0gKCkgPT4gdGhpcy5zZXRTdGF0ZSh7ZXhwYW5kZWQ6ICF0aGlzLnN0YXRlLmV4cGFuZGVkfSk7XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIHR5cGUsXHJcbiAgICAgICAgICAgIGFkZGVkLFxyXG4gICAgICAgICAgICByZW1vdmVkLFxyXG4gICAgICAgICAgICBhdmFpbGFibGVLZXlzLFxyXG4gICAgICAgICAgICBnbG9iYWxPYmplY3QsXHJcbiAgICAgICAgICAgIHJldmlld1BlcmlvZFRpbWUsXHJcbiAgICAgICAgICAgIG5vRmFpbFxyXG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCB7cmVxdWlyZWRQZXJtaXNzaW9ucywgcmVxdWlyZWQsIGF2YWlsYWJsZSwgZXhwYW5kZWR9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgYXZhaWxhYmxlID0gY2xvbmVEZWVwKGF2YWlsYWJsZSk7XHJcbiAgICAgICAgYXZhaWxhYmxlS2V5cyA9IGF2YWlsYWJsZUtleXMudG9KUygpO1xyXG5cclxuICAgICAgICBpZiAoYWRkZWQpIHtcclxuICAgICAgICAgICAgYXZhaWxhYmxlLnB1c2goYWRkZWQpO1xyXG4gICAgICAgICAgICBhdmFpbGFibGVLZXlzLnB1c2goYWRkZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJlbW92ZWQpIHtcclxuICAgICAgICAgICAgaWYgKGF2YWlsYWJsZS5pbmRleE9mKHJlbW92ZWQpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlLnNwbGljZShhdmFpbGFibGUuaW5kZXhPZihyZW1vdmVkKSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGF2YWlsYWJsZUtleXMuaW5kZXhPZihyZW1vdmVkKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZUtleXMuc3BsaWNlKGF2YWlsYWJsZUtleXMuaW5kZXhPZihyZW1vdmVkKSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFwcHJvdmVkQ291bnQgPSByZXF1aXJlZFBlcm1pc3Npb25zLnJlZHVjZShcclxuICAgICAgICAgICAgKHRvdGFsLCBwZXJtKSA9PlxyXG4gICAgICAgICAgICAgICAgdG90YWwgKyAoaXNBcHByb3ZlZChwZXJtLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpID8gMSA6IDApLFxyXG4gICAgICAgICAgICAwXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25zdCBhcHByb3ZlcnNDb3VudCA9IHJlcXVpcmVkUGVybWlzc2lvbnMubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IGlzT0sgPSBhcHByb3ZlZENvdW50ID09PSBhcHByb3ZlcnNDb3VudDtcclxuXHJcbiAgICAgICAgY29uc3QgZmFpbGVkID0gaXNPSyAmJiAhcmV2aWV3UGVyaW9kVGltZSAmJiAhbm9GYWlsO1xyXG4gICAgICAgIGNvbnN0IHBlbmRpbmdSZXZpZXcgPSBpc09LICYmIHJldmlld1BlcmlvZFRpbWU7XHJcblxyXG4gICAgICAgIGNvbnN0IG1heEF1dGhvcml0eURlcHRoID0gZ2xvYmFsT2JqZWN0XHJcbiAgICAgICAgICAgIC5nZXQoXCJwYXJhbWV0ZXJzXCIpXHJcbiAgICAgICAgICAgIC5nZXQoXCJtYXhfYXV0aG9yaXR5X2RlcHRoXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBvbmVQZXJtID0gcmVxdWlyZWRQZXJtaXNzaW9ucy5sZW5ndGggPT09IDE7XHJcbiAgICAgICAgY29uc3Qgb1Blcm1pc3Npb24gPSBvbmVQZXJtID8gcmVxdWlyZWRQZXJtaXNzaW9uc1swXSA6IG51bGw7XHJcblxyXG4gICAgICAgIGNvbnN0IG5lc3RlZFdlaWdodCA9ICFvbmVQZXJtICYmIGAke2FwcHJvdmVkQ291bnR9IC8gJHthcHByb3ZlcnNDb3VudH1gO1xyXG5cclxuICAgICAgICBjb25zdCByb3dzID0gcmVxdWlyZWRQZXJtaXNzaW9ucy5tYXAoYWNjb3VudCA9PiAoXHJcbiAgICAgICAgICAgIDxCb3VuZEFjY291bnRQZXJtaXNzaW9uVHJlZVxyXG4gICAgICAgICAgICAgICAga2V5PXthY2NvdW50LmlkfVxyXG4gICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudC5pZH1cclxuICAgICAgICAgICAgICAgIGFjY291bnRzPXthY2NvdW50LmFjY291bnRzfVxyXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbj17YWNjb3VudH1cclxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZT17YXZhaWxhYmxlfVxyXG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlS2V5cz17YXZhaWxhYmxlS2V5c31cclxuICAgICAgICAgICAgICAgIGV4cGFuZGVkPXt0aGlzLnByb3BzLmV4cGFuZGVkIHx8IG9uZVBlcm19XHJcbiAgICAgICAgICAgICAgICBsZXZlbD17MH1cclxuICAgICAgICAgICAgICAgIG1heEF1dGhvcml0eURlcHRoPXttYXhBdXRob3JpdHlEZXB0aH1cclxuICAgICAgICAgICAgICAgIGhpZGVSb290PXtvbmVQZXJtfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICkpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5lc3RlZC1hcHByb3ZhbC1zdGF0ZVwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb290LXN0YXR1c1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIHtmYWlsZWQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGYWlsZWQgLz5cclxuICAgICAgICAgICAgICAgICAgICApIDogcGVuZGluZ1JldmlldyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPFJldmlldyAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxQZW5kaW5nIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKX17XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgeyFvUGVybWlzc2lvbiA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+KHtuZXN0ZWRXZWlnaHR9KTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvUGVybWlzc2lvbi50aHJlc2hvbGQgPiAxICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQob1Blcm1pc3Npb24sIGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cylcclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIHsoIW9QZXJtaXNzaW9uIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9QZXJtaXNzaW9uLmlzTXVsdGlTaWcoKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvUGVybWlzc2lvbi5pc05lc3RlZCgpKSAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxFeHBhbmRCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVG9nZ2xlPXt0aGlzLmhhbmRsZUV4cGFuZFRvZ2dsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZGVkPXtleHBhbmRlZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIHshZXhwYW5kZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRQZXJtaXNzaW9ucy5zb21lKHBlcm1pc3Npb24gPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0F1dGhvcml0eURlcHRoUHJvYmxlbShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBdXRob3JpdHlEZXB0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSAmJiA8Q2hpbGRBdXRob3JpdHlEZXB0aE92ZXJmbG93V2FybmluZyAvPn1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAge2V4cGFuZGVkICYmIDx0YWJsZT57cm93c308L3RhYmxlPn1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5GaXJzdExldmVsID0gQmluZFRvQ2hhaW5TdGF0ZShGaXJzdExldmVsKTtcclxuXHJcbmNsYXNzIFByb3Bvc2FsV3JhcHBlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIHByb3Bvc2FsOiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgdHlwZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAgICAgIGdsb2JhbE9iamVjdDogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgdHlwZTogXCJhY3RpdmVcIixcclxuICAgICAgICBhZGRlZDogbnVsbCxcclxuICAgICAgICBnbG9iYWxPYmplY3Q6IFwiMi4wLjBcIlxyXG4gICAgfTtcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtwcm9wb3NhbCwgdHlwZX0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCBhdmFpbGFibGUgPSBwcm9wb3NhbC5nZXQoYGF2YWlsYWJsZV8ke3R5cGV9X2FwcHJvdmFsc2ApO1xyXG4gICAgICAgIGxldCBhdmFpbGFibGVLZXlzID0gcHJvcG9zYWwuZ2V0KFwiYXZhaWxhYmxlX2tleV9hcHByb3ZhbHNcIik7XHJcbiAgICAgICAgbGV0IHJlcXVpcmVkID0gcHJvcG9zYWwuZ2V0KGByZXF1aXJlZF8ke3R5cGV9X2FwcHJvdmFsc2ApO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8Rmlyc3RMZXZlbFxyXG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWR9XHJcbiAgICAgICAgICAgICAgICBhdmFpbGFibGU9e2F2YWlsYWJsZX1cclxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZUtleXM9e2F2YWlsYWJsZUtleXN9XHJcbiAgICAgICAgICAgICAgICByZXZpZXdQZXJpb2RUaW1lPXtwcm9wb3NhbC5nZXQoXCJyZXZpZXdfcGVyaW9kX3RpbWVcIil9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQmluZFRvQ2hhaW5TdGF0ZShQcm9wb3NhbFdyYXBwZXIpO1xyXG4iLCJpbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgSW1tdXRhYmxlIGZyb20gXCJpbW11dGFibGVcIjtcclxuXHJcbmxldCBLZXlBdXRoID0gZnVuY3Rpb24oYXV0aCkge1xyXG4gICAgdGhpcy5pZCA9IGF1dGgudG9KUyA/IGF1dGguZ2V0KDApIDogYXV0aFswXTtcclxuICAgIHRoaXMud2VpZ2h0ID0gYXV0aC50b0pTID8gYXV0aC5nZXQoMSkgOiBhdXRoWzFdO1xyXG5cclxuICAgIHRoaXMuaXNBdmFpbGFibGUgPSBhdXRocyA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGF1dGhzLmluY2x1ZGVzXHJcbiAgICAgICAgICAgID8gYXV0aHMuaW5jbHVkZXModGhpcy5pZClcclxuICAgICAgICAgICAgOiBhdXRocy5pbmRleE9mKHRoaXMpICE9PSAtMTtcclxuICAgIH07XHJcbn07XHJcblxyXG5sZXQgcGVybWlzc2lvblV0aWxzID0ge1xyXG4gICAgQWNjb3VudFBlcm1pc3Npb246IGZ1bmN0aW9uKGFjY291bnQsIHdlaWdodCwgdHlwZSkge1xyXG4gICAgICAgIHRoaXMuaWQgPSBhY2NvdW50LmdldChcImlkXCIpO1xyXG4gICAgICAgIHRoaXMud2VpZ2h0ID0gd2VpZ2h0O1xyXG4gICAgICAgIHRoaXMudGhyZXNob2xkID0gYWNjb3VudC5nZXRJbihbdHlwZSwgXCJ3ZWlnaHRfdGhyZXNob2xkXCJdKTtcclxuICAgICAgICB0aGlzLmFjY291bnRzID0gW107XHJcbiAgICAgICAgdGhpcy5rZXlzID0gYWNjb3VudFxyXG4gICAgICAgICAgICAuZ2V0SW4oW3R5cGUsIFwia2V5X2F1dGhzXCJdKVxyXG4gICAgICAgICAgICAubWFwKGF1dGggPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBLZXlBdXRoKGF1dGgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudG9BcnJheSgpO1xyXG5cclxuICAgICAgICB0aGlzLmlzQXZhaWxhYmxlID0gYXV0aHMgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gYXV0aHMuaW5jbHVkZXNcclxuICAgICAgICAgICAgICAgID8gYXV0aHMuaW5jbHVkZXModGhpcy5pZClcclxuICAgICAgICAgICAgICAgIDogYXV0aHMuaW5kZXhPZih0aGlzKSAhPT0gLTE7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5fc3VtV2VpZ2h0cyA9IGF1dGhzID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTmVzdGVkKCkgJiYgIXRoaXMuaXNNdWx0aVNpZygpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc0F2YWlsYWJsZShhdXRocykgPyB0aGlzLndlaWdodCA6IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3VtID0gdGhpcy5hY2NvdW50cy5yZWR1Y2UoKHN0YXR1cywgYWNjb3VudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChhY2NvdW50Ll9zdW1XZWlnaHRzKGF1dGhzKSA/IGFjY291bnQud2VpZ2h0IDogMClcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3Ioc3VtIC8gdGhpcy50aHJlc2hvbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRTdGF0dXMgPSAoYXV0aHMsIGtleUF1dGhzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc05lc3RlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3VtID0gdGhpcy5fc3VtV2VpZ2h0cyhhdXRocyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc011bHRpU2lnKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdW0gKz0gdGhpcy5zdW1LZXlzKGtleUF1dGhzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBzdW07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3VtID0gdGhpcy5hY2NvdW50cy5yZWR1Y2UoKHN0YXR1cywgYWNjb3VudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGF0dXMgKyBhY2NvdW50Ll9zdW1XZWlnaHRzKGF1dGhzKTtcclxuICAgICAgICAgICAgICAgIH0sIDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmtleXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VtICs9IHRoaXMuc3VtS2V5cyhrZXlBdXRocyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc3VtS2V5cyA9IGtleUF1dGhzID0+IHtcclxuICAgICAgICAgICAgbGV0IGtleVN1bSA9IHRoaXMua2V5cy5yZWR1Y2UoKHMsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHMgKyAoa2V5LmlzQXZhaWxhYmxlKGtleUF1dGhzKSA/IGtleS53ZWlnaHQgOiAwKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIHJldHVybiBrZXlTdW07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5pc05lc3RlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudHMubGVuZ3RoID4gMDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmlzTXVsdGlTaWcgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmtleXMucmVkdWNlKChmaW5hbCwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmluYWwgfHwga2V5LndlaWdodCA8IHRoaXMudGhyZXNob2xkO1xyXG4gICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRNaXNzaW5nU2lncyA9IGF1dGhzID0+IHtcclxuICAgICAgICAgICAgbGV0IG1pc3NpbmcgPSBbXTtcclxuICAgICAgICAgICAgbGV0IG5lc3RlZCA9IFtdO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc05lc3RlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBuZXN0ZWQgPSB0aGlzLmFjY291bnRzLnJlZHVjZSgoYSwgYWNjb3VudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmNvbmNhdChhY2NvdW50LmdldE1pc3NpbmdTaWdzKGF1dGhzKSk7XHJcbiAgICAgICAgICAgICAgICB9LCBbXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNBdmFpbGFibGUoYXV0aHMpKSB7XHJcbiAgICAgICAgICAgICAgICBtaXNzaW5nLnB1c2godGhpcy5pZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtaXNzaW5nLmNvbmNhdChuZXN0ZWQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0TWlzc2luZ0tleXMgPSBhdXRocyA9PiB7XHJcbiAgICAgICAgICAgIGxldCBtaXNzaW5nID0gW107XHJcbiAgICAgICAgICAgIGxldCBuZXN0ZWQgPSBbXTtcclxuICAgICAgICAgICAgaWYgKHRoaXMua2V5cy5sZW5ndGggJiYgKHRoaXMuaXNOZXN0ZWQoKSB8fCB0aGlzLmlzTXVsdGlTaWcoKSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMua2V5cy5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFrZXkuaXNBdmFpbGFibGUoYXV0aHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pc3NpbmcucHVzaChrZXkuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc05lc3RlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBuZXN0ZWQgPSB0aGlzLmFjY291bnRzLnJlZHVjZSgoYSwgYWNjb3VudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmNvbmNhdChhY2NvdW50LmdldE1pc3NpbmdLZXlzKGF1dGhzKSk7XHJcbiAgICAgICAgICAgICAgICB9LCBbXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtaXNzaW5nLmNvbmNhdChuZXN0ZWQpO1xyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGxpc3RUb0lEczogZnVuY3Rpb24oYWNjb3VudExpc3QpIHtcclxuICAgICAgICBsZXQgYWxsQWNjb3VudHMgPSBbXTtcclxuXHJcbiAgICAgICAgYWNjb3VudExpc3QuZm9yRWFjaChhY2NvdW50ID0+IHtcclxuICAgICAgICAgICAgaWYgKGFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgIGFsbEFjY291bnRzLnB1c2goYWNjb3VudC5nZXQgPyBhY2NvdW50LmdldChcImlkXCIpIDogYWNjb3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGFsbEFjY291bnRzO1xyXG4gICAgfSxcclxuXHJcbiAgICB1bnJhdmVsOiBmdW5jdGlvbihhY2NvdW50UGVybWlzc2lvbiwgdHlwZSwgcmVjdXJzaXZlX2NvdW50ID0gMCkge1xyXG4gICAgICAgIGlmIChyZWN1cnNpdmVfY291bnQgPCAzKSB7XHJcbiAgICAgICAgICAgIGxldCBhY2NvdW50ID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGFjY291bnRQZXJtaXNzaW9uLmlkKTtcclxuICAgICAgICAgICAgaWYgKGFjY291bnQgJiYgYWNjb3VudC5nZXRJbihbdHlwZSwgXCJhY2NvdW50X2F1dGhzXCJdKS5zaXplKSB7XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50LmdldEluKFt0eXBlLCBcImFjY291bnRfYXV0aHNcIl0pLmZvckVhY2goYXV0aCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5lc3RlZEFjY291bnQgPSBDaGFpblN0b3JlLmdldEFjY291bnQoYXV0aC5nZXQoMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXN0ZWRBY2NvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRQZXJtaXNzaW9uLmFjY291bnRzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVucmF2ZWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IHRoaXMuQWNjb3VudFBlcm1pc3Npb24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lc3RlZEFjY291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGguZ2V0KDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZV9jb3VudCArIDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGFjY291bnRQZXJtaXNzaW9uO1xyXG4gICAgfSxcclxuXHJcbiAgICB1bm5lc3Q6IGZ1bmN0aW9uKGFjY291bnRzLCB0eXBlKSB7XHJcbiAgICAgICAgbGV0IG1hcCA9IFtdO1xyXG4gICAgICAgIGFjY291bnRzLmZvckVhY2goaWQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZnVsbEFjY291bnQgPSBDaGFpblN0b3JlLmdldEFjY291bnQoaWQpO1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudFBlcm1pc3Npb24gPSB0aGlzLnVucmF2ZWwoXHJcbiAgICAgICAgICAgICAgICBuZXcgdGhpcy5BY2NvdW50UGVybWlzc2lvbihmdWxsQWNjb3VudCwgbnVsbCwgdHlwZSksXHJcbiAgICAgICAgICAgICAgICB0eXBlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1hcC5wdXNoKGN1cnJlbnRQZXJtaXNzaW9uKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1hcDtcclxuICAgIH0sXHJcblxyXG4gICAgZmxhdHRlbl9hdXRocyhhdXRocywgZXhpc3RpbmdBdXRocyA9IEltbXV0YWJsZS5MaXN0KCkpIHtcclxuICAgICAgICBpZiAoIWF1dGhzLnNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nQXV0aHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhdXRocy5mb3JFYWNoKG93bmVyID0+IHtcclxuICAgICAgICAgICAgaWYgKCFleGlzdGluZ0F1dGhzLmluY2x1ZGVzKG93bmVyLmdldCgwKSkpIHtcclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nQXV0aHMgPSBleGlzdGluZ0F1dGhzLnB1c2gob3duZXIuZ2V0KDApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBleGlzdGluZ0F1dGhzO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcGVybWlzc2lvblV0aWxzO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBJY29uIGZyb20gXCIuLi9JY29uL0ljb25cIjtcclxuaW1wb3J0IFJlYWN0VG9vbHRpcCBmcm9tIFwicmVhY3QtdG9vbHRpcFwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUb29sdGlwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIFJlYWN0VG9vbHRpcC5yZWJ1aWxkKCk7XHJcbiAgICB9XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3Qge2NsYXNzTmFtZSwgY2hpbGRyZW4sIGRhdGFUaXAsIGNvbnRlbnR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcInRvb2x0aXAgXCIgKyBjbGFzc05hbWV9XHJcbiAgICAgICAgICAgICAgICBkYXRhLWh0bWw9e3RydWV9XHJcbiAgICAgICAgICAgICAgICBkYXRhLXRpcD17ZGF0YVRpcCB8fCBjb3VudGVycGFydC50cmFuc2xhdGUoY29udGVudCl9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBBdXRob3JpdHlEZXB0aE92ZXJmbG93V2FybmluZyA9ICgpID0+IChcclxuICAgIDxUb29sdGlwXHJcbiAgICAgICAgY2xhc3NOYW1lPVwiZXJyb3IgYXBwZW5kZWRcIlxyXG4gICAgICAgIGNvbnRlbnQ9XCJleHBsb3Jlci5wcm9wb3NhbHMuYXV0aG9yaXR5X2RlcHRoX3dhcm5pbmdcIlxyXG4gICAgPlxyXG4gICAgICAgIC8hXFxcclxuICAgIDwvVG9vbHRpcD5cclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBDaGlsZEF1dGhvcml0eURlcHRoT3ZlcmZsb3dXYXJuaW5nID0gKCkgPT4gKFxyXG4gICAgPFRvb2x0aXBcclxuICAgICAgICBjbGFzc05hbWU9XCJlcnJvciBhcHBlbmRlZFwiXHJcbiAgICAgICAgY29udGVudD1cImV4cGxvcmVyLnByb3Bvc2Fscy5jaGlsZHJlbl9hdXRob3JpdHlfZGVwdGhfd2FybmluZ1wiXHJcbiAgICA+XHJcbiAgICAgICAgLyFcXFxyXG4gICAgPC9Ub29sdGlwPlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IFBlbmRpbmcgPSAoKSA9PiAoXHJcbiAgICA8VG9vbHRpcCBjbGFzc05hbWU9XCJ3YXJuaW5nXCIgY29udGVudD1cImV4cGxvcmVyLnByb3Bvc2Fscy5wZW5kaW5nX2FwcHJvdmFsXCI+XHJcbiAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLnBlbmRpbmdcIiAvPlxyXG4gICAgPC9Ub29sdGlwPlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IFJldmlldyA9ICgpID0+IChcclxuICAgIDxUb29sdGlwIGNsYXNzTmFtZT1cIndhcm5pbmdcIiBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLnBlbmRpbmdfcmV2aWV3XCI+XHJcbiAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLnJldmlld1wiIC8+XHJcbiAgICA8L1Rvb2x0aXA+XHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgRmFpbGVkID0gKCkgPT4gKFxyXG4gICAgPFRvb2x0aXAgY2xhc3NOYW1lPVwiZXJyb3JcIiBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLmZhaWxlZF9leGVjdXRlXCI+XHJcbiAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLmZhaWxlZFwiIC8+XHJcbiAgICA8L1Rvb2x0aXA+XHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgRXhwYW5kQnV0dG9uID0gKHtvblRvZ2dsZSwgZXhwYW5kZWR9KSA9PiAoXHJcbiAgICA8YSBjbGFzc05hbWU9XCJleHBhbmQtYnV0dG9uXCIgb25DbGljaz17b25Ub2dnbGV9PlxyXG4gICAgICAgIFt7ZXhwYW5kZWQgPyBcIi1cIiA6IFwiK1wifV1cclxuICAgIDwvYT5cclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBBcHByb3ZlZEljb24gPSAoe2FwcHJvdmVkfSkgPT5cclxuICAgIGFwcHJvdmVkID8gKFxyXG4gICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgIG5hbWU9XCJjaGVja21hcmstY2lyY2xlXCJcclxuICAgICAgICAgICAgc2l6ZT1cIjF4XCJcclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwic3VjY2Vzc1wiXHJcbiAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMuY2hlY2ttYXJrX2NpcmNsZS5vcGVyYXRpb25fc3VjY2VlZFwiXHJcbiAgICAgICAgLz5cclxuICAgICkgOiAoXHJcbiAgICAgICAgPEljb25cclxuICAgICAgICAgICAgbmFtZT1cImNyb3NzLWNpcmNsZVwiXHJcbiAgICAgICAgICAgIHNpemU9XCIxeFwiXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImVycm9yXCJcclxuICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5jcm9zc19jaXJjbGUub3BlcmF0aW9uX2ZhaWxlZFwiXHJcbiAgICAgICAgLz5cclxuICAgICk7XHJcblxyXG5leHBvcnQgY29uc3QgS2V5UGVybWlzc2lvbkJyYW5jaCA9ICh7YXZhaWxhYmxlLCBwZXJtaXNzaW9uLCB3ZWlnaHQsIGxldmVsfSkgPT4gKFxyXG4gICAgPHRib2R5PlxyXG4gICAgICAgIDx0cj5cclxuICAgICAgICAgICAgPHRkIGNvbFNwYW49XCIyXCI+XHJcbiAgICAgICAgICAgICAgICA8QXBwcm92ZWRJY29uIGFwcHJvdmVkPXtwZXJtaXNzaW9uLmlzQXZhaWxhYmxlKGF2YWlsYWJsZSl9IC8+XHJcbiAgICAgICAgICAgICAgICB7cGVybWlzc2lvbi5pZC5zdWJzdHIoMCwgMjAgLSA0ICogbGV2ZWwpfS4uLlxyXG4gICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICA8dGQ+e3dlaWdodH08L3RkPlxyXG4gICAgICAgIDwvdHI+XHJcbiAgICA8L3Rib2R5PlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGhhc0F1dGhvcml0eURlcHRoUHJvYmxlbSA9IChcclxuICAgIG1heEF1dGhvcml0eURlcHRoLFxyXG4gICAgcGVybWlzc2lvbixcclxuICAgIGxldmVsID0gMFxyXG4pID0+IHtcclxuICAgIGlmIChsZXZlbCA+IG1heEF1dGhvcml0eURlcHRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKCFwZXJtaXNzaW9uLmlzTmVzdGVkKCkgJiYgIXBlcm1pc3Npb24uaXNNdWx0aVNpZygpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcGVybWlzc2lvbi5hY2NvdW50cy5zb21lKHN1YkFjY291bnQgPT5cclxuICAgICAgICAgICAgaGFzQXV0aG9yaXR5RGVwdGhQcm9ibGVtKG1heEF1dGhvcml0eURlcHRoLCBzdWJBY2NvdW50LCBsZXZlbCArIDEpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRTdGF0dXMgPSAocGVybWlzc2lvbiwgYXZhaWxhYmxlLCBhdmFpbGFibGVLZXlzKSA9PlxyXG4gICAgcGVybWlzc2lvbi5hY2NvdW50cy5yZWR1Y2UoXHJcbiAgICAgICAgKGFtb3VudCwgc3ViUGVybWlzc2lvbikgPT5cclxuICAgICAgICAgICAgYW1vdW50ICtcclxuICAgICAgICAgICAgKGlzQXBwcm92ZWQoc3ViUGVybWlzc2lvbiwgYXZhaWxhYmxlLCBhdmFpbGFibGVLZXlzKVxyXG4gICAgICAgICAgICAgICAgPyBzdWJQZXJtaXNzaW9uLndlaWdodFxyXG4gICAgICAgICAgICAgICAgOiAwKSxcclxuXHJcbiAgICAgICAgMFxyXG4gICAgKSArXHJcbiAgICBwZXJtaXNzaW9uLmtleXMucmVkdWNlKFxyXG4gICAgICAgIChhbW91bnQsIGtleSkgPT5cclxuICAgICAgICAgICAgYW1vdW50ICsgKGtleS5pc0F2YWlsYWJsZShhdmFpbGFibGVLZXlzKSA/IGtleS53ZWlnaHQgOiAwKSxcclxuICAgICAgICAwXHJcbiAgICApO1xyXG5cclxuZXhwb3J0IGNvbnN0IGlzQXBwcm92ZWQgPSAocGVybWlzc2lvbiwgYXZhaWxhYmxlLCBhdmFpbGFibGVLZXlzKSA9PlxyXG4gICAgcGVybWlzc2lvbi5pc05lc3RlZCgpIHx8IHBlcm1pc3Npb24uaXNNdWx0aVNpZygpXHJcbiAgICAgICAgPyBnZXRTdGF0dXMocGVybWlzc2lvbiwgYXZhaWxhYmxlLCBhdmFpbGFibGVLZXlzKSA+PVxyXG4gICAgICAgICAgcGVybWlzc2lvbi50aHJlc2hvbGRcclxuICAgICAgICA6IHBlcm1pc3Npb24uaXNBdmFpbGFibGUoYXZhaWxhYmxlKTtcclxuXHJcbmV4cG9ydCBjb25zdCBzdGF0dXNUZXh0ID0gKHBlcm1pc3Npb24sIGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cykgPT5cclxuICAgIHBlcm1pc3Npb24gJiYgcGVybWlzc2lvbi50aHJlc2hvbGQgPiAxMFxyXG4gICAgICAgID8gYCR7dXRpbHMuZ2V0X3BlcmNlbnRhZ2UoXHJcbiAgICAgICAgICAgICAgcGVybWlzc2lvbi5nZXRTdGF0dXMoYXZhaWxhYmxlLCBhdmFpbGFibGVLZXlzKSxcclxuICAgICAgICAgICAgICBwZXJtaXNzaW9uLnRocmVzaG9sZFxyXG4gICAgICAgICAgKX0gLyAxMDAlYFxyXG4gICAgICAgIDogYCR7cGVybWlzc2lvbi5nZXRTdGF0dXMoYXZhaWxhYmxlLCBhdmFpbGFibGVLZXlzKX0gLyAke1xyXG4gICAgICAgICAgICAgIHBlcm1pc3Npb24udGhyZXNob2xkXHJcbiAgICAgICAgICB9YDtcclxuXHJcbmV4cG9ydCBjb25zdCBub3ROZXN0ZFdlaWdodCA9ICh3ZWlnaHQsIHRocmVzaG9sZCkgPT5cclxuICAgIHRocmVzaG9sZCAmJiB0aHJlc2hvbGQgPiAxMFxyXG4gICAgICAgID8gdXRpbHMuZ2V0X3BlcmNlbnRhZ2Uod2VpZ2h0LCB0aHJlc2hvbGQpXHJcbiAgICAgICAgOiB3ZWlnaHQ7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHtPcmRlclJvdywgVGFibGVIZWFkZXJ9IGZyb20gXCIuLi9FeGNoYW5nZS9NeU9wZW5PcmRlcnNcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgTWFya2V0c0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvTWFya2V0c0FjdGlvbnNcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IHtMaW1pdE9yZGVyfSBmcm9tIFwiY29tbW9uL01hcmtldENsYXNzZXNcIjtcclxuaW1wb3J0IHtjb25uZWN0fSBmcm9tIFwiYWx0LXJlYWN0XCI7XHJcbmltcG9ydCBTZXR0aW5nc1N0b3JlIGZyb20gXCJzdG9yZXMvU2V0dGluZ3NTdG9yZVwiO1xyXG5pbXBvcnQgU2V0dGluZ3NBY3Rpb25zIGZyb20gXCJhY3Rpb25zL1NldHRpbmdzQWN0aW9uc1wiO1xyXG5pbXBvcnQgbWFya2V0VXRpbHMgZnJvbSBcImNvbW1vbi9tYXJrZXRfdXRpbHNcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgUGFnaW5hdGVkTGlzdCBmcm9tIFwiLi4vVXRpbGl0eS9QYWdpbmF0ZWRMaXN0XCI7XHJcblxyXG5jbGFzcyBBY2NvdW50T3JkZXJzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBzZWxlY3RlZE9yZGVyczogW10sXHJcbiAgICAgICAgICAgIGZpbHRlclZhbHVlOiBcIlwiXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICBsZXQgY2FuY2VsSGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW5jZWxBbGxPcmRlcnNcIik7XHJcblxyXG4gICAgICAgIGlmIChjYW5jZWxIZWFkZXIpIHtcclxuICAgICAgICAgICAgY2FuY2VsSGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgb3JkZXJzID0gdGhpcy5fZ2V0RmlsdGVyZWRPcmRlcnMuY2FsbCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcnMgPSBvcmRlcnMudG9KUyA/IG9yZGVycy50b0pTKCkgOiBvcmRlcnM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkT3JkZXJzOiBvcmRlcnN9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm9yZGVyQ2FuY2VsXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjaGVja2JveGVzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXRlbS5jaGVja2VkKSBpdGVtLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9nZXRGaWx0ZXJlZE9yZGVycygpIHtcclxuICAgICAgICBsZXQge2ZpbHRlclZhbHVlfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIGxldCBvcmRlcnMgPSB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwib3JkZXJzXCIpIHx8IFtdO1xyXG5cclxuICAgICAgICByZXR1cm4gb3JkZXJzLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgbGV0IG9yZGVyID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QoaXRlbSkudG9KUygpO1xyXG4gICAgICAgICAgICBsZXQgYmFzZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQob3JkZXIuc2VsbF9wcmljZS5iYXNlLmFzc2V0X2lkKTtcclxuICAgICAgICAgICAgbGV0IHF1b3RlID0gQ2hhaW5TdG9yZS5nZXRBc3NldChvcmRlci5zZWxsX3ByaWNlLnF1b3RlLmFzc2V0X2lkKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBiYXNlU3ltYm9sID0gYmFzZS5nZXQoXCJzeW1ib2xcIikudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgbGV0IHF1b3RlU3ltYm9sID0gcXVvdGUuZ2V0KFwic3ltYm9sXCIpLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgYmFzZVN5bWJvbC5pbmRleE9mKGZpbHRlclZhbHVlKSA+IC0xIHx8XHJcbiAgICAgICAgICAgICAgICBxdW90ZVN5bWJvbC5pbmRleE9mKGZpbHRlclZhbHVlKSA+IC0xXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NhbmNlbExpbWl0T3JkZXIob3JkZXJJRCwgZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgTWFya2V0c0FjdGlvbnMuY2FuY2VsTGltaXRPcmRlcihcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICBvcmRlcklELCAvLyBvcmRlciBpZCB0byBjYW5jZWxcclxuICAgICAgICAgICAgZmFsc2UgLy8gRG9uJ3Qgc2hvdyBub3JtYWwgY29uZmlybXNcclxuICAgICAgICApLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2FuY2VsIG9yZGVyIGVycm9yOlwiLCBlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9jYW5jZWxMaW1pdE9yZGVycyhvcmRlcklkKSB7XHJcbiAgICAgICAgTWFya2V0c0FjdGlvbnMuY2FuY2VsTGltaXRPcmRlcnMoXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZE9yZGVyc1xyXG4gICAgICAgIClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldFNlbGVjdGVkKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjYW5jZWwgb3JkZXJzIGVycm9yOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkZsaXAobWFya2V0SWQpIHtcclxuICAgICAgICBsZXQgc2V0dGluZyA9IHt9O1xyXG4gICAgICAgIHNldHRpbmdbbWFya2V0SWRdID0gIXRoaXMucHJvcHMubWFya2V0RGlyZWN0aW9ucy5nZXQobWFya2V0SWQpO1xyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VNYXJrZXREaXJlY3Rpb24oc2V0dGluZyk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGVja0NhbmNlbChvcmRlcklkLCBldnQpIHtcclxuICAgICAgICBsZXQge3NlbGVjdGVkT3JkZXJzfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IGNoZWNrZWQgPSBldnQudGFyZ2V0LmNoZWNrZWQ7XHJcblxyXG4gICAgICAgIGlmIChjaGVja2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkT3JkZXJzOiBzZWxlY3RlZE9yZGVycy5jb25jYXQoW29yZGVySWRdKX0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IHNlbGVjdGVkT3JkZXJzLmluZGV4T2Yob3JkZXJJZCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcmRlcnM6IHNlbGVjdGVkT3JkZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zbGljZSgwLCBpbmRleClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChzZWxlY3RlZE9yZGVycy5zbGljZShpbmRleCArIDEpKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RmlsdGVyVmFsdWUoZXZ0KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZmlsdGVyVmFsdWU6IGV2dC50YXJnZXQudmFsdWUudG9Mb3dlckNhc2UoKX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0U2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRPcmRlcnM6IFtdfSk7XHJcblxyXG4gICAgICAgIGxldCBjaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5vcmRlckNhbmNlbFwiKTtcclxuXHJcbiAgICAgICAgY2hlY2tib3hlcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5jaGVja2VkKSBpdGVtLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5jZWxTZWxlY3RlZCgpIHtcclxuICAgICAgICB0aGlzLl9jYW5jZWxMaW1pdE9yZGVycy5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2FjY291bnQsIG1hcmtldERpcmVjdGlvbnN9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQge2ZpbHRlclZhbHVlLCBzZWxlY3RlZE9yZGVyc30gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGxldCBjYW5jZWwgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0uY2FuY2VsXCIpO1xyXG4gICAgICAgIGxldCBtYXJrZXRzID0ge307XHJcblxyXG4gICAgICAgIGxldCBtYXJrZXRPcmRlcnMgPSB7fTtcclxuXHJcbiAgICAgICAgaWYgKCFhY2NvdW50LmdldChcIm9yZGVyc1wiKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBvcmRlcnMgPSBhY2NvdW50LmdldChcIm9yZGVyc1wiKTtcclxuICAgICAgICBjb25zdCBvcmRlcnNDb3VudCA9IG9yZGVycy5zaXplO1xyXG4gICAgICAgIGlmIChmaWx0ZXJWYWx1ZSkge1xyXG4gICAgICAgICAgICBvcmRlcnMgPSB0aGlzLl9nZXRGaWx0ZXJlZE9yZGVycy5jYWxsKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb3JkZXJzLmZvckVhY2gob3JkZXJJRCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBvcmRlciA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KG9yZGVySUQpLnRvSlMoKTtcclxuICAgICAgICAgICAgbGV0IGJhc2UgPSBDaGFpblN0b3JlLmdldEFzc2V0KG9yZGVyLnNlbGxfcHJpY2UuYmFzZS5hc3NldF9pZCk7XHJcbiAgICAgICAgICAgIGxldCBxdW90ZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQob3JkZXIuc2VsbF9wcmljZS5xdW90ZS5hc3NldF9pZCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoYmFzZSAmJiBxdW90ZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFzc2V0cyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBbYmFzZS5nZXQoXCJpZFwiKV06IHtwcmVjaXNpb246IGJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpfSxcclxuICAgICAgICAgICAgICAgICAgICBbcXVvdGUuZ2V0KFwiaWRcIildOiB7cHJlY2lzaW9uOiBxdW90ZS5nZXQoXCJwcmVjaXNpb25cIil9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgLy8gbGV0IGJhc2VJRCA9IHBhcnNlSW50KG9yZGVyLnNlbGxfcHJpY2UuYmFzZS5hc3NldF9pZC5zcGxpdChcIi5cIilbMl0sIDEwKTtcclxuICAgICAgICAgICAgICAgIC8vIGxldCBxdW90ZUlEID0gcGFyc2VJbnQob3JkZXIuc2VsbF9wcmljZS5xdW90ZS5hc3NldF9pZC5zcGxpdChcIi5cIilbMl0sIDEwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgbWFya2V0TmFtZSA9IHF1b3RlSUQgPiBiYXNlSUQgPyBgJHtxdW90ZS5nZXQoXCJzeW1ib2xcIil9XyR7YmFzZS5nZXQoXCJzeW1ib2xcIil9YCA6IGAke2Jhc2UuZ2V0KFwic3ltYm9sXCIpfV8ke3F1b3RlLmdldChcInN5bWJvbFwiKX1gO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qge21hcmtldE5hbWV9ID0gbWFya2V0VXRpbHMuZ2V0TWFya2V0TmFtZShiYXNlLCBxdW90ZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSBtYXJrZXREaXJlY3Rpb25zLmdldChtYXJrZXROYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIW1hcmtldHNbbWFya2V0TmFtZV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldHNbbWFya2V0TmFtZV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGJhc2UuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiBiYXNlLmdldChcInN5bWJvbFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVjaXNpb246IGJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogcXVvdGUuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiBxdW90ZS5nZXQoXCJzeW1ib2xcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBxdW90ZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXRzW21hcmtldE5hbWVdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBxdW90ZS5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2w6IHF1b3RlLmdldChcInN5bWJvbFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVjaXNpb246IHF1b3RlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGJhc2UuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiBiYXNlLmdldChcInN5bWJvbFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVjaXNpb246IGJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGxpbWl0T3JkZXIgPSBuZXcgTGltaXRPcmRlcihcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcixcclxuICAgICAgICAgICAgICAgICAgICBhc3NldHMsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0c1ttYXJrZXROYW1lXS5xdW90ZS5pZFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbWFya2V0QmFzZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0c1ttYXJrZXROYW1lXS5iYXNlLmlkXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1hcmtldFF1b3RlID0gQ2hhaW5TdG9yZS5nZXRBc3NldChcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRzW21hcmtldE5hbWVdLnF1b3RlLmlkXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghbWFya2V0T3JkZXJzW21hcmtldE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0T3JkZXJzW21hcmtldE5hbWVdID0gW107XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbWFya2V0T3JkZXJzW21hcmtldE5hbWVdLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgPE9yZGVyUm93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17bWFya2V0c1ttYXJrZXROYW1lXS5iYXNlLnN5bWJvbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtvcmRlci5pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI9e2xpbWl0T3JkZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U9e21hcmtldEJhc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlPXttYXJrZXRRdW90ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsX3RleHQ9e2NhbmNlbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1N5bWJvbHM9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnQ9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2FuY2VsPXt0aGlzLl9jYW5jZWxMaW1pdE9yZGVyLmJpbmQodGhpcywgb3JkZXIuaWQpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmljZT17bGltaXRPcmRlci5nZXRQcmljZSgpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXNoYm9hcmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNNeUFjY291bnQ9e3RoaXMucHJvcHMuaXNNeUFjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzPXt0aGlzLnByb3BzLnNldHRpbmdzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkZsaXA9e3RoaXMub25GbGlwLmJpbmQodGhpcywgbWFya2V0TmFtZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hlY2tDYW5jZWw9e3RoaXMub25DaGVja0NhbmNlbC5iaW5kKHRoaXMsIG9yZGVyLmlkKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgdGFibGVzID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IG1hcmtldCBpbiBtYXJrZXRPcmRlcnMpIHtcclxuICAgICAgICAgICAgaWYgKG1hcmtldE9yZGVyc1ttYXJrZXRdLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGFibGVzID0gdGFibGVzLmNvbmNhdChcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRPcmRlcnNbbWFya2V0XS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnByb3BzLnByaWNlIC0gYi5wcm9wcy5wcmljZTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIC8vIHRhYmxlcy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIDx0Ym9keSBrZXk9e21hcmtldH0+XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHsvKiB7bWFya2V0SW5kZXggPiAwID8gPHRyPjx0ZCBjb2xTcGFuPXt0aGlzLnByb3BzLmlzTXlBY2NvdW50ID8gXCI3XCIgOiBcIjZcIn0+PHNwYW4gc3R5bGU9e3t2aXNpYmlsaXR5OiBcImhpZGRlblwifX0+SDwvc3Bhbj48L3RkPjwvdHI+IDogbnVsbH0gKi99XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHttYXJrZXRPcmRlcnNbbWFya2V0XS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICByZXR1cm4gYS5wcm9wcy5wcmljZSAtIGIucHJvcHMucHJpY2U7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgLy8gICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICAvLyApO1xyXG4gICAgICAgICAgICAgICAgLy8gbWFya2V0SW5kZXgrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdGFibGVzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAvLyAgICAgcmV0dXJuIHBhcnNlSW50KGEua2V5LCAxMCkgLSBwYXJzZUludChiLmtleSwgMTApO1xyXG4gICAgICAgIC8vIH0pXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBuby1vdmVyZmxvdyBuby1wYWRkaW5nXCJcclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogMTV9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1zZWxlY3RvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHtvcmRlcnMgJiYgb3JkZXJzQ291bnQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQuZmlsdGVyX29yZGVyc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiBcIjUwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBcIjFlbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogXCIwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5zZXRGaWx0ZXJWYWx1ZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZE9yZGVycy5sZW5ndGggPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnJlc2V0U2VsZWN0ZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5yZXNldF9vcmRlcnNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRPcmRlcnMubGVuZ3RoID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5jYW5jZWxTZWxlY3RlZC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnN1Ym1pdF9vcmRlcnNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIDxQYWdpbmF0ZWRMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU9ezIwfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRhYmxlIHRhYmxlLXN0cmlwZWQgZGFzaGJvYXJkLXRhYmxlIHRhYmxlLWhvdmVyXCJcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFibGVIZWFkZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzPXt0aGlzLnByb3BzLnNldHRpbmdzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzaGJvYXJkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc015QWNjb3VudD17dGhpcy5wcm9wcy5pc015QWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcm93cz17dGFibGVzfVxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhUm93PXt0aGlzLnByb3BzLmNoaWxkcmVufVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuQWNjb3VudE9yZGVycyA9IGNvbm5lY3QoXHJcbiAgICBBY2NvdW50T3JkZXJzLFxyXG4gICAge1xyXG4gICAgICAgIGxpc3RlblRvKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW1NldHRpbmdzU3RvcmVdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0UHJvcHMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBtYXJrZXREaXJlY3Rpb25zOiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkubWFya2V0RGlyZWN0aW9uc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFjY291bnRPcmRlcnM7XHJcbiIsImltcG9ydCB7RmV0Y2hDaGFpbn0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCB7RmVlZFByaWNlLCBBc3NldH0gZnJvbSBcIi4vTWFya2V0Q2xhc3Nlc1wiO1xyXG5cclxubGV0IGFzeW5jQ2FjaGUgPSB7fTtcclxuY29uc3QgY2hlY2tNYXJnaW5TdGF0dXNUVEwgPSA2MDAwMCAqIDE7IC8vIDEgbWludXRlXHJcblxyXG5mdW5jdGlvbiBjaGVja01hcmdpblN0YXR1cyhhY2NvdW50KSB7XHJcbiAgICBpZiAoIWFjY291bnQgfHwgKGFjY291bnQgJiYgIWFjY291bnQuZ2V0KFwiY2FsbF9vcmRlcnNcIiwgW10pLnNpemUpKVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XHJcblxyXG4gICAgY29uc3Qga2V5ID1cclxuICAgICAgICBhY2NvdW50LmdldChcIm5hbWVcIikgKyBKU09OLnN0cmluZ2lmeShhY2NvdW50LmdldChcImNhbGxfb3JkZXJzXCIpKTtcclxuICAgIGlmIChhc3luY0NhY2hlW2tleV0pIHtcclxuICAgICAgICBpZiAoYXN5bmNDYWNoZVtrZXldLnJlc3VsdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGFzeW5jQ2FjaGVba2V5XS5yZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XHJcbiAgICAgICAgICAgIGFzeW5jQ2FjaGVba2V5XS5xdWV1ZS5wdXNoKHtyZXMsIHJlan0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xyXG4gICAgICAgIGFzeW5jQ2FjaGVba2V5XSA9IHtxdWV1ZTogW3tyZXMsIHJlan1dLCByZXN1bHQ6IG51bGx9O1xyXG5cclxuICAgICAgICBGZXRjaENoYWluKFwiZ2V0T2JqZWN0XCIsIGFjY291bnQuZ2V0KFwiY2FsbF9vcmRlcnNcIikudG9BcnJheSgpKVxyXG4gICAgICAgICAgICAudGhlbihjYWxsX29yZGVycyA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXNzZXRzID0gW107XHJcbiAgICAgICAgICAgICAgICBjYWxsX29yZGVycy5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBiYXNlSWQgPSBhLmdldEluKFtcImNhbGxfcHJpY2VcIiwgXCJiYXNlXCIsIFwiYXNzZXRfaWRcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBxdW90ZUlkID0gYS5nZXRJbihbXCJjYWxsX3ByaWNlXCIsIFwicXVvdGVcIiwgXCJhc3NldF9pZFwiXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFzc2V0cy5pbmRleE9mKGJhc2VJZCkgPT09IC0xKSBhc3NldHMucHVzaChiYXNlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhc3NldHMuaW5kZXhPZihxdW90ZUlkKSA9PT0gLTEpIGFzc2V0cy5wdXNoKHF1b3RlSWQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBGZXRjaENoYWluKFwiZ2V0QXNzZXRcIiwgYXNzZXRzLCA2MDAwKS50aGVuKGFzc2V0cyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFzc2V0c01hcCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0cy5mb3JFYWNoKGFzc2V0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzTWFwW2Fzc2V0LmdldChcImlkXCIpXSA9IGFzc2V0LnRvSlMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3RhdHVzID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbF9vcmRlcnMuZm9yRWFjaChjbyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkZWJ0QXNzZXQgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzTWFwW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvLmdldEluKFtcImNhbGxfcHJpY2VcIiwgXCJxdW90ZVwiLCBcImFzc2V0X2lkXCJdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbGxhdGVyYWxBc3NldCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHNNYXBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY28uZ2V0SW4oW1wiY2FsbF9wcmljZVwiLCBcImJhc2VcIiwgXCJhc3NldF9pZFwiXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ0QXNzZXQuYml0YXNzZXQuY3VycmVudF9mZWVkLnNldHRsZW1lbnRfcHJpY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcC5iYXNlLmFzc2V0X2lkID09PSBzcC5xdW90ZS5hc3NldF9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzW2RlYnRBc3NldC5pZF0gPSB7cmF0aW86IG51bGx9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbGxhdGVyYWwgPSBuZXcgQXNzZXQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogY28uZ2V0KFwiY29sbGF0ZXJhbFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldF9pZDogY29sbGF0ZXJhbEFzc2V0LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWNpc2lvbjogY29sbGF0ZXJhbEFzc2V0LnByZWNpc2lvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVidCA9IG5ldyBBc3NldCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBjby5nZXQoXCJkZWJ0XCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBkZWJ0QXNzZXQuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBkZWJ0QXNzZXQucHJlY2lzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtciA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidEFzc2V0LmJpdGFzc2V0LmN1cnJlbnRfZmVlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFpbnRlbmFuY2VfY29sbGF0ZXJhbF9yYXRpbyAvIDEwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJpY2UgPSBuZXcgRmVlZFByaWNlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZU9iamVjdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidEFzc2V0LmJpdGFzc2V0LmN1cnJlbnRfZmVlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldHRsZW1lbnRfcHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0X2Jhc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnRBc3NldC5iaXRhc3NldC5jdXJyZW50X2ZlZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXR0bGVtZW50X3ByaWNlLnF1b3RlLmFzc2V0X2lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidEFzc2V0LmJpdGFzc2V0LmN1cnJlbnRfZmVlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1heGltdW1fc2hvcnRfc3F1ZWV6ZV9yYXRpbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHM6IGFzc2V0c01hcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXRpbzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGF0ZXJhbC5nZXRBbW91bnQoe3JlYWw6IHRydWV9KSAvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkZWJ0LmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlLnRvUmVhbCgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hTihjdXJyZW50LnJhdGlvKSkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5yYXRpbyA8IG1yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5zdGF0dXNDbGFzcyA9IFwiZGFuZ2VyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnQucmF0aW8gPCBtciArIDAuNSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuc3RhdHVzQ2xhc3MgPSBcIndhcm5pbmdcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5zdGF0dXNDbGFzcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNbZGVidEFzc2V0LmlkXSA9IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBhc3luY0NhY2hlW2tleV0ucXVldWUuZm9yRWFjaChwcm9taXNlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5yZXMoc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBhc3luY0NhY2hlW2tleV0gPSB7cmVzdWx0OiBzdGF0dXN9O1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXN5bmNDYWNoZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGNoZWNrTWFyZ2luU3RhdHVzVFRMKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXN5bmNDYWNoZVtrZXldLnF1ZXVlLmZvckVhY2gocHJvbWlzZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5yZWooKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQge2NoZWNrTWFyZ2luU3RhdHVzfTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgUmVhY3RIaWdoY2hhcnRzIGZyb20gXCJyZWFjdC1oaWdoY2hhcnRzXCI7XHJcbmltcG9ydCBUcmVlbWFwIGZyb20gXCJoaWdoY2hhcnRzL21vZHVsZXMvdHJlZW1hcFwiO1xyXG5pbXBvcnQgSGVhdG1hcCBmcm9tIFwiaGlnaGNoYXJ0cy9tb2R1bGVzL2hlYXRtYXBcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCBBbHRDb250YWluZXIgZnJvbSBcImFsdC1jb250YWluZXJcIjtcclxuaW1wb3J0IE1hcmtldFV0aWxzIGZyb20gXCJjb21tb24vbWFya2V0X3V0aWxzXCI7XHJcbmltcG9ydCBNYXJrZXRzU3RvcmUgZnJvbSBcInN0b3Jlcy9NYXJrZXRzU3RvcmVcIjtcclxuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XHJcblxyXG5UcmVlbWFwKFJlYWN0SGlnaGNoYXJ0cy5IaWdoY2hhcnRzKTtcclxuSGVhdG1hcChSZWFjdEhpZ2hjaGFydHMuSGlnaGNoYXJ0cyk7XHJcblxyXG5jbGFzcyBBY2NvdW50VHJlZW1hcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFzc2V0czogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0c0xpc3QsXHJcbiAgICAgICAgcHJlZmVycmVkQXNzZXQ6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgYXNzZXRzOiBbXSxcclxuICAgICAgICBwcmVmZXJyZWRBc3NldDogXCIxLjMuMFwiXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMpIHtcclxuICAgIC8vICAgICByZXR1cm4gKFxyXG4gICAgLy8gICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobmV4dFByb3BzLmJhbGFuY2VPYmplY3RzLCB0aGlzLnByb3BzLmJhbGFuY2VPYmplY3RzKSB8fFxyXG4gICAgLy8gICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobmV4dFByb3BzLmFzc2V0cywgdGhpcy5wcm9wcy5hc3NldHMpXHJcbiAgICAvLyAgICAgKTtcclxuICAgIC8vIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgYmFsYW5jZU9iamVjdHMsXHJcbiAgICAgICAgICAgIGNvcmVfYXNzZXQsXHJcbiAgICAgICAgICAgIG1hcmtldFN0YXRzLFxyXG4gICAgICAgICAgICBwcmVmZXJyZWRBc3NldFxyXG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBsZXQgYWNjb3VudEJhbGFuY2VzID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGJhbGFuY2VPYmplY3RzICYmIGJhbGFuY2VPYmplY3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IHRvdGFsVmFsdWUgPSAwO1xyXG4gICAgICAgICAgICBhY2NvdW50QmFsYW5jZXMgPSBiYWxhbmNlT2JqZWN0cy5mb3JFYWNoKGJhbGFuY2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFiYWxhbmNlKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBsZXQgYmFsYW5jZU9iamVjdCA9XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGJhbGFuY2UgPT0gXCJzdHJpbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IENoYWluU3RvcmUuZ2V0T2JqZWN0KGJhbGFuY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYmFsYW5jZTtcclxuICAgICAgICAgICAgICAgIGxldCBhc3NldF90eXBlID0gYmFsYW5jZU9iamVjdC5nZXQoXCJhc3NldF90eXBlXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGFzc2V0ID0gQ2hhaW5TdG9yZS5nZXRBc3NldChhc3NldF90eXBlKTtcclxuICAgICAgICAgICAgICAgIGlmICghYXNzZXQgfHwgIXByZWZlcnJlZEFzc2V0KSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBsZXQgYW1vdW50ID0gTnVtYmVyKGJhbGFuY2VPYmplY3QuZ2V0KFwiYmFsYW5jZVwiKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcVZhbHVlID0gTWFya2V0VXRpbHMuY29udmVydFZhbHVlKFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldCxcclxuICAgICAgICAgICAgICAgICAgICBhc3NldCxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRTdGF0cyxcclxuICAgICAgICAgICAgICAgICAgICBjb3JlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZXFWYWx1ZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB0b3RhbFZhbHVlICs9IGVxVmFsdWUgLyBwcmVjaXNpb247XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYWNjb3VudEJhbGFuY2VzID0gYmFsYW5jZU9iamVjdHNcclxuICAgICAgICAgICAgICAgIC5tYXAoKGJhbGFuY2UsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiYWxhbmNlKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYmFsYW5jZU9iamVjdCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBiYWxhbmNlID09IFwic3RyaW5nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gQ2hhaW5TdG9yZS5nZXRPYmplY3QoYmFsYW5jZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYmFsYW5jZTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXNzZXRfdHlwZSA9IGJhbGFuY2VPYmplY3QuZ2V0KFwiYXNzZXRfdHlwZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXNzZXQgPSBDaGFpblN0b3JlLmdldEFzc2V0KGFzc2V0X3R5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYXNzZXQpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhbW91bnQgPSBOdW1iZXIoYmFsYW5jZU9iamVjdC5nZXQoXCJiYWxhbmNlXCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXFWYWx1ZSA9IE1hcmtldFV0aWxzLmNvbnZlcnRWYWx1ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldFN0YXRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlcVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkQXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbFZhbHVlID0gZXFWYWx1ZSAvIHByZWNpc2lvbjtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwZXJjZW50ID0gKGZpbmFsVmFsdWUgLyB0b3RhbFZhbHVlKSAqIDEwMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgICogRmlsdGVyIG91dCBhc3NldHMgdGhhdCBtYWtlIHVwIGEgc21hbGwgcGVyY2VudGFnZSBvZlxyXG4gICAgICAgICAgICAgICAgKiB0aGUgdG90YWwgdmFsdWUgb2YgdGhlIGFjY291bnRcclxuICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlcmNlbnQgPCAwLjUpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmluYWxWYWx1ZSA+PSAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBgJHthc3NldC5nZXQoXCJzeW1ib2xcIil9ICgke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxWYWx1ZSA9PT0gMCA/IDAgOiBwZXJjZW50LnRvRml4ZWQoMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSUpYCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZpbmFsVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBSZWFjdEhpZ2hjaGFydHMuSGlnaGNoYXJ0cy5nZXRPcHRpb25zKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb2xvcnNbaW5kZXhdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihuID0+ICEhbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGFjY291bnRCYWxhbmNlcyAmJlxyXG4gICAgICAgICAgICBhY2NvdW50QmFsYW5jZXMubGVuZ3RoID09PSAxICYmXHJcbiAgICAgICAgICAgIGFjY291bnRCYWxhbmNlc1swXS52YWx1ZSA9PT0gMFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBhY2NvdW50QmFsYW5jZXMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgY2hhcnQ6IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDI1NSwgMCwgMCwgMClcIixcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMjUwLFxyXG4gICAgICAgICAgICAgICAgc3BhY2luZ0xlZnQ6IDAsXHJcbiAgICAgICAgICAgICAgICBzcGFjaW5nUmlnaHQ6IDAsXHJcbiAgICAgICAgICAgICAgICBzcGFjaW5nQm90dG9tOiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGNvbG9yQXhpczoge1xyXG4gICAgICAgICAgICAvLyAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICAvLyAgICAgbWluQ29sb3I6IFwiI2ZmZmZmZlwiLFxyXG4gICAgICAgICAgICAvLyAgICAgbWF4Q29sb3I6IFJlYWN0SGlnaGNoYXJ0cy5IaWdoY2hhcnRzLmdldE9wdGlvbnMoKS5jb2xvcnNbMF1cclxuICAgICAgICAgICAgLy8gfSxcclxuICAgICAgICAgICAgY3JlZGl0czoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGVnZW5kOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwbG90T3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgdHJlZW1hcDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludEZvcm1hdHRlcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDxiPiR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9PC9iPjogJHtSZWFjdEhpZ2hjaGFydHMuSGlnaGNoYXJ0cy5udW1iZXJGb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfSAke3ByZWZlcnJlZEFzc2V0LmdldChcInN5bWJvbFwiKX1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXJpZXM6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRyZWVtYXBcIixcclxuICAgICAgICAgICAgICAgICAgICBsZXZlbHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRBbGdvcml0aG06IFwic2xpY2VBbmREaWNlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhTGFiZWxzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGFjY291bnRCYWxhbmNlc1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICB0aXRsZToge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogbnVsbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY2NvdW50LXRyZWVtYXBcIj5cclxuICAgICAgICAgICAgICAgIDxSZWFjdEhpZ2hjaGFydHMgY29uZmlnPXtjb25maWd9IC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkFjY291bnRUcmVlbWFwID0gQmluZFRvQ2hhaW5TdGF0ZShBY2NvdW50VHJlZW1hcCk7XHJcblxyXG5jbGFzcyBBY2NvdW50VHJlZW1hcEJhbGFuY2VXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYmFsYW5jZU9iamVjdHM6IENoYWluVHlwZXMuQ2hhaW5PYmplY3RzTGlzdCxcclxuICAgICAgICBjb3JlX2Fzc2V0OiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIGJhbGFuY2VPYmplY3RzOiBbXSxcclxuICAgICAgICBjb3JlX2Fzc2V0OiBcIjEuMy4wXCJcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBhc3NldHMgPSB0aGlzLnByb3BzLmJhbGFuY2VPYmplY3RzLmZpbHRlcihhID0+ICEhYSkubWFwKGEgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gYS5nZXQoXCJhc3NldF90eXBlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxBY2NvdW50VHJlZW1hcFxyXG4gICAgICAgICAgICAgICAgcHJlZmVycmVkQXNzZXQ9e3RoaXMucHJvcHMuc2V0dGluZ3MuZ2V0KFwidW5pdFwiLCBcIjEuMy4wXCIpfVxyXG4gICAgICAgICAgICAgICAgYXNzZXRzPXthc3NldHN9XHJcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5BY2NvdW50VHJlZW1hcEJhbGFuY2VXcmFwcGVyID0gQmluZFRvQ2hhaW5TdGF0ZShBY2NvdW50VHJlZW1hcEJhbGFuY2VXcmFwcGVyKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFjY291bnRUcmVlbWFwV3JhcHBlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPEFsdENvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgc3RvcmVzPXtbU2V0dGluZ3NTdG9yZSwgTWFya2V0c1N0b3JlXX1cclxuICAgICAgICAgICAgICAgIGluamVjdD17e1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldFN0YXRzOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXJrZXRzU3RvcmUuZ2V0U3RhdGUoKS5hbGxNYXJrZXRTdGF0cztcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkuc2V0dGluZ3M7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPEFjY291bnRUcmVlbWFwQmFsYW5jZVdyYXBwZXJcclxuICAgICAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cclxuICAgICAgICAgICAgICAgICAgICByZWY9e3RoaXMucHJvcHMucmVmQ2FsbGJhY2t9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L0FsdENvbnRhaW5lcj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IGRlYm91bmNlUmVuZGVyIGZyb20gXCJyZWFjdC1kZWJvdW5jZS1yZW5kZXJcIjtcclxuaW1wb3J0IEJhbGFuY2VDb21wb25lbnQgZnJvbSBcIi4uL1V0aWxpdHkvQmFsYW5jZUNvbXBvbmVudFwiO1xyXG5pbXBvcnQge0JhbGFuY2VWYWx1ZUNvbXBvbmVudH0gZnJvbSBcIi4uL1V0aWxpdHkvRXF1aXZhbGVudFZhbHVlQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7TWFya2V0MjRIb3VyQ2hhbmdlQ29tcG9uZW50fSBmcm9tIFwiLi4vVXRpbGl0eS9NYXJrZXRDaGFuZ2VDb21wb25lbnRcIjtcclxuaW1wb3J0IEFzc2V0SW1hZ2UgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXRJbWFnZVwiO1xyXG5pbXBvcnQgYXNzZXRVdGlscyBmcm9tIFwiY29tbW9uL2Fzc2V0X3V0aWxzXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IHtMaW5rfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5pbXBvcnQgRXF1aXZhbGVudFByaWNlIGZyb20gXCIuLi9VdGlsaXR5L0VxdWl2YWxlbnRQcmljZVwiO1xyXG5pbXBvcnQgTGlua1RvQXNzZXRCeUlkIGZyb20gXCIuLi9VdGlsaXR5L0xpbmtUb0Fzc2V0QnlJZFwiO1xyXG5pbXBvcnQgQm9ycm93TW9kYWwgZnJvbSBcIi4uL01vZGFsL0JvcnJvd01vZGFsXCI7XHJcbmltcG9ydCBSZWFjdFRvb2x0aXAgZnJvbSBcInJlYWN0LXRvb2x0aXBcIjtcclxuaW1wb3J0IHtnZXRCYWNrZWRDb2lufSBmcm9tIFwiY29tbW9uL2dhdGV3YXlVdGlsc1wiO1xyXG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gXCJhbHQtcmVhY3RcIjtcclxuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XHJcbmltcG9ydCBHYXRld2F5U3RvcmUgZnJvbSBcInN0b3Jlcy9HYXRld2F5U3RvcmVcIjtcclxuaW1wb3J0IE1hcmtldHNTdG9yZSBmcm9tIFwic3RvcmVzL01hcmtldHNTdG9yZVwiO1xyXG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XHJcbmltcG9ydCBQdWxzZUljb24gZnJvbSBcIi4uL0ljb24vUHVsc2VJY29uXCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBTZW5kTW9kYWwgZnJvbSBcIi4uL01vZGFsL1NlbmRNb2RhbFwiO1xyXG5pbXBvcnQgU2V0dGluZ3NBY3Rpb25zIGZyb20gXCJhY3Rpb25zL1NldHRpbmdzQWN0aW9uc1wiO1xyXG5pbXBvcnQgU2V0dGxlTW9kYWwgZnJvbSBcIi4uL01vZGFsL1NldHRsZU1vZGFsXCI7XHJcbmltcG9ydCBEZXBvc2l0TW9kYWwgZnJvbSBcIi4uL01vZGFsL0RlcG9zaXRNb2RhbFwiO1xyXG5pbXBvcnQgU2ltcGxlRGVwb3NpdFdpdGhkcmF3IGZyb20gXCIuLi9EYXNoYm9hcmQvU2ltcGxlRGVwb3NpdFdpdGhkcmF3XCI7XHJcbmltcG9ydCBTaW1wbGVEZXBvc2l0QmxvY2t0cmFkZXNCcmlkZ2UgZnJvbSBcIi4uL0Rhc2hib2FyZC9TaW1wbGVEZXBvc2l0QmxvY2t0cmFkZXNCcmlkZ2VcIjtcclxuaW1wb3J0IFdpdGhkcmF3TW9kYWwgZnJvbSBcIi4uL01vZGFsL1dpdGhkcmF3TW9kYWxOZXdcIjtcclxuaW1wb3J0IFpmQXBpIGZyb20gXCJyZWFjdC1mb3VuZGF0aW9uLWFwcHMvc3JjL3V0aWxzL2ZvdW5kYXRpb24tYXBpXCI7XHJcbmltcG9ydCBSZXNlcnZlQXNzZXRNb2RhbCBmcm9tIFwiLi4vTW9kYWwvUmVzZXJ2ZUFzc2V0TW9kYWxcIjtcclxuaW1wb3J0IEJhc2VNb2RhbCBmcm9tIFwiLi4vTW9kYWwvQmFzZU1vZGFsXCI7XHJcbmltcG9ydCBQYWdpbmF0ZWRMaXN0IGZyb20gXCIuLi9VdGlsaXR5L1BhZ2luYXRlZExpc3RcIjtcclxuaW1wb3J0IE1hcmtldFV0aWxzIGZyb20gXCJjb21tb24vbWFya2V0X3V0aWxzXCI7XHJcblxyXG5jbGFzcyBBY2NvdW50UG9ydGZvbGlvTGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBzZXR0bGVBc3NldDogXCIxLjMuMFwiLFxyXG4gICAgICAgICAgICBkZXBvc2l0QXNzZXQ6IG51bGwsXHJcbiAgICAgICAgICAgIHdpdGhkcmF3QXNzZXQ6IG51bGwsXHJcbiAgICAgICAgICAgIGJyaWRnZUFzc2V0OiBudWxsLFxyXG4gICAgICAgICAgICBhbGxSZWZzQXNzaWduZWQ6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5xdHlSZWZzID0ge307XHJcbiAgICAgICAgdGhpcy5wcmljZVJlZnMgPSB7fTtcclxuICAgICAgICB0aGlzLnZhbHVlUmVmcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuY2hhbmdlUmVmcyA9IHt9O1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLnNvcnRGdW5jdGlvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5zb3J0RnVuY3Rpb25zW2tleV0gPSB0aGlzLnNvcnRGdW5jdGlvbnNba2V5XS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9jaGVja1JlZkFzc2lnbm1lbnRzID0gdGhpcy5fY2hlY2tSZWZBc3NpZ25tZW50cy5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcclxuICAgICAgICB0aGlzLnJlZkNoZWNrSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLl9jaGVja1JlZkFzc2lnbm1lbnRzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMucmVmQ2hlY2tJbnRlcnZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrUmVmQXNzaWdubWVudHMoKSB7XHJcbiAgICAgICAgLypcclxuICAgICAgICAqIEluIG9yZGVyIGZvciBzb3J0aW5nIHRvIHdvcmsgYWxsIHJlZnMgbXVzdCBiZSBhc3NpZ25lZCwgc28gd2UgY2hlY2tcclxuICAgICAgICAqIHRoaXMgaGVyZSBhbmQgdXBkYXRlIHRoZSBzdGF0ZSB0byB0cmlnZ2VyIGEgcmVyZW5kZXJcclxuICAgICAgICAqL1xyXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5hbGxSZWZzQXNzaWduZWQpIHtcclxuICAgICAgICAgICAgbGV0IHJlZktleXMgPSBbXCJxdHlSZWZzXCIsIFwicHJpY2VSZWZzXCIsIFwidmFsdWVSZWZzXCIsIFwiY2hhbmdlUmVmc1wiXTtcclxuICAgICAgICAgICAgY29uc3QgYWxsUmVmc0Fzc2lnbmVkID0gcmVmS2V5cy5yZWR1Y2UoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChhID09PSB1bmRlZmluZWQpIHJldHVybiAhIU9iamVjdC5rZXlzKHRoaXNbYl0pLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIU9iamVjdC5rZXlzKHRoaXNbYl0pLmxlbmd0aCAmJiBhO1xyXG4gICAgICAgICAgICB9LCB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICBpZiAoYWxsUmVmc0Fzc2lnbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMucmVmQ2hlY2tJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHthbGxSZWZzQXNzaWduZWR9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobnAsIG5zKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KG5zLCB0aGlzLnN0YXRlKSB8fFxyXG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobnAuYmFja2VkQ29pbnMsIHRoaXMucHJvcHMuYmFja2VkQ29pbnMpIHx8XHJcbiAgICAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhucC5iYWxhbmNlcywgdGhpcy5wcm9wcy5iYWxhbmNlcykgfHxcclxuICAgICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KG5wLmJhbGFuY2VMaXN0LCB0aGlzLnByb3BzLmJhbGFuY2VMaXN0KSB8fFxyXG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3coXHJcbiAgICAgICAgICAgICAgICBucC5vcHRpb25hbEFzc2V0cyxcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub3B0aW9uYWxBc3NldHNcclxuICAgICAgICAgICAgKSB8fFxyXG4gICAgICAgICAgICBucC5hY2NvdW50ICE9PSB0aGlzLnByb3BzLmFjY291bnQgfHxcclxuICAgICAgICAgICAgbnAudmlzaWJsZSAhPT0gdGhpcy5wcm9wcy52aXNpYmxlIHx8XHJcbiAgICAgICAgICAgIG5wLnNldHRpbmdzICE9PSB0aGlzLnByb3BzLnNldHRpbmdzIHx8XHJcbiAgICAgICAgICAgIG5wLmhpZGRlbkFzc2V0cyAhPT0gdGhpcy5wcm9wcy5oaWRkZW5Bc3NldHMgfHxcclxuICAgICAgICAgICAgbnAuc29ydERpcmVjdGlvbiAhPT0gdGhpcy5wcm9wcy5zb3J0RGlyZWN0aW9uIHx8XHJcbiAgICAgICAgICAgIG5wLnNvcnRLZXkgIT09IHRoaXMucHJvcHMuc29ydEtleSB8fFxyXG4gICAgICAgICAgICBucC5hbGxNYXJrZXRTdGF0cy5yZWR1Y2UoKGEsIHZhbHVlLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgdXRpbHMuY2hlY2tfbWFya2V0X3N0YXRzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hbGxNYXJrZXRTdGF0cy5nZXQoa2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICkgfHwgYVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSwgZmFsc2UpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBzb3J0RnVuY3Rpb25zID0ge1xyXG4gICAgICAgIHF0eTogZnVuY3Rpb24oYSwgYiwgZm9yY2UpIHtcclxuICAgICAgICAgICAgaWYgKE51bWJlcih0aGlzLnF0eVJlZnNbYS5rZXldKSA8IE51bWJlcih0aGlzLnF0eVJlZnNbYi5rZXldKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnNvcnREaXJlY3Rpb24gfHwgZm9yY2UgPyAtMSA6IDE7XHJcblxyXG4gICAgICAgICAgICBpZiAoTnVtYmVyKHRoaXMucXR5UmVmc1thLmtleV0pID4gTnVtYmVyKHRoaXMucXR5UmVmc1tiLmtleV0pKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc29ydERpcmVjdGlvbiB8fCBmb3JjZSA/IDEgOiAtMTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFscGhhYmV0aWM6IGZ1bmN0aW9uKGEsIGIsIGZvcmNlKSB7XHJcbiAgICAgICAgICAgIGlmIChhLmtleSA+IGIua2V5KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc29ydERpcmVjdGlvbiB8fCBmb3JjZSA/IDEgOiAtMTtcclxuICAgICAgICAgICAgaWYgKGEua2V5IDwgYi5rZXkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5zb3J0RGlyZWN0aW9uIHx8IGZvcmNlID8gLTEgOiAxO1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHByaWNlVmFsdWU6IGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgbGV0IGFQcmljZSA9IHRoaXMucHJpY2VSZWZzW2Eua2V5XTtcclxuICAgICAgICAgICAgbGV0IGJQcmljZSA9IHRoaXMucHJpY2VSZWZzW2Iua2V5XTtcclxuICAgICAgICAgICAgaWYgKGFQcmljZSAmJiBiUHJpY2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnNvcnREaXJlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICA/IGFQcmljZSAtIGJQcmljZVxyXG4gICAgICAgICAgICAgICAgICAgIDogYlByaWNlIC0gYVByaWNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFQcmljZSA9PT0gbnVsbCAmJiBiUHJpY2UgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFQcmljZSAhPT0gbnVsbCAmJiBiUHJpY2UgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNvcnRGdW5jdGlvbnMuYWxwaGFiZXRpYyhhLCBiLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdG90YWxWYWx1ZTogZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgICAgICBsZXQgYVZhbHVlID0gdGhpcy52YWx1ZVJlZnNbYS5rZXldO1xyXG4gICAgICAgICAgICBsZXQgYlZhbHVlID0gdGhpcy52YWx1ZVJlZnNbYi5rZXldO1xyXG4gICAgICAgICAgICBpZiAoYVZhbHVlICYmIGJWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc29ydERpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgID8gYVZhbHVlIC0gYlZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgOiBiVmFsdWUgLSBhVmFsdWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWFWYWx1ZSAmJiBiVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFWYWx1ZSAmJiAhYlZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zb3J0RnVuY3Rpb25zLmFscGhhYmV0aWMoYSwgYiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoYW5nZVZhbHVlOiBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgIGxldCBhVmFsdWUgPSB0aGlzLmNoYW5nZVJlZnNbYS5rZXldO1xyXG4gICAgICAgICAgICBsZXQgYlZhbHVlID0gdGhpcy5jaGFuZ2VSZWZzW2Iua2V5XTtcclxuXHJcbiAgICAgICAgICAgIGlmIChhVmFsdWUgJiYgYlZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYUNoYW5nZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChhVmFsdWUpICE9IFwiTmFOXCIgPyBwYXJzZUZsb2F0KGFWYWx1ZSkgOiBhVmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgYkNoYW5nZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChiVmFsdWUpICE9IFwiTmFOXCIgPyBwYXJzZUZsb2F0KGJWYWx1ZSkgOiBiVmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGlyZWN0aW9uID1cclxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdGhpcy5wcm9wcy5zb3J0RGlyZWN0aW9uICE9PSBcInVuZGVmaW5lZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5wcm9wcy5zb3J0RGlyZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlyZWN0aW9uID8gYUNoYW5nZSAtIGJDaGFuZ2UgOiBiQ2hhbmdlIC0gYUNoYW5nZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdHJpZ2dlclNlbmQoYXNzZXQpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtzZW5kX2Fzc2V0OiBhc3NldH0sICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VuZF9tb2RhbCkgdGhpcy5zZW5kX21vZGFsLnNob3coKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25TZXR0bGVBc3NldChpZCwgZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2V0dGxlQXNzZXQ6IGlkXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVmcy5zZXR0bGVtZW50X21vZGFsLnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGlkZUFzc2V0KGFzc2V0LCBzdGF0dXMpIHtcclxuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuaGlkZUFzc2V0KGFzc2V0LCBzdGF0dXMpO1xyXG4gICAgfVxyXG5cclxuICAgIF9idXJuQXNzZXQoYXNzZXQsIGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cmVzZXJ2ZTogYXNzZXR9KTtcclxuICAgICAgICBaZkFwaS5wdWJsaXNoKFwicmVzZXJ2ZV9hc3NldFwiLCBcIm9wZW5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgX3Nob3dEZXBvc2l0TW9kYWwoYXNzZXQsIGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZGVwb3NpdEFzc2V0OiBhc3NldH0sICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZWZzLmRlcG9zaXRfbW9kYWxfbmV3LnNob3coKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfc2hvd0RlcG9zaXRXaXRoZHJhdyhhY3Rpb24sIGFzc2V0LCBmaWF0TW9kYWwsIGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgW2FjdGlvbiA9PT0gXCJicmlkZ2VfbW9kYWxcIlxyXG4gICAgICAgICAgICAgICAgICAgID8gXCJicmlkZ2VBc3NldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgOiBhY3Rpb24gPT09IFwiZGVwb3NpdF9tb2RhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJkZXBvc2l0QXNzZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwid2l0aGRyYXdBc3NldFwiXTogYXNzZXQsXHJcbiAgICAgICAgICAgICAgICBmaWF0TW9kYWxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZzW2FjdGlvbl0uc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0U2VwYXJhdG9yKHJlbmRlcikge1xyXG4gICAgICAgIHJldHVybiByZW5kZXIgPyA8c3Bhbj4mbmJzcDt8Jm5ic3A7PC9zcGFuPiA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgX3JlbmRlckJ1eSA9IChzeW1ib2wsIGNhbkJ1eSwgYXNzZXROYW1lLCBlbXB0eUNlbGwsIGJhbGFuY2UpID0+IHtcclxuICAgICAgICBpZiAoc3ltYm9sID09PSBcIkJUU1wiICYmIGJhbGFuY2UgPD0gMTAwMDAwKSB7XHJcbiAgICAgICAgICAgIC8vIFByZWNpc2lvbiBvZiA1LCAxID0gMTBeNVxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fc2hvd0RlcG9zaXRXaXRoZHJhdy5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYnJpZGdlX21vZGFsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFB1bHNlSWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25JY29uPVwiZG9sbGFyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZkljb249XCJkb2xsYXItZ3JlZW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5kb2xsYXIuYnV5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uPXsxMDAwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbkJ1eSAmJiB0aGlzLnByb3BzLmlzTXlBY2NvdW50ID8gKFxyXG4gICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fc2hvd0RlcG9zaXRXaXRoZHJhdy5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYnJpZGdlX21vZGFsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkb2xsYXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5kb2xsYXIuYnV5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgZW1wdHlDZWxsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfcmVuZGVyQmFsYW5jZXMoYmFsYW5jZUxpc3QsIG9wdGlvbmFsQXNzZXRzLCB2aXNpYmxlKSB7XHJcbiAgICAgICAgY29uc3Qge1xyXG4gICAgICAgICAgICBjb3JlU3ltYm9sLFxyXG4gICAgICAgICAgICBwcmVmZXJyZWRVbml0LFxyXG4gICAgICAgICAgICBzZXR0aW5ncyxcclxuICAgICAgICAgICAgaGlkZGVuQXNzZXRzLFxyXG4gICAgICAgICAgICBvcmRlcnNcclxuICAgICAgICB9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQgc2hvd0Fzc2V0UGVyY2VudCA9IHNldHRpbmdzLmdldChcInNob3dBc3NldFBlcmNlbnRcIiwgZmFsc2UpO1xyXG5cclxuICAgICAgICBjb25zdCByZW5kZXJCb3Jyb3cgPSAoYXNzZXQsIGFjY291bnQpID0+IHtcclxuICAgICAgICAgICAgbGV0IGlzQml0QXNzZXQgPSBhc3NldCAmJiBhc3NldC5oYXMoXCJiaXRhc3NldF9kYXRhX2lkXCIpO1xyXG4gICAgICAgICAgICBsZXQgbW9kYWxSZWYgPSBcImNwX21vZGFsX1wiICsgYXNzZXQuZ2V0KFwiaWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpc0JpdEFzc2V0LFxyXG4gICAgICAgICAgICAgICAgYm9ycm93TW9kYWw6ICFpc0JpdEFzc2V0ID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgICAgICA8Qm9ycm93TW9kYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXttb2RhbFJlZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxJZD17XCJib3Jyb3dfbW9kYWxfXCIgKyBhc3NldC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYXNzZXQ9e2Fzc2V0LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNraW5nX2Fzc2V0PXthc3NldC5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJpdGFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2hvcnRfYmFja2luZ19hc3NldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgYm9ycm93TGluazogIWlzQml0QXNzZXQgPyBudWxsIDogKFxyXG4gICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0VG9vbHRpcC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnNbbW9kYWxSZWZdLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZG9sbGFyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMuZG9sbGFyLmJvcnJvd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgYmFsYW5jZXMgPSBbXTtcclxuICAgICAgICBjb25zdCBlbXB0eUNlbGwgPSBcIi1cIjtcclxuICAgICAgICBiYWxhbmNlTGlzdC5mb3JFYWNoKGJhbGFuY2UgPT4ge1xyXG4gICAgICAgICAgICBsZXQgYmFsYW5jZU9iamVjdCA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KGJhbGFuY2UpO1xyXG4gICAgICAgICAgICBpZiAoIWJhbGFuY2VPYmplY3QpIHJldHVybjtcclxuICAgICAgICAgICAgbGV0IGFzc2V0X3R5cGUgPSBiYWxhbmNlT2JqZWN0LmdldChcImFzc2V0X3R5cGVcIik7XHJcbiAgICAgICAgICAgIGxldCBhc3NldCA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KGFzc2V0X3R5cGUpO1xyXG4gICAgICAgICAgICBpZiAoIWFzc2V0KSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBsZXQgZGlyZWN0TWFya2V0TGluaywgc2V0dGxlTGluaywgdHJhbnNmZXJMaW5rO1xyXG4gICAgICAgICAgICBsZXQgc3ltYm9sID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFzc2V0TmFtZSA9IGFzc2V0LmdldChcInN5bWJvbFwiKTtcclxuICAgICAgICAgICAgY29uc3Qgbm90Q29yZSA9IGFzc2V0LmdldChcImlkXCIpICE9PSBcIjEuMy4wXCI7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdENvcmVQcmVmVW5pdCA9IHByZWZlcnJlZFVuaXQgIT09IGNvcmVTeW1ib2w7XHJcblxyXG4gICAgICAgICAgICBsZXQge21hcmtldH0gPSBhc3NldFV0aWxzLnBhcnNlRGVzY3JpcHRpb24oXHJcbiAgICAgICAgICAgICAgICBhc3NldC5nZXRJbihbXCJvcHRpb25zXCIsIFwiZGVzY3JpcHRpb25cIl0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHN5bWJvbCA9IGFzc2V0LmdldChcInN5bWJvbFwiKTtcclxuICAgICAgICAgICAgaWYgKHN5bWJvbC5pbmRleE9mKFwiT1BFTi5cIikgIT09IC0xICYmICFtYXJrZXQpIG1hcmtldCA9IFwiVVNEXCI7XHJcbiAgICAgICAgICAgIGlmIChbXCJSVURFWC5HT0xPU1wiLCBcIlJVREVYLkdCR1wiXS5pbmRleE9mKHN5bWJvbCkgIT09IC0xKVxyXG4gICAgICAgICAgICAgICAgbWFya2V0ID0gXCJSVUJMRVwiO1xyXG4gICAgICAgICAgICAvLyBsZXQgcHJlZmVycmVkTWFya2V0ID0gbWFya2V0ID8gbWFya2V0IDogcHJlZmVycmVkVW5pdDtcclxuICAgICAgICAgICAgbGV0IHByZWZlcnJlZE1hcmtldCA9IG1hcmtldCA/IG1hcmtldCA6IGNvcmVTeW1ib2w7XHJcblxyXG4gICAgICAgICAgICAvKiBUYWJsZSBjb250ZW50ICovXHJcbiAgICAgICAgICAgIGRpcmVjdE1hcmtldExpbmsgPSBub3RDb3JlID8gKFxyXG4gICAgICAgICAgICAgICAgPExpbmsgdG89e2AvbWFya2V0LyR7YXNzZXQuZ2V0KFwic3ltYm9sXCIpfV8ke3ByZWZlcnJlZE1hcmtldH1gfT5cclxuICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwidHJhZGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLnRyYWRlLnRyYWRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICApIDogbm90Q29yZVByZWZVbml0ID8gKFxyXG4gICAgICAgICAgICAgICAgPExpbmsgdG89e2AvbWFya2V0LyR7YXNzZXQuZ2V0KFwic3ltYm9sXCIpfV8ke3ByZWZlcnJlZFVuaXR9YH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInRyYWRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy50cmFkZS50cmFkZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgIGVtcHR5Q2VsbFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0cmFuc2ZlckxpbmsgPSAoXHJcbiAgICAgICAgICAgICAgICA8TGluayB0bz17YC90cmFuc2Zlcj9hc3NldD0ke2Fzc2V0LmdldChcImlkXCIpfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0cmFuc2ZlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMudHJhbnNmZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBsZXQge2lzQml0QXNzZXQsIGJvcnJvd01vZGFsLCBib3Jyb3dMaW5rfSA9IHJlbmRlckJvcnJvdyhcclxuICAgICAgICAgICAgICAgIGFzc2V0LFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvKiBQb3BvdmVyIGNvbnRlbnQgKi9cclxuICAgICAgICAgICAgc2V0dGxlTGluayA9IChcclxuICAgICAgICAgICAgICAgIDxhIG9uQ2xpY2s9e3RoaXMuX29uU2V0dGxlQXNzZXQuYmluZCh0aGlzLCBhc3NldC5nZXQoXCJpZFwiKSl9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJzZXR0bGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLnNldHRsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGluY2x1ZGVBc3NldCA9ICFoaWRkZW5Bc3NldHMuaW5jbHVkZXMoYXNzZXRfdHlwZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc0JhbGFuY2UgPSAhIWJhbGFuY2VPYmplY3QuZ2V0KFwiYmFsYW5jZVwiKTtcclxuICAgICAgICAgICAgY29uc3QgaGFzT25PcmRlciA9ICEhb3JkZXJzW2Fzc2V0X3R5cGVdO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYmFja2VkQ29pbiA9IGdldEJhY2tlZENvaW4oXHJcbiAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJzeW1ib2xcIiksXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJhY2tlZENvaW5zXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIC8vIGNvbnN0IGNhbkRlcG9zaXQgPVxyXG4gICAgICAgICAgICAvLyAgICAgKGJhY2tlZENvaW4gJiYgYmFja2VkQ29pbi5kZXBvc2l0QWxsb3dlZCkgfHxcclxuICAgICAgICAgICAgLy8gICAgIGFzc2V0LmdldChcInN5bWJvbFwiKSA9PSBcIkJUU1wiO1xyXG4gICAgICAgICAgICBjb25zdCBjYW5EZXBvc2l0ID0gZmFsc2U7IC8vIGRpc2FibGUgdGlsbCBzdGFibGUgdmVyc2lvblxyXG5cclxuICAgICAgICAgICAgLy8gY29uc3QgY2FuV2l0aGRyYXcgPVxyXG4gICAgICAgICAgICAvLyAgICAgYmFja2VkQ29pbiAmJlxyXG4gICAgICAgICAgICAvLyAgICAgYmFja2VkQ29pbi53aXRoZHJhd2FsQWxsb3dlZCAmJlxyXG4gICAgICAgICAgICAvLyAgICAgKGhhc0JhbGFuY2UgJiYgYmFsYW5jZU9iamVjdC5nZXQoXCJiYWxhbmNlXCIpICE9IDApO1xyXG4gICAgICAgICAgICBjb25zdCBjYW5XaXRoZHJhdyA9IGZhbHNlOyAvLyBkaXNhYmxlIHRpbGwgc3RhYmxlIHZlcnNpb25cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbkJ1eSA9ICEhdGhpcy5wcm9wcy5icmlkZ2VDb2lucy5nZXQoc3ltYm9sKTtcclxuICAgICAgICAgICAgY29uc3QgYXNzZXRBbW91bnQgPSBiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIik7XHJcblxyXG4gICAgICAgICAgICAvKiBTb3J0aW5nIHJlZnMgKi9cclxuICAgICAgICAgICAgdGhpcy5xdHlSZWZzW2Fzc2V0LmdldChcInN5bWJvbFwiKV0gPSB1dGlscy5nZXRfYXNzZXRfYW1vdW50KFxyXG4gICAgICAgICAgICAgICAgYXNzZXRBbW91bnQsXHJcbiAgICAgICAgICAgICAgICBhc3NldFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLyogQXNzZXQgYW5kIEJhY2tpbmcgQXNzZXQgUHJlZml4ZXMgKi9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgb3B0aW9ucyA9XHJcbiAgICAgICAgICAgICAgICBhc3NldCAmJiBhc3NldC5nZXRJbihbXCJiaXRhc3NldFwiLCBcIm9wdGlvbnNcIl0pXHJcbiAgICAgICAgICAgICAgICAgICAgPyBhc3NldC5nZXRJbihbXCJiaXRhc3NldFwiLCBcIm9wdGlvbnNcIl0pLnRvSlMoKVxyXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgbGV0IGJhY2tpbmdBc3NldCA9XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zICYmIG9wdGlvbnMuc2hvcnRfYmFja2luZ19hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgID8gQ2hhaW5TdG9yZS5nZXRBc3NldChvcHRpb25zLnNob3J0X2JhY2tpbmdfYXNzZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgICAgICBsZXQge2lzQml0QXNzZXQ6IGlzQXNzZXRCaXRBc3NldH0gPSB1dGlscy5yZXBsYWNlTmFtZShhc3NldCk7XHJcbiAgICAgICAgICAgIGxldCB7aXNCaXRBc3NldDogaXNCYWNraW5nQml0QXNzZXR9ID0gdXRpbHMucmVwbGFjZU5hbWUoXHJcbiAgICAgICAgICAgICAgICBiYWNraW5nQXNzZXRcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBwcmVmZXJyZWRBc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQocHJlZmVycmVkVW5pdCk7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVSZWZzW2Fzc2V0LmdldChcInN5bWJvbFwiKV0gPVxyXG4gICAgICAgICAgICAgICAgaGFzQmFsYW5jZSAmJiAhIXByZWZlcnJlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgPyBNYXJrZXRVdGlscy5jb252ZXJ0VmFsdWUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRBbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkQXNzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hbGxNYXJrZXRTdGF0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvcmVBc3NldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wcmljZVJlZnNbYXNzZXQuZ2V0KFwic3ltYm9sXCIpXSA9ICFwcmVmZXJyZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICAgICAgICA6IE1hcmtldFV0aWxzLmdldEZpbmFsUHJpY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvcmVBc3NldCxcclxuICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkQXNzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFsbE1hcmtldFN0YXRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgbGV0IG1hcmtldElkID0gYXNzZXQuZ2V0KFwic3ltYm9sXCIpICsgXCJfXCIgKyBwcmVmZXJyZWRVbml0O1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudE1hcmtldFN0YXRzID0gdGhpcy5wcm9wcy5hbGxNYXJrZXRTdGF0cy5nZXQobWFya2V0SWQpO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVJlZnNbYXNzZXQuZ2V0KFwic3ltYm9sXCIpXSA9XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50TWFya2V0U3RhdHMgJiYgY3VycmVudE1hcmtldFN0YXRzLmNoYW5nZVxyXG4gICAgICAgICAgICAgICAgICAgID8gY3VycmVudE1hcmtldFN0YXRzLmNoYW5nZVxyXG4gICAgICAgICAgICAgICAgICAgIDogMDtcclxuXHJcbiAgICAgICAgICAgIGJhbGFuY2VzLnB1c2goXHJcbiAgICAgICAgICAgICAgICA8dHIga2V5PXthc3NldC5nZXQoXCJzeW1ib2xcIil9IHN0eWxlPXt7bWF4V2lkdGg6IFwiMTAwcmVtXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldEltYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlTm9uZVRvQnRzPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoPXszMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2Fzc2V0LmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtUb0Fzc2V0QnlJZCBhc3NldD17YXNzZXQuZ2V0KFwiaWRcIil9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7aGFzQmFsYW5jZSB8fCBoYXNPbk9yZGVyID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhbGFuY2VDb21wb25lbnQgYmFsYW5jZT17YmFsYW5jZX0gaGlkZV9hc3NldCAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEVxdWl2YWxlbnRQcmljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUFzc2V0PXthc3NldC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1bHNhdGU9e3tyZXZlcnNlOiB0cnVlLCBmaWxsOiBcImZvcndhcmRzXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9zeW1ib2xzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxNYXJrZXQyNEhvdXJDaGFuZ2VDb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U9e2Fzc2V0LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU9e3ByZWZlcnJlZFVuaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXRJZD17bWFya2V0SWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX3N5bWJvbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2hhc0JhbGFuY2UgfHwgaGFzT25PcmRlciA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCYWxhbmNlVmFsdWVDb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlPXtiYWxhbmNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvQXNzZXQ9e3ByZWZlcnJlZFVuaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICB7c2hvd0Fzc2V0UGVyY2VudCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtoYXNCYWxhbmNlID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCYWxhbmNlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2U9e2JhbGFuY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzUGVyY2VudGFnZT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPnt0cmFuc2Zlckxpbmt9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLl9yZW5kZXJCdXkoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJzeW1ib2xcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5CdXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eUNlbGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2NhbkRlcG9zaXQgJiYgdGhpcy5wcm9wcy5pc015QWNjb3VudCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7Y3Vyc29yOiBcInBvaW50ZXJcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkZXBvc2l0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5kZXBvc2l0LmRlcG9zaXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0eFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3Nob3dEZXBvc2l0TW9kYWwuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlDZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtjYW5XaXRoZHJhdyAmJiB0aGlzLnByb3BzLmlzTXlBY2NvdW50ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXshY2FuV2l0aGRyYXcgPyBcImRpc2FibGVkXCIgOiBcIlwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbldpdGhkcmF3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9zaG93RGVwb3NpdFdpdGhkcmF3LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndpdGhkcmF3X21vZGFsX25ld1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCkgPT4ge31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ3aXRoZHJhd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLndpdGhkcmF3XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlDZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+e2RpcmVjdE1hcmtldExpbmt9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtpc0JpdEFzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlubGluZS1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1wbGFjZT1cImJvdHRvbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLmJvcnJvd1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YXNzZXQ6IHN5bWJvbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtib3Jyb3dMaW5rfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtib3Jyb3dNb2RhbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlDZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtpc0JpdEFzc2V0ICYmIGJhY2tpbmdBc3NldCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJib3R0b21cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGlwPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5zZXR0bGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ6IGlzQXNzZXRCaXRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJiaXRcIiArIHN5bWJvbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc3ltYm9sLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2luZ0Fzc2V0OiBpc0JhY2tpbmdCaXRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJiaXRcIiArIGJhY2tpbmdBc3NldC5nZXQoXCJzeW1ib2xcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGJhY2tpbmdBc3NldC5nZXQoXCJzeW1ib2xcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0bGVEZWxheTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmZvcmNlX3NldHRsZW1lbnRfZGVsYXlfc2VjIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAzNjAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZXR0bGVMaW5rfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eUNlbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHshaXNCaXRBc3NldCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5SaWdodDogMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fYnVybkFzc2V0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcImlkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvbiBuYW1lPVwiZmlyZVwiIGNsYXNzTmFtZT1cImljb24tMTRweFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1wbGFjZT1cImJvdHRvbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGlwPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbmNsdWRlQXNzZXQgPyBcImhpZGVfYXNzZXRcIiA6IFwic2hvd19hc3NldFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luUmlnaHQ6IDB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlQXNzZXQgPyBcIm9yZGVyLWNhbmNlbFwiIDogXCJhY3Rpb24tcGx1c1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9oaWRlQXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0X3R5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJjcm9zcy1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcInBsdXMtY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJpY29ucy5jcm9zc19jaXJjbGUuaGlkZV9hc3NldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiaWNvbnMucGx1c19jaXJjbGUuc2hvd19hc3NldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChvcHRpb25hbEFzc2V0cykge1xyXG4gICAgICAgICAgICBvcHRpb25hbEFzc2V0c1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihhc3NldCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlzQXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5iYWNrZWRDb2lucy5nZXQoXCJPUEVOXCIsIFtdKS5mb3JFYWNoKGNvaW4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29pbiAmJiBjb2luLnN5bWJvbCA9PT0gYXNzZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQXZhaWxhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJvcHMuYnJpZGdlQ29pbnMuZ2V0KGFzc2V0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0F2YWlsYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBrZWVwID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlcy5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5rZXkgPT09IGFzc2V0KSBrZWVwID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtlZXAgJiYgaXNBdmFpbGFibGU7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZvckVhY2goYSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFzc2V0ID0gQ2hhaW5TdG9yZS5nZXRBc3NldChhKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXNzZXQgJiYgdGhpcy5wcm9wcy5pc015QWNjb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmNsdWRlQXNzZXQgPSAhaGlkZGVuQXNzZXRzLmluY2x1ZGVzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuZ2V0KFwiaWRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRoaXNBc3NldE5hbWUgPSBhc3NldC5nZXQoXCJzeW1ib2xcIikuc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5EZXBvc2l0ID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICEhdGhpcy5wcm9wcy5iYWNrZWRDb2luc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoXCJPUEVOXCIsIFtdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0+IGEuYmFja2luZ0NvaW5UeXBlID09PSB0aGlzQXNzZXROYW1lWzFdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgISF0aGlzLnByb3BzLmJhY2tlZENvaW5zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldChcIlJVREVYXCIsIFtdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0+IGEuYmFja2luZ0NvaW4gPT09IHRoaXNBc3NldE5hbWVbMV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJzeW1ib2xcIikgPT0gXCJCVFNcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbkJ1eSA9ICEhdGhpcy5wcm9wcy5icmlkZ2VDb2lucy5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJzeW1ib2xcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdENvcmUgPSBhc3NldC5nZXQoXCJpZFwiKSAhPT0gXCIxLjMuMFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQge21hcmtldH0gPSBhc3NldFV0aWxzLnBhcnNlRGVzY3JpcHRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXRJbihbXCJvcHRpb25zXCIsIFwiZGVzY3JpcHRpb25cIl0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcInN5bWJvbFwiKS5pbmRleE9mKFwiT1BFTi5cIikgIT09IC0xICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhbWFya2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldCA9IFwiVVNEXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcmVmZXJyZWRNYXJrZXQgPSBtYXJrZXQgPyBtYXJrZXQgOiBjb3JlU3ltYm9sO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpcmVjdE1hcmtldExpbmsgPSBub3RDb3JlID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17YC9tYXJrZXQvJHthc3NldC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3ltYm9sXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfV8ke3ByZWZlcnJlZE1hcmtldH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0cmFkZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMudHJhZGUudHJhZGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eUNlbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQml0QXNzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3Jyb3dNb2RhbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcnJvd0xpbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSA9IHJlbmRlckJvcnJvdyhhc3NldCwgdGhpcy5wcm9wcy5hY2NvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGluY2x1ZGVBc3NldCAmJiB2aXNpYmxlKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFpbmNsdWRlQXNzZXQgJiYgIXZpc2libGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21heFdpZHRoOiBcIjEwMHJlbVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldEltYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZU5vbmVUb0J0cz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg9ezMwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2Fzc2V0LmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQXNzZXRCeUlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2Fzc2V0LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntlbXB0eUNlbGx9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZW1wdHlDZWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlbXB0eUNlbGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2VtcHR5Q2VsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntlbXB0eUNlbGx9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcImNlbnRlclwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2FuQnV5ICYmIHRoaXMucHJvcHMuaXNNeUFjY291bnQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9zaG93RGVwb3NpdFdpdGhkcmF3LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJyaWRnZV9tb2RhbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRvbGxhclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5kb2xsYXIuYnV5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlDZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2FuRGVwb3NpdCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5pc015QWNjb3VudCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7Y3Vyc29yOiBcInBvaW50ZXJcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGVwb3NpdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmRlcG9zaXQuZGVwb3NpdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0eFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9zaG93RGVwb3NpdE1vZGFsLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJzeW1ib2xcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eUNlbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57ZW1wdHlDZWxsfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RpcmVjdE1hcmtldExpbmt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0JpdEFzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5saW5lLWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1wbGFjZT1cImJvdHRvbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGlwPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAuYm9ycm93XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YXNzZXQ6IGFzc2V0LmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtib3Jyb3dMaW5rfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Ym9ycm93TW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5Q2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntlbXB0eUNlbGx9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwiYm90dG9tXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGlwPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGluY2x1ZGVBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImhpZGVfYXNzZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcInNob3dfYXNzZXRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5SaWdodDogMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwib3JkZXItY2FuY2VsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJhY3Rpb24tcGx1c1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX2hpZGVBc3NldC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJjcm9zcy1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJwbHVzLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImljb25zLmNyb3NzX2NpcmNsZS5oaWRlX2Fzc2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiaWNvbnMucGx1c19jaXJjbGUuc2hvd19hc3NldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYmFsYW5jZXMuc29ydCh0aGlzLnNvcnRGdW5jdGlvbnNbdGhpcy5wcm9wcy5zb3J0S2V5XSk7XHJcbiAgICAgICAgcmV0dXJuIGJhbGFuY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW5kZXJTZW5kTW9kYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPFNlbmRNb2RhbFxyXG4gICAgICAgICAgICAgICAgaWQ9XCJzZW5kX21vZGFsX3BvcnRmb2xpb1wiXHJcbiAgICAgICAgICAgICAgICByZWZDYWxsYmFjaz17ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHRoaXMuc2VuZF9tb2RhbCA9IGU7XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgZnJvbV9uYW1lPXt0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwibmFtZVwiKX1cclxuICAgICAgICAgICAgICAgIGFzc2V0X2lkPXt0aGlzLnN0YXRlLnNlbmRfYXNzZXQgfHwgXCIxLjMuMFwifVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgX3JlbmRlclNldHRsZU1vZGFsKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxTZXR0bGVNb2RhbFxyXG4gICAgICAgICAgICAgICAgcmVmPVwic2V0dGxlbWVudF9tb2RhbFwiXHJcbiAgICAgICAgICAgICAgICBtb2RhbElkPVwic2V0dGxlbWVudF9tb2RhbFwiXHJcbiAgICAgICAgICAgICAgICBhc3NldD17dGhpcy5zdGF0ZS5zZXR0bGVBc3NldH1cclxuICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRXaXRoZHJhd0Fzc2V0ID1cclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5iYWNrZWRDb2lucy5nZXQoXCJPUEVOXCIsIFtdKS5maW5kKGMgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGMuc3ltYm9sID09PSB0aGlzLnN0YXRlLndpdGhkcmF3QXNzZXQ7XHJcbiAgICAgICAgICAgIH0pIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRCcmlkZ2VzID1cclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5icmlkZ2VDb2lucy5nZXQodGhpcy5zdGF0ZS5icmlkZ2VBc3NldCkgfHwgbnVsbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxQYWdpbmF0ZWRMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nOiAwfX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZSBkYXNoYm9hcmQtdGFibGUgdGFibGUtaG92ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgIHJvd3M9e3RoaXMuX3JlbmRlckJhbGFuY2VzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJhbGFuY2VMaXN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9wdGlvbmFsQXNzZXRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnZpc2libGVcclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcj17dGhpcy5wcm9wcy5oZWFkZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU9ezIwfVxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwidXRpbGl0eS50b3RhbF94X2Fzc2V0c1wiXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFSb3c9e3RoaXMucHJvcHMuZXh0cmFSb3d9XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdFBhZGRpbmc9XCIxLjVyZW1cIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLl9yZW5kZXJTZW5kTW9kYWwoKX1cclxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5fcmVuZGVyU2V0dGxlTW9kYWwoKX1cclxuICAgICAgICAgICAgICAgICAgICB7LyogV2l0aGRyYXcgTW9kYWwqL31cclxuICAgICAgICAgICAgICAgICAgICA8U2ltcGxlRGVwb3NpdFdpdGhkcmF3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cIndpdGhkcmF3X21vZGFsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPVwid2l0aGRyYXdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWF0TW9kYWw9e3RoaXMuc3RhdGUuZmlhdE1vZGFsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwibmFtZVwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZGVyPXt0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXt0aGlzLnN0YXRlLndpdGhkcmF3QXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsSWQ9XCJzaW1wbGVfd2l0aGRyYXdfbW9kYWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlcz17dGhpcy5wcm9wcy5iYWxhbmNlc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgey4uLmN1cnJlbnRXaXRoZHJhd0Fzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0Rvd249e3RoaXMucHJvcHMuZ2F0ZXdheURvd24uZ2V0KFwiT1BFTlwiKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8V2l0aGRyYXdNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9XCJ3aXRoZHJhd19tb2RhbF9uZXdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbElkPVwid2l0aGRyYXdfbW9kYWxfbmV3XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VkQ29pbnM9e3RoaXMucHJvcHMuYmFja2VkQ29pbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxTeW1ib2w9e3RoaXMuc3RhdGUud2l0aGRyYXdBc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7LyogRGVwb3NpdCBNb2RhbCAqL31cclxuICAgICAgICAgICAgICAgICAgICA8RGVwb3NpdE1vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cImRlcG9zaXRfbW9kYWxfbmV3XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxJZD1cImRlcG9zaXRfbW9kYWxfbmV3XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUuZGVwb3NpdEFzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwibmFtZVwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VkQ29pbnM9e3RoaXMucHJvcHMuYmFja2VkQ29pbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgey8qIEJyaWRnZSBtb2RhbCAqL31cclxuICAgICAgICAgICAgICAgICAgICA8U2ltcGxlRGVwb3NpdEJsb2NrdHJhZGVzQnJpZGdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cImJyaWRnZV9tb2RhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbj1cImRlcG9zaXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwibmFtZVwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZGVyPXt0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXt0aGlzLnN0YXRlLmJyaWRnZUFzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbElkPVwic2ltcGxlX2JyaWRnZV9tb2RhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzPXt0aGlzLnByb3BzLmJhbGFuY2VzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmlkZ2VzPXtjdXJyZW50QnJpZGdlc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNEb3duPXt0aGlzLnByb3BzLmdhdGV3YXlEb3duLmdldChcIlRSQURFXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHsvKiBCdXJuIG1vZGFsICovfVxyXG4gICAgICAgICAgICAgICAgICAgIDxCYXNlTW9kYWwgaWQ9XCJyZXNlcnZlX2Fzc2V0XCIgb3ZlcmxheT17dHJ1ZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgdmVydGljYWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxSZXNlcnZlQXNzZXRNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXt0aGlzLnN0YXRlLnJlc2VydmV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5wcm9wcy5hY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWmZBcGkucHVibGlzaChcInJlc2VydmVfYXNzZXRcIiwgXCJjbG9zZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9CYXNlTW9kYWw+XHJcbiAgICAgICAgICAgICAgICA8L1BhZ2luYXRlZExpc3Q+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkFjY291bnRQb3J0Zm9saW9MaXN0ID0gY29ubmVjdChcclxuICAgIEFjY291bnRQb3J0Zm9saW9MaXN0LFxyXG4gICAge1xyXG4gICAgICAgIGxpc3RlblRvKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW1NldHRpbmdzU3RvcmUsIEdhdGV3YXlTdG9yZSwgTWFya2V0c1N0b3JlXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldFByb3BzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKS5zZXR0aW5ncyxcclxuICAgICAgICAgICAgICAgIHZpZXdTZXR0aW5nczogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnZpZXdTZXR0aW5ncyxcclxuICAgICAgICAgICAgICAgIGJhY2tlZENvaW5zOiBHYXRld2F5U3RvcmUuZ2V0U3RhdGUoKS5iYWNrZWRDb2lucyxcclxuICAgICAgICAgICAgICAgIGJyaWRnZUNvaW5zOiBHYXRld2F5U3RvcmUuZ2V0U3RhdGUoKS5icmlkZ2VDb2lucyxcclxuICAgICAgICAgICAgICAgIGdhdGV3YXlEb3duOiBHYXRld2F5U3RvcmUuZ2V0U3RhdGUoKS5kb3duLFxyXG4gICAgICAgICAgICAgICAgYWxsTWFya2V0U3RhdHM6IE1hcmtldHNTdG9yZS5nZXRTdGF0ZSgpLmFsbE1hcmtldFN0YXRzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4pO1xyXG5cclxuQWNjb3VudFBvcnRmb2xpb0xpc3QgPSBkZWJvdW5jZVJlbmRlcihBY2NvdW50UG9ydGZvbGlvTGlzdCwgNTAsIHtcclxuICAgIGxlYWRpbmc6IGZhbHNlXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWNjb3VudFBvcnRmb2xpb0xpc3Q7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHtGb3JtYXR0ZWROdW1iZXJ9IGZyb20gXCJyZWFjdC1pbnRsXCI7XHJcbmltcG9ydCBBc3NldFdyYXBwZXIgZnJvbSBcIi4vQXNzZXRXcmFwcGVyXCI7XHJcbmltcG9ydCB7Y29ubmVjdH0gZnJvbSBcImFsdC1yZWFjdFwiO1xyXG5pbXBvcnQgTWFya2V0c1N0b3JlIGZyb20gXCJzdG9yZXMvTWFya2V0c1N0b3JlXCI7XHJcbmltcG9ydCBSZWFjdFRvb2x0aXAgZnJvbSBcInJlYWN0LXRvb2x0aXBcIjtcclxuaW1wb3J0IHtNYXJrZXRTdGF0c30gZnJvbSBcIi4uL1V0aWxpdHkvTWFya2V0UHJpY2VcIjtcclxuXHJcbi8qKlxyXG4gKiAgRGlzcGxheXMgY2hhbmdlIGluIG1hcmtldCB2YWx1ZSBmb3IgYW4gYXNzZXRcclxuICpcclxuICogIEV4cGVjdHMgdGhyZWUgcHJvcGVydGllc1xyXG4gKiAgLSdxdW90ZScgd2hpY2ggc2hvdWxkIGJlIGEgYXNzZXQgaWRcclxuICogIC0nYmFzZScgd2hpY2ggaXMgdGhlIGFzc2V0IGlkIG9mIHRoZSBvcmlnaW5hbCBhc3NldCBhbW91bnRcclxuICovXHJcblxyXG5jbGFzcyBNYXJrZXRDaGFuZ2VDb21wb25lbnQgZXh0ZW5kcyBNYXJrZXRTdGF0cyB7XHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIGZ1bGxQcmVjaXNpb246IGZhbHNlLFxyXG4gICAgICAgIG5vRGVjaW1hbHM6IGZhbHNlLFxyXG4gICAgICAgIGhpZGVfYXNzZXQ6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIFJlYWN0VG9vbHRpcC5yZWJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5wKSB7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLnNob3VsZENvbXBvbmVudFVwZGF0ZShucCkgfHwgbnAuYmFzZSAhPT0gdGhpcy5wcm9wcy5iYXNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZhbHVlKCkge1xyXG4gICAgICAgIGxldCB7bWFya2V0U3RhdHN9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICByZXR1cm4gbWFya2V0U3RhdHMgJiYgbWFya2V0U3RhdHMuY2hhbmdlID8gbWFya2V0U3RhdHMuY2hhbmdlIDogMDtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IG1hcmtldENoYW5nZVZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpO1xyXG4gICAgICAgIGxldCBkYXlDaGFuZ2VDbGFzcyA9XHJcbiAgICAgICAgICAgIHBhcnNlRmxvYXQobWFya2V0Q2hhbmdlVmFsdWUpID09PSAwXHJcbiAgICAgICAgICAgICAgICA/IFwiXCJcclxuICAgICAgICAgICAgICAgIDogcGFyc2VGbG9hdChtYXJrZXRDaGFuZ2VWYWx1ZSkgPCAwXHJcbiAgICAgICAgICAgICAgICAgICAgPyBcImNoYW5nZS1kb3duXCJcclxuICAgICAgICAgICAgICAgICAgICA6IFwiY2hhbmdlLXVwXCI7XHJcbiAgICAgICAgbGV0IG1hcmtldENoYW5nZUZvcm1hdHRlZFZhbHVlID0gKFxyXG4gICAgICAgICAgICA8Rm9ybWF0dGVkTnVtYmVyXHJcbiAgICAgICAgICAgICAgICBzdHlsZT1cImRlY2ltYWxcIlxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e21hcmtldENoYW5nZVZhbHVlfVxyXG4gICAgICAgICAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzPXsyfVxyXG4gICAgICAgICAgICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzPXsyfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17XCJ2YWx1ZSBcIiArIGRheUNoYW5nZUNsYXNzfT5cclxuICAgICAgICAgICAgICAgIHttYXJrZXRDaGFuZ2VGb3JtYXR0ZWRWYWx1ZX0lXHJcbiAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbk1hcmtldENoYW5nZUNvbXBvbmVudCA9IEFzc2V0V3JhcHBlcihNYXJrZXRDaGFuZ2VDb21wb25lbnQsIHtcclxuICAgIHByb3BOYW1lczogW1wicXVvdGVcIiwgXCJiYXNlXCJdLFxyXG4gICAgZGVmYXVsdFByb3BzOiB7cXVvdGU6IFwiMS4zLjBcIn1cclxufSk7XHJcblxyXG5jbGFzcyBNYXJrZXQyNEhvdXJDaGFuZ2VDb21wb25lbnQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7cmVmQ2FsbGJhY2ssIC4uLm90aGVyc30gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICByZXR1cm4gPE1hcmtldENoYW5nZUNvbXBvbmVudCB7Li4ub3RoZXJzfSByZWY9e3JlZkNhbGxiYWNrfSAvPjtcclxuICAgIH1cclxufVxyXG5cclxuTWFya2V0MjRIb3VyQ2hhbmdlQ29tcG9uZW50ID0gY29ubmVjdChcclxuICAgIE1hcmtldDI0SG91ckNoYW5nZUNvbXBvbmVudCxcclxuICAgIHtcclxuICAgICAgICBsaXN0ZW5UbygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtNYXJrZXRzU3RvcmVdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0UHJvcHMocHJvcHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG1hcmtldFN0YXRzOiBNYXJrZXRzU3RvcmUuZ2V0U3RhdGUoKS5hbGxNYXJrZXRTdGF0cy5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMubWFya2V0SWRcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBhbGxNYXJrZXRTdGF0czogTWFya2V0c1N0b3JlLmdldFN0YXRlKCkuYWxsTWFya2V0U3RhdHNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbik7XHJcblxyXG5leHBvcnQge01hcmtldDI0SG91ckNoYW5nZUNvbXBvbmVudH07XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IEFsdENvbnRhaW5lciBmcm9tIFwiYWx0LWNvbnRhaW5lclwiO1xyXG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tIFwic3RvcmVzL1NldHRpbmdzU3RvcmVcIjtcclxuaW1wb3J0IEZvcm1hdHRlZFByaWNlIGZyb20gXCIuL0Zvcm1hdHRlZFByaWNlXCI7XHJcbmltcG9ydCBNYXJrZXRTdGF0c0NoZWNrIGZyb20gXCIuL01hcmtldFN0YXRzQ2hlY2tcIjtcclxuaW1wb3J0IE1hcmtldHNTdG9yZSBmcm9tIFwic3RvcmVzL01hcmtldHNTdG9yZVwiO1xyXG5pbXBvcnQgTWFya2V0VXRpbHMgZnJvbSBcImNvbW1vbi9tYXJrZXRfdXRpbHNcIjtcclxuaW1wb3J0IEFzc2V0V3JhcHBlciBmcm9tIFwiLi9Bc3NldFdyYXBwZXJcIjtcclxuXHJcbmNsYXNzIEVxdWl2YWxlbnRQcmljZSBleHRlbmRzIE1hcmtldFN0YXRzQ2hlY2sge1xyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBmb3JjZURpcmVjdGlvbjogdHJ1ZVxyXG4gICAgfTtcclxuXHJcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobnAsIG5leHRTdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHN1cGVyLnNob3VsZENvbXBvbmVudFVwZGF0ZShucCkgfHxcclxuICAgICAgICAgICAgbnAuYmFzZV9hbW91bnQgIT09IHRoaXMucHJvcHMuYmFzZV9hbW91bnQgfHxcclxuICAgICAgICAgICAgbnAucXVvdGVfYW1vdW50ICE9PSB0aGlzLnByb3BzLnF1b3RlX2Ftb3VudCB8fFxyXG4gICAgICAgICAgICBucC5kZWNpbWFscyAhPT0gdGhpcy5wcm9wcy5kZWNpbWFscyB8fFxyXG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobnAucHVsc2F0ZSwgdGhpcy5wcm9wcy5wdWxzYXRlKSB8fFxyXG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobmV4dFN0YXRlLCB0aGlzLnN0YXRlKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RmluYWxQcmljZShyZWFsID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCB7Y29yZUFzc2V0LCBmcm9tQXNzZXQsIHRvQXNzZXQsIGFsbE1hcmtldFN0YXRzfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgcmV0dXJuIE1hcmtldFV0aWxzLmdldEZpbmFsUHJpY2UoXHJcbiAgICAgICAgICAgIGNvcmVBc3NldCxcclxuICAgICAgICAgICAgZnJvbUFzc2V0LFxyXG4gICAgICAgICAgICB0b0Fzc2V0LFxyXG4gICAgICAgICAgICBhbGxNYXJrZXRTdGF0cyxcclxuICAgICAgICAgICAgcmVhbFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHt0b0Fzc2V0LCBmb3JjZURpcmVjdGlvbiwgLi4ub3RoZXJzfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpbmFsUHJpY2UgPSB0aGlzLmdldEZpbmFsUHJpY2UoKTtcclxuXHJcbiAgICAgICAgaWYgKGZpbmFsUHJpY2UgPT09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDxzcGFuPjEuMDA8L3NwYW4+O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFmaW5hbFByaWNlKSByZXR1cm4gPHNwYW4+LS08L3NwYW4+O1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8Rm9ybWF0dGVkUHJpY2VcclxuICAgICAgICAgICAgICAgIGZvcmNlX2RpcmVjdGlvbj17Zm9yY2VEaXJlY3Rpb24gPyB0b0Fzc2V0LmdldChcInN5bWJvbFwiKSA6IGZhbHNlfVxyXG4gICAgICAgICAgICAgICAgYmFzZV9hbW91bnQ9e2ZpbmFsUHJpY2UuYmFzZS5hbW91bnR9XHJcbiAgICAgICAgICAgICAgICBiYXNlX2Fzc2V0PXtmaW5hbFByaWNlLmJhc2UuYXNzZXRfaWR9XHJcbiAgICAgICAgICAgICAgICBxdW90ZV9hbW91bnQ9e2ZpbmFsUHJpY2UucXVvdGUuYW1vdW50fVxyXG4gICAgICAgICAgICAgICAgcXVvdGVfYXNzZXQ9e2ZpbmFsUHJpY2UucXVvdGUuYXNzZXRfaWR9XHJcbiAgICAgICAgICAgICAgICB7Li4ub3RoZXJzfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkVxdWl2YWxlbnRQcmljZSA9IEFzc2V0V3JhcHBlcihFcXVpdmFsZW50UHJpY2UsIHtcclxuICAgIHByb3BOYW1lczogW1widG9Bc3NldFwiLCBcImZyb21Bc3NldFwiLCBcImNvcmVBc3NldFwiXSxcclxuICAgIGRlZmF1bHRQcm9wczoge1xyXG4gICAgICAgIHRvQXNzZXQ6IFwiMS4zLjBcIixcclxuICAgICAgICBjb3JlQXNzZXQ6IFwiMS4zLjBcIlxyXG4gICAgfVxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVxdWl2YWxlbnRQcmljZVdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxBbHRDb250YWluZXJcclxuICAgICAgICAgICAgICAgIHN0b3Jlcz17W1NldHRpbmdzU3RvcmUsIE1hcmtldHNTdG9yZV19XHJcbiAgICAgICAgICAgICAgICBpbmplY3Q9e3tcclxuICAgICAgICAgICAgICAgICAgICB0b0Fzc2V0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnRvQXNzZXQgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKS5zZXR0aW5ncy5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1bml0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIxLjMuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhbGxNYXJrZXRTdGF0czogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFya2V0c1N0b3JlLmdldFN0YXRlKCkuYWxsTWFya2V0U3RhdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPEVxdWl2YWxlbnRQcmljZSB7Li4udGhpcy5wcm9wc30gcmVmPXt0aGlzLnByb3BzLnJlZkNhbGxiYWNrfSAvPlxyXG4gICAgICAgICAgICA8L0FsdENvbnRhaW5lcj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCwge0NvbXBvbmVudH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuXHJcbmltcG9ydCBJY29uIGZyb20gXCIuL0ljb25cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFB1bHNlSWNvbiBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGR1cmF0aW9uOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXHJcbiAgICAgICAgb2ZmSWNvbjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAgICAgIG9uSWNvbjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAgICAgIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgY29uc3Qge2R1cmF0aW9ufSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMudGljaywgZHVyYXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgICAgIHRoaXMuaW50ZXJ2YWwgJiYgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcclxuICAgIH1cclxuXHJcbiAgICB0aWNrID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHtvbkljb24sIG9mZkljb259ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCB7bmFtZSA9IG9uSWNvbn0gPSB0aGlzLnN0YXRlIHx8IHt9O1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBuYW1lOiBuYW1lID09PSBvbkljb24gPyBvZmZJY29uIDogb25JY29uXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB7b25JY29uLCByZXN0fSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgY29uc3Qge25hbWUgPSBvbkljb259ID0gdGhpcy5zdGF0ZSB8fCB7fTtcclxuICAgICAgICBjb25zdCB7dGl0bGV9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICByZXR1cm4gPEljb24gbmFtZT17bmFtZX0gdGl0bGU9e3RpdGxlfSB7Li4ucmVzdH0gLz47XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgWmZBcGkgZnJvbSBcInJlYWN0LWZvdW5kYXRpb24tYXBwcy9zcmMvdXRpbHMvZm91bmRhdGlvbi1hcGlcIjtcclxuaW1wb3J0IEJhc2VNb2RhbCBmcm9tIFwiLi9CYXNlTW9kYWxcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IEJhbGFuY2VDb21wb25lbnQgZnJvbSBcIi4uL1V0aWxpdHkvQmFsYW5jZUNvbXBvbmVudFwiO1xyXG5pbXBvcnQgV2FsbGV0QXBpIGZyb20gXCJhcGkvV2FsbGV0QXBpXCI7XHJcbmltcG9ydCBXYWxsZXREYiBmcm9tIFwic3RvcmVzL1dhbGxldERiXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IEFtb3VudFNlbGVjdG9yIGZyb20gXCIuLi9VdGlsaXR5L0Ftb3VudFNlbGVjdG9yXCI7XHJcblxyXG5jbGFzcyBNb2RhbENvbnRlbnQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBhc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgYWNjb3VudDogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnQuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGFtb3VudDogMFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgb25BbW91bnRDaGFuZ2VkKHthbW91bnQsIGFzc2V0fSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2Ftb3VudDogYW1vdW50fSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25TdWJtaXQoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBaZkFwaS5wdWJsaXNoKFwic2V0dGxlbWVudF9tb2RhbFwiLCBcImNsb3NlXCIpO1xyXG5cclxuICAgICAgICBsZXQgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBhbW91bnQgPSB0aGlzLnN0YXRlLmFtb3VudC5yZXBsYWNlKC8sL2csIFwiXCIpO1xyXG4gICAgICAgIGFtb3VudCAqPSBwcmVjaXNpb247XHJcblxyXG4gICAgICAgIHZhciB0ciA9IFdhbGxldEFwaS5uZXdfdHJhbnNhY3Rpb24oKTtcclxuICAgICAgICB0ci5hZGRfdHlwZV9vcGVyYXRpb24oXCJhc3NldF9zZXR0bGVcIiwge1xyXG4gICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgIGFtb3VudDogMCxcclxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFjY291bnQ6IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgYW1vdW50OiB7XHJcbiAgICAgICAgICAgICAgICBhbW91bnQ6IGFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiB0aGlzLnByb3BzLmFzc2V0LmdldChcImlkXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gV2FsbGV0RGIucHJvY2Vzc190cmFuc2FjdGlvbih0ciwgbnVsbCwgdHJ1ZSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiYXNzZXQgc2V0dGxlIHJlc3VsdDpcIiwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuZGlzcGF0Y2goYWNjb3VudF9pZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJhc3NldCBzZXR0bGUgZXJyb3I6IFwiLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2Fzc2V0LCBhY2NvdW50fSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IHthbW91bnR9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgaWYgKCFhc3NldCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBhc3NldElEID0gYXNzZXQuZ2V0KFwiaWRcIik7XHJcblxyXG4gICAgICAgIGxldCBhY2NvdW50X2JhbGFuY2VzID0gYWNjb3VudC5nZXQoXCJiYWxhbmNlc1wiKTtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRCYWxhbmNlID0gbnVsbCxcclxuICAgICAgICAgICAgYmFsYW5jZUFtb3VudCA9IDA7XHJcblxyXG4gICAgICAgIGFjY291bnRfYmFsYW5jZXMgJiZcclxuICAgICAgICAgICAgYWNjb3VudF9iYWxhbmNlcy5mb3JFYWNoKGJhbGFuY2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGJhbGFuY2VPYmplY3QgPSBDaGFpblN0b3JlLmdldE9iamVjdChiYWxhbmNlKTtcclxuICAgICAgICAgICAgICAgIGlmICghYmFsYW5jZU9iamVjdC5nZXQoXCJiYWxhbmNlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYmFsYW5jZU9iamVjdC5nZXQoXCJhc3NldF90eXBlXCIpID09PSBhc3NldElEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEJhbGFuY2UgPSBiYWxhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhbGFuY2VBbW91bnQgPSBiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihhc3NldC5nZXQoXCJwcmVjaXNpb25cIikpO1xyXG4gICAgICAgIGxldCBwYXJzZWRBbW91bnQgPSBhbW91bnQgPyBhbW91bnQucmVwbGFjZSgvLC9nLCBcIlwiKSA6IDA7XHJcbiAgICAgICAgbGV0IHN1Ym1pdF9idG5fY2xhc3MgPVxyXG4gICAgICAgICAgICBwYXJzZUZsb2F0KHBhcnNlZEFtb3VudCkgPiAwICYmXHJcbiAgICAgICAgICAgIHBhcnNlRmxvYXQocGFyc2VkQW1vdW50KSAqIHByZWNpc2lvbiA8PSBwYXJzZUZsb2F0KGJhbGFuY2VBbW91bnQpXHJcbiAgICAgICAgICAgICAgICA/IFwiYnV0dG9uIHN1Y2Nlc3NcIlxyXG4gICAgICAgICAgICAgICAgOiBcImJ1dHRvbiBkaXNhYmxlZFwiO1xyXG5cclxuICAgICAgICBsZXQgYmFsYW5jZVRleHQgPSAoXHJcbiAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UuYmFsYW5jZVwiIC8+OiZuYnNwO1xyXG4gICAgICAgICAgICAgICAge2N1cnJlbnRCYWxhbmNlID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxCYWxhbmNlQ29tcG9uZW50IGJhbGFuY2U9e2N1cnJlbnRCYWxhbmNlfSAvPlxyXG4gICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICBcIjAgXCIgKyBhc3NldC5nZXQoXCJzeW1ib2xcIilcclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8Zm9ybSBjbGFzc05hbWU9XCJncmlkLWJsb2NrIHZlcnRpY2FsIGZ1bGwtd2lkdGgtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImgzXCJcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudD1cIm1vZGFsLnNldHRsZS50aXRsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2Fzc2V0LmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGFpbmVyIFwiIHN0eWxlPXt7cGFkZGluZ1RvcDogXCIycmVtXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEFtb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIm1vZGFsLnNldHRsZS5hbW91bnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXthbW91bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkFtb3VudENoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlfYmFsYW5jZT17YmFsYW5jZVRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17YXNzZXRJRH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W2Fzc2V0SURdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3N1Ym1pdF9idG5fY2xhc3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uU3VibWl0LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFwibW9kYWwuc2V0dGxlLnN1Ym1pdFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5Nb2RhbENvbnRlbnQgPSBCaW5kVG9DaGFpblN0YXRlKE1vZGFsQ29udGVudCk7XHJcblxyXG5jbGFzcyBTZXR0bGVNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlID0ge29wZW46IGZhbHNlfTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe29wZW46IHRydWV9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIFpmQXBpLnB1Ymxpc2godGhpcy5wcm9wcy5tb2RhbElkLCBcIm9wZW5cIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtvcGVuOiBmYWxzZX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuc3RhdGUub3BlbiA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgIDxCYXNlTW9kYWxcclxuICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLm1vZGFsSWR9XHJcbiAgICAgICAgICAgICAgICBvbkNsb3NlPXt0aGlzLm9uQ2xvc2UuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgIG92ZXJsYXk9e3RydWV9XHJcbiAgICAgICAgICAgICAgICByZWY9XCJzZXR0bGVtZW50X21vZGFsXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIHZlcnRpY2FsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPE1vZGFsQ29udGVudCB7Li4udGhpcy5wcm9wc30gLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L0Jhc2VNb2RhbD5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZXR0bGVNb2RhbDtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBCYWxhbmNlQ29tcG9uZW50IGZyb20gXCIuLi9VdGlsaXR5L0JhbGFuY2VDb21wb25lbnRcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgQW1vdW50U2VsZWN0b3IgZnJvbSBcIi4uL1V0aWxpdHkvQW1vdW50U2VsZWN0b3JcIjtcclxuaW1wb3J0IEFzc2V0QWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9Bc3NldEFjdGlvbnNcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IHtBc3NldH0gZnJvbSBcImNvbW1vbi9NYXJrZXRDbGFzc2VzXCI7XHJcbmltcG9ydCBBc3NldFdyYXBwZXIgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXRXcmFwcGVyXCI7XHJcblxyXG5jbGFzcyBSZXNlcnZlQXNzZXRNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5nZXRJbml0aWFsU3RhdGUocHJvcHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobnApIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG5wLmFzc2V0ICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXQgJiZcclxuICAgICAgICAgICAgbnAuYXNzZXQuZ2V0KFwiaWRcIikgIT09IHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwiaWRcIilcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLmdldEluaXRpYWxTdGF0ZShucCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRJbml0aWFsU3RhdGUocHJvcHMpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhbW91bnQ6IDAsXHJcbiAgICAgICAgICAgIGFtb3VudEFzc2V0OiBuZXcgQXNzZXQoe1xyXG4gICAgICAgICAgICAgICAgYW1vdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ6IHByb3BzLmFzc2V0LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBwcm9wcy5hc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIG9uQW1vdW50Q2hhbmdlZCh7YW1vdW50LCBhc3NldH0pIHtcclxuICAgICAgICB0aGlzLnN0YXRlLmFtb3VudEFzc2V0LnNldEFtb3VudCh7cmVhbDogYW1vdW50fSk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YW1vdW50LCBhc3NldH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU3VibWl0KCkge1xyXG4gICAgICAgIEFzc2V0QWN0aW9ucy5yZXNlcnZlQXNzZXQoXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYW1vdW50QXNzZXQuZ2V0QW1vdW50KCksXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKVxyXG4gICAgICAgICkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYW1vdW50QXNzZXQuc2V0QW1vdW50KHtzYXRzOiAwfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2Ftb3VudDogMH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucHJvcHMub25DbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgYXNzZXRJZCA9IHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwiaWRcIik7XHJcblxyXG4gICAgICAgIGxldCBjdXJyZW50QmFsYW5jZSA9XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudCAmJlxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiYmFsYW5jZXNcIiwgW10pLnNpemUgJiZcclxuICAgICAgICAgICAgISF0aGlzLnByb3BzLmFjY291bnQuZ2V0SW4oW1wiYmFsYW5jZXNcIiwgYXNzZXRJZF0pXHJcbiAgICAgICAgICAgICAgICA/IENoYWluU3RvcmUuZ2V0T2JqZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmdldEluKFtcImJhbGFuY2VzXCIsIGFzc2V0SWRdKVxyXG4gICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgaWYgKCFjdXJyZW50QmFsYW5jZSkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxmb3JtIGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgdmVydGljYWwgZnVsbC13aWR0aC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbXBvbmVudD1cImgzXCIgY29udGVudD1cIm1vZGFsLnJlc2VydmUudGl0bGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRhaW5lciBcIiBzdHlsZT17e3BhZGRpbmdUb3A6IFwiMnJlbVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxBbW91bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJtb2RhbC5yZXNlcnZlLmFtb3VudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3RoaXMuc3RhdGUuYW1vdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25BbW91bnRDaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17YXNzZXRJZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W2Fzc2V0SWRdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9iYWxhbmNlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYW1vdW50QXNzZXQuc2V0QW1vdW50KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXRzOiBjdXJyZW50QmFsYW5jZS5nZXQoXCJiYWxhbmNlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogdGhpcy5zdGF0ZS5hbW91bnRBc3NldC5nZXRBbW91bnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZWFsOiB0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhbGFuY2VDb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2U9e3RoaXMucHJvcHMuYWNjb3VudC5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYWxhbmNlc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0SWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBidXR0b24tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvbiBzdWNjZXNzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25TdWJtaXQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtb2RhbC5yZXNlcnZlLnN1Ym1pdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNsb3NlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJjYW5jZWxcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5SZXNlcnZlQXNzZXRNb2RhbCA9IEFzc2V0V3JhcHBlcihSZXNlcnZlQXNzZXRNb2RhbCwge1xyXG4gICAgcHJvcE5hbWVzOiBbXCJhc3NldFwiXVxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJlc2VydmVBc3NldE1vZGFsO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBQ0E7QUFnQkE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQTFEQTtBQURBO0FBREE7QUE0RkE7Ozs7QUE3SkE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBNkpBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFKQTtBQUNBO0FBTUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQWJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdE1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBYUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFuQkE7QUFDQTtBQXFCQTtBQXpCQTtBQTBCQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFHQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBREE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFJQTtBQUVBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQU5BO0FBRkE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFQQTtBQUZBO0FBaUJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFPQTtBQVBBO0FBREE7QUFyREE7QUFrRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUxBO0FBeEJBO0FBREE7QUFrQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQW5DQTtBQURBO0FBd0NBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQU9BO0FBUEE7QUFEQTtBQXpDQTtBQVBBO0FBREE7QUFnRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTtBQUZBO0FBakVBO0FBREE7QUFnRkE7Ozs7QUFqVUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBREE7QUFVQTtBQURBO0FBQ0E7QUFDQTtBQXlUQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWZBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFLQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBRkE7QUFRQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFSQTtBQURBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQURBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUpBO0FBS0E7QUFMQTtBQUFBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBUkE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQVRBO0FBV0E7QUFYQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQWZBO0FBNUNBO0FBREE7QUF1RUE7Ozs7QUEvSUE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBQ0E7QUErSUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzdKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7OztBQVVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBTUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQVVBO0FBQ0E7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBRkE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUZBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQU5BO0FBRkE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBTkE7QUFGQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFYQTtBQW5FQTtBQW1GQTs7OztBQXZLQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBREE7QUFDQTtBQWtLQTtBQUNBO0FBQ0E7OztBQVdBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUhBO0FBSUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFTQTtBQURBO0FBUkE7QUFBQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFSQTtBQVVBO0FBckNBO0FBdUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFPQTtBQUNBOzs7QUFFQTtBQUNBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBM0JBO0FBQ0E7QUE2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoQ0E7QUFDQTtBQWtDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBL0VBO0FBQ0E7QUFpRkE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQXJCQTtBQUNBO0FBc0JBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFBQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFhQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBS0E7QUFOQTtBQVNBO0FBQ0E7QUFFQTtBQUtBO0FBTkE7QUFTQTtBQUNBO0FBRUE7QUFLQTtBQU5BO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBQUE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFUQTtBQURBO0FBUEE7QUFEQTtBQURBO0FBMEJBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBQUE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQWJBO0FBREE7QUFQQTtBQURBO0FBREE7QUE4QkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFSQTtBQUNBO0FBZ0JBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBRkE7QUFXQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUxBO0FBY0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUZBO0FBY0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUFBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBU0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQWJBO0FBREE7QUFUQTtBQURBO0FBSkE7QUFtQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUhBO0FBQUE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFJQTtBQU5BO0FBVUE7QUFDQTtBQUNBO0FBRkE7QUFNQTtBQWhCQTtBQUhBO0FBWEE7QUFEQTtBQUpBO0FBNENBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFQQTtBQURBO0FBWEE7QUFEQTtBQTZCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFwQkE7QUFEQTtBQXhDQTtBQW9FQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVFBO0FBREE7QUFUQTtBQTJCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUhBO0FBN0JBO0FBREE7QUFyRUE7QUEyR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTkE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFGQTtBQXpRQTtBQURBO0FBa1JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFZQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFOQTtBQURBO0FBY0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQVhBO0FBZ0JBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQVBBO0FBREE7QUFlQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBTkE7QUFEQTtBQXhCQTtBQXhEQTtBQURBO0FBbUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBVkE7QUFEQTtBQWtCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFKQTtBQURBO0FBUUE7QUFUQTtBQURBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBSkE7QUFEQTtBQVFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBTkE7QUFBQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFJQTtBQU5BO0FBV0E7QUFDQTtBQUNBO0FBRkE7QUFNQTtBQWpCQTtBQUxBO0FBVkE7QUFEQTtBQURBO0FBd0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFMQTtBQUhBO0FBZUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBRUE7QUFGQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBTEE7QUFIQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFuQ0E7QUE3Q0E7QUF3RkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBckdBO0FBREE7QUE5WkE7QUFQQTtBQURBO0FBREE7QUFxaEJBOzs7O0FBOXBDQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFGQTtBQUNBO0FBQ0E7QUF5cENBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdDJDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7OztBQVNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUhBO0FBSUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBUUE7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFJQTtBQUlBO0FBSUE7QUFJQTtBQUlBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQTdEQTtBQWdFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBS0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU9BO0FBVUE7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBa0JBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFHQTtBQWlCQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzQkE7QUFDQTtBQTZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpCQTtBQUNBO0FBMkJBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFNQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExQ0E7QUFDQTtBQTRDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUxBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBSUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUxBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7OztBQUVBO0FBQ0E7QUFHQTs7O0FBRUE7QUFDQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFhQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUFBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBVEE7QUFEQTtBQVBBO0FBREE7QUFEQTtBQTBCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFBQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBYkE7QUFEQTtBQVBBO0FBREE7QUFEQTtBQThCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUxBO0FBV0E7QUFYQTtBQWlCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUpBO0FBTUE7QUFOQTtBQWxCQTtBQUNBO0FBNEJBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFEQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFuQkE7QUFEQTtBQTJCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBbkJBO0FBREE7QUEyQkE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFwQkE7QUFEQTtBQTJCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFwQkE7QUFEQTtBQTlGQTtBQTBIQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUlBO0FBSUE7QUFiQTtBQUhBO0FBREE7QUEzSEE7QUFpSkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTkE7QUFhQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFGQTtBQTdMQTtBQUpBO0FBeU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBMUJBO0FBNkJBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBN0JBO0FBSkE7QUF5Q0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQU5BO0FBREE7QUFjQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFQQTtBQURBO0FBZUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFiQTtBQWlCQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBUEE7QUFEQTtBQWVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFOQTtBQURBO0FBeEJBO0FBeUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBdkdBO0FBSkE7QUFtSEE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBWEE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFGQTtBQWZBO0FBSkE7QUE0QkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFGQTtBQVZBO0FBSkE7QUFzQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQU5BO0FBQUE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFOQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFPQTtBQWxCQTtBQUxBO0FBVkE7QUFEQTtBQURBO0FBeUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFMQTtBQUhBO0FBZUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQWRBO0FBREE7QUFrQkE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQXZDQTtBQTlDQTtBQTZGQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFGQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFoSEE7QUFKQTtBQTJIQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQVZBO0FBY0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQW5CQTtBQS9oQkE7QUFQQTtBQURBO0FBdWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQXhrQkE7QUFrbEJBOzs7O0FBajhDQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBREE7QUFNQTtBQURBO0FBQ0E7QUE2N0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFDQTtBQU9BOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFGQTtBQUdBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFNQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBbkNBO0FBREE7QUEwQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFQQTtBQXJEQTtBQXFFQTs7OztBQXpGQTtBQUNBO0FBMkZBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSkE7QUFDQTtBQU1BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDOWtEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTs7Ozs7Ozs7Ozs7QUFZQTtBQUNBO0FBQ0E7QUFLQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBL0JBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFRQTtBQUNBO0FBRkE7QUFDQTtBQUNBO0FBeUJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBVkE7QUFIQTtBQWVBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQUNBO0FBUUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFKQTtBQURBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVRBO0FBSkE7QUFxQkE7QUF4QkE7QUFYQTtBQXNDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQWZBO0FBREE7QUF2Q0E7QUFpRUE7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSkE7QUFEQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFUQTtBQUpBO0FBcUJBO0FBeEJBO0FBWEE7QUFzQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQURBO0FBdkNBO0FBMkRBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFVQTtBQUNBO0FBREE7QUFWQTtBQWVBO0FBbEJBO0FBSkE7QUF5QkE7QUFHQTtBQTdCQTtBQURBO0FBa0NBOzs7O0FBbE9BO0FBQ0E7QUFvT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQU1BO0FBWEE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFEQTtBQUhBO0FBTUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTkE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUxBO0FBREE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBUkE7QUFQQTtBQXVCQTtBQTFCQTtBQVpBO0FBeUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFEQTtBQTFDQTtBQTZEQTs7OztBQXRHQTtBQUNBO0FBREE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFRQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUpBO0FBU0E7Ozs7QUFyQkE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQURBO0FBS0E7QUFEQTtBQUNBO0FBa0JBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFXQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQVdBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRkE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBUUE7QUFSQTtBQVNBO0FBbkJBO0FBcUJBLGdFQUdBO0FBeEJBO0FBb0NBO0FBQ0E7QUF0Q0E7QUEwQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBUkE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFKQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFNQTtBQU5BO0FBRkE7QUFBQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQWJBO0FBaUJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFNQTtBQU5BO0FBRkE7QUFBQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQWJBO0FBaUJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFNQTtBQU5BO0FBRkE7QUFBQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQWJBO0FBaUJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUVBO0FBRkE7QUFKQTtBQTVEQTtBQURBO0FBMEVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFyR0E7QUFEQTtBQStHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBTUE7QUFDQTtBQUlBO0FBTEE7QUFPQTtBQXRCQTtBQURBO0FBREE7QUFoSEE7QUFEQTtBQWhEQTtBQVBBO0FBREE7QUFEQTtBQURBO0FBdU5BOzs7O0FBL1JBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUNBO0FBRkE7QUFDQTtBQTBSQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzNVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUpBO0FBREE7QUFjQTs7OztBQXRCQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBQ0E7QUFDQTtBQXNCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFKQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBU0E7QUFUQTtBQUpBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBVUE7QUFWQTtBQUpBO0FBaUJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFKQTtBQWFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFKQTtBQUhBO0FBSkE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBREE7QUFEQTtBQXpFQTtBQURBO0FBUEE7QUErRkE7Ozs7QUE1SUE7QUFDQTtBQThJQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFEQTtBQUhBO0FBTUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFTQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQVBBO0FBUEE7QUFEQTtBQURBO0FBREE7QUFpQ0E7Ozs7QUFwR0E7QUFDQTtBQXNHQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBS0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUVBO0FBQUE7QUFFQTtBQUVBO0FBQUE7QUFFQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0QkE7QUF3QkE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBV0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFPQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFhQTs7O0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQWNBO0FBRUE7QUFNQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFFQTtBQU1BO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFUQTtBQVJBO0FBMkJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQVZBO0FBSEE7QUFEQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUdBO0FBckJBO0FBdUJBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQTdDQTtBQW1EQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFWQTtBQUhBO0FBREE7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBSUE7QUFHQTtBQXJCQTtBQXVCQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUE3Q0E7QUFtREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBTEE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUlBO0FBM0JBO0FBREE7QUFoSkE7QUFpTEE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUhBO0FBbExBO0FBREE7QUFEQTtBQW1NQTs7OztBQTdmQTtBQUNBO0FBK2ZBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBU0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQVBBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFRQTtBQVJBO0FBREE7QUFuQkE7QUFpQ0E7Ozs7QUF2RkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUF3RkE7OztBQVlBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFWQTtBQVdBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBTUE7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWJBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBVkE7QUFmQTtBQTZCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVJBO0FBREE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQWZBO0FBREE7QUE5QkE7QUF1REE7Ozs7QUF4TEE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUFDQTtBQXdMQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcFNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUtBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUZBO0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUpBO0FBTUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFNQTtBQUNBO0FBQ0E7QUFGQTtBQU5BO0FBVEE7QUFKQTtBQTJCQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQURBO0FBN0JBO0FBSkE7QUE0Q0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFKQTtBQVFBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFMQTtBQW5FQTtBQURBO0FBOEVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFEQTtBQXZGQTtBQWdHQTtBQWxHQTtBQXFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7O0FBbktBO0FBQ0E7QUFEQTtBQUVBO0FBREE7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFPQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFQQTtBQURBO0FBZUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQVBBO0FBakJBO0FBd0NBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBVEE7QUFEQTtBQTlDQTtBQVBBO0FBUEE7QUFrRkE7Ozs7QUF6SUE7QUFDQTtBQTJJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFEQTtBQUdBOzs7Ozs7O0FDM0pBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBRkE7QUFZQTtBQUNBOzs7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFJQTtBQUxBO0FBT0E7QUFRQTtBQU9BO0FBQ0E7OztBQUVBO0FBQ0E7QUFJQTtBQUlBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQWRBO0FBd0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFRQTtBQVJBO0FBREE7QUFMQTtBQWtCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBUUE7QUFSQTtBQURBO0FBTEE7QUFrQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQVdBO0FBWEE7QUFEQTtBQUxBO0FBckNBO0FBREE7QUE4REE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQXJHQTtBQThHQTs7OztBQTdNQTtBQUNBO0FBREE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTs7O0FBWUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFSQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQURBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFhQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBREE7QUFKQTtBQXhCQTtBQURBO0FBb0NBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQW5EQTtBQURBO0FBMERBOzs7O0FBOUdBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBOEdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzdIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBU0E7OztBQUtBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFIQTtBQWNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQU1BO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQVRBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBTkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFNQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVRBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQVBBO0FBOUNBO0FBREE7QUE2REE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUlBO0FBTkE7QUFVQTtBQWhCQTtBQURBO0FBTkE7QUFEQTtBQVBBO0FBSkE7QUEwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQU5BO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBTUE7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVRBO0FBRkE7QUFvQkE7QUFNQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQXZDQTtBQXhEQTtBQURBO0FBcEVBO0FBREE7QUFEQTtBQURBO0FBeUxBOzs7O0FBN1lBO0FBQ0E7QUFEQTtBQUVBO0FBREE7QUFDQTtBQTZZQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7Ozs7Ozs7O0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztBQWVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQVRBO0FBV0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBZ0JBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25RQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQU1BOzs7QUFVQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQUZBO0FBYUE7QUF0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBb0JBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFXQTtBQVpBO0FBY0E7QUFkQTtBQVRBO0FBMkJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFBQTtBQU1BO0FBQUE7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQVRBO0FBQUE7QUFBQTtBQVJBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUEE7QUF4REE7QUFvRUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFSQTtBQXhFQTtBQXFGQTs7OztBQS9NQTtBQUNBO0FBREE7QUFPQTtBQURBO0FBQ0E7QUFDQTtBQTBNQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBU0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQURBO0FBUEE7QUFrQkE7Ozs7QUEvQkE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQURBO0FBTUE7QUFEQTtBQUNBO0FBMkJBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFRQTtBQUNBO0FBWEE7QUFjQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQURBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBUkE7QUFEQTtBQWFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFmQTtBQWtCQTs7OztBQTlFQTtBQUNBO0FBZ0ZBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFIQTtBQU9BO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUtBO0FBQ0E7QUFaQTtBQURBO0FBZ0JBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBakJBO0FBREE7QUEzQkE7QUFEQTtBQW9EQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFUQTtBQURBO0FBYUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFsQkE7QUFEQTtBQWpCQTtBQURBO0FBMkNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQUpBO0FBREE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBSkE7QUFEQTtBQXZIQTtBQURBO0FBREE7QUFEQTtBQStJQTs7OztBQXBOQTtBQUNBO0FBc05BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdlZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFXQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFnTUE7QUFDQTtBQUNBO0FBaE1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBcEJBO0FBcUJBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcEJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBMEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBZ0JBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFNQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFNQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQU9BO0FBbkJBO0FBQ0E7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBUUE7QUFFQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFTQTtBQUNBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFEQTtBQUlBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUlBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUxBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQVhBO0FBY0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQVhBO0FBY0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBWEE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUxBO0FBT0E7QUFQQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQU9BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQWxCQTtBQUNBO0FBNEJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQWJBO0FBZUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFRQTtBQVJBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFSQTtBQXpCQTtBQUNBO0FBMkNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBRkE7QUFVQTtBQVZBO0FBQ0E7QUFhQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBTkE7QUFIQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBSUE7QUFDQTtBQU9BO0FBQ0E7QUFHQTtBQTVCQTtBQWRBO0FBREE7QUFnREE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFOQTtBQUhBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUNBO0FBT0E7QUFDQTtBQUdBO0FBNUJBO0FBYkE7QUFEQTtBQStDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQVVBO0FBVkE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUpBO0FBU0E7QUFUQTtBQWVBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFMQTtBQWNBO0FBZEE7QUFqQ0E7QUFtREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFOQTtBQUZBO0FBM0RBO0FBMEZBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFIQTtBQVVBO0FBbEJBO0FBb0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQURBO0FBckJBO0FBZ0NBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFKQTtBQU1BO0FBQ0E7QUFEQTtBQU5BO0FBQUE7QUFXQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBTkE7QUFKQTtBQWNBO0FBL0JBO0FBaUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQURBO0FBbENBO0FBNkNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUFBO0FBT0E7QUFDQTtBQURBO0FBUEE7QUFBQTtBQUxBO0FBa0JBO0FBRUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFBQTtBQU9BO0FBQ0E7QUFEQTtBQVBBO0FBQUE7QUFKQTtBQW1CQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBOUVBO0FBREE7QUFxRkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQXJLQTtBQTNGQTtBQXZHQTtBQURBO0FBREE7QUFEQTtBQXdYQTs7OztBQTNsQ0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVFBO0FBREE7QUFDQTtBQXFsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUZBO0FBS0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM3bkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBWUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBOzs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBUEE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBVEE7QUFXQTtBQVhBO0FBSkE7QUFrQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFuQkE7QUEwQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFTQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBUEE7QUFEQTtBQWFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQUFBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFTQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFKQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVVBO0FBRUE7QUFLQTtBQU5BO0FBWEE7QUF2R0E7QUFvSUE7Ozs7QUFwTkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQURBO0FBU0E7QUFEQTtBQUNBO0FBQ0E7QUE2TUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNsT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBTUE7QUFDQTtBQU9BOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFGQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQURBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBRUE7QUFLQTtBQU5BO0FBVEE7QUFwQ0E7QUErREE7Ozs7QUFoR0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFpR0E7OztBQW1CQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQVRBO0FBVUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFjQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFuQkE7QUFEQTtBQXlCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBMUJBO0FBcEJBO0FBbURBOzs7O0FBL0tBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBREE7QUFjQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBQ0E7QUFtS0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6VEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFXQTtBQWxCQTtBQUNBO0FBb0JBO0FBdkJBO0FBd0JBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQVFBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBT0E7QUFQQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQU9BO0FBUEE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFOQTtBQVFBO0FBUkE7QUFTQTtBQVRBO0FBQUE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFOQTtBQVFBO0FBUkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQVZBO0FBUkE7QUFxQkE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUxBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQTlGQTtBQXlHQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFMQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBVEE7QUFDQTtBQVlBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBVEE7QUFDQTtBQVlBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakJBO0FBQ0E7QUFvQkE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqQkE7QUFDQTtBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUlBO0FBTEE7QUFjQTtBQWRBO0FBZ0JBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFEQTtBQU1BO0FBVEE7QUFrQkE7QUFsQkE7QUFxQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFMQTtBQWNBO0FBZEE7QUF2Q0E7QUFSQTtBQWtFQTtBQVNBO0FBREE7QUE5RUE7QUFvRkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFNQTtBQWJBO0FBREE7QUFKQTtBQXVCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUxBO0FBSEE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQU5BO0FBREE7QUFEQTtBQVpBO0FBc0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQUpBO0FBaUJBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUlBO0FBTkE7QUFVQTtBQWhCQTtBQU5BO0FBeUJBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFqQ0E7QUE1S0E7QUFEQTtBQURBO0FBREE7QUE4TkE7Ozs7QUF4cEJBO0FBQ0E7QUEwcEJBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFIQTtBQUNBO0FBREE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3RyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBU0E7Ozs7Ozs7Ozs7O0FBVUE7QUFDQTtBQUNBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBQ0E7QUFDQTtBQUZBO0FBZEE7QUFDQTtBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcUJBOzs7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFPQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFOQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQURBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQVZBO0FBRkE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFGQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBT0E7QUFDQTtBQWpCQTtBQUZBO0FBd0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBTEE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTEE7QUFEQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBUEE7QUFEQTtBQWtCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVJBO0FBaUJBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQVRBO0FBcEJBO0FBM0pBO0FBOExBOzs7O0FBbFlBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFEQTtBQUNBO0FBQ0E7QUE2WEE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBT0E7Ozs7QUFsQkE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBQ0E7QUFrQkE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXFCQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTEE7QUFEQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBUEE7QUFEQTtBQWlCQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFUQTtBQUZBO0FBekVBO0FBMEZBOzs7O0FBbktBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFEQTtBQUNBO0FBQ0E7QUE4SkE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUtBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQVJBO0FBWUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7OztBQWhEQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBQ0E7QUFDQTtBQWdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFhQTtBQWZBO0FBQ0E7QUFpQkE7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFPQTtBQVBBO0FBREE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU9BO0FBUEE7QUFEQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFKQTtBQURBO0FBYUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFPQTtBQVBBO0FBREE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQXpFQTtBQURBO0FBK0VBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQUhBO0FBV0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBL0ZBO0FBa0dBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzF4QkE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFLQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQU9BO0FBQ0E7OztBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBS0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhCQTtBQW1CQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFNQTtBQUNBO0FBQ0E7QUFGQTtBQU5BO0FBREE7QUFDQTtBQWNBO0FBR0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQS9EQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBcUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQURBO0FBREE7QUFhQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFMQTtBQVVBO0FBR0E7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTEE7QUFVQTtBQUdBO0FBQUE7QUFDQTtBQVNBO0FBVkE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBZkE7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQUtBO0FBTkE7QUFRQTtBQVJBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBTkE7QUFRQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFwRkE7QUF4QkE7QUFzSEE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFWQTtBQURBO0FBZ0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFuQkE7QUFzQkE7Ozs7QUEzYUE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBQ0E7QUEyYUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbmNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFLQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBRkE7QUFRQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFKQTtBQURBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBT0E7QUFsQkE7QUFKQTtBQTBCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFXQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFKQTtBQU1BO0FBQ0E7QUFHQTtBQUpBO0FBUEE7QUFxQkEsMENBQ0E7QUFuQ0E7QUFzREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQVBBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQVZBO0FBekZBO0FBREE7QUE4R0E7Ozs7QUF0UEE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBc1BBO0FBQ0E7QUFDQTs7O0FBTUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBSEE7QUFJQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFTQTtBQUdBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7Ozs7QUE5REE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUE4REE7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBSEE7QUFNQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUZBO0FBUUE7Ozs7QUFqQ0E7QUFDQTtBQURBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBY0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFlQTtBQUNBO0FBQ0E7QUFmQTtBQUZBO0FBR0E7QUFDQTs7O0FBY0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFSQTtBQW9CQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQVdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQXBCQTtBQVJBO0FBQ0E7QUF5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUZBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUpBO0FBREE7QUFGQTtBQVlBO0FBQUE7QUFBQTtBQUFBO0FBRUE7Ozs7QUE1SkE7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBSEE7QUFMQTtBQVlBO0FBREE7QUFDQTtBQWtKQTtBQUNBO0FBQ0E7OztBQVlBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQWdDQTtBQUFBO0FBQ0E7QUE5QkE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBUkE7QUFTQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBOzs7QUFJQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQURBO0FBQ0E7QUFjQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUlBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFBQTtBQXZCQTtBQStCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBaENBO0FBbUNBOzs7O0FBbEpBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQTZJQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBYUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7Ozs7QUE1QkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVFBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFDQTtBQXNCQTs7Ozs7Ozs7QUM1V0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBektBO0FBQ0E7QUEyS0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDMUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQVFBO0FBZkE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQWlCQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFEQTtBQUNBO0FBUUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBREE7QUFDQTtBQVFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFDQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBREE7QUFDQTtBQUtBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBVEE7QUFDQTtBQWdCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTEE7QUFEQTtBQURBO0FBQ0E7QUFXQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFTQTtBQUFBO0FBWEE7QUFDQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFTQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSEE7QUFPQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQUFBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFOQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU5BO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZkE7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBWEE7QUFjQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQXpCQTtBQWtDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQVhBO0FBdENBO0FBcURBOzs7O0FBOVNBO0FBQ0E7QUFnVEE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBUkE7QUFDQTtBQVdBOzs7Ozs7OztBQzVVQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFHQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBVkE7QUFZQTtBQUNBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFMQTtBQVNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFSQTtBQUZBO0FBREE7QUFlQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUhBO0FBVUE7QUFiQTtBQWdCQTtBQUNBO0FBREE7QUFuREE7QUFDQTtBQXVEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7Ozs7QUE5S0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBRkE7QUFDQTtBQUNBO0FBeUtBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFXQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQU1BOzs7O0FBdEJBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFDQTtBQUZBO0FBQ0E7QUFDQTtBQWlCQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFGQTtBQVdBO0FBRUE7QUFGQTtBQVhBO0FBaUJBOzs7O0FBcEJBO0FBQ0E7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDOU5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBMkVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQTdEQTtBQUNBO0FBM0VBO0FBZ01BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFSQTtBQURBO0FBbUJBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFSQTtBQURBO0FBbUJBO0FBQ0E7QUFDQTtBQTFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWxCQTtBQW1CQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBZ0JBO0FBTUE7QUFFQTs7O0FBa0VBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQVVBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7OztBQWlEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBVEE7QUFZQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU5BO0FBaEJBO0FBOEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFiQTtBQUFBO0FBQ0E7QUFnQkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFRQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBVUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBQ0E7QUE5Q0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQTBEQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBMUdBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQWlIQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFKQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFMQTtBQVlBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBRkE7QUFTQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBREE7QUFGQTtBQWtCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBYkE7QUFEQTtBQUZBO0FBMkJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVFBO0FBQ0E7QUFUQTtBQUZBO0FBaUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQVBBO0FBTEE7QUFrQkE7QUFsQkE7QUFGQTtBQTBCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFPQTtBQVBBO0FBTEE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUxBO0FBV0E7QUFDQTtBQUtBO0FBS0E7QUFYQTtBQVhBO0FBVEE7QUE3S0E7QUFrTkE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFJQTtBQUFBO0FBS0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUF4QkE7QUFBQTtBQUNBO0FBMEJBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTEE7QUFDQTtBQXBDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBcURBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBREE7QUFOQTtBQVVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFSQTtBQURBO0FBRkE7QUFzQkE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFEQTtBQUhBO0FBbUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFRQTtBQUNBO0FBVEE7QUFGQTtBQWlCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFLQTtBQVBBO0FBYUE7QUFDQTtBQUtBO0FBS0E7QUFYQTtBQWJBO0FBWEE7QUF4RkE7QUFpSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFTQTs7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQWNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBVkE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFhQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBREE7QUFGQTtBQTVEQTtBQURBO0FBNEVBOzs7O0FBeDhCQTtBQUNBO0FBMDhCQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBYkE7QUFDQTtBQWdCQTtBQUNBO0FBREE7QUFDQTtBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyZ0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFRQTs7O0FBT0E7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFJQTs7OztBQTlDQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBOENBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTs7Ozs7Ozs7Ozs7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTs7OztBQUxBO0FBQ0E7QUFPQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSkE7QUFNQTtBQVhBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFLQTtBQUNBO0FBUUE7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQU9BOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBU0E7Ozs7QUFoREE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBQ0E7QUFnREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFDQTtBQU9BOzs7Ozs7Ozs7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQUZBO0FBaUJBO0FBakJBO0FBb0JBOzs7O0FBdkJBO0FBQ0E7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBR0E7Ozs7O0FBZkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFVQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTs7OztBQTlCQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQU1BO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQUtBO0FBQ0E7OztBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQVdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUFDQTtBQVNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQURBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFaQTtBQVBBO0FBOEJBOzs7O0FBaElBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBZ0lBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBSEE7QUFJQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTkE7QUFXQTs7OztBQTlCQTtBQUNBO0FBZ0NBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25MQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFGQTtBQUdBO0FBQ0E7OztBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVFBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUtBO0FBVkE7QUFZQTtBQUNBO0FBREE7QUFaQTtBQW9CQTtBQTNCQTtBQURBO0FBZ0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQVBBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBWEE7QUFqQ0E7QUFGQTtBQXlEQTs7OztBQW5IQTtBQUNBO0FBcUhBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7Ozs7QSIsInNvdXJjZVJvb3QiOiIifQ==