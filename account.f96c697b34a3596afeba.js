(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[20],{

/***/ 2535:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(556);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(540);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(701);
/* harmony import */ var stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2232);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1832);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1833);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(760);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(557);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _Page404_Page404__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2361);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(716);
/* harmony import */ var _AccountAssets__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2536);
/* harmony import */ var _AccountAssetCreate__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2538);
/* harmony import */ var _AccountAssetUpdate__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2539);
/* harmony import */ var _AccountMembership__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2543);
/* harmony import */ var _AccountVesting__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2545);
/* harmony import */ var _AccountPermissions__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2546);
/* harmony import */ var _AccountSignedMessages__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2561);
/* harmony import */ var _AccountWhitelist__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2564);
/* harmony import */ var _AccountVoting__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2565);
/* harmony import */ var _AccountOverview__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(2568);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






// import AccountLeftPanel from "./AccountLeftPanel";








/* Nested routes */











var AccountPage = function (_React$Component) {
    _inherits(AccountPage, _React$Component);

    function AccountPage() {
        _classCallCheck(this, AccountPage);

        return _possibleConstructorReturn(this, (AccountPage.__proto__ || Object.getPrototypeOf(AccountPage)).apply(this, arguments));
    }

    _createClass(AccountPage, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            if (this.props.account) {
                actions_AccountActions__WEBPACK_IMPORTED_MODULE_1__["default"].setCurrentAccount.defer(this.props.account.get("name"));

                // Fetch possible fee assets here to avoid async issues later (will resolve assets)
                common_account_utils__WEBPACK_IMPORTED_MODULE_8__["default"].getPossibleFees(this.props.account, "transfer");
            }
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.account) {
                var npName = np.account.get("name");
                var currentName = this.props.account && this.props.account.get("name");

                if (!this.props.account || npName !== currentName) {
                    // Update the current account in order to access the header right menu options
                    actions_AccountActions__WEBPACK_IMPORTED_MODULE_1__["default"].setCurrentAccount.defer(npName);
                    // Fetch possible fee assets here to avoid async issues later (will resolve assets)
                    common_account_utils__WEBPACK_IMPORTED_MODULE_8__["default"].getPossibleFees(np.account, "transfer");
                }
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                myActiveAccounts = _props.myActiveAccounts,
                searchAccounts = _props.searchAccounts,
                settings = _props.settings,
                wallet_locked = _props.wallet_locked,
                account = _props.account,
                hiddenAssets = _props.hiddenAssets;


            if (!account) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Page404_Page404__WEBPACK_IMPORTED_MODULE_10__["default"], null);
            }
            var account_name = this.props.account.get("name");
            var isMyAccount = stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].isMyAccount(account);

            var passOnProps = {
                account_name: account_name,
                myActiveAccounts: myActiveAccounts,
                searchAccounts: searchAccounts,
                settings: settings,
                wallet_locked: wallet_locked,
                account: account,
                isMyAccount: isMyAccount,
                hiddenAssets: hiddenAssets,
                contained: true,
                balances: account.get("balances", Object(immutable__WEBPACK_IMPORTED_MODULE_9__["List"])()).toList(),
                orders: account.get("orders", Object(immutable__WEBPACK_IMPORTED_MODULE_9__["List"])()).toList(),
                viewSettings: this.props.viewSettings,
                proxy: account.getIn(["options", "voting_account"]),
                history: this.props.history
            };

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-block page-layout" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block no-padding" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Switch"],
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name,
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountOverview__WEBPACK_IMPORTED_MODULE_21__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Redirect"], {
                            from: "/account/" + account_name + "/overview",
                            to: "/account/" + account_name
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/assets",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssets__WEBPACK_IMPORTED_MODULE_12__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/create-asset",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssetCreate__WEBPACK_IMPORTED_MODULE_13__["AccountAssetCreate"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/update-asset/:asset",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssetUpdate__WEBPACK_IMPORTED_MODULE_14__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/member-stats",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountMembership__WEBPACK_IMPORTED_MODULE_15__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/vesting",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountVesting__WEBPACK_IMPORTED_MODULE_16__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/permissions",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissions__WEBPACK_IMPORTED_MODULE_17__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/voting",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountVoting__WEBPACK_IMPORTED_MODULE_20__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/whitelist",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountWhitelist__WEBPACK_IMPORTED_MODULE_19__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/signedmessages",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountSignedMessages__WEBPACK_IMPORTED_MODULE_18__["default"], passOnProps);
                            }
                        })
                    )
                )
            );
        }
    }]);

    return AccountPage;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPage.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAccount.isRequired
};

AccountPage = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(AccountPage, {
    show_loader: true
});

var AccountPageStoreWrapper = function (_React$Component2) {
    _inherits(AccountPageStoreWrapper, _React$Component2);

    function AccountPageStoreWrapper() {
        _classCallCheck(this, AccountPageStoreWrapper);

        return _possibleConstructorReturn(this, (AccountPageStoreWrapper.__proto__ || Object.getPrototypeOf(AccountPageStoreWrapper)).apply(this, arguments));
    }

    _createClass(AccountPageStoreWrapper, [{
        key: "render",
        value: function render() {
            var account_name = this.props.match.params.account_name;
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPage, _extends({}, this.props, { account: account_name }));
        }
    }]);

    return AccountPageStoreWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(alt_react__WEBPACK_IMPORTED_MODULE_7__["connect"])(AccountPageStoreWrapper, {
    listenTo: function listenTo() {
        return [stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"], stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"], stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_4__["default"]];
    },
    getProps: function getProps() {
        return {
            myActiveAccounts: stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].getState().myActiveAccounts,
            searchAccounts: stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].getState().searchAccounts,
            settings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().settings,
            hiddenAssets: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().hiddenAssets,
            wallet_locked: stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().locked,
            viewSettings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().viewSettings
        };
    }
}));

/***/ }),

/***/ 2536:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1957);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(716);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2258);
/* harmony import */ var stores_AssetStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2257);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(556);
/* harmony import */ var _Modal_BaseModal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1959);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1969);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(709);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _LoadingIndicator__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1818);
/* harmony import */ var _Modal_IssueModal__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2537);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(760);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(1986);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2186);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2515);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(774);


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }





















var AccountAssets = function (_React$Component) {
    _inherits(AccountAssets, _React$Component);

    function AccountAssets(props) {
        _classCallCheck(this, AccountAssets);

        var _this = _possibleConstructorReturn(this, (AccountAssets.__proto__ || Object.getPrototypeOf(AccountAssets)).call(this, props));

        _this.state = {
            create: {
                symbol: "",
                name: "",
                description: "",
                max_supply: 1000000000000000,
                precision: 4
            },
            issue: {
                amount: 0,
                to: "",
                to_id: "",
                asset_id: "",
                symbol: ""
            },
            errors: {
                symbol: null
            },
            isValid: false,
            searchTerm: ""
        };

        _this._searchAccounts = Object(lodash_es_debounce__WEBPACK_IMPORTED_MODULE_0__["default"])(_this._searchAccounts, 150);
        return _this;
    }

    _createClass(AccountAssets, [{
        key: "_checkAssets",
        value: function _checkAssets(assets, force) {
            if (this.props.account.get("assets").size) return;
            var lastAsset = assets.sort(function (a, b) {
                if (a.symbol > b.symbol) {
                    return 1;
                } else if (a.symbol < b.symbol) {
                    return -1;
                } else {
                    return 0;
                }
            }).last();

            if (assets.size === 0 || force) {
                actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__["default"].getAssetList.defer("A", 100);
                this.setState({ assetsFetched: 100 });
            } else if (assets.size >= this.state.assetsFetched) {
                actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__["default"].getAssetList.defer(lastAsset.symbol, 100);
                this.setState({ assetsFetched: this.state.assetsFetched + 99 });
            }
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            this._checkAssets(nextProps.assets);
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            this._checkAssets(this.props.assets, true);
        }
    }, {
        key: "_onIssueInput",
        value: function _onIssueInput(value, e) {
            var key = e.target.id;
            var issue = this.state.issue;


            if (key === "to") {
                this._searchAccounts(e.target.value);
                issue.to = e.target.value;
                var account = this.props.searchAccounts.findEntry(function (name) {
                    return name === e.target.value;
                });

                issue.to_id = account ? account[0] : null;
            } else {
                issue[value] = e.target.value;
            }

            this.setState({ issue: issue });
        }
    }, {
        key: "_searchAccounts",
        value: function _searchAccounts(searchTerm) {
            actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__["default"].accountSearch(searchTerm);
        }
    }, {
        key: "_issueButtonClick",
        value: function _issueButtonClick(asset_id, symbol, e) {
            e.preventDefault();
            var issue = this.state.issue;

            issue.asset_id = asset_id;
            issue.symbol = symbol;
            this.setState({ issue: issue });
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_10___default.a.publish("issue_asset", "open");
        }
    }, {
        key: "_editButtonClick",
        value: function _editButtonClick(symbol, account_name, e) {
            e.preventDefault();
            this.props.history.push("/account/" + account_name + "/update-asset/" + symbol);
        }
    }, {
        key: "_createButtonClick",
        value: function _createButtonClick(account_name) {
            this.props.history.push("/account/" + account_name + "/create-asset");
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var _props = this.props,
                account = _props.account,
                account_name = _props.account_name,
                assets = _props.assets,
                assetsList = _props.assetsList;


            var accountExists = true;
            if (!account) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_LoadingIndicator__WEBPACK_IMPORTED_MODULE_11__["default"], { type: "circle" });
            } else if (account.notFound) {
                accountExists = false;
            }
            if (!accountExists) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "grid-block" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "h5",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            component: "h5",
                            content: "account.errors.not_found",
                            name: account_name
                        })
                    )
                );
            }

            if (assetsList.length) {
                assets = assets.clear();
                assetsList.forEach(function (a) {
                    if (a) assets = assets.set(a.get("id"), a.toJS());
                });
            }
            var myAssets = assets.filter(function (asset) {
                return asset.issuer === account.get("id");
            }).sort(function (a, b) {
                return parseInt(a.id.substring(4, a.id.length), 10) - parseInt(b.id.substring(4, b.id.length), 10);
            }).map(function (asset) {
                var description = common_asset_utils__WEBPACK_IMPORTED_MODULE_14__["default"].parseDescription(asset.options.description);
                var desc = description.short_name ? description.short_name : description.main;

                if (desc.length > 100) {
                    desc = desc.substr(0, 100) + "...";
                }

                var dynamicObject = _this2.props.getDynamicObject(asset.dynamic_asset_data_id);

                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "tr",
                    { key: asset.symbol },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "left" } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"],
                            { to: "/asset/" + asset.symbol },
                            asset.symbol
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "left" } },
                        "bitasset" in asset ? asset.bitasset.is_prediction_market ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.pm" }) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.mpa" }) : "User Issued Asset"
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "right" } },
                        dynamicObject ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_9__["default"], {
                            hide_asset: true,
                            amount: parseInt(dynamicObject.get("current_supply"), 10),
                            asset: asset.id
                        }) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "right" } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_9__["default"], {
                            hide_asset: true,
                            amount: parseInt(asset.options.max_supply, 10),
                            asset: asset.id
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        null,
                        !asset.bitasset_data_id ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "a",
                            {
                                onClick: _this2._issueButtonClick.bind(_this2, asset.id, asset.symbol)
                            },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_18__["default"], {
                                name: "cross-circle",
                                className: "rotate45"
                            })
                        ) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "a",
                            {
                                onClick: _this2._editButtonClick.bind(_this2, asset.symbol, account_name)
                            },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_18__["default"], { name: "dashboard" })
                        )
                    )
                );
            }).toArray();

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tabs"],
                            {
                                segmented: false,
                                setting: "issuedAssetsTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding"
                            },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                { title: "account.user_issued_assets.issued_assets" },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "div",
                                    { className: "content-block" },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "table",
                                        { className: "table dashboard-table" },
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            "thead",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                "tr",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    { style: { textAlign: "left" } },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.symbol" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    { style: { textAlign: "left" } },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.asset.summary.asset_type" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                                    component: "th",
                                                    content: "markets.supply",
                                                    style: { textAlign: "right" }
                                                }),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    {
                                                        style: { textAlign: "right" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.max_supply" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    {
                                                        style: {
                                                            textAlign: "center"
                                                        }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "transaction.trxTypes.asset_issue" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    {
                                                        style: {
                                                            textAlign: "center"
                                                        }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "transaction.trxTypes.asset_update" })
                                                )
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            "tbody",
                                            null,
                                            myAssets
                                        )
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "div",
                                    { className: "content-block" },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "button",
                                        {
                                            className: "button",
                                            onClick: this._createButtonClick.bind(this, account_name)
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "transaction.trxTypes.asset_create" })
                                    )
                                )
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        _Modal_BaseModal__WEBPACK_IMPORTED_MODULE_8__["default"],
                        { id: "issue_asset", overlay: true },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "grid-block vertical" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Modal_IssueModal__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                asset_to_issue: this.state.issue.asset_id,
                                onClose: function onClose() {
                                    react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_10___default.a.publish("issue_asset", "close");
                                }
                            })
                        )
                    )
                )
            );
        }
    }]);

    return AccountAssets;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

AccountAssets.defaultProps = {
    symbol: "",
    name: "",
    description: "",
    max_supply: 0,
    precision: 0
};
AccountAssets.propTypes = {
    symbol: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string.isRequired
};


AccountAssets = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_16__["default"])(AccountAssets, {
    propNames: ["assetsList"],
    asList: true,
    withDynamic: true
});

/* harmony default export */ __webpack_exports__["default"] = (Object(alt_react__WEBPACK_IMPORTED_MODULE_13__["connect"])(AccountAssets, {
    listenTo: function listenTo() {
        return [stores_AssetStore__WEBPACK_IMPORTED_MODULE_6__["default"]];
    },
    getProps: function getProps(props) {
        var assets = Object(immutable__WEBPACK_IMPORTED_MODULE_15__["Map"])(),
            assetsList = Object(immutable__WEBPACK_IMPORTED_MODULE_15__["List"])();
        if (props.account.get("assets", []).size) {
            props.account.get("assets", []).forEach(function (id) {
                assetsList = assetsList.push(id);
            });
        } else {
            assets = stores_AssetStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().assets;
        }
        return { assets: assets, assetsList: assetsList };
    }
}));

/***/ }),

/***/ 2537:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(Buffer) {/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1832);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1833);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(558);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var api_ApplicationApi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(578);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2189);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1968);
/* harmony import */ var actions_NotificationActions__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(580);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }












var IssueModal = function (_React$Component) {
    _inherits(IssueModal, _React$Component);

    function IssueModal(props) {
        _classCallCheck(this, IssueModal);

        var _this = _possibleConstructorReturn(this, (IssueModal.__proto__ || Object.getPrototypeOf(IssueModal)).call(this, props));

        _this.state = {
            amount: props.amount,
            to: props.to,
            to_id: null,
            memo: ""
        };
        return _this;
    }

    _createClass(IssueModal, [{
        key: "onAmountChanged",
        value: function onAmountChanged(_ref) {
            var amount = _ref.amount;

            this.setState({ amount: amount });
        }
    }, {
        key: "onToAccountChanged",
        value: function onToAccountChanged(to) {
            var state = to ? { to: to.get("name"), to_id: to.get("id") } : { to_id: null };
            this.setState(state);
        }
    }, {
        key: "onToChanged",
        value: function onToChanged(to) {
            this.setState({ to: to, to_id: null });
        }
    }, {
        key: "onSubmit",
        value: function onSubmit() {
            var asset_to_issue = this.props.asset_to_issue;

            var precision = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_precision(asset_to_issue.get("precision"));
            var amount = this.state.amount.toString().replace(/,/g, "");
            amount *= precision;

            api_ApplicationApi__WEBPACK_IMPORTED_MODULE_6__["default"].issue_asset(this.state.to_id, asset_to_issue.get("issuer"), asset_to_issue.get("id"), amount, this.state.memo ? new Buffer(this.state.memo, "utf-8") : this.state.memo).catch(function (err) {
                console.log("issue error caught here:", err);
                actions_NotificationActions__WEBPACK_IMPORTED_MODULE_9__["default"].addNotification({
                    message: "Failed to issue the asset, probably due to an invalid amount being issued", //: ${this.state.wallet_public_name}
                    level: "error",
                    autoDismiss: 10
                });
            });

            this.setState({
                amount: 0,
                to: "",
                to_id: null,
                memo: ""
            });
        }
    }, {
        key: "onMemoChanged",
        value: function onMemoChanged(e) {
            this.setState({ memo: e.target.value });
        }
    }, {
        key: "render",
        value: function render() {
            var asset_to_issue = this.props.asset_to_issue.get("id");
            var tabIndex = 1;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "form",
                { className: "grid-block vertical full-width-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-container ", style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_7__["default"], {
                            label: "modal.issue.to",
                            accountName: this.state.to,
                            onAccountChanged: this.onToAccountChanged.bind(this),
                            onChange: this.onToChanged.bind(this),
                            account: this.state.to,
                            tabIndex: tabIndex++
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_8__["default"], {
                            label: "modal.issue.amount",
                            amount: this.state.amount,
                            onChange: this.onAmountChanged.bind(this),
                            asset: asset_to_issue,
                            assets: [asset_to_issue],
                            tabIndex: tabIndex++
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "label",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                component: "span",
                                content: "transfer.memo"
                            }),
                            " ",
                            "(",
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "transfer.optional" }),
                            ")"
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                            rows: "3",
                            value: this.state.memo,
                            tabIndex: tabIndex++,
                            onChange: this.onMemoChanged.bind(this)
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block button-group" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                type: "submit",
                                className: "button primary",
                                onClick: this.onSubmit.bind(this, this.state.to, this.state.amount),
                                disabled: !this.state.to_id || !this.state.amount,
                                tabIndex: tabIndex++
                            },
                            counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("modal.issue.submit")
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                className: "button primary hollow",
                                onClick: this.props.onClose,
                                tabIndex: tabIndex++
                            },
                            counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("cancel")
                        )
                    )
                )
            );
        }
    }]);

    return IssueModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

IssueModal.propTypes = {
    asset_to_issue: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAsset.isRequired
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(IssueModal));
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(414).Buffer))

/***/ }),

/***/ 2538:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AccountAssetCreate", function() { return AccountAssetCreate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BitAssetOptions", function() { return BitAssetOptions; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(931);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2258);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2016);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(558);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(407);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1969);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1832);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1833);
/* harmony import */ var _Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2453);
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(574);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(1986);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2515);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(1968);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(1987);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(chain_asset_constants__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var common_trxHelper__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(572);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_18__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






















var GRAPHENE_MAX_SHARE_SUPPLY = new bignumber_js__WEBPACK_IMPORTED_MODULE_12__["default"](chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_MAX_SHARE_SUPPLY);

var BitAssetOptions = function (_React$Component) {
    _inherits(BitAssetOptions, _React$Component);

    function BitAssetOptions(props) {
        _classCallCheck(this, BitAssetOptions);

        var _this = _possibleConstructorReturn(this, (BitAssetOptions.__proto__ || Object.getPrototypeOf(BitAssetOptions)).call(this, props));

        _this.state = {
            backingAsset: props.backingAsset.get("symbol"),
            error: null
        };
        return _this;
    }

    _createClass(BitAssetOptions, [{
        key: "_onInputBackingAsset",
        value: function _onInputBackingAsset(asset) {
            this.setState({
                backingAsset: asset.toUpperCase(),
                error: null
            });
        }
    }, {
        key: "_onFoundBackingAsset",
        value: function _onFoundBackingAsset(asset) {
            if (asset) {
                var backing = asset.get("bitasset") && bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(asset.getIn(["bitasset", "options", "short_backing_asset"]));
                var backing_backing = backing && backing.get("bitasset") && bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(backing.getIn(["bitasset", "options", "short_backing_asset"]));
                if (backing_backing && backing_backing !== "1.3.0") {
                    this.setState({
                        error: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.error_too_deep")
                    });
                    this.props.onUpdate("invalid", true);
                } else if (!asset.getIn(["bitasset", "is_prediction_market"])) {
                    if (this.props.isPredictionMarket && asset.get("precision") !== parseInt(this.props.assetPrecision, 10)) {
                        this.setState({
                            error: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.error_precision", { asset: this.props.assetSymbol })
                        });
                        this.props.onUpdate("invalid", true);
                    } else {
                        this.props.onUpdate("short_backing_asset", asset.get("id"));
                        this.props.onUpdate("invalid", false);
                    }
                } else {
                    this.setState({
                        error: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.error_invalid")
                    });
                    this.props.onUpdate("invalid", true);
                }
            } else {
                this.props.onUpdate("invalid", true);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var bitasset_opts = this.props.bitasset_opts;
            var error = this.state.error;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "small-12 grid-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.feed_lifetime_sec" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.feed_lifetime_sec / 60,
                        onChange: this.props.onUpdate.bind(this, "feed_lifetime_sec")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.minimum_feeds" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.minimum_feeds,
                        onChange: this.props.onUpdate.bind(this, "minimum_feeds")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.force_settlement_delay_sec" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.force_settlement_delay_sec / 60,
                        onChange: this.props.onUpdate.bind(this, "force_settlement_delay_sec")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.force_settlement_offset_percent" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.force_settlement_offset_percent / chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                        onChange: this.props.onUpdate.bind(this, "force_settlement_offset_percent")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.maximum_force_settlement_volume" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.maximum_force_settlement_volume / chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                        onChange: this.props.onUpdate.bind(this, "maximum_force_settlement_volume")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block no-margin small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_11__["default"], {
                        label: "account.user_issued_assets.backing",
                        onChange: this._onInputBackingAsset.bind(this),
                        asset: this.state.backingAsset,
                        assetInput: this.state.backingAsset,
                        tabIndex: 1,
                        style: { width: "100%", paddingRight: "10px" },
                        onFound: this._onFoundBackingAsset.bind(this)
                    }),
                    error ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block has-error" },
                        error
                    ) : null
                )
            );
        }
    }]);

    return BitAssetOptions;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

BitAssetOptions.propTypes = {
    backingAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainAsset.isRequired,
    isUpdate: prop_types__WEBPACK_IMPORTED_MODULE_18___default.a.bool
};
BitAssetOptions.defaultProps = {
    isUpdate: false
};

BitAssetOptions = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__["default"])(BitAssetOptions);

var AccountAssetCreate = function (_React$Component2) {
    _inherits(AccountAssetCreate, _React$Component2);

    function AccountAssetCreate(props) {
        _classCallCheck(this, AccountAssetCreate);

        var _this2 = _possibleConstructorReturn(this, (AccountAssetCreate.__proto__ || Object.getPrototypeOf(AccountAssetCreate)).call(this, props));

        _this2.state = _this2.resetState(props);
        return _this2;
    }

    _createClass(AccountAssetCreate, [{
        key: "resetState",
        value: function resetState(props) {
            // let asset = props.asset.toJS();
            var isBitAsset = false;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(4);
            var corePrecision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(props.core.get("precision"));

            var _getPermissions2 = this._getPermissions({
                isBitAsset: isBitAsset
            }),
                flagBooleans = _getPermissions2.flagBooleans,
                permissionBooleans = _getPermissions2.permissionBooleans;

            // let flags = assetUtils.getFlags(flagBooleans);
            // let permissions = assetUtils.getPermissions(permissionBooleans, isBitAsset);
            // console.log("all permissions:", permissionBooleans, permissions)

            var coreRateBaseAssetName = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset("1.3.0").get("symbol");

            return {
                update: {
                    symbol: "",
                    precision: 4,
                    max_supply: 100000,
                    max_market_fee: 0,
                    market_fee_percent: 0,
                    description: { main: "" }
                },
                errors: {
                    max_supply: null
                },
                isValid: true,
                flagBooleans: flagBooleans,
                permissionBooleans: permissionBooleans,
                isBitAsset: isBitAsset,
                is_prediction_market: false,
                core_exchange_rate: {
                    quote: {
                        asset_id: null,
                        amount: 1
                    },
                    base: {
                        asset_id: "1.3.0",
                        amount: 1
                    }
                },
                bitasset_opts: {
                    feed_lifetime_sec: 60 * 60 * 24,
                    minimum_feeds: 7,
                    force_settlement_delay_sec: 60 * 60 * 24,
                    force_settlement_offset_percent: 1 * chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                    maximum_force_settlement_volume: 20 * chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                    short_backing_asset: "1.3.0"
                },
                marketInput: ""
            };
        }
    }, {
        key: "_getPermissions",
        value: function _getPermissions(state) {
            var flagBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getFlagBooleans(0, state.isBitAsset);
            var permissionBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getFlagBooleans("all", state.isBitAsset);

            return {
                flagBooleans: flagBooleans,
                permissionBooleans: permissionBooleans
            };
        }
    }, {
        key: "_createAsset",
        value: function _createAsset(e) {
            e.preventDefault();
            var _state = this.state,
                update = _state.update,
                flagBooleans = _state.flagBooleans,
                permissionBooleans = _state.permissionBooleans,
                core_exchange_rate = _state.core_exchange_rate,
                isBitAsset = _state.isBitAsset,
                is_prediction_market = _state.is_prediction_market,
                bitasset_opts = _state.bitasset_opts;
            var account = this.props.account;


            var flags = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getFlags(flagBooleans, isBitAsset);
            var permissions = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getPermissions(permissionBooleans, isBitAsset);

            if (this.state.marketInput !== update.description.market) {
                update.description.market = "";
            }
            var description = JSON.stringify(update.description);

            actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__["default"].createAsset(account.get("id"), update, flags, permissions, core_exchange_rate, isBitAsset, is_prediction_market, bitasset_opts, description).then(function (result) {
                console.log("... AssetActions.createAsset(account_id, update)", account.get("id"), update, flags, permissions);
            });
        }
    }, {
        key: "_hasChanged",
        value: function _hasChanged() {
            return !common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].are_equal_shallow(this.state, this.resetState(this.props));
        }
    }, {
        key: "_reset",
        value: function _reset(e) {
            e.preventDefault();

            this.setState(this.resetState(this.props));
        }
    }, {
        key: "_forcePositive",
        value: function _forcePositive(number) {
            return parseFloat(number) < 0 ? "0" : number;
        }
    }, {
        key: "_onUpdateDescription",
        value: function _onUpdateDescription(value, e) {
            var update = this.state.update;

            var updateState = true;

            switch (value) {
                case "condition":
                    if (e.target.value.length > 60) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "short_name":
                    if (e.target.value.length > 32) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "market":
                    update.description[value] = e;
                    break;

                case "visible":
                    update.description[value] = !update.description[value];
                    break;

                default:
                    update.description[value] = e.target.value;
                    break;
            }

            if (updateState) {
                this.forceUpdate();
                this._validateEditFields(update);
            }
        }
    }, {
        key: "onChangeBitAssetOpts",
        value: function onChangeBitAssetOpts(value, e) {
            var _state2 = this.state,
                bitasset_opts = _state2.bitasset_opts,
                errors = _state2.errors;


            switch (value) {
                case "force_settlement_offset_percent":
                case "maximum_force_settlement_volume":
                    bitasset_opts[value] = parseFloat(e.target.value) * chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT;
                    break;
                case "minimum_feeds":
                    bitasset_opts[value] = parseInt(e.target.value, 10);
                    break;
                case "feed_lifetime_sec":
                case "force_settlement_delay_sec":
                    console.log(e.target.value, parseInt(parseFloat(e.target.value) * 60, 10));
                    bitasset_opts[value] = parseInt(parseFloat(e.target.value) * 60, 10);
                    break;

                case "short_backing_asset":
                    bitasset_opts[value] = e;
                    break;

                case "invalid":
                    errors.invalid_bitasset = e;
                    break;

                default:
                    bitasset_opts[value] = e.target.value;
                    break;
            }

            var isValid = !errors.symbol && !errors.max_supply && !errors.invalid_bitasset;

            this.setState({ isValid: isValid, errors: errors });
        }
    }, {
        key: "_onUpdateInput",
        value: function _onUpdateInput(value, e) {
            var _state3 = this.state,
                update = _state3.update,
                errors = _state3.errors;

            var updateState = true;
            var shouldRestoreCursor = false;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(this.state.update.precision);
            var target = e.target;
            var caret = target.selectionStart;
            var inputValue = target.value;

            switch (value) {
                case "market_fee_percent":
                    update[value] = this._forcePositive(target.value);
                    break;

                case "max_market_fee":
                    if (new bignumber_js__WEBPACK_IMPORTED_MODULE_12__["default"](inputValue).times(precision).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                        errors.max_market_fee = "The number you tried to enter is too large";
                        return this.setState({ errors: errors });
                    }
                    target.value = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(target.value, this.state.update.precision);
                    update[value] = target.value;
                    break;

                case "precision":
                    // Enforce positive number
                    update[value] = this._forcePositive(target.value);
                    break;

                case "max_supply":
                    shouldRestoreCursor = true;

                    var regexp_numeral = new RegExp(/[[:digit:]]/);

                    // Ensure input is valid
                    if (!regexp_numeral.test(target.value)) {
                        target.value = target.value.replace(/[^0-9.]/g, "");
                    }

                    // Catch initial decimal input
                    if (target.value.charAt(0) == ".") {
                        target.value = "0.";
                    }

                    // Catch double decimal and remove if invalid
                    if (target.value.charAt(target.value.length) != target.value.search(".")) {
                        target.value.substr(1);
                    }

                    target.value = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(target.value, this.state.update.precision);
                    update[value] = target.value;

                    // if ((new big(target.value)).times(Math.pow(10, precision).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                    //     return this.setState({
                    //         update,
                    //         errors: {max_supply: "The number you tried to enter is too large"
                    //     }});
                    // }
                    break;

                case "symbol":
                    shouldRestoreCursor = true;
                    // Enforce uppercase
                    var symbol = target.value.toUpperCase();
                    // Enforce characters
                    var regexp = new RegExp("^[.A-Z0-9]+$");
                    if (symbol !== "" && !regexp.test(symbol)) {
                        break;
                    }
                    bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(symbol);
                    update[value] = this._forcePositive(symbol);
                    break;

                default:
                    update[value] = target.value;
                    break;
            }

            if (updateState) {
                this.setState({ update: update }, function () {
                    if (shouldRestoreCursor) {
                        var selectionStart = caret - (inputValue.length - update[value].length);
                        target.setSelectionRange(selectionStart, selectionStart);
                    }
                });
                this._validateEditFields(update);
            }
        }
    }, {
        key: "_validateEditFields",
        value: function _validateEditFields(new_state) {
            var errors = this.state.errors;

            errors.max_supply = null;

            errors.symbol = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainValidation"].is_valid_symbol_error(new_state.symbol);
            var existingAsset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(new_state.symbol);
            if (existingAsset) {
                errors.symbol = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.exists");
            }

            try {
                errors.max_supply = new_state.max_supply <= 0 ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.max_positive") : new bignumber_js__WEBPACK_IMPORTED_MODULE_12__["default"](new_state.max_supply).times(Math.pow(10, new_state.precision)).gt(GRAPHENE_MAX_SHARE_SUPPLY) ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large") : null;
            } catch (err) {
                console.log("err:", err);
                errors.max_supply = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large");
            }

            var isValid = !errors.symbol && !errors.max_supply && !errors.invalid_bitasset;

            this.setState({ isValid: isValid, errors: errors });
        }
    }, {
        key: "_onFlagChange",
        value: function _onFlagChange(key) {
            var booleans = this.state.flagBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                flagBooleans: booleans
            });
        }
    }, {
        key: "_onPermissionChange",
        value: function _onPermissionChange(key) {
            var booleans = this.state.permissionBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                permissionBooleans: booleans
            });
        }
    }, {
        key: "_onInputCoreAsset",
        value: function _onInputCoreAsset(type, asset) {
            if (type === "quote") {
                this.setState({
                    quoteAssetInput: asset
                });
            } else if (type === "base") {
                this.setState({
                    baseAssetInput: asset
                });
            }
        }
    }, {
        key: "_onFoundCoreAsset",
        value: function _onFoundCoreAsset(type, asset) {
            if (asset) {
                var core_rate = this.state.core_exchange_rate;
                core_rate[type].asset_id = asset.get("id");

                this.setState({
                    core_exchange_rate: core_rate
                });

                this._validateEditFields({
                    max_supply: this.state.max_supply,
                    core_exchange_rate: core_rate
                });
            }
        }
    }, {
        key: "_onInputMarket",
        value: function _onInputMarket(asset) {
            this.setState({
                marketInput: asset
            });
        }
    }, {
        key: "_onFoundMarketAsset",
        value: function _onFoundMarketAsset(asset) {
            if (asset) {
                this._onUpdateDescription("market", asset.get("symbol"));
            }
        }
    }, {
        key: "_onCoreRateChange",
        value: function _onCoreRateChange(type, e) {
            var amount = void 0,
                asset = void 0;
            if (type === "quote") {
                amount = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(e.target.value, this.state.update.precision);
                asset = null;
            } else {
                if (!e || !("amount" in e)) {
                    return;
                }
                amount = e.amount == "" ? "0" : common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(e.amount.toString().replace(/,/g, ""), this.props.core.get("precision"));
                asset = e.asset.get("id");
            }

            var core_exchange_rate = this.state.core_exchange_rate;

            core_exchange_rate[type] = {
                amount: amount,
                asset_id: asset
            };
            this.forceUpdate();
        }
    }, {
        key: "_onToggleBitAsset",
        value: function _onToggleBitAsset() {
            var update = this.state.update;

            this.state.isBitAsset = !this.state.isBitAsset;
            if (!this.state.isBitAsset) {
                this.state.is_prediction_market = false;
            }

            var _getPermissions3 = this._getPermissions(this.state),
                flagBooleans = _getPermissions3.flagBooleans,
                permissionBooleans = _getPermissions3.permissionBooleans;

            this.state.flagBooleans = flagBooleans;
            this.state.permissionBooleans = permissionBooleans;

            this.forceUpdate();
        }
    }, {
        key: "_onTogglePM",
        value: function _onTogglePM() {
            this.state.is_prediction_market = !this.state.is_prediction_market;
            this.state.update.precision = this.props.core.get("precision");
            this.state.core_exchange_rate.base.asset_id = this.props.core.get("id");
            this.forceUpdate();
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                globalObject = _props.globalObject,
                core = _props.core;
            var _state4 = this.state,
                errors = _state4.errors,
                isValid = _state4.isValid,
                update = _state4.update,
                flagBooleans = _state4.flagBooleans,
                permissionBooleans = _state4.permissionBooleans,
                core_exchange_rate = _state4.core_exchange_rate,
                is_prediction_market = _state4.is_prediction_market,
                isBitAsset = _state4.isBitAsset,
                bitasset_opts = _state4.bitasset_opts;

            // Estimate the asset creation fee from the symbol character length

            var symbolLength = update.symbol.length,
                createFee = "N/A";

            if (symbolLength === 3) {
                createFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__["default"], {
                    amount: Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_17__["estimateFee"])("asset_create", ["symbol3"], globalObject),
                    asset: "1.3.0"
                });
            } else if (symbolLength === 4) {
                createFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__["default"], {
                    amount: Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_17__["estimateFee"])("asset_create", ["symbol4"], globalObject),
                    asset: "1.3.0"
                });
            } else if (symbolLength > 4) {
                createFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__["default"], {
                    amount: Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_17__["estimateFee"])("asset_create", ["long_symbol"], globalObject),
                    asset: "1.3.0"
                });
            }

            // Loop over flags
            var flags = [];
            var getFlag = function getFlag(key, onClick, isChecked) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { key: "table_" + key, className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none", width: "80%" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.user_issued_assets." + key
                                }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "switch",
                                        style: { marginBottom: "10px" },
                                        onClick: onClick
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                        type: "checkbox",
                                        checked: isChecked
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                )
                            )
                        )
                    )
                );
            };
            for (var key in permissionBooleans) {
                if (permissionBooleans[key] && key !== "charge_market_fee") {
                    flags.push(getFlag(key, this._onFlagChange.bind(this, key), flagBooleans[key]));
                }
            }

            flags.push(getFlag("visible", this._onUpdateDescription.bind(this, "visible"), update.description.visible ? false : update.description.visible === false ? true : false));

            // Loop over permissions
            var permissions = [];
            for (var _key in permissionBooleans) {
                permissions.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { key: "table_" + _key, className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none", width: "80%" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.user_issued_assets." + _key
                                }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "switch",
                                        style: { marginBottom: "10px" },
                                        onClick: this._onPermissionChange.bind(this, _key)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                        type: "checkbox",
                                        checked: permissionBooleans[_key],
                                        onChange: function onChange() {}
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                )
                            )
                        )
                    )
                ));
            }

            var confirmButtons = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: "button",
                        onClick: this._reset.bind(this),
                        value: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.perm.reset")
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.reset" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_2___default()("button", { disabled: !isValid }),
                        onClick: this._createAsset.bind(this)
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "header.create_asset" })
                )
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "tabs-header" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "h3",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "header.create_asset" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tabs"],
                            {
                                setting: "createAssetTab",
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block",
                                contentClass: "grid-block shrink small-vertical medium-horizontal padding",
                                segmented: false,
                                actionButtons: confirmButtons
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.primary" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.symbol" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            value: update.symbol,
                                            onChange: this._onUpdateInput.bind(this, "symbol")
                                        })
                                    ),
                                    errors.symbol ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.symbol
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.max_supply" }),
                                        " ",
                                        update.symbol ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "span",
                                            null,
                                            "(",
                                            update.symbol,
                                            ")"
                                        ) : null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            value: update.max_supply,
                                            onChange: this._onUpdateInput.bind(this, "max_supply")
                                        })
                                    ),
                                    errors.max_supply ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.max_supply
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.decimals" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            min: "0",
                                            max: "8",
                                            step: "1",
                                            type: "range",
                                            value: update.precision,
                                            onChange: this._onUpdateInput.bind(this, "precision")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        update.precision
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        {
                                            style: { marginBottom: 10 },
                                            className: "txtlabel cancel"
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.precision_warning" })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "table",
                                        {
                                            className: "table",
                                            style: { width: "inherit" }
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tbody",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tr",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    { style: { border: "none" } },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                                        content: "account.user_issued_assets.mpa"
                                                    }),
                                                    ":"
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    { style: { border: "none" } },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "div",
                                                        {
                                                            className: "switch",
                                                            style: {
                                                                marginBottom: "10px"
                                                            },
                                                            onClick: this._onToggleBitAsset.bind(this)
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                            type: "checkbox",
                                                            checked: isBitAsset
                                                        }),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                                    )
                                                )
                                            )
                                        )
                                    ),
                                    isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "table",
                                        {
                                            className: "table",
                                            style: { width: "inherit" }
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tbody",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tr",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    {
                                                        style: { border: "none" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                                        content: "account.user_issued_assets.pm"
                                                    }),
                                                    ":"
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    {
                                                        style: { border: "none" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "div",
                                                        {
                                                            className: "switch",
                                                            style: {
                                                                marginBottom: "10px"
                                                            },
                                                            onClick: this._onTogglePM.bind(this)
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                            type: "checkbox",
                                                            checked: is_prediction_market
                                                        }),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                                    )
                                                )
                                            )
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.core_exchange_rate"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "grid-block no-margin" },
                                            errors.quote_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.quote_asset
                                            ) : null,
                                            errors.base_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.base_asset
                                            ) : null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    {
                                                        className: "amount-selector",
                                                        style: {
                                                            width: "100%",
                                                            paddingRight: "10px"
                                                        }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                                        component: "label",
                                                        content: "account.user_issued_assets.quote"
                                                    }),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "div",
                                                        { className: "inline-label" },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                            type: "text",
                                                            placeholder: "0.0",
                                                            onChange: this._onCoreRateChange.bind(this, "quote"),
                                                            value: core_exchange_rate.quote.amount
                                                        })
                                                    )
                                                )
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                                    label: "account.user_issued_assets.base",
                                                    amount: core_exchange_rate.base.amount,
                                                    onChange: this._onCoreRateChange.bind(this, "base"),
                                                    asset: core_exchange_rate.base.asset_id,
                                                    assets: [core_exchange_rate.base.asset_id],
                                                    placeholder: "0.0",
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingLeft: "10px"
                                                    }
                                                })
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "h5",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "exchange.price" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "span",
                                                    null,
                                                    ":",
                                                    " ",
                                                    common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].format_number(common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_price(core_exchange_rate.quote.amount * common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(update.precision), {
                                                        precision: update.precision
                                                    }, core_exchange_rate.base.amount * common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(core), core), 2 + (parseInt(update.precision, 10) || 8))
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "span",
                                                    null,
                                                    " ",
                                                    update.symbol,
                                                    "/",
                                                    core.get("symbol")
                                                )
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_1",
                                            component: "label",
                                            className: "has-error"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_2",
                                            component: "p"
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        createFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.description" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "label",
                                        content: "account.user_issued_assets.description"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                            style: { height: "7rem" },
                                            rows: "1",
                                            value: update.description.main,
                                            onChange: this._onUpdateDescription.bind(this, "main")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "label",
                                        content: "account.user_issued_assets.short"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            rows: "1",
                                            value: update.description.short_name,
                                            onChange: this._onUpdateDescription.bind(this, "short_name")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "label",
                                        content: "account.user_issued_assets.market"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_11__["default"], {
                                        label: "account.user_issued_assets.name",
                                        onChange: this._onInputMarket.bind(this),
                                        asset: this.state.marketInput,
                                        assetInput: this.state.marketInput,
                                        style: {
                                            width: "100%",
                                            paddingRight: "10px"
                                        },
                                        onFound: this._onFoundMarketAsset.bind(this)
                                    }),
                                    is_prediction_market ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.condition"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "text",
                                                rows: "1",
                                                value: update.description.condition,
                                                onChange: this._onUpdateDescription.bind(this, "condition")
                                            })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.expiry"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "date",
                                                value: update.description.expiry,
                                                onChange: this._onUpdateDescription.bind(this, "expiry")
                                            })
                                        )
                                    ) : null
                                )
                            ),
                            isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.bitasset_opts" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BitAssetOptions, {
                                    bitasset_opts: bitasset_opts,
                                    onUpdate: this.onChangeBitAssetOpts.bind(this),
                                    backingAsset: bitasset_opts.short_backing_asset,
                                    assetPrecision: update.precision,
                                    assetSymbol: update.symbol,
                                    isPredictionMarket: is_prediction_market
                                })
                            ) : null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.permissions" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { maxWidth: 800 } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                            path: "components/AccountAssetCreate",
                                            section: "permissions"
                                        })
                                    ),
                                    permissions
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.flags" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { maxWidth: 800 } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                            path: "components/AccountAssetCreate",
                                            section: "flags"
                                        })
                                    ),
                                    permissionBooleans["charge_market_fee"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.market_fee"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "table",
                                            { className: "table" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tbody",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "tr",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        {
                                                            style: {
                                                                border: "none",
                                                                width: "80%"
                                                            }
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.charge_market_fee" }),
                                                        ":"
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        {
                                                            style: {
                                                                border: "none"
                                                            }
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "div",
                                                            {
                                                                className: "switch",
                                                                style: {
                                                                    marginBottom: "10px"
                                                                },
                                                                onClick: this._onFlagChange.bind(this, "charge_market_fee")
                                                            },
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                                type: "checkbox",
                                                                checked: flagBooleans.charge_market_fee
                                                            }),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                                        )
                                                    )
                                                )
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_2___default()({
                                                    disabled: !flagBooleans.charge_market_fee
                                                })
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.market_fee" }),
                                                " ",
                                                "(%)",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                    type: "number",
                                                    value: update.market_fee_percent,
                                                    onChange: this._onUpdateInput.bind(this, "market_fee_percent")
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.max_market_fee" }),
                                                " ",
                                                "(",
                                                update.symbol,
                                                ")",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                    type: "number",
                                                    value: update.max_market_fee,
                                                    onChange: this._onUpdateInput.bind(this, "max_market_fee")
                                                })
                                            ),
                                            errors.max_market_fee ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.max_market_fee
                                            ) : null
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "h3",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.flags" })
                                    ),
                                    flags
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountAssetCreate;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountAssetCreate.propTypes = {
    core: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainAsset.isRequired,
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainObject.isRequired
};
AccountAssetCreate.defaultProps = {
    globalObject: "2.0.0",
    core: "1.3.0"
};


AccountAssetCreate = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__["default"])(AccountAssetCreate);



/***/ }),

/***/ 2539:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(931);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2258);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2016);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(558);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(407);
/* harmony import */ var _Utility_FormattedFee__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2540);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1832);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1833);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2186);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1968);
/* harmony import */ var _Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2305);
/* harmony import */ var _Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2453);
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(574);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(1986);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2515);
/* harmony import */ var _AccountAssetCreate__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2538);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(1987);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(chain_asset_constants__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var _AssetWhitelist__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2541);
/* harmony import */ var _AssetFeedProducers__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(2542);
/* harmony import */ var components_Modal_BaseModal__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(1959);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(709);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(716);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }




























var GRAPHENE_MAX_SHARE_SUPPLY = new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](chain_asset_constants__WEBPACK_IMPORTED_MODULE_19___default.a.GRAPHENE_MAX_SHARE_SUPPLY);

var AccountAssetUpdate = function (_React$Component) {
    _inherits(AccountAssetUpdate, _React$Component);

    function AccountAssetUpdate(props) {
        _classCallCheck(this, AccountAssetUpdate);

        var _this = _possibleConstructorReturn(this, (AccountAssetUpdate.__proto__ || Object.getPrototypeOf(AccountAssetUpdate)).call(this, props));

        _this.state = _this.resetState(props);
        return _this;
    }

    _createClass(AccountAssetUpdate, [{
        key: "_openConfirm",
        value: function _openConfirm() {
            this.refs.confirm_modal.show();
        }
    }, {
        key: "_cancelConfirm",
        value: function _cancelConfirm() {
            this.refs.confirm_modal.onClose();
        }
    }, {
        key: "resetState",
        value: function resetState(props) {
            var asset = props.asset.toJS();
            var isBitAsset = asset.bitasset_data_id !== undefined;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(asset.precision);
            var corePrecision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(props.core.get("precision"));

            var max_market_fee = new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](asset.options.max_market_fee).div(precision).toString();
            var max_supply = new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](asset.options.max_supply).div(precision).toString();
            var core_exchange_rate = asset.options.core_exchange_rate;
            core_exchange_rate.quote.amount = core_exchange_rate.quote.asset_id === asset.id ? new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](core_exchange_rate.quote.amount).div(precision).toString() : new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](core_exchange_rate.quote.amount).div(corePrecision).toString();

            core_exchange_rate.base.amount = core_exchange_rate.base.asset_id === asset.id ? new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](core_exchange_rate.base.amount).div(precision).toString() : new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](core_exchange_rate.base.amount).div(corePrecision).toString();

            var flagBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlagBooleans(asset.options.flags, isBitAsset);
            var permissionBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlagBooleans(asset.options.issuer_permissions, isBitAsset);
            asset.options.market_fee_percent /= 100;

            var coreRateQuoteAssetName = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.quote.asset_id).get("symbol");
            var coreRateBaseAssetName = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.base.asset_id).get("symbol");

            return {
                update: {
                    max_supply: max_supply,
                    max_market_fee: max_market_fee,
                    market_fee_percent: asset.options.market_fee_percent,
                    description: common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].parseDescription(asset.options.description)
                },
                core_exchange_rate: core_exchange_rate,
                issuer: asset.issuer,
                new_issuer_account_id: null,
                new_funder_account: props.account.get("id"),
                asset_to_update: asset.id,
                errors: {
                    max_supply: null
                },
                new_authority_id: null,
                authority_name: null,
                isValid: true,
                flagBooleans: flagBooleans,
                permissionBooleans: permissionBooleans,
                isBitAsset: isBitAsset,
                coreRateQuoteAssetName: coreRateQuoteAssetName,
                quoteAssetInput: coreRateQuoteAssetName,
                coreRateBaseAssetName: coreRateBaseAssetName,
                baseAssetInput: coreRateBaseAssetName,
                claimFeesAmount: 0,
                bitasset_opts: isBitAsset ? asset.bitasset.options : null,
                original_bitasset_opts: isBitAsset ? props.asset.getIn(["bitasset", "options"]).toJS() : null,
                marketInput: "",
                whitelist_authorities: props.asset.getIn(["options", "whitelist_authorities"]),
                blacklist_authorities: props.asset.getIn(["options", "blacklist_authorities"]),
                whitelist_markets: props.asset.getIn(["options", "whitelist_markets"]),
                blacklist_markets: props.asset.getIn(["options", "blacklist_markets"]),
                maxFeedProducers: props.globalObject.getIn(["parameters", "maximum_asset_feed_publishers"]),
                feedProducers: isBitAsset ? props.asset.getIn(["bitasset", "feeds"], []).map(function (a) {
                    return a.first();
                }) : null,
                originalFeedProducers: isBitAsset ? props.asset.getIn(["bitasset", "feeds"], []).map(function (a) {
                    return a.first();
                }) : null
            };
        }

        // Using JSON.stringify for (fast?) comparsion, could be improved, but seems enough here as the order is fixed

    }, {
        key: "assetChanged",
        value: function assetChanged() {
            var s = this.state;
            var p = this.resetState(this.props);
            return JSON.stringify(s.update) !== JSON.stringify(p.update) || JSON.stringify(s.core_exchange_rate) !== JSON.stringify(p.core_exchange_rate) || s.new_issuer_account_id !== null && s.new_issuer_account_id !== s.issuer || JSON.stringify(s.flagBooleans) !== JSON.stringify(p.flagBooleans) || JSON.stringify(s.permissionBooleans) !== JSON.stringify(p.permissionBooleans) || JSON.stringify(s.whitelist_authorities) !== JSON.stringify(p.whitelist_authorities) || JSON.stringify(s.blacklist_authorities) !== JSON.stringify(p.blacklist_authorities) || JSON.stringify(s.whitelist_markets) !== JSON.stringify(p.whitelist_markets) || JSON.stringify(s.blacklist_markets) !== JSON.stringify(p.blacklist_markets);
        }

        // Return tab ID on change

    }, {
        key: "tabChanged",
        value: function tabChanged(tabId) {
            var tabsChanged = this.tabsChanged();
            return tabsChanged[tabId] ? tabsChanged[tabId] : false;
        }
    }, {
        key: "tabsChanged",
        value: function tabsChanged() {
            var s = this.state;
            var p = this.resetState(this.props);

            var tabUpdateIndex = [];

            /* Primary */
            if (s.update.max_supply !== p.update.max_supply || s.core_exchange_rate.base.amount !== p.core_exchange_rate.base.amount || s.core_exchange_rate.quote.amount !== p.core_exchange_rate.quote.amount) tabUpdateIndex["0"] = true;

            /* Whitelist */
            if (JSON.stringify(s.whitelist_authorities) !== JSON.stringify(p.whitelist_authorities) || JSON.stringify(s.blacklist_authorities) !== JSON.stringify(p.blacklist_authorities) || JSON.stringify(s.whitelist_markets) !== JSON.stringify(p.whitelist_markets) || JSON.stringify(s.blacklist_markets) !== JSON.stringify(p.blacklist_markets)) tabUpdateIndex["1"] = true;

            /* Description */
            if (s.update.description.main !== p.update.description.main || s.update.description.short_name !== p.update.description.short_name || s.update.description.market !== p.update.description.market) tabUpdateIndex["2"] = true;

            /* Bitasset options */
            if (JSON.stringify(s.bitasset_opts) !== JSON.stringify(p.original_bitasset_opts)) tabUpdateIndex["3"] = true;

            /* Permissions */
            if (JSON.stringify(s.permissionBooleans) !== JSON.stringify(p.permissionBooleans)) tabUpdateIndex["4"] = true;

            /* Flags */
            if (JSON.stringify(s.flagBooleans) !== JSON.stringify(p.flagBooleans) || s.update.market_fee_percent !== p.update.market_fee_percent || s.update.max_market_fee !== p.update.max_market_fee) tabUpdateIndex["5"] = true;

            if (JSON.stringify(s.feedProducers) !== JSON.stringify(p.originalFeedProducers)) tabUpdateIndex["6"] = true;

            return tabUpdateIndex;
        }
    }, {
        key: "pageChanged",
        value: function pageChanged() {
            var _state = this.state,
                isBitAsset = _state.isBitAsset,
                bitasset_opts = _state.bitasset_opts,
                original_bitasset_opts = _state.original_bitasset_opts,
                feedProducers = _state.feedProducers,
                originalFeedProducers = _state.originalFeedProducers;

            return this.assetChanged() || isBitAsset && (JSON.stringify(bitasset_opts) !== JSON.stringify(original_bitasset_opts) || !common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].are_equal_shallow(feedProducers.toJS(), originalFeedProducers.toJS()));
        }
    }, {
        key: "_updateAsset",
        value: function _updateAsset(e) {
            var _this2 = this;

            e.preventDefault();

            // Close confirm_modal if it's open
            this.refs.confirm_modal.onClose();

            var _state2 = this.state,
                update = _state2.update,
                issuer = _state2.issuer,
                new_issuer_account_id = _state2.new_issuer_account_id,
                core_exchange_rate = _state2.core_exchange_rate,
                flagBooleans = _state2.flagBooleans,
                permissionBooleans = _state2.permissionBooleans,
                isBitAsset = _state2.isBitAsset,
                bitasset_opts = _state2.bitasset_opts,
                original_bitasset_opts = _state2.original_bitasset_opts,
                feedProducers = _state2.feedProducers,
                originalFeedProducers = _state2.originalFeedProducers;


            var flags = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlags(flagBooleans);

            // Handle incorrect flag from genesis
            if (this.props.asset.getIn(["options", "flags"]) & 128 && !(this.props.asset.getIn(["options", "issuer_permissions"]) & 128)) {
                flags += 128;
            }
            var permissions = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getPermissions(permissionBooleans, isBitAsset);

            if (this.state.marketInput !== update.description.market) {
                update.description.market = "";
            }
            var description = JSON.stringify(update.description);

            var auths = {
                whitelist_authorities: this.state.whitelist_authorities,
                blacklist_authorities: this.state.blacklist_authorities,
                whitelist_markets: this.state.whitelist_markets,
                blacklist_markets: this.state.blacklist_markets
            };

            var feedProducersJS = isBitAsset ? feedProducers.toJS() : null;
            var originalFeedProducersJS = isBitAsset ? originalFeedProducers.toJS() : null;

            actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__["default"].updateAsset(issuer, new_issuer_account_id, update, core_exchange_rate, this.props.asset, flags, permissions, isBitAsset, bitasset_opts, original_bitasset_opts, description, auths, feedProducersJS, originalFeedProducersJS, this.assetChanged()).then(function () {
                console.log("... AssetActions.updateAsset(account_id, update)", issuer, new_issuer_account_id, _this2.props.asset.get("id"), update);
                setTimeout(function () {
                    bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(_this2.props.asset.get("id"));
                    _this2.setState(_this2.resetState(_this2.props));
                }, 3000);
            });
        }
    }, {
        key: "_reset",
        value: function _reset(e) {
            e.preventDefault();

            this.setState(this.resetState(this.props));
        }
    }, {
        key: "_forcePositive",
        value: function _forcePositive(number) {
            return parseFloat(number) < 0 ? "0" : number;
        }
    }, {
        key: "_onUpdateDescription",
        value: function _onUpdateDescription(value, e) {
            var update = this.state.update;

            var updateState = true;

            switch (value) {
                case "condition":
                    if (e.target.value.length > 60) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "short_name":
                    if (e.target.value.length > 32) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "market":
                    update.description[value] = e;
                    break;

                case "visible":
                    update.description[value] = !update.description[value];
                    break;

                default:
                    update.description[value] = e.target.value;
                    break;
            }

            if (updateState) {
                this.forceUpdate();
                this._validateEditFields(update);
            }
        }
    }, {
        key: "onChangeBitAssetOpts",
        value: function onChangeBitAssetOpts(value, e) {
            var bitasset_opts = this.state.bitasset_opts;


            switch (value) {
                case "force_settlement_offset_percent":
                case "maximum_force_settlement_volume":
                    bitasset_opts[value] = parseFloat(e.target.value) * chain_asset_constants__WEBPACK_IMPORTED_MODULE_19___default.a.GRAPHENE_1_PERCENT;
                    break;

                case "feed_lifetime_sec":
                case "force_settlement_delay_sec":
                    console.log(e.target.value, parseInt(parseFloat(e.target.value) * 60, 10));
                    bitasset_opts[value] = parseInt(parseFloat(e.target.value) * 60, 10);
                    break;

                case "short_backing_asset":
                    bitasset_opts[value] = e;
                    break;

                default:
                    break;
            }

            this.forceUpdate();
        }
    }, {
        key: "_onUpdateInput",
        value: function _onUpdateInput(value, e) {
            var update = this.state.update;

            var updateState = true;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(this.props.asset.get("precision"));

            switch (value) {
                case "market_fee_percent":
                    update[value] = this._forcePositive(e.target.value);
                    break;

                case "max_market_fee":
                    var marketFee = e.amount.replace(/,/g, "");
                    if (new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](marketFee).times(precision).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                        updateState = false;
                        return this.setState({
                            errors: {
                                max_market_fee: "The number you tried to enter is too large"
                            }
                        });
                    }
                    update[value] = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(marketFee, this.props.asset.get("precision"));
                    break;

                case "max_supply":
                    var maxSupply = e.amount.replace(/,/g, "");
                    // try {
                    //     if ((new big(maxSupply)).times(Math.pow(10, precision)).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                    //         updateState = false;
                    //         return this.setState({errors: {max_supply: "The number you tried to enter is too large"}});
                    //     }
                    update[value] = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(maxSupply, this.props.asset.get("precision"));
                    // } catch(e) {}
                    break;

                default:
                    update[value] = e.target.value;
                    break;
            }

            if (updateState) {
                this.setState({ update: update });
                this._validateEditFields(update);
            }
        }
    }, {
        key: "_validateEditFields",
        value: function _validateEditFields(new_state) {
            var cer = new_state.core_exchange_rate;
            var feedProducers = new_state.feedProducers ? new_state.feedProducers : this.state.feedProducers;
            var flagBooleans = this.state.flagBooleans;
            var _props = this.props,
                asset = _props.asset,
                core = _props.core;


            var errors = {
                max_supply: null,
                quote_asset: null,
                base_asset: null,
                max_feed_producer: null,
                conflict_producer: null,
                invalid_market_pair: null
            };

            var p = this.props.asset.get("precision");
            try {
                errors.max_supply = new_state.max_supply <= 0 ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.max_positive") : new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](parseInt(new_state.max_supply, 10)).times(Math.pow(10, p)).gt(GRAPHENE_MAX_SHARE_SUPPLY) ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large") : null;
            } catch (err) {
                console.log("err:", err);
                errors.max_supply = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large");
            }

            if (cer) {
                if (cer.quote.asset_id !== asset.get("id") && cer.base.asset_id !== asset.get("id")) {
                    errors.quote_asset = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.need_asset", { name: asset.get("symbol") });
                }

                if (cer.quote.asset_id !== core.get("id") && cer.base.asset_id !== core.get("id")) {
                    errors.base_asset = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.need_asset", { name: core.get("symbol") });
                }
            }
            if (feedProducers) {
                if (feedProducers.size > this.state.maxFeedProducers) {
                    errors.max_feed_producer = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_many_feed", { max: this.state.maxFeedProducers });
                }
            }
            if (flagBooleans.committee_fed_asset && flagBooleans.witness_fed_asset) {
                errors.conflict_producer = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.conflict_feed");
            }

            if (this.state.marketInput == this.props.asset.get("symbol")) {
                errors.invalid_market_pair = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.invalid_market_pair");
            }

            var isValid = !errors.invalid_market_pair && !errors.max_supply && !errors.base_asset && !errors.quote_asset && !errors.max_feed_producer && !errors.conflict_producer;

            this.setState({ isValid: isValid, errors: errors });
        }
    }, {
        key: "_onCoreRateChange",
        value: function _onCoreRateChange(type, amount) {
            amount.amount = amount.amount == "" ? "0" : amount.amount.replace(/,/g, "");

            amount.amount = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(amount.amount, amount.asset.get("precision"));

            var core_exchange_rate = this.state.core_exchange_rate;

            core_exchange_rate[type] = {
                amount: amount.amount,
                asset_id: amount.asset.get("id")
            };
            this.forceUpdate();
        }
    }, {
        key: "onAccountChanged",
        value: function onAccountChanged(key, account) {
            this.setState(_defineProperty({}, key, account ? account.get("id") : null));
        }
    }, {
        key: "onAccountNameChanged",
        value: function onAccountNameChanged(key, name) {
            this.setState(_defineProperty({}, key, name));
        }
    }, {
        key: "_onInputCoreAsset",
        value: function _onInputCoreAsset(type, asset) {
            if (type === "quote") {
                this.setState({
                    quoteAssetInput: asset
                });
            } else if (type === "base") {
                this.setState({
                    baseAssetInput: asset
                });
            }
        }
    }, {
        key: "_onFoundCoreAsset",
        value: function _onFoundCoreAsset(type, asset) {
            if (asset) {
                var core_rate = this.state.core_exchange_rate;
                core_rate[type].asset_id = asset.get("id");

                this.setState({
                    core_exchange_rate: core_rate
                });

                this._validateEditFields({
                    max_supply: this.state.max_supply,
                    core_exchange_rate: core_rate
                });
            }
        }
    }, {
        key: "_onInputMarket",
        value: function _onInputMarket(asset) {
            this.setState({
                marketInput: asset
            });
        }
    }, {
        key: "_onFoundMarketAsset",
        value: function _onFoundMarketAsset(asset) {
            if (asset) {
                this._onUpdateDescription("market", asset.get("symbol"));
            }
        }
    }, {
        key: "_onFlagChange",
        value: function _onFlagChange(key) {
            var booleans = this.state.flagBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                flagBooleans: booleans
            });
            this._validateEditFields({});
        }
    }, {
        key: "_onPermissionChange",
        value: function _onPermissionChange(key) {
            var booleans = this.state.permissionBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                permissionBooleans: booleans
            });
        }
    }, {
        key: "_onClaimInput",
        value: function _onClaimInput(asset) {
            this.setState({
                claimFeesAmount: asset.amount
            });
        }
    }, {
        key: "onChangeList",
        value: function onChangeList(key) {
            var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "add";
            var id = arguments[2];

            var current = this.state[key];
            if (action === "add" && !current.includes(id)) {
                current = current.push(id);
            } else if (action === "remove" && current.includes(id)) {
                current = current.remove(current.indexOf(id));
            }
            this.setState(_defineProperty({}, key, current));
        }
    }, {
        key: "onChangeFeedProducerList",
        value: function onChangeFeedProducerList() {
            var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "add";
            var id = arguments[1];

            var current = this.state.feedProducers;
            if (action === "add" && !current.includes(id)) {
                current = current.push(id);
            } else if (action === "remove" && current.includes(id)) {
                current = current.remove(current.indexOf(id));
            }
            this.setState({ feedProducers: current });
            this._validateEditFields({ feedProducers: current });
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var asset = this.props.asset;
            var _state3 = this.state,
                errors = _state3.errors,
                isValid = _state3.isValid,
                update = _state3.update,
                core_exchange_rate = _state3.core_exchange_rate,
                flagBooleans = _state3.flagBooleans,
                permissionBooleans = _state3.permissionBooleans,
                claimFeesAmount = _state3.claimFeesAmount,
                isBitAsset = _state3.isBitAsset,
                bitasset_opts = _state3.bitasset_opts;

            // Estimate the asset update fee

            var symbol = asset.get("symbol");
            var updateFee = "N/A";

            updateFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedFee__WEBPACK_IMPORTED_MODULE_7__["default"], { opType: "asset_update" });

            var cr_quote_asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.quote.asset_id);
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(cr_quote_asset.get("precision"));
            var cr_base_asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.base.asset_id);
            var basePrecision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(cr_base_asset.get("precision"));

            var cr_quote_amount = parseFloat(core_exchange_rate.quote.amount) * precision;
            var cr_base_amount = parseFloat(core_exchange_rate.base.amount) * basePrecision;
            var originalPermissions = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlagBooleans(asset.getIn(["options", "issuer_permissions"]), asset.get("bitasset") !== undefined);
            // Loop over flags
            var flags = [];
            var getFlag = function getFlag(key, onClick, isChecked) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { key: "table_" + key, className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none", width: "80%" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.user_issued_assets." + key
                                }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "switch",
                                        style: { marginBottom: "10px" },
                                        onClick: onClick
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                        type: "checkbox",
                                        checked: isChecked
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                )
                            )
                        )
                    )
                );
            };

            for (var key in originalPermissions) {
                if (originalPermissions[key] && key !== "charge_market_fee") {
                    flags.push(getFlag(key, this._onFlagChange.bind(this, key), flagBooleans[key]));
                }
            }

            flags.push(getFlag("visible", this._onUpdateDescription.bind(this, "visible"), update.description.visible ? false : update.description.visible === false ? true : false));

            // Loop over permissions
            var permissions = [];
            for (var _key in originalPermissions) {
                if (true) {
                    permissions.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "table",
                        { key: "table_" + _key, className: "table" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tbody",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { border: "none", width: "80%" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        content: "account.user_issued_assets." + _key
                                    }),
                                    ":"
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { border: "none" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        {
                                            className: "switch",
                                            style: { marginBottom: "10px" },
                                            onClick: this._onPermissionChange.bind(this, _key)
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "checkbox",
                                            checked: permissionBooleans[_key],
                                            onChange: function onChange() {}
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                    )
                                )
                            )
                        )
                    ));
                }
            }

            var tabsChangedCount = 0;
            this.tabsChanged().forEach(function () {
                tabsChangedCount++;
            });

            var confirmButtons = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_2___default()("button", {
                            disabled: !isValid || !this.pageChanged()
                        }),
                        style: { width: "9rem" },
                        onClick: tabsChangedCount > 1 ? this._openConfirm.bind(this) : this._updateAsset.bind(this)
                    },
                    tabsChangedCount > 1 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.save_all" }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.save" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_2___default()("button primary hollow", {
                            disabled: !this.pageChanged()
                        }),
                        onClick: this._reset.bind(this)
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.reset" })
                )
            );

            var cerValid = false;

            if ((cr_quote_asset.get("id") === "1.3.0" || cr_base_asset.get("id") === "1.3.0") && (cr_quote_asset.get("id") === asset.get("id") || cr_base_asset.get("id") === asset.get("id"))) {
                cerValid = true;
            }

            var isPredictionMarketAsset = asset.getIn(["bitasset", "is_prediction_market"]);

            var asset_description = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].parseDescription(this.props.asset.toJS().options.description);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "tabs-header" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "h3",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "header.update_asset" }),
                                ":",
                                " ",
                                symbol
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tabs"],
                            {
                                setting: "updateAssetTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "grid-block padding-top shrink small-vertical medium-horizontal",
                                segmented: false,
                                actionButtons: confirmButtons,
                                onChangeTab: function onChangeTab(i) {
                                    _this3.setState({ activeTab: i });
                                }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.primary",
                                    updatedTab: this.tabChanged(0)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.precision" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "span",
                                            null,
                                            ": ",
                                            asset.get("precision")
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                            label: "account.user_issued_assets.max_supply",
                                            amount: update.max_supply,
                                            onChange: this._onUpdateInput.bind(this, "max_supply"),
                                            asset: asset.get("id"),
                                            assets: [asset.get("id")],
                                            placeholder: "0.0",
                                            tabIndex: 1
                                        })
                                    ),
                                    errors.max_supply ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.max_supply
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.core_exchange_rate"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "grid-block no-margin" },
                                            cerValid ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__["default"], {
                                                    label: "account.user_issued_assets.quote_name",
                                                    onChange: this._onInputCoreAsset.bind(this, "quote"),
                                                    asset: this.state.quoteAssetInput,
                                                    assetInput: this.state.quoteAssetInput,
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingRight: "10px"
                                                    },
                                                    onFound: this._onFoundCoreAsset.bind(this, "quote")
                                                })
                                            ),
                                            cerValid ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__["default"], {
                                                    label: "account.user_issued_assets.base_name",
                                                    onChange: this._onInputCoreAsset.bind(this, "base"),
                                                    asset: this.state.baseAssetInput,
                                                    assetInput: this.state.baseAssetInput,
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingLeft: "10px"
                                                    },
                                                    onFound: this._onFoundCoreAsset.bind(this, "base")
                                                })
                                            ),
                                            errors.quote_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.quote_asset
                                            ) : null,
                                            errors.base_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.base_asset
                                            ) : null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                                    label: "account.user_issued_assets.quote",
                                                    amount: core_exchange_rate.quote.amount,
                                                    onChange: this._onCoreRateChange.bind(this, "quote"),
                                                    asset: core_exchange_rate.quote.asset_id,
                                                    assets: [core_exchange_rate.quote.asset_id],
                                                    placeholder: "0.0",
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingRight: "10px"
                                                    }
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                                    label: "account.user_issued_assets.base",
                                                    amount: core_exchange_rate.base.amount,
                                                    onChange: this._onCoreRateChange.bind(this, "base"),
                                                    asset: core_exchange_rate.base.asset_id,
                                                    assets: [core_exchange_rate.base.asset_id],
                                                    placeholder: "0.0",
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingLeft: "10px"
                                                    }
                                                })
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "h5",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "exchange.price" }),
                                                ":",
                                                " ",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_13__["default"], {
                                                    style: { fontWeight: "bold" },
                                                    quote_amount: cr_quote_amount,
                                                    quote_asset: core_exchange_rate.quote.asset_id,
                                                    base_asset: core_exchange_rate.base.asset_id,
                                                    base_amount: cr_base_amount
                                                })
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_1",
                                            component: "label",
                                            className: "has-error"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_2",
                                            component: "p"
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.whitelist.title",
                                    updatedTab: this.tabChanged(1)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    _AssetWhitelist__WEBPACK_IMPORTED_MODULE_20__["default"],
                                    {
                                        whiteListEnabled: flagBooleans["white_list"],
                                        whitelist_authorities: this.state.whitelist_authorities,
                                        blacklist_authorities: this.state.blacklist_authorities,
                                        whitelist_markets: this.state.whitelist_markets,
                                        blacklist_markets: this.state.blacklist_markets,
                                        new_authority_id: this.state.new_authority_id,
                                        authority_name: this.state.authority_name,
                                        onAccountNameChanged: this.onAccountNameChanged.bind(this),
                                        onAccountChanged: this.onAccountChanged.bind(this),
                                        onChangeList: this.onChangeList.bind(this)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.description",
                                    updatedTab: this.tabChanged(2)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                            style: { height: "7rem" },
                                            rows: "1",
                                            value: update.description.main || "",
                                            onChange: this._onUpdateDescription.bind(this, "main")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.short"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            rows: "1",
                                            value: update.description.short_name || "",
                                            onChange: this._onUpdateDescription.bind(this, "short_name")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.market"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__["default"], {
                                        label: "account.user_issued_assets.name",
                                        onChange: this._onInputMarket.bind(this),
                                        placeholder: asset_description.market,
                                        asset: this.state.marketInput,
                                        assetInput: this.state.marketInput,
                                        style: {
                                            width: "100%",
                                            paddingRight: "10px",
                                            paddingBottom: "20px"
                                        },
                                        onFound: this._onFoundMarketAsset.bind(this)
                                    }),
                                    errors.invalid_market_pair ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.invalid_market_pair
                                    ) : null,
                                    isPredictionMarketAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.condition"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "text",
                                                rows: "1",
                                                value: update.description.condition,
                                                onChange: this._onUpdateDescription.bind(this, "condition")
                                            })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.expiry"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "date",
                                                value: update.description.expiry,
                                                onChange: this._onUpdateDescription.bind(this, "expiry")
                                            })
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.bitasset_opts",
                                    updatedTab: this.tabChanged(3)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssetCreate__WEBPACK_IMPORTED_MODULE_18__["BitAssetOptions"], {
                                        bitasset_opts: bitasset_opts,
                                        onUpdate: this.onChangeBitAssetOpts.bind(this),
                                        backingAsset: bitasset_opts.short_backing_asset,
                                        assetPrecision: asset.get("precision"),
                                        assetSymbol: asset.get("symbol")
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ) : null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.permissions",
                                    updatedTab: this.tabChanged(4)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                        path: "components/AccountAssetCreate",
                                        section: "permissions"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.perm_warning" })
                                    ),
                                    permissions,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.flags",
                                    updatedTab: this.tabChanged(5)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                        path: "components/AccountAssetCreate",
                                        section: "flags"
                                    }),
                                    originalPermissions["charge_market_fee"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.market_fee"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "table",
                                            { className: "table" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tbody",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "tr",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        {
                                                            style: {
                                                                border: "none",
                                                                width: "80%"
                                                            }
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.charge_market_fee" }),
                                                        ":"
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        {
                                                            style: {
                                                                border: "none"
                                                            }
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "div",
                                                            {
                                                                className: "switch",
                                                                style: {
                                                                    marginBottom: "10px"
                                                                },
                                                                onClick: this._onFlagChange.bind(this, "charge_market_fee")
                                                            },
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                                type: "checkbox",
                                                                onChange: function onChange() {},
                                                                checked: flagBooleans.charge_market_fee
                                                            }),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                                        )
                                                    )
                                                )
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_2___default()({
                                                    disabled: !flagBooleans.charge_market_fee
                                                })
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.market_fee" }),
                                                " ",
                                                "(%)",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                    type: "number",
                                                    value: update.market_fee_percent,
                                                    onChange: this._onUpdateInput.bind(this, "market_fee_percent")
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                                    label: "account.user_issued_assets.max_market_fee",
                                                    amount: update.max_market_fee,
                                                    onChange: this._onUpdateInput.bind(this, "max_market_fee"),
                                                    asset: asset.get("id"),
                                                    assets: [asset.get("id")],
                                                    placeholder: "0.0",
                                                    tabIndex: 1
                                                })
                                            ),
                                            errors.max_market_fee ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.max_market_fee
                                            ) : null
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "h3",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.flags" })
                                    ),
                                    flags,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    ),
                                    errors.conflict_producer ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.conflict_producer
                                    ) : null
                                )
                            ),
                            isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.feed_producers",
                                    updatedTab: this.tabChanged(6)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AssetFeedProducers__WEBPACK_IMPORTED_MODULE_21__["default"], {
                                    asset: this.props.asset,
                                    account: this.props.account,
                                    witnessFed: flagBooleans["witness_fed_asset"],
                                    committeeFed: flagBooleans["committee_fed_asset"],
                                    producers: this.state.feedProducers,
                                    onChangeList: this.onChangeFeedProducerList.bind(this)
                                }),
                                errors.max_feed_producer ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "p",
                                    {
                                        className: "grid-content has-error large-8 large-offset-2",
                                        style: { marginTop: "20px" }
                                    },
                                    errors.max_feed_producer
                                ) : null
                            ) : null
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ConfirmModal, _extends({
                    modalId: "asset_update_modal",
                    ref: "confirm_modal",
                    tabsChanged: this.tabsChanged(),
                    _cancelConfirm: this._cancelConfirm.bind(this),
                    _updateAsset: this._updateAsset.bind(this)
                }, this.props))
            );
        }
    }]);

    return AccountAssetUpdate;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountAssetUpdate.propTypes = {
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainObject.isRequired
};
AccountAssetUpdate.defaultProps = {
    globalObject: "2.0.0"
};

AccountAssetUpdate = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__["default"])(AccountAssetUpdate);
AccountAssetUpdate = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_11__["default"])(AccountAssetUpdate, {
    propNames: ["asset", "core"],
    defaultProps: {
        core: "1.3.0"
    },
    withDynamic: true
});

var ConfirmModal = function (_React$Component2) {
    _inherits(ConfirmModal, _React$Component2);

    function ConfirmModal() {
        _classCallCheck(this, ConfirmModal);

        var _this4 = _possibleConstructorReturn(this, (ConfirmModal.__proto__ || Object.getPrototypeOf(ConfirmModal)).call(this));

        _this4.state = { open: false };
        return _this4;
    }

    _createClass(ConfirmModal, [{
        key: "show",
        value: function show() {
            var _this5 = this;

            this.setState({ open: true }, function () {
                react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_23___default.a.publish(_this5.props.modalId, "open");
            });
        }
    }, {
        key: "onClose",
        value: function onClose() {
            this.setState({ open: false });
        }
    }, {
        key: "render",
        value: function render() {
            var tabsChanged = this.props.tabsChanged;


            return !this.state.open ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                components_Modal_BaseModal__WEBPACK_IMPORTED_MODULE_22__["default"],
                {
                    id: this.props.modalId,
                    overlay: true,
                    modalHeader: "account.confirm_asset_modal.header",
                    noLogo: true
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                    content: "account.confirm_asset_modal.are_you_sure",
                    component: "div",
                    style: { paddingBottom: "1rem" }
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "ul",
                        null,
                        tabsChanged["0"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.primary" })
                        ) : null,
                        tabsChanged["1"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.whitelist.title" })
                        ) : null,
                        tabsChanged["2"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.description" })
                        ) : null,
                        tabsChanged["3"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.bitasset_opts" })
                        ) : null,
                        tabsChanged["4"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.permissions" })
                        ) : null,
                        tabsChanged["5"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.flags" })
                        ) : null,
                        tabsChanged["6"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.feed_producers" })
                        ) : null
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            className: "button primary",
                            onClick: this.props._updateAsset.bind(this)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "global.confirm" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            className: "button primary hollow",
                            onClick: this.props._cancelConfirm.bind(this)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "global.cancel" })
                    )
                )
            );
        }
    }]);

    return ConfirmModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var AssetUpdateWrapper = function (_React$Component3) {
    _inherits(AssetUpdateWrapper, _React$Component3);

    function AssetUpdateWrapper() {
        _classCallCheck(this, AssetUpdateWrapper);

        return _possibleConstructorReturn(this, (AssetUpdateWrapper.__proto__ || Object.getPrototypeOf(AssetUpdateWrapper)).apply(this, arguments));
    }

    _createClass(AssetUpdateWrapper, [{
        key: "render",
        value: function render() {
            var asset = this.props.match.params.asset;
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountAssetUpdate, _extends({ asset: asset }, this.props));
        }
    }]);

    return AssetUpdateWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_24__["withRouter"])(AssetUpdateWrapper));

/***/ }),

/***/ 2540:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _FormattedAsset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1969);
/* harmony import */ var _ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1832);
/* harmony import */ var _BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1833);
/* harmony import */ var common_trxHelper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(572);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








/**
 *
 *  Given an operation type, displays the CORE fee for that operation
 *
 */

var FormattedFee = function (_React$Component) {
    _inherits(FormattedFee, _React$Component);

    function FormattedFee() {
        _classCallCheck(this, FormattedFee);

        return _possibleConstructorReturn(this, (FormattedFee.__proto__ || Object.getPrototypeOf(FormattedFee)).apply(this, arguments));
    }

    _createClass(FormattedFee, [{
        key: "getFee",
        value: function getFee() {
            // Return fee via refs
            return Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_5__["estimateFee"])(this.props.opType, this.props.options, this.props.globalObject);
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                opType = _props.opType,
                options = _props.options,
                globalObject = _props.globalObject;


            if (!opType || !options || !globalObject) {
                return null;
            }

            var amount = Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_5__["estimateFee"])(opType, options, globalObject);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], { amount: amount, asset: "1.3.0" });
        }
    }]);

    return FormattedFee;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

FormattedFee.propTypes = {
    globalObject: _ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired,
    opType: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,
    options: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.array
};
FormattedFee.defaultProps = {
    globalObject: "2.0.0",
    options: []
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(FormattedFee));

/***/ }),

/***/ 2541:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2303);
/* harmony import */ var _Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2304);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(774);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2189);
/* harmony import */ var _Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2453);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(931);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(760);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(701);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(702);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }













var AssetWhitelist = function (_React$Component) {
    _inherits(AssetWhitelist, _React$Component);

    function AssetWhitelist(props) {
        _classCallCheck(this, AssetWhitelist);

        var _this = _possibleConstructorReturn(this, (AssetWhitelist.__proto__ || Object.getPrototypeOf(AssetWhitelist)).call(this));

        _this.state = {
            listType: props.assetWhiteListType,
            accountTable: props.assetWhiteListType.indexOf("market") === -1,
            listTypes: ["whitelist_authorities", "blacklist_authorities", "whitelist_markets", "blacklist_markets"],
            assetInput: null,
            asset_id: null
        };
        return _this;
    }

    _createClass(AssetWhitelist, [{
        key: "renderAccountTables",
        value: function renderAccountTables() {
            var _this2 = this;

            var listType = this.state.listType;


            if (!this.props.whiteListEnabled) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, {
                    className: "txtlabel cancel",
                    component: "p",
                    content: "explorer.asset.whitelist.enable_flag"
                })
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "explorer.account.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "account.perm.remove_text" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        this.props[listType].map(function (a) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                { key: a },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_1__["default"], { account: a })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    {
                                        className: "clickable",
                                        onClick: _this2.props.onChangeList.bind(_this2, listType, "remove", a)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                        name: "cross-circle",
                                        title: "icons.cross_circle.remove",
                                        className: "icon-14px"
                                    })
                                )
                            );
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        label: "account.whitelist." + listType,
                        accountName: this.props.authority_name,
                        account: this.props.authority_name,
                        onChange: this.props.onAccountNameChanged.bind(this, "authority_name"),
                        onAccountChanged: this.props.onAccountChanged.bind(this, "new_authority_id"),
                        error: null,
                        tabIndex: 1,
                        action_label: "account.perm.confirm_add",
                        onAction: this.props.onChangeList.bind(this, listType, "add", this.props.new_authority_id)
                    })
                )
            );
        }
    }, {
        key: "_onAssetChange",
        value: function _onAssetChange(asset) {
            this.setState({
                assetInput: asset
            });
        }
    }, {
        key: "_onAssetFound",
        value: function _onAssetFound(asset) {
            this.setState({
                asset_id: asset ? asset.get("id") : null
            });
        }
    }, {
        key: "renderMarketTable",
        value: function renderMarketTable() {
            var _this3 = this;

            var listType = this.state.listType;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "explorer.asset.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "account.perm.remove_text" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        this.props[listType].map(function (a) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                { key: a },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_2__["default"], { asset: a })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    {
                                        className: "clickable",
                                        onClick: _this3.props.onChangeList.bind(_this3, listType, "remove", a)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                        name: "cross-circle",
                                        title: "icons.cross_circle.remove",
                                        className: "icon-14px"
                                    })
                                )
                            );
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_5__["default"], {
                        label: "explorer.asset.whitelist." + listType,
                        onChange: this._onAssetChange.bind(this),
                        asset: this.state.assetInput,
                        assetInput: this.state.assetInput,
                        tabIndex: 1,
                        style: { width: "100%" },
                        onFound: this._onAssetFound.bind(this),
                        action_label: "account.perm.confirm_add",
                        onAction: this.props.onChangeList.bind(this, listType, "add", this.state.asset_id)
                    })
                )
            );
        }
    }, {
        key: "_onSwitchType",
        value: function _onSwitchType(type) {
            this.setState({
                listType: type,
                accountTable: type.indexOf("market") === -1
            });
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeViewSetting({
                assetWhiteListType: type
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var accountTable = this.state.accountTable;

            var activeIndex = this.state.listTypes.indexOf(this.state.listType);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "small-12 large-8 large-offset-2 grid-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "header-selector",
                            style: { paddingBottom: "2rem" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "selector" },
                            this.state.listTypes.map(function (type, index) {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        key: type,
                                        className: classnames__WEBPACK_IMPORTED_MODULE_6___default()("inline-block", {
                                            inactive: activeIndex !== index
                                        }),
                                        onClick: _this4._onSwitchType.bind(_this4, type)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, {
                                        content: "explorer.asset.whitelist." + type
                                    })
                                );
                            })
                        )
                    ),
                    accountTable ? this.renderAccountTables() : this.renderMarketTable(),
                    this.props.children
                )
            );
        }
    }]);

    return AssetWhitelist;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(alt_react__WEBPACK_IMPORTED_MODULE_8__["connect"])(AssetWhitelist, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__["default"]];
    },
    getProps: function getProps() {
        return {
            assetWhiteListType: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__["default"].getState().viewSettings.get("assetWhiteListType", "whitelist_authorities")
        };
    }
}));

/***/ }),

/***/ 2542:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2258);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2189);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2303);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(774);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








var AccountFeedProducers = function (_React$Component) {
    _inherits(AccountFeedProducers, _React$Component);

    function AccountFeedProducers(props) {
        _classCallCheck(this, AccountFeedProducers);

        var _this = _possibleConstructorReturn(this, (AccountFeedProducers.__proto__ || Object.getPrototypeOf(AccountFeedProducers)).call(this, props));

        _this.state = {
            producer_name: null
        };
        return _this;
    }

    _createClass(AccountFeedProducers, [{
        key: "onAccountChanged",
        value: function onAccountChanged(account) {
            this.setState({
                new_producer_id: account ? account.get("id") : null
            });
        }
    }, {
        key: "onAccountNameChanged",
        value: function onAccountNameChanged(name) {
            this.setState({
                producer_name: name
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var _props = this.props,
                witnessFed = _props.witnessFed,
                committeeFed = _props.committeeFed;


            if (witnessFed || committeeFed) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-content small-12 large-8 large-offset-2" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                        component: "p",
                        content: "account.user_issued_assets.feed_not_allowed_1",
                        className: "has-error"
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                        component: "p",
                        content: "account.user_issued_assets.feed_not_allowed_2"
                    })
                );
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content small-12 large-8 large-offset-2" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { textAlign: "left" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.account.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.perm.remove_text" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        this.props.producers.map(function (a, i) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                { key: a },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { textAlign: "left" } },
                                    "#",
                                    i + 1
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { textAlign: "left" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_3__["default"], { account: a })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    {
                                        className: "clickable",
                                        onClick: _this2.props.onChangeList.bind(_this2, "remove", a)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                        name: "cross-circle",
                                        title: "icons.cross_circle.remove",
                                        className: "icon-14px"
                                    })
                                )
                            );
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        label: "account.user_issued_assets.add_feed",
                        accountName: this.state.producer_name,
                        account: this.state.producer_name,
                        onChange: this.onAccountNameChanged.bind(this),
                        onAccountChanged: this.onAccountChanged.bind(this),
                        error: null,
                        tabIndex: 1,
                        action_label: "account.perm.confirm_add",
                        onAction: this.props.onChangeList.bind(this, "add", this.state.new_producer_id)
                    })
                )
            );
        }
    }]);

    return AccountFeedProducers;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountFeedProducers);

/***/ }),

/***/ 2543:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(716);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(407);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1832);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1833);
/* harmony import */ var _Statistics__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2544);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(556);
/* harmony import */ var _Utility_TimeAgo__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2332);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2016);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(557);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2515);
/* harmony import */ var branding__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(560);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
















var FeeHelp = function (_React$Component) {
    _inherits(FeeHelp, _React$Component);

    function FeeHelp() {
        _classCallCheck(this, FeeHelp);

        return _possibleConstructorReturn(this, (FeeHelp.__proto__ || Object.getPrototypeOf(FeeHelp)).apply(this, arguments));
    }

    _createClass(FeeHelp, [{
        key: "render",
        value: function render() {
            var dprops = this.props.dprops;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_9__["default"], _extends({}, this.props, {
                path: "components/AccountMembership",
                section: "fee-division",
                nextMaintenanceTime: {
                    time: dprops.get("next_maintenance_time")
                }
            }));
        }
    }]);

    return FeeHelp;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

FeeHelp.propTypes = {
    dprops: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainObject.isRequired
};
FeeHelp.defaultProps = {
    dprops: "2.1.0"
};

FeeHelp = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(FeeHelp);

var AccountMembership = function (_React$Component2) {
    _inherits(AccountMembership, _React$Component2);

    function AccountMembership() {
        _classCallCheck(this, AccountMembership);

        return _possibleConstructorReturn(this, (AccountMembership.__proto__ || Object.getPrototypeOf(AccountMembership)).apply(this, arguments));
    }

    _createClass(AccountMembership, [{
        key: "upgradeAccount",
        value: function upgradeAccount(id, lifetime, e) {
            e.preventDefault();
            actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__["default"].upgradeAccount(id, lifetime);
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            common_account_utils__WEBPACK_IMPORTED_MODULE_10__["default"].getFinalFeeAsset(this.props.account, "account_upgrade");
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                gprops = _props.gprops,
                core_asset = _props.core_asset;


            var account = this.props.account.toJS();

            var ltr = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccount(account.lifetime_referrer, false);
            if (ltr) account.lifetime_referrer_name = ltr.get("name");
            var ref = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccount(account.referrer, false);
            if (ref) account.referrer_name = ref.get("name");
            var reg = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccount(account.registrar, false);
            if (reg) account.registrar_name = reg.get("name");

            var account_name = account.name;

            var network_fee = account.network_fee_percentage / 100;
            var lifetime_fee = account.lifetime_referrer_fee_percentage / 100;
            var referrer_total_fee = 100 - network_fee - lifetime_fee;
            var referrer_fee = referrer_total_fee * account.referrer_rewards_percentage / 10000;
            var registrar_fee = 100 - referrer_fee - lifetime_fee - network_fee;

            var lifetime_cost = gprops.getIn(["parameters", "current_fees", "parameters", 8, 1, "membership_lifetime_fee"]) * gprops.getIn(["parameters", "current_fees", "scale"]) / 10000;

            var member_status = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccountMemberStatus(this.props.account);
            var membership = "account.member." + member_status;
            var expiration = null;
            if (member_status === "annual") expiration = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                "(",
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.expires" }),
                " ",
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TimeAgo__WEBPACK_IMPORTED_MODULE_8__["default"], { time: account.membership_expiration_date }),
                ")"
            );
            var expiration_date = account.membership_expiration_date;
            if (expiration_date === "1969-12-31T23:59:59") expiration_date = "Never";else if (expiration_date === "1970-01-01T00:00:00") expiration_date = "N/A";

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tabs"],
                            {
                                segmented: false,
                                setting: "membershipTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.member.membership" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "h3",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: membership }),
                                    " ",
                                    expiration
                                ),
                                member_status === "lifetime" ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "large-6 medium-8" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_9__["default"], {
                                            path: "components/AccountMembership",
                                            section: "lifetime",
                                            feesCashback: 100 - network_fee,
                                            price: {
                                                amount: lifetime_cost,
                                                asset: core_asset
                                            }
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: "button no-margin",
                                                onClick: this.upgradeAccount.bind(this, account.id, true)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.upgrade_lifetime" })
                                        ),
                                        " ",
                                        "\xA0 \xA0",
                                         true ? null : undefined
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("hr", null)
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block no-margin" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "no-margin grid-block vertical large-horizontal" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "no-margin grid-block large-5" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-content" },
                                                member_status === "lifetime" ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "h4",
                                                        null,
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.referral_link" })
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                                        content: "account.member.referral_text",
                                                        wallet_name: Object(branding__WEBPACK_IMPORTED_MODULE_12__["getWalletName"])()
                                                    }),
                                                    ":",
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "h5",
                                                        null,
                                                        Object(branding__WEBPACK_IMPORTED_MODULE_12__["getWalletURL"])() + ("/?r=" + account.name)
                                                    )
                                                ) : null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "h4",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.fee_allocation" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "table",
                                                    { className: "table key-value-table" },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "tbody",
                                                        null,
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.network_percentage" })
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                network_fee,
                                                                "%"
                                                            )
                                                        ),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.lifetime_referrer" }),
                                                                " ",
                                                                "\xA0 (",
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                                                                    {
                                                                        to: "account/" + account.lifetime_referrer_name
                                                                    },
                                                                    account.lifetime_referrer_name
                                                                ),
                                                                ")"
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                lifetime_fee,
                                                                "%"
                                                            )
                                                        ),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.registrar" }),
                                                                " ",
                                                                "\xA0 (",
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                                                                    {
                                                                        to: "account/" + account.registrar_name
                                                                    },
                                                                    account.registrar_name
                                                                ),
                                                                ")"
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                registrar_fee,
                                                                "%"
                                                            )
                                                        ),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.referrer" }),
                                                                " ",
                                                                "\xA0 (",
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                                                                    {
                                                                        to: "account/" + account.referrer_name
                                                                    },
                                                                    account.referrer_name
                                                                ),
                                                                ")"
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                referrer_fee,
                                                                "%"
                                                            )
                                                        ),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.membership_expiration" }),
                                                                " "
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                expiration_date
                                                            )
                                                        )
                                                    )
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "h4",
                                                    {
                                                        style: { paddingTop: "1rem" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.fees_cashback" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "table",
                                                    { className: "table key-value-table" },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Statistics__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                                        stat_object: account.statistics
                                                    })
                                                )
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "grid-block large-7" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-content" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FeeHelp, {
                                                    account: account_name,
                                                    networkFee: network_fee,
                                                    referrerFee: referrer_fee,
                                                    registrarFee: registrar_fee,
                                                    lifetimeFee: lifetime_fee,
                                                    referrerTotalFee: referrer_total_fee,
                                                    maintenanceInterval: gprops.getIn(["parameters", "maintenance_interval"]),
                                                    vestingThreshold: {
                                                        amount: gprops.getIn(["parameters", "cashback_vesting_threshold"]),
                                                        asset: core_asset
                                                    },
                                                    vestingPeriod: gprops.getIn(["parameters", "cashback_vesting_period_seconds"]) / 60 / 60 / 24
                                                })
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountMembership;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountMembership.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccount.isRequired,
    gprops: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainObject.isRequired,
    core_asset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAsset.isRequired
};
AccountMembership.defaultProps = {
    gprops: "2.0.0",
    core_asset: "1.3.0"
};

AccountMembership = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(AccountMembership);

/* harmony default export */ __webpack_exports__["default"] = (AccountMembership);

/***/ }),

/***/ 2544:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1969);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1832);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1833);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }







var Statistics = function (_React$Component) {
    _inherits(Statistics, _React$Component);

    function Statistics() {
        _classCallCheck(this, Statistics);

        return _possibleConstructorReturn(this, (Statistics.__proto__ || Object.getPrototypeOf(Statistics)).apply(this, arguments));
    }

    _createClass(Statistics, [{
        key: "render",
        value: function render() {
            var stat_object = this.props.stat_object.toJS();
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tbody",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.fees_paid" }),
                        " "
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], {
                            amount: parseFloat(stat_object.lifetime_fees_paid),
                            asset: "1.3.0"
                        })
                    )
                )
            );
        }
    }]);

    return Statistics;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

Statistics.propTypes = {
    stat_object: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(Statistics));

/***/ }),

/***/ 2545:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1969);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(407);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(558);
/* harmony import */ var actions_WalletActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(713);
/* harmony import */ var bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(476);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2515);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }










var VestingBalance = function (_React$Component) {
    _inherits(VestingBalance, _React$Component);

    function VestingBalance() {
        _classCallCheck(this, VestingBalance);

        return _possibleConstructorReturn(this, (VestingBalance.__proto__ || Object.getPrototypeOf(VestingBalance)).apply(this, arguments));
    }

    _createClass(VestingBalance, [{
        key: "_onClaim",
        value: function _onClaim(claimAll, e) {
            var _this2 = this;

            e.preventDefault();
            actions_WalletActions__WEBPACK_IMPORTED_MODULE_5__["default"].claimVestingBalance(this.props.account.id, this.props.vb, claimAll).then(function () {
                typeof _this2.props.handleChanged == "function" && _this2.props.handleChanged();
            });
        }
    }, {
        key: "render",
        value: function render() {
            var vb = this.props.vb;

            if (!this.props.vb) {
                return null;
            }

            var cvbAsset = void 0,
                vestingPeriod = void 0,
                earned = void 0,
                secondsPerDay = 60 * 60 * 24,
                availablePercent = void 0,
                balance = void 0;
            if (vb) {
                balance = vb.balance.amount;
                cvbAsset = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAsset(vb.balance.asset_id);
                earned = vb.policy[1].coin_seconds_earned;
                vestingPeriod = vb.policy[1].vesting_seconds;
                availablePercent = vestingPeriod === 0 || vb.balance_type == "market_fee_sharing" ? 1 : earned / (vestingPeriod * balance);
            }

            if (!cvbAsset) {
                return null;
            }

            if (!balance) {
                return null;
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                    component: "h5",
                    content: "account.vesting.balance_number",
                    id: vb.id
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table key-value-table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.cashback" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], {
                                    amount: vb.balance.amount,
                                    asset: vb.balance.asset_id
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.earned" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_amount(earned / secondsPerDay, cvbAsset), 0),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.coindays" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.required" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_amount(vb.balance.amount * vestingPeriod / secondsPerDay, cvbAsset), 0),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.coindays" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.remaining" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(vestingPeriod * (1 - availablePercent) / secondsPerDay || 0, 2),
                                "\xA0days"
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.available" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(availablePercent * 100, 2),
                                "% /",
                                " ",
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], {
                                    amount: availablePercent * vb.balance.amount,
                                    asset: cvbAsset.get("id")
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { colSpan: "2", style: { textAlign: "right" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "button",
                                    {
                                        onClick: this._onClaim.bind(this, false),
                                        className: "button"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.claim" })
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return VestingBalance;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var AccountVesting = function (_React$Component2) {
    _inherits(AccountVesting, _React$Component2);

    function AccountVesting() {
        _classCallCheck(this, AccountVesting);

        var _this3 = _possibleConstructorReturn(this, (AccountVesting.__proto__ || Object.getPrototypeOf(AccountVesting)).call(this));

        _this3.state = {
            vbs: null
        };
        return _this3;
    }

    _createClass(AccountVesting, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this.retrieveVestingBalances.call(this, this.props.account.get("id"));
        }
    }, {
        key: "componentWillUpdate",
        value: function componentWillUpdate(nextProps) {
            var newId = nextProps.account.get("id");
            var oldId = this.props.account.get("id");

            if (newId !== oldId) {
                this.retrieveVestingBalances.call(this, newId);
            }
        }
    }, {
        key: "retrieveVestingBalances",
        value: function retrieveVestingBalances(accountId) {
            var _this4 = this;

            accountId = accountId || this.props.account.get("id");
            bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_6__["Apis"].instance().db_api().exec("get_vesting_balances", [accountId]).then(function (vbs) {
                _this4.setState({ vbs: vbs });
            }).catch(function (err) {
                console.log("error:", err);
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this5 = this;

            var vbs = this.state.vbs;

            if (!vbs || !this.props.account || !this.props.account.get("vesting_balances")) {
                return null;
            }

            var account = this.props.account.toJS();

            var balances = vbs.map(function (vb) {
                if (vb.balance.amount) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(VestingBalance, {
                        key: vb.id,
                        vb: vb,
                        account: account,
                        handleChanged: _this5.retrieveVestingBalances.bind(_this5)
                    });
                }
            }).filter(function (a) {
                return !!a;
            });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_7__["Tabs"],
                            {
                                segmented: false,
                                setting: "vestingTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_7__["Tab"],
                                { title: "account.vesting.title" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.vesting.explain",
                                    component: "p"
                                }),
                                !balances.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "h4",
                                    { style: { paddingTop: "1rem" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        content: "account.vesting.no_balances"
                                    })
                                ) : balances
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountVesting;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountVesting.VestingBalance = VestingBalance;
/* harmony default export */ __webpack_exports__["default"] = (AccountVesting);

/***/ }),

/***/ 2546:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(558);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(557);
/* harmony import */ var api_ApplicationApi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(578);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(407);
/* harmony import */ var _AccountPermissionsList__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2547);
/* harmony import */ var _AccountPermissionsMigrate__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2551);
/* harmony import */ var _Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2552);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2515);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2016);
/* harmony import */ var _RecentTransactions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2553);
/* harmony import */ var actions_NotificationActions__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(580);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

















var AccountPermissions = function (_React$Component) {
    _inherits(AccountPermissions, _React$Component);

    function AccountPermissions(props) {
        _classCallCheck(this, AccountPermissions);

        var _this = _possibleConstructorReturn(this, (AccountPermissions.__proto__ || Object.getPrototypeOf(AccountPermissions)).call(this, props));

        _this.state = {};
        _this.onPublish = _this.onPublish.bind(_this);
        _this.onReset = _this.onReset.bind(_this);
        return _this;
    }

    _createClass(AccountPermissions, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this.updateAccountData(this.props.account);
            common_account_utils__WEBPACK_IMPORTED_MODULE_5__["default"].getFinalFeeAsset(this.props.account, "account_update");
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            if (nextProps.account !== this.props.account) this.updateAccountData(nextProps.account);
        }
    }, {
        key: "permissionsFromImmutableObj",
        value: function permissionsFromImmutableObj(auths) {
            var threshold = auths.get("weight_threshold");
            var account_auths = auths.get("account_auths");
            var key_auths = auths.get("key_auths");
            var address_auths = auths.get("address_auths");

            var accounts = account_auths.map(function (a) {
                return a.get(0);
            });
            var keys = key_auths.map(function (a) {
                return a.get(0);
            });
            var addresses = address_auths.map(function (a) {
                return a.get(0);
            });

            var weights = account_auths.reduce(function (res, a) {
                res[a.get(0)] = a.get(1);
                return res;
            }, {});
            weights = key_auths.reduce(function (res, a) {
                res[a.get(0)] = a.get(1);
                return res;
            }, weights);
            weights = address_auths.reduce(function (res, a) {
                res[a.get(0)] = a.get(1);
                return res;
            }, weights);

            return { threshold: threshold, accounts: accounts, keys: keys, addresses: addresses, weights: weights };
        }
    }, {
        key: "permissionsToJson",
        value: function permissionsToJson(threshold, accounts, keys, addresses, weights) {
            var res = { weight_threshold: threshold };
            res["account_auths"] = accounts.sort(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].sortID).map(function (a) {
                return [a, weights[a]];
            }).toJS();
            res["key_auths"] = keys.sort(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].sortID).map(function (a) {
                return [a, weights[a]];
            }).toJS();
            res["address_auths"] = addresses.sort(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].sortID).map(function (a) {
                return [a, weights[a]];
            }).toJS();
            return res;
        }
    }, {
        key: "updateAccountData",
        value: function updateAccountData(account) {
            var active = this.permissionsFromImmutableObj(account.get("active"));
            var owner = this.permissionsFromImmutableObj(account.get("owner"));
            var memo_key = account.get("options").get("memo_key");
            var state = {
                active_accounts: active.accounts,
                active_keys: active.keys,
                active_addresses: active.addresses,
                owner_accounts: owner.accounts,
                owner_keys: owner.keys,
                owner_addresses: owner.addresses,
                active_weights: active.weights,
                owner_weights: owner.weights,
                active_threshold: active.threshold,
                owner_threshold: owner.threshold,
                memo_key: memo_key,
                prev_active_accounts: active.accounts,
                prev_active_keys: active.keys,
                prev_active_addresses: active.addresses,
                prev_owner_accounts: owner.accounts,
                prev_owner_keys: owner.keys,
                prev_owner_addresses: owner.addresses,
                prev_active_weights: active.weights,
                prev_owner_weights: owner.weights,
                prev_active_threshold: active.threshold,
                prev_owner_threshold: owner.threshold,
                prev_memo_key: memo_key
            };
            this.setState(state);
        }
    }, {
        key: "isChanged",
        value: function isChanged() {
            var s = this.state;
            return s.active_accounts !== s.prev_active_accounts || s.active_keys !== s.prev_active_keys || s.active_addresses !== s.prev_active_addresses || s.owner_accounts !== s.prev_owner_accounts || s.owner_keys !== s.prev_owner_keys || s.owner_addresses !== s.prev_owner_addresses || s.active_threshold !== s.prev_active_threshold || s.owner_threshold !== s.prev_owner_threshold || s.memo_key !== s.prev_memo_key;
        }
    }, {
        key: "didChange",
        value: function didChange(type) {
            var s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state;

            if (type === "memo") {
                return s.memo_key !== s.prev_memo_key;
            }
            var didChange = false;
            ["_keys", "_active_addresses", "_accounts", "_threshold"].forEach(function (key) {
                var current = type + key;
                if (s[current] !== s["prev_" + current]) {
                    didChange = true;
                }
            });
            return didChange;
        }
    }, {
        key: "onPublish",
        value: function onPublish() {
            var s = this.state;
            var updated_account = this.props.account.toJS();

            // Set fee asset
            updated_account.fee = {
                amount: 0,
                asset_id: common_account_utils__WEBPACK_IMPORTED_MODULE_5__["default"].getFinalFeeAsset(updated_account.id, "account_update")
            };

            var updateObject = {
                account: updated_account.id
            };

            if (this.didChange("active")) {
                updateObject.active = this.permissionsToJson(s.active_threshold, s.active_accounts, s.active_keys, s.active_addresses, s.active_weights);
            }
            if (this.didChange("owner")) {
                updateObject.owner = this.permissionsToJson(s.owner_threshold, s.owner_accounts, s.owner_keys, s.owner_addresses, s.owner_weights);
            }
            if (this.didChange("owner") && s.owner_keys.size === 0 && s.owner_addresses.size === 0 && s.owner_accounts.size === 1 && s.owner_accounts.first() === updated_account.id) {
                return actions_NotificationActions__WEBPACK_IMPORTED_MODULE_14__["default"].addNotification({
                    message: "Setting your owner permissions like this will render your account permanently unusable. Please make sure you know what you're doing before modifying account authorities!",
                    level: "error",
                    autoDismiss: 10
                });
            }
            if (s.memo_key && this.didChange("memo") && this.isValidPubKey(s.memo_key)) {
                updateObject.new_options = this.props.account.get("options").toJS();
                updateObject.new_options.memo_key = s.memo_key;
            }

            // console.log("-- AccountPermissions.onPublish -->", updateObject, s.memo_key);
            api_ApplicationApi__WEBPACK_IMPORTED_MODULE_6__["default"].updateAccount(updateObject);
        }
    }, {
        key: "isValidPubKey",
        value: function isValidPubKey(value) {
            return !!bitsharesjs__WEBPACK_IMPORTED_MODULE_7__["PublicKey"].fromPublicKeyString(value);
        }
    }, {
        key: "onReset",
        value: function onReset() {
            var s = this.state;
            this.setState({
                active_accounts: s.prev_active_accounts,
                active_keys: s.prev_active_keys,
                active_addresses: s.prev_active_addresses,
                owner_accounts: s.prev_owner_accounts,
                owner_keys: s.prev_owner_keys,
                owner_addresses: s.prev_owner_addresses,
                active_weights: s.prev_active_weights,
                owner_weights: s.prev_owner_weights,
                active_threshold: s.prev_active_threshold,
                owner_threshold: s.prev_owner_threshold,
                memo_key: s.prev_memo_key
            });
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(collection, item_value, weight) {
            var state = {};
            var list = collection + (common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].is_object_id(item_value) ? "_accounts" : "_keys");
            state[list] = this.state[list].push(item_value);
            this.state[collection + "_weights"][item_value] = weight;
            this.setState(state);
        }
    }, {
        key: "onRemoveItem",
        value: function onRemoveItem(collection, item_value, listSuffix) {
            console.log("onRemoveItem", collection, item_value, listSuffix);
            var state = {};
            var list = collection + listSuffix;

            state[list] = this.state[list].filter(function (i) {
                return i !== item_value;
            });
            this.setState(state);
        }
    }, {
        key: "onThresholdChanged",
        value: function onThresholdChanged(var_name, event) {
            var value = parseInt(event.target.value.trim());
            var state = {};
            state[var_name] = value;
            this.setState(state);
        }
    }, {
        key: "validateAccount",
        value: function validateAccount(collection, account) {
            return null;
        }
    }, {
        key: "sumUpWeights",
        value: function sumUpWeights(accounts, keys, addresses, weights) {
            var sum = accounts.reduce(function (sum, a) {
                return sum + weights[a];
            }, 0);
            sum = keys.reduce(function (sum, a) {
                return sum + weights[a];
            }, sum);
            return addresses.reduce(function (sum, a) {
                return sum + weights[a];
            }, sum);
        }
    }, {
        key: "onMemoKeyChanged",
        value: function onMemoKeyChanged(memo_key) {
            this.setState({ memo_key: memo_key });
        }
    }, {
        key: "onSetPasswordKeys",
        value: function onSetPasswordKeys(keys) {
            var roles = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ["active", "owner", "memo"];

            var newState = {};

            roles.forEach(function (role) {
                newState["password_" + role] = keys[role];
            });

            this.setState(newState);
        }
    }, {
        key: "render",
        value: function render() {
            var error1 = void 0,
                error2 = void 0;

            var _state = this.state,
                active_accounts = _state.active_accounts,
                active_keys = _state.active_keys,
                active_addresses = _state.active_addresses,
                active_weights = _state.active_weights;
            var _state2 = this.state,
                owner_accounts = _state2.owner_accounts,
                owner_keys = _state2.owner_keys,
                owner_addresses = _state2.owner_addresses,
                owner_weights = _state2.owner_weights;


            var threshold = this.state.active_threshold > 0 ? this.state.active_threshold : 0;
            var weights_total = this.sumUpWeights(active_accounts, active_keys, active_addresses, active_weights);
            if (this.didChange("active") && weights_total < threshold) error1 = counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.warning1", {
                weights_total: weights_total,
                threshold: threshold
            });

            threshold = this.state.owner_threshold > 0 ? this.state.owner_threshold : 0;
            weights_total = this.sumUpWeights(owner_accounts, owner_keys, owner_addresses, owner_weights);
            if (this.didChange("owner") && weights_total < threshold) error2 = counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.warning2", {
                weights_total: weights_total,
                threshold: threshold
            });

            var publish_buttons_class = "button" + (!(error1 || error2) && this.isChanged() && this.isValidPubKey(this.state.memo_key) ? "" : " disabled");
            var reset_buttons_class = "button" + (this.isChanged() ? "" : " disabled");

            var accountsList = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set();
            accountsList = accountsList.add(this.props.account.get("id"));

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tabs"],
                            {
                                defaultActiveTab: 1,
                                segmented: false,
                                setting: "permissionsTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding",
                                actionButtons: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "action-buttons" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "button",
                                        {
                                            className: reset_buttons_class,
                                            onClick: this.onReset,
                                            tabIndex: 8
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.reset" })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "button",
                                        {
                                            className: publish_buttons_class,
                                            onClick: this.onPublish,
                                            tabIndex: 9
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.publish" })
                                    )
                                )
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.perm.active" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_12__["default"], { path: "components/AccountPermActive" }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "form",
                                    { className: "threshold" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        { className: "horizontal" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.threshold" }),
                                        " ",
                                        "\xA0 \xA0",
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "number",
                                            placeholder: "0",
                                            size: "5",
                                            value: this.state.active_threshold,
                                            onChange: this.onThresholdChanged.bind(this, "active_threshold"),
                                            autoComplete: "off",
                                            tabIndex: 1
                                        })
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissionsList__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                    label: "account.perm.add_permission_label",
                                    accounts: active_accounts,
                                    keys: active_keys,
                                    weights: active_weights,
                                    addresses: active_addresses,
                                    validateAccount: this.validateAccount.bind(this, "active"),
                                    onAddItem: this.onAddItem.bind(this, "active"),
                                    onRemoveItem: this.onRemoveItem.bind(this, "active"),
                                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.account_name_or_key"),
                                    tabIndex: 2
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                error1 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block has-error" },
                                    error1
                                ) : null
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.perm.owner" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_12__["default"], { path: "components/AccountPermOwner" }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "form",
                                    { className: "threshold" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        { className: "horizontal" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.threshold" }),
                                        " ",
                                        "\xA0 \xA0",
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "number",
                                            placeholder: "0",
                                            size: "5",
                                            value: this.state.owner_threshold,
                                            onChange: this.onThresholdChanged.bind(this, "owner_threshold"),
                                            autoComplete: "off",
                                            tabIndex: 4
                                        })
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissionsList__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                    label: "account.perm.add_permission_label",
                                    accounts: owner_accounts,
                                    keys: owner_keys,
                                    weights: owner_weights,
                                    addresses: owner_addresses,
                                    validateAccount: this.validateAccount.bind(this, "owner"),
                                    onAddItem: this.onAddItem.bind(this, "owner"),
                                    onRemoveItem: this.onRemoveItem.bind(this, "owner"),
                                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.account_name_or_key"),
                                    tabIndex: 5
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                error2 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block has-error" },
                                    error2
                                ) : null
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.perm.memo_key" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                    style: { maxWidth: "800px" },
                                    path: "components/AccountPermMemo"
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                    ref: "memo_key",
                                    value: this.state.memo_key,
                                    label: "account.perm.memo_public_key",
                                    placeholder: "Public Key",
                                    onChange: this.onMemoKeyChanged.bind(this),
                                    tabIndex: 7
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.perm.password_model" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissionsMigrate__WEBPACK_IMPORTED_MODULE_9__["default"], {
                                    active: this.state.password_active,
                                    owner: this.state.password_owner,
                                    memo: this.state.password_memo,
                                    onSetPasswordKeys: this.onSetPasswordKeys.bind(this),
                                    account: this.props.account,
                                    activeKeys: this.state.active_keys,
                                    ownerKeys: this.state.owner_keys,
                                    memoKey: this.state.memo_key,
                                    onAddActive: this.onAddItem.bind(this, "active"),
                                    onRemoveActive: this.onRemoveItem.bind(this, "active"),
                                    onAddOwner: this.onAddItem.bind(this, "owner"),
                                    onRemoveOwner: this.onRemoveItem.bind(this, "owner"),
                                    onSetMemo: this.onMemoKeyChanged.bind(this)
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "tab-content", style: { padding: 10 } },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "divider" }),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_RecentTransactions__WEBPACK_IMPORTED_MODULE_13__["RecentTransactions"], {
                                accountsList: accountsList,
                                limit: 25,
                                compactView: false,
                                filter: "account_update",
                                style: { paddingBottom: "2rem" }
                            })
                        )
                    )
                )
            );
        }
    }]);

    return AccountPermissions;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountPermissions);

/***/ }),

/***/ 2547:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(716);
/* harmony import */ var _AccountSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2189);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _AccountImage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2190);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1832);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1833);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(774);
/* harmony import */ var components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2548);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(558);
/* harmony import */ var stores_AddressIndex__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(699);
/* harmony import */ var stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(694);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_13__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
















var AccountPermissionRow = function (_React$Component) {
    _inherits(AccountPermissionRow, _React$Component);

    function AccountPermissionRow() {
        _classCallCheck(this, AccountPermissionRow);

        return _possibleConstructorReturn(this, (AccountPermissionRow.__proto__ || Object.getPrototypeOf(AccountPermissionRow)).apply(this, arguments));
    }

    _createClass(AccountPermissionRow, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps) {
            return !common_utils__WEBPACK_IMPORTED_MODULE_10__["default"].are_equal_shallow(nextProps, this.props);
        }
    }, {
        key: "_lookUpPubKeyForAddress",
        value: function _lookUpPubKeyForAddress(address) {
            var addresses = stores_AddressIndex__WEBPACK_IMPORTED_MODULE_11__["default"].getState().addresses;
            var pubkey = addresses.get(address);
            return pubkey;
        }
    }, {
        key: "render",
        value: function render() {
            var name = void 0,
                item_id = void 0,
                name_or_key = void 0;
            var suffix = "_accounts";
            var pubKey = this.props.pubkey;

            var keys = stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_12__["default"].getState().keys;

            var has_private = false;

            if (this.props.account) {
                name = this.props.account.get("name");
                item_id = this.props.account.get("id");
                name_or_key = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                    { to: "/account/" + name + "/permissions" },
                    name
                );
            } else if (pubKey) {
                name = item_id = pubKey;
                name_or_key = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__["default"],
                    { pubkey: pubKey },
                    pubKey
                );
                suffix = "_keys";
                has_private = keys.has(pubKey);
            } else if (this.props.address) {
                pubKey = this._lookUpPubKeyForAddress(this.props.address);
                item_id = this.props.address;
                name_or_key = !pubKey ? this.props.address : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__["default"],
                    { pubkey: pubKey },
                    pubKey
                );
                suffix = "_addresses";
                has_private = keys.has(pubKey);
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { key: name },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    this.props.account ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountImage__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        size: { height: 30, width: 30 },
                        account: name
                    }) : pubKey ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "account-image" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__["default"],
                            { pubkey: pubKey },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_7__["default"], { name: "key", title: "icons.key", size: "4x" })
                        )
                    ) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { className: (has_private ? "my-key" : "") + " pub-key" },
                    name_or_key
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    this.props.weights[item_id]
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            className: "button",
                            onClick: this.props.onRemoveItem.bind(this, item_id, suffix)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.votes.remove_witness" })
                    )
                )
            );
        }
    }]);

    return AccountPermissionRow;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPermissionRow.propTypes = {
    account: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.object,
    pubkey: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string,
    address: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string,
    onRemoveItem: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func.isRequired,
    weights: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.object
};

var AccountPermissionsList = function (_React$Component2) {
    _inherits(AccountPermissionsList, _React$Component2);

    function AccountPermissionsList(props) {
        _classCallCheck(this, AccountPermissionsList);

        var _this2 = _possibleConstructorReturn(this, (AccountPermissionsList.__proto__ || Object.getPrototypeOf(AccountPermissionsList)).call(this, props));

        _this2.state = {
            selected_item: null,
            item_name_input: "",
            weight_input: "",
            error: null
        };
        _this2.onItemChange = _this2.onItemChange.bind(_this2);
        _this2.onItemAccountChange = _this2.onItemAccountChange.bind(_this2);
        _this2.onAddItem = _this2.onAddItem.bind(_this2);
        return _this2;
    }

    _createClass(AccountPermissionsList, [{
        key: "onItemChange",
        value: function onItemChange(item_name_input) {
            this.setState({ item_name_input: item_name_input });
        }
    }, {
        key: "onItemAccountChange",
        value: function onItemAccountChange(selected_item) {
            var _this3 = this;

            this.setState({ selected_item: selected_item, error: null });
            if (selected_item && this.props.validateAccount) {
                var res = this.props.validateAccount(selected_item);
                if (res === null) return;
                if (typeof res === "string") this.setState({ error: res });else res.then(function (error) {
                    return _this3.setState({ error: error });
                });
            }
        }
    }, {
        key: "onWeightChanged",
        value: function onWeightChanged(event) {
            var value = event.target.value.trim();
            this.setState({ weight_input: parseInt(value) });
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(item) {
            if (!item) return;
            var next_state = {
                selected_item: null,
                item_name_input: "",
                weight_input: "",
                error: null
            };
            this.setState(next_state);
            var item_value = typeof item === "string" ? item : item.get("id");
            this.props.onAddItem(item_value, this.state.weight_input);
        }
    }, {
        key: "onWeightKeyDown",
        value: function onWeightKeyDown(event) {
            if (event.keyCode === 13 && this.state.weight_input && this.state.selected_item) this.onAddItem(this.state.selected_item);
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var key = 0;
            var account_rows = this.props.accounts.filter(function (i) {
                if (!i) return false;
                //if (this.state.item_name_input) return i.get("name").indexOf(this.state.item_name_input) !== -1;
                return true;
            }).sort(function (a, b) {
                if (a.get("name") > b.get("name")) return 1;else if (a.get("name") < b.get("name")) return -1;
                return 0;
            }).map(function (i) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPermissionRow, {
                    key: key++,
                    account: i,
                    weights: _this4.props.weights,
                    onRemoveItem: _this4.props.onRemoveItem
                });
            });

            var key_rows = this.props.keys.map(function (k) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPermissionRow, {
                    key: key++,
                    pubkey: k,
                    weights: _this4.props.weights,
                    onRemoveItem: _this4.props.onRemoveItem
                });
            });

            var address_rows = this.props.addresses.map(function (k) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPermissionRow, {
                    key: key++,
                    address: k,
                    weights: _this4.props.weights,
                    onRemoveItem: _this4.props.onRemoveItem
                });
            });

            var error = this.state.error;
            if (!error && this.state.selected_item && this.props.accounts.indexOf(this.state.selected_item) !== -1) error = counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.perm.warning3");
            if (!error && this.state.item_name_input && this.props.keys.indexOf(this.state.item_name_input) !== -1) error = counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.perm.warning4");

            var cw = ["10%", "70%", "30%", "10%"];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    _AccountSelector__WEBPACK_IMPORTED_MODULE_2__["default"],
                    {
                        label: this.props.label,
                        error: error,
                        placeholder: this.props.placeholder,
                        account: this.state.item_name_input,
                        accountName: this.state.item_name_input,
                        onChange: this.onItemChange,
                        onAccountChanged: this.onItemAccountChange,
                        onAction: this.onAddItem,
                        action_label: "account.votes.add_witness",
                        tabIndex: this.props.tabIndex,
                        allowPubKey: true,
                        disableActionButton: !this.state.weight_input,
                        allowUppercase: true
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        value: this.state.weight_input,
                        onChange: this.onWeightChanged.bind(this),
                        className: "weight-input",
                        type: "number",
                        autoComplete: "off",
                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.perm.weight"),
                        onKeyDown: this.onWeightKeyDown.bind(this),
                        tabIndex: this.props.tabIndex + 1
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "table",
                        { className: "table" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "thead",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", { style: { width: cw[0] } }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "th",
                                    { style: { width: cw[1] } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.acct_or_key" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "th",
                                    { style: { width: cw[2] } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.weight" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "th",
                                    { style: { width: cw[3] } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.action" })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tbody",
                            null,
                            account_rows,
                            key_rows,
                            address_rows
                        )
                    )
                )
            );
        }
    }]);

    return AccountPermissionsList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPermissionsList.propTypes = {
    accounts: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainObjectsList,
    onAddItem: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func.isRequired,
    onRemoveItem: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func.isRequired,
    validateAccount: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func,
    label: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string.isRequired, // a translation key for the label,
    placeholder: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string, // the placeholder text to be displayed when there is no user_input
    tabIndex: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.number, // tabindex property to be passed to input tag
    weights: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.object // weights: hash of {account id -> weight}
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(AccountPermissionsList, { autosubscribe: false }));

/***/ }),

/***/ 2548:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Modal_BaseModal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1959);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(709);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(579);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(581);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(694);
/* harmony import */ var _Modal_QrcodeModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2549);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var PrivateKeyView = function (_Component) {
    _inherits(PrivateKeyView, _Component);

    function PrivateKeyView() {
        _classCallCheck(this, PrivateKeyView);

        var _this = _possibleConstructorReturn(this, (PrivateKeyView.__proto__ || Object.getPrototypeOf(PrivateKeyView)).call(this));

        _this.state = _this._getInitialState();
        return _this;
    }

    _createClass(PrivateKeyView, [{
        key: "_getInitialState",
        value: function _getInitialState() {
            return { wif: null };
        }
    }, {
        key: "reset",
        value: function reset() {
            this.setState(this._getInitialState());
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this2 = this;

            var modalId = "key_view_modal" + this.props.pubkey;
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default.a.subscribe(modalId, function (name, msg) {
                if (name !== modalId) return;
                if (msg === "close") _this2.reset();
            });
        }
    }, {
        key: "render",
        value: function render() {
            var modalId = "key_view_modal" + this.props.pubkey;
            var keys = stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().keys;

            var has_private = keys.has(this.props.pubkey);
            if (!has_private) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                this.props.children
            );
            var key = keys.get(this.props.pubkey);
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "a",
                    { onClick: this.onOpen.bind(this) },
                    this.props.children
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    _Modal_BaseModal__WEBPACK_IMPORTED_MODULE_1__["default"],
                    {
                        ref: modalId,
                        id: modalId,
                        overlay: true,
                        overlayClose: false
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "h3",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.perm.key_viewer" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "grid-block vertical" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "content-block" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.perm.public" })
                                ),
                                this.props.pubkey
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-block grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.perm.private" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    null,
                                    this.state.wif ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "p",
                                            { style: { fontWeight: 600 } },
                                            this.state.wif
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "button-group" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                {
                                                    className: "button",
                                                    onClick: this.onHide.bind(this)
                                                },
                                                "hide"
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                {
                                                    className: "clickable",
                                                    onClick: this.showQrCode.bind(this)
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
                                                    style: { height: 50 },
                                                    src: __webpack_require__(2550)
                                                })
                                            )
                                        )
                                    ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: "button",
                                                onClick: this.onShow.bind(this)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.perm.show" })
                                        )
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-block grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.perm.brain" })
                                ),
                                key.brainkey_sequence == null ? "Non-deterministic" : key.brainkey_sequence
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                            key.import_account_names && key.import_account_names.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-block grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.perm.from" })
                                ),
                                key.import_account_names.join(", "),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null)
                            ) : null
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "button-group" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                onClick: this.onClose.bind(this),
                                className: " button"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "transfer.close" })
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_QrcodeModal__WEBPACK_IMPORTED_MODULE_7__["default"], { ref: "qrmodal", keyValue: this.state.wif })
            );
        }
    }, {
        key: "onOpen",
        value: function onOpen() {
            var modalId = "key_view_modal" + this.props.pubkey;
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default.a.publish(modalId, "open");
        }
    }, {
        key: "onClose",
        value: function onClose() {
            this.reset();
            var modalId = "key_view_modal" + this.props.pubkey;
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default.a.publish(modalId, "close");
        }
    }, {
        key: "onShow",
        value: function onShow() {
            var _this3 = this;

            actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_3__["default"].unlock().then(function () {
                var private_key = stores_WalletDb__WEBPACK_IMPORTED_MODULE_4__["default"].getPrivateKey(_this3.props.pubkey);
                _this3.setState({ wif: private_key.toWif() });
            }).catch(function () {});
        }
    }, {
        key: "onHide",
        value: function onHide() {
            this.setState({ wif: null });
        }
    }, {
        key: "showQrCode",
        value: function showQrCode() {
            this.refs.qrmodal.show();
        }
    }]);

    return PrivateKeyView;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

PrivateKeyView.propTypes = {
    pubkey: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.string.isRequired
};
/* harmony default export */ __webpack_exports__["default"] = (PrivateKeyView);

/***/ }),

/***/ 2549:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(709);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _BaseModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1959);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2222);
/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(qrcode_react__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(407);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }









var QrcodeModal = function (_React$Component) {
    _inherits(QrcodeModal, _React$Component);

    function QrcodeModal(props) {
        _classCallCheck(this, QrcodeModal);

        var _this = _possibleConstructorReturn(this, (QrcodeModal.__proto__ || Object.getPrototypeOf(QrcodeModal)).call(this, props));

        _this.state = _this._getInitialState();
        _this.onPasswordEnter = _this.onPasswordEnter.bind(_this);
        _this.onKeyDown = _this.onKeyDown.bind(_this);
        _this.onCancel = _this.onCancel.bind(_this);
        _this.onClose = _this.onClose.bind(_this);
        return _this;
    }

    _createClass(QrcodeModal, [{
        key: "_getInitialState",
        value: function _getInitialState() {
            return {
                isShowQrcode: false,
                keyString: null
            };
        }
    }, {
        key: "show",
        value: function show() {
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default.a.publish(this.props.modalId, "open");
        }
    }, {
        key: "onCancel",
        value: function onCancel() {
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default.a.publish(this.props.modalId, "close");
            this.onClose();
        }
    }, {
        key: "onClose",
        value: function onClose() {
            if (this.refs.password_input) this.refs.password_input.value = "";
            this.setState(this._getInitialState());
        }
    }, {
        key: "onPasswordEnter",
        value: function onPasswordEnter(e) {
            e.preventDefault();
            var pwd = this.refs.password_input.value;
            var key = this.props.keyValue;
            if (pwd != null && pwd != "") {
                if (key !== undefined && key != null && key != "") {
                    var pwd_aes = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["Aes"].fromSeed(pwd);
                    var qrkey = pwd_aes.encryptToHex(key);
                    this.setState({ isShowQrcode: true, keyString: qrkey });
                }
            } else {
                //notify.error("You'd better enter a password to encrypt the qr code");
                this.setState({ isShowQrcode: true, keyString: key });
            }
        }
    }, {
        key: "onKeyDown",
        value: function onKeyDown(e) {
            if (e.keyCode === 13) this.onPasswordEnter(e);
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var pos = null;
            if (this.state.isShowQrcode) pos = { textAlign: "center" };
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                _BaseModal__WEBPACK_IMPORTED_MODULE_3__["default"],
                {
                    onClose: this.onClose,
                    id: this.props.modalId,
                    ref: "modal",
                    overlay: true,
                    overlayClose: false
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "text-center" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { style: { margin: "1.5rem 0" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            component: "h4",
                            content: "modal.qrcode.title"
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "form",
                        {
                            className: "full-width",
                            style: { margin: "0 3.5rem" },
                            onSubmit: this.onPasswordEnter,
                            noValidate: true
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "form-group" },
                            this.state.isShowQrcode ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "section",
                                { style: pos },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "span",
                                    {
                                        style: {
                                            background: "#fff",
                                            padding: ".75rem",
                                            display: "inline-block"
                                        }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(qrcode_react__WEBPACK_IMPORTED_MODULE_5___default.a, {
                                        size: 256,
                                        value: this.state.keyString
                                    })
                                )
                            ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "section",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    { className: "left-label" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                        unsafe: true,
                                        content: "modal.qrcode.input_message"
                                    })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                    name: "password",
                                    type: "text",
                                    onFocus: function onFocus() {
                                        _this2.refs.password_input.setAttribute("type", "password");
                                    },
                                    ref: "password_input",
                                    autoComplete: "off",
                                    onKeyDown: this.onKeyDown
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { style: pos },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "button-group" },
                                this.state.isShowQrcode == false ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "button",
                                    {
                                        className: "button",
                                        onClick: this.onPasswordEnter
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "modal.ok" })
                                ) : null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "button",
                                    {
                                        className: "button primary hollow",
                                        onClick: this.onCancel
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "cancel" })
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return QrcodeModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

QrcodeModal.propTypes = {
    modalId: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,
    keyValue: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string
};
QrcodeModal.defaultProps = {
    modalId: "qr_code_password_modal"
};
/* harmony default export */ __webpack_exports__["default"] = (QrcodeModal);

/***/ }),

/***/ 2550:
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QoLBzEKr7oFDgAAIABJREFUeNq9fXmYXVWV71p773PuvVUVSAL2o40KmjCEgiSEVFUSAiRR6U9Bwan9tPG1OPLk2bQTaQd89rOfooJD80RBUfTz4RPnVpx9bZuEzIHMAaICraIiZKjpnrP3Xuv9se5dtetU1U1SiveP+m5uztln77XXtH9rOPjWt751y5YtzrkQQpZlIQRjjDGGiOB4PsxsjIkxjoyMbNmyhZkBABHlf4nIGNPX19fT0+O9995v2rQpvRcR5Rr5rrfLP/VKItq7d+/VV19tjAGAPM9DCMyc5/ncuXM//elPy4179ux54xvfWK/XiUjWJU/pPH9rbQgBAJQC8mhmjjEODAy4bdu2rV+/Xn6NMSKizDud4rF8ZHSZ9+joaKPRkAGNMTJUWZbbt2+31nrv0ykKlWUE/V1ukQ2T+cgFiHjo0KFt27Z57+VHWaG1ttlsxhittcw8ODh4zz336MR0qDzP06dPJJbuUIxRZyKTQUSnU0nvkWUfF7F09BBCvV6X7/J4mXGe50RUYVjdGyGZ8pE8XcmnXxDRGNNsNnVVwgsxRiGZ/g4AzjkdWTfsWJZQobLOygh10l2Vx0/jY4yR+SFiCCHGGGMU6lRIL49LJ2etFUKkgsnM3nsdR4aSnRDKKhWMMYcOHdIHOefku0wmxigD6uZN/MjTZUD5yO7qjiKikbHkV6GiPIOP8yO3K6Gdc9Zaa22WZTKPPM9VlFSCAMB7X6vVdELOOUTMsuzss88GgCzLZBxZSQhBuIOIGo1GX1+fEDHGuG/fvnSzRT7yPO/v75cZeu/Lspxq/rorIQQZcGhoSMbUa5xMSNSkiqtz7njFUJlfNbGKmLU2xijKoiKGwtf6Vy8wxsyYMUNuF8WvnJvnuQw4OjqqkiKqUDZG9kDYVigrukz5cdL5V5hOGPbIkSOqsIwxTqiYXic8fLwKPtWFKkcVXSCLnHhL5Ue5RamWqggiKopCZVnkS9aZZZkaKL1ApqG0Vqp1sIk6iOyfEFekzaRaUK47qpXt8CRlHNFBkyopXbyqM/lF1bPcqOJQUXYiLHLlyMiIXiwjqJirdVYpUbJ2mLxogImMYoyx1o55E8LM6YZ3/lRYWr/rbug/RdlX3BGdligXdVxE8RHR5z73uSzLRIUtWLBAx1yxYoWMFkK47777ZObOOSWrem3yFO+9PnfTpk1TLUc0IyL29fWJUkpdxTGd9WR/KhZduS/lLN18nZ+QTHZVLIA6bsqbqon0u4wwUa6Pa7YVsRhTUE82pYSh1PmUL7KZ+stE56uyYDFBYmGFHMIv6iLIIMKGcv00dIgq8qn0tXmyiSXP1s1XaRKFolqywho6b71S6SJKXSRUr1RJ9N6L1P/pM6/ok78EsVQp1Go18R7UysinKAphhJRwHZhU2WdkZOSee+7Rwc8991xx65xzqQE9Xsue0qhy41+Is1Kekm0XfklVe2V++r8VudBxurq61MtBxO7ubvmvoiimYc0nEjT1Qv5yOit1GlSRy+anB2YlxMSjiRybU59DbbeMmVrbPM//FJ3VaeP/AtZQ6aKnqFSFjx1Tk4Oh+Maqs9QRVYMoBqurq0tdBIWV5OxSYcNjF8aUtSscOh3OEke8glV1dvZSRKEyJ/HgJ4rh4sWLVWDVeiLixo0bL7zwQgWFjooaHaOyT7EzdWv/DJyVrqGCQx0LZx0jJ2ZZpkBNyon1el3tpvpcuiXq7oqva4xRZK0zSKfjpMeMytLctGUq3fOjmjD5e1SyKjuo5lY8T72qoihkPQpsioJT5i3LUqFBEWE5Y3c+xumYuhzxQo6JWFORQDlf/JqjqlL1sPTGzqdZuSyEMDw8rFCvc857L6c84ZQU85LP8PCwzFncfbUSWZbJJIWCHbZW2HNwcFDuTV25oxBrKlGfqKo6L16vd86NjIyIgBzVKgHAvn37lIsXLFhw3333idz19vYqgdJTt2xeyshyLBUaiR+7bNmyzuuStYQQJp4ipslZFZC+8+J1wQpadRZbPdwdOXJE/ICyLOv1uopJrVar6GAhop6H1O+VQ1Ke54pVTHXoUz4VwU/PBn8GnSVzOkadVbn3qFYpna5Em1J0xXsvroOqcEVBlNbiOsjBSHScTniqOYjjVoHX/wwefIoWHIvzUkEpjxpkkxkL1i7+p/hZcrsKsnq2qd8r85Fly152dXUp4NFhtxRfVdFzzvX09Iy7aNWqVRUf51j2v4PY1mo1USiKdqrzIu7iRGcvBf51AuJnyTg7duww7U05d+ECHwMzx+jvWb9WWXvhwoXq9G7atCm1/ROduOP9OOdWrlxpFEVVn2UaQcP0uFAURQhBxEcRD3WanHNydlMWSO1UigurBy+IqJDXWtvV1WWNsKrLs7oAEhKMkaiSkr5er6e70gGAPyoTyLBG5D/d2GnDygrIOucErdYQVqpKxLTL3og2ybJMNHSK0lRg28xlFcsrke0KDi6EE93UbDbTcOT0FpXiqO7gwYOpEtGNnUZ0R2ght3vv5QGyAPHuxN9RJkoJquqvBeA6J0sV859lWRliltWIwuGDh2IIzrksy2yWi2ir/hZTIGMKb+oJtHJKOy4FTUQHDx5EsRdijysw5vESS7ZdpViEQiiVenf6T+9jltlEhNl7v2XLNg2JHzlyRDDlPM8HBpYZA0VR1GrCYgxgjhw58sAD+/M8HxkZmT179rx583Q/hFjNZlMMgrLk9EJ83vs8z1E34c8FLaaHNRWZtWvXilopy/Lss8+eMWMGMWaZQ4RI0RobyYsmwraBVn4RP4sBKEZrkSmgMQCGGQGRYgwh1Gq19GAEAAww2hxt1BsMDAAISEyIaACnvTpMcV6Vwc5AwhRjRZFE2duhoaG77rrrK1/5yo9//FOhYJ7nzWZTNtkYc/6S/he84AVXXXXVnDl/TUwx+sxlPvjcTVi2RGuADTBD/MC//Mt3v/tdtBbBRobcZUVRCP+q64uIz7v0+b29vZdffrkGe2KMeZbj8ftJY6Sg9kfPENOI3UsAfLQ5yOx//ZuHXvqyK4wFQDAWJoYPWs9Gi8YBmKXLl+27fz9xHC1GiKOi7OlMZH7eF8z+da/9rwiABowBMGMpLhoebqk/BOMsILzs5X978PAhYg4UI09vaa0pQX9/fyUW3dnVcpD1zj+HmQP5yJL9wUwcikPM5fXvfg8AIIKoUYO5WpM0+IqIFiCzDsCYrAts7Y3//R+bkT1zJCbmZrPJHJkjM4fQoplnH0bpmte8yBpwCHUE42am3tP4g5cxxunfO7/81cDsmYk9M0dPzEzMgWMZCiYW1mPmtWvX6vIlXjmW69DV1aVjKyLRwcmOEJ/ylKeIQjFowAAAMZHN6osXLLpv195arVEUo8ZZFo8HuK+v77nPfa44FkT005/+dOvWrcEXIQZrbfRNNO7WT/7vdT9fu337VrRQFr5eqwFA2Szyes1aJAKG4ME3cnFKoF53ZTNQCJVjnSIctSwrysIAGgNE8MpXvGJ4tPmqv7/SGEYAY0WviQ/sUjdAbhe6a+5U67N69eo07iQOZGcxXr58ufctWaHofTnCsTnv1DkZQmZzAAcGAeHZz7nke9//sdj+iSy9e/ful7/8ZQjQlVsEQLSu1nPK0+cG5sBclG3fMqjoRM+eA1991eUtcUP42C13qrRKBEywmo0bN77rnWsa9byWOxk8r3Wjaxx4+NEg1xPHGCNTYBYeUydGUxKNMcuXLx+XKXTxxRdXDpCdw/fG4cBA39hK2DM3L1x+ngWo2xqCA3A9M078fz/79xDZB05dapmNOCtl8MzxoV/sP23OUxyAFRG3XQMrVgbmIjIJlYmZAlPwvvBccuDXXvl8RMzrNQDz/o/ekaq2siyTjYkc/Esuv6yROVEJYGqrLrnMMweKvmzG6Ik5EkdiVWUhhB07dqjTd84551SJlToUqZqf9AMIS5f2hxA4cvSByb/33W/PDCBA7moA2V8/9dQ/PPZ4SVGmImvQAfWfgTlGT36E/fAFSxZ059aiQ5ODyT904ycCs2+rqhhK0V+jNMKB33L1y1sQALr/8dEvCKumzCsIJ1Ng9hzL8xeeU3c2z3MAB7b26BMj8mhmT8whMkVm4jVr1ogMLlq0SBIpJqp5I7iPeqFCXXUjJkmgMJYIrLFgCDk++utff+ADNwYCBihDnDV79oO/+MXsk2cDBQAyCIq3qFLIsoyIENgYgy6LxOvu2XjKKacAB6ASmNasecfhI8MRUDSnsVZcOIcOAgyPDAmDi24ty1JObEVRiKoVVCsSMQEgfu72z8YQfVkCEMS4cdN2knMikdgFNABI9XpdDkZyxkyTvMZBNJXjzsSI7ngElWtZ3mwOAxNmeO2116I1AIBZDgg/X7eOgYjJWRNjCUBi/iSpTASwZd0BY2QAZ/MGZNnP/uM/LEJN3NJI1113nbMABoghBAJs62PD9Sw3yBQiAGdWWKaFdggs04I6rItEALBg8aIsw66aQyAAuu++vRSF+Gn0hCrhyDQ3cYxYgsaKQVFCdggfGbBEUK/XAPmJxx77+rf+LQRicBzDG6+55oyz5jXqGSISk7Nj2QmyJImzt3wWZmMtAxBgCPTUpz/tmmvewBGAIyDeftttPjAxMIJ1jhlBrAZiCMG0Y9tEAZIkWM2xISIGtM6R9wBw3sJziyI4BAQYGhpBCwRs2qgpM8vpQ1hECDIpu4zL9tYg+5g3NG5EAADKOQwPA3oosls+doOzmQMACGC6P3zTTQbZcHSMljPgVjJuZX9agwNCJARCJrTO2Ox97/ufooktRIT4ma98N+NmACAA5BIRS4hgAZwNDE5svzUa5kmZAhENAHNhsgawa8e7awYoy2xgYITIDAwWAGgMfUfEtWvXimwpviSfgYEBk+Z5p7lbim2l6fNEBD64Wj1yBAvf+Ma3yuAZwLr88he/pOasBQQAppbgdDozoT7RGjQA0N3dGOg7p21q8Gt3fQXQUtsXijE6cHJUtBaNzYCNgr+CzAjPtpL/mAw0KBwBsHv27rSmzraIkC1c0OuEzuLKIqABAGw0GgJMpjCWhiattY1Gw3TOGUwLH9LsfotZeeSJfff/J4DJrI2RX//611oDDGPIkSxzyjMXMBhmljkBANh6dvnllwG0VMnPf/pDQOsQkAkArLEGAAgQDUUoyxLQMKPiPCoHLbgVgSIb2/PQLzY0R2qem4EMYL6s/zxhv/ZSQU7Waapqmgc85gZIHnyadZfmRlWSbzT3sCQGgK2bN4h3xIyA+UUrlqfPOJYjavpQ0ZLPee5qC0RM1uUwOvy7Px7G1iYjAEQKLdgaENEaY9OET0gqMmQTEBGweNd17wcogDOwpndJ/zPmzERg4DaR2uqoLEtNPtdjX5oHD62TaJIKkSauVMJzLeeewToHjLt3b/XRABIRnXzas7rqxjAARTkTHhUIkSsMCpIFzAjMZ83vtQAGTYzBONjzwC8BwLQ4lJxxgC2eyPOcoo+hFEnUmpukIMIgFnd+8Utf/9b32QABQ6x9+MMfRAAD7GxOkcVgyapvuOGGI0eOiL2W+C4R7dmzp+o6TBqkmYqznEUwBhB//9uHIxhAQOBnnXGmITCYhnCOGh0Yz30GmV02Y5YFcJkBRi5H//N3f7TQZl4iHtttKotRAGqM54U0wEMB3v+B66989Zvy7oYnAAyve8ObL1k5EKMHMAAGUBSsEMsIz8oZQ1hMY5fqUTupLKhAo2kIU3V8i6xEzTIA46O/fUigOiSeefJJDICgUU8wRm7sAIABMyGKr2AZLYABcCd2ZwebEYyzBIOj5RiohMjAwGAzY42NFOs1e+D+PRs2bBDtLvF9Y8wDDzywfv36Oz7/mZGRwEhDw7Wsy/3N6hd/4uPvdQwkW8ggVqUSixa4TbPn06CJMcZphcZUWSVCKVV1BiCr5QAwNHwYwIADDnDCzBPboSpqsQwfBUFEAAALEAGIARAtAEbPM2ee8NhvHofMGoJmIcQitA6BI4QMIcYYKRoAX8Q7brv1i5++MVXGCvk7BMQcnOE4/L73fmrNmqstBPCMmSGGGME5YAaDQj3UkK2WmSGiFOGNBQk3bdpUyTHTUGiadaaAHKIJcRTIFUgAkEOtsIBNZGgVaJVlCQiMR1HzRIJ7QaCIgMxABNYZ9l5QHwvQ3d0NzEyi4AwCC4GFKXIECM0xuQMGBEAbAgGYgFnXjJPf8Y63HRp8Ys2aq1sbaBHBGITMtUZsiWSbP2KMa9eubTQaAi4sWLAg9Q1dyodpKYB+EaRYAf/ABMQQY6PelWeuLIYB4fDBx8VyhxD1/IHGMMcpFZcBQAg+uiwPxMaARYLgDw0NGWsgxgDQ090FKA4mMIPFdpCRyVosI4PJiYpWhIVaxX/W2RDC7JNOueVTn3zpS64QkSnKop7XiL2BrAN8rABMxUMQp9epA0VEgmSlxX1iUNWsil9Syyw4+9Snneb9RgCT1+HXDz1EDIjWOIHiRMF3ygFBBCJyWQZgrAEfPLN3GR8ZIXYZoPEMp845JfEzEIABwGUZgwkRnIUVq56zesUCIBZ1s3nzxu/823djCM7CE4899qq/e8mtn/6bH/7ge2iplteCB5dR55wBEUD5m6Y0id/r9u3b9/jjj0sYbuHChYr8CSsJjbZv3y5kbsX+iQHo6afNM0CAObP/5YP7GYEiW4vel3luseWg89ReFgmGaQzECIjsHD70wO4SgMXuYXb6M0+NAA4MACFihOioVaDCjMZlqy953vve8XpisihcjAD0T29/x003fdyY6Ev695/85LLnv+TuH36dCGwGDNzBQpdlaa096aSTFi5cWKvVarWaJj5ba8844wwYGBiQpBxNXVU8q1JqpIGGpQN9HMPPfvLtOkLN1MEAQPejfzwyOFpGJgHORQ16X0wVAgjkiYJAXEVJzDE0H//eN28Xmwim5mb8VWAuSIA5z8yeS/Z8zWuvQLQADkz2z5/4QmQKFFtoH8fm6CCTv/3WWxCh0egGcADuIx/5lA9MXPpYHjU2IV5bBeAVspju7m6tkqnIoFaXpmIMBh0wIPf1r2AGZAQEC/R/7/pavZ5xy3UBHB+Cn0wMbTvVC2wmpSnuhz/4KYJFZGvw/P5llluBDwhtFARbyfFoDDCHEBDQokgQee9r9a4Y6TVveP11b/9vzdHCGAIM7/yndz36+8eK6NFkHUJeGlFPk7xUwROREUqpX5omM8pfyYfSMltgOShxV8/ss8+cE5kBwUC87bO3h7YuTAORU7ukaE1G0QMSAEQmzBqf/9ydLZc9lle++iqITZZjEfIYjYENMHAEpkZeK4tCwZksqwEYBgPgPvi/bjj9WXMyZwAxxKFLL73U2a4OyU7GGFXZac556naZFNZQVJOINm/evGHDhu3bt+/fv3/+/PlLliy54IILLrjgAjDGMABiUfrXv/Yq1zqN8L4dO3bu3BMpapFN56wVjiCQFmLL+H79K18tPAASMhHTi150udBRWFRdWSICJrmrKJridreML4APZJ0LkdE1vvntL3sfgCyg371n1+dvv4v46GkNlRyp9HAOK1eurKTJT5U/1U57dsuXXcTEVI6ODj0uoAxCDpift2TZaGDPXDI3y1Fmz1SkiH4K8HtmHyWUVzI3mctTTp5lAWytDuguu+IlxOwDE7OPgUjUhw+R3/yaKyS2g2Cu//jnp9Q9xMzxTa9+KQJ0AQD0mKzn9yPEHCn6EIKEKUIIzJFjmQY+UsU9DoPvnLFXqaQxxlhniEPwEV1W757xxte92jlAiIh479atH7vpY+JC5Vk9RgY06tBWKgYsgDMIAL4sgfEt//APTzxxkBFiGcCYG264QfgJAZyxiPa4UxMQIDRv/tyXZtVhBFzdlBT4NVe+MpIhcNbaGALqQaV97hcdouJVHbQzZ4kuS2kMCEv6+9pb533zsEMwCNZmYnq+ffcPPHNJHChOzAQQW0NEzLE5Oszkmcsv3XE7ihZDB1h71WveEJgLX5IYuJHRFmMdD2cFZt8cJC6/8KmbAEzNALguQPez9ZuGi0DMRDQyPMgchec1yzCFWyqfKZNnent7TzjhBAAYHh7etWvX4OAgEfX09Cw679zzzjuvLCjLDRDYrHb33d+89NIXxeidyVyeXX7pZV+88/+88hV/K9HqNP1M82iZGZhqeQYAN97w4Xe/+3rB9YBh5sl/ddttt8o2C4xTq4SFj5W1CGs9GIdedfU//uvNt2zb+6scRjy6573gikOP/zYCOMRGVxcwhwiI8PvfPfrII49o0a0IxIwZM/TE04mzlJtE649Fh7iITMQcvMh2ydxc8/Y316zJTSvDwbr6ylXP/ePjh6mt6dJcD2Gu0Bx+cN/uhb1n1Z1FgFqtkde6AbI9+x8OzJ4pchniaKQilL4dBD0OziKOgZmpJOZf7d3mnHFyejeNa697z6gfm5oor+uuu64SrM/zvK+v71h1lmSjaQ5Eq6gFDBBTAOPAOUfMAPaGj3z0yitfGYmNAWOAol+/fu3JJ8164QuvuOOOO/bu3avyX5bltm3bbr755sV9S86Yf87+Bw+UgVxWKwpflsWO3bvnn/mMUAYjRDcO2NjMwXQyHI0FKinDWD79rEVv+PuXm8zmBkxmPvGRDz388MMhsgDbEkA84YQTpGuLwqST9GLpwFlqAdPshxhKJiZiYiaOkUNbyMuP3/ghZzF3rYvzei3FSzUzU8+G2mnGufzU0+bdf+Bhzxxa8WcmotHRUXXNp8FZTMJcftQHLg/Va5mcb11WO7N3gSTtUMv2xfe+970aoNX46bJly46Js9atW7dx48atW7fu2rUrRaZ++eAvt2zeKuSNFBHQOgcMwHzt296ye/fOufOe6YwFgFAWEsJJGyuNtY6QI6Zk70R++OGHvvHNr/sA1kKkVpSlXq8TME2Lr4ACgbEERXR1W3LW/dlb/pXRNDITfHH/vn233voZAAgMzhmg2EZNgkKhk9SwXXTRRWnFiLBJ6tNPzM1dvHhxNdMs+e598cMffv/Zz17lsrGYQBo91EolQepdO+wAprZwyfKDR0Ylkab0LW5q+WLEZTHKXL7uqldiCzzM3vfBj3Vws6g1pUAUIhXM/vzFCwABrRHn8A9/fCxITgbT9ddfr417dMlLly4dZw0llATjuzBV+kRVMt3T+ra0ME6QL+fcRRdddMkllwDAj370o02btuzdu/dXv/qVbECWZX19ffPmzbvkkuc8bc6cvr7z9+y5HwEYyFnYsXXLSSed9PVvfO2Flz7POQmAsLU2xBIYszxnCmvWvPMNV18TyQSwzzj1tCkZi4mIMtuqPkdwAHT33Xf/6pHfGGPKshwDFRA0mT5FDSY5fqxevVrjiJwYL72n0g3GGDMwMDA6OjppcmVZtjJevC/ky/g0oNZR3ntfFEWMPobm2992bWunEa3NrKsDuDddc20rH4hJNl98Lopehm3BFfHoaY9ERBTaU/I+tn13ij4GsezE/J73vKdSjiGZaOM46/TTTy/LsizLQ4cOaaMFa+3555+f6uO0r1xfX1+atq6+Rft03gq3yAPUOAjaoxPK8xyAKPJHbrxx1apVV7zgCmKG6CNEALjlkzd/5zvfXrfhnlNOOcUaEwEsQKDoTAYERIwWECgz1LlWq51G3soMLssyz+ut2ESSuCy/CAKqNZ+T5HxMzMxTVyh1jlImkhiHlJ2k7pj6vul3oZE+Qsdsd7OKMTRjaP7u1w8/8+lPdQAAJs/r7WiVu+NLX24GDsyRA3FszYJa/OLDaAeeknnKE4W52kmqraVpXQIzizWs1D1VdJZJs9W1wEP7e02sDxJmEQw6TWLS4J0mH4zlaCTYhvZTkZBtWQZjMzTuv8x56i8ffvhlL3sxAJVlExGNtYjw6iv/7tkrV40MNSlEBCPujXKEs3nn8pgELLIxcrNZwvgmZzp/TQZJeapaIy0+p1bITkz+rhT0TKzLa38n76Mo+HaHMFspINDKV+ccUEtIGZAgxDJkzt1511fvbKeMSa2A4M4hkHNS6KNWxYUg+MmUcUmKMTLJ1nrvXZbV2qUWmpmkG6k1bFoRqsDWGLH27t176NAh6X2SBlNTcCflrBjjzJkzzzrrrEr9u8Y7tNpEVpi2+xrnkSAyE7bIx1leR5A8Wi91T1LThczAxlkDDKJjrMUQAxA45yjClHgEs7HWoB13OIVxRZ5CR1msODRZlp1wwglz586Vy6SV3thnxYoVlRLKzmH3tO/ZpEV8abOLFJnRDJyJI0xsulkRJfmrmJx+0lsWLVokmiiEsH79eu13IEm0or/Wrl2rK01T8yu52JyAEKkRb0XKFLpKY6udC75Vso5a+at5pGkNvmq09MexfBXTSj4QXFz+aiwvxZG0DHliHwi5sdFoqFEWPZvGBCskU99dvcj0MqOPl3KhSnX1pA3ZpJxQmeio9f/GGNGmaVHOuCBIkjymRiDPc8mZ0h5uabqdaBblYqnVShvhaRfX9GCr9bWpAtWOcJC0VEnT/nRrnWbL5Hm+cOHCPM8nPxYlOksD1/rXGLNu3bpJr1+wYIH0H5LOKJroUunPptO48MILpZPf8PDw3r17hR0ajcb8+fMhaYIiBvcPf/jDAw88UOmgV5bljBkzlixZIlpv3rx5WgIp/qBo7jzPL7zwQlHkRVFIbFRbwAkTSPdNGX/WrFlw8cUXKwnFJ2o7JpN/JtZKaBvaSXVWmlMum59WCFWYJc0L27Fjh2h6AEhP/22glUMIO3fuVEkcGBiooOZSd98+sXpm3rBhg4r5qlWrNEFfa6oBYMmSJfqgLVu2QLuP3sDAgEvL1CZqzUlDIAp4KlMctbMsjG/5WommaN2xyLgQd2hoqFUhNN7mpJMcHBxMu1bD+P47mnKQ9mtRB2h4eFi742nerPpPojFED4gf09XVZVJ9UelEMOlHSVOWpZ5yOseXlLHTnnyqNer1ujKL+ofSE6WS0pkGPmTDFKSW85NSTTZGRpPEhVRWVNgSAAAGi0lEQVS1yZakiQpSWSzcJDXxyg0y51aJHkzR9Xnz5s2TOg3qEBCRSEfnGuGNGzcK73R3d/f29tbrdc2U0y8iHTLU3r17Dx48mOf5gQMHFi1aJC1v58yZs23bNslFkLvEYtx3333aXvXgwYP33nuvKCaxntKjW4UmhLBnzx7t9TM0NLR9+3ahzoEDBxYsWCAe9Zw5c/bv3z8yMkJEBw4cSBMwjyluOJV8pQqis5+lajVt+aDaJC201z07//zzVQdt27atcvKYWJwFEzrJVqrd0hbiFdu6ZMkSndvmzZtTjaR/V65c+aR3ZktFQ/suaIRNjFpqYVVsU+9EEKEErgDtuZyufFyoPTlpac/o1JdMp6fz0RYOk4rLk04sFRwFDlPnKFWRaSWU5mJUWqqkFaQV9VrJG06746V5oROLBaW6P6W4NDefWBvypDdIlP0UG7d79+7BwUEhRH9/vxhBY4xgZ7KSjRs3lmWZZdnhw4d37tzZbDadcw8++OCiRYvErT106ND999+vO5G+EkA3YNasWWeccUZ6NhJH9IknntBO6GkV3GOPPbZz586yLEdGRn7729+ec845YgdGRkZ27dp1rBHpP11nTVQTlWcp6qR8pFVReq+g/vLZs2dPxTvT1Cj5kue5WB61sCJZMcatW7dW/I+Kk2GM6e/vV8fw3nvv/YvqrNSGqkylCLfYbFUx9Xq9LMvKqz4UBdGMfrXo6TlJdFZZllo1m7qBFcgl9QEkRCjgkiLsIQSJJP7ldFbaLjhtJ5civymckEY6lRCNRkOP1uJApOiuSLoM7pyTwkP1wjTRTKDdiWcGOepqtCLtjT6h88CTr7PUIe7r64N208IdO3boOxCWLl1aMfnMPGPGjHPPPVfuFQUkpJk5c+a5557b3d2drk3eYbF//37xRYeHh7dv3y4EmjVr1llnnSUSeuKJJy5evFiUetq7SFOQnXNnn3228mDV5V61alXlKCN71QHYUt83zWaahi5Ta6UnuLTwbPny5fK7nhYrXyr/u23btkoqmvxzYGBgqsSYdD4TowREpGdJa+3FF19slC6VFxp0AB4qR7zOPf86q7NKiV5abyt4gPayVQBW0xP1bKSYn0JMqX+nAYEOQGYlg3Ri6+AWF2uHz/TSChqXeuG686p0p9eaSsOUqcKKMcqCBbQTH0KWKm6X9tiC9ksr5AAg/6Xd7tJWd5U1T7T4+r3SAFqvh3ZHfTdp93RjzJIlS9SOVPpcyv2HDx/WDmHH+64sADjzzDNnzpwpHVd37twpYddZs2bJgrMsO3LkyO7du8W0dXd3L1y4UN9YsmvXrjzPRSbkJOi9P3DggAaZ6vX6GWec0dXVVRTF/PnzhXnT0odJ+asiWIg4e/Zs8QGzLDv99NNh1apVAjNpJ2JFi1KRTk9zFQ1yLH7WpDiXfqnA+SmviaD19/crLrZu3brJOwElH4n3pXwkkXoh/URgLlXWqQKVu8Yw+PSFHCkgN/H1JtWmne3I4DTelZWCpemrwFIUVFEzsffp4UPP3np4qlgefbGUOCLSKgzajfZSEVGhmQhwV5xVKZ7J0hCpJn9PVdOlb4CqFPpMz6uotHytsJvIuD5C27Zqs0AxNbVaTb6oNdBGi5LMJ+GSSY97KXUq3Z+FyzSwhIhOnFcR6fvvv//gwYOaV5MqyIluhEYiBCOfBhqhYTsdSpWr6J1FixYVRYGIc+fO3b59u0z1kUcekdoaY8zQ0NCePXtEzc2ePXvu3LnyEr/TTjtN8C9jTE9PT29vr1BheHh49+7dijHos5xzixYtSskkNB0dHd2+fbsQoaenB1avXj2pppg2xqDsnQKbaRbJRAgfxveOlL9Lly5VGRckMs0Ok3u3bt2qYpXmJQgmJQOed955qnTknRcw4S0olYwzVVvy3j+5bOnSpW7iy7umfaypvJFv0hdPTBVPrUTCK+9tCO0+WaqY5H9Tf3iqF+mJ3ql0R0yNTxpDqQAS6VSzLHOpIKgfMO2mrjLjZrMp8HGqCwTxkP44aRxfGgGmTo22OSmKQpD1sX4S1koSWnp4lKH0eo1Oaj9Z8dfSh6YaXU3ZxFWri9cC4yR7WWHfNCB4XMTSd44NDg6KWpUR+vv7G40GEY2MjKRd4NRLFt0k75xTQF2aTmqudXd394oVK4QEvb296ql3dXUtX75cFLz+Lnj/8uXLRX/19vZqw4aenp5ly5al4ShZsrSrm9g2uVarLVu2TDasv7///wMCmdZm6AM8jAAAAABJRU5ErkJggg=="

/***/ }),

/***/ 2551:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Forms_PasswordInput__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2334);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(581);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(407);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








var AccountPermissionsMigrate = function (_React$Component) {
    _inherits(AccountPermissionsMigrate, _React$Component);

    function AccountPermissionsMigrate() {
        _classCallCheck(this, AccountPermissionsMigrate);

        var _this = _possibleConstructorReturn(this, (AccountPermissionsMigrate.__proto__ || Object.getPrototypeOf(AccountPermissionsMigrate)).call(this));

        _this.state = {
            validPassword: false,
            pass: null,
            generatedPassword: "P" + bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["key"].get_random_key().toWif().toString()
        };
        return _this;
    }

    _createClass(AccountPermissionsMigrate, [{
        key: "onSubmit",
        value: function onSubmit() {}
    }, {
        key: "onPasswordChange",
        value: function onPasswordChange(e) {
            var valid = e.valid;

            var name = this.props.account.get("name");

            var active = !valid ? null : stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__["default"].generateKeyFromPassword(name, "active", e.value).pubKey;
            var owner = !valid ? null : stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__["default"].generateKeyFromPassword(name, "owner", e.value).pubKey;
            var memo = !valid ? null : stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__["default"].generateKeyFromPassword(name, "memo", e.value).pubKey;
            this.setState({ validPassword: e.valid, pass: e.value });
            this.props.onSetPasswordKeys({ active: active, owner: owner, memo: memo });
        }
    }, {
        key: "checkKeyUse",
        value: function checkKeyUse(key, role) {
            if (!key) return false;
            if (role === "memo") {
                return key === this.props.memoKey;
            } else {
                return this.props[role + "Keys"].reduce(function (a, b) {
                    return b === key || a;
                }, false);
            }
        }
    }, {
        key: "_onUseKey",
        value: function _onUseKey(role) {
            var remove = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

            if (remove) {
                this.props[role === "active" ? "onRemoveActive" : "onRemoveOwner"](this.props[role], "_keys");
            } else if (this.props[role]) {
                var weights = {
                    active: this.props.account.getIn(["active", "weight_threshold"]),
                    owner: this.props.account.getIn(["owner", "weight_threshold"])
                };
                console.log("key", this.props[role], "weights", weights, "weight of role:", weights[role]);
                this.props[role === "active" ? "onAddActive" : role === "owner" ? "onAddOwner" : "onSetMemo"](this.props[role], weights[role]);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var activeInUse = this.checkKeyUse(this.props.active && this.props.active, "active");
            var ownerInUse = this.checkKeyUse(this.props.owner && this.props.owner, "owner");
            var memoInUse = this.checkKeyUse(this.props.memo && this.props.memo, "memo");

            var useText = counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("account.perm.use_text");
            var removeText = counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("account.perm.remove_text");

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    { style: { maxWidth: "800px" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.password_model_1" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    { style: { maxWidth: "800px" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "wallet.password_model_1" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    { style: { maxWidth: "800px" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { unsafe: true, content: "wallet.password_model_2" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "divider" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "form",
                    {
                        style: { maxWidth: "40rem" },
                        onSubmit: this.onSubmit.bind(this),
                        noValidate: true
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "label",
                        { className: "left-label" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "wallet.generated" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "p",
                        null,
                        this.state.generatedPassword
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "p",
                        { style: { fontWeight: "bold" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.password_model_2" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Forms_PasswordInput__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        ref: "password",
                        confirmation: true,
                        onChange: this.onPasswordChange.bind(this),
                        noLabel: true,
                        passwordLength: 12,
                        checkStrength: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            { className: activeInUse ? "in-use" : "" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.new_active" }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                this.props.active
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "text-right" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "button",
                                        onClick: this._onUseKey.bind(this, "active", activeInUse)
                                    },
                                    activeInUse ? removeText : useText
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            { className: ownerInUse ? "in-use" : "" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.new_owner" }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                this.props.owner
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "text-right" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "button",
                                        onClick: this._onUseKey.bind(this, "owner", ownerInUse)
                                    },
                                    ownerInUse ? removeText : useText
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            { className: memoInUse ? "in-use" : "" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.new_memo" }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                this.props.memo
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "text-right" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "button",
                                        style: {
                                            visibility: memoInUse ? "hidden" : ""
                                        },
                                        onClick: this._onUseKey.bind(this, "memo", memoInUse)
                                    },
                                    useText
                                )
                            )
                        )
                    )
                ),
                memoInUse ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    {
                        style: { maxWidth: "800px", paddingTop: 10 },
                        className: "has-error"
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.memo_warning" })
                ) : null
            );
        }
    }]);

    return AccountPermissionsMigrate;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountPermissionsMigrate);

/***/ }),

/***/ 2552:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(931);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2548);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(407);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(774);
/* harmony import */ var stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(694);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_7__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }










/**
 * @brief Allows the user to enter a public key
 */

var PubKeyInput = function (_React$Component) {
    _inherits(PubKeyInput, _React$Component);

    function PubKeyInput(props) {
        _classCallCheck(this, PubKeyInput);

        return _possibleConstructorReturn(this, (PubKeyInput.__proto__ || Object.getPrototypeOf(PubKeyInput)).call(this, props));
    }

    _createClass(PubKeyInput, [{
        key: "isValidPubKey",
        value: function isValidPubKey(value) {
            return !!bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["PublicKey"].fromPublicKeyString(value);
        }
    }, {
        key: "onInputChanged",
        value: function onInputChanged(event) {
            var value = event.target.value.trim();
            this.props.onChange(value);
        }
    }, {
        key: "onKeyDown",
        value: function onKeyDown(event) {
            if (event.keyCode === 13) this.onAction(event);
        }
    }, {
        key: "onAction",
        value: function onAction(event) {
            event.preventDefault();
            if (this.props.onAction && this.state.valid && !this.props.disableActionButton) {
                this.props.onAction(event);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var error = this.props.error;
            if (!error && this.props.value && !this.isValidPubKey(this.props.value)) error = "Not a valid public key";
            var action_class = classnames__WEBPACK_IMPORTED_MODULE_1___default()("button", {
                disabled: error || this.props.disableActionButton
            });
            var keys = stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().keys;
            var has_private = this.isValidPubKey(this.props.value) && keys.has(this.props.value);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "pubkey-input no-overflow" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-area" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "header-area" },
                        !error && this.props.value && this.isValidPubKey(this.props.value) ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "label",
                            { className: "right-label" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.valid_pub" })
                        ) : null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                            className: "left-label",
                            component: "label",
                            content: this.props.label
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "input-area" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            { className: "inline-label" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "account-image" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_3__["default"],
                                    { pubkey: this.props.value },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                        name: "key",
                                        title: "icons.key",
                                        size: "4x"
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                type: "text",
                                className: has_private ? "my-key" : "",
                                value: this.props.value,
                                placeholder: this.props.placeholder || counterpart.translate("account.public_key"),
                                ref: "user_input",
                                onChange: this.onInputChanged.bind(this),
                                onKeyDown: this.onKeyDown.bind(this),
                                tabIndex: this.props.tabIndex
                            }),
                            this.props.onAction ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "button",
                                {
                                    className: action_class,
                                    onClick: this.onAction.bind(this)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                    content: this.props.action_label
                                })
                            ) : null
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "error-area has-error" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            null,
                            error
                        )
                    )
                )
            );
        }
    }]);

    return PubKeyInput;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

PubKeyInput.propTypes = {
    label: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string.isRequired, // a translation key for the label
    value: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string, // current value
    error: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string, // the error message override
    placeholder: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string, // the placeholder text to be displayed when there is no user_input
    onChange: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.func, // a method to be called any time user input changes
    onAction: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.func, // a method called when Add button is clicked
    tabIndex: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.number, // tabindex property to be passed to input tag
    disableActionButton: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.bool // use it if you need to disable action button
};

/* harmony default export */ __webpack_exports__["default"] = (PubKeyInput);

/***/ }),

/***/ 2561:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2552);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1832);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1833);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2515);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2562);
/* harmony import */ var _Account_SignedMessage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2563);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











/** This component gives a user interface for signing and verifying messages with the bitShares memo key.
 *  It consists of two tabs:
 *    - Sign message tab (code prefix: tabSM)
 *    - Verify message tab (code prefix: tabVM)
 *
 *  See SignedMessageAction for details on message format.
 *
 *    @author Stefan Schiessl <stefan.schiessl@blockchainprojectsbv.com>
 */

var AccountSignedMessages = function (_React$Component) {
    _inherits(AccountSignedMessages, _React$Component);

    function AccountSignedMessages(props) {
        _classCallCheck(this, AccountSignedMessages);

        // initialize state (do not use setState method!)
        var _this = _possibleConstructorReturn(this, (AccountSignedMessages.__proto__ || Object.getPrototypeOf(AccountSignedMessages)).call(this, props));

        _this.state = {
            tabsm_memo_key: _this.props.account.get("options").get("memo_key"),
            tabsm_popup: "",
            tabsm_message_text: "",
            tabsm_message_signed: "",
            tabvm_popup: "",
            tabvm_message_signed: "",
            tabvm_verified: null,
            tabvm_message_signed_and_verified: null,
            tabvm_flag_verifyonchange: false
        };
        return _this;
    }

    /**
     * Event when user pushes sign button. Memo message and meta will be signed and displayed
     * in the bottom textarea
     *
     * @param event
     */


    _createClass(AccountSignedMessages, [{
        key: "_tabSMSignAction",
        value: function _tabSMSignAction(event) {
            var _this2 = this;

            event.preventDefault();

            try {
                // validate keys are still the same. Better: make public memokey field uneditable
                var storedKey = this.props.account.get("options").get("memo_key");
                if (this.state.tabsm_memo_key !== storedKey) {
                    throw Error(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.keymismatch"));
                }

                // there should be a message entered
                if (this.state.tabsm_message_text) {
                    this._tabSMPopMessage(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.signing"), 0);
                    _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_7__["default"].signMessage(this.props.account, this.state.tabsm_message_text).then(function (res) {
                        _this2.setState({
                            tabsm_message_signed: res,
                            tabsm_popup: "" // clear loading message
                        });
                    }).catch(function (err) {
                        _this2._tabSMPopMessage(err.message);
                        _this2.setState({
                            tabsm_message_signed: null
                        });
                    });
                }
            } catch (err) {
                this._tabSMPopMessage(err.message);
                this.setState({
                    tabsm_message_signed: null
                });
            }
        }
    }, {
        key: "_tabSMHandleChange",
        value: function _tabSMHandleChange(event) {
            // event for textarea
            this.setState({ tabsm_message_text: event.target.value });
        }
    }, {
        key: "_tabSMHandleChangeKey",
        value: function _tabSMHandleChangeKey(value) {
            // event for textfield of public key
            this.setState({ tabsm_memo_key: value });
        }
    }, {
        key: "_tabSMCopyToClipBoard",
        value: function _tabSMCopyToClipBoard(event) {
            // event when user clicks into the signed message textarea
            if (event.target.value !== "") {
                event.target.focus();
                event.target.select();

                try {
                    var successful = document.execCommand("copy");
                    this._tabSMPopMessage(successful ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.copysuccessful") : counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.copyunsuccessful"));
                } catch (err) {
                    this._tabSMPopMessage(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.copyunsuccessful"));
                }
            }
        }

        /**
         * Displays an information to the user that disappears over time
         *
         * @param message
         * @param timeout
         */

    }, {
        key: "_tabSMPopMessage",
        value: function _tabSMPopMessage(message) {
            var _this3 = this;

            var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3000;

            this.setState({
                tabsm_popup: message
            });

            if (message !== "" && timeout > 0) {
                setTimeout(function () {
                    _this3.setState({
                        tabsm_popup: ""
                    });
                }, timeout);
            }
        }

        /**
         * Event when the user tries to verify a message, either manual through the button or onChange of the textarea.
         * The message is parsed and verified, the user gets the message restated in the bottom part of the site
         *
         * @param event
         */

    }, {
        key: "_tabVMAction",
        value: function _tabVMAction(event) {
            var _this4 = this;

            event.preventDefault();

            // reset to unverified state
            this.setState({
                tabvm_message_signed_and_verified: null,
                tabvm_verified: false
            });

            // attempt verifying
            if (this.state.tabvm_message_signed) {
                this._tabVMPopMessage(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.verifying"), 0);

                setTimeout(function () {
                    // do not block gui
                    try {
                        var message_signed_and_verified = _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_7__["default"].verifyMemo(_this4.state.tabvm_message_signed);
                        _this4.setState({
                            tabvm_message_signed_and_verified: message_signed_and_verified,
                            tabvm_verified: true,
                            tabvm_popup: "" // clear verifying message
                        });
                    } catch (err) {
                        _this4._tabVMPopMessage(err.message);
                        _this4.setState({
                            tabvm_message_signed_and_verified: null,
                            tabvm_verified: false
                        });
                    }
                }, 0);
            }
        }
    }, {
        key: "_tabVMHandleChange",
        value: function _tabVMHandleChange(event) {
            // onchange event of the input textarea
            this.setState({
                tabvm_message_signed: event.target.value,
                tabvm_verified: false,
                tabvm_message_signed_and_verified: null
            });
            if (this.state.tabvm_flag_verifyonchange) {
                this._tabVMAction(event);
            }
        }

        /**
         * Displays an information to the user that disappears over time
         *
         * @param message
         * @param timeout
         */

    }, {
        key: "_tabVMPopMessage",
        value: function _tabVMPopMessage(message) {
            var _this5 = this;

            var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3000;

            this.setState({
                tabvm_popup: message
            });

            if (message !== "" && timeout > 0) {
                setTimeout(function () {
                    _this5.setState({
                        tabvm_popup: ""
                    });
                }, timeout);
            }
        }
    }, {
        key: "_tabVMToggleVerifyOnChange",
        value: function _tabVMToggleVerifyOnChange() {
            // event when the user enables / disables verifying while typing
            this.setState({
                tabvm_flag_verifyonchange: !this.state.tabvm_flag_verifyonchange
            });
        }
    }, {
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tabs"],
                            {
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block",
                                setting: "accountSignedMessagesTab",
                                contentClass: "grid-content shrink small-vertical medium-horizontal padding",
                                segmented: false
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tab"],
                                { title: "account.signedmessages.signmessage" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "grid-content",
                                        style: { overflowX: "hidden" }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "content-block no-margin" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "h3",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.signmessage" })
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_2__["default"], {
                                        ref: "memo_key",
                                        value: this.state.tabsm_memo_key,
                                        label: "account.perm.memo_public_key",
                                        placeholder: "Public Key",
                                        tabIndex: 7,
                                        onChange: this._tabSMHandleChangeKey.bind(this),
                                        disableActionButton: true
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                        rows: "10",
                                        value: this.state.tabsm_message_text,
                                        onChange: this._tabSMHandleChange.bind(this),
                                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.entermessage")
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "button",
                                            {
                                                className: "button",
                                                onClick: this._tabSMSignAction.bind(this)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.sign" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { style: { color: "gray" } },
                                            this.state.tabsm_popup
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                        rows: "14",
                                        value: this.state.tabsm_message_signed,
                                        style: { editable: false },
                                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.automaticcreation"),
                                        onClick: this._tabSMCopyToClipBoard.bind(this)
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tab"],
                                { title: "account.signedmessages.verifymessage" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "grid-content",
                                        style: { overflowX: "hidden" }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "content-block no-margin" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "h3",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.verifymessage" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: {
                                                    float: "right",
                                                    marginTop: "0.1em",
                                                    marginBottom: "0.5em"
                                                }
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "table",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "tr",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        null,
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "label",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.verifyonchange" })
                                                        )
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        null,
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "div",
                                                            {
                                                                className: "switch",
                                                                onClick: this._tabVMToggleVerifyOnChange.bind(this)
                                                            },
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                                type: "checkbox",
                                                                checked: this.state.tabvm_flag_verifyonchange,
                                                                value: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.verifyonchange")
                                                            }),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null)
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                        rows: "10",
                                        value: this.state.tabvm_message_signed,
                                        onChange: this._tabVMHandleChange.bind(this),
                                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.entermessage")
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "button",
                                            {
                                                className: "button",
                                                onClick: this._tabVMAction.bind(this)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.verify" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "text",
                                            { style: { color: "gray" } },
                                            this.state.tabvm_popup
                                        ),
                                        this.state.tabvm_verified !== null && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { style: { float: "right" } },
                                            "Message is:",
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                {
                                                    style: {
                                                        backgroundColor: this.state.tabvm_verified ? "green" : "red"
                                                    }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "label",
                                                    null,
                                                    this.state.tabvm_verified ? "verified" : "not verified"
                                                )
                                            )
                                        ),
                                        (this.state.tabvm_verified && this.state.tabvm_message_signed_and_verified !== null || this.state.tabvm_flag_verifyonchange) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_SignedMessage__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                                message: this.state.tabvm_message_signed
                                            })
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountSignedMessages;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountSignedMessages.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAccount.isRequired
};

AccountSignedMessages = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(AccountSignedMessages);

/* harmony default export */ __webpack_exports__["default"] = (AccountSignedMessages);

/***/ }),

/***/ 2562:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var alt_instance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(542);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(407);
/* harmony import */ var actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(579);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(581);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }







var MSG_HEAD = "-----BEGIN BITSHARES SIGNED MESSAGE-----";
var MSG_META = "-----BEGIN META-----";
var MSG_SIGNATURE = "-----BEGIN SIGNATURE-----";
var MSG_FOOT = "-----END BITSHARES SIGNED MESSAGE-----";
var MSG_SENDER = "account";
var MSG_PUBLICKEY = "memokey";
var MSG_BLOCK = "block";
var MSG_DATE = "timestamp";

/** This action provides following functionalities:
 *    - Sign a message
 *    - Verify a given message
 *
 *  The message format that is underlying is as follows:
 *  -----BEGIN BITSHARES SIGNED MESSAGE-----
 *  <message from the account>
 *  -----BEGIN META-----
 *  account=<account name>
 *  memokey=<account memo public key>
 *  block=<last irreversible block>
 *  timestamp=<current time>
 *  -----BEGIN SIGNATURE-----
 *  <signature>
 *  -----END BITSHARES SIGNED MESSAGE-----
 *
 *    @author Stefan Schiessl <stefan.schiessl@blockchainprojectsbv.com>
 */

var SignedMessageAction = function () {
    function SignedMessageAction() {
        _classCallCheck(this, SignedMessageAction);
    }

    _createClass(SignedMessageAction, [{
        key: "parseMessage",

        /**
         * Parses the given raw string to a processing friendly dictionary
         *
         * @param message Message as raw string, properly formatted with head/meta/signature/footer
         *
         * @returns {*} parsed message as dictionary with the following fields:
         *              content : User message of the message
         *              meta : Dictionary with the meta data
         *                      account : Account name of the signer
         *                      key : Memo public key of the signer
         *                      block : Current last irreversible block of the bitShares blockchain
         *                      timestamp : Time the message was signed in UTC format
         *              signed : Seperate string that contains all data that will be signed (content + meta)
         *              signature : Signature of the signed data
         */
        value: function parseMessage(message) {
            var messageContent = void 0,
                messageMeta = void 0,
                messageSignature = void 0,
                messageSignedContent = void 0;
            try {
                // cut the sections
                messageContent = message.split(MSG_HEAD)[1]; // everything before the head is ignored
                messageMeta = messageContent.split(MSG_META);
                messageContent = messageMeta[0].replace(/^\n|\n$/g, "");
                messageSignature = messageMeta[1].split(MSG_SIGNATURE);
                messageMeta = messageSignature[0].trim();
                messageSignature = messageSignature[1].split(MSG_FOOT)[0].trim(); // everything after footer is ignored

                // how the signed content it built is crucial, consider encapsulating
                messageSignedContent = messageContent + "\n" + messageMeta;
            } catch (err) {
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidformat"));
            }

            var messageMetaAccount = void 0,
                messageMetaKey = void 0,
                messageMetaBlock = void 0,
                messageMetaTimestamp = void 0;
            if (messageMeta) {
                try {
                    // process meta
                    // ... sender
                    messageMetaAccount = messageMeta.split(MSG_SENDER + "=");
                    messageMetaAccount = messageMetaAccount[1].split("\n")[0].trim();

                    // ... and its public key
                    messageMetaKey = messageMeta.split(MSG_PUBLICKEY + "=");
                    messageMetaKey = messageMetaKey[1].split("\n")[0].trim();

                    // ... block number
                    messageMetaBlock = messageMeta.split(MSG_BLOCK + "=");
                    messageMetaBlock = messageMetaBlock[1].split("\n")[0].trim();

                    // ... time stamp
                    messageMetaTimestamp = messageMeta.split(MSG_DATE + "=");
                    messageMetaTimestamp = messageMetaTimestamp[1].split("\n")[0].trim();
                } catch (err) {
                    throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidformat"));
                }
            }

            return {
                content: messageContent,
                meta: {
                    account: messageMetaAccount,
                    key: messageMetaKey,
                    block: messageMetaBlock,
                    timestamp: messageMetaTimestamp
                },
                signed: messageSignedContent,
                signature: messageSignature
            };
        }

        /**
         * The given string message is parsed and then its signature verified. A positive verification return the parsed
         * message, anything else throws an exeption.
         *
         * @param message Message as raw string, properly formatted with head/meta/signature/footer, or already parsed message
         *
         * @returns parsed message, see parseMessage
         */

    }, {
        key: "verifyMemo",
        value: function verifyMemo(message) {
            var message_signed = void 0;
            if (typeof message === "string" || message instanceof String) {
                message_signed = this.parseMessage(message);
            } else {
                // assume its a dictionary
                message_signed = message;
            }

            // validate account and key
            var storedAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getAccount(message_signed.meta.account);
            if (storedAccount == null) {
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invaliduser"));
            }

            // verify message signed
            var verified = false;
            try {
                verified = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["Signature"].fromHex(message_signed.signature).verifyBuffer(message_signed.signed, bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["PublicKey"].fromPublicKeyString(message_signed.meta.key));
            } catch (err) {
                // wrap message that could be raised from Signature
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.errorverifying"));
            }
            if (!verified) {
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidsignature"));
            }
            return message_signed;
        }

        /**
         * Given an account and the message text
         * @param account Account that writes the message
         * @param messageText String text of the message
         * @returns {Promise}
         */

    }, {
        key: "signMessage",
        value: function signMessage(account, messageText) {
            return new Promise(function (resolve, reject) {
                // make sure wallet is unlocked (we need private key)
                actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_3__["default"].unlock().then(function () {
                    try {
                        // obtain all necessary keys
                        var memo_from_public = account.get("options").get("memo_key");
                        // The 1s are base58 for all zeros (null)
                        if (/111111111111111111111/.test(memo_from_public)) {
                            memo_from_public = null;
                        }
                        var memo_from_privkey = void 0;
                        if (messageText && memo_from_public) {
                            memo_from_privkey = stores_WalletDb__WEBPACK_IMPORTED_MODULE_4__["default"].getPrivateKey(memo_from_public);
                            if (!memo_from_privkey) {
                                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidkey"));
                            }
                        }
                        // get other meta data
                        var irr_block = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getObject("2.1.0").get("last_irreversible_block_num");
                        var now = new Date();

                        var meta = MSG_SENDER + "=" + account.get("name") + "\n" + MSG_PUBLICKEY + "=" + memo_from_public + "\n" + MSG_BLOCK + "=" + irr_block + "\n" + MSG_DATE + "=" + now.toUTCString();

                        var messageContentToBeSigned = messageText + "\n" + meta;

                        setTimeout(function () {
                            // do not block gui
                            try {
                                var memo_signature = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["Signature"].signBuffer(messageContentToBeSigned, memo_from_privkey, memo_from_public);
                                var memo_formatted = MSG_HEAD + "\n" + messageText + "\n" + MSG_META + "\n" + meta + "\n" + MSG_SIGNATURE + "\n" + memo_signature.toHex() + "\n" + MSG_FOOT;
                                resolve(memo_formatted);
                            } catch (err) {
                                reject(err);
                            }
                        }, 0);
                    } catch (err) {
                        reject(err);
                    }
                }).catch(function (res) {
                    reject(res);
                });
            });
        }
    }]);

    return SignedMessageAction;
}();

/* harmony default export */ __webpack_exports__["default"] = (alt_instance__WEBPACK_IMPORTED_MODULE_0__["default"].createActions(SignedMessageAction));

/***/ }),

/***/ 2563:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2562);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }







/** This component allows to display and verify a signed message
 *
 *  See SignedMessageAction for details on message format.
 *
 *    @author Stefan Schiessl <stefan.schiessl@blockchainprojectsbv.com>
 */

var SignedMessage = function (_React$Component) {
    _inherits(SignedMessage, _React$Component);

    function SignedMessage(props) {
        _classCallCheck(this, SignedMessage);

        var _this = _possibleConstructorReturn(this, (SignedMessage.__proto__ || Object.getPrototypeOf(SignedMessage)).call(this, props));

        _this.state = {
            message: _this.props.message,
            messageParsed: null,
            showRawMessage: false,
            //
            noVerification: _this.props.noVerification,
            //
            verified: null,
            //
            notification: null
        };
        return _this;
    }
    // static propTypes = {
    //     signedMessage: PropTypes.string.isRequired
    //    noVerification
    // };

    _createClass(SignedMessage, [{
        key: "_verifyMessage",
        value: function _verifyMessage(signedMessage) {
            var _this2 = this;

            this.setState({
                message: signedMessage,
                messageParsed: null,
                verified: null
            });
            var messageParsed = null;
            try {
                messageParsed = _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_4__["default"].parseMessage(signedMessage);
                this.setState({
                    verified: null,
                    messageParsed: messageParsed
                });

                if (!this.state.noVerification) {
                    this.setState({
                        verified: null,
                        notification: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.signedmessages.verifying")
                    });
                    setTimeout(function () {
                        // do not block gui
                        try {
                            _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_4__["default"].verifyMemo(messageParsed);
                            _this2.setState({
                                verified: true,
                                notification: "" // clear popup
                            });
                        } catch (err) {
                            _this2._warning(err.message);
                            _this2.setState({
                                verified: false
                            });
                        }
                    }, 0);
                }
            } catch (err) {
                this._warning(err.message);
            }
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            this._verifyMessage(this.state.message);
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            var signedMessage = nextProps.message;
            if (signedMessage != undefined && signedMessage != null && signedMessage == this.state.message) {
                // already done
                return;
            }
            this._verifyMessage(signedMessage);
        }
    }, {
        key: "_warning",
        value: function _warning(message) {
            this.setState({
                notification: message
            });
        }
    }, {
        key: "_toggleRawMessage",
        value: function _toggleRawMessage() {
            this.setState({
                showRawMessage: !this.state.showRawMessage
            });
        }
    }, {
        key: "render",
        value: function render() {
            var legendMessage = void 0;
            var borderColor = void 0;
            if (this.state.messageParsed != null) {
                if (this.state.verified == null) {
                    borderColor = "#FFF";
                    legendMessage = "Unverified message from " + this.state.messageParsed.meta.account;
                } else if (this.state.verified) {
                    borderColor = "#FFF";
                    legendMessage = "Verified message from " + this.state.messageParsed.meta.account;
                } else {
                    borderColor = "#F00";
                    legendMessage = "Refuted message, indicated sender " + this.state.messageParsed.meta.account;
                }
            }
            var messageGiven = this.props.message != null && this.props.message != "";
            var notificationGiven = this.state.notification && this.state.notification != "";
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { style: { color: "gray", margin: "10px 10px" } },
                this.state.messageParsed != null && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "fieldset",
                    { style: { borderColor: borderColor } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "legend",
                        { style: { color: "white", weight: "bold" } },
                        legendMessage
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "pre",
                        {
                            style: {
                                position: "relative",
                                width: "100%",
                                display: "table"
                            }
                        },
                        this.state.messageParsed.content,
                        notificationGiven && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                style: {
                                    textAlign: "center",
                                    display: "table-cell",
                                    verticalAlign: "middle",
                                    position: "absolute",
                                    width: "calc(100% - 30px)",
                                    height: "calc(100% + 15px)",
                                    top: "0px",
                                    right: "30px",
                                    backgroundColor: "rgba(50,50,50,0.5)"
                                },
                                id: "overlay"
                            },
                            this.state.notification
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                fontSize: "small",
                                float: "right"
                            }
                        },
                        "Signed on ",
                        this.state.messageParsed.meta.timestamp,
                        " ",
                        "\xA0",
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                className: "button",
                                type: "button",
                                style: {
                                    fontSize: "small",
                                    float: "right",
                                    padding: "0px 0px",
                                    background: "#777"
                                },
                                onClick: this._toggleRawMessage.bind(this)
                            },
                            "\uD83D\uDD0D"
                        )
                    ),
                    this.state.showRawMessage && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                    this.state.showRawMessage && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                    this.state.showRawMessage && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            style: {
                                overflow: "auto",
                                width: "calc(100%)",
                                maxWidth: "1000px"
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "pre",
                            null,
                            this.state.message
                        )
                    )
                ),
                messageGiven && this.state.messageParsed == null && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "fieldset",
                    { style: { borderColor: "#F00" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "legend",
                        {
                            style: { color: "red", weight: "bold" },
                            className: "error"
                        },
                        "Error while parsing message, please check syntax from message below"
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "pre",
                        null,
                        this.props.message
                    )
                )
            );
        }
    }]);

    return SignedMessage;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

SignedMessage.defaultProps = {
    noVerification: false
};


/* harmony default export */ __webpack_exports__["default"] = (SignedMessage);

/***/ }),

/***/ 2564:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2515);
/* harmony import */ var chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2306);
/* harmony import */ var chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2189);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1832);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1833);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2303);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(577);
/* harmony import */ var stores_WalletDb_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(581);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }













var AccountRow = function (_React$Component) {
    _inherits(AccountRow, _React$Component);

    function AccountRow() {
        _classCallCheck(this, AccountRow);

        return _possibleConstructorReturn(this, (AccountRow.__proto__ || Object.getPrototypeOf(AccountRow)).apply(this, arguments));
    }

    _createClass(AccountRow, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                account = _props.account,
                onRemove = _props.onRemove;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    this.props.index
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    account.get("id")
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_8__["default"], { account: account.get("id") })
                ),
                onRemove ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            onClick: onRemove.bind(this, account.get("id")),
                            className: "button outline"
                        },
                        "Remove"
                    )
                ) : null
            );
        }
    }]);

    return AccountRow;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountRow.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_6__["default"].ChainAccount.isRequired
};
AccountRow.defaultProps = {
    tempComponent: "tr"
};

AccountRow = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(AccountRow);

var AccountList = function (_React$Component2) {
    _inherits(AccountList, _React$Component2);

    function AccountList() {
        _classCallCheck(this, AccountList);

        return _possibleConstructorReturn(this, (AccountList.__proto__ || Object.getPrototypeOf(AccountList)).apply(this, arguments));
    }

    _createClass(AccountList, [{
        key: "_onRemove",
        value: function _onRemove(listing, account, e) {
            if (account) {
                var currentState = this.props.getCurrentState(account);
                var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_9__["default"].new_transaction();
                tr.add_type_operation("account_whitelist", {
                    fee: {
                        amount: 0,
                        asset_id: "1.3.0"
                    },
                    authorizing_account: this.props.account.get("id"),
                    account_to_list: account,
                    new_listing: currentState - chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing[listing]
                });
                stores_WalletDb_js__WEBPACK_IMPORTED_MODULE_10__["default"].process_transaction(tr, null, true);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props2 = this.props,
                removeButton = _props2.removeButton,
                white = _props2.white,
                list = _props2.list;


            var rows = list.map(function (account, index) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountRow, {
                    key: account,
                    onRemove: removeButton ? _this3._onRemove.bind(_this3, white ? "white_listed" : "black_listed") : null,
                    account: account,
                    index: index + 1
                });
            }).toArray();

            var showHeaders = true;
            if (!rows.length) {
                showHeaders = false;
                rows.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: "empty" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { padding: "1rem 0" },
                            colSpan: removeButton ? 4 : 3
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, {
                            content: this.props.emptyText,
                            account: this.props.account.get("name")
                        })
                    )
                ));
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "table",
                { className: "table compact dashboard-table" },
                showHeaders ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "thead",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tr",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            "#"
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.id" })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.name" })
                        ),
                        removeButton ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null) : null
                    )
                ) : null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tbody",
                    null,
                    rows
                )
            );
        }
    }]);

    return AccountList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var AccountWhitelist = function (_React$Component3) {
    _inherits(AccountWhitelist, _React$Component3);

    function AccountWhitelist() {
        _classCallCheck(this, AccountWhitelist);

        var _this4 = _possibleConstructorReturn(this, (AccountWhitelist.__proto__ || Object.getPrototypeOf(AccountWhitelist)).call(this));

        _this4.state = {
            accountName: "",
            accountToList: null
        };
        return _this4;
    }

    _createClass(AccountWhitelist, [{
        key: "_getCurrentState",
        value: function _getCurrentState(id) {
            var account = this.props.account;

            var white = account.get("whitelisted_accounts") || immutable__WEBPACK_IMPORTED_MODULE_4___default.a.List();
            var black = account.get("blacklisted_accounts") || immutable__WEBPACK_IMPORTED_MODULE_4___default.a.List();
            var current = chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing.no_listing;

            if (white.includes(id)) {
                current += chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing.white_listed;
            }

            if (black.includes(id)) {
                current += chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing.black_listed;
            }

            return current;
        }
    }, {
        key: "_onAdd",
        value: function _onAdd(listing, e) {
            var accountToList = this.state.accountToList;
            var account = this.props.account;


            var currentState = this._getCurrentState(accountToList);

            if (accountToList) {
                var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_9__["default"].new_transaction();
                tr.add_type_operation("account_whitelist", {
                    fee: {
                        amount: 0,
                        asset_id: "1.3.0"
                    },
                    authorizing_account: account.get("id"),
                    account_to_list: accountToList,
                    new_listing: currentState + chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing[listing]
                });
                stores_WalletDb_js__WEBPACK_IMPORTED_MODULE_10__["default"].process_transaction(tr, null, true);
            }
        }
    }, {
        key: "_onAccountFound",
        value: function _onAccountFound(account) {
            console.log("accountFound:", account);
            this.setState({
                accountName: account ? account.get("name") : null,
                accountToList: account ? account.get("id") : null
            });
        }
    }, {
        key: "_onAccountChanged",
        value: function _onAccountChanged(account) {
            console.log("account changed:", account);
            this.setState({
                accountName: account,
                accountToList: null
            });
        }
    }, {
        key: "render",
        value: function render() {
            var account = this.props.account;
            var accountName = this.state.accountName;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tabs"],
                            {
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block",
                                setting: "whitelistTab",
                                contentClass: "grid-content shrink small-vertical medium-horizontal no-padding",
                                segmented: false
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tab"],
                                { title: "account.whitelist.title" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty",
                                            account: account,
                                            getCurrentState: this._getCurrentState.bind(this),
                                            list: account.get("whitelisted_accounts") || immutable__WEBPACK_IMPORTED_MODULE_4___default.a.List(),
                                            removeButton: true,
                                            white: true
                                        })
                                    ),
                                    !account.get("whitelisted_accounts") ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "has-error" },
                                        "Please note, whitelisting is not working yet due to unresolved backend issue."
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { padding: "2rem 0" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                            label: "account.whitelist.add",
                                            accountName: accountName,
                                            onAccountChanged: this._onAccountFound.bind(this),
                                            onChange: this._onAccountChanged.bind(this),
                                            account: accountName,
                                            tabIndex: 2,
                                            onAction: this._onAdd.bind(this, "white_listed"),
                                            action_label: "account.perm.confirm_add",
                                            white: false,
                                            typeahead: true
                                        })
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tab"],
                                { title: "account.whitelist.black" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty_black",
                                            account: account,
                                            getCurrentState: this._getCurrentState.bind(this),
                                            list: account.get("blacklisted_accounts"),
                                            removeButton: true
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { padding: "2rem 1rem" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                            label: "account.whitelist.add_black",
                                            accountName: accountName,
                                            onAccountChanged: this._onAccountFound.bind(this),
                                            onChange: this._onAccountChanged.bind(this),
                                            account: accountName,
                                            tabIndex: 2,
                                            onAction: this._onAdd.bind(this, "black_listed"),
                                            action_label: "account.perm.confirm_add",
                                            typeahead: true
                                        })
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tab"],
                                { title: "account.whitelist.white_by" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty_white_by",
                                            account: account,
                                            list: account.get("whitelisting_accounts")
                                        })
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tab"],
                                { title: "account.whitelist.black_by" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty_black_by",
                                            account: account,
                                            list: account.get("blacklisting_accounts")
                                        })
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountWhitelist;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountWhitelist);

/***/ }),

/***/ 2565:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(557);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(407);
/* harmony import */ var _WorkerApproval__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2566);
/* harmony import */ var _VotingAccountsList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2567);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(931);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2515);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1833);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1832);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(716);
/* harmony import */ var api_ApplicationApi__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(578);
/* harmony import */ var _AccountSelector__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2189);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(774);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2185);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2438);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(1969);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(701);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






















var AccountVoting = function (_React$Component) {
    _inherits(AccountVoting, _React$Component);

    function AccountVoting(props) {
        _classCallCheck(this, AccountVoting);

        var _this = _possibleConstructorReturn(this, (AccountVoting.__proto__ || Object.getPrototypeOf(AccountVoting)).call(this, props));

        _this.onRemoveProxy = function () {
            _this.publish(null);
        };

        var proxyId = props.proxy.get("id");
        var proxyName = props.proxy.get("name");
        _this.state = {
            proxy_account_id: proxyId === "1.2.5" ? "" : proxyId, //"1.2.16",
            prev_proxy_account_id: proxyId === "1.2.5" ? "" : proxyId,
            current_proxy_input: proxyId === "1.2.5" ? "" : proxyName,
            witnesses: null,
            committee: null,
            vote_ids: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(),
            proxy_vote_ids: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(),
            lastBudgetObject: props.initialBudget.get("id"),
            workerTableIndex: props.viewSettings.get("workerTableIndex", 1),
            all_witnesses: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
            all_committee: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List()
        };
        _this.onProxyAccountFound = _this.onProxyAccountFound.bind(_this);
        _this.onPublish = _this.onPublish.bind(_this);
        _this.onReset = _this.onReset.bind(_this);
        _this._getVoteObjects = _this._getVoteObjects.bind(_this);
        return _this;
    }

    _createClass(AccountVoting, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            common_account_utils__WEBPACK_IMPORTED_MODULE_3__["default"].getFinalFeeAsset(this.props.account, "account_update");
            bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].fetchAllWorkers();
            this.getBudgetObject();
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            this.updateAccountData(this.props);
            this._getVoteObjects();
            this._getVoteObjects("committee");
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.account !== this.props.account) {
                var proxyId = np.proxy.get("id");
                var newState = {
                    proxy_account_id: proxyId === "1.2.5" ? "" : proxyId
                };
                this.setState({ prev_proxy_account_id: newState.proxy_account_id });
                this.updateAccountData(np, newState);
            }
            this.getBudgetObject();
        }
    }, {
        key: "updateAccountData",
        value: function updateAccountData(_ref) {
            var _this2 = this;

            var account = _ref.account;
            var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state;
            var proxy_account_id = state.proxy_account_id;

            var proxy = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAccount(proxy_account_id);
            var options = account.get("options");
            var proxyOptions = proxy ? proxy.get("options") : null;
            // let proxy_account_id = proxy ? proxy.get("id") : "1.2.5";
            var current_proxy_input = proxy ? proxy.get("name") : "";
            if (proxy_account_id === "1.2.5") {
                proxy_account_id = "";
                current_proxy_input = "";
            }

            var votes = options.get("votes");
            var vote_ids = votes.toArray();
            var vids = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(vote_ids);
            bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObjectsByVoteIds(vote_ids);

            var proxyPromise = null,
                proxy_vids = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set([]);
            var hasProxy = proxy_account_id !== "1.2.5";
            if (hasProxy && proxyOptions) {
                var proxy_votes = proxyOptions.get("votes");
                var proxy_vote_ids = proxy_votes.toArray();
                proxy_vids = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(proxy_vote_ids);
                bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObjectsByVoteIds(proxy_vote_ids);

                proxyPromise = Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObjectByVoteID, proxy_vote_ids, 10000);
            }

            Promise.all([Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObjectByVoteID, vote_ids, 10000), proxyPromise]).then(function (res) {
                var _res = _slicedToArray(res, 2),
                    vote_objs = _res[0],
                    proxy_vote_objs = _res[1];

                function sortVoteObjects(objects) {
                    var witnesses = new immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List();
                    var committee = new immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List();
                    var workers = new immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set();
                    objects.forEach(function (obj) {
                        var account_id = obj.get("committee_member_account");
                        if (account_id) {
                            committee = committee.push(account_id);
                        } else if (account_id = obj.get("worker_account")) {
                            // console.log( "worker: ", obj );
                            //     workers = workers.add(obj.get("id"));
                        } else if (account_id = obj.get("witness_account")) {
                            witnesses = witnesses.push(account_id);
                        }
                    });

                    return { witnesses: witnesses, committee: committee, workers: workers };
                }

                var _sortVoteObjects = sortVoteObjects(vote_objs),
                    witnesses = _sortVoteObjects.witnesses,
                    committee = _sortVoteObjects.committee,
                    workers = _sortVoteObjects.workers;

                var _sortVoteObjects2 = sortVoteObjects(proxy_vote_objs || []),
                    proxy_witnesses = _sortVoteObjects2.witnesses,
                    proxy_committee = _sortVoteObjects2.committee,
                    proxy_workers = _sortVoteObjects2.workers;

                var state = {
                    proxy_account_id: proxy_account_id,
                    current_proxy_input: current_proxy_input,
                    witnesses: witnesses,
                    committee: committee,
                    workers: workers,
                    proxy_witnesses: proxy_witnesses,
                    proxy_committee: proxy_committee,
                    proxy_workers: proxy_workers,
                    vote_ids: vids,
                    proxy_vote_ids: proxy_vids,
                    prev_witnesses: witnesses,
                    prev_committee: committee,
                    prev_workers: workers,
                    prev_vote_ids: vids
                };
                _this2.setState(state);
            });
        }
    }, {
        key: "isChanged",
        value: function isChanged() {
            var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state;

            return s.proxy_account_id !== s.prev_proxy_account_id || s.witnesses !== s.prev_witnesses || s.committee !== s.prev_committee || !immutable__WEBPACK_IMPORTED_MODULE_1___default.a.is(s.vote_ids, s.prev_vote_ids);
        }
    }, {
        key: "_getVoteObjects",
        value: function _getVoteObjects() {
            var _this3 = this;

            var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "witnesses";
            var vote_ids = arguments[1];

            var current = this.state["all_" + type];
            var isWitness = type === "witnesses";
            var lastIdx = void 0;
            if (!vote_ids) {
                vote_ids = [];
                var active = this.props.globalObject.get(isWitness ? "active_witnesses" : "active_committee_members").sort(function (a, b) {
                    return parseInt(a.split(".")[2], 10) - parseInt(b.split(".")[2], 10);
                });
                var lastActive = active.last() || "1." + (isWitness ? "6" : "5") + ".1";
                lastIdx = parseInt(lastActive.split(".")[2], 10);
                for (var i = 1; i <= lastIdx + 10; i++) {
                    vote_ids.push("1." + (isWitness ? "6" : "5") + "." + i);
                }
            } else {
                lastIdx = parseInt(vote_ids[vote_ids.length - 1].split(".")[2], 10);
            }
            Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject, vote_ids, 5000, {}).then(function (vote_objs) {
                _this3.state["all_" + type] = current.concat(immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(vote_objs.filter(function (a) {
                    return !!a;
                }).map(function (a) {
                    return a.get(isWitness ? "witness_account" : "committee_member_account");
                })));
                if (!!vote_objs[vote_objs.length - 1]) {
                    // there are more valid vote objs, fetch 10 more
                    vote_ids = [];
                    for (var i = lastIdx + 11; i <= lastIdx + 20; i++) {
                        vote_ids.push("1." + (isWitness ? "6" : "5") + "." + i);
                    }
                    return _this3._getVoteObjects(type, vote_ids);
                }
                _this3.forceUpdate();
            });
        }
    }, {
        key: "onPublish",
        value: function onPublish() {
            this.publish(this.state.proxy_account_id);
        }
    }, {
        key: "publish",
        value: function publish(new_proxy_id) {
            var _this4 = this;

            var updated_account = this.props.account.toJS();
            var updateObject = { account: updated_account.id };
            var new_options = { memo_key: updated_account.options.memo_key };
            // updated_account.new_options = updated_account.options;
            new_options.voting_account = new_proxy_id ? new_proxy_id : "1.2.5";
            new_options.num_witness = this.state.witnesses.size;
            new_options.num_committee = this.state.committee.size;

            updateObject.new_options = new_options;
            // Set fee asset
            updateObject.fee = {
                amount: 0,
                asset_id: common_account_utils__WEBPACK_IMPORTED_MODULE_3__["default"].getFinalFeeAsset(updated_account.id, "account_update")
            };

            // Remove votes for expired workers
            var vote_ids = this.state.vote_ids;

            var workers = this._getWorkerArray();
            var now = new Date();

            function removeVote(list, vote) {
                if (list.includes(vote)) {
                    list = list.delete(vote);
                }
                return list;
            }

            workers.forEach(function (worker) {
                if (worker) {
                    if (new Date(worker.get("work_end_date")) <= now) {
                        vote_ids = removeVote(vote_ids, worker.get("vote_for"));
                    }

                    // TEMP Remove vote_against since they're no longer used
                    vote_ids = removeVote(vote_ids, worker.get("vote_against"));
                }
            });

            // Submit votes
            Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getWitnessById, this.state.witnesses.toArray(), 4000).then(function (res) {
                var witnesses_vote_ids = res.map(function (o) {
                    return o.get("vote_id");
                });
                return Promise.all([Promise.resolve(witnesses_vote_ids), Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getCommitteeMemberById, _this4.state.committee.toArray(), 4000)]);
            }).then(function (res) {
                updateObject.new_options.votes = res[0].concat(res[1].map(function (o) {
                    return o.get("vote_id");
                })).concat(vote_ids.filter(function (id) {
                    return id.split(":")[0] === "2";
                }).toArray()).sort(function (a, b) {
                    var a_split = a.split(":");
                    var b_split = b.split(":");

                    return parseInt(a_split[1], 10) - parseInt(b_split[1], 10);
                });
                api_ApplicationApi__WEBPACK_IMPORTED_MODULE_12__["default"].updateAccount(updateObject);
            });
        }
    }, {
        key: "onReset",
        value: function onReset() {
            var _this5 = this;

            var s = this.state;
            if (this.refs.voting_proxy && this.refs.voting_proxy.refs.bound_component) this.refs.voting_proxy.refs.bound_component.onResetProxy();
            this.setState({
                proxy_account_id: s.prev_proxy_account_id,
                current_proxy_input: s.prev_proxy_input,
                witnesses: s.prev_witnesses,
                committee: s.prev_committee,
                workers: s.prev_workers,
                vote_ids: s.prev_vote_ids
            }, function () {
                _this5.updateAccountData(_this5.props);
            });
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(collection, item_id) {
            var state = {};
            state[collection] = this.state[collection].push(item_id);
            this.setState(state);
        }
    }, {
        key: "onRemoveItem",
        value: function onRemoveItem(collection, item_id) {
            var state = {};
            state[collection] = this.state[collection].filter(function (i) {
                return i !== item_id;
            });
            this.setState(state);
        }
    }, {
        key: "onChangeVotes",
        value: function onChangeVotes(addVotes, removeVotes) {
            var state = {};
            state.vote_ids = this.state.vote_ids;
            if (addVotes.length) {
                addVotes.forEach(function (vote) {
                    state.vote_ids = state.vote_ids.add(vote);
                });
            }
            if (removeVotes) {
                removeVotes.forEach(function (vote) {
                    state.vote_ids = state.vote_ids.delete(vote);
                });
            }

            this.setState(state);
        }
    }, {
        key: "validateAccount",
        value: function validateAccount(collection, account) {
            if (!account) return null;
            if (collection === "witnesses") {
                return Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getWitnessById, [account.get("id")], 3000).then(function (res) {
                    return res[0] ? null : "Not a witness";
                });
            }
            if (collection === "committee") {
                return Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getCommitteeMemberById, [account.get("id")], 3000).then(function (res) {
                    return res[0] ? null : "Not a committee member";
                });
            }
            return null;
        }
    }, {
        key: "onProxyChange",
        value: function onProxyChange(current_proxy_input) {
            var proxyAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAccount(current_proxy_input);
            if (!proxyAccount || proxyAccount && proxyAccount.get("id") !== this.state.proxy_account_id) {
                this.setState({
                    proxy_account_id: "",
                    proxy_witnesses: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(),
                    proxy_committee: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(),
                    proxy_workers: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set()
                });
            }
            this.setState({ current_proxy_input: current_proxy_input });
        }
    }, {
        key: "onProxyAccountFound",
        value: function onProxyAccountFound(proxy_account) {
            var _this6 = this;

            var proxy_account_id = proxy_account ? proxy_account.get("id") : "";
            if (this.state.proxy_account_id !== proxy_account_id) this.setState({
                proxy_account_id: proxy_account_id
            }, function () {
                _this6.updateAccountData(_this6.props);
            });
        }
    }, {
        key: "onClearProxy",
        value: function onClearProxy() {
            this.setState({
                proxy_account_id: ""
            });
        }
    }, {
        key: "_getTotalVotes",
        value: function _getTotalVotes(worker) {
            return parseInt(worker.get("total_votes_for"), 10) - parseInt(worker.get("total_votes_against"), 10);
        }
    }, {
        key: "getBudgetObject",
        value: function getBudgetObject() {
            var _this7 = this;

            var lastBudgetObject = this.state.lastBudgetObject;

            var budgetObject = void 0;
            budgetObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(lastBudgetObject);
            var idIndex = parseInt(lastBudgetObject.split(".")[2], 10);
            if (budgetObject) {
                var timestamp = budgetObject.get("time");
                if (!/Z$/.test(timestamp)) {
                    timestamp += "Z";
                }
                var now = new Date();

                /* Use the last valid budget object to estimate the current budget object id.
                ** Budget objects are created once per hour
                */
                var currentID = idIndex + Math.floor((now - new Date(timestamp).getTime()) / 1000 / 60 / 60) - 1;
                if (idIndex >= currentID) return;
                var newID = "2.13." + Math.max(idIndex, currentID);
                var newIDInt = parseInt(newID.split(".")[2], 10);
                Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject, [newID], undefined, {}).then(function (res) {
                    var _res2 = _slicedToArray(res, 1),
                        lbo = _res2[0];

                    if (lbo === null) {
                        // The object does not exist, the id was too high
                        _this7.setState({ lastBudgetObject: "2.13." + (newIDInt - 1) }, _this7.getBudgetObject);
                    } else {
                        stores_SettingsStore__WEBPACK_IMPORTED_MODULE_19__["default"].setLastBudgetObject(newID);

                        _this7.setState({ lastBudgetObject: newID });
                    }
                });
            } else {
                // The object does not exist, decrement the ID
                var _newID = "2.13." + (idIndex - 1);
                Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject, [_newID], undefined, {}).then(function (res) {
                    var _res3 = _slicedToArray(res, 1),
                        lbo = _res3[0];

                    if (lbo === null) {
                        // The object does not exist, the id was too high
                        _this7.setState({ lastBudgetObject: "2.13." + (idIndex - 2) }, _this7.getBudgetObject);
                    } else {
                        stores_SettingsStore__WEBPACK_IMPORTED_MODULE_19__["default"].setLastBudgetObject(_newID);
                        _this7.setState({ lastBudgetObject: _newID });
                    }
                });
            }
        }
    }, {
        key: "_getWorkerArray",
        value: function _getWorkerArray() {
            var workerArray = [];

            bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].workers.forEach(function (workerId) {
                var worker = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(workerId, false, false);
                if (worker) workerArray.push(worker);
            });

            return workerArray;
        }
    }, {
        key: "_setWorkerTableIndex",
        value: function _setWorkerTableIndex(index) {
            this.setState({
                workerTableIndex: index
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this8 = this;

            var _state = this.state,
                workerTableIndex = _state.workerTableIndex,
                prev_proxy_account_id = _state.prev_proxy_account_id;

            var accountHasProxy = !!prev_proxy_account_id;
            var preferredUnit = this.props.settings.get("unit") || "1.3.0";
            var hasProxy = !!this.state.proxy_account_id; // this.props.account.getIn(["options", "voting_account"]) !== "1.2.5";
            var publish_buttons_class = classnames__WEBPACK_IMPORTED_MODULE_7___default()("button", {
                disabled: !this.isChanged()
            });
            var globalObject = this.props.globalObject;

            var budgetObject = void 0;
            if (this.state.lastBudgetObject) {
                budgetObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(this.state.lastBudgetObject);
            }

            var totalBudget = 0;
            // let unusedBudget = 0;
            var workerBudget = globalObject ? parseInt(globalObject.getIn(["parameters", "worker_budget_per_day"]), 10) : 0;

            if (budgetObject) {
                workerBudget = Math.min(24 * budgetObject.getIn(["record", "worker_budget"]), workerBudget);
                totalBudget = Math.min(24 * budgetObject.getIn(["record", "worker_budget"]), workerBudget);
            }

            var now = new Date();
            var workerArray = this._getWorkerArray();

            var voteThreshold = 0;
            var workers = workerArray.filter(function (a) {
                if (!a) {
                    return false;
                }

                return new Date(a.get("work_end_date") + "Z") > now && new Date(a.get("work_begin_date") + "Z") <= now;
            }).sort(function (a, b) {
                return _this8._getTotalVotes(b) - _this8._getTotalVotes(a);
            }).map(function (worker, index) {
                var dailyPay = parseInt(worker.get("daily_pay"), 10);
                workerBudget = workerBudget - dailyPay;
                var votes = worker.get("total_votes_for") - worker.get("total_votes_against");
                if (workerBudget <= 0 && !voteThreshold) {
                    voteThreshold = votes;
                }

                if (voteThreshold && votes < voteThreshold) return null;

                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_WorkerApproval__WEBPACK_IMPORTED_MODULE_5__["default"], {
                    preferredUnit: preferredUnit,
                    rest: workerBudget + dailyPay,
                    rank: index + 1,
                    key: worker.get("id"),
                    worker: worker.get("id"),
                    vote_ids: _this8.state[hasProxy ? "proxy_vote_ids" : "vote_ids"],
                    onChangeVotes: _this8.onChangeVotes.bind(_this8),
                    proxy: hasProxy,
                    voteThreshold: voteThreshold
                });
            }).filter(function (a) {
                return !!a;
            });

            // unusedBudget = Math.max(0, workerBudget);

            var newWorkers = workerArray.filter(function (a) {
                if (!a) {
                    return false;
                }

                var votes = a.get("total_votes_for") - a.get("total_votes_against");
                return new Date(a.get("work_end_date") + "Z") > now && votes < voteThreshold || new Date(a.get("work_begin_date") + "Z") > now;
            }).sort(function (a, b) {
                return _this8._getTotalVotes(b) - _this8._getTotalVotes(a);
            }).map(function (worker, index) {
                // let dailyPay = parseInt(worker.get("daily_pay"), 10);
                // workerBudget = workerBudget - dailyPay;

                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_WorkerApproval__WEBPACK_IMPORTED_MODULE_5__["default"], {
                    preferredUnit: preferredUnit,
                    rest: 0,
                    rank: index + 1,
                    key: worker.get("id"),
                    worker: worker.get("id"),
                    vote_ids: _this8.state[hasProxy ? "proxy_vote_ids" : "vote_ids"],
                    onChangeVotes: _this8.onChangeVotes.bind(_this8),
                    proxy: hasProxy,
                    voteThreshold: voteThreshold
                });
            });

            var expiredWorkers = workerArray.filter(function (a) {
                if (!a) {
                    return false;
                }

                return new Date(a.get("work_end_date")) <= now;
            }).sort(function (a, b) {
                return _this8._getTotalVotes(b) - _this8._getTotalVotes(a);
            }).map(function (worker, index) {
                // let dailyPay = parseInt(worker.get("daily_pay"), 10);
                // workerBudget = workerBudget - dailyPay;

                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_WorkerApproval__WEBPACK_IMPORTED_MODULE_5__["default"], {
                    preferredUnit: preferredUnit,
                    rest: 0,
                    rank: index + 1,
                    key: worker.get("id"),
                    worker: worker.get("id"),
                    vote_ids: _this8.state[hasProxy ? "proxy_vote_ids" : "vote_ids"],
                    onChangeVotes: _this8.onChangeVotes.bind(_this8),
                    proxy: hasProxy,
                    voteThreshold: voteThreshold
                });
            });

            var actionButtons = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_7___default()(publish_buttons_class, {
                            success: this.isChanged()
                        }),
                        onClick: this.onPublish,
                        tabIndex: 4
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.publish" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: "button " + publish_buttons_class,
                        onClick: this.onReset,
                        tabIndex: 8
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.reset" })
                ),
                accountHasProxy && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: "button",
                        onClick: this.onRemoveProxy,
                        tabIndex: 9
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.remove_proxy" })
                )
            );

            var proxyInput = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                _AccountSelector__WEBPACK_IMPORTED_MODULE_13__["default"],
                {
                    style: { width: "50%", maxWidth: 250, marginBottom: 10 },
                    account: this.state.current_proxy_input,
                    accountName: this.state.current_proxy_input,
                    onChange: this.onProxyChange.bind(this),
                    onAccountChanged: this.onProxyAccountFound,
                    tabIndex: 1,
                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_16___default.a.translate("account.votes.set_proxy"),
                    tooltip: counterpart__WEBPACK_IMPORTED_MODULE_16___default.a.translate(!this.state.proxy_account_id ? "tooltip.proxy_search" : "tooltip.proxy_remove"),
                    hideImage: true
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    {
                        style: {
                            paddingLeft: 5,
                            position: "relative",
                            top: 9,
                            display: hasProxy ? "" : "none"
                        }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_14__["default"], { name: "locked", size: "1x" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    {
                        style: {
                            paddingLeft: 5,
                            position: "relative",
                            top: 9,
                            display: !hasProxy ? "" : "none"
                        }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Link"],
                        { to: "/help/voting" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_14__["default"], {
                            name: "question-circle",
                            title: "icons.question_circle",
                            size: "1x"
                        })
                    )
                )
            );

            var showExpired = workerTableIndex === 2;

            var saveText = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                {
                    className: "inline-block",
                    style: {
                        float: "right",
                        visibility: this.isChanged() ? "visible" : "hidden",
                        color: "red",
                        padding: "0.85rem",
                        fontSize: "0.9rem"
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.save_finish" })
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__["Tabs"],
                            {
                                setting: "votingTab",
                                className: "account-tabs",
                                defaultActiveTab: 1,
                                segmented: false,
                                actionButtons: saveText,
                                tabsClass: "account-overview no-padding bordered-header content-block"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__["Tab"],
                                { title: "explorer.witnesses.title" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("content-block") },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "header-selector" },
                                        proxyInput,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: {
                                                    float: "right",
                                                    marginTop: "-2.5rem"
                                                }
                                            },
                                            actionButtons
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_VotingAccountsList__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                        type: "witness",
                                        label: "account.votes.add_witness_label",
                                        items: this.state.all_witnesses,
                                        validateAccount: this.validateAccount.bind(this, "witnesses"),
                                        onAddItem: this.onAddItem.bind(this, "witnesses"),
                                        onRemoveItem: this.onRemoveItem.bind(this, "witnesses"),
                                        tabIndex: hasProxy ? -1 : 2,
                                        supported: this.state[hasProxy ? "proxy_witnesses" : "witnesses"],
                                        withSelector: false,
                                        active: globalObject.get("active_witnesses"),
                                        proxy: this.state.proxy_account_id
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__["Tab"],
                                { title: "explorer.committee_members.title" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("content-block") },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "header-selector" },
                                        proxyInput,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: {
                                                    float: "right",
                                                    marginTop: "-2.5rem"
                                                }
                                            },
                                            actionButtons
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_VotingAccountsList__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                        type: "committee",
                                        label: "account.votes.add_committee_label",
                                        items: this.state.all_committee,
                                        validateAccount: this.validateAccount.bind(this, "committee"),
                                        onAddItem: this.onAddItem.bind(this, "committee"),
                                        onRemoveItem: this.onRemoveItem.bind(this, "committee"),
                                        tabIndex: hasProxy ? -1 : 3,
                                        supported: this.state[hasProxy ? "proxy_committee" : "committee"],
                                        withSelector: false,
                                        active: globalObject.get("active_committee_members"),
                                        proxy: this.state.proxy_account_id
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__["Tab"],
                                { title: "account.votes.workers_short" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "header-selector" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { float: "right" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Link"],
                                            { to: "/create-worker" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "button" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.create_worker" })
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "selector" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: { paddingLeft: 10 },
                                                className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("inline-block", {
                                                    inactive: workerTableIndex !== 0
                                                }),
                                                onClick: this._setWorkerTableIndex.bind(this, 0)
                                            },
                                            counterpart__WEBPACK_IMPORTED_MODULE_16___default.a.translate("account.votes.new", { count: newWorkers.length })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("inline-block", {
                                                    inactive: workerTableIndex !== 1
                                                }),
                                                onClick: this._setWorkerTableIndex.bind(this, 1)
                                            },
                                            counterpart__WEBPACK_IMPORTED_MODULE_16___default.a.translate("account.votes.active", { count: workers.length })
                                        ),
                                        expiredWorkers.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("inline-block", { inactive: !showExpired }),
                                                onClick: !showExpired ? this._setWorkerTableIndex.bind(this, 2) : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.expired" })
                                        ) : null
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { marginTop: "2rem" } },
                                        proxyInput,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: {
                                                    float: "right",
                                                    marginTop: "-2.5rem"
                                                }
                                            },
                                            actionButtons
                                        )
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "table",
                                    { className: "table dashboard-table table-hover" },
                                    workerTableIndex === 2 ? null : workerTableIndex === 0 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "thead",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    colSpan: "3",
                                                    style: { textAlign: "left" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.threshold" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_18__["default"], {
                                                    decimalOffset: 5,
                                                    hide_asset: true,
                                                    amount: voteThreshold,
                                                    asset: "1.3.0"
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", { colSpan: "3" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", {
                                                style: {
                                                    border: "none",
                                                    backgroundColor: "transparent"
                                                }
                                            })
                                        )
                                    ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "thead",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    colSpan: "4",
                                                    style: { textAlign: "left" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.total_budget" }),
                                                " ",
                                                "(",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                                    name: preferredUnit
                                                }),
                                                ")"
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", {
                                                colSpan: "2",
                                                className: "hide-column-small"
                                            }),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                globalObject ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_17__["EquivalentValueComponent"], {
                                                    hide_asset: true,
                                                    fromAsset: "1.3.0",
                                                    toAsset: preferredUnit,
                                                    amount: totalBudget
                                                }) : null
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", { className: "hide-column-small" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", {
                                                style: {
                                                    border: "none",
                                                    backgroundColor: "transparent"
                                                }
                                            })
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "thead",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            workerTableIndex === 2 ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.line" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                { style: { textAlign: "center" } },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.user_issued_assets.id" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                { style: { textAlign: "left" } },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.user_issued_assets.description" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" },
                                                    className: "hide-column-small"
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.total_votes" })
                                            ),
                                            workerTableIndex === 0 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.missing" })
                                            ) : null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "explorer.workers.period" })
                                            ),
                                            workerTableIndex === 2 || workerTableIndex === 0 ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" },
                                                    className: "hide-column-small"
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.funding" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" },
                                                    className: "hide-column-small"
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.daily_pay" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    {
                                                        style: {
                                                            paddingTop: 5,
                                                            fontSize: "0.8rem"
                                                        }
                                                    },
                                                    "(",
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                                        name: preferredUnit
                                                    }),
                                                    ")"
                                                )
                                            ),
                                            workerTableIndex === 2 || workerTableIndex === 0 ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "explorer.witnesses.budget" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    {
                                                        style: {
                                                            paddingTop: 5,
                                                            fontSize: "0.8rem"
                                                        }
                                                    },
                                                    "(",
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                                        name: preferredUnit
                                                    }),
                                                    ")"
                                                )
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.toggle" })
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "tbody",
                                        null,
                                        workerTableIndex === 0 ? newWorkers : workerTableIndex === 1 ? workers : expiredWorkers
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountVoting;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountVoting.propTypes = {
    initialBudget: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_10__["default"].ChainObject.isRequired,
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_10__["default"].ChainObject.isRequired,
    proxy: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_10__["default"].ChainAccount.isRequired
};
AccountVoting.defaultProps = {
    globalObject: "2.0.0"
};

AccountVoting = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_9__["default"])(AccountVoting);

var BudgetObjectWrapper = function BudgetObjectWrapper(props) {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountVoting, _extends({}, props, {
        initialBudget: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_19__["default"].getLastBudgetObject()
    }));
};

/* harmony default export */ __webpack_exports__["default"] = (BudgetObjectWrapper);

/***/ }),

/***/ 2566:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(558);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1832);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1969);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2303);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1833);
/* harmony import */ var _Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2438);
/* harmony import */ var components_Icon_Icon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(774);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }












var WorkerApproval = function (_React$Component) {
    _inherits(WorkerApproval, _React$Component);

    function WorkerApproval(props) {
        _classCallCheck(this, WorkerApproval);

        return _possibleConstructorReturn(this, (WorkerApproval.__proto__ || Object.getPrototypeOf(WorkerApproval)).call(this, props));
    }

    _createClass(WorkerApproval, [{
        key: "onApprove",
        value: function onApprove() {
            var addVotes = [],
                removeVotes = [];

            if (this.props.vote_ids.has(this.props.worker.get("vote_against"))) {
                removeVotes.push(this.props.worker.get("vote_against"));
            }

            if (!this.props.vote_ids.has(this.props.worker.get("vote_for"))) {
                addVotes.push(this.props.worker.get("vote_for"));
            }

            this.props.onChangeVotes(addVotes, removeVotes);
        }
    }, {
        key: "onReject",
        value: function onReject() {
            var addVotes = [],
                removeVotes = [];

            if (this.props.vote_ids.has(this.props.worker.get("vote_against"))) {
                removeVotes.push(this.props.worker.get("vote_against"));
            }

            if (this.props.vote_ids.has(this.props.worker.get("vote_for"))) {
                removeVotes.push(this.props.worker.get("vote_for"));
            }

            this.props.onChangeVotes(addVotes, removeVotes);
        }
    }, {
        key: "render",
        value: function render() {
            var rank = this.props.rank;

            var worker = this.props.worker.toJS();
            var total_votes = worker.total_votes_for - worker.total_votes_against;
            var approvalState = this.props.vote_ids.has(worker.vote_for) ? true : this.props.vote_ids.has(worker.vote_against) ? false : null;

            var fundedPercent = 0;

            if (worker.daily_pay < this.props.rest) {
                fundedPercent = 100;
            } else if (this.props.rest > 0) {
                fundedPercent = this.props.rest / worker.daily_pay * 100;
            }

            var startDate = counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.localize(new Date(worker.work_begin_date + "Z"), { type: "date", format: "short_custom" });
            var endDate = counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.localize(new Date(worker.work_end_date + "Z"), { type: "date", format: "short_custom" });

            var now = new Date();
            var isExpired = new Date(worker.work_end_date + "Z") <= now;
            var hasStarted = new Date(worker.work_begin_date + "Z") <= now;
            var isProposed = !isExpired && total_votes < this.props.voteThreshold || !hasStarted;
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { className: approvalState ? "" : "unsupported" },
                isExpired ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        style: {
                            textAlign: "right",
                            paddingRight: 10,
                            paddingLeft: 0
                        }
                    },
                    rank
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { className: "worker-id", style: { textAlign: "left" } },
                    worker.id
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { className: "worker-name", style: { textAlign: "left" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "inline-block",
                            style: { paddingRight: 5, position: "relative", top: -1 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            {
                                style: {
                                    visibility: worker.url && worker.url.indexOf(".") !== -1 ? "visible" : "hidden"
                                },
                                href: worker.url,
                                target: "_blank",
                                rel: "noopener noreferrer"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Icon_Icon__WEBPACK_IMPORTED_MODULE_8__["default"], { name: "share", title: "icons.share" })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "inline-block" },
                        worker.name,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_5__["default"], { account: worker.worker_account })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" }, className: "hide-column-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        amount: total_votes,
                        asset: "1.3.0",
                        decimalOffset: 5,
                        hide_asset: true
                    })
                ),
                !isProposed ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        amount: Math.max(0, this.props.voteThreshold - total_votes),
                        asset: "1.3.0",
                        hide_asset: true,
                        decimalOffset: 5
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    startDate,
                    " - ",
                    endDate
                ),
                isExpired || isProposed ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        style: { textAlign: "right" },
                        className: "hide-column-small"
                    },
                    common_utils__WEBPACK_IMPORTED_MODULE_2__["default"].format_number(fundedPercent, 2),
                    "%"
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" }, className: "hide-column-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_7__["EquivalentValueComponent"], {
                        hide_asset: true,
                        fromAsset: "1.3.0",
                        toAsset: this.props.preferredUnit,
                        amount: worker.daily_pay
                    })
                ),
                isExpired || isProposed ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    this.props.rest <= 0 ? "0.00" : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_7__["EquivalentValueComponent"], {
                        hide_asset: true,
                        fromAsset: "1.3.0",
                        toAsset: this.props.preferredUnit,
                        amount: this.props.rest
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        className: "clickable",
                        onClick: this.props.proxy ? function () {} : this[approvalState ? "onReject" : "onApprove"].bind(this)
                    },
                    !this.props.proxy ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Icon_Icon__WEBPACK_IMPORTED_MODULE_8__["default"], {
                        name: approvalState ? "checkmark-circle" : "minus-circle",
                        title: approvalState ? "icons.checkmark_circle.approved" : "icons.minus_circle.disapproved"
                    }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Icon_Icon__WEBPACK_IMPORTED_MODULE_8__["default"], { name: "locked", title: "icons.locked.action" })
                )
            );
        }
    }]);

    return WorkerApproval;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

WorkerApproval.propTypes = {
    worker: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired,
    onAddVote: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func, /// called with vote id to add
    onRemoveVote: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func, /// called with vote id to remove
    vote_ids: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.object /// Set of items currently being voted for
};
WorkerApproval.defaultProps = {
    tempComponent: "tr"
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(WorkerApproval));

/***/ }),

/***/ 2567:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _AccountSelector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2189);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(774);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(407);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1832);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1969);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1833);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2303);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var sanitize__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1988);
/* harmony import */ var sanitize__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(sanitize__WEBPACK_IMPORTED_MODULE_11__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }














function getWitnessOrCommittee(type, acct) {
    var url = "",
        votes = 0,
        account = void 0;
    if (type === "witness") {
        account = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getWitnessById(acct.get("id"));
    } else if (type === "committee") {
        account = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getCommitteeMemberById(acct.get("id"));
    }

    url = account ? account.get("url") : url;
    url = sanitize__WEBPACK_IMPORTED_MODULE_11___default()(url, {
        whiteList: [], // empty, means filter out all tags
        stripIgnoreTag: true // filter out all HTML not in the whilelist
    });
    votes = account ? account.get("total_votes") : votes;
    return {
        url: url,
        votes: votes,
        id: account.get("id")
    };
}

var AccountItemRow = function (_React$Component) {
    _inherits(AccountItemRow, _React$Component);

    function AccountItemRow() {
        _classCallCheck(this, AccountItemRow);

        return _possibleConstructorReturn(this, (AccountItemRow.__proto__ || Object.getPrototypeOf(AccountItemRow)).apply(this, arguments));
    }

    _createClass(AccountItemRow, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps) {
            return nextProps.account !== this.props.account || nextProps.action !== this.props.action || nextProps.isActive !== this.props.isActive || nextProps.idx !== this.props.idx || nextProps.proxy !== this.props.proxy;
        }
    }, {
        key: "onAction",
        value: function onAction(item_id) {
            this.props.onAction(item_id);
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                account = _props.account,
                type = _props.type,
                action = _props.action,
                isActive = _props.isActive;

            var item_id = account.get("id");

            var _getWitnessOrCommitte = getWitnessOrCommittee(type, account),
                url = _getWitnessOrCommitte.url,
                votes = _getWitnessOrCommitte.votes;

            var link = url && url.length > 0 && url.indexOf("http") === -1 ? "http://" + url : url;
            var isSupported = action === "remove";

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { className: isSupported ? "" : "unsupported" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    this.props.idx + 1
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "left" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_8__["default"], { account: account.get("id") })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    link && link.indexOf(".") !== -1 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            href: link,
                            target: "_blank",
                            rel: "noopener noreferrer"
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], { name: "share", title: "icons.share" })
                    ) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_6__["default"], {
                        amount: votes,
                        asset: "1.3.0",
                        decimalOffset: 5,
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                        content: "account.votes." + (isActive ? "active_short" : "inactive")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "center" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                        content: "settings." + (isSupported ? "yes" : "no")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        className: this.props.proxy ? "" : "clickable",
                        onClick: this.props.proxy ? function () {} : this.onAction.bind(this, item_id)
                    },
                    !this.props.proxy ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], {
                        name: isSupported ? "checkmark-circle" : "minus-circle",
                        title: isSupported ? "icons.checkmark_circle.yes" : "icons.minus_circle.no"
                    }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], { name: "locked", title: "icons.locked.action" })
                )
            );
        }
    }]);

    return AccountItemRow;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountItemRow.propTypes = {
    account: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.object.isRequired,
    onAction: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func.isRequired
};

var VotingAccountsList = function (_React$Component2) {
    _inherits(VotingAccountsList, _React$Component2);

    function VotingAccountsList(props) {
        _classCallCheck(this, VotingAccountsList);

        var _this2 = _possibleConstructorReturn(this, (VotingAccountsList.__proto__ || Object.getPrototypeOf(VotingAccountsList)).call(this, props));

        _this2.state = {
            selected_item: null,
            item_name_input: "",
            error: null
        };
        _this2.onItemChange = _this2.onItemChange.bind(_this2);
        _this2.onItemAccountChange = _this2.onItemAccountChange.bind(_this2);
        _this2.onAddItem = _this2.onAddItem.bind(_this2);
        return _this2;
    }

    _createClass(VotingAccountsList, [{
        key: "onItemChange",
        value: function onItemChange(item_name_input) {
            this.setState({ item_name_input: item_name_input });
        }
    }, {
        key: "onItemAccountChange",
        value: function onItemAccountChange(selected_item) {
            var _this3 = this;

            this.setState({ selected_item: selected_item, error: null });
            if (selected_item && this.props.validateAccount) {
                var res = this.props.validateAccount(selected_item);
                if (res === null) return;
                if (typeof res === "string") this.setState({ error: res });else res.then(function (error) {
                    return _this3.setState({ error: error });
                });
            }
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(item) {
            if (!item) return;
            var next_state = {
                selected_item: null,
                item_name_input: "",
                error: null
            };
            this.setState(next_state);
            this.props.onAddItem(item.get("id"));
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            if (!this.props.items) return null;

            var item_rows = this.props.items.filter(function (i) {
                if (!i) return false;
                //if (this.state.item_name_input) return i.get("name").indexOf(this.state.item_name_input) !== -1;
                return true;
            }).sort(function (a, b) {
                var _getWitnessOrCommitte2 = getWitnessOrCommittee(_this4.props.type, a),
                    a_votes = _getWitnessOrCommitte2.votes;

                var _getWitnessOrCommitte3 = getWitnessOrCommittee(_this4.props.type, b),
                    b_votes = _getWitnessOrCommitte3.votes;

                if (a_votes !== b_votes) {
                    return parseInt(b_votes, 10) - parseInt(a_votes, 10);
                } else if (a.get("name") > b.get("name")) {
                    return 1;
                } else if (a.get("name") < b.get("name")) {
                    return -1;
                } else {
                    return 0;
                }
            }).map(function (i, idx) {
                var action = _this4.props.supported && _this4.props.supported.includes(i.get("id")) ? "remove" : "add";
                var isActive = _this4.props.active.includes(getWitnessOrCommittee(_this4.props.type, i).id);
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountItemRow, {
                    idx: idx,
                    key: i.get("name"),
                    account: i,
                    type: _this4.props.type,
                    onAction: action === "add" ? _this4.props.onAddItem : _this4.props.onRemoveItem,
                    isSelected: _this4.props.items.indexOf(i) !== -1,
                    action: action,
                    isActive: isActive,
                    proxy: _this4.props.proxy
                });
            });

            var error = this.state.error;
            if (!error && this.state.selected_item && this.props.items.indexOf(this.state.selected_item) !== -1) {
                error = counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.votes.already");
            }

            var cw = ["10%", "20%", "40%", "20%", "10%"];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                this.props.withSelector ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountSelector__WEBPACK_IMPORTED_MODULE_1__["default"], {
                    style: { maxWidth: "600px" },
                    label: this.props.label,
                    error: error,
                    placeholder: this.props.placeholder,
                    account: this.state.item_name_input,
                    accountName: this.state.item_name_input,
                    onChange: this.onItemChange,
                    onAccountChanged: this.onItemAccountChange,
                    onAction: this.onAddItem,
                    action_label: "account.votes.add_witness",
                    tabIndex: this.props.tabIndex
                }) : null,
                this.props.title && item_rows.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "h4",
                    null,
                    this.props.title
                ) : null,
                item_rows.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { textAlign: "right" } },
                                "#"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                {
                                    style: { textAlign: "left", maxWidth: cw[1] }
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.name" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[2] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.about" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[3] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.votes" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[4] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.status.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[0] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.supported" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[5] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.toggle" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        item_rows
                    )
                ) : null
            );
        }
    }]);

    return VotingAccountsList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

VotingAccountsList.propTypes = {
    items: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainObjectsList,
    onAddItem: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func.isRequired,
    onRemoveItem: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func.isRequired,
    validateAccount: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func,
    label: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.string.isRequired, // a translation key for the label,
    placeholder: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.string, // the placeholder text to be displayed when there is no user_input
    tabIndex: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.number, // tabindex property to be passed to input tag
    action: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.string,
    withSelector: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.bool
};
VotingAccountsList.defaultProps = {
    action: "remove",
    withSelector: true,
    autosubscribe: false
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(VotingAccountsList));

/***/ }),

/***/ 2568:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2233);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2185);
/* harmony import */ var _Utility_AssetImage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2452);
/* harmony import */ var _MarginPositions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2569);
/* harmony import */ var _RecentTransactions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2553);
/* harmony import */ var components_Account_Proposals__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2570);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(407);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(702);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(558);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2515);
/* harmony import */ var _AccountOrders__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2575);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(931);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2309);
/* harmony import */ var common_accountHelper__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2576);
/* harmony import */ var _BalanceWrapper__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2259);
/* harmony import */ var _AccountTreemap__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2577);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2186);
/* harmony import */ var _AccountPortfolioList__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2580);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }























var AccountOverview = function (_React$Component) {
    _inherits(AccountOverview, _React$Component);

    function AccountOverview(props) {
        _classCallCheck(this, AccountOverview);

        var _this = _possibleConstructorReturn(this, (AccountOverview.__proto__ || Object.getPrototypeOf(AccountOverview)).call(this));

        _this.state = {
            sortKey: props.viewSettings.get("portfolioSort", "totalValue"),
            sortDirection: props.viewSettings.get("portfolioSortDirection", true), // alphabetical A -> B, numbers high to low
            shownAssets: props.viewSettings.get("shownAssets", "active"),
            alwaysShowAssets: ["BTS"
            // "USD",
            // "CNY",
            // "OPEN.BTC",
            // "OPEN.USDT",
            // "OPEN.ETH",
            // "OPEN.MAID",
            // "OPEN.STEEM",
            // "OPEN.DASH"
            ]
        };

        _this._handleFilterInput = _this._handleFilterInput.bind(_this);
        return _this;
    }

    _createClass(AccountOverview, [{
        key: "_handleFilterInput",
        value: function _handleFilterInput(e) {
            e.preventDefault();
            this.setState({
                filterValue: e.target.value
            });
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            this._checkMarginStatus();
        }
    }, {
        key: "_checkMarginStatus",
        value: function _checkMarginStatus() {
            var _this2 = this;

            var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;

            Object(common_accountHelper__WEBPACK_IMPORTED_MODULE_16__["checkMarginStatus"])(props.account).then(function (status) {
                var globalMarginStatus = null;
                for (var asset in status) {
                    globalMarginStatus = status[asset].statusClass || globalMarginStatus;
                }
                _this2.setState({ globalMarginStatus: globalMarginStatus });
            });
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.account !== this.props.account) {
                this._checkMarginStatus(np);
            }
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps, nextState) {
            return !common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].are_equal_shallow(nextProps.balances, this.props.balances) || nextProps.account !== this.props.account || nextProps.settings !== this.props.settings || nextProps.hiddenAssets !== this.props.hiddenAssets || !common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].are_equal_shallow(nextState, this.state) || this.state.filterValue !== nextState.filterValue;
        }
    }, {
        key: "_changeShownAssets",
        value: function _changeShownAssets() {
            var shownAssets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "active";

            this.setState({
                shownAssets: shownAssets
            });
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeViewSetting({
                shownAssets: shownAssets
            });
        }
    }, {
        key: "_toggleSortOrder",
        value: function _toggleSortOrder(key) {
            if (this.state.sortKey === key) {
                actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeViewSetting({
                    portfolioSortDirection: !this.state.sortDirection
                });
                this.setState({
                    sortDirection: !this.state.sortDirection
                });
            } else {
                actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeViewSetting({
                    portfolioSort: key
                });
                this.setState({
                    sortDirection: false,
                    sortKey: key
                });
            }
        }
    }, {
        key: "getHeader",
        value: function getHeader() {
            var settings = this.props.settings;
            var shownAssets = this.state.shownAssets;


            var preferredUnit = settings.get("unit") || this.props.core_asset.get("symbol");
            var showAssetPercent = settings.get("showAssetPercent", false);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        style: { textAlign: "left" },
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("clickable is-sortable", {
                            "is-active": this.state.sortKey === "alphabetic"
                        }),
                        onClick: this._toggleSortOrder.bind(this, "alphabetic")
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { component: "span", content: "account.asset" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        onClick: this._toggleSortOrder.bind(this, "qty"),
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("clickable is-sortable", {
                            "is-active": this.state.sortKey === "qty"
                        }),
                        style: { textAlign: "right" }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.qty" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        onClick: this._toggleSortOrder.bind(this, "priceValue"),
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("column-hide-small clickable is-sortable", { "is-active": this.state.sortKey === "priceValue" }),
                        style: { textAlign: "right" }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "exchange.price" }),
                    " (",
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: preferredUnit, noTip: true }),
                    ")"
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        onClick: this._toggleSortOrder.bind(this, "changeValue"),
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("column-hide-small clickable is-sortable", { "is-active": this.state.sortKey === "changeValue" }),
                        style: { textAlign: "right" }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.hour_24_short" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        onClick: this._toggleSortOrder.bind(this, "totalValue"),
                        style: { textAlign: "right" },
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("column-hide-small clickable is-sortable", { "is-active": this.state.sortKey === "totalValue" })
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_15__["default"], {
                        noLink: true,
                        string: "account.eq_value_header",
                        keys: [{
                            type: "asset",
                            value: preferredUnit,
                            arg: "asset"
                        }],
                        noTip: true
                    })
                ),
                showAssetPercent ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        style: {
                            textAlign: "right"
                        }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { component: "span", content: "account.percent" })
                ) : null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "header.payments" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "exchange.buy" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "modal.deposit.submit" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "modal.withdraw.submit" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.trade" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "exchange.borrow_short" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.settle" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "modal.reserve.submit" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                        content: shownAssets == "active" ? "exchange.hide" : "account.perm.show"
                    })
                )
            );
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props = this.props,
                account = _props.account,
                hiddenAssets = _props.hiddenAssets,
                settings = _props.settings,
                orders = _props.orders;
            var shownAssets = this.state.shownAssets;


            if (!account) {
                return null;
            }

            var preferredUnit = settings.get("unit") || this.props.core_asset.get("symbol");

            var call_orders = [],
                collateral = {},
                debt = {};

            if (account.toJS && account.has("call_orders")) call_orders = account.get("call_orders").toJS();
            var includedPortfolioList = void 0,
                hiddenPortfolioList = void 0;
            var account_balances = account.get("balances");
            var includedBalancesList = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                hiddenBalancesList = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List();
            call_orders.forEach(function (callID) {
                var position = bitsharesjs__WEBPACK_IMPORTED_MODULE_9__["ChainStore"].getObject(callID);
                if (position) {
                    var collateralAsset = position.getIn(["call_price", "base", "asset_id"]);
                    if (!collateral[collateralAsset]) {
                        collateral[collateralAsset] = parseInt(position.get("collateral"), 10);
                    } else {
                        collateral[collateralAsset] += parseInt(position.get("collateral"), 10);
                    }
                    var debtAsset = position.getIn(["call_price", "quote", "asset_id"]);
                    if (!debt[debtAsset]) {
                        debt[debtAsset] = parseInt(position.get("debt"), 10);
                    } else {
                        debt[debtAsset] += parseInt(position.get("debt"), 10);
                    }
                }
            });

            if (account_balances) {
                // Filter out balance objects that have 0 balance or are not included in open orders
                account_balances = account_balances.filter(function (a, index) {
                    var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_9__["ChainStore"].getObject(a);
                    if (balanceObject && !balanceObject.get("balance") && !orders[index]) {
                        return false;
                    } else {
                        return true;
                    }
                });

                // Separate balances into hidden and included
                account_balances.forEach(function (a, asset_type) {
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_9__["ChainStore"].getAsset(asset_type);

                    var assetName = "";
                    var filter = "";

                    if (_this3.state.filterValue) {
                        filter = _this3.state.filterValue ? String(_this3.state.filterValue).toLowerCase() : "";
                        assetName = asset.get("symbol").toLowerCase();

                        var _utils$replaceName = common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].replaceName(asset),
                            isBitAsset = _utils$replaceName.isBitAsset;

                        if (isBitAsset) {
                            assetName = "bit" + assetName;
                        }
                    }

                    if (hiddenAssets.includes(asset_type) && assetName.includes(filter)) {
                        hiddenBalancesList = hiddenBalancesList.push(a);
                    } else if (assetName.includes(filter)) {
                        includedBalancesList = includedBalancesList.push(a);
                    }
                });
            }

            var portfolioHiddenAssetsBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], { noTip: true, balances: hiddenBalancesList, hide_asset: true });

            var portfolioActiveAssetsBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: includedBalancesList,
                hide_asset: true
            });
            var ordersValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                openOrders: orders,
                hide_asset: true
            });
            var marginValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                debt: debt,
                collateral: collateral,
                hide_asset: true
            });
            var debtValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                debt: debt,
                hide_asset: true
            });
            var collateralValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                collateral: collateral,
                hide_asset: true
            });

            var totalValueText = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_15__["default"], {
                noLink: true,
                string: "account.total",
                keys: [{ type: "asset", value: preferredUnit, arg: "asset" }]
            });

            var includedPortfolioBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { key: "portfolio", className: "total-value" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { colSpan: "2", style: { textAlign: "left" } },
                    totalValueText
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    portfolioActiveAssetsBalance
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { colSpan: "9" })
            );

            var hiddenPortfolioBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { key: "portfolio", className: "total-value" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { colSpan: "2", style: { textAlign: "left" } },
                    totalValueText
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    portfolioHiddenAssetsBalance
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { colSpan: "9" })
            );

            includedPortfolioList = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPortfolioList__WEBPACK_IMPORTED_MODULE_20__["default"], {
                balanceList: includedBalancesList,
                optionalAssets: !this.state.filterValue ? this.state.alwaysShowAssets : null,
                visible: true,
                preferredUnit: preferredUnit,
                coreAsset: this.props.core_asset,
                coreSymbol: this.props.core_asset.get("symbol"),
                hiddenAssets: hiddenAssets,
                orders: orders,
                account: this.props.account,
                sortKey: this.state.sortKey,
                sortDirection: this.state.sortDirection,
                isMyAccount: this.props.isMyAccount,
                balances: this.props.balances,
                header: this.getHeader(),
                extraRow: includedPortfolioBalance
            });

            hiddenPortfolioList = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPortfolioList__WEBPACK_IMPORTED_MODULE_20__["default"], {
                balanceList: hiddenBalancesList,
                optionalAssets: !this.state.filterValue ? this.state.alwaysShowAsset : null,
                visible: false,
                preferredUnit: preferredUnit,
                coreSymbol: this.props.core_asset.get("symbol"),
                settings: settings,
                hiddenAssets: hiddenAssets,
                orders: orders,
                account: this.props.account,
                sortKey: this.state.sortKey,
                sortDirection: this.state.sortDirection,
                isMyAccount: this.props.isMyAccount,
                balances: this.props.balances,
                header: this.getHeader(),
                extraRow: hiddenPortfolioBalance
            });

            // add unicode non-breaking space as subtext to Activity Tab to ensure that all titles are aligned
            // horizontally
            var hiddenSubText = "\xA0";

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tabs"],
                            {
                                defaultActiveTab: 0,
                                segmented: false,
                                setting: "overviewTab",
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "account.portfolio",
                                    subText: portfolioActiveAssetsBalance
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "header-selector" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "filter inline-block" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            placeholder: "Filter",
                                            onChange: this._handleFilterInput
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "selector inline-block" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("inline-block", {
                                                    inactive: shownAssets != "active"
                                                }),
                                                onClick: shownAssets != "active" ? this._changeShownAssets.bind(this, "active") : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.hide_hidden" })
                                        ),
                                        hiddenBalancesList.size ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("inline-block", {
                                                    inactive: shownAssets != "hidden"
                                                }),
                                                onClick: shownAssets != "hidden" ? this._changeShownAssets.bind(this, "hidden") : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.show_hidden" })
                                        ) : null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("inline-block", {
                                                    inactive: shownAssets != "visual"
                                                }),
                                                onClick: shownAssets != "visual" ? this._changeShownAssets.bind(this, "visual") : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.show_visual" })
                                        )
                                    )
                                ),
                                shownAssets != "visual" ? shownAssets === "hidden" && hiddenBalancesList.size ? hiddenPortfolioList : includedPortfolioList : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountTreemap__WEBPACK_IMPORTED_MODULE_18__["default"], {
                                    balanceObjects: includedBalancesList
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "account.open_orders",
                                    subText: ordersValue
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    _AccountOrders__WEBPACK_IMPORTED_MODULE_13__["default"],
                                    this.props,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "tr",
                                        { className: "total-value" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "td",
                                            {
                                                colSpan: "8",
                                                style: { textAlign: "right" }
                                            },
                                            totalValueText
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "td",
                                            {
                                                colSpan: "1",
                                                style: { textAlign: "right" }
                                            },
                                            ordersValue
                                        ),
                                        this.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null) : null
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "account.collaterals",
                                    subText: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        {
                                            className: this.state.globalMarginStatus
                                        },
                                        marginValue
                                    )
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "generic-bordered-box" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            _MarginPositions__WEBPACK_IMPORTED_MODULE_6__["default"],
                                            {
                                                preferredUnit: preferredUnit,
                                                className: "dashboard-table",
                                                callOrders: call_orders,
                                                account: account
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tr",
                                                { className: "total-value" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    null,
                                                    totalValueText
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    null,
                                                    debtValue
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    { className: "column-hide-medium" },
                                                    collateralValue
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    null,
                                                    marginValue
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { colSpan: "3" })
                                            )
                                        )
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "account.activity",
                                    subText: hiddenSubText
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_RecentTransactions__WEBPACK_IMPORTED_MODULE_7__["RecentTransactions"], {
                                    accountsList: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.fromJS([account.get("id")]),
                                    compactView: false,
                                    showMore: true,
                                    fullHeight: true,
                                    limit: 100,
                                    showFilters: true,
                                    dashboard: true
                                })
                            ),
                            account.get("proposals") && account.get("proposals").size ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "explorer.proposals.title",
                                    subText: String(account.get("proposals") ? account.get("proposals").size : 0)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Account_Proposals__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                    className: "dashboard-table",
                                    account: account.get("id")
                                })
                            ) : null
                        )
                    )
                )
            );
        }
    }]);

    return AccountOverview;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountOverview = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_19__["default"])(AccountOverview, { propNames: ["core_asset"] });

var AccountOverviewWrapper = function (_React$Component2) {
    _inherits(AccountOverviewWrapper, _React$Component2);

    function AccountOverviewWrapper() {
        _classCallCheck(this, AccountOverviewWrapper);

        return _possibleConstructorReturn(this, (AccountOverviewWrapper.__proto__ || Object.getPrototypeOf(AccountOverviewWrapper)).apply(this, arguments));
    }

    _createClass(AccountOverviewWrapper, [{
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_BalanceWrapper__WEBPACK_IMPORTED_MODULE_17__["default"], _extends({}, this.props, { wrap: AccountOverview }));
        }
    }]);

    return AccountOverviewWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountOverviewWrapper);

/***/ }),

/***/ 2569:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1969);
/* harmony import */ var _Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2305);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1832);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1833);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2186);
/* harmony import */ var _Utility_AssetImage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2452);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2185);
/* harmony import */ var _Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2501);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(577);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(407);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(581);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(558);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(774);
/* harmony import */ var _Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2233);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(716);
/* harmony import */ var _Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2309);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }























var alignRight = { textAlign: "right" };
var alignLeft = { textAlign: "left" };

/**
 *  Given a collateral position object (call order) and account,
 *  display it in a pretty way
 *
 *  Expects property, 'object' which should be a call order id
 *  and another property called 'account' which should be an
 *  account.
 */

var MarginPosition = function (_React$Component) {
    _inherits(MarginPosition, _React$Component);

    function MarginPosition() {
        _classCallCheck(this, MarginPosition);

        return _possibleConstructorReturn(this, (MarginPosition.__proto__ || Object.getPrototypeOf(MarginPosition)).apply(this, arguments));
    }

    _createClass(MarginPosition, [{
        key: "_onUpdatePosition",
        value: function _onUpdatePosition(e) {
            e.preventDefault();
            var ref = "cp_modal_" + this.props.object.getIn(["call_price", "quote", "asset_id"]);
            this.refs[ref].show();
        }
    }, {
        key: "_onClosePosition",
        value: function _onClosePosition(e) {
            e.preventDefault();
            var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_9__["default"].new_transaction();

            tr.add_type_operation("call_order_update", {
                fee: {
                    amount: 0,
                    asset_id: 0
                },
                funding_account: this.props.object.get("borrower"),
                delta_collateral: {
                    amount: -this.props.object.get("collateral"),
                    asset_id: this.props.object.getIn(["call_price", "base", "asset_id"])
                },
                delta_debt: {
                    amount: -this.props.object.get("debt"),
                    asset_id: this.props.object.getIn(["call_price", "quote", "asset_id"])
                }
            });

            stores_WalletDb__WEBPACK_IMPORTED_MODULE_11__["default"].process_transaction(tr, null, true);
        }

        // how many units of the debt asset the borrower has
        // in his/her wallet. This has nothing to do with
        // how many of the asset the borrower has borrowed.

    }, {
        key: "_getBalance",
        value: function _getBalance() {
            var account = this.props.account;
            // the debt asset id which we want to display
            var row_asset_id = this.props.object.getIn(["call_price", "quote", "asset_id"]);

            var account_balances = account.get("balances");

            var balance = 0;

            // really this iteration should be called once, and
            // each asset_id matched once with its balance

            // for every debt the account has, we iterate
            // through every balance the user has
            if (account_balances) {
                account_balances.forEach(function (a, asset_type) {
                    if (asset_type == row_asset_id) {
                        var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_10__["ChainStore"].getObject(a);

                        // get the balance
                        balance = balanceObject.get("balance");
                    }
                });
            }

            // it's possible that the account doesn't hold
            // any of the asset here
            return balance;
        }
    }, {
        key: "_getFeedPrice",
        value: function _getFeedPrice() {
            if (!this.props) {
                return 1;
            }

            return 1 / common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_price(this.props.debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "quote", "amount"]), this.props.collateralAsset, this.props.debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "base", "amount"]), this.props.debtAsset);
        }
    }, {
        key: "_getCollateralRatio",
        value: function _getCollateralRatio() {
            var co = this.props.object.toJS();
            var c = common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_amount(co.collateral, this.props.collateralAsset);
            var d = common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_amount(co.debt, this.props.debtAsset);
            return c / (d / this._getFeedPrice());
        }
    }, {
        key: "_getMR",
        value: function _getMR() {
            return this.props.debtAsset.getIn(["bitasset", "current_feed", "maintenance_collateral_ratio"]) / 1000;
        }
    }, {
        key: "_getStatusClass",
        value: function _getStatusClass() {
            var cr = this._getCollateralRatio();
            var mr = this._getMR();

            if (isNaN(cr)) return null;
            if (cr < mr) {
                return "danger";
            } else if (cr < mr + 0.5) {
                return "warning";
            } else {
                return "";
            }
        }
    }, {
        key: "_getCRTip",
        value: function _getCRTip() {
            var statusClass = this._getStatusClass();
            var mr = this._getMR();
            if (!statusClass || statusClass === "") return null;

            if (statusClass === "danger") {
                return counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.cr_danger", { mr: mr });
            } else if (statusClass === "warning") {
                return counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.cr_warning", { mr: mr });
            } else {
                return null;
            }
        }
    }, {
        key: "_getTargetCollateralRatio",
        value: function _getTargetCollateralRatio() {
            var co = this.props.object && this.props.object.toJS();

            return co && !isNaN(co.target_collateral_ratio) ? co.target_collateral_ratio / 1000 : 0;
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                debtAsset = _props.debtAsset,
                collateralAsset = _props.collateralAsset,
                object = _props.object;


            var has_order = object != null;

            var co = has_order ? object.toJS() : null;
            var cr = this._getCollateralRatio();
            var d = common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_amount(co.debt, this.props.debtAsset);
            var balance = this._getBalance();

            var statusClass = this._getStatusClass();

            var debt_amount = has_order ? co.debt : 0;
            var collateral_amount = has_order ? co.collateral : 0;
            var collateral_asset = has_order ? co.call_price.base.asset_id : collateralAsset.get("id");
            var target_collateral_ratio = this._getTargetCollateralRatio();

            var mcr = this.props.debtAsset.getIn(["bitasset", "current_feed", "maintenance_collateral_ratio"]);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { className: "margin-row" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetImage__WEBPACK_IMPORTED_MODULE_6__["default"], {
                        replaceNoneToBts: false,
                        maxWidth: 30,
                        name: debtAsset.get("symbol")
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_18__["Link"],
                        { to: "/asset/" + debtAsset.get("symbol") },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_7__["default"], { noTip: true, name: debtAsset.get("symbol") })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        amount: balance,
                        asset: co.call_price.quote.asset_id,
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        amount: co.debt,
                        asset: co.call_price.quote.asset_id,
                        hide_asset: true
                    }) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-medium" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        decimalOffset: 3,
                        amount: collateral_amount,
                        asset: collateral_asset
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            "data-place": "bottom",
                            "data-tip": this._getCRTip(),
                            className: "center-content " + statusClass
                        },
                        common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].format_number(cr, 2)
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-medium-2" },
                    target_collateral_ratio ? common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].format_number(target_collateral_ratio, 2) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-medium-1" },
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_16__["default"], {
                        noTip: true,
                        balances: Object(immutable__WEBPACK_IMPORTED_MODULE_17__["List"])(),
                        debt: _defineProperty({}, debtAsset.get("id"), co.debt),
                        collateral: _defineProperty({}, collateralAsset.get("id"), parseInt(co.collateral, 10)),
                        hide_asset: true
                    }) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-small-2" },
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        base_amount: collateral_amount,
                        base_asset: collateralAsset.get("id"),
                        quote_amount: debt_amount * (mcr / 1000),
                        quote_asset: debtAsset.get("id"),
                        hide_symbols: true
                    }) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-small-1" },
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        base_amount: debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "base", "amount"]),
                        base_asset: co.call_price.quote.asset_id,
                        quote_amount: debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "quote", "amount"]),
                        quote_asset: co.call_price.base.asset_id,
                        hide_symbols: true
                    }) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        className: "center-content column-hide-small",
                        style: alignLeft
                    },
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        base_amount: co.call_price.base.amount,
                        base_asset: co.call_price.base.asset_id,
                        quote_amount: co.call_price.quote.amount,
                        quote_asset: co.call_price.quote.asset_id,
                        hide_value: true
                    }) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "center" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_18__["Link"],
                        {
                            to: "/market/" + debtAsset.get("symbol") + "_" + collateralAsset.get("symbol")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                            name: "trade",
                            title: "icons.trade.trade",
                            className: "icon-14px",
                            style: { marginRight: 5 }
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            "data-place": "left",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.update_position"),
                            style: { paddingBottom: 5 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            { onClick: this._onUpdatePosition.bind(this) },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                name: "adjust",
                                title: "icons.adjust",
                                className: "icon-14px rotate90"
                            })
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            "data-place": "left",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.close_position", { amount: d, asset: debtAsset.get("symbol") }),
                            style: { paddingBottom: 5 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            { onClick: this._onClosePosition.bind(this) },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                name: "cross-circle",
                                title: "icons.cross_circle.close_position",
                                className: "icon-14px"
                            })
                        )
                    ) : null,
                    debtAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_8__["default"], {
                        ref: "cp_modal_" + co.call_price.quote.asset_id,
                        modalId: "cp_modal_" + co.call_price.quote.asset_id,
                        quote_asset: co.call_price.quote.asset_id,
                        backing_asset: debtAsset.getIn(["bitasset", "options", "short_backing_asset"]),
                        account: this.props.account
                    }) : null
                )
            );
        }
    }]);

    return MarginPosition;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarginPosition.propTypes = {
    debtAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAsset.isRequired,
    collateralAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAsset.isRequired
};
MarginPosition.defaultProps = {
    tempComponent: "tr"
};


MarginPosition = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(MarginPosition);

var MarginPositionWrapper = function (_React$Component2) {
    _inherits(MarginPositionWrapper, _React$Component2);

    function MarginPositionWrapper() {
        _classCallCheck(this, MarginPositionWrapper);

        return _possibleConstructorReturn(this, (MarginPositionWrapper.__proto__ || Object.getPrototypeOf(MarginPositionWrapper)).apply(this, arguments));
    }

    _createClass(MarginPositionWrapper, [{
        key: "render",
        value: function render() {
            var _props2 = this.props,
                object = _props2.object,
                account = _props2.account;

            var debtAsset = object.getIn(["call_price", "quote", "asset_id"]);
            var collateralAsset = object.getIn(["call_price", "base", "asset_id"]);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarginPosition, _extends({
                debtAsset: debtAsset,
                collateralAsset: collateralAsset,
                account: account
            }, this.props));
        }
    }]);

    return MarginPositionWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarginPositionWrapper.propTypes = {
    object: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired
};


MarginPositionWrapper = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(MarginPositionWrapper);

var MarginPositionPlaceHolder = function (_React$Component3) {
    _inherits(MarginPositionPlaceHolder, _React$Component3);

    function MarginPositionPlaceHolder() {
        _classCallCheck(this, MarginPositionPlaceHolder);

        return _possibleConstructorReturn(this, (MarginPositionPlaceHolder.__proto__ || Object.getPrototypeOf(MarginPositionPlaceHolder)).apply(this, arguments));
    }

    _createClass(MarginPositionPlaceHolder, [{
        key: "_onUpdatePosition",
        value: function _onUpdatePosition(e) {
            e.preventDefault();
            var ref = "cp_modal_" + this.props.debtAsset.get("id");
            this.refs[ref].show();
        }
    }, {
        key: "_getFeedPrice",
        value: function _getFeedPrice() {
            if (!this.props) {
                return 1;
            }

            return 1 / common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_price(this.props.debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "quote", "amount"]), this.props.collateralAsset, this.props.debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "base", "amount"]), this.props.debtAsset);
        }
    }, {
        key: "render",
        value: function render() {
            var _props3 = this.props,
                debtAsset = _props3.debtAsset,
                collateralAsset = _props3.collateralAsset,
                account = _props3.account;

            // get the balance

            // the debt asset id which we want to display

            var row_asset_id = debtAsset.get("id");

            var account_balances = account.get("balances");

            var balance = 0;

            // really this iteration should be called once, and
            // each asset_id matched once with its balance

            // for every debt the account has, we iterate
            // through every balance the user has
            if (account_balances) {
                account_balances.forEach(function (a, asset_type) {
                    if (asset_type == row_asset_id) {
                        var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_10__["ChainStore"].getObject(a);

                        // get the balance
                        balance = balanceObject.get("balance");
                    }
                });
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { className: "margin-row" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetImage__WEBPACK_IMPORTED_MODULE_6__["default"], {
                        replaceNoneToBts: false,
                        maxWidth: 30,
                        name: debtAsset.get("symbol")
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_18__["Link"],
                        { to: "/asset/" + debtAsset.get("symbol") },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_7__["default"], { noTip: true, name: debtAsset.get("symbol") })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        amount: balance,
                        asset: debtAsset.get("id"),
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        amount: 0,
                        asset: debtAsset.get("id"),
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-medium" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        decimalOffset: 3,
                        amount: 0,
                        asset: collateralAsset.get("id")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { style: alignRight }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { style: alignRight, className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { style: alignRight, className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { style: alignRight, className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", {
                    className: "center-content column-hide-small",
                    style: alignLeft
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "center" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_18__["Link"],
                        {
                            to: "/market/" + debtAsset.get("symbol") + "_" + collateralAsset.get("symbol")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                            name: "trade",
                            title: "icons.trade.trade",
                            className: "icon-14px",
                            style: { marginRight: 5 }
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            "data-place": "left",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.update_position"),
                            style: { paddingBottom: 5 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            { onClick: this._onUpdatePosition.bind(this) },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                name: "adjust",
                                title: "icons.adjust",
                                className: "icon-14px rotate90"
                            })
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    debtAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_8__["default"], {
                        ref: "cp_modal_" + debtAsset.get("id"),
                        modalId: "cp_modal_" + debtAsset.get("id"),
                        quote_asset: debtAsset.get("id"),
                        backing_asset: debtAsset.getIn(["bitasset", "options", "short_backing_asset"]),
                        account: this.props.account
                    }) : null
                )
            );
        }
    }]);

    return MarginPositionPlaceHolder;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarginPositionPlaceHolder.propTypes = {
    debtAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAsset.isRequired,
    collateralAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAsset.isRequired
};
MarginPositionPlaceHolder.defaultProps = {
    tempComponent: "tr"
};


MarginPositionPlaceHolder = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(MarginPositionPlaceHolder);

var PlaceHolderWrapper = function (_React$Component4) {
    _inherits(PlaceHolderWrapper, _React$Component4);

    function PlaceHolderWrapper() {
        _classCallCheck(this, PlaceHolderWrapper);

        return _possibleConstructorReturn(this, (PlaceHolderWrapper.__proto__ || Object.getPrototypeOf(PlaceHolderWrapper)).apply(this, arguments));
    }

    _createClass(PlaceHolderWrapper, [{
        key: "render",
        value: function render() {
            var _this5 = this;

            var _props4 = this.props,
                account = _props4.account,
                callOrders = _props4.callOrders,
                bitAssets = _props4.bitAssets;

            callOrders = callOrders.filter(function (o) {
                return !!o;
            });
            bitAssets = bitAssets.filter(function (o) {
                return !!o;
            });
            if (!bitAssets.length) return null;
            callOrders.forEach(function (object) {
                /*
                * Existing call orders are already rendered elsewhere, so we filter
                * out assets from the bitAssets list for which the account already
                * has a position
                */
                if (object) {
                    var index = bitAssets.findIndex(function (o) {
                        return o && o.get("id") === object.getIn(["call_price", "quote", "asset_id"]);
                    });
                    if (index !== -1) {
                        bitAssets.splice(index, 1);
                    }
                }
            });

            if (!bitAssets.length) return null;
            var rows = bitAssets.map(function (a) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarginPositionPlaceHolder, _extends({
                    key: a.get("id"),
                    debtAsset: a.get("id"),
                    collateralAsset: a.getIn(["bitasset", "options", "short_backing_asset"]),
                    account: account
                }, _this5.props));
            });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tbody",
                null,
                rows
            );
        }
    }]);

    return PlaceHolderWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

PlaceHolderWrapper.propTypes = {
    callOrders: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObjectsList
};


PlaceHolderWrapper = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(PlaceHolderWrapper);
PlaceHolderWrapper = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_5__["default"])(PlaceHolderWrapper, {
    propNames: ["bitAssets"],
    defaultProps: {
        bitAssets: ["1.3.103", "1.3.113", "1.3.120", "1.3.121", "1.3.958", "1.3.1325", "1.3.1362", "1.3.105", "1.3.106"]
    },
    asList: true
});

var CollateralTable = function CollateralTable(_ref3) {
    var callOrders = _ref3.callOrders,
        account = _ref3.account,
        className = _ref3.className,
        children = _ref3.children,
        preferredUnit = _ref3.preferredUnit;

    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "table",
        { className: "table table-hover " + className },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "thead",
            null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "explorer.asset.title" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.balance" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "transaction.borrow_amount" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight, className: "column-hide-medium" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "transaction.collateral" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "tooltip inline-block",
                            "data-place": "top",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.coll_ratio")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "borrow.coll_ratio" })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "tooltip inline-block",
                            "data-place": "top",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("borrow.target_collateral_ratio")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "borrow.target_collateral_ratio_short" })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        noLink: true,
                        string: "account.total",
                        keys: [{
                            type: "asset",
                            value: preferredUnit,
                            arg: "asset"
                        }]
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight, className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "tooltip inline-block",
                            "data-place": "top",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.call_price")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.call" })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight, className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.price" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { className: "column-hide-small", style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "explorer.assets.units" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: { textAlign: "center" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.market" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "borrow.adjust_short" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "transfer.close" })
                )
            )
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "tbody",
            null,
            callOrders.sort(function (a, b) {
                return a.split(".")[2] - b.split(".")[2];
            }).map(function (id) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarginPositionWrapper, {
                    key: id,
                    object: id,
                    account: account
                });
            })
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaceHolderWrapper, {
            account: account,
            callOrders: immutable__WEBPACK_IMPORTED_MODULE_17___default.a.List(callOrders)
        }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "tbody",
            null,
            children
        )
    );
};

/* harmony default export */ __webpack_exports__["default"] = (CollateralTable);

/***/ }),

/***/ 2570:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var components_Blockchain_ProposedOperation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2307);
/* harmony import */ var components_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1833);
/* harmony import */ var components_Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1832);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(558);
/* harmony import */ var _Modal_ProposalApproveModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2571);
/* harmony import */ var _Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2572);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(407);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var common_permission_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2573);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2303);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(540);
var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
















var Proposals = function (_Component) {
    _inherits(Proposals, _Component);

    function Proposals() {
        _classCallCheck(this, Proposals);

        var _this = _possibleConstructorReturn(this, (Proposals.__proto__ || Object.getPrototypeOf(Proposals)).call(this));

        _this.forceUpdate = _this.forceUpdate.bind(_this);
        return _this;
    }

    _createClass(Proposals, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            /*
            * Account objects don't get updated by underlying proposal changes, but
            * the ChainStore does, so in order to update this component when a proposal
            * changes, we need to update it whenever the ChainStore itself updates
            */
            bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].subscribe(this.forceUpdate);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].unsubscribe(this.forceUpdate);
        }
    }, {
        key: "_onApproveModal",
        value: function _onApproveModal(id, action) {
            if (this.refs[id + "_" + action]) {
                this.refs[id + "_" + action].show();
            }
        }
    }, {
        key: "_canReject",
        value: function _canReject(proposal) {
            return proposal.available_active_approvals.length || proposal.available_owner_approvals.length || proposal.available_key_approvals.length;
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var account = this.props.account;

            if (!account) return null;

            var proposals = [];

            if (account.get("proposals").size) {
                account.get("proposals").forEach(function (proposal_id) {
                    var proposal = bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].getObject(proposal_id);
                    if (proposal) {
                        var proposed_transaction = proposal.get("proposed_transaction");
                        var operations = proposed_transaction.get("operations");
                        proposals.push({ operations: operations, account: account, proposal: proposal });
                    }
                });
            }

            var proposalRows = proposals.sort(function (a, b) {
                return common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].sortID(a.proposal.get("id"), b.proposal.get("id"), true);
            }).reduce(function (result, proposal, index) {
                var isScam = false;
                var id = proposal.proposal.get("id");
                var proposer = proposal.proposal.get("proposer");
                var expiration = proposal.proposal.get("expiration_time");
                var text = proposal.operations.map(function (o, index) {
                    if (o.getIn([1, "to"]) === "1.2.153124") isScam = true;
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Blockchain_ProposedOperation__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        key: proposal.proposal.get("id") + "_operation_" + index,
                        expiration: expiration,
                        index: index,
                        op: o.toJS(),
                        inverted: false,
                        hideFee: true,
                        hideOpLabel: true,
                        hideExpiration: true,
                        hideDate: true,
                        proposal: true,
                        id: id,
                        proposer: proposer
                    });
                }).toArray();

                var canReject = _this2._canReject(proposal.proposal.toJS());
                var proposalId = proposal.proposal.get("id");

                var type = proposal.proposal.get("required_active_approvals").size ? "active" : "owner";
                result.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: proposalId + "_id" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            colSpan: "4",
                            className: "proposal" + (index === 0 ? " first" : "")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Blockchain_ProposedOperation__WEBPACK_IMPORTED_MODULE_2__["TransactionIDAndExpiry"], {
                            id: id,
                            expiration: expiration
                        })
                    )
                ));

                var available = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.proposal.get("available_" + type + "_approvals"));
                var availableKeys = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.proposal.get("available_key_approvals"));

                var required = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.proposal.get("required_" + type + "_approvals"));
                var requiredPermissions = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].unnest(required, type);

                var _finalRequiredPerms = Object(_Modal_ProposalApproveModal__WEBPACK_IMPORTED_MODULE_6__["finalRequiredPerms"])(requiredPermissions, available, availableKeys),
                    _finalRequiredPerms2 = _slicedToArray(_finalRequiredPerms, 2),
                    accounts = _finalRequiredPerms2[0],
                    keys = _finalRequiredPerms2[1];

                var accountNames = [];

                if (accounts.length) {
                    accounts.forEach(function (account) {
                        if (account && !proposal.proposal.get("available_" + type + "_approvals").includes(account)) {
                            accountNames.push(account);
                        }
                    });
                }

                var keyNames = [];
                if (keys.length) {
                    keys.forEach(function (key) {
                        var isMine = stores_AccountStore__WEBPACK_IMPORTED_MODULE_12__["default"].isMyKey(key);
                        if (isMine && !proposal.proposal.get("available_key_approvals").includes(key)) {
                            keyNames.push(key);
                        }
                    });
                }

                var canApprove = accountNames.length + keyNames.length > 0;

                result.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    {
                        className: "top-left-align",
                        key: proposalId + "_content"
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        text
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        requiredPermissions.map(function (account, index) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                {
                                    className: "list-item",
                                    key: proposalId + "_approver_" + index
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_11__["default"], {
                                    subpage: "permissions",
                                    account: account.id
                                })
                            );
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_7__["default"], {
                            proposal: proposal.proposal.get("id"),
                            type: type
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { className: "approval-buttons" },
                        isScam ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("tooltip.propose_scam"),
                                className: "tooltip has-error scam-error"
                            },
                            "SCAM"
                        ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                onClick: canApprove ? _this2._onApproveModal.bind(_this2, proposalId, "approve") : function () {},
                                className: "button primary hollow" + (canApprove ? "" : " hidden")
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "span",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.approve" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_ProposalApproveModal__WEBPACK_IMPORTED_MODULE_6__["default"], {
                            ref: proposalId + "_" + "approve",
                            modalId: proposalId + "_" + "approve",
                            account: proposal.account.get("id"),
                            proposal: proposalId,
                            action: "approve"
                        }),
                        canReject ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                onClick: _this2._onApproveModal.bind(_this2, proposalId, "reject"),
                                className: "button primary hollow"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.reject" })
                        ) : null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_ProposalApproveModal__WEBPACK_IMPORTED_MODULE_6__["default"], {
                            ref: proposalId + "_" + "reject",
                            modalId: proposalId + "_" + "reject",
                            account: proposal.account.get("id"),
                            proposal: proposalId,
                            action: "reject"
                        })
                    )
                ));
                result.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: proposalId + "_separator" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { colSpan: "4" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("hr", null)
                    )
                ));
                return result;
            }, []);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "table",
                {
                    className: "table proposals compact " + this.props.className
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "thead",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tr",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.proposals" })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.approvers" })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.status" })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.action" })
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tbody",
                    null,
                    proposalRows
                )
            );
        }
    }]);

    return Proposals;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

Proposals.propTypes = {
    account: components_Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccount.isRequired
};


/* harmony default export */ __webpack_exports__["default"] = (Object(components_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(Proposals));

/***/ }),

/***/ 2571:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "finalRequiredPerms", function() { return finalRequiredPerms; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(709);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _BaseModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1959);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1832);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1833);
/* harmony import */ var components_Forms_AccountSelect__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1967);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(540);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(581);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(577);
/* harmony import */ var _Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2572);
/* harmony import */ var common_permission_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2573);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(407);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }















var finalRequiredPerms = function finalRequiredPerms(requiredPermissions, available, availableKeys) {
    var finalRequired = [];

    requiredPermissions.forEach(function (account) {
        finalRequired = finalRequired.concat(account.getMissingSigs(available));
    });

    var finalRequiredKeys = [];

    requiredPermissions.forEach(function (account) {
        finalRequiredKeys = finalRequiredKeys.concat(account.getMissingKeys(availableKeys));
    });

    return [finalRequired, finalRequiredKeys];
};

var ProposalApproveModal = function (_React$Component) {
    _inherits(ProposalApproveModal, _React$Component);

    function ProposalApproveModal(props) {
        _classCallCheck(this, ProposalApproveModal);

        var _this = _possibleConstructorReturn(this, (ProposalApproveModal.__proto__ || Object.getPrototypeOf(ProposalApproveModal)).call(this));

        _this.state = {
            active: null,
            key: null,
            owner: null,
            payee: null
        };
        return _this;
    }

    _createClass(ProposalApproveModal, [{
        key: "onActiveAccount",
        value: function onActiveAccount(accountMap, keyMap, type, account) {
            var newState = {};

            if (keyMap[account]) {
                newState["key"] = account;
                newState[type] = null;
            } else if (account) {
                newState[type] = accountMap[account];
                newState["key"] = null;
            } else {
                newState[type] = null;
                newState["key"] = null;
            }
            this.setState(newState);
        }
    }, {
        key: "_onProposalAction",
        value: function _onProposalAction(oldProposal) {
            var _this2 = this;

            var proposalObject = oldProposal.toJS();
            var _state = this.state,
                active = _state.active,
                key = _state.key,
                owner = _state.owner,
                payee = _state.payee;


            var proposal = {
                fee_paying_account: payee || active,
                proposal: proposalObject.id,
                active_approvals_to_add: [],
                active_approvals_to_remove: [],
                owner_approvals_to_add: [],
                owner_approvals_to_remove: [],
                key_approvals_to_add: [],
                key_approvals_to_remove: []
            };

            var isAdd = this.props.action === "approve";

            var neededKeys = [];

            ["active", "owner", "key"].forEach(function (auth_type) {
                var value = _this2.state[auth_type];
                if (value) {
                    var hasValue = proposalObject["available_" + auth_type + "_approvals"].indexOf(value) !== -1;
                    if (isAdd && !hasValue || !isAdd && hasValue) {
                        if (_this2.props.action === "approve") {
                            proposal[auth_type + "_approvals_to_add"] = [value];
                            if (auth_type === "key") neededKeys.push(value);
                        } else if (_this2.props.action === "reject") {
                            proposal[auth_type + "_approvals_to_remove"] = [value];
                            if (auth_type === "key") neededKeys.push(value);
                        }
                    }
                }
            });

            var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_9__["default"].new_transaction();
            tr.add_type_operation("proposal_update", proposal);
            stores_WalletDb__WEBPACK_IMPORTED_MODULE_8__["default"].process_transaction(tr, null, true, neededKeys);

            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default.a.publish(this.props.modalId, "close");
        }
    }, {
        key: "onChangePayee",
        value: function onChangePayee(account) {
            var fullAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_12__["ChainStore"].getAccount(account);

            if (fullAccount) {
                this.setState({
                    payee: fullAccount.get("id")
                });
            }
        }
    }, {
        key: "onCancel",
        value: function onCancel() {
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default.a.publish(this.props.modalId, "close");
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                proposal = _props.proposal,
                type = _props.type;


            var accountNames = [];
            var accountMap = {};
            var isAdd = this.props.action === "approve";

            if (this.props.accounts.length) {
                this.props.accounts.forEach(function (account) {
                    var accountCheck = isAdd ? account && !proposal.get("available_" + type + "_approvals").includes(account.get("id")) : account && proposal.get("available_" + type + "_approvals").includes(account.get("id"));
                    if (accountCheck) {
                        accountMap[account.get("name")] = account.get("id");
                        accountNames.push(account.get("name"));
                    }
                });
            }

            var keyNames = [];
            var keyMap = {};
            if (this.props.keys.length) {
                this.props.keys.forEach(function (key) {
                    var isMine = stores_AccountStore__WEBPACK_IMPORTED_MODULE_7__["default"].isMyKey(key);
                    var hasValue = proposal.get("available_key_approvals").includes(key);
                    if (isMine && isAdd && !hasValue || isMine && !isAdd && hasValue) {
                        keyMap[key] = true;
                        keyNames.push(key);
                    }
                });
            }

            var myAccounts = stores_AccountStore__WEBPACK_IMPORTED_MODULE_7__["default"].getMyAccounts();

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "form",
                { className: "grid-block vertical full-width-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-container" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "h4",
                            null,
                            isAdd ? "Add approval" : "Remove approval"
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "content-block",
                            style: { paddingRight: "20%" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_10__["default"], {
                            expanded: true,
                            proposal: proposal.get("id"),
                            type: type,
                            added: isAdd ? this.state.key ? this.state.key : this.state[type] || null : null,
                            removed: !isAdd ? this.state.key ? this.state.key : this.state[type] || null : null,
                            noFail: true
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block full-width-content" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "full-width-content form-group" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                                content: "modal.proposals.pay_with",
                                component: "label"
                            }),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Forms_AccountSelect__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                account_names: myAccounts,
                                onChange: this.onChangePayee.bind(this)
                            })
                        ),
                        accountNames.length || keyNames.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "full-width-content form-group" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                                content: "modal.proposals.approval_" + (isAdd ? "add" : "remove"),
                                component: "label"
                            }),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Forms_AccountSelect__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                account_names: accountNames.concat(keyNames),
                                onChange: this.onActiveAccount.bind(this, accountMap, keyMap, type)
                            })
                        ) : null,
                         false ? undefined : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                            type: "submit",
                            className: "button",
                            onClick: this._onProposalAction.bind(this, proposal),
                            value: isAdd ? "Approve" : "Remove"
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                onClick: this.onCancel.bind(this),
                                className: " button"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.cancel" })
                        )
                    )
                )
            );
        }
    }]);

    return ProposalApproveModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ProposalApproveModal.propTypes = {
    accounts: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccountsList
};

ProposalApproveModal = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(ProposalApproveModal);

var FirstLevel = function (_React$Component2) {
    _inherits(FirstLevel, _React$Component2);

    function FirstLevel() {
        _classCallCheck(this, FirstLevel);

        var _this3 = _possibleConstructorReturn(this, (FirstLevel.__proto__ || Object.getPrototypeOf(FirstLevel)).call(this));

        _this3._updateState = _this3._updateState.bind(_this3);
        return _this3;
    }

    _createClass(FirstLevel, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this._updateState();

            bitsharesjs__WEBPACK_IMPORTED_MODULE_12__["ChainStore"].subscribe(this._updateState);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            bitsharesjs__WEBPACK_IMPORTED_MODULE_12__["ChainStore"].unsubscribe(this._updateState);
        }
    }, {
        key: "_updateState",
        value: function _updateState() {
            var _props2 = this.props,
                proposal = _props2.proposal,
                account = _props2.account;

            var type = proposal.get("required_active_approvals").size ? "active" : "owner";

            var required = common_permission_utils__WEBPACK_IMPORTED_MODULE_11__["default"].listToIDs(proposal.get("required_" + type + "_approvals"));
            var available = common_permission_utils__WEBPACK_IMPORTED_MODULE_11__["default"].listToIDs(proposal.get("available_" + type + "_approvals"));
            var availableKeys = common_permission_utils__WEBPACK_IMPORTED_MODULE_11__["default"].listToIDs(proposal.get("available_key_approvals"));

            this.setState({
                requiredPermissions: common_permission_utils__WEBPACK_IMPORTED_MODULE_11__["default"].unnest(required, type),
                available: available,
                availableKeys: availableKeys,
                type: type
            });
        }
    }, {
        key: "render",
        value: function render() {
            var action = this.props.action;
            var _state2 = this.state,
                requiredPermissions = _state2.requiredPermissions,
                available = _state2.available,
                availableKeys = _state2.availableKeys,
                type = _state2.type;

            var _finalRequiredPerms = finalRequiredPerms(requiredPermissions, available, availableKeys),
                _finalRequiredPerms2 = _slicedToArray(_finalRequiredPerms, 2),
                finalRequired = _finalRequiredPerms2[0],
                finalRequiredKeys = _finalRequiredPerms2[1];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ProposalApproveModal, _extends({}, this.props, {
                type: type,
                accounts: action === "approve" ? finalRequired : available,
                keys: action === "approve" ? finalRequiredKeys : availableKeys
            }));
        }
    }]);

    return FirstLevel;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

FirstLevel.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccount.isRequired,
    proposal: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainObject.isRequired
};

FirstLevel = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(FirstLevel);

var ModalWrapper = function (_React$Component3) {
    _inherits(ModalWrapper, _React$Component3);

    function ModalWrapper() {
        _classCallCheck(this, ModalWrapper);

        var _this4 = _possibleConstructorReturn(this, (ModalWrapper.__proto__ || Object.getPrototypeOf(ModalWrapper)).call(this));

        _this4.state = {
            open: false
        };
        return _this4;
    }

    _createClass(ModalWrapper, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this5 = this;

            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default.a.subscribe(this.props.modalId, function (msg, data) {
                _this5.setState({
                    open: data === "open"
                });
            });
        }
    }, {
        key: "show",
        value: function show() {
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default.a.publish(this.props.modalId, "open");
        }
    }, {
        key: "render",
        value: function render() {
            var _props3 = this.props,
                modalId = _props3.modalId,
                proposal = _props3.proposal;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                _BaseModal__WEBPACK_IMPORTED_MODULE_2__["default"],
                { id: modalId, overlay: true, ref: modalId },
                this.state.open ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block vertical" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FirstLevel, this.props)
                ) : null
            );
        }
    }]);

    return ModalWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (ModalWrapper);

/***/ }),

/***/ 2572:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(582);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1832);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1833);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2303);
/* harmony import */ var common_permission_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2573);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(407);
/* harmony import */ var _NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2574);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__);


var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var AccountPermissionTree = function (_React$Component) {
    _inherits(AccountPermissionTree, _React$Component);

    function AccountPermissionTree(props) {
        _classCallCheck(this, AccountPermissionTree);

        var _this = _possibleConstructorReturn(this, (AccountPermissionTree.__proto__ || Object.getPrototypeOf(AccountPermissionTree)).call(this, props));

        _this.handleExpandToggle = function () {
            _this.setState({ expanded: !_this.state.expanded });
        };

        _this.state = { expanded: !!props.expanded };
        return _this;
    }

    _createClass(AccountPermissionTree, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                account = _props.account,
                available = _props.available,
                availableKeys = _props.availableKeys,
                permission = _props.permission,
                threshold = _props.threshold,
                level = _props.level,
                maxAuthorityDepth = _props.maxAuthorityDepth,
                hideRoot = _props.hideRoot;
            var expanded = this.state.expanded;


            var isOK = Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["isApproved"])(permission, available, availableKeys);
            var isNested = permission.isNested();
            var isMultiSig = permission.isMultiSig();

            var notNestedWeight = Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["notNestdWeight"])(permission.weight, threshold) || 1;

            var nestedWeight = Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["statusText"])(permission, available, availableKeys);

            var authorityDepthOverflow = level >= maxAuthorityDepth;

            var rootPerm = !isNested && !isMultiSig ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    { colSpan: "2" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ApprovedIcon"], { approved: isOK }),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        subpage: "permissions",
                        account: account.get("id")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    null,
                    !isNested && notNestedWeight ? "" + (notNestedWeight && notNestedWeight.length === 2 ? "\xA0\xA0" : "") + notNestedWeight + " " : null
                )
            ) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    { colSpan: "2" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ApprovedIcon"], { approved: isOK }),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        subpage: "permissions",
                        account: account.get("id")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    null,
                    expanded ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        { className: isOK ? "success-text" : "" },
                        notNestedWeight
                    ) : notNestedWeight && "" + (notNestedWeight && notNestedWeight.length === 2 ? "\xA0\xA0" : "") + notNestedWeight + " ",
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ExpandButton"], {
                        onToggle: this.handleExpandToggle,
                        expanded: expanded
                    }),
                    expanded && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        { className: "appended" },
                        "(",
                        nestedWeight,
                        ")"
                    ),
                    authorityDepthOverflow ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["AuthorityDepthOverflowWarning"], null) : Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["hasAuthorityDepthProblem"])(maxAuthorityDepth, permission, level) && !expanded && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ChildAuthorityDepthOverflowWarning"], null)
                )
            );

            var status = [];

            if ((isNested || isMultiSig) && expanded) {
                permission.accounts.forEach(function (subAccount) {
                    status.push(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(BoundAccountPermissionTree, {
                        key: subAccount.id,
                        account: subAccount.id,
                        accounts: subAccount.accounts,
                        permission: subAccount,
                        available: available,
                        availableKeys: availableKeys,
                        threshold: permission.threshold,
                        level: level + 1,
                        maxAuthorityDepth: maxAuthorityDepth
                    }));
                });

                if (permission.keys.length) {
                    permission.keys.forEach(function (key) {
                        return status.push(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["KeyPermissionBranch"], {
                            key: key.id,
                            permission: key,
                            available: availableKeys,
                            level: level + (hideRoot ? 0 : 1),
                            weight: Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["notNestdWeight"])(key.weight, threshold)
                        }));
                    });
                }
            }

            return status.length > 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tbody",
                null,
                hideRoot || rootPerm,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "tr",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { colSpan: "3", className: "heading-perm" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: hideRoot ? "" : "table-container" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "table",
                                null,
                                status
                            )
                        ),
                        expanded && level === 0 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "spacer" })
                    )
                )
            ) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tbody",
                null,
                rootPerm
            );
        }
    }]);

    return AccountPermissionTree;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

AccountPermissionTree.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccount.isRequired,
    accounts: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccountsList,
    level: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.number.isRequired
};
AccountPermissionTree.defaultProps = {
    level: 0
};

var BoundAccountPermissionTree = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(AccountPermissionTree);

var FirstLevel = function (_React$Component2) {
    _inherits(FirstLevel, _React$Component2);

    function FirstLevel(props) {
        _classCallCheck(this, FirstLevel);

        var _this2 = _possibleConstructorReturn(this, (FirstLevel.__proto__ || Object.getPrototypeOf(FirstLevel)).call(this, props));

        _this2.handleExpandToggle = function () {
            return _this2.setState({ expanded: !_this2.state.expanded });
        };

        _this2.state = {
            requiredPermissions: [],
            expanded: props.expanded
        };

        _this2._updateState = _this2._updateState.bind(_this2);
        return _this2;
    }

    _createClass(FirstLevel, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this._updateState();

            bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].subscribe(this._updateState);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].unsubscribe(this._updateState);
        }
    }, {
        key: "_updateState",
        value: function _updateState() {
            var required = common_permission_utils__WEBPACK_IMPORTED_MODULE_5__["default"].listToIDs(this.props.required);
            var available = common_permission_utils__WEBPACK_IMPORTED_MODULE_5__["default"].listToIDs(this.props.available);

            this.setState({
                requiredPermissions: common_permission_utils__WEBPACK_IMPORTED_MODULE_5__["default"].unnest(required, this.props.type),
                required: required,
                available: available
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props2 = this.props,
                type = _props2.type,
                added = _props2.added,
                removed = _props2.removed,
                availableKeys = _props2.availableKeys,
                globalObject = _props2.globalObject,
                reviewPeriodTime = _props2.reviewPeriodTime,
                noFail = _props2.noFail;
            var _state = this.state,
                requiredPermissions = _state.requiredPermissions,
                required = _state.required,
                available = _state.available,
                expanded = _state.expanded;


            available = Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__["default"])(available);
            availableKeys = availableKeys.toJS();

            if (added) {
                available.push(added);
                availableKeys.push(added);
            }

            if (removed) {
                if (available.indexOf(removed) !== -1) {
                    available.splice(available.indexOf(removed), 1);
                }
                if (availableKeys.indexOf(removed) !== -1) {
                    availableKeys.splice(availableKeys.indexOf(removed), 1);
                }
            }

            var approvedCount = requiredPermissions.reduce(function (total, perm) {
                return total + (Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["isApproved"])(perm, available, availableKeys) ? 1 : 0);
            }, 0);
            var approversCount = requiredPermissions.length;
            var isOK = approvedCount === approversCount;

            var failed = isOK && !reviewPeriodTime && !noFail;
            var pendingReview = isOK && reviewPeriodTime;

            var maxAuthorityDepth = globalObject.get("parameters").get("max_authority_depth");

            var onePerm = requiredPermissions.length === 1;
            var oPermission = onePerm ? requiredPermissions[0] : null;

            var nestedWeight = !onePerm && approvedCount + " / " + approversCount;

            var rows = requiredPermissions.map(function (account) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(BoundAccountPermissionTree, {
                    key: account.id,
                    account: account.id,
                    accounts: account.accounts,
                    permission: account,
                    available: available,
                    availableKeys: availableKeys,
                    expanded: _this3.props.expanded || onePerm,
                    level: 0,
                    maxAuthorityDepth: maxAuthorityDepth,
                    hideRoot: onePerm
                });
            });

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "div",
                { className: "nested-approval-state" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "root-status" },
                    failed ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["Failed"], null) : pendingReview ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["Review"], null) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["Pending"], null),
                    " ",
                    !oPermission ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        null,
                        "(",
                        nestedWeight,
                        ")"
                    ) : oPermission.threshold > 1 && Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["statusText"])(oPermission, available, availableKeys),
                    (!oPermission || oPermission.isMultiSig() || oPermission.isNested()) && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ExpandButton"], {
                        onToggle: this.handleExpandToggle,
                        expanded: expanded
                    }),
                    !expanded && requiredPermissions.some(function (permission) {
                        return Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["hasAuthorityDepthProblem"])(maxAuthorityDepth, permission, 0);
                    }) && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ChildAuthorityDepthOverflowWarning"], null)
                ),
                expanded && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "table",
                    null,
                    rows
                )
            );
        }
    }]);

    return FirstLevel;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

FirstLevel.propTypes = {
    required: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccountsList,
    available: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccountsList
};
FirstLevel.defaultProps = {
    type: "active",
    added: null,
    removed: null
};

FirstLevel = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(FirstLevel);

var ProposalWrapper = function (_React$Component3) {
    _inherits(ProposalWrapper, _React$Component3);

    function ProposalWrapper() {
        _classCallCheck(this, ProposalWrapper);

        return _possibleConstructorReturn(this, (ProposalWrapper.__proto__ || Object.getPrototypeOf(ProposalWrapper)).apply(this, arguments));
    }

    _createClass(ProposalWrapper, [{
        key: "render",
        value: function render() {
            var _props3 = this.props,
                proposal = _props3.proposal,
                type = _props3.type;

            var available = proposal.get("available_" + type + "_approvals");
            var availableKeys = proposal.get("available_key_approvals");
            var required = proposal.get("required_" + type + "_approvals");

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(FirstLevel, _extends({}, this.props, {
                required: required,
                available: available,
                availableKeys: availableKeys,
                reviewPeriodTime: proposal.get("review_period_time")
            }));
        }
    }]);

    return ProposalWrapper;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

ProposalWrapper.propTypes = {
    proposal: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainObject.isRequired,
    type: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.string.isRequired,
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainObject.isRequired
};
ProposalWrapper.defaultProps = {
    type: "active",
    added: null,
    globalObject: "2.0.0"
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(ProposalWrapper));

/***/ }),

/***/ 2573:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(407);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(514);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);



var KeyAuth = function KeyAuth(auth) {
    var _this = this;

    this.id = auth.toJS ? auth.get(0) : auth[0];
    this.weight = auth.toJS ? auth.get(1) : auth[1];

    this.isAvailable = function (auths) {
        return auths.includes ? auths.includes(_this.id) : auths.indexOf(_this) !== -1;
    };
};

var permissionUtils = {
    AccountPermission: function AccountPermission(account, weight, type) {
        var _this2 = this;

        this.id = account.get("id");
        this.weight = weight;
        this.threshold = account.getIn([type, "weight_threshold"]);
        this.accounts = [];
        this.keys = account.getIn([type, "key_auths"]).map(function (auth) {
            return new KeyAuth(auth);
        }).toArray();

        this.isAvailable = function (auths) {
            return auths.includes ? auths.includes(_this2.id) : auths.indexOf(_this2) !== -1;
        };

        this._sumWeights = function (auths) {
            if (!_this2.isNested() && !_this2.isMultiSig()) {
                return _this2.isAvailable(auths) ? _this2.weight : 0;
            } else {
                var sum = _this2.accounts.reduce(function (status, account) {
                    return status + (account._sumWeights(auths) ? account.weight : 0);
                }, 0);

                return Math.floor(sum / _this2.threshold);
            }
        };

        this.getStatus = function (auths, keyAuths) {
            if (!_this2.isNested()) {
                var sum = _this2._sumWeights(auths);
                if (_this2.isMultiSig()) {
                    sum += _this2.sumKeys(keyAuths);
                }
                return sum;
            } else {
                var _sum = _this2.accounts.reduce(function (status, account) {
                    return status + account._sumWeights(auths);
                }, 0);

                if (_this2.keys.length) {
                    _sum += _this2.sumKeys(keyAuths);
                }

                return _sum;
            }
        };

        this.sumKeys = function (keyAuths) {
            var keySum = _this2.keys.reduce(function (s, key) {
                return s + (key.isAvailable(keyAuths) ? key.weight : 0);
            }, 0);
            return keySum;
        };

        this.isNested = function () {
            return _this2.accounts.length > 0;
        };

        this.isMultiSig = function () {
            return _this2.keys.reduce(function (final, key) {
                return final || key.weight < _this2.threshold;
            }, false);
        };

        this.getMissingSigs = function (auths) {
            var missing = [];
            var nested = [];
            if (_this2.isNested()) {
                nested = _this2.accounts.reduce(function (a, account) {
                    return a.concat(account.getMissingSigs(auths));
                }, []);
            } else if (!_this2.isAvailable(auths)) {
                missing.push(_this2.id);
            }

            return missing.concat(nested);
        };

        this.getMissingKeys = function (auths) {
            var missing = [];
            var nested = [];
            if (_this2.keys.length && (_this2.isNested() || _this2.isMultiSig())) {
                _this2.keys.forEach(function (key) {
                    if (!key.isAvailable(auths)) {
                        missing.push(key.id);
                    }
                });
            }

            if (_this2.isNested()) {
                nested = _this2.accounts.reduce(function (a, account) {
                    return a.concat(account.getMissingKeys(auths));
                }, []);
            }

            return missing.concat(nested);
        };
    },

    listToIDs: function listToIDs(accountList) {
        var allAccounts = [];

        accountList.forEach(function (account) {
            if (account) {
                allAccounts.push(account.get ? account.get("id") : account);
            }
        });

        return allAccounts;
    },

    unravel: function unravel(accountPermission, type) {
        var _this3 = this;

        var recursive_count = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

        if (recursive_count < 3) {
            var account = bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["ChainStore"].getAccount(accountPermission.id);
            if (account && account.getIn([type, "account_auths"]).size) {
                account.getIn([type, "account_auths"]).forEach(function (auth) {
                    var nestedAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["ChainStore"].getAccount(auth.get(0));
                    if (nestedAccount) {
                        accountPermission.accounts.push(_this3.unravel(new _this3.AccountPermission(nestedAccount, auth.get(1), type), type, recursive_count + 1));
                    }
                });
            }
        }

        return accountPermission;
    },

    unnest: function unnest(accounts, type) {
        var _this4 = this;

        var map = [];
        accounts.forEach(function (id) {
            var fullAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["ChainStore"].getAccount(id);
            var currentPermission = _this4.unravel(new _this4.AccountPermission(fullAccount, null, type), type);
            map.push(currentPermission);
        });

        return map;
    },

    flatten_auths: function flatten_auths(auths) {
        var existingAuths = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List();

        if (!auths.size) {
            return existingAuths;
        }

        auths.forEach(function (owner) {
            if (!existingAuths.includes(owner.get(0))) {
                existingAuths = existingAuths.push(owner.get(0));
            }
        });
        return existingAuths;
    }
};

/* harmony default export */ __webpack_exports__["default"] = (permissionUtils);

/***/ }),

/***/ 2574:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tooltip", function() { return Tooltip; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthorityDepthOverflowWarning", function() { return AuthorityDepthOverflowWarning; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChildAuthorityDepthOverflowWarning", function() { return ChildAuthorityDepthOverflowWarning; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Pending", function() { return Pending; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Review", function() { return Review; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Failed", function() { return Failed; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExpandButton", function() { return ExpandButton; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ApprovedIcon", function() { return ApprovedIcon; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KeyPermissionBranch", function() { return KeyPermissionBranch; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAuthorityDepthProblem", function() { return hasAuthorityDepthProblem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getStatus", function() { return getStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isApproved", function() { return isApproved; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "statusText", function() { return statusText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "notNestdWeight", function() { return notNestdWeight; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(774);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2238);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(558);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_5__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








var Tooltip = function (_React$Component) {
    _inherits(Tooltip, _React$Component);

    function Tooltip() {
        _classCallCheck(this, Tooltip);

        return _possibleConstructorReturn(this, (Tooltip.__proto__ || Object.getPrototypeOf(Tooltip)).apply(this, arguments));
    }

    _createClass(Tooltip, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            react_tooltip__WEBPACK_IMPORTED_MODULE_2___default.a.rebuild();
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                className = _props.className,
                children = _props.children,
                dataTip = _props.dataTip,
                content = _props.content;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                {
                    className: "tooltip " + className,
                    "data-html": true,
                    "data-tip": dataTip || counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate(content)
                },
                children
            );
        }
    }]);

    return Tooltip;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var AuthorityDepthOverflowWarning = function AuthorityDepthOverflowWarning() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        {
            className: "error appended",
            content: "explorer.proposals.authority_depth_warning"
        },
        "/!\\"
    );
};

var ChildAuthorityDepthOverflowWarning = function ChildAuthorityDepthOverflowWarning() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        {
            className: "error appended",
            content: "explorer.proposals.children_authority_depth_warning"
        },
        "/!\\"
    );
};

var Pending = function Pending() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        { className: "warning", content: "explorer.proposals.pending_approval" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "explorer.proposals.pending" })
    );
};

var Review = function Review() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        { className: "warning", content: "explorer.proposals.pending_review" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "explorer.proposals.review" })
    );
};

var Failed = function Failed() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        { className: "error", content: "explorer.proposals.failed_execute" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "explorer.proposals.failed" })
    );
};

var ExpandButton = function ExpandButton(_ref) {
    var onToggle = _ref.onToggle,
        expanded = _ref.expanded;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "a",
        { className: "expand-button", onClick: onToggle },
        "[",
        expanded ? "-" : "+",
        "]"
    );
};

var ApprovedIcon = function ApprovedIcon(_ref2) {
    var approved = _ref2.approved;
    return approved ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_1__["default"], {
        name: "checkmark-circle",
        size: "1x",
        className: "success",
        title: "icons.checkmark_circle.operation_succeed"
    }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_1__["default"], {
        name: "cross-circle",
        size: "1x",
        className: "error",
        title: "icons.cross_circle.operation_failed"
    });
};

var KeyPermissionBranch = function KeyPermissionBranch(_ref3) {
    var available = _ref3.available,
        permission = _ref3.permission,
        weight = _ref3.weight,
        level = _ref3.level;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "tbody",
        null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "tr",
            null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "td",
                { colSpan: "2" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ApprovedIcon, { approved: permission.isAvailable(available) }),
                permission.id.substr(0, 20 - 4 * level),
                "..."
            ),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "td",
                null,
                weight
            )
        )
    );
};

var hasAuthorityDepthProblem = function hasAuthorityDepthProblem(maxAuthorityDepth, permission) {
    var level = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

    if (level > maxAuthorityDepth) {
        return true;
    } else if (!permission.isNested() && !permission.isMultiSig()) {
        return false;
    } else {
        return permission.accounts.some(function (subAccount) {
            return hasAuthorityDepthProblem(maxAuthorityDepth, subAccount, level + 1);
        });
    }
};

var getStatus = function getStatus(permission, available, availableKeys) {
    return permission.accounts.reduce(function (amount, subPermission) {
        return amount + (isApproved(subPermission, available, availableKeys) ? subPermission.weight : 0);
    }, 0) + permission.keys.reduce(function (amount, key) {
        return amount + (key.isAvailable(availableKeys) ? key.weight : 0);
    }, 0);
};

var isApproved = function isApproved(permission, available, availableKeys) {
    return permission.isNested() || permission.isMultiSig() ? getStatus(permission, available, availableKeys) >= permission.threshold : permission.isAvailable(available);
};

var statusText = function statusText(permission, available, availableKeys) {
    return permission && permission.threshold > 10 ? common_utils__WEBPACK_IMPORTED_MODULE_3__["default"].get_percentage(permission.getStatus(available, availableKeys), permission.threshold) + " / 100%" : permission.getStatus(available, availableKeys) + " / " + permission.threshold;
};

var notNestdWeight = function notNestdWeight(weight, threshold) {
    return threshold && threshold > 10 ? common_utils__WEBPACK_IMPORTED_MODULE_3__["default"].get_percentage(weight, threshold) : weight;
};

/***/ }),

/***/ 2575:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Exchange_MyOpenOrders__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2399);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_MarketsActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2236);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(407);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(573);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(760);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(701);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(702);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2234);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2530);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }














var AccountOrders = function (_React$Component) {
    _inherits(AccountOrders, _React$Component);

    function AccountOrders(props) {
        _classCallCheck(this, AccountOrders);

        var _this = _possibleConstructorReturn(this, (AccountOrders.__proto__ || Object.getPrototypeOf(AccountOrders)).call(this, props));

        _this.state = {
            selectedOrders: [],
            filterValue: ""
        };
        return _this;
    }

    _createClass(AccountOrders, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var cancelHeader = document.getElementById("cancelAllOrders");

            if (cancelHeader) {
                cancelHeader.addEventListener("click", function () {
                    var orders = this._getFilteredOrders.call(this);
                    orders = orders.toJS ? orders.toJS() : orders;

                    this.setState({ selectedOrders: orders });

                    var checkboxes = document.querySelectorAll(".orderCancel");

                    checkboxes.forEach(function (item) {
                        if (!item.checked) item.checked = true;
                    });
                }.bind(this));
            }
        }
    }, {
        key: "_getFilteredOrders",
        value: function _getFilteredOrders() {
            var filterValue = this.state.filterValue;


            var orders = this.props.account.get("orders") || [];

            return orders.filter(function (item) {
                var order = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(item).toJS();
                var base = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(order.sell_price.base.asset_id);
                var quote = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(order.sell_price.quote.asset_id);

                var baseSymbol = base.get("symbol").toLowerCase();
                var quoteSymbol = quote.get("symbol").toLowerCase();

                return baseSymbol.indexOf(filterValue) > -1 || quoteSymbol.indexOf(filterValue) > -1;
            });
        }
    }, {
        key: "_cancelLimitOrder",
        value: function _cancelLimitOrder(orderID, e) {
            e.preventDefault();

            actions_MarketsActions__WEBPACK_IMPORTED_MODULE_3__["default"].cancelLimitOrder(this.props.account.get("id"), orderID, // order id to cancel
            false // Don't show normal confirms
            ).catch(function (err) {
                console.log("cancel order error:", err);
            });
        }
    }, {
        key: "_cancelLimitOrders",
        value: function _cancelLimitOrders(orderId) {
            var _this2 = this;

            actions_MarketsActions__WEBPACK_IMPORTED_MODULE_3__["default"].cancelLimitOrders(this.props.account.get("id"), this.state.selectedOrders).then(function () {
                _this2.resetSelected();
            }).catch(function (err) {
                console.log("cancel orders error:", err);
            });
        }
    }, {
        key: "onFlip",
        value: function onFlip(marketId) {
            var setting = {};
            setting[marketId] = !this.props.marketDirections.get(marketId);
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_8__["default"].changeMarketDirection(setting);
        }
    }, {
        key: "onCheckCancel",
        value: function onCheckCancel(orderId, evt) {
            var selectedOrders = this.state.selectedOrders;

            var checked = evt.target.checked;

            if (checked) {
                this.setState({ selectedOrders: selectedOrders.concat([orderId]) });
            } else {
                var index = selectedOrders.indexOf(orderId);

                if (index > -1) {
                    this.setState({
                        selectedOrders: selectedOrders.slice(0, index).concat(selectedOrders.slice(index + 1))
                    });
                }
            }
        }
    }, {
        key: "setFilterValue",
        value: function setFilterValue(evt) {
            this.setState({ filterValue: evt.target.value.toLowerCase() });
        }
    }, {
        key: "resetSelected",
        value: function resetSelected() {
            this.setState({ selectedOrders: [] });

            var checkboxes = document.querySelectorAll(".orderCancel");

            checkboxes.forEach(function (item) {
                if (item.checked) item.checked = false;
            });
        }
    }, {
        key: "cancelSelected",
        value: function cancelSelected() {
            this._cancelLimitOrders.call(this);
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props = this.props,
                account = _props.account,
                marketDirections = _props.marketDirections;
            var _state = this.state,
                filterValue = _state.filterValue,
                selectedOrders = _state.selectedOrders;

            var cancel = counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("account.perm.cancel");
            var markets = {};

            var marketOrders = {};

            if (!account.get("orders")) {
                return null;
            }

            var orders = account.get("orders");
            var ordersCount = orders.size;
            if (filterValue) {
                orders = this._getFilteredOrders.call(this);
            }

            orders.forEach(function (orderID) {
                var order = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(orderID).toJS();
                var base = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(order.sell_price.base.asset_id);
                var quote = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(order.sell_price.quote.asset_id);

                if (base && quote) {
                    var _assets;

                    var assets = (_assets = {}, _defineProperty(_assets, base.get("id"), { precision: base.get("precision") }), _defineProperty(_assets, quote.get("id"), { precision: quote.get("precision") }), _assets);
                    // let baseID = parseInt(order.sell_price.base.asset_id.split(".")[2], 10);
                    // let quoteID = parseInt(order.sell_price.quote.asset_id.split(".")[2], 10);

                    // let marketName = quoteID > baseID ? `${quote.get("symbol")}_${base.get("symbol")}` : `${base.get("symbol")}_${quote.get("symbol")}`;

                    var _marketUtils$getMarke = common_market_utils__WEBPACK_IMPORTED_MODULE_9__["default"].getMarketName(base, quote),
                        marketName = _marketUtils$getMarke.marketName;

                    var direction = marketDirections.get(marketName);

                    if (!markets[marketName]) {
                        if (direction) {
                            markets[marketName] = {
                                base: {
                                    id: base.get("id"),
                                    symbol: base.get("symbol"),
                                    precision: base.get("precision")
                                },
                                quote: {
                                    id: quote.get("id"),
                                    symbol: quote.get("symbol"),
                                    precision: quote.get("precision")
                                }
                            };
                        } else {
                            markets[marketName] = {
                                base: {
                                    id: quote.get("id"),
                                    symbol: quote.get("symbol"),
                                    precision: quote.get("precision")
                                },
                                quote: {
                                    id: base.get("id"),
                                    symbol: base.get("symbol"),
                                    precision: base.get("precision")
                                }
                            };
                        }
                    }
                    var limitOrder = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_5__["LimitOrder"](order, assets, markets[marketName].quote.id);

                    var marketBase = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(markets[marketName].base.id);
                    var marketQuote = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(markets[marketName].quote.id);

                    if (!marketOrders[marketName]) {
                        marketOrders[marketName] = [];
                    }

                    marketOrders[marketName].push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Exchange_MyOpenOrders__WEBPACK_IMPORTED_MODULE_1__["OrderRow"], {
                        ref: markets[marketName].base.symbol,
                        key: order.id,
                        order: limitOrder,
                        base: marketBase,
                        quote: marketQuote,
                        cancel_text: cancel,
                        showSymbols: false,
                        invert: true,
                        onCancel: _this3._cancelLimitOrder.bind(_this3, order.id),
                        price: limitOrder.getPrice(),
                        dashboard: true,
                        isMyAccount: _this3.props.isMyAccount,
                        settings: _this3.props.settings,
                        onFlip: _this3.onFlip.bind(_this3, marketName),
                        onCheckCancel: _this3.onCheckCancel.bind(_this3, order.id)
                    }));
                }
            });

            var tables = [];

            for (var market in marketOrders) {
                if (marketOrders[market].length) {
                    tables = tables.concat(marketOrders[market].sort(function (a, b) {
                        return a.props.price - b.props.price;
                    }));
                    // tables.push(
                    //     <tbody key={market}>
                    //         {/* {marketIndex > 0 ? <tr><td colSpan={this.props.isMyAccount ? "7" : "6"}><span style={{visibility: "hidden"}}>H</span></td></tr> : null} */}
                    //         {marketOrders[market].sort((a, b) => {
                    //             return a.props.price - b.props.price;
                    //         })}
                    //     </tbody>
                    // );
                    // marketIndex++;
                }
            }

            // tables.sort((a, b) => {
            //     return parseInt(a.key, 10) - parseInt(b.key, 10);
            // })

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                {
                    className: "grid-content no-overflow no-padding",
                    style: { paddingBottom: 15 }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "header-selector" },
                    orders && ordersCount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "text",
                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("account.filter_orders"),
                        style: {
                            display: "inline-block",
                            maxWidth: "50%",
                            marginRight: "1em",
                            marginBottom: "0"
                        },
                        onChange: this.setFilterValue.bind(this)
                    }) : null,
                    selectedOrders.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            className: "button",
                            onClick: this.resetSelected.bind(this)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_10___default.a, { content: "account.reset_orders" })
                    ) : null,
                    selectedOrders.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            className: "button",
                            onClick: this.cancelSelected.bind(this)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_10___default.a, { content: "account.submit_orders" })
                    ) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_11__["default"], {
                    pageSize: 20,
                    className: "table table-striped dashboard-table table-hover",
                    header: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Exchange_MyOpenOrders__WEBPACK_IMPORTED_MODULE_1__["TableHeader"], {
                        settings: this.props.settings,
                        dashboard: true,
                        isMyAccount: this.props.isMyAccount
                    }),
                    rows: tables,
                    extraRow: this.props.children
                })
            );
        }
    }]);

    return AccountOrders;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountOrders = Object(alt_react__WEBPACK_IMPORTED_MODULE_6__["connect"])(AccountOrders, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_7__["default"]];
    },
    getProps: function getProps() {
        return {
            marketDirections: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_7__["default"].getState().marketDirections
        };
    }
});

/* harmony default export */ __webpack_exports__["default"] = (AccountOrders);

/***/ }),

/***/ 2576:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkMarginStatus", function() { return checkMarginStatus; });
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(407);
/* harmony import */ var _MarketClasses__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(573);



var asyncCache = {};
var checkMarginStatusTTL = 60000 * 1; // 1 minute

function checkMarginStatus(account) {
    if (!account || account && !account.get("call_orders", []).size) return Promise.resolve(null);

    var key = account.get("name") + JSON.stringify(account.get("call_orders"));
    if (asyncCache[key]) {
        if (asyncCache[key].result) {
            return Promise.resolve(asyncCache[key].result);
        }
        return new Promise(function (res, rej) {
            asyncCache[key].queue.push({ res: res, rej: rej });
        });
    }
    return new Promise(function (res, rej) {
        asyncCache[key] = { queue: [{ res: res, rej: rej }], result: null };

        Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["FetchChain"])("getObject", account.get("call_orders").toArray()).then(function (call_orders) {
            var assets = [];
            call_orders.forEach(function (a) {
                var baseId = a.getIn(["call_price", "base", "asset_id"]);
                var quoteId = a.getIn(["call_price", "quote", "asset_id"]);
                if (assets.indexOf(baseId) === -1) assets.push(baseId);
                if (assets.indexOf(quoteId) === -1) assets.push(quoteId);
            });
            Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["FetchChain"])("getAsset", assets, 6000).then(function (assets) {
                var assetsMap = {};
                assets.forEach(function (asset) {
                    assetsMap[asset.get("id")] = asset.toJS();
                });
                var status = {};
                call_orders.forEach(function (co) {
                    var debtAsset = assetsMap[co.getIn(["call_price", "quote", "asset_id"])];
                    var collateralAsset = assetsMap[co.getIn(["call_price", "base", "asset_id"])];
                    var sp = debtAsset.bitasset.current_feed.settlement_price;
                    if (sp.base.asset_id === sp.quote.asset_id) {
                        status[debtAsset.id] = { ratio: null };
                    } else {
                        var collateral = new _MarketClasses__WEBPACK_IMPORTED_MODULE_1__["Asset"]({
                            amount: co.get("collateral"),
                            asset_id: collateralAsset.id,
                            precision: collateralAsset.precision
                        });
                        var debt = new _MarketClasses__WEBPACK_IMPORTED_MODULE_1__["Asset"]({
                            amount: co.get("debt"),
                            asset_id: debtAsset.id,
                            precision: debtAsset.precision
                        });
                        var mr = debtAsset.bitasset.current_feed.maintenance_collateral_ratio / 1000;
                        var price = new _MarketClasses__WEBPACK_IMPORTED_MODULE_1__["FeedPrice"]({
                            priceObject: debtAsset.bitasset.current_feed.settlement_price,
                            market_base: debtAsset.bitasset.current_feed.settlement_price.quote.asset_id,
                            sqr: debtAsset.bitasset.current_feed.maximum_short_squeeze_ratio,
                            assets: assetsMap
                        });
                        var current = {
                            ratio: collateral.getAmount({ real: true }) / (debt.getAmount({ real: true }) / price.toReal())
                        };
                        if (isNaN(current.ratio)) return null;
                        if (current.ratio < mr) {
                            current.statusClass = "danger";
                        } else if (current.ratio < mr + 0.5) {
                            current.statusClass = "warning";
                        } else {
                            current.statusClass = null;
                        }
                        status[debtAsset.id] = current;
                    }
                });
                asyncCache[key].queue.forEach(function (promise) {
                    promise.res(status);
                });
                asyncCache[key] = { result: status };
                setTimeout(function () {
                    delete asyncCache[key];
                }, checkMarginStatusTTL);
            });
        }).catch(function () {
            asyncCache[key].queue.forEach(function (promise) {
                promise.rej();
            });
        });
    });
}



/***/ }),

/***/ 2577:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_highcharts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2499);
/* harmony import */ var react_highcharts__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_highcharts__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2578);
/* harmony import */ var highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2579);
/* harmony import */ var highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(558);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1832);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(407);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1833);
/* harmony import */ var alt_container__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1820);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2234);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2235);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(701);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }














highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2___default()(react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts);
highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3___default()(react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts);

var AccountTreemap = function (_React$Component) {
    _inherits(AccountTreemap, _React$Component);

    function AccountTreemap() {
        _classCallCheck(this, AccountTreemap);

        return _possibleConstructorReturn(this, (AccountTreemap.__proto__ || Object.getPrototypeOf(AccountTreemap)).apply(this, arguments));
    }

    _createClass(AccountTreemap, [{
        key: "render",


        // shouldComponentUpdate(nextProps) {
        //     return (
        //         !utils.are_equal_shallow(nextProps.balanceObjects, this.props.balanceObjects) ||
        //         !utils.are_equal_shallow(nextProps.assets, this.props.assets)
        //     );
        // }

        value: function render() {
            var _props = this.props,
                balanceObjects = _props.balanceObjects,
                core_asset = _props.core_asset,
                marketStats = _props.marketStats,
                preferredAsset = _props.preferredAsset;


            var accountBalances = null;

            if (balanceObjects && balanceObjects.length > 0) {
                var totalValue = 0;
                accountBalances = balanceObjects.forEach(function (balance) {
                    if (!balance) return;
                    var balanceObject = typeof balance == "string" ? bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getObject(balance) : balance;
                    var asset_type = balanceObject.get("asset_type");
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(asset_type);
                    if (!asset || !preferredAsset) return;
                    var amount = Number(balanceObject.get("balance"));
                    var eqValue = common_market_utils__WEBPACK_IMPORTED_MODULE_9__["default"].convertValue(amount, preferredAsset, asset, marketStats, core_asset);

                    if (!eqValue) return;
                    var precision = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_precision(preferredAsset.get("precision"));
                    totalValue += eqValue / precision;
                });

                accountBalances = balanceObjects.map(function (balance, index) {
                    if (!balance) return null;
                    var balanceObject = typeof balance == "string" ? bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getObject(balance) : balance;
                    var asset_type = balanceObject.get("asset_type");
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(asset_type);
                    if (!asset) return null;
                    var amount = Number(balanceObject.get("balance"));

                    var eqValue = common_market_utils__WEBPACK_IMPORTED_MODULE_9__["default"].convertValue(amount, preferredAsset, asset, marketStats, core_asset);

                    if (!eqValue) {
                        return null;
                    }

                    var precision = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_precision(preferredAsset.get("precision"));
                    var finalValue = eqValue / precision;
                    var percent = finalValue / totalValue * 100;

                    /*
                    * Filter out assets that make up a small percentage of
                    * the total value of the account
                    */
                    if (percent < 0.5) return null;

                    return finalValue >= 1 ? {
                        name: asset.get("symbol") + " (" + (totalValue === 0 ? 0 : percent.toFixed(2)) + "%)",
                        value: finalValue,
                        color: react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts.getOptions().colors[index]
                    } : null;
                }).filter(function (n) {
                    return !!n;
                });
            }

            if (accountBalances && accountBalances.length === 1 && accountBalances[0].value === 0) {
                accountBalances = null;
            }

            var config = {
                chart: {
                    backgroundColor: "rgba(255, 0, 0, 0)",
                    height: 250,
                    spacingLeft: 0,
                    spacingRight: 0,
                    spacingBottom: 0
                },
                // colorAxis: {
                //     min: 0,
                //     minColor: "#ffffff",
                //     maxColor: ReactHighcharts.Highcharts.getOptions().colors[0]
                // },
                credits: {
                    enabled: false
                },
                legend: {
                    enabled: false
                },
                plotOptions: {
                    treemap: {
                        animation: false,
                        tooltip: {
                            pointFormatter: function pointFormatter() {
                                return "<b>" + this.name + "</b>: " + react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts.numberFormat(this.value, 0) + " " + preferredAsset.get("symbol");
                            }
                        }
                    }
                },
                series: [{
                    type: "treemap",
                    levels: [{
                        level: 1,
                        layoutAlgorithm: "sliceAndDice",
                        dataLabels: {
                            enabled: true,
                            align: "center",
                            verticalAlign: "middle"
                        }
                    }],
                    data: accountBalances
                }],
                title: {
                    text: null
                }
            };

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "account-treemap" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a, { config: config })
            );
        }
    }]);

    return AccountTreemap;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountTreemap.propTypes = {
    assets: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAssetsList,
    preferredAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAsset.isRequired
};
AccountTreemap.defaultProps = {
    assets: [],
    preferredAsset: "1.3.0"
};


AccountTreemap = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(AccountTreemap);

var AccountTreemapBalanceWrapper = function (_React$Component2) {
    _inherits(AccountTreemapBalanceWrapper, _React$Component2);

    function AccountTreemapBalanceWrapper() {
        _classCallCheck(this, AccountTreemapBalanceWrapper);

        return _possibleConstructorReturn(this, (AccountTreemapBalanceWrapper.__proto__ || Object.getPrototypeOf(AccountTreemapBalanceWrapper)).apply(this, arguments));
    }

    _createClass(AccountTreemapBalanceWrapper, [{
        key: "render",
        value: function render() {
            var assets = this.props.balanceObjects.filter(function (a) {
                return !!a;
            }).map(function (a) {
                return a.get("asset_type");
            });
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountTreemap, _extends({
                preferredAsset: this.props.settings.get("unit", "1.3.0"),
                assets: assets
            }, this.props));
        }
    }]);

    return AccountTreemapBalanceWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountTreemapBalanceWrapper.propTypes = {
    balanceObjects: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainObjectsList,
    core_asset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAsset.isRequired
};
AccountTreemapBalanceWrapper.defaultProps = {
    balanceObjects: [],
    core_asset: "1.3.0"
};


AccountTreemapBalanceWrapper = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(AccountTreemapBalanceWrapper);

var AccountTreemapWrapper = function (_React$Component3) {
    _inherits(AccountTreemapWrapper, _React$Component3);

    function AccountTreemapWrapper() {
        _classCallCheck(this, AccountTreemapWrapper);

        return _possibleConstructorReturn(this, (AccountTreemapWrapper.__proto__ || Object.getPrototypeOf(AccountTreemapWrapper)).apply(this, arguments));
    }

    _createClass(AccountTreemapWrapper, [{
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                alt_container__WEBPACK_IMPORTED_MODULE_8__["default"],
                {
                    stores: [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_11__["default"], stores_MarketsStore__WEBPACK_IMPORTED_MODULE_10__["default"]],
                    inject: {
                        marketStats: function marketStats() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_10__["default"].getState().allMarketStats;
                        },
                        settings: function settings() {
                            return stores_SettingsStore__WEBPACK_IMPORTED_MODULE_11__["default"].getState().settings;
                        }
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountTreemapBalanceWrapper, _extends({}, this.props, {
                    ref: this.props.refCallback
                }))
            );
        }
    }]);

    return AccountTreemapWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountTreemapWrapper);

/***/ }),

/***/ 2580:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_debounce_render__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2454);
/* harmony import */ var react_debounce_render__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_debounce_render__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2200);
/* harmony import */ var _Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2438);
/* harmony import */ var _Utility_MarketChangeComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2581);
/* harmony import */ var _Utility_AssetImage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2452);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1986);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(716);
/* harmony import */ var _Utility_EquivalentPrice__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2582);
/* harmony import */ var _Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2304);
/* harmony import */ var _Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2501);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2238);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var common_gatewayUtils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2220);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(407);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(760);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(701);
/* harmony import */ var stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2217);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2235);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(774);
/* harmony import */ var _Icon_PulseIcon__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2583);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(558);
/* harmony import */ var _Modal_SendModal__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(1954);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(702);
/* harmony import */ var _Modal_SettleModal__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(2584);
/* harmony import */ var _Modal_DepositModal__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(2201);
/* harmony import */ var _Dashboard_SimpleDepositWithdraw__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(2457);
/* harmony import */ var _Dashboard_SimpleDepositBlocktradesBridge__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(2458);
/* harmony import */ var _Modal_WithdrawModalNew__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(2251);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(709);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_29__);
/* harmony import */ var _Modal_ReserveAssetModal__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(2585);
/* harmony import */ var _Modal_BaseModal__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(1959);
/* harmony import */ var _Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(2530);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(2234);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }




































var AccountPortfolioList = function (_React$Component) {
    _inherits(AccountPortfolioList, _React$Component);

    function AccountPortfolioList() {
        _classCallCheck(this, AccountPortfolioList);

        var _this = _possibleConstructorReturn(this, (AccountPortfolioList.__proto__ || Object.getPrototypeOf(AccountPortfolioList)).call(this));

        _this.sortFunctions = {
            qty: function qty(a, b, force) {
                if (Number(this.qtyRefs[a.key]) < Number(this.qtyRefs[b.key])) return this.props.sortDirection || force ? -1 : 1;

                if (Number(this.qtyRefs[a.key]) > Number(this.qtyRefs[b.key])) return this.props.sortDirection || force ? 1 : -1;
            },
            alphabetic: function alphabetic(a, b, force) {
                if (a.key > b.key) return this.props.sortDirection || force ? 1 : -1;
                if (a.key < b.key) return this.props.sortDirection || force ? -1 : 1;
                return 0;
            },
            priceValue: function priceValue(a, b) {
                var aPrice = this.priceRefs[a.key];
                var bPrice = this.priceRefs[b.key];
                if (aPrice && bPrice) {
                    return this.props.sortDirection ? aPrice - bPrice : bPrice - aPrice;
                } else if (aPrice === null && bPrice !== null) {
                    return 1;
                } else if (aPrice !== null && bPrice === null) {
                    return -1;
                } else {
                    return this.sortFunctions.alphabetic(a, b, true);
                }
            },
            totalValue: function totalValue(a, b) {
                var aValue = this.valueRefs[a.key];
                var bValue = this.valueRefs[b.key];
                if (aValue && bValue) {
                    return this.props.sortDirection ? aValue - bValue : bValue - aValue;
                } else if (!aValue && bValue) {
                    return 1;
                } else if (aValue && !bValue) {
                    return -1;
                } else {
                    return this.sortFunctions.alphabetic(a, b, true);
                }
            },
            changeValue: function changeValue(a, b) {
                var aValue = this.changeRefs[a.key];
                var bValue = this.changeRefs[b.key];

                if (aValue && bValue) {
                    var aChange = parseFloat(aValue) != "NaN" ? parseFloat(aValue) : aValue;
                    var bChange = parseFloat(bValue) != "NaN" ? parseFloat(bValue) : bValue;
                    var direction = typeof this.props.sortDirection !== "undefined" ? this.props.sortDirection : true;

                    return direction ? aChange - bChange : bChange - aChange;
                }
            }
        };

        _this._renderBuy = function (symbol, canBuy, assetName, emptyCell, balance) {
            if (symbol === "BTS" && balance <= 100000) {
                // Precision of 5, 1 = 10^5
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            onClick: _this._showDepositWithdraw.bind(_this, "bridge_modal", assetName, false)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_PulseIcon__WEBPACK_IMPORTED_MODULE_20__["default"], {
                            onIcon: "dollar",
                            offIcon: "dollar-green",
                            title: "icons.dollar.buy",
                            duration: 1000,
                            className: "icon-14px"
                        })
                    )
                );
            } else {
                return canBuy && _this.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            onClick: _this._showDepositWithdraw.bind(_this, "bridge_modal", assetName, false)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                            name: "dollar",
                            title: "icons.dollar.buy",
                            className: "icon-14px"
                        })
                    )
                ) : emptyCell;
            }
        };

        _this.state = {
            settleAsset: "1.3.0",
            depositAsset: null,
            withdrawAsset: null,
            bridgeAsset: null,
            allRefsAssigned: false
        };

        _this.qtyRefs = {};
        _this.priceRefs = {};
        _this.valueRefs = {};
        _this.changeRefs = {};
        for (var key in _this.sortFunctions) {
            _this.sortFunctions[key] = _this.sortFunctions[key].bind(_this);
        }
        _this._checkRefAssignments = _this._checkRefAssignments.bind(_this);
        return _this;
    }

    _createClass(AccountPortfolioList, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this.refCheckInterval = setInterval(this._checkRefAssignments);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            clearInterval(this.refCheckInterval);
        }
    }, {
        key: "_checkRefAssignments",
        value: function _checkRefAssignments() {
            var _this2 = this;

            /*
            * In order for sorting to work all refs must be assigned, so we check
            * this here and update the state to trigger a rerender
            */
            if (!this.state.allRefsAssigned) {
                var refKeys = ["qtyRefs", "priceRefs", "valueRefs", "changeRefs"];
                var allRefsAssigned = refKeys.reduce(function (a, b) {
                    if (a === undefined) return !!Object.keys(_this2[b]).length;
                    return !!Object.keys(_this2[b]).length && a;
                }, undefined);
                if (allRefsAssigned) {
                    clearInterval(this.refCheckInterval);
                    this.setState({ allRefsAssigned: allRefsAssigned });
                }
            }
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, ns) {
            var _this3 = this;

            return !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(ns, this.state) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.backedCoins, this.props.backedCoins) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.balances, this.props.balances) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.balanceList, this.props.balanceList) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.optionalAssets, this.props.optionalAssets) || np.account !== this.props.account || np.visible !== this.props.visible || np.settings !== this.props.settings || np.hiddenAssets !== this.props.hiddenAssets || np.sortDirection !== this.props.sortDirection || np.sortKey !== this.props.sortKey || np.allMarketStats.reduce(function (a, value, key) {
                return common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].check_market_stats(value, _this3.props.allMarketStats.get(key)) || a;
            }, false);
        }
    }, {
        key: "triggerSend",
        value: function triggerSend(asset) {
            var _this4 = this;

            this.setState({ send_asset: asset }, function () {
                if (_this4.send_modal) _this4.send_modal.show();
            });
        }
    }, {
        key: "_onSettleAsset",
        value: function _onSettleAsset(id, e) {
            e.preventDefault();
            this.setState({
                settleAsset: id
            });

            this.refs.settlement_modal.show();
        }
    }, {
        key: "_hideAsset",
        value: function _hideAsset(asset, status) {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_23__["default"].hideAsset(asset, status);
        }
    }, {
        key: "_burnAsset",
        value: function _burnAsset(asset, e) {
            e.preventDefault();
            this.setState({ reserve: asset });
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_29___default.a.publish("reserve_asset", "open");
        }
    }, {
        key: "_showDepositModal",
        value: function _showDepositModal(asset, e) {
            var _this5 = this;

            e.preventDefault();
            this.setState({ depositAsset: asset }, function () {
                _this5.refs.deposit_modal_new.show();
            });
        }
    }, {
        key: "_showDepositWithdraw",
        value: function _showDepositWithdraw(action, asset, fiatModal, e) {
            var _setState,
                _this6 = this;

            e.preventDefault();
            this.setState((_setState = {}, _defineProperty(_setState, action === "bridge_modal" ? "bridgeAsset" : action === "deposit_modal" ? "depositAsset" : "withdrawAsset", asset), _defineProperty(_setState, "fiatModal", fiatModal), _setState), function () {
                _this6.refs[action].show();
            });
        }
    }, {
        key: "_getSeparator",
        value: function _getSeparator(render) {
            return render ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                "\xA0|\xA0"
            ) : null;
        }
    }, {
        key: "_renderBalances",
        value: function _renderBalances(balanceList, optionalAssets, visible) {
            var _this7 = this;

            var _props = this.props,
                coreSymbol = _props.coreSymbol,
                preferredUnit = _props.preferredUnit,
                settings = _props.settings,
                hiddenAssets = _props.hiddenAssets,
                orders = _props.orders;

            var showAssetPercent = settings.get("showAssetPercent", false);

            var renderBorrow = function renderBorrow(asset, account) {
                var isBitAsset = asset && asset.has("bitasset_data_id");
                var modalRef = "cp_modal_" + asset.get("id");
                return {
                    isBitAsset: isBitAsset,
                    borrowModal: !isBitAsset ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_11__["default"], {
                        ref: modalRef,
                        modalId: "borrow_modal_" + asset.get("id"),
                        quote_asset: asset.get("id"),
                        backing_asset: asset.getIn(["bitasset", "options", "short_backing_asset"]),
                        account: account
                    }),
                    borrowLink: !isBitAsset ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            onClick: function onClick() {
                                react_tooltip__WEBPACK_IMPORTED_MODULE_12___default.a.hide();
                                _this7.refs[modalRef].show();
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                            name: "dollar",
                            title: "icons.dollar.borrow",
                            className: "icon-14px"
                        })
                    )
                };
            };

            var balances = [];
            var emptyCell = "-";
            balanceList.forEach(function (balance) {
                var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getObject(balance);
                if (!balanceObject) return;
                var asset_type = balanceObject.get("asset_type");
                var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getObject(asset_type);
                if (!asset) return;

                var directMarketLink = void 0,
                    settleLink = void 0,
                    transferLink = void 0;
                var symbol = "";

                var assetName = asset.get("symbol");
                var notCore = asset.get("id") !== "1.3.0";
                var notCorePrefUnit = preferredUnit !== coreSymbol;

                var _assetUtils$parseDesc = common_asset_utils__WEBPACK_IMPORTED_MODULE_6__["default"].parseDescription(asset.getIn(["options", "description"])),
                    market = _assetUtils$parseDesc.market;

                symbol = asset.get("symbol");
                if (symbol.indexOf("OPEN.") !== -1 && !market) market = "USD";
                if (["RUDEX.GOLOS", "RUDEX.GBG"].indexOf(symbol) !== -1) market = "RUBLE";
                // let preferredMarket = market ? market : preferredUnit;
                var preferredMarket = market ? market : coreSymbol;

                /* Table content */
                directMarketLink = notCore ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                    { to: "/market/" + asset.get("symbol") + "_" + preferredMarket },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "trade",
                        title: "icons.trade.trade",
                        className: "icon-14px"
                    })
                ) : notCorePrefUnit ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                    { to: "/market/" + asset.get("symbol") + "_" + preferredUnit },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "trade",
                        title: "icons.trade.trade",
                        className: "icon-14px"
                    })
                ) : emptyCell;
                transferLink = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                    { to: "/transfer?asset=" + asset.get("id") },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "transfer",
                        title: "icons.transfer",
                        className: "icon-14px"
                    })
                );

                var _renderBorrow = renderBorrow(asset, _this7.props.account),
                    isBitAsset = _renderBorrow.isBitAsset,
                    borrowModal = _renderBorrow.borrowModal,
                    borrowLink = _renderBorrow.borrowLink;

                /* Popover content */


                settleLink = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "a",
                    { onClick: _this7._onSettleAsset.bind(_this7, asset.get("id")) },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "settle",
                        title: "icons.settle",
                        className: "icon-14px"
                    })
                );

                var includeAsset = !hiddenAssets.includes(asset_type);
                var hasBalance = !!balanceObject.get("balance");
                var hasOnOrder = !!orders[asset_type];

                var backedCoin = Object(common_gatewayUtils__WEBPACK_IMPORTED_MODULE_13__["getBackedCoin"])(asset.get("symbol"), _this7.props.backedCoins);
                // const canDeposit =
                //     (backedCoin && backedCoin.depositAllowed) ||
                //     asset.get("symbol") == "BTS";
                var canDeposit = false; // disable till stable version

                // const canWithdraw =
                //     backedCoin &&
                //     backedCoin.withdrawalAllowed &&
                //     (hasBalance && balanceObject.get("balance") != 0);
                var canWithdraw = false; // disable till stable version

                var canBuy = !!_this7.props.bridgeCoins.get(symbol);
                var assetAmount = balanceObject.get("balance");

                /* Sorting refs */
                _this7.qtyRefs[asset.get("symbol")] = common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].get_asset_amount(assetAmount, asset);

                {
                    /* Asset and Backing Asset Prefixes */
                }
                var options = asset && asset.getIn(["bitasset", "options"]) ? asset.getIn(["bitasset", "options"]).toJS() : null;
                var backingAsset = options && options.short_backing_asset ? bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getAsset(options.short_backing_asset) : null;

                var _utils$replaceName = common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].replaceName(asset),
                    isAssetBitAsset = _utils$replaceName.isBitAsset;

                var _utils$replaceName2 = common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].replaceName(backingAsset),
                    isBackingBitAsset = _utils$replaceName2.isBitAsset;

                var preferredAsset = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getAsset(preferredUnit);
                _this7.valueRefs[asset.get("symbol")] = hasBalance && !!preferredAsset ? common_market_utils__WEBPACK_IMPORTED_MODULE_33__["default"].convertValue(assetAmount, preferredAsset, asset, _this7.props.allMarketStats, _this7.props.coreAsset, true) : null;

                _this7.priceRefs[asset.get("symbol")] = !preferredAsset ? null : common_market_utils__WEBPACK_IMPORTED_MODULE_33__["default"].getFinalPrice(_this7.props.coreAsset, asset, preferredAsset, _this7.props.allMarketStats, true);

                var marketId = asset.get("symbol") + "_" + preferredUnit;
                var currentMarketStats = _this7.props.allMarketStats.get(marketId);
                _this7.changeRefs[asset.get("symbol")] = currentMarketStats && currentMarketStats.change ? currentMarketStats.change : 0;

                balances.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: asset.get("symbol"), style: { maxWidth: "100rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { style: { textAlign: "left" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetImage__WEBPACK_IMPORTED_MODULE_5__["default"], {
                            replaceNoneToBts: false,
                            maxWidth: 30,
                            name: asset.get("symbol")
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_10__["default"], { asset: asset.get("id") })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { style: { textAlign: "right" } },
                        hasBalance || hasOnOrder ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__["default"], { balance: balance, hide_asset: true }) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "right" },
                            className: "column-hide-small"
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentPrice__WEBPACK_IMPORTED_MODULE_9__["default"], {
                            fromAsset: asset.get("id"),
                            pulsate: { reverse: true, fill: "forwards" },
                            hide_symbols: true
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "right" },
                            className: "column-hide-small"
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_MarketChangeComponent__WEBPACK_IMPORTED_MODULE_4__["Market24HourChangeComponent"], {
                            base: asset.get("id"),
                            quote: preferredUnit,
                            marketId: marketId,
                            hide_symbols: true
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "right" },
                            className: "column-hide-small"
                        },
                        hasBalance || hasOnOrder ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_3__["BalanceValueComponent"], {
                            balance: balance,
                            toAsset: preferredUnit,
                            hide_asset: true
                        }) : null
                    ),
                    showAssetPercent ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { style: { textAlign: "right" } },
                        hasBalance ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__["default"], {
                            balance: balance,
                            asPercentage: true
                        }) : null
                    ) : null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        transferLink
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        _this7._renderBuy(asset.get("symbol"), canBuy, assetName, emptyCell, balanceObject.get("balance"))
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        canDeposit && _this7.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                style: { cursor: "pointer" },
                                name: "deposit",
                                title: "icons.deposit.deposit",
                                className: "icon-14x",
                                onClick: _this7._showDepositModal.bind(_this7, assetName)
                            })
                        ) : emptyCell
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        canWithdraw && _this7.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "a",
                                {
                                    className: !canWithdraw ? "disabled" : "",
                                    onClick: canWithdraw ? _this7._showDepositWithdraw.bind(_this7, "withdraw_modal_new", assetName, false) : function () {}
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                    name: "withdraw",
                                    title: "icons.withdraw",
                                    className: "icon-14px"
                                })
                            )
                        ) : emptyCell
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        directMarketLink
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                className: "inline-block",
                                "data-place": "bottom",
                                "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.borrow", { asset: symbol })
                            },
                            borrowLink,
                            borrowModal
                        ) : emptyCell
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        isBitAsset && backingAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                className: "inline-block",
                                "data-place": "bottom",
                                "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.settle", {
                                    asset: isAssetBitAsset ? "bit" + symbol : symbol,
                                    backingAsset: isBackingBitAsset ? "bit" + backingAsset.get("symbol") : backingAsset.get("symbol"),
                                    settleDelay: options.force_settlement_delay_sec / 3600
                                })
                            },
                            settleLink
                        ) : emptyCell
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "center" },
                            className: "column-hide-small"
                        },
                        !isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            {
                                style: { marginRight: 0 },
                                onClick: _this7._burnAsset.bind(_this7, asset.get("id"))
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], { name: "fire", className: "icon-14px" })
                        ) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "center" },
                            className: "column-hide-small",
                            "data-place": "bottom",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip." + (includeAsset ? "hide_asset" : "show_asset"))
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            {
                                style: { marginRight: 0 },
                                className: includeAsset ? "order-cancel" : "action-plus",
                                onClick: _this7._hideAsset.bind(_this7, asset_type, includeAsset)
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                name: includeAsset ? "cross-circle" : "plus-circle",
                                title: includeAsset ? "icons.cross_circle.hide_asset" : "icons.plus_circle.show_asset",
                                className: "icon-14px"
                            })
                        )
                    )
                ));
            });

            if (optionalAssets) {
                optionalAssets.filter(function (asset) {
                    var isAvailable = false;
                    _this7.props.backedCoins.get("OPEN", []).forEach(function (coin) {
                        if (coin && coin.symbol === asset) {
                            isAvailable = true;
                        }
                    });
                    if (!!_this7.props.bridgeCoins.get(asset)) {
                        isAvailable = true;
                    }
                    var keep = true;
                    balances.forEach(function (a) {
                        if (a.key === asset) keep = false;
                    });
                    return keep && isAvailable;
                }).forEach(function (a) {
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getAsset(a);
                    if (asset && _this7.props.isMyAccount) {
                        var includeAsset = !hiddenAssets.includes(asset.get("id"));

                        var thisAssetName = asset.get("symbol").split(".");
                        var canDeposit = !!_this7.props.backedCoins.get("OPEN", []).find(function (a) {
                            return a.backingCoinType === thisAssetName[1];
                        }) || !!_this7.props.backedCoins.get("RUDEX", []).find(function (a) {
                            return a.backingCoin === thisAssetName[1];
                        }) || asset.get("symbol") == "BTS";

                        var canBuy = !!_this7.props.bridgeCoins.get(asset.get("symbol"));

                        var notCore = asset.get("id") !== "1.3.0";

                        var _assetUtils$parseDesc2 = common_asset_utils__WEBPACK_IMPORTED_MODULE_6__["default"].parseDescription(asset.getIn(["options", "description"])),
                            market = _assetUtils$parseDesc2.market;

                        if (asset.get("symbol").indexOf("OPEN.") !== -1 && !market) market = "USD";
                        var preferredMarket = market ? market : coreSymbol;

                        var directMarketLink = notCore ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                            {
                                to: "/market/" + asset.get("symbol") + "_" + preferredMarket
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                name: "trade",
                                title: "icons.trade.trade",
                                className: "icon-14px"
                            })
                        ) : emptyCell;

                        var _renderBorrow2 = renderBorrow(asset, _this7.props.account),
                            isBitAsset = _renderBorrow2.isBitAsset,
                            borrowModal = _renderBorrow2.borrowModal,
                            borrowLink = _renderBorrow2.borrowLink;

                        if (includeAsset && visible || !includeAsset && !visible) balances.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            {
                                key: asset.get("symbol"),
                                style: { maxWidth: "100rem" }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { textAlign: "left" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetImage__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                    replaceNoneToBts: false,
                                    maxWidth: 30,
                                    name: asset.get("symbol")
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                    asset: asset.get("id")
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "column-hide-small" },
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "column-hide-small" },
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "column-hide-small" },
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { textAlign: "center" } },
                                canBuy && _this7.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "span",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "a",
                                        {
                                            onClick: _this7._showDepositWithdraw.bind(_this7, "bridge_modal", a, false)
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                            name: "dollar",
                                            title: "icons.dollar.buy",
                                            className: "icon-14px"
                                        })
                                    )
                                ) : emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                canDeposit && _this7.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "span",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                        style: { cursor: "pointer" },
                                        name: "deposit",
                                        title: "icons.deposit.deposit",
                                        className: "icon-14x",
                                        onClick: _this7._showDepositModal.bind(_this7, asset.get("symbol"))
                                    })
                                ) : emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { textAlign: "center" } },
                                directMarketLink
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "inline-block",
                                        "data-place": "bottom",
                                        "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.borrow", { asset: asset.get("symbol") })
                                    },
                                    borrowLink,
                                    borrowModal
                                ) : emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                {
                                    style: { textAlign: "center" },
                                    className: "column-hide-small",
                                    "data-place": "bottom",
                                    "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip." + (includeAsset ? "hide_asset" : "show_asset"))
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "a",
                                    {
                                        style: { marginRight: 0 },
                                        className: includeAsset ? "order-cancel" : "action-plus",
                                        onClick: _this7._hideAsset.bind(_this7, asset.get("id"), includeAsset)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                        name: includeAsset ? "cross-circle" : "plus-circle",
                                        title: includeAsset ? "icons.cross_circle.hide_asset" : "icons.plus_circle.show_asset",
                                        className: "icon-14px"
                                    })
                                )
                            )
                        ));
                    }
                });
            }

            balances.sort(this.sortFunctions[this.props.sortKey]);
            return balances;
        }
    }, {
        key: "_renderSendModal",
        value: function _renderSendModal() {
            var _this8 = this;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_SendModal__WEBPACK_IMPORTED_MODULE_22__["default"], {
                id: "send_modal_portfolio",
                refCallback: function refCallback(e) {
                    if (e) _this8.send_modal = e;
                },
                from_name: this.props.account.get("name"),
                asset_id: this.state.send_asset || "1.3.0"
            });
        }
    }, {
        key: "_renderSettleModal",
        value: function _renderSettleModal() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_SettleModal__WEBPACK_IMPORTED_MODULE_24__["default"], {
                ref: "settlement_modal",
                modalId: "settlement_modal",
                asset: this.state.settleAsset,
                account: this.props.account.get("name")
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this9 = this;

            var currentWithdrawAsset = this.props.backedCoins.get("OPEN", []).find(function (c) {
                return c.symbol === _this9.state.withdrawAsset;
            }) || {};
            var currentBridges = this.props.bridgeCoins.get(this.state.bridgeAsset) || null;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    _Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_32__["default"],
                    {
                        style: { padding: 0 },
                        className: "table dashboard-table table-hover",
                        rows: this._renderBalances(this.props.balanceList, this.props.optionalAssets, this.props.visible),
                        header: this.props.header,
                        pageSize: 20,
                        label: "utility.total_x_assets",
                        extraRow: this.props.extraRow,
                        leftPadding: "1.5rem"
                    },
                    this._renderSendModal(),
                    this._renderSettleModal(),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Dashboard_SimpleDepositWithdraw__WEBPACK_IMPORTED_MODULE_26__["default"], _extends({
                        ref: "withdraw_modal",
                        action: "withdraw",
                        fiatModal: this.state.fiatModal,
                        account: this.props.account.get("name"),
                        sender: this.props.account.get("id"),
                        asset: this.state.withdrawAsset,
                        modalId: "simple_withdraw_modal",
                        balances: this.props.balances
                    }, currentWithdrawAsset, {
                        isDown: this.props.gatewayDown.get("OPEN")
                    })),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_WithdrawModalNew__WEBPACK_IMPORTED_MODULE_28__["default"], {
                        ref: "withdraw_modal_new",
                        modalId: "withdraw_modal_new",
                        backedCoins: this.props.backedCoins,
                        initialSymbol: this.state.withdrawAsset
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_DepositModal__WEBPACK_IMPORTED_MODULE_25__["default"], {
                        ref: "deposit_modal_new",
                        modalId: "deposit_modal_new",
                        asset: this.state.depositAsset,
                        account: this.props.account.get("name"),
                        backedCoins: this.props.backedCoins
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Dashboard_SimpleDepositBlocktradesBridge__WEBPACK_IMPORTED_MODULE_27__["default"], {
                        ref: "bridge_modal",
                        action: "deposit",
                        account: this.props.account.get("name"),
                        sender: this.props.account.get("id"),
                        asset: this.state.bridgeAsset,
                        modalId: "simple_bridge_modal",
                        balances: this.props.balances,
                        bridges: currentBridges,
                        isDown: this.props.gatewayDown.get("TRADE")
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        _Modal_BaseModal__WEBPACK_IMPORTED_MODULE_31__["default"],
                        { id: "reserve_asset", overlay: true },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "grid-block vertical" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_ReserveAssetModal__WEBPACK_IMPORTED_MODULE_30__["default"], {
                                asset: this.state.reserve,
                                account: this.props.account,
                                onClose: function onClose() {
                                    react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_29___default.a.publish("reserve_asset", "close");
                                }
                            })
                        )
                    )
                )
            );
        }
    }]);

    return AccountPortfolioList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPortfolioList = Object(alt_react__WEBPACK_IMPORTED_MODULE_15__["connect"])(AccountPortfolioList, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"], stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"], stores_MarketsStore__WEBPACK_IMPORTED_MODULE_18__["default"]];
    },
    getProps: function getProps() {
        return {
            settings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"].getState().settings,
            viewSettings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"].getState().viewSettings,
            backedCoins: stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"].getState().backedCoins,
            bridgeCoins: stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"].getState().bridgeCoins,
            gatewayDown: stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"].getState().down,
            allMarketStats: stores_MarketsStore__WEBPACK_IMPORTED_MODULE_18__["default"].getState().allMarketStats
        };
    }
});

AccountPortfolioList = react_debounce_render__WEBPACK_IMPORTED_MODULE_1___default()(AccountPortfolioList, 50, {
    leading: false
});

/* harmony default export */ __webpack_exports__["default"] = (AccountPortfolioList);

/***/ }),

/***/ 2581:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Market24HourChangeComponent", function() { return Market24HourChangeComponent; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1970);
/* harmony import */ var _AssetWrapper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2186);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(760);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2235);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2238);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Utility_MarketPrice__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2439);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }









/**
 *  Displays change in market value for an asset
 *
 *  Expects three properties
 *  -'quote' which should be a asset id
 *  -'base' which is the asset id of the original asset amount
 */

var MarketChangeComponent = function (_MarketStats) {
    _inherits(MarketChangeComponent, _MarketStats);

    function MarketChangeComponent(props) {
        _classCallCheck(this, MarketChangeComponent);

        return _possibleConstructorReturn(this, (MarketChangeComponent.__proto__ || Object.getPrototypeOf(MarketChangeComponent)).call(this, props));
    }

    _createClass(MarketChangeComponent, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            react_tooltip__WEBPACK_IMPORTED_MODULE_5___default.a.rebuild();
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np) {
            return _get(MarketChangeComponent.prototype.__proto__ || Object.getPrototypeOf(MarketChangeComponent.prototype), "shouldComponentUpdate", this).call(this, np) || np.base !== this.props.base;
        }
    }, {
        key: "getValue",
        value: function getValue() {
            var marketStats = this.props.marketStats;

            return marketStats && marketStats.change ? marketStats.change : 0;
        }
    }, {
        key: "render",
        value: function render() {
            var marketChangeValue = this.getValue();
            var dayChangeClass = parseFloat(marketChangeValue) === 0 ? "" : parseFloat(marketChangeValue) < 0 ? "change-down" : "change-up";
            var marketChangeFormattedValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_1__["FormattedNumber"], {
                style: "decimal",
                value: marketChangeValue,
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                { className: "value " + dayChangeClass },
                marketChangeFormattedValue,
                "%"
            );
        }
    }]);

    return MarketChangeComponent;
}(_Utility_MarketPrice__WEBPACK_IMPORTED_MODULE_6__["MarketStats"]);

MarketChangeComponent.defaultProps = {
    fullPrecision: false,
    noDecimals: false,
    hide_asset: false
};

MarketChangeComponent = Object(_AssetWrapper__WEBPACK_IMPORTED_MODULE_2__["default"])(MarketChangeComponent, {
    propNames: ["quote", "base"],
    defaultProps: { quote: "1.3.0" }
});

var Market24HourChangeComponent = function (_React$Component) {
    _inherits(Market24HourChangeComponent, _React$Component);

    function Market24HourChangeComponent() {
        _classCallCheck(this, Market24HourChangeComponent);

        return _possibleConstructorReturn(this, (Market24HourChangeComponent.__proto__ || Object.getPrototypeOf(Market24HourChangeComponent)).apply(this, arguments));
    }

    _createClass(Market24HourChangeComponent, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                refCallback = _props.refCallback,
                others = _objectWithoutProperties(_props, ["refCallback"]);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarketChangeComponent, _extends({}, others, { ref: refCallback }));
        }
    }]);

    return Market24HourChangeComponent;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

Market24HourChangeComponent = Object(alt_react__WEBPACK_IMPORTED_MODULE_3__["connect"])(Market24HourChangeComponent, {
    listenTo: function listenTo() {
        return [stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__["default"]];
    },
    getProps: function getProps(props) {
        return {
            marketStats: stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().allMarketStats.get(props.marketId),
            allMarketStats: stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().allMarketStats
        };
    }
});



/***/ }),

/***/ 2582:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(558);
/* harmony import */ var alt_container__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1820);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(701);
/* harmony import */ var _FormattedPrice__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2305);
/* harmony import */ var _MarketStatsCheck__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2237);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2235);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2234);
/* harmony import */ var _AssetWrapper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2186);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var EquivalentPrice = function (_MarketStatsCheck) {
    _inherits(EquivalentPrice, _MarketStatsCheck);

    function EquivalentPrice() {
        _classCallCheck(this, EquivalentPrice);

        return _possibleConstructorReturn(this, (EquivalentPrice.__proto__ || Object.getPrototypeOf(EquivalentPrice)).apply(this, arguments));
    }

    _createClass(EquivalentPrice, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, nextState) {
            return _get(EquivalentPrice.prototype.__proto__ || Object.getPrototypeOf(EquivalentPrice.prototype), "shouldComponentUpdate", this).call(this, np) || np.base_amount !== this.props.base_amount || np.quote_amount !== this.props.quote_amount || np.decimals !== this.props.decimals || !common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].are_equal_shallow(np.pulsate, this.props.pulsate) || !common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].are_equal_shallow(nextState, this.state);
        }
    }, {
        key: "getFinalPrice",
        value: function getFinalPrice() {
            var real = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
            var _props = this.props,
                coreAsset = _props.coreAsset,
                fromAsset = _props.fromAsset,
                toAsset = _props.toAsset,
                allMarketStats = _props.allMarketStats;

            return common_market_utils__WEBPACK_IMPORTED_MODULE_7__["default"].getFinalPrice(coreAsset, fromAsset, toAsset, allMarketStats, real);
        }
    }, {
        key: "render",
        value: function render() {
            var _props2 = this.props,
                toAsset = _props2.toAsset,
                forceDirection = _props2.forceDirection,
                others = _objectWithoutProperties(_props2, ["toAsset", "forceDirection"]);

            var finalPrice = this.getFinalPrice();

            if (finalPrice === 1) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    "1.00"
                );
            }

            if (!finalPrice) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                "--"
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FormattedPrice__WEBPACK_IMPORTED_MODULE_4__["default"], _extends({
                force_direction: forceDirection ? toAsset.get("symbol") : false,
                base_amount: finalPrice.base.amount,
                base_asset: finalPrice.base.asset_id,
                quote_amount: finalPrice.quote.amount,
                quote_asset: finalPrice.quote.asset_id
            }, others));
        }
    }]);

    return EquivalentPrice;
}(_MarketStatsCheck__WEBPACK_IMPORTED_MODULE_5__["default"]);

EquivalentPrice.defaultProps = {
    forceDirection: true
};


EquivalentPrice = Object(_AssetWrapper__WEBPACK_IMPORTED_MODULE_8__["default"])(EquivalentPrice, {
    propNames: ["toAsset", "fromAsset", "coreAsset"],
    defaultProps: {
        toAsset: "1.3.0",
        coreAsset: "1.3.0"
    }
});

var EquivalentPriceWrapper = function (_React$Component) {
    _inherits(EquivalentPriceWrapper, _React$Component);

    function EquivalentPriceWrapper() {
        _classCallCheck(this, EquivalentPriceWrapper);

        return _possibleConstructorReturn(this, (EquivalentPriceWrapper.__proto__ || Object.getPrototypeOf(EquivalentPriceWrapper)).apply(this, arguments));
    }

    _createClass(EquivalentPriceWrapper, [{
        key: "render",
        value: function render() {
            var _this3 = this;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                alt_container__WEBPACK_IMPORTED_MODULE_2__["default"],
                {
                    stores: [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"], stores_MarketsStore__WEBPACK_IMPORTED_MODULE_6__["default"]],
                    inject: {
                        toAsset: function toAsset() {
                            return _this3.props.toAsset || stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().settings.get("unit", "1.3.0");
                        },
                        allMarketStats: function allMarketStats() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().allMarketStats;
                        }
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EquivalentPrice, _extends({}, this.props, { ref: this.props.refCallback }))
            );
        }
    }]);

    return EquivalentPriceWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (EquivalentPriceWrapper);

/***/ }),

/***/ 2583:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(719);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(774);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






var PulseIcon = function (_Component) {
    _inherits(PulseIcon, _Component);

    function PulseIcon() {
        var _ref;

        var _temp, _this, _ret;

        _classCallCheck(this, PulseIcon);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = PulseIcon.__proto__ || Object.getPrototypeOf(PulseIcon)).call.apply(_ref, [this].concat(args))), _this), _this.tick = function () {
            var _this$props = _this.props,
                onIcon = _this$props.onIcon,
                offIcon = _this$props.offIcon;

            var _ref2 = _this.state || {},
                _ref2$name = _ref2.name,
                name = _ref2$name === undefined ? onIcon : _ref2$name;

            _this.setState({
                name: name === onIcon ? offIcon : onIcon
            });
        }, _temp), _possibleConstructorReturn(_this, _ret);
    }

    _createClass(PulseIcon, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var duration = this.props.duration;

            this.interval = setInterval(this.tick, duration);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            this.interval && clearInterval(this.interval);
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                onIcon = _props.onIcon,
                rest = _props.rest;

            var _ref3 = this.state || {},
                _ref3$name = _ref3.name,
                name = _ref3$name === undefined ? onIcon : _ref3$name;

            var title = this.props.title;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({ name: name, title: title }, rest));
        }
    }]);

    return PulseIcon;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

PulseIcon.propTypes = {
    duration: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.number.isRequired,
    offIcon: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,
    onIcon: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,
    title: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired
};
/* harmony default export */ __webpack_exports__["default"] = (PulseIcon);

/***/ }),

/***/ 2584:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(709);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _BaseModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1959);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1832);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1833);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(558);
/* harmony import */ var _Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2200);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(577);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(581);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(407);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1968);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }















var ModalContent = function (_React$Component) {
    _inherits(ModalContent, _React$Component);

    function ModalContent() {
        _classCallCheck(this, ModalContent);

        var _this = _possibleConstructorReturn(this, (ModalContent.__proto__ || Object.getPrototypeOf(ModalContent)).call(this));

        _this.state = {
            amount: 0
        };
        return _this;
    }

    _createClass(ModalContent, [{
        key: "onAmountChanged",
        value: function onAmountChanged(_ref) {
            var amount = _ref.amount,
                asset = _ref.asset;

            this.setState({ amount: amount });
        }
    }, {
        key: "onSubmit",
        value: function onSubmit(e) {
            e.preventDefault();
            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default.a.publish("settlement_modal", "close");

            var precision = common_utils__WEBPACK_IMPORTED_MODULE_6__["default"].get_asset_precision(this.props.asset.get("precision"));
            var amount = this.state.amount.replace(/,/g, "");
            amount *= precision;

            var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_8__["default"].new_transaction();
            tr.add_type_operation("asset_settle", {
                fee: {
                    amount: 0,
                    asset_id: 0
                },
                account: this.props.account.get("id"),
                amount: {
                    amount: amount,
                    asset_id: this.props.asset.get("id")
                }
            });
            return stores_WalletDb__WEBPACK_IMPORTED_MODULE_9__["default"].process_transaction(tr, null, true).then(function (result) {
                // console.log("asset settle result:", result);
                // this.dispatch(account_id);
                return true;
            }).catch(function (error) {
                console.error("asset settle error: ", error);
                return false;
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                asset = _props.asset,
                account = _props.account;
            var amount = this.state.amount;


            if (!asset) {
                return null;
            }

            var assetID = asset.get("id");

            var account_balances = account.get("balances");

            var currentBalance = null,
                balanceAmount = 0;

            account_balances && account_balances.forEach(function (balance) {
                var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_11__["ChainStore"].getObject(balance);
                if (!balanceObject.get("balance")) {
                    return null;
                }
                if (balanceObject.get("asset_type") === assetID) {
                    currentBalance = balance;
                    balanceAmount = balanceObject.get("balance");
                }
            });

            var precision = common_utils__WEBPACK_IMPORTED_MODULE_6__["default"].get_asset_precision(asset.get("precision"));
            var parsedAmount = amount ? amount.replace(/,/g, "") : 0;
            var submit_btn_class = parseFloat(parsedAmount) > 0 && parseFloat(parsedAmount) * precision <= parseFloat(balanceAmount) ? "button success" : "button disabled";

            var balanceText = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.balance" }),
                ":\xA0",
                currentBalance ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_7__["default"], { balance: currentBalance }) : "0 " + asset.get("symbol")
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "form",
                { className: "grid-block vertical full-width-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                    component: "h3",
                    style: { textAlign: "center" },
                    content: "modal.settle.title",
                    asset: asset.get("symbol")
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-container ", style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                            label: "modal.settle.amount",
                            amount: amount,
                            onChange: this.onAmountChanged.bind(this),
                            display_balance: balanceText,
                            asset: assetID,
                            assets: [assetID],
                            tabIndex: 1
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                            type: "submit",
                            className: submit_btn_class,
                            onClick: this.onSubmit.bind(this),
                            value: counterpart__WEBPACK_IMPORTED_MODULE_10___default.a.translate("modal.settle.submit")
                        })
                    )
                )
            );
        }
    }]);

    return ModalContent;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ModalContent.propTypes = {
    asset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAsset.isRequired,
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccount.isRequired
};

ModalContent = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(ModalContent);

var SettleModal = function (_React$Component2) {
    _inherits(SettleModal, _React$Component2);

    function SettleModal() {
        _classCallCheck(this, SettleModal);

        var _this2 = _possibleConstructorReturn(this, (SettleModal.__proto__ || Object.getPrototypeOf(SettleModal)).call(this));

        _this2.state = { open: false };
        return _this2;
    }

    _createClass(SettleModal, [{
        key: "show",
        value: function show() {
            var _this3 = this;

            this.setState({ open: true }, function () {
                react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default.a.publish(_this3.props.modalId, "open");
            });
        }
    }, {
        key: "onClose",
        value: function onClose() {
            this.setState({ open: false });
        }
    }, {
        key: "render",
        value: function render() {
            return !this.state.open ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                _BaseModal__WEBPACK_IMPORTED_MODULE_2__["default"],
                {
                    id: this.props.modalId,
                    onClose: this.onClose.bind(this),
                    overlay: true,
                    ref: "settlement_modal"
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block vertical" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ModalContent, this.props)
                )
            );
        }
    }]);

    return SettleModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (SettleModal);

/***/ }),

/***/ 2585:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(772);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2200);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(562);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1968);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2258);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(407);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(573);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2186);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var ReserveAssetModal = function (_React$Component) {
    _inherits(ReserveAssetModal, _React$Component);

    function ReserveAssetModal(props) {
        _classCallCheck(this, ReserveAssetModal);

        var _this = _possibleConstructorReturn(this, (ReserveAssetModal.__proto__ || Object.getPrototypeOf(ReserveAssetModal)).call(this, props));

        _this.state = _this.getInitialState(props);
        return _this;
    }

    _createClass(ReserveAssetModal, [{
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.asset && this.props.asset && np.asset.get("id") !== this.props.asset.get("id")) {
                this.setState(this.getInitialState(np));
            }
        }
    }, {
        key: "getInitialState",
        value: function getInitialState(props) {
            return {
                amount: 0,
                amountAsset: new common_MarketClasses__WEBPACK_IMPORTED_MODULE_7__["Asset"]({
                    amount: 0,
                    asset_id: props.asset.get("id"),
                    precision: props.asset.get("precision")
                })
            };
        }
    }, {
        key: "onAmountChanged",
        value: function onAmountChanged(_ref) {
            var amount = _ref.amount,
                asset = _ref.asset;

            this.state.amountAsset.setAmount({ real: amount });
            this.setState({ amount: amount, asset: asset });
        }
    }, {
        key: "onSubmit",
        value: function onSubmit() {
            var _this2 = this;

            actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__["default"].reserveAsset(this.state.amountAsset.getAmount(), this.props.asset.get("id"), this.props.account.get("id")).then(function () {
                _this2.state.amountAsset.setAmount({ sats: 0 });
                _this2.setState({ amount: 0 });
            });
            this.props.onClose();
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var assetId = this.props.asset.get("id");

            var currentBalance = this.props.account && this.props.account.get("balances", []).size && !!this.props.account.getIn(["balances", assetId]) ? bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getObject(this.props.account.getIn(["balances", assetId])) : null;
            if (!currentBalance) return null;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "form",
                { className: "grid-block vertical full-width-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { component: "h3", content: "modal.reserve.title" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-container ", style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_4__["default"], {
                            label: "modal.reserve.amount",
                            amount: this.state.amount,
                            onChange: this.onAmountChanged.bind(this),
                            asset: assetId,
                            assets: [assetId],
                            display_balance: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                {
                                    onClick: function onClick() {
                                        _this3.state.amountAsset.setAmount({
                                            sats: currentBalance.get("balance")
                                        });
                                        _this3.setState({
                                            amount: _this3.state.amountAsset.getAmount({ real: true })
                                        });
                                    }
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__["default"], {
                                    balance: this.props.account.getIn(["balances", assetId])
                                })
                            ),
                            tabIndex: 1
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block button-group" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                            type: "submit",
                            className: "button success",
                            onClick: this.onSubmit.bind(this),
                            value: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("modal.reserve.submit"),
                            tabIndex: 2
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                className: "button",
                                onClick: this.props.onClose,
                                tabIndex: 3
                            },
                            counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("cancel")
                        )
                    )
                )
            );
        }
    }]);

    return ReserveAssetModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ReserveAssetModal = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_8__["default"])(ReserveAssetModal, {
    propNames: ["asset"]
});

/* harmony default export */ __webpack_exports__["default"] = (ReserveAssetModal);

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3VudC5mOTZjNjk3YjM0YTM1OTZhZmViYS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRQYWdlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50QXNzZXRzLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvTW9kYWwvSXNzdWVNb2RhbC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudEFzc2V0Q3JlYXRlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50QXNzZXRVcGRhdGUuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9VdGlsaXR5L0Zvcm1hdHRlZEZlZS5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQXNzZXRXaGl0ZWxpc3QuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0Fzc2V0RmVlZFByb2R1Y2Vycy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudE1lbWJlcnNoaXAuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L1N0YXRpc3RpY3MuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRWZXN0aW5nLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50UGVybWlzc2lvbnMuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRQZXJtaXNzaW9uc0xpc3QuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9Qcml2YXRlS2V5Vmlldy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL01vZGFsL1FyY29kZU1vZGFsLmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvYXNzZXRzL3FyLnBuZyIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50UGVybWlzc2lvbnNNaWdyYXRlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvRm9ybXMvUHViS2V5SW5wdXQuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRTaWduZWRNZXNzYWdlcy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9hY3Rpb25zL1NpZ25lZE1lc3NhZ2VBY3Rpb24uanMiLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvU2lnbmVkTWVzc2FnZS5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudFdoaXRlbGlzdC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudFZvdGluZy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvV29ya2VyQXBwcm92YWwuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L1ZvdGluZ0FjY291bnRzTGlzdC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudE92ZXJ2aWV3LmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9NYXJnaW5Qb3NpdGlvbnMuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L1Byb3Bvc2Fscy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL01vZGFsL1Byb3Bvc2FsQXBwcm92ZU1vZGFsLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9OZXN0ZWRBcHByb3ZhbFN0YXRlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2xpYi9jb21tb24vcGVybWlzc2lvbl91dGlscy5qcyIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9OZXN0ZWRBcHByb3ZhbFN0YXRlTGliLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50T3JkZXJzLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2xpYi9jb21tb24vYWNjb3VudEhlbHBlci5qcyIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50VHJlZW1hcC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudFBvcnRmb2xpb0xpc3QuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9VdGlsaXR5L01hcmtldENoYW5nZUNvbXBvbmVudC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL1V0aWxpdHkvRXF1aXZhbGVudFByaWNlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvSWNvbi9QdWxzZUljb24uanMiLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL01vZGFsL1NldHRsZU1vZGFsLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvTW9kYWwvUmVzZXJ2ZUFzc2V0TW9kYWwuanN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IEFjY291bnRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL0FjY291bnRBY3Rpb25zXCI7XHJcbmltcG9ydCBBY2NvdW50U3RvcmUgZnJvbSBcInN0b3Jlcy9BY2NvdW50U3RvcmVcIjtcclxuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XHJcbmltcG9ydCBXYWxsZXRVbmxvY2tTdG9yZSBmcm9tIFwic3RvcmVzL1dhbGxldFVubG9ja1N0b3JlXCI7XHJcbi8vIGltcG9ydCBBY2NvdW50TGVmdFBhbmVsIGZyb20gXCIuL0FjY291bnRMZWZ0UGFuZWxcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCB7Y29ubmVjdH0gZnJvbSBcImFsdC1yZWFjdFwiO1xyXG5pbXBvcnQgYWNjb3VudFV0aWxzIGZyb20gXCJjb21tb24vYWNjb3VudF91dGlsc1wiO1xyXG5pbXBvcnQge0xpc3R9IGZyb20gXCJpbW11dGFibGVcIjtcclxuaW1wb3J0IFBhZ2U0MDQgZnJvbSBcIi4uL1BhZ2U0MDQvUGFnZTQwNFwiO1xyXG5pbXBvcnQge1JvdXRlLCBTd2l0Y2gsIFJlZGlyZWN0fSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5cclxuLyogTmVzdGVkIHJvdXRlcyAqL1xyXG5pbXBvcnQgQWNjb3VudEFzc2V0cyBmcm9tIFwiLi9BY2NvdW50QXNzZXRzXCI7XHJcbmltcG9ydCB7QWNjb3VudEFzc2V0Q3JlYXRlfSBmcm9tIFwiLi9BY2NvdW50QXNzZXRDcmVhdGVcIjtcclxuaW1wb3J0IEFjY291bnRBc3NldFVwZGF0ZSBmcm9tIFwiLi9BY2NvdW50QXNzZXRVcGRhdGVcIjtcclxuaW1wb3J0IEFjY291bnRNZW1iZXJzaGlwIGZyb20gXCIuL0FjY291bnRNZW1iZXJzaGlwXCI7XHJcbmltcG9ydCBBY2NvdW50VmVzdGluZyBmcm9tIFwiLi9BY2NvdW50VmVzdGluZ1wiO1xyXG5pbXBvcnQgQWNjb3VudFBlcm1pc3Npb25zIGZyb20gXCIuL0FjY291bnRQZXJtaXNzaW9uc1wiO1xyXG5pbXBvcnQgQWNjb3VudFNpZ25lZE1lc3NhZ2VzIGZyb20gXCIuL0FjY291bnRTaWduZWRNZXNzYWdlc1wiO1xyXG5pbXBvcnQgQWNjb3VudFdoaXRlbGlzdCBmcm9tIFwiLi9BY2NvdW50V2hpdGVsaXN0XCI7XHJcbmltcG9ydCBBY2NvdW50Vm90aW5nIGZyb20gXCIuL0FjY291bnRWb3RpbmdcIjtcclxuaW1wb3J0IEFjY291bnRPdmVydmlldyBmcm9tIFwiLi9BY2NvdW50T3ZlcnZpZXdcIjtcclxuXHJcbmNsYXNzIEFjY291bnRQYWdlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYWNjb3VudDogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnQuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY2NvdW50KSB7XHJcbiAgICAgICAgICAgIEFjY291bnRBY3Rpb25zLnNldEN1cnJlbnRBY2NvdW50LmRlZmVyKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcIm5hbWVcIilcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEZldGNoIHBvc3NpYmxlIGZlZSBhc3NldHMgaGVyZSB0byBhdm9pZCBhc3luYyBpc3N1ZXMgbGF0ZXIgKHdpbGwgcmVzb2x2ZSBhc3NldHMpXHJcbiAgICAgICAgICAgIGFjY291bnRVdGlscy5nZXRQb3NzaWJsZUZlZXModGhpcy5wcm9wcy5hY2NvdW50LCBcInRyYW5zZmVyXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5wKSB7XHJcbiAgICAgICAgaWYgKG5wLmFjY291bnQpIHtcclxuICAgICAgICAgICAgY29uc3QgbnBOYW1lID0gbnAuYWNjb3VudC5nZXQoXCJuYW1lXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TmFtZSA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnQgJiYgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcIm5hbWVcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMucHJvcHMuYWNjb3VudCB8fCBucE5hbWUgIT09IGN1cnJlbnROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGN1cnJlbnQgYWNjb3VudCBpbiBvcmRlciB0byBhY2Nlc3MgdGhlIGhlYWRlciByaWdodCBtZW51IG9wdGlvbnNcclxuICAgICAgICAgICAgICAgIEFjY291bnRBY3Rpb25zLnNldEN1cnJlbnRBY2NvdW50LmRlZmVyKG5wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBGZXRjaCBwb3NzaWJsZSBmZWUgYXNzZXRzIGhlcmUgdG8gYXZvaWQgYXN5bmMgaXNzdWVzIGxhdGVyICh3aWxsIHJlc29sdmUgYXNzZXRzKVxyXG4gICAgICAgICAgICAgICAgYWNjb3VudFV0aWxzLmdldFBvc3NpYmxlRmVlcyhucC5hY2NvdW50LCBcInRyYW5zZmVyXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICBteUFjdGl2ZUFjY291bnRzLFxyXG4gICAgICAgICAgICBzZWFyY2hBY2NvdW50cyxcclxuICAgICAgICAgICAgc2V0dGluZ3MsXHJcbiAgICAgICAgICAgIHdhbGxldF9sb2NrZWQsXHJcbiAgICAgICAgICAgIGFjY291bnQsXHJcbiAgICAgICAgICAgIGhpZGRlbkFzc2V0c1xyXG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBpZiAoIWFjY291bnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDxQYWdlNDA0IC8+O1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYWNjb3VudF9uYW1lID0gdGhpcy5wcm9wcy5hY2NvdW50LmdldChcIm5hbWVcIik7XHJcbiAgICAgICAgbGV0IGlzTXlBY2NvdW50ID0gQWNjb3VudFN0b3JlLmlzTXlBY2NvdW50KGFjY291bnQpO1xyXG5cclxuICAgICAgICBsZXQgcGFzc09uUHJvcHMgPSB7XHJcbiAgICAgICAgICAgIGFjY291bnRfbmFtZSxcclxuICAgICAgICAgICAgbXlBY3RpdmVBY2NvdW50cyxcclxuICAgICAgICAgICAgc2VhcmNoQWNjb3VudHMsXHJcbiAgICAgICAgICAgIHNldHRpbmdzLFxyXG4gICAgICAgICAgICB3YWxsZXRfbG9ja2VkLFxyXG4gICAgICAgICAgICBhY2NvdW50LFxyXG4gICAgICAgICAgICBpc015QWNjb3VudCxcclxuICAgICAgICAgICAgaGlkZGVuQXNzZXRzLFxyXG4gICAgICAgICAgICBjb250YWluZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGJhbGFuY2VzOiBhY2NvdW50LmdldChcImJhbGFuY2VzXCIsIExpc3QoKSkudG9MaXN0KCksXHJcbiAgICAgICAgICAgIG9yZGVyczogYWNjb3VudC5nZXQoXCJvcmRlcnNcIiwgTGlzdCgpKS50b0xpc3QoKSxcclxuICAgICAgICAgICAgdmlld1NldHRpbmdzOiB0aGlzLnByb3BzLnZpZXdTZXR0aW5ncyxcclxuICAgICAgICAgICAgcHJveHk6IGFjY291bnQuZ2V0SW4oW1wib3B0aW9uc1wiLCBcInZvdGluZ19hY2NvdW50XCJdKSxcclxuICAgICAgICAgICAgaGlzdG9yeTogdGhpcy5wcm9wcy5oaXN0b3J5XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIHBhZ2UtbGF5b3V0XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tcGFkZGluZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxTd2l0Y2g+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxSb3V0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoKSA9PiA8QWNjb3VudE92ZXJ2aWV3IHsuLi5wYXNzT25Qcm9wc30gLz59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxSZWRpcmVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbT17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS9vdmVydmlld2B9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxSb3V0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS9hc3NldHNgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gPEFjY291bnRBc3NldHMgey4uLnBhc3NPblByb3BzfSAvPn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFJvdXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9L2NyZWF0ZS1hc3NldGB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoKSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRBc3NldENyZWF0ZSB7Li4ucGFzc09uUHJvcHN9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Um91dGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e2AvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vdXBkYXRlLWFzc2V0Lzphc3NldGB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoKSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRBc3NldFVwZGF0ZSB7Li4ucGFzc09uUHJvcHN9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Um91dGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e2AvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vbWVtYmVyLXN0YXRzYH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eygpID0+IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudE1lbWJlcnNoaXAgey4uLnBhc3NPblByb3BzfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFJvdXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9L3Zlc3RpbmdgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gPEFjY291bnRWZXN0aW5nIHsuLi5wYXNzT25Qcm9wc30gLz59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxSb3V0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS9wZXJtaXNzaW9uc2B9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoKSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRQZXJtaXNzaW9ucyB7Li4ucGFzc09uUHJvcHN9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Um91dGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e2AvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vdm90aW5nYH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eygpID0+IDxBY2NvdW50Vm90aW5nIHsuLi5wYXNzT25Qcm9wc30gLz59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxSb3V0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS93aGl0ZWxpc3RgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gPEFjY291bnRXaGl0ZWxpc3Qgey4uLnBhc3NPblByb3BzfSAvPn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFJvdXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9L3NpZ25lZG1lc3NhZ2VzYH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eygpID0+IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNpZ25lZE1lc3NhZ2VzIHsuLi5wYXNzT25Qcm9wc30gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Td2l0Y2g+XHJcbiAgICAgICAgICAgICAgICAgICAgey8qIHtSZWFjdC5jbG9uZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkNoaWxkcmVuLm9ubHkodGhpcy5wcm9wcy5jaGlsZHJlbiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15QWN0aXZlQWNjb3VudHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hBY2NvdW50cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FsbGV0X2xvY2tlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc015QWNjb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbkFzc2V0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzOiBhY2NvdW50LmdldChcImJhbGFuY2VzXCIsIExpc3QoKSkudG9MaXN0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcnM6IGFjY291bnQuZ2V0KFwib3JkZXJzXCIsIExpc3QoKSkudG9MaXN0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZWRDb2luczogdGhpcy5wcm9wcy5iYWNrZWRDb2lucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaWRnZUNvaW5zOiB0aGlzLnByb3BzLmJyaWRnZUNvaW5zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheURvd246IHRoaXMucHJvcHMuZ2F0ZXdheURvd24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3U2V0dGluZ3M6IHRoaXMucHJvcHMudmlld1NldHRpbmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHk6IGFjY291bnQuZ2V0SW4oW1wib3B0aW9uc1wiLCBcInZvdGluZ19hY2NvdW50XCJdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKX0gKi99XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5BY2NvdW50UGFnZSA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudFBhZ2UsIHtcclxuICAgIHNob3dfbG9hZGVyOiB0cnVlXHJcbn0pO1xyXG5cclxuY2xhc3MgQWNjb3VudFBhZ2VTdG9yZVdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBhY2NvdW50X25hbWUgPSB0aGlzLnByb3BzLm1hdGNoLnBhcmFtcy5hY2NvdW50X25hbWU7XHJcbiAgICAgICAgcmV0dXJuIDxBY2NvdW50UGFnZSB7Li4udGhpcy5wcm9wc30gYWNjb3VudD17YWNjb3VudF9uYW1lfSAvPjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcclxuICAgIEFjY291bnRQYWdlU3RvcmVXcmFwcGVyLFxyXG4gICAge1xyXG4gICAgICAgIGxpc3RlblRvKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW0FjY291bnRTdG9yZSwgU2V0dGluZ3NTdG9yZSwgV2FsbGV0VW5sb2NrU3RvcmVdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0UHJvcHMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBteUFjdGl2ZUFjY291bnRzOiBBY2NvdW50U3RvcmUuZ2V0U3RhdGUoKS5teUFjdGl2ZUFjY291bnRzLFxyXG4gICAgICAgICAgICAgICAgc2VhcmNoQWNjb3VudHM6IEFjY291bnRTdG9yZS5nZXRTdGF0ZSgpLnNlYXJjaEFjY291bnRzLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKS5zZXR0aW5ncyxcclxuICAgICAgICAgICAgICAgIGhpZGRlbkFzc2V0czogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLmhpZGRlbkFzc2V0cyxcclxuICAgICAgICAgICAgICAgIHdhbGxldF9sb2NrZWQ6IFdhbGxldFVubG9ja1N0b3JlLmdldFN0YXRlKCkubG9ja2VkLFxyXG4gICAgICAgICAgICAgICAgdmlld1NldHRpbmdzOiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkudmlld1NldHRpbmdzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4pO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuaW1wb3J0IHtMaW5rfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBBc3NldEFjdGlvbnMgZnJvbSBcImFjdGlvbnMvQXNzZXRBY3Rpb25zXCI7XHJcbmltcG9ydCBBc3NldFN0b3JlIGZyb20gXCJzdG9yZXMvQXNzZXRTdG9yZVwiO1xyXG5pbXBvcnQgQWNjb3VudEFjdGlvbnMgZnJvbSBcImFjdGlvbnMvQWNjb3VudEFjdGlvbnNcIjtcclxuaW1wb3J0IEJhc2VNb2RhbCBmcm9tIFwiLi4vTW9kYWwvQmFzZU1vZGFsXCI7XHJcbmltcG9ydCBGb3JtYXR0ZWRBc3NldCBmcm9tIFwiLi4vVXRpbGl0eS9Gb3JtYXR0ZWRBc3NldFwiO1xyXG5pbXBvcnQgWmZBcGkgZnJvbSBcInJlYWN0LWZvdW5kYXRpb24tYXBwcy9zcmMvdXRpbHMvZm91bmRhdGlvbi1hcGlcIjtcclxuaW1wb3J0IHtkZWJvdW5jZX0gZnJvbSBcImxvZGFzaC1lc1wiO1xyXG5pbXBvcnQgTG9hZGluZ0luZGljYXRvciBmcm9tIFwiLi4vTG9hZGluZ0luZGljYXRvclwiO1xyXG5pbXBvcnQgSXNzdWVNb2RhbCBmcm9tIFwiLi4vTW9kYWwvSXNzdWVNb2RhbFwiO1xyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gXCJhbHQtcmVhY3RcIjtcclxuaW1wb3J0IGFzc2V0VXRpbHMgZnJvbSBcImNvbW1vbi9hc3NldF91dGlsc1wiO1xyXG5pbXBvcnQge01hcCwgTGlzdH0gZnJvbSBcImltbXV0YWJsZVwiO1xyXG5pbXBvcnQgQXNzZXRXcmFwcGVyIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0V3JhcHBlclwiO1xyXG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xyXG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XHJcblxyXG5jbGFzcyBBY2NvdW50QXNzZXRzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgc3ltYm9sOiBcIlwiLFxyXG4gICAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IFwiXCIsXHJcbiAgICAgICAgbWF4X3N1cHBseTogMCxcclxuICAgICAgICBwcmVjaXNpb246IDBcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBzeW1ib2w6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgY3JlYXRlOiB7XHJcbiAgICAgICAgICAgICAgICBzeW1ib2w6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBtYXhfc3VwcGx5OiAxMDAwMDAwMDAwMDAwMDAwLFxyXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiA0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlzc3VlOiB7XHJcbiAgICAgICAgICAgICAgICBhbW91bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICB0bzogXCJcIixcclxuICAgICAgICAgICAgICAgIHRvX2lkOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBzeW1ib2w6IFwiXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3JzOiB7XHJcbiAgICAgICAgICAgICAgICBzeW1ib2w6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNWYWxpZDogZmFsc2UsXHJcbiAgICAgICAgICAgIHNlYXJjaFRlcm06IFwiXCJcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl9zZWFyY2hBY2NvdW50cyA9IGRlYm91bmNlKHRoaXMuX3NlYXJjaEFjY291bnRzLCAxNTApO1xyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja0Fzc2V0cyhhc3NldHMsIGZvcmNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJhc3NldHNcIikuc2l6ZSkgcmV0dXJuO1xyXG4gICAgICAgIGxldCBsYXN0QXNzZXQgPSBhc3NldHNcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChhLnN5bWJvbCA+IGIuc3ltYm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEuc3ltYm9sIDwgYi5zeW1ib2wpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAubGFzdCgpO1xyXG5cclxuICAgICAgICBpZiAoYXNzZXRzLnNpemUgPT09IDAgfHwgZm9yY2UpIHtcclxuICAgICAgICAgICAgQXNzZXRBY3Rpb25zLmdldEFzc2V0TGlzdC5kZWZlcihcIkFcIiwgMTAwKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YXNzZXRzRmV0Y2hlZDogMTAwfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhc3NldHMuc2l6ZSA+PSB0aGlzLnN0YXRlLmFzc2V0c0ZldGNoZWQpIHtcclxuICAgICAgICAgICAgQXNzZXRBY3Rpb25zLmdldEFzc2V0TGlzdC5kZWZlcihsYXN0QXNzZXQuc3ltYm9sLCAxMDApO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHthc3NldHNGZXRjaGVkOiB0aGlzLnN0YXRlLmFzc2V0c0ZldGNoZWQgKyA5OX0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrQXNzZXRzKG5leHRQcm9wcy5hc3NldHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcclxuICAgICAgICB0aGlzLl9jaGVja0Fzc2V0cyh0aGlzLnByb3BzLmFzc2V0cywgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uSXNzdWVJbnB1dCh2YWx1ZSwgZSkge1xyXG4gICAgICAgIGxldCBrZXkgPSBlLnRhcmdldC5pZDtcclxuICAgICAgICBsZXQge2lzc3VlfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIGlmIChrZXkgPT09IFwidG9cIikge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hBY2NvdW50cyhlLnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgICAgIGlzc3VlLnRvID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgIGxldCBhY2NvdW50ID0gdGhpcy5wcm9wcy5zZWFyY2hBY2NvdW50cy5maW5kRW50cnkobmFtZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZSA9PT0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXNzdWUudG9faWQgPSBhY2NvdW50ID8gYWNjb3VudFswXSA6IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaXNzdWVbdmFsdWVdID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc3N1ZTogaXNzdWV9KTtcclxuICAgIH1cclxuXHJcbiAgICBfc2VhcmNoQWNjb3VudHMoc2VhcmNoVGVybSkge1xyXG4gICAgICAgIEFjY291bnRBY3Rpb25zLmFjY291bnRTZWFyY2goc2VhcmNoVGVybSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2lzc3VlQnV0dG9uQ2xpY2soYXNzZXRfaWQsIHN5bWJvbCwgZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBsZXQge2lzc3VlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgaXNzdWUuYXNzZXRfaWQgPSBhc3NldF9pZDtcclxuICAgICAgICBpc3N1ZS5zeW1ib2wgPSBzeW1ib2w7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNzdWU6IGlzc3VlfSk7XHJcbiAgICAgICAgWmZBcGkucHVibGlzaChcImlzc3VlX2Fzc2V0XCIsIFwib3BlblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBfZWRpdEJ1dHRvbkNsaWNrKHN5bWJvbCwgYWNjb3VudF9uYW1lLCBlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMucHJvcHMuaGlzdG9yeS5wdXNoKFxyXG4gICAgICAgICAgICBgL2FjY291bnQvJHthY2NvdW50X25hbWV9L3VwZGF0ZS1hc3NldC8ke3N5bWJvbH1gXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQnV0dG9uQ2xpY2soYWNjb3VudF9uYW1lKSB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goYC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS9jcmVhdGUtYXNzZXRgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHthY2NvdW50LCBhY2NvdW50X25hbWUsIGFzc2V0cywgYXNzZXRzTGlzdH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBsZXQgYWNjb3VudEV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiA8TG9hZGluZ0luZGljYXRvciB0eXBlPVwiY2lyY2xlXCIgLz47XHJcbiAgICAgICAgfSBlbHNlIGlmIChhY2NvdW50Lm5vdEZvdW5kKSB7XHJcbiAgICAgICAgICAgIGFjY291bnRFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFhY2NvdW50RXhpc3RzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImg1XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LmVycm9ycy5ub3RfZm91bmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17YWNjb3VudF9uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvaDU+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhc3NldHNMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBhc3NldHMgPSBhc3NldHMuY2xlYXIoKTtcclxuICAgICAgICAgICAgYXNzZXRzTGlzdC5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEpIGFzc2V0cyA9IGFzc2V0cy5zZXQoYS5nZXQoXCJpZFwiKSwgYS50b0pTKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG15QXNzZXRzID0gYXNzZXRzXHJcbiAgICAgICAgICAgIC5maWx0ZXIoYXNzZXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFzc2V0Lmlzc3VlciA9PT0gYWNjb3VudC5nZXQoXCJpZFwiKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoYS5pZC5zdWJzdHJpbmcoNCwgYS5pZC5sZW5ndGgpLCAxMCkgLVxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGIuaWQuc3Vic3RyaW5nKDQsIGIuaWQubGVuZ3RoKSwgMTApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAubWFwKGFzc2V0ID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IGFzc2V0VXRpbHMucGFyc2VEZXNjcmlwdGlvbihcclxuICAgICAgICAgICAgICAgICAgICBhc3NldC5vcHRpb25zLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRlc2MgPSBkZXNjcmlwdGlvbi5zaG9ydF9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgPyBkZXNjcmlwdGlvbi5zaG9ydF9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgOiBkZXNjcmlwdGlvbi5tYWluO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkZXNjLmxlbmd0aCA+IDEwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc2MgPSBkZXNjLnN1YnN0cigwLCAxMDApICsgXCIuLi5cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkeW5hbWljT2JqZWN0ID0gdGhpcy5wcm9wcy5nZXREeW5hbWljT2JqZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0LmR5bmFtaWNfYXNzZXRfZGF0YV9pZFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2Fzc2V0LnN5bWJvbH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL2Fzc2V0LyR7YXNzZXQuc3ltYm9sfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthc3NldC5zeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcImJpdGFzc2V0XCIgaW4gYXNzZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuYml0YXNzZXQuaXNfcHJlZGljdGlvbl9tYXJrZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnBtXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tcGFcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJVc2VyIElzc3VlZCBBc3NldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2R5bmFtaWNPYmplY3QgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtwYXJzZUludChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR5bmFtaWNPYmplY3QuZ2V0KFwiY3VycmVudF9zdXBwbHlcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17YXNzZXQuaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17cGFyc2VJbnQoYXNzZXQub3B0aW9ucy5tYXhfc3VwcGx5LCAxMCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2Fzc2V0LmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFhc3NldC5iaXRhc3NldF9kYXRhX2lkID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX2lzc3VlQnV0dG9uQ2xpY2suYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LnN5bWJvbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJjcm9zcy1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm90YXRlNDVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9lZGl0QnV0dG9uQ2xpY2suYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuc3ltYm9sLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJkYXNoYm9hcmRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudG9BcnJheSgpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBhcHAtdGFibGVzIG5vLXBhZGRpbmdcIiByZWY9XCJhcHBUYWJsZXNcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBzbWFsbC0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1jb250YWluZXIgZ2VuZXJpYy1ib3JkZXJlZC1ib3hcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwiaXNzdWVkQXNzZXRzVGFiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFjY291bnQtdGFic1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2xhc3M9XCJhY2NvdW50LW92ZXJ2aWV3IGJvcmRlcmVkLWhlYWRlciBjb250ZW50LWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cInBhZGRpbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuaXNzdWVkX2Fzc2V0c1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUgZGFzaGJvYXJkLXRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5zeW1ib2xcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5hc3NldC5zdW1tYXJ5LmFzc2V0X3R5cGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJ0aFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwibWFya2V0cy5zdXBwbHlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1heF9zdXBwbHlcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ0cmFuc2FjdGlvbi50cnhUeXBlcy5hc3NldF9pc3N1ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFwiY2VudGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInRyYW5zYWN0aW9uLnRyeFR5cGVzLmFzc2V0X3VwZGF0ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+e215QXNzZXRzfTwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fY3JlYXRlQnV0dG9uQ2xpY2suYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNhY3Rpb24udHJ4VHlwZXMuYXNzZXRfY3JlYXRlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8QmFzZU1vZGFsIGlkPVwiaXNzdWVfYXNzZXRcIiBvdmVybGF5PXt0cnVlfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPElzc3VlTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldF90b19pc3N1ZT17dGhpcy5zdGF0ZS5pc3N1ZS5hc3NldF9pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFpmQXBpLnB1Ymxpc2goXCJpc3N1ZV9hc3NldFwiLCBcImNsb3NlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L0Jhc2VNb2RhbD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5BY2NvdW50QXNzZXRzID0gQXNzZXRXcmFwcGVyKEFjY291bnRBc3NldHMsIHtcclxuICAgIHByb3BOYW1lczogW1wiYXNzZXRzTGlzdFwiXSxcclxuICAgIGFzTGlzdDogdHJ1ZSxcclxuICAgIHdpdGhEeW5hbWljOiB0cnVlXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcclxuICAgIEFjY291bnRBc3NldHMsXHJcbiAgICB7XHJcbiAgICAgICAgbGlzdGVuVG8oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbQXNzZXRTdG9yZV07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRQcm9wcyhwcm9wcykge1xyXG4gICAgICAgICAgICBsZXQgYXNzZXRzID0gTWFwKCksXHJcbiAgICAgICAgICAgICAgICBhc3NldHNMaXN0ID0gTGlzdCgpO1xyXG4gICAgICAgICAgICBpZiAocHJvcHMuYWNjb3VudC5nZXQoXCJhc3NldHNcIiwgW10pLnNpemUpIHtcclxuICAgICAgICAgICAgICAgIHByb3BzLmFjY291bnQuZ2V0KFwiYXNzZXRzXCIsIFtdKS5mb3JFYWNoKGlkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NldHNMaXN0ID0gYXNzZXRzTGlzdC5wdXNoKGlkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXNzZXRzID0gQXNzZXRTdG9yZS5nZXRTdGF0ZSgpLmFzc2V0cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4ge2Fzc2V0cywgYXNzZXRzTGlzdH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4pO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IEFwcGxpY2F0aW9uQXBpIGZyb20gXCJhcGkvQXBwbGljYXRpb25BcGlcIjtcclxuaW1wb3J0IEFjY291bnRTZWxlY3RvciBmcm9tIFwiLi4vQWNjb3VudC9BY2NvdW50U2VsZWN0b3JcIjtcclxuaW1wb3J0IEFtb3VudFNlbGVjdG9yIGZyb20gXCIuLi9VdGlsaXR5L0Ftb3VudFNlbGVjdG9yXCI7XHJcbmltcG9ydCBub3RpZnkgZnJvbSBcImFjdGlvbnMvTm90aWZpY2F0aW9uQWN0aW9uc1wiO1xyXG5cclxuY2xhc3MgSXNzdWVNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFzc2V0X3RvX2lzc3VlOiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBhbW91bnQ6IHByb3BzLmFtb3VudCxcclxuICAgICAgICAgICAgdG86IHByb3BzLnRvLFxyXG4gICAgICAgICAgICB0b19pZDogbnVsbCxcclxuICAgICAgICAgICAgbWVtbzogXCJcIlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgb25BbW91bnRDaGFuZ2VkKHthbW91bnR9KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YW1vdW50OiBhbW91bnR9KTtcclxuICAgIH1cclxuXHJcbiAgICBvblRvQWNjb3VudENoYW5nZWQodG8pIHtcclxuICAgICAgICBsZXQgc3RhdGUgPSB0b1xyXG4gICAgICAgICAgICA/IHt0bzogdG8uZ2V0KFwibmFtZVwiKSwgdG9faWQ6IHRvLmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICA6IHt0b19pZDogbnVsbH07XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Ub0NoYW5nZWQodG8pIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHt0bzogdG8sIHRvX2lkOiBudWxsfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25TdWJtaXQoKSB7XHJcbiAgICAgICAgbGV0IHthc3NldF90b19pc3N1ZX0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCBwcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKFxyXG4gICAgICAgICAgICBhc3NldF90b19pc3N1ZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBhbW91bnQgPSB0aGlzLnN0YXRlLmFtb3VudC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgXCJcIik7XHJcbiAgICAgICAgYW1vdW50ICo9IHByZWNpc2lvbjtcclxuXHJcbiAgICAgICAgQXBwbGljYXRpb25BcGkuaXNzdWVfYXNzZXQoXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudG9faWQsXHJcbiAgICAgICAgICAgIGFzc2V0X3RvX2lzc3VlLmdldChcImlzc3VlclwiKSxcclxuICAgICAgICAgICAgYXNzZXRfdG9faXNzdWUuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgIGFtb3VudCxcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5tZW1vXHJcbiAgICAgICAgICAgICAgICA/IG5ldyBCdWZmZXIodGhpcy5zdGF0ZS5tZW1vLCBcInV0Zi04XCIpXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuc3RhdGUubWVtb1xyXG4gICAgICAgICkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJpc3N1ZSBlcnJvciBjYXVnaHQgaGVyZTpcIiwgZXJyKTtcclxuICAgICAgICAgICAgbm90aWZ5LmFkZE5vdGlmaWNhdGlvbih7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGlzc3VlIHRoZSBhc3NldCwgcHJvYmFibHkgZHVlIHRvIGFuIGludmFsaWQgYW1vdW50IGJlaW5nIGlzc3VlZGAsIC8vOiAke3RoaXMuc3RhdGUud2FsbGV0X3B1YmxpY19uYW1lfVxyXG4gICAgICAgICAgICAgICAgbGV2ZWw6IFwiZXJyb3JcIixcclxuICAgICAgICAgICAgICAgIGF1dG9EaXNtaXNzOiAxMFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGFtb3VudDogMCxcclxuICAgICAgICAgICAgdG86IFwiXCIsXHJcbiAgICAgICAgICAgIHRvX2lkOiBudWxsLFxyXG4gICAgICAgICAgICBtZW1vOiBcIlwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25NZW1vQ2hhbmdlZChlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bWVtbzogZS50YXJnZXQudmFsdWV9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IGFzc2V0X3RvX2lzc3VlID0gdGhpcy5wcm9wcy5hc3NldF90b19pc3N1ZS5nZXQoXCJpZFwiKTtcclxuICAgICAgICBsZXQgdGFiSW5kZXggPSAxO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8Zm9ybSBjbGFzc05hbWU9XCJncmlkLWJsb2NrIHZlcnRpY2FsIGZ1bGwtd2lkdGgtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRhaW5lciBcIiBzdHlsZT17e3BhZGRpbmdUb3A6IFwiMnJlbVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgey8qIFQgTyAqL31cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e1wibW9kYWwuaXNzdWUudG9cIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lPXt0aGlzLnN0YXRlLnRvfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5vblRvQWNjb3VudENoYW5nZWQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25Ub0NoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMuc3RhdGUudG99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGFiSW5kZXgrK31cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgey8qIEEgTSBPIFUgTiBUICovfVxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QW1vdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwibW9kYWwuaXNzdWUuYW1vdW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dGhpcy5zdGF0ZS5hbW91bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkFtb3VudENoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldF90b19pc3N1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W2Fzc2V0X3RvX2lzc3VlXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXt0YWJJbmRleCsrfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7LyogIE0gRSBNIE8gICovfVxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwic3BhblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cInRyYW5zZmVyLm1lbW9cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNmZXIub3B0aW9uYWxcIiAvPilcclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPVwiM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5tZW1vfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9e3RhYkluZGV4Kyt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbk1lbW9DaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBidXR0b24tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b24gcHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uU3VibWl0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnRvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLnRvX2lkIHx8ICF0aGlzLnN0YXRlLmFtb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXt0YWJJbmRleCsrfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwibW9kYWwuaXNzdWUuc3VibWl0XCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvbiBwcmltYXJ5IGhvbGxvd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2xvc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGFiSW5kZXgrK31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImNhbmNlbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJpbmRUb0NoYWluU3RhdGUoSXNzdWVNb2RhbCk7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xyXG5pbXBvcnQgQXNzZXRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL0Fzc2V0QWN0aW9uc1wiO1xyXG5pbXBvcnQgSGVscENvbnRlbnQgZnJvbSBcIi4uL1V0aWxpdHkvSGVscENvbnRlbnRcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlLCBDaGFpblZhbGlkYXRpb259IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcclxuaW1wb3J0IEFzc2V0U2VsZWN0b3IgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXRTZWxlY3RvclwiO1xyXG5pbXBvcnQgYmlnIGZyb20gXCJiaWdudW1iZXIuanNcIjtcclxuaW1wb3J0IGNuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xyXG5pbXBvcnQgYXNzZXRVdGlscyBmcm9tIFwiY29tbW9uL2Fzc2V0X3V0aWxzXCI7XHJcbmltcG9ydCB7VGFicywgVGFifSBmcm9tIFwiLi4vVXRpbGl0eS9UYWJzXCI7XHJcbmltcG9ydCBBbW91bnRTZWxlY3RvciBmcm9tIFwiLi4vVXRpbGl0eS9BbW91bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgYXNzZXRDb25zdGFudHMgZnJvbSBcImNoYWluL2Fzc2V0X2NvbnN0YW50c1wiO1xyXG5pbXBvcnQge2VzdGltYXRlRmVlfSBmcm9tIFwiY29tbW9uL3RyeEhlbHBlclwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcblxyXG5sZXQgR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWSA9IG5ldyBiaWcoXHJcbiAgICBhc3NldENvbnN0YW50cy5HUkFQSEVORV9NQVhfU0hBUkVfU1VQUExZXHJcbik7XHJcblxyXG5jbGFzcyBCaXRBc3NldE9wdGlvbnMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBiYWNraW5nQXNzZXQ6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIGlzVXBkYXRlOiBQcm9wVHlwZXMuYm9vbFxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIGlzVXBkYXRlOiBmYWxzZVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBiYWNraW5nQXNzZXQ6IHByb3BzLmJhY2tpbmdBc3NldC5nZXQoXCJzeW1ib2xcIiksXHJcbiAgICAgICAgICAgIGVycm9yOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBfb25JbnB1dEJhY2tpbmdBc3NldChhc3NldCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBiYWNraW5nQXNzZXQ6IGFzc2V0LnRvVXBwZXJDYXNlKCksXHJcbiAgICAgICAgICAgIGVycm9yOiBudWxsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uRm91bmRCYWNraW5nQXNzZXQoYXNzZXQpIHtcclxuICAgICAgICBpZiAoYXNzZXQpIHtcclxuICAgICAgICAgICAgbGV0IGJhY2tpbmcgPVxyXG4gICAgICAgICAgICAgICAgYXNzZXQuZ2V0KFwiYml0YXNzZXRcIikgJiZcclxuICAgICAgICAgICAgICAgIENoYWluU3RvcmUuZ2V0QXNzZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQuZ2V0SW4oW1wiYml0YXNzZXRcIiwgXCJvcHRpb25zXCIsIFwic2hvcnRfYmFja2luZ19hc3NldFwiXSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGxldCBiYWNraW5nX2JhY2tpbmcgPVxyXG4gICAgICAgICAgICAgICAgYmFja2luZyAmJlxyXG4gICAgICAgICAgICAgICAgYmFja2luZy5nZXQoXCJiaXRhc3NldFwiKSAmJlxyXG4gICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRBc3NldChcclxuICAgICAgICAgICAgICAgICAgICBiYWNraW5nLmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG9ydF9iYWNraW5nX2Fzc2V0XCJcclxuICAgICAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKGJhY2tpbmdfYmFja2luZyAmJiBiYWNraW5nX2JhY2tpbmcgIT09IFwiMS4zLjBcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5lcnJvcl90b29fZGVlcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uVXBkYXRlKFwiaW52YWxpZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghYXNzZXQuZ2V0SW4oW1wiYml0YXNzZXRcIiwgXCJpc19wcmVkaWN0aW9uX21hcmtldFwiXSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmlzUHJlZGljdGlvbk1hcmtldCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcInByZWNpc2lvblwiKSAhPT1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGhpcy5wcm9wcy5hc3NldFByZWNpc2lvbiwgMTApXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZXJyb3JfcHJlY2lzaW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YXNzZXQ6IHRoaXMucHJvcHMuYXNzZXRTeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uVXBkYXRlKFwiaW52YWxpZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZShcInNob3J0X2JhY2tpbmdfYXNzZXRcIiwgYXNzZXQuZ2V0KFwiaWRcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25VcGRhdGUoXCJpbnZhbGlkXCIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZXJyb3JfaW52YWxpZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uVXBkYXRlKFwiaW52YWxpZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25VcGRhdGUoXCJpbnZhbGlkXCIsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtiaXRhc3NldF9vcHRzfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IHtlcnJvcn0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZlZWRfbGlmZXRpbWVfc2VjXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtiaXRhc3NldF9vcHRzLmZlZWRfbGlmZXRpbWVfc2VjIC8gNjB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uVXBkYXRlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmZWVkX2xpZmV0aW1lX3NlY1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcblxyXG4gICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1pbmltdW1fZmVlZHNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2JpdGFzc2V0X29wdHMubWluaW11bV9mZWVkc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMucHJvcHMub25VcGRhdGUuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1pbmltdW1fZmVlZHNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mb3JjZV9zZXR0bGVtZW50X2RlbGF5X3NlY1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Yml0YXNzZXRfb3B0cy5mb3JjZV9zZXR0bGVtZW50X2RlbGF5X3NlYyAvIDYwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vblVwZGF0ZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZm9yY2Vfc2V0dGxlbWVudF9kZWxheV9zZWNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mb3JjZV9zZXR0bGVtZW50X29mZnNldF9wZXJjZW50XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHMuZm9yY2Vfc2V0dGxlbWVudF9vZmZzZXRfcGVyY2VudCAvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldENvbnN0YW50cy5HUkFQSEVORV8xX1BFUkNFTlRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vblVwZGF0ZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZm9yY2Vfc2V0dGxlbWVudF9vZmZzZXRfcGVyY2VudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcblxyXG4gICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1heGltdW1fZm9yY2Vfc2V0dGxlbWVudF92b2x1bWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0cy5tYXhpbXVtX2ZvcmNlX3NldHRsZW1lbnRfdm9sdW1lIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0Q29uc3RhbnRzLkdSQVBIRU5FXzFfUEVSQ0VOVFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uVXBkYXRlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXhpbXVtX2ZvcmNlX3NldHRsZW1lbnRfdm9sdW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tbWFyZ2luIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFzc2V0U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5iYWNraW5nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uSW5wdXRCYWNraW5nQXNzZXQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUuYmFja2luZ0Fzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldElucHV0PXt0aGlzLnN0YXRlLmJhY2tpbmdBc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwiLCBwYWRkaW5nUmlnaHQ6IFwiMTBweFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Gb3VuZD17dGhpcy5fb25Gb3VuZEJhY2tpbmdBc3NldC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAge2Vycm9yID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgaGFzLWVycm9yXCI+e2Vycm9yfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuQml0QXNzZXRPcHRpb25zID0gQmluZFRvQ2hhaW5TdGF0ZShCaXRBc3NldE9wdGlvbnMpO1xyXG5cclxuY2xhc3MgQWNjb3VudEFzc2V0Q3JlYXRlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgY29yZTogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBnbG9iYWxPYmplY3Q6IFwiMi4wLjBcIixcclxuICAgICAgICBjb3JlOiBcIjEuMy4wXCJcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLnJlc2V0U3RhdGUocHJvcHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0U3RhdGUocHJvcHMpIHtcclxuICAgICAgICAvLyBsZXQgYXNzZXQgPSBwcm9wcy5hc3NldC50b0pTKCk7XHJcbiAgICAgICAgbGV0IGlzQml0QXNzZXQgPSBmYWxzZTtcclxuICAgICAgICBsZXQgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbig0KTtcclxuICAgICAgICBsZXQgY29yZVByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXHJcbiAgICAgICAgICAgIHByb3BzLmNvcmUuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IHtmbGFnQm9vbGVhbnMsIHBlcm1pc3Npb25Cb29sZWFuc30gPSB0aGlzLl9nZXRQZXJtaXNzaW9ucyh7XHJcbiAgICAgICAgICAgIGlzQml0QXNzZXRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gbGV0IGZsYWdzID0gYXNzZXRVdGlscy5nZXRGbGFncyhmbGFnQm9vbGVhbnMpO1xyXG4gICAgICAgIC8vIGxldCBwZXJtaXNzaW9ucyA9IGFzc2V0VXRpbHMuZ2V0UGVybWlzc2lvbnMocGVybWlzc2lvbkJvb2xlYW5zLCBpc0JpdEFzc2V0KTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImFsbCBwZXJtaXNzaW9uczpcIiwgcGVybWlzc2lvbkJvb2xlYW5zLCBwZXJtaXNzaW9ucylcclxuXHJcbiAgICAgICAgbGV0IGNvcmVSYXRlQmFzZUFzc2V0TmFtZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQoXCIxLjMuMFwiKS5nZXQoXCJzeW1ib2xcIik7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVwZGF0ZToge1xyXG4gICAgICAgICAgICAgICAgc3ltYm9sOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiA0LFxyXG4gICAgICAgICAgICAgICAgbWF4X3N1cHBseTogMTAwMDAwLFxyXG4gICAgICAgICAgICAgICAgbWF4X21hcmtldF9mZWU6IDAsXHJcbiAgICAgICAgICAgICAgICBtYXJrZXRfZmVlX3BlcmNlbnQ6IDAsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge21haW46IFwiXCJ9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yczoge1xyXG4gICAgICAgICAgICAgICAgbWF4X3N1cHBseTogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpc1ZhbGlkOiB0cnVlLFxyXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnM6IGZsYWdCb29sZWFucyxcclxuICAgICAgICAgICAgcGVybWlzc2lvbkJvb2xlYW5zOiBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGlzQml0QXNzZXQ6IGlzQml0QXNzZXQsXHJcbiAgICAgICAgICAgIGlzX3ByZWRpY3Rpb25fbWFya2V0OiBmYWxzZSxcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlOiB7XHJcbiAgICAgICAgICAgICAgICBxdW90ZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogMVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJhc2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NldF9pZDogXCIxLjMuMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogMVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiaXRhc3NldF9vcHRzOiB7XHJcbiAgICAgICAgICAgICAgICBmZWVkX2xpZmV0aW1lX3NlYzogNjAgKiA2MCAqIDI0LFxyXG4gICAgICAgICAgICAgICAgbWluaW11bV9mZWVkczogNyxcclxuICAgICAgICAgICAgICAgIGZvcmNlX3NldHRsZW1lbnRfZGVsYXlfc2VjOiA2MCAqIDYwICogMjQsXHJcbiAgICAgICAgICAgICAgICBmb3JjZV9zZXR0bGVtZW50X29mZnNldF9wZXJjZW50OlxyXG4gICAgICAgICAgICAgICAgICAgIDEgKiBhc3NldENvbnN0YW50cy5HUkFQSEVORV8xX1BFUkNFTlQsXHJcbiAgICAgICAgICAgICAgICBtYXhpbXVtX2ZvcmNlX3NldHRsZW1lbnRfdm9sdW1lOlxyXG4gICAgICAgICAgICAgICAgICAgIDIwICogYXNzZXRDb25zdGFudHMuR1JBUEhFTkVfMV9QRVJDRU5ULFxyXG4gICAgICAgICAgICAgICAgc2hvcnRfYmFja2luZ19hc3NldDogXCIxLjMuMFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1hcmtldElucHV0OiBcIlwiXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0UGVybWlzc2lvbnMoc3RhdGUpIHtcclxuICAgICAgICBsZXQgZmxhZ0Jvb2xlYW5zID0gYXNzZXRVdGlscy5nZXRGbGFnQm9vbGVhbnMoMCwgc3RhdGUuaXNCaXRBc3NldCk7XHJcbiAgICAgICAgbGV0IHBlcm1pc3Npb25Cb29sZWFucyA9IGFzc2V0VXRpbHMuZ2V0RmxhZ0Jvb2xlYW5zKFxyXG4gICAgICAgICAgICBcImFsbFwiLFxyXG4gICAgICAgICAgICBzdGF0ZS5pc0JpdEFzc2V0XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnNcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVBc3NldChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIHVwZGF0ZSxcclxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZSxcclxuICAgICAgICAgICAgaXNCaXRBc3NldCxcclxuICAgICAgICAgICAgaXNfcHJlZGljdGlvbl9tYXJrZXQsXHJcbiAgICAgICAgICAgIGJpdGFzc2V0X29wdHNcclxuICAgICAgICB9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgbGV0IHthY2NvdW50fSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGxldCBmbGFncyA9IGFzc2V0VXRpbHMuZ2V0RmxhZ3MoZmxhZ0Jvb2xlYW5zLCBpc0JpdEFzc2V0KTtcclxuICAgICAgICBsZXQgcGVybWlzc2lvbnMgPSBhc3NldFV0aWxzLmdldFBlcm1pc3Npb25zKFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGlzQml0QXNzZXRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5tYXJrZXRJbnB1dCAhPT0gdXBkYXRlLmRlc2NyaXB0aW9uLm1hcmtldCkge1xyXG4gICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb24ubWFya2V0ID0gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gSlNPTi5zdHJpbmdpZnkodXBkYXRlLmRlc2NyaXB0aW9uKTtcclxuXHJcbiAgICAgICAgQXNzZXRBY3Rpb25zLmNyZWF0ZUFzc2V0KFxyXG4gICAgICAgICAgICBhY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICB1cGRhdGUsXHJcbiAgICAgICAgICAgIGZsYWdzLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9ucyxcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLFxyXG4gICAgICAgICAgICBpc0JpdEFzc2V0LFxyXG4gICAgICAgICAgICBpc19wcmVkaWN0aW9uX21hcmtldCxcclxuICAgICAgICAgICAgYml0YXNzZXRfb3B0cyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb25cclxuICAgICAgICApLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgICAgICBcIi4uLiBBc3NldEFjdGlvbnMuY3JlYXRlQXNzZXQoYWNjb3VudF9pZCwgdXBkYXRlKVwiLFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZSxcclxuICAgICAgICAgICAgICAgIGZsYWdzLFxyXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbnNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFzQ2hhbmdlZCgpIHtcclxuICAgICAgICByZXR1cm4gIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLFxyXG4gICAgICAgICAgICB0aGlzLnJlc2V0U3RhdGUodGhpcy5wcm9wcylcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZXNldChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMucmVzZXRTdGF0ZSh0aGlzLnByb3BzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2ZvcmNlUG9zaXRpdmUobnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQobnVtYmVyKSA8IDAgPyBcIjBcIiA6IG51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICBfb25VcGRhdGVEZXNjcmlwdGlvbih2YWx1ZSwgZSkge1xyXG4gICAgICAgIGxldCB7dXBkYXRlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHVwZGF0ZVN0YXRlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiY29uZGl0aW9uXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUubGVuZ3RoID4gNjApIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTdGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV0gPSBlLnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcInNob3J0X25hbWVcIjpcclxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZS5sZW5ndGggPiAzMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVN0YXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uW3ZhbHVlXSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwibWFya2V0XCI6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcInZpc2libGVcIjpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV0gPSAhdXBkYXRlLmRlc2NyaXB0aW9uW3ZhbHVlXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV0gPSBlLnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHVwZGF0ZVN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGVFZGl0RmllbGRzKHVwZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlQml0QXNzZXRPcHRzKHZhbHVlLCBlKSB7XHJcbiAgICAgICAgbGV0IHtiaXRhc3NldF9vcHRzLCBlcnJvcnN9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZm9yY2Vfc2V0dGxlbWVudF9vZmZzZXRfcGVyY2VudFwiOlxyXG4gICAgICAgICAgICBjYXNlIFwibWF4aW11bV9mb3JjZV9zZXR0bGVtZW50X3ZvbHVtZVwiOlxyXG4gICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0c1t2YWx1ZV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpICpcclxuICAgICAgICAgICAgICAgICAgICBhc3NldENvbnN0YW50cy5HUkFQSEVORV8xX1BFUkNFTlQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIm1pbmltdW1fZmVlZHNcIjpcclxuICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHNbdmFsdWVdID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUsIDEwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZmVlZF9saWZldGltZV9zZWNcIjpcclxuICAgICAgICAgICAgY2FzZSBcImZvcmNlX3NldHRsZW1lbnRfZGVsYXlfc2VjXCI6XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChwYXJzZUZsb2F0KGUudGFyZ2V0LnZhbHVlKSAqIDYwLCAxMClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzW3ZhbHVlXSA9IHBhcnNlSW50KFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpICogNjAsXHJcbiAgICAgICAgICAgICAgICAgICAgMTBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJzaG9ydF9iYWNraW5nX2Fzc2V0XCI6XHJcbiAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzW3ZhbHVlXSA9IGU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJpbnZhbGlkXCI6XHJcbiAgICAgICAgICAgICAgICBlcnJvcnMuaW52YWxpZF9iaXRhc3NldCA9IGU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzW3ZhbHVlXSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaXNWYWxpZCA9XHJcbiAgICAgICAgICAgICFlcnJvcnMuc3ltYm9sICYmICFlcnJvcnMubWF4X3N1cHBseSAmJiAhZXJyb3JzLmludmFsaWRfYml0YXNzZXQ7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzVmFsaWQ6IGlzVmFsaWQsIGVycm9yczogZXJyb3JzfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uVXBkYXRlSW5wdXQodmFsdWUsIGUpIHtcclxuICAgICAgICBsZXQge3VwZGF0ZSwgZXJyb3JzfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHVwZGF0ZVN0YXRlID0gdHJ1ZTtcclxuICAgICAgICBsZXQgc2hvdWxkUmVzdG9yZUN1cnNvciA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBwcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKHRoaXMuc3RhdGUudXBkYXRlLnByZWNpc2lvbik7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XHJcbiAgICAgICAgY29uc3QgY2FyZXQgPSB0YXJnZXQuc2VsZWN0aW9uU3RhcnQ7XHJcbiAgICAgICAgY29uc3QgaW5wdXRWYWx1ZSA9IHRhcmdldC52YWx1ZTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwibWFya2V0X2ZlZV9wZXJjZW50XCI6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdGhpcy5fZm9yY2VQb3NpdGl2ZSh0YXJnZXQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwibWF4X21hcmtldF9mZWVcIjpcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICBuZXcgYmlnKGlucHV0VmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aW1lcyhwcmVjaXNpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5ndChHUkFQSEVORV9NQVhfU0hBUkVfU1VQUExZKVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzLm1heF9tYXJrZXRfZmVlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJUaGUgbnVtYmVyIHlvdSB0cmllZCB0byBlbnRlciBpcyB0b28gbGFyZ2VcIjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7ZXJyb3JzfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWUgPSB1dGlscy5saW1pdEJ5UHJlY2lzaW9uKFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnVwZGF0ZS5wcmVjaXNpb25cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwicHJlY2lzaW9uXCI6XHJcbiAgICAgICAgICAgICAgICAvLyBFbmZvcmNlIHBvc2l0aXZlIG51bWJlclxyXG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IHRoaXMuX2ZvcmNlUG9zaXRpdmUodGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcIm1heF9zdXBwbHlcIjpcclxuICAgICAgICAgICAgICAgIHNob3VsZFJlc3RvcmVDdXJzb3IgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4cF9udW1lcmFsID0gbmV3IFJlZ0V4cCgvW1s6ZGlnaXQ6XV0vKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgaW5wdXQgaXMgdmFsaWRcclxuICAgICAgICAgICAgICAgIGlmICghcmVnZXhwX251bWVyYWwudGVzdCh0YXJnZXQudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlID0gdGFyZ2V0LnZhbHVlLnJlcGxhY2UoL1teMC05Ll0vZywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ2F0Y2ggaW5pdGlhbCBkZWNpbWFsIGlucHV0XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LnZhbHVlLmNoYXJBdCgwKSA9PSBcIi5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZSA9IFwiMC5cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDYXRjaCBkb3VibGUgZGVjaW1hbCBhbmQgcmVtb3ZlIGlmIGludmFsaWRcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWUuY2hhckF0KHRhcmdldC52YWx1ZS5sZW5ndGgpICE9XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlLnNlYXJjaChcIi5cIilcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZS5zdWJzdHIoMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlID0gdXRpbHMubGltaXRCeVByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS51cGRhdGUucHJlY2lzaW9uXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IHRhcmdldC52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiAoKG5ldyBiaWcodGFyZ2V0LnZhbHVlKSkudGltZXMoTWF0aC5wb3coMTAsIHByZWNpc2lvbikuZ3QoR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWSkpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHVwZGF0ZSxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgZXJyb3JzOiB7bWF4X3N1cHBseTogXCJUaGUgbnVtYmVyIHlvdSB0cmllZCB0byBlbnRlciBpcyB0b28gbGFyZ2VcIlxyXG4gICAgICAgICAgICAgICAgLy8gICAgIH19KTtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxyXG4gICAgICAgICAgICAgICAgc2hvdWxkUmVzdG9yZUN1cnNvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBFbmZvcmNlIHVwcGVyY2FzZVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3ltYm9sID0gdGFyZ2V0LnZhbHVlLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBFbmZvcmNlIGNoYXJhY3RlcnNcclxuICAgICAgICAgICAgICAgIGxldCByZWdleHAgPSBuZXcgUmVnRXhwKFwiXlsuQS1aMC05XSskXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN5bWJvbCAhPT0gXCJcIiAmJiAhcmVnZXhwLnRlc3Qoc3ltYm9sKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRBc3NldChzeW1ib2wpO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IHRoaXMuX2ZvcmNlUG9zaXRpdmUoc3ltYm9sKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVt2YWx1ZV0gPSB0YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh1cGRhdGVTdGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHt1cGRhdGU6IHVwZGF0ZX0sICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzaG91bGRSZXN0b3JlQ3Vyc29yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0aW9uU3RhcnQgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJldCAtIChpbnB1dFZhbHVlLmxlbmd0aCAtIHVwZGF0ZVt2YWx1ZV0ubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2Uoc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvblN0YXJ0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRlRWRpdEZpZWxkcyh1cGRhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfdmFsaWRhdGVFZGl0RmllbGRzKG5ld19zdGF0ZSkge1xyXG4gICAgICAgIGxldCB7ZXJyb3JzfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgZXJyb3JzLm1heF9zdXBwbHkgPSBudWxsO1xyXG5cclxuICAgICAgICBlcnJvcnMuc3ltYm9sID0gQ2hhaW5WYWxpZGF0aW9uLmlzX3ZhbGlkX3N5bWJvbF9lcnJvcihuZXdfc3RhdGUuc3ltYm9sKTtcclxuICAgICAgICBsZXQgZXhpc3RpbmdBc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQobmV3X3N0YXRlLnN5bWJvbCk7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nQXNzZXQpIHtcclxuICAgICAgICAgICAgZXJyb3JzLnN5bWJvbCA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZXhpc3RzXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5tYXhfc3VwcGx5ID1cclxuICAgICAgICAgICAgICAgIG5ld19zdGF0ZS5tYXhfc3VwcGx5IDw9IDBcclxuICAgICAgICAgICAgICAgICAgICA/IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1heF9wb3NpdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgYmlnKG5ld19zdGF0ZS5tYXhfc3VwcGx5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC50aW1lcyhNYXRoLnBvdygxMCwgbmV3X3N0YXRlLnByZWNpc2lvbikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmd0KEdSQVBIRU5FX01BWF9TSEFSRV9TVVBQTFkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnRvb19sYXJnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICBlcnJvcnMubWF4X3N1cHBseSA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMudG9vX2xhcmdlXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpc1ZhbGlkID1cclxuICAgICAgICAgICAgIWVycm9ycy5zeW1ib2wgJiYgIWVycm9ycy5tYXhfc3VwcGx5ICYmICFlcnJvcnMuaW52YWxpZF9iaXRhc3NldDtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNWYWxpZDogaXNWYWxpZCwgZXJyb3JzOiBlcnJvcnN9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25GbGFnQ2hhbmdlKGtleSkge1xyXG4gICAgICAgIGxldCBib29sZWFucyA9IHRoaXMuc3RhdGUuZmxhZ0Jvb2xlYW5zO1xyXG4gICAgICAgIGJvb2xlYW5zW2tleV0gPSAhYm9vbGVhbnNba2V5XTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zOiBib29sZWFuc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblBlcm1pc3Npb25DaGFuZ2Uoa2V5KSB7XHJcbiAgICAgICAgbGV0IGJvb2xlYW5zID0gdGhpcy5zdGF0ZS5wZXJtaXNzaW9uQm9vbGVhbnM7XHJcbiAgICAgICAgYm9vbGVhbnNba2V5XSA9ICFib29sZWFuc1trZXldO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnM6IGJvb2xlYW5zXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uSW5wdXRDb3JlQXNzZXQodHlwZSwgYXNzZXQpIHtcclxuICAgICAgICBpZiAodHlwZSA9PT0gXCJxdW90ZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgcXVvdGVBc3NldElucHV0OiBhc3NldFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiYmFzZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgYmFzZUFzc2V0SW5wdXQ6IGFzc2V0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25Gb3VuZENvcmVBc3NldCh0eXBlLCBhc3NldCkge1xyXG4gICAgICAgIGlmIChhc3NldCkge1xyXG4gICAgICAgICAgICBsZXQgY29yZV9yYXRlID0gdGhpcy5zdGF0ZS5jb3JlX2V4Y2hhbmdlX3JhdGU7XHJcbiAgICAgICAgICAgIGNvcmVfcmF0ZVt0eXBlXS5hc3NldF9pZCA9IGFzc2V0LmdldChcImlkXCIpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGU6IGNvcmVfcmF0ZVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRlRWRpdEZpZWxkcyh7XHJcbiAgICAgICAgICAgICAgICBtYXhfc3VwcGx5OiB0aGlzLnN0YXRlLm1heF9zdXBwbHksXHJcbiAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGU6IGNvcmVfcmF0ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uSW5wdXRNYXJrZXQoYXNzZXQpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgbWFya2V0SW5wdXQ6IGFzc2V0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uRm91bmRNYXJrZXRBc3NldChhc3NldCkge1xyXG4gICAgICAgIGlmIChhc3NldCkge1xyXG4gICAgICAgICAgICB0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uKFwibWFya2V0XCIsIGFzc2V0LmdldChcInN5bWJvbFwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vbkNvcmVSYXRlQ2hhbmdlKHR5cGUsIGUpIHtcclxuICAgICAgICBsZXQgYW1vdW50LCBhc3NldDtcclxuICAgICAgICBpZiAodHlwZSA9PT0gXCJxdW90ZVwiKSB7XHJcbiAgICAgICAgICAgIGFtb3VudCA9IHV0aWxzLmxpbWl0QnlQcmVjaXNpb24oXHJcbiAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSxcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudXBkYXRlLnByZWNpc2lvblxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBhc3NldCA9IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCFlIHx8ICEoXCJhbW91bnRcIiBpbiBlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFtb3VudCA9XHJcbiAgICAgICAgICAgICAgICBlLmFtb3VudCA9PSBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgPyBcIjBcIlxyXG4gICAgICAgICAgICAgICAgICAgIDogdXRpbHMubGltaXRCeVByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBlLmFtb3VudC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgXCJcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jb3JlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgYXNzZXQgPSBlLmFzc2V0LmdldChcImlkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHtjb3JlX2V4Y2hhbmdlX3JhdGV9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVbdHlwZV0gPSB7XHJcbiAgICAgICAgICAgIGFtb3VudDogYW1vdW50LFxyXG4gICAgICAgICAgICBhc3NldF9pZDogYXNzZXRcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Ub2dnbGVCaXRBc3NldCgpIHtcclxuICAgICAgICBsZXQge3VwZGF0ZX0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIHRoaXMuc3RhdGUuaXNCaXRBc3NldCA9ICF0aGlzLnN0YXRlLmlzQml0QXNzZXQ7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmlzQml0QXNzZXQpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc19wcmVkaWN0aW9uX21hcmtldCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHtmbGFnQm9vbGVhbnMsIHBlcm1pc3Npb25Cb29sZWFuc30gPSB0aGlzLl9nZXRQZXJtaXNzaW9ucyhcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5mbGFnQm9vbGVhbnMgPSBmbGFnQm9vbGVhbnM7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5wZXJtaXNzaW9uQm9vbGVhbnMgPSBwZXJtaXNzaW9uQm9vbGVhbnM7XHJcblxyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Ub2dnbGVQTSgpIHtcclxuICAgICAgICB0aGlzLnN0YXRlLmlzX3ByZWRpY3Rpb25fbWFya2V0ID0gIXRoaXMuc3RhdGUuaXNfcHJlZGljdGlvbl9tYXJrZXQ7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS51cGRhdGUucHJlY2lzaW9uID0gdGhpcy5wcm9wcy5jb3JlLmdldChcInByZWNpc2lvblwiKTtcclxuICAgICAgICB0aGlzLnN0YXRlLmNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFzc2V0X2lkID0gdGhpcy5wcm9wcy5jb3JlLmdldChcImlkXCIpO1xyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtnbG9iYWxPYmplY3QsIGNvcmV9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICBlcnJvcnMsXHJcbiAgICAgICAgICAgIGlzVmFsaWQsXHJcbiAgICAgICAgICAgIHVwZGF0ZSxcclxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZSxcclxuICAgICAgICAgICAgaXNfcHJlZGljdGlvbl9tYXJrZXQsXHJcbiAgICAgICAgICAgIGlzQml0QXNzZXQsXHJcbiAgICAgICAgICAgIGJpdGFzc2V0X29wdHNcclxuICAgICAgICB9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgLy8gRXN0aW1hdGUgdGhlIGFzc2V0IGNyZWF0aW9uIGZlZSBmcm9tIHRoZSBzeW1ib2wgY2hhcmFjdGVyIGxlbmd0aFxyXG4gICAgICAgIGxldCBzeW1ib2xMZW5ndGggPSB1cGRhdGUuc3ltYm9sLmxlbmd0aCxcclxuICAgICAgICAgICAgY3JlYXRlRmVlID0gXCJOL0FcIjtcclxuXHJcbiAgICAgICAgaWYgKHN5bWJvbExlbmd0aCA9PT0gMykge1xyXG4gICAgICAgICAgICBjcmVhdGVGZWUgPSAoXHJcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2VzdGltYXRlRmVlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImFzc2V0X2NyZWF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbXCJzeW1ib2wzXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxPYmplY3RcclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcIjEuMy4wXCJ9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc3ltYm9sTGVuZ3RoID09PSA0KSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZUZlZSA9IChcclxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudD17ZXN0aW1hdGVGZWUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfY3JlYXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcInN5bWJvbDRcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbE9iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e1wiMS4zLjBcIn1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzeW1ib2xMZW5ndGggPiA0KSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZUZlZSA9IChcclxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudD17ZXN0aW1hdGVGZWUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfY3JlYXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcImxvbmdfc3ltYm9sXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxPYmplY3RcclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcIjEuMy4wXCJ9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTG9vcCBvdmVyIGZsYWdzXHJcbiAgICAgICAgbGV0IGZsYWdzID0gW107XHJcbiAgICAgICAgbGV0IGdldEZsYWcgPSAoa2V5LCBvbkNsaWNrLCBpc0NoZWNrZWQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDx0YWJsZSBrZXk9e1widGFibGVfXCIgKyBrZXl9IGNsYXNzTmFtZT1cInRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwiLCB3aWR0aDogXCI4MCVcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17YGFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLiR7a2V5fWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiBcIm5vbmVcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic3dpdGNoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5Cb3R0b206IFwiMTBweFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2lzQ2hlY2tlZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHBlcm1pc3Npb25Cb29sZWFucykge1xyXG4gICAgICAgICAgICBpZiAocGVybWlzc2lvbkJvb2xlYW5zW2tleV0gJiYga2V5ICE9PSBcImNoYXJnZV9tYXJrZXRfZmVlXCIpIHtcclxuICAgICAgICAgICAgICAgIGZsYWdzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0RmxhZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkZsYWdDaGFuZ2UuYmluZCh0aGlzLCBrZXkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnQm9vbGVhbnNba2V5XVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZsYWdzLnB1c2goXHJcbiAgICAgICAgICAgIGdldEZsYWcoXHJcbiAgICAgICAgICAgICAgICBcInZpc2libGVcIixcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24uYmluZCh0aGlzLCBcInZpc2libGVcIiksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb24udmlzaWJsZVxyXG4gICAgICAgICAgICAgICAgICAgID8gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICA6IHVwZGF0ZS5kZXNjcmlwdGlvbi52aXNpYmxlID09PSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gTG9vcCBvdmVyIHBlcm1pc3Npb25zXHJcbiAgICAgICAgbGV0IHBlcm1pc3Npb25zID0gW107XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHBlcm1pc3Npb25Cb29sZWFucykge1xyXG4gICAgICAgICAgICBwZXJtaXNzaW9ucy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgPHRhYmxlIGtleT17XCJ0YWJsZV9cIiArIGtleX0gY2xhc3NOYW1lPVwidGFibGVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e2JvcmRlcjogXCJub25lXCIsIHdpZHRoOiBcIjgwJVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtgYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuJHtrZXl9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzd2l0Y2hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbkJvdHRvbTogXCIxMHB4XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblBlcm1pc3Npb25DaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3Blcm1pc3Npb25Cb29sZWFuc1trZXldfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHt9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjb25maXJtQnV0dG9ucyA9IChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3Jlc2V0LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQucGVybS5yZXNldFwiKX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucmVzZXRcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKFwiYnV0dG9uXCIsIHtkaXNhYmxlZDogIWlzVmFsaWR9KX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9jcmVhdGVBc3NldC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImhlYWRlci5jcmVhdGVfYXNzZXRcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLWNvbnRhaW5lciBnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiaGVhZGVyLmNyZWF0ZV9hc3NldFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwiY3JlYXRlQXNzZXRUYWJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWNjb3VudC10YWJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNDbGFzcz1cImFjY291bnQtb3ZlcnZpZXcgbm8tcGFkZGluZyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50Q2xhc3M9XCJncmlkLWJsb2NrIHNocmluayBzbWFsbC12ZXJ0aWNhbCBtZWRpdW0taG9yaXpvbnRhbCBwYWRkaW5nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b25zPXtjb25maXJtQnV0dG9uc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnByaW1hcnlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5zeW1ib2xcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt1cGRhdGUuc3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZUlucHV0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3ltYm9sXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5zeW1ib2wgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5zeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWF4X3N1cHBseVwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3VwZGF0ZS5zeW1ib2wgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+KHt1cGRhdGUuc3ltYm9sfSk8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dXBkYXRlLm1heF9zdXBwbHl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXhfc3VwcGx5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfc3VwcGx5ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMubWF4X3N1cHBseX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5kZWNpbWFsc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW49XCIwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg9XCI4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwPVwiMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInJhbmdlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dXBkYXRlLnByZWNpc2lvbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVJbnB1dC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInByZWNpc2lvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPnt1cGRhdGUucHJlY2lzaW9ufTwvcD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luQm90dG9tOiAxMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0eHRsYWJlbCBjYW5jZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wcmVjaXNpb25fd2FybmluZ1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiBcImluaGVyaXRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e2JvcmRlcjogXCJub25lXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tcGFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e2JvcmRlcjogXCJub25lXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzd2l0Y2hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogXCIxMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uVG9nZ2xlQml0QXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2lzQml0QXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lzQml0QXNzZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCJpbmhlcml0XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2JvcmRlcjogXCJub25lXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic3dpdGNoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjEwcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblRvZ2dsZVBNLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19wcmVkaWN0aW9uX21hcmtldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIENFUiAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiaDNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmNvcmVfZXhjaGFuZ2VfcmF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tbWFyZ2luXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5xdW90ZV9hc3NldCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5xdW90ZV9hc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMuYmFzZV9hc3NldCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5iYXNlX2Fzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpbiBzbWFsbC0xMiBtZWRpdW0tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhbW91bnQtc2VsZWN0b3JcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBcIjEwcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMucXVvdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5saW5lLWxhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25Db3JlUmF0ZUNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicXVvdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucXVvdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1tYXJnaW4gc21hbGwtMTIgbWVkaXVtLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFtb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmJhc2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25Db3JlUmF0ZUNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLmJhc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFzc2V0X2lkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHM9e1tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiBcIjEwcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnByaWNlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3V0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuZ2V0X2Fzc2V0X3ByaWNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5xdW90ZS5hbW91bnQgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucHJlY2lzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVjaXNpb246XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLnByZWNpc2lvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYXNlLmFtb3VudCAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocGFyc2VJbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucHJlY2lzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB8fCA4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1cGRhdGUuc3ltYm9sfS9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb3JlLmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY2VyX3dhcm5pbmdfMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwibGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhhcy1lcnJvclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5jZXJfd2FybmluZ18yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5hcHByb3hfZmVlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHtjcmVhdGVGZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5kZXNjcmlwdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5kZXNjcmlwdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7aGVpZ2h0OiBcIjdyZW1cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz1cIjFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt1cGRhdGUuZGVzY3JpcHRpb24ubWFpbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVEZXNjcmlwdGlvbi5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1haW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwibGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnNob3J0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvbi5zaG9ydF9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2hvcnRfbmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJsYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWFya2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25JbnB1dE1hcmtldC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17dGhpcy5zdGF0ZS5tYXJrZXRJbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0SW5wdXQ9e3RoaXMuc3RhdGUubWFya2V0SW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IFwiMTBweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Gb3VuZD17dGhpcy5fb25Gb3VuZE1hcmtldEFzc2V0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc19wcmVkaWN0aW9uX21hcmtldCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5jb25kaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmRpdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29uZGl0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5leHBpcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJkYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmV4cGlyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhwaXJ5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0JpdEFzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5iaXRhc3NldF9vcHRzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCaXRBc3NldE9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHM9e2JpdGFzc2V0X29wdHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZT17dGhpcy5vbkNoYW5nZUJpdEFzc2V0T3B0cy5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNraW5nQXNzZXQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHMuc2hvcnRfYmFja2luZ19hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRQcmVjaXNpb249e3VwZGF0ZS5wcmVjaXNpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldFN5bWJvbD17dXBkYXRlLnN5bWJvbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUHJlZGljdGlvbk1hcmtldD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcHJlZGljdGlvbl9tYXJrZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnBlcm1pc3Npb25zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e21heFdpZHRoOiA4MDB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIZWxwQ29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbXBvbmVudHMvQWNjb3VudEFzc2V0Q3JlYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbj1cInBlcm1pc3Npb25zXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cGVybWlzc2lvbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZmxhZ3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7bWF4V2lkdGg6IDgwMH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEhlbHBDb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29tcG9uZW50cy9BY2NvdW50QXNzZXRDcmVhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uPVwiZmxhZ3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwZXJtaXNzaW9uQm9vbGVhbnNbXCJjaGFyZ2VfbWFya2V0X2ZlZVwiXSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXJrZXRfZmVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiODAlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmNoYXJnZV9tYXJrZXRfZmVlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzd2l0Y2hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiMTBweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25GbGFnQ2hhbmdlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNoYXJnZV9tYXJrZXRfZmVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdCb29sZWFucy5jaGFyZ2VfbWFya2V0X2ZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhZmxhZ0Jvb2xlYW5zLmNoYXJnZV9tYXJrZXRfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWFya2V0X2ZlZVwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5tYXJrZXRfZmVlX3BlcmNlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXJrZXRfZmVlX3BlcmNlbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWF4X21hcmtldF9mZWVcIiAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh7dXBkYXRlLnN5bWJvbH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5tYXhfbWFya2V0X2ZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVJbnB1dC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1heF9tYXJrZXRfZmVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfbWFya2V0X2ZlZSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBoYXMtZXJyb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLm1heF9tYXJrZXRfZmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZsYWdzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZsYWdzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5BY2NvdW50QXNzZXRDcmVhdGUgPSBCaW5kVG9DaGFpblN0YXRlKEFjY291bnRBc3NldENyZWF0ZSk7XHJcblxyXG5leHBvcnQge0FjY291bnRBc3NldENyZWF0ZSwgQml0QXNzZXRPcHRpb25zfTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XHJcbmltcG9ydCBBc3NldEFjdGlvbnMgZnJvbSBcImFjdGlvbnMvQXNzZXRBY3Rpb25zXCI7XHJcbmltcG9ydCBIZWxwQ29udGVudCBmcm9tIFwiLi4vVXRpbGl0eS9IZWxwQ29udGVudFwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgRm9ybWF0dGVkRmVlIGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZEZlZVwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgQXNzZXRXcmFwcGVyIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0V3JhcHBlclwiO1xyXG5pbXBvcnQgQW1vdW50U2VsZWN0b3IgZnJvbSBcIi4uL1V0aWxpdHkvQW1vdW50U2VsZWN0b3JcIjtcclxuaW1wb3J0IEZvcm1hdHRlZFByaWNlIGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZFByaWNlXCI7XHJcbmltcG9ydCBBc3NldFNlbGVjdG9yIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0U2VsZWN0b3JcIjtcclxuaW1wb3J0IGJpZyBmcm9tIFwiYmlnbnVtYmVyLmpzXCI7XHJcbmltcG9ydCBjbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcclxuaW1wb3J0IGFzc2V0VXRpbHMgZnJvbSBcImNvbW1vbi9hc3NldF91dGlsc1wiO1xyXG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xyXG5pbXBvcnQge0JpdEFzc2V0T3B0aW9uc30gZnJvbSBcIi4vQWNjb3VudEFzc2V0Q3JlYXRlXCI7XHJcbmltcG9ydCBhc3NldENvbnN0YW50cyBmcm9tIFwiY2hhaW4vYXNzZXRfY29uc3RhbnRzXCI7XHJcbmltcG9ydCBBc3NldFdoaXRlbGlzdCBmcm9tIFwiLi9Bc3NldFdoaXRlbGlzdFwiO1xyXG5pbXBvcnQgQXNzZXRGZWVkUHJvZHVjZXJzIGZyb20gXCIuL0Fzc2V0RmVlZFByb2R1Y2Vyc1wiO1xyXG5pbXBvcnQgQmFzZU1vZGFsIGZyb20gXCJjb21wb25lbnRzL01vZGFsL0Jhc2VNb2RhbFwiO1xyXG5pbXBvcnQgWmZBcGkgZnJvbSBcInJlYWN0LWZvdW5kYXRpb24tYXBwcy9zcmMvdXRpbHMvZm91bmRhdGlvbi1hcGlcIjtcclxuaW1wb3J0IHt3aXRoUm91dGVyfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5cclxubGV0IEdSQVBIRU5FX01BWF9TSEFSRV9TVVBQTFkgPSBuZXcgYmlnKFxyXG4gICAgYXNzZXRDb25zdGFudHMuR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWVxyXG4pO1xyXG5cclxuY2xhc3MgQWNjb3VudEFzc2V0VXBkYXRlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBnbG9iYWxPYmplY3Q6IFwiMi4wLjBcIlxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMucmVzZXRTdGF0ZShwcm9wcyk7XHJcbiAgICB9XHJcblxyXG4gICAgX29wZW5Db25maXJtKCkge1xyXG4gICAgICAgIHRoaXMucmVmcy5jb25maXJtX21vZGFsLnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICBfY2FuY2VsQ29uZmlybSgpIHtcclxuICAgICAgICB0aGlzLnJlZnMuY29uZmlybV9tb2RhbC5vbkNsb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRTdGF0ZShwcm9wcykge1xyXG4gICAgICAgIGxldCBhc3NldCA9IHByb3BzLmFzc2V0LnRvSlMoKTtcclxuICAgICAgICBsZXQgaXNCaXRBc3NldCA9IGFzc2V0LmJpdGFzc2V0X2RhdGFfaWQgIT09IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihhc3NldC5wcmVjaXNpb24pO1xyXG4gICAgICAgIGxldCBjb3JlUHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihcclxuICAgICAgICAgICAgcHJvcHMuY29yZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBsZXQgbWF4X21hcmtldF9mZWUgPSBuZXcgYmlnKGFzc2V0Lm9wdGlvbnMubWF4X21hcmtldF9mZWUpXHJcbiAgICAgICAgICAgIC5kaXYocHJlY2lzaW9uKVxyXG4gICAgICAgICAgICAudG9TdHJpbmcoKTtcclxuICAgICAgICBsZXQgbWF4X3N1cHBseSA9IG5ldyBiaWcoYXNzZXQub3B0aW9ucy5tYXhfc3VwcGx5KVxyXG4gICAgICAgICAgICAuZGl2KHByZWNpc2lvbilcclxuICAgICAgICAgICAgLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgbGV0IGNvcmVfZXhjaGFuZ2VfcmF0ZSA9IGFzc2V0Lm9wdGlvbnMuY29yZV9leGNoYW5nZV9yYXRlO1xyXG4gICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZS5hbW91bnQgPVxyXG4gICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGUuYXNzZXRfaWQgPT09IGFzc2V0LmlkXHJcbiAgICAgICAgICAgICAgICA/IG5ldyBiaWcoY29yZV9leGNoYW5nZV9yYXRlLnF1b3RlLmFtb3VudClcclxuICAgICAgICAgICAgICAgICAgICAgIC5kaXYocHJlY2lzaW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgIDogbmV3IGJpZyhjb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGUuYW1vdW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgLmRpdihjb3JlUHJlY2lzaW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFtb3VudCA9XHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFzc2V0X2lkID09PSBhc3NldC5pZFxyXG4gICAgICAgICAgICAgICAgPyBuZXcgYmlnKGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFtb3VudClcclxuICAgICAgICAgICAgICAgICAgICAgIC5kaXYocHJlY2lzaW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgIDogbmV3IGJpZyhjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZS5hbW91bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAuZGl2KGNvcmVQcmVjaXNpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgbGV0IGZsYWdCb29sZWFucyA9IGFzc2V0VXRpbHMuZ2V0RmxhZ0Jvb2xlYW5zKFxyXG4gICAgICAgICAgICBhc3NldC5vcHRpb25zLmZsYWdzLFxyXG4gICAgICAgICAgICBpc0JpdEFzc2V0XHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgcGVybWlzc2lvbkJvb2xlYW5zID0gYXNzZXRVdGlscy5nZXRGbGFnQm9vbGVhbnMoXHJcbiAgICAgICAgICAgIGFzc2V0Lm9wdGlvbnMuaXNzdWVyX3Blcm1pc3Npb25zLFxyXG4gICAgICAgICAgICBpc0JpdEFzc2V0XHJcbiAgICAgICAgKTtcclxuICAgICAgICBhc3NldC5vcHRpb25zLm1hcmtldF9mZWVfcGVyY2VudCAvPSAxMDA7XHJcblxyXG4gICAgICAgIGxldCBjb3JlUmF0ZVF1b3RlQXNzZXROYW1lID0gQ2hhaW5TdG9yZS5nZXRBc3NldChcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLnF1b3RlLmFzc2V0X2lkXHJcbiAgICAgICAgKS5nZXQoXCJzeW1ib2xcIik7XHJcbiAgICAgICAgbGV0IGNvcmVSYXRlQmFzZUFzc2V0TmFtZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQoXHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFzc2V0X2lkXHJcbiAgICAgICAgKS5nZXQoXCJzeW1ib2xcIik7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVwZGF0ZToge1xyXG4gICAgICAgICAgICAgICAgbWF4X3N1cHBseTogbWF4X3N1cHBseSxcclxuICAgICAgICAgICAgICAgIG1heF9tYXJrZXRfZmVlOiBtYXhfbWFya2V0X2ZlZSxcclxuICAgICAgICAgICAgICAgIG1hcmtldF9mZWVfcGVyY2VudDogYXNzZXQub3B0aW9ucy5tYXJrZXRfZmVlX3BlcmNlbnQsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYXNzZXRVdGlscy5wYXJzZURlc2NyaXB0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0Lm9wdGlvbnMuZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlOiBjb3JlX2V4Y2hhbmdlX3JhdGUsXHJcbiAgICAgICAgICAgIGlzc3VlcjogYXNzZXQuaXNzdWVyLFxyXG4gICAgICAgICAgICBuZXdfaXNzdWVyX2FjY291bnRfaWQ6IG51bGwsXHJcbiAgICAgICAgICAgIG5ld19mdW5kZXJfYWNjb3VudDogcHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgYXNzZXRfdG9fdXBkYXRlOiBhc3NldC5pZCxcclxuICAgICAgICAgICAgZXJyb3JzOiB7XHJcbiAgICAgICAgICAgICAgICBtYXhfc3VwcGx5OiBudWxsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG5ld19hdXRob3JpdHlfaWQ6IG51bGwsXHJcbiAgICAgICAgICAgIGF1dGhvcml0eV9uYW1lOiBudWxsLFxyXG4gICAgICAgICAgICBpc1ZhbGlkOiB0cnVlLFxyXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnM6IGZsYWdCb29sZWFucyxcclxuICAgICAgICAgICAgcGVybWlzc2lvbkJvb2xlYW5zOiBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGlzQml0QXNzZXQ6IGlzQml0QXNzZXQsXHJcbiAgICAgICAgICAgIGNvcmVSYXRlUXVvdGVBc3NldE5hbWU6IGNvcmVSYXRlUXVvdGVBc3NldE5hbWUsXHJcbiAgICAgICAgICAgIHF1b3RlQXNzZXRJbnB1dDogY29yZVJhdGVRdW90ZUFzc2V0TmFtZSxcclxuICAgICAgICAgICAgY29yZVJhdGVCYXNlQXNzZXROYW1lOiBjb3JlUmF0ZUJhc2VBc3NldE5hbWUsXHJcbiAgICAgICAgICAgIGJhc2VBc3NldElucHV0OiBjb3JlUmF0ZUJhc2VBc3NldE5hbWUsXHJcbiAgICAgICAgICAgIGNsYWltRmVlc0Ftb3VudDogMCxcclxuICAgICAgICAgICAgYml0YXNzZXRfb3B0czogaXNCaXRBc3NldCA/IGFzc2V0LmJpdGFzc2V0Lm9wdGlvbnMgOiBudWxsLFxyXG4gICAgICAgICAgICBvcmlnaW5hbF9iaXRhc3NldF9vcHRzOiBpc0JpdEFzc2V0XHJcbiAgICAgICAgICAgICAgICA/IHByb3BzLmFzc2V0LmdldEluKFtcImJpdGFzc2V0XCIsIFwib3B0aW9uc1wiXSkudG9KUygpXHJcbiAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgIG1hcmtldElucHV0OiBcIlwiLFxyXG4gICAgICAgICAgICB3aGl0ZWxpc3RfYXV0aG9yaXRpZXM6IHByb3BzLmFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgIFwib3B0aW9uc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJ3aGl0ZWxpc3RfYXV0aG9yaXRpZXNcIlxyXG4gICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgYmxhY2tsaXN0X2F1dGhvcml0aWVzOiBwcm9wcy5hc3NldC5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcclxuICAgICAgICAgICAgICAgIFwiYmxhY2tsaXN0X2F1dGhvcml0aWVzXCJcclxuICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgIHdoaXRlbGlzdF9tYXJrZXRzOiBwcm9wcy5hc3NldC5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcclxuICAgICAgICAgICAgICAgIFwid2hpdGVsaXN0X21hcmtldHNcIlxyXG4gICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgYmxhY2tsaXN0X21hcmtldHM6IHByb3BzLmFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgIFwib3B0aW9uc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJibGFja2xpc3RfbWFya2V0c1wiXHJcbiAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICBtYXhGZWVkUHJvZHVjZXJzOiBwcm9wcy5nbG9iYWxPYmplY3QuZ2V0SW4oW1xyXG4gICAgICAgICAgICAgICAgXCJwYXJhbWV0ZXJzXCIsXHJcbiAgICAgICAgICAgICAgICBcIm1heGltdW1fYXNzZXRfZmVlZF9wdWJsaXNoZXJzXCJcclxuICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgIGZlZWRQcm9kdWNlcnM6IGlzQml0QXNzZXRcclxuICAgICAgICAgICAgICAgID8gcHJvcHMuYXNzZXQuZ2V0SW4oW1wiYml0YXNzZXRcIiwgXCJmZWVkc1wiXSwgW10pLm1hcChhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsRmVlZFByb2R1Y2VyczogaXNCaXRBc3NldFxyXG4gICAgICAgICAgICAgICAgPyBwcm9wcy5hc3NldC5nZXRJbihbXCJiaXRhc3NldFwiLCBcImZlZWRzXCJdLCBbXSkubWFwKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIDogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXNpbmcgSlNPTi5zdHJpbmdpZnkgZm9yIChmYXN0PykgY29tcGFyc2lvbiwgY291bGQgYmUgaW1wcm92ZWQsIGJ1dCBzZWVtcyBlbm91Z2ggaGVyZSBhcyB0aGUgb3JkZXIgaXMgZml4ZWRcclxuICAgIGFzc2V0Q2hhbmdlZCgpIHtcclxuICAgICAgICBsZXQgcyA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHAgPSB0aGlzLnJlc2V0U3RhdGUodGhpcy5wcm9wcyk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy51cGRhdGUpICE9PSBKU09OLnN0cmluZ2lmeShwLnVwZGF0ZSkgfHxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy5jb3JlX2V4Y2hhbmdlX3JhdGUpICE9PVxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC5jb3JlX2V4Y2hhbmdlX3JhdGUpIHx8XHJcbiAgICAgICAgICAgIChzLm5ld19pc3N1ZXJfYWNjb3VudF9pZCAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgcy5uZXdfaXNzdWVyX2FjY291bnRfaWQgIT09IHMuaXNzdWVyKSB8fFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLmZsYWdCb29sZWFucykgIT09IEpTT04uc3RyaW5naWZ5KHAuZmxhZ0Jvb2xlYW5zKSB8fFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLnBlcm1pc3Npb25Cb29sZWFucykgIT09XHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLnBlcm1pc3Npb25Cb29sZWFucykgfHxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy53aGl0ZWxpc3RfYXV0aG9yaXRpZXMpICE9PVxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC53aGl0ZWxpc3RfYXV0aG9yaXRpZXMpIHx8XHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMuYmxhY2tsaXN0X2F1dGhvcml0aWVzKSAhPT1cclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAuYmxhY2tsaXN0X2F1dGhvcml0aWVzKSB8fFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLndoaXRlbGlzdF9tYXJrZXRzKSAhPT1cclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAud2hpdGVsaXN0X21hcmtldHMpIHx8XHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMuYmxhY2tsaXN0X21hcmtldHMpICE9PVxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC5ibGFja2xpc3RfbWFya2V0cylcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0YWIgSUQgb24gY2hhbmdlXHJcbiAgICB0YWJDaGFuZ2VkKHRhYklkKSB7XHJcbiAgICAgICAgbGV0IHRhYnNDaGFuZ2VkID0gdGhpcy50YWJzQ2hhbmdlZCgpO1xyXG4gICAgICAgIHJldHVybiB0YWJzQ2hhbmdlZFt0YWJJZF0gPyB0YWJzQ2hhbmdlZFt0YWJJZF0gOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB0YWJzQ2hhbmdlZCgpIHtcclxuICAgICAgICBsZXQgcyA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHAgPSB0aGlzLnJlc2V0U3RhdGUodGhpcy5wcm9wcyk7XHJcblxyXG4gICAgICAgIGxldCB0YWJVcGRhdGVJbmRleCA9IFtdO1xyXG5cclxuICAgICAgICAvKiBQcmltYXJ5ICovXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBzLnVwZGF0ZS5tYXhfc3VwcGx5ICE9PSBwLnVwZGF0ZS5tYXhfc3VwcGx5IHx8XHJcbiAgICAgICAgICAgIHMuY29yZV9leGNoYW5nZV9yYXRlLmJhc2UuYW1vdW50ICE9PVxyXG4gICAgICAgICAgICAgICAgcC5jb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZS5hbW91bnQgfHxcclxuICAgICAgICAgICAgcy5jb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGUuYW1vdW50ICE9PVxyXG4gICAgICAgICAgICAgICAgcC5jb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGUuYW1vdW50XHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICB0YWJVcGRhdGVJbmRleFtcIjBcIl0gPSB0cnVlO1xyXG5cclxuICAgICAgICAvKiBXaGl0ZWxpc3QgKi9cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMud2hpdGVsaXN0X2F1dGhvcml0aWVzKSAhPT1cclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAud2hpdGVsaXN0X2F1dGhvcml0aWVzKSB8fFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLmJsYWNrbGlzdF9hdXRob3JpdGllcykgIT09XHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLmJsYWNrbGlzdF9hdXRob3JpdGllcykgfHxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy53aGl0ZWxpc3RfbWFya2V0cykgIT09XHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLndoaXRlbGlzdF9tYXJrZXRzKSB8fFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLmJsYWNrbGlzdF9tYXJrZXRzKSAhPT1cclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAuYmxhY2tsaXN0X21hcmtldHMpXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICB0YWJVcGRhdGVJbmRleFtcIjFcIl0gPSB0cnVlO1xyXG5cclxuICAgICAgICAvKiBEZXNjcmlwdGlvbiAqL1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgcy51cGRhdGUuZGVzY3JpcHRpb24ubWFpbiAhPT0gcC51cGRhdGUuZGVzY3JpcHRpb24ubWFpbiB8fFxyXG4gICAgICAgICAgICBzLnVwZGF0ZS5kZXNjcmlwdGlvbi5zaG9ydF9uYW1lICE9PVxyXG4gICAgICAgICAgICAgICAgcC51cGRhdGUuZGVzY3JpcHRpb24uc2hvcnRfbmFtZSB8fFxyXG4gICAgICAgICAgICBzLnVwZGF0ZS5kZXNjcmlwdGlvbi5tYXJrZXQgIT09IHAudXBkYXRlLmRlc2NyaXB0aW9uLm1hcmtldFxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgdGFiVXBkYXRlSW5kZXhbXCIyXCJdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLyogQml0YXNzZXQgb3B0aW9ucyAqL1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy5iaXRhc3NldF9vcHRzKSAhPT1cclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC5vcmlnaW5hbF9iaXRhc3NldF9vcHRzKVxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgdGFiVXBkYXRlSW5kZXhbXCIzXCJdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLyogUGVybWlzc2lvbnMgKi9cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMucGVybWlzc2lvbkJvb2xlYW5zKSAhPT1cclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC5wZXJtaXNzaW9uQm9vbGVhbnMpXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICB0YWJVcGRhdGVJbmRleFtcIjRcIl0gPSB0cnVlO1xyXG5cclxuICAgICAgICAvKiBGbGFncyAqL1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy5mbGFnQm9vbGVhbnMpICE9PSBKU09OLnN0cmluZ2lmeShwLmZsYWdCb29sZWFucykgfHxcclxuICAgICAgICAgICAgcy51cGRhdGUubWFya2V0X2ZlZV9wZXJjZW50ICE9PSBwLnVwZGF0ZS5tYXJrZXRfZmVlX3BlcmNlbnQgfHxcclxuICAgICAgICAgICAgcy51cGRhdGUubWF4X21hcmtldF9mZWUgIT09IHAudXBkYXRlLm1heF9tYXJrZXRfZmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICB0YWJVcGRhdGVJbmRleFtcIjVcIl0gPSB0cnVlO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMuZmVlZFByb2R1Y2VycykgIT09XHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAub3JpZ2luYWxGZWVkUHJvZHVjZXJzKVxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgdGFiVXBkYXRlSW5kZXhbXCI2XCJdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRhYlVwZGF0ZUluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHBhZ2VDaGFuZ2VkKCkge1xyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIGlzQml0QXNzZXQsXHJcbiAgICAgICAgICAgIGJpdGFzc2V0X29wdHMsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsX2JpdGFzc2V0X29wdHMsXHJcbiAgICAgICAgICAgIGZlZWRQcm9kdWNlcnMsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsRmVlZFByb2R1Y2Vyc1xyXG4gICAgICAgIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHRoaXMuYXNzZXRDaGFuZ2VkKCkgfHxcclxuICAgICAgICAgICAgKGlzQml0QXNzZXQgJiZcclxuICAgICAgICAgICAgICAgIChKU09OLnN0cmluZ2lmeShiaXRhc3NldF9vcHRzKSAhPT1cclxuICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShvcmlnaW5hbF9iaXRhc3NldF9vcHRzKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmVlZFByb2R1Y2Vycy50b0pTKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRmVlZFByb2R1Y2Vycy50b0pTKClcclxuICAgICAgICAgICAgICAgICAgICApKSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIF91cGRhdGVBc3NldChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAvLyBDbG9zZSBjb25maXJtX21vZGFsIGlmIGl0J3Mgb3BlblxyXG4gICAgICAgIHRoaXMucmVmcy5jb25maXJtX21vZGFsLm9uQ2xvc2UoKTtcclxuXHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgdXBkYXRlLFxyXG4gICAgICAgICAgICBpc3N1ZXIsXHJcbiAgICAgICAgICAgIG5ld19pc3N1ZXJfYWNjb3VudF9pZCxcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLFxyXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb29sZWFucyxcclxuICAgICAgICAgICAgaXNCaXRBc3NldCxcclxuICAgICAgICAgICAgYml0YXNzZXRfb3B0cyxcclxuICAgICAgICAgICAgb3JpZ2luYWxfYml0YXNzZXRfb3B0cyxcclxuICAgICAgICAgICAgZmVlZFByb2R1Y2VycyxcclxuICAgICAgICAgICAgb3JpZ2luYWxGZWVkUHJvZHVjZXJzXHJcbiAgICAgICAgfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIGxldCBmbGFncyA9IGFzc2V0VXRpbHMuZ2V0RmxhZ3MoZmxhZ0Jvb2xlYW5zKTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIGluY29ycmVjdCBmbGFnIGZyb20gZ2VuZXNpc1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXRJbihbXCJvcHRpb25zXCIsIFwiZmxhZ3NcIl0pICYgMTI4ICYmXHJcbiAgICAgICAgICAgICEodGhpcy5wcm9wcy5hc3NldC5nZXRJbihbXCJvcHRpb25zXCIsIFwiaXNzdWVyX3Blcm1pc3Npb25zXCJdKSAmIDEyOClcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgZmxhZ3MgKz0gMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcGVybWlzc2lvbnMgPSBhc3NldFV0aWxzLmdldFBlcm1pc3Npb25zKFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGlzQml0QXNzZXRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5tYXJrZXRJbnB1dCAhPT0gdXBkYXRlLmRlc2NyaXB0aW9uLm1hcmtldCkge1xyXG4gICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb24ubWFya2V0ID0gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gSlNPTi5zdHJpbmdpZnkodXBkYXRlLmRlc2NyaXB0aW9uKTtcclxuXHJcbiAgICAgICAgbGV0IGF1dGhzID0ge1xyXG4gICAgICAgICAgICB3aGl0ZWxpc3RfYXV0aG9yaXRpZXM6IHRoaXMuc3RhdGUud2hpdGVsaXN0X2F1dGhvcml0aWVzLFxyXG4gICAgICAgICAgICBibGFja2xpc3RfYXV0aG9yaXRpZXM6IHRoaXMuc3RhdGUuYmxhY2tsaXN0X2F1dGhvcml0aWVzLFxyXG4gICAgICAgICAgICB3aGl0ZWxpc3RfbWFya2V0czogdGhpcy5zdGF0ZS53aGl0ZWxpc3RfbWFya2V0cyxcclxuICAgICAgICAgICAgYmxhY2tsaXN0X21hcmtldHM6IHRoaXMuc3RhdGUuYmxhY2tsaXN0X21hcmtldHNcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgZmVlZFByb2R1Y2Vyc0pTID0gaXNCaXRBc3NldCA/IGZlZWRQcm9kdWNlcnMudG9KUygpIDogbnVsbDtcclxuICAgICAgICBsZXQgb3JpZ2luYWxGZWVkUHJvZHVjZXJzSlMgPSBpc0JpdEFzc2V0XHJcbiAgICAgICAgICAgID8gb3JpZ2luYWxGZWVkUHJvZHVjZXJzLnRvSlMoKVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcblxyXG4gICAgICAgIEFzc2V0QWN0aW9ucy51cGRhdGVBc3NldChcclxuICAgICAgICAgICAgaXNzdWVyLFxyXG4gICAgICAgICAgICBuZXdfaXNzdWVyX2FjY291bnRfaWQsXHJcbiAgICAgICAgICAgIHVwZGF0ZSxcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFzc2V0LFxyXG4gICAgICAgICAgICBmbGFncyxcclxuICAgICAgICAgICAgcGVybWlzc2lvbnMsXHJcbiAgICAgICAgICAgIGlzQml0QXNzZXQsXHJcbiAgICAgICAgICAgIGJpdGFzc2V0X29wdHMsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsX2JpdGFzc2V0X29wdHMsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBhdXRocyxcclxuICAgICAgICAgICAgZmVlZFByb2R1Y2Vyc0pTLFxyXG4gICAgICAgICAgICBvcmlnaW5hbEZlZWRQcm9kdWNlcnNKUyxcclxuICAgICAgICAgICAgdGhpcy5hc3NldENoYW5nZWQoKVxyXG4gICAgICAgICkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgICAgICAgXCIuLi4gQXNzZXRBY3Rpb25zLnVwZGF0ZUFzc2V0KGFjY291bnRfaWQsIHVwZGF0ZSlcIixcclxuICAgICAgICAgICAgICAgIGlzc3VlcixcclxuICAgICAgICAgICAgICAgIG5ld19pc3N1ZXJfYWNjb3VudF9pZCxcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldEFzc2V0KHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwiaWRcIikpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnJlc2V0U3RhdGUodGhpcy5wcm9wcykpO1xyXG4gICAgICAgICAgICB9LCAzMDAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVzZXQoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnJlc2V0U3RhdGUodGhpcy5wcm9wcykpO1xyXG4gICAgfVxyXG5cclxuICAgIF9mb3JjZVBvc2l0aXZlKG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KG51bWJlcikgPCAwID8gXCIwXCIgOiBudW1iZXI7XHJcbiAgICB9XHJcblxyXG4gICAgX29uVXBkYXRlRGVzY3JpcHRpb24odmFsdWUsIGUpIHtcclxuICAgICAgICBsZXQge3VwZGF0ZX0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGxldCB1cGRhdGVTdGF0ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIHN3aXRjaCAodmFsdWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImNvbmRpdGlvblwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlLmxlbmd0aCA+IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU3RhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJzaG9ydF9uYW1lXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUubGVuZ3RoID4gMzIpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTdGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV0gPSBlLnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcIm1hcmtldFwiOlxyXG4gICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uW3ZhbHVlXSA9IGU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJ2aXNpYmxlXCI6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gIXVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh1cGRhdGVTdGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRlRWRpdEZpZWxkcyh1cGRhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNoYW5nZUJpdEFzc2V0T3B0cyh2YWx1ZSwgZSkge1xyXG4gICAgICAgIGxldCB7Yml0YXNzZXRfb3B0c30gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJmb3JjZV9zZXR0bGVtZW50X29mZnNldF9wZXJjZW50XCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJtYXhpbXVtX2ZvcmNlX3NldHRsZW1lbnRfdm9sdW1lXCI6XHJcbiAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzW3ZhbHVlXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChlLnRhcmdldC52YWx1ZSkgKlxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0Q29uc3RhbnRzLkdSQVBIRU5FXzFfUEVSQ0VOVDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcImZlZWRfbGlmZXRpbWVfc2VjXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJmb3JjZV9zZXR0bGVtZW50X2RlbGF5X3NlY1wiOlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQocGFyc2VGbG9hdChlLnRhcmdldC52YWx1ZSkgKiA2MCwgMTApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0c1t2YWx1ZV0gPSBwYXJzZUludChcclxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGUudGFyZ2V0LnZhbHVlKSAqIDYwLFxyXG4gICAgICAgICAgICAgICAgICAgIDEwXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwic2hvcnRfYmFja2luZ19hc3NldFwiOlxyXG4gICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0c1t2YWx1ZV0gPSBlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uVXBkYXRlSW5wdXQodmFsdWUsIGUpIHtcclxuICAgICAgICBsZXQge3VwZGF0ZX0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGxldCB1cGRhdGVTdGF0ZSA9IHRydWU7XHJcbiAgICAgICAgbGV0IHByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwibWFya2V0X2ZlZV9wZXJjZW50XCI6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdGhpcy5fZm9yY2VQb3NpdGl2ZShlLnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJtYXhfbWFya2V0X2ZlZVwiOlxyXG4gICAgICAgICAgICAgICAgbGV0IG1hcmtldEZlZSA9IGUuYW1vdW50LnJlcGxhY2UoLywvZywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IGJpZyhtYXJrZXRGZWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aW1lcyhwcmVjaXNpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5ndChHUkFQSEVORV9NQVhfU0hBUkVfU1VQUExZKVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU3RhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4X21hcmtldF9mZWU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJUaGUgbnVtYmVyIHlvdSB0cmllZCB0byBlbnRlciBpcyB0b28gbGFyZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdXRpbHMubGltaXRCeVByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRGZWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJtYXhfc3VwcGx5XCI6XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4U3VwcGx5ID0gZS5hbW91bnQucmVwbGFjZSgvLC9nLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIC8vIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgaWYgKChuZXcgYmlnKG1heFN1cHBseSkpLnRpbWVzKE1hdGgucG93KDEwLCBwcmVjaXNpb24pKS5ndChHUkFQSEVORV9NQVhfU0hBUkVfU1VQUExZKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB1cGRhdGVTdGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7ZXJyb3JzOiB7bWF4X3N1cHBseTogXCJUaGUgbnVtYmVyIHlvdSB0cmllZCB0byBlbnRlciBpcyB0b28gbGFyZ2VcIn19KTtcclxuICAgICAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdXRpbHMubGltaXRCeVByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICBtYXhTdXBwbHksXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAvLyB9IGNhdGNoKGUpIHt9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh1cGRhdGVTdGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHt1cGRhdGU6IHVwZGF0ZX0pO1xyXG4gICAgICAgICAgICB0aGlzLl92YWxpZGF0ZUVkaXRGaWVsZHModXBkYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3ZhbGlkYXRlRWRpdEZpZWxkcyhuZXdfc3RhdGUpIHtcclxuICAgICAgICBsZXQgY2VyID0gbmV3X3N0YXRlLmNvcmVfZXhjaGFuZ2VfcmF0ZTtcclxuICAgICAgICBsZXQgZmVlZFByb2R1Y2VycyA9IG5ld19zdGF0ZS5mZWVkUHJvZHVjZXJzXHJcbiAgICAgICAgICAgID8gbmV3X3N0YXRlLmZlZWRQcm9kdWNlcnNcclxuICAgICAgICAgICAgOiB0aGlzLnN0YXRlLmZlZWRQcm9kdWNlcnM7XHJcbiAgICAgICAgbGV0IGZsYWdCb29sZWFucyA9IHRoaXMuc3RhdGUuZmxhZ0Jvb2xlYW5zO1xyXG4gICAgICAgIGxldCB7YXNzZXQsIGNvcmV9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgbGV0IGVycm9ycyA9IHtcclxuICAgICAgICAgICAgbWF4X3N1cHBseTogbnVsbCxcclxuICAgICAgICAgICAgcXVvdGVfYXNzZXQ6IG51bGwsXHJcbiAgICAgICAgICAgIGJhc2VfYXNzZXQ6IG51bGwsXHJcbiAgICAgICAgICAgIG1heF9mZWVkX3Byb2R1Y2VyOiBudWxsLFxyXG4gICAgICAgICAgICBjb25mbGljdF9wcm9kdWNlcjogbnVsbCxcclxuICAgICAgICAgICAgaW52YWxpZF9tYXJrZXRfcGFpcjogbnVsbFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLnByb3BzLmFzc2V0LmdldChcInByZWNpc2lvblwiKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBlcnJvcnMubWF4X3N1cHBseSA9XHJcbiAgICAgICAgICAgICAgICBuZXdfc3RhdGUubWF4X3N1cHBseSA8PSAwXHJcbiAgICAgICAgICAgICAgICAgICAgPyBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXhfcG9zaXRpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIDogbmV3IGJpZyhwYXJzZUludChuZXdfc3RhdGUubWF4X3N1cHBseSwgMTApKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC50aW1lcyhNYXRoLnBvdygxMCwgcCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmd0KEdSQVBIRU5FX01BWF9TSEFSRV9TVVBQTFkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnRvb19sYXJnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICBlcnJvcnMubWF4X3N1cHBseSA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMudG9vX2xhcmdlXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjZXIpIHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgY2VyLnF1b3RlLmFzc2V0X2lkICE9PSBhc3NldC5nZXQoXCJpZFwiKSAmJlxyXG4gICAgICAgICAgICAgICAgY2VyLmJhc2UuYXNzZXRfaWQgIT09IGFzc2V0LmdldChcImlkXCIpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnF1b3RlX2Fzc2V0ID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubmVlZF9hc3NldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHtuYW1lOiBhc3NldC5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBjZXIucXVvdGUuYXNzZXRfaWQgIT09IGNvcmUuZ2V0KFwiaWRcIikgJiZcclxuICAgICAgICAgICAgICAgIGNlci5iYXNlLmFzc2V0X2lkICE9PSBjb3JlLmdldChcImlkXCIpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLmJhc2VfYXNzZXQgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5uZWVkX2Fzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAge25hbWU6IGNvcmUuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZmVlZFByb2R1Y2Vycykge1xyXG4gICAgICAgICAgICBpZiAoZmVlZFByb2R1Y2Vycy5zaXplID4gdGhpcy5zdGF0ZS5tYXhGZWVkUHJvZHVjZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvcnMubWF4X2ZlZWRfcHJvZHVjZXIgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy50b29fbWFueV9mZWVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAge21heDogdGhpcy5zdGF0ZS5tYXhGZWVkUHJvZHVjZXJzfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGZsYWdCb29sZWFucy5jb21taXR0ZWVfZmVkX2Fzc2V0ICYmXHJcbiAgICAgICAgICAgIGZsYWdCb29sZWFucy53aXRuZXNzX2ZlZF9hc3NldFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBlcnJvcnMuY29uZmxpY3RfcHJvZHVjZXIgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmNvbmZsaWN0X2ZlZWRcIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUubWFya2V0SW5wdXQgPT0gdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJzeW1ib2xcIikpIHtcclxuICAgICAgICAgICAgZXJyb3JzLmludmFsaWRfbWFya2V0X3BhaXIgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmludmFsaWRfbWFya2V0X3BhaXJcIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGlzVmFsaWQgPVxyXG4gICAgICAgICAgICAhZXJyb3JzLmludmFsaWRfbWFya2V0X3BhaXIgJiZcclxuICAgICAgICAgICAgIWVycm9ycy5tYXhfc3VwcGx5ICYmXHJcbiAgICAgICAgICAgICFlcnJvcnMuYmFzZV9hc3NldCAmJlxyXG4gICAgICAgICAgICAhZXJyb3JzLnF1b3RlX2Fzc2V0ICYmXHJcbiAgICAgICAgICAgICFlcnJvcnMubWF4X2ZlZWRfcHJvZHVjZXIgJiZcclxuICAgICAgICAgICAgIWVycm9ycy5jb25mbGljdF9wcm9kdWNlcjtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNWYWxpZDogaXNWYWxpZCwgZXJyb3JzOiBlcnJvcnN9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Db3JlUmF0ZUNoYW5nZSh0eXBlLCBhbW91bnQpIHtcclxuICAgICAgICBhbW91bnQuYW1vdW50ID1cclxuICAgICAgICAgICAgYW1vdW50LmFtb3VudCA9PSBcIlwiID8gXCIwXCIgOiBhbW91bnQuYW1vdW50LnJlcGxhY2UoLywvZywgXCJcIik7XHJcblxyXG4gICAgICAgIGFtb3VudC5hbW91bnQgPSB1dGlscy5saW1pdEJ5UHJlY2lzaW9uKFxyXG4gICAgICAgICAgICBhbW91bnQuYW1vdW50LFxyXG4gICAgICAgICAgICBhbW91bnQuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IHtjb3JlX2V4Y2hhbmdlX3JhdGV9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVbdHlwZV0gPSB7XHJcbiAgICAgICAgICAgIGFtb3VudDogYW1vdW50LmFtb3VudCxcclxuICAgICAgICAgICAgYXNzZXRfaWQ6IGFtb3VudC5hc3NldC5nZXQoXCJpZFwiKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQWNjb3VudENoYW5nZWQoa2V5LCBhY2NvdW50KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIFtrZXldOiBhY2NvdW50ID8gYWNjb3VudC5nZXQoXCJpZFwiKSA6IG51bGxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkFjY291bnROYW1lQ2hhbmdlZChrZXksIG5hbWUpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgW2tleV06IG5hbWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25JbnB1dENvcmVBc3NldCh0eXBlLCBhc3NldCkge1xyXG4gICAgICAgIGlmICh0eXBlID09PSBcInF1b3RlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBxdW90ZUFzc2V0SW5wdXQ6IGFzc2V0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJiYXNlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBiYXNlQXNzZXRJbnB1dDogYXNzZXRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vbkZvdW5kQ29yZUFzc2V0KHR5cGUsIGFzc2V0KSB7XHJcbiAgICAgICAgaWYgKGFzc2V0KSB7XHJcbiAgICAgICAgICAgIGxldCBjb3JlX3JhdGUgPSB0aGlzLnN0YXRlLmNvcmVfZXhjaGFuZ2VfcmF0ZTtcclxuICAgICAgICAgICAgY29yZV9yYXRlW3R5cGVdLmFzc2V0X2lkID0gYXNzZXQuZ2V0KFwiaWRcIik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZTogY29yZV9yYXRlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGVFZGl0RmllbGRzKHtcclxuICAgICAgICAgICAgICAgIG1heF9zdXBwbHk6IHRoaXMuc3RhdGUubWF4X3N1cHBseSxcclxuICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZTogY29yZV9yYXRlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25JbnB1dE1hcmtldChhc3NldCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBtYXJrZXRJbnB1dDogYXNzZXRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Gb3VuZE1hcmtldEFzc2V0KGFzc2V0KSB7XHJcbiAgICAgICAgaWYgKGFzc2V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24oXCJtYXJrZXRcIiwgYXNzZXQuZ2V0KFwic3ltYm9sXCIpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uRmxhZ0NoYW5nZShrZXkpIHtcclxuICAgICAgICBsZXQgYm9vbGVhbnMgPSB0aGlzLnN0YXRlLmZsYWdCb29sZWFucztcclxuICAgICAgICBib29sZWFuc1trZXldID0gIWJvb2xlYW5zW2tleV07XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGZsYWdCb29sZWFuczogYm9vbGVhbnNcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl92YWxpZGF0ZUVkaXRGaWVsZHMoe30pO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblBlcm1pc3Npb25DaGFuZ2Uoa2V5KSB7XHJcbiAgICAgICAgbGV0IGJvb2xlYW5zID0gdGhpcy5zdGF0ZS5wZXJtaXNzaW9uQm9vbGVhbnM7XHJcbiAgICAgICAgYm9vbGVhbnNba2V5XSA9ICFib29sZWFuc1trZXldO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnM6IGJvb2xlYW5zXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uQ2xhaW1JbnB1dChhc3NldCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBjbGFpbUZlZXNBbW91bnQ6IGFzc2V0LmFtb3VudFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlTGlzdChrZXksIGFjdGlvbiA9IFwiYWRkXCIsIGlkKSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnN0YXRlW2tleV07XHJcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gXCJhZGRcIiAmJiAhY3VycmVudC5pbmNsdWRlcyhpZCkpIHtcclxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucHVzaChpZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwicmVtb3ZlXCIgJiYgY3VycmVudC5pbmNsdWRlcyhpZCkpIHtcclxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucmVtb3ZlKGN1cnJlbnQuaW5kZXhPZihpZCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtba2V5XTogY3VycmVudH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlRmVlZFByb2R1Y2VyTGlzdChhY3Rpb24gPSBcImFkZFwiLCBpZCkge1xyXG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5zdGF0ZS5mZWVkUHJvZHVjZXJzO1xyXG4gICAgICAgIGlmIChhY3Rpb24gPT09IFwiYWRkXCIgJiYgIWN1cnJlbnQuaW5jbHVkZXMoaWQpKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnB1c2goaWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBcInJlbW92ZVwiICYmIGN1cnJlbnQuaW5jbHVkZXMoaWQpKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnJlbW92ZShjdXJyZW50LmluZGV4T2YoaWQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZmVlZFByb2R1Y2VyczogY3VycmVudH0pO1xyXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlRWRpdEZpZWxkcyh7ZmVlZFByb2R1Y2VyczogY3VycmVudH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2Fzc2V0fSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgZXJyb3JzLFxyXG4gICAgICAgICAgICBpc1ZhbGlkLFxyXG4gICAgICAgICAgICB1cGRhdGUsXHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZSxcclxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGNsYWltRmVlc0Ftb3VudCxcclxuICAgICAgICAgICAgaXNCaXRBc3NldCxcclxuICAgICAgICAgICAgYml0YXNzZXRfb3B0c1xyXG4gICAgICAgIH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICAvLyBFc3RpbWF0ZSB0aGUgYXNzZXQgdXBkYXRlIGZlZVxyXG4gICAgICAgIGxldCBzeW1ib2wgPSBhc3NldC5nZXQoXCJzeW1ib2xcIik7XHJcbiAgICAgICAgbGV0IHVwZGF0ZUZlZSA9IFwiTi9BXCI7XHJcblxyXG4gICAgICAgIHVwZGF0ZUZlZSA9IDxGb3JtYXR0ZWRGZWUgb3BUeXBlPVwiYXNzZXRfdXBkYXRlXCIgLz47XHJcblxyXG4gICAgICAgIGxldCBjcl9xdW90ZV9hc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQoXHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZS5hc3NldF9pZFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IHByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXHJcbiAgICAgICAgICAgIGNyX3F1b3RlX2Fzc2V0LmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IGNyX2Jhc2VfYXNzZXQgPSBDaGFpblN0b3JlLmdldEFzc2V0KFxyXG4gICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZS5hc3NldF9pZFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IGJhc2VQcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKFxyXG4gICAgICAgICAgICBjcl9iYXNlX2Fzc2V0LmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGxldCBjcl9xdW90ZV9hbW91bnQgPVxyXG4gICAgICAgICAgICBwYXJzZUZsb2F0KGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZS5hbW91bnQpICogcHJlY2lzaW9uO1xyXG4gICAgICAgIGxldCBjcl9iYXNlX2Ftb3VudCA9XHJcbiAgICAgICAgICAgIHBhcnNlRmxvYXQoY29yZV9leGNoYW5nZV9yYXRlLmJhc2UuYW1vdW50KSAqIGJhc2VQcmVjaXNpb247XHJcbiAgICAgICAgbGV0IG9yaWdpbmFsUGVybWlzc2lvbnMgPSBhc3NldFV0aWxzLmdldEZsYWdCb29sZWFucyhcclxuICAgICAgICAgICAgYXNzZXQuZ2V0SW4oW1wib3B0aW9uc1wiLCBcImlzc3Vlcl9wZXJtaXNzaW9uc1wiXSksXHJcbiAgICAgICAgICAgIGFzc2V0LmdldChcImJpdGFzc2V0XCIpICE9PSB1bmRlZmluZWRcclxuICAgICAgICApO1xyXG4gICAgICAgIC8vIExvb3Agb3ZlciBmbGFnc1xyXG4gICAgICAgIGxldCBmbGFncyA9IFtdO1xyXG4gICAgICAgIGxldCBnZXRGbGFnID0gKGtleSwgb25DbGljaywgaXNDaGVja2VkKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8dGFibGUga2V5PXtcInRhYmxlX1wiICsga2V5fSBjbGFzc05hbWU9XCJ0YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiBcIm5vbmVcIiwgd2lkdGg6IFwiODAlXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2BhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy4ke2tleX1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e2JvcmRlcjogXCJub25lXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInN3aXRjaFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luQm90dG9tOiBcIjEwcHhcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtpc0NoZWNrZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gb3JpZ2luYWxQZXJtaXNzaW9ucykge1xyXG4gICAgICAgICAgICBpZiAob3JpZ2luYWxQZXJtaXNzaW9uc1trZXldICYmIGtleSAhPT0gXCJjaGFyZ2VfbWFya2V0X2ZlZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBmbGFncy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIGdldEZsYWcoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25GbGFnQ2hhbmdlLmJpbmQodGhpcywga2V5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zW2tleV1cclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmbGFncy5wdXNoKFxyXG4gICAgICAgICAgICBnZXRGbGFnKFxyXG4gICAgICAgICAgICAgICAgXCJ2aXNpYmxlXCIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQodGhpcywgXCJ2aXNpYmxlXCIpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uLnZpc2libGVcclxuICAgICAgICAgICAgICAgICAgICA/IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgOiB1cGRhdGUuZGVzY3JpcHRpb24udmlzaWJsZSA9PT0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIExvb3Agb3ZlciBwZXJtaXNzaW9uc1xyXG4gICAgICAgIGxldCBwZXJtaXNzaW9ucyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBvcmlnaW5hbFBlcm1pc3Npb25zKSB7XHJcbiAgICAgICAgICAgIGlmICh0cnVlIHx8IG9yaWdpbmFsUGVybWlzc2lvbnNba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbnMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICA8dGFibGUga2V5PXtcInRhYmxlX1wiICsga2V5fSBjbGFzc05hbWU9XCJ0YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiBcIm5vbmVcIiwgd2lkdGg6IFwiODAlXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17YGFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLiR7a2V5fWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e2JvcmRlcjogXCJub25lXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic3dpdGNoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luQm90dG9tOiBcIjEwcHhcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblBlcm1pc3Npb25DaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtwZXJtaXNzaW9uQm9vbGVhbnNba2V5XX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4ge319XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGFic0NoYW5nZWRDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy50YWJzQ2hhbmdlZCgpLmZvckVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRhYnNDaGFuZ2VkQ291bnQrKztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGNvbmZpcm1CdXR0b25zID0gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhcImJ1dHRvblwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhaXNWYWxpZCB8fCAhdGhpcy5wYWdlQ2hhbmdlZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCI5cmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2hhbmdlZENvdW50ID4gMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9vcGVuQ29uZmlybS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX3VwZGF0ZUFzc2V0LmJpbmQodGhpcylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAge3RhYnNDaGFuZ2VkQ291bnQgPiAxID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0uc2F2ZV9hbGxcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5zYXZlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKFwiYnV0dG9uIHByaW1hcnkgaG9sbG93XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICF0aGlzLnBhZ2VDaGFuZ2VkKClcclxuICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9yZXNldC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5yZXNldFwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IGNlclZhbGlkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgKGNyX3F1b3RlX2Fzc2V0LmdldChcImlkXCIpID09PSBcIjEuMy4wXCIgfHxcclxuICAgICAgICAgICAgICAgIGNyX2Jhc2VfYXNzZXQuZ2V0KFwiaWRcIikgPT09IFwiMS4zLjBcIikgJiZcclxuICAgICAgICAgICAgKGNyX3F1b3RlX2Fzc2V0LmdldChcImlkXCIpID09PSBhc3NldC5nZXQoXCJpZFwiKSB8fFxyXG4gICAgICAgICAgICAgICAgY3JfYmFzZV9hc3NldC5nZXQoXCJpZFwiKSA9PT0gYXNzZXQuZ2V0KFwiaWRcIikpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGNlclZhbGlkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpc1ByZWRpY3Rpb25NYXJrZXRBc3NldCA9IGFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxyXG4gICAgICAgICAgICBcImlzX3ByZWRpY3Rpb25fbWFya2V0XCJcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgbGV0IGFzc2V0X2Rlc2NyaXB0aW9uID0gYXNzZXRVdGlscy5wYXJzZURlc2NyaXB0aW9uKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFzc2V0LnRvSlMoKS5vcHRpb25zLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgYXBwLXRhYmxlcyBuby1wYWRkaW5nXCIgcmVmPVwiYXBwVGFibGVzXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgc21hbGwtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtY29udGFpbmVyIGdlbmVyaWMtYm9yZGVyZWQtYm94XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1oZWFkZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJoZWFkZXIudXBkYXRlX2Fzc2V0XCIgLz46e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmc9XCJ1cGRhdGVBc3NldFRhYlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY2NvdW50LXRhYnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic0NsYXNzPVwiYWNjb3VudC1vdmVydmlldyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50Q2xhc3M9XCJncmlkLWJsb2NrIHBhZGRpbmctdG9wIHNocmluayBzbWFsbC12ZXJ0aWNhbCBtZWRpdW0taG9yaXpvbnRhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9ucz17Y29uZmlybUJ1dHRvbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZVRhYj17aSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YWN0aXZlVGFiOiBpfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wcmltYXJ5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVGFiPXt0aGlzLnRhYkNoYW5nZWQoMCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBsYXJnZS04IGxhcmdlLW9mZnNldC0yIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wcmVjaXNpb25cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+OiB7YXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QW1vdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1heF9zdXBwbHlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dXBkYXRlLm1heF9zdXBwbHl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXhfc3VwcGx5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHM9e1thc3NldC5nZXQoXCJpZFwiKV19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfc3VwcGx5ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMubWF4X3N1cHBseX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY29yZV9leGNoYW5nZV9yYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjZXJWYWxpZCA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1tYXJnaW4gc21hbGwtMTIgbWVkaXVtLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5xdW90ZV9uYW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25JbnB1dENvcmVBc3NldC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInF1b3RlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnF1b3RlQXNzZXRJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldElucHV0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnF1b3RlQXNzZXRJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogXCIxMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRm91bmQ9e3RoaXMuX29uRm91bmRDb3JlQXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NlclZhbGlkID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpbiBzbWFsbC0xMiBtZWRpdW0tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmJhc2VfbmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uSW5wdXRDb3JlQXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhc2VBc3NldElucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0SW5wdXQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFzZUFzc2V0SW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDogXCIxMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRm91bmQ9e3RoaXMuX29uRm91bmRDb3JlQXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLnF1b3RlX2Fzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLnF1b3RlX2Fzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5iYXNlX2Fzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLmJhc2VfYXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tbWFyZ2luIHNtYWxsLTEyIG1lZGl1bS02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBbW91bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5xdW90ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25Db3JlUmF0ZUNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogXCIxMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpbiBzbWFsbC0xMiBtZWRpdW0tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QW1vdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYmFzZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hbW91bnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbkNvcmVSYXRlQ2hhbmdlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJhc2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hc3NldF9pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMC4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6IFwiMTBweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UucHJpY2VcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkUHJpY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7Zm9udFdlaWdodDogXCJib2xkXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYW1vdW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcl9xdW90ZV9hbW91bnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlX2Fzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFzc2V0X2lkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlX2Fzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VfYW1vdW50PXtjcl9iYXNlX2Ftb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g1PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmNlcl93YXJuaW5nXzFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoYXMtZXJyb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY2VyX3dhcm5pbmdfMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwicFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmFwcHJveF9mZWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoge3VwZGF0ZUZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC53aGl0ZWxpc3QudGl0bGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUYWI9e3RoaXMudGFiQ2hhbmdlZCgxKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXRXaGl0ZWxpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVMaXN0RW5hYmxlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnQm9vbGVhbnNbXCJ3aGl0ZV9saXN0XCJdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVsaXN0X2F1dGhvcml0aWVzPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUud2hpdGVsaXN0X2F1dGhvcml0aWVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhY2tsaXN0X2F1dGhvcml0aWVzPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYmxhY2tsaXN0X2F1dGhvcml0aWVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVsaXN0X21hcmtldHM9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS53aGl0ZWxpc3RfbWFya2V0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWNrbGlzdF9tYXJrZXRzPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYmxhY2tsaXN0X21hcmtldHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdfYXV0aG9yaXR5X2lkPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubmV3X2F1dGhvcml0eV9pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml0eV9uYW1lPXt0aGlzLnN0YXRlLmF1dGhvcml0eV9uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY291bnROYW1lQ2hhbmdlZD17dGhpcy5vbkFjY291bnROYW1lQ2hhbmdlZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY291bnRDaGFuZ2VkPXt0aGlzLm9uQWNjb3VudENoYW5nZWQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VMaXN0PXt0aGlzLm9uQ2hhbmdlTGlzdC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYXBwcm94X2ZlZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7dXBkYXRlRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Bc3NldFdoaXRlbGlzdD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmRlc2NyaXB0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVGFiPXt0aGlzLnRhYkNoYW5nZWQoMil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBsYXJnZS04IGxhcmdlLW9mZnNldC0yIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2hlaWdodDogXCI3cmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvbi5tYWluIHx8IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYWluXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImgzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5zaG9ydFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPVwiMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb24uc2hvcnRfbmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2hvcnRfbmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWFya2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25JbnB1dE1hcmtldC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YXNzZXRfZGVzY3JpcHRpb24ubWFya2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUubWFya2V0SW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldElucHV0PXt0aGlzLnN0YXRlLm1hcmtldElucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBcIjEwcHhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nQm90dG9tOiBcIjIwcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRm91bmQ9e3RoaXMuX29uRm91bmRNYXJrZXRBc3NldC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMuaW52YWxpZF9tYXJrZXRfcGFpciA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBoYXMtZXJyb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLmludmFsaWRfbWFya2V0X3BhaXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lzUHJlZGljdGlvbk1hcmtldEFzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImgzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmNvbmRpdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz1cIjFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uZGl0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVEZXNjcmlwdGlvbi5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb25kaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImgzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmV4cGlyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImRhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXhwaXJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVEZXNjcmlwdGlvbi5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleHBpcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYXBwcm94X2ZlZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7dXBkYXRlRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXNCaXRBc3NldCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYml0YXNzZXRfb3B0c1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUYWI9e3RoaXMudGFiQ2hhbmdlZCgzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgbGFyZ2UtOCBsYXJnZS1vZmZzZXQtMiBncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCaXRBc3NldE9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzPXtiaXRhc3NldF9vcHRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlPXt0aGlzLm9uQ2hhbmdlQml0QXNzZXRPcHRzLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tpbmdBc3NldD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHMuc2hvcnRfYmFja2luZ19hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldFByZWNpc2lvbj17YXNzZXQuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInByZWNpc2lvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldFN5bWJvbD17YXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYXBwcm94X2ZlZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoge3VwZGF0ZUZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC5wZXJtaXNzaW9uc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFRhYj17dGhpcy50YWJDaGFuZ2VkKDQpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgbGFyZ2UtOCBsYXJnZS1vZmZzZXQtMiBncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEhlbHBDb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtcImNvbXBvbmVudHMvQWNjb3VudEFzc2V0Q3JlYXRlXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uPVwicGVybWlzc2lvbnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wZXJtX3dhcm5pbmdcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwZXJtaXNzaW9uc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYXBwcm94X2ZlZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7dXBkYXRlRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mbGFnc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFRhYj17dGhpcy50YWJDaGFuZ2VkKDUpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgbGFyZ2UtOCBsYXJnZS1vZmZzZXQtMiBncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEhlbHBDb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtcImNvbXBvbmVudHMvQWNjb3VudEFzc2V0Q3JlYXRlXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uPVwiZmxhZ3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3JpZ2luYWxQZXJtaXNzaW9uc1tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hhcmdlX21hcmtldF9mZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImgzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1hcmtldF9mZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogXCJub25lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCI4MCVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY2hhcmdlX21hcmtldF9mZWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogXCJub25lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInN3aXRjaFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIxMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vbkZsYWdDaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hhcmdlX21hcmtldF9mZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4ge319XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdCb29sZWFucy5jaGFyZ2VfbWFya2V0X2ZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhZmxhZ0Jvb2xlYW5zLmNoYXJnZV9tYXJrZXRfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWFya2V0X2ZlZVwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5tYXJrZXRfZmVlX3BlcmNlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXJrZXRfZmVlX3BlcmNlbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFtb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXhfbWFya2V0X2ZlZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLm1heF9tYXJrZXRfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZUlucHV0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWF4X21hcmtldF9mZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2Fzc2V0LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJpZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfbWFya2V0X2ZlZSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBoYXMtZXJyb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLm1heF9tYXJrZXRfZmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZsYWdzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZsYWdzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5hcHByb3hfZmVlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt1cGRhdGVGZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5jb25mbGljdF9wcm9kdWNlciA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBoYXMtZXJyb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLmNvbmZsaWN0X3Byb2R1Y2VyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0JpdEFzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mZWVkX3Byb2R1Y2Vyc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUYWI9e3RoaXMudGFiQ2hhbmdlZCg2KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldEZlZWRQcm9kdWNlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXt0aGlzLnByb3BzLmFzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5wcm9wcy5hY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0bmVzc0ZlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zW1wid2l0bmVzc19mZWRfYXNzZXRcIl1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdHRlZUZlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zW1wiY29tbWl0dGVlX2ZlZF9hc3NldFwiXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjZXJzPXt0aGlzLnN0YXRlLmZlZWRQcm9kdWNlcnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUxpc3Q9e3RoaXMub25DaGFuZ2VGZWVkUHJvZHVjZXJMaXN0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfZmVlZF9wcm9kdWNlciA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvciBsYXJnZS04IGxhcmdlLW9mZnNldC0yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpblRvcDogXCIyMHB4XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMubWF4X2ZlZWRfcHJvZHVjZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgey8qIENvbmZpcm1hdGlvbiBNb2RhbCBvbiBNdWx0aXBsZSBDaGFuZ2VzICovfVxyXG4gICAgICAgICAgICAgICAgPENvbmZpcm1Nb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsSWQ9XCJhc3NldF91cGRhdGVfbW9kYWxcIlxyXG4gICAgICAgICAgICAgICAgICAgIHJlZj1cImNvbmZpcm1fbW9kYWxcIlxyXG4gICAgICAgICAgICAgICAgICAgIHRhYnNDaGFuZ2VkPXt0aGlzLnRhYnNDaGFuZ2VkKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgX2NhbmNlbENvbmZpcm09e3RoaXMuX2NhbmNlbENvbmZpcm0uYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICBfdXBkYXRlQXNzZXQ9e3RoaXMuX3VwZGF0ZUFzc2V0LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbkFjY291bnRBc3NldFVwZGF0ZSA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudEFzc2V0VXBkYXRlKTtcclxuQWNjb3VudEFzc2V0VXBkYXRlID0gQXNzZXRXcmFwcGVyKEFjY291bnRBc3NldFVwZGF0ZSwge1xyXG4gICAgcHJvcE5hbWVzOiBbXCJhc3NldFwiLCBcImNvcmVcIl0sXHJcbiAgICBkZWZhdWx0UHJvcHM6IHtcclxuICAgICAgICBjb3JlOiBcIjEuMy4wXCJcclxuICAgIH0sXHJcbiAgICB3aXRoRHluYW1pYzogdHJ1ZVxyXG59KTtcclxuXHJcbmNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7b3BlbjogZmFsc2V9O1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7b3BlbjogdHJ1ZX0sICgpID0+IHtcclxuICAgICAgICAgICAgWmZBcGkucHVibGlzaCh0aGlzLnByb3BzLm1vZGFsSWQsIFwib3BlblwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe29wZW46IGZhbHNlfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7dGFic0NoYW5nZWR9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgcmV0dXJuICF0aGlzLnN0YXRlLm9wZW4gPyBudWxsIDogKFxyXG4gICAgICAgICAgICA8QmFzZU1vZGFsXHJcbiAgICAgICAgICAgICAgICBpZD17dGhpcy5wcm9wcy5tb2RhbElkfVxyXG4gICAgICAgICAgICAgICAgb3ZlcmxheT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgIG1vZGFsSGVhZGVyPVwiYWNjb3VudC5jb25maXJtX2Fzc2V0X21vZGFsLmhlYWRlclwiXHJcbiAgICAgICAgICAgICAgICBub0xvZ29cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LmNvbmZpcm1fYXNzZXRfbW9kYWwuYXJlX3lvdV9zdXJlXCJcclxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJkaXZcIlxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIxcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPHVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGFic0NoYW5nZWRbXCIwXCJdID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnByaW1hcnlcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0YWJzQ2hhbmdlZFtcIjFcIl0gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC53aGl0ZWxpc3QudGl0bGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0YWJzQ2hhbmdlZFtcIjJcIl0gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZGVzY3JpcHRpb25cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0YWJzQ2hhbmdlZFtcIjNcIl0gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYml0YXNzZXRfb3B0c1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0YWJzQ2hhbmdlZFtcIjRcIl0gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtaXNzaW9uc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RhYnNDaGFuZ2VkW1wiNVwiXSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mbGFnc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBORUVEUyBDSEVDS0lORyAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RhYnNDaGFuZ2VkW1wiNlwiXSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mZWVkX3Byb2R1Y2Vyc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uIHByaW1hcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLl91cGRhdGVBc3NldC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZ2xvYmFsLmNvbmZpcm1cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uIHByaW1hcnkgaG9sbG93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5fY2FuY2VsQ29uZmlybS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZ2xvYmFsLmNhbmNlbFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9CYXNlTW9kYWw+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQXNzZXRVcGRhdGVXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgYXNzZXQgPSB0aGlzLnByb3BzLm1hdGNoLnBhcmFtcy5hc3NldDtcclxuICAgICAgICByZXR1cm4gPEFjY291bnRBc3NldFVwZGF0ZSBhc3NldD17YXNzZXR9IHsuLi50aGlzLnByb3BzfSAvPjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcihBc3NldFVwZGF0ZVdyYXBwZXIpO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuaW1wb3J0IEZvcm1hdHRlZEFzc2V0IGZyb20gXCIuL0Zvcm1hdHRlZEFzc2V0XCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuL0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4vQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQge2VzdGltYXRlRmVlfSBmcm9tIFwiY29tbW9uL3RyeEhlbHBlclwiO1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqICBHaXZlbiBhbiBvcGVyYXRpb24gdHlwZSwgZGlzcGxheXMgdGhlIENPUkUgZmVlIGZvciB0aGF0IG9wZXJhdGlvblxyXG4gKlxyXG4gKi9cclxuXHJcbmNsYXNzIEZvcm1hdHRlZEZlZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGdsb2JhbE9iamVjdDogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIG9wVHlwZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgICAgICBvcHRpb25zOiBQcm9wVHlwZXMuYXJyYXlcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBnbG9iYWxPYmplY3Q6IFwiMi4wLjBcIixcclxuICAgICAgICBvcHRpb25zOiBbXVxyXG4gICAgfTtcclxuXHJcbiAgICBnZXRGZWUoKSB7XHJcbiAgICAgICAgLy8gUmV0dXJuIGZlZSB2aWEgcmVmc1xyXG4gICAgICAgIHJldHVybiBlc3RpbWF0ZUZlZShcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vcFR5cGUsXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMub3B0aW9ucyxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5nbG9iYWxPYmplY3RcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge29wVHlwZSwgb3B0aW9ucywgZ2xvYmFsT2JqZWN0fSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGlmICghb3BUeXBlIHx8ICFvcHRpb25zIHx8ICFnbG9iYWxPYmplY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYW1vdW50ID0gZXN0aW1hdGVGZWUob3BUeXBlLCBvcHRpb25zLCBnbG9iYWxPYmplY3QpO1xyXG5cclxuICAgICAgICByZXR1cm4gPEZvcm1hdHRlZEFzc2V0IGFtb3VudD17YW1vdW50fSBhc3NldD1cIjEuMy4wXCIgLz47XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJpbmRUb0NoYWluU3RhdGUoRm9ybWF0dGVkRmVlKTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgTGlua1RvQWNjb3VudEJ5SWQgZnJvbSBcIi4uL1V0aWxpdHkvTGlua1RvQWNjb3VudEJ5SWRcIjtcclxuaW1wb3J0IExpbmtUb0Fzc2V0QnlJZCBmcm9tIFwiLi4vVXRpbGl0eS9MaW5rVG9Bc3NldEJ5SWRcIjtcclxuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuLi9BY2NvdW50L0FjY291bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgQXNzZXRTZWxlY3RvciBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldFNlbGVjdG9yXCI7XHJcbmltcG9ydCBjbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gXCJhbHQtcmVhY3RcIjtcclxuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XHJcbmltcG9ydCBTZXR0aW5nc0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvU2V0dGluZ3NBY3Rpb25zXCI7XHJcblxyXG5jbGFzcyBBc3NldFdoaXRlbGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGxpc3RUeXBlOiBwcm9wcy5hc3NldFdoaXRlTGlzdFR5cGUsXHJcbiAgICAgICAgICAgIGFjY291bnRUYWJsZTogcHJvcHMuYXNzZXRXaGl0ZUxpc3RUeXBlLmluZGV4T2YoXCJtYXJrZXRcIikgPT09IC0xLFxyXG4gICAgICAgICAgICBsaXN0VHlwZXM6IFtcclxuICAgICAgICAgICAgICAgIFwid2hpdGVsaXN0X2F1dGhvcml0aWVzXCIsXHJcbiAgICAgICAgICAgICAgICBcImJsYWNrbGlzdF9hdXRob3JpdGllc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJ3aGl0ZWxpc3RfbWFya2V0c1wiLFxyXG4gICAgICAgICAgICAgICAgXCJibGFja2xpc3RfbWFya2V0c1wiXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIGFzc2V0SW5wdXQ6IG51bGwsXHJcbiAgICAgICAgICAgIGFzc2V0X2lkOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJBY2NvdW50VGFibGVzKCkge1xyXG4gICAgICAgIGNvbnN0IHtsaXN0VHlwZX0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMucHJvcHMud2hpdGVMaXN0RW5hYmxlZClcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0eHRsYWJlbCBjYW5jZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4cGxvcmVyLmFzc2V0LndoaXRlbGlzdC5lbmFibGVfZmxhZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGRhc2hib2FyZC10YWJsZSB0YWJsZS1ob3ZlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLmFjY291bnQudGl0bGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucmVtb3ZlX3RleHRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHNbbGlzdFR5cGVdLm1hcChhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17YX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rVG9BY2NvdW50QnlJZCBhY2NvdW50PXthfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNsaWNrYWJsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2hhbmdlTGlzdC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZW1vdmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJjcm9zcy1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMuY3Jvc3NfY2lyY2xlLnJlbW92ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e3BhZGRpbmdUb3A6IFwiMnJlbVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17YGFjY291bnQud2hpdGVsaXN0LiR7bGlzdFR5cGV9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU9e3RoaXMucHJvcHMuYXV0aG9yaXR5X25hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYXV0aG9yaXR5X25hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uQWNjb3VudE5hbWVDaGFuZ2VkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhdXRob3JpdHlfbmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjb3VudENoYW5nZWQ9e3RoaXMucHJvcHMub25BY2NvdW50Q2hhbmdlZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmV3X2F1dGhvcml0eV9pZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yPXtudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uX2xhYmVsPVwiYWNjb3VudC5wZXJtLmNvbmZpcm1fYWRkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY3Rpb249e3RoaXMucHJvcHMub25DaGFuZ2VMaXN0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5uZXdfYXV0aG9yaXR5X2lkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkFzc2V0Q2hhbmdlKGFzc2V0KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGFzc2V0SW5wdXQ6IGFzc2V0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uQXNzZXRGb3VuZChhc3NldCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBhc3NldF9pZDogYXNzZXQgPyBhc3NldC5nZXQoXCJpZFwiKSA6IG51bGxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJNYXJrZXRUYWJsZSgpIHtcclxuICAgICAgICBjb25zdCB7bGlzdFR5cGV9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZSBkYXNoYm9hcmQtdGFibGUgdGFibGUtaG92ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5hc3NldC50aXRsZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5yZW1vdmVfdGV4dFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wc1tsaXN0VHlwZV0ubWFwKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIga2V5PXthfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtUb0Fzc2V0QnlJZCBhc3NldD17YX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjbGlja2FibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNoYW5nZUxpc3QuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicmVtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmNyb3NzX2NpcmNsZS5yZW1vdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3twYWRkaW5nVG9wOiBcIjJyZW1cIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxBc3NldFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtgZXhwbG9yZXIuYXNzZXQud2hpdGVsaXN0LiR7bGlzdFR5cGV9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uQXNzZXRDaGFuZ2UuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUuYXNzZXRJbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRJbnB1dD17dGhpcy5zdGF0ZS5hc3NldElucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCIxMDAlXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkZvdW5kPXt0aGlzLl9vbkFzc2V0Rm91bmQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uX2xhYmVsPVwiYWNjb3VudC5wZXJtLmNvbmZpcm1fYWRkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY3Rpb249e3RoaXMucHJvcHMub25DaGFuZ2VMaXN0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5hc3NldF9pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Td2l0Y2hUeXBlKHR5cGUpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgbGlzdFR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgIGFjY291bnRUYWJsZTogdHlwZS5pbmRleE9mKFwibWFya2V0XCIpID09PSAtMVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIGFzc2V0V2hpdGVMaXN0VHlwZTogdHlwZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB7YWNjb3VudFRhYmxlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlSW5kZXggPSB0aGlzLnN0YXRlLmxpc3RUeXBlcy5pbmRleE9mKHRoaXMuc3RhdGUubGlzdFR5cGUpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGxhcmdlLTggbGFyZ2Utb2Zmc2V0LTIgZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGVhZGVyLXNlbGVjdG9yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiBcIjJyZW1cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlbGVjdG9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5saXN0VHlwZXMubWFwKCh0eXBlLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17dHlwZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFwiaW5saW5lLWJsb2NrXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmFjdGl2ZTogYWN0aXZlSW5kZXggIT09IGluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uU3dpdGNoVHlwZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2BleHBsb3Jlci5hc3NldC53aGl0ZWxpc3QuJHt0eXBlfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIHthY2NvdW50VGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnJlbmRlckFjY291bnRUYWJsZXMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMucmVuZGVyTWFya2V0VGFibGUoKX1cclxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KEFzc2V0V2hpdGVsaXN0LCB7XHJcbiAgICBsaXN0ZW5UbygpIHtcclxuICAgICAgICByZXR1cm4gW1NldHRpbmdzU3RvcmVdO1xyXG4gICAgfSxcclxuICAgIGdldFByb3BzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFzc2V0V2hpdGVMaXN0VHlwZTogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnZpZXdTZXR0aW5ncy5nZXQoXHJcbiAgICAgICAgICAgICAgICBcImFzc2V0V2hpdGVMaXN0VHlwZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJ3aGl0ZWxpc3RfYXV0aG9yaXRpZXNcIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSk7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IEFzc2V0QWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9Bc3NldEFjdGlvbnNcIjtcclxuaW1wb3J0IEFjY291bnRTZWxlY3RvciBmcm9tIFwiLi4vQWNjb3VudC9BY2NvdW50U2VsZWN0b3JcIjtcclxuaW1wb3J0IExpbmtUb0FjY291bnRCeUlkIGZyb20gXCIuLi9VdGlsaXR5L0xpbmtUb0FjY291bnRCeUlkXCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWNjb3VudEZlZWRQcm9kdWNlcnMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHByb2R1Y2VyX25hbWU6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIG9uQWNjb3VudENoYW5nZWQoYWNjb3VudCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBuZXdfcHJvZHVjZXJfaWQ6IGFjY291bnQgPyBhY2NvdW50LmdldChcImlkXCIpIDogbnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQWNjb3VudE5hbWVDaGFuZ2VkKG5hbWUpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgcHJvZHVjZXJfbmFtZTogbmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB7d2l0bmVzc0ZlZCwgY29tbWl0dGVlRmVkfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGlmICh3aXRuZXNzRmVkIHx8IGNvbW1pdHRlZUZlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgc21hbGwtMTIgbGFyZ2UtOCBsYXJnZS1vZmZzZXQtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwicFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mZWVkX25vdF9hbGxvd2VkXzFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoYXMtZXJyb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZlZWRfbm90X2FsbG93ZWRfMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgc21hbGwtMTIgbGFyZ2UtOCBsYXJnZS1vZmZzZXQtMlwiPlxyXG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGRhc2hib2FyZC10YWJsZSB0YWJsZS1ob3ZlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIuYWNjb3VudC50aXRsZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5yZW1vdmVfdGV4dFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5wcm9kdWNlcnMubWFwKChhLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2F9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAje2kgKyAxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQWNjb3VudEJ5SWQgYWNjb3VudD17YX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjbGlja2FibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNoYW5nZUxpc3QuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicmVtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmNyb3NzX2NpcmNsZS5yZW1vdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3twYWRkaW5nVG9wOiBcIjJyZW1cIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e1wiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYWRkX2ZlZWRcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU9e3RoaXMuc3RhdGUucHJvZHVjZXJfbmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5zdGF0ZS5wcm9kdWNlcl9uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkFjY291bnROYW1lQ2hhbmdlZC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFjY291bnRDaGFuZ2VkPXt0aGlzLm9uQWNjb3VudENoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I9e251bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25fbGFiZWw9XCJhY2NvdW50LnBlcm0uY29uZmlybV9hZGRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFjdGlvbj17dGhpcy5wcm9wcy5vbkNoYW5nZUxpc3QuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5uZXdfcHJvZHVjZXJfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQge0xpbmt9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCBTdGF0aXN0aWNzIGZyb20gXCIuL1N0YXRpc3RpY3NcIjtcclxuaW1wb3J0IEFjY291bnRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL0FjY291bnRBY3Rpb25zXCI7XHJcbmltcG9ydCBUaW1lQWdvIGZyb20gXCIuLi9VdGlsaXR5L1RpbWVBZ29cIjtcclxuaW1wb3J0IEhlbHBDb250ZW50IGZyb20gXCIuLi9VdGlsaXR5L0hlbHBDb250ZW50XCI7XHJcbmltcG9ydCBhY2NvdW50VXRpbHMgZnJvbSBcImNvbW1vbi9hY2NvdW50X3V0aWxzXCI7XHJcbmltcG9ydCB7VGFicywgVGFifSBmcm9tIFwiLi4vVXRpbGl0eS9UYWJzXCI7XHJcbmltcG9ydCB7Z2V0V2FsbGV0TmFtZX0gZnJvbSBcImJyYW5kaW5nXCI7XHJcbmltcG9ydCB7Z2V0V2FsbGV0VVJMfSBmcm9tIFwiLi4vLi4vYnJhbmRpbmdcIjtcclxuXHJcbmNsYXNzIEZlZUhlbHAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBkcHJvcHM6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgZHByb3BzOiBcIjIuMS4wXCJcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7ZHByb3BzfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxIZWxwQ29udGVudFxyXG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgICAgICBwYXRoPVwiY29tcG9uZW50cy9BY2NvdW50TWVtYmVyc2hpcFwiXHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uPVwiZmVlLWRpdmlzaW9uXCJcclxuICAgICAgICAgICAgICAgIG5leHRNYWludGVuYW5jZVRpbWU9e3tcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBkcHJvcHMuZ2V0KFwibmV4dF9tYWludGVuYW5jZV90aW1lXCIpXHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuRmVlSGVscCA9IEJpbmRUb0NoYWluU3RhdGUoRmVlSGVscCk7XHJcblxyXG5jbGFzcyBBY2NvdW50TWVtYmVyc2hpcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFjY291bnQ6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgZ3Byb3BzOiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgY29yZV9hc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIGdwcm9wczogXCIyLjAuMFwiLFxyXG4gICAgICAgIGNvcmVfYXNzZXQ6IFwiMS4zLjBcIlxyXG4gICAgfTtcclxuXHJcbiAgICB1cGdyYWRlQWNjb3VudChpZCwgbGlmZXRpbWUsIGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgQWNjb3VudEFjdGlvbnMudXBncmFkZUFjY291bnQoaWQsIGxpZmV0aW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICAgICAgYWNjb3VudFV0aWxzLmdldEZpbmFsRmVlQXNzZXQodGhpcy5wcm9wcy5hY2NvdW50LCBcImFjY291bnRfdXBncmFkZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtncHJvcHMsIGNvcmVfYXNzZXR9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgbGV0IGFjY291bnQgPSB0aGlzLnByb3BzLmFjY291bnQudG9KUygpO1xyXG5cclxuICAgICAgICBsZXQgbHRyID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGFjY291bnQubGlmZXRpbWVfcmVmZXJyZXIsIGZhbHNlKTtcclxuICAgICAgICBpZiAobHRyKSBhY2NvdW50LmxpZmV0aW1lX3JlZmVycmVyX25hbWUgPSBsdHIuZ2V0KFwibmFtZVwiKTtcclxuICAgICAgICBsZXQgcmVmID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGFjY291bnQucmVmZXJyZXIsIGZhbHNlKTtcclxuICAgICAgICBpZiAocmVmKSBhY2NvdW50LnJlZmVycmVyX25hbWUgPSByZWYuZ2V0KFwibmFtZVwiKTtcclxuICAgICAgICBsZXQgcmVnID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGFjY291bnQucmVnaXN0cmFyLCBmYWxzZSk7XHJcbiAgICAgICAgaWYgKHJlZykgYWNjb3VudC5yZWdpc3RyYXJfbmFtZSA9IHJlZy5nZXQoXCJuYW1lXCIpO1xyXG5cclxuICAgICAgICBsZXQgYWNjb3VudF9uYW1lID0gYWNjb3VudC5uYW1lO1xyXG5cclxuICAgICAgICBsZXQgbmV0d29ya19mZWUgPSBhY2NvdW50Lm5ldHdvcmtfZmVlX3BlcmNlbnRhZ2UgLyAxMDA7XHJcbiAgICAgICAgbGV0IGxpZmV0aW1lX2ZlZSA9IGFjY291bnQubGlmZXRpbWVfcmVmZXJyZXJfZmVlX3BlcmNlbnRhZ2UgLyAxMDA7XHJcbiAgICAgICAgbGV0IHJlZmVycmVyX3RvdGFsX2ZlZSA9IDEwMCAtIG5ldHdvcmtfZmVlIC0gbGlmZXRpbWVfZmVlO1xyXG4gICAgICAgIGxldCByZWZlcnJlcl9mZWUgPVxyXG4gICAgICAgICAgICAocmVmZXJyZXJfdG90YWxfZmVlICogYWNjb3VudC5yZWZlcnJlcl9yZXdhcmRzX3BlcmNlbnRhZ2UpIC8gMTAwMDA7XHJcbiAgICAgICAgbGV0IHJlZ2lzdHJhcl9mZWUgPSAxMDAgLSByZWZlcnJlcl9mZWUgLSBsaWZldGltZV9mZWUgLSBuZXR3b3JrX2ZlZTtcclxuXHJcbiAgICAgICAgbGV0IGxpZmV0aW1lX2Nvc3QgPVxyXG4gICAgICAgICAgICAoZ3Byb3BzLmdldEluKFtcclxuICAgICAgICAgICAgICAgIFwicGFyYW1ldGVyc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJjdXJyZW50X2ZlZXNcIixcclxuICAgICAgICAgICAgICAgIFwicGFyYW1ldGVyc1wiLFxyXG4gICAgICAgICAgICAgICAgOCxcclxuICAgICAgICAgICAgICAgIDEsXHJcbiAgICAgICAgICAgICAgICBcIm1lbWJlcnNoaXBfbGlmZXRpbWVfZmVlXCJcclxuICAgICAgICAgICAgXSkgKlxyXG4gICAgICAgICAgICAgICAgZ3Byb3BzLmdldEluKFtcInBhcmFtZXRlcnNcIiwgXCJjdXJyZW50X2ZlZXNcIiwgXCJzY2FsZVwiXSkpIC9cclxuICAgICAgICAgICAgMTAwMDA7XHJcblxyXG4gICAgICAgIGxldCBtZW1iZXJfc3RhdHVzID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50TWVtYmVyU3RhdHVzKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnRcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBtZW1iZXJzaGlwID0gXCJhY2NvdW50Lm1lbWJlci5cIiArIG1lbWJlcl9zdGF0dXM7XHJcbiAgICAgICAgbGV0IGV4cGlyYXRpb24gPSBudWxsO1xyXG4gICAgICAgIGlmIChtZW1iZXJfc3RhdHVzID09PSBcImFubnVhbFwiKVxyXG4gICAgICAgICAgICBleHBpcmF0aW9uID0gKFxyXG4gICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLmV4cGlyZXNcIiAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICA8VGltZUFnbyB0aW1lPXthY2NvdW50Lm1lbWJlcnNoaXBfZXhwaXJhdGlvbl9kYXRlfSAvPilcclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBsZXQgZXhwaXJhdGlvbl9kYXRlID0gYWNjb3VudC5tZW1iZXJzaGlwX2V4cGlyYXRpb25fZGF0ZTtcclxuICAgICAgICBpZiAoZXhwaXJhdGlvbl9kYXRlID09PSBcIjE5NjktMTItMzFUMjM6NTk6NTlcIilcclxuICAgICAgICAgICAgZXhwaXJhdGlvbl9kYXRlID0gXCJOZXZlclwiO1xyXG4gICAgICAgIGVsc2UgaWYgKGV4cGlyYXRpb25fZGF0ZSA9PT0gXCIxOTcwLTAxLTAxVDAwOjAwOjAwXCIpXHJcbiAgICAgICAgICAgIGV4cGlyYXRpb25fZGF0ZSA9IFwiTi9BXCI7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLWNvbnRhaW5lciBnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFic1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmc9XCJtZW1iZXJzaGlwVGFiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFjY291bnQtdGFic1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2xhc3M9XCJhY2NvdW50LW92ZXJ2aWV3IGJvcmRlcmVkLWhlYWRlciBjb250ZW50LWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cInBhZGRpbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5tZW1iZXIubWVtYmVyc2hpcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PXttZW1iZXJzaGlwfSAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2V4cGlyYXRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bWVtYmVyX3N0YXR1cyA9PT0gXCJsaWZldGltZVwiID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGFyZ2UtNiBtZWRpdW0tOFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIZWxwQ29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPVwiY29tcG9uZW50cy9BY2NvdW50TWVtYmVyc2hpcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb249XCJsaWZldGltZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlZXNDYXNoYmFjaz17MTAwIC0gbmV0d29ya19mZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGxpZmV0aW1lX2Nvc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldDogY29yZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b24gbm8tbWFyZ2luXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy51cGdyYWRlQWNjb3VudC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci51cGdyYWRlX2xpZmV0aW1lXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7ICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0cnVlIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyX3N0YXR1cyA9PT1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhbm51YWxcIiA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnVwZ3JhZGVBY2NvdW50LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5zdWJzY3JpYmVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgbm8tbWFyZ2luXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibm8tbWFyZ2luIGdyaWQtYmxvY2sgdmVydGljYWwgbGFyZ2UtaG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJuby1tYXJnaW4gZ3JpZC1ibG9jayBsYXJnZS01XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge21lbWJlcl9zdGF0dXMgPT09XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGlmZXRpbWVcIiA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5yZWZlcnJhbF9saW5rXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQubWVtYmVyLnJlZmVycmFsX3RleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXRfbmFtZT17Z2V0V2FsbGV0TmFtZSgpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2dldFdhbGxldFVSTCgpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAvP3I9JHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50Lm5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLmZlZV9hbGxvY2F0aW9uXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGtleS12YWx1ZS10YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIubmV0d29ya19wZXJjZW50YWdlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25ldHdvcmtfZmVlfSVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIubGlmZXRpbWVfcmVmZXJyZXJcIiAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwOyAoPExpbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17YGFjY291bnQvJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5saWZldGltZV9yZWZlcnJlcl9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmxpZmV0aW1lX3JlZmVycmVyX25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGlmZXRpbWVfZmVlfSVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIucmVnaXN0cmFyXCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDsgKDxMaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG89e2BhY2NvdW50LyR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQucmVnaXN0cmFyX25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQucmVnaXN0cmFyX25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVnaXN0cmFyX2ZlZX0lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLnJlZmVycmVyXCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDsgKDxMaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG89e2BhY2NvdW50LyR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQucmVmZXJyZXJfbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5yZWZlcnJlcl9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlZmVycmVyX2ZlZX0lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLm1lbWJlcnNoaXBfZXhwaXJhdGlvblwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbl9kYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ1RvcDogXCIxcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5mZWVzX2Nhc2hiYWNrXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGtleS12YWx1ZS10YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFN0YXRpc3RpY3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0X29iamVjdD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuc3RhdGlzdGljc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBsYXJnZS03XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZlZUhlbHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnRfbmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtGZWU9e25ldHdvcmtfZmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJyZXJGZWU9e3JlZmVycmVyX2ZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhckZlZT17cmVnaXN0cmFyX2ZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpZmV0aW1lRmVlPXtsaWZldGltZV9mZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcnJlclRvdGFsRmVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcnJlcl90b3RhbF9mZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW50ZW5hbmNlSW50ZXJ2YWw9e2dwcm9wcy5nZXRJbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYW1ldGVyc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1haW50ZW5hbmNlX2ludGVydmFsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVzdGluZ1RocmVzaG9sZD17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZ3Byb3BzLmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhbWV0ZXJzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2FzaGJhY2tfdmVzdGluZ190aHJlc2hvbGRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0OiBjb3JlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVzdGluZ1BlcmlvZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3Byb3BzLmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhbWV0ZXJzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2FzaGJhY2tfdmVzdGluZ19wZXJpb2Rfc2Vjb25kc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSkgL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYwIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA2MCAvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMjRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5BY2NvdW50TWVtYmVyc2hpcCA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudE1lbWJlcnNoaXApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWNjb3VudE1lbWJlcnNoaXA7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcblxyXG5jbGFzcyBTdGF0aXN0aWNzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgc3RhdF9vYmplY3Q6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHN0YXRfb2JqZWN0ID0gdGhpcy5wcm9wcy5zdGF0X29iamVjdC50b0pTKCk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuZmVlc19wYWlkXCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtwYXJzZUZsb2F0KHN0YXRfb2JqZWN0LmxpZmV0aW1lX2ZlZXNfcGFpZCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD1cIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCaW5kVG9DaGFpblN0YXRlKFN0YXRpc3RpY3MpO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xuaW1wb3J0IFdhbGxldEFjdGlvbnMgZnJvbSBcImFjdGlvbnMvV2FsbGV0QWN0aW9uc1wiO1xuaW1wb3J0IHtBcGlzfSBmcm9tIFwiYml0c2hhcmVzanMtd3NcIjtcbmltcG9ydCB7VGFicywgVGFifSBmcm9tIFwiLi4vVXRpbGl0eS9UYWJzXCI7XG5cbmNsYXNzIFZlc3RpbmdCYWxhbmNlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBfb25DbGFpbShjbGFpbUFsbCwgZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIFdhbGxldEFjdGlvbnMuY2xhaW1WZXN0aW5nQmFsYW5jZShcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5pZCxcbiAgICAgICAgICAgIHRoaXMucHJvcHMudmIsXG4gICAgICAgICAgICBjbGFpbUFsbFxuICAgICAgICApLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdHlwZW9mIHRoaXMucHJvcHMuaGFuZGxlQ2hhbmdlZCA9PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmhhbmRsZUNoYW5nZWQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge3ZifSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmICghdGhpcy5wcm9wcy52Yikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY3ZiQXNzZXQsXG4gICAgICAgICAgICB2ZXN0aW5nUGVyaW9kLFxuICAgICAgICAgICAgZWFybmVkLFxuICAgICAgICAgICAgc2Vjb25kc1BlckRheSA9IDYwICogNjAgKiAyNCxcbiAgICAgICAgICAgIGF2YWlsYWJsZVBlcmNlbnQsXG4gICAgICAgICAgICBiYWxhbmNlO1xuICAgICAgICBpZiAodmIpIHtcbiAgICAgICAgICAgIGJhbGFuY2UgPSB2Yi5iYWxhbmNlLmFtb3VudDtcbiAgICAgICAgICAgIGN2YkFzc2V0ID0gQ2hhaW5TdG9yZS5nZXRBc3NldCh2Yi5iYWxhbmNlLmFzc2V0X2lkKTtcbiAgICAgICAgICAgIGVhcm5lZCA9IHZiLnBvbGljeVsxXS5jb2luX3NlY29uZHNfZWFybmVkO1xuICAgICAgICAgICAgdmVzdGluZ1BlcmlvZCA9IHZiLnBvbGljeVsxXS52ZXN0aW5nX3NlY29uZHM7XG4gICAgICAgICAgICBhdmFpbGFibGVQZXJjZW50ID1cbiAgICAgICAgICAgICAgICB2ZXN0aW5nUGVyaW9kID09PSAwIHx8IHZiLmJhbGFuY2VfdHlwZSA9PSBcIm1hcmtldF9mZWVfc2hhcmluZ1wiXG4gICAgICAgICAgICAgICAgICAgID8gMVxuICAgICAgICAgICAgICAgICAgICA6IGVhcm5lZCAvICh2ZXN0aW5nUGVyaW9kICogYmFsYW5jZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWN2YkFzc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmFsYW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImg1XCJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudmVzdGluZy5iYWxhbmNlX251bWJlclwiXG4gICAgICAgICAgICAgICAgICAgIGlkPXt2Yi5pZH1cbiAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGtleS12YWx1ZS10YWJsZVwiPlxuICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5jYXNoYmFja1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXt2Yi5iYWxhbmNlLmFtb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXt2Yi5iYWxhbmNlLmFzc2V0X2lkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuZWFybmVkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3V0aWxzLmZvcm1hdF9udW1iZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5nZXRfYXNzZXRfYW1vdW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhcm5lZCAvIHNlY29uZHNQZXJEYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3ZiQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5jb2luZGF5c1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5yZXF1aXJlZFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1dGlscy5mb3JtYXRfbnVtYmVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuZ2V0X2Fzc2V0X2Ftb3VudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodmIuYmFsYW5jZS5hbW91bnQgKiB2ZXN0aW5nUGVyaW9kKSAvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHNQZXJEYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3ZiQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5jb2luZGF5c1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5yZW1haW5pbmdcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh2ZXN0aW5nUGVyaW9kICogKDEgLSBhdmFpbGFibGVQZXJjZW50KSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHNQZXJEYXkgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7ZGF5c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuYXZhaWxhYmxlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3V0aWxzLmZvcm1hdF9udW1iZXIoYXZhaWxhYmxlUGVyY2VudCAqIDEwMCwgMil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICUgL3tcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZVBlcmNlbnQgKiB2Yi5iYWxhbmNlLmFtb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2N2YkFzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiMlwiIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25DbGFpbS5iaW5kKHRoaXMsIGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLmNsYWltXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuY2xhc3MgQWNjb3VudFZlc3RpbmcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICB2YnM6IG51bGxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgIHRoaXMucmV0cmlldmVWZXN0aW5nQmFsYW5jZXMuY2FsbCh0aGlzLCB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIikpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVcGRhdGUobmV4dFByb3BzKSB7XG4gICAgICAgIGxldCBuZXdJZCA9IG5leHRQcm9wcy5hY2NvdW50LmdldChcImlkXCIpO1xuICAgICAgICBsZXQgb2xkSWQgPSB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIik7XG5cbiAgICAgICAgaWYgKG5ld0lkICE9PSBvbGRJZCkge1xuICAgICAgICAgICAgdGhpcy5yZXRyaWV2ZVZlc3RpbmdCYWxhbmNlcy5jYWxsKHRoaXMsIG5ld0lkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHJpZXZlVmVzdGluZ0JhbGFuY2VzKGFjY291bnRJZCkge1xuICAgICAgICBhY2NvdW50SWQgPSBhY2NvdW50SWQgfHwgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpO1xuICAgICAgICBBcGlzLmluc3RhbmNlKClcbiAgICAgICAgICAgIC5kYl9hcGkoKVxuICAgICAgICAgICAgLmV4ZWMoXCJnZXRfdmVzdGluZ19iYWxhbmNlc1wiLCBbYWNjb3VudElkXSlcbiAgICAgICAgICAgIC50aGVuKHZicyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dmJzfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlcnJvcjpcIiwgZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHt2YnN9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXZicyB8fFxuICAgICAgICAgICAgIXRoaXMucHJvcHMuYWNjb3VudCB8fFxuICAgICAgICAgICAgIXRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJ2ZXN0aW5nX2JhbGFuY2VzXCIpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYWNjb3VudCA9IHRoaXMucHJvcHMuYWNjb3VudC50b0pTKCk7XG5cbiAgICAgICAgbGV0IGJhbGFuY2VzID0gdmJzXG4gICAgICAgICAgICAubWFwKHZiID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmIuYmFsYW5jZS5hbW91bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxWZXN0aW5nQmFsYW5jZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17dmIuaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmI9e3ZifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ2hhbmdlZD17dGhpcy5yZXRyaWV2ZVZlc3RpbmdCYWxhbmNlcy5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoYSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhYTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBhcHAtdGFibGVzIG5vLXBhZGRpbmdcIiByZWY9XCJhcHBUYWJsZXNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgc21hbGwtMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLWNvbnRhaW5lciBnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmc9XCJ2ZXN0aW5nVGFiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY2NvdW50LXRhYnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNDbGFzcz1cImFjY291bnQtb3ZlcnZpZXcgYm9yZGVyZWQtaGVhZGVyIGNvbnRlbnQtYmxvY2tcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cInBhZGRpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnZlc3RpbmcudGl0bGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudmVzdGluZy5leHBsYWluXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cInBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshYmFsYW5jZXMubGVuZ3RoID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IHN0eWxlPXt7cGFkZGluZ1RvcDogXCIxcmVtXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnZlc3Rpbmcubm9fYmFsYW5jZXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuQWNjb3VudFZlc3RpbmcuVmVzdGluZ0JhbGFuY2UgPSBWZXN0aW5nQmFsYW5jZTtcbmV4cG9ydCBkZWZhdWx0IEFjY291bnRWZXN0aW5nO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgSW1tdXRhYmxlIGZyb20gXCJpbW11dGFibGVcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBhY2NvdW50VXRpbHMgZnJvbSBcImNvbW1vbi9hY2NvdW50X3V0aWxzXCI7XHJcbmltcG9ydCBBcHBsaWNhdGlvbkFwaSBmcm9tIFwiYXBpL0FwcGxpY2F0aW9uQXBpXCI7XHJcbmltcG9ydCB7UHVibGljS2V5fSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IEFjY291bnRQZXJtaXNzaW9uc0xpc3QgZnJvbSBcIi4vQWNjb3VudFBlcm1pc3Npb25zTGlzdFwiO1xyXG5pbXBvcnQgQWNjb3VudFBlcm1pc3Npb25zTWlncmF0ZSBmcm9tIFwiLi9BY2NvdW50UGVybWlzc2lvbnNNaWdyYXRlXCI7XHJcbmltcG9ydCBQdWJLZXlJbnB1dCBmcm9tIFwiLi4vRm9ybXMvUHViS2V5SW5wdXRcIjtcclxuaW1wb3J0IHtUYWJzLCBUYWJ9IGZyb20gXCIuLi9VdGlsaXR5L1RhYnNcIjtcclxuaW1wb3J0IEhlbHBDb250ZW50IGZyb20gXCIuLi9VdGlsaXR5L0hlbHBDb250ZW50XCI7XHJcbmltcG9ydCB7UmVjZW50VHJhbnNhY3Rpb25zfSBmcm9tIFwiLi9SZWNlbnRUcmFuc2FjdGlvbnNcIjtcclxuaW1wb3J0IG5vdGlmeSBmcm9tIFwiYWN0aW9ucy9Ob3RpZmljYXRpb25BY3Rpb25zXCI7XHJcblxyXG5jbGFzcyBBY2NvdW50UGVybWlzc2lvbnMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHt9O1xyXG4gICAgICAgIHRoaXMub25QdWJsaXNoID0gdGhpcy5vblB1Ymxpc2guYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uUmVzZXQgPSB0aGlzLm9uUmVzZXQuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVBY2NvdW50RGF0YSh0aGlzLnByb3BzLmFjY291bnQpO1xyXG4gICAgICAgIGFjY291bnRVdGlscy5nZXRGaW5hbEZlZUFzc2V0KHRoaXMucHJvcHMuYWNjb3VudCwgXCJhY2NvdW50X3VwZGF0ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xyXG4gICAgICAgIGlmIChuZXh0UHJvcHMuYWNjb3VudCAhPT0gdGhpcy5wcm9wcy5hY2NvdW50KVxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFjY291bnREYXRhKG5leHRQcm9wcy5hY2NvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwZXJtaXNzaW9uc0Zyb21JbW11dGFibGVPYmooYXV0aHMpIHtcclxuICAgICAgICBsZXQgdGhyZXNob2xkID0gYXV0aHMuZ2V0KFwid2VpZ2h0X3RocmVzaG9sZFwiKTtcclxuICAgICAgICBsZXQgYWNjb3VudF9hdXRocyA9IGF1dGhzLmdldChcImFjY291bnRfYXV0aHNcIik7XHJcbiAgICAgICAgbGV0IGtleV9hdXRocyA9IGF1dGhzLmdldChcImtleV9hdXRoc1wiKTtcclxuICAgICAgICBsZXQgYWRkcmVzc19hdXRocyA9IGF1dGhzLmdldChcImFkZHJlc3NfYXV0aHNcIik7XHJcblxyXG4gICAgICAgIGxldCBhY2NvdW50cyA9IGFjY291bnRfYXV0aHMubWFwKGEgPT4gYS5nZXQoMCkpO1xyXG4gICAgICAgIGxldCBrZXlzID0ga2V5X2F1dGhzLm1hcChhID0+IGEuZ2V0KDApKTtcclxuICAgICAgICBsZXQgYWRkcmVzc2VzID0gYWRkcmVzc19hdXRocy5tYXAoYSA9PiBhLmdldCgwKSk7XHJcblxyXG4gICAgICAgIGxldCB3ZWlnaHRzID0gYWNjb3VudF9hdXRocy5yZWR1Y2UoKHJlcywgYSkgPT4ge1xyXG4gICAgICAgICAgICByZXNbYS5nZXQoMCldID0gYS5nZXQoMSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgfSwge30pO1xyXG4gICAgICAgIHdlaWdodHMgPSBrZXlfYXV0aHMucmVkdWNlKChyZXMsIGEpID0+IHtcclxuICAgICAgICAgICAgcmVzW2EuZ2V0KDApXSA9IGEuZ2V0KDEpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgIH0sIHdlaWdodHMpO1xyXG4gICAgICAgIHdlaWdodHMgPSBhZGRyZXNzX2F1dGhzLnJlZHVjZSgocmVzLCBhKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc1thLmdldCgwKV0gPSBhLmdldCgxKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICB9LCB3ZWlnaHRzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHt0aHJlc2hvbGQsIGFjY291bnRzLCBrZXlzLCBhZGRyZXNzZXMsIHdlaWdodHN9O1xyXG4gICAgfVxyXG5cclxuICAgIHBlcm1pc3Npb25zVG9Kc29uKHRocmVzaG9sZCwgYWNjb3VudHMsIGtleXMsIGFkZHJlc3Nlcywgd2VpZ2h0cykge1xyXG4gICAgICAgIGxldCByZXMgPSB7d2VpZ2h0X3RocmVzaG9sZDogdGhyZXNob2xkfTtcclxuICAgICAgICByZXNbXCJhY2NvdW50X2F1dGhzXCJdID0gYWNjb3VudHNcclxuICAgICAgICAgICAgLnNvcnQodXRpbHMuc29ydElEKVxyXG4gICAgICAgICAgICAubWFwKGEgPT4gW2EsIHdlaWdodHNbYV1dKVxyXG4gICAgICAgICAgICAudG9KUygpO1xyXG4gICAgICAgIHJlc1tcImtleV9hdXRoc1wiXSA9IGtleXNcclxuICAgICAgICAgICAgLnNvcnQodXRpbHMuc29ydElEKVxyXG4gICAgICAgICAgICAubWFwKGEgPT4gW2EsIHdlaWdodHNbYV1dKVxyXG4gICAgICAgICAgICAudG9KUygpO1xyXG4gICAgICAgIHJlc1tcImFkZHJlc3NfYXV0aHNcIl0gPSBhZGRyZXNzZXNcclxuICAgICAgICAgICAgLnNvcnQodXRpbHMuc29ydElEKVxyXG4gICAgICAgICAgICAubWFwKGEgPT4gW2EsIHdlaWdodHNbYV1dKVxyXG4gICAgICAgICAgICAudG9KUygpO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQWNjb3VudERhdGEoYWNjb3VudCkge1xyXG4gICAgICAgIGxldCBhY3RpdmUgPSB0aGlzLnBlcm1pc3Npb25zRnJvbUltbXV0YWJsZU9iaihhY2NvdW50LmdldChcImFjdGl2ZVwiKSk7XHJcbiAgICAgICAgbGV0IG93bmVyID0gdGhpcy5wZXJtaXNzaW9uc0Zyb21JbW11dGFibGVPYmooYWNjb3VudC5nZXQoXCJvd25lclwiKSk7XHJcbiAgICAgICAgbGV0IG1lbW9fa2V5ID0gYWNjb3VudC5nZXQoXCJvcHRpb25zXCIpLmdldChcIm1lbW9fa2V5XCIpO1xyXG4gICAgICAgIGxldCBzdGF0ZSA9IHtcclxuICAgICAgICAgICAgYWN0aXZlX2FjY291bnRzOiBhY3RpdmUuYWNjb3VudHMsXHJcbiAgICAgICAgICAgIGFjdGl2ZV9rZXlzOiBhY3RpdmUua2V5cyxcclxuICAgICAgICAgICAgYWN0aXZlX2FkZHJlc3NlczogYWN0aXZlLmFkZHJlc3NlcyxcclxuICAgICAgICAgICAgb3duZXJfYWNjb3VudHM6IG93bmVyLmFjY291bnRzLFxyXG4gICAgICAgICAgICBvd25lcl9rZXlzOiBvd25lci5rZXlzLFxyXG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzZXM6IG93bmVyLmFkZHJlc3NlcyxcclxuICAgICAgICAgICAgYWN0aXZlX3dlaWdodHM6IGFjdGl2ZS53ZWlnaHRzLFxyXG4gICAgICAgICAgICBvd25lcl93ZWlnaHRzOiBvd25lci53ZWlnaHRzLFxyXG4gICAgICAgICAgICBhY3RpdmVfdGhyZXNob2xkOiBhY3RpdmUudGhyZXNob2xkLFxyXG4gICAgICAgICAgICBvd25lcl90aHJlc2hvbGQ6IG93bmVyLnRocmVzaG9sZCxcclxuICAgICAgICAgICAgbWVtb19rZXk6IG1lbW9fa2V5LFxyXG4gICAgICAgICAgICBwcmV2X2FjdGl2ZV9hY2NvdW50czogYWN0aXZlLmFjY291bnRzLFxyXG4gICAgICAgICAgICBwcmV2X2FjdGl2ZV9rZXlzOiBhY3RpdmUua2V5cyxcclxuICAgICAgICAgICAgcHJldl9hY3RpdmVfYWRkcmVzc2VzOiBhY3RpdmUuYWRkcmVzc2VzLFxyXG4gICAgICAgICAgICBwcmV2X293bmVyX2FjY291bnRzOiBvd25lci5hY2NvdW50cyxcclxuICAgICAgICAgICAgcHJldl9vd25lcl9rZXlzOiBvd25lci5rZXlzLFxyXG4gICAgICAgICAgICBwcmV2X293bmVyX2FkZHJlc3Nlczogb3duZXIuYWRkcmVzc2VzLFxyXG4gICAgICAgICAgICBwcmV2X2FjdGl2ZV93ZWlnaHRzOiBhY3RpdmUud2VpZ2h0cyxcclxuICAgICAgICAgICAgcHJldl9vd25lcl93ZWlnaHRzOiBvd25lci53ZWlnaHRzLFxyXG4gICAgICAgICAgICBwcmV2X2FjdGl2ZV90aHJlc2hvbGQ6IGFjdGl2ZS50aHJlc2hvbGQsXHJcbiAgICAgICAgICAgIHByZXZfb3duZXJfdGhyZXNob2xkOiBvd25lci50aHJlc2hvbGQsXHJcbiAgICAgICAgICAgIHByZXZfbWVtb19rZXk6IG1lbW9fa2V5XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0NoYW5nZWQoKSB7XHJcbiAgICAgICAgbGV0IHMgPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHMuYWN0aXZlX2FjY291bnRzICE9PSBzLnByZXZfYWN0aXZlX2FjY291bnRzIHx8XHJcbiAgICAgICAgICAgIHMuYWN0aXZlX2tleXMgIT09IHMucHJldl9hY3RpdmVfa2V5cyB8fFxyXG4gICAgICAgICAgICBzLmFjdGl2ZV9hZGRyZXNzZXMgIT09IHMucHJldl9hY3RpdmVfYWRkcmVzc2VzIHx8XHJcbiAgICAgICAgICAgIHMub3duZXJfYWNjb3VudHMgIT09IHMucHJldl9vd25lcl9hY2NvdW50cyB8fFxyXG4gICAgICAgICAgICBzLm93bmVyX2tleXMgIT09IHMucHJldl9vd25lcl9rZXlzIHx8XHJcbiAgICAgICAgICAgIHMub3duZXJfYWRkcmVzc2VzICE9PSBzLnByZXZfb3duZXJfYWRkcmVzc2VzIHx8XHJcbiAgICAgICAgICAgIHMuYWN0aXZlX3RocmVzaG9sZCAhPT0gcy5wcmV2X2FjdGl2ZV90aHJlc2hvbGQgfHxcclxuICAgICAgICAgICAgcy5vd25lcl90aHJlc2hvbGQgIT09IHMucHJldl9vd25lcl90aHJlc2hvbGQgfHxcclxuICAgICAgICAgICAgcy5tZW1vX2tleSAhPT0gcy5wcmV2X21lbW9fa2V5XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBkaWRDaGFuZ2UodHlwZSwgcyA9IHRoaXMuc3RhdGUpIHtcclxuICAgICAgICBpZiAodHlwZSA9PT0gXCJtZW1vXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHMubWVtb19rZXkgIT09IHMucHJldl9tZW1vX2tleTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGRpZENoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIFtcIl9rZXlzXCIsIFwiX2FjdGl2ZV9hZGRyZXNzZXNcIiwgXCJfYWNjb3VudHNcIiwgXCJfdGhyZXNob2xkXCJdLmZvckVhY2goXHJcbiAgICAgICAgICAgIGtleSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudCA9IHR5cGUgKyBrZXk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc1tjdXJyZW50XSAhPT0gc1tcInByZXZfXCIgKyBjdXJyZW50XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpZENoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBkaWRDaGFuZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgb25QdWJsaXNoKCkge1xyXG4gICAgICAgIGxldCBzID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBsZXQgdXBkYXRlZF9hY2NvdW50ID0gdGhpcy5wcm9wcy5hY2NvdW50LnRvSlMoKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IGZlZSBhc3NldFxyXG4gICAgICAgIHVwZGF0ZWRfYWNjb3VudC5mZWUgPSB7XHJcbiAgICAgICAgICAgIGFtb3VudDogMCxcclxuICAgICAgICAgICAgYXNzZXRfaWQ6IGFjY291bnRVdGlscy5nZXRGaW5hbEZlZUFzc2V0KFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZF9hY2NvdW50LmlkLFxyXG4gICAgICAgICAgICAgICAgXCJhY2NvdW50X3VwZGF0ZVwiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgdXBkYXRlT2JqZWN0ID0ge1xyXG4gICAgICAgICAgICBhY2NvdW50OiB1cGRhdGVkX2FjY291bnQuaWRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kaWRDaGFuZ2UoXCJhY3RpdmVcIikpIHtcclxuICAgICAgICAgICAgdXBkYXRlT2JqZWN0LmFjdGl2ZSA9IHRoaXMucGVybWlzc2lvbnNUb0pzb24oXHJcbiAgICAgICAgICAgICAgICBzLmFjdGl2ZV90aHJlc2hvbGQsXHJcbiAgICAgICAgICAgICAgICBzLmFjdGl2ZV9hY2NvdW50cyxcclxuICAgICAgICAgICAgICAgIHMuYWN0aXZlX2tleXMsXHJcbiAgICAgICAgICAgICAgICBzLmFjdGl2ZV9hZGRyZXNzZXMsXHJcbiAgICAgICAgICAgICAgICBzLmFjdGl2ZV93ZWlnaHRzXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRpZENoYW5nZShcIm93bmVyXCIpKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZU9iamVjdC5vd25lciA9IHRoaXMucGVybWlzc2lvbnNUb0pzb24oXHJcbiAgICAgICAgICAgICAgICBzLm93bmVyX3RocmVzaG9sZCxcclxuICAgICAgICAgICAgICAgIHMub3duZXJfYWNjb3VudHMsXHJcbiAgICAgICAgICAgICAgICBzLm93bmVyX2tleXMsXHJcbiAgICAgICAgICAgICAgICBzLm93bmVyX2FkZHJlc3NlcyxcclxuICAgICAgICAgICAgICAgIHMub3duZXJfd2VpZ2h0c1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuZGlkQ2hhbmdlKFwib3duZXJcIikgJiZcclxuICAgICAgICAgICAgcy5vd25lcl9rZXlzLnNpemUgPT09IDAgJiZcclxuICAgICAgICAgICAgcy5vd25lcl9hZGRyZXNzZXMuc2l6ZSA9PT0gMCAmJlxyXG4gICAgICAgICAgICBzLm93bmVyX2FjY291bnRzLnNpemUgPT09IDEgJiZcclxuICAgICAgICAgICAgcy5vd25lcl9hY2NvdW50cy5maXJzdCgpID09PSB1cGRhdGVkX2FjY291bnQuaWRcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vdGlmeS5hZGROb3RpZmljYXRpb24oe1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTpcclxuICAgICAgICAgICAgICAgICAgICBcIlNldHRpbmcgeW91ciBvd25lciBwZXJtaXNzaW9ucyBsaWtlIHRoaXMgd2lsbCByZW5kZXIgeW91ciBhY2NvdW50IHBlcm1hbmVudGx5IHVudXNhYmxlLiBQbGVhc2UgbWFrZSBzdXJlIHlvdSBrbm93IHdoYXQgeW91J3JlIGRvaW5nIGJlZm9yZSBtb2RpZnlpbmcgYWNjb3VudCBhdXRob3JpdGllcyFcIixcclxuICAgICAgICAgICAgICAgIGxldmVsOiBcImVycm9yXCIsXHJcbiAgICAgICAgICAgICAgICBhdXRvRGlzbWlzczogMTBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgcy5tZW1vX2tleSAmJlxyXG4gICAgICAgICAgICB0aGlzLmRpZENoYW5nZShcIm1lbW9cIikgJiZcclxuICAgICAgICAgICAgdGhpcy5pc1ZhbGlkUHViS2V5KHMubWVtb19rZXkpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZU9iamVjdC5uZXdfb3B0aW9ucyA9IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJvcHRpb25zXCIpLnRvSlMoKTtcclxuICAgICAgICAgICAgdXBkYXRlT2JqZWN0Lm5ld19vcHRpb25zLm1lbW9fa2V5ID0gcy5tZW1vX2tleTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiLS0gQWNjb3VudFBlcm1pc3Npb25zLm9uUHVibGlzaCAtLT5cIiwgdXBkYXRlT2JqZWN0LCBzLm1lbW9fa2V5KTtcclxuICAgICAgICBBcHBsaWNhdGlvbkFwaS51cGRhdGVBY2NvdW50KHVwZGF0ZU9iamVjdCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNWYWxpZFB1YktleSh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiAhIVB1YmxpY0tleS5mcm9tUHVibGljS2V5U3RyaW5nKHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlc2V0KCkge1xyXG4gICAgICAgIGxldCBzID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgYWN0aXZlX2FjY291bnRzOiBzLnByZXZfYWN0aXZlX2FjY291bnRzLFxyXG4gICAgICAgICAgICBhY3RpdmVfa2V5czogcy5wcmV2X2FjdGl2ZV9rZXlzLFxyXG4gICAgICAgICAgICBhY3RpdmVfYWRkcmVzc2VzOiBzLnByZXZfYWN0aXZlX2FkZHJlc3NlcyxcclxuICAgICAgICAgICAgb3duZXJfYWNjb3VudHM6IHMucHJldl9vd25lcl9hY2NvdW50cyxcclxuICAgICAgICAgICAgb3duZXJfa2V5czogcy5wcmV2X293bmVyX2tleXMsXHJcbiAgICAgICAgICAgIG93bmVyX2FkZHJlc3Nlczogcy5wcmV2X293bmVyX2FkZHJlc3NlcyxcclxuICAgICAgICAgICAgYWN0aXZlX3dlaWdodHM6IHMucHJldl9hY3RpdmVfd2VpZ2h0cyxcclxuICAgICAgICAgICAgb3duZXJfd2VpZ2h0czogcy5wcmV2X293bmVyX3dlaWdodHMsXHJcbiAgICAgICAgICAgIGFjdGl2ZV90aHJlc2hvbGQ6IHMucHJldl9hY3RpdmVfdGhyZXNob2xkLFxyXG4gICAgICAgICAgICBvd25lcl90aHJlc2hvbGQ6IHMucHJldl9vd25lcl90aHJlc2hvbGQsXHJcbiAgICAgICAgICAgIG1lbW9fa2V5OiBzLnByZXZfbWVtb19rZXlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkFkZEl0ZW0oY29sbGVjdGlvbiwgaXRlbV92YWx1ZSwgd2VpZ2h0KSB7XHJcbiAgICAgICAgbGV0IHN0YXRlID0ge307XHJcbiAgICAgICAgbGV0IGxpc3QgPVxyXG4gICAgICAgICAgICBjb2xsZWN0aW9uICtcclxuICAgICAgICAgICAgKHV0aWxzLmlzX29iamVjdF9pZChpdGVtX3ZhbHVlKSA/IFwiX2FjY291bnRzXCIgOiBcIl9rZXlzXCIpO1xyXG4gICAgICAgIHN0YXRlW2xpc3RdID0gdGhpcy5zdGF0ZVtsaXN0XS5wdXNoKGl0ZW1fdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbY29sbGVjdGlvbiArIFwiX3dlaWdodHNcIl1baXRlbV92YWx1ZV0gPSB3ZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZW1vdmVJdGVtKGNvbGxlY3Rpb24sIGl0ZW1fdmFsdWUsIGxpc3RTdWZmaXgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIm9uUmVtb3ZlSXRlbVwiLCBjb2xsZWN0aW9uLCBpdGVtX3ZhbHVlLCBsaXN0U3VmZml4KTtcclxuICAgICAgICBsZXQgc3RhdGUgPSB7fTtcclxuICAgICAgICBsZXQgbGlzdCA9IGNvbGxlY3Rpb24gKyBsaXN0U3VmZml4O1xyXG5cclxuICAgICAgICBzdGF0ZVtsaXN0XSA9IHRoaXMuc3RhdGVbbGlzdF0uZmlsdGVyKGkgPT4gaSAhPT0gaXRlbV92YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25UaHJlc2hvbGRDaGFuZ2VkKHZhcl9uYW1lLCBldmVudCkge1xyXG4gICAgICAgIGxldCB2YWx1ZSA9IHBhcnNlSW50KGV2ZW50LnRhcmdldC52YWx1ZS50cmltKCkpO1xyXG4gICAgICAgIGxldCBzdGF0ZSA9IHt9O1xyXG4gICAgICAgIHN0YXRlW3Zhcl9uYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbGlkYXRlQWNjb3VudChjb2xsZWN0aW9uLCBhY2NvdW50KSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgc3VtVXBXZWlnaHRzKGFjY291bnRzLCBrZXlzLCBhZGRyZXNzZXMsIHdlaWdodHMpIHtcclxuICAgICAgICBsZXQgc3VtID0gYWNjb3VudHMucmVkdWNlKChzdW0sIGEpID0+IHN1bSArIHdlaWdodHNbYV0sIDApO1xyXG4gICAgICAgIHN1bSA9IGtleXMucmVkdWNlKChzdW0sIGEpID0+IHN1bSArIHdlaWdodHNbYV0sIHN1bSk7XHJcbiAgICAgICAgcmV0dXJuIGFkZHJlc3Nlcy5yZWR1Y2UoKHN1bSwgYSkgPT4gc3VtICsgd2VpZ2h0c1thXSwgc3VtKTtcclxuICAgIH1cclxuXHJcbiAgICBvbk1lbW9LZXlDaGFuZ2VkKG1lbW9fa2V5KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bWVtb19rZXl9KTtcclxuICAgIH1cclxuXHJcbiAgICBvblNldFBhc3N3b3JkS2V5cyhrZXlzLCByb2xlcyA9IFtcImFjdGl2ZVwiLCBcIm93bmVyXCIsIFwibWVtb1wiXSkge1xyXG4gICAgICAgIGxldCBuZXdTdGF0ZSA9IHt9O1xyXG5cclxuICAgICAgICByb2xlcy5mb3JFYWNoKHJvbGUgPT4ge1xyXG4gICAgICAgICAgICBuZXdTdGF0ZVtgcGFzc3dvcmRfJHtyb2xlfWBdID0ga2V5c1tyb2xlXTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBlcnJvcjEsIGVycm9yMjtcclxuXHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgYWN0aXZlX2FjY291bnRzLFxyXG4gICAgICAgICAgICBhY3RpdmVfa2V5cyxcclxuICAgICAgICAgICAgYWN0aXZlX2FkZHJlc3NlcyxcclxuICAgICAgICAgICAgYWN0aXZlX3dlaWdodHNcclxuICAgICAgICB9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICBvd25lcl9hY2NvdW50cyxcclxuICAgICAgICAgICAgb3duZXJfa2V5cyxcclxuICAgICAgICAgICAgb3duZXJfYWRkcmVzc2VzLFxyXG4gICAgICAgICAgICBvd25lcl93ZWlnaHRzXHJcbiAgICAgICAgfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIGxldCB0aHJlc2hvbGQgPVxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmFjdGl2ZV90aHJlc2hvbGQgPiAwID8gdGhpcy5zdGF0ZS5hY3RpdmVfdGhyZXNob2xkIDogMDtcclxuICAgICAgICBsZXQgd2VpZ2h0c190b3RhbCA9IHRoaXMuc3VtVXBXZWlnaHRzKFxyXG4gICAgICAgICAgICBhY3RpdmVfYWNjb3VudHMsXHJcbiAgICAgICAgICAgIGFjdGl2ZV9rZXlzLFxyXG4gICAgICAgICAgICBhY3RpdmVfYWRkcmVzc2VzLFxyXG4gICAgICAgICAgICBhY3RpdmVfd2VpZ2h0c1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlkQ2hhbmdlKFwiYWN0aXZlXCIpICYmIHdlaWdodHNfdG90YWwgPCB0aHJlc2hvbGQpXHJcbiAgICAgICAgICAgIGVycm9yMSA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQucGVybS53YXJuaW5nMVwiLCB7XHJcbiAgICAgICAgICAgICAgICB3ZWlnaHRzX3RvdGFsLFxyXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aHJlc2hvbGQgPVxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLm93bmVyX3RocmVzaG9sZCA+IDAgPyB0aGlzLnN0YXRlLm93bmVyX3RocmVzaG9sZCA6IDA7XHJcbiAgICAgICAgd2VpZ2h0c190b3RhbCA9IHRoaXMuc3VtVXBXZWlnaHRzKFxyXG4gICAgICAgICAgICBvd25lcl9hY2NvdW50cyxcclxuICAgICAgICAgICAgb3duZXJfa2V5cyxcclxuICAgICAgICAgICAgb3duZXJfYWRkcmVzc2VzLFxyXG4gICAgICAgICAgICBvd25lcl93ZWlnaHRzXHJcbiAgICAgICAgKTtcclxuICAgICAgICBpZiAodGhpcy5kaWRDaGFuZ2UoXCJvd25lclwiKSAmJiB3ZWlnaHRzX3RvdGFsIDwgdGhyZXNob2xkKVxyXG4gICAgICAgICAgICBlcnJvcjIgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0ud2FybmluZzJcIiwge1xyXG4gICAgICAgICAgICAgICAgd2VpZ2h0c190b3RhbCxcclxuICAgICAgICAgICAgICAgIHRocmVzaG9sZFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IHB1Ymxpc2hfYnV0dG9uc19jbGFzcyA9XHJcbiAgICAgICAgICAgIFwiYnV0dG9uXCIgK1xyXG4gICAgICAgICAgICAoIShlcnJvcjEgfHwgZXJyb3IyKSAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzQ2hhbmdlZCgpICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNWYWxpZFB1YktleSh0aGlzLnN0YXRlLm1lbW9fa2V5KVxyXG4gICAgICAgICAgICAgICAgPyBcIlwiXHJcbiAgICAgICAgICAgICAgICA6IFwiIGRpc2FibGVkXCIpO1xyXG4gICAgICAgIGxldCByZXNldF9idXR0b25zX2NsYXNzID1cclxuICAgICAgICAgICAgXCJidXR0b25cIiArICh0aGlzLmlzQ2hhbmdlZCgpID8gXCJcIiA6IFwiIGRpc2FibGVkXCIpO1xyXG5cclxuICAgICAgICBsZXQgYWNjb3VudHNMaXN0ID0gSW1tdXRhYmxlLlNldCgpO1xyXG4gICAgICAgIGFjY291bnRzTGlzdCA9IGFjY291bnRzTGlzdC5hZGQodGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgYXBwLXRhYmxlcyBuby1wYWRkaW5nXCIgcmVmPVwiYXBwVGFibGVzXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgc21hbGwtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtY29udGFpbmVyIGdlbmVyaWMtYm9yZGVyZWQtYm94XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0QWN0aXZlVGFiPXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmc9XCJwZXJtaXNzaW9uc1RhYlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY2NvdW50LXRhYnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic0NsYXNzPVwiYWNjb3VudC1vdmVydmlldyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50Q2xhc3M9XCJwYWRkaW5nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkJ1dHRvbnM9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uLWJ1dHRvbnNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtyZXNldF9idXR0b25zX2NsYXNzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vblJlc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5yZXNldFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtwdWJsaXNoX2J1dHRvbnNfY2xhc3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uUHVibGlzaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucHVibGlzaFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5wZXJtLmFjdGl2ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIZWxwQ29udGVudCBwYXRoPVwiY29tcG9uZW50cy9BY2NvdW50UGVybUFjdGl2ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gY2xhc3NOYW1lPVwidGhyZXNob2xkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0udGhyZXNob2xkXCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDsgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCI1XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5hY3RpdmVfdGhyZXNob2xkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uVGhyZXNob2xkQ2hhbmdlZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZV90aHJlc2hvbGRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50UGVybWlzc2lvbnNMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC5wZXJtLmFkZF9wZXJtaXNzaW9uX2xhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudHM9e2FjdGl2ZV9hY2NvdW50c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5cz17YWN0aXZlX2tleXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHM9e2FjdGl2ZV93ZWlnaHRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzZXM9e2FjdGl2ZV9hZGRyZXNzZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQWNjb3VudD17dGhpcy52YWxpZGF0ZUFjY291bnQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWRkSXRlbT17dGhpcy5vbkFkZEl0ZW0uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlSXRlbT17dGhpcy5vblJlbW92ZUl0ZW0uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQucGVybS5hY2NvdW50X25hbWVfb3Jfa2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3IxID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3IxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnBlcm0ub3duZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SGVscENvbnRlbnQgcGF0aD1cImNvbXBvbmVudHMvQWNjb3VudFBlcm1Pd25lclwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gY2xhc3NOYW1lPVwidGhyZXNob2xkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0udGhyZXNob2xkXCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDsgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCI1XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5vd25lcl90aHJlc2hvbGR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25UaHJlc2hvbGRDaGFuZ2VkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3duZXJfdGhyZXNob2xkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFBlcm1pc3Npb25zTGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQucGVybS5hZGRfcGVybWlzc2lvbl9sYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRzPXtvd25lcl9hY2NvdW50c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5cz17b3duZXJfa2V5c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cz17b3duZXJfd2VpZ2h0c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzc2VzPXtvd25lcl9hZGRyZXNzZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQWNjb3VudD17dGhpcy52YWxpZGF0ZUFjY291bnQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm93bmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BZGRJdGVtPXt0aGlzLm9uQWRkSXRlbS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3duZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZUl0ZW09e3RoaXMub25SZW1vdmVJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvd25lclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQucGVybS5hY2NvdW50X25hbWVfb3Jfa2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3IyID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3IyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnBlcm0ubWVtb19rZXlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SGVscENvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXhXaWR0aDogXCI4MDBweFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD1cImNvbXBvbmVudHMvQWNjb3VudFBlcm1NZW1vXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQdWJLZXlJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9XCJtZW1vX2tleVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm1lbW9fa2V5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQucGVybS5tZW1vX3B1YmxpY19rZXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlB1YmxpYyBLZXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbk1lbW9LZXlDaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs3fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5wZXJtLnBhc3N3b3JkX21vZGVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRQZXJtaXNzaW9uc01pZ3JhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlPXt0aGlzLnN0YXRlLnBhc3N3b3JkX2FjdGl2ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3duZXI9e3RoaXMuc3RhdGUucGFzc3dvcmRfb3duZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW89e3RoaXMuc3RhdGUucGFzc3dvcmRfbWVtb31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZXRQYXNzd29yZEtleXM9e3RoaXMub25TZXRQYXNzd29yZEtleXMuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5wcm9wcy5hY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVLZXlzPXt0aGlzLnN0YXRlLmFjdGl2ZV9rZXlzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcktleXM9e3RoaXMuc3RhdGUub3duZXJfa2V5c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb0tleT17dGhpcy5zdGF0ZS5tZW1vX2tleX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BZGRBY3RpdmU9e3RoaXMub25BZGRJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZUFjdGl2ZT17dGhpcy5vblJlbW92ZUl0ZW0uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWRkT3duZXI9e3RoaXMub25BZGRJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvd25lclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlT3duZXI9e3RoaXMub25SZW1vdmVJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvd25lclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2V0TWVtbz17dGhpcy5vbk1lbW9LZXlDaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYi1jb250ZW50XCIgc3R5bGU9e3twYWRkaW5nOiAxMH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXZpZGVyXCIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UmVjZW50VHJhbnNhY3Rpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudHNMaXN0PXthY2NvdW50c0xpc3R9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ9ezI1fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhY3RWaWV3PXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXI9XCJhY2NvdW50X3VwZGF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiBcIjJyZW1cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBY2NvdW50UGVybWlzc2lvbnM7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHtMaW5rfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuL0FjY291bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBBY2NvdW50SW1hZ2UgZnJvbSBcIi4vQWNjb3VudEltYWdlXCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XHJcbmltcG9ydCBQcml2YXRlS2V5VmlldyBmcm9tIFwiY29tcG9uZW50cy9Qcml2YXRlS2V5Vmlld1wiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBBZGRyZXNzSW5kZXggZnJvbSBcInN0b3Jlcy9BZGRyZXNzSW5kZXhcIjtcclxuaW1wb3J0IFByaXZhdGVLZXlTdG9yZSBmcm9tIFwic3RvcmVzL1ByaXZhdGVLZXlTdG9yZVwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcblxyXG5jbGFzcyBBY2NvdW50UGVybWlzc2lvblJvdyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFjY291bnQ6IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgICAgICAgcHVia2V5OiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgICAgIGFkZHJlc3M6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICAgICAgb25SZW1vdmVJdGVtOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgICAgIHdlaWdodHM6IFByb3BUeXBlcy5vYmplY3RcclxuICAgIH07XHJcblxyXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcykge1xyXG4gICAgICAgIHJldHVybiAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobmV4dFByb3BzLCB0aGlzLnByb3BzKTtcclxuICAgIH1cclxuXHJcbiAgICBfbG9va1VwUHViS2V5Rm9yQWRkcmVzcyhhZGRyZXNzKSB7XHJcbiAgICAgICAgdmFyIGFkZHJlc3NlcyA9IEFkZHJlc3NJbmRleC5nZXRTdGF0ZSgpLmFkZHJlc3NlcztcclxuICAgICAgICB2YXIgcHVia2V5ID0gYWRkcmVzc2VzLmdldChhZGRyZXNzKTtcclxuICAgICAgICByZXR1cm4gcHVia2V5O1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgbmFtZSwgaXRlbV9pZCwgbmFtZV9vcl9rZXk7XHJcbiAgICAgICAgbGV0IHN1ZmZpeCA9IFwiX2FjY291bnRzXCI7XHJcbiAgICAgICAgbGV0IHB1YktleSA9IHRoaXMucHJvcHMucHVia2V5O1xyXG5cclxuICAgICAgICBjb25zdCBrZXlzID0gUHJpdmF0ZUtleVN0b3JlLmdldFN0YXRlKCkua2V5cztcclxuXHJcbiAgICAgICAgbGV0IGhhc19wcml2YXRlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjY291bnQpIHtcclxuICAgICAgICAgICAgbmFtZSA9IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpO1xyXG4gICAgICAgICAgICBpdGVtX2lkID0gdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpO1xyXG4gICAgICAgICAgICBuYW1lX29yX2tleSA9IChcclxuICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL2FjY291bnQvJHtuYW1lfS9wZXJtaXNzaW9uc2B9PntuYW1lfTwvTGluaz5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHB1YktleSkge1xyXG4gICAgICAgICAgICBuYW1lID0gaXRlbV9pZCA9IHB1YktleTtcclxuICAgICAgICAgICAgbmFtZV9vcl9rZXkgPSAoXHJcbiAgICAgICAgICAgICAgICA8UHJpdmF0ZUtleVZpZXcgcHVia2V5PXtwdWJLZXl9PntwdWJLZXl9PC9Qcml2YXRlS2V5Vmlldz5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgc3VmZml4ID0gXCJfa2V5c1wiO1xyXG4gICAgICAgICAgICBoYXNfcHJpdmF0ZSA9IGtleXMuaGFzKHB1YktleSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmFkZHJlc3MpIHtcclxuICAgICAgICAgICAgcHViS2V5ID0gdGhpcy5fbG9va1VwUHViS2V5Rm9yQWRkcmVzcyh0aGlzLnByb3BzLmFkZHJlc3MpO1xyXG4gICAgICAgICAgICBpdGVtX2lkID0gdGhpcy5wcm9wcy5hZGRyZXNzO1xyXG4gICAgICAgICAgICBuYW1lX29yX2tleSA9ICFwdWJLZXkgPyAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFkZHJlc3NcclxuICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgIDxQcml2YXRlS2V5VmlldyBwdWJrZXk9e3B1YktleX0+e3B1YktleX08L1ByaXZhdGVLZXlWaWV3PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBzdWZmaXggPSBcIl9hZGRyZXNzZXNcIjtcclxuICAgICAgICAgICAgaGFzX3ByaXZhdGUgPSBrZXlzLmhhcyhwdWJLZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHRyIGtleT17bmFtZX0+XHJcbiAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuYWNjb3VudCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT17e2hlaWdodDogMzAsIHdpZHRoOiAzMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXtuYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBwdWJLZXkgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWNjb3VudC1pbWFnZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFByaXZhdGVLZXlWaWV3IHB1YmtleT17cHViS2V5fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvbiBuYW1lPVwia2V5XCIgdGl0bGU9XCJpY29ucy5rZXlcIiBzaXplPVwiNHhcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qcml2YXRlS2V5Vmlldz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT17KGhhc19wcml2YXRlID8gXCJteS1rZXlcIiA6IFwiXCIpICsgXCIgcHViLWtleVwifT5cclxuICAgICAgICAgICAgICAgICAgICB7bmFtZV9vcl9rZXl9XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPnt0aGlzLnByb3BzLndlaWdodHNbaXRlbV9pZF19PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25SZW1vdmVJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbV9pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5yZW1vdmVfd2l0bmVzc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEFjY291bnRQZXJtaXNzaW9uc0xpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBhY2NvdW50czogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdHNMaXN0LFxyXG4gICAgICAgIG9uQWRkSXRlbTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgICAgICBvblJlbW92ZUl0ZW06IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXHJcbiAgICAgICAgdmFsaWRhdGVBY2NvdW50OiBQcm9wVHlwZXMuZnVuYyxcclxuICAgICAgICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLCAvLyBhIHRyYW5zbGF0aW9uIGtleSBmb3IgdGhlIGxhYmVsLFxyXG4gICAgICAgIHBsYWNlaG9sZGVyOiBQcm9wVHlwZXMuc3RyaW5nLCAvLyB0aGUgcGxhY2Vob2xkZXIgdGV4dCB0byBiZSBkaXNwbGF5ZWQgd2hlbiB0aGVyZSBpcyBubyB1c2VyX2lucHV0XHJcbiAgICAgICAgdGFiSW5kZXg6IFByb3BUeXBlcy5udW1iZXIsIC8vIHRhYmluZGV4IHByb3BlcnR5IHRvIGJlIHBhc3NlZCB0byBpbnB1dCB0YWdcclxuICAgICAgICB3ZWlnaHRzOiBQcm9wVHlwZXMub2JqZWN0IC8vIHdlaWdodHM6IGhhc2ggb2Yge2FjY291bnQgaWQgLT4gd2VpZ2h0fVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBzZWxlY3RlZF9pdGVtOiBudWxsLFxyXG4gICAgICAgICAgICBpdGVtX25hbWVfaW5wdXQ6IFwiXCIsXHJcbiAgICAgICAgICAgIHdlaWdodF9pbnB1dDogXCJcIixcclxuICAgICAgICAgICAgZXJyb3I6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub25JdGVtQ2hhbmdlID0gdGhpcy5vbkl0ZW1DaGFuZ2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uSXRlbUFjY291bnRDaGFuZ2UgPSB0aGlzLm9uSXRlbUFjY291bnRDaGFuZ2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uQWRkSXRlbSA9IHRoaXMub25BZGRJdGVtLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgb25JdGVtQ2hhbmdlKGl0ZW1fbmFtZV9pbnB1dCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2l0ZW1fbmFtZV9pbnB1dH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uSXRlbUFjY291bnRDaGFuZ2Uoc2VsZWN0ZWRfaXRlbSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkX2l0ZW0sIGVycm9yOiBudWxsfSk7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkX2l0ZW0gJiYgdGhpcy5wcm9wcy52YWxpZGF0ZUFjY291bnQpIHtcclxuICAgICAgICAgICAgbGV0IHJlcyA9IHRoaXMucHJvcHMudmFsaWRhdGVBY2NvdW50KHNlbGVjdGVkX2l0ZW0pO1xyXG4gICAgICAgICAgICBpZiAocmVzID09PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzID09PSBcInN0cmluZ1wiKSB0aGlzLnNldFN0YXRlKHtlcnJvcjogcmVzfSk7XHJcbiAgICAgICAgICAgIGVsc2UgcmVzLnRoZW4oZXJyb3IgPT4gdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6IGVycm9yfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbldlaWdodENoYW5nZWQoZXZlbnQpIHtcclxuICAgICAgICBsZXQgdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWUudHJpbSgpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3dlaWdodF9pbnB1dDogcGFyc2VJbnQodmFsdWUpfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25BZGRJdGVtKGl0ZW0pIHtcclxuICAgICAgICBpZiAoIWl0ZW0pIHJldHVybjtcclxuICAgICAgICBsZXQgbmV4dF9zdGF0ZSA9IHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRfaXRlbTogbnVsbCxcclxuICAgICAgICAgICAgaXRlbV9uYW1lX2lucHV0OiBcIlwiLFxyXG4gICAgICAgICAgICB3ZWlnaHRfaW5wdXQ6IFwiXCIsXHJcbiAgICAgICAgICAgIGVycm9yOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKG5leHRfc3RhdGUpO1xyXG4gICAgICAgIGxldCBpdGVtX3ZhbHVlID0gdHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIgPyBpdGVtIDogaXRlbS5nZXQoXCJpZFwiKTtcclxuICAgICAgICB0aGlzLnByb3BzLm9uQWRkSXRlbShpdGVtX3ZhbHVlLCB0aGlzLnN0YXRlLndlaWdodF9pbnB1dCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25XZWlnaHRLZXlEb3duKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBldmVudC5rZXlDb2RlID09PSAxMyAmJlxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLndlaWdodF9pbnB1dCAmJlxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNlbGVjdGVkX2l0ZW1cclxuICAgICAgICApXHJcbiAgICAgICAgICAgIHRoaXMub25BZGRJdGVtKHRoaXMuc3RhdGUuc2VsZWN0ZWRfaXRlbSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHZhciBrZXkgPSAwO1xyXG4gICAgICAgIGxldCBhY2NvdW50X3Jvd3MgPSB0aGlzLnByb3BzLmFjY291bnRzXHJcbiAgICAgICAgICAgIC5maWx0ZXIoaSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vaWYgKHRoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0KSByZXR1cm4gaS5nZXQoXCJuYW1lXCIpLmluZGV4T2YodGhpcy5zdGF0ZS5pdGVtX25hbWVfaW5wdXQpICE9PSAtMTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEuZ2V0KFwibmFtZVwiKSA+IGIuZ2V0KFwibmFtZVwiKSkgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhLmdldChcIm5hbWVcIikgPCBiLmdldChcIm5hbWVcIikpIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAubWFwKGkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFBlcm1pc3Npb25Sb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtrZXkrK31cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17aX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cz17dGhpcy5wcm9wcy53ZWlnaHRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZUl0ZW09e3RoaXMucHJvcHMub25SZW1vdmVJdGVtfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGtleV9yb3dzID0gdGhpcy5wcm9wcy5rZXlzLm1hcChrID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxBY2NvdW50UGVybWlzc2lvblJvd1xyXG4gICAgICAgICAgICAgICAgICAgIGtleT17a2V5Kyt9XHJcbiAgICAgICAgICAgICAgICAgICAgcHVia2V5PXtrfVxyXG4gICAgICAgICAgICAgICAgICAgIHdlaWdodHM9e3RoaXMucHJvcHMud2VpZ2h0c31cclxuICAgICAgICAgICAgICAgICAgICBvblJlbW92ZUl0ZW09e3RoaXMucHJvcHMub25SZW1vdmVJdGVtfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGFkZHJlc3Nfcm93cyA9IHRoaXMucHJvcHMuYWRkcmVzc2VzLm1hcChrID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxBY2NvdW50UGVybWlzc2lvblJvd1xyXG4gICAgICAgICAgICAgICAgICAgIGtleT17a2V5Kyt9XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzcz17a31cclxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzPXt0aGlzLnByb3BzLndlaWdodHN9XHJcbiAgICAgICAgICAgICAgICAgICAgb25SZW1vdmVJdGVtPXt0aGlzLnByb3BzLm9uUmVtb3ZlSXRlbX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBlcnJvciA9IHRoaXMuc3RhdGUuZXJyb3I7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhZXJyb3IgJiZcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZF9pdGVtICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudHMuaW5kZXhPZih0aGlzLnN0YXRlLnNlbGVjdGVkX2l0ZW0pICE9PSAtMVxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgZXJyb3IgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0ud2FybmluZzNcIik7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhZXJyb3IgJiZcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pdGVtX25hbWVfaW5wdXQgJiZcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5rZXlzLmluZGV4T2YodGhpcy5zdGF0ZS5pdGVtX25hbWVfaW5wdXQpICE9PSAtMVxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgZXJyb3IgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0ud2FybmluZzRcIik7XHJcblxyXG4gICAgICAgIGxldCBjdyA9IFtcIjEwJVwiLCBcIjcwJVwiLCBcIjMwJVwiLCBcIjEwJVwiXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbD17dGhpcy5wcm9wcy5sYWJlbH1cclxuICAgICAgICAgICAgICAgICAgICBlcnJvcj17ZXJyb3J9XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5zdGF0ZS5pdGVtX25hbWVfaW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU9e3RoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uSXRlbUNoYW5nZX1cclxuICAgICAgICAgICAgICAgICAgICBvbkFjY291bnRDaGFuZ2VkPXt0aGlzLm9uSXRlbUFjY291bnRDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgb25BY3Rpb249e3RoaXMub25BZGRJdGVtfVxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbl9sYWJlbD1cImFjY291bnQudm90ZXMuYWRkX3dpdG5lc3NcIlxyXG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXt0aGlzLnByb3BzLnRhYkluZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93UHViS2V5PXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVBY3Rpb25CdXR0b249eyF0aGlzLnN0YXRlLndlaWdodF9pbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICBhbGxvd1VwcGVyY2FzZT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUud2VpZ2h0X2lucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbldlaWdodENoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwid2VpZ2h0LWlucHV0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQucGVybS53ZWlnaHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMub25XZWlnaHRLZXlEb3duLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXt0aGlzLnByb3BzLnRhYkluZGV4ICsgMX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9BY2NvdW50U2VsZWN0b3I+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e3BhZGRpbmdUb3A6IFwiMnJlbVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t3aWR0aDogY3dbMF19fSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3dpZHRoOiBjd1sxXX19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0uYWNjdF9vcl9rZXlcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7d2lkdGg6IGN3WzJdfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS53ZWlnaHRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7d2lkdGg6IGN3WzNdfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5hY3Rpb25cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWNjb3VudF9yb3dzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2tleV9yb3dzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2FkZHJlc3Nfcm93c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudFBlcm1pc3Npb25zTGlzdCwge2F1dG9zdWJzY3JpYmU6IGZhbHNlfSk7XHJcbiIsImltcG9ydCBSZWFjdCwge0NvbXBvbmVudH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBCYXNlTW9kYWwgZnJvbSBcIi4vTW9kYWwvQmFzZU1vZGFsXCI7XHJcbmltcG9ydCBaZkFwaSBmcm9tIFwicmVhY3QtZm91bmRhdGlvbi1hcHBzL3NyYy91dGlscy9mb3VuZGF0aW9uLWFwaVwiO1xyXG5pbXBvcnQgV2FsbGV0VW5sb2NrQWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9XYWxsZXRVbmxvY2tBY3Rpb25zXCI7XHJcbmltcG9ydCBXYWxsZXREYiBmcm9tIFwic3RvcmVzL1dhbGxldERiXCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IFByaXZhdGVLZXlTdG9yZSBmcm9tIFwic3RvcmVzL1ByaXZhdGVLZXlTdG9yZVwiO1xyXG5pbXBvcnQgUXJjb2RlTW9kYWwgZnJvbSBcIi4vTW9kYWwvUXJjb2RlTW9kYWxcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJpdmF0ZUtleVZpZXcgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBwdWJrZXk6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLl9nZXRJbml0aWFsU3RhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5pdGlhbFN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiB7d2lmOiBudWxsfTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMuX2dldEluaXRpYWxTdGF0ZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICB2YXIgbW9kYWxJZCA9IFwia2V5X3ZpZXdfbW9kYWxcIiArIHRoaXMucHJvcHMucHVia2V5O1xyXG4gICAgICAgIFpmQXBpLnN1YnNjcmliZShtb2RhbElkLCAobmFtZSwgbXNnKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuYW1lICE9PSBtb2RhbElkKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmIChtc2cgPT09IFwiY2xvc2VcIikgdGhpcy5yZXNldCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB2YXIgbW9kYWxJZCA9IFwia2V5X3ZpZXdfbW9kYWxcIiArIHRoaXMucHJvcHMucHVia2V5O1xyXG4gICAgICAgIHZhciBrZXlzID0gUHJpdmF0ZUtleVN0b3JlLmdldFN0YXRlKCkua2V5cztcclxuXHJcbiAgICAgICAgdmFyIGhhc19wcml2YXRlID0ga2V5cy5oYXModGhpcy5wcm9wcy5wdWJrZXkpO1xyXG4gICAgICAgIGlmICghaGFzX3ByaXZhdGUpIHJldHVybiA8c3Bhbj57dGhpcy5wcm9wcy5jaGlsZHJlbn08L3NwYW4+O1xyXG4gICAgICAgIHZhciBrZXkgPSBrZXlzLmdldCh0aGlzLnByb3BzLnB1YmtleSk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICA8YSBvbkNsaWNrPXt0aGlzLm9uT3Blbi5iaW5kKHRoaXMpfT57dGhpcy5wcm9wcy5jaGlsZHJlbn08L2E+XHJcbiAgICAgICAgICAgICAgICA8QmFzZU1vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVmPXttb2RhbElkfVxyXG4gICAgICAgICAgICAgICAgICAgIGlkPXttb2RhbElkfVxyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXk9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheUNsb3NlPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8aDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5rZXlfdmlld2VyXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucHVibGljXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnB1YmtleX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnByaXZhdGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUud2lmID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9e3tmb250V2VpZ2h0OiA2MDB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUud2lmfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbi1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkhpZGUuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjbGlja2FibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zaG93UXJDb2RlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7aGVpZ2h0OiA1MH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtyZXF1aXJlKFwiYXNzZXRzL3FyLnBuZ1wiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uU2hvdy5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnNob3dcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0uYnJhaW5cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2tleS5icmFpbmtleV9zZXF1ZW5jZSA9PSBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJOb24tZGV0ZXJtaW5pc3RpY1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoga2V5LmJyYWlua2V5X3NlcXVlbmNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7a2V5LmltcG9ydF9hY2NvdW50X25hbWVzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkuaW1wb3J0X2FjY291bnRfbmFtZXMubGVuZ3RoID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLmZyb21cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7a2V5LmltcG9ydF9hY2NvdW50X25hbWVzLmpvaW4oXCIsIFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b24tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkNsb3NlLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCIgYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNmZXIuY2xvc2VcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvQmFzZU1vZGFsPlxyXG4gICAgICAgICAgICAgICAgPFFyY29kZU1vZGFsIHJlZj1cInFybW9kYWxcIiBrZXlWYWx1ZT17dGhpcy5zdGF0ZS53aWZ9IC8+XHJcbiAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICB2YXIgbW9kYWxJZCA9IFwia2V5X3ZpZXdfbW9kYWxcIiArIHRoaXMucHJvcHMucHVia2V5O1xyXG4gICAgICAgIFpmQXBpLnB1Ymxpc2gobW9kYWxJZCwgXCJvcGVuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgICAgIHZhciBtb2RhbElkID0gXCJrZXlfdmlld19tb2RhbFwiICsgdGhpcy5wcm9wcy5wdWJrZXk7XHJcbiAgICAgICAgWmZBcGkucHVibGlzaChtb2RhbElkLCBcImNsb3NlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU2hvdygpIHtcclxuICAgICAgICBXYWxsZXRVbmxvY2tBY3Rpb25zLnVubG9jaygpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBwcml2YXRlX2tleSA9IFdhbGxldERiLmdldFByaXZhdGVLZXkodGhpcy5wcm9wcy5wdWJrZXkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7d2lmOiBwcml2YXRlX2tleS50b1dpZigpfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7fSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25IaWRlKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3dpZjogbnVsbH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dRckNvZGUoKSB7XHJcbiAgICAgICAgdGhpcy5yZWZzLnFybW9kYWwuc2hvdygpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5pbXBvcnQgWmZBcGkgZnJvbSBcInJlYWN0LWZvdW5kYXRpb24tYXBwcy9zcmMvdXRpbHMvZm91bmRhdGlvbi1hcGlcIjtcclxuaW1wb3J0IEJhc2VNb2RhbCBmcm9tIFwiLi9CYXNlTW9kYWxcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgUVJDb2RlIGZyb20gXCJxcmNvZGUucmVhY3RcIjtcclxuaW1wb3J0IHtBZXN9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5cclxuY2xhc3MgUXJjb2RlTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuX2dldEluaXRpYWxTdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMub25QYXNzd29yZEVudGVyID0gdGhpcy5vblBhc3N3b3JkRW50ZXIuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uS2V5RG93biA9IHRoaXMub25LZXlEb3duLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbkNhbmNlbCA9IHRoaXMub25DYW5jZWwuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uQ2xvc2UgPSB0aGlzLm9uQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5pdGlhbFN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlzU2hvd1FyY29kZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGtleVN0cmluZzogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICBaZkFwaS5wdWJsaXNoKHRoaXMucHJvcHMubW9kYWxJZCwgXCJvcGVuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2FuY2VsKCkge1xyXG4gICAgICAgIFpmQXBpLnB1Ymxpc2godGhpcy5wcm9wcy5tb2RhbElkLCBcImNsb3NlXCIpO1xyXG4gICAgICAgIHRoaXMub25DbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVmcy5wYXNzd29yZF9pbnB1dCkgdGhpcy5yZWZzLnBhc3N3b3JkX2lucHV0LnZhbHVlID0gXCJcIjtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMuX2dldEluaXRpYWxTdGF0ZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBvblBhc3N3b3JkRW50ZXIoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBsZXQgcHdkID0gdGhpcy5yZWZzLnBhc3N3b3JkX2lucHV0LnZhbHVlO1xyXG4gICAgICAgIGxldCBrZXkgPSB0aGlzLnByb3BzLmtleVZhbHVlO1xyXG4gICAgICAgIGlmIChwd2QgIT0gbnVsbCAmJiBwd2QgIT0gXCJcIikge1xyXG4gICAgICAgICAgICBpZiAoa2V5ICE9PSB1bmRlZmluZWQgJiYga2V5ICE9IG51bGwgJiYga2V5ICE9IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBwd2RfYWVzID0gQWVzLmZyb21TZWVkKHB3ZCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcXJrZXkgPSBwd2RfYWVzLmVuY3J5cHRUb0hleChrZXkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNTaG93UXJjb2RlOiB0cnVlLCBrZXlTdHJpbmc6IHFya2V5fSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL25vdGlmeS5lcnJvcihcIllvdSdkIGJldHRlciBlbnRlciBhIHBhc3N3b3JkIHRvIGVuY3J5cHQgdGhlIHFyIGNvZGVcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzU2hvd1FyY29kZTogdHJ1ZSwga2V5U3RyaW5nOiBrZXl9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25LZXlEb3duKGUpIHtcclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykgdGhpcy5vblBhc3N3b3JkRW50ZXIoZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBwb3MgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmlzU2hvd1FyY29kZSkgcG9zID0ge3RleHRBbGlnbjogXCJjZW50ZXJcIn07XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPEJhc2VNb2RhbFxyXG4gICAgICAgICAgICAgICAgb25DbG9zZT17dGhpcy5vbkNsb3NlfVxyXG4gICAgICAgICAgICAgICAgaWQ9e3RoaXMucHJvcHMubW9kYWxJZH1cclxuICAgICAgICAgICAgICAgIHJlZj1cIm1vZGFsXCJcclxuICAgICAgICAgICAgICAgIG92ZXJsYXk9e3RydWV9XHJcbiAgICAgICAgICAgICAgICBvdmVybGF5Q2xvc2U9e2ZhbHNlfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e21hcmdpbjogXCIxLjVyZW0gMFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImg0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJtb2RhbC5xcmNvZGUudGl0bGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxmb3JtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZ1bGwtd2lkdGhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbjogXCIwIDMuNXJlbVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25TdWJtaXQ9e3RoaXMub25QYXNzd29yZEVudGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub1ZhbGlkYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU2hvd1FyY29kZSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBzdHlsZT17cG9zfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjZmZmXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogXCIuNzVyZW1cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UVJDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT17MjU2fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmtleVN0cmluZ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwibGVmdC1sYWJlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2FmZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJtb2RhbC5xcmNvZGUuaW5wdXRfbWVzc2FnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJwYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkZvY3VzPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZzLnBhc3N3b3JkX2lucHV0LnNldEF0dHJpYnV0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwicGFzc3dvcmRfaW5wdXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5vbktleURvd259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3Bvc30+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbi1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU2hvd1FyY29kZSA9PSBmYWxzZSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25QYXNzd29yZEVudGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJtb2RhbC5va1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uIHByaW1hcnkgaG9sbG93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkNhbmNlbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImNhbmNlbFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvQmFzZU1vZGFsPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcblFyY29kZU1vZGFsLnByb3BUeXBlcyA9IHtcclxuICAgIG1vZGFsSWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcclxuICAgIGtleVZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nXHJcbn07XHJcblFyY29kZU1vZGFsLmRlZmF1bHRQcm9wcyA9IHtcclxuICAgIG1vZGFsSWQ6IFwicXJfY29kZV9wYXNzd29yZF9tb2RhbFwiXHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFFyY29kZU1vZGFsO1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFHUUFBQUJrQ0FJQUFBRC9nQUlEQUFBQUNYQklXWE1BQUFzVEFBQUxFd0VBbXB3WUFBQUFCM1JKVFVVSDRRb0xCekVLcjdvRkRnQUFJQUJKUkVGVWVOcTlmWG1ZWFZXVjcxcDc3M1B1dlZVVlNBTDJvNDBLbWpDRWdpU0VWRlVTQWlSUjZVOUJ3YW45dFBHMU9QTGsyYlFUYVFkODlyT2Zvb0pEODBSQlVmVHo0UlBuVnB4OWJadUV6SUhNQWFJQ3JhSWlaS2pwbnJQM1h1djlzZTVkdGV0VTFVMVNpdmVQK201dXp0bG43N1hYdEg5ck9Qald0NzUxeTVZdHpya1FRcFpsSVFSampER0dpT0I0UHN4c2pJa3hqb3lNYk5teWhaa0JBQkhsZjRuSUdOUFgxOWZUMCtPOTk5NXYyclFwdlJjUjVScjVycmZMUC9WS0l0cTdkKy9WVjE5dGpBR0FQTTlEQ015YzUvbmN1WE0vL2VsUHk0MTc5dXg1NHh2ZldLL1hpVWpXSlUvcFBIOXJiUWdCQUpRQzhtaG1qakVPREF5NGJkdTJyVisvWG42Tk1TS2l6RHVkNHJGOFpIU1o5K2pvYUtQUmtBR05NVEpVV1piYnQyKzMxbnJ2MHlrS2xXVUUvVjF1a1EyVCtjZ0ZpSGpvMEtGdDI3WjU3K1ZIV2FHMXR0bHN4aGl0dGN3OE9EaDR6ejMzNk1SMHFEelAwNmRQSkpidVVJeFJaeUtUUVVTblUwbnZrV1VmRjdGMDlCQkN2VjZYNy9KNG1YR2U1MFJVWVZqZEd5R1o4cEU4WGNtblh4RFJHTk5zTm5WVndnc3hSaUdaL2c0QXpqa2RXVGZzV0paUW9iTE95Z2gxMGwyVngwL2pZNHlSK1NGaUNDSEdHR01VNmxSSUw0OUxKMmV0RlVLa2dzbk0zbnNkUjRhU25SREtLaFdNTVljT0hkSUhPZWZrdTB3bXhpZ0Q2dVpOL01qVFpVRDV5TzdxamlLaWtiSGtWNkdpUElPUDh5TzNLNkdkYzlaYWEyMldaVEtQUE05VmxGU0NBTUI3WDZ2VmRFTE9PVVRNc3V6c3M4OEdnQ3pMWkJ4WlNRaEJ1SU9JR28xR1gxK2ZFREhHdUcvZnZuU3pSVDd5UE8vdjc1Y1pldS9Mc3B4cS9yb3JJUVFaY0dob1NNYlVhNXhNU05Ta2lxdHo3bmpGVUpsZk5iR0ttTFUyeGlqS29pS0d3dGY2Vnk4d3hzeVlNVU51RjhXdm5Kdm51UXc0T2pxcWtpS3FVRFpHOWtEWVZpZ3J1a3o1Y2RMNVY1aE9HUGJJa1NPcXNJd3hUcWlZWGljOGZMd0tQdFdGS2tjVlhTQ0xuSGhMNVVlNVJhbVdxZ2dpS29wQ1pWbmtTOWFaWlprYUtMMUFwcUcwVnFwMXNJazZpT3lmRUZla3phUmFVSzQ3cXBYdDhDUmxITkZCa3lvcFhieXFNL2xGMWJQY3FPSlFVWFlpTEhMbHlNaUlYaXdqcUppcmRWWXBVYkoybUx4b2dJbU1Zb3l4MW81NUU4TE02WVozL2xSWVdyL3JidWcvUmRsWDNCR2RsaWdYZFZ4RThSSFI1ejczdVN6TFJJVXRXTEJBeDF5eFlvV01Ga0s0Nzc3N1pPYk9PU1dyZW0zeUZPKzlQbmZUcGsxVExVYzBJeUwyOWZXSlVrcGR4VEdkOVdSL0toWmR1Uy9sTE4xOG5aK1FUSFpWTElBNmJzcWJxb24wdTR3d1VhNlBhN1lWc1JoVFVFODJwWVNoMVBtVUw3S1orc3RFNTZ1eVlERkJZbUdGSE1JdjZpTElJTUtHY3YwMGRJZ3E4cW4wdFhteWlTWFAxczFYYVJLRm9scXl3aG82YjcxUzZTSktYU1JVcjFSSjlONkwxUC9wTTYvb2s3OEVzVlFwMUdvMThSN1V5c2luS0FwaGhKUndIWmhVMldka1pPU2VlKzdSd2M4OTkxeHg2NXh6cVFFOVhzdWUwcWh5NDErSXMxS2VrbTBYZmtsVmUyVisrcjhWdWRCeHVycTYxTXRCeE83dWJ2bXZvaWltWWMwbkVqVDFRdjV5T2l0MUdsU1J5K2FuQjJZbHhNU2ppUnliVTU5RGJiZU1tVnJiUE0vL0ZKM1ZhZVAvQXRaUTZhS25xRlNGangxVGs0T2grTWFxczlRUlZZTW9CcXVycTB0ZEJJV1Y1T3hTWWNOakY4YVV0U3NjT2gzT0VrZThnbFYxZHZaU1JLRXlKL0hnSjRyaDRzV0xWV0RWZWlMaXhvMGJMN3p3UWdXRmpvb2FIYU95VDdFemRXdi9ESnlWcnFHQ1F4MExaeDBqSjJaWnBrQk55b24xZWwzdHB2cGN1aVhxN29xdmE0eFJaSzB6U0tmanBNZU15dExjdEdVcTNmT2ptakQ1ZTFTeUtqdW81bFk4VDcycW9paGtQUXBzaW9KVDVpM0xVcUZCRVdFNVkzYyt4dW1ZdWh6eFFvNkpXRk9SUURsZi9KcWpxbEwxc1BUR3pxZFp1U3lFTUR3OHJGQ3ZjODU3TDZjODRaUVU4NUxQOFBDd3pGbmNmYlVTV1piSkpJV0NIYlpXMkhOd2NGRHVUVjI1b3hCcktsR2ZxS282TDE2dmQ4Nk5qSXlJZ0J6VktnSEF2bjM3bElzWExGaHczMzMzaWR6MTl2WXFnZEpUdDJ4ZXlzaHlMQlVhaVIrN2JObXl6dXVTdFlRUUpwNGlwc2xaRlpDKzgrSjF3UXBhZFJaYlBkd2RPWEpFL0lDeUxPdjF1b3BKclZhcjZHQWhvcDZIMU8rVlExS2U1NHBWVEhYb1V6NFZ3VS9QQm44R25TVnpPa2FkVmJuM3FGWXBuYTVFbTFKMHhYc3Zyb09xY0VWQmxOYmlPc2pCU0hTY1RuaXFPWWpqVm9IWC93d2VmSW9XSEl2elVrRXBqeHBra3hrTDFpNytwL2haY3JzS3NucTJxZDhyODVGbHkxNTJkWFVwNE5GaHR4UmZWZEZ6enZYMDlJeTdhTldxVlJVZjUxajJ2NFBZMW1vMVVTaUtkcXJ6SXU3aVJHY3ZCZjUxQXVKbnlUZzdkdXd3N1UwNWQrRUNId016eCtqdldiOVdXWHZod29YcTlHN2F0Q20xL1JPZHVPUDlPT2RXcmx4cEZFVlZuMlVhUWNQMHVGQVVSUWhCeEVjUkQzV2FuSE55ZGxNV1NPMVVpZ3VyQnkrSXFKRFhXdHZWMVdXTnNLckxzN29BRWhLTWthaVNrcjVlcjZlNzBnR0FQeW9UeUxCRzVEL2QyR25EeWdySU91Y0VyZFlRVnFwS3hMVEwzb2cyeWJKTU5IU0swbFJnMjh4bEZjc3JrZTBLRGk2RUU5M1ViRGJUY09UMEZwWGlxTzdnd1lPcEV0R05uVVowUjJnaHQzdnY1UUd5QVBIdXhOOVJKa29KcXVxdkJlQTZKMHNWODU5bFdSbGlsdFdJd3VHRGgySUl6cmtzeTJ5V2kyaXIvaFpUSUdNS2Irb0p0SEpLT3k0RlRVUUhEeDVFc1JkaWp5c3c1dkVTUzdaZHBWaUVRaWlWZW5mNlQrOWpsdGxFaE5sN3YyWExOZzJKSHpseVJERGxQTThIQnBZWkEwVlIxR3JDWWd4Z2podzU4c0FEKy9NOEh4a1ptVDE3OXJ4NTgzUS9oRmpOWmxNTWdyTGs5RUo4M3ZzOHoxRTM0YzhGTGFhSE5SV1p0V3ZYaWxvcHkvTHNzOCtlTVdNR01XYVpRNFJJMFJvYnlZc213cmFCVm40UlA0c0JLRVpya1NtZ01RQ0dHUUdSWWd3aDFHcTE5R0FFQUF3dzJoeHQxQnNNREFBSVNFeUlhQUNudlRwTWNWNlZ3YzVBd2hSalJaRkUyZHVob2FHNzdycnJLMS81eW85Ly9GT2hZSjdueldaVE50a1ljLzZTL2hlODRBVlhYWFhWbkRsL1RVd3grc3hsUHZqY1RWaTJSR3VBRFRCRC9NQy8vTXQzdi90ZHRCYkJSb2JjWlVWUkNQK3E2NHVJejd2MCtiMjl2WmRmZnJrR2UyS01lWmJqOGZ0Slk2U2c5a2ZQRU5PSTNVc0FmTFE1eU94Ly9adUhYdnF5SzR3RlFEQVdKb1lQV3M5R2k4WUJtS1hMbCsyN2Z6OXhIQzFHaUtPaTdPbE1aSDdlRjh6K2RhLzlyd2lBQm93Qk1HTXBMaG9lYnFrL0JPTXNJTHpzNVg5NzhQQWhZZzRVSTA5dmFhMHBRWDkvZnlVVzNkblZjcEQxemorSG1RUDV5Skw5d1V3Y2lrUE01Zlh2Zmc4QUlJS29VWU81V3BNMCtJcUlGaUN6RHNDWXJBdHM3WTMvL1IrYmtUMXpKQ2JtWnJQSkhKa2pNNGZRb3BsbkgwYnBtdGU4eUJwd0NIVUU0MmFtM3RQNGc1Y3h4dW5mTzcvODFjRHNtWWs5TTBkUHpFek1nV01aQ2lZVzFtUG10V3ZYNnZJbFhqbVc2OURWMWFWakt5TFJ3Y21PRUoveWxLZUlRakZvd0FBQU1aSE42b3NYTExwdjE5NWFyVkVVbzhaWkZvOEh1Syt2NzduUGZhNDRGa1QwMDUvK2RPdldyY0VYSVFacmJmUk5OTzdXVC83dmRUOWZ1MzM3VnJSUUZyNWVxd0ZBMlN6eWVzMWFKQUtHNE1FM2NuRktvRjUzWlROUUNKVmpuU0ljdFN3cnlzSUFHZ05FOE1wWHZHSjR0UG1xdjcvU0dFWUFZMFd2aVEvc1VqZEFiaGU2YSs1VTY3TjY5ZW8wN2lRT1pHY3hYcjU4dWZjdFdhSG9mVG5Dc1RudjFEa1pRbVp6QUFjR0FlSFp6N25rZTkvL3NkaitpU3k5ZS9mdWw3LzhaUWpRbFZzRVFMU3UxblBLMCtjRzVzQmNsRzNmTXFqb1JNK2VBMTk5MWVVdGNVUDQyQzEzcXJSS0JFeXdtbzBiTjc3cm5Xc2E5YnlXT3hrOHIzV2pheHg0K05FZzF4UEhHQ05UWUJZZVV5ZEdVeEtOTWN1WEx4K1hLWFR4eFJkWERwQ2R3L2ZHNGNCQTM5aEsyRE0zTDF4K25nV28yeHFDQTNBOU0wNzhmei83OXhEWkIwNWRhcG1OT0N0bDhNenhvVi9zUDIzT1V4eUFGUkczWFFNclZnYm1JaklKbFltWkFsUHd2dkJjY3VEWFh2bDhSTXpyTlFEei9vL2VrYXEyc2l5VGpZa2MvRXN1djZ5Uk9WRUpZR3FyTHJuTU13ZUt2bXpHNklrNUVrZGlWV1VoaEIwN2RxalRkODQ1NTFTSmxUb1VxWnFmOUFNSVM1ZjJoeEE0Y3ZTQnliLzMzVy9QRENCQTdtb0EyVjgvOWRRL1BQWjRTVkdtSW12UUFmV2ZnVGxHVDM2RS9mQUZTeFowNTlhaVE1T0R5VDkwNHljQ3MyK3JxaGhLMFYrak5NS0IzM0wxeTFzUUFMci84ZEV2Q0t1bXpDc0lKMU5nOWh6TDh4ZWVVM2MyejNNQUI3YjI2Qk1qOG1obVQ4d2hNa1ZtNGpWcjFvZ01MbHEwU0JJcEpxcDVJN2lQZXFGQ1hYVWpKa21nTUpZSXJMRmdDRGsrK3V0ZmYrQUROd1lDQmloRG5EVjc5b08vK01Yc2syY0RCUUF5Q0lxM3FGTElzb3lJRU5nWWd5Nkx4T3Z1MlhqS0thY0FCNkFTbU5hc2VjZmhJOE1SVURTbnNWWmNPSWNPQWd5UERBbURpMjR0eTFKT2JFVlJpS29WVkNzU01RRWdmdTcyejhZUWZWa0NFTVM0Y2ROMmtuTWlrZGdGTkFCSTlYcGREa1p5eGt5VHZNWkJOSlhqenNTSTduZ0VsV3RaM213T0F4Tm1lTzIxMTZJMUFJQlpEZ2cvWDdlT2dZakpXUk5qQ1VCaS9pU3BUQVN3WmQwQlkyUUFaL01HWk5uUC91TS9MRUpOM05KSTExMTNuYk1BQm9naEJBSnM2MlBEOVN3M3lCUWlBR2RXV0thRmRnZ3MwNEk2ckl0RUFMQmc4YUlzdzY2YVF5QUF1dSsrdlJTRitHbjBoQ3JoeURRM2NZeFlnc2FLUVZGQ2RnZ2ZHYkJFVUsvWEFQbUp4eDc3K3JmK0xRUmljQnpERzYrNTVveXo1alhxR1NJU2s3TmoyUW15SkltenQzd1dabU10QXhCZ0NQVFVwei90bW12ZXdCR0FJeURlZnR0dFBqQXhNSUoxamhsQnJBWmlDTUcwWTl0RUFaSWtXTTJ4SVNJR3RNNlI5d0J3M3NKeml5STRCQVFZR2hwQkN3UnMycWdwTTh2cFExaEVDRElwdTR6TDl0WWcrNWczTkc1RUFBREtPUXdQQTNvb3Nscytkb096bVFNQUNHQzZQM3pUVFFiWmNIU01salBnVmpKdVpYOWFnd05DSkFSQ0pyVE8yT3g5Ny91Zm9va3RSSVQ0bWE5OE4rTm1BQ0FBNUJJUlM0aGdBWndOREU1c3Z6VWE1a21aQWhFTkFITmhzZ2F3YThlN2F3WW95MnhnWUlUSURBd1dBR2dNZlVmRXRXdlhpbXdwdmlTZmdZRUJrK1o1cDdsYmltMmw2Zk5FQkQ2NFdqMXlCQXZmK01hM3l1QVp3THI4OGhlL3BPYXNCUVFBcHBiZ2REb3pvVDdSR2pRQTBOM2RHT2c3cDIxcThHdDNmUVhRVXRzWGlqRTZjSEpVdEJhTnpZQ05ncitDekFqUHRwTC9tQXcwS0J3QnNIdjI3clNtenJhSWtDMWMwT3VFenVMS0lxQUJBR3cwR2dKTXBqQ1doaWF0dFkxR3czVE9HVXdMSDlMc2ZvdFplZVNKZmZmL0o0REpySTJSWC8vNjExb0RER1BJa1N4enlqTVhNQmhtbGprQkFOaDZkdm5sbHdHMFZNblBmL3BEUU9zUWtBa0FyTEVHQUFnUURVVW95eExRTUtQaVBDb0hMYmdWZ1NJYjIvUFFMelkwUjJxZW00RU1ZTDZzL3p4aHYvWlNRVTdXYWFwcW1nYzg1Z1pJSG55YWRaZm1SbFdTYnpUM3NDUUdnSzJiTjRoM3hJeUErVVVybHFmUE9KWWphdnBRMFpMUGVlNXFDMFJNMXVVd092eTdQeDdHMWlZakFFUUtMZGdhRU5FYVk5T0VUMGdxTW1RVEVCR3dlTmQxN3djb2dET3dwbmRKL3pQbXpFUmc0RGFSMnVxb0xFdE5QdGRqWDVvSEQ2MlRhSklLa1NhdVZNSnpMZWVld1RvSGpMdDNiL1hSQUJJUm5YemFzN3JxeGpBQVJUa1RIaFVJa1NzTUNwSUZ6QWpNWjgzdnRRQUdUWXpCT05qendDOEJ3TFE0bEp4eGdDMmV5UE9jb28raEZFblVtcHVrSU1JZ0ZuZCs4VXRmLzliMzJRQUJRNng5K01NZlJBQUQ3R3hPa2NWZ3lhcHZ1T0dHSTBlT2lMMlcrQzRSN2RtenArbzZUQnFrbVlxem5FVXdCaEIvLzl1SEl4aEFRT0JublhHbUlUQ1lobkNPR2gwWXozMEdtVjAyWTVZRmNKa0JSaTVILy9OM2Y3VFFabDRpSHR0dEtvdFJBR3FNNTRVMHdFTUIzditCNjY5ODladnk3b1luQUF5dmU4T2JMMWs1RUtNSE1BQUdVQlNzRU1zSXo4b1pRMWhNWTVmcVVUdXBMS2hBbzJrSVUzVjhpNnhFelRJQTQ2Ty9mVWlnT2lTZWVmSkpESUNnVVU4d1JtN3NBSUFCTXlHS3IyQVpMWUFCY0NkMlp3ZWJFWXl6QklPajVSaW9oTWpBd0dBelk0Mk5GT3MxZStEK1BSczJiQkR0THZGOVk4d0REenl3ZnYzNk96Ny9tWkdSd0VoRHc3V3N5LzNONmhkLzR1UHZkUXdrVzhnZ1ZxVVNpeGE0VGJQbjA2Q0pNY1pwaGNaVVdTVkNLVlYxQmlDcjVRQXdOSHdZd0lBRERuREN6QlBib1NwcXNRd2ZCVUZFQUFBTEVBR0lBUkF0QUViUE0yZWU4Tmh2SG9mTUdvSm1JY1FpdEE2Qkk0UU1JY1lZS1JvQVg4UTdicnYxaTUrK01WWEdDdms3Qk1RY25PRTQvTDczZm1yTm1xc3RCUENNbVNHR0dNRTVZQWFEUWozVWtLMldtU0dpRk9HTkJRazNiZHBVeVRIVFVHaWFkYWFBSEtJSmNSVElGVWdBa0VPdHNJQk5aR2dWYUpWbENRaU1SMUh6UklKN1FhQ0lnTXhBQk5ZWjlsNVFId3ZRM2QwTnpFeWk0QXdDQzRHRktYSUVDTTB4dVFNR0JFQWJBZ0dZZ0ZuWGpKUGY4WTYzSFJwOFlzMmFxMXNiYUJIQkdJVE10VVpzaVdTYlAyS01hOWV1YlRRYUFpNHNXTEFnOVExZHlvZHBLWUIrRWFSWUFmL0FCTVFRWTZQZWxXZXVMSVlCNGZEQng4VnloeEQxL0lIR01NY3BGWmNCUUFnK3Vpd1B4TWFBUllMZ0R3ME5HV3NneGdEUTA5MEZLQTRtTUlQRmRwQ1J5Vm9zSTRQSmlZcFdoSVZheFgvVzJSREM3Sk5PdWVWVG4zenBTNjRRa1NuS29wN1hpTDJCckFOOHJBQk14VU1RcDllcEEwVkVnbVNseFgxaVVOV3NpbDlTeXl3NCs5U25uZWI5UmdDVDErSFhEejFFRElqV09JSGlSTUYzeWdGQkJDSnlXUVpnckFFZlBMTjNHUjhaSVhZWm9QRU1wODQ1SmZFekVJQUJ3R1VaZ3drUm5JVVZxNTZ6ZXNVQ0lCWjFzM256eHUvODIzZGpDTTdDRTQ4OTlxcS9lOG10bi82YkgvN2dlMmlwbHRlQ0I1ZFI1NXdCRVVENW02WTBpZC9yOXUzYjkvampqMHNZYnVIQ2hZcjhDU3NKamJadjN5NWtic1graVFIbzZhZk5NMENBT2JQLzVZUDdHWUVpVzR2ZWwzbHVzZVdnODlSZUZnbUdhUXpFQ0lqc0hENzB3TzRTZ01YdVlYYjZNMCtOQUE0TUFDRmloT2lvVmFEQ2pNWmxxeTk1M3Z2ZThYcGlzaWhjakFEMFQyOS94MDAzZmR5WTZFdjY5NS84NUxMbnYrVHVIMzZkQ0d3R0ROekJRcGRsYWEwOTZhU1RGaTVjV0t2VmFyV2FKajViYTg4NDR3d1lHQmlRcEJ4TlhWVThxMUpxcElHR3BRTjlITVBQZnZMdE9rTE4xTUVBUVBlamZ6d3lPRnBHSmdIT1JRMTZYMHdWQWdqa2lZSkFYRVZKekRFMEgvL2VOMjhYbXdpbTVtYjhWV0F1U0lBNXo4eWVTL1o4eld1dlFMUUFEa3oyejUvNFFtUUtGRnRvSDhmbTZDQ1R2LzNXV3hDaDBlZ0djQUR1SXgvNWxBOU1YUHBZSGpVMklWNWJCZUFWc3BqdTdtNnRrcW5Jb0ZhWHBtSU1CaDB3SVBmMXIyQUdaQVFFQy9SLzcvcGF2WjV4eTNVQkhCK0NuMHdNYlR2VkMyd21wU251aHovNEtZSkZaR3Z3L1A1bGxsdUJEd2h0RkFSYnlmRm9ERENIRUJEUW9rZ1FlZTlyOWE0WTZUVnZlUDExYi85dnpkSENHQUlNNy95bmR6MzYrOGVLNk5Ga0hVSmVHbEZQazd4VXdST1JFVXFwWDVvbU04cGZ5WWZTTWx0Z09TaHhWOC9zczgrY0U1a0J3VUM4N2JPM2g3WXVUQU9SVTd1a2FFMUcwUU1TQUVRbXpCcWYvOXlkTFpjOWxsZSsraXFJVFpaakVmSVlqWUVOTUhBRXBrWmVLNHRDd1prc3F3RVlCZ1BnUHZpL2JqajlXWE15WndBeHhLRkxMNzNVMmE0T3lVN0dHRlhaYWM1NTZuYVpGTlpRVkpPSU5tL2V2R0hEaHUzYnQrL2Z2My8rL1BsTGxpeTU0SUlMTHJqZ0FqREdNQUJpVWZyWHYvWXExenFOOEw0ZE8zYnUzQk1wYXBGTjU2d1ZqaUNRRm1MTCtINzlLMTh0UEFBU01oSFRpMTUwdWRCUldGUmRXU0lDSnJtcktKcmlkcmVNTDRBUFpKMExrZEUxdnZudEwzc2ZnQ3lnMzcxbjErZHZ2NHY0NkdrTmxSeXA5SEFPSzFldXJLVEpUNVUvMVU1N2RzdVhYY1RFVkk2T0RqMHVvQXhDRHBpZnQyVFphR0RQWERJM3kxRm16MVNraUg0SzhIdG1IeVdVVnpJM21jdFRUcDVsQVd5dER1Z3V1K0lseE93REU3T1BnVWpVaHcrUjMveWFLeVMyZzJDdS8vam5wOVE5eE16eFRhOStLUUowQVFEMG1Lem45eVBFSENuNkVJS0VLVUlJekpGam1RWStVc1U5RG9Qdm5MRlhxYVF4eGxobmlFUHdFVjFXNzU3eHh0ZTkyamxBaUloNDc5YXRIN3ZwWStKQzVWazlSZ1kwNnRCV0tnWXNnRE1JQUw0c2dmRXQvL0FQVHp4eGtCRmlHY0NZRzI2NFFmZ0pBWnl4aVBhNFV4TVFJRFJ2L3R5WFp0VmhCRnpkbEJUNE5WZStNcEloY05iYUdBTHFRYVY5N2hjZG91SlZIYlF6WjRrdVMya01DRXY2KzlwYjUzM3pzRU13Q05abVlucStmZmNQUEhOSkhDaE96QVFRVzBORXpMRTVPc3prbWNzdjNYRTdpaFpEQjFoNzFXdmVFSmdMWDVJWXVKSFJGbU1kRDJjRlp0OGNKQzYvOEttYkFFek5BTGd1UVBlejladUdpMERNUkRReVBNZ2NoZWMxeXpDRld5cWZLWk5uZW50N1R6amhCQUFZSGg3ZXRXdlg0T0FnRWZYMDlDdzY3OXp6emp1dkxDakxEUkRZckhiMzNkKzg5TklYeGVpZHlWeWVYWDdwWlYrODgvKzg4aFYvSzlIcU5QMU04MmlaR1pocWVRWUFOOTd3NFhlLyszckI5WUJoNXNsL2RkdHR0OG8yQzR4VHE0U0ZqNVcxQ0dzOUdJZGVkZlUvL3V2TnQyemIrNnNjUmp5NjU3M2dpa09QL3pZQ09NUkdWeGN3aHdpSThQdmZQZnJJSTQ5bzBhMEl4SXdaTS9URTA0bXpsSnRFNjQ5Rmg3aUlUTVFjdk1oMnlkeGM4L1kzMTZ6SlRTdkR3YnI2eWxYUC9lUGpoNm10NmRKY0QyR3UwQngrY04vdWhiMW4xWjFGZ0ZxdGtkZTZBYkk5K3g4T3pKNHBjaG5pYUtRaWxMNGRCRDBPemlLT2dabXBKT1pmN2QzbW5IRnllamVOYTY5N3o2Z2ZtNW9vcit1dXU2NFNyTS96dksrdjcxaDFsbVNqYVE1RXE2Z0ZEQkJUQU9QQU9VZk1BUGFHajN6MHlpdGZHWW1OQVdPQW9sKy9mdTNKSjgxNjRRdXZ1T09PTy9idTNhdnlYNWJsdG0zYmJyNzU1c1Y5Uzg2WWY4NytCdytVZ1Z4V0t3cGZsc1dPM2J2bm4vbU1VQVlqUkRjTzJOak13WFF5SEkwRktpbkRXRDc5ckVWditQdVhtOHptQmt4bVB2R1JEejM4OE1NaHNnRGJFa0E4NFlRVHBHdUx3cVNUOUdMcHdGbHFBZFBzaHhoS0ppWmlZaWFPa1VOYnlNdVAzL2doWnpGM3JZdnplaTNGU3pVelU4K0cybW5HdWZ6VTArYmRmK0Joenh4YThXY21vdEhSVVhYTnA4RlpUTUpjZnRRSExnL1ZhNW1jYjExV083TjNnU1R0VU12MnhmZSs5NzBhb05YNDZiSmx5NDZKczlhdFc3ZHg0OGF0VzdmdTJyVXJSYVorK2VBdnQyemVLdVNORkJIUU9nY013SHp0Mjk2eWUvZk91Zk9lNll3RmdGQVdFc0pKR3l1TnRZNlFJNlprNzBSKytPR0h2dkhOci9zQTFrS2tWcFNsWHE4VE1FMkxyNEFDZ2JFRVJYUjFXM0xXL2RsYi9wWFJORElUZkhIL3ZuMjMzdm9aQUFnTXpobWcyRVpOZ2tLaGs5U3dYWFRSUlduRmlMQko2dE5Qek0xZHZIaHhOZE1zK2U1OThjTWZmdi9aejE3bHNyR1lRQm85MUVvbFFlcGRPK3dBcHJad3lmS0RSMFlsa2FiMExXNXErV0xFWlRIS1hMN3VxbGRpQ3p6TTN2ZkJqM1Z3czZnMXBVQVVJaFhNL3Z6RkN3QUJyUkhuOEE5L2ZDeElUZ2JUOWRkZnI0MTdkTWxMbHk0ZFp3MGxsQVRqdXpCVitrUlZNdDNUK3JhME1FNlFMK2ZjUlJkZGRNa2xsd0RBajM3MG8wMmJ0dXpkdS9kWHYvcVZiRUNXWlgxOWZmUG16YnZra3VjOGJjNmN2cjd6OSt5NUh3RVl5Rm5Zc1hYTFNTZWQ5UFZ2Zk8yRmx6N1BPUW1Bc0xVMnhCSVlzenhuQ212V3ZQTU5WMThUeVFTd3p6ajF0Q2taaTRtSU10dXFQa2R3QUhUMzNYZi82cEhmR0dQS3Nod0RGUkEwbVQ1RkRTWTVmcXhldlZyamlKd1lMNzJuMGczR0dETXdNREE2T2pwcGNtVlp0akpldkMva3kvZzBvTlpSM250ZkZFV01Qb2JtMjk5MmJXdW5FYTNOcktzRHVEZGRjMjBySDRoSk5sOThMb3BlaG0zQkZmSG9hWTlFUkJUYVUvSSt0bjEzaWo0R3NlekUvSjczdktkU2ppR1phT000Ni9UVFR5L0xzaXpMUTRjT2FhTUZhKzM1NTUrZjZ1TzByMXhmWDErYXRxNitSZnQwM2dxM3lBUFVPQWphb3hQSzh4eUFLUEpIYnJ4eDFhcFZWN3pnQ21LRzZDTkVBTGpsa3pkLzV6dmZYcmZobmxOT09jVWFFd0VzUUtEb1RBWUVSSXdXRUNnejFMbFdxNTFHM3NvTUxzc3l6K3V0MkVTU3VDeS9DQUtxTlorVDVIeE16TXhUVnloMWpsSW1raGlIbEoyazdwajZ2dWwzb1pFK1FzZHNkN09LTVRSamFQN3UxdzgvOCtsUGRRQUFKcy9yN1dpVnUrTkxYMjRHRHN5UkEzRnN6WUphL09MRGFBZWVrbm5LRTRXNTJrbXFyYVZwWFFJeml6V3MxRDFWZEpaSnM5VzF3RVA3ZTAyc0R4Sm1FUXc2VFdMUzRKMG1INHpsYUNUWWh2WlRrWkJ0V1Faak16VHV2OHg1Nmk4ZmZ2aGxMM3N4QUpWbEV4R050WWp3Nml2Lzd0a3JWNDBNTlNsRUJDUHVqWEtFczNubjhwZ0VMTEl4Y3JOWnd2Z21aenAvVFFaSmVhcGFJeTArcDFiSVRreityaFQwVEt6TGEzOG43Nk1vK0hhSE1Gc3BJTkRLVitjY1VFdElHWkFneERKa3p0MTUxMWZ2YktlTVNhMkE0TTRoa0hOUzZLTld4WVVnK01tVWNVbUtNVExKMW5ydlhaYlYycVVXbXBta0c2azFiRm9ScXNEV0dMSDI3dDE3Nk5BaDZYMlNCbE5UY0NmbHJCamp6Smt6enpycnJFcjl1OFk3dE5wRVZwaTIreHJua1NBeUU3Ykl4MWxlUjVBOFdpOTFUMUxUaGN6QXhsa0RES0pqck1VUUF4QTQ1eWpDbEhnRXM3SFdvQjEzT0lWeFJaNUNSMW1zT0RSWmxwMXd3Z2x6NTg2Vnk2U1YzdGhueFlvVmxSTEt6bUgzdE8vWnBFVjhhYk9MRkpuUkRKeUpJMHhzdWxrUkpmbXJtSngrMGxzV0xWb2ttaWlFc0g3OWV1MTNJRW0wb3IvV3JsMnJLMDFUOHl1NTJKeUFFS2tSYjBYS0ZMcEtZNnVkQzc1VnNvNWErYXQ1cEdrTnZtcTA5TWV4ZkJYVFNqNFFYRnorYWl3dnhaRzBESGxpSHdpNXNkRm9xRkVXUFp2R0JDc2tVOTlkdmNqME1xT1BsM0toU25YMXBBM1pwSnhRbWVpbzlmL0dHTkdtYVZIT3VDQklranltUmlEUGM4bVowaDV1YWJxZGFCYmxZcW5WU2h2aGFSZlg5R0NyOWJXcEF0V09jSkMwVkVuVC9uUnJuV2JMNUhtK2NPSENQTThuUHhZbE9rc0QxL3JYR0xOdTNicEpyMSt3WUlIMEg1TE9LSnJvVXVuUHB0TzQ4TUlMcFpQZjhQRHczcjE3aFIwYWpjYjgrZk1oYVlJaUJ2Y1BmL2pEQXc4OFVPbWdWNWJsakJremxpeFpJbHB2M3J4NVdnSXAvcUJvN2p6UEw3endRbEhrUlZGSWJGUmJ3QWtUU1BkTkdYL1dyRmx3OGNVWEt3bkZKMm83SnBOL0p0WkthQnZhU1hWV21sTXVtNTlXQ0ZXWUpjMEwyN0ZqaDJoNkFFaFAvMjJnbFVNSU8zZnVWRWtjR0Jpb29PWlNkOTgrc1hwbTNyQmhnNHI1cWxXck5FRmZhNm9CWU1tU0pmcWdMVnUyUUx1UDNzREFnRXZMMUNacXpVbERJQXA0S2xNY3RiTXNqRy81V29tbWFOMnh5TGdRZDJob3FGVWhOTjdtcEpNY0hCeE11MWJEK1A0N21uS1E5bXRSQjJoNGVGaTc0Mm5lclBwUG9qRkVENGdmMDlYVlpWSjlVZWxFTU9sSFNWT1dwWjV5T3NlWGxMSFRubnlxTmVyMXVqS0wrb2ZTRTZXUzBwa0dQbVRERktTVzg1TlNUVFpHUnBQRWhWUldWTmdTQUFBR2kwbEVRVlMxeVpha2lRcFNXU3pjSkRYeHlnMHk1MWFKSGt6UjlYbno1czJUT2czcUVCQ1JTRWZuR3VHTkd6Y0s3M1IzZC9mMjl0YnJkYzJVMHk4aUhUTFUzcjE3RHg0OG1PZjVnUU1IRmkxYUpDMXY1OHlaczIzYk5zbEZrTHZFWXR4MzMzM2FYdlhnd1lQMzNudXZLQ2F4bnRLalc0VW1oTEJueng3dDlUTTBOTFI5KzNhaHpvRURCeFlzV0NBZTladzVjL2J2M3o4eU1rSkVCdzRjU0JNd2p5bHVPSlY4cFFxaXM1K2xhalZ0K2FEYUpDMjAxejA3Ly96elZRZHQyN2F0Y3ZLWVdKd0ZFenJKVnFyZDBoYmlGZHU2Wk1rU25kdm16WnRUamFSL1Y2NWMrYVIzWmt0RlEvc3VhSVJOakZwcVlWVnNVKzlFRUtFRXJnRHR1Wnl1ZkZ5b1BUbHBhYy9vMUpkTXA2ZnowUllPazRyTGswNHNGUndGRGxQbktGV1JhU1dVNW1KVVdxcWtGYVFWOVZySkcwNjc0NlY1b1JPTEJhVzZQNlc0TkRlZldCdnlwRGRJbFAwVUc3ZDc5KzdCd1VFaFJIOS92eGhCWTR4Z1o3S1NqUnMzbG1XWlpkbmh3NGQzN3R6WmJEYWRjdzgrK09DaVJZdkVyVDEwNk5EOTk5K3ZPNUcrRWtBM1lOYXNXV2VjY1VaNk5oSkg5SWtubnRCTzZHa1YzR09QUGJaejU4NnlMRWRHUm43NzI5K2VjODQ1WWdkR1JrWjI3ZHAxckJIcFAxMW5UVlFUbFdjcDZxUjhwRlZSZXErZy92TFpzMmRQeFR2VDFDajVrdWU1V0I2MXNDSlpNY2F0VzdkVy9JK0trMkdNNmUvdlY4ZnczbnZ2L1l2cXJOU0dxa3lsQ0xmWWJGVXg5WHE5TE12S3F6NFVCZEdNZnJYbzZUbEpkRlpabGxvMW03cUJGY2dsOVFFa1JDamdraUxzSVFTSkpQN2xkRmJhTGpodEo1Y2l2eW1ja0VZNmxSQ05Sa09QMXVKQXBPaXVTTG9NN3B5VHdrUDF3alRSVEtEZGlXY0dPZXBxdENMdGpUNmg4OENUcjdQVUllN3I2NE4yMDhJZE8zYm9PeENXTGwxYU1mbk1QR1BHakhQUFBWZnVGUVVrcEprNWMrYTU1NTdiM2QyZHJrM2VZYkYvLzM3eFJZZUhoN2R2M3k0RW1qVnIxbGxublNVU2V1S0pKeTVldkZpVWV0cTdTRk9RblhObm4zMjI4bURWNVY2MWFsWGxLQ043MVFIWVV0ODN6V2FhaGk1VGE2VW51TFR3YlBueTVmSzduaFlyWHlyL3UyM2J0a29xbXZ4ellHQmdxc1NZZEQ0VG93UkVwR2RKYSszRkYxOXNsQzZWRnhwMEFCNHFSN3pPUGY4NnE3TktpVjVhYnl0NGdQYXlWUUJXMHhQMWJLU1luMEpNcVgrbkFZRU9RR1lsZzNSaTYrQVdGMnVIei9UU0NocVhldUc2ODZwMHA5ZWFTc09VcWNLS01jcUNCYlFUSDBLV0ttNlg5dGlDOWtzcjVBQWcvNlhkN3RKV2Q1VTFUN1Q0K3IzU0FGcXZoM1pIZlRkcDkzUmp6SklsUzlTT1ZQcGN5djJIRHgvV0RtSEgrNjRzQURqenpETm56cHdwSFZkMzd0d3BZZGRaczJiSmdyTXNPM0xreU83ZHU4VzBkWGQzTDF5NFVOOVlzbXZYcmp6UFJTYmtKT2k5UDNEZ2dBYVo2dlg2R1dlYzBkWFZWUlRGL1BuemhYblQwb2RKK2FzaVdJZzRlL1pzOFFHekxEdjk5Tk5oMWFwVkFqTnBKMkpGaTFLUlRrOXpGUTF5TEg3V3BEaVhmcW5BK1NtdmlhRDE5L2NyTHJadTNickpPd0VsSDRuM3BYd2trWG9oL1VSZ0xsWFdxUUtWdThZdytQU0ZIQ2tnTi9IMUp0V21uZTNJNERUZWxaV0NwZW1yd0ZJVVZGRXpzZmZwNFVQUDNucDRxbGdlZmJHVU9DTFNLZ3phamZaU0VWR2htUWh3VjV4VktaN0owaENwSm45UFZkT2xiNENxRlBwTXo2dW90SHl0c0p2SXVENUMyN1pxczBBeE5iVmFUYjZvTmRCR2k1TE1KK0dTU1k5N0tYVXEzWitGeXpTd2hJaE9uRmNSNmZ2dnYvL2d3WU9hVjVNcXlJbHVoRVlpQkNPZkJocWhZVHNkU3BXcjZKMUZpeFlWUllHSWMrZk8zYjU5dTB6MWtVY2VrZG9hWTh6UTBOQ2VQWHRFemMyZVBYdnUzTG55RXIvVFRqdE44QzlqVEU5UFQyOXZyMUJoZUhoNDkrN2RpakhvczV4eml4WXRTc2trTkIwZEhkMitmYnNRb2FlbkIxYXZYajJwcHBnMnhxRHNuUUtiYVJiSlJBZ2Z4dmVPbEw5TGx5NVZHUmNrTXMwT2szdTNidDJxWXBYbUpRZ21KUU9lZDk1NXFuVGtuUmN3NFMwb2xZd3pWVnZ5M2orNWJPblNwVzdpeTd1bWZheXB2SkZ2MGhkUFRCVlByVVRDSys5dENPMCtXYXFZNUg5VGYzaXFGK21KM3FsMFIweU5UeHBEcVFBUzZWU3pMSE9wSUtnZk1PMm1yakxqWnJNcDhIR3FDd1R4a1A0NGFSeGZHZ0dtVG8yMk9TbUtRcEQxc1g0UzFrb1NXbnA0bEtIMGVvMU9hajlaOGRmU2g2WWFYVTNaeEZXcmk5Y0M0eVI3V1dIZk5DQjRYTVRTZDQ0TkRnNktXcFVSK3Z2N0c0MEdFWTJNaktSZDROUkxGdDBrNzV4VFFGMmFUbXF1ZFhkMzk0b1ZLNFFFdmIyOTZxbDNkWFV0WDc1Y0ZMeitMbmovOHVYTFJYLzE5dlpxdzRhZW5wNWx5NWFsNFNoWnNyU3JtOWcydVZhckxWdTJURGFzdjcvLy93TUNtZFptNkFNOGpBQUFBQUJKUlU1RXJrSmdnZz09XCIiLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQYXNzd29yZElucHV0IGZyb20gXCIuLy4uL0Zvcm1zL1Bhc3N3b3JkSW5wdXRcIjtcclxuaW1wb3J0IFdhbGxldERiIGZyb20gXCJzdG9yZXMvV2FsbGV0RGJcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCB7a2V5fSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFjY291bnRQZXJtaXNzaW9uc01pZ3JhdGUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICB2YWxpZFBhc3N3b3JkOiBmYWxzZSxcclxuICAgICAgICAgICAgcGFzczogbnVsbCxcclxuICAgICAgICAgICAgZ2VuZXJhdGVkUGFzc3dvcmQ6XHJcbiAgICAgICAgICAgICAgICBcIlBcIiArXHJcbiAgICAgICAgICAgICAgICBrZXlcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0X3JhbmRvbV9rZXkoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50b1dpZigpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIG9uU3VibWl0KCkge31cclxuXHJcbiAgICBvblBhc3N3b3JkQ2hhbmdlKGUpIHtcclxuICAgICAgICBsZXQge3ZhbGlkfSA9IGU7XHJcbiAgICAgICAgbGV0IG5hbWUgPSB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwibmFtZVwiKTtcclxuXHJcbiAgICAgICAgY29uc3QgYWN0aXZlID0gIXZhbGlkXHJcbiAgICAgICAgICAgID8gbnVsbFxyXG4gICAgICAgICAgICA6IFdhbGxldERiLmdlbmVyYXRlS2V5RnJvbVBhc3N3b3JkKG5hbWUsIFwiYWN0aXZlXCIsIGUudmFsdWUpLnB1YktleTtcclxuICAgICAgICBjb25zdCBvd25lciA9ICF2YWxpZFxyXG4gICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgOiBXYWxsZXREYi5nZW5lcmF0ZUtleUZyb21QYXNzd29yZChuYW1lLCBcIm93bmVyXCIsIGUudmFsdWUpLnB1YktleTtcclxuICAgICAgICBjb25zdCBtZW1vID0gIXZhbGlkXHJcbiAgICAgICAgICAgID8gbnVsbFxyXG4gICAgICAgICAgICA6IFdhbGxldERiLmdlbmVyYXRlS2V5RnJvbVBhc3N3b3JkKG5hbWUsIFwibWVtb1wiLCBlLnZhbHVlKS5wdWJLZXk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dmFsaWRQYXNzd29yZDogZS52YWxpZCwgcGFzczogZS52YWx1ZX0pO1xyXG4gICAgICAgIHRoaXMucHJvcHMub25TZXRQYXNzd29yZEtleXMoe2FjdGl2ZSwgb3duZXIsIG1lbW99KTtcclxuICAgIH1cclxuXHJcbiAgICBjaGVja0tleVVzZShrZXksIHJvbGUpIHtcclxuICAgICAgICBpZiAoIWtleSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmIChyb2xlID09PSBcIm1lbW9cIikge1xyXG4gICAgICAgICAgICByZXR1cm4ga2V5ID09PSB0aGlzLnByb3BzLm1lbW9LZXk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHNbYCR7cm9sZX1LZXlzYF0ucmVkdWNlKChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYiA9PT0ga2V5IHx8IGE7XHJcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uVXNlS2V5KHJvbGUsIHJlbW92ZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKHJlbW92ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzW3JvbGUgPT09IFwiYWN0aXZlXCIgPyBcIm9uUmVtb3ZlQWN0aXZlXCIgOiBcIm9uUmVtb3ZlT3duZXJcIl0oXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzW3JvbGVdLFxyXG4gICAgICAgICAgICAgICAgXCJfa2V5c1wiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzW3JvbGVdKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdlaWdodHMgPSB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmU6IHRoaXMucHJvcHMuYWNjb3VudC5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVcIixcclxuICAgICAgICAgICAgICAgICAgICBcIndlaWdodF90aHJlc2hvbGRcIlxyXG4gICAgICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgICAgICBvd25lcjogdGhpcy5wcm9wcy5hY2NvdW50LmdldEluKFtcIm93bmVyXCIsIFwid2VpZ2h0X3RocmVzaG9sZFwiXSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgICAgICBcImtleVwiLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wc1tyb2xlXSxcclxuICAgICAgICAgICAgICAgIFwid2VpZ2h0c1wiLFxyXG4gICAgICAgICAgICAgICAgd2VpZ2h0cyxcclxuICAgICAgICAgICAgICAgIFwid2VpZ2h0IG9mIHJvbGU6XCIsXHJcbiAgICAgICAgICAgICAgICB3ZWlnaHRzW3JvbGVdXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHNbXHJcbiAgICAgICAgICAgICAgICByb2xlID09PSBcImFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgPyBcIm9uQWRkQWN0aXZlXCJcclxuICAgICAgICAgICAgICAgICAgICA6IHJvbGUgPT09IFwib3duZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwib25BZGRPd25lclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJvblNldE1lbW9cIlxyXG4gICAgICAgICAgICBdKHRoaXMucHJvcHNbcm9sZV0sIHdlaWdodHNbcm9sZV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IGFjdGl2ZUluVXNlID0gdGhpcy5jaGVja0tleVVzZShcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hY3RpdmUgJiYgdGhpcy5wcm9wcy5hY3RpdmUsXHJcbiAgICAgICAgICAgIFwiYWN0aXZlXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBvd25lckluVXNlID0gdGhpcy5jaGVja0tleVVzZShcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vd25lciAmJiB0aGlzLnByb3BzLm93bmVyLFxyXG4gICAgICAgICAgICBcIm93bmVyXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBtZW1vSW5Vc2UgPSB0aGlzLmNoZWNrS2V5VXNlKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLm1lbW8gJiYgdGhpcy5wcm9wcy5tZW1vLFxyXG4gICAgICAgICAgICBcIm1lbW9cIlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGxldCB1c2VUZXh0ID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5wZXJtLnVzZV90ZXh0XCIpO1xyXG4gICAgICAgIGxldCByZW1vdmVUZXh0ID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5wZXJtLnJlbW92ZV90ZXh0XCIpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9e3ttYXhXaWR0aDogXCI4MDBweFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnBhc3N3b3JkX21vZGVsXzFcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9wPlxyXG5cclxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPXt7bWF4V2lkdGg6IFwiODAwcHhcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cIndhbGxldC5wYXNzd29yZF9tb2RlbF8xXCIgLz5cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPXt7bWF4V2lkdGg6IFwiODAwcHhcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgdW5zYWZlIGNvbnRlbnQ9XCJ3YWxsZXQucGFzc3dvcmRfbW9kZWxfMlwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3A+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXZpZGVyXCIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICA8Zm9ybVxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWF4V2lkdGg6IFwiNDByZW1cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgb25TdWJtaXQ9e3RoaXMub25TdWJtaXQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICBub1ZhbGlkYXRlXHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImxlZnQtbGFiZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwid2FsbGV0LmdlbmVyYXRlZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8cD57dGhpcy5zdGF0ZS5nZW5lcmF0ZWRQYXNzd29yZH08L3A+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPXt7Zm9udFdlaWdodDogXCJib2xkXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnBhc3N3b3JkX21vZGVsXzJcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvcD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPFBhc3N3b3JkSW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtYXRpb249e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uUGFzc3dvcmRDaGFuZ2UuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9MYWJlbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZExlbmd0aD17MTJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrU3RyZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9mb3JtPlxyXG5cclxuICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT17YWN0aXZlSW5Vc2UgPyBcImluLXVzZVwiIDogXCJcIn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLm5ld19hY3RpdmVcIiAvPjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e3RoaXMucHJvcHMuYWN0aXZlfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwidGV4dC1yaWdodFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25Vc2VLZXkuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlSW5Vc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVJblVzZSA/IHJlbW92ZVRleHQgOiB1c2VUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT17b3duZXJJblVzZSA/IFwiaW4tdXNlXCIgOiBcIlwifT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ubmV3X293bmVyXCIgLz46XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnt0aGlzLnByb3BzLm93bmVyfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwidGV4dC1yaWdodFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25Vc2VLZXkuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm93bmVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lckluVXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3duZXJJblVzZSA/IHJlbW92ZVRleHQgOiB1c2VUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT17bWVtb0luVXNlID8gXCJpbi11c2VcIiA6IFwiXCJ9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5uZXdfbWVtb1wiIC8+OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57dGhpcy5wcm9wcy5tZW1vfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwidGV4dC1yaWdodFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IG1lbW9JblVzZSA/IFwiaGlkZGVuXCIgOiBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uVXNlS2V5LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtZW1vXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vSW5Vc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cclxuXHJcbiAgICAgICAgICAgICAgICB7bWVtb0luVXNlID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWF4V2lkdGg6IFwiODAwcHhcIiwgcGFkZGluZ1RvcDogMTB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoYXMtZXJyb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLm1lbW9fd2FybmluZ1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBQcml2YXRlS2V5VmlldyBmcm9tIFwiY29tcG9uZW50cy9Qcml2YXRlS2V5Vmlld1wiO1xyXG5pbXBvcnQge1B1YmxpY0tleX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBJY29uIGZyb20gXCIuLi9JY29uL0ljb25cIjtcclxuaW1wb3J0IFByaXZhdGVLZXlTdG9yZSBmcm9tIFwic3RvcmVzL1ByaXZhdGVLZXlTdG9yZVwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcblxyXG4vKipcclxuICogQGJyaWVmIEFsbG93cyB0aGUgdXNlciB0byBlbnRlciBhIHB1YmxpYyBrZXlcclxuICovXHJcblxyXG5jbGFzcyBQdWJLZXlJbnB1dCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsIC8vIGEgdHJhbnNsYXRpb24ga2V5IGZvciB0aGUgbGFiZWxcclxuICAgICAgICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZywgLy8gY3VycmVudCB2YWx1ZVxyXG4gICAgICAgIGVycm9yOiBQcm9wVHlwZXMuc3RyaW5nLCAvLyB0aGUgZXJyb3IgbWVzc2FnZSBvdmVycmlkZVxyXG4gICAgICAgIHBsYWNlaG9sZGVyOiBQcm9wVHlwZXMuc3RyaW5nLCAvLyB0aGUgcGxhY2Vob2xkZXIgdGV4dCB0byBiZSBkaXNwbGF5ZWQgd2hlbiB0aGVyZSBpcyBubyB1c2VyX2lucHV0XHJcbiAgICAgICAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLCAvLyBhIG1ldGhvZCB0byBiZSBjYWxsZWQgYW55IHRpbWUgdXNlciBpbnB1dCBjaGFuZ2VzXHJcbiAgICAgICAgb25BY3Rpb246IFByb3BUeXBlcy5mdW5jLCAvLyBhIG1ldGhvZCBjYWxsZWQgd2hlbiBBZGQgYnV0dG9uIGlzIGNsaWNrZWRcclxuICAgICAgICB0YWJJbmRleDogUHJvcFR5cGVzLm51bWJlciwgLy8gdGFiaW5kZXggcHJvcGVydHkgdG8gYmUgcGFzc2VkIHRvIGlucHV0IHRhZ1xyXG4gICAgICAgIGRpc2FibGVBY3Rpb25CdXR0b246IFByb3BUeXBlcy5ib29sIC8vIHVzZSBpdCBpZiB5b3UgbmVlZCB0byBkaXNhYmxlIGFjdGlvbiBidXR0b25cclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNWYWxpZFB1YktleSh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiAhIVB1YmxpY0tleS5mcm9tUHVibGljS2V5U3RyaW5nKHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBvbklucHV0Q2hhbmdlZChldmVudCkge1xyXG4gICAgICAgIGxldCB2YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25LZXlEb3duKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB0aGlzLm9uQWN0aW9uKGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkFjdGlvbihldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uQWN0aW9uICYmXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudmFsaWQgJiZcclxuICAgICAgICAgICAgIXRoaXMucHJvcHMuZGlzYWJsZUFjdGlvbkJ1dHRvblxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uQWN0aW9uKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBlcnJvciA9IHRoaXMucHJvcHMuZXJyb3I7XHJcbiAgICAgICAgaWYgKCFlcnJvciAmJiB0aGlzLnByb3BzLnZhbHVlICYmICF0aGlzLmlzVmFsaWRQdWJLZXkodGhpcy5wcm9wcy52YWx1ZSkpXHJcbiAgICAgICAgICAgIGVycm9yID0gXCJOb3QgYSB2YWxpZCBwdWJsaWMga2V5XCI7XHJcbiAgICAgICAgbGV0IGFjdGlvbl9jbGFzcyA9IGNsYXNzbmFtZXMoXCJidXR0b25cIiwge1xyXG4gICAgICAgICAgICBkaXNhYmxlZDogZXJyb3IgfHwgdGhpcy5wcm9wcy5kaXNhYmxlQWN0aW9uQnV0dG9uXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qga2V5cyA9IFByaXZhdGVLZXlTdG9yZS5nZXRTdGF0ZSgpLmtleXM7XHJcbiAgICAgICAgY29uc3QgaGFzX3ByaXZhdGUgPVxyXG4gICAgICAgICAgICB0aGlzLmlzVmFsaWRQdWJLZXkodGhpcy5wcm9wcy52YWx1ZSkgJiYga2V5cy5oYXModGhpcy5wcm9wcy52YWx1ZSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHVia2V5LWlucHV0IG5vLW92ZXJmbG93XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYXJlYVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLWFyZWFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeyFlcnJvciAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnZhbHVlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNWYWxpZFB1YktleSh0aGlzLnByb3BzLnZhbHVlKSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJyaWdodC1sYWJlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS52YWxpZF9wdWJcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImxlZnQtbGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwibGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17dGhpcy5wcm9wcy5sYWJlbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0LWFyZWFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaW5saW5lLWxhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjY291bnQtaW1hZ2VcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJpdmF0ZUtleVZpZXcgcHVia2V5PXt0aGlzLnByb3BzLnZhbHVlfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJrZXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5rZXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cIjR4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1ByaXZhdGVLZXlWaWV3PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtoYXNfcHJpdmF0ZSA/IFwibXkta2V5XCIgOiBcIlwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLnZhbHVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5wbGFjZWhvbGRlciB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnB1YmxpY19rZXlcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwidXNlcl9pbnB1dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25JbnB1dENoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMub25LZXlEb3duLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9e3RoaXMucHJvcHMudGFiSW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMub25BY3Rpb24gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2FjdGlvbl9jbGFzc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkFjdGlvbi5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17dGhpcy5wcm9wcy5hY3Rpb25fbGFiZWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZXJyb3ItYXJlYSBoYXMtZXJyb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2Vycm9yfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IFB1YktleUlucHV0O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IFB1YktleUlucHV0IGZyb20gXCIuLi9Gb3Jtcy9QdWJLZXlJbnB1dFwiO1xyXG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcclxuaW1wb3J0IHtUYWJzLCBUYWJ9IGZyb20gXCIuLi9VdGlsaXR5L1RhYnNcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgU2lnbmVkTWVzc2FnZUFjdGlvbiBmcm9tIFwiLi4vLi4vYWN0aW9ucy9TaWduZWRNZXNzYWdlQWN0aW9uXCI7XHJcbmltcG9ydCBTaWduZWRNZXNzYWdlIGZyb20gXCIuLi9BY2NvdW50L1NpZ25lZE1lc3NhZ2VcIjtcclxuXHJcbi8qKiBUaGlzIGNvbXBvbmVudCBnaXZlcyBhIHVzZXIgaW50ZXJmYWNlIGZvciBzaWduaW5nIGFuZCB2ZXJpZnlpbmcgbWVzc2FnZXMgd2l0aCB0aGUgYml0U2hhcmVzIG1lbW8ga2V5LlxyXG4gKiAgSXQgY29uc2lzdHMgb2YgdHdvIHRhYnM6XHJcbiAqICAgIC0gU2lnbiBtZXNzYWdlIHRhYiAoY29kZSBwcmVmaXg6IHRhYlNNKVxyXG4gKiAgICAtIFZlcmlmeSBtZXNzYWdlIHRhYiAoY29kZSBwcmVmaXg6IHRhYlZNKVxyXG4gKlxyXG4gKiAgU2VlIFNpZ25lZE1lc3NhZ2VBY3Rpb24gZm9yIGRldGFpbHMgb24gbWVzc2FnZSBmb3JtYXQuXHJcbiAqXHJcbiAqICAgIEBhdXRob3IgU3RlZmFuIFNjaGllc3NsIDxzdGVmYW4uc2NoaWVzc2xAYmxvY2tjaGFpbnByb2plY3RzYnYuY29tPlxyXG4gKi9cclxuY2xhc3MgQWNjb3VudFNpZ25lZE1lc3NhZ2VzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYWNjb3VudDogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnQuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICAvLyBpbml0aWFsaXplIHN0YXRlIChkbyBub3QgdXNlIHNldFN0YXRlIG1ldGhvZCEpXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgdGFic21fbWVtb19rZXk6IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJvcHRpb25zXCIpLmdldChcIm1lbW9fa2V5XCIpLFxyXG4gICAgICAgICAgICB0YWJzbV9wb3B1cDogXCJcIixcclxuICAgICAgICAgICAgdGFic21fbWVzc2FnZV90ZXh0OiBcIlwiLFxyXG4gICAgICAgICAgICB0YWJzbV9tZXNzYWdlX3NpZ25lZDogXCJcIixcclxuICAgICAgICAgICAgdGFidm1fcG9wdXA6IFwiXCIsXHJcbiAgICAgICAgICAgIHRhYnZtX21lc3NhZ2Vfc2lnbmVkOiBcIlwiLFxyXG4gICAgICAgICAgICB0YWJ2bV92ZXJpZmllZDogbnVsbCxcclxuICAgICAgICAgICAgdGFidm1fbWVzc2FnZV9zaWduZWRfYW5kX3ZlcmlmaWVkOiBudWxsLFxyXG4gICAgICAgICAgICB0YWJ2bV9mbGFnX3ZlcmlmeW9uY2hhbmdlOiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudCB3aGVuIHVzZXIgcHVzaGVzIHNpZ24gYnV0dG9uLiBNZW1vIG1lc3NhZ2UgYW5kIG1ldGEgd2lsbCBiZSBzaWduZWQgYW5kIGRpc3BsYXllZFxyXG4gICAgICogaW4gdGhlIGJvdHRvbSB0ZXh0YXJlYVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudFxyXG4gICAgICovXHJcbiAgICBfdGFiU01TaWduQWN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gdmFsaWRhdGUga2V5cyBhcmUgc3RpbGwgdGhlIHNhbWUuIEJldHRlcjogbWFrZSBwdWJsaWMgbWVtb2tleSBmaWVsZCB1bmVkaXRhYmxlXHJcbiAgICAgICAgICAgIGxldCBzdG9yZWRLZXkgPSB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwib3B0aW9uc1wiKS5nZXQoXCJtZW1vX2tleVwiKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUudGFic21fbWVtb19rZXkgIT09IHN0b3JlZEtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5rZXltaXNtYXRjaFwiKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gdGhlcmUgc2hvdWxkIGJlIGEgbWVzc2FnZSBlbnRlcmVkXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnRhYnNtX21lc3NhZ2VfdGV4dCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGFiU01Qb3BNZXNzYWdlKFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQuc2lnbmVkbWVzc2FnZXMuc2lnbmluZ1wiKSxcclxuICAgICAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgU2lnbmVkTWVzc2FnZUFjdGlvbi5zaWduTWVzc2FnZShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS50YWJzbV9tZXNzYWdlX3RleHRcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNtX21lc3NhZ2Vfc2lnbmVkOiByZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzbV9wb3B1cDogXCJcIiAvLyBjbGVhciBsb2FkaW5nIG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGFiU01Qb3BNZXNzYWdlKGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzbV9tZXNzYWdlX3NpZ25lZDogbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICB0aGlzLl90YWJTTVBvcE1lc3NhZ2UoZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHRhYnNtX21lc3NhZ2Vfc2lnbmVkOiBudWxsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfdGFiU01IYW5kbGVDaGFuZ2UoZXZlbnQpIHtcclxuICAgICAgICAvLyBldmVudCBmb3IgdGV4dGFyZWFcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHt0YWJzbV9tZXNzYWdlX3RleHQ6IGV2ZW50LnRhcmdldC52YWx1ZX0pO1xyXG4gICAgfVxyXG5cclxuICAgIF90YWJTTUhhbmRsZUNoYW5nZUtleSh2YWx1ZSkge1xyXG4gICAgICAgIC8vIGV2ZW50IGZvciB0ZXh0ZmllbGQgb2YgcHVibGljIGtleVxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3RhYnNtX21lbW9fa2V5OiB2YWx1ZX0pO1xyXG4gICAgfVxyXG5cclxuICAgIF90YWJTTUNvcHlUb0NsaXBCb2FyZChldmVudCkge1xyXG4gICAgICAgIC8vIGV2ZW50IHdoZW4gdXNlciBjbGlja3MgaW50byB0aGUgc2lnbmVkIG1lc3NhZ2UgdGV4dGFyZWFcclxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5mb2N1cygpO1xyXG4gICAgICAgICAgICBldmVudC50YXJnZXQuc2VsZWN0KCk7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3NmdWwgPSBkb2N1bWVudC5leGVjQ29tbWFuZChcImNvcHlcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90YWJTTVBvcE1lc3NhZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc2Z1bFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmNvcHlzdWNjZXNzZnVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQuc2lnbmVkbWVzc2FnZXMuY29weXVuc3VjY2Vzc2Z1bFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90YWJTTVBvcE1lc3NhZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQuc2lnbmVkbWVzc2FnZXMuY29weXVuc3VjY2Vzc2Z1bFwiXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3BsYXlzIGFuIGluZm9ybWF0aW9uIHRvIHRoZSB1c2VyIHRoYXQgZGlzYXBwZWFycyBvdmVyIHRpbWVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIHRpbWVvdXRcclxuICAgICAqL1xyXG4gICAgX3RhYlNNUG9wTWVzc2FnZShtZXNzYWdlLCB0aW1lb3V0ID0gMzAwMCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICB0YWJzbV9wb3B1cDogbWVzc2FnZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAobWVzc2FnZSAhPT0gXCJcIiAmJiB0aW1lb3V0ID4gMCkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYnNtX3BvcHVwOiBcIlwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwgdGltZW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZlbnQgd2hlbiB0aGUgdXNlciB0cmllcyB0byB2ZXJpZnkgYSBtZXNzYWdlLCBlaXRoZXIgbWFudWFsIHRocm91Z2ggdGhlIGJ1dHRvbiBvciBvbkNoYW5nZSBvZiB0aGUgdGV4dGFyZWEuXHJcbiAgICAgKiBUaGUgbWVzc2FnZSBpcyBwYXJzZWQgYW5kIHZlcmlmaWVkLCB0aGUgdXNlciBnZXRzIHRoZSBtZXNzYWdlIHJlc3RhdGVkIGluIHRoZSBib3R0b20gcGFydCBvZiB0aGUgc2l0ZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudFxyXG4gICAgICovXHJcbiAgICBfdGFiVk1BY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAvLyByZXNldCB0byB1bnZlcmlmaWVkIHN0YXRlXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHRhYnZtX21lc3NhZ2Vfc2lnbmVkX2FuZF92ZXJpZmllZDogbnVsbCxcclxuICAgICAgICAgICAgdGFidm1fdmVyaWZpZWQ6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGF0dGVtcHQgdmVyaWZ5aW5nXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUudGFidm1fbWVzc2FnZV9zaWduZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGFiVk1Qb3BNZXNzYWdlKFxyXG4gICAgICAgICAgICAgICAgY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy52ZXJpZnlpbmdcIiksXHJcbiAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBibG9jayBndWlcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2Vfc2lnbmVkX2FuZF92ZXJpZmllZCA9IFNpZ25lZE1lc3NhZ2VBY3Rpb24udmVyaWZ5TWVtbyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS50YWJ2bV9tZXNzYWdlX3NpZ25lZFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYnZtX21lc3NhZ2Vfc2lnbmVkX2FuZF92ZXJpZmllZDogbWVzc2FnZV9zaWduZWRfYW5kX3ZlcmlmaWVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJ2bV92ZXJpZmllZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFidm1fcG9wdXA6IFwiXCIgLy8gY2xlYXIgdmVyaWZ5aW5nIG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RhYlZNUG9wTWVzc2FnZShlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYnZtX21lc3NhZ2Vfc2lnbmVkX2FuZF92ZXJpZmllZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFidm1fdmVyaWZpZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfdGFiVk1IYW5kbGVDaGFuZ2UoZXZlbnQpIHtcclxuICAgICAgICAvLyBvbmNoYW5nZSBldmVudCBvZiB0aGUgaW5wdXQgdGV4dGFyZWFcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgdGFidm1fbWVzc2FnZV9zaWduZWQ6IGV2ZW50LnRhcmdldC52YWx1ZSxcclxuICAgICAgICAgICAgdGFidm1fdmVyaWZpZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICB0YWJ2bV9tZXNzYWdlX3NpZ25lZF9hbmRfdmVyaWZpZWQ6IG51bGxcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS50YWJ2bV9mbGFnX3ZlcmlmeW9uY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RhYlZNQWN0aW9uKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwbGF5cyBhbiBpbmZvcm1hdGlvbiB0byB0aGUgdXNlciB0aGF0IGRpc2FwcGVhcnMgb3ZlciB0aW1lXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB0aW1lb3V0XHJcbiAgICAgKi9cclxuICAgIF90YWJWTVBvcE1lc3NhZ2UobWVzc2FnZSwgdGltZW91dCA9IDMwMDApIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgdGFidm1fcG9wdXA6IG1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKG1lc3NhZ2UgIT09IFwiXCIgJiYgdGltZW91dCA+IDApIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJ2bV9wb3B1cDogXCJcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfdGFiVk1Ub2dnbGVWZXJpZnlPbkNoYW5nZSgpIHtcclxuICAgICAgICAvLyBldmVudCB3aGVuIHRoZSB1c2VyIGVuYWJsZXMgLyBkaXNhYmxlcyB2ZXJpZnlpbmcgd2hpbGUgdHlwaW5nXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHRhYnZtX2ZsYWdfdmVyaWZ5b25jaGFuZ2U6ICF0aGlzLnN0YXRlLnRhYnZtX2ZsYWdfdmVyaWZ5b25jaGFuZ2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgYXBwLXRhYmxlcyBuby1wYWRkaW5nXCIgcmVmPVwiYXBwVGFibGVzXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgc21hbGwtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtY29udGFpbmVyIGdlbmVyaWMtYm9yZGVyZWQtYm94XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY2NvdW50LXRhYnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic0NsYXNzPVwiYWNjb3VudC1vdmVydmlldyBuby1wYWRkaW5nIGJvcmRlcmVkLWhlYWRlciBjb250ZW50LWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmc9XCJhY2NvdW50U2lnbmVkTWVzc2FnZXNUYWJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudENsYXNzPVwiZ3JpZC1jb250ZW50IHNocmluayBzbWFsbC12ZXJ0aWNhbCBtZWRpdW0taG9yaXpvbnRhbCBwYWRkaW5nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLnNpZ25tZXNzYWdlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e292ZXJmbG93WDogXCJoaWRkZW5cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgbm8tbWFyZ2luXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5zaWdubWVzc2FnZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFB1YktleUlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9XCJtZW1vX2tleVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS50YWJzbV9tZW1vX2tleX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC5wZXJtLm1lbW9fcHVibGljX2tleVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlB1YmxpYyBLZXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fdGFiU01IYW5kbGVDaGFuZ2VLZXkuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUFjdGlvbkJ1dHRvbj17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz1cIjEwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnRhYnNtX21lc3NhZ2VfdGV4dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl90YWJTTUhhbmRsZUNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5lbnRlcm1lc3NhZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90YWJTTVNpZ25BY3Rpb24uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5zaWduXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2NvbG9yOiBcImdyYXlcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnRhYnNtX3BvcHVwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS50YWJzbV9tZXNzYWdlX3NpZ25lZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7ZWRpdGFibGU6IGZhbHNlfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmF1dG9tYXRpY2NyZWF0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90YWJTTUNvcHlUb0NsaXBCb2FyZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy52ZXJpZnltZXNzYWdlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e292ZXJmbG93WDogXCJoaWRkZW5cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgbm8tbWFyZ2luXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy52ZXJpZnltZXNzYWdlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IFwicmlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luVG9wOiBcIjAuMWVtXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogXCIwLjVlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuc2lnbmVkbWVzc2FnZXMudmVyaWZ5b25jaGFuZ2VcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic3dpdGNoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fdGFiVk1Ub2dnbGVWZXJpZnlPbkNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGFidm1fZmxhZ192ZXJpZnlvbmNoYW5nZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQuc2lnbmVkbWVzc2FnZXMudmVyaWZ5b25jaGFuZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz1cIjEwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnRhYnZtX21lc3NhZ2Vfc2lnbmVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX3RhYlZNSGFuZGxlQ2hhbmdlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmVudGVybWVzc2FnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3RhYlZNQWN0aW9uLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuc2lnbmVkbWVzc2FnZXMudmVyaWZ5XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRleHQgc3R5bGU9e3tjb2xvcjogXCJncmF5XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS50YWJ2bV9wb3B1cH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGV4dD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnRhYnZtX3ZlcmlmaWVkICE9PSBudWxsICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZmxvYXQ6IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlIGlzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRhYnZtX3ZlcmlmaWVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJncmVlblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJyZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50YWJ2bV92ZXJpZmllZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwidmVyaWZpZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwibm90IHZlcmlmaWVkXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KCh0aGlzLnN0YXRlLnRhYnZtX3ZlcmlmaWVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGFidm1fbWVzc2FnZV9zaWduZWRfYW5kX3ZlcmlmaWVkICE9PVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRhYnZtX2ZsYWdfdmVyaWZ5b25jaGFuZ2UpICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNpZ25lZE1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRhYnZtX21lc3NhZ2Vfc2lnbmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuQWNjb3VudFNpZ25lZE1lc3NhZ2VzID0gQmluZFRvQ2hhaW5TdGF0ZShBY2NvdW50U2lnbmVkTWVzc2FnZXMpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWNjb3VudFNpZ25lZE1lc3NhZ2VzO1xyXG4iLCJpbXBvcnQgYWx0IGZyb20gXCJhbHQtaW5zdGFuY2VcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQge1NpZ25hdHVyZSwgQ2hhaW5TdG9yZSwgUHVibGljS2V5fSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IFdhbGxldFVubG9ja0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvV2FsbGV0VW5sb2NrQWN0aW9uc1wiO1xyXG5pbXBvcnQgV2FsbGV0RGIgZnJvbSBcInN0b3Jlcy9XYWxsZXREYlwiO1xyXG5cclxuY29uc3QgTVNHX0hFQUQgPSBcIi0tLS0tQkVHSU4gQklUU0hBUkVTIFNJR05FRCBNRVNTQUdFLS0tLS1cIjtcclxuY29uc3QgTVNHX01FVEEgPSBcIi0tLS0tQkVHSU4gTUVUQS0tLS0tXCI7XHJcbmNvbnN0IE1TR19TSUdOQVRVUkUgPSBcIi0tLS0tQkVHSU4gU0lHTkFUVVJFLS0tLS1cIjtcclxuY29uc3QgTVNHX0ZPT1QgPSBcIi0tLS0tRU5EIEJJVFNIQVJFUyBTSUdORUQgTUVTU0FHRS0tLS0tXCI7XHJcbmNvbnN0IE1TR19TRU5ERVIgPSBcImFjY291bnRcIjtcclxuY29uc3QgTVNHX1BVQkxJQ0tFWSA9IFwibWVtb2tleVwiO1xyXG5jb25zdCBNU0dfQkxPQ0sgPSBcImJsb2NrXCI7XHJcbmNvbnN0IE1TR19EQVRFID0gXCJ0aW1lc3RhbXBcIjtcclxuXHJcbi8qKiBUaGlzIGFjdGlvbiBwcm92aWRlcyBmb2xsb3dpbmcgZnVuY3Rpb25hbGl0aWVzOlxyXG4gKiAgICAtIFNpZ24gYSBtZXNzYWdlXHJcbiAqICAgIC0gVmVyaWZ5IGEgZ2l2ZW4gbWVzc2FnZVxyXG4gKlxyXG4gKiAgVGhlIG1lc3NhZ2UgZm9ybWF0IHRoYXQgaXMgdW5kZXJseWluZyBpcyBhcyBmb2xsb3dzOlxyXG4gKiAgLS0tLS1CRUdJTiBCSVRTSEFSRVMgU0lHTkVEIE1FU1NBR0UtLS0tLVxyXG4gKiAgPG1lc3NhZ2UgZnJvbSB0aGUgYWNjb3VudD5cclxuICogIC0tLS0tQkVHSU4gTUVUQS0tLS0tXHJcbiAqICBhY2NvdW50PTxhY2NvdW50IG5hbWU+XHJcbiAqICBtZW1va2V5PTxhY2NvdW50IG1lbW8gcHVibGljIGtleT5cclxuICogIGJsb2NrPTxsYXN0IGlycmV2ZXJzaWJsZSBibG9jaz5cclxuICogIHRpbWVzdGFtcD08Y3VycmVudCB0aW1lPlxyXG4gKiAgLS0tLS1CRUdJTiBTSUdOQVRVUkUtLS0tLVxyXG4gKiAgPHNpZ25hdHVyZT5cclxuICogIC0tLS0tRU5EIEJJVFNIQVJFUyBTSUdORUQgTUVTU0FHRS0tLS0tXHJcbiAqXHJcbiAqICAgIEBhdXRob3IgU3RlZmFuIFNjaGllc3NsIDxzdGVmYW4uc2NoaWVzc2xAYmxvY2tjaGFpbnByb2plY3RzYnYuY29tPlxyXG4gKi9cclxuY2xhc3MgU2lnbmVkTWVzc2FnZUFjdGlvbiB7XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyB0aGUgZ2l2ZW4gcmF3IHN0cmluZyB0byBhIHByb2Nlc3NpbmcgZnJpZW5kbHkgZGljdGlvbmFyeVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlIE1lc3NhZ2UgYXMgcmF3IHN0cmluZywgcHJvcGVybHkgZm9ybWF0dGVkIHdpdGggaGVhZC9tZXRhL3NpZ25hdHVyZS9mb290ZXJcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gcGFyc2VkIG1lc3NhZ2UgYXMgZGljdGlvbmFyeSB3aXRoIHRoZSBmb2xsb3dpbmcgZmllbGRzOlxyXG4gICAgICogICAgICAgICAgICAgIGNvbnRlbnQgOiBVc2VyIG1lc3NhZ2Ugb2YgdGhlIG1lc3NhZ2VcclxuICAgICAqICAgICAgICAgICAgICBtZXRhIDogRGljdGlvbmFyeSB3aXRoIHRoZSBtZXRhIGRhdGFcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQgOiBBY2NvdW50IG5hbWUgb2YgdGhlIHNpZ25lclxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAga2V5IDogTWVtbyBwdWJsaWMga2V5IG9mIHRoZSBzaWduZXJcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIGJsb2NrIDogQ3VycmVudCBsYXN0IGlycmV2ZXJzaWJsZSBibG9jayBvZiB0aGUgYml0U2hhcmVzIGJsb2NrY2hhaW5cclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcCA6IFRpbWUgdGhlIG1lc3NhZ2Ugd2FzIHNpZ25lZCBpbiBVVEMgZm9ybWF0XHJcbiAgICAgKiAgICAgICAgICAgICAgc2lnbmVkIDogU2VwZXJhdGUgc3RyaW5nIHRoYXQgY29udGFpbnMgYWxsIGRhdGEgdGhhdCB3aWxsIGJlIHNpZ25lZCAoY29udGVudCArIG1ldGEpXHJcbiAgICAgKiAgICAgICAgICAgICAgc2lnbmF0dXJlIDogU2lnbmF0dXJlIG9mIHRoZSBzaWduZWQgZGF0YVxyXG4gICAgICovXHJcbiAgICBwYXJzZU1lc3NhZ2UobWVzc2FnZSkge1xyXG4gICAgICAgIGxldCBtZXNzYWdlQ29udGVudCwgbWVzc2FnZU1ldGEsIG1lc3NhZ2VTaWduYXR1cmUsIG1lc3NhZ2VTaWduZWRDb250ZW50O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIGN1dCB0aGUgc2VjdGlvbnNcclxuICAgICAgICAgICAgbWVzc2FnZUNvbnRlbnQgPSBtZXNzYWdlLnNwbGl0KE1TR19IRUFEKVsxXTsgLy8gZXZlcnl0aGluZyBiZWZvcmUgdGhlIGhlYWQgaXMgaWdub3JlZFxyXG4gICAgICAgICAgICBtZXNzYWdlTWV0YSA9IG1lc3NhZ2VDb250ZW50LnNwbGl0KE1TR19NRVRBKTtcclxuICAgICAgICAgICAgbWVzc2FnZUNvbnRlbnQgPSBtZXNzYWdlTWV0YVswXS5yZXBsYWNlKC9eXFxufFxcbiQvZywgXCJcIik7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VTaWduYXR1cmUgPSBtZXNzYWdlTWV0YVsxXS5zcGxpdChNU0dfU0lHTkFUVVJFKTtcclxuICAgICAgICAgICAgbWVzc2FnZU1ldGEgPSBtZXNzYWdlU2lnbmF0dXJlWzBdLnRyaW0oKTtcclxuICAgICAgICAgICAgbWVzc2FnZVNpZ25hdHVyZSA9IG1lc3NhZ2VTaWduYXR1cmVbMV0uc3BsaXQoTVNHX0ZPT1QpWzBdLnRyaW0oKTsgLy8gZXZlcnl0aGluZyBhZnRlciBmb290ZXIgaXMgaWdub3JlZFxyXG5cclxuICAgICAgICAgICAgLy8gaG93IHRoZSBzaWduZWQgY29udGVudCBpdCBidWlsdCBpcyBjcnVjaWFsLCBjb25zaWRlciBlbmNhcHN1bGF0aW5nXHJcbiAgICAgICAgICAgIG1lc3NhZ2VTaWduZWRDb250ZW50ID0gbWVzc2FnZUNvbnRlbnQgKyBcIlxcblwiICsgbWVzc2FnZU1ldGE7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQuc2lnbmVkbWVzc2FnZXMuaW52YWxpZGZvcm1hdFwiKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG1lc3NhZ2VNZXRhQWNjb3VudCxcclxuICAgICAgICAgICAgbWVzc2FnZU1ldGFLZXksXHJcbiAgICAgICAgICAgIG1lc3NhZ2VNZXRhQmxvY2ssXHJcbiAgICAgICAgICAgIG1lc3NhZ2VNZXRhVGltZXN0YW1wO1xyXG4gICAgICAgIGlmIChtZXNzYWdlTWV0YSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvY2VzcyBtZXRhXHJcbiAgICAgICAgICAgICAgICAvLyAuLi4gc2VuZGVyXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTWV0YUFjY291bnQgPSBtZXNzYWdlTWV0YS5zcGxpdChNU0dfU0VOREVSICsgXCI9XCIpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFBY2NvdW50ID0gbWVzc2FnZU1ldGFBY2NvdW50WzFdXHJcbiAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiXFxuXCIpWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAuLi4gYW5kIGl0cyBwdWJsaWMga2V5XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTWV0YUtleSA9IG1lc3NhZ2VNZXRhLnNwbGl0KE1TR19QVUJMSUNLRVkgKyBcIj1cIik7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTWV0YUtleSA9IG1lc3NhZ2VNZXRhS2V5WzFdLnNwbGl0KFwiXFxuXCIpWzBdLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAuLi4gYmxvY2sgbnVtYmVyXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTWV0YUJsb2NrID0gbWVzc2FnZU1ldGEuc3BsaXQoTVNHX0JMT0NLICsgXCI9XCIpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFCbG9jayA9IG1lc3NhZ2VNZXRhQmxvY2tbMV0uc3BsaXQoXCJcXG5cIilbMF0udHJpbSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIC4uLiB0aW1lIHN0YW1wXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTWV0YVRpbWVzdGFtcCA9IG1lc3NhZ2VNZXRhLnNwbGl0KE1TR19EQVRFICsgXCI9XCIpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFUaW1lc3RhbXAgPSBtZXNzYWdlTWV0YVRpbWVzdGFtcFsxXVxyXG4gICAgICAgICAgICAgICAgICAgIC5zcGxpdChcIlxcblwiKVswXVxyXG4gICAgICAgICAgICAgICAgICAgIC50cmltKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmludmFsaWRmb3JtYXRcIlxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2VDb250ZW50LFxyXG4gICAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50OiBtZXNzYWdlTWV0YUFjY291bnQsXHJcbiAgICAgICAgICAgICAgICBrZXk6IG1lc3NhZ2VNZXRhS2V5LFxyXG4gICAgICAgICAgICAgICAgYmxvY2s6IG1lc3NhZ2VNZXRhQmxvY2ssXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG1lc3NhZ2VNZXRhVGltZXN0YW1wXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNpZ25lZDogbWVzc2FnZVNpZ25lZENvbnRlbnQsXHJcbiAgICAgICAgICAgIHNpZ25hdHVyZTogbWVzc2FnZVNpZ25hdHVyZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZ2l2ZW4gc3RyaW5nIG1lc3NhZ2UgaXMgcGFyc2VkIGFuZCB0aGVuIGl0cyBzaWduYXR1cmUgdmVyaWZpZWQuIEEgcG9zaXRpdmUgdmVyaWZpY2F0aW9uIHJldHVybiB0aGUgcGFyc2VkXHJcbiAgICAgKiBtZXNzYWdlLCBhbnl0aGluZyBlbHNlIHRocm93cyBhbiBleGVwdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBNZXNzYWdlIGFzIHJhdyBzdHJpbmcsIHByb3Blcmx5IGZvcm1hdHRlZCB3aXRoIGhlYWQvbWV0YS9zaWduYXR1cmUvZm9vdGVyLCBvciBhbHJlYWR5IHBhcnNlZCBtZXNzYWdlXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgcGFyc2VkIG1lc3NhZ2UsIHNlZSBwYXJzZU1lc3NhZ2VcclxuICAgICAqL1xyXG4gICAgdmVyaWZ5TWVtbyhtZXNzYWdlKSB7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2Vfc2lnbmVkO1xyXG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiB8fCBtZXNzYWdlIGluc3RhbmNlb2YgU3RyaW5nKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2Vfc2lnbmVkID0gdGhpcy5wYXJzZU1lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gYXNzdW1lIGl0cyBhIGRpY3Rpb25hcnlcclxuICAgICAgICAgICAgbWVzc2FnZV9zaWduZWQgPSBtZXNzYWdlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdmFsaWRhdGUgYWNjb3VudCBhbmQga2V5XHJcbiAgICAgICAgbGV0IHN0b3JlZEFjY291bnQgPSBDaGFpblN0b3JlLmdldEFjY291bnQobWVzc2FnZV9zaWduZWQubWV0YS5hY2NvdW50KTtcclxuICAgICAgICBpZiAoc3RvcmVkQWNjb3VudCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQuc2lnbmVkbWVzc2FnZXMuaW52YWxpZHVzZXJcIilcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHZlcmlmeSBtZXNzYWdlIHNpZ25lZFxyXG4gICAgICAgIGxldCB2ZXJpZmllZCA9IGZhbHNlO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZlcmlmaWVkID0gU2lnbmF0dXJlLmZyb21IZXgobWVzc2FnZV9zaWduZWQuc2lnbmF0dXJlKS52ZXJpZnlCdWZmZXIoXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlX3NpZ25lZC5zaWduZWQsXHJcbiAgICAgICAgICAgICAgICBQdWJsaWNLZXkuZnJvbVB1YmxpY0tleVN0cmluZyhtZXNzYWdlX3NpZ25lZC5tZXRhLmtleSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgLy8gd3JhcCBtZXNzYWdlIHRoYXQgY291bGQgYmUgcmFpc2VkIGZyb20gU2lnbmF0dXJlXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQuc2lnbmVkbWVzc2FnZXMuZXJyb3J2ZXJpZnlpbmdcIilcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF2ZXJpZmllZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmludmFsaWRzaWduYXR1cmVcIilcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2Vfc2lnbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2l2ZW4gYW4gYWNjb3VudCBhbmQgdGhlIG1lc3NhZ2UgdGV4dFxyXG4gICAgICogQHBhcmFtIGFjY291bnQgQWNjb3VudCB0aGF0IHdyaXRlcyB0aGUgbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VUZXh0IFN0cmluZyB0ZXh0IG9mIHRoZSBtZXNzYWdlXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgICAqL1xyXG4gICAgc2lnbk1lc3NhZ2UoYWNjb3VudCwgbWVzc2FnZVRleHQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgd2FsbGV0IGlzIHVubG9ja2VkICh3ZSBuZWVkIHByaXZhdGUga2V5KVxyXG4gICAgICAgICAgICBXYWxsZXRVbmxvY2tBY3Rpb25zLnVubG9jaygpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2J0YWluIGFsbCBuZWNlc3Nhcnkga2V5c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVtb19mcm9tX3B1YmxpYyA9IGFjY291bnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoXCJvcHRpb25zXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KFwibWVtb19rZXlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSAxcyBhcmUgYmFzZTU4IGZvciBhbGwgemVyb3MgKG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvMTExMTExMTExMTExMTExMTExMTExLy50ZXN0KG1lbW9fZnJvbV9wdWJsaWMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vX2Zyb21fcHVibGljID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVtb19mcm9tX3ByaXZrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlVGV4dCAmJiBtZW1vX2Zyb21fcHVibGljKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vX2Zyb21fcHJpdmtleSA9IFdhbGxldERiLmdldFByaXZhdGVLZXkoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb19mcm9tX3B1YmxpY1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVtb19mcm9tX3ByaXZrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5pbnZhbGlka2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IG90aGVyIG1ldGEgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXJyX2Jsb2NrID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QoXCIyLjEuMFwiKS5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxhc3RfaXJyZXZlcnNpYmxlX2Jsb2NrX251bVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1ldGEgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTVNHX1NFTkRFUiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIj1cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmdldChcIm5hbWVcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNU0dfUFVCTElDS0VZICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPVwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9fZnJvbV9wdWJsaWMgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNU0dfQkxPQ0sgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI9XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXJyX2Jsb2NrICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTVNHX0RBVEUgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI9XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93LnRvVVRDU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZUNvbnRlbnRUb0JlU2lnbmVkID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VUZXh0ICsgXCJcXG5cIiArIG1ldGE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBibG9jayBndWlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lbW9fc2lnbmF0dXJlID0gU2lnbmF0dXJlLnNpZ25CdWZmZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VDb250ZW50VG9CZVNpZ25lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb19mcm9tX3ByaXZrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9fZnJvbV9wdWJsaWNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZW1vX2Zvcm1hdHRlZCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TR19IRUFEICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VUZXh0ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TR19NRVRBICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGEgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcblwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTVNHX1NJR05BVFVSRSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vX3NpZ25hdHVyZS50b0hleCgpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TR19GT09UO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobWVtb19mb3JtYXR0ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlcyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWx0LmNyZWF0ZUFjdGlvbnMoU2lnbmVkTWVzc2FnZUFjdGlvbik7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IFNpZ25lZE1lc3NhZ2VBY3Rpb24gZnJvbSBcIi4uLy4uL2FjdGlvbnMvU2lnbmVkTWVzc2FnZUFjdGlvblwiO1xyXG5cclxuLyoqIFRoaXMgY29tcG9uZW50IGFsbG93cyB0byBkaXNwbGF5IGFuZCB2ZXJpZnkgYSBzaWduZWQgbWVzc2FnZVxyXG4gKlxyXG4gKiAgU2VlIFNpZ25lZE1lc3NhZ2VBY3Rpb24gZm9yIGRldGFpbHMgb24gbWVzc2FnZSBmb3JtYXQuXHJcbiAqXHJcbiAqICAgIEBhdXRob3IgU3RlZmFuIFNjaGllc3NsIDxzdGVmYW4uc2NoaWVzc2xAYmxvY2tjaGFpbnByb2plY3RzYnYuY29tPlxyXG4gKi9cclxuY2xhc3MgU2lnbmVkTWVzc2FnZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICAvLyBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgLy8gICAgIHNpZ25lZE1lc3NhZ2U6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxyXG4gICAgLy8gICAgbm9WZXJpZmljYXRpb25cclxuICAgIC8vIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBub1ZlcmlmaWNhdGlvbjogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5wcm9wcy5tZXNzYWdlLFxyXG4gICAgICAgICAgICBtZXNzYWdlUGFyc2VkOiBudWxsLFxyXG4gICAgICAgICAgICBzaG93UmF3TWVzc2FnZTogZmFsc2UsXHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIG5vVmVyaWZpY2F0aW9uOiB0aGlzLnByb3BzLm5vVmVyaWZpY2F0aW9uLFxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICB2ZXJpZmllZDogbnVsbCxcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBfdmVyaWZ5TWVzc2FnZShzaWduZWRNZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHNpZ25lZE1lc3NhZ2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VQYXJzZWQ6IG51bGwsXHJcbiAgICAgICAgICAgIHZlcmlmaWVkOiBudWxsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2VQYXJzZWQgPSBudWxsO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VQYXJzZWQgPSBTaWduZWRNZXNzYWdlQWN0aW9uLnBhcnNlTWVzc2FnZShzaWduZWRNZXNzYWdlKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICB2ZXJpZmllZDogbnVsbCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VQYXJzZWQ6IG1lc3NhZ2VQYXJzZWRcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGUubm9WZXJpZmljYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHZlcmlmaWVkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbjogY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQuc2lnbmVkbWVzc2FnZXMudmVyaWZ5aW5nXCJcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBibG9jayBndWlcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTaWduZWRNZXNzYWdlQWN0aW9uLnZlcmlmeU1lbW8obWVzc2FnZVBhcnNlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZpZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb246IFwiXCIgLy8gY2xlYXIgcG9wdXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3dhcm5pbmcoZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmaWVkOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICB0aGlzLl93YXJuaW5nKGVyci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMuX3ZlcmlmeU1lc3NhZ2UodGhpcy5zdGF0ZS5tZXNzYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xyXG4gICAgICAgIGxldCBzaWduZWRNZXNzYWdlID0gbmV4dFByb3BzLm1lc3NhZ2U7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBzaWduZWRNZXNzYWdlICE9IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBzaWduZWRNZXNzYWdlICE9IG51bGwgJiZcclxuICAgICAgICAgICAgc2lnbmVkTWVzc2FnZSA9PSB0aGlzLnN0YXRlLm1lc3NhZ2VcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgLy8gYWxyZWFkeSBkb25lXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fdmVyaWZ5TWVzc2FnZShzaWduZWRNZXNzYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICBfd2FybmluZyhtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbjogbWVzc2FnZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF90b2dnbGVSYXdNZXNzYWdlKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBzaG93UmF3TWVzc2FnZTogIXRoaXMuc3RhdGUuc2hvd1Jhd01lc3NhZ2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IGxlZ2VuZE1lc3NhZ2U7XHJcbiAgICAgICAgbGV0IGJvcmRlckNvbG9yO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm1lc3NhZ2VQYXJzZWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS52ZXJpZmllZCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBib3JkZXJDb2xvciA9IFwiI0ZGRlwiO1xyXG4gICAgICAgICAgICAgICAgbGVnZW5kTWVzc2FnZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgXCJVbnZlcmlmaWVkIG1lc3NhZ2UgZnJvbSBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5tZXNzYWdlUGFyc2VkLm1ldGEuYWNjb3VudDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLnZlcmlmaWVkKSB7XHJcbiAgICAgICAgICAgICAgICBib3JkZXJDb2xvciA9IFwiI0ZGRlwiO1xyXG4gICAgICAgICAgICAgICAgbGVnZW5kTWVzc2FnZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgXCJWZXJpZmllZCBtZXNzYWdlIGZyb20gXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubWVzc2FnZVBhcnNlZC5tZXRhLmFjY291bnQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBib3JkZXJDb2xvciA9IFwiI0YwMFwiO1xyXG4gICAgICAgICAgICAgICAgbGVnZW5kTWVzc2FnZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgXCJSZWZ1dGVkIG1lc3NhZ2UsIGluZGljYXRlZCBzZW5kZXIgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubWVzc2FnZVBhcnNlZC5tZXRhLmFjY291bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG1lc3NhZ2VHaXZlbiA9XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMubWVzc2FnZSAhPSBudWxsICYmIHRoaXMucHJvcHMubWVzc2FnZSAhPSBcIlwiO1xyXG4gICAgICAgIGxldCBub3RpZmljYXRpb25HaXZlbiA9XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubm90aWZpY2F0aW9uICYmIHRoaXMuc3RhdGUubm90aWZpY2F0aW9uICE9IFwiXCI7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e2NvbG9yOiBcImdyYXlcIiwgbWFyZ2luOiBcIjEwcHggMTBweFwifX0+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5tZXNzYWdlUGFyc2VkICE9IG51bGwgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxmaWVsZHNldCBzdHlsZT17e2JvcmRlckNvbG9yOiBib3JkZXJDb2xvcn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGVnZW5kIHN0eWxlPXt7Y29sb3I6IFwid2hpdGVcIiwgd2VpZ2h0OiBcImJvbGRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xlZ2VuZE1lc3NhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGVnZW5kPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cHJlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwidGFibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUubWVzc2FnZVBhcnNlZC5jb250ZW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge25vdGlmaWNhdGlvbkdpdmVuICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFwiY2VudGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcInRhYmxlLWNlbGxcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiY2FsYygxMDAlIC0gMzBweClcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogXCJjYWxjKDEwMCUgKyAxNXB4KVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBcIjBweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IFwiMzBweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoNTAsNTAsNTAsMC41KVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwib3ZlcmxheVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5ub3RpZmljYXRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3ByZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IFwic21hbGxcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdDogXCJyaWdodFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaWduZWQgb24ge3RoaXMuc3RhdGUubWVzc2FnZVBhcnNlZC5tZXRhLnRpbWVzdGFtcH17XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcInNtYWxsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0OiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IFwiMHB4IDBweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBcIiM3NzdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fdG9nZ2xlUmF3TWVzc2FnZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYjeDFmNTBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuc2hvd1Jhd01lc3NhZ2UgJiYgPGJyIC8+fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5zaG93UmF3TWVzc2FnZSAmJiA8YnIgLz59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnNob3dSYXdNZXNzYWdlICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcImNhbGMoMTAwJSlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6IFwiMTAwMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwcmU+e3RoaXMuc3RhdGUubWVzc2FnZX08L3ByZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ+XHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAge21lc3NhZ2VHaXZlbiAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubWVzc2FnZVBhcnNlZCA9PSBudWxsICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGZpZWxkc2V0IHN0eWxlPXt7Ym9yZGVyQ29sb3I6IFwiI0YwMFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGVnZW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tjb2xvcjogXCJyZWRcIiwgd2VpZ2h0OiBcImJvbGRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZXJyb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVycm9yIHdoaWxlIHBhcnNpbmcgbWVzc2FnZSwgcGxlYXNlIGNoZWNrIHN5bnRheFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gbWVzc2FnZSBiZWxvd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sZWdlbmQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cHJlPnt0aGlzLnByb3BzLm1lc3NhZ2V9PC9wcmU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2lnbmVkTWVzc2FnZTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xyXG5pbXBvcnQgY29uc3RhbnRzIGZyb20gXCJjaGFpbi9hY2NvdW50X2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuLi9BY2NvdW50L0FjY291bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgSW1tdXRhYmxlIGZyb20gXCJpbW11dGFibGVcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcclxuaW1wb3J0IExpbmtUb0FjY291bnRCeUlkIGZyb20gXCIuLi9VdGlsaXR5L0xpbmtUb0FjY291bnRCeUlkXCI7XHJcbmltcG9ydCBXYWxsZXRBcGkgZnJvbSBcImFwaS9XYWxsZXRBcGlcIjtcclxuaW1wb3J0IFdhbGxldERiIGZyb20gXCJzdG9yZXMvV2FsbGV0RGIuanNcIjtcclxuXHJcbmNsYXNzIEFjY291bnRSb3cgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBhY2NvdW50OiBDaGFpblR5cGVzLkNoYWluQWNjb3VudC5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgdGVtcENvbXBvbmVudDogXCJ0clwiXHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2FjY291bnQsIG9uUmVtb3ZlfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0ZD57dGhpcy5wcm9wcy5pbmRleH08L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPnthY2NvdW50LmdldChcImlkXCIpfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPExpbmtUb0FjY291bnRCeUlkIGFjY291bnQ9e2FjY291bnQuZ2V0KFwiaWRcIil9IC8+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAge29uUmVtb3ZlID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17b25SZW1vdmUuYmluZCh0aGlzLCBhY2NvdW50LmdldChcImlkXCIpKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvbiBvdXRsaW5lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVtb3ZlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbkFjY291bnRSb3cgPSBCaW5kVG9DaGFpblN0YXRlKEFjY291bnRSb3cpO1xyXG5cclxuY2xhc3MgQWNjb3VudExpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgX29uUmVtb3ZlKGxpc3RpbmcsIGFjY291bnQsIGUpIHtcclxuICAgICAgICBpZiAoYWNjb3VudCkge1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudFN0YXRlID0gdGhpcy5wcm9wcy5nZXRDdXJyZW50U3RhdGUoYWNjb3VudCk7XHJcbiAgICAgICAgICAgIGxldCB0ciA9IFdhbGxldEFwaS5uZXdfdHJhbnNhY3Rpb24oKTtcclxuICAgICAgICAgICAgdHIuYWRkX3R5cGVfb3BlcmF0aW9uKFwiYWNjb3VudF93aGl0ZWxpc3RcIiwge1xyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBcIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemluZ19hY2NvdW50OiB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50X3RvX2xpc3Q6IGFjY291bnQsXHJcbiAgICAgICAgICAgICAgICBuZXdfbGlzdGluZzogY3VycmVudFN0YXRlIC0gY29uc3RhbnRzLmFjY291bnRfbGlzdGluZ1tsaXN0aW5nXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgV2FsbGV0RGIucHJvY2Vzc190cmFuc2FjdGlvbih0ciwgbnVsbCwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge3JlbW92ZUJ1dHRvbiwgd2hpdGUsIGxpc3R9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgbGV0IHJvd3MgPSBsaXN0XHJcbiAgICAgICAgICAgIC5tYXAoKGFjY291bnQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxBY2NvdW50Um93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25SZW1vdmU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9vblJlbW92ZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUgPyBcIndoaXRlX2xpc3RlZFwiIDogXCJibGFja19saXN0ZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXtpbmRleCArIDF9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50b0FycmF5KCk7XHJcblxyXG4gICAgICAgIGxldCBzaG93SGVhZGVycyA9IHRydWU7XHJcbiAgICAgICAgaWYgKCFyb3dzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzaG93SGVhZGVycyA9IGZhbHNlO1xyXG4gICAgICAgICAgICByb3dzLnB1c2goXHJcbiAgICAgICAgICAgICAgICA8dHIga2V5PVwiZW1wdHlcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nOiBcIjFyZW0gMFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sU3Bhbj17cmVtb3ZlQnV0dG9uID8gNCA6IDN9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXt0aGlzLnByb3BzLmVtcHR5VGV4dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGNvbXBhY3QgZGFzaGJvYXJkLXRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICB7c2hvd0hlYWRlcnMgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+IzwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5pZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubmFtZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbW92ZUJ1dHRvbiA/IDx0aCAvPiA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPHRib2R5Pntyb3dzfTwvdGJvZHk+XHJcbiAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQWNjb3VudFdoaXRlbGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBhY2NvdW50TmFtZTogXCJcIixcclxuICAgICAgICAgICAgYWNjb3VudFRvTGlzdDogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgX2dldEN1cnJlbnRTdGF0ZShpZCkge1xyXG4gICAgICAgIGxldCB7YWNjb3VudH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCB3aGl0ZSA9IGFjY291bnQuZ2V0KFwid2hpdGVsaXN0ZWRfYWNjb3VudHNcIikgfHwgSW1tdXRhYmxlLkxpc3QoKTtcclxuICAgICAgICBsZXQgYmxhY2sgPSBhY2NvdW50LmdldChcImJsYWNrbGlzdGVkX2FjY291bnRzXCIpIHx8IEltbXV0YWJsZS5MaXN0KCk7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBjb25zdGFudHMuYWNjb3VudF9saXN0aW5nLm5vX2xpc3Rpbmc7XHJcblxyXG4gICAgICAgIGlmICh3aGl0ZS5pbmNsdWRlcyhpZCkpIHtcclxuICAgICAgICAgICAgY3VycmVudCArPSBjb25zdGFudHMuYWNjb3VudF9saXN0aW5nLndoaXRlX2xpc3RlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChibGFjay5pbmNsdWRlcyhpZCkpIHtcclxuICAgICAgICAgICAgY3VycmVudCArPSBjb25zdGFudHMuYWNjb3VudF9saXN0aW5nLmJsYWNrX2xpc3RlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjdXJyZW50O1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkFkZChsaXN0aW5nLCBlKSB7XHJcbiAgICAgICAgbGV0IHthY2NvdW50VG9MaXN0fSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHthY2NvdW50fSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGxldCBjdXJyZW50U3RhdGUgPSB0aGlzLl9nZXRDdXJyZW50U3RhdGUoYWNjb3VudFRvTGlzdCk7XHJcblxyXG4gICAgICAgIGlmIChhY2NvdW50VG9MaXN0KSB7XHJcbiAgICAgICAgICAgIGxldCB0ciA9IFdhbGxldEFwaS5uZXdfdHJhbnNhY3Rpb24oKTtcclxuICAgICAgICAgICAgdHIuYWRkX3R5cGVfb3BlcmF0aW9uKFwiYWNjb3VudF93aGl0ZWxpc3RcIiwge1xyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBcIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemluZ19hY2NvdW50OiBhY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudF90b19saXN0OiBhY2NvdW50VG9MaXN0LFxyXG4gICAgICAgICAgICAgICAgbmV3X2xpc3Rpbmc6IGN1cnJlbnRTdGF0ZSArIGNvbnN0YW50cy5hY2NvdW50X2xpc3RpbmdbbGlzdGluZ11cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFdhbGxldERiLnByb2Nlc3NfdHJhbnNhY3Rpb24odHIsIG51bGwsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25BY2NvdW50Rm91bmQoYWNjb3VudCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiYWNjb3VudEZvdW5kOlwiLCBhY2NvdW50KTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgYWNjb3VudE5hbWU6IGFjY291bnQgPyBhY2NvdW50LmdldChcIm5hbWVcIikgOiBudWxsLFxyXG4gICAgICAgICAgICBhY2NvdW50VG9MaXN0OiBhY2NvdW50ID8gYWNjb3VudC5nZXQoXCJpZFwiKSA6IG51bGxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25BY2NvdW50Q2hhbmdlZChhY2NvdW50KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJhY2NvdW50IGNoYW5nZWQ6XCIsIGFjY291bnQpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBhY2NvdW50TmFtZTogYWNjb3VudCxcclxuICAgICAgICAgICAgYWNjb3VudFRvTGlzdDogbnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2FjY291bnR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQge2FjY291bnROYW1lfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLWNvbnRhaW5lciBnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFic1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWNjb3VudC10YWJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNDbGFzcz1cImFjY291bnQtb3ZlcnZpZXcgbm8tcGFkZGluZyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwid2hpdGVsaXN0VGFiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cImdyaWQtY29udGVudCBzaHJpbmsgc21hbGwtdmVydGljYWwgbWVkaXVtLWhvcml6b250YWwgbm8tcGFkZGluZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC53aGl0ZWxpc3QudGl0bGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIxcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzbWFsbC0xMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlUZXh0PVwiYWNjb3VudC53aGl0ZWxpc3QuZW1wdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Q3VycmVudFN0YXRlPXt0aGlzLl9nZXRDdXJyZW50U3RhdGUuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aGl0ZWxpc3RlZF9hY2NvdW50c1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgfHwgSW1tdXRhYmxlLkxpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IWFjY291bnQuZ2V0KFwid2hpdGVsaXN0ZWRfYWNjb3VudHNcIikgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJoYXMtZXJyb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbGVhc2Ugbm90ZSwgd2hpdGVsaXN0aW5nIGlzIG5vdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtpbmcgeWV0IGR1ZSB0byB1bnJlc29sdmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VuZCBpc3N1ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3twYWRkaW5nOiBcIjJyZW0gMFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e1wiYWNjb3VudC53aGl0ZWxpc3QuYWRkXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU9e2FjY291bnROYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjb3VudENoYW5nZWQ9e3RoaXMuX29uQWNjb3VudEZvdW5kLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbkFjY291bnRDaGFuZ2VkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnROYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWN0aW9uPXt0aGlzLl9vbkFkZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndoaXRlX2xpc3RlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25fbGFiZWw9XCJhY2NvdW50LnBlcm0uY29uZmlybV9hZGRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlYWhlYWQ9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LndoaXRlbGlzdC5ibGFja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiBcIjFyZW1cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNtYWxsLTEyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudExpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eVRleHQ9XCJhY2NvdW50LndoaXRlbGlzdC5lbXB0eV9ibGFja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDdXJyZW50U3RhdGU9e3RoaXMuX2dldEN1cnJlbnRTdGF0ZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0PXthY2NvdW50LmdldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJibGFja2xpc3RlZF9hY2NvdW50c1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZzogXCIycmVtIDFyZW1cIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LndoaXRlbGlzdC5hZGRfYmxhY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZT17YWNjb3VudE5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5fb25BY2NvdW50Rm91bmQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uQWNjb3VudENoYW5nZWQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudE5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY3Rpb249e3RoaXMuX29uQWRkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYmxhY2tfbGlzdGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbl9sYWJlbD1cImFjY291bnQucGVybS5jb25maXJtX2FkZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZWFoZWFkPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC53aGl0ZWxpc3Qud2hpdGVfYnlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIxcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzbWFsbC0xMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlUZXh0PVwiYWNjb3VudC53aGl0ZWxpc3QuZW1wdHlfd2hpdGVfYnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdD17YWNjb3VudC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2hpdGVsaXN0aW5nX2FjY291bnRzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC53aGl0ZWxpc3QuYmxhY2tfYnlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIxcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzbWFsbC0xMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlUZXh0PVwiYWNjb3VudC53aGl0ZWxpc3QuZW1wdHlfYmxhY2tfYnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdD17YWNjb3VudC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYmxhY2tsaXN0aW5nX2FjY291bnRzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFjY291bnRXaGl0ZWxpc3Q7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IEltbXV0YWJsZSBmcm9tIFwiaW1tdXRhYmxlXCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IGFjY291bnRVdGlscyBmcm9tIFwiY29tbW9uL2FjY291bnRfdXRpbHNcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlLCBGZXRjaENoYWluT2JqZWN0c30gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBXb3JrZXJBcHByb3ZhbCBmcm9tIFwiLi9Xb3JrZXJBcHByb3ZhbFwiO1xyXG5pbXBvcnQgVm90aW5nQWNjb3VudHNMaXN0IGZyb20gXCIuL1ZvdGluZ0FjY291bnRzTGlzdFwiO1xyXG5pbXBvcnQgY25hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XHJcbmltcG9ydCB7VGFicywgVGFifSBmcm9tIFwiLi4vVXRpbGl0eS9UYWJzXCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQge0xpbmt9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XHJcbmltcG9ydCBBcHBsaWNhdGlvbkFwaSBmcm9tIFwiYXBpL0FwcGxpY2F0aW9uQXBpXCI7XHJcbmltcG9ydCBBY2NvdW50U2VsZWN0b3IgZnJvbSBcIi4vQWNjb3VudFNlbGVjdG9yXCI7XHJcbmltcG9ydCBJY29uIGZyb20gXCIuLi9JY29uL0ljb25cIjtcclxuaW1wb3J0IEFzc2V0TmFtZSBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldE5hbWVcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQge0VxdWl2YWxlbnRWYWx1ZUNvbXBvbmVudH0gZnJvbSBcIi4uL1V0aWxpdHkvRXF1aXZhbGVudFZhbHVlQ29tcG9uZW50XCI7XHJcbmltcG9ydCBGb3JtYXR0ZWRBc3NldCBmcm9tIFwiLi4vVXRpbGl0eS9Gb3JtYXR0ZWRBc3NldFwiO1xyXG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tIFwic3RvcmVzL1NldHRpbmdzU3RvcmVcIjtcclxuXHJcbmNsYXNzIEFjY291bnRWb3RpbmcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBpbml0aWFsQnVkZ2V0OiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgcHJveHk6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBnbG9iYWxPYmplY3Q6IFwiMi4wLjBcIlxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICBjb25zdCBwcm94eUlkID0gcHJvcHMucHJveHkuZ2V0KFwiaWRcIik7XHJcbiAgICAgICAgY29uc3QgcHJveHlOYW1lID0gcHJvcHMucHJveHkuZ2V0KFwibmFtZVwiKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBwcm94eV9hY2NvdW50X2lkOiBwcm94eUlkID09PSBcIjEuMi41XCIgPyBcIlwiIDogcHJveHlJZCwgLy9cIjEuMi4xNlwiLFxyXG4gICAgICAgICAgICBwcmV2X3Byb3h5X2FjY291bnRfaWQ6IHByb3h5SWQgPT09IFwiMS4yLjVcIiA/IFwiXCIgOiBwcm94eUlkLFxyXG4gICAgICAgICAgICBjdXJyZW50X3Byb3h5X2lucHV0OiBwcm94eUlkID09PSBcIjEuMi41XCIgPyBcIlwiIDogcHJveHlOYW1lLFxyXG4gICAgICAgICAgICB3aXRuZXNzZXM6IG51bGwsXHJcbiAgICAgICAgICAgIGNvbW1pdHRlZTogbnVsbCxcclxuICAgICAgICAgICAgdm90ZV9pZHM6IEltbXV0YWJsZS5TZXQoKSxcclxuICAgICAgICAgICAgcHJveHlfdm90ZV9pZHM6IEltbXV0YWJsZS5TZXQoKSxcclxuICAgICAgICAgICAgbGFzdEJ1ZGdldE9iamVjdDogcHJvcHMuaW5pdGlhbEJ1ZGdldC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgd29ya2VyVGFibGVJbmRleDogcHJvcHMudmlld1NldHRpbmdzLmdldChcIndvcmtlclRhYmxlSW5kZXhcIiwgMSksXHJcbiAgICAgICAgICAgIGFsbF93aXRuZXNzZXM6IEltbXV0YWJsZS5MaXN0KCksXHJcbiAgICAgICAgICAgIGFsbF9jb21taXR0ZWU6IEltbXV0YWJsZS5MaXN0KClcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub25Qcm94eUFjY291bnRGb3VuZCA9IHRoaXMub25Qcm94eUFjY291bnRGb3VuZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub25QdWJsaXNoID0gdGhpcy5vblB1Ymxpc2guYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uUmVzZXQgPSB0aGlzLm9uUmVzZXQuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9nZXRWb3RlT2JqZWN0cyA9IHRoaXMuX2dldFZvdGVPYmplY3RzLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIGFjY291bnRVdGlscy5nZXRGaW5hbEZlZUFzc2V0KHRoaXMucHJvcHMuYWNjb3VudCwgXCJhY2NvdW50X3VwZGF0ZVwiKTtcclxuICAgICAgICBDaGFpblN0b3JlLmZldGNoQWxsV29ya2VycygpO1xyXG4gICAgICAgIHRoaXMuZ2V0QnVkZ2V0T2JqZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVBY2NvdW50RGF0YSh0aGlzLnByb3BzKTtcclxuICAgICAgICB0aGlzLl9nZXRWb3RlT2JqZWN0cygpO1xyXG4gICAgICAgIHRoaXMuX2dldFZvdGVPYmplY3RzKFwiY29tbWl0dGVlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobnApIHtcclxuICAgICAgICBpZiAobnAuYWNjb3VudCAhPT0gdGhpcy5wcm9wcy5hY2NvdW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3h5SWQgPSBucC5wcm94eS5nZXQoXCJpZFwiKTtcclxuICAgICAgICAgICAgbGV0IG5ld1N0YXRlID0ge1xyXG4gICAgICAgICAgICAgICAgcHJveHlfYWNjb3VudF9pZDogcHJveHlJZCA9PT0gXCIxLjIuNVwiID8gXCJcIiA6IHByb3h5SWRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cHJldl9wcm94eV9hY2NvdW50X2lkOiBuZXdTdGF0ZS5wcm94eV9hY2NvdW50X2lkfSk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQWNjb3VudERhdGEobnAsIG5ld1N0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZXRCdWRnZXRPYmplY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVBY2NvdW50RGF0YSh7YWNjb3VudH0sIHN0YXRlID0gdGhpcy5zdGF0ZSkge1xyXG4gICAgICAgIGxldCB7cHJveHlfYWNjb3VudF9pZH0gPSBzdGF0ZTtcclxuICAgICAgICBjb25zdCBwcm94eSA9IENoYWluU3RvcmUuZ2V0QWNjb3VudChwcm94eV9hY2NvdW50X2lkKTtcclxuICAgICAgICBsZXQgb3B0aW9ucyA9IGFjY291bnQuZ2V0KFwib3B0aW9uc1wiKTtcclxuICAgICAgICBsZXQgcHJveHlPcHRpb25zID0gcHJveHkgPyBwcm94eS5nZXQoXCJvcHRpb25zXCIpIDogbnVsbDtcclxuICAgICAgICAvLyBsZXQgcHJveHlfYWNjb3VudF9pZCA9IHByb3h5ID8gcHJveHkuZ2V0KFwiaWRcIikgOiBcIjEuMi41XCI7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRfcHJveHlfaW5wdXQgPSBwcm94eSA/IHByb3h5LmdldChcIm5hbWVcIikgOiBcIlwiO1xyXG4gICAgICAgIGlmIChwcm94eV9hY2NvdW50X2lkID09PSBcIjEuMi41XCIpIHtcclxuICAgICAgICAgICAgcHJveHlfYWNjb3VudF9pZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGN1cnJlbnRfcHJveHlfaW5wdXQgPSBcIlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHZvdGVzID0gb3B0aW9ucy5nZXQoXCJ2b3Rlc1wiKTtcclxuICAgICAgICBsZXQgdm90ZV9pZHMgPSB2b3Rlcy50b0FycmF5KCk7XHJcbiAgICAgICAgbGV0IHZpZHMgPSBJbW11dGFibGUuU2V0KHZvdGVfaWRzKTtcclxuICAgICAgICBDaGFpblN0b3JlLmdldE9iamVjdHNCeVZvdGVJZHModm90ZV9pZHMpO1xyXG5cclxuICAgICAgICBsZXQgcHJveHlQcm9taXNlID0gbnVsbCxcclxuICAgICAgICAgICAgcHJveHlfdmlkcyA9IEltbXV0YWJsZS5TZXQoW10pO1xyXG4gICAgICAgIGNvbnN0IGhhc1Byb3h5ID0gcHJveHlfYWNjb3VudF9pZCAhPT0gXCIxLjIuNVwiO1xyXG4gICAgICAgIGlmIChoYXNQcm94eSAmJiBwcm94eU9wdGlvbnMpIHtcclxuICAgICAgICAgICAgbGV0IHByb3h5X3ZvdGVzID0gcHJveHlPcHRpb25zLmdldChcInZvdGVzXCIpO1xyXG4gICAgICAgICAgICBsZXQgcHJveHlfdm90ZV9pZHMgPSBwcm94eV92b3Rlcy50b0FycmF5KCk7XHJcbiAgICAgICAgICAgIHByb3h5X3ZpZHMgPSBJbW11dGFibGUuU2V0KHByb3h5X3ZvdGVfaWRzKTtcclxuICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRPYmplY3RzQnlWb3RlSWRzKHByb3h5X3ZvdGVfaWRzKTtcclxuXHJcbiAgICAgICAgICAgIHByb3h5UHJvbWlzZSA9IEZldGNoQ2hhaW5PYmplY3RzKFxyXG4gICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRPYmplY3RCeVZvdGVJRCxcclxuICAgICAgICAgICAgICAgIHByb3h5X3ZvdGVfaWRzLFxyXG4gICAgICAgICAgICAgICAgMTAwMDBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgRmV0Y2hDaGFpbk9iamVjdHMoQ2hhaW5TdG9yZS5nZXRPYmplY3RCeVZvdGVJRCwgdm90ZV9pZHMsIDEwMDAwKSxcclxuICAgICAgICAgICAgcHJveHlQcm9taXNlXHJcbiAgICAgICAgXSkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBbdm90ZV9vYmpzLCBwcm94eV92b3RlX29ianNdID0gcmVzO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBzb3J0Vm90ZU9iamVjdHMob2JqZWN0cykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHdpdG5lc3NlcyA9IG5ldyBJbW11dGFibGUuTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbW1pdHRlZSA9IG5ldyBJbW11dGFibGUuTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHdvcmtlcnMgPSBuZXcgSW1tdXRhYmxlLlNldCgpO1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0cy5mb3JFYWNoKG9iaiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFjY291bnRfaWQgPSBvYmouZ2V0KFwiY29tbWl0dGVlX21lbWJlcl9hY2NvdW50XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY2NvdW50X2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdHRlZSA9IGNvbW1pdHRlZS5wdXNoKGFjY291bnRfaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKGFjY291bnRfaWQgPSBvYmouZ2V0KFwid29ya2VyX2FjY291bnRcIikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCBcIndvcmtlcjogXCIsIG9iaiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgd29ya2VycyA9IHdvcmtlcnMuYWRkKG9iai5nZXQoXCJpZFwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoYWNjb3VudF9pZCA9IG9iai5nZXQoXCJ3aXRuZXNzX2FjY291bnRcIikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdG5lc3NlcyA9IHdpdG5lc3Nlcy5wdXNoKGFjY291bnRfaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB7d2l0bmVzc2VzLCBjb21taXR0ZWUsIHdvcmtlcnN9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQge3dpdG5lc3NlcywgY29tbWl0dGVlLCB3b3JrZXJzfSA9IHNvcnRWb3RlT2JqZWN0cyh2b3RlX29ianMpO1xyXG4gICAgICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICAgICAgd2l0bmVzc2VzOiBwcm94eV93aXRuZXNzZXMsXHJcbiAgICAgICAgICAgICAgICBjb21taXR0ZWU6IHByb3h5X2NvbW1pdHRlZSxcclxuICAgICAgICAgICAgICAgIHdvcmtlcnM6IHByb3h5X3dvcmtlcnNcclxuICAgICAgICAgICAgfSA9IHNvcnRWb3RlT2JqZWN0cyhwcm94eV92b3RlX29ianMgfHwgW10pO1xyXG4gICAgICAgICAgICBsZXQgc3RhdGUgPSB7XHJcbiAgICAgICAgICAgICAgICBwcm94eV9hY2NvdW50X2lkLFxyXG4gICAgICAgICAgICAgICAgY3VycmVudF9wcm94eV9pbnB1dCxcclxuICAgICAgICAgICAgICAgIHdpdG5lc3Nlczogd2l0bmVzc2VzLFxyXG4gICAgICAgICAgICAgICAgY29tbWl0dGVlOiBjb21taXR0ZWUsXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJzOiB3b3JrZXJzLFxyXG4gICAgICAgICAgICAgICAgcHJveHlfd2l0bmVzc2VzOiBwcm94eV93aXRuZXNzZXMsXHJcbiAgICAgICAgICAgICAgICBwcm94eV9jb21taXR0ZWU6IHByb3h5X2NvbW1pdHRlZSxcclxuICAgICAgICAgICAgICAgIHByb3h5X3dvcmtlcnM6IHByb3h5X3dvcmtlcnMsXHJcbiAgICAgICAgICAgICAgICB2b3RlX2lkczogdmlkcyxcclxuICAgICAgICAgICAgICAgIHByb3h5X3ZvdGVfaWRzOiBwcm94eV92aWRzLFxyXG4gICAgICAgICAgICAgICAgcHJldl93aXRuZXNzZXM6IHdpdG5lc3NlcyxcclxuICAgICAgICAgICAgICAgIHByZXZfY29tbWl0dGVlOiBjb21taXR0ZWUsXHJcbiAgICAgICAgICAgICAgICBwcmV2X3dvcmtlcnM6IHdvcmtlcnMsXHJcbiAgICAgICAgICAgICAgICBwcmV2X3ZvdGVfaWRzOiB2aWRzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ2hhbmdlZChzID0gdGhpcy5zdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHMucHJveHlfYWNjb3VudF9pZCAhPT0gcy5wcmV2X3Byb3h5X2FjY291bnRfaWQgfHxcclxuICAgICAgICAgICAgcy53aXRuZXNzZXMgIT09IHMucHJldl93aXRuZXNzZXMgfHxcclxuICAgICAgICAgICAgcy5jb21taXR0ZWUgIT09IHMucHJldl9jb21taXR0ZWUgfHxcclxuICAgICAgICAgICAgIUltbXV0YWJsZS5pcyhzLnZvdGVfaWRzLCBzLnByZXZfdm90ZV9pZHMpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0Vm90ZU9iamVjdHModHlwZSA9IFwid2l0bmVzc2VzXCIsIHZvdGVfaWRzKSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnN0YXRlW2BhbGxfJHt0eXBlfWBdO1xyXG4gICAgICAgIGNvbnN0IGlzV2l0bmVzcyA9IHR5cGUgPT09IFwid2l0bmVzc2VzXCI7XHJcbiAgICAgICAgbGV0IGxhc3RJZHg7XHJcbiAgICAgICAgaWYgKCF2b3RlX2lkcykge1xyXG4gICAgICAgICAgICB2b3RlX2lkcyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgYWN0aXZlID0gdGhpcy5wcm9wcy5nbG9iYWxPYmplY3RcclxuICAgICAgICAgICAgICAgIC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgaXNXaXRuZXNzID8gXCJhY3RpdmVfd2l0bmVzc2VzXCIgOiBcImFjdGl2ZV9jb21taXR0ZWVfbWVtYmVyc1wiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGEuc3BsaXQoXCIuXCIpWzJdLCAxMCkgLVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChiLnNwbGl0KFwiLlwiKVsyXSwgMTApXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBsYXN0QWN0aXZlID0gYWN0aXZlLmxhc3QoKSB8fCBgMS4ke2lzV2l0bmVzcyA/IFwiNlwiIDogXCI1XCJ9LjFgO1xyXG4gICAgICAgICAgICBsYXN0SWR4ID0gcGFyc2VJbnQobGFzdEFjdGl2ZS5zcGxpdChcIi5cIilbMl0sIDEwKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gbGFzdElkeCArIDEwOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZvdGVfaWRzLnB1c2goYDEuJHtpc1dpdG5lc3MgPyBcIjZcIiA6IFwiNVwifS4ke2l9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXN0SWR4ID0gcGFyc2VJbnQodm90ZV9pZHNbdm90ZV9pZHMubGVuZ3RoIC0gMV0uc3BsaXQoXCIuXCIpWzJdLCAxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEZldGNoQ2hhaW5PYmplY3RzKENoYWluU3RvcmUuZ2V0T2JqZWN0LCB2b3RlX2lkcywgNTAwMCwge30pLnRoZW4oXHJcbiAgICAgICAgICAgIHZvdGVfb2JqcyA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlW2BhbGxfJHt0eXBlfWBdID0gY3VycmVudC5jb25jYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgSW1tdXRhYmxlLkxpc3QoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVfb2Jqc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihhID0+ICEhYSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoYSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1dpdG5lc3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJ3aXRuZXNzX2FjY291bnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImNvbW1pdHRlZV9tZW1iZXJfYWNjb3VudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISF2b3RlX29ianNbdm90ZV9vYmpzLmxlbmd0aCAtIDFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgYXJlIG1vcmUgdmFsaWQgdm90ZSBvYmpzLCBmZXRjaCAxMCBtb3JlXHJcbiAgICAgICAgICAgICAgICAgICAgdm90ZV9pZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gbGFzdElkeCArIDExOyBpIDw9IGxhc3RJZHggKyAyMDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVfaWRzLnB1c2goYDEuJHtpc1dpdG5lc3MgPyBcIjZcIiA6IFwiNVwifS4ke2l9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRWb3RlT2JqZWN0cyh0eXBlLCB2b3RlX2lkcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVtb3ZlUHJveHkgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wdWJsaXNoKG51bGwpO1xyXG4gICAgfTtcclxuXHJcbiAgICBvblB1Ymxpc2goKSB7XHJcbiAgICAgICAgdGhpcy5wdWJsaXNoKHRoaXMuc3RhdGUucHJveHlfYWNjb3VudF9pZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGlzaChuZXdfcHJveHlfaWQpIHtcclxuICAgICAgICBsZXQgdXBkYXRlZF9hY2NvdW50ID0gdGhpcy5wcm9wcy5hY2NvdW50LnRvSlMoKTtcclxuICAgICAgICBsZXQgdXBkYXRlT2JqZWN0ID0ge2FjY291bnQ6IHVwZGF0ZWRfYWNjb3VudC5pZH07XHJcbiAgICAgICAgbGV0IG5ld19vcHRpb25zID0ge21lbW9fa2V5OiB1cGRhdGVkX2FjY291bnQub3B0aW9ucy5tZW1vX2tleX07XHJcbiAgICAgICAgLy8gdXBkYXRlZF9hY2NvdW50Lm5ld19vcHRpb25zID0gdXBkYXRlZF9hY2NvdW50Lm9wdGlvbnM7XHJcbiAgICAgICAgbmV3X29wdGlvbnMudm90aW5nX2FjY291bnQgPSBuZXdfcHJveHlfaWQgPyBuZXdfcHJveHlfaWQgOiBcIjEuMi41XCI7XHJcbiAgICAgICAgbmV3X29wdGlvbnMubnVtX3dpdG5lc3MgPSB0aGlzLnN0YXRlLndpdG5lc3Nlcy5zaXplO1xyXG4gICAgICAgIG5ld19vcHRpb25zLm51bV9jb21taXR0ZWUgPSB0aGlzLnN0YXRlLmNvbW1pdHRlZS5zaXplO1xyXG5cclxuICAgICAgICB1cGRhdGVPYmplY3QubmV3X29wdGlvbnMgPSBuZXdfb3B0aW9ucztcclxuICAgICAgICAvLyBTZXQgZmVlIGFzc2V0XHJcbiAgICAgICAgdXBkYXRlT2JqZWN0LmZlZSA9IHtcclxuICAgICAgICAgICAgYW1vdW50OiAwLFxyXG4gICAgICAgICAgICBhc3NldF9pZDogYWNjb3VudFV0aWxzLmdldEZpbmFsRmVlQXNzZXQoXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2FjY291bnQuaWQsXHJcbiAgICAgICAgICAgICAgICBcImFjY291bnRfdXBkYXRlXCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSB2b3RlcyBmb3IgZXhwaXJlZCB3b3JrZXJzXHJcbiAgICAgICAgbGV0IHt2b3RlX2lkc30gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGxldCB3b3JrZXJzID0gdGhpcy5fZ2V0V29ya2VyQXJyYXkoKTtcclxuICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlVm90ZShsaXN0LCB2b3RlKSB7XHJcbiAgICAgICAgICAgIGlmIChsaXN0LmluY2x1ZGVzKHZvdGUpKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0ID0gbGlzdC5kZWxldGUodm90ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3b3JrZXJzLmZvckVhY2god29ya2VyID0+IHtcclxuICAgICAgICAgICAgaWYgKHdvcmtlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ldyBEYXRlKHdvcmtlci5nZXQoXCJ3b3JrX2VuZF9kYXRlXCIpKSA8PSBub3cpIHtcclxuICAgICAgICAgICAgICAgICAgICB2b3RlX2lkcyA9IHJlbW92ZVZvdGUodm90ZV9pZHMsIHdvcmtlci5nZXQoXCJ2b3RlX2ZvclwiKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVEVNUCBSZW1vdmUgdm90ZV9hZ2FpbnN0IHNpbmNlIHRoZXkncmUgbm8gbG9uZ2VyIHVzZWRcclxuICAgICAgICAgICAgICAgIHZvdGVfaWRzID0gcmVtb3ZlVm90ZSh2b3RlX2lkcywgd29ya2VyLmdldChcInZvdGVfYWdhaW5zdFwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gU3VibWl0IHZvdGVzXHJcbiAgICAgICAgRmV0Y2hDaGFpbk9iamVjdHMoXHJcbiAgICAgICAgICAgIENoYWluU3RvcmUuZ2V0V2l0bmVzc0J5SWQsXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUud2l0bmVzc2VzLnRvQXJyYXkoKSxcclxuICAgICAgICAgICAgNDAwMFxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB3aXRuZXNzZXNfdm90ZV9pZHMgPSByZXMubWFwKG8gPT4gby5nZXQoXCJ2b3RlX2lkXCIpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHdpdG5lc3Nlc192b3RlX2lkcyksXHJcbiAgICAgICAgICAgICAgICAgICAgRmV0Y2hDaGFpbk9iamVjdHMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENoYWluU3RvcmUuZ2V0Q29tbWl0dGVlTWVtYmVyQnlJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5jb21taXR0ZWUudG9BcnJheSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA0MDAwXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVPYmplY3QubmV3X29wdGlvbnMudm90ZXMgPSByZXNbMF1cclxuICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHJlc1sxXS5tYXAobyA9PiBvLmdldChcInZvdGVfaWRcIikpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jb25jYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVfaWRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGlkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWQuc3BsaXQoXCI6XCIpWzBdID09PSBcIjJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9BcnJheSgpXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhX3NwbGl0ID0gYS5zcGxpdChcIjpcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiX3NwbGl0ID0gYi5zcGxpdChcIjpcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoYV9zcGxpdFsxXSwgMTApIC0gcGFyc2VJbnQoYl9zcGxpdFsxXSwgMTApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbkFwaS51cGRhdGVBY2NvdW50KHVwZGF0ZU9iamVjdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVzZXQoKSB7XHJcbiAgICAgICAgbGV0IHMgPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5yZWZzLnZvdGluZ19wcm94eSAmJlxyXG4gICAgICAgICAgICB0aGlzLnJlZnMudm90aW5nX3Byb3h5LnJlZnMuYm91bmRfY29tcG9uZW50XHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICB0aGlzLnJlZnMudm90aW5nX3Byb3h5LnJlZnMuYm91bmRfY29tcG9uZW50Lm9uUmVzZXRQcm94eSgpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWQ6IHMucHJldl9wcm94eV9hY2NvdW50X2lkLFxyXG4gICAgICAgICAgICAgICAgY3VycmVudF9wcm94eV9pbnB1dDogcy5wcmV2X3Byb3h5X2lucHV0LFxyXG4gICAgICAgICAgICAgICAgd2l0bmVzc2VzOiBzLnByZXZfd2l0bmVzc2VzLFxyXG4gICAgICAgICAgICAgICAgY29tbWl0dGVlOiBzLnByZXZfY29tbWl0dGVlLFxyXG4gICAgICAgICAgICAgICAgd29ya2Vyczogcy5wcmV2X3dvcmtlcnMsXHJcbiAgICAgICAgICAgICAgICB2b3RlX2lkczogcy5wcmV2X3ZvdGVfaWRzXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQWNjb3VudERhdGEodGhpcy5wcm9wcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQWRkSXRlbShjb2xsZWN0aW9uLCBpdGVtX2lkKSB7XHJcbiAgICAgICAgbGV0IHN0YXRlID0ge307XHJcbiAgICAgICAgc3RhdGVbY29sbGVjdGlvbl0gPSB0aGlzLnN0YXRlW2NvbGxlY3Rpb25dLnB1c2goaXRlbV9pZCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZW1vdmVJdGVtKGNvbGxlY3Rpb24sIGl0ZW1faWQpIHtcclxuICAgICAgICBsZXQgc3RhdGUgPSB7fTtcclxuICAgICAgICBzdGF0ZVtjb2xsZWN0aW9uXSA9IHRoaXMuc3RhdGVbY29sbGVjdGlvbl0uZmlsdGVyKGkgPT4gaSAhPT0gaXRlbV9pZCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2VWb3RlcyhhZGRWb3RlcywgcmVtb3ZlVm90ZXMpIHtcclxuICAgICAgICBsZXQgc3RhdGUgPSB7fTtcclxuICAgICAgICBzdGF0ZS52b3RlX2lkcyA9IHRoaXMuc3RhdGUudm90ZV9pZHM7XHJcbiAgICAgICAgaWYgKGFkZFZvdGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBhZGRWb3Rlcy5mb3JFYWNoKHZvdGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgc3RhdGUudm90ZV9pZHMgPSBzdGF0ZS52b3RlX2lkcy5hZGQodm90ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVtb3ZlVm90ZXMpIHtcclxuICAgICAgICAgICAgcmVtb3ZlVm90ZXMuZm9yRWFjaCh2b3RlID0+IHtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnZvdGVfaWRzID0gc3RhdGUudm90ZV9pZHMuZGVsZXRlKHZvdGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbGlkYXRlQWNjb3VudChjb2xsZWN0aW9uLCBhY2NvdW50KSB7XHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4gbnVsbDtcclxuICAgICAgICBpZiAoY29sbGVjdGlvbiA9PT0gXCJ3aXRuZXNzZXNcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gRmV0Y2hDaGFpbk9iamVjdHMoXHJcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldFdpdG5lc3NCeUlkLFxyXG4gICAgICAgICAgICAgICAgW2FjY291bnQuZ2V0KFwiaWRcIildLFxyXG4gICAgICAgICAgICAgICAgMzAwMFxyXG4gICAgICAgICAgICApLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNbMF0gPyBudWxsIDogXCJOb3QgYSB3aXRuZXNzXCI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29sbGVjdGlvbiA9PT0gXCJjb21taXR0ZWVcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gRmV0Y2hDaGFpbk9iamVjdHMoXHJcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldENvbW1pdHRlZU1lbWJlckJ5SWQsXHJcbiAgICAgICAgICAgICAgICBbYWNjb3VudC5nZXQoXCJpZFwiKV0sXHJcbiAgICAgICAgICAgICAgICAzMDAwXHJcbiAgICAgICAgICAgICkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc1swXSA/IG51bGwgOiBcIk5vdCBhIGNvbW1pdHRlZSBtZW1iZXJcIjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUHJveHlDaGFuZ2UoY3VycmVudF9wcm94eV9pbnB1dCkge1xyXG4gICAgICAgIGxldCBwcm94eUFjY291bnQgPSBDaGFpblN0b3JlLmdldEFjY291bnQoY3VycmVudF9wcm94eV9pbnB1dCk7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhcHJveHlBY2NvdW50IHx8XHJcbiAgICAgICAgICAgIChwcm94eUFjY291bnQgJiZcclxuICAgICAgICAgICAgICAgIHByb3h5QWNjb3VudC5nZXQoXCJpZFwiKSAhPT0gdGhpcy5zdGF0ZS5wcm94eV9hY2NvdW50X2lkKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBwcm94eV93aXRuZXNzZXM6IEltbXV0YWJsZS5TZXQoKSxcclxuICAgICAgICAgICAgICAgIHByb3h5X2NvbW1pdHRlZTogSW1tdXRhYmxlLlNldCgpLFxyXG4gICAgICAgICAgICAgICAgcHJveHlfd29ya2VyczogSW1tdXRhYmxlLlNldCgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50X3Byb3h5X2lucHV0fSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Qcm94eUFjY291bnRGb3VuZChwcm94eV9hY2NvdW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJveHlfYWNjb3VudF9pZCA9IHByb3h5X2FjY291bnQgPyBwcm94eV9hY2NvdW50LmdldChcImlkXCIpIDogXCJcIjtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5wcm94eV9hY2NvdW50X2lkICE9PSBwcm94eV9hY2NvdW50X2lkKVxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBY2NvdW50RGF0YSh0aGlzLnByb3BzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsZWFyUHJveHkoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWQ6IFwiXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0VG90YWxWb3Rlcyh3b3JrZXIpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBwYXJzZUludCh3b3JrZXIuZ2V0KFwidG90YWxfdm90ZXNfZm9yXCIpLCAxMCkgLVxyXG4gICAgICAgICAgICBwYXJzZUludCh3b3JrZXIuZ2V0KFwidG90YWxfdm90ZXNfYWdhaW5zdFwiKSwgMTApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRCdWRnZXRPYmplY3QoKSB7XHJcbiAgICAgICAgbGV0IHtsYXN0QnVkZ2V0T2JqZWN0fSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IGJ1ZGdldE9iamVjdDtcclxuICAgICAgICBidWRnZXRPYmplY3QgPSBDaGFpblN0b3JlLmdldE9iamVjdChsYXN0QnVkZ2V0T2JqZWN0KTtcclxuICAgICAgICBsZXQgaWRJbmRleCA9IHBhcnNlSW50KGxhc3RCdWRnZXRPYmplY3Quc3BsaXQoXCIuXCIpWzJdLCAxMCk7XHJcbiAgICAgICAgaWYgKGJ1ZGdldE9iamVjdCkge1xyXG4gICAgICAgICAgICBsZXQgdGltZXN0YW1wID0gYnVkZ2V0T2JqZWN0LmdldChcInRpbWVcIik7XHJcbiAgICAgICAgICAgIGlmICghL1okLy50ZXN0KHRpbWVzdGFtcCkpIHtcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcCArPSBcIlpcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIC8qIFVzZSB0aGUgbGFzdCB2YWxpZCBidWRnZXQgb2JqZWN0IHRvIGVzdGltYXRlIHRoZSBjdXJyZW50IGJ1ZGdldCBvYmplY3QgaWQuXHJcbiAgICAgICAgICAgICoqIEJ1ZGdldCBvYmplY3RzIGFyZSBjcmVhdGVkIG9uY2UgcGVyIGhvdXJcclxuICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRJRCA9XHJcbiAgICAgICAgICAgICAgICBpZEluZGV4ICtcclxuICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgKG5vdyAtIG5ldyBEYXRlKHRpbWVzdGFtcCkuZ2V0VGltZSgpKSAvIDEwMDAgLyA2MCAvIDYwXHJcbiAgICAgICAgICAgICAgICApIC1cclxuICAgICAgICAgICAgICAgIDE7XHJcbiAgICAgICAgICAgIGlmIChpZEluZGV4ID49IGN1cnJlbnRJRCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBsZXQgbmV3SUQgPSBcIjIuMTMuXCIgKyBNYXRoLm1heChpZEluZGV4LCBjdXJyZW50SUQpO1xyXG4gICAgICAgICAgICBsZXQgbmV3SURJbnQgPSBwYXJzZUludChuZXdJRC5zcGxpdChcIi5cIilbMl0sIDEwKTtcclxuICAgICAgICAgICAgRmV0Y2hDaGFpbk9iamVjdHMoXHJcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldE9iamVjdCxcclxuICAgICAgICAgICAgICAgIFtuZXdJRF0sXHJcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICB7fVxyXG4gICAgICAgICAgICApLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBbbGJvXSA9IHJlcztcclxuICAgICAgICAgICAgICAgIGlmIChsYm8gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgb2JqZWN0IGRvZXMgbm90IGV4aXN0LCB0aGUgaWQgd2FzIHRvbyBoaWdoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAge2xhc3RCdWRnZXRPYmplY3Q6IGAyLjEzLiR7bmV3SURJbnQgLSAxfWB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEJ1ZGdldE9iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIFNldHRpbmdzU3RvcmUuc2V0TGFzdEJ1ZGdldE9iamVjdChuZXdJRCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2xhc3RCdWRnZXRPYmplY3Q6IG5ld0lEfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBvYmplY3QgZG9lcyBub3QgZXhpc3QsIGRlY3JlbWVudCB0aGUgSURcclxuICAgICAgICAgICAgbGV0IG5ld0lEID0gYDIuMTMuJHtpZEluZGV4IC0gMX1gO1xyXG4gICAgICAgICAgICBGZXRjaENoYWluT2JqZWN0cyhcclxuICAgICAgICAgICAgICAgIENoYWluU3RvcmUuZ2V0T2JqZWN0LFxyXG4gICAgICAgICAgICAgICAgW25ld0lEXSxcclxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIHt9XHJcbiAgICAgICAgICAgICkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IFtsYm9dID0gcmVzO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxibyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBvYmplY3QgZG9lcyBub3QgZXhpc3QsIHRoZSBpZCB3YXMgdG9vIGhpZ2hcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7bGFzdEJ1ZGdldE9iamVjdDogYDIuMTMuJHtpZEluZGV4IC0gMn1gfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRCdWRnZXRPYmplY3RcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc1N0b3JlLnNldExhc3RCdWRnZXRPYmplY3QobmV3SUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2xhc3RCdWRnZXRPYmplY3Q6IG5ld0lEfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfZ2V0V29ya2VyQXJyYXkoKSB7XHJcbiAgICAgICAgbGV0IHdvcmtlckFycmF5ID0gW107XHJcblxyXG4gICAgICAgIENoYWluU3RvcmUud29ya2Vycy5mb3JFYWNoKHdvcmtlcklkID0+IHtcclxuICAgICAgICAgICAgbGV0IHdvcmtlciA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KHdvcmtlcklkLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICBpZiAod29ya2VyKSB3b3JrZXJBcnJheS5wdXNoKHdvcmtlcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB3b3JrZXJBcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0V29ya2VyVGFibGVJbmRleChpbmRleCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICB3b3JrZXJUYWJsZUluZGV4OiBpbmRleFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge3dvcmtlclRhYmxlSW5kZXgsIHByZXZfcHJveHlfYWNjb3VudF9pZH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGNvbnN0IGFjY291bnRIYXNQcm94eSA9ICEhcHJldl9wcm94eV9hY2NvdW50X2lkO1xyXG4gICAgICAgIGxldCBwcmVmZXJyZWRVbml0ID0gdGhpcy5wcm9wcy5zZXR0aW5ncy5nZXQoXCJ1bml0XCIpIHx8IFwiMS4zLjBcIjtcclxuICAgICAgICBsZXQgaGFzUHJveHkgPSAhIXRoaXMuc3RhdGUucHJveHlfYWNjb3VudF9pZDsgLy8gdGhpcy5wcm9wcy5hY2NvdW50LmdldEluKFtcIm9wdGlvbnNcIiwgXCJ2b3RpbmdfYWNjb3VudFwiXSkgIT09IFwiMS4yLjVcIjtcclxuICAgICAgICBsZXQgcHVibGlzaF9idXR0b25zX2NsYXNzID0gY25hbWVzKFwiYnV0dG9uXCIsIHtcclxuICAgICAgICAgICAgZGlzYWJsZWQ6ICF0aGlzLmlzQ2hhbmdlZCgpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IHtnbG9iYWxPYmplY3R9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQgYnVkZ2V0T2JqZWN0O1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmxhc3RCdWRnZXRPYmplY3QpIHtcclxuICAgICAgICAgICAgYnVkZ2V0T2JqZWN0ID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QodGhpcy5zdGF0ZS5sYXN0QnVkZ2V0T2JqZWN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0b3RhbEJ1ZGdldCA9IDA7XHJcbiAgICAgICAgLy8gbGV0IHVudXNlZEJ1ZGdldCA9IDA7XHJcbiAgICAgICAgbGV0IHdvcmtlckJ1ZGdldCA9IGdsb2JhbE9iamVjdFxyXG4gICAgICAgICAgICA/IHBhcnNlSW50KFxyXG4gICAgICAgICAgICAgICAgICBnbG9iYWxPYmplY3QuZ2V0SW4oW1wicGFyYW1ldGVyc1wiLCBcIndvcmtlcl9idWRnZXRfcGVyX2RheVwiXSksXHJcbiAgICAgICAgICAgICAgICAgIDEwXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICA6IDA7XHJcblxyXG4gICAgICAgIGlmIChidWRnZXRPYmplY3QpIHtcclxuICAgICAgICAgICAgd29ya2VyQnVkZ2V0ID0gTWF0aC5taW4oXHJcbiAgICAgICAgICAgICAgICAyNCAqIGJ1ZGdldE9iamVjdC5nZXRJbihbXCJyZWNvcmRcIiwgXCJ3b3JrZXJfYnVkZ2V0XCJdKSxcclxuICAgICAgICAgICAgICAgIHdvcmtlckJ1ZGdldFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0b3RhbEJ1ZGdldCA9IE1hdGgubWluKFxyXG4gICAgICAgICAgICAgICAgMjQgKiBidWRnZXRPYmplY3QuZ2V0SW4oW1wicmVjb3JkXCIsIFwid29ya2VyX2J1ZGdldFwiXSksXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJCdWRnZXRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGxldCB3b3JrZXJBcnJheSA9IHRoaXMuX2dldFdvcmtlckFycmF5KCk7XHJcblxyXG4gICAgICAgIGxldCB2b3RlVGhyZXNob2xkID0gMDtcclxuICAgICAgICBsZXQgd29ya2VycyA9IHdvcmtlckFycmF5XHJcbiAgICAgICAgICAgIC5maWx0ZXIoYSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShhLmdldChcIndvcmtfZW5kX2RhdGVcIikgKyBcIlpcIikgPiBub3cgJiZcclxuICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShhLmdldChcIndvcmtfYmVnaW5fZGF0ZVwiKSArIFwiWlwiKSA8PSBub3dcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VG90YWxWb3RlcyhiKSAtIHRoaXMuX2dldFRvdGFsVm90ZXMoYSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5tYXAoKHdvcmtlciwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBkYWlseVBheSA9IHBhcnNlSW50KHdvcmtlci5nZXQoXCJkYWlseV9wYXlcIiksIDEwKTtcclxuICAgICAgICAgICAgICAgIHdvcmtlckJ1ZGdldCA9IHdvcmtlckJ1ZGdldCAtIGRhaWx5UGF5O1xyXG4gICAgICAgICAgICAgICAgbGV0IHZvdGVzID1cclxuICAgICAgICAgICAgICAgICAgICB3b3JrZXIuZ2V0KFwidG90YWxfdm90ZXNfZm9yXCIpIC1cclxuICAgICAgICAgICAgICAgICAgICB3b3JrZXIuZ2V0KFwidG90YWxfdm90ZXNfYWdhaW5zdFwiKTtcclxuICAgICAgICAgICAgICAgIGlmICh3b3JrZXJCdWRnZXQgPD0gMCAmJiAhdm90ZVRocmVzaG9sZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZvdGVUaHJlc2hvbGQgPSB2b3RlcztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodm90ZVRocmVzaG9sZCAmJiB2b3RlcyA8IHZvdGVUaHJlc2hvbGQpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPFdvcmtlckFwcHJvdmFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZlcnJlZFVuaXQ9e3ByZWZlcnJlZFVuaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3Q9e3dvcmtlckJ1ZGdldCArIGRhaWx5UGF5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5rPXtpbmRleCArIDF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17d29ya2VyLmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXI9e3dvcmtlci5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdm90ZV9pZHM9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVtoYXNQcm94eSA/IFwicHJveHlfdm90ZV9pZHNcIiA6IFwidm90ZV9pZHNcIl1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZVZvdGVzPXt0aGlzLm9uQ2hhbmdlVm90ZXMuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJveHk9e2hhc1Byb3h5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b3RlVGhyZXNob2xkPXt2b3RlVGhyZXNob2xkfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGEgPT4gISFhKTtcclxuXHJcbiAgICAgICAgLy8gdW51c2VkQnVkZ2V0ID0gTWF0aC5tYXgoMCwgd29ya2VyQnVkZ2V0KTtcclxuXHJcbiAgICAgICAgbGV0IG5ld1dvcmtlcnMgPSB3b3JrZXJBcnJheVxyXG4gICAgICAgICAgICAuZmlsdGVyKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCB2b3RlcyA9XHJcbiAgICAgICAgICAgICAgICAgICAgYS5nZXQoXCJ0b3RhbF92b3Rlc19mb3JcIikgLSBhLmdldChcInRvdGFsX3ZvdGVzX2FnYWluc3RcIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIChuZXcgRGF0ZShhLmdldChcIndvcmtfZW5kX2RhdGVcIikgKyBcIlpcIikgPiBub3cgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm90ZXMgPCB2b3RlVGhyZXNob2xkKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKGEuZ2V0KFwid29ya19iZWdpbl9kYXRlXCIpICsgXCJaXCIpID4gbm93XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFRvdGFsVm90ZXMoYikgLSB0aGlzLl9nZXRUb3RhbFZvdGVzKGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAubWFwKCh3b3JrZXIsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgZGFpbHlQYXkgPSBwYXJzZUludCh3b3JrZXIuZ2V0KFwiZGFpbHlfcGF5XCIpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAvLyB3b3JrZXJCdWRnZXQgPSB3b3JrZXJCdWRnZXQgLSBkYWlseVBheTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxXb3JrZXJBcHByb3ZhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRVbml0PXtwcmVmZXJyZWRVbml0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN0PXswfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5rPXtpbmRleCArIDF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17d29ya2VyLmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXI9e3dvcmtlci5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdm90ZV9pZHM9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVtoYXNQcm94eSA/IFwicHJveHlfdm90ZV9pZHNcIiA6IFwidm90ZV9pZHNcIl1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZVZvdGVzPXt0aGlzLm9uQ2hhbmdlVm90ZXMuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJveHk9e2hhc1Byb3h5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b3RlVGhyZXNob2xkPXt2b3RlVGhyZXNob2xkfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGV4cGlyZWRXb3JrZXJzID0gd29ya2VyQXJyYXlcclxuICAgICAgICAgICAgLmZpbHRlcihhID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoYS5nZXQoXCJ3b3JrX2VuZF9kYXRlXCIpKSA8PSBub3c7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VG90YWxWb3RlcyhiKSAtIHRoaXMuX2dldFRvdGFsVm90ZXMoYSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5tYXAoKHdvcmtlciwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIGxldCBkYWlseVBheSA9IHBhcnNlSW50KHdvcmtlci5nZXQoXCJkYWlseV9wYXlcIiksIDEwKTtcclxuICAgICAgICAgICAgICAgIC8vIHdvcmtlckJ1ZGdldCA9IHdvcmtlckJ1ZGdldCAtIGRhaWx5UGF5O1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPFdvcmtlckFwcHJvdmFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZlcnJlZFVuaXQ9e3ByZWZlcnJlZFVuaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3Q9ezB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbms9e2luZGV4ICsgMX1cclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXt3b3JrZXIuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlcj17d29ya2VyLmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b3RlX2lkcz17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlW2hhc1Byb3h5ID8gXCJwcm94eV92b3RlX2lkc1wiIDogXCJ2b3RlX2lkc1wiXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlVm90ZXM9e3RoaXMub25DaGFuZ2VWb3Rlcy5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm94eT17aGFzUHJveHl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVUaHJlc2hvbGQ9e3ZvdGVUaHJlc2hvbGR9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgYWN0aW9uQnV0dG9ucyA9IChcclxuICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMocHVibGlzaF9idXR0b25zX2NsYXNzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRoaXMuaXNDaGFuZ2VkKClcclxuICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uUHVibGlzaH1cclxuICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17NH1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLnB1Ymxpc2hcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcImJ1dHRvbiBcIiArIHB1Ymxpc2hfYnV0dG9uc19jbGFzc31cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uUmVzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezh9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnJlc2V0XCIgLz5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAge2FjY291bnRIYXNQcm94eSAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1wiYnV0dG9uXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25SZW1vdmVQcm94eX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezl9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucmVtb3ZlX3Byb3h5XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBsZXQgcHJveHlJbnB1dCA9IChcclxuICAgICAgICAgICAgPEFjY291bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCI1MCVcIiwgbWF4V2lkdGg6IDI1MCwgbWFyZ2luQm90dG9tOiAxMH19XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnN0YXRlLmN1cnJlbnRfcHJveHlfaW5wdXR9XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50TmFtZT17dGhpcy5zdGF0ZS5jdXJyZW50X3Byb3h5X2lucHV0fVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25Qcm94eUNoYW5nZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5vblByb3h5QWNjb3VudEZvdW5kfVxyXG4gICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC52b3Rlcy5zZXRfcHJveHlcIil9XHJcbiAgICAgICAgICAgICAgICB0b29sdGlwPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgIXRoaXMuc3RhdGUucHJveHlfYWNjb3VudF9pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwidG9vbHRpcC5wcm94eV9zZWFyY2hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwidG9vbHRpcC5wcm94eV9yZW1vdmVcIlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIGhpZGVJbWFnZVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiA1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGhhc1Byb3h5ID8gXCJcIiA6IFwibm9uZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8SWNvbiBuYW1lPVwibG9ja2VkXCIgc2l6ZT1cIjF4XCIgLz5cclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6IDUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogOSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogIWhhc1Byb3h5ID8gXCJcIiA6IFwibm9uZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8TGluayB0bz1cIi9oZWxwL3ZvdGluZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInF1ZXN0aW9uLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLnF1ZXN0aW9uX2NpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwiMXhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgPC9BY2NvdW50U2VsZWN0b3I+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2hvd0V4cGlyZWQgPSB3b3JrZXJUYWJsZUluZGV4ID09PSAyO1xyXG5cclxuICAgICAgICBjb25zdCBzYXZlVGV4dCA9IChcclxuICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5saW5lLWJsb2NrXCJcclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IFwicmlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiB0aGlzLmlzQ2hhbmdlZCgpID8gXCJ2aXNpYmxlXCIgOiBcImhpZGRlblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcInJlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IFwiMC44NXJlbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjAuOXJlbVwiXHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLnNhdmVfZmluaXNoXCIgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgYXBwLXRhYmxlcyBuby1wYWRkaW5nXCIgcmVmPVwiYXBwVGFibGVzXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgc21hbGwtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtY29udGFpbmVyIGdlbmVyaWMtYm9yZGVyZWQtYm94XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwidm90aW5nVGFiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFjY291bnQtdGFic1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0QWN0aXZlVGFiPXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkJ1dHRvbnM9e3NhdmVUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic0NsYXNzPVwiYWNjb3VudC1vdmVydmlldyBuby1wYWRkaW5nIGJvcmRlcmVkLWhlYWRlciBjb250ZW50LWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImV4cGxvcmVyLndpdG5lc3Nlcy50aXRsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbmFtZXMoXCJjb250ZW50LWJsb2NrXCIpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXItc2VsZWN0b3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiA8TGluayB0bz1cIi9oZWxwL3ZvdGluZy93aXRuZXNzXCI+PEljb24gbmFtZT1cInF1ZXN0aW9uLWNpcmNsZVwiIHRpdGxlPVwiaWNvbnMucXVlc3Rpb25fY2lybGNlXCIgLz48L0xpbms+ICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Byb3h5SW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IFwicmlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luVG9wOiBcIi0yLjVyZW1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2FjdGlvbkJ1dHRvbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Vm90aW5nQWNjb3VudHNMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwid2l0bmVzc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQudm90ZXMuYWRkX3dpdG5lc3NfbGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM9e3RoaXMuc3RhdGUuYWxsX3dpdG5lc3Nlc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQWNjb3VudD17dGhpcy52YWxpZGF0ZUFjY291bnQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2l0bmVzc2VzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFkZEl0ZW09e3RoaXMub25BZGRJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndpdG5lc3Nlc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZW1vdmVJdGVtPXt0aGlzLm9uUmVtb3ZlSXRlbS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aXRuZXNzZXNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXtoYXNQcm94eSA/IC0xIDogMn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzUHJveHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJwcm94eV93aXRuZXNzZXNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIndpdG5lc3Nlc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aFNlbGVjdG9yPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZT17Z2xvYmFsT2JqZWN0LmdldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZV93aXRuZXNzZXNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5PXt0aGlzLnN0YXRlLnByb3h5X2FjY291bnRfaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiZXhwbG9yZXIuY29tbWl0dGVlX21lbWJlcnMudGl0bGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y25hbWVzKFwiY29udGVudC1ibG9ja1wiKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLXNlbGVjdG9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogPExpbmsgdG89XCIvaGVscC92b3RpbmcvY29tbWl0dGVlXCI+PEljb24gbmFtZT1cInF1ZXN0aW9uLWNpcmNsZVwiIHRpdGxlPVwiaWNvbnMucXVlc3Rpb25fY2lybGNlXCIgLz48L0xpbms+ICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Byb3h5SW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IFwicmlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luVG9wOiBcIi0yLjVyZW1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2FjdGlvbkJ1dHRvbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxWb3RpbmdBY2NvdW50c0xpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjb21taXR0ZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnZvdGVzLmFkZF9jb21taXR0ZWVfbGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM9e3RoaXMuc3RhdGUuYWxsX2NvbW1pdHRlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQWNjb3VudD17dGhpcy52YWxpZGF0ZUFjY291bnQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29tbWl0dGVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFkZEl0ZW09e3RoaXMub25BZGRJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbW1pdHRlZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZW1vdmVJdGVtPXt0aGlzLm9uUmVtb3ZlSXRlbS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb21taXR0ZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXtoYXNQcm94eSA/IC0xIDogM31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzUHJveHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJwcm94eV9jb21taXR0ZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImNvbW1pdHRlZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aFNlbGVjdG9yPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZT17Z2xvYmFsT2JqZWN0LmdldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZV9jb21taXR0ZWVfbWVtYmVyc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHk9e3RoaXMuc3RhdGUucHJveHlfYWNjb3VudF9pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnZvdGVzLndvcmtlcnNfc2hvcnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1zZWxlY3RvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZmxvYXQ6IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89XCIvY3JlYXRlLXdvcmtlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuY3JlYXRlX3dvcmtlclwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlbGVjdG9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogPExpbmsgdG89XCIvaGVscC92b3Rpbmcvd29ya2VyXCI+PEljb24gbmFtZT1cInF1ZXN0aW9uLWNpcmNsZVwiIHRpdGxlPVwiaWNvbnMucXVlc3Rpb25fY2lybGNlXCIgLz48L0xpbms+ICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0xlZnQ6IDEwfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcImlubGluZS1ibG9ja1wiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlOiB3b3JrZXJUYWJsZUluZGV4ICE9PSAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fc2V0V29ya2VyVGFibGVJbmRleC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudm90ZXMubmV3XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudDogbmV3V29ya2Vycy5sZW5ndGh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFwiaW5saW5lLWJsb2NrXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5hY3RpdmU6IHdvcmtlclRhYmxlSW5kZXggIT09IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9zZXRXb3JrZXJUYWJsZUluZGV4LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC52b3Rlcy5hY3RpdmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50OiB3b3JrZXJzLmxlbmd0aH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2V4cGlyZWRXb3JrZXJzLmxlbmd0aCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbmxpbmUtYmxvY2tcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpbmFjdGl2ZTogIXNob3dFeHBpcmVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFzaG93RXhwaXJlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5fc2V0V29ya2VyVGFibGVJbmRleC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCkgPT4ge31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5leHBpcmVkXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e21hcmdpblRvcDogXCIycmVtXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwcm94eUlucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0OiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogXCItMi41cmVtXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3Rpb25CdXR0b25zfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Lyoge3Nob3dFeHBpcmVkID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZ1RvcDogMTAsIHBhZGRpbmdCb3R0b206IDIwfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMudG90YWxfYnVkZ2V0XCIgLz46PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7cGFkZGluZ0xlZnQ6IDIwLCB0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7e2dsb2JhbE9iamVjdCA/IDxGb3JtYXR0ZWRBc3NldCBhbW91bnQ9e3RvdGFsQnVkZ2V0fSBhc3NldD1cIjEuMy4wXCIgZGVjaW1hbE9mZnNldD17NX0vPiA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4mbmJzcDsoe2dsb2JhbE9iamVjdCA/IDxFcXVpdmFsZW50VmFsdWVDb21wb25lbnQgZnJvbUFzc2V0PVwiMS4zLjBcIiB0b0Fzc2V0PXtwcmVmZXJyZWRVbml0fSBhbW91bnQ9e3RvdGFsQnVkZ2V0fS8+IDogbnVsbH0pPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPjwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy51bnVzZWRfYnVkZ2V0XCIgLz46PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7cGFkZGluZ0xlZnQ6IDIwLCB0ZXh0QWxpZ246IFwicmlnaHRcIn19PiB7Z2xvYmFsT2JqZWN0ID8gPEZvcm1hdHRlZEFzc2V0IGFtb3VudD17dW51c2VkQnVkZ2V0fSBhc3NldD1cIjEuMy4wXCIgZGVjaW1hbE9mZnNldD17NX0vPiA6IG51bGx9PC90ZD48L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4pfSAqL31cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGRhc2hib2FyZC10YWJsZSB0YWJsZS1ob3ZlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7d29ya2VyVGFibGVJbmRleCA9PT1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMiA/IG51bGwgOiB3b3JrZXJUYWJsZUluZGV4ID09PSAwID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sU3Bhbj1cIjNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy50aHJlc2hvbGRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsT2Zmc2V0PXs1fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3ZvdGVUaHJlc2hvbGR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9XCIxLjMuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY29sU3Bhbj1cIjNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHJhbnNwYXJlbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbFNwYW49XCI0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMudG90YWxfYnVkZ2V0XCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17cHJlZmVycmVkVW5pdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sU3Bhbj1cIjJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZS1jb2x1bW4tc21hbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Z2xvYmFsT2JqZWN0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFcXVpdmFsZW50VmFsdWVDb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tQXNzZXQ9XCIxLjMuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvQXNzZXQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkVW5pdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dG90YWxCdWRnZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwiaGlkZS1jb2x1bW4tc21hbGxcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHJhbnNwYXJlbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt3b3JrZXJUYWJsZUluZGV4ID09PSAyID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5saW5lXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5pZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmRlc2NyaXB0aW9uXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZS1jb2x1bW4tc21hbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy50b3RhbF92b3Rlc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7d29ya2VyVGFibGVJbmRleCA9PT0gMCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5taXNzaW5nXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLndvcmtlcnMucGVyaW9kXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt3b3JrZXJUYWJsZUluZGV4ID09PSAyIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyVGFibGVJbmRleCA9PT0gMCA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRlLWNvbHVtbi1zbWFsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuZnVuZGluZ1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGUtY29sdW1uLXNtYWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuZGFpbHlfcGF5XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nVG9wOiA1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjAuOHJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17cHJlZmVycmVkVW5pdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3dvcmtlclRhYmxlSW5kZXggPT09IDIgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXJUYWJsZUluZGV4ID09PSAwID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIud2l0bmVzc2VzLmJ1ZGdldFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1RvcDogNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IFwiMC44cmVtXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3ByZWZlcnJlZFVuaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMudG9nZ2xlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt3b3JrZXJUYWJsZUluZGV4ID09PSAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXdXb3JrZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB3b3JrZXJUYWJsZUluZGV4ID09PSAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gd29ya2Vyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGV4cGlyZWRXb3JrZXJzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuQWNjb3VudFZvdGluZyA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudFZvdGluZyk7XHJcblxyXG5jb25zdCBCdWRnZXRPYmplY3RXcmFwcGVyID0gcHJvcHMgPT4ge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8QWNjb3VudFZvdGluZ1xyXG4gICAgICAgICAgICB7Li4ucHJvcHN9XHJcbiAgICAgICAgICAgIGluaXRpYWxCdWRnZXQ9e1NldHRpbmdzU3RvcmUuZ2V0TGFzdEJ1ZGdldE9iamVjdCgpfVxyXG4gICAgICAgIC8+XHJcbiAgICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQnVkZ2V0T2JqZWN0V3JhcHBlcjtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEZvcm1hdHRlZEFzc2V0IGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZEFzc2V0XCI7XHJcbmltcG9ydCBMaW5rVG9BY2NvdW50QnlJZCBmcm9tIFwiLi4vVXRpbGl0eS9MaW5rVG9BY2NvdW50QnlJZFwiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCB7RXF1aXZhbGVudFZhbHVlQ29tcG9uZW50fSBmcm9tIFwiLi4vVXRpbGl0eS9FcXVpdmFsZW50VmFsdWVDb21wb25lbnRcIjtcclxuaW1wb3J0IEljb24gZnJvbSBcImNvbXBvbmVudHMvSWNvbi9JY29uXCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuXHJcbmNsYXNzIFdvcmtlckFwcHJvdmFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgd29ya2VyOiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgb25BZGRWb3RlOiBQcm9wVHlwZXMuZnVuYywgLy8vIGNhbGxlZCB3aXRoIHZvdGUgaWQgdG8gYWRkXHJcbiAgICAgICAgb25SZW1vdmVWb3RlOiBQcm9wVHlwZXMuZnVuYywgLy8vIGNhbGxlZCB3aXRoIHZvdGUgaWQgdG8gcmVtb3ZlXHJcbiAgICAgICAgdm90ZV9pZHM6IFByb3BUeXBlcy5vYmplY3QgLy8vIFNldCBvZiBpdGVtcyBjdXJyZW50bHkgYmVpbmcgdm90ZWQgZm9yXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgdGVtcENvbXBvbmVudDogXCJ0clwiXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQXBwcm92ZSgpIHtcclxuICAgICAgICBsZXQgYWRkVm90ZXMgPSBbXSxcclxuICAgICAgICAgICAgcmVtb3ZlVm90ZXMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMudm90ZV9pZHMuaGFzKHRoaXMucHJvcHMud29ya2VyLmdldChcInZvdGVfYWdhaW5zdFwiKSkpIHtcclxuICAgICAgICAgICAgcmVtb3ZlVm90ZXMucHVzaCh0aGlzLnByb3BzLndvcmtlci5nZXQoXCJ2b3RlX2FnYWluc3RcIikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLnZvdGVfaWRzLmhhcyh0aGlzLnByb3BzLndvcmtlci5nZXQoXCJ2b3RlX2ZvclwiKSkpIHtcclxuICAgICAgICAgICAgYWRkVm90ZXMucHVzaCh0aGlzLnByb3BzLndvcmtlci5nZXQoXCJ2b3RlX2ZvclwiKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlVm90ZXMoYWRkVm90ZXMsIHJlbW92ZVZvdGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlamVjdCgpIHtcclxuICAgICAgICBsZXQgYWRkVm90ZXMgPSBbXSxcclxuICAgICAgICAgICAgcmVtb3ZlVm90ZXMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMudm90ZV9pZHMuaGFzKHRoaXMucHJvcHMud29ya2VyLmdldChcInZvdGVfYWdhaW5zdFwiKSkpIHtcclxuICAgICAgICAgICAgcmVtb3ZlVm90ZXMucHVzaCh0aGlzLnByb3BzLndvcmtlci5nZXQoXCJ2b3RlX2FnYWluc3RcIikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMudm90ZV9pZHMuaGFzKHRoaXMucHJvcHMud29ya2VyLmdldChcInZvdGVfZm9yXCIpKSkge1xyXG4gICAgICAgICAgICByZW1vdmVWb3Rlcy5wdXNoKHRoaXMucHJvcHMud29ya2VyLmdldChcInZvdGVfZm9yXCIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2VWb3RlcyhhZGRWb3RlcywgcmVtb3ZlVm90ZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge3Jhbmt9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQgd29ya2VyID0gdGhpcy5wcm9wcy53b3JrZXIudG9KUygpO1xyXG4gICAgICAgIGxldCB0b3RhbF92b3RlcyA9IHdvcmtlci50b3RhbF92b3Rlc19mb3IgLSB3b3JrZXIudG90YWxfdm90ZXNfYWdhaW5zdDtcclxuICAgICAgICBsZXQgYXBwcm92YWxTdGF0ZSA9IHRoaXMucHJvcHMudm90ZV9pZHMuaGFzKHdvcmtlci52b3RlX2ZvcilcclxuICAgICAgICAgICAgPyB0cnVlXHJcbiAgICAgICAgICAgIDogdGhpcy5wcm9wcy52b3RlX2lkcy5oYXMod29ya2VyLnZvdGVfYWdhaW5zdClcclxuICAgICAgICAgICAgICAgID8gZmFsc2VcclxuICAgICAgICAgICAgICAgIDogbnVsbDtcclxuXHJcbiAgICAgICAgbGV0IGZ1bmRlZFBlcmNlbnQgPSAwO1xyXG5cclxuICAgICAgICBpZiAod29ya2VyLmRhaWx5X3BheSA8IHRoaXMucHJvcHMucmVzdCkge1xyXG4gICAgICAgICAgICBmdW5kZWRQZXJjZW50ID0gMTAwO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5yZXN0ID4gMCkge1xyXG4gICAgICAgICAgICBmdW5kZWRQZXJjZW50ID0gKHRoaXMucHJvcHMucmVzdCAvIHdvcmtlci5kYWlseV9wYXkpICogMTAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHN0YXJ0RGF0ZSA9IGNvdW50ZXJwYXJ0LmxvY2FsaXplKFxyXG4gICAgICAgICAgICBuZXcgRGF0ZSh3b3JrZXIud29ya19iZWdpbl9kYXRlICsgXCJaXCIpLFxyXG4gICAgICAgICAgICB7dHlwZTogXCJkYXRlXCIsIGZvcm1hdDogXCJzaG9ydF9jdXN0b21cIn1cclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBlbmREYXRlID0gY291bnRlcnBhcnQubG9jYWxpemUoXHJcbiAgICAgICAgICAgIG5ldyBEYXRlKHdvcmtlci53b3JrX2VuZF9kYXRlICsgXCJaXCIpLFxyXG4gICAgICAgICAgICB7dHlwZTogXCJkYXRlXCIsIGZvcm1hdDogXCJzaG9ydF9jdXN0b21cIn1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBsZXQgaXNFeHBpcmVkID0gbmV3IERhdGUod29ya2VyLndvcmtfZW5kX2RhdGUgKyBcIlpcIikgPD0gbm93O1xyXG4gICAgICAgIGxldCBoYXNTdGFydGVkID0gbmV3IERhdGUod29ya2VyLndvcmtfYmVnaW5fZGF0ZSArIFwiWlwiKSA8PSBub3c7XHJcbiAgICAgICAgbGV0IGlzUHJvcG9zZWQgPVxyXG4gICAgICAgICAgICAoIWlzRXhwaXJlZCAmJiB0b3RhbF92b3RlcyA8IHRoaXMucHJvcHMudm90ZVRocmVzaG9sZCkgfHxcclxuICAgICAgICAgICAgIWhhc1N0YXJ0ZWQ7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT17YXBwcm92YWxTdGF0ZSA/IFwiXCIgOiBcInVuc3VwcG9ydGVkXCJ9PlxyXG4gICAgICAgICAgICAgICAge2lzRXhwaXJlZCA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFwicmlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDogMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3Jhbmt9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cIndvcmtlci1pZFwiIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIHt3b3JrZXIuaWR9XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ3b3JrZXItbmFtZVwiIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5saW5lLWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nUmlnaHQ6IDUsIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsIHRvcDogLTF9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyLnVybCAmJiB3b3JrZXIudXJsLmluZGV4T2YoXCIuXCIpICE9PSAtMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcInZpc2libGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImhpZGRlblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj17d29ya2VyLnVybH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb24gbmFtZT1cInNoYXJlXCIgdGl0bGU9XCJpY29ucy5zaGFyZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlubGluZS1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7d29ya2VyLm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQWNjb3VudEJ5SWQgYWNjb3VudD17d29ya2VyLndvcmtlcl9hY2NvdW50fSAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19IGNsYXNzTmFtZT1cImhpZGUtY29sdW1uLXNtYWxsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dG90YWxfdm90ZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PVwiMS4zLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsT2Zmc2V0PXs1fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAgeyFpc1Byb3Bvc2VkID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17TWF0aC5tYXgoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnZvdGVUaHJlc2hvbGQgLSB0b3RhbF92b3Rlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PVwiMS4zLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjaW1hbE9mZnNldD17NX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAge3N0YXJ0RGF0ZX0gLSB7ZW5kRGF0ZX1cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAge2lzRXhwaXJlZCB8fCBpc1Byb3Bvc2VkID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGUtY29sdW1uLXNtYWxsXCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt1dGlscy5mb3JtYXRfbnVtYmVyKGZ1bmRlZFBlcmNlbnQsIDIpfSVcclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19IGNsYXNzTmFtZT1cImhpZGUtY29sdW1uLXNtYWxsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPEVxdWl2YWxlbnRWYWx1ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21Bc3NldD1cIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9Bc3NldD17dGhpcy5wcm9wcy5wcmVmZXJyZWRVbml0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3dvcmtlci5kYWlseV9wYXl9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAge2lzRXhwaXJlZCB8fCBpc1Byb3Bvc2VkID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5yZXN0IDw9IDAgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjAuMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEVxdWl2YWxlbnRWYWx1ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tQXNzZXQ9XCIxLjMuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9Bc3NldD17dGhpcy5wcm9wcy5wcmVmZXJyZWRVbml0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dGhpcy5wcm9wcy5yZXN0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjbGlja2FibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnByb3h5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgpID0+IHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXNbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbFN0YXRlID8gXCJvblJlamVjdFwiIDogXCJvbkFwcHJvdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLmJpbmQodGhpcylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgeyF0aGlzLnByb3BzLnByb3h5ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwcm92YWxTdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiY2hlY2ttYXJrLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJtaW51cy1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsU3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImljb25zLmNoZWNrbWFya19jaXJjbGUuYXBwcm92ZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiaWNvbnMubWludXNfY2lyY2xlLmRpc2FwcHJvdmVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8SWNvbiBuYW1lPVwibG9ja2VkXCIgdGl0bGU9XCJpY29ucy5sb2NrZWQuYWN0aW9uXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCaW5kVG9DaGFpblN0YXRlKFdvcmtlckFwcHJvdmFsKTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuL0FjY291bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBJY29uIGZyb20gXCIuLi9JY29uL0ljb25cIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgTGlua1RvQWNjb3VudEJ5SWQgZnJvbSBcIi4uL1V0aWxpdHkvTGlua1RvQWNjb3VudEJ5SWRcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcbmltcG9ydCBzYW5pdGl6ZSBmcm9tIFwic2FuaXRpemVcIjtcclxuXHJcbmZ1bmN0aW9uIGdldFdpdG5lc3NPckNvbW1pdHRlZSh0eXBlLCBhY2N0KSB7XHJcbiAgICBsZXQgdXJsID0gXCJcIixcclxuICAgICAgICB2b3RlcyA9IDAsXHJcbiAgICAgICAgYWNjb3VudDtcclxuICAgIGlmICh0eXBlID09PSBcIndpdG5lc3NcIikge1xyXG4gICAgICAgIGFjY291bnQgPSBDaGFpblN0b3JlLmdldFdpdG5lc3NCeUlkKGFjY3QuZ2V0KFwiaWRcIikpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcImNvbW1pdHRlZVwiKSB7XHJcbiAgICAgICAgYWNjb3VudCA9IENoYWluU3RvcmUuZ2V0Q29tbWl0dGVlTWVtYmVyQnlJZChhY2N0LmdldChcImlkXCIpKTtcclxuICAgIH1cclxuXHJcbiAgICB1cmwgPSBhY2NvdW50ID8gYWNjb3VudC5nZXQoXCJ1cmxcIikgOiB1cmw7XHJcbiAgICB1cmwgPSBzYW5pdGl6ZSh1cmwsIHtcclxuICAgICAgICB3aGl0ZUxpc3Q6IFtdLCAvLyBlbXB0eSwgbWVhbnMgZmlsdGVyIG91dCBhbGwgdGFnc1xyXG4gICAgICAgIHN0cmlwSWdub3JlVGFnOiB0cnVlIC8vIGZpbHRlciBvdXQgYWxsIEhUTUwgbm90IGluIHRoZSB3aGlsZWxpc3RcclxuICAgIH0pO1xyXG4gICAgdm90ZXMgPSBhY2NvdW50ID8gYWNjb3VudC5nZXQoXCJ0b3RhbF92b3Rlc1wiKSA6IHZvdGVzO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB1cmwsXHJcbiAgICAgICAgdm90ZXMsXHJcbiAgICAgICAgaWQ6IGFjY291bnQuZ2V0KFwiaWRcIilcclxuICAgIH07XHJcbn1cclxuXHJcbmNsYXNzIEFjY291bnRJdGVtUm93IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYWNjb3VudDogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIG9uQWN0aW9uOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuYWNjb3VudCAhPT0gdGhpcy5wcm9wcy5hY2NvdW50IHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5hY3Rpb24gIT09IHRoaXMucHJvcHMuYWN0aW9uIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5pc0FjdGl2ZSAhPT0gdGhpcy5wcm9wcy5pc0FjdGl2ZSB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuaWR4ICE9PSB0aGlzLnByb3BzLmlkeCB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMucHJveHkgIT09IHRoaXMucHJvcHMucHJveHlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQWN0aW9uKGl0ZW1faWQpIHtcclxuICAgICAgICB0aGlzLnByb3BzLm9uQWN0aW9uKGl0ZW1faWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2FjY291bnQsIHR5cGUsIGFjdGlvbiwgaXNBY3RpdmV9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQgaXRlbV9pZCA9IGFjY291bnQuZ2V0KFwiaWRcIik7XHJcblxyXG4gICAgICAgIGxldCB7dXJsLCB2b3Rlc30gPSBnZXRXaXRuZXNzT3JDb21taXR0ZWUodHlwZSwgYWNjb3VudCk7XHJcblxyXG4gICAgICAgIGxldCBsaW5rID1cclxuICAgICAgICAgICAgdXJsICYmIHVybC5sZW5ndGggPiAwICYmIHVybC5pbmRleE9mKFwiaHR0cFwiKSA9PT0gLTFcclxuICAgICAgICAgICAgICAgID8gXCJodHRwOi8vXCIgKyB1cmxcclxuICAgICAgICAgICAgICAgIDogdXJsO1xyXG4gICAgICAgIGNvbnN0IGlzU3VwcG9ydGVkID0gYWN0aW9uID09PSBcInJlbW92ZVwiO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8dHIgY2xhc3NOYW1lPXtpc1N1cHBvcnRlZCA/IFwiXCIgOiBcInVuc3VwcG9ydGVkXCJ9PlxyXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fT57dGhpcy5wcm9wcy5pZHggKyAxfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPExpbmtUb0FjY291bnRCeUlkIGFjY291bnQ9e2FjY291bnQuZ2V0KFwiaWRcIil9IC8+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgIHtsaW5rICYmIGxpbmsuaW5kZXhPZihcIi5cIikgIT09IC0xID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj17bGlua31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb24gbmFtZT1cInNoYXJlXCIgdGl0bGU9XCJpY29ucy5zaGFyZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dm90ZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PVwiMS4zLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsT2Zmc2V0PXs1fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtgYWNjb3VudC52b3Rlcy4ke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBY3RpdmUgPyBcImFjdGl2ZV9zaG9ydFwiIDogXCJpbmFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcImNlbnRlclwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtgc2V0dGluZ3MuJHtpc1N1cHBvcnRlZCA/IFwieWVzXCIgOiBcIm5vXCJ9YH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5wcm9wcy5wcm94eSA/IFwiXCIgOiBcImNsaWNrYWJsZVwifVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnByb3h5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgpID0+IHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMub25BY3Rpb24uYmluZCh0aGlzLCBpdGVtX2lkKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICB7IXRoaXMucHJvcHMucHJveHkgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1N1cHBvcnRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiY2hlY2ttYXJrLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJtaW51cy1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU3VwcG9ydGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJpY29ucy5jaGVja21hcmtfY2lyY2xlLnllc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJpY29ucy5taW51c19jaXJjbGUubm9cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJsb2NrZWRcIiB0aXRsZT1cImljb25zLmxvY2tlZC5hY3Rpb25cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFZvdGluZ0FjY291bnRzTGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGl0ZW1zOiBDaGFpblR5cGVzLkNoYWluT2JqZWN0c0xpc3QsXHJcbiAgICAgICAgb25BZGRJdGVtOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgICAgIG9uUmVtb3ZlSXRlbTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgICAgICB2YWxpZGF0ZUFjY291bnQ6IFByb3BUeXBlcy5mdW5jLFxyXG4gICAgICAgIGxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsIC8vIGEgdHJhbnNsYXRpb24ga2V5IGZvciB0aGUgbGFiZWwsXHJcbiAgICAgICAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5zdHJpbmcsIC8vIHRoZSBwbGFjZWhvbGRlciB0ZXh0IHRvIGJlIGRpc3BsYXllZCB3aGVuIHRoZXJlIGlzIG5vIHVzZXJfaW5wdXRcclxuICAgICAgICB0YWJJbmRleDogUHJvcFR5cGVzLm51bWJlciwgLy8gdGFiaW5kZXggcHJvcGVydHkgdG8gYmUgcGFzc2VkIHRvIGlucHV0IHRhZ1xyXG4gICAgICAgIGFjdGlvbjogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgICAgICB3aXRoU2VsZWN0b3I6IFByb3BUeXBlcy5ib29sXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgYWN0aW9uOiBcInJlbW92ZVwiLFxyXG4gICAgICAgIHdpdGhTZWxlY3RvcjogdHJ1ZSxcclxuICAgICAgICBhdXRvc3Vic2NyaWJlOiBmYWxzZVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBzZWxlY3RlZF9pdGVtOiBudWxsLFxyXG4gICAgICAgICAgICBpdGVtX25hbWVfaW5wdXQ6IFwiXCIsXHJcbiAgICAgICAgICAgIGVycm9yOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm9uSXRlbUNoYW5nZSA9IHRoaXMub25JdGVtQ2hhbmdlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbkl0ZW1BY2NvdW50Q2hhbmdlID0gdGhpcy5vbkl0ZW1BY2NvdW50Q2hhbmdlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbkFkZEl0ZW0gPSB0aGlzLm9uQWRkSXRlbS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uSXRlbUNoYW5nZShpdGVtX25hbWVfaW5wdXQpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpdGVtX25hbWVfaW5wdXR9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkl0ZW1BY2NvdW50Q2hhbmdlKHNlbGVjdGVkX2l0ZW0pIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZF9pdGVtLCBlcnJvcjogbnVsbH0pO1xyXG4gICAgICAgIGlmIChzZWxlY3RlZF9pdGVtICYmIHRoaXMucHJvcHMudmFsaWRhdGVBY2NvdW50KSB7XHJcbiAgICAgICAgICAgIGxldCByZXMgPSB0aGlzLnByb3BzLnZhbGlkYXRlQWNjb3VudChzZWxlY3RlZF9pdGVtKTtcclxuICAgICAgICAgICAgaWYgKHJlcyA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlcyA9PT0gXCJzdHJpbmdcIikgdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6IHJlc30pO1xyXG4gICAgICAgICAgICBlbHNlIHJlcy50aGVuKGVycm9yID0+IHRoaXMuc2V0U3RhdGUoe2Vycm9yOiBlcnJvcn0pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25BZGRJdGVtKGl0ZW0pIHtcclxuICAgICAgICBpZiAoIWl0ZW0pIHJldHVybjtcclxuICAgICAgICBsZXQgbmV4dF9zdGF0ZSA9IHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRfaXRlbTogbnVsbCxcclxuICAgICAgICAgICAgaXRlbV9uYW1lX2lucHV0OiBcIlwiLFxyXG4gICAgICAgICAgICBlcnJvcjogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShuZXh0X3N0YXRlKTtcclxuICAgICAgICB0aGlzLnByb3BzLm9uQWRkSXRlbShpdGVtLmdldChcImlkXCIpKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLml0ZW1zKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgbGV0IGl0ZW1fcm93cyA9IHRoaXMucHJvcHMuaXRlbXNcclxuICAgICAgICAgICAgLmZpbHRlcihpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy9pZiAodGhpcy5zdGF0ZS5pdGVtX25hbWVfaW5wdXQpIHJldHVybiBpLmdldChcIm5hbWVcIikuaW5kZXhPZih0aGlzLnN0YXRlLml0ZW1fbmFtZV9pbnB1dCkgIT09IC0xO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQge3ZvdGVzOiBhX3ZvdGVzfSA9IGdldFdpdG5lc3NPckNvbW1pdHRlZShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgYVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGxldCB7dm90ZXM6IGJfdm90ZXN9ID0gZ2V0V2l0bmVzc09yQ29tbWl0dGVlKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBiXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFfdm90ZXMgIT09IGJfdm90ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoYl92b3RlcywgMTApIC0gcGFyc2VJbnQoYV92b3RlcywgMTApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhLmdldChcIm5hbWVcIikgPiBiLmdldChcIm5hbWVcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYS5nZXQoXCJuYW1lXCIpIDwgYi5nZXQoXCJuYW1lXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm1hcCgoaSwgaWR4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWN0aW9uID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnN1cHBvcnRlZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuc3VwcG9ydGVkLmluY2x1ZGVzKGkuZ2V0KFwiaWRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJyZW1vdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwiYWRkXCI7XHJcbiAgICAgICAgICAgICAgICBsZXQgaXNBY3RpdmUgPSB0aGlzLnByb3BzLmFjdGl2ZS5pbmNsdWRlcyhcclxuICAgICAgICAgICAgICAgICAgICBnZXRXaXRuZXNzT3JDb21taXR0ZWUodGhpcy5wcm9wcy50eXBlLCBpKS5pZFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEFjY291bnRJdGVtUm93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkeD17aWR4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2kuZ2V0KFwibmFtZVwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17aX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT17dGhpcy5wcm9wcy50eXBlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFjdGlvbj17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb24gPT09IFwiYWRkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMucHJvcHMub25BZGRJdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnByb3BzLm9uUmVtb3ZlSXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQ9e3RoaXMucHJvcHMuaXRlbXMuaW5kZXhPZihpKSAhPT0gLTF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbj17YWN0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0FjdGl2ZT17aXNBY3RpdmV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5PXt0aGlzLnByb3BzLnByb3h5fVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGVycm9yID0gdGhpcy5zdGF0ZS5lcnJvcjtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICFlcnJvciAmJlxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNlbGVjdGVkX2l0ZW0gJiZcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5pdGVtcy5pbmRleE9mKHRoaXMuc3RhdGUuc2VsZWN0ZWRfaXRlbSkgIT09IC0xXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGVycm9yID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC52b3Rlcy5hbHJlYWR5XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGN3ID0gW1wiMTAlXCIsIFwiMjAlXCIsIFwiNDAlXCIsIFwiMjAlXCIsIFwiMTAlXCJdO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMud2l0aFNlbGVjdG9yID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXhXaWR0aDogXCI2MDBweFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3RoaXMucHJvcHMubGFiZWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yPXtlcnJvcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZT17dGhpcy5zdGF0ZS5pdGVtX25hbWVfaW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uSXRlbUNoYW5nZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5vbkl0ZW1BY2NvdW50Q2hhbmdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFjdGlvbj17dGhpcy5vbkFkZEl0ZW19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbl9sYWJlbD1cImFjY291bnQudm90ZXMuYWRkX3dpdG5lc3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGhpcy5wcm9wcy50YWJJbmRleH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy50aXRsZSAmJiBpdGVtX3Jvd3MubGVuZ3RoID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxoND57dGhpcy5wcm9wcy50aXRsZX08L2g0PlxyXG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICB7aXRlbV9yb3dzLmxlbmd0aCA/IChcclxuICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUgZGFzaGJvYXJkLXRhYmxlIHRhYmxlLWhvdmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PiM8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCIsIG1heFdpZHRoOiBjd1sxXX19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLm5hbWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7bWF4V2lkdGg6IGN3WzJdfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuYWJvdXRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7bWF4V2lkdGg6IGN3WzNdfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMudm90ZXNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7bWF4V2lkdGg6IGN3WzRdfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuc3RhdHVzLnRpdGxlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e21heFdpZHRoOiBjd1swXX19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLnN1cHBvcnRlZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3ttYXhXaWR0aDogY3dbNV19fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy50b2dnbGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+e2l0ZW1fcm93c308L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQmluZFRvQ2hhaW5TdGF0ZShWb3RpbmdBY2NvdW50c0xpc3QpO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBJbW11dGFibGUgZnJvbSBcImltbXV0YWJsZVwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBUb3RhbEJhbGFuY2VWYWx1ZSBmcm9tIFwiLi4vVXRpbGl0eS9Ub3RhbEJhbGFuY2VWYWx1ZVwiO1xyXG5pbXBvcnQgQXNzZXROYW1lIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0TmFtZVwiO1xyXG5pbXBvcnQgQXNzZXRJbWFnZSBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldEltYWdlXCI7XHJcbmltcG9ydCBNYXJnaW5Qb3NpdGlvbnMgZnJvbSBcIi4vTWFyZ2luUG9zaXRpb25zXCI7XHJcbmltcG9ydCB7UmVjZW50VHJhbnNhY3Rpb25zfSBmcm9tIFwiLi9SZWNlbnRUcmFuc2FjdGlvbnNcIjtcclxuaW1wb3J0IFByb3Bvc2FscyBmcm9tIFwiY29tcG9uZW50cy9BY2NvdW50L1Byb3Bvc2Fsc1wiO1xyXG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgU2V0dGluZ3NBY3Rpb25zIGZyb20gXCJhY3Rpb25zL1NldHRpbmdzQWN0aW9uc1wiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xyXG5pbXBvcnQgQWNjb3VudE9yZGVycyBmcm9tIFwiLi9BY2NvdW50T3JkZXJzXCI7XHJcbmltcG9ydCBjbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZVdpdGhMaW5rcyBmcm9tIFwiLi4vVXRpbGl0eS9UcmFuc2xhdGVXaXRoTGlua3NcIjtcclxuaW1wb3J0IHtjaGVja01hcmdpblN0YXR1c30gZnJvbSBcImNvbW1vbi9hY2NvdW50SGVscGVyXCI7XHJcbmltcG9ydCBCYWxhbmNlV3JhcHBlciBmcm9tIFwiLi9CYWxhbmNlV3JhcHBlclwiO1xyXG5pbXBvcnQgQWNjb3VudFRyZWVtYXAgZnJvbSBcIi4vQWNjb3VudFRyZWVtYXBcIjtcclxuaW1wb3J0IEFzc2V0V3JhcHBlciBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldFdyYXBwZXJcIjtcclxuaW1wb3J0IEFjY291bnRQb3J0Zm9saW9MaXN0IGZyb20gXCIuL0FjY291bnRQb3J0Zm9saW9MaXN0XCI7XHJcblxyXG5jbGFzcyBBY2NvdW50T3ZlcnZpZXcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHNvcnRLZXk6IHByb3BzLnZpZXdTZXR0aW5ncy5nZXQoXCJwb3J0Zm9saW9Tb3J0XCIsIFwidG90YWxWYWx1ZVwiKSxcclxuICAgICAgICAgICAgc29ydERpcmVjdGlvbjogcHJvcHMudmlld1NldHRpbmdzLmdldChcclxuICAgICAgICAgICAgICAgIFwicG9ydGZvbGlvU29ydERpcmVjdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICAgICApLCAvLyBhbHBoYWJldGljYWwgQSAtPiBCLCBudW1iZXJzIGhpZ2ggdG8gbG93XHJcbiAgICAgICAgICAgIHNob3duQXNzZXRzOiBwcm9wcy52aWV3U2V0dGluZ3MuZ2V0KFwic2hvd25Bc3NldHNcIiwgXCJhY3RpdmVcIiksXHJcbiAgICAgICAgICAgIGFsd2F5c1Nob3dBc3NldHM6IFtcclxuICAgICAgICAgICAgICAgIFwiQlRTXCJcclxuICAgICAgICAgICAgICAgIC8vIFwiVVNEXCIsXHJcbiAgICAgICAgICAgICAgICAvLyBcIkNOWVwiLFxyXG4gICAgICAgICAgICAgICAgLy8gXCJPUEVOLkJUQ1wiLFxyXG4gICAgICAgICAgICAgICAgLy8gXCJPUEVOLlVTRFRcIixcclxuICAgICAgICAgICAgICAgIC8vIFwiT1BFTi5FVEhcIixcclxuICAgICAgICAgICAgICAgIC8vIFwiT1BFTi5NQUlEXCIsXHJcbiAgICAgICAgICAgICAgICAvLyBcIk9QRU4uU1RFRU1cIixcclxuICAgICAgICAgICAgICAgIC8vIFwiT1BFTi5EQVNIXCJcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZpbHRlcklucHV0ID0gdGhpcy5faGFuZGxlRmlsdGVySW5wdXQuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRmlsdGVySW5wdXQoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgZmlsdGVyVmFsdWU6IGUudGFyZ2V0LnZhbHVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrTWFyZ2luU3RhdHVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrTWFyZ2luU3RhdHVzKHByb3BzID0gdGhpcy5wcm9wcykge1xyXG4gICAgICAgIGNoZWNrTWFyZ2luU3RhdHVzKHByb3BzLmFjY291bnQpLnRoZW4oc3RhdHVzID0+IHtcclxuICAgICAgICAgICAgbGV0IGdsb2JhbE1hcmdpblN0YXR1cyA9IG51bGw7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGFzc2V0IGluIHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgZ2xvYmFsTWFyZ2luU3RhdHVzID1cclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNbYXNzZXRdLnN0YXR1c0NsYXNzIHx8IGdsb2JhbE1hcmdpblN0YXR1cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtnbG9iYWxNYXJnaW5TdGF0dXN9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5wKSB7XHJcbiAgICAgICAgaWYgKG5wLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jaGVja01hcmdpblN0YXR1cyhucCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhuZXh0UHJvcHMuYmFsYW5jZXMsIHRoaXMucHJvcHMuYmFsYW5jZXMpIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5hY2NvdW50ICE9PSB0aGlzLnByb3BzLmFjY291bnQgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLnNldHRpbmdzICE9PSB0aGlzLnByb3BzLnNldHRpbmdzIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5oaWRkZW5Bc3NldHMgIT09IHRoaXMucHJvcHMuaGlkZGVuQXNzZXRzIHx8XHJcbiAgICAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhuZXh0U3RhdGUsIHRoaXMuc3RhdGUpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZmlsdGVyVmFsdWUgIT09IG5leHRTdGF0ZS5maWx0ZXJWYWx1ZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoYW5nZVNob3duQXNzZXRzKHNob3duQXNzZXRzID0gXCJhY3RpdmVcIikge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBzaG93bkFzc2V0c1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIHNob3duQXNzZXRzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3RvZ2dsZVNvcnRPcmRlcihrZXkpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zb3J0S2V5ID09PSBrZXkpIHtcclxuICAgICAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcclxuICAgICAgICAgICAgICAgIHBvcnRmb2xpb1NvcnREaXJlY3Rpb246ICF0aGlzLnN0YXRlLnNvcnREaXJlY3Rpb25cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgc29ydERpcmVjdGlvbjogIXRoaXMuc3RhdGUuc29ydERpcmVjdGlvblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlVmlld1NldHRpbmcoe1xyXG4gICAgICAgICAgICAgICAgcG9ydGZvbGlvU29ydDoga2V5XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHNvcnREaXJlY3Rpb246IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc29ydEtleToga2V5XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRIZWFkZXIoKSB7XHJcbiAgICAgICAgbGV0IHtzZXR0aW5nc30gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCB7c2hvd25Bc3NldHN9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgY29uc3QgcHJlZmVycmVkVW5pdCA9XHJcbiAgICAgICAgICAgIHNldHRpbmdzLmdldChcInVuaXRcIikgfHwgdGhpcy5wcm9wcy5jb3JlX2Fzc2V0LmdldChcInN5bWJvbFwiKTtcclxuICAgICAgICBjb25zdCBzaG93QXNzZXRQZXJjZW50ID0gc2V0dGluZ3MuZ2V0KFwic2hvd0Fzc2V0UGVyY2VudFwiLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMoXCJjbGlja2FibGUgaXMtc29ydGFibGVcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlzLWFjdGl2ZVwiOiB0aGlzLnN0YXRlLnNvcnRLZXkgPT09IFwiYWxwaGFiZXRpY1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fdG9nZ2xlU29ydE9yZGVyLmJpbmQodGhpcywgXCJhbHBoYWJldGljXCIpfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29tcG9uZW50PVwic3BhblwiIGNvbnRlbnQ9XCJhY2NvdW50LmFzc2V0XCIgLz5cclxuICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90b2dnbGVTb3J0T3JkZXIuYmluZCh0aGlzLCBcInF0eVwiKX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcImNsaWNrYWJsZSBpcy1zb3J0YWJsZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaXMtYWN0aXZlXCI6IHRoaXMuc3RhdGUuc29ydEtleSA9PT0gXCJxdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucXR5XCIgLz5cclxuICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90b2dnbGVTb3J0T3JkZXIuYmluZCh0aGlzLCBcInByaWNlVmFsdWVcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sdW1uLWhpZGUtc21hbGwgY2xpY2thYmxlIGlzLXNvcnRhYmxlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcImlzLWFjdGl2ZVwiOiB0aGlzLnN0YXRlLnNvcnRLZXkgPT09IFwicHJpY2VWYWx1ZVwifVxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UucHJpY2VcIiAvPiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBuYW1lPXtwcmVmZXJyZWRVbml0fSBub1RpcCAvPilcclxuICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90b2dnbGVTb3J0T3JkZXIuYmluZCh0aGlzLCBcImNoYW5nZVZhbHVlXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbHVtbi1oaWRlLXNtYWxsIGNsaWNrYWJsZSBpcy1zb3J0YWJsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XCJpcy1hY3RpdmVcIjogdGhpcy5zdGF0ZS5zb3J0S2V5ID09PSBcImNoYW5nZVZhbHVlXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LmhvdXJfMjRfc2hvcnRcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3RvZ2dsZVNvcnRPcmRlci5iaW5kKHRoaXMsIFwidG90YWxWYWx1ZVwiKX1cclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2x1bW4taGlkZS1zbWFsbCBjbGlja2FibGUgaXMtc29ydGFibGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAge1wiaXMtYWN0aXZlXCI6IHRoaXMuc3RhdGUuc29ydEtleSA9PT0gXCJ0b3RhbFZhbHVlXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlV2l0aExpbmtzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vTGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmc9XCJhY2NvdW50LmVxX3ZhbHVlX2hlYWRlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXM9e1tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByZWZlcnJlZFVuaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnOiBcImFzc2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9UaXBcclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgIHtzaG93QXNzZXRQZXJjZW50ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcInJpZ2h0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29tcG9uZW50PVwic3BhblwiIGNvbnRlbnQ9XCJhY2NvdW50LnBlcmNlbnRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJoZWFkZXIucGF5bWVudHNcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5idXlcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJtb2RhbC5kZXBvc2l0LnN1Ym1pdFwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cIm1vZGFsLndpdGhkcmF3LnN1Ym1pdFwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudHJhZGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5ib3Jyb3dfc2hvcnRcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnNldHRsZVwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwibW9kYWwucmVzZXJ2ZS5zdWJtaXRcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93bkFzc2V0cyA9PSBcImFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImV4Y2hhbmdlLmhpZGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJhY2NvdW50LnBlcm0uc2hvd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2FjY291bnQsIGhpZGRlbkFzc2V0cywgc2V0dGluZ3MsIG9yZGVyc30gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCB7c2hvd25Bc3NldHN9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcHJlZmVycmVkVW5pdCA9XHJcbiAgICAgICAgICAgIHNldHRpbmdzLmdldChcInVuaXRcIikgfHwgdGhpcy5wcm9wcy5jb3JlX2Fzc2V0LmdldChcInN5bWJvbFwiKTtcclxuXHJcbiAgICAgICAgbGV0IGNhbGxfb3JkZXJzID0gW10sXHJcbiAgICAgICAgICAgIGNvbGxhdGVyYWwgPSB7fSxcclxuICAgICAgICAgICAgZGVidCA9IHt9O1xyXG5cclxuICAgICAgICBpZiAoYWNjb3VudC50b0pTICYmIGFjY291bnQuaGFzKFwiY2FsbF9vcmRlcnNcIikpXHJcbiAgICAgICAgICAgIGNhbGxfb3JkZXJzID0gYWNjb3VudC5nZXQoXCJjYWxsX29yZGVyc1wiKS50b0pTKCk7XHJcbiAgICAgICAgbGV0IGluY2x1ZGVkUG9ydGZvbGlvTGlzdCwgaGlkZGVuUG9ydGZvbGlvTGlzdDtcclxuICAgICAgICBsZXQgYWNjb3VudF9iYWxhbmNlcyA9IGFjY291bnQuZ2V0KFwiYmFsYW5jZXNcIik7XHJcbiAgICAgICAgbGV0IGluY2x1ZGVkQmFsYW5jZXNMaXN0ID0gSW1tdXRhYmxlLkxpc3QoKSxcclxuICAgICAgICAgICAgaGlkZGVuQmFsYW5jZXNMaXN0ID0gSW1tdXRhYmxlLkxpc3QoKTtcclxuICAgICAgICBjYWxsX29yZGVycy5mb3JFYWNoKGNhbGxJRCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBwb3NpdGlvbiA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KGNhbGxJRCk7XHJcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbGxhdGVyYWxBc3NldCA9IHBvc2l0aW9uLmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICBcImNhbGxfcHJpY2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcImJhc2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcImFzc2V0X2lkXCJcclxuICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjb2xsYXRlcmFsW2NvbGxhdGVyYWxBc3NldF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xsYXRlcmFsW2NvbGxhdGVyYWxBc3NldF0gPSBwYXJzZUludChcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24uZ2V0KFwiY29sbGF0ZXJhbFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgMTBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xsYXRlcmFsW2NvbGxhdGVyYWxBc3NldF0gKz0gcGFyc2VJbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLmdldChcImNvbGxhdGVyYWxcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDEwXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBkZWJ0QXNzZXQgPSBwb3NpdGlvbi5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjYWxsX3ByaWNlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfaWRcIlxyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRlYnRbZGVidEFzc2V0XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnRbZGVidEFzc2V0XSA9IHBhcnNlSW50KHBvc2l0aW9uLmdldChcImRlYnRcIiksIDEwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidFtkZWJ0QXNzZXRdICs9IHBhcnNlSW50KHBvc2l0aW9uLmdldChcImRlYnRcIiksIDEwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoYWNjb3VudF9iYWxhbmNlcykge1xyXG4gICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IGJhbGFuY2Ugb2JqZWN0cyB0aGF0IGhhdmUgMCBiYWxhbmNlIG9yIGFyZSBub3QgaW5jbHVkZWQgaW4gb3BlbiBvcmRlcnNcclxuICAgICAgICAgICAgYWNjb3VudF9iYWxhbmNlcyA9IGFjY291bnRfYmFsYW5jZXMuZmlsdGVyKChhLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGJhbGFuY2VPYmplY3QgPSBDaGFpblN0b3JlLmdldE9iamVjdChhKTtcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlT2JqZWN0ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgKCFiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIikgJiYgIW9yZGVyc1tpbmRleF0pXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNlcGFyYXRlIGJhbGFuY2VzIGludG8gaGlkZGVuIGFuZCBpbmNsdWRlZFxyXG4gICAgICAgICAgICBhY2NvdW50X2JhbGFuY2VzLmZvckVhY2goKGEsIGFzc2V0X3R5cGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFzc2V0ID0gQ2hhaW5TdG9yZS5nZXRBc3NldChhc3NldF90eXBlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgYXNzZXROYW1lID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGxldCBmaWx0ZXIgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmZpbHRlclZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyID0gdGhpcy5zdGF0ZS5maWx0ZXJWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFN0cmluZyh0aGlzLnN0YXRlLmZpbHRlclZhbHVlKS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWUgPSBhc3NldC5nZXQoXCJzeW1ib2xcIikudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQge2lzQml0QXNzZXR9ID0gdXRpbHMucmVwbGFjZU5hbWUoYXNzZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0JpdEFzc2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0TmFtZSA9IFwiYml0XCIgKyBhc3NldE5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICBoaWRkZW5Bc3NldHMuaW5jbHVkZXMoYXNzZXRfdHlwZSkgJiZcclxuICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWUuaW5jbHVkZXMoZmlsdGVyKVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuQmFsYW5jZXNMaXN0ID0gaGlkZGVuQmFsYW5jZXNMaXN0LnB1c2goYSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFzc2V0TmFtZS5pbmNsdWRlcyhmaWx0ZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVkZWRCYWxhbmNlc0xpc3QgPSBpbmNsdWRlZEJhbGFuY2VzTGlzdC5wdXNoKGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBwb3J0Zm9saW9IaWRkZW5Bc3NldHNCYWxhbmNlID0gKFxyXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWUgbm9UaXAgYmFsYW5jZXM9e2hpZGRlbkJhbGFuY2VzTGlzdH0gaGlkZV9hc3NldCAvPlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGxldCBwb3J0Zm9saW9BY3RpdmVBc3NldHNCYWxhbmNlID0gKFxyXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWVcclxuICAgICAgICAgICAgICAgIG5vVGlwXHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlcz17aW5jbHVkZWRCYWxhbmNlc0xpc3R9XHJcbiAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgb3JkZXJzVmFsdWUgPSAoXHJcbiAgICAgICAgICAgIDxUb3RhbEJhbGFuY2VWYWx1ZVxyXG4gICAgICAgICAgICAgICAgbm9UaXBcclxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXtJbW11dGFibGUuTGlzdCgpfVxyXG4gICAgICAgICAgICAgICAgb3Blbk9yZGVycz17b3JkZXJzfVxyXG4gICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IG1hcmdpblZhbHVlID0gKFxyXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWVcclxuICAgICAgICAgICAgICAgIG5vVGlwXHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlcz17SW1tdXRhYmxlLkxpc3QoKX1cclxuICAgICAgICAgICAgICAgIGRlYnQ9e2RlYnR9XHJcbiAgICAgICAgICAgICAgICBjb2xsYXRlcmFsPXtjb2xsYXRlcmFsfVxyXG4gICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IGRlYnRWYWx1ZSA9IChcclxuICAgICAgICAgICAgPFRvdGFsQmFsYW5jZVZhbHVlXHJcbiAgICAgICAgICAgICAgICBub1RpcFxyXG4gICAgICAgICAgICAgICAgYmFsYW5jZXM9e0ltbXV0YWJsZS5MaXN0KCl9XHJcbiAgICAgICAgICAgICAgICBkZWJ0PXtkZWJ0fVxyXG4gICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IGNvbGxhdGVyYWxWYWx1ZSA9IChcclxuICAgICAgICAgICAgPFRvdGFsQmFsYW5jZVZhbHVlXHJcbiAgICAgICAgICAgICAgICBub1RpcFxyXG4gICAgICAgICAgICAgICAgYmFsYW5jZXM9e0ltbXV0YWJsZS5MaXN0KCl9XHJcbiAgICAgICAgICAgICAgICBjb2xsYXRlcmFsPXtjb2xsYXRlcmFsfVxyXG4gICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvdGFsVmFsdWVUZXh0ID0gKFxyXG4gICAgICAgICAgICA8VHJhbnNsYXRlV2l0aExpbmtzXHJcbiAgICAgICAgICAgICAgICBub0xpbmtcclxuICAgICAgICAgICAgICAgIHN0cmluZz1cImFjY291bnQudG90YWxcIlxyXG4gICAgICAgICAgICAgICAga2V5cz17W3t0eXBlOiBcImFzc2V0XCIsIHZhbHVlOiBwcmVmZXJyZWRVbml0LCBhcmc6IFwiYXNzZXRcIn1dfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGluY2x1ZGVkUG9ydGZvbGlvQmFsYW5jZSA9IChcclxuICAgICAgICAgICAgPHRyIGtleT1cInBvcnRmb2xpb1wiIGNsYXNzTmFtZT1cInRvdGFsLXZhbHVlXCI+XHJcbiAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj1cIjJcIiBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICB7dG90YWxWYWx1ZVRleHR9XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCIgLz5cclxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiIC8+XHJcbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIHtwb3J0Zm9saW9BY3RpdmVBc3NldHNCYWxhbmNlfVxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiOVwiIC8+XHJcbiAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgaGlkZGVuUG9ydGZvbGlvQmFsYW5jZSA9IChcclxuICAgICAgICAgICAgPHRyIGtleT1cInBvcnRmb2xpb1wiIGNsYXNzTmFtZT1cInRvdGFsLXZhbHVlXCI+XHJcbiAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj1cIjJcIiBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICB7dG90YWxWYWx1ZVRleHR9XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCIgLz5cclxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiIC8+XHJcbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIHtwb3J0Zm9saW9IaWRkZW5Bc3NldHNCYWxhbmNlfVxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiOVwiIC8+XHJcbiAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaW5jbHVkZWRQb3J0Zm9saW9MaXN0ID0gKFxyXG4gICAgICAgICAgICA8QWNjb3VudFBvcnRmb2xpb0xpc3RcclxuICAgICAgICAgICAgICAgIGJhbGFuY2VMaXN0PXtpbmNsdWRlZEJhbGFuY2VzTGlzdH1cclxuICAgICAgICAgICAgICAgIG9wdGlvbmFsQXNzZXRzPXtcclxuICAgICAgICAgICAgICAgICAgICAhdGhpcy5zdGF0ZS5maWx0ZXJWYWx1ZSA/IHRoaXMuc3RhdGUuYWx3YXlzU2hvd0Fzc2V0cyA6IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZpc2libGU9e3RydWV9XHJcbiAgICAgICAgICAgICAgICBwcmVmZXJyZWRVbml0PXtwcmVmZXJyZWRVbml0fVxyXG4gICAgICAgICAgICAgICAgY29yZUFzc2V0PXt0aGlzLnByb3BzLmNvcmVfYXNzZXR9XHJcbiAgICAgICAgICAgICAgICBjb3JlU3ltYm9sPXt0aGlzLnByb3BzLmNvcmVfYXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgaGlkZGVuQXNzZXRzPXtoaWRkZW5Bc3NldHN9XHJcbiAgICAgICAgICAgICAgICBvcmRlcnM9e29yZGVyc31cclxuICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudH1cclxuICAgICAgICAgICAgICAgIHNvcnRLZXk9e3RoaXMuc3RhdGUuc29ydEtleX1cclxuICAgICAgICAgICAgICAgIHNvcnREaXJlY3Rpb249e3RoaXMuc3RhdGUuc29ydERpcmVjdGlvbn1cclxuICAgICAgICAgICAgICAgIGlzTXlBY2NvdW50PXt0aGlzLnByb3BzLmlzTXlBY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgYmFsYW5jZXM9e3RoaXMucHJvcHMuYmFsYW5jZXN9XHJcbiAgICAgICAgICAgICAgICBoZWFkZXI9e3RoaXMuZ2V0SGVhZGVyKCl9XHJcbiAgICAgICAgICAgICAgICBleHRyYVJvdz17aW5jbHVkZWRQb3J0Zm9saW9CYWxhbmNlfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGhpZGRlblBvcnRmb2xpb0xpc3QgPSAoXHJcbiAgICAgICAgICAgIDxBY2NvdW50UG9ydGZvbGlvTGlzdFxyXG4gICAgICAgICAgICAgICAgYmFsYW5jZUxpc3Q9e2hpZGRlbkJhbGFuY2VzTGlzdH1cclxuICAgICAgICAgICAgICAgIG9wdGlvbmFsQXNzZXRzPXtcclxuICAgICAgICAgICAgICAgICAgICAhdGhpcy5zdGF0ZS5maWx0ZXJWYWx1ZSA/IHRoaXMuc3RhdGUuYWx3YXlzU2hvd0Fzc2V0IDogbnVsbFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmlzaWJsZT17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICBwcmVmZXJyZWRVbml0PXtwcmVmZXJyZWRVbml0fVxyXG4gICAgICAgICAgICAgICAgY29yZVN5bWJvbD17dGhpcy5wcm9wcy5jb3JlX2Fzc2V0LmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgIHNldHRpbmdzPXtzZXR0aW5nc31cclxuICAgICAgICAgICAgICAgIGhpZGRlbkFzc2V0cz17aGlkZGVuQXNzZXRzfVxyXG4gICAgICAgICAgICAgICAgb3JkZXJzPXtvcmRlcnN9XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnR9XHJcbiAgICAgICAgICAgICAgICBzb3J0S2V5PXt0aGlzLnN0YXRlLnNvcnRLZXl9XHJcbiAgICAgICAgICAgICAgICBzb3J0RGlyZWN0aW9uPXt0aGlzLnN0YXRlLnNvcnREaXJlY3Rpb259XHJcbiAgICAgICAgICAgICAgICBpc015QWNjb3VudD17dGhpcy5wcm9wcy5pc015QWNjb3VudH1cclxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXt0aGlzLnByb3BzLmJhbGFuY2VzfVxyXG4gICAgICAgICAgICAgICAgaGVhZGVyPXt0aGlzLmdldEhlYWRlcigpfVxyXG4gICAgICAgICAgICAgICAgZXh0cmFSb3c9e2hpZGRlblBvcnRmb2xpb0JhbGFuY2V9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gYWRkIHVuaWNvZGUgbm9uLWJyZWFraW5nIHNwYWNlIGFzIHN1YnRleHQgdG8gQWN0aXZpdHkgVGFiIHRvIGVuc3VyZSB0aGF0IGFsbCB0aXRsZXMgYXJlIGFsaWduZWRcclxuICAgICAgICAvLyBob3Jpem9udGFsbHlcclxuICAgICAgICBjb25zdCBoaWRkZW5TdWJUZXh0ID0gXCJcXHUwMGEwXCI7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLWNvbnRhaW5lciBnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFic1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEFjdGl2ZVRhYj17MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwib3ZlcnZpZXdUYWJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWNjb3VudC10YWJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNDbGFzcz1cImFjY291bnQtb3ZlcnZpZXcgbm8tcGFkZGluZyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImFjY291bnQucG9ydGZvbGlvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUZXh0PXtwb3J0Zm9saW9BY3RpdmVBc3NldHNCYWxhbmNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLXNlbGVjdG9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmlsdGVyIGlubGluZS1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRmlsdGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5faGFuZGxlRmlsdGVySW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3RvciBpbmxpbmUtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcImlubGluZS1ibG9ja1wiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgIT0gXCJhY3RpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93bkFzc2V0cyAhPSBcImFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX2NoYW5nZVNob3duQXNzZXRzLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgpID0+IHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuaGlkZV9oaWRkZW5cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aGlkZGVuQmFsYW5jZXNMaXN0LnNpemUgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaW5saW5lLWJsb2NrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5hY3RpdmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3duQXNzZXRzICE9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaGlkZGVuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93bkFzc2V0cyAhPSBcImhpZGRlblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9jaGFuZ2VTaG93bkFzc2V0cy5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJoaWRkZW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCkgPT4ge31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5zaG93X2hpZGRlblwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcImlubGluZS1ibG9ja1wiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgIT0gXCJ2aXN1YWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93bkFzc2V0cyAhPSBcInZpc3VhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX2NoYW5nZVNob3duQXNzZXRzLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ2aXN1YWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgpID0+IHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuc2hvd192aXN1YWxcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2hvd25Bc3NldHMgIT0gXCJ2aXN1YWxcIiA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgPT09IFwiaGlkZGVuXCIgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZGVuQmFsYW5jZXNMaXN0LnNpemUgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRkZW5Qb3J0Zm9saW9MaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZFBvcnRmb2xpb0xpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50VHJlZW1hcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZU9iamVjdHM9e2luY2x1ZGVkQmFsYW5jZXNMaXN0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50Lm9wZW5fb3JkZXJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUZXh0PXtvcmRlcnNWYWx1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudE9yZGVycyB7Li4udGhpcy5wcm9wc30+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9XCJ0b3RhbC12YWx1ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sU3Bhbj1cIjhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0b3RhbFZhbHVlVGV4dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xTcGFuPVwiMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge29yZGVyc1ZhbHVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmlzTXlBY2NvdW50ID8gPHRkIC8+IDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0FjY291bnRPcmRlcnM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LmNvbGxhdGVyYWxzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUZXh0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5nbG9iYWxNYXJnaW5TdGF0dXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge21hcmdpblZhbHVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdlbmVyaWMtYm9yZGVyZWQtYm94XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TWFyZ2luUG9zaXRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkVW5pdD17cHJlZmVycmVkVW5pdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJkYXNoYm9hcmQtdGFibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxPcmRlcnM9e2NhbGxfb3JkZXJzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT1cInRvdGFsLXZhbHVlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57dG90YWxWYWx1ZVRleHR9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57ZGVidFZhbHVlfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1tZWRpdW1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb2xsYXRlcmFsVmFsdWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e21hcmdpblZhbHVlfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiM1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTWFyZ2luUG9zaXRpb25zPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImFjY291bnQuYWN0aXZpdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRleHQ9e2hpZGRlblN1YlRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJlY2VudFRyYW5zYWN0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50c0xpc3Q9e0ltbXV0YWJsZS5mcm9tSlMoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5nZXQoXCJpZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFjdFZpZXc9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93TW9yZT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsbEhlaWdodD17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ9ezEwMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0ZpbHRlcnM9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhc2hib2FyZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWNjb3VudC5nZXQoXCJwcm9wb3NhbHNcIikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuZ2V0KFwicHJvcG9zYWxzXCIpLnNpemUgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImV4cGxvcmVyLnByb3Bvc2Fscy50aXRsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRleHQ9e1N0cmluZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuZ2V0KFwicHJvcG9zYWxzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhY2NvdW50LmdldChcInByb3Bvc2Fsc1wiKS5zaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJvcG9zYWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJkYXNoYm9hcmQtdGFibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuQWNjb3VudE92ZXJ2aWV3ID0gQXNzZXRXcmFwcGVyKEFjY291bnRPdmVydmlldywge3Byb3BOYW1lczogW1wiY29yZV9hc3NldFwiXX0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWNjb3VudE92ZXJ2aWV3V3JhcHBlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIDxCYWxhbmNlV3JhcHBlciB7Li4udGhpcy5wcm9wc30gd3JhcD17QWNjb3VudE92ZXJ2aWV3fSAvPjtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcbmltcG9ydCBGb3JtYXR0ZWRQcmljZSBmcm9tIFwiLi4vVXRpbGl0eS9Gb3JtYXR0ZWRQcmljZVwiO1xuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xuaW1wb3J0IEFzc2V0V3JhcHBlciBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldFdyYXBwZXJcIjtcbmltcG9ydCBBc3NldEltYWdlIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0SW1hZ2VcIjtcbmltcG9ydCBBc3NldE5hbWUgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXROYW1lXCI7XG5pbXBvcnQgQm9ycm93TW9kYWwgZnJvbSBcIi4uL01vZGFsL0JvcnJvd01vZGFsXCI7XG5pbXBvcnQgV2FsbGV0QXBpIGZyb20gXCJhcGkvV2FsbGV0QXBpXCI7XG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xuaW1wb3J0IFdhbGxldERiIGZyb20gXCJzdG9yZXMvV2FsbGV0RGJcIjtcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XG5pbXBvcnQgVG90YWxCYWxhbmNlVmFsdWUgZnJvbSBcIi4uL1V0aWxpdHkvVG90YWxCYWxhbmNlVmFsdWVcIjtcbmltcG9ydCB7TGlzdH0gZnJvbSBcImltbXV0YWJsZVwiO1xuaW1wb3J0IHtMaW5rfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuaW1wb3J0IFRyYW5zbGF0ZVdpdGhMaW5rcyBmcm9tIFwiLi4vVXRpbGl0eS9UcmFuc2xhdGVXaXRoTGlua3NcIjtcbmltcG9ydCBJbW11dGFibGUgZnJvbSBcImltbXV0YWJsZVwiO1xuXG5jb25zdCBhbGlnblJpZ2h0ID0ge3RleHRBbGlnbjogXCJyaWdodFwifTtcbmNvbnN0IGFsaWduTGVmdCA9IHt0ZXh0QWxpZ246IFwibGVmdFwifTtcblxuLyoqXG4gKiAgR2l2ZW4gYSBjb2xsYXRlcmFsIHBvc2l0aW9uIG9iamVjdCAoY2FsbCBvcmRlcikgYW5kIGFjY291bnQsXG4gKiAgZGlzcGxheSBpdCBpbiBhIHByZXR0eSB3YXlcbiAqXG4gKiAgRXhwZWN0cyBwcm9wZXJ0eSwgJ29iamVjdCcgd2hpY2ggc2hvdWxkIGJlIGEgY2FsbCBvcmRlciBpZFxuICogIGFuZCBhbm90aGVyIHByb3BlcnR5IGNhbGxlZCAnYWNjb3VudCcgd2hpY2ggc2hvdWxkIGJlIGFuXG4gKiAgYWNjb3VudC5cbiAqL1xuXG5jbGFzcyBNYXJnaW5Qb3NpdGlvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgZGVidEFzc2V0OiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZCxcbiAgICAgICAgY29sbGF0ZXJhbEFzc2V0OiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZFxuICAgIH07XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICB0ZW1wQ29tcG9uZW50OiBcInRyXCJcbiAgICB9O1xuXG4gICAgX29uVXBkYXRlUG9zaXRpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGxldCByZWYgPVxuICAgICAgICAgICAgXCJjcF9tb2RhbF9cIiArXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9iamVjdC5nZXRJbihbXCJjYWxsX3ByaWNlXCIsIFwicXVvdGVcIiwgXCJhc3NldF9pZFwiXSk7XG4gICAgICAgIHRoaXMucmVmc1tyZWZdLnNob3coKTtcbiAgICB9XG5cbiAgICBfb25DbG9zZVBvc2l0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsZXQgdHIgPSBXYWxsZXRBcGkubmV3X3RyYW5zYWN0aW9uKCk7XG5cbiAgICAgICAgdHIuYWRkX3R5cGVfb3BlcmF0aW9uKFwiY2FsbF9vcmRlcl91cGRhdGVcIiwge1xuICAgICAgICAgICAgZmVlOiB7XG4gICAgICAgICAgICAgICAgYW1vdW50OiAwLFxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuZGluZ19hY2NvdW50OiB0aGlzLnByb3BzLm9iamVjdC5nZXQoXCJib3Jyb3dlclwiKSxcbiAgICAgICAgICAgIGRlbHRhX2NvbGxhdGVyYWw6IHtcbiAgICAgICAgICAgICAgICBhbW91bnQ6IC10aGlzLnByb3BzLm9iamVjdC5nZXQoXCJjb2xsYXRlcmFsXCIpLFxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiB0aGlzLnByb3BzLm9iamVjdC5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgIFwiY2FsbF9wcmljZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImJhc2VcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWx0YV9kZWJ0OiB7XG4gICAgICAgICAgICAgICAgYW1vdW50OiAtdGhpcy5wcm9wcy5vYmplY3QuZ2V0KFwiZGVidFwiKSxcbiAgICAgICAgICAgICAgICBhc3NldF9pZDogdGhpcy5wcm9wcy5vYmplY3QuZ2V0SW4oW1xuICAgICAgICAgICAgICAgICAgICBcImNhbGxfcHJpY2VcIixcbiAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImFzc2V0X2lkXCJcbiAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBXYWxsZXREYi5wcm9jZXNzX3RyYW5zYWN0aW9uKHRyLCBudWxsLCB0cnVlKTtcbiAgICB9XG5cbiAgICAvLyBob3cgbWFueSB1bml0cyBvZiB0aGUgZGVidCBhc3NldCB0aGUgYm9ycm93ZXIgaGFzXG4gICAgLy8gaW4gaGlzL2hlciB3YWxsZXQuIFRoaXMgaGFzIG5vdGhpbmcgdG8gZG8gd2l0aFxuICAgIC8vIGhvdyBtYW55IG9mIHRoZSBhc3NldCB0aGUgYm9ycm93ZXIgaGFzIGJvcnJvd2VkLlxuICAgIF9nZXRCYWxhbmNlKCkge1xuICAgICAgICBsZXQgYWNjb3VudCA9IHRoaXMucHJvcHMuYWNjb3VudDtcbiAgICAgICAgLy8gdGhlIGRlYnQgYXNzZXQgaWQgd2hpY2ggd2Ugd2FudCB0byBkaXNwbGF5XG4gICAgICAgIGxldCByb3dfYXNzZXRfaWQgPSB0aGlzLnByb3BzLm9iamVjdC5nZXRJbihbXG4gICAgICAgICAgICBcImNhbGxfcHJpY2VcIixcbiAgICAgICAgICAgIFwicXVvdGVcIixcbiAgICAgICAgICAgIFwiYXNzZXRfaWRcIlxuICAgICAgICBdKTtcblxuICAgICAgICBsZXQgYWNjb3VudF9iYWxhbmNlcyA9IGFjY291bnQuZ2V0KFwiYmFsYW5jZXNcIik7XG5cbiAgICAgICAgbGV0IGJhbGFuY2UgPSAwO1xuXG4gICAgICAgIC8vIHJlYWxseSB0aGlzIGl0ZXJhdGlvbiBzaG91bGQgYmUgY2FsbGVkIG9uY2UsIGFuZFxuICAgICAgICAvLyBlYWNoIGFzc2V0X2lkIG1hdGNoZWQgb25jZSB3aXRoIGl0cyBiYWxhbmNlXG5cbiAgICAgICAgLy8gZm9yIGV2ZXJ5IGRlYnQgdGhlIGFjY291bnQgaGFzLCB3ZSBpdGVyYXRlXG4gICAgICAgIC8vIHRocm91Z2ggZXZlcnkgYmFsYW5jZSB0aGUgdXNlciBoYXNcbiAgICAgICAgaWYgKGFjY291bnRfYmFsYW5jZXMpIHtcbiAgICAgICAgICAgIGFjY291bnRfYmFsYW5jZXMuZm9yRWFjaCgoYSwgYXNzZXRfdHlwZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhc3NldF90eXBlID09IHJvd19hc3NldF9pZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmFsYW5jZU9iamVjdCA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgYmFsYW5jZVxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlID0gYmFsYW5jZU9iamVjdC5nZXQoXCJiYWxhbmNlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBhY2NvdW50IGRvZXNuJ3QgaG9sZFxuICAgICAgICAvLyBhbnkgb2YgdGhlIGFzc2V0IGhlcmVcbiAgICAgICAgcmV0dXJuIGJhbGFuY2U7XG4gICAgfVxuXG4gICAgX2dldEZlZWRQcmljZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAxIC9cbiAgICAgICAgICAgIHV0aWxzLmdldF9hc3NldF9wcmljZShcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmRlYnRBc3NldC5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJjdXJyZW50X2ZlZWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzZXR0bGVtZW50X3ByaWNlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwicXVvdGVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhbW91bnRcIlxuICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY29sbGF0ZXJhbEFzc2V0LFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZGVidEFzc2V0LmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICBcImN1cnJlbnRfZmVlZFwiLFxuICAgICAgICAgICAgICAgICAgICBcInNldHRsZW1lbnRfcHJpY2VcIixcbiAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYW1vdW50XCJcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmRlYnRBc3NldFxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9nZXRDb2xsYXRlcmFsUmF0aW8oKSB7XG4gICAgICAgIGNvbnN0IGNvID0gdGhpcy5wcm9wcy5vYmplY3QudG9KUygpO1xuICAgICAgICBjb25zdCBjID0gdXRpbHMuZ2V0X2Fzc2V0X2Ftb3VudChcbiAgICAgICAgICAgIGNvLmNvbGxhdGVyYWwsXG4gICAgICAgICAgICB0aGlzLnByb3BzLmNvbGxhdGVyYWxBc3NldFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBkID0gdXRpbHMuZ2V0X2Fzc2V0X2Ftb3VudChjby5kZWJ0LCB0aGlzLnByb3BzLmRlYnRBc3NldCk7XG4gICAgICAgIHJldHVybiBjIC8gKGQgLyB0aGlzLl9nZXRGZWVkUHJpY2UoKSk7XG4gICAgfVxuXG4gICAgX2dldE1SKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5kZWJ0QXNzZXQuZ2V0SW4oW1xuICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcbiAgICAgICAgICAgICAgICBcImN1cnJlbnRfZmVlZFwiLFxuICAgICAgICAgICAgICAgIFwibWFpbnRlbmFuY2VfY29sbGF0ZXJhbF9yYXRpb1wiXG4gICAgICAgICAgICBdKSAvIDEwMDBcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBfZ2V0U3RhdHVzQ2xhc3MoKSB7XG4gICAgICAgIGxldCBjciA9IHRoaXMuX2dldENvbGxhdGVyYWxSYXRpbygpO1xuICAgICAgICBjb25zdCBtciA9IHRoaXMuX2dldE1SKCk7XG5cbiAgICAgICAgaWYgKGlzTmFOKGNyKSkgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChjciA8IG1yKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJkYW5nZXJcIjtcbiAgICAgICAgfSBlbHNlIGlmIChjciA8IG1yICsgMC41KSB7XG4gICAgICAgICAgICByZXR1cm4gXCJ3YXJuaW5nXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9nZXRDUlRpcCgpIHtcbiAgICAgICAgY29uc3Qgc3RhdHVzQ2xhc3MgPSB0aGlzLl9nZXRTdGF0dXNDbGFzcygpO1xuICAgICAgICBjb25zdCBtciA9IHRoaXMuX2dldE1SKCk7XG4gICAgICAgIGlmICghc3RhdHVzQ2xhc3MgfHwgc3RhdHVzQ2xhc3MgPT09IFwiXCIpIHJldHVybiBudWxsO1xuXG4gICAgICAgIGlmIChzdGF0dXNDbGFzcyA9PT0gXCJkYW5nZXJcIikge1xuICAgICAgICAgICAgcmV0dXJuIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInRvb2x0aXAuY3JfZGFuZ2VyXCIsIHttcn0pO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1c0NsYXNzID09PSBcIndhcm5pbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInRvb2x0aXAuY3Jfd2FybmluZ1wiLCB7bXJ9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2dldFRhcmdldENvbGxhdGVyYWxSYXRpbygpIHtcbiAgICAgICAgY29uc3QgY28gPSB0aGlzLnByb3BzLm9iamVjdCAmJiB0aGlzLnByb3BzLm9iamVjdC50b0pTKCk7XG5cbiAgICAgICAgcmV0dXJuIGNvICYmICFpc05hTihjby50YXJnZXRfY29sbGF0ZXJhbF9yYXRpbylcbiAgICAgICAgICAgID8gY28udGFyZ2V0X2NvbGxhdGVyYWxfcmF0aW8gLyAxMDAwXG4gICAgICAgICAgICA6IDA7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge2RlYnRBc3NldCwgY29sbGF0ZXJhbEFzc2V0LCBvYmplY3R9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICBsZXQgaGFzX29yZGVyID0gb2JqZWN0ICE9IG51bGw7XG5cbiAgICAgICAgbGV0IGNvID0gaGFzX29yZGVyID8gb2JqZWN0LnRvSlMoKSA6IG51bGw7XG4gICAgICAgIGNvbnN0IGNyID0gdGhpcy5fZ2V0Q29sbGF0ZXJhbFJhdGlvKCk7XG4gICAgICAgIGNvbnN0IGQgPSB1dGlscy5nZXRfYXNzZXRfYW1vdW50KGNvLmRlYnQsIHRoaXMucHJvcHMuZGVidEFzc2V0KTtcbiAgICAgICAgY29uc3QgYmFsYW5jZSA9IHRoaXMuX2dldEJhbGFuY2UoKTtcblxuICAgICAgICBjb25zdCBzdGF0dXNDbGFzcyA9IHRoaXMuX2dldFN0YXR1c0NsYXNzKCk7XG5cbiAgICAgICAgY29uc3QgZGVidF9hbW91bnQgPSBoYXNfb3JkZXIgPyBjby5kZWJ0IDogMDtcbiAgICAgICAgY29uc3QgY29sbGF0ZXJhbF9hbW91bnQgPSBoYXNfb3JkZXIgPyBjby5jb2xsYXRlcmFsIDogMDtcbiAgICAgICAgY29uc3QgY29sbGF0ZXJhbF9hc3NldCA9IGhhc19vcmRlclxuICAgICAgICAgICAgPyBjby5jYWxsX3ByaWNlLmJhc2UuYXNzZXRfaWRcbiAgICAgICAgICAgIDogY29sbGF0ZXJhbEFzc2V0LmdldChcImlkXCIpO1xuICAgICAgICBjb25zdCB0YXJnZXRfY29sbGF0ZXJhbF9yYXRpbyA9IHRoaXMuX2dldFRhcmdldENvbGxhdGVyYWxSYXRpbygpO1xuXG4gICAgICAgIGxldCBtY3IgPSB0aGlzLnByb3BzLmRlYnRBc3NldC5nZXRJbihbXG4gICAgICAgICAgICBcImJpdGFzc2V0XCIsXG4gICAgICAgICAgICBcImN1cnJlbnRfZmVlZFwiLFxuICAgICAgICAgICAgXCJtYWludGVuYW5jZV9jb2xsYXRlcmFsX3JhdGlvXCJcbiAgICAgICAgXSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9XCJtYXJnaW4tcm93XCI+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnbkxlZnR9PlxuICAgICAgICAgICAgICAgICAgICA8QXNzZXRJbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZU5vbmVUb0J0cz17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aD17MzB9XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtkZWJ0QXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8TGluayB0bz17YC9hc3NldC8ke2RlYnRBc3NldC5nZXQoXCJzeW1ib2xcIil9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lIG5vVGlwIG5hbWU9e2RlYnRBc3NldC5nZXQoXCJzeW1ib2xcIil9IC8+XG4gICAgICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICA8L3RkPlxuXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fT5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2JhbGFuY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17Y28uY2FsbF9wcmljZS5xdW90ZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3RkPlxuXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fT5cbiAgICAgICAgICAgICAgICAgICAge2hhc19vcmRlciA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17Y28uZGVidH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17Y28uY2FsbF9wcmljZS5xdW90ZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICA8L3RkPlxuXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1tZWRpdW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsT2Zmc2V0PXszfVxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtjb2xsYXRlcmFsX2Ftb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtjb2xsYXRlcmFsX2Fzc2V0fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG5cbiAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e3RoaXMuX2dldENSVGlwKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1wiY2VudGVyLWNvbnRlbnQgXCIgKyBzdGF0dXNDbGFzc31cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge3V0aWxzLmZvcm1hdF9udW1iZXIoY3IsIDIpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L3RkPlxuXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1tZWRpdW0tMlwiPlxuICAgICAgICAgICAgICAgICAgICB7dGFyZ2V0X2NvbGxhdGVyYWxfcmF0aW9cbiAgICAgICAgICAgICAgICAgICAgICAgID8gdXRpbHMuZm9ybWF0X251bWJlcih0YXJnZXRfY29sbGF0ZXJhbF9yYXRpbywgMilcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbH1cbiAgICAgICAgICAgICAgICA8L3RkPlxuXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1tZWRpdW0tMVwiPlxuICAgICAgICAgICAgICAgICAgICB7aGFzX29yZGVyID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFRvdGFsQmFsYW5jZVZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9UaXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlcz17TGlzdCgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnQ9e3tbZGVidEFzc2V0LmdldChcImlkXCIpXTogY28uZGVidH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGF0ZXJhbD17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbY29sbGF0ZXJhbEFzc2V0LmdldChcImlkXCIpXTogcGFyc2VJbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjby5jb2xsYXRlcmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgPC90ZD5cblxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17YWxpZ25SaWdodH0gY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGwtMlwiPlxuICAgICAgICAgICAgICAgICAgICB7aGFzX29yZGVyID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZFByaWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9hbW91bnQ9e2NvbGxhdGVyYWxfYW1vdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VfYXNzZXQ9e2NvbGxhdGVyYWxBc3NldC5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZV9hbW91bnQ9e2RlYnRfYW1vdW50ICogKG1jciAvIDEwMDApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlX2Fzc2V0PXtkZWJ0QXNzZXQuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9zeW1ib2xzXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICA8L3RkPlxuXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbC0xXCI+XG4gICAgICAgICAgICAgICAgICAgIHtoYXNfb3JkZXIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkUHJpY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlX2Ftb3VudD17ZGVidEFzc2V0LmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImN1cnJlbnRfZmVlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNldHRsZW1lbnRfcHJpY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYW1vdW50XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlX2Fzc2V0PXtjby5jYWxsX3ByaWNlLnF1b3RlLmFzc2V0X2lkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlX2Ftb3VudD17ZGVidEFzc2V0LmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImN1cnJlbnRfZmVlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNldHRsZW1lbnRfcHJpY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFtb3VudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYXNzZXQ9e2NvLmNhbGxfcHJpY2UuYmFzZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX3N5bWJvbHNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgIDwvdGQ+XG5cbiAgICAgICAgICAgICAgICA8dGRcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcImNlbnRlci1jb250ZW50IGNvbHVtbi1oaWRlLXNtYWxsXCJ9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXthbGlnbkxlZnR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7aGFzX29yZGVyID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZFByaWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9hbW91bnQ9e2NvLmNhbGxfcHJpY2UuYmFzZS5hbW91bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9hc3NldD17Y28uY2FsbF9wcmljZS5iYXNlLmFzc2V0X2lkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlX2Ftb3VudD17Y28uY2FsbF9wcmljZS5xdW90ZS5hbW91bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYXNzZXQ9e2NvLmNhbGxfcHJpY2UucXVvdGUuYXNzZXRfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV92YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgPC90ZD5cblxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19PlxuICAgICAgICAgICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgdG89e2AvbWFya2V0LyR7ZGVidEFzc2V0LmdldChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN5bWJvbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICApfV8ke2NvbGxhdGVyYWxBc3NldC5nZXQoXCJzeW1ib2xcIil9YH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwidHJhZGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMudHJhZGUudHJhZGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5SaWdodDogNX19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgPC90ZD5cblxuICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1wbGFjZT1cImxlZnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAudXBkYXRlX3Bvc2l0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206IDV9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBvbkNsaWNrPXt0aGlzLl9vblVwZGF0ZVBvc2l0aW9uLmJpbmQodGhpcyl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJhZGp1c3RcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmFkanVzdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweCByb3RhdGU5MFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC90ZD5cblxuICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAge2hhc19vcmRlciA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwibGVmdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLmNsb3NlX3Bvc2l0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthbW91bnQ6IGQsIGFzc2V0OiBkZWJ0QXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiA1fX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBvbkNsaWNrPXt0aGlzLl9vbkNsb3NlUG9zaXRpb24uYmluZCh0aGlzKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMuY3Jvc3NfY2lyY2xlLmNsb3NlX3Bvc2l0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICB7ZGVidEFzc2V0ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEJvcnJvd01vZGFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtcImNwX21vZGFsX1wiICsgY28uY2FsbF9wcmljZS5xdW90ZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RhbElkPXtcImNwX21vZGFsX1wiICsgY28uY2FsbF9wcmljZS5xdW90ZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZV9hc3NldD17Y28uY2FsbF9wcmljZS5xdW90ZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNraW5nX2Fzc2V0PXtkZWJ0QXNzZXQuZ2V0SW4oW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJpdGFzc2V0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3B0aW9uc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNob3J0X2JhY2tpbmdfYXNzZXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8L3RyPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuTWFyZ2luUG9zaXRpb24gPSBCaW5kVG9DaGFpblN0YXRlKE1hcmdpblBvc2l0aW9uKTtcblxuY2xhc3MgTWFyZ2luUG9zaXRpb25XcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBvYmplY3Q6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZFxuICAgIH07XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7b2JqZWN0LCBhY2NvdW50fSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCBkZWJ0QXNzZXQgPSBvYmplY3QuZ2V0SW4oW1wiY2FsbF9wcmljZVwiLCBcInF1b3RlXCIsIFwiYXNzZXRfaWRcIl0pO1xuICAgICAgICBsZXQgY29sbGF0ZXJhbEFzc2V0ID0gb2JqZWN0LmdldEluKFtcImNhbGxfcHJpY2VcIiwgXCJiYXNlXCIsIFwiYXNzZXRfaWRcIl0pO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8TWFyZ2luUG9zaXRpb25cbiAgICAgICAgICAgICAgICBkZWJ0QXNzZXQ9e2RlYnRBc3NldH1cbiAgICAgICAgICAgICAgICBjb2xsYXRlcmFsQXNzZXQ9e2NvbGxhdGVyYWxBc3NldH1cbiAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxuICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbk1hcmdpblBvc2l0aW9uV3JhcHBlciA9IEJpbmRUb0NoYWluU3RhdGUoTWFyZ2luUG9zaXRpb25XcmFwcGVyKTtcblxuY2xhc3MgTWFyZ2luUG9zaXRpb25QbGFjZUhvbGRlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgZGVidEFzc2V0OiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZCxcbiAgICAgICAgY29sbGF0ZXJhbEFzc2V0OiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZFxuICAgIH07XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICB0ZW1wQ29tcG9uZW50OiBcInRyXCJcbiAgICB9O1xuXG4gICAgX29uVXBkYXRlUG9zaXRpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGxldCByZWYgPSBcImNwX21vZGFsX1wiICsgdGhpcy5wcm9wcy5kZWJ0QXNzZXQuZ2V0KFwiaWRcIik7XG4gICAgICAgIHRoaXMucmVmc1tyZWZdLnNob3coKTtcbiAgICB9XG5cbiAgICBfZ2V0RmVlZFByaWNlKCkge1xuICAgICAgICBpZiAoIXRoaXMucHJvcHMpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDEgL1xuICAgICAgICAgICAgdXRpbHMuZ2V0X2Fzc2V0X3ByaWNlKFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZGVidEFzc2V0LmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICBcImN1cnJlbnRfZmVlZFwiLFxuICAgICAgICAgICAgICAgICAgICBcInNldHRsZW1lbnRfcHJpY2VcIixcbiAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImFtb3VudFwiXG4gICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jb2xsYXRlcmFsQXNzZXQsXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5kZWJ0QXNzZXQuZ2V0SW4oW1xuICAgICAgICAgICAgICAgICAgICBcImJpdGFzc2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiY3VycmVudF9mZWVkXCIsXG4gICAgICAgICAgICAgICAgICAgIFwic2V0dGxlbWVudF9wcmljZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImJhc2VcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhbW91bnRcIlxuICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZGVidEFzc2V0XG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge2RlYnRBc3NldCwgY29sbGF0ZXJhbEFzc2V0LCBhY2NvdW50fSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgLy8gZ2V0IHRoZSBiYWxhbmNlXG5cbiAgICAgICAgLy8gdGhlIGRlYnQgYXNzZXQgaWQgd2hpY2ggd2Ugd2FudCB0byBkaXNwbGF5XG4gICAgICAgIGxldCByb3dfYXNzZXRfaWQgPSBkZWJ0QXNzZXQuZ2V0KFwiaWRcIik7XG5cbiAgICAgICAgbGV0IGFjY291bnRfYmFsYW5jZXMgPSBhY2NvdW50LmdldChcImJhbGFuY2VzXCIpO1xuXG4gICAgICAgIGxldCBiYWxhbmNlID0gMDtcblxuICAgICAgICAvLyByZWFsbHkgdGhpcyBpdGVyYXRpb24gc2hvdWxkIGJlIGNhbGxlZCBvbmNlLCBhbmRcbiAgICAgICAgLy8gZWFjaCBhc3NldF9pZCBtYXRjaGVkIG9uY2Ugd2l0aCBpdHMgYmFsYW5jZVxuXG4gICAgICAgIC8vIGZvciBldmVyeSBkZWJ0IHRoZSBhY2NvdW50IGhhcywgd2UgaXRlcmF0ZVxuICAgICAgICAvLyB0aHJvdWdoIGV2ZXJ5IGJhbGFuY2UgdGhlIHVzZXIgaGFzXG4gICAgICAgIGlmIChhY2NvdW50X2JhbGFuY2VzKSB7XG4gICAgICAgICAgICBhY2NvdW50X2JhbGFuY2VzLmZvckVhY2goKGEsIGFzc2V0X3R5cGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYXNzZXRfdHlwZSA9PSByb3dfYXNzZXRfaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJhbGFuY2VPYmplY3QgPSBDaGFpblN0b3JlLmdldE9iamVjdChhKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIGJhbGFuY2VcbiAgICAgICAgICAgICAgICAgICAgYmFsYW5jZSA9IGJhbGFuY2VPYmplY3QuZ2V0KFwiYmFsYW5jZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dHIgY2xhc3NOYW1lPVwibWFyZ2luLXJvd1wiPlxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17YWxpZ25MZWZ0fT5cbiAgICAgICAgICAgICAgICAgICAgPEFzc2V0SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VOb25lVG9CdHM9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg9ezMwfVxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17ZGVidEFzc2V0LmdldChcInN5bWJvbFwiKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89e2AvYXNzZXQvJHtkZWJ0QXNzZXQuZ2V0KFwic3ltYm9sXCIpfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBub1RpcCBuYW1lPXtkZWJ0QXNzZXQuZ2V0KFwic3ltYm9sXCIpfSAvPlxuICAgICAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduUmlnaHR9PlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17YmFsYW5jZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtkZWJ0QXNzZXQuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduUmlnaHR9PlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17MH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtkZWJ0QXNzZXQuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduUmlnaHR9IGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLW1lZGl1bVwiPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY2ltYWxPZmZzZXQ9ezN9XG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9ezB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17Y29sbGF0ZXJhbEFzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkIC8+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fSAvPlxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17YWxpZ25SaWdodH0gY2xhc3NOYW1lPXtcImNvbHVtbi1oaWRlLXNtYWxsXCJ9IC8+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9e1wiY29sdW1uLWhpZGUtc21hbGxcIn0gLz5cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduUmlnaHR9IGNsYXNzTmFtZT17XCJjb2x1bW4taGlkZS1zbWFsbFwifSAvPlxuICAgICAgICAgICAgICAgIDx0ZFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1wiY2VudGVyLWNvbnRlbnQgY29sdW1uLWhpZGUtc21hbGxcIn1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e2FsaWduTGVmdH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIHsvKiA8dGQ+PEFzc2V0TmFtZSBuYW1lPXtkZWJ0QXNzZXQuZ2V0KFwic3ltYm9sXCIpfSAvPi88QXNzZXROYW1lIG5hbWU9e2NvbGxhdGVyYWxBc3NldC5nZXQoXCJzeW1ib2xcIil9IC8+PC90ZD4gKi99XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcImNlbnRlclwifX0+XG4gICAgICAgICAgICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICB0bz17YC9tYXJrZXQvJHtkZWJ0QXNzZXQuZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3ltYm9sXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XyR7Y29sbGF0ZXJhbEFzc2V0LmdldChcInN5bWJvbFwiKX1gfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0cmFkZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy50cmFkZS50cmFkZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpblJpZ2h0OiA1fX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1wbGFjZT1cImxlZnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAudXBkYXRlX3Bvc2l0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206IDV9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBvbkNsaWNrPXt0aGlzLl9vblVwZGF0ZVBvc2l0aW9uLmJpbmQodGhpcyl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJhZGp1c3RcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmFkanVzdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweCByb3RhdGU5MFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgIHtkZWJ0QXNzZXQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Qm9ycm93TW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e1wiY3BfbW9kYWxfXCIgKyBkZWJ0QXNzZXQuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxJZD17XCJjcF9tb2RhbF9cIiArIGRlYnRBc3NldC5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZV9hc3NldD17ZGVidEFzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tpbmdfYXNzZXQ9e2RlYnRBc3NldC5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2hvcnRfYmFja2luZ19hc3NldFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5wcm9wcy5hY2NvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5NYXJnaW5Qb3NpdGlvblBsYWNlSG9sZGVyID0gQmluZFRvQ2hhaW5TdGF0ZShNYXJnaW5Qb3NpdGlvblBsYWNlSG9sZGVyKTtcblxuY2xhc3MgUGxhY2VIb2xkZXJXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBjYWxsT3JkZXJzOiBDaGFpblR5cGVzLkNoYWluT2JqZWN0c0xpc3RcbiAgICB9O1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge2FjY291bnQsIGNhbGxPcmRlcnMsIGJpdEFzc2V0c30gPSB0aGlzLnByb3BzO1xuICAgICAgICBjYWxsT3JkZXJzID0gY2FsbE9yZGVycy5maWx0ZXIobyA9PiAhIW8pO1xuICAgICAgICBiaXRBc3NldHMgPSBiaXRBc3NldHMuZmlsdGVyKG8gPT4gISFvKTtcbiAgICAgICAgaWYgKCFiaXRBc3NldHMubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY2FsbE9yZGVycy5mb3JFYWNoKG9iamVjdCA9PiB7XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgKiBFeGlzdGluZyBjYWxsIG9yZGVycyBhcmUgYWxyZWFkeSByZW5kZXJlZCBlbHNld2hlcmUsIHNvIHdlIGZpbHRlclxuICAgICAgICAgICAgKiBvdXQgYXNzZXRzIGZyb20gdGhlIGJpdEFzc2V0cyBsaXN0IGZvciB3aGljaCB0aGUgYWNjb3VudCBhbHJlYWR5XG4gICAgICAgICAgICAqIGhhcyBhIHBvc2l0aW9uXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKG9iamVjdCkge1xuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGJpdEFzc2V0cy5maW5kSW5kZXgobyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBvICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBvLmdldChcImlkXCIpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5nZXRJbihbXCJjYWxsX3ByaWNlXCIsIFwicXVvdGVcIiwgXCJhc3NldF9pZFwiXSlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGJpdEFzc2V0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFiaXRBc3NldHMubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IHJvd3MgPSBiaXRBc3NldHMubWFwKGEgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8TWFyZ2luUG9zaXRpb25QbGFjZUhvbGRlclxuICAgICAgICAgICAgICAgICAgICBrZXk9e2EuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgIGRlYnRBc3NldD17YS5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgY29sbGF0ZXJhbEFzc2V0PXthLmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwib3B0aW9uc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG9ydF9iYWNraW5nX2Fzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgXSl9XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gPHRib2R5Pntyb3dzfTwvdGJvZHk+O1xuICAgIH1cbn1cblxuUGxhY2VIb2xkZXJXcmFwcGVyID0gQmluZFRvQ2hhaW5TdGF0ZShQbGFjZUhvbGRlcldyYXBwZXIpO1xuUGxhY2VIb2xkZXJXcmFwcGVyID0gQXNzZXRXcmFwcGVyKFBsYWNlSG9sZGVyV3JhcHBlciwge1xuICAgIHByb3BOYW1lczogW1wiYml0QXNzZXRzXCJdLFxuICAgIGRlZmF1bHRQcm9wczoge1xuICAgICAgICBiaXRBc3NldHM6IFtcbiAgICAgICAgICAgIFwiMS4zLjEwM1wiLFxuICAgICAgICAgICAgXCIxLjMuMTEzXCIsXG4gICAgICAgICAgICBcIjEuMy4xMjBcIixcbiAgICAgICAgICAgIFwiMS4zLjEyMVwiLFxuICAgICAgICAgICAgXCIxLjMuOTU4XCIsXG4gICAgICAgICAgICBcIjEuMy4xMzI1XCIsXG4gICAgICAgICAgICBcIjEuMy4xMzYyXCIsXG4gICAgICAgICAgICBcIjEuMy4xMDVcIixcbiAgICAgICAgICAgIFwiMS4zLjEwNlwiXG4gICAgICAgIF1cbiAgICB9LFxuICAgIGFzTGlzdDogdHJ1ZVxufSk7XG5cbmNvbnN0IENvbGxhdGVyYWxUYWJsZSA9ICh7XG4gICAgY2FsbE9yZGVycyxcbiAgICBhY2NvdW50LFxuICAgIGNsYXNzTmFtZSxcbiAgICBjaGlsZHJlbixcbiAgICBwcmVmZXJyZWRVbml0XG59KSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT17XCJ0YWJsZSB0YWJsZS1ob3ZlciBcIiArIGNsYXNzTmFtZX0+XG4gICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e2FsaWduTGVmdH0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5hc3NldC50aXRsZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17YWxpZ25SaWdodH0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5iYWxhbmNlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXthbGlnblJpZ2h0fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInRyYW5zYWN0aW9uLmJvcnJvd19hbW91bnRcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e2FsaWduUmlnaHR9IGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLW1lZGl1bVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNhY3Rpb24uY29sbGF0ZXJhbFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0b29sdGlwIGlubGluZS1ibG9ja1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1wbGFjZT1cInRvcFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLmNvbGxfcmF0aW9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYm9ycm93LmNvbGxfcmF0aW9cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0b29sdGlwIGlubGluZS1ibG9ja1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1wbGFjZT1cInRvcFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJib3Jyb3cudGFyZ2V0X2NvbGxhdGVyYWxfcmF0aW9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYm9ycm93LnRhcmdldF9jb2xsYXRlcmFsX3JhdGlvX3Nob3J0XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxuXG4gICAgICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVXaXRoTGlua3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub0xpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmc9XCJhY2NvdW50LnRvdGFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcmVmZXJyZWRVbml0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnOiBcImFzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e2FsaWduUmlnaHR9IGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidG9vbHRpcCBpbmxpbmUtYmxvY2tcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJ0b3BcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGlwPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5jYWxsX3ByaWNlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLmNhbGxcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17YWxpZ25SaWdodH0gY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnByaWNlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCIgc3R5bGU9e2FsaWduTGVmdH0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5hc3NldHMudW5pdHNcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxuXG4gICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UubWFya2V0XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYm9ycm93LmFkanVzdF9zaG9ydFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInRyYW5zZmVyLmNsb3NlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICB7Y2FsbE9yZGVyc1xuICAgICAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5zcGxpdChcIi5cIilbMl0gLSBiLnNwbGl0KFwiLlwiKVsyXSlcbiAgICAgICAgICAgICAgICAgICAgLm1hcChpZCA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8TWFyZ2luUG9zaXRpb25XcmFwcGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Q9e2lkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICA8UGxhY2VIb2xkZXJXcmFwcGVyXG4gICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cbiAgICAgICAgICAgICAgICBjYWxsT3JkZXJzPXtJbW11dGFibGUuTGlzdChjYWxsT3JkZXJzKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8dGJvZHk+e2NoaWxkcmVufTwvdGJvZHk+XG4gICAgICAgIDwvdGFibGU+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENvbGxhdGVyYWxUYWJsZTtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHtDb21wb25lbnR9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBQcm9wb3NlZE9wZXJhdGlvbiwge1xyXG4gICAgVHJhbnNhY3Rpb25JREFuZEV4cGlyeVxyXG59IGZyb20gXCJjb21wb25lbnRzL0Jsb2NrY2hhaW4vUHJvcG9zZWRPcGVyYXRpb25cIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcImNvbXBvbmVudHMvVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCJjb21wb25lbnRzL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgUHJvcG9zYWxBcHByb3ZlTW9kYWwsIHtcclxuICAgIGZpbmFsUmVxdWlyZWRQZXJtc1xyXG59IGZyb20gXCIuLi9Nb2RhbC9Qcm9wb3NhbEFwcHJvdmVNb2RhbFwiO1xyXG5pbXBvcnQgTmVzdGVkQXBwcm92YWxTdGF0ZSBmcm9tIFwiLi4vQWNjb3VudC9OZXN0ZWRBcHByb3ZhbFN0YXRlXCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IHB1IGZyb20gXCJjb21tb24vcGVybWlzc2lvbl91dGlsc1wiO1xyXG5pbXBvcnQgTGlua1RvQWNjb3VudEJ5SWQgZnJvbSBcIi4uL1V0aWxpdHkvTGlua1RvQWNjb3VudEJ5SWRcIjtcclxuaW1wb3J0IEFjY291bnRTdG9yZSBmcm9tIFwic3RvcmVzL0FjY291bnRTdG9yZVwiO1xyXG5cclxuY2xhc3MgUHJvcG9zYWxzIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYWNjb3VudDogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnQuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlID0gdGhpcy5mb3JjZVVwZGF0ZS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgKiBBY2NvdW50IG9iamVjdHMgZG9uJ3QgZ2V0IHVwZGF0ZWQgYnkgdW5kZXJseWluZyBwcm9wb3NhbCBjaGFuZ2VzLCBidXRcclxuICAgICAgICAqIHRoZSBDaGFpblN0b3JlIGRvZXMsIHNvIGluIG9yZGVyIHRvIHVwZGF0ZSB0aGlzIGNvbXBvbmVudCB3aGVuIGEgcHJvcG9zYWxcclxuICAgICAgICAqIGNoYW5nZXMsIHdlIG5lZWQgdG8gdXBkYXRlIGl0IHdoZW5ldmVyIHRoZSBDaGFpblN0b3JlIGl0c2VsZiB1cGRhdGVzXHJcbiAgICAgICAgKi9cclxuICAgICAgICBDaGFpblN0b3JlLnN1YnNjcmliZSh0aGlzLmZvcmNlVXBkYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgICAgICBDaGFpblN0b3JlLnVuc3Vic2NyaWJlKHRoaXMuZm9yY2VVcGRhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkFwcHJvdmVNb2RhbChpZCwgYWN0aW9uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVmc1tpZCArIFwiX1wiICsgYWN0aW9uXSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlZnNbaWQgKyBcIl9cIiArIGFjdGlvbl0uc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfY2FuUmVqZWN0KHByb3Bvc2FsKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgcHJvcG9zYWwuYXZhaWxhYmxlX2FjdGl2ZV9hcHByb3ZhbHMubGVuZ3RoIHx8XHJcbiAgICAgICAgICAgIHByb3Bvc2FsLmF2YWlsYWJsZV9vd25lcl9hcHByb3ZhbHMubGVuZ3RoIHx8XHJcbiAgICAgICAgICAgIHByb3Bvc2FsLmF2YWlsYWJsZV9rZXlfYXBwcm92YWxzLmxlbmd0aFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7YWNjb3VudH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGlmICghYWNjb3VudCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIGxldCBwcm9wb3NhbHMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKGFjY291bnQuZ2V0KFwicHJvcG9zYWxzXCIpLnNpemUpIHtcclxuICAgICAgICAgICAgYWNjb3VudC5nZXQoXCJwcm9wb3NhbHNcIikuZm9yRWFjaChwcm9wb3NhbF9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvcG9zYWwgPSBDaGFpblN0b3JlLmdldE9iamVjdChwcm9wb3NhbF9pZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcG9zYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcG9zZWRfdHJhbnNhY3Rpb24gPSBwcm9wb3NhbC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicHJvcG9zZWRfdHJhbnNhY3Rpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wZXJhdGlvbnMgPSBwcm9wb3NlZF90cmFuc2FjdGlvbi5nZXQoXCJvcGVyYXRpb25zXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3Bvc2Fscy5wdXNoKHtvcGVyYXRpb25zLCBhY2NvdW50LCBwcm9wb3NhbH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBwcm9wb3NhbFJvd3MgPSBwcm9wb3NhbHNcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1dGlscy5zb3J0SUQoXHJcbiAgICAgICAgICAgICAgICAgICAgYS5wcm9wb3NhbC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgICAgICBiLnByb3Bvc2FsLmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5yZWR1Y2UoKHJlc3VsdCwgcHJvcG9zYWwsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaXNTY2FtID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHByb3Bvc2FsLnByb3Bvc2FsLmdldChcImlkXCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcG9zZXIgPSBwcm9wb3NhbC5wcm9wb3NhbC5nZXQoXCJwcm9wb3NlclwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyYXRpb24gPSBwcm9wb3NhbC5wcm9wb3NhbC5nZXQoXCJleHBpcmF0aW9uX3RpbWVcIik7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dCA9IHByb3Bvc2FsLm9wZXJhdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAubWFwKChvLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5nZXRJbihbMSwgXCJ0b1wiXSkgPT09IFwiMS4yLjE1MzEyNFwiKSBpc1NjYW0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFByb3Bvc2VkT3BlcmF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWwuZ2V0KFwiaWRcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIl9vcGVyYXRpb25fXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uPXtleHBpcmF0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXtpbmRleH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcD17by50b0pTKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52ZXJ0ZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVGZWU9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU9wTGFiZWw9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUV4cGlyYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlRGF0ZT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbD17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17aWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zZXI9e3Byb3Bvc2VyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50b0FycmF5KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGNhblJlamVjdCA9IHRoaXMuX2NhblJlamVjdChwcm9wb3NhbC5wcm9wb3NhbC50b0pTKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHByb3Bvc2FsSWQgPSBwcm9wb3NhbC5wcm9wb3NhbC5nZXQoXCJpZFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdHlwZSA9IHByb3Bvc2FsLnByb3Bvc2FsLmdldChcInJlcXVpcmVkX2FjdGl2ZV9hcHByb3ZhbHNcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgID8gXCJhY3RpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIDogXCJvd25lclwiO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17YCR7cHJvcG9zYWxJZH1faWRgfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xTcGFuPVwiNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHJvcG9zYWxcIiArIChpbmRleCA9PT0gMCA/IFwiIGZpcnN0XCIgOiBcIlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNhY3Rpb25JREFuZEV4cGlyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtpZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uPXtleHBpcmF0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdmFpbGFibGUgPSBwdS5saXN0VG9JRHMoXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWwuZ2V0KGBhdmFpbGFibGVfJHt0eXBlfV9hcHByb3ZhbHNgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZUtleXMgPSBwdS5saXN0VG9JRHMoXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWwuZ2V0KFwiYXZhaWxhYmxlX2tleV9hcHByb3ZhbHNcIilcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWQgPSBwdS5saXN0VG9JRHMoXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWwuZ2V0KGByZXF1aXJlZF8ke3R5cGV9X2FwcHJvdmFsc2ApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWRQZXJtaXNzaW9ucyA9IHB1LnVubmVzdChyZXF1aXJlZCwgdHlwZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgW2FjY291bnRzLCBrZXlzXSA9IGZpbmFsUmVxdWlyZWRQZXJtcyhcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFBlcm1pc3Npb25zLFxyXG4gICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZSxcclxuICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVLZXlzXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFjY291bnROYW1lcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhY2NvdW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50cy5mb3JFYWNoKGFjY291bnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhcHJvcG9zYWwucHJvcG9zYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KGBhdmFpbGFibGVfJHt0eXBlfV9hcHByb3ZhbHNgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhhY2NvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lcy5wdXNoKGFjY291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5TmFtZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChrZXlzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNNaW5lID0gQWNjb3VudFN0b3JlLmlzTXlLZXkoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNaW5lICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhcHJvcG9zYWwucHJvcG9zYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KFwiYXZhaWxhYmxlX2tleV9hcHByb3ZhbHNcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoa2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleU5hbWVzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhbkFwcHJvdmUgPSBhY2NvdW50TmFtZXMubGVuZ3RoICsga2V5TmFtZXMubGVuZ3RoID4gMDtcclxuXHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChcclxuICAgICAgICAgICAgICAgICAgICA8dHJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidG9wLWxlZnQtYWxpZ25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake3Byb3Bvc2FsSWR9X2NvbnRlbnRgfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnt0ZXh0fTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXF1aXJlZFBlcm1pc3Npb25zLm1hcCgoYWNjb3VudCwgaW5kZXgpID0+IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImxpc3QtaXRlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YCR7cHJvcG9zYWxJZH1fYXBwcm92ZXJfJHtpbmRleH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtUb0FjY291bnRCeUlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJwYWdlPVwicGVybWlzc2lvbnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudC5pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TmVzdGVkQXBwcm92YWxTdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsPXtwcm9wb3NhbC5wcm9wb3NhbC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPXt0eXBlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImFwcHJvdmFsLWJ1dHRvbnNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc1NjYW0gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRpcD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLnByb3Bvc2Vfc2NhbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRvb2x0aXAgaGFzLWVycm9yIHNjYW0tZXJyb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU0NBTVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuQXBwcm92ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5fb25BcHByb3ZlTW9kYWwuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhcHByb3ZlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgpID0+IHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYnV0dG9uIHByaW1hcnkgaG9sbG93XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNhbkFwcHJvdmUgPyBcIlwiIDogXCIgaGlkZGVuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwicHJvcG9zYWwuYXBwcm92ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJvcG9zYWxBcHByb3ZlTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e3Byb3Bvc2FsSWQgKyBcIl9cIiArIFwiYXBwcm92ZVwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsSWQ9e3Byb3Bvc2FsSWQgKyBcIl9cIiArIFwiYXBwcm92ZVwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3Byb3Bvc2FsLmFjY291bnQuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWw9e3Byb3Bvc2FsSWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPVwiYXBwcm92ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NhblJlamVjdCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uQXBwcm92ZU1vZGFsLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWxJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicmVqZWN0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uIHByaW1hcnkgaG9sbG93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInByb3Bvc2FsLnJlamVjdFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQcm9wb3NhbEFwcHJvdmVNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17cHJvcG9zYWxJZCArIFwiX1wiICsgXCJyZWplY3RcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RhbElkPXtwcm9wb3NhbElkICsgXCJfXCIgKyBcInJlamVjdFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3Byb3Bvc2FsLmFjY291bnQuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWw9e3Byb3Bvc2FsSWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPVwicmVqZWN0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChcclxuICAgICAgICAgICAgICAgICAgICA8dHIga2V5PXtgJHtwcm9wb3NhbElkfV9zZXBhcmF0b3JgfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49XCI0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aHIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0sIFtdKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHRhYmxlXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1widGFibGUgcHJvcG9zYWxzIGNvbXBhY3QgXCIgKyB0aGlzLnByb3BzLmNsYXNzTmFtZX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwicHJvcG9zYWwucHJvcG9zYWxzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwicHJvcG9zYWwuYXBwcm92ZXJzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwicHJvcG9zYWwuc3RhdHVzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwicHJvcG9zYWwuYWN0aW9uXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgICAgICAgIDx0Ym9keT57cHJvcG9zYWxSb3dzfTwvdGJvZHk+XHJcbiAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQmluZFRvQ2hhaW5TdGF0ZShQcm9wb3NhbHMpO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBaZkFwaSBmcm9tIFwicmVhY3QtZm91bmRhdGlvbi1hcHBzL3NyYy91dGlscy9mb3VuZGF0aW9uLWFwaVwiO1xyXG5pbXBvcnQgQmFzZU1vZGFsIGZyb20gXCIuL0Jhc2VNb2RhbFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdCBmcm9tIFwiY29tcG9uZW50cy9Gb3Jtcy9BY2NvdW50U2VsZWN0XCI7XHJcbmltcG9ydCBBY2NvdW50U3RvcmUgZnJvbSBcInN0b3Jlcy9BY2NvdW50U3RvcmVcIjtcclxuaW1wb3J0IFdhbGxldERiIGZyb20gXCJzdG9yZXMvV2FsbGV0RGJcIjtcclxuaW1wb3J0IFdhbGxldEFwaSBmcm9tIFwiYXBpL1dhbGxldEFwaVwiO1xyXG5pbXBvcnQgTmVzdGVkQXBwcm92YWxTdGF0ZSBmcm9tIFwiLi4vQWNjb3VudC9OZXN0ZWRBcHByb3ZhbFN0YXRlXCI7XHJcbmltcG9ydCBwdSBmcm9tIFwiY29tbW9uL3Blcm1pc3Npb25fdXRpbHNcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBmaW5hbFJlcXVpcmVkUGVybXMgPSAoXHJcbiAgICByZXF1aXJlZFBlcm1pc3Npb25zLFxyXG4gICAgYXZhaWxhYmxlLFxyXG4gICAgYXZhaWxhYmxlS2V5c1xyXG4pID0+IHtcclxuICAgIGxldCBmaW5hbFJlcXVpcmVkID0gW107XHJcblxyXG4gICAgcmVxdWlyZWRQZXJtaXNzaW9ucy5mb3JFYWNoKGFjY291bnQgPT4ge1xyXG4gICAgICAgIGZpbmFsUmVxdWlyZWQgPSBmaW5hbFJlcXVpcmVkLmNvbmNhdChhY2NvdW50LmdldE1pc3NpbmdTaWdzKGF2YWlsYWJsZSkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IGZpbmFsUmVxdWlyZWRLZXlzID0gW107XHJcblxyXG4gICAgcmVxdWlyZWRQZXJtaXNzaW9ucy5mb3JFYWNoKGFjY291bnQgPT4ge1xyXG4gICAgICAgIGZpbmFsUmVxdWlyZWRLZXlzID0gZmluYWxSZXF1aXJlZEtleXMuY29uY2F0KFxyXG4gICAgICAgICAgICBhY2NvdW50LmdldE1pc3NpbmdLZXlzKGF2YWlsYWJsZUtleXMpXHJcbiAgICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBbZmluYWxSZXF1aXJlZCwgZmluYWxSZXF1aXJlZEtleXNdO1xyXG59O1xyXG5cclxuY2xhc3MgUHJvcG9zYWxBcHByb3ZlTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBhY2NvdW50czogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnRzTGlzdFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgYWN0aXZlOiBudWxsLFxyXG4gICAgICAgICAgICBrZXk6IG51bGwsXHJcbiAgICAgICAgICAgIG93bmVyOiBudWxsLFxyXG4gICAgICAgICAgICBwYXllZTogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgb25BY3RpdmVBY2NvdW50KGFjY291bnRNYXAsIGtleU1hcCwgdHlwZSwgYWNjb3VudCkge1xyXG4gICAgICAgIGxldCBuZXdTdGF0ZSA9IHt9O1xyXG5cclxuICAgICAgICBpZiAoa2V5TWFwW2FjY291bnRdKSB7XHJcbiAgICAgICAgICAgIG5ld1N0YXRlW1wia2V5XCJdID0gYWNjb3VudDtcclxuICAgICAgICAgICAgbmV3U3RhdGVbdHlwZV0gPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYWNjb3VudCkge1xyXG4gICAgICAgICAgICBuZXdTdGF0ZVt0eXBlXSA9IGFjY291bnRNYXBbYWNjb3VudF07XHJcbiAgICAgICAgICAgIG5ld1N0YXRlW1wia2V5XCJdID0gbnVsbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZXdTdGF0ZVt0eXBlXSA9IG51bGw7XHJcbiAgICAgICAgICAgIG5ld1N0YXRlW1wia2V5XCJdID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uUHJvcG9zYWxBY3Rpb24ob2xkUHJvcG9zYWwpIHtcclxuICAgICAgICBsZXQgcHJvcG9zYWxPYmplY3QgPSBvbGRQcm9wb3NhbC50b0pTKCk7XHJcbiAgICAgICAgbGV0IHthY3RpdmUsIGtleSwgb3duZXIsIHBheWVlfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIGxldCBwcm9wb3NhbCA9IHtcclxuICAgICAgICAgICAgZmVlX3BheWluZ19hY2NvdW50OiBwYXllZSB8fCBhY3RpdmUsXHJcbiAgICAgICAgICAgIHByb3Bvc2FsOiBwcm9wb3NhbE9iamVjdC5pZCxcclxuICAgICAgICAgICAgYWN0aXZlX2FwcHJvdmFsc190b19hZGQ6IFtdLFxyXG4gICAgICAgICAgICBhY3RpdmVfYXBwcm92YWxzX3RvX3JlbW92ZTogW10sXHJcbiAgICAgICAgICAgIG93bmVyX2FwcHJvdmFsc190b19hZGQ6IFtdLFxyXG4gICAgICAgICAgICBvd25lcl9hcHByb3ZhbHNfdG9fcmVtb3ZlOiBbXSxcclxuICAgICAgICAgICAga2V5X2FwcHJvdmFsc190b19hZGQ6IFtdLFxyXG4gICAgICAgICAgICBrZXlfYXBwcm92YWxzX3RvX3JlbW92ZTogW11cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgaXNBZGQgPSB0aGlzLnByb3BzLmFjdGlvbiA9PT0gXCJhcHByb3ZlXCI7XHJcblxyXG4gICAgICAgIGxldCBuZWVkZWRLZXlzID0gW107XHJcblxyXG4gICAgICAgIFtcImFjdGl2ZVwiLCBcIm93bmVyXCIsIFwia2V5XCJdLmZvckVhY2goYXV0aF90eXBlID0+IHtcclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5zdGF0ZVthdXRoX3R5cGVdO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBoYXNWYWx1ZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWxPYmplY3RbYGF2YWlsYWJsZV8ke2F1dGhfdHlwZX1fYXBwcm92YWxzYF0uaW5kZXhPZihcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICApICE9PSAtMTtcclxuICAgICAgICAgICAgICAgIGlmICgoaXNBZGQgJiYgIWhhc1ZhbHVlKSB8fCAoIWlzQWRkICYmIGhhc1ZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmFjdGlvbiA9PT0gXCJhcHByb3ZlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWxbYCR7YXV0aF90eXBlfV9hcHByb3ZhbHNfdG9fYWRkYF0gPSBbdmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV0aF90eXBlID09PSBcImtleVwiKSBuZWVkZWRLZXlzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5hY3Rpb24gPT09IFwicmVqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWxbYCR7YXV0aF90eXBlfV9hcHByb3ZhbHNfdG9fcmVtb3ZlYF0gPSBbdmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV0aF90eXBlID09PSBcImtleVwiKSBuZWVkZWRLZXlzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgdHIgPSBXYWxsZXRBcGkubmV3X3RyYW5zYWN0aW9uKCk7XHJcbiAgICAgICAgdHIuYWRkX3R5cGVfb3BlcmF0aW9uKFwicHJvcG9zYWxfdXBkYXRlXCIsIHByb3Bvc2FsKTtcclxuICAgICAgICBXYWxsZXREYi5wcm9jZXNzX3RyYW5zYWN0aW9uKHRyLCBudWxsLCB0cnVlLCBuZWVkZWRLZXlzKTtcclxuXHJcbiAgICAgICAgWmZBcGkucHVibGlzaCh0aGlzLnByb3BzLm1vZGFsSWQsIFwiY2xvc2VcIik7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2VQYXllZShhY2NvdW50KSB7XHJcbiAgICAgICAgbGV0IGZ1bGxBY2NvdW50ID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGFjY291bnQpO1xyXG5cclxuICAgICAgICBpZiAoZnVsbEFjY291bnQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBwYXllZTogZnVsbEFjY291bnQuZ2V0KFwiaWRcIilcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2FuY2VsKCkge1xyXG4gICAgICAgIFpmQXBpLnB1Ymxpc2godGhpcy5wcm9wcy5tb2RhbElkLCBcImNsb3NlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge3Byb3Bvc2FsLCB0eXBlfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGxldCBhY2NvdW50TmFtZXMgPSBbXTtcclxuICAgICAgICBsZXQgYWNjb3VudE1hcCA9IHt9O1xyXG4gICAgICAgIGxldCBpc0FkZCA9IHRoaXMucHJvcHMuYWN0aW9uID09PSBcImFwcHJvdmVcIjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWNjb3VudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudHMuZm9yRWFjaChhY2NvdW50ID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBhY2NvdW50Q2hlY2sgPSBpc0FkZFxyXG4gICAgICAgICAgICAgICAgICAgID8gYWNjb3VudCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgIXByb3Bvc2FsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldChgYXZhaWxhYmxlXyR7dHlwZX1fYXBwcm92YWxzYClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoYWNjb3VudC5nZXQoXCJpZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICA6IGFjY291bnQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldChgYXZhaWxhYmxlXyR7dHlwZX1fYXBwcm92YWxzYClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoYWNjb3VudC5nZXQoXCJpZFwiKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWNjb3VudENoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudE1hcFthY2NvdW50LmdldChcIm5hbWVcIildID0gYWNjb3VudC5nZXQoXCJpZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZXMucHVzaChhY2NvdW50LmdldChcIm5hbWVcIikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBrZXlOYW1lcyA9IFtdO1xyXG4gICAgICAgIGxldCBrZXlNYXAgPSB7fTtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5rZXlzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmtleXMuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGlzTWluZSA9IEFjY291bnRTdG9yZS5pc015S2V5KGtleSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGFzVmFsdWUgPSBwcm9wb3NhbFxyXG4gICAgICAgICAgICAgICAgICAgIC5nZXQoXCJhdmFpbGFibGVfa2V5X2FwcHJvdmFsc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhrZXkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIChpc01pbmUgJiYgaXNBZGQgJiYgIWhhc1ZhbHVlKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIChpc01pbmUgJiYgIWlzQWRkICYmIGhhc1ZhbHVlKVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5TWFwW2tleV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGtleU5hbWVzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbXlBY2NvdW50cyA9IEFjY291bnRTdG9yZS5nZXRNeUFjY291bnRzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxmb3JtIGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgdmVydGljYWwgZnVsbC13aWR0aC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoND57aXNBZGQgPyBcIkFkZCBhcHByb3ZhbFwiIDogXCJSZW1vdmUgYXBwcm92YWxcIn08L2g0PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ1JpZ2h0OiBcIjIwJVwifX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxOZXN0ZWRBcHByb3ZhbFN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWw9e3Byb3Bvc2FsLmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT17dHlwZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FkZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUua2V5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUua2V5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuc3RhdGVbdHlwZV0gfHwgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpc0FkZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUua2V5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUua2V5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuc3RhdGVbdHlwZV0gfHwgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vRmFpbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgZnVsbC13aWR0aC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbC13aWR0aC1jb250ZW50IGZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwibW9kYWwucHJvcG9zYWxzLnBheV93aXRoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJsYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X25hbWVzPXtteUFjY291bnRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlUGF5ZWUuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2FjY291bnROYW1lcy5sZW5ndGggfHwga2V5TmFtZXMubGVuZ3RoID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmdWxsLXdpZHRoLWNvbnRlbnQgZm9ybS1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17YG1vZGFsLnByb3Bvc2Fscy5hcHByb3ZhbF8ke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBZGQgPyBcImFkZFwiIDogXCJyZW1vdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwibGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudF9uYW1lcz17YWNjb3VudE5hbWVzLmNvbmNhdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleU5hbWVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQWN0aXZlQWNjb3VudC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRNYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlNYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtmYWxzZSAmJiBrZXlOYW1lcy5sZW5ndGggPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZ1bGwtd2lkdGgtY29udGVudCBmb3JtLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtgbW9kYWwucHJvcG9zYWxzLmtleV9hcHByb3ZhbF8ke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBZGQgPyBcImFkZFwiIDogXCJyZW1vdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwibGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudF9uYW1lcz17a2V5TmFtZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQWN0aXZlQWNjb3VudC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleU1hcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwia2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblByb3Bvc2FsQWN0aW9uLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtpc0FkZCA/IFwiQXBwcm92ZVwiIDogXCJSZW1vdmVcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkNhbmNlbC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiIGJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5jYW5jZWxcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5Qcm9wb3NhbEFwcHJvdmVNb2RhbCA9IEJpbmRUb0NoYWluU3RhdGUoUHJvcG9zYWxBcHByb3ZlTW9kYWwpO1xyXG5cclxuY2xhc3MgRmlyc3RMZXZlbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFjY291bnQ6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgcHJvcG9zYWw6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlKCk7XHJcblxyXG4gICAgICAgIENoYWluU3RvcmUuc3Vic2NyaWJlKHRoaXMuX3VwZGF0ZVN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgICAgICBDaGFpblN0b3JlLnVuc3Vic2NyaWJlKHRoaXMuX3VwZGF0ZVN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBfdXBkYXRlU3RhdGUoKSB7XHJcbiAgICAgICAgbGV0IHtwcm9wb3NhbCwgYWNjb3VudH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCB0eXBlID0gcHJvcG9zYWwuZ2V0KFwicmVxdWlyZWRfYWN0aXZlX2FwcHJvdmFsc1wiKS5zaXplXHJcbiAgICAgICAgICAgID8gXCJhY3RpdmVcIlxyXG4gICAgICAgICAgICA6IFwib3duZXJcIjtcclxuXHJcbiAgICAgICAgbGV0IHJlcXVpcmVkID0gcHUubGlzdFRvSURzKHByb3Bvc2FsLmdldChgcmVxdWlyZWRfJHt0eXBlfV9hcHByb3ZhbHNgKSk7XHJcbiAgICAgICAgbGV0IGF2YWlsYWJsZSA9IHB1Lmxpc3RUb0lEcyhcclxuICAgICAgICAgICAgcHJvcG9zYWwuZ2V0KGBhdmFpbGFibGVfJHt0eXBlfV9hcHByb3ZhbHNgKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IGF2YWlsYWJsZUtleXMgPSBwdS5saXN0VG9JRHMoXHJcbiAgICAgICAgICAgIHByb3Bvc2FsLmdldChcImF2YWlsYWJsZV9rZXlfYXBwcm92YWxzXCIpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkUGVybWlzc2lvbnM6IHB1LnVubmVzdChyZXF1aXJlZCwgdHlwZSksXHJcbiAgICAgICAgICAgIGF2YWlsYWJsZSxcclxuICAgICAgICAgICAgYXZhaWxhYmxlS2V5cyxcclxuICAgICAgICAgICAgdHlwZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2FjdGlvbn0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCB7cmVxdWlyZWRQZXJtaXNzaW9ucywgYXZhaWxhYmxlLCBhdmFpbGFibGVLZXlzLCB0eXBlfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIGNvbnN0IFtmaW5hbFJlcXVpcmVkLCBmaW5hbFJlcXVpcmVkS2V5c10gPSBmaW5hbFJlcXVpcmVkUGVybXMoXHJcbiAgICAgICAgICAgIHJlcXVpcmVkUGVybWlzc2lvbnMsXHJcbiAgICAgICAgICAgIGF2YWlsYWJsZSxcclxuICAgICAgICAgICAgYXZhaWxhYmxlS2V5c1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxQcm9wb3NhbEFwcHJvdmVNb2RhbFxyXG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgICAgICB0eXBlPXt0eXBlfVxyXG4gICAgICAgICAgICAgICAgYWNjb3VudHM9e2FjdGlvbiA9PT0gXCJhcHByb3ZlXCIgPyBmaW5hbFJlcXVpcmVkIDogYXZhaWxhYmxlfVxyXG4gICAgICAgICAgICAgICAga2V5cz17YWN0aW9uID09PSBcImFwcHJvdmVcIiA/IGZpbmFsUmVxdWlyZWRLZXlzIDogYXZhaWxhYmxlS2V5c31cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbkZpcnN0TGV2ZWwgPSBCaW5kVG9DaGFpblN0YXRlKEZpcnN0TGV2ZWwpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIG9wZW46IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICBaZkFwaS5zdWJzY3JpYmUodGhpcy5wcm9wcy5tb2RhbElkLCAobXNnLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BlbjogZGF0YSA9PT0gXCJvcGVuXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICBaZkFwaS5wdWJsaXNoKHRoaXMucHJvcHMubW9kYWxJZCwgXCJvcGVuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge21vZGFsSWQsIHByb3Bvc2FsfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxCYXNlTW9kYWwgaWQ9e21vZGFsSWR9IG92ZXJsYXk9e3RydWV9IHJlZj17bW9kYWxJZH0+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5vcGVuID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rmlyc3RMZXZlbCB7Li4udGhpcy5wcm9wc30gLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICA8L0Jhc2VNb2RhbD5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCBMaW5rVG9BY2NvdW50QnlJZCBmcm9tIFwiLi4vVXRpbGl0eS9MaW5rVG9BY2NvdW50QnlJZFwiO1xyXG5pbXBvcnQgcHUgZnJvbSBcImNvbW1vbi9wZXJtaXNzaW9uX3V0aWxzXCI7XHJcbmltcG9ydCB7Y2xvbmVEZWVwfSBmcm9tIFwibG9kYXNoLWVzXCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCB7XHJcbiAgICBBdXRob3JpdHlEZXB0aE92ZXJmbG93V2FybmluZyxcclxuICAgIENoaWxkQXV0aG9yaXR5RGVwdGhPdmVyZmxvd1dhcm5pbmcsXHJcbiAgICBQZW5kaW5nLFxyXG4gICAgUmV2aWV3LFxyXG4gICAgRmFpbGVkLFxyXG4gICAgRXhwYW5kQnV0dG9uLFxyXG4gICAgQXBwcm92ZWRJY29uLFxyXG4gICAgS2V5UGVybWlzc2lvbkJyYW5jaCxcclxuICAgIGhhc0F1dGhvcml0eURlcHRoUHJvYmxlbSxcclxuICAgIGlzQXBwcm92ZWQsXHJcbiAgICBzdGF0dXNUZXh0LFxyXG4gICAgbm90TmVzdGRXZWlnaHRcclxufSBmcm9tIFwiLi9OZXN0ZWRBcHByb3ZhbFN0YXRlTGliXCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuXHJcbmNsYXNzIEFjY291bnRQZXJtaXNzaW9uVHJlZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge2V4cGFuZGVkOiAhIXByb3BzLmV4cGFuZGVkfTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYWNjb3VudDogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnQuaXNSZXF1aXJlZCxcclxuICAgICAgICBhY2NvdW50czogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnRzTGlzdCxcclxuICAgICAgICBsZXZlbDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgbGV2ZWw6IDBcclxuICAgIH07XHJcblxyXG4gICAgaGFuZGxlRXhwYW5kVG9nZ2xlID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2V4cGFuZGVkOiAhdGhpcy5zdGF0ZS5leHBhbmRlZH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3Qge1xyXG4gICAgICAgICAgICBhY2NvdW50LFxyXG4gICAgICAgICAgICBhdmFpbGFibGUsXHJcbiAgICAgICAgICAgIGF2YWlsYWJsZUtleXMsXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb24sXHJcbiAgICAgICAgICAgIHRocmVzaG9sZCxcclxuICAgICAgICAgICAgbGV2ZWwsXHJcbiAgICAgICAgICAgIG1heEF1dGhvcml0eURlcHRoLFxyXG4gICAgICAgICAgICBoaWRlUm9vdFxyXG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGNvbnN0IHtleHBhbmRlZH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBjb25zdCBpc09LID0gaXNBcHByb3ZlZChwZXJtaXNzaW9uLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpO1xyXG4gICAgICAgIGNvbnN0IGlzTmVzdGVkID0gcGVybWlzc2lvbi5pc05lc3RlZCgpO1xyXG4gICAgICAgIGNvbnN0IGlzTXVsdGlTaWcgPSBwZXJtaXNzaW9uLmlzTXVsdGlTaWcoKTtcclxuXHJcbiAgICAgICAgY29uc3Qgbm90TmVzdGVkV2VpZ2h0ID1cclxuICAgICAgICAgICAgbm90TmVzdGRXZWlnaHQocGVybWlzc2lvbi53ZWlnaHQsIHRocmVzaG9sZCkgfHwgMTtcclxuXHJcbiAgICAgICAgY29uc3QgbmVzdGVkV2VpZ2h0ID0gc3RhdHVzVGV4dChwZXJtaXNzaW9uLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpO1xyXG5cclxuICAgICAgICBjb25zdCBhdXRob3JpdHlEZXB0aE92ZXJmbG93ID0gbGV2ZWwgPj0gbWF4QXV0aG9yaXR5RGVwdGg7XHJcblxyXG4gICAgICAgIGNvbnN0IHJvb3RQZXJtID1cclxuICAgICAgICAgICAgIWlzTmVzdGVkICYmICFpc011bHRpU2lnID8gKFxyXG4gICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QXBwcm92ZWRJY29uIGFwcHJvdmVkPXtpc09LfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQWNjb3VudEJ5SWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnBhZ2U9XCJwZXJtaXNzaW9uc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IWlzTmVzdGVkICYmIG5vdE5lc3RlZFdlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdE5lc3RlZFdlaWdodCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90TmVzdGVkV2VpZ2h0Lmxlbmd0aCA9PT0gMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJcXHUwMEEwXFx1MDBBMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0ke25vdE5lc3RlZFdlaWdodH0gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QXBwcm92ZWRJY29uIGFwcHJvdmVkPXtpc09LfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQWNjb3VudEJ5SWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnBhZ2U9XCJwZXJtaXNzaW9uc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZXhwYW5kZWQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2lzT0sgPyBcInN1Y2Nlc3MtdGV4dFwiIDogXCJcIn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25vdE5lc3RlZFdlaWdodH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdE5lc3RlZFdlaWdodCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90TmVzdGVkV2VpZ2h0ICYmIG5vdE5lc3RlZFdlaWdodC5sZW5ndGggPT09IDJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlxcdTAwQTBcXHUwMEEwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9JHtub3ROZXN0ZWRXZWlnaHR9IGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEV4cGFuZEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Ub2dnbGU9e3RoaXMuaGFuZGxlRXhwYW5kVG9nZ2xlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kZWQ9e2V4cGFuZGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZXhwYW5kZWQgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYXBwZW5kZWRcIj4oe25lc3RlZFdlaWdodH0pPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7YXV0aG9yaXR5RGVwdGhPdmVyZmxvdyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBdXRob3JpdHlEZXB0aE92ZXJmbG93V2FybmluZyAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXV0aG9yaXR5RGVwdGhQcm9ibGVtKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEF1dGhvcml0eURlcHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFleHBhbmRlZCAmJiA8Q2hpbGRBdXRob3JpdHlEZXB0aE92ZXJmbG93V2FybmluZyAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBzdGF0dXMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKChpc05lc3RlZCB8fCBpc011bHRpU2lnKSAmJiBleHBhbmRlZCkge1xyXG4gICAgICAgICAgICBwZXJtaXNzaW9uLmFjY291bnRzLmZvckVhY2goc3ViQWNjb3VudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICA8Qm91bmRBY2NvdW50UGVybWlzc2lvblRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtzdWJBY2NvdW50LmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXtzdWJBY2NvdW50LmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50cz17c3ViQWNjb3VudC5hY2NvdW50c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbj17c3ViQWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlPXthdmFpbGFibGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZUtleXM9e2F2YWlsYWJsZUtleXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocmVzaG9sZD17cGVybWlzc2lvbi50aHJlc2hvbGR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsPXtsZXZlbCArIDF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heEF1dGhvcml0eURlcHRoPXttYXhBdXRob3JpdHlEZXB0aH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocGVybWlzc2lvbi5rZXlzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbi5rZXlzLmZvckVhY2goa2V5ID0+XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxLZXlQZXJtaXNzaW9uQnJhbmNoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2tleS5pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb249e2tleX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZT17YXZhaWxhYmxlS2V5c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsPXtsZXZlbCArIChoaWRlUm9vdCA/IDAgOiAxKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodD17bm90TmVzdGRXZWlnaHQoa2V5LndlaWdodCwgdGhyZXNob2xkKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc3RhdHVzLmxlbmd0aCA+IDAgPyAoXHJcbiAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgIHtoaWRlUm9vdCB8fCByb290UGVybX1cclxuICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj1cIjNcIiBjbGFzc05hbWU9XCJoZWFkaW5nLXBlcm1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2hpZGVSb290ID8gXCJcIiA6IFwidGFibGUtY29udGFpbmVyXCJ9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlPntzdGF0dXN9PC90YWJsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtleHBhbmRlZCAmJiBsZXZlbCA9PT0gMCAmJiA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlclwiIC8+fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgIDx0Ym9keT57cm9vdFBlcm19PC90Ym9keT5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IEJvdW5kQWNjb3VudFBlcm1pc3Npb25UcmVlID0gQmluZFRvQ2hhaW5TdGF0ZShBY2NvdW50UGVybWlzc2lvblRyZWUpO1xyXG5cclxuY2xhc3MgRmlyc3RMZXZlbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIHJlcXVpcmVkOiBDaGFpblR5cGVzLkNoYWluQWNjb3VudHNMaXN0LFxyXG4gICAgICAgIGF2YWlsYWJsZTogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnRzTGlzdFxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIHR5cGU6IFwiYWN0aXZlXCIsXHJcbiAgICAgICAgYWRkZWQ6IG51bGwsXHJcbiAgICAgICAgcmVtb3ZlZDogbnVsbFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgcmVxdWlyZWRQZXJtaXNzaW9uczogW10sXHJcbiAgICAgICAgICAgIGV4cGFuZGVkOiBwcm9wcy5leHBhbmRlZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUoKTtcclxuXHJcbiAgICAgICAgQ2hhaW5TdG9yZS5zdWJzY3JpYmUodGhpcy5fdXBkYXRlU3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgICAgIENoYWluU3RvcmUudW5zdWJzY3JpYmUodGhpcy5fdXBkYXRlU3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIF91cGRhdGVTdGF0ZSgpIHtcclxuICAgICAgICBsZXQgcmVxdWlyZWQgPSBwdS5saXN0VG9JRHModGhpcy5wcm9wcy5yZXF1aXJlZCk7XHJcbiAgICAgICAgbGV0IGF2YWlsYWJsZSA9IHB1Lmxpc3RUb0lEcyh0aGlzLnByb3BzLmF2YWlsYWJsZSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICByZXF1aXJlZFBlcm1pc3Npb25zOiBwdS51bm5lc3QocmVxdWlyZWQsIHRoaXMucHJvcHMudHlwZSksXHJcbiAgICAgICAgICAgIHJlcXVpcmVkLFxyXG4gICAgICAgICAgICBhdmFpbGFibGVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVFeHBhbmRUb2dnbGUgPSAoKSA9PiB0aGlzLnNldFN0YXRlKHtleHBhbmRlZDogIXRoaXMuc3RhdGUuZXhwYW5kZWR9KTtcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgdHlwZSxcclxuICAgICAgICAgICAgYWRkZWQsXHJcbiAgICAgICAgICAgIHJlbW92ZWQsXHJcbiAgICAgICAgICAgIGF2YWlsYWJsZUtleXMsXHJcbiAgICAgICAgICAgIGdsb2JhbE9iamVjdCxcclxuICAgICAgICAgICAgcmV2aWV3UGVyaW9kVGltZSxcclxuICAgICAgICAgICAgbm9GYWlsXHJcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IHtyZXF1aXJlZFBlcm1pc3Npb25zLCByZXF1aXJlZCwgYXZhaWxhYmxlLCBleHBhbmRlZH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBhdmFpbGFibGUgPSBjbG9uZURlZXAoYXZhaWxhYmxlKTtcclxuICAgICAgICBhdmFpbGFibGVLZXlzID0gYXZhaWxhYmxlS2V5cy50b0pTKCk7XHJcblxyXG4gICAgICAgIGlmIChhZGRlZCkge1xyXG4gICAgICAgICAgICBhdmFpbGFibGUucHVzaChhZGRlZCk7XHJcbiAgICAgICAgICAgIGF2YWlsYWJsZUtleXMucHVzaChhZGRlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVtb3ZlZCkge1xyXG4gICAgICAgICAgICBpZiAoYXZhaWxhYmxlLmluZGV4T2YocmVtb3ZlZCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBhdmFpbGFibGUuc3BsaWNlKGF2YWlsYWJsZS5pbmRleE9mKHJlbW92ZWQpLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYXZhaWxhYmxlS2V5cy5pbmRleE9mKHJlbW92ZWQpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlS2V5cy5zcGxpY2UoYXZhaWxhYmxlS2V5cy5pbmRleE9mKHJlbW92ZWQpLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYXBwcm92ZWRDb3VudCA9IHJlcXVpcmVkUGVybWlzc2lvbnMucmVkdWNlKFxyXG4gICAgICAgICAgICAodG90YWwsIHBlcm0pID0+XHJcbiAgICAgICAgICAgICAgICB0b3RhbCArIChpc0FwcHJvdmVkKHBlcm0sIGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cykgPyAxIDogMCksXHJcbiAgICAgICAgICAgIDBcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IGFwcHJvdmVyc0NvdW50ID0gcmVxdWlyZWRQZXJtaXNzaW9ucy5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgaXNPSyA9IGFwcHJvdmVkQ291bnQgPT09IGFwcHJvdmVyc0NvdW50O1xyXG5cclxuICAgICAgICBjb25zdCBmYWlsZWQgPSBpc09LICYmICFyZXZpZXdQZXJpb2RUaW1lICYmICFub0ZhaWw7XHJcbiAgICAgICAgY29uc3QgcGVuZGluZ1JldmlldyA9IGlzT0sgJiYgcmV2aWV3UGVyaW9kVGltZTtcclxuXHJcbiAgICAgICAgY29uc3QgbWF4QXV0aG9yaXR5RGVwdGggPSBnbG9iYWxPYmplY3RcclxuICAgICAgICAgICAgLmdldChcInBhcmFtZXRlcnNcIilcclxuICAgICAgICAgICAgLmdldChcIm1heF9hdXRob3JpdHlfZGVwdGhcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IG9uZVBlcm0gPSByZXF1aXJlZFBlcm1pc3Npb25zLmxlbmd0aCA9PT0gMTtcclxuICAgICAgICBjb25zdCBvUGVybWlzc2lvbiA9IG9uZVBlcm0gPyByZXF1aXJlZFBlcm1pc3Npb25zWzBdIDogbnVsbDtcclxuXHJcbiAgICAgICAgY29uc3QgbmVzdGVkV2VpZ2h0ID0gIW9uZVBlcm0gJiYgYCR7YXBwcm92ZWRDb3VudH0gLyAke2FwcHJvdmVyc0NvdW50fWA7XHJcblxyXG4gICAgICAgIGNvbnN0IHJvd3MgPSByZXF1aXJlZFBlcm1pc3Npb25zLm1hcChhY2NvdW50ID0+IChcclxuICAgICAgICAgICAgPEJvdW5kQWNjb3VudFBlcm1pc3Npb25UcmVlXHJcbiAgICAgICAgICAgICAgICBrZXk9e2FjY291bnQuaWR9XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50LmlkfVxyXG4gICAgICAgICAgICAgICAgYWNjb3VudHM9e2FjY291bnQuYWNjb3VudHN9XHJcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uPXthY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlPXthdmFpbGFibGV9XHJcbiAgICAgICAgICAgICAgICBhdmFpbGFibGVLZXlzPXthdmFpbGFibGVLZXlzfVxyXG4gICAgICAgICAgICAgICAgZXhwYW5kZWQ9e3RoaXMucHJvcHMuZXhwYW5kZWQgfHwgb25lUGVybX1cclxuICAgICAgICAgICAgICAgIGxldmVsPXswfVxyXG4gICAgICAgICAgICAgICAgbWF4QXV0aG9yaXR5RGVwdGg9e21heEF1dGhvcml0eURlcHRofVxyXG4gICAgICAgICAgICAgICAgaGlkZVJvb3Q9e29uZVBlcm19XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmVzdGVkLWFwcHJvdmFsLXN0YXRlXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvb3Qtc3RhdHVzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge2ZhaWxlZCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPEZhaWxlZCAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBwZW5kaW5nUmV2aWV3ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8UmV2aWV3IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPFBlbmRpbmcgLz5cclxuICAgICAgICAgICAgICAgICAgICApfXtcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICB7IW9QZXJtaXNzaW9uID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4oe25lc3RlZFdlaWdodH0pPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9QZXJtaXNzaW9uLnRocmVzaG9sZCA+IDEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dChvUGVybWlzc2lvbiwgYXZhaWxhYmxlLCBhdmFpbGFibGVLZXlzKVxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgeyghb1Blcm1pc3Npb24gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb1Blcm1pc3Npb24uaXNNdWx0aVNpZygpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9QZXJtaXNzaW9uLmlzTmVzdGVkKCkpICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPEV4cGFuZEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Ub2dnbGU9e3RoaXMuaGFuZGxlRXhwYW5kVG9nZ2xlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kZWQ9e2V4cGFuZGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgeyFleHBhbmRlZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFBlcm1pc3Npb25zLnNvbWUocGVybWlzc2lvbiA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXV0aG9yaXR5RGVwdGhQcm9ibGVtKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEF1dGhvcml0eURlcHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApICYmIDxDaGlsZEF1dGhvcml0eURlcHRoT3ZlcmZsb3dXYXJuaW5nIC8+fVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICB7ZXhwYW5kZWQgJiYgPHRhYmxlPntyb3dzfTwvdGFibGU+fVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbkZpcnN0TGV2ZWwgPSBCaW5kVG9DaGFpblN0YXRlKEZpcnN0TGV2ZWwpO1xyXG5cclxuY2xhc3MgUHJvcG9zYWxXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgcHJvcG9zYWw6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZCxcclxuICAgICAgICB0eXBlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXHJcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICB0eXBlOiBcImFjdGl2ZVwiLFxyXG4gICAgICAgIGFkZGVkOiBudWxsLFxyXG4gICAgICAgIGdsb2JhbE9iamVjdDogXCIyLjAuMFwiXHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge3Byb3Bvc2FsLCB0eXBlfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IGF2YWlsYWJsZSA9IHByb3Bvc2FsLmdldChgYXZhaWxhYmxlXyR7dHlwZX1fYXBwcm92YWxzYCk7XHJcbiAgICAgICAgbGV0IGF2YWlsYWJsZUtleXMgPSBwcm9wb3NhbC5nZXQoXCJhdmFpbGFibGVfa2V5X2FwcHJvdmFsc1wiKTtcclxuICAgICAgICBsZXQgcmVxdWlyZWQgPSBwcm9wb3NhbC5nZXQoYHJlcXVpcmVkXyR7dHlwZX1fYXBwcm92YWxzYCk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxGaXJzdExldmVsXHJcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cclxuICAgICAgICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZH1cclxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZT17YXZhaWxhYmxlfVxyXG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlS2V5cz17YXZhaWxhYmxlS2V5c31cclxuICAgICAgICAgICAgICAgIHJldmlld1BlcmlvZFRpbWU9e3Byb3Bvc2FsLmdldChcInJldmlld19wZXJpb2RfdGltZVwiKX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCaW5kVG9DaGFpblN0YXRlKFByb3Bvc2FsV3JhcHBlcik7XHJcbiIsImltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBJbW11dGFibGUgZnJvbSBcImltbXV0YWJsZVwiO1xyXG5cclxubGV0IEtleUF1dGggPSBmdW5jdGlvbihhdXRoKSB7XHJcbiAgICB0aGlzLmlkID0gYXV0aC50b0pTID8gYXV0aC5nZXQoMCkgOiBhdXRoWzBdO1xyXG4gICAgdGhpcy53ZWlnaHQgPSBhdXRoLnRvSlMgPyBhdXRoLmdldCgxKSA6IGF1dGhbMV07XHJcblxyXG4gICAgdGhpcy5pc0F2YWlsYWJsZSA9IGF1dGhzID0+IHtcclxuICAgICAgICByZXR1cm4gYXV0aHMuaW5jbHVkZXNcclxuICAgICAgICAgICAgPyBhdXRocy5pbmNsdWRlcyh0aGlzLmlkKVxyXG4gICAgICAgICAgICA6IGF1dGhzLmluZGV4T2YodGhpcykgIT09IC0xO1xyXG4gICAgfTtcclxufTtcclxuXHJcbmxldCBwZXJtaXNzaW9uVXRpbHMgPSB7XHJcbiAgICBBY2NvdW50UGVybWlzc2lvbjogZnVuY3Rpb24oYWNjb3VudCwgd2VpZ2h0LCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5pZCA9IGFjY291bnQuZ2V0KFwiaWRcIik7XHJcbiAgICAgICAgdGhpcy53ZWlnaHQgPSB3ZWlnaHQ7XHJcbiAgICAgICAgdGhpcy50aHJlc2hvbGQgPSBhY2NvdW50LmdldEluKFt0eXBlLCBcIndlaWdodF90aHJlc2hvbGRcIl0pO1xyXG4gICAgICAgIHRoaXMuYWNjb3VudHMgPSBbXTtcclxuICAgICAgICB0aGlzLmtleXMgPSBhY2NvdW50XHJcbiAgICAgICAgICAgIC5nZXRJbihbdHlwZSwgXCJrZXlfYXV0aHNcIl0pXHJcbiAgICAgICAgICAgIC5tYXAoYXV0aCA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEtleUF1dGgoYXV0aCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50b0FycmF5KCk7XHJcblxyXG4gICAgICAgIHRoaXMuaXNBdmFpbGFibGUgPSBhdXRocyA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdXRocy5pbmNsdWRlc1xyXG4gICAgICAgICAgICAgICAgPyBhdXRocy5pbmNsdWRlcyh0aGlzLmlkKVxyXG4gICAgICAgICAgICAgICAgOiBhdXRocy5pbmRleE9mKHRoaXMpICE9PSAtMTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl9zdW1XZWlnaHRzID0gYXV0aHMgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNOZXN0ZWQoKSAmJiAhdGhpcy5pc011bHRpU2lnKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzQXZhaWxhYmxlKGF1dGhzKSA/IHRoaXMud2VpZ2h0IDogMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdW0gPSB0aGlzLmFjY291bnRzLnJlZHVjZSgoc3RhdHVzLCBhY2NvdW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGFjY291bnQuX3N1bVdlaWdodHMoYXV0aHMpID8gYWNjb3VudC53ZWlnaHQgOiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9LCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihzdW0gLyB0aGlzLnRocmVzaG9sZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldFN0YXR1cyA9IChhdXRocywga2V5QXV0aHMpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTmVzdGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdW0gPSB0aGlzLl9zdW1XZWlnaHRzKGF1dGhzKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTXVsdGlTaWcoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1bSArPSB0aGlzLnN1bUtleXMoa2V5QXV0aHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1bTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdW0gPSB0aGlzLmFjY291bnRzLnJlZHVjZSgoc3RhdHVzLCBhY2NvdW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXR1cyArIGFjY291bnQuX3N1bVdlaWdodHMoYXV0aHMpO1xyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMua2V5cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdW0gKz0gdGhpcy5zdW1LZXlzKGtleUF1dGhzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5zdW1LZXlzID0ga2V5QXV0aHMgPT4ge1xyXG4gICAgICAgICAgICBsZXQga2V5U3VtID0gdGhpcy5rZXlzLnJlZHVjZSgocywga2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcyArIChrZXkuaXNBdmFpbGFibGUoa2V5QXV0aHMpID8ga2V5LndlaWdodCA6IDApO1xyXG4gICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGtleVN1bTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmlzTmVzdGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2NvdW50cy5sZW5ndGggPiAwO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuaXNNdWx0aVNpZyA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMua2V5cy5yZWR1Y2UoKGZpbmFsLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaW5hbCB8fCBrZXkud2VpZ2h0IDwgdGhpcy50aHJlc2hvbGQ7XHJcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldE1pc3NpbmdTaWdzID0gYXV0aHMgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbWlzc2luZyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgbmVzdGVkID0gW107XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTmVzdGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIG5lc3RlZCA9IHRoaXMuYWNjb3VudHMucmVkdWNlKChhLCBhY2NvdW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuY29uY2F0KGFjY291bnQuZ2V0TWlzc2luZ1NpZ3MoYXV0aHMpKTtcclxuICAgICAgICAgICAgICAgIH0sIFtdKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5pc0F2YWlsYWJsZShhdXRocykpIHtcclxuICAgICAgICAgICAgICAgIG1pc3NpbmcucHVzaCh0aGlzLmlkKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1pc3NpbmcuY29uY2F0KG5lc3RlZCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRNaXNzaW5nS2V5cyA9IGF1dGhzID0+IHtcclxuICAgICAgICAgICAgbGV0IG1pc3NpbmcgPSBbXTtcclxuICAgICAgICAgICAgbGV0IG5lc3RlZCA9IFtdO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5rZXlzLmxlbmd0aCAmJiAodGhpcy5pc05lc3RlZCgpIHx8IHRoaXMuaXNNdWx0aVNpZygpKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWtleS5pc0F2YWlsYWJsZShhdXRocykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWlzc2luZy5wdXNoKGtleS5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTmVzdGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIG5lc3RlZCA9IHRoaXMuYWNjb3VudHMucmVkdWNlKChhLCBhY2NvdW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuY29uY2F0KGFjY291bnQuZ2V0TWlzc2luZ0tleXMoYXV0aHMpKTtcclxuICAgICAgICAgICAgICAgIH0sIFtdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1pc3NpbmcuY29uY2F0KG5lc3RlZCk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgbGlzdFRvSURzOiBmdW5jdGlvbihhY2NvdW50TGlzdCkge1xyXG4gICAgICAgIGxldCBhbGxBY2NvdW50cyA9IFtdO1xyXG5cclxuICAgICAgICBhY2NvdW50TGlzdC5mb3JFYWNoKGFjY291bnQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYWNjb3VudCkge1xyXG4gICAgICAgICAgICAgICAgYWxsQWNjb3VudHMucHVzaChhY2NvdW50LmdldCA/IGFjY291bnQuZ2V0KFwiaWRcIikgOiBhY2NvdW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gYWxsQWNjb3VudHM7XHJcbiAgICB9LFxyXG5cclxuICAgIHVucmF2ZWw6IGZ1bmN0aW9uKGFjY291bnRQZXJtaXNzaW9uLCB0eXBlLCByZWN1cnNpdmVfY291bnQgPSAwKSB7XHJcbiAgICAgICAgaWYgKHJlY3Vyc2l2ZV9jb3VudCA8IDMpIHtcclxuICAgICAgICAgICAgbGV0IGFjY291bnQgPSBDaGFpblN0b3JlLmdldEFjY291bnQoYWNjb3VudFBlcm1pc3Npb24uaWQpO1xyXG4gICAgICAgICAgICBpZiAoYWNjb3VudCAmJiBhY2NvdW50LmdldEluKFt0eXBlLCBcImFjY291bnRfYXV0aHNcIl0pLnNpemUpIHtcclxuICAgICAgICAgICAgICAgIGFjY291bnQuZ2V0SW4oW3R5cGUsIFwiYWNjb3VudF9hdXRoc1wiXSkuZm9yRWFjaChhdXRoID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmVzdGVkQWNjb3VudCA9IENoYWluU3RvcmUuZ2V0QWNjb3VudChhdXRoLmdldCgwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5lc3RlZEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudFBlcm1pc3Npb24uYWNjb3VudHMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5yYXZlbChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgdGhpcy5BY2NvdW50UGVybWlzc2lvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVzdGVkQWNjb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aC5nZXQoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlX2NvdW50ICsgMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYWNjb3VudFBlcm1pc3Npb247XHJcbiAgICB9LFxyXG5cclxuICAgIHVubmVzdDogZnVuY3Rpb24oYWNjb3VudHMsIHR5cGUpIHtcclxuICAgICAgICBsZXQgbWFwID0gW107XHJcbiAgICAgICAgYWNjb3VudHMuZm9yRWFjaChpZCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBmdWxsQWNjb3VudCA9IENoYWluU3RvcmUuZ2V0QWNjb3VudChpZCk7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50UGVybWlzc2lvbiA9IHRoaXMudW5yYXZlbChcclxuICAgICAgICAgICAgICAgIG5ldyB0aGlzLkFjY291bnRQZXJtaXNzaW9uKGZ1bGxBY2NvdW50LCBudWxsLCB0eXBlKSxcclxuICAgICAgICAgICAgICAgIHR5cGVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbWFwLnB1c2goY3VycmVudFBlcm1pc3Npb24pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gbWFwO1xyXG4gICAgfSxcclxuXHJcbiAgICBmbGF0dGVuX2F1dGhzKGF1dGhzLCBleGlzdGluZ0F1dGhzID0gSW1tdXRhYmxlLkxpc3QoKSkge1xyXG4gICAgICAgIGlmICghYXV0aHMuc2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdBdXRocztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGF1dGhzLmZvckVhY2gob3duZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWV4aXN0aW5nQXV0aHMuaW5jbHVkZXMob3duZXIuZ2V0KDApKSkge1xyXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdBdXRocyA9IGV4aXN0aW5nQXV0aHMucHVzaChvd25lci5nZXQoMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nQXV0aHM7XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBwZXJtaXNzaW9uVXRpbHM7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xyXG5pbXBvcnQgUmVhY3RUb29sdGlwIGZyb20gXCJyZWFjdC10b29sdGlwXCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRvb2x0aXAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgUmVhY3RUb29sdGlwLnJlYnVpbGQoKTtcclxuICAgIH1cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB7Y2xhc3NOYW1lLCBjaGlsZHJlbiwgZGF0YVRpcCwgY29udGVudH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1widG9vbHRpcCBcIiArIGNsYXNzTmFtZX1cclxuICAgICAgICAgICAgICAgIGRhdGEtaHRtbD17dHJ1ZX1cclxuICAgICAgICAgICAgICAgIGRhdGEtdGlwPXtkYXRhVGlwIHx8IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShjb250ZW50KX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge2NoaWxkcmVufVxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEF1dGhvcml0eURlcHRoT3ZlcmZsb3dXYXJuaW5nID0gKCkgPT4gKFxyXG4gICAgPFRvb2x0aXBcclxuICAgICAgICBjbGFzc05hbWU9XCJlcnJvciBhcHBlbmRlZFwiXHJcbiAgICAgICAgY29udGVudD1cImV4cGxvcmVyLnByb3Bvc2Fscy5hdXRob3JpdHlfZGVwdGhfd2FybmluZ1wiXHJcbiAgICA+XHJcbiAgICAgICAgLyFcXFxyXG4gICAgPC9Ub29sdGlwPlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IENoaWxkQXV0aG9yaXR5RGVwdGhPdmVyZmxvd1dhcm5pbmcgPSAoKSA9PiAoXHJcbiAgICA8VG9vbHRpcFxyXG4gICAgICAgIGNsYXNzTmFtZT1cImVycm9yIGFwcGVuZGVkXCJcclxuICAgICAgICBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLmNoaWxkcmVuX2F1dGhvcml0eV9kZXB0aF93YXJuaW5nXCJcclxuICAgID5cclxuICAgICAgICAvIVxcXHJcbiAgICA8L1Rvb2x0aXA+XHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgUGVuZGluZyA9ICgpID0+IChcclxuICAgIDxUb29sdGlwIGNsYXNzTmFtZT1cIndhcm5pbmdcIiBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLnBlbmRpbmdfYXBwcm92YWxcIj5cclxuICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5wcm9wb3NhbHMucGVuZGluZ1wiIC8+XHJcbiAgICA8L1Rvb2x0aXA+XHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgUmV2aWV3ID0gKCkgPT4gKFxyXG4gICAgPFRvb2x0aXAgY2xhc3NOYW1lPVwid2FybmluZ1wiIGNvbnRlbnQ9XCJleHBsb3Jlci5wcm9wb3NhbHMucGVuZGluZ19yZXZpZXdcIj5cclxuICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5wcm9wb3NhbHMucmV2aWV3XCIgLz5cclxuICAgIDwvVG9vbHRpcD5cclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBGYWlsZWQgPSAoKSA9PiAoXHJcbiAgICA8VG9vbHRpcCBjbGFzc05hbWU9XCJlcnJvclwiIGNvbnRlbnQ9XCJleHBsb3Jlci5wcm9wb3NhbHMuZmFpbGVkX2V4ZWN1dGVcIj5cclxuICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5wcm9wb3NhbHMuZmFpbGVkXCIgLz5cclxuICAgIDwvVG9vbHRpcD5cclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBFeHBhbmRCdXR0b24gPSAoe29uVG9nZ2xlLCBleHBhbmRlZH0pID0+IChcclxuICAgIDxhIGNsYXNzTmFtZT1cImV4cGFuZC1idXR0b25cIiBvbkNsaWNrPXtvblRvZ2dsZX0+XHJcbiAgICAgICAgW3tleHBhbmRlZCA/IFwiLVwiIDogXCIrXCJ9XVxyXG4gICAgPC9hPlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IEFwcHJvdmVkSWNvbiA9ICh7YXBwcm92ZWR9KSA9PlxyXG4gICAgYXBwcm92ZWQgPyAoXHJcbiAgICAgICAgPEljb25cclxuICAgICAgICAgICAgbmFtZT1cImNoZWNrbWFyay1jaXJjbGVcIlxyXG4gICAgICAgICAgICBzaXplPVwiMXhcIlxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJzdWNjZXNzXCJcclxuICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5jaGVja21hcmtfY2lyY2xlLm9wZXJhdGlvbl9zdWNjZWVkXCJcclxuICAgICAgICAvPlxyXG4gICAgKSA6IChcclxuICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcclxuICAgICAgICAgICAgc2l6ZT1cIjF4XCJcclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZXJyb3JcIlxyXG4gICAgICAgICAgICB0aXRsZT1cImljb25zLmNyb3NzX2NpcmNsZS5vcGVyYXRpb25fZmFpbGVkXCJcclxuICAgICAgICAvPlxyXG4gICAgKTtcclxuXHJcbmV4cG9ydCBjb25zdCBLZXlQZXJtaXNzaW9uQnJhbmNoID0gKHthdmFpbGFibGUsIHBlcm1pc3Npb24sIHdlaWdodCwgbGV2ZWx9KSA9PiAoXHJcbiAgICA8dGJvZHk+XHJcbiAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICA8dGQgY29sU3Bhbj1cIjJcIj5cclxuICAgICAgICAgICAgICAgIDxBcHByb3ZlZEljb24gYXBwcm92ZWQ9e3Blcm1pc3Npb24uaXNBdmFpbGFibGUoYXZhaWxhYmxlKX0gLz5cclxuICAgICAgICAgICAgICAgIHtwZXJtaXNzaW9uLmlkLnN1YnN0cigwLCAyMCAtIDQgKiBsZXZlbCl9Li4uXHJcbiAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZD57d2VpZ2h0fTwvdGQ+XHJcbiAgICAgICAgPC90cj5cclxuICAgIDwvdGJvZHk+XHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgaGFzQXV0aG9yaXR5RGVwdGhQcm9ibGVtID0gKFxyXG4gICAgbWF4QXV0aG9yaXR5RGVwdGgsXHJcbiAgICBwZXJtaXNzaW9uLFxyXG4gICAgbGV2ZWwgPSAwXHJcbikgPT4ge1xyXG4gICAgaWYgKGxldmVsID4gbWF4QXV0aG9yaXR5RGVwdGgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoIXBlcm1pc3Npb24uaXNOZXN0ZWQoKSAmJiAhcGVybWlzc2lvbi5pc011bHRpU2lnKCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBwZXJtaXNzaW9uLmFjY291bnRzLnNvbWUoc3ViQWNjb3VudCA9PlxyXG4gICAgICAgICAgICBoYXNBdXRob3JpdHlEZXB0aFByb2JsZW0obWF4QXV0aG9yaXR5RGVwdGgsIHN1YkFjY291bnQsIGxldmVsICsgMSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFN0YXR1cyA9IChwZXJtaXNzaW9uLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpID0+XHJcbiAgICBwZXJtaXNzaW9uLmFjY291bnRzLnJlZHVjZShcclxuICAgICAgICAoYW1vdW50LCBzdWJQZXJtaXNzaW9uKSA9PlxyXG4gICAgICAgICAgICBhbW91bnQgK1xyXG4gICAgICAgICAgICAoaXNBcHByb3ZlZChzdWJQZXJtaXNzaW9uLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpXHJcbiAgICAgICAgICAgICAgICA/IHN1YlBlcm1pc3Npb24ud2VpZ2h0XHJcbiAgICAgICAgICAgICAgICA6IDApLFxyXG5cclxuICAgICAgICAwXHJcbiAgICApICtcclxuICAgIHBlcm1pc3Npb24ua2V5cy5yZWR1Y2UoXHJcbiAgICAgICAgKGFtb3VudCwga2V5KSA9PlxyXG4gICAgICAgICAgICBhbW91bnQgKyAoa2V5LmlzQXZhaWxhYmxlKGF2YWlsYWJsZUtleXMpID8ga2V5LndlaWdodCA6IDApLFxyXG4gICAgICAgIDBcclxuICAgICk7XHJcblxyXG5leHBvcnQgY29uc3QgaXNBcHByb3ZlZCA9IChwZXJtaXNzaW9uLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpID0+XHJcbiAgICBwZXJtaXNzaW9uLmlzTmVzdGVkKCkgfHwgcGVybWlzc2lvbi5pc011bHRpU2lnKClcclxuICAgICAgICA/IGdldFN0YXR1cyhwZXJtaXNzaW9uLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpID49XHJcbiAgICAgICAgICBwZXJtaXNzaW9uLnRocmVzaG9sZFxyXG4gICAgICAgIDogcGVybWlzc2lvbi5pc0F2YWlsYWJsZShhdmFpbGFibGUpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHN0YXR1c1RleHQgPSAocGVybWlzc2lvbiwgYXZhaWxhYmxlLCBhdmFpbGFibGVLZXlzKSA9PlxyXG4gICAgcGVybWlzc2lvbiAmJiBwZXJtaXNzaW9uLnRocmVzaG9sZCA+IDEwXHJcbiAgICAgICAgPyBgJHt1dGlscy5nZXRfcGVyY2VudGFnZShcclxuICAgICAgICAgICAgICBwZXJtaXNzaW9uLmdldFN0YXR1cyhhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpLFxyXG4gICAgICAgICAgICAgIHBlcm1pc3Npb24udGhyZXNob2xkXHJcbiAgICAgICAgICApfSAvIDEwMCVgXHJcbiAgICAgICAgOiBgJHtwZXJtaXNzaW9uLmdldFN0YXR1cyhhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpfSAvICR7XHJcbiAgICAgICAgICAgICAgcGVybWlzc2lvbi50aHJlc2hvbGRcclxuICAgICAgICAgIH1gO1xyXG5cclxuZXhwb3J0IGNvbnN0IG5vdE5lc3RkV2VpZ2h0ID0gKHdlaWdodCwgdGhyZXNob2xkKSA9PlxyXG4gICAgdGhyZXNob2xkICYmIHRocmVzaG9sZCA+IDEwXHJcbiAgICAgICAgPyB1dGlscy5nZXRfcGVyY2VudGFnZSh3ZWlnaHQsIHRocmVzaG9sZClcclxuICAgICAgICA6IHdlaWdodDtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQge09yZGVyUm93LCBUYWJsZUhlYWRlcn0gZnJvbSBcIi4uL0V4Y2hhbmdlL015T3Blbk9yZGVyc1wiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCBNYXJrZXRzQWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9NYXJrZXRzQWN0aW9uc1wiO1xyXG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQge0xpbWl0T3JkZXJ9IGZyb20gXCJjb21tb24vTWFya2V0Q2xhc3Nlc1wiO1xyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gXCJhbHQtcmVhY3RcIjtcclxuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XHJcbmltcG9ydCBTZXR0aW5nc0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvU2V0dGluZ3NBY3Rpb25zXCI7XHJcbmltcG9ydCBtYXJrZXRVdGlscyBmcm9tIFwiY29tbW9uL21hcmtldF91dGlsc1wiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBQYWdpbmF0ZWRMaXN0IGZyb20gXCIuLi9VdGlsaXR5L1BhZ2luYXRlZExpc3RcIjtcclxuXHJcbmNsYXNzIEFjY291bnRPcmRlcnMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkT3JkZXJzOiBbXSxcclxuICAgICAgICAgICAgZmlsdGVyVmFsdWU6IFwiXCJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIGxldCBjYW5jZWxIZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbmNlbEFsbE9yZGVyc1wiKTtcclxuXHJcbiAgICAgICAgaWYgKGNhbmNlbEhlYWRlcikge1xyXG4gICAgICAgICAgICBjYW5jZWxIZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBvcmRlcnMgPSB0aGlzLl9nZXRGaWx0ZXJlZE9yZGVycy5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVycyA9IG9yZGVycy50b0pTID8gb3JkZXJzLnRvSlMoKSA6IG9yZGVycztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRPcmRlcnM6IG9yZGVyc30pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgY2hlY2tib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIub3JkZXJDYW5jZWxcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94ZXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpdGVtLmNoZWNrZWQpIGl0ZW0uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2dldEZpbHRlcmVkT3JkZXJzKCkge1xyXG4gICAgICAgIGxldCB7ZmlsdGVyVmFsdWV9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgbGV0IG9yZGVycyA9IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJvcmRlcnNcIikgfHwgW107XHJcblxyXG4gICAgICAgIHJldHVybiBvcmRlcnMuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBsZXQgb3JkZXIgPSBDaGFpblN0b3JlLmdldE9iamVjdChpdGVtKS50b0pTKCk7XHJcbiAgICAgICAgICAgIGxldCBiYXNlID0gQ2hhaW5TdG9yZS5nZXRBc3NldChvcmRlci5zZWxsX3ByaWNlLmJhc2UuYXNzZXRfaWQpO1xyXG4gICAgICAgICAgICBsZXQgcXVvdGUgPSBDaGFpblN0b3JlLmdldEFzc2V0KG9yZGVyLnNlbGxfcHJpY2UucXVvdGUuYXNzZXRfaWQpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGJhc2VTeW1ib2wgPSBiYXNlLmdldChcInN5bWJvbFwiKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBsZXQgcXVvdGVTeW1ib2wgPSBxdW90ZS5nZXQoXCJzeW1ib2xcIikudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICBiYXNlU3ltYm9sLmluZGV4T2YoZmlsdGVyVmFsdWUpID4gLTEgfHxcclxuICAgICAgICAgICAgICAgIHF1b3RlU3ltYm9sLmluZGV4T2YoZmlsdGVyVmFsdWUpID4gLTFcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfY2FuY2VsTGltaXRPcmRlcihvcmRlcklELCBlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBNYXJrZXRzQWN0aW9ucy5jYW5jZWxMaW1pdE9yZGVyKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgIG9yZGVySUQsIC8vIG9yZGVyIGlkIHRvIGNhbmNlbFxyXG4gICAgICAgICAgICBmYWxzZSAvLyBEb24ndCBzaG93IG5vcm1hbCBjb25maXJtc1xyXG4gICAgICAgICkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjYW5jZWwgb3JkZXIgZXJyb3I6XCIsIGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NhbmNlbExpbWl0T3JkZXJzKG9yZGVySWQpIHtcclxuICAgICAgICBNYXJrZXRzQWN0aW9ucy5jYW5jZWxMaW1pdE9yZGVycyhcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNlbGVjdGVkT3JkZXJzXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0U2VsZWN0ZWQoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNhbmNlbCBvcmRlcnMgZXJyb3I6XCIsIGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRmxpcChtYXJrZXRJZCkge1xyXG4gICAgICAgIGxldCBzZXR0aW5nID0ge307XHJcbiAgICAgICAgc2V0dGluZ1ttYXJrZXRJZF0gPSAhdGhpcy5wcm9wcy5tYXJrZXREaXJlY3Rpb25zLmdldChtYXJrZXRJZCk7XHJcbiAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZU1hcmtldERpcmVjdGlvbihzZXR0aW5nKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNoZWNrQ2FuY2VsKG9yZGVySWQsIGV2dCkge1xyXG4gICAgICAgIGxldCB7c2VsZWN0ZWRPcmRlcnN9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBsZXQgY2hlY2tlZCA9IGV2dC50YXJnZXQuY2hlY2tlZDtcclxuXHJcbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRPcmRlcnM6IHNlbGVjdGVkT3JkZXJzLmNvbmNhdChbb3JkZXJJZF0pfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGluZGV4ID0gc2VsZWN0ZWRPcmRlcnMuaW5kZXhPZihvcmRlcklkKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE9yZGVyczogc2VsZWN0ZWRPcmRlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIGluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHNlbGVjdGVkT3JkZXJzLnNsaWNlKGluZGV4ICsgMSkpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRGaWx0ZXJWYWx1ZShldnQpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtmaWx0ZXJWYWx1ZTogZXZ0LnRhcmdldC52YWx1ZS50b0xvd2VyQ2FzZSgpfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRTZWxlY3RlZCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZE9yZGVyczogW119KTtcclxuXHJcbiAgICAgICAgbGV0IGNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm9yZGVyQ2FuY2VsXCIpO1xyXG5cclxuICAgICAgICBjaGVja2JveGVzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmNoZWNrZWQpIGl0ZW0uY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbmNlbFNlbGVjdGVkKCkge1xyXG4gICAgICAgIHRoaXMuX2NhbmNlbExpbWl0T3JkZXJzLmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7YWNjb3VudCwgbWFya2V0RGlyZWN0aW9uc30gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCB7ZmlsdGVyVmFsdWUsIHNlbGVjdGVkT3JkZXJzfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IGNhbmNlbCA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQucGVybS5jYW5jZWxcIik7XHJcbiAgICAgICAgbGV0IG1hcmtldHMgPSB7fTtcclxuXHJcbiAgICAgICAgbGV0IG1hcmtldE9yZGVycyA9IHt9O1xyXG5cclxuICAgICAgICBpZiAoIWFjY291bnQuZ2V0KFwib3JkZXJzXCIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG9yZGVycyA9IGFjY291bnQuZ2V0KFwib3JkZXJzXCIpO1xyXG4gICAgICAgIGNvbnN0IG9yZGVyc0NvdW50ID0gb3JkZXJzLnNpemU7XHJcbiAgICAgICAgaWYgKGZpbHRlclZhbHVlKSB7XHJcbiAgICAgICAgICAgIG9yZGVycyA9IHRoaXMuX2dldEZpbHRlcmVkT3JkZXJzLmNhbGwodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvcmRlcnMuZm9yRWFjaChvcmRlcklEID0+IHtcclxuICAgICAgICAgICAgbGV0IG9yZGVyID0gQ2hhaW5TdG9yZS5nZXRPYmplY3Qob3JkZXJJRCkudG9KUygpO1xyXG4gICAgICAgICAgICBsZXQgYmFzZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQob3JkZXIuc2VsbF9wcmljZS5iYXNlLmFzc2V0X2lkKTtcclxuICAgICAgICAgICAgbGV0IHF1b3RlID0gQ2hhaW5TdG9yZS5nZXRBc3NldChvcmRlci5zZWxsX3ByaWNlLnF1b3RlLmFzc2V0X2lkKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChiYXNlICYmIHF1b3RlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXNzZXRzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFtiYXNlLmdldChcImlkXCIpXToge3ByZWNpc2lvbjogYmFzZS5nZXQoXCJwcmVjaXNpb25cIil9LFxyXG4gICAgICAgICAgICAgICAgICAgIFtxdW90ZS5nZXQoXCJpZFwiKV06IHtwcmVjaXNpb246IHF1b3RlLmdldChcInByZWNpc2lvblwiKX1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgYmFzZUlEID0gcGFyc2VJbnQob3JkZXIuc2VsbF9wcmljZS5iYXNlLmFzc2V0X2lkLnNwbGl0KFwiLlwiKVsyXSwgMTApO1xyXG4gICAgICAgICAgICAgICAgLy8gbGV0IHF1b3RlSUQgPSBwYXJzZUludChvcmRlci5zZWxsX3ByaWNlLnF1b3RlLmFzc2V0X2lkLnNwbGl0KFwiLlwiKVsyXSwgMTApO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGxldCBtYXJrZXROYW1lID0gcXVvdGVJRCA+IGJhc2VJRCA/IGAke3F1b3RlLmdldChcInN5bWJvbFwiKX1fJHtiYXNlLmdldChcInN5bWJvbFwiKX1gIDogYCR7YmFzZS5nZXQoXCJzeW1ib2xcIil9XyR7cXVvdGUuZ2V0KFwic3ltYm9sXCIpfWA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7bWFya2V0TmFtZX0gPSBtYXJrZXRVdGlscy5nZXRNYXJrZXROYW1lKGJhc2UsIHF1b3RlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IG1hcmtldERpcmVjdGlvbnMuZ2V0KG1hcmtldE5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghbWFya2V0c1ttYXJrZXROYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0c1ttYXJrZXROYW1lXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogYmFzZS5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2w6IGJhc2UuZ2V0KFwic3ltYm9sXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWNpc2lvbjogYmFzZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBxdW90ZS5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2w6IHF1b3RlLmdldChcInN5bWJvbFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVjaXNpb246IHF1b3RlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldHNbbWFya2V0TmFtZV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHF1b3RlLmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bWJvbDogcXVvdGUuZ2V0KFwic3ltYm9sXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWNpc2lvbjogcXVvdGUuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogYmFzZS5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2w6IGJhc2UuZ2V0KFwic3ltYm9sXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWNpc2lvbjogYmFzZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgbGltaXRPcmRlciA9IG5ldyBMaW1pdE9yZGVyKFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0cyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRzW21hcmtldE5hbWVdLnF1b3RlLmlkXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBtYXJrZXRCYXNlID0gQ2hhaW5TdG9yZS5nZXRBc3NldChcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRzW21hcmtldE5hbWVdLmJhc2UuaWRcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWFya2V0UXVvdGUgPSBDaGFpblN0b3JlLmdldEFzc2V0KFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldHNbbWFya2V0TmFtZV0ucXVvdGUuaWRcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFtYXJrZXRPcmRlcnNbbWFya2V0TmFtZV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRPcmRlcnNbbWFya2V0TmFtZV0gPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBtYXJrZXRPcmRlcnNbbWFya2V0TmFtZV0ucHVzaChcclxuICAgICAgICAgICAgICAgICAgICA8T3JkZXJSb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXttYXJrZXRzW21hcmtldE5hbWVdLmJhc2Uuc3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e29yZGVyLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcj17bGltaXRPcmRlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17bWFya2V0QmFzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU9e21hcmtldFF1b3RlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxfdGV4dD17Y2FuY2VsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93U3ltYm9scz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmVydD17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DYW5jZWw9e3RoaXMuX2NhbmNlbExpbWl0T3JkZXIuYmluZCh0aGlzLCBvcmRlci5pZCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlPXtsaW1pdE9yZGVyLmdldFByaWNlKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhc2hib2FyZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc015QWNjb3VudD17dGhpcy5wcm9wcy5pc015QWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M9e3RoaXMucHJvcHMuc2V0dGluZ3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRmxpcD17dGhpcy5vbkZsaXAuYmluZCh0aGlzLCBtYXJrZXROYW1lKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGVja0NhbmNlbD17dGhpcy5vbkNoZWNrQ2FuY2VsLmJpbmQodGhpcywgb3JkZXIuaWQpfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCB0YWJsZXMgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbWFya2V0IGluIG1hcmtldE9yZGVycykge1xyXG4gICAgICAgICAgICBpZiAobWFya2V0T3JkZXJzW21hcmtldF0ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZXMgPSB0YWJsZXMuY29uY2F0KFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldE9yZGVyc1ttYXJrZXRdLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEucHJvcHMucHJpY2UgLSBiLnByb3BzLnByaWNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgLy8gdGFibGVzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgPHRib2R5IGtleT17bWFya2V0fT5cclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgey8qIHttYXJrZXRJbmRleCA+IDAgPyA8dHI+PHRkIGNvbFNwYW49e3RoaXMucHJvcHMuaXNNeUFjY291bnQgPyBcIjdcIiA6IFwiNlwifT48c3BhbiBzdHlsZT17e3Zpc2liaWxpdHk6IFwiaGlkZGVuXCJ9fT5IPC9zcGFuPjwvdGQ+PC90cj4gOiBudWxsfSAqL31cclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAge21hcmtldE9yZGVyc1ttYXJrZXRdLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHJldHVybiBhLnByb3BzLnByaWNlIC0gYi5wcm9wcy5wcmljZTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgIC8vICk7XHJcbiAgICAgICAgICAgICAgICAvLyBtYXJrZXRJbmRleCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0YWJsZXMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgIC8vICAgICByZXR1cm4gcGFyc2VJbnQoYS5rZXksIDEwKSAtIHBhcnNlSW50KGIua2V5LCAxMCk7XHJcbiAgICAgICAgLy8gfSlcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IG5vLW92ZXJmbG93IG5vLXBhZGRpbmdcIlxyXG4gICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiAxNX19XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLXNlbGVjdG9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge29yZGVycyAmJiBvcmRlcnNDb3VudCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5maWx0ZXJfb3JkZXJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6IFwiNTAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IFwiMWVtXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luQm90dG9tOiBcIjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnNldEZpbHRlclZhbHVlLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAge3NlbGVjdGVkT3JkZXJzLmxlbmd0aCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucmVzZXRTZWxlY3RlZC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnJlc2V0X29yZGVyc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZE9yZGVycy5sZW5ndGggPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNhbmNlbFNlbGVjdGVkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuc3VibWl0X29yZGVyc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPFBhZ2luYXRlZExpc3RcclxuICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZT17MjB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFibGUgdGFibGUtc3RyaXBlZCBkYXNoYm9hcmQtdGFibGUgdGFibGUtaG92ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcj17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZUhlYWRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M9e3RoaXMucHJvcHMuc2V0dGluZ3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXNoYm9hcmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTXlBY2NvdW50PXt0aGlzLnByb3BzLmlzTXlBY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByb3dzPXt0YWJsZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFSb3c9e3RoaXMucHJvcHMuY2hpbGRyZW59XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5BY2NvdW50T3JkZXJzID0gY29ubmVjdChcclxuICAgIEFjY291bnRPcmRlcnMsXHJcbiAgICB7XHJcbiAgICAgICAgbGlzdGVuVG8oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbU2V0dGluZ3NTdG9yZV07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRQcm9wcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG1hcmtldERpcmVjdGlvbnM6IFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKS5tYXJrZXREaXJlY3Rpb25zXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWNjb3VudE9yZGVycztcclxuIiwiaW1wb3J0IHtGZXRjaENoYWlufSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IHtGZWVkUHJpY2UsIEFzc2V0fSBmcm9tIFwiLi9NYXJrZXRDbGFzc2VzXCI7XHJcblxyXG5sZXQgYXN5bmNDYWNoZSA9IHt9O1xyXG5jb25zdCBjaGVja01hcmdpblN0YXR1c1RUTCA9IDYwMDAwICogMTsgLy8gMSBtaW51dGVcclxuXHJcbmZ1bmN0aW9uIGNoZWNrTWFyZ2luU3RhdHVzKGFjY291bnQpIHtcclxuICAgIGlmICghYWNjb3VudCB8fCAoYWNjb3VudCAmJiAhYWNjb3VudC5nZXQoXCJjYWxsX29yZGVyc1wiLCBbXSkuc2l6ZSkpXHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcclxuXHJcbiAgICBjb25zdCBrZXkgPVxyXG4gICAgICAgIGFjY291bnQuZ2V0KFwibmFtZVwiKSArIEpTT04uc3RyaW5naWZ5KGFjY291bnQuZ2V0KFwiY2FsbF9vcmRlcnNcIikpO1xyXG4gICAgaWYgKGFzeW5jQ2FjaGVba2V5XSkge1xyXG4gICAgICAgIGlmIChhc3luY0NhY2hlW2tleV0ucmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYXN5bmNDYWNoZVtrZXldLnJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcclxuICAgICAgICAgICAgYXN5bmNDYWNoZVtrZXldLnF1ZXVlLnB1c2goe3JlcywgcmVqfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XHJcbiAgICAgICAgYXN5bmNDYWNoZVtrZXldID0ge3F1ZXVlOiBbe3JlcywgcmVqfV0sIHJlc3VsdDogbnVsbH07XHJcblxyXG4gICAgICAgIEZldGNoQ2hhaW4oXCJnZXRPYmplY3RcIiwgYWNjb3VudC5nZXQoXCJjYWxsX29yZGVyc1wiKS50b0FycmF5KCkpXHJcbiAgICAgICAgICAgIC50aGVuKGNhbGxfb3JkZXJzID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBhc3NldHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGNhbGxfb3JkZXJzLmZvckVhY2goYSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJhc2VJZCA9IGEuZ2V0SW4oW1wiY2FsbF9wcmljZVwiLCBcImJhc2VcIiwgXCJhc3NldF9pZFwiXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHF1b3RlSWQgPSBhLmdldEluKFtcImNhbGxfcHJpY2VcIiwgXCJxdW90ZVwiLCBcImFzc2V0X2lkXCJdKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXNzZXRzLmluZGV4T2YoYmFzZUlkKSA9PT0gLTEpIGFzc2V0cy5wdXNoKGJhc2VJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFzc2V0cy5pbmRleE9mKHF1b3RlSWQpID09PSAtMSkgYXNzZXRzLnB1c2gocXVvdGVJZCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIEZldGNoQ2hhaW4oXCJnZXRBc3NldFwiLCBhc3NldHMsIDYwMDApLnRoZW4oYXNzZXRzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXNzZXRzTWFwID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRzLmZvckVhY2goYXNzZXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldHNNYXBbYXNzZXQuZ2V0KFwiaWRcIildID0gYXNzZXQudG9KUygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzdGF0dXMgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsX29yZGVycy5mb3JFYWNoKGNvID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRlYnRBc3NldCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHNNYXBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY28uZ2V0SW4oW1wiY2FsbF9wcmljZVwiLCBcInF1b3RlXCIsIFwiYXNzZXRfaWRcIl0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29sbGF0ZXJhbEFzc2V0ID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0c01hcFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjby5nZXRJbihbXCJjYWxsX3ByaWNlXCIsIFwiYmFzZVwiLCBcImFzc2V0X2lkXCJdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNwID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnRBc3NldC5iaXRhc3NldC5jdXJyZW50X2ZlZWQuc2V0dGxlbWVudF9wcmljZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwLmJhc2UuYXNzZXRfaWQgPT09IHNwLnF1b3RlLmFzc2V0X2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNbZGVidEFzc2V0LmlkXSA9IHtyYXRpbzogbnVsbH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29sbGF0ZXJhbCA9IG5ldyBBc3NldCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBjby5nZXQoXCJjb2xsYXRlcmFsXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBjb2xsYXRlcmFsQXNzZXQuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBjb2xsYXRlcmFsQXNzZXQucHJlY2lzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkZWJ0ID0gbmV3IEFzc2V0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGNvLmdldChcImRlYnRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRfaWQ6IGRlYnRBc3NldC5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVjaXNpb246IGRlYnRBc3NldC5wcmVjaXNpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1yID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ0QXNzZXQuYml0YXNzZXQuY3VycmVudF9mZWVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYWludGVuYW5jZV9jb2xsYXRlcmFsX3JhdGlvIC8gMTAwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcmljZSA9IG5ldyBGZWVkUHJpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlT2JqZWN0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ0QXNzZXQuYml0YXNzZXQuY3VycmVudF9mZWVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0dGxlbWVudF9wcmljZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXRfYmFzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidEFzc2V0LmJpdGFzc2V0LmN1cnJlbnRfZmVlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldHRsZW1lbnRfcHJpY2UucXVvdGUuYXNzZXRfaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ0QXNzZXQuYml0YXNzZXQuY3VycmVudF9mZWVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWF4aW11bV9zaG9ydF9zcXVlZXplX3JhdGlvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0czogYXNzZXRzTWFwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdGlvOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXRlcmFsLmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRlYnQuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSkgL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2UudG9SZWFsKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKGN1cnJlbnQucmF0aW8pKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LnJhdGlvIDwgbXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LnN0YXR1c0NsYXNzID0gXCJkYW5nZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudC5yYXRpbyA8IG1yICsgMC41KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5zdGF0dXNDbGFzcyA9IFwid2FybmluZ1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LnN0YXR1c0NsYXNzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1tkZWJ0QXNzZXQuaWRdID0gY3VycmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jQ2FjaGVba2V5XS5xdWV1ZS5mb3JFYWNoKHByb21pc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnJlcyhzdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jQ2FjaGVba2V5XSA9IHtyZXN1bHQ6IHN0YXR1c307XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhc3luY0NhY2hlW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgY2hlY2tNYXJnaW5TdGF0dXNUVEwpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhc3luY0NhY2hlW2tleV0ucXVldWUuZm9yRWFjaChwcm9taXNlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnJlaigpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7Y2hlY2tNYXJnaW5TdGF0dXN9O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBSZWFjdEhpZ2hjaGFydHMgZnJvbSBcInJlYWN0LWhpZ2hjaGFydHNcIjtcclxuaW1wb3J0IFRyZWVtYXAgZnJvbSBcImhpZ2hjaGFydHMvbW9kdWxlcy90cmVlbWFwXCI7XHJcbmltcG9ydCBIZWF0bWFwIGZyb20gXCJoaWdoY2hhcnRzL21vZHVsZXMvaGVhdG1hcFwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcclxuaW1wb3J0IEFsdENvbnRhaW5lciBmcm9tIFwiYWx0LWNvbnRhaW5lclwiO1xyXG5pbXBvcnQgTWFya2V0VXRpbHMgZnJvbSBcImNvbW1vbi9tYXJrZXRfdXRpbHNcIjtcclxuaW1wb3J0IE1hcmtldHNTdG9yZSBmcm9tIFwic3RvcmVzL01hcmtldHNTdG9yZVwiO1xyXG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tIFwic3RvcmVzL1NldHRpbmdzU3RvcmVcIjtcclxuXHJcblRyZWVtYXAoUmVhY3RIaWdoY2hhcnRzLkhpZ2hjaGFydHMpO1xyXG5IZWF0bWFwKFJlYWN0SGlnaGNoYXJ0cy5IaWdoY2hhcnRzKTtcclxuXHJcbmNsYXNzIEFjY291bnRUcmVlbWFwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYXNzZXRzOiBDaGFpblR5cGVzLkNoYWluQXNzZXRzTGlzdCxcclxuICAgICAgICBwcmVmZXJyZWRBc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBhc3NldHM6IFtdLFxyXG4gICAgICAgIHByZWZlcnJlZEFzc2V0OiBcIjEuMy4wXCJcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcykge1xyXG4gICAgLy8gICAgIHJldHVybiAoXHJcbiAgICAvLyAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhuZXh0UHJvcHMuYmFsYW5jZU9iamVjdHMsIHRoaXMucHJvcHMuYmFsYW5jZU9iamVjdHMpIHx8XHJcbiAgICAvLyAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhuZXh0UHJvcHMuYXNzZXRzLCB0aGlzLnByb3BzLmFzc2V0cylcclxuICAgIC8vICAgICApO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICBiYWxhbmNlT2JqZWN0cyxcclxuICAgICAgICAgICAgY29yZV9hc3NldCxcclxuICAgICAgICAgICAgbWFya2V0U3RhdHMsXHJcbiAgICAgICAgICAgIHByZWZlcnJlZEFzc2V0XHJcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGxldCBhY2NvdW50QmFsYW5jZXMgPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAoYmFsYW5jZU9iamVjdHMgJiYgYmFsYW5jZU9iamVjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsZXQgdG90YWxWYWx1ZSA9IDA7XHJcbiAgICAgICAgICAgIGFjY291bnRCYWxhbmNlcyA9IGJhbGFuY2VPYmplY3RzLmZvckVhY2goYmFsYW5jZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWJhbGFuY2UpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGxldCBiYWxhbmNlT2JqZWN0ID1cclxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgYmFsYW5jZSA9PSBcInN0cmluZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gQ2hhaW5TdG9yZS5nZXRPYmplY3QoYmFsYW5jZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBiYWxhbmNlO1xyXG4gICAgICAgICAgICAgICAgbGV0IGFzc2V0X3R5cGUgPSBiYWxhbmNlT2JqZWN0LmdldChcImFzc2V0X3R5cGVcIik7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXNzZXQgPSBDaGFpblN0b3JlLmdldEFzc2V0KGFzc2V0X3R5cGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhc3NldCB8fCAhcHJlZmVycmVkQXNzZXQpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGxldCBhbW91bnQgPSBOdW1iZXIoYmFsYW5jZU9iamVjdC5nZXQoXCJiYWxhbmNlXCIpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVxVmFsdWUgPSBNYXJrZXRVdGlscy5jb252ZXJ0VmFsdWUoXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHByZWZlcnJlZEFzc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldFN0YXRzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvcmVfYXNzZXRcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFlcVZhbHVlKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKFxyXG4gICAgICAgICAgICAgICAgICAgIHByZWZlcnJlZEFzc2V0LmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHRvdGFsVmFsdWUgKz0gZXFWYWx1ZSAvIHByZWNpc2lvbjtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBhY2NvdW50QmFsYW5jZXMgPSBiYWxhbmNlT2JqZWN0c1xyXG4gICAgICAgICAgICAgICAgLm1hcCgoYmFsYW5jZSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWJhbGFuY2UpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBiYWxhbmNlT2JqZWN0ID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGJhbGFuY2UgPT0gXCJzdHJpbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBDaGFpblN0b3JlLmdldE9iamVjdChiYWxhbmNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBiYWxhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhc3NldF90eXBlID0gYmFsYW5jZU9iamVjdC5nZXQoXCJhc3NldF90eXBlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQoYXNzZXRfdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhc3NldCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFtb3VudCA9IE51bWJlcihiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIikpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlcVZhbHVlID0gTWFya2V0VXRpbHMuY29udmVydFZhbHVlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZlcnJlZEFzc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0U3RhdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfYXNzZXRcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVxVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsVmFsdWUgPSBlcVZhbHVlIC8gcHJlY2lzaW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcmNlbnQgPSAoZmluYWxWYWx1ZSAvIHRvdGFsVmFsdWUpICogMTAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgKiBGaWx0ZXIgb3V0IGFzc2V0cyB0aGF0IG1ha2UgdXAgYSBzbWFsbCBwZXJjZW50YWdlIG9mXHJcbiAgICAgICAgICAgICAgICAqIHRoZSB0b3RhbCB2YWx1ZSBvZiB0aGUgYWNjb3VudFxyXG4gICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAocGVyY2VudCA8IDAuNSkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaW5hbFZhbHVlID49IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGAke2Fzc2V0LmdldChcInN5bWJvbFwiKX0gKCR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFZhbHVlID09PSAwID8gMCA6IHBlcmNlbnQudG9GaXhlZCgyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9JSlgLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZmluYWxWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IFJlYWN0SGlnaGNoYXJ0cy5IaWdoY2hhcnRzLmdldE9wdGlvbnMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbG9yc1tpbmRleF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKG4gPT4gISFuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgYWNjb3VudEJhbGFuY2VzICYmXHJcbiAgICAgICAgICAgIGFjY291bnRCYWxhbmNlcy5sZW5ndGggPT09IDEgJiZcclxuICAgICAgICAgICAgYWNjb3VudEJhbGFuY2VzWzBdLnZhbHVlID09PSAwXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGFjY291bnRCYWxhbmNlcyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY29uZmlnID0ge1xyXG4gICAgICAgICAgICBjaGFydDoge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoMjU1LCAwLCAwLCAwKVwiLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyNTAsXHJcbiAgICAgICAgICAgICAgICBzcGFjaW5nTGVmdDogMCxcclxuICAgICAgICAgICAgICAgIHNwYWNpbmdSaWdodDogMCxcclxuICAgICAgICAgICAgICAgIHNwYWNpbmdCb3R0b206IDBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gY29sb3JBeGlzOiB7XHJcbiAgICAgICAgICAgIC8vICAgICBtaW46IDAsXHJcbiAgICAgICAgICAgIC8vICAgICBtaW5Db2xvcjogXCIjZmZmZmZmXCIsXHJcbiAgICAgICAgICAgIC8vICAgICBtYXhDb2xvcjogUmVhY3RIaWdoY2hhcnRzLkhpZ2hjaGFydHMuZ2V0T3B0aW9ucygpLmNvbG9yc1swXVxyXG4gICAgICAgICAgICAvLyB9LFxyXG4gICAgICAgICAgICBjcmVkaXRzOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsZWdlbmQ6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBsb3RPcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICB0cmVlbWFwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50Rm9ybWF0dGVyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgPGI+JHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH08L2I+OiAke1JlYWN0SGlnaGNoYXJ0cy5IaWdoY2hhcnRzLm51bWJlckZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9ICR7cHJlZmVycmVkQXNzZXQuZ2V0KFwic3ltYm9sXCIpfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNlcmllczogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidHJlZW1hcFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGxldmVsczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dEFsZ29yaXRobTogXCJzbGljZUFuZERpY2VcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFMYWJlbHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogYWNjb3VudEJhbGFuY2VzXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIHRpdGxlOiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjY291bnQtdHJlZW1hcFwiPlxyXG4gICAgICAgICAgICAgICAgPFJlYWN0SGlnaGNoYXJ0cyBjb25maWc9e2NvbmZpZ30gLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuQWNjb3VudFRyZWVtYXAgPSBCaW5kVG9DaGFpblN0YXRlKEFjY291bnRUcmVlbWFwKTtcclxuXHJcbmNsYXNzIEFjY291bnRUcmVlbWFwQmFsYW5jZVdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBiYWxhbmNlT2JqZWN0czogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdHNMaXN0LFxyXG4gICAgICAgIGNvcmVfYXNzZXQ6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgYmFsYW5jZU9iamVjdHM6IFtdLFxyXG4gICAgICAgIGNvcmVfYXNzZXQ6IFwiMS4zLjBcIlxyXG4gICAgfTtcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IGFzc2V0cyA9IHRoaXMucHJvcHMuYmFsYW5jZU9iamVjdHMuZmlsdGVyKGEgPT4gISFhKS5tYXAoYSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLmdldChcImFzc2V0X3R5cGVcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPEFjY291bnRUcmVlbWFwXHJcbiAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldD17dGhpcy5wcm9wcy5zZXR0aW5ncy5nZXQoXCJ1bml0XCIsIFwiMS4zLjBcIil9XHJcbiAgICAgICAgICAgICAgICBhc3NldHM9e2Fzc2V0c31cclxuICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkFjY291bnRUcmVlbWFwQmFsYW5jZVdyYXBwZXIgPSBCaW5kVG9DaGFpblN0YXRlKEFjY291bnRUcmVlbWFwQmFsYW5jZVdyYXBwZXIpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWNjb3VudFRyZWVtYXBXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8QWx0Q29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICBzdG9yZXM9e1tTZXR0aW5nc1N0b3JlLCBNYXJrZXRzU3RvcmVdfVxyXG4gICAgICAgICAgICAgICAgaW5qZWN0PXt7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0U3RhdHM6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcmtldHNTdG9yZS5nZXRTdGF0ZSgpLmFsbE1hcmtldFN0YXRzO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKS5zZXR0aW5ncztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8QWNjb3VudFRyZWVtYXBCYWxhbmNlV3JhcHBlclxyXG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlZj17dGhpcy5wcm9wcy5yZWZDYWxsYmFja31cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvQWx0Q29udGFpbmVyPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgZGVib3VuY2VSZW5kZXIgZnJvbSBcInJlYWN0LWRlYm91bmNlLXJlbmRlclwiO1xyXG5pbXBvcnQgQmFsYW5jZUNvbXBvbmVudCBmcm9tIFwiLi4vVXRpbGl0eS9CYWxhbmNlQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7QmFsYW5jZVZhbHVlQ29tcG9uZW50fSBmcm9tIFwiLi4vVXRpbGl0eS9FcXVpdmFsZW50VmFsdWVDb21wb25lbnRcIjtcclxuaW1wb3J0IHtNYXJrZXQyNEhvdXJDaGFuZ2VDb21wb25lbnR9IGZyb20gXCIuLi9VdGlsaXR5L01hcmtldENoYW5nZUNvbXBvbmVudFwiO1xyXG5pbXBvcnQgQXNzZXRJbWFnZSBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldEltYWdlXCI7XHJcbmltcG9ydCBhc3NldFV0aWxzIGZyb20gXCJjb21tb24vYXNzZXRfdXRpbHNcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQge0xpbmt9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XHJcbmltcG9ydCBFcXVpdmFsZW50UHJpY2UgZnJvbSBcIi4uL1V0aWxpdHkvRXF1aXZhbGVudFByaWNlXCI7XHJcbmltcG9ydCBMaW5rVG9Bc3NldEJ5SWQgZnJvbSBcIi4uL1V0aWxpdHkvTGlua1RvQXNzZXRCeUlkXCI7XHJcbmltcG9ydCBCb3Jyb3dNb2RhbCBmcm9tIFwiLi4vTW9kYWwvQm9ycm93TW9kYWxcIjtcclxuaW1wb3J0IFJlYWN0VG9vbHRpcCBmcm9tIFwicmVhY3QtdG9vbHRpcFwiO1xyXG5pbXBvcnQge2dldEJhY2tlZENvaW59IGZyb20gXCJjb21tb24vZ2F0ZXdheVV0aWxzXCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCB7Y29ubmVjdH0gZnJvbSBcImFsdC1yZWFjdFwiO1xyXG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tIFwic3RvcmVzL1NldHRpbmdzU3RvcmVcIjtcclxuaW1wb3J0IEdhdGV3YXlTdG9yZSBmcm9tIFwic3RvcmVzL0dhdGV3YXlTdG9yZVwiO1xyXG5pbXBvcnQgTWFya2V0c1N0b3JlIGZyb20gXCJzdG9yZXMvTWFya2V0c1N0b3JlXCI7XHJcbmltcG9ydCBJY29uIGZyb20gXCIuLi9JY29uL0ljb25cIjtcclxuaW1wb3J0IFB1bHNlSWNvbiBmcm9tIFwiLi4vSWNvbi9QdWxzZUljb25cIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IFNlbmRNb2RhbCBmcm9tIFwiLi4vTW9kYWwvU2VuZE1vZGFsXCI7XHJcbmltcG9ydCBTZXR0aW5nc0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvU2V0dGluZ3NBY3Rpb25zXCI7XHJcbmltcG9ydCBTZXR0bGVNb2RhbCBmcm9tIFwiLi4vTW9kYWwvU2V0dGxlTW9kYWxcIjtcclxuaW1wb3J0IERlcG9zaXRNb2RhbCBmcm9tIFwiLi4vTW9kYWwvRGVwb3NpdE1vZGFsXCI7XHJcbmltcG9ydCBTaW1wbGVEZXBvc2l0V2l0aGRyYXcgZnJvbSBcIi4uL0Rhc2hib2FyZC9TaW1wbGVEZXBvc2l0V2l0aGRyYXdcIjtcclxuaW1wb3J0IFNpbXBsZURlcG9zaXRCbG9ja3RyYWRlc0JyaWRnZSBmcm9tIFwiLi4vRGFzaGJvYXJkL1NpbXBsZURlcG9zaXRCbG9ja3RyYWRlc0JyaWRnZVwiO1xyXG5pbXBvcnQgV2l0aGRyYXdNb2RhbCBmcm9tIFwiLi4vTW9kYWwvV2l0aGRyYXdNb2RhbE5ld1wiO1xyXG5pbXBvcnQgWmZBcGkgZnJvbSBcInJlYWN0LWZvdW5kYXRpb24tYXBwcy9zcmMvdXRpbHMvZm91bmRhdGlvbi1hcGlcIjtcclxuaW1wb3J0IFJlc2VydmVBc3NldE1vZGFsIGZyb20gXCIuLi9Nb2RhbC9SZXNlcnZlQXNzZXRNb2RhbFwiO1xyXG5pbXBvcnQgQmFzZU1vZGFsIGZyb20gXCIuLi9Nb2RhbC9CYXNlTW9kYWxcIjtcclxuaW1wb3J0IFBhZ2luYXRlZExpc3QgZnJvbSBcIi4uL1V0aWxpdHkvUGFnaW5hdGVkTGlzdFwiO1xyXG5pbXBvcnQgTWFya2V0VXRpbHMgZnJvbSBcImNvbW1vbi9tYXJrZXRfdXRpbHNcIjtcclxuXHJcbmNsYXNzIEFjY291bnRQb3J0Zm9saW9MaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHNldHRsZUFzc2V0OiBcIjEuMy4wXCIsXHJcbiAgICAgICAgICAgIGRlcG9zaXRBc3NldDogbnVsbCxcclxuICAgICAgICAgICAgd2l0aGRyYXdBc3NldDogbnVsbCxcclxuICAgICAgICAgICAgYnJpZGdlQXNzZXQ6IG51bGwsXHJcbiAgICAgICAgICAgIGFsbFJlZnNBc3NpZ25lZDogZmFsc2VcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnF0eVJlZnMgPSB7fTtcclxuICAgICAgICB0aGlzLnByaWNlUmVmcyA9IHt9O1xyXG4gICAgICAgIHRoaXMudmFsdWVSZWZzID0ge307XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VSZWZzID0ge307XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMuc29ydEZ1bmN0aW9ucykge1xyXG4gICAgICAgICAgICB0aGlzLnNvcnRGdW5jdGlvbnNba2V5XSA9IHRoaXMuc29ydEZ1bmN0aW9uc1trZXldLmJpbmQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2NoZWNrUmVmQXNzaWdubWVudHMgPSB0aGlzLl9jaGVja1JlZkFzc2lnbm1lbnRzLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMucmVmQ2hlY2tJbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMuX2NoZWNrUmVmQXNzaWdubWVudHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5yZWZDaGVja0ludGVydmFsKTtcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tSZWZBc3NpZ25tZW50cygpIHtcclxuICAgICAgICAvKlxyXG4gICAgICAgICogSW4gb3JkZXIgZm9yIHNvcnRpbmcgdG8gd29yayBhbGwgcmVmcyBtdXN0IGJlIGFzc2lnbmVkLCBzbyB3ZSBjaGVja1xyXG4gICAgICAgICogdGhpcyBoZXJlIGFuZCB1cGRhdGUgdGhlIHN0YXRlIHRvIHRyaWdnZXIgYSByZXJlbmRlclxyXG4gICAgICAgICovXHJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmFsbFJlZnNBc3NpZ25lZCkge1xyXG4gICAgICAgICAgICBsZXQgcmVmS2V5cyA9IFtcInF0eVJlZnNcIiwgXCJwcmljZVJlZnNcIiwgXCJ2YWx1ZVJlZnNcIiwgXCJjaGFuZ2VSZWZzXCJdO1xyXG4gICAgICAgICAgICBjb25zdCBhbGxSZWZzQXNzaWduZWQgPSByZWZLZXlzLnJlZHVjZSgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEgPT09IHVuZGVmaW5lZCkgcmV0dXJuICEhT2JqZWN0LmtleXModGhpc1tiXSkubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhT2JqZWN0LmtleXModGhpc1tiXSkubGVuZ3RoICYmIGE7XHJcbiAgICAgICAgICAgIH0sIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIGlmIChhbGxSZWZzQXNzaWduZWQpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5yZWZDaGVja0ludGVydmFsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2FsbFJlZnNBc3NpZ25lZH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShucCwgbnMpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobnMsIHRoaXMuc3RhdGUpIHx8XHJcbiAgICAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhucC5iYWNrZWRDb2lucywgdGhpcy5wcm9wcy5iYWNrZWRDb2lucykgfHxcclxuICAgICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KG5wLmJhbGFuY2VzLCB0aGlzLnByb3BzLmJhbGFuY2VzKSB8fFxyXG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobnAuYmFsYW5jZUxpc3QsIHRoaXMucHJvcHMuYmFsYW5jZUxpc3QpIHx8XHJcbiAgICAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhcclxuICAgICAgICAgICAgICAgIG5wLm9wdGlvbmFsQXNzZXRzLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vcHRpb25hbEFzc2V0c1xyXG4gICAgICAgICAgICApIHx8XHJcbiAgICAgICAgICAgIG5wLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudCB8fFxyXG4gICAgICAgICAgICBucC52aXNpYmxlICE9PSB0aGlzLnByb3BzLnZpc2libGUgfHxcclxuICAgICAgICAgICAgbnAuc2V0dGluZ3MgIT09IHRoaXMucHJvcHMuc2V0dGluZ3MgfHxcclxuICAgICAgICAgICAgbnAuaGlkZGVuQXNzZXRzICE9PSB0aGlzLnByb3BzLmhpZGRlbkFzc2V0cyB8fFxyXG4gICAgICAgICAgICBucC5zb3J0RGlyZWN0aW9uICE9PSB0aGlzLnByb3BzLnNvcnREaXJlY3Rpb24gfHxcclxuICAgICAgICAgICAgbnAuc29ydEtleSAhPT0gdGhpcy5wcm9wcy5zb3J0S2V5IHx8XHJcbiAgICAgICAgICAgIG5wLmFsbE1hcmtldFN0YXRzLnJlZHVjZSgoYSwgdmFsdWUsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICB1dGlscy5jaGVja19tYXJrZXRfc3RhdHMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFsbE1hcmtldFN0YXRzLmdldChrZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgKSB8fCBhXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9LCBmYWxzZSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHNvcnRGdW5jdGlvbnMgPSB7XHJcbiAgICAgICAgcXR5OiBmdW5jdGlvbihhLCBiLCBmb3JjZSkge1xyXG4gICAgICAgICAgICBpZiAoTnVtYmVyKHRoaXMucXR5UmVmc1thLmtleV0pIDwgTnVtYmVyKHRoaXMucXR5UmVmc1tiLmtleV0pKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc29ydERpcmVjdGlvbiB8fCBmb3JjZSA/IC0xIDogMTtcclxuXHJcbiAgICAgICAgICAgIGlmIChOdW1iZXIodGhpcy5xdHlSZWZzW2Eua2V5XSkgPiBOdW1iZXIodGhpcy5xdHlSZWZzW2Iua2V5XSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5zb3J0RGlyZWN0aW9uIHx8IGZvcmNlID8gMSA6IC0xO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWxwaGFiZXRpYzogZnVuY3Rpb24oYSwgYiwgZm9yY2UpIHtcclxuICAgICAgICAgICAgaWYgKGEua2V5ID4gYi5rZXkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5zb3J0RGlyZWN0aW9uIHx8IGZvcmNlID8gMSA6IC0xO1xyXG4gICAgICAgICAgICBpZiAoYS5rZXkgPCBiLmtleSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnNvcnREaXJlY3Rpb24gfHwgZm9yY2UgPyAtMSA6IDE7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJpY2VWYWx1ZTogZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgICAgICBsZXQgYVByaWNlID0gdGhpcy5wcmljZVJlZnNbYS5rZXldO1xyXG4gICAgICAgICAgICBsZXQgYlByaWNlID0gdGhpcy5wcmljZVJlZnNbYi5rZXldO1xyXG4gICAgICAgICAgICBpZiAoYVByaWNlICYmIGJQcmljZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc29ydERpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgID8gYVByaWNlIC0gYlByaWNlXHJcbiAgICAgICAgICAgICAgICAgICAgOiBiUHJpY2UgLSBhUHJpY2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYVByaWNlID09PSBudWxsICYmIGJQcmljZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYVByaWNlICE9PSBudWxsICYmIGJQcmljZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc29ydEZ1bmN0aW9ucy5hbHBoYWJldGljKGEsIGIsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b3RhbFZhbHVlOiBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgIGxldCBhVmFsdWUgPSB0aGlzLnZhbHVlUmVmc1thLmtleV07XHJcbiAgICAgICAgICAgIGxldCBiVmFsdWUgPSB0aGlzLnZhbHVlUmVmc1tiLmtleV07XHJcbiAgICAgICAgICAgIGlmIChhVmFsdWUgJiYgYlZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5zb3J0RGlyZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgPyBhVmFsdWUgLSBiVmFsdWVcclxuICAgICAgICAgICAgICAgICAgICA6IGJWYWx1ZSAtIGFWYWx1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghYVZhbHVlICYmIGJWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYVZhbHVlICYmICFiVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNvcnRGdW5jdGlvbnMuYWxwaGFiZXRpYyhhLCBiLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hhbmdlVmFsdWU6IGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgbGV0IGFWYWx1ZSA9IHRoaXMuY2hhbmdlUmVmc1thLmtleV07XHJcbiAgICAgICAgICAgIGxldCBiVmFsdWUgPSB0aGlzLmNoYW5nZVJlZnNbYi5rZXldO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFWYWx1ZSAmJiBiVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBhQ2hhbmdlID1cclxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGFWYWx1ZSkgIT0gXCJOYU5cIiA/IHBhcnNlRmxvYXQoYVZhbHVlKSA6IGFWYWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCBiQ2hhbmdlID1cclxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGJWYWx1ZSkgIT0gXCJOYU5cIiA/IHBhcnNlRmxvYXQoYlZhbHVlKSA6IGJWYWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb24gPVxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiB0aGlzLnByb3BzLnNvcnREaXJlY3Rpb24gIT09IFwidW5kZWZpbmVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLnNvcnREaXJlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBkaXJlY3Rpb24gPyBhQ2hhbmdlIC0gYkNoYW5nZSA6IGJDaGFuZ2UgLSBhQ2hhbmdlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0cmlnZ2VyU2VuZChhc3NldCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlbmRfYXNzZXQ6IGFzc2V0fSwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZW5kX21vZGFsKSB0aGlzLnNlbmRfbW9kYWwuc2hvdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblNldHRsZUFzc2V0KGlkLCBlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBzZXR0bGVBc3NldDogaWRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWZzLnNldHRsZW1lbnRfbW9kYWwuc2hvdygpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oaWRlQXNzZXQoYXNzZXQsIHN0YXR1cykge1xyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5oaWRlQXNzZXQoYXNzZXQsIHN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2J1cm5Bc3NldChhc3NldCwgZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtyZXNlcnZlOiBhc3NldH0pO1xyXG4gICAgICAgIFpmQXBpLnB1Ymxpc2goXCJyZXNlcnZlX2Fzc2V0XCIsIFwib3BlblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2hvd0RlcG9zaXRNb2RhbChhc3NldCwgZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtkZXBvc2l0QXNzZXQ6IGFzc2V0fSwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlZnMuZGVwb3NpdF9tb2RhbF9uZXcuc2hvdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9zaG93RGVwb3NpdFdpdGhkcmF3KGFjdGlvbiwgYXNzZXQsIGZpYXRNb2RhbCwgZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBbYWN0aW9uID09PSBcImJyaWRnZV9tb2RhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgPyBcImJyaWRnZUFzc2V0XCJcclxuICAgICAgICAgICAgICAgICAgICA6IGFjdGlvbiA9PT0gXCJkZXBvc2l0X21vZGFsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcImRlcG9zaXRBc3NldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJ3aXRoZHJhd0Fzc2V0XCJdOiBhc3NldCxcclxuICAgICAgICAgICAgICAgIGZpYXRNb2RhbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnNbYWN0aW9uXS5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRTZXBhcmF0b3IocmVuZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlbmRlciA/IDxzcGFuPiZuYnNwO3wmbmJzcDs8L3NwYW4+IDogbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBfcmVuZGVyQnV5ID0gKHN5bWJvbCwgY2FuQnV5LCBhc3NldE5hbWUsIGVtcHR5Q2VsbCwgYmFsYW5jZSkgPT4ge1xyXG4gICAgICAgIGlmIChzeW1ib2wgPT09IFwiQlRTXCIgJiYgYmFsYW5jZSA8PSAxMDAwMDApIHtcclxuICAgICAgICAgICAgLy8gUHJlY2lzaW9uIG9mIDUsIDEgPSAxMF41XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9zaG93RGVwb3NpdFdpdGhkcmF3LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJicmlkZ2VfbW9kYWxcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8UHVsc2VJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkljb249XCJkb2xsYXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmSWNvbj1cImRvbGxhci1ncmVlblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmRvbGxhci5idXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb249ezEwMDB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FuQnV5ICYmIHRoaXMucHJvcHMuaXNNeUFjY291bnQgPyAoXHJcbiAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9zaG93RGVwb3NpdFdpdGhkcmF3LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJicmlkZ2VfbW9kYWxcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRvbGxhclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmRvbGxhci5idXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICBlbXB0eUNlbGxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIF9yZW5kZXJCYWxhbmNlcyhiYWxhbmNlTGlzdCwgb3B0aW9uYWxBc3NldHMsIHZpc2libGUpIHtcclxuICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgIGNvcmVTeW1ib2wsXHJcbiAgICAgICAgICAgIHByZWZlcnJlZFVuaXQsXHJcbiAgICAgICAgICAgIHNldHRpbmdzLFxyXG4gICAgICAgICAgICBoaWRkZW5Bc3NldHMsXHJcbiAgICAgICAgICAgIG9yZGVyc1xyXG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCBzaG93QXNzZXRQZXJjZW50ID0gc2V0dGluZ3MuZ2V0KFwic2hvd0Fzc2V0UGVyY2VudFwiLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlbmRlckJvcnJvdyA9IChhc3NldCwgYWNjb3VudCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaXNCaXRBc3NldCA9IGFzc2V0ICYmIGFzc2V0LmhhcyhcImJpdGFzc2V0X2RhdGFfaWRcIik7XHJcbiAgICAgICAgICAgIGxldCBtb2RhbFJlZiA9IFwiY3BfbW9kYWxfXCIgKyBhc3NldC5nZXQoXCJpZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGlzQml0QXNzZXQsXHJcbiAgICAgICAgICAgICAgICBib3Jyb3dNb2RhbDogIWlzQml0QXNzZXQgPyBudWxsIDogKFxyXG4gICAgICAgICAgICAgICAgICAgIDxCb3Jyb3dNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9e21vZGFsUmVmfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbElkPXtcImJvcnJvd19tb2RhbF9cIiArIGFzc2V0LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdW90ZV9hc3NldD17YXNzZXQuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tpbmdfYXNzZXQ9e2Fzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3B0aW9uc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG9ydF9iYWNraW5nX2Fzc2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBib3Jyb3dMaW5rOiAhaXNCaXRBc3NldCA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3RUb29sdGlwLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmc1ttb2RhbFJlZl0uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkb2xsYXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5kb2xsYXIuYm9ycm93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGVtcHR5Q2VsbCA9IFwiLVwiO1xyXG4gICAgICAgIGJhbGFuY2VMaXN0LmZvckVhY2goYmFsYW5jZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBiYWxhbmNlT2JqZWN0ID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QoYmFsYW5jZSk7XHJcbiAgICAgICAgICAgIGlmICghYmFsYW5jZU9iamVjdCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBsZXQgYXNzZXRfdHlwZSA9IGJhbGFuY2VPYmplY3QuZ2V0KFwiYXNzZXRfdHlwZVwiKTtcclxuICAgICAgICAgICAgbGV0IGFzc2V0ID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QoYXNzZXRfdHlwZSk7XHJcbiAgICAgICAgICAgIGlmICghYXNzZXQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGxldCBkaXJlY3RNYXJrZXRMaW5rLCBzZXR0bGVMaW5rLCB0cmFuc2Zlckxpbms7XHJcbiAgICAgICAgICAgIGxldCBzeW1ib2wgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYXNzZXROYW1lID0gYXNzZXQuZ2V0KFwic3ltYm9sXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBub3RDb3JlID0gYXNzZXQuZ2V0KFwiaWRcIikgIT09IFwiMS4zLjBcIjtcclxuICAgICAgICAgICAgY29uc3Qgbm90Q29yZVByZWZVbml0ID0gcHJlZmVycmVkVW5pdCAhPT0gY29yZVN5bWJvbDtcclxuXHJcbiAgICAgICAgICAgIGxldCB7bWFya2V0fSA9IGFzc2V0VXRpbHMucGFyc2VEZXNjcmlwdGlvbihcclxuICAgICAgICAgICAgICAgIGFzc2V0LmdldEluKFtcIm9wdGlvbnNcIiwgXCJkZXNjcmlwdGlvblwiXSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgc3ltYm9sID0gYXNzZXQuZ2V0KFwic3ltYm9sXCIpO1xyXG4gICAgICAgICAgICBpZiAoc3ltYm9sLmluZGV4T2YoXCJPUEVOLlwiKSAhPT0gLTEgJiYgIW1hcmtldCkgbWFya2V0ID0gXCJVU0RcIjtcclxuICAgICAgICAgICAgaWYgKFtcIlJVREVYLkdPTE9TXCIsIFwiUlVERVguR0JHXCJdLmluZGV4T2Yoc3ltYm9sKSAhPT0gLTEpXHJcbiAgICAgICAgICAgICAgICBtYXJrZXQgPSBcIlJVQkxFXCI7XHJcbiAgICAgICAgICAgIC8vIGxldCBwcmVmZXJyZWRNYXJrZXQgPSBtYXJrZXQgPyBtYXJrZXQgOiBwcmVmZXJyZWRVbml0O1xyXG4gICAgICAgICAgICBsZXQgcHJlZmVycmVkTWFya2V0ID0gbWFya2V0ID8gbWFya2V0IDogY29yZVN5bWJvbDtcclxuXHJcbiAgICAgICAgICAgIC8qIFRhYmxlIGNvbnRlbnQgKi9cclxuICAgICAgICAgICAgZGlyZWN0TWFya2V0TGluayA9IG5vdENvcmUgPyAoXHJcbiAgICAgICAgICAgICAgICA8TGluayB0bz17YC9tYXJrZXQvJHthc3NldC5nZXQoXCJzeW1ib2xcIil9XyR7cHJlZmVycmVkTWFya2V0fWB9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0cmFkZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMudHJhZGUudHJhZGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICkgOiBub3RDb3JlUHJlZlVuaXQgPyAoXHJcbiAgICAgICAgICAgICAgICA8TGluayB0bz17YC9tYXJrZXQvJHthc3NldC5nZXQoXCJzeW1ib2xcIil9XyR7cHJlZmVycmVkVW5pdH1gfT5cclxuICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwidHJhZGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLnRyYWRlLnRyYWRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgZW1wdHlDZWxsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRyYW5zZmVyTGluayA9IChcclxuICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL3RyYW5zZmVyP2Fzc2V0PSR7YXNzZXQuZ2V0KFwiaWRcIil9YH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInRyYW5zZmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy50cmFuc2ZlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB7aXNCaXRBc3NldCwgYm9ycm93TW9kYWwsIGJvcnJvd0xpbmt9ID0gcmVuZGVyQm9ycm93KFxyXG4gICAgICAgICAgICAgICAgYXNzZXQsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnRcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIC8qIFBvcG92ZXIgY29udGVudCAqL1xyXG4gICAgICAgICAgICBzZXR0bGVMaW5rID0gKFxyXG4gICAgICAgICAgICAgICAgPGEgb25DbGljaz17dGhpcy5fb25TZXR0bGVBc3NldC5iaW5kKHRoaXMsIGFzc2V0LmdldChcImlkXCIpKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInNldHRsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMuc2V0dGxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaW5jbHVkZUFzc2V0ID0gIWhpZGRlbkFzc2V0cy5pbmNsdWRlcyhhc3NldF90eXBlKTtcclxuICAgICAgICAgICAgY29uc3QgaGFzQmFsYW5jZSA9ICEhYmFsYW5jZU9iamVjdC5nZXQoXCJiYWxhbmNlXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXNPbk9yZGVyID0gISFvcmRlcnNbYXNzZXRfdHlwZV07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBiYWNrZWRDb2luID0gZ2V0QmFja2VkQ29pbihcclxuICAgICAgICAgICAgICAgIGFzc2V0LmdldChcInN5bWJvbFwiKSxcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYmFja2VkQ29pbnNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgLy8gY29uc3QgY2FuRGVwb3NpdCA9XHJcbiAgICAgICAgICAgIC8vICAgICAoYmFja2VkQ29pbiAmJiBiYWNrZWRDb2luLmRlcG9zaXRBbGxvd2VkKSB8fFxyXG4gICAgICAgICAgICAvLyAgICAgYXNzZXQuZ2V0KFwic3ltYm9sXCIpID09IFwiQlRTXCI7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbkRlcG9zaXQgPSBmYWxzZTsgLy8gZGlzYWJsZSB0aWxsIHN0YWJsZSB2ZXJzaW9uXHJcblxyXG4gICAgICAgICAgICAvLyBjb25zdCBjYW5XaXRoZHJhdyA9XHJcbiAgICAgICAgICAgIC8vICAgICBiYWNrZWRDb2luICYmXHJcbiAgICAgICAgICAgIC8vICAgICBiYWNrZWRDb2luLndpdGhkcmF3YWxBbGxvd2VkICYmXHJcbiAgICAgICAgICAgIC8vICAgICAoaGFzQmFsYW5jZSAmJiBiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIikgIT0gMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbldpdGhkcmF3ID0gZmFsc2U7IC8vIGRpc2FibGUgdGlsbCBzdGFibGUgdmVyc2lvblxyXG5cclxuICAgICAgICAgICAgY29uc3QgY2FuQnV5ID0gISF0aGlzLnByb3BzLmJyaWRnZUNvaW5zLmdldChzeW1ib2wpO1xyXG4gICAgICAgICAgICBjb25zdCBhc3NldEFtb3VudCA9IGJhbGFuY2VPYmplY3QuZ2V0KFwiYmFsYW5jZVwiKTtcclxuXHJcbiAgICAgICAgICAgIC8qIFNvcnRpbmcgcmVmcyAqL1xyXG4gICAgICAgICAgICB0aGlzLnF0eVJlZnNbYXNzZXQuZ2V0KFwic3ltYm9sXCIpXSA9IHV0aWxzLmdldF9hc3NldF9hbW91bnQoXHJcbiAgICAgICAgICAgICAgICBhc3NldEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFzc2V0XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvKiBBc3NldCBhbmQgQmFja2luZyBBc3NldCBQcmVmaXhlcyAqL1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBvcHRpb25zID1cclxuICAgICAgICAgICAgICAgIGFzc2V0ICYmIGFzc2V0LmdldEluKFtcImJpdGFzc2V0XCIsIFwib3B0aW9uc1wiXSlcclxuICAgICAgICAgICAgICAgICAgICA/IGFzc2V0LmdldEluKFtcImJpdGFzc2V0XCIsIFwib3B0aW9uc1wiXSkudG9KUygpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgICAgICBsZXQgYmFja2luZ0Fzc2V0ID1cclxuICAgICAgICAgICAgICAgIG9wdGlvbnMgJiYgb3B0aW9ucy5zaG9ydF9iYWNraW5nX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgPyBDaGFpblN0b3JlLmdldEFzc2V0KG9wdGlvbnMuc2hvcnRfYmFja2luZ19hc3NldClcclxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICAgIGxldCB7aXNCaXRBc3NldDogaXNBc3NldEJpdEFzc2V0fSA9IHV0aWxzLnJlcGxhY2VOYW1lKGFzc2V0KTtcclxuICAgICAgICAgICAgbGV0IHtpc0JpdEFzc2V0OiBpc0JhY2tpbmdCaXRBc3NldH0gPSB1dGlscy5yZXBsYWNlTmFtZShcclxuICAgICAgICAgICAgICAgIGJhY2tpbmdBc3NldFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgbGV0IHByZWZlcnJlZEFzc2V0ID0gQ2hhaW5TdG9yZS5nZXRBc3NldChwcmVmZXJyZWRVbml0KTtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZVJlZnNbYXNzZXQuZ2V0KFwic3ltYm9sXCIpXSA9XHJcbiAgICAgICAgICAgICAgICBoYXNCYWxhbmNlICYmICEhcHJlZmVycmVkQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICA/IE1hcmtldFV0aWxzLmNvbnZlcnRWYWx1ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldEFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFsbE1hcmtldFN0YXRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY29yZUFzc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnByaWNlUmVmc1thc3NldC5nZXQoXCJzeW1ib2xcIildID0gIXByZWZlcnJlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgICAgIDogTWFya2V0VXRpbHMuZ2V0RmluYWxQcmljZShcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY29yZUFzc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgYXNzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldCxcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWxsTWFya2V0U3RhdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbWFya2V0SWQgPSBhc3NldC5nZXQoXCJzeW1ib2xcIikgKyBcIl9cIiArIHByZWZlcnJlZFVuaXQ7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50TWFya2V0U3RhdHMgPSB0aGlzLnByb3BzLmFsbE1hcmtldFN0YXRzLmdldChtYXJrZXRJZCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlUmVmc1thc3NldC5nZXQoXCJzeW1ib2xcIildID1cclxuICAgICAgICAgICAgICAgIGN1cnJlbnRNYXJrZXRTdGF0cyAmJiBjdXJyZW50TWFya2V0U3RhdHMuY2hhbmdlXHJcbiAgICAgICAgICAgICAgICAgICAgPyBjdXJyZW50TWFya2V0U3RhdHMuY2hhbmdlXHJcbiAgICAgICAgICAgICAgICAgICAgOiAwO1xyXG5cclxuICAgICAgICAgICAgYmFsYW5jZXMucHVzaChcclxuICAgICAgICAgICAgICAgIDx0ciBrZXk9e2Fzc2V0LmdldChcInN5bWJvbFwiKX0gc3R5bGU9e3ttYXhXaWR0aDogXCIxMDByZW1cIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0SW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VOb25lVG9CdHM9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg9ezMwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17YXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQXNzZXRCeUlkIGFzc2V0PXthc3NldC5nZXQoXCJpZFwiKX0gLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtoYXNCYWxhbmNlIHx8IGhhc09uT3JkZXIgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QmFsYW5jZUNvbXBvbmVudCBiYWxhbmNlPXtiYWxhbmNlfSBoaWRlX2Fzc2V0IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8RXF1aXZhbGVudFByaWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tQXNzZXQ9e2Fzc2V0LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVsc2F0ZT17e3JldmVyc2U6IHRydWUsIGZpbGw6IFwiZm9yd2FyZHNcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX3N5bWJvbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPE1hcmtldDI0SG91ckNoYW5nZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17YXNzZXQuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZT17cHJlZmVycmVkVW5pdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldElkPXttYXJrZXRJZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfc3ltYm9sc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7aGFzQmFsYW5jZSB8fCBoYXNPbk9yZGVyID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhbGFuY2VWYWx1ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2U9e2JhbGFuY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9Bc3NldD17cHJlZmVycmVkVW5pdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIHtzaG93QXNzZXRQZXJjZW50ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2hhc0JhbGFuY2UgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhbGFuY2VDb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZT17YmFsYW5jZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNQZXJjZW50YWdlPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+e3RyYW5zZmVyTGlua308L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuX3JlbmRlckJ1eShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcInN5bWJvbFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJ1eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5Q2VsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VPYmplY3QuZ2V0KFwiYmFsYW5jZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Y2FuRGVwb3NpdCAmJiB0aGlzLnByb3BzLmlzTXlBY2NvdW50ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tjdXJzb3I6IFwicG9pbnRlclwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRlcG9zaXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmRlcG9zaXQuZGVwb3NpdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTR4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fc2hvd0RlcG9zaXRNb2RhbC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eUNlbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2NhbldpdGhkcmF3ICYmIHRoaXMucHJvcHMuaXNNeUFjY291bnQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9eyFjYW5XaXRoZHJhdyA/IFwiZGlzYWJsZWRcIiA6IFwiXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuV2l0aGRyYXdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX3Nob3dEZXBvc2l0V2l0aGRyYXcuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2l0aGRyYXdfbW9kYWxfbmV3XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoKSA9PiB7fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIndpdGhkcmF3XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMud2l0aGRyYXdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eUNlbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD57ZGlyZWN0TWFya2V0TGlua308L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2lzQml0QXNzZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5saW5lLWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwiYm90dG9tXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRpcD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAuYm9ycm93XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthc3NldDogc3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2JvcnJvd0xpbmt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2JvcnJvd01vZGFsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eUNlbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2lzQml0QXNzZXQgJiYgYmFja2luZ0Fzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlubGluZS1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1wbGFjZT1cImJvdHRvbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLnNldHRsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldDogaXNBc3NldEJpdEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJpdFwiICsgc3ltYm9sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzeW1ib2wsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNraW5nQXNzZXQ6IGlzQmFja2luZ0JpdEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJpdFwiICsgYmFja2luZ0Fzc2V0LmdldChcInN5bWJvbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYmFja2luZ0Fzc2V0LmdldChcInN5bWJvbFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRsZURlbGF5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZm9yY2Vfc2V0dGxlbWVudF9kZWxheV9zZWMgL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDM2MDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NldHRsZUxpbmt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5Q2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcImNlbnRlclwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeyFpc0JpdEFzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpblJpZ2h0OiAwfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9idXJuQXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuZ2V0KFwiaWRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJmaXJlXCIgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcImNlbnRlclwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwiYm90dG9tXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGluY2x1ZGVBc3NldCA/IFwiaGlkZV9hc3NldFwiIDogXCJzaG93X2Fzc2V0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5SaWdodDogMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVBc3NldCA/IFwib3JkZXItY2FuY2VsXCIgOiBcImFjdGlvbi1wbHVzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX2hpZGVBc3NldC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRfdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImNyb3NzLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwicGx1cy1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImljb25zLmNyb3NzX2NpcmNsZS5oaWRlX2Fzc2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJpY29ucy5wbHVzX2NpcmNsZS5zaG93X2Fzc2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbmFsQXNzZXRzKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbmFsQXNzZXRzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGFzc2V0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaXNBdmFpbGFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJhY2tlZENvaW5zLmdldChcIk9QRU5cIiwgW10pLmZvckVhY2goY29pbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2luICYmIGNvaW4uc3ltYm9sID09PSBhc3NldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBdmFpbGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcm9wcy5icmlkZ2VDb2lucy5nZXQoYXNzZXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXZhaWxhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGtlZXAgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzLmZvckVhY2goYSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhLmtleSA9PT0gYXNzZXQpIGtlZXAgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2VlcCAmJiBpc0F2YWlsYWJsZTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZm9yRWFjaChhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXNzZXQgPSBDaGFpblN0b3JlLmdldEFzc2V0KGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhc3NldCAmJiB0aGlzLnByb3BzLmlzTXlBY2NvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluY2x1ZGVBc3NldCA9ICFoaWRkZW5Bc3NldHMuaW5jbHVkZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJpZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGhpc0Fzc2V0TmFtZSA9IGFzc2V0LmdldChcInN5bWJvbFwiKS5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbkRlcG9zaXQgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgISF0aGlzLnByb3BzLmJhY2tlZENvaW5zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldChcIk9QRU5cIiwgW10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPT4gYS5iYWNraW5nQ29pblR5cGUgPT09IHRoaXNBc3NldE5hbWVbMV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIXRoaXMucHJvcHMuYmFja2VkQ29pbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KFwiUlVERVhcIiwgW10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPT4gYS5iYWNraW5nQ29pbiA9PT0gdGhpc0Fzc2V0TmFtZVsxXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcInN5bWJvbFwiKSA9PSBcIkJUU1wiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuQnV5ID0gISF0aGlzLnByb3BzLmJyaWRnZUNvaW5zLmdldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcInN5bWJvbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90Q29yZSA9IGFzc2V0LmdldChcImlkXCIpICE9PSBcIjEuMy4wXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB7bWFya2V0fSA9IGFzc2V0VXRpbHMucGFyc2VEZXNjcmlwdGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldEluKFtcIm9wdGlvbnNcIiwgXCJkZXNjcmlwdGlvblwiXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuZ2V0KFwic3ltYm9sXCIpLmluZGV4T2YoXCJPUEVOLlwiKSAhPT0gLTEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFtYXJrZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0ID0gXCJVU0RcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHByZWZlcnJlZE1hcmtldCA9IG1hcmtldCA/IG1hcmtldCA6IGNvcmVTeW1ib2w7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlyZWN0TWFya2V0TGluayA9IG5vdENvcmUgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvPXtgL21hcmtldC8ke2Fzc2V0LmdldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzeW1ib2xcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XyR7cHJlZmVycmVkTWFya2V0fWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInRyYWRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy50cmFkZS50cmFkZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5Q2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNCaXRBc3NldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcnJvd01vZGFsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9ycm93TGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ID0gcmVuZGVyQm9ycm93KGFzc2V0LCB0aGlzLnByb3BzLmFjY291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5jbHVkZUFzc2V0ICYmIHZpc2libGUpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIWluY2x1ZGVBc3NldCAmJiAhdmlzaWJsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZXMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXthc3NldC5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWF4V2lkdGg6IFwiMTAwcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0SW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlTm9uZVRvQnRzPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aD17MzB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17YXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rVG9Bc3NldEJ5SWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17YXNzZXQuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2VtcHR5Q2VsbH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlbXB0eUNlbGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2VtcHR5Q2VsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZW1wdHlDZWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2VtcHR5Q2VsbH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwiY2VudGVyXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjYW5CdXkgJiYgdGhpcy5wcm9wcy5pc015QWNjb3VudCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3Nob3dEZXBvc2l0V2l0aGRyYXcuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYnJpZGdlX21vZGFsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZG9sbGFyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmRvbGxhci5idXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eUNlbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjYW5EZXBvc2l0ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmlzTXlBY2NvdW50ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tjdXJzb3I6IFwicG9pbnRlclwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkZXBvc2l0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMuZGVwb3NpdC5kZXBvc2l0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTR4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3Nob3dEZXBvc2l0TW9kYWwuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcInN5bWJvbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5Q2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntlbXB0eUNlbGx9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcImNlbnRlclwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGlyZWN0TWFya2V0TGlua31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lzQml0QXNzZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwiYm90dG9tXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5ib3Jyb3dcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthc3NldDogYXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2JvcnJvd0xpbmt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtib3Jyb3dNb2RhbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlDZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2VtcHR5Q2VsbH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcImNlbnRlclwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJib3R0b21cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5jbHVkZUFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiaGlkZV9hc3NldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwic2hvd19hc3NldFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpblJpZ2h0OiAwfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJvcmRlci1jYW5jZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImFjdGlvbi1wbHVzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5faGlkZUFzc2V0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImNyb3NzLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcInBsdXMtY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiaWNvbnMuY3Jvc3NfY2lyY2xlLmhpZGVfYXNzZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJpY29ucy5wbHVzX2NpcmNsZS5zaG93X2Fzc2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBiYWxhbmNlcy5zb3J0KHRoaXMuc29ydEZ1bmN0aW9uc1t0aGlzLnByb3BzLnNvcnRLZXldKTtcclxuICAgICAgICByZXR1cm4gYmFsYW5jZXM7XHJcbiAgICB9XHJcblxyXG4gICAgX3JlbmRlclNlbmRNb2RhbCgpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8U2VuZE1vZGFsXHJcbiAgICAgICAgICAgICAgICBpZD1cInNlbmRfbW9kYWxfcG9ydGZvbGlvXCJcclxuICAgICAgICAgICAgICAgIHJlZkNhbGxiYWNrPXtlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZSkgdGhpcy5zZW5kX21vZGFsID0gZTtcclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICBmcm9tX25hbWU9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpfVxyXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ9e3RoaXMuc3RhdGUuc2VuZF9hc3NldCB8fCBcIjEuMy4wXCJ9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVuZGVyU2V0dGxlTW9kYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPFNldHRsZU1vZGFsXHJcbiAgICAgICAgICAgICAgICByZWY9XCJzZXR0bGVtZW50X21vZGFsXCJcclxuICAgICAgICAgICAgICAgIG1vZGFsSWQ9XCJzZXR0bGVtZW50X21vZGFsXCJcclxuICAgICAgICAgICAgICAgIGFzc2V0PXt0aGlzLnN0YXRlLnNldHRsZUFzc2V0fVxyXG4gICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5wcm9wcy5hY2NvdW50LmdldChcIm5hbWVcIil9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFdpdGhkcmF3QXNzZXQgPVxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmJhY2tlZENvaW5zLmdldChcIk9QRU5cIiwgW10pLmZpbmQoYyA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYy5zeW1ib2wgPT09IHRoaXMuc3RhdGUud2l0aGRyYXdBc3NldDtcclxuICAgICAgICAgICAgfSkgfHwge307XHJcbiAgICAgICAgY29uc3QgY3VycmVudEJyaWRnZXMgPVxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmJyaWRnZUNvaW5zLmdldCh0aGlzLnN0YXRlLmJyaWRnZUFzc2V0KSB8fCBudWxsO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPFBhZ2luYXRlZExpc3RcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmc6IDB9fVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRhYmxlIGRhc2hib2FyZC10YWJsZSB0YWJsZS1ob3ZlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgcm93cz17dGhpcy5fcmVuZGVyQmFsYW5jZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYmFsYW5jZUxpc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub3B0aW9uYWxBc3NldHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudmlzaWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyPXt0aGlzLnByb3BzLmhlYWRlcn1cclxuICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZT17MjB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJ1dGlsaXR5LnRvdGFsX3hfYXNzZXRzXCJcclxuICAgICAgICAgICAgICAgICAgICBleHRyYVJvdz17dGhpcy5wcm9wcy5leHRyYVJvd31cclxuICAgICAgICAgICAgICAgICAgICBsZWZ0UGFkZGluZz1cIjEuNXJlbVwiXHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMuX3JlbmRlclNlbmRNb2RhbCgpfVxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLl9yZW5kZXJTZXR0bGVNb2RhbCgpfVxyXG4gICAgICAgICAgICAgICAgICAgIHsvKiBXaXRoZHJhdyBNb2RhbCovfVxyXG4gICAgICAgICAgICAgICAgICAgIDxTaW1wbGVEZXBvc2l0V2l0aGRyYXdcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwid2l0aGRyYXdfbW9kYWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb249XCJ3aXRoZHJhd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpYXRNb2RhbD17dGhpcy5zdGF0ZS5maWF0TW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kZXI9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUud2l0aGRyYXdBc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxJZD1cInNpbXBsZV93aXRoZHJhd19tb2RhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzPXt0aGlzLnByb3BzLmJhbGFuY2VzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Li4uY3VycmVudFdpdGhkcmF3QXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRG93bj17dGhpcy5wcm9wcy5nYXRld2F5RG93bi5nZXQoXCJPUEVOXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxXaXRoZHJhd01vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cIndpdGhkcmF3X21vZGFsX25ld1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsSWQ9XCJ3aXRoZHJhd19tb2RhbF9uZXdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZWRDb2lucz17dGhpcy5wcm9wcy5iYWNrZWRDb2luc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFN5bWJvbD17dGhpcy5zdGF0ZS53aXRoZHJhd0Fzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHsvKiBEZXBvc2l0IE1vZGFsICovfVxyXG4gICAgICAgICAgICAgICAgICAgIDxEZXBvc2l0TW9kYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwiZGVwb3NpdF9tb2RhbF9uZXdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbElkPVwiZGVwb3NpdF9tb2RhbF9uZXdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17dGhpcy5zdGF0ZS5kZXBvc2l0QXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZWRDb2lucz17dGhpcy5wcm9wcy5iYWNrZWRDb2luc31cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7LyogQnJpZGdlIG1vZGFsICovfVxyXG4gICAgICAgICAgICAgICAgICAgIDxTaW1wbGVEZXBvc2l0QmxvY2t0cmFkZXNCcmlkZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwiYnJpZGdlX21vZGFsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPVwiZGVwb3NpdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kZXI9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUuYnJpZGdlQXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsSWQ9XCJzaW1wbGVfYnJpZGdlX21vZGFsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZXM9e3RoaXMucHJvcHMuYmFsYW5jZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyaWRnZXM9e2N1cnJlbnRCcmlkZ2VzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0Rvd249e3RoaXMucHJvcHMuZ2F0ZXdheURvd24uZ2V0KFwiVFJBREVcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgey8qIEJ1cm4gbW9kYWwgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgPEJhc2VNb2RhbCBpZD1cInJlc2VydmVfYXNzZXRcIiBvdmVybGF5PXt0cnVlfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJlc2VydmVBc3NldE1vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUucmVzZXJ2ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBaZkFwaS5wdWJsaXNoKFwicmVzZXJ2ZV9hc3NldFwiLCBcImNsb3NlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L0Jhc2VNb2RhbD5cclxuICAgICAgICAgICAgICAgIDwvUGFnaW5hdGVkTGlzdD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuQWNjb3VudFBvcnRmb2xpb0xpc3QgPSBjb25uZWN0KFxyXG4gICAgQWNjb3VudFBvcnRmb2xpb0xpc3QsXHJcbiAgICB7XHJcbiAgICAgICAgbGlzdGVuVG8oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbU2V0dGluZ3NTdG9yZSwgR2F0ZXdheVN0b3JlLCBNYXJrZXRzU3RvcmVdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0UHJvcHMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nczogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnNldHRpbmdzLFxyXG4gICAgICAgICAgICAgICAgdmlld1NldHRpbmdzOiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkudmlld1NldHRpbmdzLFxyXG4gICAgICAgICAgICAgICAgYmFja2VkQ29pbnM6IEdhdGV3YXlTdG9yZS5nZXRTdGF0ZSgpLmJhY2tlZENvaW5zLFxyXG4gICAgICAgICAgICAgICAgYnJpZGdlQ29pbnM6IEdhdGV3YXlTdG9yZS5nZXRTdGF0ZSgpLmJyaWRnZUNvaW5zLFxyXG4gICAgICAgICAgICAgICAgZ2F0ZXdheURvd246IEdhdGV3YXlTdG9yZS5nZXRTdGF0ZSgpLmRvd24sXHJcbiAgICAgICAgICAgICAgICBhbGxNYXJrZXRTdGF0czogTWFya2V0c1N0b3JlLmdldFN0YXRlKCkuYWxsTWFya2V0U3RhdHNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbik7XHJcblxyXG5BY2NvdW50UG9ydGZvbGlvTGlzdCA9IGRlYm91bmNlUmVuZGVyKEFjY291bnRQb3J0Zm9saW9MaXN0LCA1MCwge1xyXG4gICAgbGVhZGluZzogZmFsc2VcclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBY2NvdW50UG9ydGZvbGlvTGlzdDtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQge0Zvcm1hdHRlZE51bWJlcn0gZnJvbSBcInJlYWN0LWludGxcIjtcclxuaW1wb3J0IEFzc2V0V3JhcHBlciBmcm9tIFwiLi9Bc3NldFdyYXBwZXJcIjtcclxuaW1wb3J0IHtjb25uZWN0fSBmcm9tIFwiYWx0LXJlYWN0XCI7XHJcbmltcG9ydCBNYXJrZXRzU3RvcmUgZnJvbSBcInN0b3Jlcy9NYXJrZXRzU3RvcmVcIjtcclxuaW1wb3J0IFJlYWN0VG9vbHRpcCBmcm9tIFwicmVhY3QtdG9vbHRpcFwiO1xyXG5pbXBvcnQge01hcmtldFN0YXRzfSBmcm9tIFwiLi4vVXRpbGl0eS9NYXJrZXRQcmljZVwiO1xyXG5cclxuLyoqXHJcbiAqICBEaXNwbGF5cyBjaGFuZ2UgaW4gbWFya2V0IHZhbHVlIGZvciBhbiBhc3NldFxyXG4gKlxyXG4gKiAgRXhwZWN0cyB0aHJlZSBwcm9wZXJ0aWVzXHJcbiAqICAtJ3F1b3RlJyB3aGljaCBzaG91bGQgYmUgYSBhc3NldCBpZFxyXG4gKiAgLSdiYXNlJyB3aGljaCBpcyB0aGUgYXNzZXQgaWQgb2YgdGhlIG9yaWdpbmFsIGFzc2V0IGFtb3VudFxyXG4gKi9cclxuXHJcbmNsYXNzIE1hcmtldENoYW5nZUNvbXBvbmVudCBleHRlbmRzIE1hcmtldFN0YXRzIHtcclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgZnVsbFByZWNpc2lvbjogZmFsc2UsXHJcbiAgICAgICAgbm9EZWNpbWFsczogZmFsc2UsXHJcbiAgICAgICAgaGlkZV9hc3NldDogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgUmVhY3RUb29sdGlwLnJlYnVpbGQoKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobnApIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5wKSB8fCBucC5iYXNlICE9PSB0aGlzLnByb3BzLmJhc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VmFsdWUoKSB7XHJcbiAgICAgICAgbGV0IHttYXJrZXRTdGF0c30gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIHJldHVybiBtYXJrZXRTdGF0cyAmJiBtYXJrZXRTdGF0cy5jaGFuZ2UgPyBtYXJrZXRTdGF0cy5jaGFuZ2UgOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgbWFya2V0Q2hhbmdlVmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7XHJcbiAgICAgICAgbGV0IGRheUNoYW5nZUNsYXNzID1cclxuICAgICAgICAgICAgcGFyc2VGbG9hdChtYXJrZXRDaGFuZ2VWYWx1ZSkgPT09IDBcclxuICAgICAgICAgICAgICAgID8gXCJcIlxyXG4gICAgICAgICAgICAgICAgOiBwYXJzZUZsb2F0KG1hcmtldENoYW5nZVZhbHVlKSA8IDBcclxuICAgICAgICAgICAgICAgICAgICA/IFwiY2hhbmdlLWRvd25cIlxyXG4gICAgICAgICAgICAgICAgICAgIDogXCJjaGFuZ2UtdXBcIjtcclxuICAgICAgICBsZXQgbWFya2V0Q2hhbmdlRm9ybWF0dGVkVmFsdWUgPSAoXHJcbiAgICAgICAgICAgIDxGb3JtYXR0ZWROdW1iZXJcclxuICAgICAgICAgICAgICAgIHN0eWxlPVwiZGVjaW1hbFwiXHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17bWFya2V0Q2hhbmdlVmFsdWV9XHJcbiAgICAgICAgICAgICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM9ezJ9XHJcbiAgICAgICAgICAgICAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM9ezJ9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtcInZhbHVlIFwiICsgZGF5Q2hhbmdlQ2xhc3N9PlxyXG4gICAgICAgICAgICAgICAge21hcmtldENoYW5nZUZvcm1hdHRlZFZhbHVlfSVcclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuTWFya2V0Q2hhbmdlQ29tcG9uZW50ID0gQXNzZXRXcmFwcGVyKE1hcmtldENoYW5nZUNvbXBvbmVudCwge1xyXG4gICAgcHJvcE5hbWVzOiBbXCJxdW90ZVwiLCBcImJhc2VcIl0sXHJcbiAgICBkZWZhdWx0UHJvcHM6IHtxdW90ZTogXCIxLjMuMFwifVxyXG59KTtcclxuXHJcbmNsYXNzIE1hcmtldDI0SG91ckNoYW5nZUNvbXBvbmVudCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtyZWZDYWxsYmFjaywgLi4ub3RoZXJzfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIHJldHVybiA8TWFya2V0Q2hhbmdlQ29tcG9uZW50IHsuLi5vdGhlcnN9IHJlZj17cmVmQ2FsbGJhY2t9IC8+O1xyXG4gICAgfVxyXG59XHJcblxyXG5NYXJrZXQyNEhvdXJDaGFuZ2VDb21wb25lbnQgPSBjb25uZWN0KFxyXG4gICAgTWFya2V0MjRIb3VyQ2hhbmdlQ29tcG9uZW50LFxyXG4gICAge1xyXG4gICAgICAgIGxpc3RlblRvKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW01hcmtldHNTdG9yZV07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRQcm9wcyhwcm9wcykge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbWFya2V0U3RhdHM6IE1hcmtldHNTdG9yZS5nZXRTdGF0ZSgpLmFsbE1hcmtldFN0YXRzLmdldChcclxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5tYXJrZXRJZFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGFsbE1hcmtldFN0YXRzOiBNYXJrZXRzU3RvcmUuZ2V0U3RhdGUoKS5hbGxNYXJrZXRTdGF0c1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuKTtcclxuXHJcbmV4cG9ydCB7TWFya2V0MjRIb3VyQ2hhbmdlQ29tcG9uZW50fTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgQWx0Q29udGFpbmVyIGZyb20gXCJhbHQtY29udGFpbmVyXCI7XHJcbmltcG9ydCBTZXR0aW5nc1N0b3JlIGZyb20gXCJzdG9yZXMvU2V0dGluZ3NTdG9yZVwiO1xyXG5pbXBvcnQgRm9ybWF0dGVkUHJpY2UgZnJvbSBcIi4vRm9ybWF0dGVkUHJpY2VcIjtcclxuaW1wb3J0IE1hcmtldFN0YXRzQ2hlY2sgZnJvbSBcIi4vTWFya2V0U3RhdHNDaGVja1wiO1xyXG5pbXBvcnQgTWFya2V0c1N0b3JlIGZyb20gXCJzdG9yZXMvTWFya2V0c1N0b3JlXCI7XHJcbmltcG9ydCBNYXJrZXRVdGlscyBmcm9tIFwiY29tbW9uL21hcmtldF91dGlsc1wiO1xyXG5pbXBvcnQgQXNzZXRXcmFwcGVyIGZyb20gXCIuL0Fzc2V0V3JhcHBlclwiO1xyXG5cclxuY2xhc3MgRXF1aXZhbGVudFByaWNlIGV4dGVuZHMgTWFya2V0U3RhdHNDaGVjayB7XHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIGZvcmNlRGlyZWN0aW9uOiB0cnVlXHJcbiAgICB9O1xyXG5cclxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShucCwgbmV4dFN0YXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc3VwZXIuc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5wKSB8fFxyXG4gICAgICAgICAgICBucC5iYXNlX2Ftb3VudCAhPT0gdGhpcy5wcm9wcy5iYXNlX2Ftb3VudCB8fFxyXG4gICAgICAgICAgICBucC5xdW90ZV9hbW91bnQgIT09IHRoaXMucHJvcHMucXVvdGVfYW1vdW50IHx8XHJcbiAgICAgICAgICAgIG5wLmRlY2ltYWxzICE9PSB0aGlzLnByb3BzLmRlY2ltYWxzIHx8XHJcbiAgICAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhucC5wdWxzYXRlLCB0aGlzLnByb3BzLnB1bHNhdGUpIHx8XHJcbiAgICAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhuZXh0U3RhdGUsIHRoaXMuc3RhdGUpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRGaW5hbFByaWNlKHJlYWwgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IHtjb3JlQXNzZXQsIGZyb21Bc3NldCwgdG9Bc3NldCwgYWxsTWFya2V0U3RhdHN9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICByZXR1cm4gTWFya2V0VXRpbHMuZ2V0RmluYWxQcmljZShcclxuICAgICAgICAgICAgY29yZUFzc2V0LFxyXG4gICAgICAgICAgICBmcm9tQXNzZXQsXHJcbiAgICAgICAgICAgIHRvQXNzZXQsXHJcbiAgICAgICAgICAgIGFsbE1hcmtldFN0YXRzLFxyXG4gICAgICAgICAgICByZWFsXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3Qge3RvQXNzZXQsIGZvcmNlRGlyZWN0aW9uLCAuLi5vdGhlcnN9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgY29uc3QgZmluYWxQcmljZSA9IHRoaXMuZ2V0RmluYWxQcmljZSgpO1xyXG5cclxuICAgICAgICBpZiAoZmluYWxQcmljZSA9PT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gPHNwYW4+MS4wMDwvc3Bhbj47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWZpbmFsUHJpY2UpIHJldHVybiA8c3Bhbj4tLTwvc3Bhbj47XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRQcmljZVxyXG4gICAgICAgICAgICAgICAgZm9yY2VfZGlyZWN0aW9uPXtmb3JjZURpcmVjdGlvbiA/IHRvQXNzZXQuZ2V0KFwic3ltYm9sXCIpIDogZmFsc2V9XHJcbiAgICAgICAgICAgICAgICBiYXNlX2Ftb3VudD17ZmluYWxQcmljZS5iYXNlLmFtb3VudH1cclxuICAgICAgICAgICAgICAgIGJhc2VfYXNzZXQ9e2ZpbmFsUHJpY2UuYmFzZS5hc3NldF9pZH1cclxuICAgICAgICAgICAgICAgIHF1b3RlX2Ftb3VudD17ZmluYWxQcmljZS5xdW90ZS5hbW91bnR9XHJcbiAgICAgICAgICAgICAgICBxdW90ZV9hc3NldD17ZmluYWxQcmljZS5xdW90ZS5hc3NldF9pZH1cclxuICAgICAgICAgICAgICAgIHsuLi5vdGhlcnN9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuRXF1aXZhbGVudFByaWNlID0gQXNzZXRXcmFwcGVyKEVxdWl2YWxlbnRQcmljZSwge1xyXG4gICAgcHJvcE5hbWVzOiBbXCJ0b0Fzc2V0XCIsIFwiZnJvbUFzc2V0XCIsIFwiY29yZUFzc2V0XCJdLFxyXG4gICAgZGVmYXVsdFByb3BzOiB7XHJcbiAgICAgICAgdG9Bc3NldDogXCIxLjMuMFwiLFxyXG4gICAgICAgIGNvcmVBc3NldDogXCIxLjMuMFwiXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXF1aXZhbGVudFByaWNlV3JhcHBlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPEFsdENvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgc3RvcmVzPXtbU2V0dGluZ3NTdG9yZSwgTWFya2V0c1N0b3JlXX1cclxuICAgICAgICAgICAgICAgIGluamVjdD17e1xyXG4gICAgICAgICAgICAgICAgICAgIHRvQXNzZXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudG9Bc3NldCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnNldHRpbmdzLmdldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVuaXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFsbE1hcmtldFN0YXRzOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXJrZXRzU3RvcmUuZ2V0U3RhdGUoKS5hbGxNYXJrZXRTdGF0cztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8RXF1aXZhbGVudFByaWNlIHsuLi50aGlzLnByb3BzfSByZWY9e3RoaXMucHJvcHMucmVmQ2FsbGJhY2t9IC8+XHJcbiAgICAgICAgICAgIDwvQWx0Q29udGFpbmVyPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5cclxuaW1wb3J0IEljb24gZnJvbSBcIi4vSWNvblwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHVsc2VJY29uIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgZHVyYXRpb246IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcclxuICAgICAgICBvZmZJY29uOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXHJcbiAgICAgICAgb25JY29uOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXHJcbiAgICAgICAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICBjb25zdCB7ZHVyYXRpb259ID0gdGhpcy5wcm9wcztcclxuICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy50aWNrLCBkdXJhdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbCAmJiBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHRpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qge29uSWNvbiwgb2ZmSWNvbn0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGNvbnN0IHtuYW1lID0gb25JY29ufSA9IHRoaXMuc3RhdGUgfHwge307XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPT09IG9uSWNvbiA/IG9mZkljb24gOiBvbkljb25cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHtvbkljb24sIHJlc3R9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCB7bmFtZSA9IG9uSWNvbn0gPSB0aGlzLnN0YXRlIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IHt0aXRsZX0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIHJldHVybiA8SWNvbiBuYW1lPXtuYW1lfSB0aXRsZT17dGl0bGV9IHsuLi5yZXN0fSAvPjtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBaZkFwaSBmcm9tIFwicmVhY3QtZm91bmRhdGlvbi1hcHBzL3NyYy91dGlscy9mb3VuZGF0aW9uLWFwaVwiO1xyXG5pbXBvcnQgQmFzZU1vZGFsIGZyb20gXCIuL0Jhc2VNb2RhbFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgQmFsYW5jZUNvbXBvbmVudCBmcm9tIFwiLi4vVXRpbGl0eS9CYWxhbmNlQ29tcG9uZW50XCI7XHJcbmltcG9ydCBXYWxsZXRBcGkgZnJvbSBcImFwaS9XYWxsZXRBcGlcIjtcclxuaW1wb3J0IFdhbGxldERiIGZyb20gXCJzdG9yZXMvV2FsbGV0RGJcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgQW1vdW50U2VsZWN0b3IgZnJvbSBcIi4uL1V0aWxpdHkvQW1vdW50U2VsZWN0b3JcIjtcclxuXHJcbmNsYXNzIE1vZGFsQ29udGVudCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFzc2V0OiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZCxcclxuICAgICAgICBhY2NvdW50OiBDaGFpblR5cGVzLkNoYWluQWNjb3VudC5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgYW1vdW50OiAwXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBvbkFtb3VudENoYW5nZWQoe2Ftb3VudCwgYXNzZXR9KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YW1vdW50OiBhbW91bnR9KTtcclxuICAgIH1cclxuXHJcbiAgICBvblN1Ym1pdChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIFpmQXBpLnB1Ymxpc2goXCJzZXR0bGVtZW50X21vZGFsXCIsIFwiY2xvc2VcIik7XHJcblxyXG4gICAgICAgIGxldCBwcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFzc2V0LmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IGFtb3VudCA9IHRoaXMuc3RhdGUuYW1vdW50LnJlcGxhY2UoLywvZywgXCJcIik7XHJcbiAgICAgICAgYW1vdW50ICo9IHByZWNpc2lvbjtcclxuXHJcbiAgICAgICAgdmFyIHRyID0gV2FsbGV0QXBpLm5ld190cmFuc2FjdGlvbigpO1xyXG4gICAgICAgIHRyLmFkZF90eXBlX29wZXJhdGlvbihcImFzc2V0X3NldHRsZVwiLCB7XHJcbiAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgYW1vdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ6IDBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYWNjb3VudDogdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICBhbW91bnQ6IHtcclxuICAgICAgICAgICAgICAgIGFtb3VudDogYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ6IHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwiaWRcIilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBXYWxsZXREYi5wcm9jZXNzX3RyYW5zYWN0aW9uKHRyLCBudWxsLCB0cnVlKVxyXG4gICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJhc3NldCBzZXR0bGUgcmVzdWx0OlwiLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5kaXNwYXRjaChhY2NvdW50X2lkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImFzc2V0IHNldHRsZSBlcnJvcjogXCIsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7YXNzZXQsIGFjY291bnR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQge2Ftb3VudH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBpZiAoIWFzc2V0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGFzc2V0SUQgPSBhc3NldC5nZXQoXCJpZFwiKTtcclxuXHJcbiAgICAgICAgbGV0IGFjY291bnRfYmFsYW5jZXMgPSBhY2NvdW50LmdldChcImJhbGFuY2VzXCIpO1xyXG5cclxuICAgICAgICBsZXQgY3VycmVudEJhbGFuY2UgPSBudWxsLFxyXG4gICAgICAgICAgICBiYWxhbmNlQW1vdW50ID0gMDtcclxuXHJcbiAgICAgICAgYWNjb3VudF9iYWxhbmNlcyAmJlxyXG4gICAgICAgICAgICBhY2NvdW50X2JhbGFuY2VzLmZvckVhY2goYmFsYW5jZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYmFsYW5jZU9iamVjdCA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KGJhbGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChiYWxhbmNlT2JqZWN0LmdldChcImFzc2V0X3R5cGVcIikgPT09IGFzc2V0SUQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50QmFsYW5jZSA9IGJhbGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFsYW5jZUFtb3VudCA9IGJhbGFuY2VPYmplY3QuZ2V0KFwiYmFsYW5jZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBwcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKGFzc2V0LmdldChcInByZWNpc2lvblwiKSk7XHJcbiAgICAgICAgbGV0IHBhcnNlZEFtb3VudCA9IGFtb3VudCA/IGFtb3VudC5yZXBsYWNlKC8sL2csIFwiXCIpIDogMDtcclxuICAgICAgICBsZXQgc3VibWl0X2J0bl9jbGFzcyA9XHJcbiAgICAgICAgICAgIHBhcnNlRmxvYXQocGFyc2VkQW1vdW50KSA+IDAgJiZcclxuICAgICAgICAgICAgcGFyc2VGbG9hdChwYXJzZWRBbW91bnQpICogcHJlY2lzaW9uIDw9IHBhcnNlRmxvYXQoYmFsYW5jZUFtb3VudClcclxuICAgICAgICAgICAgICAgID8gXCJidXR0b24gc3VjY2Vzc1wiXHJcbiAgICAgICAgICAgICAgICA6IFwiYnV0dG9uIGRpc2FibGVkXCI7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlVGV4dCA9IChcclxuICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5iYWxhbmNlXCIgLz46Jm5ic3A7XHJcbiAgICAgICAgICAgICAgICB7Y3VycmVudEJhbGFuY2UgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEJhbGFuY2VDb21wb25lbnQgYmFsYW5jZT17Y3VycmVudEJhbGFuY2V9IC8+XHJcbiAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiMCBcIiArIGFzc2V0LmdldChcInN5bWJvbFwiKVxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxmb3JtIGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgdmVydGljYWwgZnVsbC13aWR0aC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiaDNcIlxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcImNlbnRlclwifX1cclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwibW9kYWwuc2V0dGxlLnRpdGxlXCJcclxuICAgICAgICAgICAgICAgICAgICBhc3NldD17YXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250YWluZXIgXCIgc3R5bGU9e3twYWRkaW5nVG9wOiBcIjJyZW1cIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QW1vdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwibW9kYWwuc2V0dGxlLmFtb3VudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2Ftb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQW1vdW50Q2hhbmdlZC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9iYWxhbmNlPXtiYWxhbmNlVGV4dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldElEfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzPXtbYXNzZXRJRF19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c3VibWl0X2J0bl9jbGFzc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25TdWJtaXQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJtb2RhbC5zZXR0bGUuc3VibWl0XCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbk1vZGFsQ29udGVudCA9IEJpbmRUb0NoYWluU3RhdGUoTW9kYWxDb250ZW50KTtcclxuXHJcbmNsYXNzIFNldHRsZU1vZGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7b3BlbjogZmFsc2V9O1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7b3BlbjogdHJ1ZX0sICgpID0+IHtcclxuICAgICAgICAgICAgWmZBcGkucHVibGlzaCh0aGlzLnByb3BzLm1vZGFsSWQsIFwib3BlblwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe29wZW46IGZhbHNlfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5zdGF0ZS5vcGVuID8gbnVsbCA6IChcclxuICAgICAgICAgICAgPEJhc2VNb2RhbFxyXG4gICAgICAgICAgICAgICAgaWQ9e3RoaXMucHJvcHMubW9kYWxJZH1cclxuICAgICAgICAgICAgICAgIG9uQ2xvc2U9e3RoaXMub25DbG9zZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgb3ZlcmxheT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgIHJlZj1cInNldHRsZW1lbnRfbW9kYWxcIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgdmVydGljYWxcIj5cclxuICAgICAgICAgICAgICAgICAgICA8TW9kYWxDb250ZW50IHsuLi50aGlzLnByb3BzfSAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvQmFzZU1vZGFsPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNldHRsZU1vZGFsO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IEJhbGFuY2VDb21wb25lbnQgZnJvbSBcIi4uL1V0aWxpdHkvQmFsYW5jZUNvbXBvbmVudFwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCBBbW91bnRTZWxlY3RvciBmcm9tIFwiLi4vVXRpbGl0eS9BbW91bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgQXNzZXRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL0Fzc2V0QWN0aW9uc1wiO1xyXG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQge0Fzc2V0fSBmcm9tIFwiY29tbW9uL01hcmtldENsYXNzZXNcIjtcclxuaW1wb3J0IEFzc2V0V3JhcHBlciBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldFdyYXBwZXJcIjtcclxuXHJcbmNsYXNzIFJlc2VydmVBc3NldE1vZGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLmdldEluaXRpYWxTdGF0ZShwcm9wcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhucCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgbnAuYXNzZXQgJiZcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldCAmJlxyXG4gICAgICAgICAgICBucC5hc3NldC5nZXQoXCJpZFwiKSAhPT0gdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJpZFwiKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMuZ2V0SW5pdGlhbFN0YXRlKG5wKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEluaXRpYWxTdGF0ZShwcm9wcykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFtb3VudDogMCxcclxuICAgICAgICAgICAgYW1vdW50QXNzZXQ6IG5ldyBBc3NldCh7XHJcbiAgICAgICAgICAgICAgICBhbW91bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICBhc3NldF9pZDogcHJvcHMuYXNzZXQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICBwcmVjaXNpb246IHByb3BzLmFzc2V0LmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgb25BbW91bnRDaGFuZ2VkKHthbW91bnQsIGFzc2V0fSkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUuYW1vdW50QXNzZXQuc2V0QW1vdW50KHtyZWFsOiBhbW91bnR9KTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHthbW91bnQsIGFzc2V0fSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25TdWJtaXQoKSB7XHJcbiAgICAgICAgQXNzZXRBY3Rpb25zLnJlc2VydmVBc3NldChcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5hbW91bnRBc3NldC5nZXRBbW91bnQoKSxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpXHJcbiAgICAgICAgKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5hbW91bnRBc3NldC5zZXRBbW91bnQoe3NhdHM6IDB9KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YW1vdW50OiAwfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNsb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBhc3NldElkID0gdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJpZFwiKTtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRCYWxhbmNlID1cclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJiYWxhbmNlc1wiLCBbXSkuc2l6ZSAmJlxyXG4gICAgICAgICAgICAhIXRoaXMucHJvcHMuYWNjb3VudC5nZXRJbihbXCJiYWxhbmNlc1wiLCBhc3NldElkXSlcclxuICAgICAgICAgICAgICAgID8gQ2hhaW5TdG9yZS5nZXRPYmplY3QoXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnQuZ2V0SW4oW1wiYmFsYW5jZXNcIiwgYXNzZXRJZF0pXHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICBpZiAoIWN1cnJlbnRCYWxhbmNlKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGZvcm0gY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbCBmdWxsLXdpZHRoLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29tcG9uZW50PVwiaDNcIiBjb250ZW50PVwibW9kYWwucmVzZXJ2ZS50aXRsZVwiIC8+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGFpbmVyIFwiIHN0eWxlPXt7cGFkZGluZ1RvcDogXCIycmVtXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEFtb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIm1vZGFsLnJlc2VydmUuYW1vdW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dGhpcy5zdGF0ZS5hbW91bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkFtb3VudENoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldElkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzPXtbYXNzZXRJZF19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X2JhbGFuY2U9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5hbW91bnRBc3NldC5zZXRBbW91bnQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdHM6IGN1cnJlbnRCYWxhbmNlLmdldChcImJhbGFuY2VcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB0aGlzLnN0YXRlLmFtb3VudEFzc2V0LmdldEFtb3VudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlYWw6IHRydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QmFsYW5jZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZT17dGhpcy5wcm9wcy5hY2NvdW50LmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJhbGFuY2VzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIGJ1dHRvbi1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uIHN1Y2Nlc3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vblN1Ym1pdC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1vZGFsLnJlc2VydmUuc3VibWl0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17Mn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2xvc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17M31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImNhbmNlbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcblJlc2VydmVBc3NldE1vZGFsID0gQXNzZXRXcmFwcGVyKFJlc2VydmVBc3NldE1vZGFsLCB7XHJcbiAgICBwcm9wTmFtZXM6IFtcImFzc2V0XCJdXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVzZXJ2ZUFzc2V0TW9kYWw7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZEE7QUFDQTtBQWdCQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBMURBO0FBREE7QUFEQTtBQTRGQTs7OztBQTdKQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBQ0E7QUE2SkE7QUFDQTtBQURBO0FBQ0E7QUFHQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUpBO0FBQ0E7QUFNQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBYkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0TUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFhQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQW5CQTtBQUNBO0FBcUJBO0FBekJBO0FBMEJBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFEQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUlBO0FBRUE7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBTkE7QUFGQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQVBBO0FBRkE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU9BO0FBUEE7QUFEQTtBQXJEQTtBQWtFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBTEE7QUF4QkE7QUFEQTtBQWtDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBbkNBO0FBREE7QUF3Q0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBT0E7QUFQQTtBQURBO0FBekNBO0FBUEE7QUFEQTtBQWdFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQURBO0FBRkE7QUFqRUE7QUFEQTtBQWdGQTs7OztBQWpVQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFEQTtBQVVBO0FBREE7QUFDQTtBQUNBO0FBeVRBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUtBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFGQTtBQVFBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQVJBO0FBREE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBREE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUdBO0FBSkE7QUFLQTtBQUxBO0FBQUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFSQTtBQWdCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBVEE7QUFXQTtBQVhBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBZkE7QUE1Q0E7QUFEQTtBQXVFQTs7OztBQS9JQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBQ0E7QUFDQTtBQStJQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDN0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTs7O0FBVUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFNQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBVUE7QUFDQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUZBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBRkE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBTkE7QUFGQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFOQTtBQUZBO0FBZUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQVhBO0FBbkVBO0FBbUZBOzs7O0FBdktBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFEQTtBQUNBO0FBa0tBO0FBQ0E7QUFDQTs7O0FBV0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBSEE7QUFJQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVNBO0FBREE7QUFSQTtBQUFBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQVJBO0FBVUE7QUFyQ0E7QUF1Q0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQU9BO0FBQ0E7OztBQUVBO0FBQ0E7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzQkE7QUFDQTtBQTZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhDQTtBQUNBO0FBa0NBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvRUE7QUFDQTtBQWlGQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBckJBO0FBQ0E7QUFzQkE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFLQTtBQU5BO0FBU0E7QUFDQTtBQUVBO0FBS0E7QUFOQTtBQVNBO0FBQ0E7QUFFQTtBQUtBO0FBTkE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFBQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQVRBO0FBREE7QUFQQTtBQURBO0FBREE7QUEwQkE7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFBQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBYkE7QUFEQTtBQVBBO0FBREE7QUFEQTtBQThCQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQVJBO0FBQ0E7QUFnQkE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVdBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTEE7QUFjQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBRkE7QUFjQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBQUE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFTQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBYkE7QUFEQTtBQVRBO0FBREE7QUFKQTtBQW1DQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBSEE7QUFBQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUlBO0FBTkE7QUFVQTtBQUNBO0FBQ0E7QUFGQTtBQU1BO0FBaEJBO0FBSEE7QUFYQTtBQURBO0FBSkE7QUE0Q0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQVBBO0FBREE7QUFYQTtBQURBO0FBNkJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQXBCQTtBQURBO0FBeENBO0FBb0VBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBUUE7QUFEQTtBQVRBO0FBMkJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUdBO0FBSEE7QUE3QkE7QUFEQTtBQXJFQTtBQTJHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBelFBO0FBREE7QUFrUkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTtBQVlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQU5BO0FBREE7QUFjQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBWEE7QUFnQkE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBUEE7QUFEQTtBQWVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFOQTtBQURBO0FBeEJBO0FBeERBO0FBREE7QUFtR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFWQTtBQURBO0FBa0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUpBO0FBREE7QUFRQTtBQVRBO0FBREE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFKQTtBQURBO0FBUUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFOQTtBQUFBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUlBO0FBTkE7QUFXQTtBQUNBO0FBQ0E7QUFGQTtBQU1BO0FBakJBO0FBTEE7QUFWQTtBQURBO0FBREE7QUF3Q0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUxBO0FBSEE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFFQTtBQUZBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFMQTtBQUhBO0FBY0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQW5DQTtBQTdDQTtBQXdGQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFyR0E7QUFEQTtBQTlaQTtBQVBBO0FBREE7QUFEQTtBQXFoQkE7Ozs7QUE5cENBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFDQTtBQUZBO0FBQ0E7QUFDQTtBQXlwQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0MkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTs7O0FBU0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBSEE7QUFJQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFRQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUlBO0FBSUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBN0RBO0FBZ0VBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFLQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBT0E7QUFVQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUdBO0FBaUJBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTNCQTtBQUNBO0FBNkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBekJBO0FBQ0E7QUEyQkE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFEQTtBQU1BO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTFDQTtBQUNBO0FBNENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBTEE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQVlBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFJQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBTEE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTs7O0FBRUE7QUFDQTtBQUdBOzs7QUFFQTtBQUNBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBQUE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFUQTtBQURBO0FBUEE7QUFEQTtBQURBO0FBMEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUFBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFiQTtBQURBO0FBUEE7QUFEQTtBQURBO0FBOEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBTEE7QUFXQTtBQVhBO0FBaUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBSkE7QUFNQTtBQU5BO0FBbEJBO0FBQ0E7QUE0QkE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQURBO0FBY0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQW5CQTtBQURBO0FBMkJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFuQkE7QUFEQTtBQTJCQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQXBCQTtBQURBO0FBMkJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQXBCQTtBQURBO0FBOUZBO0FBMEhBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSUE7QUFJQTtBQWJBO0FBSEE7QUFEQTtBQTNIQTtBQWlKQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQWFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBN0xBO0FBSkE7QUF5TUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUdBO0FBR0E7QUExQkE7QUE2QkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUE3QkE7QUFKQTtBQXlDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBTkE7QUFEQTtBQWNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQVBBO0FBREE7QUFlQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQWJBO0FBaUJBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFQQTtBQURBO0FBZUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQU5BO0FBREE7QUF4QkE7QUF5Q0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUF2R0E7QUFKQTtBQW1IQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFYQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBZkE7QUFKQTtBQTRCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBVkE7QUFKQTtBQXNCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBTkE7QUFBQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFJQTtBQU5BO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU9BO0FBbEJBO0FBTEE7QUFWQTtBQURBO0FBREE7QUF5Q0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUxBO0FBSEE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBZEE7QUFEQTtBQWtCQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBdkNBO0FBOUNBO0FBNkZBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQWhIQTtBQUpBO0FBMkhBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBVkE7QUFjQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBbkJBO0FBL2hCQTtBQVBBO0FBREE7QUF1a0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBeGtCQTtBQWtsQkE7Ozs7QUFqOENBO0FBQ0E7QUFEQTtBQUVBO0FBREE7QUFEQTtBQU1BO0FBREE7QUFDQTtBQTY3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQUNBO0FBT0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUZBO0FBR0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFuQ0E7QUFEQTtBQTBDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQVBBO0FBckRBO0FBcUVBOzs7O0FBekZBO0FBQ0E7QUEyRkE7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFKQTtBQUNBO0FBTUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5a0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BOzs7Ozs7Ozs7OztBQVlBO0FBQ0E7QUFDQTtBQUtBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUEvQkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVFBO0FBQ0E7QUFGQTtBQUNBO0FBQ0E7QUF5QkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFWQTtBQUhBO0FBZUE7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBQ0E7QUFRQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUpBO0FBREE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBVEE7QUFKQTtBQXFCQTtBQXhCQTtBQVhBO0FBc0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBZkE7QUFEQTtBQXZDQTtBQWlFQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFKQTtBQURBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVRBO0FBSkE7QUFxQkE7QUF4QkE7QUFYQTtBQXNDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBREE7QUF2Q0E7QUEyREE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQVVBO0FBQ0E7QUFEQTtBQVZBO0FBZUE7QUFsQkE7QUFKQTtBQXlCQTtBQUdBO0FBN0JBO0FBREE7QUFrQ0E7Ozs7QUFsT0E7QUFDQTtBQW9PQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBTUE7QUFYQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2pQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBSEE7QUFNQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTEE7QUFEQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFSQTtBQVBBO0FBdUJBO0FBMUJBO0FBWkE7QUF5Q0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQURBO0FBMUNBO0FBNkRBOzs7O0FBdEdBO0FBQ0E7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSkE7QUFTQTs7OztBQXJCQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBREE7QUFLQTtBQURBO0FBQ0E7QUFrQkE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFGQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSkE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFRQTtBQVJBO0FBU0E7QUFuQkE7QUFxQkEsZ0VBR0E7QUF4QkE7QUFvQ0E7QUFDQTtBQXRDQTtBQTBDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFSQTtBQWdCQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUpBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU1BO0FBTkE7QUFGQTtBQUFBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBYkE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU1BO0FBTkE7QUFGQTtBQUFBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBYkE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU1BO0FBTkE7QUFGQTtBQUFBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBYkE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBRUE7QUFGQTtBQUpBO0FBNURBO0FBREE7QUEwRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQXJHQTtBQURBO0FBK0dBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFNQTtBQUNBO0FBSUE7QUFMQTtBQU9BO0FBdEJBO0FBREE7QUFEQTtBQWhIQTtBQURBO0FBaERBO0FBUEE7QUFEQTtBQURBO0FBREE7QUF1TkE7Ozs7QUEvUkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQ0E7QUFGQTtBQUNBO0FBMFJBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDM1VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBSkE7QUFEQTtBQWNBOzs7O0FBdEJBO0FBQ0E7QUFEQTtBQUVBO0FBREE7QUFDQTtBQUNBO0FBc0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUtBO0FBRUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUpBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFTQTtBQVRBO0FBSkE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFVQTtBQVZBO0FBSkE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUpBO0FBYUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUpBO0FBSEE7QUFKQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFEQTtBQURBO0FBekVBO0FBREE7QUFQQTtBQStGQTs7OztBQTVJQTtBQUNBO0FBOElBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBSEE7QUFNQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBUEE7QUFQQTtBQURBO0FBREE7QUFEQTtBQWlDQTs7OztBQXBHQTtBQUNBO0FBc0dBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFLQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXRCQTtBQXdCQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFXQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQU9BO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWFBOzs7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBY0E7QUFFQTtBQU1BO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUVBO0FBTUE7QUFFQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQVRBO0FBUkE7QUEyQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBVkE7QUFIQTtBQURBO0FBa0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUlBO0FBR0E7QUFyQkE7QUF1QkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBN0NBO0FBbURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQVZBO0FBSEE7QUFEQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUdBO0FBckJBO0FBdUJBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQTdDQTtBQW1EQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFMQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUlBO0FBSUE7QUEzQkE7QUFEQTtBQWhKQTtBQWlMQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBSEE7QUFsTEE7QUFEQTtBQURBO0FBbU1BOzs7O0FBN2ZBO0FBQ0E7QUErZkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaGhCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFTQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBUEE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBUkE7QUFEQTtBQW5CQTtBQWlDQTs7OztBQXZGQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQXdGQTs7O0FBWUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQVZBO0FBV0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFNQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFWQTtBQWZBO0FBNkJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBUkE7QUFEQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBZkE7QUFEQTtBQTlCQTtBQXVEQTs7OztBQXhMQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFDQTtBQUNBO0FBd0xBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBS0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSkE7QUFNQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBTkE7QUFUQTtBQUpBO0FBMkJBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBREE7QUE3QkE7QUFKQTtBQTRDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUpBO0FBUUE7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUxBO0FBbkVBO0FBREE7QUE4RUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQURBO0FBdkZBO0FBZ0dBO0FBbEdBO0FBcUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7Ozs7QUFuS0E7QUFDQTtBQURBO0FBRUE7QUFEQTtBQURBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQU9BO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQVBBO0FBREE7QUFlQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBUEE7QUFqQkE7QUF3Q0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFUQTtBQURBO0FBOUNBO0FBUEE7QUFQQTtBQWtGQTs7OztBQXpJQTtBQUNBO0FBMklBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQURBO0FBR0E7Ozs7Ozs7QUMzSkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVlBO0FBQ0E7OztBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBTEE7QUFPQTtBQVFBO0FBT0E7QUFDQTs7O0FBRUE7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBZEE7QUF3QkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBUkE7QUFEQTtBQUxBO0FBa0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFRQTtBQVJBO0FBREE7QUFMQTtBQWtCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBV0E7QUFYQTtBQURBO0FBTEE7QUFyQ0E7QUFEQTtBQThEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBckdBO0FBOEdBOzs7O0FBN01BO0FBQ0E7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBOzs7QUFZQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVJBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBREE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFEQTtBQUpBO0FBeEJBO0FBREE7QUFvQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBbkRBO0FBREE7QUEwREE7Ozs7QUE5R0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUE4R0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDN0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFTQTs7O0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQUhBO0FBY0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQU1BO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQU1BO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBVEE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFOQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQU1BO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBVEE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBUEE7QUE5Q0E7QUFEQTtBQTZEQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBTUE7QUFDQTtBQUNBO0FBSUE7QUFOQTtBQVVBO0FBaEJBO0FBREE7QUFOQTtBQURBO0FBUEE7QUFKQTtBQTBDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBTkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFNQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBVEE7QUFGQTtBQW9CQTtBQU1BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBdkNBO0FBeERBO0FBREE7QUFwRUE7QUFEQTtBQURBO0FBREE7QUF5TEE7Ozs7QUE3WUE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBNllBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQTs7Ozs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O0FBZUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBVEE7QUFXQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFnQkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDblFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBTUE7OztBQVVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBRkE7QUFhQTtBQXRCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFvQkE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBWkE7QUFjQTtBQWRBO0FBVEE7QUEyQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUFBO0FBTUE7QUFBQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBVEE7QUFBQTtBQUFBO0FBUkE7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFQQTtBQXhEQTtBQW9FQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVJBO0FBeEVBO0FBcUZBOzs7O0FBL01BO0FBQ0E7QUFEQTtBQU9BO0FBREE7QUFDQTtBQUNBO0FBME1BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzlOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFTQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBREE7QUFQQTtBQWtCQTs7OztBQS9CQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBREE7QUFNQTtBQURBO0FBQ0E7QUEyQkE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQVFBO0FBQ0E7QUFYQTtBQWNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBREE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFSQTtBQURBO0FBYUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWZBO0FBa0JBOzs7O0FBOUVBO0FBQ0E7QUFnRkE7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUhBO0FBT0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQVpBO0FBREE7QUFnQkE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFqQkE7QUFEQTtBQTNCQTtBQURBO0FBb0RBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQVRBO0FBREE7QUFhQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQWxCQTtBQURBO0FBakJBO0FBREE7QUEyQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBSkE7QUFEQTtBQWlCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFKQTtBQURBO0FBdkhBO0FBREE7QUFEQTtBQURBO0FBK0lBOzs7O0FBcE5BO0FBQ0E7QUFzTkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN2VkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQVdBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQWdNQTtBQUNBO0FBQ0E7QUFoTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFwQkE7QUFxQkE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUEwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZEE7QUFnQkE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQU1BOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQU1BO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBT0E7QUFuQkE7QUFDQTtBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFRQTtBQUVBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQURBO0FBSUE7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBSUE7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBTEE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBWEE7QUFjQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBWEE7QUFjQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFYQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBTEE7QUFPQTtBQVBBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBbEJBO0FBQ0E7QUE0QkE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBYkE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTtBQVFBO0FBUkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVJBO0FBekJBO0FBQ0E7QUEyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFGQTtBQVVBO0FBVkE7QUFDQTtBQWFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFOQTtBQUhBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUNBO0FBT0E7QUFDQTtBQUdBO0FBNUJBO0FBZEE7QUFEQTtBQWdEQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQU5BO0FBSEE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUlBO0FBQ0E7QUFPQTtBQUNBO0FBR0E7QUE1QkE7QUFiQTtBQURBO0FBK0NBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQURBO0FBT0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBVUE7QUFWQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBSkE7QUFTQTtBQVRBO0FBZUE7QUFDQTtBQUFBO0FBQ0E7QUFJQTtBQUxBO0FBY0E7QUFkQTtBQWpDQTtBQW1EQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQU5BO0FBRkE7QUEzREE7QUEwRkE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUhBO0FBVUE7QUFsQkE7QUFvQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBREE7QUFyQkE7QUFnQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUpBO0FBTUE7QUFDQTtBQURBO0FBTkE7QUFBQTtBQVdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFOQTtBQUpBO0FBY0E7QUEvQkE7QUFpQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBREE7QUFsQ0E7QUE2Q0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFNQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFIQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBQUE7QUFPQTtBQUNBO0FBREE7QUFQQTtBQUFBO0FBTEE7QUFrQkE7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUFBO0FBT0E7QUFDQTtBQURBO0FBUEE7QUFBQTtBQUpBO0FBbUJBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUE5RUE7QUFEQTtBQXFGQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBcktBO0FBM0ZBO0FBdkdBO0FBREE7QUFEQTtBQURBO0FBd1hBOzs7O0FBM2xDQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBUUE7QUFEQTtBQUNBO0FBcWxDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzduQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFZQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7OztBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBT0E7QUFQQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBWEE7QUFKQTtBQWtCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQW5CQTtBQTBCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTtBQVNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFQQTtBQURBO0FBYUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBQUE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTtBQVNBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUpBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBVUE7QUFFQTtBQUtBO0FBTkE7QUFYQTtBQXZHQTtBQW9JQTs7OztBQXBOQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFTQTtBQURBO0FBQ0E7QUFDQTtBQTZNQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFNQTtBQUNBO0FBT0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBQ0E7QUFLQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQUZBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBUUE7QUFFQTtBQUtBO0FBTkE7QUFUQTtBQXBDQTtBQStEQTs7OztBQWhHQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBRkE7QUFDQTtBQWlHQTs7O0FBbUJBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBVEE7QUFVQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFiQTtBQWdCQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQW5CQTtBQURBO0FBeUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUExQkE7QUFwQkE7QUFtREE7Ozs7QUEvS0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFEQTtBQWNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFDQTtBQW1LQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6VEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFQQTtBQUNBO0FBbUJBO0FBdEJBO0FBdUJBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQVFBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBT0E7QUFQQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQU9BO0FBUEE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFOQTtBQVFBO0FBUkE7QUFTQTtBQVRBO0FBQUE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFOQTtBQVFBO0FBUkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQVZBO0FBUkE7QUFxQkE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUxBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQTlGQTtBQXlHQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFMQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBVEE7QUFDQTtBQVlBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBVEE7QUFDQTtBQVlBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakJBO0FBQ0E7QUFvQkE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqQkE7QUFDQTtBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUlBO0FBTEE7QUFjQTtBQWRBO0FBZ0JBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFEQTtBQU1BO0FBVEE7QUFrQkE7QUFsQkE7QUFxQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFMQTtBQWNBO0FBZEE7QUF2Q0E7QUFSQTtBQWtFQTtBQVNBO0FBREE7QUE5RUE7QUFvRkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFNQTtBQWJBO0FBREE7QUFKQTtBQXVCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUxBO0FBSEE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQU5BO0FBREE7QUFEQTtBQVpBO0FBc0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQUpBO0FBaUJBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBQ0E7QUFDQTtBQUZBO0FBUkE7QUEzS0E7QUFEQTtBQURBO0FBREE7QUFpTUE7Ozs7QUFwbkJBO0FBQ0E7QUFzbkJBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFIQTtBQUNBO0FBREE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQy9vQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBU0E7Ozs7Ozs7Ozs7O0FBVUE7QUFDQTtBQUNBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBQ0E7QUFDQTtBQUZBO0FBZEE7QUFDQTtBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcUJBOzs7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFPQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFOQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQURBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQVZBO0FBRkE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFGQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBT0E7QUFDQTtBQWpCQTtBQUZBO0FBd0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBTEE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTEE7QUFEQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBUEE7QUFEQTtBQWtCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVJBO0FBaUJBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQVRBO0FBcEJBO0FBM0pBO0FBOExBOzs7O0FBbFlBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFEQTtBQUNBO0FBQ0E7QUE2WEE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBT0E7Ozs7QUFsQkE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBQ0E7QUFrQkE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXFCQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTEE7QUFEQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBUEE7QUFEQTtBQWlCQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFUQTtBQUZBO0FBekVBO0FBMEZBOzs7O0FBbktBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFEQTtBQUNBO0FBQ0E7QUE4SkE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUtBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQVJBO0FBWUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7OztBQWhEQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBQ0E7QUFDQTtBQWdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFhQTtBQWZBO0FBQ0E7QUFpQkE7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFPQTtBQVBBO0FBREE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU9BO0FBUEE7QUFEQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFKQTtBQURBO0FBYUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFPQTtBQVBBO0FBREE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQXpFQTtBQURBO0FBK0VBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQUhBO0FBV0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBL0ZBO0FBa0dBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxeEJBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFLQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFIQTtBQUlBO0FBQ0E7OztBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBS0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhCQTtBQW1CQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFNQTtBQUNBO0FBQ0E7QUFGQTtBQU5BO0FBREE7QUFDQTtBQWNBO0FBR0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQWpFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBdUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQURBO0FBREE7QUFhQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUpBO0FBQUE7QUFBQTtBQVNBO0FBQUE7QUFDQTtBQVNBO0FBVkE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBZkE7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQUtBO0FBTkE7QUFRQTtBQVJBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFsREE7QUF4QkE7QUFvRkE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFWQTtBQURBO0FBZ0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFuQkE7QUFzQkE7Ozs7QUEvUkE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBQ0E7QUErUkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDclRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFLQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBRkE7QUFRQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFPQTtBQWxCQTtBQUpBO0FBMEJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQVdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUpBO0FBTUE7QUFDQTtBQUdBO0FBSkE7QUFQQTtBQXFCQSwwQ0FDQTtBQW5DQTtBQXNEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBUEE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBVkE7QUFwRkE7QUFEQTtBQXlHQTs7OztBQWpQQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBQ0E7QUFpUEE7QUFDQTtBQUNBOzs7QUFNQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFIQTtBQUlBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVNBO0FBR0E7QUFDQTtBQUNBO0FBSkE7QUFPQTs7OztBQTlEQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBRkE7QUFDQTtBQThEQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFIQTtBQU1BO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBRkE7QUFRQTs7OztBQWpDQTtBQUNBO0FBREE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDM1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFjQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQWVBO0FBQ0E7QUFDQTtBQWZBO0FBRkE7QUFHQTtBQUNBOzs7QUFjQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVJBO0FBb0JBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBV0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBcEJBO0FBUkE7QUFDQTtBQXlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBRkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBSkE7QUFEQTtBQUZBO0FBWUE7QUFBQTtBQUFBO0FBQUE7QUFFQTs7OztBQTVKQTtBQUNBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFIQTtBQUxBO0FBWUE7QUFEQTtBQUNBO0FBa0pBO0FBQ0E7QUFDQTs7O0FBWUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBZ0NBO0FBQUE7QUFDQTtBQTlCQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFSQTtBQVNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7OztBQUlBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBREE7QUFDQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBSUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUFBO0FBdkJBO0FBK0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFoQ0E7QUFtQ0E7Ozs7QUFsSkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBNklBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFhQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTs7OztBQTVCQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBUUE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUNBO0FBc0JBOzs7Ozs7OztBQzVXQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6S0E7QUFDQTtBQTJLQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBUUE7QUFmQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBaUJBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQURBO0FBQ0E7QUFRQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFEQTtBQUNBO0FBUUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFDQTtBQUtBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFEQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFUQTtBQUNBO0FBZ0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFMQTtBQURBO0FBREE7QUFDQTtBQVdBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQVNBO0FBQUE7QUFYQTtBQUNBO0FBZUE7QUFBQTtBQUFBO0FBQ0E7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQVNBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFIQTtBQU9BO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUhBO0FBS0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBQUE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU5BO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTkE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFmQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFYQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBekJBO0FBa0NBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBWEE7QUF0Q0E7QUFxREE7Ozs7QUE5U0E7QUFDQTtBQWdUQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFSQTtBQUNBO0FBV0E7Ozs7Ozs7O0FDNVVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFWQTtBQVlBO0FBQ0E7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDOUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUxBO0FBU0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQVJBO0FBRkE7QUFEQTtBQWVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSEE7QUFVQTtBQWJBO0FBZ0JBO0FBQ0E7QUFEQTtBQW5EQTtBQUNBO0FBdURBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTs7OztBQTlLQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFGQTtBQUNBO0FBQ0E7QUF5S0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBTUE7Ozs7QUF0QkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBRkE7QUFDQTtBQUNBO0FBaUJBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUZBO0FBV0E7QUFFQTtBQUZBO0FBWEE7QUFpQkE7Ozs7QUFwQkE7QUFDQTtBQURBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUEyRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBN0RBO0FBQ0E7QUEzRUE7QUFnTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVJBO0FBREE7QUFtQkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVJBO0FBREE7QUFtQkE7QUFDQTtBQUNBO0FBMU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbEJBO0FBbUJBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFnQkE7QUFNQTtBQUVBOzs7QUFrRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBVUE7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7O0FBaURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFUQTtBQVlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTkE7QUFoQkE7QUE4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWJBO0FBQUE7QUFDQTtBQWdCQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFVQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFDQTtBQTlDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBMERBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUExR0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBaUhBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFKQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUpBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQUxBO0FBWUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFGQTtBQVNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFEQTtBQUZBO0FBa0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFiQTtBQURBO0FBRkE7QUEyQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBUUE7QUFDQTtBQVRBO0FBRkE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBUEE7QUFMQTtBQWtCQTtBQWxCQTtBQUZBO0FBMEJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQU9BO0FBUEE7QUFMQTtBQWlCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBTEE7QUFXQTtBQUNBO0FBS0E7QUFLQTtBQVhBO0FBWEE7QUFUQTtBQTdLQTtBQWtOQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUlBO0FBQUE7QUFLQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQXhCQTtBQUFBO0FBQ0E7QUEwQkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFMQTtBQUNBO0FBcENBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFxREE7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFEQTtBQU5BO0FBVUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVJBO0FBREE7QUFGQTtBQXNCQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQURBO0FBSEE7QUFtQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVFBO0FBQ0E7QUFUQTtBQUZBO0FBaUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBUEE7QUFhQTtBQUNBO0FBS0E7QUFLQTtBQVhBO0FBYkE7QUFYQTtBQXhGQTtBQWlJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVNBOzs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBY0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFWQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQWFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFEQTtBQUZBO0FBNURBO0FBREE7QUE0RUE7Ozs7QUF4OEJBO0FBQ0E7QUEwOEJBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFiQTtBQUNBO0FBZ0JBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3JnQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQVFBOzs7QUFPQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU9BO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUlBOzs7O0FBOUNBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUE4Q0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBOzs7Ozs7Ozs7OztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBOzs7O0FBTEE7QUFDQTtBQU9BO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFKQTtBQU1BO0FBWEE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUtBO0FBQ0E7QUFRQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBT0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFTQTs7OztBQWhEQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBQ0E7QUFDQTtBQWdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQUNBO0FBT0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBRkE7QUFpQkE7QUFqQkE7QUFvQkE7Ozs7QUF2QkE7QUFDQTtBQURBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OztBQWlCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFHQTs7Ozs7QUFmQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQVVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBOzs7O0FBOUJBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBTUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBS0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQU5BO0FBV0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFGQTtBQUNBO0FBU0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBREE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTtBQVpBO0FBUEE7QUE4QkE7Ozs7QUFoSUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFnSUE7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFIQTtBQUlBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFOQTtBQVdBOzs7O0FBOUJBO0FBQ0E7QUFnQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUZBO0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUZBO0FBUUE7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBS0E7QUFWQTtBQVlBO0FBQ0E7QUFEQTtBQVpBO0FBb0JBO0FBM0JBO0FBREE7QUFnQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBUEE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFYQTtBQWpDQTtBQUZBO0FBeURBOzs7O0FBbkhBO0FBQ0E7QUFxSEE7QUFDQTtBQURBO0FBQ0E7QUFHQTs7OztBIiwic291cmNlUm9vdCI6IiJ9