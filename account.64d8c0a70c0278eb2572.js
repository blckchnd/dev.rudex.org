(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[19],{

/***/ 2675:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(578);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(562);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(722);
/* harmony import */ var stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2350);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1959);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1960);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1859);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(579);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(536);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _Page404_Page404__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2483);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1819);
/* harmony import */ var _AccountAssets__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2676);
/* harmony import */ var _AccountAssetCreate__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2679);
/* harmony import */ var _AccountAssetUpdate__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2680);
/* harmony import */ var _AccountMembership__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2684);
/* harmony import */ var _AccountVesting__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2686);
/* harmony import */ var _AccountPermissions__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2687);
/* harmony import */ var _AccountSignedMessages__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2702);
/* harmony import */ var _AccountWhitelist__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2705);
/* harmony import */ var _AccountVoting__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2706);
/* harmony import */ var _AccountOverview__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(2709);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






// import AccountLeftPanel from "./AccountLeftPanel";








/* Nested routes */











var AccountPage = function (_React$Component) {
    _inherits(AccountPage, _React$Component);

    function AccountPage() {
        _classCallCheck(this, AccountPage);

        return _possibleConstructorReturn(this, (AccountPage.__proto__ || Object.getPrototypeOf(AccountPage)).apply(this, arguments));
    }

    _createClass(AccountPage, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            if (this.props.account) {
                actions_AccountActions__WEBPACK_IMPORTED_MODULE_1__["default"].setCurrentAccount.defer(this.props.account.get("name"));

                // Fetch possible fee assets here to avoid async issues later (will resolve assets)
                common_account_utils__WEBPACK_IMPORTED_MODULE_8__["default"].getPossibleFees(this.props.account, "transfer");
            }
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.account) {
                var npName = np.account.get("name");
                var currentName = this.props.account && this.props.account.get("name");

                if (!this.props.account || npName !== currentName) {
                    // Update the current account in order to access the header right menu options
                    actions_AccountActions__WEBPACK_IMPORTED_MODULE_1__["default"].setCurrentAccount.defer(npName);
                    // Fetch possible fee assets here to avoid async issues later (will resolve assets)
                    common_account_utils__WEBPACK_IMPORTED_MODULE_8__["default"].getPossibleFees(np.account, "transfer");
                }
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                myActiveAccounts = _props.myActiveAccounts,
                searchAccounts = _props.searchAccounts,
                settings = _props.settings,
                wallet_locked = _props.wallet_locked,
                account = _props.account,
                hiddenAssets = _props.hiddenAssets;


            if (!account) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Page404_Page404__WEBPACK_IMPORTED_MODULE_10__["default"], null);
            }
            var account_name = this.props.account.get("name");
            var isMyAccount = stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].isMyAccount(account);

            var passOnProps = {
                account_name: account_name,
                myActiveAccounts: myActiveAccounts,
                searchAccounts: searchAccounts,
                settings: settings,
                wallet_locked: wallet_locked,
                account: account,
                isMyAccount: isMyAccount,
                hiddenAssets: hiddenAssets,
                contained: true,
                balances: account.get("balances", Object(immutable__WEBPACK_IMPORTED_MODULE_9__["List"])()).toList(),
                orders: account.get("orders", Object(immutable__WEBPACK_IMPORTED_MODULE_9__["List"])()).toList(),
                viewSettings: this.props.viewSettings,
                proxy: account.getIn(["options", "voting_account"]),
                history: this.props.history
            };

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-block page-layout" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block no-padding" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Switch"],
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name,
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountOverview__WEBPACK_IMPORTED_MODULE_21__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Redirect"], {
                            from: "/account/" + account_name + "/overview",
                            to: "/account/" + account_name
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/assets",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssets__WEBPACK_IMPORTED_MODULE_12__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/create-asset",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssetCreate__WEBPACK_IMPORTED_MODULE_13__["AccountAssetCreate"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/update-asset/:asset",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssetUpdate__WEBPACK_IMPORTED_MODULE_14__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/member-stats",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountMembership__WEBPACK_IMPORTED_MODULE_15__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/vesting",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountVesting__WEBPACK_IMPORTED_MODULE_16__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/permissions",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissions__WEBPACK_IMPORTED_MODULE_17__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/voting",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountVoting__WEBPACK_IMPORTED_MODULE_20__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/whitelist",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountWhitelist__WEBPACK_IMPORTED_MODULE_19__["default"], passOnProps);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                            path: "/account/" + account_name + "/signedmessages",
                            exact: true,
                            render: function render() {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountSignedMessages__WEBPACK_IMPORTED_MODULE_18__["default"], passOnProps);
                            }
                        })
                    )
                )
            );
        }
    }]);

    return AccountPage;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPage.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAccount.isRequired
};

AccountPage = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(AccountPage, {
    show_loader: true
});

var AccountPageStoreWrapper = function (_React$Component2) {
    _inherits(AccountPageStoreWrapper, _React$Component2);

    function AccountPageStoreWrapper() {
        _classCallCheck(this, AccountPageStoreWrapper);

        return _possibleConstructorReturn(this, (AccountPageStoreWrapper.__proto__ || Object.getPrototypeOf(AccountPageStoreWrapper)).apply(this, arguments));
    }

    _createClass(AccountPageStoreWrapper, [{
        key: "render",
        value: function render() {
            var account_name = this.props.match.params.account_name;
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPage, _extends({}, this.props, { account: account_name }));
        }
    }]);

    return AccountPageStoreWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(alt_react__WEBPACK_IMPORTED_MODULE_7__["connect"])(AccountPageStoreWrapper, {
    listenTo: function listenTo() {
        return [stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"], stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"], stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_4__["default"]];
    },
    getProps: function getProps() {
        return {
            myActiveAccounts: stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].getState().myActiveAccounts,
            searchAccounts: stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].getState().searchAccounts,
            settings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().settings,
            hiddenAssets: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().hiddenAssets,
            wallet_locked: stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().locked,
            viewSettings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().viewSettings
        };
    }
}));

/***/ }),

/***/ 2676:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2081);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(823);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1819);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2377);
/* harmony import */ var stores_AssetStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2376);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(578);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2085);
/* harmony import */ var _LoadingIndicator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1944);
/* harmony import */ var _Modal_IssueModal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2677);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1859);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2102);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(536);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2304);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2678);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(1867);


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }



















var AccountAssets = function (_React$Component) {
    _inherits(AccountAssets, _React$Component);

    function AccountAssets(props) {
        _classCallCheck(this, AccountAssets);

        var _this = _possibleConstructorReturn(this, (AccountAssets.__proto__ || Object.getPrototypeOf(AccountAssets)).call(this, props));

        _this.state = {
            isIssueAssetModalVisible: false,
            create: {
                symbol: "",
                name: "",
                description: "",
                max_supply: 1000000000000000,
                precision: 4
            },
            issue: {
                amount: 0,
                to: "",
                to_id: "",
                asset_id: "",
                symbol: ""
            },
            errors: {
                symbol: null
            },
            isValid: false,
            searchTerm: ""
        };

        _this._searchAccounts = Object(lodash_es_debounce__WEBPACK_IMPORTED_MODULE_0__["default"])(_this._searchAccounts, 150);

        _this.showIssueAssetModal = _this.showIssueAssetModal.bind(_this);
        _this.hideIssueAssetModal = _this.hideIssueAssetModal.bind(_this);
        return _this;
    }

    _createClass(AccountAssets, [{
        key: "showIssueAssetModal",
        value: function showIssueAssetModal() {
            this.setState({
                isIssueAssetModalVisible: true
            });
        }
    }, {
        key: "hideIssueAssetModal",
        value: function hideIssueAssetModal() {
            this.setState({
                isIssueAssetModalVisible: false
            });
        }
    }, {
        key: "_checkAssets",
        value: function _checkAssets(assets, force) {
            if (this.props.account.get("assets").size) return;
            var lastAsset = assets.sort(function (a, b) {
                if (a.symbol > b.symbol) {
                    return 1;
                } else if (a.symbol < b.symbol) {
                    return -1;
                } else {
                    return 0;
                }
            }).last();

            if (assets.size === 0 || force) {
                actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__["default"].getAssetList.defer("A", 100);
                this.setState({ assetsFetched: 100 });
            } else if (assets.size >= this.state.assetsFetched) {
                actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__["default"].getAssetList.defer(lastAsset.symbol, 100);
                this.setState({ assetsFetched: this.state.assetsFetched + 99 });
            }
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            this._checkAssets(nextProps.assets);
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            this._checkAssets(this.props.assets, true);
        }
    }, {
        key: "_onIssueInput",
        value: function _onIssueInput(value, e) {
            var key = e.target.id;
            var issue = this.state.issue;


            if (key === "to") {
                this._searchAccounts(e.target.value);
                issue.to = e.target.value;
                var account = this.props.searchAccounts.findEntry(function (name) {
                    return name === e.target.value;
                });

                issue.to_id = account ? account[0] : null;
            } else {
                issue[value] = e.target.value;
            }

            this.setState({ issue: issue });
        }
    }, {
        key: "_searchAccounts",
        value: function _searchAccounts(searchTerm) {
            actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__["default"].accountSearch(searchTerm);
        }
    }, {
        key: "_issueButtonClick",
        value: function _issueButtonClick(asset_id, symbol, e) {
            e.preventDefault();
            var issue = this.state.issue;

            issue.asset_id = asset_id;
            issue.symbol = symbol;
            this.setState({ issue: issue });
            this.showIssueAssetModal();
        }
    }, {
        key: "_editButtonClick",
        value: function _editButtonClick(symbol, account_name, e) {
            e.preventDefault();
            this.props.history.push("/account/" + account_name + "/update-asset/" + symbol);
        }
    }, {
        key: "_createButtonClick",
        value: function _createButtonClick(account_name) {
            this.props.history.push("/account/" + account_name + "/create-asset");
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var _props = this.props,
                account = _props.account,
                account_name = _props.account_name,
                assets = _props.assets,
                assetsList = _props.assetsList;


            var accountExists = true;
            if (!account) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_LoadingIndicator__WEBPACK_IMPORTED_MODULE_9__["default"], { type: "circle" });
            } else if (account.notFound) {
                accountExists = false;
            }
            if (!accountExists) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "grid-block" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "h5",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            component: "h5",
                            content: "account.errors.not_found",
                            name: account_name
                        })
                    )
                );
            }

            if (assetsList.length) {
                assets = assets.clear();
                assetsList.forEach(function (a) {
                    if (a) assets = assets.set(a.get("id"), a.toJS());
                });
            }
            var myAssets = assets.filter(function (asset) {
                return asset.issuer === account.get("id");
            }).sort(function (a, b) {
                return parseInt(a.id.substring(4, a.id.length), 10) - parseInt(b.id.substring(4, b.id.length), 10);
            }).map(function (asset) {
                var description = common_asset_utils__WEBPACK_IMPORTED_MODULE_12__["default"].parseDescription(asset.options.description);
                var desc = description.short_name ? description.short_name : description.main;

                if (desc.length > 100) {
                    desc = desc.substr(0, 100) + "...";
                }

                var dynamicObject = _this2.props.getDynamicObject(asset.dynamic_asset_data_id);

                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "tr",
                    { key: asset.symbol },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "left" } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"],
                            { to: "/asset/" + asset.symbol },
                            asset.symbol
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "left" } },
                        "bitasset" in asset ? asset.bitasset.is_prediction_market ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.pm" }) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.mpa" }) : "User Issued Asset"
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "right" } },
                        dynamicObject ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_8__["default"], {
                            hide_asset: true,
                            amount: parseInt(dynamicObject.get("current_supply"), 10),
                            asset: asset.id
                        }) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "right" } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_8__["default"], {
                            hide_asset: true,
                            amount: parseInt(asset.options.max_supply, 10),
                            asset: asset.id
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        null,
                        !asset.bitasset_data_id ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "a",
                            {
                                onClick: _this2._issueButtonClick.bind(_this2, asset.id, asset.symbol)
                            },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_16__["default"], {
                                name: "cross-circle",
                                className: "rotate45"
                            })
                        ) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "a",
                            {
                                onClick: _this2._editButtonClick.bind(_this2, asset.symbol, account_name)
                            },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_16__["default"], { name: "dashboard" })
                        )
                    )
                );
            }).toArray();

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_15__["Tabs"],
                            {
                                segmented: false,
                                setting: "issuedAssetsTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding"
                            },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_15__["Tab"],
                                { title: "account.user_issued_assets.issued_assets" },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "div",
                                    { className: "content-block" },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "table",
                                        { className: "table dashboard-table" },
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            "thead",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                "tr",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    { style: { textAlign: "left" } },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.symbol" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    { style: { textAlign: "left" } },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.asset.summary.asset_type" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                                    component: "th",
                                                    content: "markets.supply",
                                                    style: { textAlign: "right" }
                                                }),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    {
                                                        style: { textAlign: "right" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.max_supply" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    {
                                                        style: {
                                                            textAlign: "center"
                                                        }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "transaction.trxTypes.asset_issue" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    {
                                                        style: {
                                                            textAlign: "center"
                                                        }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "transaction.trxTypes.asset_update" })
                                                )
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            "tbody",
                                            null,
                                            myAssets
                                        )
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "div",
                                    { className: "content-block" },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "button",
                                        {
                                            className: "button",
                                            onClick: this._createButtonClick.bind(this, account_name)
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "transaction.trxTypes.asset_create" })
                                    )
                                )
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Modal_IssueModal__WEBPACK_IMPORTED_MODULE_10__["default"], {
                        visible: this.state.isIssueAssetModalVisible,
                        hideModal: this.hideIssueAssetModal,
                        showModal: this.showIssueAssetModal,
                        asset_to_issue: this.state.issue.asset_id
                    })
                )
            );
        }
    }]);

    return AccountAssets;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

AccountAssets.defaultProps = {
    symbol: "",
    name: "",
    description: "",
    max_supply: 0,
    precision: 0
};
AccountAssets.propTypes = {
    symbol: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string.isRequired
};


AccountAssets = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_14__["default"])(AccountAssets, {
    propNames: ["assetsList"],
    asList: true,
    withDynamic: true
});

/* harmony default export */ __webpack_exports__["default"] = (Object(alt_react__WEBPACK_IMPORTED_MODULE_11__["connect"])(AccountAssets, {
    listenTo: function listenTo() {
        return [stores_AssetStore__WEBPACK_IMPORTED_MODULE_6__["default"]];
    },
    getProps: function getProps(props) {
        var assets = Object(immutable__WEBPACK_IMPORTED_MODULE_13__["Map"])(),
            assetsList = Object(immutable__WEBPACK_IMPORTED_MODULE_13__["List"])();
        if (props.account.get("assets", []).size) {
            props.account.get("assets", []).forEach(function (id) {
                assetsList = assetsList.push(id);
            });
        } else {
            assets = stores_AssetStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().assets;
        }
        return { assets: assets, assetsList: assetsList };
    }
}));

/***/ }),

/***/ 2677:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(Buffer) {/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1959);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1960);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(580);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var api_ApplicationApi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(600);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2308);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2084);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(733);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }












var IssueModal = function (_React$Component) {
    _inherits(IssueModal, _React$Component);

    function IssueModal(props) {
        _classCallCheck(this, IssueModal);

        var _this = _possibleConstructorReturn(this, (IssueModal.__proto__ || Object.getPrototypeOf(IssueModal)).call(this, props));

        _this.state = {
            amount: props.amount,
            to: props.to,
            to_id: null,
            memo: ""
        };
        return _this;
    }

    _createClass(IssueModal, [{
        key: "onAmountChanged",
        value: function onAmountChanged(_ref) {
            var amount = _ref.amount;

            this.setState({ amount: amount });
        }
    }, {
        key: "onToAccountChanged",
        value: function onToAccountChanged(to) {
            var state = to ? { to: to.get("name"), to_id: to.get("id") } : { to_id: null };
            this.setState(state);
        }
    }, {
        key: "onToChanged",
        value: function onToChanged(to) {
            this.setState({ to: to, to_id: null });
        }
    }, {
        key: "onSubmit",
        value: function onSubmit() {
            this.props.hideModal();
            var asset_to_issue = this.props.asset_to_issue;

            var precision = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_precision(asset_to_issue.get("precision"));
            var amount = this.state.amount.toString().replace(/,/g, "");
            amount *= precision;

            api_ApplicationApi__WEBPACK_IMPORTED_MODULE_6__["default"].issue_asset(this.state.to_id, asset_to_issue.get("issuer"), asset_to_issue.get("id"), amount, this.state.memo ? new Buffer(this.state.memo, "utf-8") : this.state.memo).catch(function (err) {
                console.log("issue error caught here:", err);
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__["Notification"].error({
                    message: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("notifications.asset_issue_failure") //: ${this.state.wallet_public_name}
                });
            });

            this.setState({
                amount: 0,
                to: "",
                to_id: null,
                memo: ""
            });
        }
    }, {
        key: "onMemoChanged",
        value: function onMemoChanged(e) {
            this.setState({ memo: e.target.value });
        }
    }, {
        key: "render",
        value: function render() {
            var asset_to_issue = this.props.asset_to_issue.get("id");
            var tabIndex = 1;

            var footer = [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__["Button"],
                {
                    type: "primary",
                    key: "submit",
                    onClick: this.onSubmit.bind(this, this.state.to, this.state.amount),
                    disabled: !this.state.to_id || !this.state.amount
                },
                counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("modal.issue.submit")
            ), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__["Button"],
                { key: "cancel", onClick: this.props.hideModal },
                counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("cancel")
            )];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__["Modal"],
                {
                    title: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("modal.issue.submit"),
                    visible: this.props.visible,
                    onCancel: this.props.hideModal,
                    footer: footer
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "form",
                    { className: "grid-block vertical full-width-content" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "grid-container " },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "content-block" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_7__["default"], {
                                label: "modal.issue.to",
                                accountName: this.state.to,
                                onAccountChanged: this.onToAccountChanged.bind(this),
                                onChange: this.onToChanged.bind(this),
                                account: this.state.to,
                                tabIndex: tabIndex++
                            })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "content-block" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                label: "modal.issue.amount",
                                amount: this.state.amount,
                                onChange: this.onAmountChanged.bind(this),
                                asset: asset_to_issue,
                                assets: [asset_to_issue],
                                tabIndex: tabIndex++
                            })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "content-block" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "label",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    component: "span",
                                    content: "transfer.memo"
                                }),
                                " ",
                                "(",
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "transfer.optional" }),
                                ")"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                rows: "3",
                                value: this.state.memo,
                                tabIndex: tabIndex++,
                                onChange: this.onMemoChanged.bind(this)
                            })
                        )
                    )
                )
            );
        }
    }]);

    return IssueModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

IssueModal.propTypes = {
    asset_to_issue: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAsset.isRequired
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(IssueModal));
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(436).Buffer))

/***/ }),

/***/ 2679:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AccountAssetCreate", function() { return AccountAssetCreate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BitAssetOptions", function() { return BitAssetOptions; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(829);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2377);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2132);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(580);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(429);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2085);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1959);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1960);
/* harmony import */ var _Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2625);
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(596);
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(bignumber_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2102);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2678);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2084);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2103);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(chain_asset_constants__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var common_trxHelper__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(594);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(823);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(733);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }























var GRAPHENE_MAX_SHARE_SUPPLY = new bignumber_js__WEBPACK_IMPORTED_MODULE_12___default.a(chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_MAX_SHARE_SUPPLY);

var BitAssetOptions = function (_React$Component) {
    _inherits(BitAssetOptions, _React$Component);

    function BitAssetOptions(props) {
        _classCallCheck(this, BitAssetOptions);

        var _this = _possibleConstructorReturn(this, (BitAssetOptions.__proto__ || Object.getPrototypeOf(BitAssetOptions)).call(this, props));

        _this.state = {
            backingAsset: props.backingAsset.get("symbol"),
            error: null
        };
        return _this;
    }

    _createClass(BitAssetOptions, [{
        key: "_onInputBackingAsset",
        value: function _onInputBackingAsset(asset) {
            if (this.props.disableBackingAssetChange) this.props.disabledBackingAssetChangeCallback();else this.setState({
                backingAsset: asset.toUpperCase(),
                error: null
            });
        }
    }, {
        key: "_onFoundBackingAsset",
        value: function _onFoundBackingAsset(asset) {
            if (asset) {
                var backing = asset.get("bitasset") && bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(asset.getIn(["bitasset", "options", "short_backing_asset"]));
                var backing_backing = backing && backing.get("bitasset") && bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(backing.getIn(["bitasset", "options", "short_backing_asset"]));
                if (backing_backing && backing_backing !== "1.3.0") {
                    this.setState({
                        error: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.error_too_deep")
                    });
                    this.props.onUpdate("invalid", true);
                } else if (!asset.getIn(["bitasset", "is_prediction_market"])) {
                    if (this.props.isPredictionMarket && asset.get("precision") !== parseInt(this.props.assetPrecision, 10)) {
                        this.setState({
                            error: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.error_precision", { asset: this.props.assetSymbol })
                        });
                        this.props.onUpdate("invalid", true);
                    } else {
                        this.props.onUpdate("short_backing_asset", asset.get("id"));
                        this.props.onUpdate("invalid", false);
                    }
                } else {
                    this.setState({
                        error: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.error_invalid")
                    });
                    this.props.onUpdate("invalid", true);
                }
            } else {
                this.props.onUpdate("invalid", true);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var bitasset_opts = this.props.bitasset_opts;
            var error = this.state.error;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "small-12 grid-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.feed_lifetime_sec" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.feed_lifetime_sec / 60,
                        onChange: this.props.onUpdate.bind(this, "feed_lifetime_sec")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.minimum_feeds" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.minimum_feeds,
                        onChange: this.props.onUpdate.bind(this, "minimum_feeds")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.force_settlement_delay_sec" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.force_settlement_delay_sec / 60,
                        onChange: this.props.onUpdate.bind(this, "force_settlement_delay_sec")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.force_settlement_offset_percent" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.force_settlement_offset_percent / chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                        onChange: this.props.onUpdate.bind(this, "force_settlement_offset_percent")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.maximum_force_settlement_volume" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.maximum_force_settlement_volume / chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                        onChange: this.props.onUpdate.bind(this, "maximum_force_settlement_volume")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block no-margin small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_11__["default"], {
                        label: "account.user_issued_assets.backing",
                        onChange: this._onInputBackingAsset.bind(this),
                        asset: this.state.backingAsset,
                        assetInput: this.state.backingAsset,
                        tabIndex: 1,
                        style: { width: "100%", paddingRight: "10px" },
                        onFound: this._onFoundBackingAsset.bind(this)
                    }),
                    error ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block has-error" },
                        error
                    ) : null
                )
            );
        }
    }]);

    return BitAssetOptions;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

BitAssetOptions.propTypes = {
    backingAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainAsset.isRequired,
    isUpdate: prop_types__WEBPACK_IMPORTED_MODULE_18___default.a.bool
};
BitAssetOptions.defaultProps = {
    isUpdate: false
};

BitAssetOptions = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__["default"])(BitAssetOptions);

var AccountAssetCreate = function (_React$Component2) {
    _inherits(AccountAssetCreate, _React$Component2);

    function AccountAssetCreate(props) {
        _classCallCheck(this, AccountAssetCreate);

        var _this2 = _possibleConstructorReturn(this, (AccountAssetCreate.__proto__ || Object.getPrototypeOf(AccountAssetCreate)).call(this, props));

        _this2.state = _this2.resetState(props);
        return _this2;
    }

    _createClass(AccountAssetCreate, [{
        key: "resetState",
        value: function resetState(props) {
            // let asset = props.asset.toJS();
            var isBitAsset = false;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(4);
            var corePrecision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(props.core.get("precision"));

            var _getPermissions2 = this._getPermissions({
                isBitAsset: isBitAsset
            }),
                flagBooleans = _getPermissions2.flagBooleans,
                permissionBooleans = _getPermissions2.permissionBooleans;

            // let flags = assetUtils.getFlags(flagBooleans);
            // let permissions = assetUtils.getPermissions(permissionBooleans, isBitAsset);
            // console.log("all permissions:", permissionBooleans, permissions)

            var coreRateBaseAssetName = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset("1.3.0").get("symbol");

            return {
                update: {
                    symbol: "",
                    precision: 4,
                    max_supply: 100000,
                    max_market_fee: 0,
                    market_fee_percent: 0,
                    description: { main: "" }
                },
                errors: {
                    max_supply: null
                },
                isValid: true,
                flagBooleans: flagBooleans,
                permissionBooleans: permissionBooleans,
                isBitAsset: isBitAsset,
                is_prediction_market: false,
                core_exchange_rate: {
                    quote: {
                        asset_id: null,
                        amount: 1
                    },
                    base: {
                        asset_id: "1.3.0",
                        amount: 1
                    }
                },
                bitasset_opts: {
                    feed_lifetime_sec: 60 * 60 * 24,
                    minimum_feeds: 7,
                    force_settlement_delay_sec: 60 * 60 * 24,
                    force_settlement_offset_percent: 1 * chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                    maximum_force_settlement_volume: 20 * chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                    short_backing_asset: "1.3.0"
                },
                marketInput: ""
            };
        }
    }, {
        key: "_getPermissions",
        value: function _getPermissions(state) {
            var flagBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getFlagBooleans(0, state.isBitAsset);
            var permissionBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getFlagBooleans("all", state.isBitAsset);

            return {
                flagBooleans: flagBooleans,
                permissionBooleans: permissionBooleans
            };
        }
    }, {
        key: "_createAsset",
        value: function _createAsset(e) {
            e.preventDefault();
            var _state = this.state,
                update = _state.update,
                flagBooleans = _state.flagBooleans,
                permissionBooleans = _state.permissionBooleans,
                core_exchange_rate = _state.core_exchange_rate,
                isBitAsset = _state.isBitAsset,
                is_prediction_market = _state.is_prediction_market,
                bitasset_opts = _state.bitasset_opts;
            var account = this.props.account;


            var flags = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getFlags(flagBooleans, isBitAsset);
            var permissions = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getPermissions(permissionBooleans, isBitAsset);

            if (this.state.marketInput !== update.description.market) {
                update.description.market = "";
            }
            var description = JSON.stringify(update.description);

            actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__["default"].createAsset(account.get("id"), update, flags, permissions, core_exchange_rate, isBitAsset, is_prediction_market, bitasset_opts, description).then(function (result) {
                console.log("... AssetActions.createAsset(account_id, update)", account.get("id"), update, flags, permissions);
            });
        }
    }, {
        key: "_hasChanged",
        value: function _hasChanged() {
            return !common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].are_equal_shallow(this.state, this.resetState(this.props));
        }
    }, {
        key: "_reset",
        value: function _reset(e) {
            e.preventDefault();

            this.setState(this.resetState(this.props));
        }
    }, {
        key: "_forcePositive",
        value: function _forcePositive(number) {
            return parseFloat(number) < 0 ? "0" : number;
        }
    }, {
        key: "_onUpdateDescription",
        value: function _onUpdateDescription(value, e) {
            var update = this.state.update;

            var updateState = true;

            switch (value) {
                case "condition":
                    if (e.target.value.length > 60) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "short_name":
                    if (e.target.value.length > 32) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "market":
                    update.description[value] = e;
                    break;

                case "visible":
                    update.description[value] = !update.description[value];
                    break;

                default:
                    update.description[value] = e.target.value;
                    break;
            }

            if (updateState) {
                this.forceUpdate();
                this._validateEditFields(update);
            }
        }
    }, {
        key: "onChangeBitAssetOpts",
        value: function onChangeBitAssetOpts(value, e) {
            var _state2 = this.state,
                bitasset_opts = _state2.bitasset_opts,
                errors = _state2.errors;


            switch (value) {
                case "force_settlement_offset_percent":
                case "maximum_force_settlement_volume":
                    bitasset_opts[value] = parseFloat(e.target.value) * chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT;
                    break;
                case "minimum_feeds":
                    bitasset_opts[value] = parseInt(e.target.value, 10);
                    break;
                case "feed_lifetime_sec":
                case "force_settlement_delay_sec":
                    console.log(e.target.value, parseInt(parseFloat(e.target.value) * 60, 10));
                    bitasset_opts[value] = parseInt(parseFloat(e.target.value) * 60, 10);
                    break;

                case "short_backing_asset":
                    bitasset_opts[value] = e;
                    break;

                case "invalid":
                    errors.invalid_bitasset = e;
                    break;

                default:
                    bitasset_opts[value] = e.target.value;
                    break;
            }

            var isValid = !errors.symbol && !errors.max_supply && !errors.invalid_bitasset;

            this.setState({ isValid: isValid, errors: errors });
        }
    }, {
        key: "_onUpdateInput",
        value: function _onUpdateInput(value, e) {
            var _state3 = this.state,
                update = _state3.update,
                errors = _state3.errors;

            var updateState = true;
            var shouldRestoreCursor = false;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(this.state.update.precision);
            var target = e.target;
            var caret = target.selectionStart;
            var inputValue = target.value;

            switch (value) {
                case "market_fee_percent":
                    update[value] = this._forcePositive(target.value);
                    break;

                case "max_market_fee":
                    if (new bignumber_js__WEBPACK_IMPORTED_MODULE_12___default.a(inputValue).times(precision).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                        errors.max_market_fee = "The number you tried to enter is too large";
                        return this.setState({ errors: errors });
                    }
                    target.value = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(target.value, this.state.update.precision);
                    update[value] = target.value;
                    break;

                case "precision":
                    // Enforce positive number
                    update[value] = this._forcePositive(target.value);
                    break;

                case "max_supply":
                    shouldRestoreCursor = true;

                    var regexp_numeral = new RegExp(/[[:digit:]]/);

                    // Ensure input is valid
                    if (!regexp_numeral.test(target.value)) {
                        target.value = target.value.replace(/[^0-9.]/g, "");
                    }

                    // Catch initial decimal input
                    if (target.value.charAt(0) == ".") {
                        target.value = "0.";
                    }

                    // Catch double decimal and remove if invalid
                    if (target.value.charAt(target.value.length) != target.value.search(".")) {
                        target.value.substr(1);
                    }

                    target.value = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(target.value, this.state.update.precision);
                    update[value] = target.value;

                    // if ((new big(target.value)).times(Math.pow(10, precision).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                    //     return this.setState({
                    //         update,
                    //         errors: {max_supply: "The number you tried to enter is too large"
                    //     }});
                    // }
                    break;

                case "symbol":
                    shouldRestoreCursor = true;
                    // Enforce uppercase
                    var symbol = target.value.toUpperCase();
                    // Enforce characters
                    var regexp = new RegExp("^[.A-Z0-9]+$");
                    if (symbol !== "" && !regexp.test(symbol)) {
                        break;
                    }
                    bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(symbol);
                    update[value] = this._forcePositive(symbol);
                    break;

                default:
                    update[value] = target.value;
                    break;
            }

            if (updateState) {
                this.setState({ update: update }, function () {
                    if (shouldRestoreCursor) {
                        var selectionStart = caret - (inputValue.length - update[value].length);
                        target.setSelectionRange(selectionStart, selectionStart);
                    }
                });
                this._validateEditFields(update);
            }
        }
    }, {
        key: "_validateEditFields",
        value: function _validateEditFields(new_state) {
            var errors = this.state.errors;

            errors.max_supply = null;

            errors.symbol = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainValidation"].is_valid_symbol_error(new_state.symbol);
            var existingAsset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(new_state.symbol);
            if (existingAsset) {
                errors.symbol = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.exists");
            }

            try {
                errors.max_supply = new_state.max_supply <= 0 ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.max_positive") : new bignumber_js__WEBPACK_IMPORTED_MODULE_12___default.a(new_state.max_supply).times(Math.pow(10, new_state.precision)).gt(GRAPHENE_MAX_SHARE_SUPPLY) ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large") : null;
            } catch (err) {
                console.log("err:", err);
                errors.max_supply = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large");
            }

            var isValid = !errors.symbol && !errors.max_supply && !errors.invalid_bitasset;

            this.setState({ isValid: isValid, errors: errors });
        }
    }, {
        key: "_onFlagChange",
        value: function _onFlagChange(key) {
            var booleans = this.state.flagBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                flagBooleans: booleans
            });
        }
    }, {
        key: "_onPermissionChange",
        value: function _onPermissionChange(key) {
            var booleans = this.state.permissionBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                permissionBooleans: booleans
            });
        }
    }, {
        key: "_onInputCoreAsset",
        value: function _onInputCoreAsset(type, asset) {
            if (type === "quote") {
                this.setState({
                    quoteAssetInput: asset
                });
            } else if (type === "base") {
                this.setState({
                    baseAssetInput: asset
                });
            }
        }
    }, {
        key: "_onFoundCoreAsset",
        value: function _onFoundCoreAsset(type, asset) {
            if (asset) {
                var core_rate = this.state.core_exchange_rate;
                core_rate[type].asset_id = asset.get("id");

                this.setState({
                    core_exchange_rate: core_rate
                });

                this._validateEditFields({
                    max_supply: this.state.max_supply,
                    core_exchange_rate: core_rate
                });
            }
        }
    }, {
        key: "_onInputMarket",
        value: function _onInputMarket(asset) {
            this.setState({
                marketInput: asset
            });
        }
    }, {
        key: "_onFoundMarketAsset",
        value: function _onFoundMarketAsset(asset) {
            if (asset) {
                this._onUpdateDescription("market", asset.get("symbol"));
            }
        }
    }, {
        key: "_onCoreRateChange",
        value: function _onCoreRateChange(type, e) {
            var amount = void 0,
                asset = void 0;
            if (type === "quote") {
                amount = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(e.target.value, this.state.update.precision);
                asset = null;
            } else {
                if (!e || !("amount" in e)) {
                    return;
                }
                amount = e.amount == "" ? "0" : common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(e.amount.toString().replace(/,/g, ""), this.props.core.get("precision"));
                asset = e.asset.get("id");
            }

            var core_exchange_rate = this.state.core_exchange_rate;

            core_exchange_rate[type] = {
                amount: amount,
                asset_id: asset
            };
            this.forceUpdate();
        }
    }, {
        key: "_onToggleBitAsset",
        value: function _onToggleBitAsset() {
            var update = this.state.update;

            this.state.isBitAsset = !this.state.isBitAsset;
            if (!this.state.isBitAsset) {
                this.state.is_prediction_market = false;
            }

            var _getPermissions3 = this._getPermissions(this.state),
                flagBooleans = _getPermissions3.flagBooleans,
                permissionBooleans = _getPermissions3.permissionBooleans;

            this.state.flagBooleans = flagBooleans;
            this.state.permissionBooleans = permissionBooleans;

            this.forceUpdate();
        }
    }, {
        key: "_onTogglePM",
        value: function _onTogglePM() {
            this.state.is_prediction_market = !this.state.is_prediction_market;
            this.state.update.precision = this.props.core.get("precision");
            this.state.core_exchange_rate.base.asset_id = this.props.core.get("id");
            this.forceUpdate();
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                globalObject = _props.globalObject,
                core = _props.core;
            var _state4 = this.state,
                errors = _state4.errors,
                isValid = _state4.isValid,
                update = _state4.update,
                flagBooleans = _state4.flagBooleans,
                permissionBooleans = _state4.permissionBooleans,
                core_exchange_rate = _state4.core_exchange_rate,
                is_prediction_market = _state4.is_prediction_market,
                isBitAsset = _state4.isBitAsset,
                bitasset_opts = _state4.bitasset_opts;

            // Estimate the asset creation fee from the symbol character length

            var symbolLength = update.symbol.length,
                createFee = "N/A";

            if (symbolLength === 3) {
                createFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__["default"], {
                    amount: Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_17__["estimateFee"])("asset_create", ["symbol3"], globalObject),
                    asset: "1.3.0"
                });
            } else if (symbolLength === 4) {
                createFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__["default"], {
                    amount: Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_17__["estimateFee"])("asset_create", ["symbol4"], globalObject),
                    asset: "1.3.0"
                });
            } else if (symbolLength > 4) {
                createFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__["default"], {
                    amount: Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_17__["estimateFee"])("asset_create", ["long_symbol"], globalObject),
                    asset: "1.3.0"
                });
            }

            // Loop over flags
            var flags = [];
            var getFlag = function getFlag(key, onClick, isChecked) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { key: "table_" + key, className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none", width: "80%" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.user_issued_assets." + key
                                }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Switch"], {
                                    checked: isChecked,
                                    onChange: onClick
                                })
                            )
                        )
                    )
                );
            };
            for (var key in permissionBooleans) {
                if (permissionBooleans[key] && key !== "charge_market_fee") {
                    flags.push(getFlag(key, this._onFlagChange.bind(this, key), flagBooleans[key]));
                }
            }

            flags.push(getFlag("visible", this._onUpdateDescription.bind(this, "visible"), update.description.visible ? false : update.description.visible === false ? true : false));

            // Loop over permissions
            var permissions = [];
            for (var _key in permissionBooleans) {
                permissions.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { key: "table_" + _key, className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none", width: "80%" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.user_issued_assets." + _key
                                }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Switch"], {
                                    checked: permissionBooleans[_key],
                                    onChange: this._onPermissionChange.bind(this, _key)
                                })
                            )
                        )
                    )
                ));
            }

            var confirmButtons = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: "button",
                        onClick: this._reset.bind(this),
                        value: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.perm.reset")
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.reset" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_2___default()("button", { disabled: !isValid }),
                        onClick: this._createAsset.bind(this)
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "header.create_asset" })
                )
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "tabs-header" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "h3",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "header.create_asset" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tabs"],
                            {
                                setting: "createAssetTab",
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block",
                                contentClass: "grid-block shrink small-vertical medium-horizontal padding",
                                segmented: false,
                                actionButtons: confirmButtons
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.primary" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.symbol" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            value: update.symbol,
                                            onChange: this._onUpdateInput.bind(this, "symbol")
                                        })
                                    ),
                                    errors.symbol ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.symbol
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.max_supply" }),
                                        " ",
                                        update.symbol ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "span",
                                            null,
                                            "(",
                                            update.symbol,
                                            ")"
                                        ) : null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            value: update.max_supply,
                                            onChange: this._onUpdateInput.bind(this, "max_supply")
                                        })
                                    ),
                                    errors.max_supply ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.max_supply
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.decimals" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            min: "0",
                                            max: "8",
                                            step: "1",
                                            type: "range",
                                            value: update.precision,
                                            onChange: this._onUpdateInput.bind(this, "precision")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        update.precision
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        {
                                            style: { marginBottom: 10 },
                                            className: "txtlabel cancel"
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.precision_warning" })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "table",
                                        {
                                            className: "table",
                                            style: { width: "inherit" }
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tbody",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tr",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    { style: { border: "none" } },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                                        content: "account.user_issued_assets.mpa"
                                                    }),
                                                    ":"
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    { style: { border: "none" } },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Switch"], {
                                                        checked: isBitAsset,
                                                        onChange: this._onToggleBitAsset.bind(this)
                                                    })
                                                )
                                            )
                                        )
                                    ),
                                    isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "table",
                                        {
                                            className: "table",
                                            style: { width: "inherit" }
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tbody",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tr",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    {
                                                        style: { border: "none" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                                        content: "account.user_issued_assets.pm"
                                                    }),
                                                    ":"
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    {
                                                        style: { border: "none" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Switch"], {
                                                        checked: is_prediction_market,
                                                        onChange: this._onTogglePM.bind(this)
                                                    })
                                                )
                                            )
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.core_exchange_rate"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "grid-block no-margin" },
                                            errors.quote_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.quote_asset
                                            ) : null,
                                            errors.base_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.base_asset
                                            ) : null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    {
                                                        className: "amount-selector",
                                                        style: {
                                                            width: "100%",
                                                            paddingRight: "10px"
                                                        }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                                        component: "label",
                                                        content: "account.user_issued_assets.quote"
                                                    }),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "div",
                                                        { className: "inline-label" },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                            type: "text",
                                                            placeholder: "0.0",
                                                            onChange: this._onCoreRateChange.bind(this, "quote"),
                                                            value: core_exchange_rate.quote.amount
                                                        })
                                                    )
                                                )
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                                    label: "account.user_issued_assets.base",
                                                    amount: core_exchange_rate.base.amount,
                                                    onChange: this._onCoreRateChange.bind(this, "base"),
                                                    asset: core_exchange_rate.base.asset_id,
                                                    assets: [core_exchange_rate.base.asset_id],
                                                    placeholder: "0.0",
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingLeft: "10px"
                                                    }
                                                })
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "h5",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "exchange.price" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "span",
                                                    null,
                                                    ":",
                                                    " ",
                                                    common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].format_number(common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_price(core_exchange_rate.quote.amount * common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(update.precision), {
                                                        precision: update.precision
                                                    }, core_exchange_rate.base.amount * common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(core), core), 2 + (parseInt(update.precision, 10) || 8))
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "span",
                                                    null,
                                                    " ",
                                                    update.symbol,
                                                    "/",
                                                    core.get("symbol")
                                                )
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_1",
                                            component: "label",
                                            className: "has-error"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_2",
                                            component: "p"
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        createFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.description" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "label",
                                        content: "account.user_issued_assets.description"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                            style: { height: "7rem" },
                                            rows: "1",
                                            value: update.description.main,
                                            onChange: this._onUpdateDescription.bind(this, "main")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "label",
                                        content: "account.user_issued_assets.short"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            rows: "1",
                                            value: update.description.short_name,
                                            onChange: this._onUpdateDescription.bind(this, "short_name")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "label",
                                        content: "account.user_issued_assets.market"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_11__["default"], {
                                        label: "account.user_issued_assets.name",
                                        onChange: this._onInputMarket.bind(this),
                                        asset: this.state.marketInput,
                                        assetInput: this.state.marketInput,
                                        style: {
                                            width: "100%",
                                            paddingRight: "10px"
                                        },
                                        onFound: this._onFoundMarketAsset.bind(this)
                                    }),
                                    is_prediction_market ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.condition"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "text",
                                                rows: "1",
                                                value: update.description.condition,
                                                onChange: this._onUpdateDescription.bind(this, "condition")
                                            })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.expiry"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "date",
                                                value: update.description.expiry,
                                                onChange: this._onUpdateDescription.bind(this, "expiry")
                                            })
                                        )
                                    ) : null
                                )
                            ),
                            isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.bitasset_opts" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BitAssetOptions, {
                                    bitasset_opts: bitasset_opts,
                                    onUpdate: this.onChangeBitAssetOpts.bind(this),
                                    backingAsset: bitasset_opts.short_backing_asset,
                                    assetPrecision: update.precision,
                                    assetSymbol: update.symbol,
                                    isPredictionMarket: is_prediction_market
                                })
                            ) : null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.permissions" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { maxWidth: 800 } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                            path: "components/AccountAssetCreate",
                                            section: "permissions"
                                        })
                                    ),
                                    permissions
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.flags" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { maxWidth: 800 } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                            path: "components/AccountAssetCreate",
                                            section: "flags"
                                        })
                                    ),
                                    permissionBooleans["charge_market_fee"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.market_fee"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "table",
                                            { className: "table" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tbody",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "tr",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        {
                                                            style: {
                                                                border: "none",
                                                                width: "80%"
                                                            }
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.charge_market_fee" }),
                                                        ":"
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        {
                                                            style: {
                                                                border: "none"
                                                            }
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Switch"], {
                                                            checked: flagBooleans.charge_market_fee,
                                                            onChange: this._onFlagChange.bind(this, "charge_market_fee")
                                                        })
                                                    )
                                                )
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_2___default()({
                                                    disabled: !flagBooleans.charge_market_fee
                                                })
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.market_fee" }),
                                                " ",
                                                "(%)",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                    type: "number",
                                                    value: update.market_fee_percent,
                                                    onChange: this._onUpdateInput.bind(this, "market_fee_percent")
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.max_market_fee" }),
                                                " ",
                                                "(",
                                                update.symbol,
                                                ")",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                    type: "number",
                                                    value: update.max_market_fee,
                                                    onChange: this._onUpdateInput.bind(this, "max_market_fee")
                                                })
                                            ),
                                            errors.max_market_fee ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.max_market_fee
                                            ) : null
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "h3",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.flags" })
                                    ),
                                    flags
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountAssetCreate;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountAssetCreate.propTypes = {
    core: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainAsset.isRequired,
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainObject.isRequired
};
AccountAssetCreate.defaultProps = {
    globalObject: "2.0.0",
    core: "1.3.0"
};


AccountAssetCreate = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__["default"])(AccountAssetCreate);



/***/ }),

/***/ 2680:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(829);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2377);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2132);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(580);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(429);
/* harmony import */ var _Utility_FormattedFee__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2681);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1959);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1960);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2304);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2084);
/* harmony import */ var _Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2425);
/* harmony import */ var _Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2625);
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(596);
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(bignumber_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2102);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2678);
/* harmony import */ var _AccountAssetCreate__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2679);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2103);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(chain_asset_constants__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var _AssetWhitelist__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2682);
/* harmony import */ var _AssetFeedProducers__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(2683);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(730);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(1819);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(733);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_24__);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }




























var GRAPHENE_MAX_SHARE_SUPPLY = new bignumber_js__WEBPACK_IMPORTED_MODULE_15___default.a(chain_asset_constants__WEBPACK_IMPORTED_MODULE_19___default.a.GRAPHENE_MAX_SHARE_SUPPLY);

var disabledBackingAssetChangeCallback = function disabledBackingAssetChangeCallback() {
    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_24__["Notification"].error({
        message: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.invalid_backing_asset_change")
    });
};

var AccountAssetUpdate = function (_React$Component) {
    _inherits(AccountAssetUpdate, _React$Component);

    function AccountAssetUpdate(props) {
        _classCallCheck(this, AccountAssetUpdate);

        var _this = _possibleConstructorReturn(this, (AccountAssetUpdate.__proto__ || Object.getPrototypeOf(AccountAssetUpdate)).call(this, props));

        _this.state = _this.resetState(props);

        _this.showAssetUpdateConfirmationModal = _this.showAssetUpdateConfirmationModal.bind(_this);
        _this.hideAssetUpdateConfirmationModal = _this.hideAssetUpdateConfirmationModal.bind(_this);
        return _this;
    }

    _createClass(AccountAssetUpdate, [{
        key: "_openConfirm",
        value: function _openConfirm() {
            this.showAssetUpdateConfirmationModal();
        }
    }, {
        key: "_cancelConfirm",
        value: function _cancelConfirm() {
            this.hideAssetUpdateConfirmationModal();
        }
    }, {
        key: "resetState",
        value: function resetState(props) {
            var asset = props.asset.toJS();
            var isBitAsset = asset.bitasset_data_id !== undefined;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(asset.precision);
            var corePrecision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(props.core.get("precision"));

            var max_market_fee = new bignumber_js__WEBPACK_IMPORTED_MODULE_15___default.a(asset.options.max_market_fee).div(precision).toString();
            var max_supply = new bignumber_js__WEBPACK_IMPORTED_MODULE_15___default.a(asset.options.max_supply).div(precision).toString();
            var core_exchange_rate = asset.options.core_exchange_rate;
            core_exchange_rate.quote.amount = core_exchange_rate.quote.asset_id === asset.id ? new bignumber_js__WEBPACK_IMPORTED_MODULE_15___default.a(core_exchange_rate.quote.amount).div(precision).toString() : new bignumber_js__WEBPACK_IMPORTED_MODULE_15___default.a(core_exchange_rate.quote.amount).div(corePrecision).toString();

            core_exchange_rate.base.amount = core_exchange_rate.base.asset_id === asset.id ? new bignumber_js__WEBPACK_IMPORTED_MODULE_15___default.a(core_exchange_rate.base.amount).div(precision).toString() : new bignumber_js__WEBPACK_IMPORTED_MODULE_15___default.a(core_exchange_rate.base.amount).div(corePrecision).toString();

            var flagBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlagBooleans(asset.options.flags, isBitAsset);
            var permissionBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlagBooleans(asset.options.issuer_permissions, isBitAsset);
            asset.options.market_fee_percent /= 100;

            var coreRateQuoteAssetName = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.quote.asset_id).get("symbol");
            var coreRateBaseAssetName = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.base.asset_id).get("symbol");

            return {
                isAssetUpdateConfirmationModalVisible: false,
                update: {
                    max_supply: max_supply,
                    max_market_fee: max_market_fee,
                    market_fee_percent: asset.options.market_fee_percent,
                    description: common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].parseDescription(asset.options.description)
                },
                core_exchange_rate: core_exchange_rate,
                issuer: asset.issuer,
                new_issuer_account_id: null,
                new_funder_account: props.account.get("id"),
                asset_to_update: asset.id,
                errors: {
                    max_supply: null
                },
                new_authority_id: null,
                authority_name: null,
                isValid: true,
                flagBooleans: flagBooleans,
                permissionBooleans: permissionBooleans,
                isBitAsset: isBitAsset,
                coreRateQuoteAssetName: coreRateQuoteAssetName,
                quoteAssetInput: coreRateQuoteAssetName,
                coreRateBaseAssetName: coreRateBaseAssetName,
                baseAssetInput: coreRateBaseAssetName,
                claimFeesAmount: 0,
                bitasset_opts: isBitAsset ? asset.bitasset.options : null,
                original_bitasset_opts: isBitAsset ? props.asset.getIn(["bitasset", "options"]).toJS() : null,
                marketInput: "",
                whitelist_authorities: props.asset.getIn(["options", "whitelist_authorities"]),
                blacklist_authorities: props.asset.getIn(["options", "blacklist_authorities"]),
                whitelist_markets: props.asset.getIn(["options", "whitelist_markets"]),
                blacklist_markets: props.asset.getIn(["options", "blacklist_markets"]),
                maxFeedProducers: props.globalObject.getIn(["parameters", "maximum_asset_feed_publishers"]),
                feedProducers: isBitAsset ? props.asset.getIn(["bitasset", "feeds"], []).map(function (a) {
                    return a.first();
                }) : null,
                originalFeedProducers: isBitAsset ? props.asset.getIn(["bitasset", "feeds"], []).map(function (a) {
                    return a.first();
                }) : null
            };
        }
    }, {
        key: "hideAssetUpdateConfirmationModal",
        value: function hideAssetUpdateConfirmationModal() {
            this.setState({
                isAssetUpdateConfirmationModalVisible: false
            });
        }
    }, {
        key: "showAssetUpdateConfirmationModal",
        value: function showAssetUpdateConfirmationModal() {
            this.setState({
                isAssetUpdateConfirmationModalVisible: true
            });
        }

        // Using JSON.stringify for (fast?) comparsion, could be improved, but seems enough here as the order is fixed

    }, {
        key: "assetChanged",
        value: function assetChanged() {
            var s = this.state;
            var p = this.resetState(this.props);
            return JSON.stringify(s.update) !== JSON.stringify(p.update) || JSON.stringify(s.core_exchange_rate) !== JSON.stringify(p.core_exchange_rate) || s.new_issuer_account_id !== null && s.new_issuer_account_id !== s.issuer || JSON.stringify(s.flagBooleans) !== JSON.stringify(p.flagBooleans) || JSON.stringify(s.permissionBooleans) !== JSON.stringify(p.permissionBooleans) || JSON.stringify(s.whitelist_authorities) !== JSON.stringify(p.whitelist_authorities) || JSON.stringify(s.blacklist_authorities) !== JSON.stringify(p.blacklist_authorities) || JSON.stringify(s.whitelist_markets) !== JSON.stringify(p.whitelist_markets) || JSON.stringify(s.blacklist_markets) !== JSON.stringify(p.blacklist_markets);
        }

        // Return tab ID on change

    }, {
        key: "tabChanged",
        value: function tabChanged(tabId) {
            var tabsChanged = this.tabsChanged();
            return tabsChanged[tabId] ? tabsChanged[tabId] : false;
        }
    }, {
        key: "tabsChanged",
        value: function tabsChanged() {
            var s = this.state;
            var p = this.resetState(this.props);

            var tabUpdateIndex = [];

            /* Primary */
            if (s.update.max_supply !== p.update.max_supply || s.core_exchange_rate.base.amount !== p.core_exchange_rate.base.amount || s.core_exchange_rate.quote.amount !== p.core_exchange_rate.quote.amount) tabUpdateIndex["0"] = true;

            /* Whitelist */
            if (JSON.stringify(s.whitelist_authorities) !== JSON.stringify(p.whitelist_authorities) || JSON.stringify(s.blacklist_authorities) !== JSON.stringify(p.blacklist_authorities) || JSON.stringify(s.whitelist_markets) !== JSON.stringify(p.whitelist_markets) || JSON.stringify(s.blacklist_markets) !== JSON.stringify(p.blacklist_markets)) tabUpdateIndex["1"] = true;

            /* Description */
            if (s.update.description.main !== p.update.description.main || s.update.description.short_name !== p.update.description.short_name || s.update.description.market !== p.update.description.market) tabUpdateIndex["2"] = true;

            /* Bitasset options */
            if (JSON.stringify(s.bitasset_opts) !== JSON.stringify(p.original_bitasset_opts)) tabUpdateIndex["3"] = true;

            /* Permissions */
            if (JSON.stringify(s.permissionBooleans) !== JSON.stringify(p.permissionBooleans)) tabUpdateIndex["4"] = true;

            /* Flags */
            if (JSON.stringify(s.flagBooleans) !== JSON.stringify(p.flagBooleans) || s.update.market_fee_percent !== p.update.market_fee_percent || s.update.max_market_fee !== p.update.max_market_fee) tabUpdateIndex["5"] = true;

            if (JSON.stringify(s.feedProducers) !== JSON.stringify(p.originalFeedProducers)) tabUpdateIndex["6"] = true;

            return tabUpdateIndex;
        }
    }, {
        key: "pageChanged",
        value: function pageChanged() {
            var _state = this.state,
                isBitAsset = _state.isBitAsset,
                bitasset_opts = _state.bitasset_opts,
                original_bitasset_opts = _state.original_bitasset_opts,
                feedProducers = _state.feedProducers,
                originalFeedProducers = _state.originalFeedProducers;

            return this.assetChanged() || isBitAsset && (JSON.stringify(bitasset_opts) !== JSON.stringify(original_bitasset_opts) || !common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].are_equal_shallow(feedProducers.toJS(), originalFeedProducers.toJS()));
        }
    }, {
        key: "_updateAsset",
        value: function _updateAsset(e) {
            var _this2 = this;

            e.preventDefault();

            // Close confirm_modal if it's open
            this.hideAssetUpdateConfirmationModal();

            var _state2 = this.state,
                update = _state2.update,
                issuer = _state2.issuer,
                new_issuer_account_id = _state2.new_issuer_account_id,
                core_exchange_rate = _state2.core_exchange_rate,
                flagBooleans = _state2.flagBooleans,
                permissionBooleans = _state2.permissionBooleans,
                isBitAsset = _state2.isBitAsset,
                bitasset_opts = _state2.bitasset_opts,
                original_bitasset_opts = _state2.original_bitasset_opts,
                feedProducers = _state2.feedProducers,
                originalFeedProducers = _state2.originalFeedProducers;


            var flags = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlags(flagBooleans);

            // Handle incorrect flag from genesis
            if (this.props.asset.getIn(["options", "flags"]) & 128 && !(this.props.asset.getIn(["options", "issuer_permissions"]) & 128)) {
                flags += 128;
            }
            var permissions = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getPermissions(permissionBooleans, isBitAsset);

            if (this.state.marketInput !== update.description.market) {
                update.description.market = "";
            }
            var description = JSON.stringify(update.description);

            var auths = {
                whitelist_authorities: this.state.whitelist_authorities,
                blacklist_authorities: this.state.blacklist_authorities,
                whitelist_markets: this.state.whitelist_markets,
                blacklist_markets: this.state.blacklist_markets
            };

            var feedProducersJS = isBitAsset ? feedProducers.toJS() : null;
            var originalFeedProducersJS = isBitAsset ? originalFeedProducers.toJS() : null;

            actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__["default"].updateAsset(issuer, new_issuer_account_id, update, core_exchange_rate, this.props.asset, flags, permissions, isBitAsset, bitasset_opts, original_bitasset_opts, description, auths, feedProducersJS, originalFeedProducersJS, this.assetChanged()).then(function () {
                console.log("... AssetActions.updateAsset(account_id, update)", issuer, new_issuer_account_id, _this2.props.asset.get("id"), update);
                setTimeout(function () {
                    bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(_this2.props.asset.get("id"));
                    _this2.setState(_this2.resetState(_this2.props));
                }, 3000);
            });
        }
    }, {
        key: "_reset",
        value: function _reset(e) {
            e.preventDefault();

            this.setState(this.resetState(this.props));
        }
    }, {
        key: "_forcePositive",
        value: function _forcePositive(number) {
            return parseFloat(number) < 0 ? "0" : number;
        }
    }, {
        key: "_onUpdateDescription",
        value: function _onUpdateDescription(value, e) {
            var update = this.state.update;

            var updateState = true;

            switch (value) {
                case "condition":
                    if (e.target.value.length > 60) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "short_name":
                    if (e.target.value.length > 32) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "market":
                    update.description[value] = e;
                    break;

                case "visible":
                    update.description[value] = !update.description[value];
                    break;

                default:
                    update.description[value] = e.target.value;
                    break;
            }

            if (updateState) {
                this.forceUpdate();
                this._validateEditFields(update);
            }
        }
    }, {
        key: "onChangeBitAssetOpts",
        value: function onChangeBitAssetOpts(value, e) {
            var bitasset_opts = this.state.bitasset_opts;


            switch (value) {
                case "force_settlement_offset_percent":
                case "maximum_force_settlement_volume":
                    bitasset_opts[value] = parseFloat(e.target.value) * chain_asset_constants__WEBPACK_IMPORTED_MODULE_19___default.a.GRAPHENE_1_PERCENT;
                    break;

                case "feed_lifetime_sec":
                case "force_settlement_delay_sec":
                    console.log(e.target.value, parseInt(parseFloat(e.target.value) * 60, 10));
                    bitasset_opts[value] = parseInt(parseFloat(e.target.value) * 60, 10);
                    break;

                case "short_backing_asset":
                    bitasset_opts[value] = e;
                    break;

                case "minimum_feeds":
                    bitasset_opts[value] = parseInt(e.target.value, 10);
                    break;

                default:
                    break;
            }

            this.forceUpdate();
        }
    }, {
        key: "_onUpdateInput",
        value: function _onUpdateInput(value, e) {
            var update = this.state.update;

            var updateState = true;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(this.props.asset.get("precision"));

            switch (value) {
                case "market_fee_percent":
                    update[value] = this._forcePositive(e.target.value);
                    break;

                case "max_market_fee":
                    var marketFee = e.amount.replace(/,/g, "");
                    if (new bignumber_js__WEBPACK_IMPORTED_MODULE_15___default.a(marketFee).times(precision).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                        updateState = false;
                        return this.setState({
                            errors: {
                                max_market_fee: "The number you tried to enter is too large"
                            }
                        });
                    }
                    update[value] = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(marketFee, this.props.asset.get("precision"));
                    break;

                case "max_supply":
                    var maxSupply = e.amount.replace(/,/g, "");
                    // try {
                    //     if ((new big(maxSupply)).times(Math.pow(10, precision)).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                    //         updateState = false;
                    //         return this.setState({errors: {max_supply: "The number you tried to enter is too large"}});
                    //     }
                    update[value] = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(maxSupply, this.props.asset.get("precision"));
                    // } catch(e) {}
                    break;

                default:
                    update[value] = e.target.value;
                    break;
            }

            if (updateState) {
                this.setState({ update: update });
                this._validateEditFields(update);
            }
        }
    }, {
        key: "_validateEditFields",
        value: function _validateEditFields(new_state) {
            var cer = new_state.core_exchange_rate;
            var feedProducers = new_state.feedProducers ? new_state.feedProducers : this.state.feedProducers;
            var flagBooleans = this.state.flagBooleans;
            var _props = this.props,
                asset = _props.asset,
                core = _props.core;


            var errors = {
                max_supply: null,
                quote_asset: null,
                base_asset: null,
                max_feed_producer: null,
                conflict_producer: null,
                invalid_market_pair: null
            };

            var p = this.props.asset.get("precision");
            try {
                errors.max_supply = new_state.max_supply <= 0 ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.max_positive") : new bignumber_js__WEBPACK_IMPORTED_MODULE_15___default.a(parseInt(new_state.max_supply, 10)).times(Math.pow(10, p)).gt(GRAPHENE_MAX_SHARE_SUPPLY) ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large") : null;
            } catch (err) {
                console.log("err:", err);
                errors.max_supply = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large");
            }

            if (cer) {
                if (cer.quote.asset_id !== asset.get("id") && cer.base.asset_id !== asset.get("id")) {
                    errors.quote_asset = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.need_asset", { name: asset.get("symbol") });
                }

                if (cer.quote.asset_id !== core.get("id") && cer.base.asset_id !== core.get("id")) {
                    errors.base_asset = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.need_asset", { name: core.get("symbol") });
                }
            }
            if (feedProducers) {
                if (feedProducers.size > this.state.maxFeedProducers) {
                    errors.max_feed_producer = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_many_feed", { max: this.state.maxFeedProducers });
                }
            }
            if (flagBooleans.committee_fed_asset && flagBooleans.witness_fed_asset) {
                errors.conflict_producer = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.conflict_feed");
            }

            if (this.state.marketInput == this.props.asset.get("symbol")) {
                errors.invalid_market_pair = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.invalid_market_pair");
            }

            var isValid = !errors.invalid_market_pair && !errors.max_supply && !errors.base_asset && !errors.quote_asset && !errors.max_feed_producer && !errors.conflict_producer;

            this.setState({ isValid: isValid, errors: errors });
        }
    }, {
        key: "_onCoreRateChange",
        value: function _onCoreRateChange(type, amount) {
            amount.amount = amount.amount == "" ? "0" : amount.amount.replace(/,/g, "");

            amount.amount = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(amount.amount, amount.asset.get("precision"));

            var core_exchange_rate = this.state.core_exchange_rate;

            core_exchange_rate[type] = {
                amount: amount.amount,
                asset_id: amount.asset.get("id")
            };
            this.forceUpdate();
        }
    }, {
        key: "onAccountChanged",
        value: function onAccountChanged(key, account) {
            this.setState(_defineProperty({}, key, account ? account.get("id") : null));
        }
    }, {
        key: "onAccountNameChanged",
        value: function onAccountNameChanged(key, name) {
            this.setState(_defineProperty({}, key, name));
        }
    }, {
        key: "_onInputCoreAsset",
        value: function _onInputCoreAsset(type, asset) {
            if (type === "quote") {
                this.setState({
                    quoteAssetInput: asset
                });
            } else if (type === "base") {
                this.setState({
                    baseAssetInput: asset
                });
            }
        }
    }, {
        key: "_onFoundCoreAsset",
        value: function _onFoundCoreAsset(type, asset) {
            if (asset) {
                var core_rate = this.state.core_exchange_rate;
                core_rate[type].asset_id = asset.get("id");

                this.setState({
                    core_exchange_rate: core_rate
                });

                this._validateEditFields({
                    max_supply: this.state.max_supply,
                    core_exchange_rate: core_rate
                });
            }
        }
    }, {
        key: "_onInputMarket",
        value: function _onInputMarket(asset) {
            this.setState({
                marketInput: asset
            });
        }
    }, {
        key: "_onFoundMarketAsset",
        value: function _onFoundMarketAsset(asset) {
            if (asset) {
                this._onUpdateDescription("market", asset.get("symbol"));
            }
        }
    }, {
        key: "_onFlagChange",
        value: function _onFlagChange(key) {
            var booleans = this.state.flagBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                flagBooleans: booleans
            });
            this._validateEditFields({});
        }
    }, {
        key: "_getCurrentSupply",
        value: function _getCurrentSupply() {
            var _props2 = this.props,
                asset = _props2.asset,
                getDynamicObject = _props2.getDynamicObject;


            return getDynamicObject && getDynamicObject(asset.get("dynamic_asset_data_id")).get("current_supply");
        }
    }, {
        key: "_onPermissionChange",
        value: function _onPermissionChange(key) {
            var _state3 = this.state,
                isBitAsset = _state3.isBitAsset,
                permissionBooleans = _state3.permissionBooleans;


            var disabled = !common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlagBooleans(this.props.asset.getIn(["options", "issuer_permissions"]), isBitAsset)[key];

            if (this._getCurrentSupply() > 0 && disabled) {
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_24__["Notification"].error({
                    message: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.invalid_permissions_change")
                });
                return;
            }

            var booleans = permissionBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                permissionBooleans: booleans
            });
        }
    }, {
        key: "_onClaimInput",
        value: function _onClaimInput(asset) {
            this.setState({
                claimFeesAmount: asset.amount
            });
        }
    }, {
        key: "onChangeList",
        value: function onChangeList(key) {
            var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "add";
            var id = arguments[2];

            var current = this.state[key];
            if (action === "add" && !current.includes(id)) {
                current = current.push(id);
            } else if (action === "remove" && current.includes(id)) {
                current = current.remove(current.indexOf(id));
            }
            this.setState(_defineProperty({}, key, current));
        }
    }, {
        key: "onChangeFeedProducerList",
        value: function onChangeFeedProducerList() {
            var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "add";
            var id = arguments[1];

            var current = this.state.feedProducers;
            if (action === "add" && !current.includes(id)) {
                current = current.push(id);
            } else if (action === "remove" && current.includes(id)) {
                current = current.remove(current.indexOf(id));
            }
            this.setState({ feedProducers: current });
            this._validateEditFields({ feedProducers: current });
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var asset = this.props.asset;
            var _state4 = this.state,
                errors = _state4.errors,
                isValid = _state4.isValid,
                update = _state4.update,
                core_exchange_rate = _state4.core_exchange_rate,
                flagBooleans = _state4.flagBooleans,
                permissionBooleans = _state4.permissionBooleans,
                claimFeesAmount = _state4.claimFeesAmount,
                isBitAsset = _state4.isBitAsset,
                bitasset_opts = _state4.bitasset_opts;

            // Estimate the asset update fee

            var symbol = asset.get("symbol");
            var updateFee = "N/A";

            updateFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedFee__WEBPACK_IMPORTED_MODULE_7__["default"], { opType: "asset_update" });

            var cr_quote_asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.quote.asset_id);
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(cr_quote_asset.get("precision"));
            var cr_base_asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.base.asset_id);
            var basePrecision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(cr_base_asset.get("precision"));

            var cr_quote_amount = parseFloat(core_exchange_rate.quote.amount) * precision;
            var cr_base_amount = parseFloat(core_exchange_rate.base.amount) * basePrecision;
            var originalPermissions = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlagBooleans(asset.getIn(["options", "issuer_permissions"]), asset.get("bitasset") !== undefined);
            // Loop over flags
            var flags = [];
            var getFlag = function getFlag(key, onClick, isChecked) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { key: "table_" + key, className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none", width: "80%" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.user_issued_assets." + key
                                }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_24__["Switch"], {
                                    checked: isChecked,
                                    onChange: onClick
                                })
                            )
                        )
                    )
                );
            };

            for (var key in originalPermissions) {
                if (originalPermissions[key] && key !== "charge_market_fee") {
                    flags.push(getFlag(key, this._onFlagChange.bind(this, key), flagBooleans[key]));
                }
            }

            flags.push(getFlag("visible", this._onUpdateDescription.bind(this, "visible"), update.description.visible ? false : update.description.visible === false ? true : false));

            // Loop over permissions
            var permissions = [];
            for (var _key in originalPermissions) {
                if (true) {
                    permissions.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "table",
                        { key: "table_" + _key, className: "table" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tbody",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { border: "none", width: "80%" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        content: "account.user_issued_assets." + _key
                                    }),
                                    ":"
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { border: "none" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_24__["Switch"], {
                                        checked: permissionBooleans[_key],
                                        onChange: this._onPermissionChange.bind(this, _key)
                                    })
                                )
                            )
                        )
                    ));
                }
            }

            var tabsChangedCount = 0;
            this.tabsChanged().forEach(function () {
                tabsChangedCount++;
            });

            var confirmButtons = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_2___default()("button", {
                            disabled: !isValid || !this.pageChanged()
                        }),
                        style: { width: "9rem" },
                        onClick: tabsChangedCount > 1 ? this._openConfirm.bind(this) : this._updateAsset.bind(this)
                    },
                    tabsChangedCount > 1 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.save_all" }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.save" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_2___default()("button primary hollow", {
                            disabled: !this.pageChanged()
                        }),
                        onClick: this._reset.bind(this)
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.reset" })
                )
            );

            var cerValid = false;

            if ((cr_quote_asset.get("id") === "1.3.0" || cr_base_asset.get("id") === "1.3.0") && (cr_quote_asset.get("id") === asset.get("id") || cr_base_asset.get("id") === asset.get("id"))) {
                cerValid = true;
            }

            var isPredictionMarketAsset = asset.getIn(["bitasset", "is_prediction_market"]);

            var asset_description = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].parseDescription(this.props.asset.toJS().options.description);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "tabs-header" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "h3",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "header.update_asset" }),
                                ":",
                                " ",
                                symbol
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tabs"],
                            {
                                setting: "updateAssetTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "grid-block padding-top shrink small-vertical medium-horizontal",
                                segmented: false,
                                actionButtons: confirmButtons,
                                onChangeTab: function onChangeTab(i) {
                                    _this3.setState({ activeTab: i });
                                }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.primary",
                                    updatedTab: this.tabChanged(0)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.precision" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "span",
                                            null,
                                            ": ",
                                            asset.get("precision")
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                            label: "account.user_issued_assets.max_supply",
                                            amount: update.max_supply,
                                            onChange: this._onUpdateInput.bind(this, "max_supply"),
                                            asset: asset.get("id"),
                                            assets: [asset.get("id")],
                                            placeholder: "0.0",
                                            tabIndex: 1
                                        })
                                    ),
                                    errors.max_supply ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.max_supply
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.core_exchange_rate"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "grid-block no-margin" },
                                            cerValid ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__["default"], {
                                                    label: "account.user_issued_assets.quote_name",
                                                    onChange: this._onInputCoreAsset.bind(this, "quote"),
                                                    asset: this.state.quoteAssetInput,
                                                    assetInput: this.state.quoteAssetInput,
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingRight: "10px"
                                                    },
                                                    onFound: this._onFoundCoreAsset.bind(this, "quote")
                                                })
                                            ),
                                            cerValid ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__["default"], {
                                                    label: "account.user_issued_assets.base_name",
                                                    onChange: this._onInputCoreAsset.bind(this, "base"),
                                                    asset: this.state.baseAssetInput,
                                                    assetInput: this.state.baseAssetInput,
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingLeft: "10px"
                                                    },
                                                    onFound: this._onFoundCoreAsset.bind(this, "base")
                                                })
                                            ),
                                            errors.quote_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.quote_asset
                                            ) : null,
                                            errors.base_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.base_asset
                                            ) : null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                                    label: "account.user_issued_assets.quote",
                                                    amount: core_exchange_rate.quote.amount,
                                                    onChange: this._onCoreRateChange.bind(this, "quote"),
                                                    asset: core_exchange_rate.quote.asset_id,
                                                    assets: [core_exchange_rate.quote.asset_id],
                                                    placeholder: "0.0",
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingRight: "10px"
                                                    }
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                                    label: "account.user_issued_assets.base",
                                                    amount: core_exchange_rate.base.amount,
                                                    onChange: this._onCoreRateChange.bind(this, "base"),
                                                    asset: core_exchange_rate.base.asset_id,
                                                    assets: [core_exchange_rate.base.asset_id],
                                                    placeholder: "0.0",
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingLeft: "10px"
                                                    }
                                                })
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "h5",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "exchange.price" }),
                                                ":",
                                                " ",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_13__["default"], {
                                                    style: { fontWeight: "bold" },
                                                    quote_amount: cr_quote_amount,
                                                    quote_asset: core_exchange_rate.quote.asset_id,
                                                    base_asset: core_exchange_rate.base.asset_id,
                                                    base_amount: cr_base_amount
                                                })
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_1",
                                            component: "label",
                                            className: "has-error"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_2",
                                            component: "p"
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.whitelist.title",
                                    updatedTab: this.tabChanged(1)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    _AssetWhitelist__WEBPACK_IMPORTED_MODULE_20__["default"],
                                    {
                                        whiteListEnabled: flagBooleans["white_list"],
                                        whitelist_authorities: this.state.whitelist_authorities,
                                        blacklist_authorities: this.state.blacklist_authorities,
                                        whitelist_markets: this.state.whitelist_markets,
                                        blacklist_markets: this.state.blacklist_markets,
                                        new_authority_id: this.state.new_authority_id,
                                        authority_name: this.state.authority_name,
                                        onAccountNameChanged: this.onAccountNameChanged.bind(this),
                                        onAccountChanged: this.onAccountChanged.bind(this),
                                        onChangeList: this.onChangeList.bind(this)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.description",
                                    updatedTab: this.tabChanged(2)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                            style: { height: "7rem" },
                                            rows: "1",
                                            value: update.description.main || "",
                                            onChange: this._onUpdateDescription.bind(this, "main")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.short"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            rows: "1",
                                            value: update.description.short_name || "",
                                            onChange: this._onUpdateDescription.bind(this, "short_name")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.market"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__["default"], {
                                        label: "account.user_issued_assets.name",
                                        onChange: this._onInputMarket.bind(this),
                                        placeholder: asset_description.market,
                                        asset: this.state.marketInput,
                                        assetInput: this.state.marketInput,
                                        style: {
                                            width: "100%",
                                            paddingRight: "10px",
                                            paddingBottom: "20px"
                                        },
                                        onFound: this._onFoundMarketAsset.bind(this)
                                    }),
                                    errors.invalid_market_pair ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.invalid_market_pair
                                    ) : null,
                                    isPredictionMarketAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.condition"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "text",
                                                rows: "1",
                                                value: update.description.condition,
                                                onChange: this._onUpdateDescription.bind(this, "condition")
                                            })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.expiry"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "date",
                                                value: update.description.expiry,
                                                onChange: this._onUpdateDescription.bind(this, "expiry")
                                            })
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.bitasset_opts",
                                    updatedTab: this.tabChanged(3)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssetCreate__WEBPACK_IMPORTED_MODULE_18__["BitAssetOptions"], {
                                        bitasset_opts: bitasset_opts,
                                        onUpdate: this.onChangeBitAssetOpts.bind(this),
                                        backingAsset: bitasset_opts.short_backing_asset,
                                        assetPrecision: asset.get("precision"),
                                        assetSymbol: asset.get("symbol"),
                                        disableBackingAssetChange: this._getCurrentSupply() > 0,
                                        disabledBackingAssetChangeCallback: disabledBackingAssetChangeCallback
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ) : null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.permissions",
                                    updatedTab: this.tabChanged(4)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                        path: "components/AccountAssetCreate",
                                        section: "permissions"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.perm_warning" })
                                    ),
                                    permissions,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.flags",
                                    updatedTab: this.tabChanged(5)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                        path: "components/AccountAssetCreate",
                                        section: "flags"
                                    }),
                                    originalPermissions["charge_market_fee"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.market_fee"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "table",
                                            { className: "table" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tbody",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "tr",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        {
                                                            style: {
                                                                border: "none",
                                                                width: "80%"
                                                            }
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.charge_market_fee" }),
                                                        ":"
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        {
                                                            style: {
                                                                border: "none"
                                                            }
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_24__["Switch"], {
                                                            checked: flagBooleans.charge_market_fee,
                                                            onChange: this._onFlagChange.bind(this, "charge_market_fee")
                                                        })
                                                    )
                                                )
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_2___default()({
                                                    disabled: !flagBooleans.charge_market_fee
                                                })
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.market_fee" }),
                                                " ",
                                                "(%)",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                    type: "number",
                                                    value: update.market_fee_percent,
                                                    onChange: this._onUpdateInput.bind(this, "market_fee_percent")
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                                    label: "account.user_issued_assets.max_market_fee",
                                                    amount: update.max_market_fee,
                                                    onChange: this._onUpdateInput.bind(this, "max_market_fee"),
                                                    asset: asset.get("id"),
                                                    assets: [asset.get("id")],
                                                    placeholder: "0.0",
                                                    tabIndex: 1
                                                })
                                            ),
                                            errors.max_market_fee ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.max_market_fee
                                            ) : null
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "h3",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.flags" })
                                    ),
                                    flags,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    ),
                                    errors.conflict_producer ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.conflict_producer
                                    ) : null
                                )
                            ),
                            isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.feed_producers",
                                    updatedTab: this.tabChanged(6)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AssetFeedProducers__WEBPACK_IMPORTED_MODULE_21__["default"], {
                                    asset: this.props.asset,
                                    account: this.props.account,
                                    witnessFed: flagBooleans["witness_fed_asset"],
                                    committeeFed: flagBooleans["committee_fed_asset"],
                                    producers: this.state.feedProducers,
                                    onChangeList: this.onChangeFeedProducerList.bind(this)
                                }),
                                errors.max_feed_producer ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "p",
                                    {
                                        className: "grid-content has-error large-8 large-offset-2",
                                        style: { marginTop: "20px" }
                                    },
                                    errors.max_feed_producer
                                ) : null
                            ) : null
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ConfirmModal, _extends({
                    visible: this.state.isAssetUpdateConfirmationModalVisible,
                    hideModal: this.hideAssetUpdateConfirmationModal,
                    showModal: this.showAssetUpdateConfirmationModal,
                    tabsChanged: this.tabsChanged(),
                    _cancelConfirm: this._cancelConfirm.bind(this),
                    _updateAsset: this._updateAsset.bind(this)
                }, this.props))
            );
        }
    }]);

    return AccountAssetUpdate;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountAssetUpdate.propTypes = {
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainObject.isRequired
};
AccountAssetUpdate.defaultProps = {
    globalObject: "2.0.0"
};

AccountAssetUpdate = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__["default"])(AccountAssetUpdate);
AccountAssetUpdate = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_11__["default"])(AccountAssetUpdate, {
    propNames: ["asset", "core"],
    defaultProps: {
        core: "1.3.0"
    },
    withDynamic: true
});

var ConfirmModal = function (_React$Component2) {
    _inherits(ConfirmModal, _React$Component2);

    function ConfirmModal() {
        _classCallCheck(this, ConfirmModal);

        var _this4 = _possibleConstructorReturn(this, (ConfirmModal.__proto__ || Object.getPrototypeOf(ConfirmModal)).call(this));

        _this4.state = { open: false };
        return _this4;
    }

    _createClass(ConfirmModal, [{
        key: "show",
        value: function show() {
            var _this5 = this;

            this.setState({ open: true }, function () {
                react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_22___default.a.publish(_this5.props.modalId, "open");
            });
        }
    }, {
        key: "onClose",
        value: function onClose() {
            this.setState({ open: false });
        }
    }, {
        key: "render",
        value: function render() {
            var tabsChanged = this.props.tabsChanged;


            var footer = [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_24__["Button"],
                {
                    type: "primary",
                    key: "submit",
                    onClick: this.props._updateAsset
                },
                counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("global.confirm")
            ), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_24__["Button"],
                { key: "cancel", onClick: this.props.hideModal },
                counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("global.cancel")
            )];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_24__["Modal"],
                {
                    visible: this.props.visible,
                    footer: footer,
                    onCancel: this.props.hideModal,
                    title: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.confirm_asset_modal.header")
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                    content: "account.confirm_asset_modal.are_you_sure",
                    component: "div",
                    style: { paddingBottom: "1rem" }
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "ul",
                        null,
                        tabsChanged["0"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.primary" })
                        ) : null,
                        tabsChanged["1"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.whitelist.title" })
                        ) : null,
                        tabsChanged["2"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.description" })
                        ) : null,
                        tabsChanged["3"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.bitasset_opts" })
                        ) : null,
                        tabsChanged["4"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.permissions" })
                        ) : null,
                        tabsChanged["5"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.flags" })
                        ) : null,
                        tabsChanged["6"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.feed_producers" })
                        ) : null
                    )
                )
            );
        }
    }]);

    return ConfirmModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var AssetUpdateWrapper = function (_React$Component3) {
    _inherits(AssetUpdateWrapper, _React$Component3);

    function AssetUpdateWrapper() {
        _classCallCheck(this, AssetUpdateWrapper);

        return _possibleConstructorReturn(this, (AssetUpdateWrapper.__proto__ || Object.getPrototypeOf(AssetUpdateWrapper)).apply(this, arguments));
    }

    _createClass(AssetUpdateWrapper, [{
        key: "render",
        value: function render() {
            var asset = this.props.match.params.asset;
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountAssetUpdate, _extends({ asset: asset }, this.props));
        }
    }]);

    return AssetUpdateWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_23__["withRouter"])(AssetUpdateWrapper));

/***/ }),

/***/ 2681:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(823);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _FormattedAsset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2085);
/* harmony import */ var _ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1959);
/* harmony import */ var _BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1960);
/* harmony import */ var common_trxHelper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(594);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








/**
 *
 *  Given an operation type, displays the CORE fee for that operation
 *
 */

var FormattedFee = function (_React$Component) {
    _inherits(FormattedFee, _React$Component);

    function FormattedFee() {
        _classCallCheck(this, FormattedFee);

        return _possibleConstructorReturn(this, (FormattedFee.__proto__ || Object.getPrototypeOf(FormattedFee)).apply(this, arguments));
    }

    _createClass(FormattedFee, [{
        key: "getFee",
        value: function getFee() {
            // Return fee via refs
            return Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_5__["estimateFee"])(this.props.opType, this.props.options, this.props.globalObject);
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                opType = _props.opType,
                options = _props.options,
                globalObject = _props.globalObject;


            if (!opType || !options || !globalObject) {
                return null;
            }

            var amount = Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_5__["estimateFee"])(opType, options, globalObject);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], { amount: amount, asset: "1.3.0" });
        }
    }]);

    return FormattedFee;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

FormattedFee.propTypes = {
    globalObject: _ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired,
    opType: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,
    options: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.array
};
FormattedFee.defaultProps = {
    globalObject: "2.0.0",
    options: []
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(FormattedFee));

/***/ }),

/***/ 2682:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2423);
/* harmony import */ var _Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2424);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1867);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2308);
/* harmony import */ var _Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2625);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(829);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1859);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(722);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(723);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }













var AssetWhitelist = function (_React$Component) {
    _inherits(AssetWhitelist, _React$Component);

    function AssetWhitelist(props) {
        _classCallCheck(this, AssetWhitelist);

        var _this = _possibleConstructorReturn(this, (AssetWhitelist.__proto__ || Object.getPrototypeOf(AssetWhitelist)).call(this));

        _this.state = {
            listType: props.assetWhiteListType,
            accountTable: props.assetWhiteListType.indexOf("market") === -1,
            listTypes: ["whitelist_authorities", "blacklist_authorities", "whitelist_markets", "blacklist_markets"],
            assetInput: null,
            asset_id: null
        };
        return _this;
    }

    _createClass(AssetWhitelist, [{
        key: "renderAccountTables",
        value: function renderAccountTables() {
            var _this2 = this;

            var listType = this.state.listType;


            if (!this.props.whiteListEnabled) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, {
                    className: "txtlabel cancel",
                    component: "p",
                    content: "explorer.asset.whitelist.enable_flag"
                })
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "explorer.account.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "account.perm.remove_text" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        this.props[listType].map(function (a) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                { key: a },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_1__["default"], { account: a })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    {
                                        className: "clickable",
                                        onClick: _this2.props.onChangeList.bind(_this2, listType, "remove", a)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                        name: "cross-circle",
                                        title: "icons.cross_circle.remove",
                                        className: "icon-14px"
                                    })
                                )
                            );
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        label: "account.whitelist." + listType,
                        accountName: this.props.authority_name,
                        account: this.props.authority_name,
                        onChange: this.props.onAccountNameChanged.bind(this, "authority_name"),
                        onAccountChanged: this.props.onAccountChanged.bind(this, "new_authority_id"),
                        error: null,
                        tabIndex: 1,
                        action_label: "account.perm.confirm_add",
                        onAction: this.props.onChangeList.bind(this, listType, "add", this.props.new_authority_id)
                    })
                )
            );
        }
    }, {
        key: "_onAssetChange",
        value: function _onAssetChange(asset) {
            this.setState({
                assetInput: asset
            });
        }
    }, {
        key: "_onAssetFound",
        value: function _onAssetFound(asset) {
            this.setState({
                asset_id: asset ? asset.get("id") : null
            });
        }
    }, {
        key: "renderMarketTable",
        value: function renderMarketTable() {
            var _this3 = this;

            var listType = this.state.listType;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "explorer.asset.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "account.perm.remove_text" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        this.props[listType].map(function (a) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                { key: a },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_2__["default"], { asset: a })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    {
                                        className: "clickable",
                                        onClick: _this3.props.onChangeList.bind(_this3, listType, "remove", a)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                        name: "cross-circle",
                                        title: "icons.cross_circle.remove",
                                        className: "icon-14px"
                                    })
                                )
                            );
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_5__["default"], {
                        label: "explorer.asset.whitelist." + listType,
                        onChange: this._onAssetChange.bind(this),
                        asset: this.state.assetInput,
                        assetInput: this.state.assetInput,
                        tabIndex: 1,
                        style: { width: "100%" },
                        onFound: this._onAssetFound.bind(this),
                        action_label: "account.perm.confirm_add",
                        onAction: this.props.onChangeList.bind(this, listType, "add", this.state.asset_id)
                    })
                )
            );
        }
    }, {
        key: "_onSwitchType",
        value: function _onSwitchType(type) {
            this.setState({
                listType: type,
                accountTable: type.indexOf("market") === -1
            });
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeViewSetting({
                assetWhiteListType: type
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var accountTable = this.state.accountTable;

            var activeIndex = this.state.listTypes.indexOf(this.state.listType);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "small-12 large-8 large-offset-2 grid-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "header-selector",
                            style: { paddingBottom: "2rem" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "selector" },
                            this.state.listTypes.map(function (type, index) {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        key: type,
                                        className: classnames__WEBPACK_IMPORTED_MODULE_6___default()("inline-block", {
                                            inactive: activeIndex !== index
                                        }),
                                        onClick: _this4._onSwitchType.bind(_this4, type)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, {
                                        content: "explorer.asset.whitelist." + type
                                    })
                                );
                            })
                        )
                    ),
                    accountTable ? this.renderAccountTables() : this.renderMarketTable(),
                    this.props.children
                )
            );
        }
    }]);

    return AssetWhitelist;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(alt_react__WEBPACK_IMPORTED_MODULE_8__["connect"])(AssetWhitelist, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__["default"]];
    },
    getProps: function getProps() {
        return {
            assetWhiteListType: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__["default"].getState().viewSettings.get("assetWhiteListType", "whitelist_authorities")
        };
    }
}));

/***/ }),

/***/ 2683:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2377);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2308);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2423);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1867);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








var AccountFeedProducers = function (_React$Component) {
    _inherits(AccountFeedProducers, _React$Component);

    function AccountFeedProducers(props) {
        _classCallCheck(this, AccountFeedProducers);

        var _this = _possibleConstructorReturn(this, (AccountFeedProducers.__proto__ || Object.getPrototypeOf(AccountFeedProducers)).call(this, props));

        _this.state = {
            producer_name: null
        };
        return _this;
    }

    _createClass(AccountFeedProducers, [{
        key: "onAccountChanged",
        value: function onAccountChanged(account) {
            this.setState({
                new_producer_id: account ? account.get("id") : null
            });
        }
    }, {
        key: "onAccountNameChanged",
        value: function onAccountNameChanged(name) {
            this.setState({
                producer_name: name
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var _props = this.props,
                witnessFed = _props.witnessFed,
                committeeFed = _props.committeeFed;


            if (witnessFed || committeeFed) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-content small-12 large-8 large-offset-2" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                        component: "p",
                        content: "account.user_issued_assets.feed_not_allowed_1",
                        className: "has-error"
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                        component: "p",
                        content: "account.user_issued_assets.feed_not_allowed_2"
                    })
                );
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content small-12 large-8 large-offset-2" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { textAlign: "left" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.account.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.perm.remove_text" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        this.props.producers.map(function (a, i) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                { key: a },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { textAlign: "left" } },
                                    "#",
                                    i + 1
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { textAlign: "left" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_3__["default"], { account: a })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    {
                                        className: "clickable",
                                        onClick: _this2.props.onChangeList.bind(_this2, "remove", a)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                        name: "cross-circle",
                                        title: "icons.cross_circle.remove",
                                        className: "icon-14px"
                                    })
                                )
                            );
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        label: "account.user_issued_assets.add_feed",
                        accountName: this.state.producer_name,
                        account: this.state.producer_name,
                        onChange: this.onAccountNameChanged.bind(this),
                        onAccountChanged: this.onAccountChanged.bind(this),
                        error: null,
                        tabIndex: 1,
                        action_label: "account.perm.confirm_add",
                        onAction: this.props.onChangeList.bind(this, "add", this.state.new_producer_id)
                    })
                )
            );
        }
    }]);

    return AccountFeedProducers;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountFeedProducers);

/***/ }),

/***/ 2684:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1819);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1959);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1960);
/* harmony import */ var _Statistics__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2685);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(578);
/* harmony import */ var _Utility_TimeAgo__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2452);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2132);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(579);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2678);
/* harmony import */ var branding__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(582);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
















var FeeHelp = function (_React$Component) {
    _inherits(FeeHelp, _React$Component);

    function FeeHelp() {
        _classCallCheck(this, FeeHelp);

        return _possibleConstructorReturn(this, (FeeHelp.__proto__ || Object.getPrototypeOf(FeeHelp)).apply(this, arguments));
    }

    _createClass(FeeHelp, [{
        key: "render",
        value: function render() {
            var dprops = this.props.dprops;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_9__["default"], _extends({}, this.props, {
                path: "components/AccountMembership",
                section: "fee-division",
                nextMaintenanceTime: {
                    time: dprops.get("next_maintenance_time")
                }
            }));
        }
    }]);

    return FeeHelp;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

FeeHelp.propTypes = {
    dprops: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainObject.isRequired
};
FeeHelp.defaultProps = {
    dprops: "2.1.0"
};

FeeHelp = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(FeeHelp);

var AccountMembership = function (_React$Component2) {
    _inherits(AccountMembership, _React$Component2);

    function AccountMembership() {
        _classCallCheck(this, AccountMembership);

        return _possibleConstructorReturn(this, (AccountMembership.__proto__ || Object.getPrototypeOf(AccountMembership)).apply(this, arguments));
    }

    _createClass(AccountMembership, [{
        key: "upgradeAccount",
        value: function upgradeAccount(id, lifetime, e) {
            e.preventDefault();
            actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__["default"].upgradeAccount(id, lifetime);
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            common_account_utils__WEBPACK_IMPORTED_MODULE_10__["default"].getFinalFeeAsset(this.props.account, "account_upgrade");
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                gprops = _props.gprops,
                core_asset = _props.core_asset;


            var account = this.props.account.toJS();

            var ltr = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccount(account.lifetime_referrer, false);
            if (ltr) account.lifetime_referrer_name = ltr.get("name");
            var ref = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccount(account.referrer, false);
            if (ref) account.referrer_name = ref.get("name");
            var reg = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccount(account.registrar, false);
            if (reg) account.registrar_name = reg.get("name");

            var account_name = account.name;

            var network_fee = account.network_fee_percentage / 100;
            var lifetime_fee = account.lifetime_referrer_fee_percentage / 100;
            var referrer_total_fee = 100 - network_fee - lifetime_fee;
            var referrer_fee = referrer_total_fee * account.referrer_rewards_percentage / 10000;
            var registrar_fee = 100 - referrer_fee - lifetime_fee - network_fee;

            var lifetime_cost = gprops.getIn(["parameters", "current_fees", "parameters", 8, 1, "membership_lifetime_fee"]) * gprops.getIn(["parameters", "current_fees", "scale"]) / 10000;

            var member_status = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccountMemberStatus(this.props.account);
            var membership = "account.member." + member_status;
            var expiration = null;
            if (member_status === "annual") expiration = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                "(",
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.expires" }),
                " ",
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TimeAgo__WEBPACK_IMPORTED_MODULE_8__["default"], { time: account.membership_expiration_date }),
                ")"
            );
            var expiration_date = account.membership_expiration_date;
            if (expiration_date === "1969-12-31T23:59:59") expiration_date = "Never";else if (expiration_date === "1970-01-01T00:00:00") expiration_date = "N/A";

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tabs"],
                            {
                                segmented: false,
                                setting: "membershipTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.member.membership" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "h3",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: membership }),
                                    " ",
                                    expiration
                                ),
                                member_status === "lifetime" ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "large-6 medium-8" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_9__["default"], {
                                            path: "components/AccountMembership",
                                            section: "lifetime",
                                            feesCashback: 100 - network_fee,
                                            price: {
                                                amount: lifetime_cost,
                                                asset: core_asset
                                            }
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: "button no-margin",
                                                onClick: this.upgradeAccount.bind(this, account.id, true)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.upgrade_lifetime" })
                                        ),
                                        " ",
                                        "\xA0 \xA0",
                                         true ? null : undefined
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("hr", null)
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block no-margin" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "no-margin grid-block vertical large-horizontal" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "no-margin grid-block large-5" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-content" },
                                                member_status === "lifetime" ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "h4",
                                                        null,
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.referral_link" })
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                                        content: "account.member.referral_text",
                                                        wallet_name: Object(branding__WEBPACK_IMPORTED_MODULE_12__["getWalletName"])()
                                                    }),
                                                    ":",
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "h5",
                                                        null,
                                                        Object(branding__WEBPACK_IMPORTED_MODULE_12__["getWalletURL"])() + ("/?r=" + account.name)
                                                    )
                                                ) : null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "h4",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.fee_allocation" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "table",
                                                    { className: "table key-value-table" },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "tbody",
                                                        null,
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.network_percentage" })
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                network_fee,
                                                                "%"
                                                            )
                                                        ),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.lifetime_referrer" }),
                                                                " ",
                                                                "\xA0 (",
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                                                                    {
                                                                        to: "account/" + account.lifetime_referrer_name
                                                                    },
                                                                    account.lifetime_referrer_name
                                                                ),
                                                                ")"
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                lifetime_fee,
                                                                "%"
                                                            )
                                                        ),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.registrar" }),
                                                                " ",
                                                                "\xA0 (",
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                                                                    {
                                                                        to: "account/" + account.registrar_name
                                                                    },
                                                                    account.registrar_name
                                                                ),
                                                                ")"
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                registrar_fee,
                                                                "%"
                                                            )
                                                        ),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.referrer" }),
                                                                " ",
                                                                "\xA0 (",
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                                                                    {
                                                                        to: "account/" + account.referrer_name
                                                                    },
                                                                    account.referrer_name
                                                                ),
                                                                ")"
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                referrer_fee,
                                                                "%"
                                                            )
                                                        ),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "tr",
                                                            null,
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.membership_expiration" }),
                                                                " "
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "td",
                                                                null,
                                                                expiration_date
                                                            )
                                                        )
                                                    )
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "h4",
                                                    {
                                                        style: { paddingTop: "1rem" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.fees_cashback" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "table",
                                                    { className: "table key-value-table" },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Statistics__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                                        stat_object: account.statistics
                                                    })
                                                )
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "grid-block large-7" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-content" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FeeHelp, {
                                                    account: account_name,
                                                    networkFee: network_fee,
                                                    referrerFee: referrer_fee,
                                                    registrarFee: registrar_fee,
                                                    lifetimeFee: lifetime_fee,
                                                    referrerTotalFee: referrer_total_fee,
                                                    maintenanceInterval: gprops.getIn(["parameters", "maintenance_interval"]),
                                                    vestingThreshold: {
                                                        amount: gprops.getIn(["parameters", "cashback_vesting_threshold"]),
                                                        asset: core_asset
                                                    },
                                                    vestingPeriod: gprops.getIn(["parameters", "cashback_vesting_period_seconds"]) / 60 / 60 / 24
                                                })
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountMembership;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountMembership.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccount.isRequired,
    gprops: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainObject.isRequired,
    core_asset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAsset.isRequired
};
AccountMembership.defaultProps = {
    gprops: "2.0.0",
    core_asset: "1.3.0"
};

AccountMembership = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(AccountMembership);

/* harmony default export */ __webpack_exports__["default"] = (AccountMembership);

/***/ }),

/***/ 2685:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2085);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1959);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1960);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }







var Statistics = function (_React$Component) {
    _inherits(Statistics, _React$Component);

    function Statistics() {
        _classCallCheck(this, Statistics);

        return _possibleConstructorReturn(this, (Statistics.__proto__ || Object.getPrototypeOf(Statistics)).apply(this, arguments));
    }

    _createClass(Statistics, [{
        key: "render",
        value: function render() {
            var stat_object = this.props.stat_object.toJS();
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tbody",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.fees_paid" }),
                        " "
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], {
                            amount: parseFloat(stat_object.lifetime_fees_paid),
                            asset: "1.3.0"
                        })
                    )
                )
            );
        }
    }]);

    return Statistics;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

Statistics.propTypes = {
    stat_object: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(Statistics));

/***/ }),

/***/ 2686:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2085);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(580);
/* harmony import */ var actions_WalletActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1815);
/* harmony import */ var bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(498);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2678);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }










var VestingBalance = function (_React$Component) {
    _inherits(VestingBalance, _React$Component);

    function VestingBalance() {
        _classCallCheck(this, VestingBalance);

        return _possibleConstructorReturn(this, (VestingBalance.__proto__ || Object.getPrototypeOf(VestingBalance)).apply(this, arguments));
    }

    _createClass(VestingBalance, [{
        key: "_onClaim",
        value: function _onClaim(claimAll, e) {
            var _this2 = this;

            e.preventDefault();
            actions_WalletActions__WEBPACK_IMPORTED_MODULE_5__["default"].claimVestingBalance(this.props.account.id, this.props.vb, claimAll).then(function () {
                typeof _this2.props.handleChanged == "function" && _this2.props.handleChanged();
            });
        }
    }, {
        key: "render",
        value: function render() {
            var vb = this.props.vb;

            if (!this.props.vb) {
                return null;
            }

            var cvbAsset = void 0,
                vestingPeriod = void 0,
                earned = void 0,
                secondsPerDay = 60 * 60 * 24,
                availablePercent = void 0,
                balance = void 0;
            if (vb) {
                balance = vb.balance.amount;
                cvbAsset = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAsset(vb.balance.asset_id);
                earned = vb.policy[1].coin_seconds_earned;
                vestingPeriod = vb.policy[1].vesting_seconds;
                availablePercent = vestingPeriod === 0 ? 1 : earned / (vestingPeriod * balance);
            }

            if (!cvbAsset) {
                return null;
            }

            if (!balance) {
                return null;
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                    component: "h5",
                    content: "account.vesting.balance_number",
                    id: vb.id
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table key-value-table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.cashback" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], {
                                    amount: vb.balance.amount,
                                    asset: vb.balance.asset_id
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.earned" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_amount(earned / secondsPerDay, cvbAsset), 0),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.coindays" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.required" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_amount(vb.balance.amount * vestingPeriod / secondsPerDay, cvbAsset), 0),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.coindays" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.remaining" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(vestingPeriod * (1 - availablePercent) / secondsPerDay || 0, 2),
                                "\xA0days"
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.available" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(availablePercent * 100, 2),
                                "% /",
                                " ",
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], {
                                    amount: availablePercent * vb.balance.amount,
                                    asset: cvbAsset.get("id")
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { colSpan: "2", style: { textAlign: "right" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "button",
                                    {
                                        onClick: this._onClaim.bind(this, false),
                                        className: "button"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.claim" })
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return VestingBalance;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var AccountVesting = function (_React$Component2) {
    _inherits(AccountVesting, _React$Component2);

    function AccountVesting() {
        _classCallCheck(this, AccountVesting);

        var _this3 = _possibleConstructorReturn(this, (AccountVesting.__proto__ || Object.getPrototypeOf(AccountVesting)).call(this));

        _this3.state = {
            vbs: null
        };
        return _this3;
    }

    _createClass(AccountVesting, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this.retrieveVestingBalances.call(this, this.props.account.get("id"));
        }
    }, {
        key: "componentWillUpdate",
        value: function componentWillUpdate(nextProps) {
            var newId = nextProps.account.get("id");
            var oldId = this.props.account.get("id");

            if (newId !== oldId) {
                this.retrieveVestingBalances.call(this, newId);
            }
        }
    }, {
        key: "retrieveVestingBalances",
        value: function retrieveVestingBalances(accountId) {
            var _this4 = this;

            accountId = accountId || this.props.account.get("id");
            bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_6__["Apis"].instance().db_api().exec("get_vesting_balances", [accountId]).then(function (vbs) {
                _this4.setState({ vbs: vbs });
            }).catch(function (err) {
                console.log("error:", err);
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this5 = this;

            var vbs = this.state.vbs;

            if (!vbs || !this.props.account || !this.props.account.get("vesting_balances")) {
                return null;
            }

            var account = this.props.account.toJS();

            var balances = vbs.map(function (vb) {
                if (vb.balance.amount) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(VestingBalance, {
                        key: vb.id,
                        vb: vb,
                        account: account,
                        handleChanged: _this5.retrieveVestingBalances.bind(_this5)
                    });
                }
            }).filter(function (a) {
                return !!a;
            });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_7__["Tabs"],
                            {
                                segmented: false,
                                setting: "vestingTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_7__["Tab"],
                                { title: "account.vesting.title" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.vesting.explain",
                                    component: "p"
                                }),
                                !balances.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "h4",
                                    { style: { paddingTop: "1rem" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        content: "account.vesting.no_balances"
                                    })
                                ) : balances
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountVesting;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountVesting.VestingBalance = VestingBalance;
/* harmony default export */ __webpack_exports__["default"] = (AccountVesting);

/***/ }),

/***/ 2687:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(536);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(580);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(579);
/* harmony import */ var api_ApplicationApi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(600);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(429);
/* harmony import */ var _AccountPermissionsList__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2688);
/* harmony import */ var _AccountPermissionsMigrate__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2692);
/* harmony import */ var _Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2693);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2678);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2132);
/* harmony import */ var _RecentTransactions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2694);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(733);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

















var AccountPermissions = function (_React$Component) {
    _inherits(AccountPermissions, _React$Component);

    function AccountPermissions(props) {
        _classCallCheck(this, AccountPermissions);

        var _this = _possibleConstructorReturn(this, (AccountPermissions.__proto__ || Object.getPrototypeOf(AccountPermissions)).call(this, props));

        _this.state = {};
        _this.onPublish = _this.onPublish.bind(_this);
        _this.onReset = _this.onReset.bind(_this);
        return _this;
    }

    _createClass(AccountPermissions, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this.updateAccountData(this.props.account);
            common_account_utils__WEBPACK_IMPORTED_MODULE_5__["default"].getFinalFeeAsset(this.props.account, "account_update");
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            if (nextProps.account !== this.props.account) this.updateAccountData(nextProps.account);
        }
    }, {
        key: "permissionsFromImmutableObj",
        value: function permissionsFromImmutableObj(auths) {
            var threshold = auths.get("weight_threshold");
            var account_auths = auths.get("account_auths");
            var key_auths = auths.get("key_auths");
            var address_auths = auths.get("address_auths");

            var accounts = account_auths.map(function (a) {
                return a.get(0);
            });
            var keys = key_auths.map(function (a) {
                return a.get(0);
            });
            var addresses = address_auths.map(function (a) {
                return a.get(0);
            });

            var weights = account_auths.reduce(function (res, a) {
                res[a.get(0)] = a.get(1);
                return res;
            }, {});
            weights = key_auths.reduce(function (res, a) {
                res[a.get(0)] = a.get(1);
                return res;
            }, weights);
            weights = address_auths.reduce(function (res, a) {
                res[a.get(0)] = a.get(1);
                return res;
            }, weights);

            return { threshold: threshold, accounts: accounts, keys: keys, addresses: addresses, weights: weights };
        }
    }, {
        key: "permissionsToJson",
        value: function permissionsToJson(threshold, accounts, keys, addresses, weights) {
            var res = { weight_threshold: threshold };
            res["account_auths"] = accounts.sort(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].sortID).map(function (a) {
                return [a, weights[a]];
            }).toJS();
            res["key_auths"] = keys.sort(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].sortID).map(function (a) {
                return [a, weights[a]];
            }).toJS();
            res["address_auths"] = addresses.sort(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].sortID).map(function (a) {
                return [a, weights[a]];
            }).toJS();
            return res;
        }
    }, {
        key: "updateAccountData",
        value: function updateAccountData(account) {
            var active = this.permissionsFromImmutableObj(account.get("active"));
            var owner = this.permissionsFromImmutableObj(account.get("owner"));
            var memo_key = account.get("options").get("memo_key");
            var state = {
                active_accounts: active.accounts,
                active_keys: active.keys,
                active_addresses: active.addresses,
                owner_accounts: owner.accounts,
                owner_keys: owner.keys,
                owner_addresses: owner.addresses,
                active_weights: active.weights,
                owner_weights: owner.weights,
                active_threshold: active.threshold,
                owner_threshold: owner.threshold,
                memo_key: memo_key,
                prev_active_accounts: active.accounts,
                prev_active_keys: active.keys,
                prev_active_addresses: active.addresses,
                prev_owner_accounts: owner.accounts,
                prev_owner_keys: owner.keys,
                prev_owner_addresses: owner.addresses,
                prev_active_weights: active.weights,
                prev_owner_weights: owner.weights,
                prev_active_threshold: active.threshold,
                prev_owner_threshold: owner.threshold,
                prev_memo_key: memo_key
            };
            this.setState(state);
        }
    }, {
        key: "isChanged",
        value: function isChanged() {
            var s = this.state;
            return s.active_accounts !== s.prev_active_accounts || s.active_keys !== s.prev_active_keys || s.active_addresses !== s.prev_active_addresses || s.owner_accounts !== s.prev_owner_accounts || s.owner_keys !== s.prev_owner_keys || s.owner_addresses !== s.prev_owner_addresses || s.active_threshold !== s.prev_active_threshold || s.owner_threshold !== s.prev_owner_threshold || s.memo_key !== s.prev_memo_key;
        }
    }, {
        key: "didChange",
        value: function didChange(type) {
            var s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state;

            if (type === "memo") {
                return s.memo_key !== s.prev_memo_key;
            }
            var didChange = false;
            ["_keys", "_active_addresses", "_accounts", "_threshold"].forEach(function (key) {
                var current = type + key;
                if (s[current] !== s["prev_" + current]) {
                    didChange = true;
                }
            });
            return didChange;
        }
    }, {
        key: "onPublish",
        value: function onPublish() {
            var s = this.state;
            var updated_account = this.props.account.toJS();

            // Set fee asset
            updated_account.fee = {
                amount: 0,
                asset_id: common_account_utils__WEBPACK_IMPORTED_MODULE_5__["default"].getFinalFeeAsset(updated_account.id, "account_update")
            };

            var updateObject = {
                account: updated_account.id
            };

            if (this.didChange("active")) {
                updateObject.active = this.permissionsToJson(s.active_threshold, s.active_accounts, s.active_keys, s.active_addresses, s.active_weights);
            }
            if (this.didChange("owner")) {
                updateObject.owner = this.permissionsToJson(s.owner_threshold, s.owner_accounts, s.owner_keys, s.owner_addresses, s.owner_weights);
            }
            if (this.didChange("owner") && s.owner_keys.size === 0 && s.owner_addresses.size === 0 && s.owner_accounts.size === 1 && s.owner_accounts.first() === updated_account.id) {
                return bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__["Notification"].warning({
                    message: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("notifications.account_permissions_update_warning")
                });
            }
            if (s.memo_key && this.didChange("memo") && this.isValidPubKey(s.memo_key)) {
                updateObject.new_options = this.props.account.get("options").toJS();
                updateObject.new_options.memo_key = s.memo_key;
            }

            // console.log("-- AccountPermissions.onPublish -->", updateObject, s.memo_key);
            api_ApplicationApi__WEBPACK_IMPORTED_MODULE_6__["default"].updateAccount(updateObject);
        }
    }, {
        key: "isValidPubKey",
        value: function isValidPubKey(value) {
            return !!bitsharesjs__WEBPACK_IMPORTED_MODULE_7__["PublicKey"].fromPublicKeyString(value);
        }
    }, {
        key: "onReset",
        value: function onReset() {
            var s = this.state;
            this.setState({
                active_accounts: s.prev_active_accounts,
                active_keys: s.prev_active_keys,
                active_addresses: s.prev_active_addresses,
                owner_accounts: s.prev_owner_accounts,
                owner_keys: s.prev_owner_keys,
                owner_addresses: s.prev_owner_addresses,
                active_weights: s.prev_active_weights,
                owner_weights: s.prev_owner_weights,
                active_threshold: s.prev_active_threshold,
                owner_threshold: s.prev_owner_threshold,
                memo_key: s.prev_memo_key
            });
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(collection, item_value, weight) {
            var state = {};
            var list = collection + (common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].is_object_id(item_value) ? "_accounts" : "_keys");
            state[list] = this.state[list].push(item_value);
            this.state[collection + "_weights"][item_value] = weight;
            this.setState(state);
        }
    }, {
        key: "onRemoveItem",
        value: function onRemoveItem(collection, item_value, listSuffix) {
            console.log("onRemoveItem", collection, item_value, listSuffix);
            var state = {};
            var list = collection + listSuffix;

            state[list] = this.state[list].filter(function (i) {
                return i !== item_value;
            });
            this.setState(state);
        }
    }, {
        key: "onThresholdChanged",
        value: function onThresholdChanged(var_name, event) {
            var value = parseInt(event.target.value.trim());
            var state = {};
            state[var_name] = value;
            this.setState(state);
        }
    }, {
        key: "validateAccount",
        value: function validateAccount(collection, account) {
            return null;
        }
    }, {
        key: "sumUpWeights",
        value: function sumUpWeights(accounts, keys, addresses, weights) {
            var sum = accounts.reduce(function (sum, a) {
                return sum + weights[a];
            }, 0);
            sum = keys.reduce(function (sum, a) {
                return sum + weights[a];
            }, sum);
            return addresses.reduce(function (sum, a) {
                return sum + weights[a];
            }, sum);
        }
    }, {
        key: "onMemoKeyChanged",
        value: function onMemoKeyChanged(memo_key) {
            this.setState({ memo_key: memo_key });
        }
    }, {
        key: "onSetPasswordKeys",
        value: function onSetPasswordKeys(keys) {
            var roles = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ["active", "owner", "memo"];

            var newState = {};

            roles.forEach(function (role) {
                newState["password_" + role] = keys[role];
            });

            this.setState(newState);
        }
    }, {
        key: "render",
        value: function render() {
            var error1 = void 0,
                error2 = void 0;

            var _state = this.state,
                active_accounts = _state.active_accounts,
                active_keys = _state.active_keys,
                active_addresses = _state.active_addresses,
                active_weights = _state.active_weights;
            var _state2 = this.state,
                owner_accounts = _state2.owner_accounts,
                owner_keys = _state2.owner_keys,
                owner_addresses = _state2.owner_addresses,
                owner_weights = _state2.owner_weights;


            var threshold = this.state.active_threshold > 0 ? this.state.active_threshold : 0;
            var weights_total = this.sumUpWeights(active_accounts, active_keys, active_addresses, active_weights);
            if (this.didChange("active") && weights_total < threshold) error1 = counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.warning1", {
                weights_total: weights_total,
                threshold: threshold
            });

            threshold = this.state.owner_threshold > 0 ? this.state.owner_threshold : 0;
            weights_total = this.sumUpWeights(owner_accounts, owner_keys, owner_addresses, owner_weights);
            if (this.didChange("owner") && weights_total < threshold) error2 = counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.warning2", {
                weights_total: weights_total,
                threshold: threshold
            });

            var publish_buttons_class = "button" + (!(error1 || error2) && this.isChanged() && this.isValidPubKey(this.state.memo_key) ? "" : " disabled");
            var reset_buttons_class = "button" + (this.isChanged() ? "" : " disabled");

            var accountsList = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set();
            accountsList = accountsList.add(this.props.account.get("id"));

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tabs"],
                            {
                                defaultActiveTab: 1,
                                segmented: false,
                                setting: "permissionsTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding",
                                actionButtons: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "action-buttons" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "button",
                                        {
                                            className: reset_buttons_class,
                                            onClick: this.onReset,
                                            tabIndex: 8
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.reset" })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "button",
                                        {
                                            className: publish_buttons_class,
                                            onClick: this.onPublish,
                                            tabIndex: 9
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.publish" })
                                    )
                                )
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.perm.active" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_12__["default"], { path: "components/AccountPermActive" }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "form",
                                    { className: "threshold" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        { className: "horizontal" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.threshold" }),
                                        " ",
                                        "\xA0 \xA0",
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "number",
                                            placeholder: "0",
                                            size: "5",
                                            value: this.state.active_threshold,
                                            onChange: this.onThresholdChanged.bind(this, "active_threshold"),
                                            autoComplete: "off",
                                            tabIndex: 1
                                        })
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissionsList__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                    label: "account.perm.add_permission_label",
                                    accounts: active_accounts,
                                    keys: active_keys,
                                    weights: active_weights,
                                    addresses: active_addresses,
                                    validateAccount: this.validateAccount.bind(this, "active"),
                                    onAddItem: this.onAddItem.bind(this, "active"),
                                    onRemoveItem: this.onRemoveItem.bind(this, "active"),
                                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.account_name_or_key"),
                                    tabIndex: 2
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                error1 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block has-error" },
                                    error1
                                ) : null
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.perm.owner" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_12__["default"], { path: "components/AccountPermOwner" }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "form",
                                    { className: "threshold" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        { className: "horizontal" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.threshold" }),
                                        " ",
                                        "\xA0 \xA0",
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "number",
                                            placeholder: "0",
                                            size: "5",
                                            value: this.state.owner_threshold,
                                            onChange: this.onThresholdChanged.bind(this, "owner_threshold"),
                                            autoComplete: "off",
                                            tabIndex: 4
                                        })
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissionsList__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                    label: "account.perm.add_permission_label",
                                    accounts: owner_accounts,
                                    keys: owner_keys,
                                    weights: owner_weights,
                                    addresses: owner_addresses,
                                    validateAccount: this.validateAccount.bind(this, "owner"),
                                    onAddItem: this.onAddItem.bind(this, "owner"),
                                    onRemoveItem: this.onRemoveItem.bind(this, "owner"),
                                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.account_name_or_key"),
                                    tabIndex: 5
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                error2 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block has-error" },
                                    error2
                                ) : null
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.perm.memo_key" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                    style: { maxWidth: "800px" },
                                    path: "components/AccountPermMemo"
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                    ref: "memo_key",
                                    value: this.state.memo_key,
                                    label: "account.perm.memo_public_key",
                                    placeholder: "Public Key",
                                    onChange: this.onMemoKeyChanged.bind(this),
                                    tabIndex: 7
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.perm.password_model" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissionsMigrate__WEBPACK_IMPORTED_MODULE_9__["default"], {
                                    active: this.state.password_active,
                                    owner: this.state.password_owner,
                                    memo: this.state.password_memo,
                                    onSetPasswordKeys: this.onSetPasswordKeys.bind(this),
                                    account: this.props.account,
                                    activeKeys: this.state.active_keys,
                                    ownerKeys: this.state.owner_keys,
                                    memoKey: this.state.memo_key,
                                    onAddActive: this.onAddItem.bind(this, "active"),
                                    onRemoveActive: this.onRemoveItem.bind(this, "active"),
                                    onAddOwner: this.onAddItem.bind(this, "owner"),
                                    onRemoveOwner: this.onRemoveItem.bind(this, "owner"),
                                    onSetMemo: this.onMemoKeyChanged.bind(this)
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "tab-content", style: { padding: 10 } },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "divider" }),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_RecentTransactions__WEBPACK_IMPORTED_MODULE_13__["RecentTransactions"], {
                                accountsList: accountsList,
                                limit: 25,
                                compactView: false,
                                filter: "account_update",
                                style: { paddingBottom: "2rem" }
                            })
                        )
                    )
                )
            );
        }
    }]);

    return AccountPermissions;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountPermissions);

/***/ }),

/***/ 2688:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1819);
/* harmony import */ var _AccountSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2308);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _AccountImage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2309);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1959);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1960);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1867);
/* harmony import */ var components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2689);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(580);
/* harmony import */ var stores_AddressIndex__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(720);
/* harmony import */ var stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(715);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(823);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_13__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
















var AccountPermissionRow = function (_React$Component) {
    _inherits(AccountPermissionRow, _React$Component);

    function AccountPermissionRow() {
        _classCallCheck(this, AccountPermissionRow);

        return _possibleConstructorReturn(this, (AccountPermissionRow.__proto__ || Object.getPrototypeOf(AccountPermissionRow)).apply(this, arguments));
    }

    _createClass(AccountPermissionRow, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps) {
            return !common_utils__WEBPACK_IMPORTED_MODULE_10__["default"].are_equal_shallow(nextProps, this.props);
        }
    }, {
        key: "_lookUpPubKeyForAddress",
        value: function _lookUpPubKeyForAddress(address) {
            var addresses = stores_AddressIndex__WEBPACK_IMPORTED_MODULE_11__["default"].getState().addresses;
            var pubkey = addresses.get(address);
            return pubkey;
        }
    }, {
        key: "render",
        value: function render() {
            var name = void 0,
                item_id = void 0,
                name_or_key = void 0;
            var suffix = "_accounts";
            var pubKey = this.props.pubkey;

            var keys = stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_12__["default"].getState().keys;

            var has_private = false;

            if (this.props.account) {
                name = this.props.account.get("name");
                item_id = this.props.account.get("id");
                name_or_key = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                    { to: "/account/" + name + "/permissions" },
                    name
                );
            } else if (pubKey) {
                name = item_id = pubKey;
                name_or_key = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__["default"],
                    { pubkey: pubKey },
                    pubKey
                );
                suffix = "_keys";
                has_private = keys.has(pubKey);
            } else if (this.props.address) {
                pubKey = this._lookUpPubKeyForAddress(this.props.address);
                item_id = this.props.address;
                name_or_key = !pubKey ? this.props.address : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__["default"],
                    { pubkey: pubKey },
                    pubKey
                );
                suffix = "_addresses";
                has_private = keys.has(pubKey);
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { key: name },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    this.props.account ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountImage__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        size: { height: 30, width: 30 },
                        account: name
                    }) : pubKey ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "account-image" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__["default"],
                            { pubkey: pubKey },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_7__["default"], { name: "key", title: "icons.key", size: "4x" })
                        )
                    ) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { className: (has_private ? "my-key" : "") + " pub-key" },
                    name_or_key
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    this.props.weights[item_id]
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            className: "button",
                            onClick: this.props.onRemoveItem.bind(this, item_id, suffix)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.votes.remove_witness" })
                    )
                )
            );
        }
    }]);

    return AccountPermissionRow;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPermissionRow.propTypes = {
    account: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.object,
    pubkey: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string,
    address: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string,
    onRemoveItem: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func.isRequired,
    weights: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.object
};

var AccountPermissionsList = function (_React$Component2) {
    _inherits(AccountPermissionsList, _React$Component2);

    function AccountPermissionsList(props) {
        _classCallCheck(this, AccountPermissionsList);

        var _this2 = _possibleConstructorReturn(this, (AccountPermissionsList.__proto__ || Object.getPrototypeOf(AccountPermissionsList)).call(this, props));

        _this2.state = {
            selected_item: null,
            item_name_input: "",
            weight_input: "",
            error: null
        };
        _this2.onItemChange = _this2.onItemChange.bind(_this2);
        _this2.onItemAccountChange = _this2.onItemAccountChange.bind(_this2);
        _this2.onAddItem = _this2.onAddItem.bind(_this2);
        return _this2;
    }

    _createClass(AccountPermissionsList, [{
        key: "onItemChange",
        value: function onItemChange(item_name_input) {
            this.setState({ item_name_input: item_name_input });
        }
    }, {
        key: "onItemAccountChange",
        value: function onItemAccountChange(selected_item) {
            var _this3 = this;

            this.setState({ selected_item: selected_item, error: null });
            if (selected_item && this.props.validateAccount) {
                var res = this.props.validateAccount(selected_item);
                if (res === null) return;
                if (typeof res === "string") this.setState({ error: res });else res.then(function (error) {
                    return _this3.setState({ error: error });
                });
            }
        }
    }, {
        key: "onWeightChanged",
        value: function onWeightChanged(event) {
            var value = event.target.value.trim();
            this.setState({ weight_input: parseInt(value) });
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(item) {
            if (!item) return;
            var next_state = {
                selected_item: null,
                item_name_input: "",
                weight_input: "",
                error: null
            };
            this.setState(next_state);
            var item_value = typeof item === "string" ? item : item.get("id");
            this.props.onAddItem(item_value, this.state.weight_input);
        }
    }, {
        key: "onWeightKeyDown",
        value: function onWeightKeyDown(event) {
            if (event.keyCode === 13 && this.state.weight_input && this.state.selected_item) this.onAddItem(this.state.selected_item);
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var key = 0;
            var account_rows = this.props.accounts.filter(function (i) {
                if (!i) return false;
                //if (this.state.item_name_input) return i.get("name").indexOf(this.state.item_name_input) !== -1;
                return true;
            }).sort(function (a, b) {
                if (a.get("name") > b.get("name")) return 1;else if (a.get("name") < b.get("name")) return -1;
                return 0;
            }).map(function (i) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPermissionRow, {
                    key: key++,
                    account: i,
                    weights: _this4.props.weights,
                    onRemoveItem: _this4.props.onRemoveItem
                });
            });

            var key_rows = this.props.keys.map(function (k) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPermissionRow, {
                    key: key++,
                    pubkey: k,
                    weights: _this4.props.weights,
                    onRemoveItem: _this4.props.onRemoveItem
                });
            });

            var address_rows = this.props.addresses.map(function (k) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPermissionRow, {
                    key: key++,
                    address: k,
                    weights: _this4.props.weights,
                    onRemoveItem: _this4.props.onRemoveItem
                });
            });

            var error = this.state.error;
            if (!error && this.state.selected_item && this.props.accounts.indexOf(this.state.selected_item) !== -1) error = counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.perm.warning3");
            if (!error && this.state.item_name_input && this.props.keys.indexOf(this.state.item_name_input) !== -1) error = counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.perm.warning4");

            var cw = ["10%", "70%", "30%", "10%"];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    _AccountSelector__WEBPACK_IMPORTED_MODULE_2__["default"],
                    {
                        label: this.props.label,
                        error: error,
                        placeholder: this.props.placeholder,
                        account: this.state.item_name_input,
                        accountName: this.state.item_name_input,
                        onChange: this.onItemChange,
                        onAccountChanged: this.onItemAccountChange,
                        onAction: this.onAddItem,
                        action_label: "account.votes.add_witness",
                        tabIndex: this.props.tabIndex,
                        allowPubKey: true,
                        disableActionButton: !this.state.weight_input,
                        allowUppercase: true
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        value: this.state.weight_input,
                        onChange: this.onWeightChanged.bind(this),
                        className: "weight-input",
                        type: "number",
                        autoComplete: "off",
                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.perm.weight"),
                        onKeyDown: this.onWeightKeyDown.bind(this),
                        tabIndex: this.props.tabIndex + 1
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "table",
                        { className: "table" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "thead",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", { style: { width: cw[0] } }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "th",
                                    { style: { width: cw[1] } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.acct_or_key" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "th",
                                    { style: { width: cw[2] } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.weight" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "th",
                                    { style: { width: cw[3] } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.action" })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tbody",
                            null,
                            account_rows,
                            key_rows,
                            address_rows
                        )
                    )
                )
            );
        }
    }]);

    return AccountPermissionsList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPermissionsList.propTypes = {
    accounts: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainObjectsList,
    onAddItem: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func.isRequired,
    onRemoveItem: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func.isRequired,
    validateAccount: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func,
    label: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string.isRequired, // a translation key for the label,
    placeholder: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string, // the placeholder text to be displayed when there is no user_input
    tabIndex: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.number, // tabindex property to be passed to input tag
    weights: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.object // weights: hash of {account id -> weight}
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(AccountPermissionsList, { autosubscribe: false }));

/***/ }),

/***/ 2689:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(601);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(602);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(715);
/* harmony import */ var _Modal_QrcodeModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2690);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(823);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(733);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var PrivateKeyView = function (_Component) {
    _inherits(PrivateKeyView, _Component);

    function PrivateKeyView() {
        _classCallCheck(this, PrivateKeyView);

        var _this = _possibleConstructorReturn(this, (PrivateKeyView.__proto__ || Object.getPrototypeOf(PrivateKeyView)).call(this));

        _this.state = _this._getInitialState();

        _this.showModal = _this.showModal.bind(_this);
        _this.hideModal = _this.hideModal.bind(_this);

        _this.showQrModal = _this.showQrModal.bind(_this);
        _this.hideQrModal = _this.hideQrModal.bind(_this);

        _this.onClose = _this.onClose.bind(_this);
        return _this;
    }

    _createClass(PrivateKeyView, [{
        key: "_getInitialState",
        value: function _getInitialState() {
            return {
                isModalVisible: false,
                isQrModalVisible: false,
                wif: null
            };
        }
    }, {
        key: "reset",
        value: function reset() {
            this.setState(this._getInitialState());
        }
    }, {
        key: "hideModal",
        value: function hideModal() {
            this.setState({
                isModalVisible: false
            });
        }
    }, {
        key: "showModal",
        value: function showModal() {
            this.setState({
                isModalVisible: true
            });
        }
    }, {
        key: "hideQrModal",
        value: function hideQrModal() {
            this.setState({
                isQrModalVisible: false
            });
        }
    }, {
        key: "showQrModal",
        value: function showQrModal() {
            this.setState({
                isQrModalVisible: true
            });
        }
    }, {
        key: "render",
        value: function render() {
            var modalId = "key_view_modal" + this.props.pubkey;
            var keys = stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().keys;

            var has_private = keys.has(this.props.pubkey);
            if (!has_private) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                this.props.children
            );
            var key = keys.get(this.props.pubkey);

            var footer = [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Button"],
                { key: "cancel", onClick: this.onClose },
                counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("transfer.close")
            )];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "a",
                    { onClick: this.onOpen.bind(this) },
                    this.props.children
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Modal"],
                    {
                        visible: this.state.isModalVisible,
                        title: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.perm.key_viewer"),
                        ref: modalId,
                        id: modalId,
                        onCancel: this.onClose,
                        footer: footer
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "grid-block vertical" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "content-block" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.public" })
                                ),
                                this.props.pubkey
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-block grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.private" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    null,
                                    this.state.wif ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "p",
                                            { style: { fontWeight: 600 } },
                                            this.state.wif
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "button-group" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                {
                                                    className: "button",
                                                    onClick: this.onHide.bind(this)
                                                },
                                                "hide"
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                {
                                                    className: "clickable",
                                                    onClick: this.showQrModal
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
                                                    style: { height: 50 },
                                                    src: __webpack_require__(2691)
                                                })
                                            )
                                        )
                                    ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: "button",
                                                onClick: this.onShow.bind(this)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.show" })
                                        )
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-block grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.brain" })
                                ),
                                key.brainkey_sequence == null ? "Non-deterministic" : key.brainkey_sequence
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                            key.import_account_names && key.import_account_names.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-block grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.from" })
                                ),
                                key.import_account_names.join(", "),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null)
                            ) : null
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_QrcodeModal__WEBPACK_IMPORTED_MODULE_5__["default"], {
                    showModal: this.showQrModal,
                    hideModal: this.hideQrModal,
                    visible: this.state.isQrModalVisible,
                    keyValue: this.state.wif
                })
            );
        }
    }, {
        key: "onOpen",
        value: function onOpen() {
            this.showModal();
        }
    }, {
        key: "onClose",
        value: function onClose() {
            this.reset();
            this.hideModal();
        }
    }, {
        key: "onShow",
        value: function onShow() {
            var _this2 = this;

            actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_1__["default"].unlock().then(function () {
                var private_key = stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__["default"].getPrivateKey(_this2.props.pubkey);
                _this2.setState({ wif: private_key.toWif() });
            }).catch(function () {});
        }
    }, {
        key: "onHide",
        value: function onHide() {
            this.setState({ wif: null });
        }
    }]);

    return PrivateKeyView;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

PrivateKeyView.propTypes = {
    pubkey: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string.isRequired
};
/* harmony default export */ __webpack_exports__["default"] = (PrivateKeyView);

/***/ }),

/***/ 2690:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(823);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2340);
/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(qrcode_react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(429);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(733);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }









var QrcodeModal = function (_React$Component) {
    _inherits(QrcodeModal, _React$Component);

    function QrcodeModal(props) {
        _classCallCheck(this, QrcodeModal);

        var _this = _possibleConstructorReturn(this, (QrcodeModal.__proto__ || Object.getPrototypeOf(QrcodeModal)).call(this, props));

        _this.state = _this._getInitialState();
        _this.onPasswordEnter = _this.onPasswordEnter.bind(_this);
        _this.onKeyDown = _this.onKeyDown.bind(_this);
        _this.onCancel = _this.onCancel.bind(_this);
        _this.onClose = _this.onClose.bind(_this);
        return _this;
    }

    _createClass(QrcodeModal, [{
        key: "_getInitialState",
        value: function _getInitialState() {
            return {
                isShowQrcode: false,
                keyString: null
            };
        }
    }, {
        key: "onCancel",
        value: function onCancel() {
            this.props.hideModal();
            this.onClose();
        }
    }, {
        key: "onClose",
        value: function onClose() {
            if (this.refs.password_input) this.refs.password_input.value = "";
            this.setState(this._getInitialState());
        }
    }, {
        key: "onPasswordEnter",
        value: function onPasswordEnter(e) {
            e.preventDefault();
            var pwd = this.refs.password_input.value;
            var key = this.props.keyValue;
            if (pwd != null && pwd != "") {
                if (key !== undefined && key != null && key != "") {
                    var pwd_aes = bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["Aes"].fromSeed(pwd);
                    var qrkey = pwd_aes.encryptToHex(key);
                    this.setState({ isShowQrcode: true, keyString: qrkey });
                }
            } else {
                //notify.error("You'd better enter a password to encrypt the qr code");
                this.setState({ isShowQrcode: true, keyString: key });
            }
        }
    }, {
        key: "onKeyDown",
        value: function onKeyDown(e) {
            if (e.keyCode === 13) this.onPasswordEnter(e);
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var pos = null;
            if (this.state.isShowQrcode) pos = { textAlign: "center" };

            var footer = [];

            if (!this.state.isShowQrcode) {
                footer.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__["Button"],
                    {
                        type: "primary",
                        key: "submit",
                        onClick: this.onPasswordEnter
                    },
                    counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("modal.ok")
                ));
            }

            footer.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__["Button"],
                { key: "cancel", onClick: this.onCancel },
                counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("cancel")
            ));

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__["Modal"],
                {
                    visible: this.props.visible,
                    onCancel: this.onCancel,
                    footer: footer
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "text-center" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { style: { margin: "1.5rem 0" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                            component: "h4",
                            content: "modal.qrcode.title"
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "form",
                        {
                            className: "full-width",
                            style: { margin: "0 3.5rem" },
                            onSubmit: this.onPasswordEnter,
                            noValidate: true
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "form-group" },
                            this.state.isShowQrcode ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "section",
                                { style: pos },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "span",
                                    {
                                        style: {
                                            background: "#fff",
                                            padding: ".75rem",
                                            display: "inline-block"
                                        }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(qrcode_react__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                        size: 256,
                                        value: this.state.keyString
                                    })
                                )
                            ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "section",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    { className: "left-label" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                                        unsafe: true,
                                        content: "modal.qrcode.input_message"
                                    })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                    name: "password",
                                    type: "text",
                                    onFocus: function onFocus() {
                                        _this2.refs.password_input.setAttribute("type", "password");
                                    },
                                    ref: "password_input",
                                    autoComplete: "off",
                                    onKeyDown: this.onKeyDown
                                })
                            )
                        )
                    )
                )
            );
        }
    }]);

    return QrcodeModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

QrcodeModal.propTypes = {
    modalId: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,
    keyValue: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string
};
QrcodeModal.defaultProps = {
    modalId: "qr_code_password_modal"
};
/* harmony default export */ __webpack_exports__["default"] = (QrcodeModal);

/***/ }),

/***/ 2691:
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QoLBzEKr7oFDgAAIABJREFUeNq9fXmYXVWV71p773PuvVUVSAL2o40KmjCEgiSEVFUSAiRR6U9Bwan9tPG1OPLk2bQTaQd89rOfooJD80RBUfTz4RPnVpx9bZuEzIHMAaICraIiZKjpnrP3Xuv9se5dtetU1U1SiveP+m5uztln77XXtH9rOPjWt751y5YtzrkQQpZlIQRjjDGGiOB4PsxsjIkxjoyMbNmyhZkBABHlf4nIGNPX19fT0+O9995v2rQpvRcR5Rr5rrfLP/VKItq7d+/VV19tjAGAPM9DCMyc5/ncuXM//elPy4179ux54xvfWK/XiUjWJU/pPH9rbQgBAJQC8mhmjjEODAy4bdu2rV+/Xn6NMSKizDud4rF8ZHSZ9+joaKPRkAGNMTJUWZbbt2+31nrv0ykKlWUE/V1ukQ2T+cgFiHjo0KFt27Z57+VHWaG1ttlsxhittcw8ODh4zz336MR0qDzP06dPJJbuUIxRZyKTQUSnU0nvkWUfF7F09BBCvV6X7/J4mXGe50RUYVjdGyGZ8pE8XcmnXxDRGNNsNnVVwgsxRiGZ/g4AzjkdWTfsWJZQobLOygh10l2Vx0/jY4yR+SFiCCHGGGMU6lRIL49LJ2etFUKkgsnM3nsdR4aSnRDKKhWMMYcOHdIHOefku0wmxigD6uZN/MjTZUD5yO7qjiKikbHkV6GiPIOP8yO3K6Gdc9Zaa22WZTKPPM9VlFSCAMB7X6vVdELOOUTMsuzss88GgCzLZBxZSQhBuIOIGo1GX1+fEDHGuG/fvnSzRT7yPO/v75cZeu/Lspxq/rorIQQZcGhoSMbUa5xMSNSkiqtz7njFUJlfNbGKmLU2xijKoiKGwtf6Vy8wxsyYMUNuF8WvnJvnuQw4OjqqkiKqUDZG9kDYVigrukz5cdL5V5hOGPbIkSOqsIwxTqiYXic8fLwKPtWFKkcVXSCLnHhL5Ue5RamWqggiKopCZVnkS9aZZZkaKL1ApqG0Vqp1sIk6iOyfEFekzaRaUK47qpXt8CRlHNFBkyopXbyqM/lF1bPcqOJQUXYiLHLlyMiIXiwjqJirdVYpUbJ2mLxogImMYoyx1o55E8LM6YZ3/lRYWr/rbug/RdlX3BGdligXdVxE8RHR5z73uSzLRIUtWLBAx1yxYoWMFkK47777ZObOOSWrem3yFO+9PnfTpk1TLUc0IyL29fWJUkpdxTGd9WR/KhZduS/lLN18nZ+QTHZVLIA6bsqbqon0u4wwUa6Pa7YVsRhTUE82pYSh1PmUL7KZ+stE56uyYDFBYmGFHMIv6iLIIMKGcv00dIgq8qn0tXmyiSXP1s1XaRKFolqywho6b71S6SJKXSRUr1RJ9N6L1P/pM6/ok78EsVQp1Go18R7UysinKAphhJRwHZhU2WdkZOSee+7Rwc8991xx65xzqQE9Xsue0qhy41+Is1Kekm0XfklVe2V++r8VudBxurq61MtBxO7ubvmvoiimYc0nEjT1Qv5yOit1GlSRy+anB2YlxMSjiRybU59DbbeMmVrbPM//FJ3VaeP/AtZQ6aKnqFSFjx1Tk4Oh+Maqs9QRVYMoBqurq0tdBIWV5OxSYcNjF8aUtSscOh3OEke8glV1dvZSRKEyJ/HgJ4rh4sWLVWDVeiLixo0bL7zwQgWFjooaHaOyT7EzdWv/DJyVrqGCQx0LZx0jJ2ZZpkBNyon1el3tpvpcuiXq7oqva4xRZK0zSKfjpMeMytLctGUq3fOjmjD5e1SyKjuo5lY8T72qoihkPQpsioJT5i3LUqFBEWE5Y3c+xumYuhzxQo6JWFORQDlf/JqjqlL1sPTGzqdZuSyEMDw8rFCvc857L6c84ZQU85LP8PCwzFncfbUSWZbJJIWCHbZW2HNwcFDuTV25oxBrKlGfqKo6L16vd86NjIyIgBzVKgHAvn37lIsXLFhw3333idz19vYqgdJTt2xeyshyLBUaiR+7bNmyzuuStYQQJp4ipslZFZC+8+J1wQpadRZbPdwdOXJE/ICyLOv1uopJrVar6GAhop6H1O+VQ1Ke54pVTHXoUz4VwU/PBn8GnSVzOkadVbn3qFYpna5Em1J0xXsvroOqcEVBlNbiOsjBSHScTniqOYjjVoHX/wwefIoWHIvzUkEpjxpkkxkL1i7+p/hZcrsKsnq2qd8r85Fly152dXUp4NFhtxRfVdFzzvX09Iy7aNWqVRUf51j2v4PY1mo1USiKdqrzIu7iRGcvBf51AuJnyTg7duww7U05d+ECHwMzx+jvWb9WWXvhwoXq9G7atCm1/ROduOP9OOdWrlxpFEVVn2UaQcP0uFAURQhBxEcRD3WanHNydlMWSO1UigurBy+IqJDXWtvV1WWNsKrLs7oAEhKMkaiSkr5er6e70gGAPyoTyLBG5D/d2GnDygrIOucErdYQVqpKxLTL3og2ybJMNHSK0lRg28xlFcsrke0KDi6EE93UbDbTcOT0FpXiqO7gwYOpEtGNnUZ0R2ght3vv5QGyAPHuxN9RJkoJquqvBeA6J0sV859lWRliltWIwuGDh2IIzrksy2yWi2ir/hZTIGMKb+oJtHJKOy4FTUQHDx5EsRdijysw5vESS7ZdpViEQiiVenf6T+9jltlEhNl7v2XLNg2JHzlyRDDlPM8HBpYZA0VR1GrCYgxgjhw58sAD+/M8HxkZmT179rx583Q/hFjNZlMMgrLk9EJ83vs8z1E34c8FLaaHNRWZtWvXilopy/Lss8+eMWMGMWaZQ4RI0RobyYsmwraBVn4RP4sBKEZrkSmgMQCGGQGRYgwh1Gq19GAEAAww2hxt1BsMDAAISEyIaACnvTpMcV6Vwc5AwhRjRZFE2duhoaG77rrrK1/5yo9//FOhYJ7nzWZTNtkYc/6S/he84AVXXXXVnDl/TUwx+sxlPvjcTVi2RGuADTBD/MC//Mt3v/tdtBbBRobcZUVRCP+q64uIz7v0+b29vZdffrkGe2KMeZbj8ftJY6Sg9kfPENOI3UsAfLQ5yOx//ZuHXvqyK4wFQDAWJoYPWs9Gi8YBmKXLl+27fz9xHC1GiKOi7OlMZH7eF8z+da/9rwiABowBMGMpLhoebqk/BOMsILzs5X978PAhYg4UI09vaa0pQX9/fyUW3dnVcpD1zj+HmQP5yJL9wUwcikPM5fXvfg8AIIKoUYO5WpM0+IqIFiCzDsCYrAts7Y3//R+bkT1zJCbmZrPJHJkjM4fQoplnH0bpmte8yBpwCHUE42am3tP4g5cxxunfO7/81cDsmYk9M0dPzEzMgWMZCiYW1mPmtWvX6vIlXjmW69DV1aVjKyLRwcmOEJ/ylKeIQjFowAAAMZHN6osXLLpv195arVEUo8ZZFo8HuK+v77nPfa44FkT005/+dOvWrcEXIQZrbfRNNO7WT/7vdT9fu337VrRQFr5eqwFA2Szyes1aJAKG4ME3cnFKoF53ZTNQCJVjnSIctSwrysIAGgNE8MpXvGJ4tPmqv7/SGEYAY0WviQ/sUjdAbhe6a+5U67N69eo07iQOZGcxXr58ufctWaHofTnCsTnv1DkZQmZzAAcGAeHZz7nke9//sdj+iSy9e/ful7/8ZQjQlVsEQLSu1nPK0+cG5sBclG3fMqjoRM+eA1991eUtcUP42C13qrRKBEywmo0bN77rnWsa9byWOxk8r3Wjaxx4+NEg1xPHGCNTYBYeUydGUxKNMcuXLx+XKXTxxRdXDpCdw/fG4cBA39hK2DM3L1x+ngWo2xqCA3A9M078fz/79xDZB05dapmNOCtl8MzxoV/sP23OUxyAFRG3XQMrVgbmIjIJlYmZAlPwvvBccuDXXvl8RMzrNQDz/o/ekaq2siyTjYkc/Esuv6yROVEJYGqrLrnMMweKvmzG6Ik5EkdiVWUhhB07dqjTd84551SJlToUqZqf9AMIS5f2hxA4cvSByb/33W/PDCBA7moA2V8/9dQ/PPZ4SVGmImvQAfWfgTlGT36E/fAFSxZ059aiQ5ODyT904ycCs2+rqhhK0V+jNMKB33L1y1sQALr/8dEvCKumzCsIJ1Ng9hzL8xeeU3c2z3MAB7b26BMj8mhmT8whMkVm4jVr1ogMLlq0SBIpJqp5I7iPeqFCXXUjJkmgMJYIrLFgCDk++utff+ADNwYCBihDnDV79oO/+MXsk2cDBQAyCIq3qFLIsoyIENgYgy6LxOvu2XjKKacAB6ASmNasecfhI8MRUDSnsVZcOIcOAgyPDAmDi24ty1JObEVRiKoVVCsSMQEgfu72z8YQfVkCEMS4cdN2knMikdgFNABI9XpdDkZyxkyTvMZBNJXjzsSI7ngElWtZ3mwOAxNmeO2116I1AIBZDgg/X7eOgYjJWRNjCUBi/iSpTASwZd0BY2QAZ/MGZNnP/uM/LEJN3NJI1113nbMABoghBAJs62PD9Sw3yBQiAGdWWKaFdggs04I6rItEALBg8aIsw66aQyAAuu++vRSF+Gn0hCrhyDQ3cYxYgsaKQVFCdggfGbBEUK/XAPmJxx77+rf+LQRicBzDG6+55oyz5jXqGSISk7Nj2QmyJImzt3wWZmMtAxBgCPTUpz/tmmvewBGAIyDeftttPjAxMIJ1jhlBrAZiCMG0Y9tEAZIkWM2xISIGtM6R9wBw3sJziyI4BAQYGhpBCwRs2qgpM8vpQ1hECDIpu4zL9tYg+5g3NG5EAADKOQwPA3oosls+doOzmQMACGC6P3zTTQbZcHSMljPgVjJuZX9agwNCJARCJrTO2Ox97/ufooktRIT4ma98N+NmACAA5BIRS4hgAZwNDE5svzUa5kmZAhENAHNhsgawa8e7awYoy2xgYITIDAwWAGgMfUfEtWvXimwpviSfgYEBk+Z5p7lbim2l6fNEBD64Wj1yBAvf+Ma3yuAZwLr88he/pOasBQQAppbgdDozoT7RGjQA0N3dGOg7p21q8Gt3fQXQUtsXijE6cHJUtBaNzYCNgr+CzAjPtpL/mAw0KBwBsHv27rSmzraIkC1c0OuEzuLKIqABAGw0GgJMpjCWhiattY1Gw3TOGUwLH9LsfotZeeSJfff/J4DJrI2RX//611oDDGPIkSxzyjMXMBhmljkBANh6dvnllwG0VMnPf/pDQOsQkAkArLEGAAgQDUUoyxLQMKPiPCoHLbgVgSIb2/PQLzY0R2qem4EMYL6s/zxhv/ZSQU7Waapqmgc85gZIHnyadZfmRlWSbzT3sCQGgK2bN4h3xIyA+UUrlqfPOJYjavpQ0ZLPee5qC0RM1uUwOvy7Px7G1iYjAEQKLdgaENEaY9OET0gqMmQTEBGweNd17wcogDOwpndJ/zPmzERg4DaR2uqoLEtNPtdjX5oHD62TaJIKkSauVMJzLeeewToHjLt3b/XRABIRnXzas7rqxjAARTkTHhUIkSsMCpIFzAjMZ83vtQAGTYzBONjzwC8BwLQ4lJxxgC2eyPOcoo+hFEnUmpukIMIgFnd+8Utf/9b32QABQ6x9+MMfRAAD7GxOkcVgyapvuOGGI0eOiL2W+C4R7dmzp+o6TBqkmYqznEUwBhB//9uHIxhAQOBnnXGmITCYhnCOGh0Yz30GmV02Y5YFcJkBRi5H//N3f7TQZl4iHtttKotRAGqM54U0wEMB3v+B66989Zvy7oYnAAyve8ObL1k5EKMHMAAGUBSsEMsIz8oZQ1hMY5fqUTupLKhAo2kIU3V8i6xEzTIA46O/fUigOiSeefJJDICgUU8wRm7sAIABMyGKr2AZLYABcCd2ZwebEYyzBIOj5RiohMjAwGAzY42NFOs1e+D+PRs2bBDtLvF9Y8wDDzywfv36Oz7/mZGRwEhDw7Wsy/3N6hd/4uPvdQwkW8ggVqUSixa4TbPn06CJMcZphcZUWSVCKVV1BiCr5QAwNHwYwIADDnDCzBPboSpqsQwfBUFEAAALEAGIARAtAEbPM2ee8NhvHofMGoJmIcQitA6BI4QMIcYYKRoAX8Q7brv1i5++MVXGCvk7BMQcnOE4/L73fmrNmqstBPCMmSGGGME5YAaDQj3UkK2WmSGiFOGNBQk3bdpUyTHTUGiadaaAHKIJcRTIFUgAkEOtsIBNZGgVaJVlCQiMR1HzRIJ7QaCIgMxABNYZ9l5QHwvQ3d0NzEyi4AwCC4GFKXIECM0xuQMGBEAbAgGYgFnXjJPf8Y63HRp8Ys2aq1sbaBHBGITMtUZsiWSbP2KMa9eubTQaAi4sWLAg9Q1dyodpKYB+EaRYAf/ABMQQY6PelWeuLIYB4fDBx8VyhxD1/IHGMMcpFZcBQAg+uiwPxMaARYLgDw0NGWsgxgDQ090FKA4mMIPFdpCRyVosI4PJiYpWhIVaxX/W2RDC7JNOueVTn3zpS64QkSnKop7XiL2BrAN8rABMxUMQp9epA0VEgmSlxX1iUNWsil9Syyw4+9Snneb9RgCT1+HXDz1EDIjWOIHiRMF3ygFBBCJyWQZgrAEfPLN3GR8ZIXYZoPEMp845JfEzEIABwGUZgwkRnIUVq56zesUCIBZ1s3nzxu/823djCM7CE4899qq/e8mtn/6bH/7ge2iplteCB5dR55wBEUD5m6Y0id/r9u3b9/jjj0sYbuHChYr8CSsJjbZv3y5kbsX+iQHo6afNM0CAObP/5YP7GYEiW4vel3luseWg89ReFgmGaQzECIjsHD70wO4SgMXuYXb6M0+NAA4MACFihOioVaDCjMZlqy953vve8XpisihcjAD0T29/x003fdyY6Ev695/85LLnv+TuH36dCGwGDNzBQpdlaa096aSTFi5cWKvVarWaJj5ba8844wwYGBiQpBxNXVU8q1JqpIGGpQN9HMPPfvLtOkLN1MEAQPejfzwyOFpGJgHORQ16X0wVAgjkiYJAXEVJzDE0H//eN28Xmwim5mb8VWAuSIA5z8yeS/Z8zWuvQLQADkz2z5/4QmQKFFtoH8fm6CCTv/3WWxCh0egGcADuIx/5lA9MXPpYHjU2IV5bBeAVspju7m6tkqnIoFaXpmIMBh0wIPf1r2AGZAQEC/R/7/pavZ5xy3UBHB+Cn0wMbTvVC2wmpSnuhz/4KYJFZGvw/P5llluBDwhtFARbyfFoDDCHEBDQokgQee9r9a4Y6TVveP11b/9vzdHCGAIM7/yndz36+8eK6NFkHUJeGlFPk7xUwROREUqpX5omM8pfyYfSMltgOShxV8/ss8+cE5kBwUC87bO3h7YuTAORU7ukaE1G0QMSAEQmzBqf/9ydLZc9lle++iqITZZjEfIYjYENMHAEpkZeK4tCwZksqwEYBgPgPvi/bjj9WXMyZwAxxKFLL73U2a4OyU7GGFXZac556naZFNZQVJOINm/evGHDhu3bt+/fv3/+/PlLliy54IILLrjgAjDGMABiUfrXv/Yq1zqN8L4dO3bu3BMpapFN56wVjiCQFmLL+H79K18tPAASMhHTi150udBRWFRdWSICJrmrKJridreML4APZJ0LkdE1vvntL3sfgCyg371n1+dvv4v46GkNlRyp9HAOK1eurKTJT5U/1U57dsuXXcTEVI6ODj0uoAxCDpift2TZaGDPXDI3y1Fmz1SkiH4K8HtmHyWUVzI3mctTTp5lAWytDuguu+IlxOwDE7OPgUjUhw+R3/yaKyS2g2Cu//jnp9Q9xMzxTa9+KQJ0AQD0mKzn9yPEHCn6EIKEKUIIzJFjmQY+UsU9DoPvnLFXqaQxxlhniEPwEV1W757xxte92jlAiIh479atH7vpY+JC5Vk9RgY06tBWKgYsgDMIAL4sgfEt//APTzxxkBFiGcCYG264QfgJAZyxiPa4UxMQIDRv/tyXZtVhBFzdlBT4NVe+MpIhcNbaGALqQaV97hcdouJVHbQzZ4kuS2kMCEv6+9pb533zsEMwCNZmYnq+ffcPPHNJHChOzAQQW0NEzLE5Oszkmcsv3XE7ihZDB1h71WveEJgLX5IYuJHRFmMdD2cFZt8cJC6/8KmbAEzNALguQPez9ZuGi0DMRDQyPMgchec1yzCFWyqfKZNnent7TzjhBAAYHh7etWvX4OAgEfX09Cw679zzzjuvLCjLDRDYrHb33d+89NIXxeidyVyeXX7pZV+88/+88hV/K9HqNP1M82iZGZhqeQYAN97w4Xe/+3rB9YBh5sl/ddttt8o2C4xTq4SFj5W1CGs9GIdedfU//uvNt2zb+6scRjy6573gikOP/zYCOMRGVxcwhwiI8PvfPfrII49o0a0IxIwZM/TE04mzlJtE649Fh7iITMQcvMh2ydxc8/Y316zJTSvDwbr6ylXP/ePjh6mt6dJcD2Gu0Bx+cN/uhb1n1Z1FgFqtkde6AbI9+x8OzJ4pchniaKQilL4dBD0OziKOgZmpJOZf7d3mnHFyejeNa697z6gfm5oor+uuu64SrM/zvK+v71h1lmSjaQ5Eq6gFDBBTAOPAOUfMAPaGj3z0yitfGYmNAWOAol+/fu3JJ8164QuvuOOOO/bu3avyX5bltm3bbr755sV9S86Yf87+Bw+UgVxWKwpflsWO3bvnn/mMUAYjRDcO2NjMwXQyHI0FKinDWD79rEVv+PuXm8zmBkxmPvGRDz388MMhsgDbEkA84YQTpGuLwqST9GLpwFlqAdPshxhKJiZiYiaOkUNbyMuP3/ghZzF3rYvzei3FSzUzU8+G2mnGufzU0+bdf+Bhzxxa8WcmotHRUXXNp8FZTMJcftQHLg/Va5mcb11WO7N3gSTtUMv2xfe+970aoNX46bJly46Js9atW7dx48atW7fu2rUrRaZ++eAvt2zeKuSNFBHQOgcMwHzt296ye/fOufOe6YwFgFAWEsJJGyuNtY6QI6Zk70R++OGHvvHNr/sA1kKkVpSlXq8TME2Lr4ACgbEERXR1W3LW/dlb/pXRNDITfHH/vn233voZAAgMzhmg2EZNgkKhk9SwXXTRRWnFiLBJ6tNPzM1dvHhxNdMs+e598cMffv/Zz17lsrGYQBo91EolQepdO+wAprZwyfKDR0Ylkab0LW5q+WLEZTHKXL7uqldiCzzM3vfBj3Vws6g1pUAUIhXM/vzFCwABrRHn8A9/fCxITgbT9ddfr417dMlLly4dZw0llATjuzBV+kRVMt3T+ra0ME6QL+fcRRdddMkllwDAj370o02btuzdu/dXv/qVbECWZX19ffPmzbvkkuc8bc6cvr7z9+y5HwEYyFnYsXXLSSed9PVvfO2Flz7POQmAsLU2xBIYszxnCmvWvPMNV18TyQSwzzj1tCkZi4mIMtuqPkdwAHT33Xf/6pHfGGPKshwDFRA0mT5FDSY5fqxevVrjiJwYL72n0g3GGDMwMDA6OjppcmVZtjJevC/ky/g0oNZR3ntfFEWMPobm2992bWunEa3NrKsDuDddc20rH4hJNl98Lopehm3BFfHoaY9ERBTaU/I+tn13ij4GsezE/J73vKdSjiGZaOM46/TTTy/LsizLQ4cOaaMFa+3555+f6uO0r1xfX1+atq6+Rft03gq3yAPUOAjaoxPK8xyAKPJHbrxx1apVV7zgCmKG6CNEALjlkzd/5zvfXrfhnlNOOcUaEwEsQKDoTAYERIwWECgz1LlWq51G3soMLssyz+ut2ESSuCy/CAKqNZ+T5HxMzMxTVyh1jlImkhiHlJ2k7pj6vul3oZE+Qsdsd7OKMTRjaP7u1w8/8+lPdQAAJs/r7WiVu+NLX24GDsyRA3FszYJa/OLDaAeeknnKE4W52kmqraVpXQIzizWs1D1VdJZJs9W1wEP7e02sDxJmEQw6TWLS4J0mH4zlaCTYhvZTkZBtWQZjMzTuv8x56i8ffvhlL3sxAJVlExGNtYjw6iv/7tkrV40MNSlEBCPujXKEs3nn8pgELLIxcrNZwvgmZzp/TQZJeapaIy0+p1bITkz+rhT0TKzLa38n76Mo+HaHMFspINDKV+ccUEtIGZAgxDJkzt1511fvbKeMSa2A4M4hkHNS6KNWxYUg+MmUcUmKMTLJ1nrvXZbV2qUWmpmkG6k1bFoRqsDWGLH27t176NAh6X2SBlNTcCflrBjjzJkzzzrrrEr9u8Y7tNpEVpi2+xrnkSAyE7bIx1leR5A8Wi91T1LThczAxlkDDKJjrMUQAxA45yjClHgEs7HWoB13OIVxRZ5CR1msODRZlp1wwglz586Vy6SV3thnxYoVlRLKzmH3tO/ZpEV8abOLFJnRDJyJI0xsulkRJfmrmJx+0lsWLVokmiiEsH79eu13IEm0or/Wrl2rK01T8yu52JyAEKkRb0XKFLpKY6udC75Vso5a+at5pGkNvmq09MexfBXTSj4QXFz+aiwvxZG0DHliHwi5sdFoqFEWPZvGBCskU99dvcj0MqOPl3KhSnX1pA3ZpJxQmeio9f/GGNGmaVHOuCBIkjymRiDPc8mZ0h5uabqdaBblYqnVShvhaRfX9GCr9bWpAtWOcJC0VEnT/nRrnWbL5Hm+cOHCPM8nPxYlOksD1/rXGLNu3bpJr1+wYIH0H5LOKJroUunPptO48MILpZPf8PDw3r17hR0ajcb8+fMhaYIiBvcPf/jDAw88UOmgV5bljBkzlixZIlpv3rx5WgIp/qBo7jzPL7zwQlHkRVFIbFRbwAkTSPdNGX/WrFlw8cUXKwnFJ2o7JpN/JtZKaBvaSXVWmlMum59WCFWYJc0L27Fjh2h6AEhP/22glUMIO3fuVEkcGBiooOZSd98+sXpm3rBhg4r5qlWrNEFfa6oBYMmSJfqgLVu2QLuP3sDAgEvL1CZqzUlDIAp4KlMctbMsjG/5WommaN2xyLgQd2hoqFUhNN7mpJMcHBxMu1bD+P47mnKQ9mtRB2h4eFi742nerPpPojFED4gf09XVZVJ9UelEMOlHSVOWpZ5yOseXlLHTnnyqNer1ujKL+ofSE6WS0pkGPmTDFKSW85NSTTZGRpPEhVRWVNgSAAAGi0lEQVS1yZakiQpSWSzcJDXxyg0y51aJHkzR9Xnz5s2TOg3qEBCRSEfnGuGNGzcK73R3d/f29tbrdc2U0y8iHTLU3r17Dx48mOf5gQMHFi1aJC1v58yZs23bNslFkLvEYtx3333aXvXgwYP33nuvKCaxntKjW4UmhLBnzx7t9TM0NLR9+3ahzoEDBxYsWCAe9Zw5c/bv3z8yMkJEBw4cSBMwjyluOJV8pQqis5+lajVt+aDaJC201z07//zzVQdt27atcvKYWJwFEzrJVqrd0hbiFdu6ZMkSndvmzZtTjaR/V65c+aR3ZktFQ/suaIRNjFpqYVVsU+9EEKEErgDtuZyufFyoPTlpac/o1JdMp6fz0RYOk4rLk04sFRwFDlPnKFWRaSWU5mJUWqqkFaQV9VrJG06746V5oROLBaW6P6W4NDefWBvypDdIlP0UG7d79+7BwUEhRH9/vxhBY4xgZ7KSjRs3lmWZZdnhw4d37tzZbDadcw8++OCiRYvErT106ND999+vO5G+EkA3YNasWWeccUZ6NhJH9IknntBO6GkV3GOPPbZz586yLEdGRn7729+ec845YgdGRkZ27dp1rBHpP11nTVQTlWcp6qR8pFVReq+g/vLZs2dPxTvT1Cj5kue5WB61sCJZMcatW7dW/I+Kk2GM6e/vV8fw3nvv/YvqrNSGqkylCLfYbFUx9Xq9LMvKqz4UBdGMfrXo6TlJdFZZllo1m7qBFcgl9QEkRCjgkiLsIQSJJP7ldFbaLjhtJ5civymckEY6lRCNRkOP1uJApOiuSLoM7pyTwkP1wjTRTKDdiWcGOepqtCLtjT6h88CTr7PUIe7r64N208IdO3boOxCWLl1aMfnMPGPGjHPPPVfuFQUkpJk5c+a5557b3d2drk3eYbF//37xRYeHh7dv3y4EmjVr1llnnSUSeuKJJy5evFiUetq7SFOQnXNnn3228mDV5V61alXlKCN71QHYUt83zWaahi5Ta6UnuLTwbPny5fK7nhYrXyr/u23btkoqmvxzYGBgqsSYdD4TowREpGdJa+3FF19slC6VFxp0AB4qR7zOPf86q7NKiV5abyt4gPayVQBW0xP1bKSYn0JMqX+nAYEOQGYlg3Ri6+AWF2uHz/TSChqXeuG686p0p9eaSsOUqcKKMcqCBbQTH0KWKm6X9tiC9ksr5AAg/6Xd7tJWd5U1T7T4+r3SAFqvh3ZHfTdp93RjzJIlS9SOVPpcyv2HDx/WDmHH+64sADjzzDNnzpwpHVd37twpYddZs2bJgrMsO3LkyO7du8W0dXd3L1y4UN9YsmvXrjzPRSbkJOi9P3DggAaZ6vX6GWec0dXVVRTF/PnzhXnT0odJ+asiWIg4e/Zs8QGzLDv99NNh1apVAjNpJ2JFi1KRTk9zFQ1yLH7WpDiXfqnA+SmviaD19/crLrZu3brJOwElH4n3pXwkkXoh/URgLlXWqQKVu8Yw+PSFHCkgN/H1JtWmne3I4DTelZWCpemrwFIUVFEzsffp4UPP3np4qlgefbGUOCLSKgzajfZSEVGhmQhwV5xVKZ7J0hCpJn9PVdOlb4CqFPpMz6uotHytsJvIuD5C27Zqs0AxNbVaTb6oNdBGi5LMJ+GSSY97KXUq3Z+FyzSwhIhOnFcR6fvvv//gwYOaV5MqyIluhEYiBCOfBhqhYTsdSpWr6J1FixYVRYGIc+fO3b59u0z1kUcekdoaY8zQ0NCePXtEzc2ePXvu3LnyEr/TTjtN8C9jTE9PT29vr1BheHh49+7dijHos5xzixYtSskkNB0dHd2+fbsQoaenB1avXj2pppg2xqDsnQKbaRbJRAgfxveOlL9Lly5VGRckMs0Ok3u3bt2qYpXmJQgmJQOed955qnTknRcw4S0olYwzVVvy3j+5bOnSpW7iy7umfaypvJFv0hdPTBVPrUTCK+9tCO0+WaqY5H9Tf3iqF+mJ3ql0R0yNTxpDqQAS6VSzLHOpIKgfMO2mrjLjZrMp8HGqCwTxkP44aRxfGgGmTo22OSmKQpD1sX4S1koSWnp4lKH0eo1Oaj9Z8dfSh6YaXU3ZxFWri9cC4yR7WWHfNCB4XMTSd44NDg6KWpUR+vv7G40GEY2MjKRd4NRLFt0k75xTQF2aTmqudXd394oVK4QEvb296ql3dXUtX75cFLz+Lnj/8uXLRX/19vZqw4aenp5ly5al4ShZsrSrm9g2uVarLVu2TDasv7///wMCmdZm6AM8jAAAAABJRU5ErkJggg=="

/***/ }),

/***/ 2692:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Forms_PasswordInput__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2454);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(602);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(429);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








var AccountPermissionsMigrate = function (_React$Component) {
    _inherits(AccountPermissionsMigrate, _React$Component);

    function AccountPermissionsMigrate() {
        _classCallCheck(this, AccountPermissionsMigrate);

        var _this = _possibleConstructorReturn(this, (AccountPermissionsMigrate.__proto__ || Object.getPrototypeOf(AccountPermissionsMigrate)).call(this));

        _this.state = {
            validPassword: false,
            pass: null,
            generatedPassword: "P" + bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["key"].get_random_key().toWif().toString()
        };
        return _this;
    }

    _createClass(AccountPermissionsMigrate, [{
        key: "onSubmit",
        value: function onSubmit() {}
    }, {
        key: "onPasswordChange",
        value: function onPasswordChange(e) {
            var valid = e.valid;

            var name = this.props.account.get("name");

            var active = !valid ? null : stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__["default"].generateKeyFromPassword(name, "active", e.value).pubKey;
            var owner = !valid ? null : stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__["default"].generateKeyFromPassword(name, "owner", e.value).pubKey;
            var memo = !valid ? null : stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__["default"].generateKeyFromPassword(name, "memo", e.value).pubKey;
            this.setState({ validPassword: e.valid, pass: e.value });
            this.props.onSetPasswordKeys({ active: active, owner: owner, memo: memo });
        }
    }, {
        key: "checkKeyUse",
        value: function checkKeyUse(key, role) {
            if (!key) return false;
            if (role === "memo") {
                return key === this.props.memoKey;
            } else {
                return this.props[role + "Keys"].reduce(function (a, b) {
                    return b === key || a;
                }, false);
            }
        }
    }, {
        key: "_onUseKey",
        value: function _onUseKey(role) {
            var remove = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

            if (remove) {
                this.props[role === "active" ? "onRemoveActive" : "onRemoveOwner"](this.props[role], "_keys");
            } else if (this.props[role]) {
                var weights = {
                    active: this.props.account.getIn(["active", "weight_threshold"]),
                    owner: this.props.account.getIn(["owner", "weight_threshold"])
                };
                console.log("key", this.props[role], "weights", weights, "weight of role:", weights[role]);
                this.props[role === "active" ? "onAddActive" : role === "owner" ? "onAddOwner" : "onSetMemo"](this.props[role], weights[role]);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var activeInUse = this.checkKeyUse(this.props.active && this.props.active, "active");
            var ownerInUse = this.checkKeyUse(this.props.owner && this.props.owner, "owner");
            var memoInUse = this.checkKeyUse(this.props.memo && this.props.memo, "memo");

            var useText = counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("account.perm.use_text");
            var removeText = counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("account.perm.remove_text");

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    { style: { maxWidth: "800px" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.password_model_1" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    { style: { maxWidth: "800px" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "wallet.password_model_1" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    { style: { maxWidth: "800px" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { unsafe: true, content: "wallet.password_model_2" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "divider" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "form",
                    {
                        style: { maxWidth: "40rem" },
                        onSubmit: this.onSubmit.bind(this),
                        noValidate: true
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "label",
                        { className: "left-label" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "wallet.generated" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "p",
                        null,
                        this.state.generatedPassword
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "p",
                        { style: { fontWeight: "bold" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.password_model_2" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Forms_PasswordInput__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        ref: "password",
                        confirmation: true,
                        onChange: this.onPasswordChange.bind(this),
                        noLabel: true,
                        passwordLength: 12,
                        checkStrength: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            { className: activeInUse ? "in-use" : "" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.new_active" }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                this.props.active
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "text-right" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "button",
                                        onClick: this._onUseKey.bind(this, "active", activeInUse)
                                    },
                                    activeInUse ? removeText : useText
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            { className: ownerInUse ? "in-use" : "" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.new_owner" }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                this.props.owner
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "text-right" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "button",
                                        onClick: this._onUseKey.bind(this, "owner", ownerInUse)
                                    },
                                    ownerInUse ? removeText : useText
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            { className: memoInUse ? "in-use" : "" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.new_memo" }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                this.props.memo
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "text-right" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "button",
                                        style: {
                                            visibility: memoInUse ? "hidden" : ""
                                        },
                                        onClick: this._onUseKey.bind(this, "memo", memoInUse)
                                    },
                                    useText
                                )
                            )
                        )
                    )
                ),
                memoInUse ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    {
                        style: { maxWidth: "800px", paddingTop: 10 },
                        className: "has-error"
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.memo_warning" })
                ) : null
            );
        }
    }]);

    return AccountPermissionsMigrate;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountPermissionsMigrate);

/***/ }),

/***/ 2693:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(829);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2689);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(429);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1867);
/* harmony import */ var stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(715);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(823);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_7__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }










/**
 * @brief Allows the user to enter a public key
 */

var PubKeyInput = function (_React$Component) {
    _inherits(PubKeyInput, _React$Component);

    function PubKeyInput(props) {
        _classCallCheck(this, PubKeyInput);

        return _possibleConstructorReturn(this, (PubKeyInput.__proto__ || Object.getPrototypeOf(PubKeyInput)).call(this, props));
    }

    _createClass(PubKeyInput, [{
        key: "isValidPubKey",
        value: function isValidPubKey(value) {
            return !!bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["PublicKey"].fromPublicKeyString(value);
        }
    }, {
        key: "onInputChanged",
        value: function onInputChanged(event) {
            var value = event.target.value.trim();
            this.props.onChange(value);
        }
    }, {
        key: "onKeyDown",
        value: function onKeyDown(event) {
            if (event.keyCode === 13) this.onAction(event);
        }
    }, {
        key: "onAction",
        value: function onAction(event) {
            event.preventDefault();
            if (this.props.onAction && this.state.valid && !this.props.disableActionButton) {
                this.props.onAction(event);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var error = this.props.error;
            if (!error && this.props.value && !this.isValidPubKey(this.props.value)) error = "Not a valid public key";
            var action_class = classnames__WEBPACK_IMPORTED_MODULE_1___default()("button", {
                disabled: error || this.props.disableActionButton
            });
            var keys = stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().keys;
            var has_private = this.isValidPubKey(this.props.value) && keys.has(this.props.value);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "pubkey-input no-overflow" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-area" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "header-area" },
                        !error && this.props.value && this.isValidPubKey(this.props.value) ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "label",
                            { className: "right-label" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.valid_pub" })
                        ) : null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                            className: "left-label",
                            component: "label",
                            content: this.props.label
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "input-area" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            { className: "inline-label" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "account-image" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_3__["default"],
                                    { pubkey: this.props.value },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                        name: "key",
                                        title: "icons.key",
                                        size: "4x"
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                type: "text",
                                className: has_private ? "my-key" : "",
                                value: this.props.value,
                                placeholder: this.props.placeholder || counterpart.translate("account.public_key"),
                                ref: "user_input",
                                onChange: this.onInputChanged.bind(this),
                                onKeyDown: this.onKeyDown.bind(this),
                                tabIndex: this.props.tabIndex
                            }),
                            this.props.onAction ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "button",
                                {
                                    className: action_class,
                                    onClick: this.onAction.bind(this)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                    content: this.props.action_label
                                })
                            ) : null
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "error-area has-error" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            null,
                            error
                        )
                    )
                )
            );
        }
    }]);

    return PubKeyInput;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

PubKeyInput.propTypes = {
    label: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string.isRequired, // a translation key for the label
    value: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string, // current value
    error: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string, // the error message override
    placeholder: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string, // the placeholder text to be displayed when there is no user_input
    onChange: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.func, // a method to be called any time user input changes
    onAction: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.func, // a method called when Add button is clicked
    tabIndex: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.number, // tabindex property to be passed to input tag
    disableActionButton: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.bool // use it if you need to disable action button
};

/* harmony default export */ __webpack_exports__["default"] = (PubKeyInput);

/***/ }),

/***/ 2702:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2693);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1959);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1960);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2678);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2703);
/* harmony import */ var _Account_SignedMessage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2704);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(733);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }












/** This component gives a user interface for signing and verifying messages with the bitShares memo key.
 *  It consists of two tabs:
 *    - Sign message tab (code prefix: tabSM)
 *    - Verify message tab (code prefix: tabVM)
 *
 *  See SignedMessageAction for details on message format.
 *
 *    @author Stefan Schiessl <stefan.schiessl@blockchainprojectsbv.com>
 */

var AccountSignedMessages = function (_React$Component) {
    _inherits(AccountSignedMessages, _React$Component);

    function AccountSignedMessages(props) {
        _classCallCheck(this, AccountSignedMessages);

        // initialize state (do not use setState method!)
        var _this = _possibleConstructorReturn(this, (AccountSignedMessages.__proto__ || Object.getPrototypeOf(AccountSignedMessages)).call(this, props));

        _this.state = {
            tabsm_memo_key: _this.props.account.get("options").get("memo_key"),
            tabsm_popup: "",
            tabsm_message_text: "",
            tabsm_message_signed: "",
            tabvm_popup: "",
            tabvm_message_signed: "",
            tabvm_verified: null,
            tabvm_message_signed_and_verified: null,
            tabvm_flag_verifyonchange: false
        };
        return _this;
    }

    /**
     * Event when user pushes sign button. Memo message and meta will be signed and displayed
     * in the bottom textarea
     *
     * @param event
     */


    _createClass(AccountSignedMessages, [{
        key: "_tabSMSignAction",
        value: function _tabSMSignAction(event) {
            var _this2 = this;

            event.preventDefault();

            try {
                // validate keys are still the same. Better: make public memokey field uneditable
                var storedKey = this.props.account.get("options").get("memo_key");
                if (this.state.tabsm_memo_key !== storedKey) {
                    throw Error(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.keymismatch"));
                }

                // there should be a message entered
                if (this.state.tabsm_message_text) {
                    this._tabSMPopMessage(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.signing"), 0);
                    _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_7__["default"].signMessage(this.props.account, this.state.tabsm_message_text).then(function (res) {
                        _this2.setState({
                            tabsm_message_signed: res,
                            tabsm_popup: "" // clear loading message
                        });
                    }).catch(function (err) {
                        _this2._tabSMPopMessage(err.message);
                        _this2.setState({
                            tabsm_message_signed: null
                        });
                    });
                }
            } catch (err) {
                this._tabSMPopMessage(err.message);
                this.setState({
                    tabsm_message_signed: null
                });
            }
        }
    }, {
        key: "_tabSMHandleChange",
        value: function _tabSMHandleChange(event) {
            // event for textarea
            this.setState({ tabsm_message_text: event.target.value });
        }
    }, {
        key: "_tabSMHandleChangeKey",
        value: function _tabSMHandleChangeKey(value) {
            // event for textfield of public key
            this.setState({ tabsm_memo_key: value });
        }
    }, {
        key: "_tabSMCopyToClipBoard",
        value: function _tabSMCopyToClipBoard(event) {
            // event when user clicks into the signed message textarea
            if (event.target.value !== "") {
                event.target.focus();
                event.target.select();

                try {
                    var successful = document.execCommand("copy");
                    this._tabSMPopMessage(successful ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.copysuccessful") : counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.copyunsuccessful"));
                } catch (err) {
                    this._tabSMPopMessage(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.copyunsuccessful"));
                }
            }
        }

        /**
         * Displays an information to the user that disappears over time
         *
         * @param message
         * @param timeout
         */

    }, {
        key: "_tabSMPopMessage",
        value: function _tabSMPopMessage(message) {
            var _this3 = this;

            var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3000;

            this.setState({
                tabsm_popup: message
            });

            if (message !== "" && timeout > 0) {
                setTimeout(function () {
                    _this3.setState({
                        tabsm_popup: ""
                    });
                }, timeout);
            }
        }

        /**
         * Event when the user tries to verify a message, either manual through the button or onChange of the textarea.
         * The message is parsed and verified, the user gets the message restated in the bottom part of the site
         *
         * @param event
         */

    }, {
        key: "_tabVMAction",
        value: function _tabVMAction(event) {
            var _this4 = this;

            event.preventDefault();

            // reset to unverified state
            this.setState({
                tabvm_message_signed_and_verified: null,
                tabvm_verified: false
            });

            // attempt verifying
            if (this.state.tabvm_message_signed) {
                this._tabVMPopMessage(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.verifying"), 0);

                setTimeout(function () {
                    // do not block gui
                    try {
                        var message_signed_and_verified = _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_7__["default"].verifyMemo(_this4.state.tabvm_message_signed);
                        _this4.setState({
                            tabvm_message_signed_and_verified: message_signed_and_verified,
                            tabvm_verified: true,
                            tabvm_popup: "" // clear verifying message
                        });
                    } catch (err) {
                        _this4._tabVMPopMessage(err.message);
                        _this4.setState({
                            tabvm_message_signed_and_verified: null,
                            tabvm_verified: false
                        });
                    }
                }, 0);
            }
        }
    }, {
        key: "_tabVMHandleChange",
        value: function _tabVMHandleChange(event) {
            // onchange event of the input textarea
            this.setState({
                tabvm_message_signed: event.target.value,
                tabvm_verified: false,
                tabvm_message_signed_and_verified: null
            });
            if (this.state.tabvm_flag_verifyonchange) {
                this._tabVMAction(event);
            }
        }

        /**
         * Displays an information to the user that disappears over time
         *
         * @param message
         * @param timeout
         */

    }, {
        key: "_tabVMPopMessage",
        value: function _tabVMPopMessage(message) {
            var _this5 = this;

            var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3000;

            this.setState({
                tabvm_popup: message
            });

            if (message !== "" && timeout > 0) {
                setTimeout(function () {
                    _this5.setState({
                        tabvm_popup: ""
                    });
                }, timeout);
            }
        }
    }, {
        key: "_tabVMToggleVerifyOnChange",
        value: function _tabVMToggleVerifyOnChange() {
            // event when the user enables / disables verifying while typing
            this.setState({
                tabvm_flag_verifyonchange: !this.state.tabvm_flag_verifyonchange
            });
        }
    }, {
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tabs"],
                            {
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block",
                                setting: "accountSignedMessagesTab",
                                contentClass: "grid-content shrink small-vertical medium-horizontal padding",
                                segmented: false
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tab"],
                                { title: "account.signedmessages.signmessage" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "grid-content",
                                        style: { overflowX: "hidden" }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "content-block no-margin" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "h3",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.signmessage" })
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_2__["default"], {
                                        ref: "memo_key",
                                        value: this.state.tabsm_memo_key,
                                        label: "account.perm.memo_public_key",
                                        placeholder: "Public Key",
                                        tabIndex: 7,
                                        onChange: this._tabSMHandleChangeKey.bind(this),
                                        disableActionButton: true
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                        rows: "10",
                                        value: this.state.tabsm_message_text,
                                        onChange: this._tabSMHandleChange.bind(this),
                                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.entermessage")
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "button",
                                            {
                                                className: "button",
                                                onClick: this._tabSMSignAction.bind(this)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.sign" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { style: { color: "gray" } },
                                            this.state.tabsm_popup
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                        rows: "14",
                                        value: this.state.tabsm_message_signed,
                                        style: { editable: false },
                                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.automaticcreation"),
                                        onClick: this._tabSMCopyToClipBoard.bind(this)
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tab"],
                                { title: "account.signedmessages.verifymessage" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "grid-content",
                                        style: { overflowX: "hidden" }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "content-block no-margin" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "h3",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.verifymessage" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: {
                                                    float: "right",
                                                    marginTop: "0.1em",
                                                    marginBottom: "0.5em"
                                                }
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "table",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "tr",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        null,
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "label",
                                                            {
                                                                style: {
                                                                    marginBottom: 0,
                                                                    marginRight: "0.5rem"
                                                                }
                                                            },
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.verifyonchange" })
                                                        )
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        null,
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__["Switch"], {
                                                            checked: this.state.tabvm_flag_verifyonchange,
                                                            onChange: this._tabVMToggleVerifyOnChange.bind(this)
                                                        })
                                                    )
                                                )
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                        rows: "10",
                                        value: this.state.tabvm_message_signed,
                                        onChange: this._tabVMHandleChange.bind(this),
                                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.entermessage")
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "button",
                                            {
                                                className: "button",
                                                onClick: this._tabVMAction.bind(this)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.verify" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "text",
                                            { style: { color: "gray" } },
                                            this.state.tabvm_popup
                                        ),
                                        this.state.tabvm_verified !== null && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { style: { float: "right" } },
                                            "Message is:",
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                {
                                                    style: {
                                                        backgroundColor: this.state.tabvm_verified ? "green" : "red"
                                                    }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "label",
                                                    null,
                                                    this.state.tabvm_verified ? "verified" : "not verified"
                                                )
                                            )
                                        ),
                                        (this.state.tabvm_verified && this.state.tabvm_message_signed_and_verified !== null || this.state.tabvm_flag_verifyonchange) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_SignedMessage__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                                message: this.state.tabvm_message_signed
                                            })
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountSignedMessages;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountSignedMessages.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAccount.isRequired
};

AccountSignedMessages = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(AccountSignedMessages);

/* harmony default export */ __webpack_exports__["default"] = (AccountSignedMessages);

/***/ }),

/***/ 2703:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var alt_instance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(564);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(429);
/* harmony import */ var actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(601);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(602);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }







var MSG_HEAD = "-----BEGIN BITSHARES SIGNED MESSAGE-----";
var MSG_META = "-----BEGIN META-----";
var MSG_SIGNATURE = "-----BEGIN SIGNATURE-----";
var MSG_FOOT = "-----END BITSHARES SIGNED MESSAGE-----";
var MSG_SENDER = "account";
var MSG_PUBLICKEY = "memokey";
var MSG_BLOCK = "block";
var MSG_DATE = "timestamp";

/** This action provides following functionalities:
 *    - Sign a message
 *    - Verify a given message
 *
 *  The message format that is underlying is as follows:
 *  -----BEGIN BITSHARES SIGNED MESSAGE-----
 *  <message from the account>
 *  -----BEGIN META-----
 *  account=<account name>
 *  memokey=<account memo public key>
 *  block=<last irreversible block>
 *  timestamp=<current time>
 *  -----BEGIN SIGNATURE-----
 *  <signature>
 *  -----END BITSHARES SIGNED MESSAGE-----
 *
 *    @author Stefan Schiessl <stefan.schiessl@blockchainprojectsbv.com>
 */

var SignedMessageAction = function () {
    function SignedMessageAction() {
        _classCallCheck(this, SignedMessageAction);
    }

    _createClass(SignedMessageAction, [{
        key: "parseMessage",

        /**
         * Parses the given raw string to a processing friendly dictionary
         *
         * @param message Message as raw string, properly formatted with head/meta/signature/footer
         *
         * @returns {*} parsed message as dictionary with the following fields:
         *              content : User message of the message
         *              meta : Dictionary with the meta data
         *                      account : Account name of the signer
         *                      key : Memo public key of the signer
         *                      block : Current last irreversible block of the bitShares blockchain
         *                      timestamp : Time the message was signed in UTC format
         *              signed : Seperate string that contains all data that will be signed (content + meta)
         *              signature : Signature of the signed data
         */
        value: function parseMessage(message) {
            var messageContent = void 0,
                messageMeta = void 0,
                messageSignature = void 0,
                messageSignedContent = void 0;
            try {
                // cut the sections
                messageContent = message.split(MSG_HEAD)[1]; // everything before the head is ignored
                messageMeta = messageContent.split(MSG_META);
                messageContent = messageMeta[0].replace(/^\n|\n$/g, "");
                messageSignature = messageMeta[1].split(MSG_SIGNATURE);
                messageMeta = messageSignature[0].trim();
                messageSignature = messageSignature[1].split(MSG_FOOT)[0].trim(); // everything after footer is ignored

                // how the signed content it built is crucial, consider encapsulating
                messageSignedContent = messageContent + "\n" + messageMeta;
            } catch (err) {
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidformat"));
            }

            var messageMetaAccount = void 0,
                messageMetaKey = void 0,
                messageMetaBlock = void 0,
                messageMetaTimestamp = void 0;
            if (messageMeta) {
                try {
                    // process meta
                    // ... sender
                    messageMetaAccount = messageMeta.split(MSG_SENDER + "=");
                    messageMetaAccount = messageMetaAccount[1].split("\n")[0].trim();

                    // ... and its public key
                    messageMetaKey = messageMeta.split(MSG_PUBLICKEY + "=");
                    messageMetaKey = messageMetaKey[1].split("\n")[0].trim();

                    // ... block number
                    messageMetaBlock = messageMeta.split(MSG_BLOCK + "=");
                    messageMetaBlock = messageMetaBlock[1].split("\n")[0].trim();

                    // ... time stamp
                    messageMetaTimestamp = messageMeta.split(MSG_DATE + "=");
                    messageMetaTimestamp = messageMetaTimestamp[1].split("\n")[0].trim();
                } catch (err) {
                    throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidformat"));
                }
            }

            return {
                content: messageContent,
                meta: {
                    account: messageMetaAccount,
                    key: messageMetaKey,
                    block: messageMetaBlock,
                    timestamp: messageMetaTimestamp
                },
                signed: messageSignedContent,
                signature: messageSignature
            };
        }

        /**
         * The given string message is parsed and then its signature verified. A positive verification return the parsed
         * message, anything else throws an exeption.
         *
         * @param message Message as raw string, properly formatted with head/meta/signature/footer, or already parsed message
         *
         * @returns parsed message, see parseMessage
         */

    }, {
        key: "verifyMemo",
        value: function verifyMemo(message) {
            var message_signed = void 0;
            if (typeof message === "string" || message instanceof String) {
                message_signed = this.parseMessage(message);
            } else {
                // assume its a dictionary
                message_signed = message;
            }

            // validate account and key
            var storedAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getAccount(message_signed.meta.account);
            if (storedAccount == null) {
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invaliduser"));
            }

            // verify message signed
            var verified = false;
            try {
                verified = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["Signature"].fromHex(message_signed.signature).verifyBuffer(message_signed.signed, bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["PublicKey"].fromPublicKeyString(message_signed.meta.key));
            } catch (err) {
                // wrap message that could be raised from Signature
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.errorverifying"));
            }
            if (!verified) {
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidsignature"));
            }
            return message_signed;
        }

        /**
         * Given an account and the message text
         * @param account Account that writes the message
         * @param messageText String text of the message
         * @returns {Promise}
         */

    }, {
        key: "signMessage",
        value: function signMessage(account, messageText) {
            return new Promise(function (resolve, reject) {
                // make sure wallet is unlocked (we need private key)
                actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_3__["default"].unlock().then(function () {
                    try {
                        // obtain all necessary keys
                        var memo_from_public = account.get("options").get("memo_key");
                        // The 1s are base58 for all zeros (null)
                        if (/111111111111111111111/.test(memo_from_public)) {
                            memo_from_public = null;
                        }
                        var memo_from_privkey = void 0;
                        if (messageText && memo_from_public) {
                            memo_from_privkey = stores_WalletDb__WEBPACK_IMPORTED_MODULE_4__["default"].getPrivateKey(memo_from_public);
                            if (!memo_from_privkey) {
                                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidkey"));
                            }
                        }
                        // get other meta data
                        var irr_block = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getObject("2.1.0").get("last_irreversible_block_num");
                        var now = new Date();

                        var meta = MSG_SENDER + "=" + account.get("name") + "\n" + MSG_PUBLICKEY + "=" + memo_from_public + "\n" + MSG_BLOCK + "=" + irr_block + "\n" + MSG_DATE + "=" + now.toUTCString();

                        var messageContentToBeSigned = messageText + "\n" + meta;

                        setTimeout(function () {
                            // do not block gui
                            try {
                                var memo_signature = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["Signature"].signBuffer(messageContentToBeSigned, memo_from_privkey, memo_from_public);
                                var memo_formatted = MSG_HEAD + "\n" + messageText + "\n" + MSG_META + "\n" + meta + "\n" + MSG_SIGNATURE + "\n" + memo_signature.toHex() + "\n" + MSG_FOOT;
                                resolve(memo_formatted);
                            } catch (err) {
                                reject(err);
                            }
                        }, 0);
                    } catch (err) {
                        reject(err);
                    }
                }).catch(function (res) {
                    reject(res);
                });
            });
        }
    }]);

    return SignedMessageAction;
}();

/* harmony default export */ __webpack_exports__["default"] = (alt_instance__WEBPACK_IMPORTED_MODULE_0__["default"].createActions(SignedMessageAction));

/***/ }),

/***/ 2704:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(823);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2703);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }







/** This component allows to display and verify a signed message
 *
 *  See SignedMessageAction for details on message format.
 *
 *    @author Stefan Schiessl <stefan.schiessl@blockchainprojectsbv.com>
 */

var SignedMessage = function (_React$Component) {
    _inherits(SignedMessage, _React$Component);

    function SignedMessage(props) {
        _classCallCheck(this, SignedMessage);

        var _this = _possibleConstructorReturn(this, (SignedMessage.__proto__ || Object.getPrototypeOf(SignedMessage)).call(this, props));

        _this.state = {
            message: _this.props.message,
            messageParsed: null,
            showRawMessage: false,
            //
            noVerification: _this.props.noVerification,
            //
            verified: null,
            //
            notification: null
        };
        return _this;
    }
    // static propTypes = {
    //     signedMessage: PropTypes.string.isRequired
    //    noVerification
    // };

    _createClass(SignedMessage, [{
        key: "_verifyMessage",
        value: function _verifyMessage(signedMessage) {
            var _this2 = this;

            this.setState({
                message: signedMessage,
                messageParsed: null,
                verified: null
            });
            var messageParsed = null;
            try {
                messageParsed = _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_4__["default"].parseMessage(signedMessage);
                this.setState({
                    verified: null,
                    messageParsed: messageParsed
                });

                if (!this.state.noVerification) {
                    this.setState({
                        verified: null,
                        notification: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.signedmessages.verifying")
                    });
                    setTimeout(function () {
                        // do not block gui
                        try {
                            _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_4__["default"].verifyMemo(messageParsed);
                            _this2.setState({
                                verified: true,
                                notification: "" // clear popup
                            });
                        } catch (err) {
                            _this2._warning(err.message);
                            _this2.setState({
                                verified: false
                            });
                        }
                    }, 0);
                }
            } catch (err) {
                this._warning(err.message);
            }
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            this._verifyMessage(this.state.message);
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            var signedMessage = nextProps.message;
            if (signedMessage != undefined && signedMessage != null && signedMessage == this.state.message) {
                // already done
                return;
            }
            this._verifyMessage(signedMessage);
        }
    }, {
        key: "_warning",
        value: function _warning(message) {
            this.setState({
                notification: message
            });
        }
    }, {
        key: "_toggleRawMessage",
        value: function _toggleRawMessage() {
            this.setState({
                showRawMessage: !this.state.showRawMessage
            });
        }
    }, {
        key: "render",
        value: function render() {
            var legendMessage = void 0;
            var borderColor = void 0;
            if (this.state.messageParsed != null) {
                if (this.state.verified == null) {
                    borderColor = "#FFF";
                    legendMessage = "Unverified message from " + this.state.messageParsed.meta.account;
                } else if (this.state.verified) {
                    borderColor = "#FFF";
                    legendMessage = "Verified message from " + this.state.messageParsed.meta.account;
                } else {
                    borderColor = "#F00";
                    legendMessage = "Refuted message, indicated sender " + this.state.messageParsed.meta.account;
                }
            }
            var messageGiven = this.props.message != null && this.props.message != "";
            var notificationGiven = this.state.notification && this.state.notification != "";
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { style: { color: "gray", margin: "10px 10px" } },
                this.state.messageParsed != null && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "fieldset",
                    { style: { borderColor: borderColor } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "legend",
                        { style: { color: "white", weight: "bold" } },
                        legendMessage
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "pre",
                        {
                            style: {
                                position: "relative",
                                width: "100%",
                                display: "table"
                            }
                        },
                        this.state.messageParsed.content,
                        notificationGiven && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                style: {
                                    textAlign: "center",
                                    display: "table-cell",
                                    verticalAlign: "middle",
                                    position: "absolute",
                                    width: "calc(100% - 30px)",
                                    height: "calc(100% + 15px)",
                                    top: "0px",
                                    right: "30px",
                                    backgroundColor: "rgba(50,50,50,0.5)"
                                },
                                id: "overlay"
                            },
                            this.state.notification
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                fontSize: "small",
                                float: "right"
                            }
                        },
                        "Signed on ",
                        this.state.messageParsed.meta.timestamp,
                        " ",
                        "\xA0",
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                className: "button",
                                type: "button",
                                style: {
                                    fontSize: "small",
                                    float: "right",
                                    padding: "0px 0px",
                                    background: "#777"
                                },
                                onClick: this._toggleRawMessage.bind(this)
                            },
                            "\uD83D\uDD0D"
                        )
                    ),
                    this.state.showRawMessage && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                    this.state.showRawMessage && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                    this.state.showRawMessage && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            style: {
                                overflow: "auto",
                                width: "calc(100%)",
                                maxWidth: "1000px"
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "pre",
                            null,
                            this.state.message
                        )
                    )
                ),
                messageGiven && this.state.messageParsed == null && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "fieldset",
                    { style: { borderColor: "#F00" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "legend",
                        {
                            style: { color: "red", weight: "bold" },
                            className: "error"
                        },
                        "Error while parsing message, please check syntax from message below"
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "pre",
                        null,
                        this.props.message
                    )
                )
            );
        }
    }]);

    return SignedMessage;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

SignedMessage.defaultProps = {
    noVerification: false
};


/* harmony default export */ __webpack_exports__["default"] = (SignedMessage);

/***/ }),

/***/ 2705:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2678);
/* harmony import */ var chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2426);
/* harmony import */ var chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2308);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(536);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1959);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1960);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2423);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(599);
/* harmony import */ var stores_WalletDb_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(602);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }













var AccountRow = function (_React$Component) {
    _inherits(AccountRow, _React$Component);

    function AccountRow() {
        _classCallCheck(this, AccountRow);

        return _possibleConstructorReturn(this, (AccountRow.__proto__ || Object.getPrototypeOf(AccountRow)).apply(this, arguments));
    }

    _createClass(AccountRow, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                account = _props.account,
                onRemove = _props.onRemove;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    this.props.index
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    account.get("id")
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_8__["default"], { account: account.get("id") })
                ),
                onRemove ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            onClick: onRemove.bind(this, account.get("id")),
                            className: "button outline"
                        },
                        "Remove"
                    )
                ) : null
            );
        }
    }]);

    return AccountRow;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountRow.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_6__["default"].ChainAccount.isRequired
};
AccountRow.defaultProps = {
    tempComponent: "tr"
};

AccountRow = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(AccountRow);

var AccountList = function (_React$Component2) {
    _inherits(AccountList, _React$Component2);

    function AccountList() {
        _classCallCheck(this, AccountList);

        return _possibleConstructorReturn(this, (AccountList.__proto__ || Object.getPrototypeOf(AccountList)).apply(this, arguments));
    }

    _createClass(AccountList, [{
        key: "_onRemove",
        value: function _onRemove(listing, account, e) {
            if (account) {
                var currentState = this.props.getCurrentState(account);
                var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_9__["default"].new_transaction();
                tr.add_type_operation("account_whitelist", {
                    fee: {
                        amount: 0,
                        asset_id: "1.3.0"
                    },
                    authorizing_account: this.props.account.get("id"),
                    account_to_list: account,
                    new_listing: currentState - chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing[listing]
                });
                stores_WalletDb_js__WEBPACK_IMPORTED_MODULE_10__["default"].process_transaction(tr, null, true);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props2 = this.props,
                removeButton = _props2.removeButton,
                white = _props2.white,
                list = _props2.list;


            var rows = list.map(function (account, index) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountRow, {
                    key: account,
                    onRemove: removeButton ? _this3._onRemove.bind(_this3, white ? "white_listed" : "black_listed") : null,
                    account: account,
                    index: index + 1
                });
            }).toArray();

            var showHeaders = true;
            if (!rows.length) {
                showHeaders = false;
                rows.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: "empty" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { padding: "1rem 0" },
                            colSpan: removeButton ? 4 : 3
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, {
                            content: this.props.emptyText,
                            account: this.props.account.get("name")
                        })
                    )
                ));
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "table",
                { className: "table compact dashboard-table" },
                showHeaders ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "thead",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tr",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            "#"
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.id" })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.name" })
                        ),
                        removeButton ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null) : null
                    )
                ) : null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tbody",
                    null,
                    rows
                )
            );
        }
    }]);

    return AccountList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var AccountWhitelist = function (_React$Component3) {
    _inherits(AccountWhitelist, _React$Component3);

    function AccountWhitelist() {
        _classCallCheck(this, AccountWhitelist);

        var _this4 = _possibleConstructorReturn(this, (AccountWhitelist.__proto__ || Object.getPrototypeOf(AccountWhitelist)).call(this));

        _this4.state = {
            accountName: "",
            accountToList: null
        };
        return _this4;
    }

    _createClass(AccountWhitelist, [{
        key: "_getCurrentState",
        value: function _getCurrentState(id) {
            var account = this.props.account;

            var white = account.get("whitelisted_accounts") || immutable__WEBPACK_IMPORTED_MODULE_4___default.a.List();
            var black = account.get("blacklisted_accounts") || immutable__WEBPACK_IMPORTED_MODULE_4___default.a.List();
            var current = chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing.no_listing;

            if (white.includes(id)) {
                current += chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing.white_listed;
            }

            if (black.includes(id)) {
                current += chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing.black_listed;
            }

            return current;
        }
    }, {
        key: "_onAdd",
        value: function _onAdd(listing, e) {
            var accountToList = this.state.accountToList;
            var account = this.props.account;


            var currentState = this._getCurrentState(accountToList);

            if (accountToList) {
                var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_9__["default"].new_transaction();
                tr.add_type_operation("account_whitelist", {
                    fee: {
                        amount: 0,
                        asset_id: "1.3.0"
                    },
                    authorizing_account: account.get("id"),
                    account_to_list: accountToList,
                    new_listing: currentState + chain_account_constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.account_listing[listing]
                });
                stores_WalletDb_js__WEBPACK_IMPORTED_MODULE_10__["default"].process_transaction(tr, null, true);
            }
        }
    }, {
        key: "_onAccountFound",
        value: function _onAccountFound(account) {
            console.log("accountFound:", account);
            this.setState({
                accountName: account ? account.get("name") : null,
                accountToList: account ? account.get("id") : null
            });
        }
    }, {
        key: "_onAccountChanged",
        value: function _onAccountChanged(account) {
            console.log("account changed:", account);
            this.setState({
                accountName: account,
                accountToList: null
            });
        }
    }, {
        key: "render",
        value: function render() {
            var account = this.props.account;
            var accountName = this.state.accountName;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tabs"],
                            {
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block",
                                setting: "whitelistTab",
                                contentClass: "grid-content shrink small-vertical medium-horizontal no-padding",
                                segmented: false
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tab"],
                                { title: "account.whitelist.title" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty",
                                            account: account,
                                            getCurrentState: this._getCurrentState.bind(this),
                                            list: account.get("whitelisted_accounts") || immutable__WEBPACK_IMPORTED_MODULE_4___default.a.List(),
                                            removeButton: true,
                                            white: true
                                        })
                                    ),
                                    !account.get("whitelisted_accounts") ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "has-error" },
                                        "Please note, whitelisting is not working yet due to unresolved backend issue."
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { padding: "2rem 0" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                            label: "account.whitelist.add",
                                            accountName: accountName,
                                            onAccountChanged: this._onAccountFound.bind(this),
                                            onChange: this._onAccountChanged.bind(this),
                                            account: accountName,
                                            tabIndex: 2,
                                            onAction: this._onAdd.bind(this, "white_listed"),
                                            action_label: "account.perm.confirm_add",
                                            white: false,
                                            typeahead: true
                                        })
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tab"],
                                { title: "account.whitelist.black" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty_black",
                                            account: account,
                                            getCurrentState: this._getCurrentState.bind(this),
                                            list: account.get("blacklisted_accounts"),
                                            removeButton: true
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { padding: "2rem 1rem" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                            label: "account.whitelist.add_black",
                                            accountName: accountName,
                                            onAccountChanged: this._onAccountFound.bind(this),
                                            onChange: this._onAccountChanged.bind(this),
                                            account: accountName,
                                            tabIndex: 2,
                                            onAction: this._onAdd.bind(this, "black_listed"),
                                            action_label: "account.perm.confirm_add",
                                            typeahead: true
                                        })
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tab"],
                                { title: "account.whitelist.white_by" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty_white_by",
                                            account: account,
                                            list: account.get("whitelisting_accounts")
                                        })
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_1__["Tab"],
                                { title: "account.whitelist.black_by" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty_black_by",
                                            account: account,
                                            list: account.get("blacklisting_accounts")
                                        })
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountWhitelist;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountWhitelist);

/***/ }),

/***/ 2706:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(536);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(579);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(429);
/* harmony import */ var _WorkerApproval__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2707);
/* harmony import */ var _VotingAccountsList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2708);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(829);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2678);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1960);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1959);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1819);
/* harmony import */ var api_ApplicationApi__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(600);
/* harmony import */ var _AccountSelector__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2308);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(1867);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2303);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2611);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2085);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(722);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






















var AccountVoting = function (_React$Component) {
    _inherits(AccountVoting, _React$Component);

    function AccountVoting(props) {
        _classCallCheck(this, AccountVoting);

        var _this = _possibleConstructorReturn(this, (AccountVoting.__proto__ || Object.getPrototypeOf(AccountVoting)).call(this, props));

        _this.onRemoveProxy = function () {
            _this.publish(null);
        };

        var proxyId = props.proxy.get("id");
        var proxyName = props.proxy.get("name");
        _this.state = {
            proxy_account_id: proxyId === "1.2.5" ? "" : proxyId, //"1.2.16",
            prev_proxy_account_id: proxyId === "1.2.5" ? "" : proxyId,
            current_proxy_input: proxyId === "1.2.5" ? "" : proxyName,
            witnesses: null,
            committee: null,
            vote_ids: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(),
            proxy_vote_ids: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(),
            lastBudgetObject: props.initialBudget.get("id"),
            workerTableIndex: props.viewSettings.get("workerTableIndex", 1),
            all_witnesses: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
            all_committee: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List()
        };
        _this.onProxyAccountFound = _this.onProxyAccountFound.bind(_this);
        _this.onPublish = _this.onPublish.bind(_this);
        _this.onReset = _this.onReset.bind(_this);
        _this._getVoteObjects = _this._getVoteObjects.bind(_this);
        return _this;
    }

    _createClass(AccountVoting, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            common_account_utils__WEBPACK_IMPORTED_MODULE_3__["default"].getFinalFeeAsset(this.props.account, "account_update");
            bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].fetchAllWorkers();
            this.getBudgetObject();
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            this.updateAccountData(this.props);
            this._getVoteObjects();
            this._getVoteObjects("committee");
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.account !== this.props.account) {
                var proxyId = np.proxy.get("id");
                var newState = {
                    proxy_account_id: proxyId === "1.2.5" ? "" : proxyId
                };
                this.setState({ prev_proxy_account_id: newState.proxy_account_id });
                this.updateAccountData(np, newState);
            }
            this.getBudgetObject();
        }
    }, {
        key: "updateAccountData",
        value: function updateAccountData(_ref) {
            var _this2 = this;

            var account = _ref.account;
            var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state;
            var proxy_account_id = state.proxy_account_id;

            var proxy = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAccount(proxy_account_id);
            var options = account.get("options");
            var proxyOptions = proxy ? proxy.get("options") : null;
            // let proxy_account_id = proxy ? proxy.get("id") : "1.2.5";
            var current_proxy_input = proxy ? proxy.get("name") : "";
            if (proxy_account_id === "1.2.5") {
                proxy_account_id = "";
                current_proxy_input = "";
            }

            var votes = options.get("votes");
            var vote_ids = votes.toArray();
            var vids = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(vote_ids);
            bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObjectsByVoteIds(vote_ids);

            var proxyPromise = null,
                proxy_vids = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set([]);
            var hasProxy = proxy_account_id !== "1.2.5";
            if (hasProxy && proxyOptions) {
                var proxy_votes = proxyOptions.get("votes");
                var proxy_vote_ids = proxy_votes.toArray();
                proxy_vids = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(proxy_vote_ids);
                bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObjectsByVoteIds(proxy_vote_ids);

                proxyPromise = Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObjectByVoteID, proxy_vote_ids, 10000);
            }

            Promise.all([Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObjectByVoteID, vote_ids, 10000), proxyPromise]).then(function (res) {
                var _res = _slicedToArray(res, 2),
                    vote_objs = _res[0],
                    proxy_vote_objs = _res[1];

                function sortVoteObjects(objects) {
                    var witnesses = new immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List();
                    var committee = new immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List();
                    var workers = new immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set();
                    objects.forEach(function (obj) {
                        var account_id = obj.get("committee_member_account");
                        if (account_id) {
                            committee = committee.push(account_id);
                        } else if (account_id = obj.get("worker_account")) {
                            // console.log( "worker: ", obj );
                            //     workers = workers.add(obj.get("id"));
                        } else if (account_id = obj.get("witness_account")) {
                            witnesses = witnesses.push(account_id);
                        }
                    });

                    return { witnesses: witnesses, committee: committee, workers: workers };
                }

                var _sortVoteObjects = sortVoteObjects(vote_objs),
                    witnesses = _sortVoteObjects.witnesses,
                    committee = _sortVoteObjects.committee,
                    workers = _sortVoteObjects.workers;

                var _sortVoteObjects2 = sortVoteObjects(proxy_vote_objs || []),
                    proxy_witnesses = _sortVoteObjects2.witnesses,
                    proxy_committee = _sortVoteObjects2.committee,
                    proxy_workers = _sortVoteObjects2.workers;

                var state = {
                    proxy_account_id: proxy_account_id,
                    current_proxy_input: current_proxy_input,
                    witnesses: witnesses,
                    committee: committee,
                    workers: workers,
                    proxy_witnesses: proxy_witnesses,
                    proxy_committee: proxy_committee,
                    proxy_workers: proxy_workers,
                    vote_ids: vids,
                    proxy_vote_ids: proxy_vids,
                    prev_witnesses: witnesses,
                    prev_committee: committee,
                    prev_workers: workers,
                    prev_vote_ids: vids
                };
                _this2.setState(state);
            });
        }
    }, {
        key: "isChanged",
        value: function isChanged() {
            var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state;

            return s.proxy_account_id !== s.prev_proxy_account_id || s.witnesses !== s.prev_witnesses || s.committee !== s.prev_committee || !immutable__WEBPACK_IMPORTED_MODULE_1___default.a.is(s.vote_ids, s.prev_vote_ids);
        }
    }, {
        key: "_getVoteObjects",
        value: function _getVoteObjects() {
            var _this3 = this;

            var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "witnesses";
            var vote_ids = arguments[1];

            var current = this.state["all_" + type];
            var isWitness = type === "witnesses";
            var lastIdx = void 0;
            if (!vote_ids) {
                vote_ids = [];
                var active = this.props.globalObject.get(isWitness ? "active_witnesses" : "active_committee_members").sort(function (a, b) {
                    return parseInt(a.split(".")[2], 10) - parseInt(b.split(".")[2], 10);
                });
                var lastActive = active.last() || "1." + (isWitness ? "6" : "5") + ".1";
                lastIdx = parseInt(lastActive.split(".")[2], 10);
                for (var i = 1; i <= lastIdx + 10; i++) {
                    vote_ids.push("1." + (isWitness ? "6" : "5") + "." + i);
                }
            } else {
                lastIdx = parseInt(vote_ids[vote_ids.length - 1].split(".")[2], 10);
            }
            Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject, vote_ids, 5000, {}).then(function (vote_objs) {
                _this3.state["all_" + type] = current.concat(immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(vote_objs.filter(function (a) {
                    return !!a;
                }).map(function (a) {
                    return a.get(isWitness ? "witness_account" : "committee_member_account");
                })));
                if (!!vote_objs[vote_objs.length - 1]) {
                    // there are more valid vote objs, fetch 10 more
                    vote_ids = [];
                    for (var i = lastIdx + 11; i <= lastIdx + 20; i++) {
                        vote_ids.push("1." + (isWitness ? "6" : "5") + "." + i);
                    }
                    return _this3._getVoteObjects(type, vote_ids);
                }
                _this3.forceUpdate();
            });
        }
    }, {
        key: "onPublish",
        value: function onPublish() {
            this.publish(this.state.proxy_account_id);
        }
    }, {
        key: "publish",
        value: function publish(new_proxy_id) {
            var _this4 = this;

            var updated_account = this.props.account.toJS();
            var updateObject = { account: updated_account.id };
            var new_options = { memo_key: updated_account.options.memo_key };
            // updated_account.new_options = updated_account.options;
            new_options.voting_account = new_proxy_id ? new_proxy_id : "1.2.5";
            new_options.num_witness = this.state.witnesses.size;
            new_options.num_committee = this.state.committee.size;

            updateObject.new_options = new_options;
            // Set fee asset
            updateObject.fee = {
                amount: 0,
                asset_id: common_account_utils__WEBPACK_IMPORTED_MODULE_3__["default"].getFinalFeeAsset(updated_account.id, "account_update")
            };

            // Remove votes for expired workers
            var vote_ids = this.state.vote_ids;

            var workers = this._getWorkerArray();
            var now = new Date();

            function removeVote(list, vote) {
                if (list.includes(vote)) {
                    list = list.delete(vote);
                }
                return list;
            }

            workers.forEach(function (worker) {
                if (worker) {
                    if (new Date(worker.get("work_end_date")) <= now) {
                        vote_ids = removeVote(vote_ids, worker.get("vote_for"));
                    }

                    // TEMP Remove vote_against since they're no longer used
                    vote_ids = removeVote(vote_ids, worker.get("vote_against"));
                }
            });

            // Submit votes
            Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getWitnessById, this.state.witnesses.toArray(), 4000).then(function (res) {
                var witnesses_vote_ids = res.map(function (o) {
                    return o.get("vote_id");
                });
                return Promise.all([Promise.resolve(witnesses_vote_ids), Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getCommitteeMemberById, _this4.state.committee.toArray(), 4000)]);
            }).then(function (res) {
                updateObject.new_options.votes = res[0].concat(res[1].map(function (o) {
                    return o.get("vote_id");
                })).concat(vote_ids.filter(function (id) {
                    return id.split(":")[0] === "2";
                }).toArray()).sort(function (a, b) {
                    var a_split = a.split(":");
                    var b_split = b.split(":");

                    return parseInt(a_split[1], 10) - parseInt(b_split[1], 10);
                });
                api_ApplicationApi__WEBPACK_IMPORTED_MODULE_12__["default"].updateAccount(updateObject);
            });
        }
    }, {
        key: "onReset",
        value: function onReset() {
            var _this5 = this;

            var s = this.state;
            if (this.refs.voting_proxy && this.refs.voting_proxy.refs.bound_component) this.refs.voting_proxy.refs.bound_component.onResetProxy();
            this.setState({
                proxy_account_id: s.prev_proxy_account_id,
                current_proxy_input: s.prev_proxy_input,
                witnesses: s.prev_witnesses,
                committee: s.prev_committee,
                workers: s.prev_workers,
                vote_ids: s.prev_vote_ids
            }, function () {
                _this5.updateAccountData(_this5.props);
            });
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(collection, item_id) {
            var state = {};
            state[collection] = this.state[collection].push(item_id);
            this.setState(state);
        }
    }, {
        key: "onRemoveItem",
        value: function onRemoveItem(collection, item_id) {
            var state = {};
            state[collection] = this.state[collection].filter(function (i) {
                return i !== item_id;
            });
            this.setState(state);
        }
    }, {
        key: "onChangeVotes",
        value: function onChangeVotes(addVotes, removeVotes) {
            var state = {};
            state.vote_ids = this.state.vote_ids;
            if (addVotes.length) {
                addVotes.forEach(function (vote) {
                    state.vote_ids = state.vote_ids.add(vote);
                });
            }
            if (removeVotes) {
                removeVotes.forEach(function (vote) {
                    state.vote_ids = state.vote_ids.delete(vote);
                });
            }

            this.setState(state);
        }
    }, {
        key: "validateAccount",
        value: function validateAccount(collection, account) {
            if (!account) return null;
            if (collection === "witnesses") {
                return Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getWitnessById, [account.get("id")], 3000).then(function (res) {
                    return res[0] ? null : "Not a witness";
                });
            }
            if (collection === "committee") {
                return Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getCommitteeMemberById, [account.get("id")], 3000).then(function (res) {
                    return res[0] ? null : "Not a committee member";
                });
            }
            return null;
        }
    }, {
        key: "onProxyChange",
        value: function onProxyChange(current_proxy_input) {
            var proxyAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAccount(current_proxy_input);
            if (!proxyAccount || proxyAccount && proxyAccount.get("id") !== this.state.proxy_account_id) {
                this.setState({
                    proxy_account_id: "",
                    proxy_witnesses: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(),
                    proxy_committee: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set(),
                    proxy_workers: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set()
                });
            }
            this.setState({ current_proxy_input: current_proxy_input });
        }
    }, {
        key: "onProxyAccountFound",
        value: function onProxyAccountFound(proxy_account) {
            var _this6 = this;

            var proxy_account_id = proxy_account ? proxy_account.get("id") : "";
            if (this.state.proxy_account_id !== proxy_account_id) this.setState({
                proxy_account_id: proxy_account_id
            }, function () {
                _this6.updateAccountData(_this6.props);
            });
        }
    }, {
        key: "onClearProxy",
        value: function onClearProxy() {
            this.setState({
                proxy_account_id: ""
            });
        }
    }, {
        key: "_getTotalVotes",
        value: function _getTotalVotes(worker) {
            return parseInt(worker.get("total_votes_for"), 10) - parseInt(worker.get("total_votes_against"), 10);
        }
    }, {
        key: "getBudgetObject",
        value: function getBudgetObject() {
            var _this7 = this;

            var lastBudgetObject = this.state.lastBudgetObject;

            var budgetObject = void 0;
            budgetObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(lastBudgetObject);
            var idIndex = parseInt(lastBudgetObject.split(".")[2], 10);
            if (budgetObject) {
                var timestamp = budgetObject.get("time");
                if (!/Z$/.test(timestamp)) {
                    timestamp += "Z";
                }
                var now = new Date();

                /* Use the last valid budget object to estimate the current budget object id.
                ** Budget objects are created once per hour
                */
                var currentID = idIndex + Math.floor((now - new Date(timestamp).getTime()) / 1000 / 60 / 60) - 1;
                if (idIndex >= currentID) return;
                var newID = "2.13." + Math.max(idIndex, currentID);
                var newIDInt = parseInt(newID.split(".")[2], 10);
                Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject, [newID], undefined, {}).then(function (res) {
                    var _res2 = _slicedToArray(res, 1),
                        lbo = _res2[0];

                    if (lbo === null) {
                        // The object does not exist, the id was too high
                        _this7.setState({ lastBudgetObject: "2.13." + (newIDInt - 1) }, _this7.getBudgetObject);
                    } else {
                        stores_SettingsStore__WEBPACK_IMPORTED_MODULE_19__["default"].setLastBudgetObject(newID);

                        _this7.setState({ lastBudgetObject: newID });
                    }
                });
            } else {
                // The object does not exist, decrement the ID
                var _newID = "2.13." + (idIndex - 1);
                Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject, [_newID], undefined, {}).then(function (res) {
                    var _res3 = _slicedToArray(res, 1),
                        lbo = _res3[0];

                    if (lbo === null) {
                        // The object does not exist, the id was too high
                        _this7.setState({ lastBudgetObject: "2.13." + (idIndex - 2) }, _this7.getBudgetObject);
                    } else {
                        stores_SettingsStore__WEBPACK_IMPORTED_MODULE_19__["default"].setLastBudgetObject(_newID);
                        _this7.setState({ lastBudgetObject: _newID });
                    }
                });
            }
        }
    }, {
        key: "_getWorkerArray",
        value: function _getWorkerArray() {
            var workerArray = [];

            bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].workers.forEach(function (workerId) {
                var worker = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(workerId, false, false);
                if (worker) workerArray.push(worker);
            });

            return workerArray;
        }
    }, {
        key: "_setWorkerTableIndex",
        value: function _setWorkerTableIndex(index) {
            this.setState({
                workerTableIndex: index
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this8 = this;

            var _state = this.state,
                workerTableIndex = _state.workerTableIndex,
                prev_proxy_account_id = _state.prev_proxy_account_id;

            var accountHasProxy = !!prev_proxy_account_id;
            var preferredUnit = this.props.settings.get("unit") || "1.3.0";
            var hasProxy = !!this.state.proxy_account_id; // this.props.account.getIn(["options", "voting_account"]) !== "1.2.5";
            var publish_buttons_class = classnames__WEBPACK_IMPORTED_MODULE_7___default()("button", {
                disabled: !this.isChanged()
            });
            var globalObject = this.props.globalObject;

            var budgetObject = void 0;
            if (this.state.lastBudgetObject) {
                budgetObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(this.state.lastBudgetObject);
            }

            var totalBudget = 0;
            // let unusedBudget = 0;
            var workerBudget = globalObject ? parseInt(globalObject.getIn(["parameters", "worker_budget_per_day"]), 10) : 0;

            if (budgetObject) {
                workerBudget = Math.min(24 * budgetObject.getIn(["record", "worker_budget"]), workerBudget);
                totalBudget = Math.min(24 * budgetObject.getIn(["record", "worker_budget"]), workerBudget);
            }

            var now = new Date();
            var workerArray = this._getWorkerArray();

            var voteThreshold = 0;
            var workers = workerArray.filter(function (a) {
                if (!a) {
                    return false;
                }

                return new Date(a.get("work_end_date") + "Z") > now && new Date(a.get("work_begin_date") + "Z") <= now;
            }).sort(function (a, b) {
                return _this8._getTotalVotes(b) - _this8._getTotalVotes(a);
            }).map(function (worker, index) {
                var dailyPay = parseInt(worker.get("daily_pay"), 10);
                workerBudget = workerBudget - dailyPay;
                var votes = worker.get("total_votes_for") - worker.get("total_votes_against");
                if (workerBudget <= 0 && !voteThreshold) {
                    voteThreshold = votes;
                }

                if (voteThreshold && votes < voteThreshold) return null;

                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_WorkerApproval__WEBPACK_IMPORTED_MODULE_5__["default"], {
                    preferredUnit: preferredUnit,
                    rest: workerBudget + dailyPay,
                    rank: index + 1,
                    key: worker.get("id"),
                    worker: worker.get("id"),
                    vote_ids: _this8.state[hasProxy ? "proxy_vote_ids" : "vote_ids"],
                    onChangeVotes: _this8.onChangeVotes.bind(_this8),
                    proxy: hasProxy,
                    voteThreshold: voteThreshold
                });
            }).filter(function (a) {
                return !!a;
            });

            // unusedBudget = Math.max(0, workerBudget);

            var newWorkers = workerArray.filter(function (a) {
                if (!a) {
                    return false;
                }

                var votes = a.get("total_votes_for") - a.get("total_votes_against");
                return new Date(a.get("work_end_date") + "Z") > now && votes < voteThreshold || new Date(a.get("work_begin_date") + "Z") > now;
            }).sort(function (a, b) {
                return _this8._getTotalVotes(b) - _this8._getTotalVotes(a);
            }).map(function (worker, index) {
                // let dailyPay = parseInt(worker.get("daily_pay"), 10);
                // workerBudget = workerBudget - dailyPay;

                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_WorkerApproval__WEBPACK_IMPORTED_MODULE_5__["default"], {
                    preferredUnit: preferredUnit,
                    rest: 0,
                    rank: index + 1,
                    key: worker.get("id"),
                    worker: worker.get("id"),
                    vote_ids: _this8.state[hasProxy ? "proxy_vote_ids" : "vote_ids"],
                    onChangeVotes: _this8.onChangeVotes.bind(_this8),
                    proxy: hasProxy,
                    voteThreshold: voteThreshold
                });
            });

            var expiredWorkers = workerArray.filter(function (a) {
                if (!a) {
                    return false;
                }

                return new Date(a.get("work_end_date")) <= now;
            }).sort(function (a, b) {
                return _this8._getTotalVotes(b) - _this8._getTotalVotes(a);
            }).map(function (worker, index) {
                // let dailyPay = parseInt(worker.get("daily_pay"), 10);
                // workerBudget = workerBudget - dailyPay;

                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_WorkerApproval__WEBPACK_IMPORTED_MODULE_5__["default"], {
                    preferredUnit: preferredUnit,
                    rest: 0,
                    rank: index + 1,
                    key: worker.get("id"),
                    worker: worker.get("id"),
                    vote_ids: _this8.state[hasProxy ? "proxy_vote_ids" : "vote_ids"],
                    onChangeVotes: _this8.onChangeVotes.bind(_this8),
                    proxy: hasProxy,
                    voteThreshold: voteThreshold
                });
            });

            var actionButtons = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_7___default()(publish_buttons_class, {
                            success: this.isChanged()
                        }),
                        onClick: this.onPublish,
                        tabIndex: 4
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.publish" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: "button " + publish_buttons_class,
                        onClick: this.onReset,
                        tabIndex: 8
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.reset" })
                ),
                accountHasProxy && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: "button",
                        onClick: this.onRemoveProxy,
                        tabIndex: 9
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.remove_proxy" })
                )
            );

            var proxyInput = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                _AccountSelector__WEBPACK_IMPORTED_MODULE_13__["default"],
                {
                    style: { width: "50%", maxWidth: 250, marginBottom: 10 },
                    account: this.state.current_proxy_input,
                    accountName: this.state.current_proxy_input,
                    onChange: this.onProxyChange.bind(this),
                    onAccountChanged: this.onProxyAccountFound,
                    tabIndex: 1,
                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_16___default.a.translate("account.votes.set_proxy"),
                    tooltip: counterpart__WEBPACK_IMPORTED_MODULE_16___default.a.translate(!this.state.proxy_account_id ? "tooltip.proxy_search" : "tooltip.proxy_remove"),
                    hideImage: true
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    {
                        style: {
                            paddingLeft: 5,
                            position: "relative",
                            top: 9,
                            display: hasProxy ? "" : "none"
                        }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_14__["default"], { name: "locked", size: "1x" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    {
                        style: {
                            paddingLeft: 5,
                            position: "relative",
                            top: 9,
                            display: !hasProxy ? "" : "none"
                        }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Link"],
                        { to: "/help/voting" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_14__["default"], {
                            name: "question-circle",
                            title: "icons.question_circle",
                            size: "1x"
                        })
                    )
                )
            );

            var showExpired = workerTableIndex === 2;

            var saveText = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                {
                    className: "inline-block",
                    style: {
                        float: "right",
                        visibility: this.isChanged() ? "visible" : "hidden",
                        color: "red",
                        padding: "0.85rem",
                        fontSize: "0.9rem"
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.save_finish" })
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__["Tabs"],
                            {
                                setting: "votingTab",
                                className: "account-tabs",
                                defaultActiveTab: 1,
                                segmented: false,
                                actionButtons: saveText,
                                tabsClass: "account-overview no-padding bordered-header content-block"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__["Tab"],
                                { title: "explorer.witnesses.title" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("content-block") },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "header-selector" },
                                        proxyInput,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: {
                                                    float: "right",
                                                    marginTop: "-2.5rem"
                                                }
                                            },
                                            actionButtons
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_VotingAccountsList__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                        type: "witness",
                                        label: "account.votes.add_witness_label",
                                        items: this.state.all_witnesses,
                                        validateAccount: this.validateAccount.bind(this, "witnesses"),
                                        onAddItem: this.onAddItem.bind(this, "witnesses"),
                                        onRemoveItem: this.onRemoveItem.bind(this, "witnesses"),
                                        tabIndex: hasProxy ? -1 : 2,
                                        supported: this.state[hasProxy ? "proxy_witnesses" : "witnesses"],
                                        withSelector: false,
                                        active: globalObject.get("active_witnesses"),
                                        proxy: this.state.proxy_account_id
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__["Tab"],
                                { title: "explorer.committee_members.title" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("content-block") },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "header-selector" },
                                        proxyInput,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: {
                                                    float: "right",
                                                    marginTop: "-2.5rem"
                                                }
                                            },
                                            actionButtons
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_VotingAccountsList__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                        type: "committee",
                                        label: "account.votes.add_committee_label",
                                        items: this.state.all_committee,
                                        validateAccount: this.validateAccount.bind(this, "committee"),
                                        onAddItem: this.onAddItem.bind(this, "committee"),
                                        onRemoveItem: this.onRemoveItem.bind(this, "committee"),
                                        tabIndex: hasProxy ? -1 : 3,
                                        supported: this.state[hasProxy ? "proxy_committee" : "committee"],
                                        withSelector: false,
                                        active: globalObject.get("active_committee_members"),
                                        proxy: this.state.proxy_account_id
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_8__["Tab"],
                                { title: "account.votes.workers_short" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "header-selector" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { float: "right" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Link"],
                                            { to: "/create-worker" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "button" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.create_worker" })
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "selector" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: { paddingLeft: 10 },
                                                className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("inline-block", {
                                                    inactive: workerTableIndex !== 0
                                                }),
                                                onClick: this._setWorkerTableIndex.bind(this, 0)
                                            },
                                            counterpart__WEBPACK_IMPORTED_MODULE_16___default.a.translate("account.votes.new", { count: newWorkers.length })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("inline-block", {
                                                    inactive: workerTableIndex !== 1
                                                }),
                                                onClick: this._setWorkerTableIndex.bind(this, 1)
                                            },
                                            counterpart__WEBPACK_IMPORTED_MODULE_16___default.a.translate("account.votes.active", { count: workers.length })
                                        ),
                                        expiredWorkers.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_7___default()("inline-block", { inactive: !showExpired }),
                                                onClick: !showExpired ? this._setWorkerTableIndex.bind(this, 2) : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.expired" })
                                        ) : null
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { marginTop: "2rem" } },
                                        proxyInput,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: {
                                                    float: "right",
                                                    marginTop: "-2.5rem"
                                                }
                                            },
                                            actionButtons
                                        )
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "table",
                                    { className: "table dashboard-table table-hover" },
                                    workerTableIndex === 2 ? null : workerTableIndex === 0 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "thead",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    colSpan: "3",
                                                    style: { textAlign: "left" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.threshold" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_18__["default"], {
                                                    decimalOffset: 5,
                                                    hide_asset: true,
                                                    amount: voteThreshold,
                                                    asset: "1.3.0"
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", { colSpan: "3" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", {
                                                style: {
                                                    border: "none",
                                                    backgroundColor: "transparent"
                                                }
                                            })
                                        )
                                    ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "thead",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    colSpan: "4",
                                                    style: { textAlign: "left" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.total_budget" }),
                                                " ",
                                                "(",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                                    name: preferredUnit
                                                }),
                                                ")"
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", {
                                                colSpan: "2",
                                                className: "hide-column-small"
                                            }),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                globalObject ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_17__["EquivalentValueComponent"], {
                                                    hide_asset: true,
                                                    fromAsset: "1.3.0",
                                                    toAsset: preferredUnit,
                                                    amount: totalBudget
                                                }) : null
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", { className: "hide-column-small" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", {
                                                style: {
                                                    border: "none",
                                                    backgroundColor: "transparent"
                                                }
                                            })
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "thead",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tr",
                                            null,
                                            workerTableIndex === 2 ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.line" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                { style: { textAlign: "center" } },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.user_issued_assets.id" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                { style: { textAlign: "left" } },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.user_issued_assets.description" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" },
                                                    className: "hide-column-small"
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.total_votes" })
                                            ),
                                            workerTableIndex === 0 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.missing" })
                                            ) : null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "explorer.workers.period" })
                                            ),
                                            workerTableIndex === 2 || workerTableIndex === 0 ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" },
                                                    className: "hide-column-small"
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.funding" })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" },
                                                    className: "hide-column-small"
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.daily_pay" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    {
                                                        style: {
                                                            paddingTop: 5,
                                                            fontSize: "0.8rem"
                                                        }
                                                    },
                                                    "(",
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                                        name: preferredUnit
                                                    }),
                                                    ")"
                                                )
                                            ),
                                            workerTableIndex === 2 || workerTableIndex === 0 ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                {
                                                    style: { textAlign: "right" }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "explorer.witnesses.budget" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    {
                                                        style: {
                                                            paddingTop: 5,
                                                            fontSize: "0.8rem"
                                                        }
                                                    },
                                                    "(",
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                                        name: preferredUnit
                                                    }),
                                                    ")"
                                                )
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "th",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.toggle" })
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "tbody",
                                        null,
                                        workerTableIndex === 0 ? newWorkers : workerTableIndex === 1 ? workers : expiredWorkers
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountVoting;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountVoting.propTypes = {
    initialBudget: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_10__["default"].ChainObject.isRequired,
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_10__["default"].ChainObject.isRequired,
    proxy: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_10__["default"].ChainAccount.isRequired
};
AccountVoting.defaultProps = {
    globalObject: "2.0.0"
};

AccountVoting = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_9__["default"])(AccountVoting);

var BudgetObjectWrapper = function BudgetObjectWrapper(props) {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountVoting, _extends({}, props, {
        initialBudget: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_19__["default"].getLastBudgetObject()
    }));
};

/* harmony default export */ __webpack_exports__["default"] = (BudgetObjectWrapper);

/***/ }),

/***/ 2707:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(580);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1959);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2085);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2423);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1960);
/* harmony import */ var _Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2611);
/* harmony import */ var components_Icon_Icon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1867);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(823);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }












var WorkerApproval = function (_React$Component) {
    _inherits(WorkerApproval, _React$Component);

    function WorkerApproval(props) {
        _classCallCheck(this, WorkerApproval);

        return _possibleConstructorReturn(this, (WorkerApproval.__proto__ || Object.getPrototypeOf(WorkerApproval)).call(this, props));
    }

    _createClass(WorkerApproval, [{
        key: "onApprove",
        value: function onApprove() {
            var addVotes = [],
                removeVotes = [];

            if (this.props.vote_ids.has(this.props.worker.get("vote_against"))) {
                removeVotes.push(this.props.worker.get("vote_against"));
            }

            if (!this.props.vote_ids.has(this.props.worker.get("vote_for"))) {
                addVotes.push(this.props.worker.get("vote_for"));
            }

            this.props.onChangeVotes(addVotes, removeVotes);
        }
    }, {
        key: "onReject",
        value: function onReject() {
            var addVotes = [],
                removeVotes = [];

            if (this.props.vote_ids.has(this.props.worker.get("vote_against"))) {
                removeVotes.push(this.props.worker.get("vote_against"));
            }

            if (this.props.vote_ids.has(this.props.worker.get("vote_for"))) {
                removeVotes.push(this.props.worker.get("vote_for"));
            }

            this.props.onChangeVotes(addVotes, removeVotes);
        }
    }, {
        key: "render",
        value: function render() {
            var rank = this.props.rank;

            var worker = this.props.worker.toJS();
            var total_votes = worker.total_votes_for - worker.total_votes_against;
            var approvalState = this.props.vote_ids.has(worker.vote_for) ? true : this.props.vote_ids.has(worker.vote_against) ? false : null;

            var fundedPercent = 0;

            if (worker.daily_pay < this.props.rest) {
                fundedPercent = 100;
            } else if (this.props.rest > 0) {
                fundedPercent = this.props.rest / worker.daily_pay * 100;
            }

            var startDate = counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.localize(new Date(worker.work_begin_date + "Z"), { type: "date", format: "short_custom" });
            var endDate = counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.localize(new Date(worker.work_end_date + "Z"), { type: "date", format: "short_custom" });

            var now = new Date();
            var isExpired = new Date(worker.work_end_date + "Z") <= now;
            var hasStarted = new Date(worker.work_begin_date + "Z") <= now;
            var isProposed = !isExpired && total_votes < this.props.voteThreshold || !hasStarted;
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { className: approvalState ? "" : "unsupported" },
                isExpired ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        style: {
                            textAlign: "right",
                            paddingRight: 10,
                            paddingLeft: 0
                        }
                    },
                    rank
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { className: "worker-id", style: { textAlign: "left" } },
                    worker.id
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { className: "worker-name", style: { textAlign: "left" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "inline-block",
                            style: { paddingRight: 5, position: "relative", top: -1 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            {
                                style: {
                                    visibility: worker.url && worker.url.indexOf(".") !== -1 ? "visible" : "hidden"
                                },
                                href: worker.url,
                                target: "_blank",
                                rel: "noopener noreferrer"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Icon_Icon__WEBPACK_IMPORTED_MODULE_8__["default"], { name: "share", title: "icons.share" })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "inline-block" },
                        worker.name,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_5__["default"], { account: worker.worker_account })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" }, className: "hide-column-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        amount: total_votes,
                        asset: "1.3.0",
                        decimalOffset: 5,
                        hide_asset: true
                    })
                ),
                !isProposed ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        amount: Math.max(0, this.props.voteThreshold - total_votes),
                        asset: "1.3.0",
                        hide_asset: true,
                        decimalOffset: 5
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    startDate,
                    " - ",
                    endDate
                ),
                isExpired || isProposed ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        style: { textAlign: "right" },
                        className: "hide-column-small"
                    },
                    common_utils__WEBPACK_IMPORTED_MODULE_2__["default"].format_number(fundedPercent, 2),
                    "%"
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" }, className: "hide-column-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_7__["EquivalentValueComponent"], {
                        hide_asset: true,
                        fromAsset: "1.3.0",
                        toAsset: this.props.preferredUnit,
                        amount: worker.daily_pay
                    })
                ),
                isExpired || isProposed ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    this.props.rest <= 0 ? "0.00" : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_7__["EquivalentValueComponent"], {
                        hide_asset: true,
                        fromAsset: "1.3.0",
                        toAsset: this.props.preferredUnit,
                        amount: this.props.rest
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        className: "clickable",
                        onClick: this.props.proxy ? function () {} : this[approvalState ? "onReject" : "onApprove"].bind(this)
                    },
                    !this.props.proxy ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Icon_Icon__WEBPACK_IMPORTED_MODULE_8__["default"], {
                        name: approvalState ? "checkmark-circle" : "minus-circle",
                        title: approvalState ? "icons.checkmark_circle.approved" : "icons.minus_circle.disapproved"
                    }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Icon_Icon__WEBPACK_IMPORTED_MODULE_8__["default"], { name: "locked", title: "icons.locked.action" })
                )
            );
        }
    }]);

    return WorkerApproval;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

WorkerApproval.propTypes = {
    worker: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired,
    onAddVote: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func, /// called with vote id to add
    onRemoveVote: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func, /// called with vote id to remove
    vote_ids: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.object /// Set of items currently being voted for
};
WorkerApproval.defaultProps = {
    tempComponent: "tr"
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(WorkerApproval));

/***/ }),

/***/ 2708:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _AccountSelector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2308);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1867);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(429);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1959);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2085);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1960);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2423);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(823);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var sanitize__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2104);
/* harmony import */ var sanitize__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(sanitize__WEBPACK_IMPORTED_MODULE_11__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }














function getWitnessOrCommittee(type, acct) {
    var url = "",
        votes = 0,
        account = void 0;
    if (type === "witness") {
        account = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getWitnessById(acct.get("id"));
    } else if (type === "committee") {
        account = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getCommitteeMemberById(acct.get("id"));
    }

    url = account ? account.get("url") : url;
    url = sanitize__WEBPACK_IMPORTED_MODULE_11___default()(url, {
        whiteList: [], // empty, means filter out all tags
        stripIgnoreTag: true // filter out all HTML not in the whilelist
    });
    votes = account ? account.get("total_votes") : votes;
    return {
        url: url,
        votes: votes,
        id: account.get("id")
    };
}

var AccountItemRow = function (_React$Component) {
    _inherits(AccountItemRow, _React$Component);

    function AccountItemRow() {
        _classCallCheck(this, AccountItemRow);

        return _possibleConstructorReturn(this, (AccountItemRow.__proto__ || Object.getPrototypeOf(AccountItemRow)).apply(this, arguments));
    }

    _createClass(AccountItemRow, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps) {
            return nextProps.account !== this.props.account || nextProps.action !== this.props.action || nextProps.isActive !== this.props.isActive || nextProps.idx !== this.props.idx || nextProps.proxy !== this.props.proxy;
        }
    }, {
        key: "onAction",
        value: function onAction(item_id) {
            this.props.onAction(item_id);
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                account = _props.account,
                type = _props.type,
                action = _props.action,
                isActive = _props.isActive;

            var item_id = account.get("id");

            var _getWitnessOrCommitte = getWitnessOrCommittee(type, account),
                url = _getWitnessOrCommitte.url,
                votes = _getWitnessOrCommitte.votes;

            var link = url && url.length > 0 && url.indexOf("http") === -1 ? "http://" + url : url;
            var isSupported = action === "remove";

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { className: isSupported ? "" : "unsupported" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    this.props.idx + 1
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "left" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_8__["default"], { account: account.get("id") })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    link && link.indexOf(".") !== -1 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            href: link,
                            target: "_blank",
                            rel: "noopener noreferrer"
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], { name: "share", title: "icons.share" })
                    ) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_6__["default"], {
                        amount: votes,
                        asset: "1.3.0",
                        decimalOffset: 5,
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                        content: "account.votes." + (isActive ? "active_short" : "inactive")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "center" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                        content: "settings." + (isSupported ? "yes" : "no")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        className: this.props.proxy ? "" : "clickable",
                        onClick: this.props.proxy ? function () {} : this.onAction.bind(this, item_id)
                    },
                    !this.props.proxy ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], {
                        name: isSupported ? "checkmark-circle" : "minus-circle",
                        title: isSupported ? "icons.checkmark_circle.yes" : "icons.minus_circle.no"
                    }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], { name: "locked", title: "icons.locked.action" })
                )
            );
        }
    }]);

    return AccountItemRow;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountItemRow.propTypes = {
    account: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.object.isRequired,
    onAction: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func.isRequired
};

var VotingAccountsList = function (_React$Component2) {
    _inherits(VotingAccountsList, _React$Component2);

    function VotingAccountsList(props) {
        _classCallCheck(this, VotingAccountsList);

        var _this2 = _possibleConstructorReturn(this, (VotingAccountsList.__proto__ || Object.getPrototypeOf(VotingAccountsList)).call(this, props));

        _this2.state = {
            selected_item: null,
            item_name_input: "",
            error: null
        };
        _this2.onItemChange = _this2.onItemChange.bind(_this2);
        _this2.onItemAccountChange = _this2.onItemAccountChange.bind(_this2);
        _this2.onAddItem = _this2.onAddItem.bind(_this2);
        return _this2;
    }

    _createClass(VotingAccountsList, [{
        key: "onItemChange",
        value: function onItemChange(item_name_input) {
            this.setState({ item_name_input: item_name_input });
        }
    }, {
        key: "onItemAccountChange",
        value: function onItemAccountChange(selected_item) {
            var _this3 = this;

            this.setState({ selected_item: selected_item, error: null });
            if (selected_item && this.props.validateAccount) {
                var res = this.props.validateAccount(selected_item);
                if (res === null) return;
                if (typeof res === "string") this.setState({ error: res });else res.then(function (error) {
                    return _this3.setState({ error: error });
                });
            }
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(item) {
            if (!item) return;
            var next_state = {
                selected_item: null,
                item_name_input: "",
                error: null
            };
            this.setState(next_state);
            this.props.onAddItem(item.get("id"));
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            if (!this.props.items) return null;

            var item_rows = this.props.items.filter(function (i) {
                if (!i) return false;
                //if (this.state.item_name_input) return i.get("name").indexOf(this.state.item_name_input) !== -1;
                return true;
            }).sort(function (a, b) {
                var _getWitnessOrCommitte2 = getWitnessOrCommittee(_this4.props.type, a),
                    a_votes = _getWitnessOrCommitte2.votes;

                var _getWitnessOrCommitte3 = getWitnessOrCommittee(_this4.props.type, b),
                    b_votes = _getWitnessOrCommitte3.votes;

                if (a_votes !== b_votes) {
                    return parseInt(b_votes, 10) - parseInt(a_votes, 10);
                } else if (a.get("name") > b.get("name")) {
                    return 1;
                } else if (a.get("name") < b.get("name")) {
                    return -1;
                } else {
                    return 0;
                }
            }).map(function (i, idx) {
                var action = _this4.props.supported && _this4.props.supported.includes(i.get("id")) ? "remove" : "add";
                var isActive = _this4.props.active.includes(getWitnessOrCommittee(_this4.props.type, i).id);
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountItemRow, {
                    idx: idx,
                    key: i.get("name"),
                    account: i,
                    type: _this4.props.type,
                    onAction: action === "add" ? _this4.props.onAddItem : _this4.props.onRemoveItem,
                    isSelected: _this4.props.items.indexOf(i) !== -1,
                    action: action,
                    isActive: isActive,
                    proxy: _this4.props.proxy
                });
            });

            var error = this.state.error;
            if (!error && this.state.selected_item && this.props.items.indexOf(this.state.selected_item) !== -1) {
                error = counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.votes.already");
            }

            var cw = ["10%", "20%", "40%", "20%", "10%"];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                this.props.withSelector ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountSelector__WEBPACK_IMPORTED_MODULE_1__["default"], {
                    style: { maxWidth: "600px" },
                    label: this.props.label,
                    error: error,
                    placeholder: this.props.placeholder,
                    account: this.state.item_name_input,
                    accountName: this.state.item_name_input,
                    onChange: this.onItemChange,
                    onAccountChanged: this.onItemAccountChange,
                    onAction: this.onAddItem,
                    action_label: "account.votes.add_witness",
                    tabIndex: this.props.tabIndex
                }) : null,
                this.props.title && item_rows.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "h4",
                    null,
                    this.props.title
                ) : null,
                item_rows.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { textAlign: "right" } },
                                "#"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                {
                                    style: { textAlign: "left", maxWidth: cw[1] }
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.name" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[2] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.about" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[3] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.votes" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[4] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.status.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[0] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.supported" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { maxWidth: cw[5] } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.toggle" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        item_rows
                    )
                ) : null
            );
        }
    }]);

    return VotingAccountsList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

VotingAccountsList.propTypes = {
    items: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainObjectsList,
    onAddItem: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func.isRequired,
    onRemoveItem: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func.isRequired,
    validateAccount: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func,
    label: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.string.isRequired, // a translation key for the label,
    placeholder: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.string, // the placeholder text to be displayed when there is no user_input
    tabIndex: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.number, // tabindex property to be passed to input tag
    action: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.string,
    withSelector: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.bool
};
VotingAccountsList.defaultProps = {
    action: "remove",
    withSelector: true,
    autosubscribe: false
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(VotingAccountsList));

/***/ }),

/***/ 2709:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(536);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2351);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2303);
/* harmony import */ var _Utility_AssetImage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2591);
/* harmony import */ var _MarginPositions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2710);
/* harmony import */ var _RecentTransactions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2694);
/* harmony import */ var components_Account_Proposals__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2711);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(429);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(723);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(580);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2678);
/* harmony import */ var _AccountOrders__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2716);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(829);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2429);
/* harmony import */ var common_accountHelper__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2717);
/* harmony import */ var _BalanceWrapper__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2378);
/* harmony import */ var _AccountTreemap__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2718);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2304);
/* harmony import */ var _AccountPortfolioList__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2721);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }























var AccountOverview = function (_React$Component) {
    _inherits(AccountOverview, _React$Component);

    function AccountOverview(props) {
        _classCallCheck(this, AccountOverview);

        var _this = _possibleConstructorReturn(this, (AccountOverview.__proto__ || Object.getPrototypeOf(AccountOverview)).call(this));

        _this.state = {
            sortKey: props.viewSettings.get("portfolioSort", "totalValue"),
            sortDirection: props.viewSettings.get("portfolioSortDirection", true), // alphabetical A -> B, numbers high to low
            shownAssets: props.viewSettings.get("shownAssets", "active"),
            alwaysShowAssets: ["BTS"
            // "USD",
            // "CNY",
            // "OPEN.BTC",
            // "OPEN.USDT",
            // "OPEN.ETH",
            // "OPEN.MAID",
            // "OPEN.STEEM",
            // "OPEN.DASH"
            ]
        };

        _this._handleFilterInput = _this._handleFilterInput.bind(_this);
        return _this;
    }

    _createClass(AccountOverview, [{
        key: "_handleFilterInput",
        value: function _handleFilterInput(e) {
            e.preventDefault();
            this.setState({
                filterValue: e.target.value
            });
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            this._checkMarginStatus();
        }
    }, {
        key: "_checkMarginStatus",
        value: function _checkMarginStatus() {
            var _this2 = this;

            var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;

            Object(common_accountHelper__WEBPACK_IMPORTED_MODULE_16__["checkMarginStatus"])(props.account).then(function (status) {
                var globalMarginStatus = null;
                for (var asset in status) {
                    globalMarginStatus = status[asset].statusClass || globalMarginStatus;
                }
                _this2.setState({ globalMarginStatus: globalMarginStatus });
            });
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.account !== this.props.account) {
                this._checkMarginStatus(np);
            }
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps, nextState) {
            return !common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].are_equal_shallow(nextProps.balances, this.props.balances) || nextProps.account !== this.props.account || nextProps.settings !== this.props.settings || nextProps.hiddenAssets !== this.props.hiddenAssets || !common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].are_equal_shallow(nextState, this.state) || this.state.filterValue !== nextState.filterValue;
        }
    }, {
        key: "_changeShownAssets",
        value: function _changeShownAssets() {
            var shownAssets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "active";

            this.setState({
                shownAssets: shownAssets
            });
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeViewSetting({
                shownAssets: shownAssets
            });
        }
    }, {
        key: "_toggleSortOrder",
        value: function _toggleSortOrder(key) {
            if (this.state.sortKey === key) {
                actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeViewSetting({
                    portfolioSortDirection: !this.state.sortDirection
                });
                this.setState({
                    sortDirection: !this.state.sortDirection
                });
            } else {
                actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeViewSetting({
                    portfolioSort: key
                });
                this.setState({
                    sortDirection: false,
                    sortKey: key
                });
            }
        }
    }, {
        key: "getHeader",
        value: function getHeader() {
            var settings = this.props.settings;
            var shownAssets = this.state.shownAssets;


            var preferredUnit = settings.get("unit") || this.props.core_asset.get("symbol");
            var showAssetPercent = settings.get("showAssetPercent", false);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        style: { textAlign: "left" },
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("clickable is-sortable", {
                            "is-active": this.state.sortKey === "alphabetic"
                        }),
                        onClick: this._toggleSortOrder.bind(this, "alphabetic")
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { component: "span", content: "account.asset" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        onClick: this._toggleSortOrder.bind(this, "qty"),
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("clickable is-sortable", {
                            "is-active": this.state.sortKey === "qty"
                        }),
                        style: { textAlign: "right" }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.qty" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        onClick: this._toggleSortOrder.bind(this, "priceValue"),
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("column-hide-small clickable is-sortable", { "is-active": this.state.sortKey === "priceValue" }),
                        style: { textAlign: "right" }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "exchange.price" }),
                    " (",
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: preferredUnit, noTip: true }),
                    ")"
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        onClick: this._toggleSortOrder.bind(this, "changeValue"),
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("column-hide-small clickable is-sortable", { "is-active": this.state.sortKey === "changeValue" }),
                        style: { textAlign: "right" }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.hour_24_short" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        onClick: this._toggleSortOrder.bind(this, "totalValue"),
                        style: { textAlign: "right" },
                        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("column-hide-small clickable is-sortable", { "is-active": this.state.sortKey === "totalValue" })
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_15__["default"], {
                        noLink: true,
                        string: "account.eq_value_header",
                        keys: [{
                            type: "asset",
                            value: preferredUnit,
                            arg: "asset"
                        }],
                        noTip: true
                    })
                ),
                showAssetPercent ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    {
                        style: {
                            textAlign: "right"
                        }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { component: "span", content: "account.percent" })
                ) : null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "header.payments" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "exchange.buy" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "modal.deposit.submit" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "modal.withdraw.submit" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.trade" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "exchange.borrow_short" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.settle" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "modal.reserve.submit" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                        content: shownAssets == "active" ? "exchange.hide" : "account.perm.show"
                    })
                )
            );
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props = this.props,
                account = _props.account,
                hiddenAssets = _props.hiddenAssets,
                settings = _props.settings,
                orders = _props.orders;
            var shownAssets = this.state.shownAssets;


            if (!account) {
                return null;
            }

            var preferredUnit = settings.get("unit") || this.props.core_asset.get("symbol");

            var call_orders = [],
                collateral = {},
                debt = {};

            if (account.toJS && account.has("call_orders")) call_orders = account.get("call_orders").toJS();
            var includedPortfolioList = void 0,
                hiddenPortfolioList = void 0;
            var account_balances = account.get("balances");
            var includedBalancesList = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                hiddenBalancesList = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List();
            call_orders.forEach(function (callID) {
                var position = bitsharesjs__WEBPACK_IMPORTED_MODULE_9__["ChainStore"].getObject(callID);
                if (position) {
                    var collateralAsset = position.getIn(["call_price", "base", "asset_id"]);
                    if (!collateral[collateralAsset]) {
                        collateral[collateralAsset] = parseInt(position.get("collateral"), 10);
                    } else {
                        collateral[collateralAsset] += parseInt(position.get("collateral"), 10);
                    }
                    var debtAsset = position.getIn(["call_price", "quote", "asset_id"]);
                    if (!debt[debtAsset]) {
                        debt[debtAsset] = parseInt(position.get("debt"), 10);
                    } else {
                        debt[debtAsset] += parseInt(position.get("debt"), 10);
                    }
                }
            });

            if (account_balances) {
                // Filter out balance objects that have 0 balance or are not included in open orders
                account_balances = account_balances.filter(function (a, index) {
                    var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_9__["ChainStore"].getObject(a);
                    if (balanceObject && !balanceObject.get("balance") && !orders[index]) {
                        return false;
                    } else {
                        return true;
                    }
                });

                // Separate balances into hidden and included
                account_balances.forEach(function (a, asset_type) {
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_9__["ChainStore"].getAsset(asset_type);

                    var assetName = "";
                    var filter = "";

                    if (_this3.state.filterValue) {
                        filter = _this3.state.filterValue ? String(_this3.state.filterValue).toLowerCase() : "";
                        assetName = asset.get("symbol").toLowerCase();

                        var _utils$replaceName = common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].replaceName(asset),
                            isBitAsset = _utils$replaceName.isBitAsset;

                        if (isBitAsset) {
                            assetName = "bit" + assetName;
                        }
                    }

                    if (hiddenAssets.includes(asset_type) && assetName.includes(filter)) {
                        hiddenBalancesList = hiddenBalancesList.push(a);
                    } else if (assetName.includes(filter)) {
                        includedBalancesList = includedBalancesList.push(a);
                    }
                });
            }

            var portfolioHiddenAssetsBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], { noTip: true, balances: hiddenBalancesList, hide_asset: true });

            var portfolioActiveAssetsBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: includedBalancesList,
                hide_asset: true
            });
            var ordersValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                openOrders: orders,
                hide_asset: true
            });
            var marginValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                debt: debt,
                collateral: collateral,
                hide_asset: true
            });
            var debtValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                debt: debt,
                hide_asset: true
            });
            var collateralValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                collateral: collateral,
                hide_asset: true
            });

            var totalValueText = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_15__["default"], {
                noLink: true,
                string: "account.total",
                keys: [{ type: "asset", value: preferredUnit, arg: "asset" }]
            });

            var includedPortfolioBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { key: "portfolio", className: "total-value" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { colSpan: "2", style: { textAlign: "left" } },
                    totalValueText
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    portfolioActiveAssetsBalance
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { colSpan: "9" })
            );

            var hiddenPortfolioBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { key: "portfolio", className: "total-value" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { colSpan: "2", style: { textAlign: "left" } },
                    totalValueText
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    portfolioHiddenAssetsBalance
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { colSpan: "9" })
            );

            includedPortfolioList = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPortfolioList__WEBPACK_IMPORTED_MODULE_20__["default"], {
                balanceList: includedBalancesList,
                optionalAssets: !this.state.filterValue ? this.state.alwaysShowAssets : null,
                visible: true,
                preferredUnit: preferredUnit,
                coreAsset: this.props.core_asset,
                coreSymbol: this.props.core_asset.get("symbol"),
                hiddenAssets: hiddenAssets,
                orders: orders,
                account: this.props.account,
                sortKey: this.state.sortKey,
                sortDirection: this.state.sortDirection,
                isMyAccount: this.props.isMyAccount,
                balances: this.props.balances,
                header: this.getHeader(),
                extraRow: includedPortfolioBalance
            });

            hiddenPortfolioList = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPortfolioList__WEBPACK_IMPORTED_MODULE_20__["default"], {
                balanceList: hiddenBalancesList,
                optionalAssets: !this.state.filterValue ? this.state.alwaysShowAsset : null,
                visible: false,
                preferredUnit: preferredUnit,
                coreSymbol: this.props.core_asset.get("symbol"),
                settings: settings,
                hiddenAssets: hiddenAssets,
                orders: orders,
                account: this.props.account,
                sortKey: this.state.sortKey,
                sortDirection: this.state.sortDirection,
                isMyAccount: this.props.isMyAccount,
                balances: this.props.balances,
                header: this.getHeader(),
                extraRow: hiddenPortfolioBalance
            });

            // add unicode non-breaking space as subtext to Activity Tab to ensure that all titles are aligned
            // horizontally
            var hiddenSubText = "\xA0";

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tabs"],
                            {
                                defaultActiveTab: 0,
                                segmented: false,
                                setting: "overviewTab",
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "account.portfolio",
                                    subText: portfolioActiveAssetsBalance
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "header-selector" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "filter inline-block" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            placeholder: "Filter",
                                            onChange: this._handleFilterInput
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "selector inline-block" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("inline-block", {
                                                    inactive: shownAssets != "active"
                                                }),
                                                onClick: shownAssets != "active" ? this._changeShownAssets.bind(this, "active") : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.hide_hidden" })
                                        ),
                                        hiddenBalancesList.size ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("inline-block", {
                                                    inactive: shownAssets != "hidden"
                                                }),
                                                onClick: shownAssets != "hidden" ? this._changeShownAssets.bind(this, "hidden") : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.show_hidden" })
                                        ) : null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_14___default()("inline-block", {
                                                    inactive: shownAssets != "visual"
                                                }),
                                                onClick: shownAssets != "visual" ? this._changeShownAssets.bind(this, "visual") : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.show_visual" })
                                        )
                                    )
                                ),
                                shownAssets != "visual" ? shownAssets === "hidden" && hiddenBalancesList.size ? hiddenPortfolioList : includedPortfolioList : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountTreemap__WEBPACK_IMPORTED_MODULE_18__["default"], {
                                    balanceObjects: includedBalancesList
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "account.open_orders",
                                    subText: ordersValue
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    _AccountOrders__WEBPACK_IMPORTED_MODULE_13__["default"],
                                    this.props,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "tr",
                                        { className: "total-value" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "td",
                                            {
                                                colSpan: "8",
                                                style: { textAlign: "right" }
                                            },
                                            totalValueText
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "td",
                                            {
                                                colSpan: "1",
                                                style: { textAlign: "right" }
                                            },
                                            ordersValue
                                        ),
                                        this.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null) : null
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "account.collaterals",
                                    subText: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        {
                                            className: this.state.globalMarginStatus
                                        },
                                        marginValue
                                    )
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "generic-bordered-box" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            _MarginPositions__WEBPACK_IMPORTED_MODULE_6__["default"],
                                            {
                                                preferredUnit: preferredUnit,
                                                className: "dashboard-table",
                                                callOrders: call_orders,
                                                account: account
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tr",
                                                { className: "total-value" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    null,
                                                    totalValueText
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    null,
                                                    debtValue
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    { className: "column-hide-medium" },
                                                    collateralValue
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    null,
                                                    marginValue
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { colSpan: "4" })
                                            )
                                        )
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "account.activity",
                                    subText: hiddenSubText
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_RecentTransactions__WEBPACK_IMPORTED_MODULE_7__["RecentTransactions"], {
                                    accountsList: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.fromJS([account.get("id")]),
                                    compactView: false,
                                    showMore: true,
                                    fullHeight: true,
                                    limit: 100,
                                    showFilters: true,
                                    dashboard: true
                                })
                            ),
                            account.get("proposals") && account.get("proposals").size ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                {
                                    title: "explorer.proposals.title",
                                    subText: String(account.get("proposals") ? account.get("proposals").size : 0)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Account_Proposals__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                    className: "dashboard-table",
                                    account: account.get("id")
                                })
                            ) : null
                        )
                    )
                )
            );
        }
    }]);

    return AccountOverview;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountOverview = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_19__["default"])(AccountOverview, { propNames: ["core_asset"] });

var AccountOverviewWrapper = function (_React$Component2) {
    _inherits(AccountOverviewWrapper, _React$Component2);

    function AccountOverviewWrapper() {
        _classCallCheck(this, AccountOverviewWrapper);

        return _possibleConstructorReturn(this, (AccountOverviewWrapper.__proto__ || Object.getPrototypeOf(AccountOverviewWrapper)).apply(this, arguments));
    }

    _createClass(AccountOverviewWrapper, [{
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_BalanceWrapper__WEBPACK_IMPORTED_MODULE_17__["default"], _extends({}, this.props, { wrap: AccountOverview }));
        }
    }]);

    return AccountOverviewWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountOverviewWrapper);

/***/ }),

/***/ 2710:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2085);
/* harmony import */ var _Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2425);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1959);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1960);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2304);
/* harmony import */ var _Utility_AssetImage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2591);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2303);
/* harmony import */ var _Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2641);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(599);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(429);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(602);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(580);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(1867);
/* harmony import */ var _Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2351);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(536);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(1819);
/* harmony import */ var _Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2429);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }























var alignRight = { textAlign: "right" };
var alignLeft = { textAlign: "left" };
/**
 *  Given a collateral position object (call order) and account,
 *  display it in a pretty way
 *
 *  Expects property, 'object' which should be a call order id
 *  and another property called 'account' which should be an
 *  account.
 */

var MarginPosition = function (_React$Component) {
    _inherits(MarginPosition, _React$Component);

    function MarginPosition() {
        _classCallCheck(this, MarginPosition);

        return _possibleConstructorReturn(this, (MarginPosition.__proto__ || Object.getPrototypeOf(MarginPosition)).apply(this, arguments));
    }

    _createClass(MarginPosition, [{
        key: "_onUpdatePosition",
        value: function _onUpdatePosition(e) {
            e.preventDefault();
            var ref = "cp_modal_" + this.props.object.getIn(["call_price", "quote", "asset_id"]);
            this.refs[ref].show();
        }
    }, {
        key: "_onClosePosition",
        value: function _onClosePosition(e) {
            e.preventDefault();
            var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_9__["default"].new_transaction();

            tr.add_type_operation("call_order_update", {
                fee: {
                    amount: 0,
                    asset_id: 0
                },
                funding_account: this.props.object.get("borrower"),
                delta_collateral: {
                    amount: -this.props.object.get("collateral"),
                    asset_id: this.props.object.getIn(["call_price", "base", "asset_id"])
                },
                delta_debt: {
                    amount: -this.props.object.get("debt"),
                    asset_id: this.props.object.getIn(["call_price", "quote", "asset_id"])
                }
            });

            stores_WalletDb__WEBPACK_IMPORTED_MODULE_11__["default"].process_transaction(tr, null, true);
        }

        // how many units of the debt asset the borrower has
        // in his/her wallet. This has nothing to do with
        // how many of the asset the borrower has borrowed.

    }, {
        key: "_getBalance",
        value: function _getBalance() {
            var account = this.props.account;
            // the debt asset id which we want to display
            var row_asset_id = this.props.object.getIn(["call_price", "quote", "asset_id"]);

            var account_balances = account.get("balances");

            var balance = 0;

            // really this iteration should be called once, and
            // each asset_id matched once with its balance

            // for every debt the account has, we iterate
            // through every balance the user has
            if (account_balances) {
                account_balances.forEach(function (a, asset_type) {
                    if (asset_type == row_asset_id) {
                        var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_10__["ChainStore"].getObject(a);

                        // get the balance
                        balance = balanceObject.get("balance");
                    }
                });
            }

            // it's possible that the account doesn't hold
            // any of the asset here
            return balance;
        }
    }, {
        key: "_getFeedPrice",
        value: function _getFeedPrice() {
            if (!this.props) {
                return 1;
            }

            return 1 / common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_price(this.props.debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "quote", "amount"]), this.props.collateralAsset, this.props.debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "base", "amount"]), this.props.debtAsset);
        }
    }, {
        key: "_getCollateralRatio",
        value: function _getCollateralRatio() {
            var co = this.props.object.toJS();
            var c = common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_amount(co.collateral, this.props.collateralAsset);
            var d = common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_amount(co.debt, this.props.debtAsset);
            return c / (d / this._getFeedPrice());
        }
    }, {
        key: "_getMR",
        value: function _getMR() {
            return this.props.debtAsset.getIn(["bitasset", "current_feed", "maintenance_collateral_ratio"]) / 1000;
        }
    }, {
        key: "_getStatusClass",
        value: function _getStatusClass() {
            var cr = this._getCollateralRatio();
            var mr = this._getMR();

            if (isNaN(cr)) return null;
            if (cr < mr) {
                return "danger";
            } else if (cr < mr + 0.5) {
                return "warning";
            } else {
                return "";
            }
        }
    }, {
        key: "_getCRTip",
        value: function _getCRTip() {
            var statusClass = this._getStatusClass();
            var mr = this._getMR();
            if (!statusClass || statusClass === "") return null;

            if (statusClass === "danger") {
                return counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.cr_danger", { mr: mr });
            } else if (statusClass === "warning") {
                return counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.cr_warning", { mr: mr });
            } else {
                return null;
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                debtAsset = _props.debtAsset,
                collateralAsset = _props.collateralAsset,
                object = _props.object;

            var co = object.toJS();
            var cr = this._getCollateralRatio();
            var d = common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_amount(co.debt, this.props.debtAsset);
            var balance = this._getBalance();

            var statusClass = this._getStatusClass();

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { className: "margin-row" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetImage__WEBPACK_IMPORTED_MODULE_6__["default"], {
                        replaceNoneToBts: false,
                        maxWidth: 30,
                        name: debtAsset.get("symbol")
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_18__["Link"],
                        { to: "/asset/" + debtAsset.get("symbol") },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_7__["default"], { noTip: true, name: debtAsset.get("symbol") })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        amount: balance,
                        asset: co.call_price.quote.asset_id,
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        amount: co.debt,
                        asset: co.call_price.quote.asset_id,
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-medium" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        decimalOffset: 5,
                        amount: co.collateral,
                        asset: co.call_price.base.asset_id
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        "data-place": "bottom",
                        "data-tip": this._getCRTip(),
                        className: "center-content " + statusClass
                    },
                    common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].format_number(cr, 2)
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_16__["default"], {
                        noTip: true,
                        balances: Object(immutable__WEBPACK_IMPORTED_MODULE_17__["List"])(),
                        debt: _defineProperty({}, debtAsset.get("id"), co.debt),
                        collateral: _defineProperty({}, collateralAsset.get("id"), parseInt(co.collateral, 10)),
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        base_amount: co.call_price.base.amount,
                        base_asset: co.call_price.base.asset_id,
                        quote_amount: co.call_price.quote.amount,
                        quote_asset: co.call_price.quote.asset_id,
                        hide_symbols: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        base_amount: debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "base", "amount"]),
                        base_asset: co.call_price.quote.asset_id,
                        quote_amount: debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "quote", "amount"]),
                        quote_asset: co.call_price.base.asset_id,
                        hide_symbols: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        className: "center-content column-hide-small",
                        style: alignLeft
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        base_amount: co.call_price.base.amount,
                        base_asset: co.call_price.base.asset_id,
                        quote_amount: co.call_price.quote.amount,
                        quote_asset: co.call_price.quote.asset_id,
                        hide_value: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "center" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_18__["Link"],
                        {
                            to: "/market/" + debtAsset.get("symbol") + "_" + collateralAsset.get("symbol")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                            name: "trade",
                            title: "icons.trade.trade",
                            className: "icon-14px",
                            style: { marginRight: 5 }
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            "data-place": "left",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.update_position"),
                            style: { paddingBottom: 5 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            { onClick: this._onUpdatePosition.bind(this) },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                name: "adjust",
                                title: "icons.adjust",
                                className: "icon-14px rotate90"
                            })
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            "data-place": "left",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.close_position", { amount: d, asset: debtAsset.get("symbol") }),
                            style: { paddingBottom: 5 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            { onClick: this._onClosePosition.bind(this) },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                name: "cross-circle",
                                title: "icons.cross_circle.close_position",
                                className: "icon-14px"
                            })
                        )
                    ),
                    debtAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_8__["default"], {
                        ref: "cp_modal_" + co.call_price.quote.asset_id,
                        modalId: "cp_modal_" + co.call_price.quote.asset_id,
                        quote_asset: co.call_price.quote.asset_id,
                        backing_asset: debtAsset.getIn(["bitasset", "options", "short_backing_asset"]),
                        account: this.props.account
                    }) : null
                )
            );
        }
    }]);

    return MarginPosition;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarginPosition.propTypes = {
    debtAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAsset.isRequired,
    collateralAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAsset.isRequired
};
MarginPosition.defaultProps = {
    tempComponent: "tr"
};

MarginPosition = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(MarginPosition);

var MarginPositionWrapper = function (_React$Component2) {
    _inherits(MarginPositionWrapper, _React$Component2);

    function MarginPositionWrapper() {
        _classCallCheck(this, MarginPositionWrapper);

        return _possibleConstructorReturn(this, (MarginPositionWrapper.__proto__ || Object.getPrototypeOf(MarginPositionWrapper)).apply(this, arguments));
    }

    _createClass(MarginPositionWrapper, [{
        key: "render",
        value: function render() {
            var _props2 = this.props,
                object = _props2.object,
                account = _props2.account;

            var debtAsset = object.getIn(["call_price", "quote", "asset_id"]);
            var collateralAsset = object.getIn(["call_price", "base", "asset_id"]);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarginPosition, _extends({
                debtAsset: debtAsset,
                collateralAsset: collateralAsset,
                account: account
            }, this.props));
        }
    }]);

    return MarginPositionWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarginPositionWrapper.propTypes = {
    object: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired
};


MarginPositionWrapper = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(MarginPositionWrapper);

var MarginPositionPlaceHolder = function (_React$Component3) {
    _inherits(MarginPositionPlaceHolder, _React$Component3);

    function MarginPositionPlaceHolder() {
        _classCallCheck(this, MarginPositionPlaceHolder);

        return _possibleConstructorReturn(this, (MarginPositionPlaceHolder.__proto__ || Object.getPrototypeOf(MarginPositionPlaceHolder)).apply(this, arguments));
    }

    _createClass(MarginPositionPlaceHolder, [{
        key: "_onUpdatePosition",
        value: function _onUpdatePosition(e) {
            e.preventDefault();
            var ref = "cp_modal_" + this.props.debtAsset.get("id");
            this.refs[ref].show();
        }
    }, {
        key: "_getFeedPrice",
        value: function _getFeedPrice() {
            if (!this.props) {
                return 1;
            }

            return 1 / common_utils__WEBPACK_IMPORTED_MODULE_13__["default"].get_asset_price(this.props.debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "quote", "amount"]), this.props.collateralAsset, this.props.debtAsset.getIn(["bitasset", "current_feed", "settlement_price", "base", "amount"]), this.props.debtAsset);
        }
    }, {
        key: "render",
        value: function render() {
            var _props3 = this.props,
                debtAsset = _props3.debtAsset,
                collateralAsset = _props3.collateralAsset,
                account = _props3.account;

            // get the balance

            // the debt asset id which we want to display

            var row_asset_id = debtAsset.get("id");

            var account_balances = account.get("balances");

            var balance = 0;

            // really this iteration should be called once, and
            // each asset_id matched once with its balance

            // for every debt the account has, we iterate
            // through every balance the user has
            if (account_balances) {
                account_balances.forEach(function (a, asset_type) {
                    if (asset_type == row_asset_id) {
                        var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_10__["ChainStore"].getObject(a);

                        // get the balance
                        balance = balanceObject.get("balance");
                    }
                });
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { className: "margin-row" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetImage__WEBPACK_IMPORTED_MODULE_6__["default"], {
                        replaceNoneToBts: false,
                        maxWidth: 30,
                        name: debtAsset.get("symbol")
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_18__["Link"],
                        { to: "/asset/" + debtAsset.get("symbol") },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_7__["default"], { noTip: true, name: debtAsset.get("symbol") })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        amount: balance,
                        asset: debtAsset.get("id"),
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        amount: 0,
                        asset: debtAsset.get("id"),
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-medium" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        decimalOffset: 5,
                        amount: 0,
                        asset: collateralAsset.get("id")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { style: alignRight }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { style: alignRight, className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { style: alignRight, className: "column-hide-small" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", {
                    className: "center-content column-hide-small",
                    style: alignLeft
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "center" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_18__["Link"],
                        {
                            to: "/market/" + debtAsset.get("symbol") + "_" + collateralAsset.get("symbol")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                            name: "trade",
                            title: "icons.trade.trade",
                            className: "icon-14px",
                            style: { marginRight: 5 }
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            "data-place": "left",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.update_position"),
                            style: { paddingBottom: 5 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            { onClick: this._onUpdatePosition.bind(this) },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                name: "adjust",
                                title: "icons.adjust",
                                className: "icon-14px rotate90"
                            })
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    debtAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_8__["default"], {
                        ref: "cp_modal_" + debtAsset.get("id"),
                        modalId: "cp_modal_" + debtAsset.get("id"),
                        quote_asset: debtAsset.get("id"),
                        backing_asset: debtAsset.getIn(["bitasset", "options", "short_backing_asset"]),
                        account: this.props.account
                    }) : null
                )
            );
        }
    }]);

    return MarginPositionPlaceHolder;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarginPositionPlaceHolder.propTypes = {
    debtAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAsset.isRequired,
    collateralAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAsset.isRequired
};
MarginPositionPlaceHolder.defaultProps = {
    tempComponent: "tr"
};


MarginPositionPlaceHolder = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(MarginPositionPlaceHolder);

var PlaceHolderWrapper = function (_React$Component4) {
    _inherits(PlaceHolderWrapper, _React$Component4);

    function PlaceHolderWrapper() {
        _classCallCheck(this, PlaceHolderWrapper);

        return _possibleConstructorReturn(this, (PlaceHolderWrapper.__proto__ || Object.getPrototypeOf(PlaceHolderWrapper)).apply(this, arguments));
    }

    _createClass(PlaceHolderWrapper, [{
        key: "render",
        value: function render() {
            var _this5 = this;

            var _props4 = this.props,
                account = _props4.account,
                callOrders = _props4.callOrders,
                bitAssets = _props4.bitAssets;

            callOrders = callOrders.filter(function (o) {
                return !!o;
            });
            bitAssets = bitAssets.filter(function (o) {
                return !!o;
            });
            if (!bitAssets.length) return null;
            callOrders.forEach(function (object) {
                /*
                * Existing call orders are already rendered elsewhere, so we filter
                * out assets from the bitAssets list for which the account already
                * has a position
                */
                if (object) {
                    var index = bitAssets.findIndex(function (o) {
                        return o && o.get("id") === object.getIn(["call_price", "quote", "asset_id"]);
                    });
                    if (index !== -1) {
                        bitAssets.splice(index, 1);
                    }
                }
            });

            if (!bitAssets.length) return null;
            var rows = bitAssets.map(function (a) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarginPositionPlaceHolder, _extends({
                    key: a.get("id"),
                    debtAsset: a.get("id"),
                    collateralAsset: a.getIn(["bitasset", "options", "short_backing_asset"]),
                    account: account
                }, _this5.props));
            });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tbody",
                null,
                rows
            );
        }
    }]);

    return PlaceHolderWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

PlaceHolderWrapper.propTypes = {
    callOrders: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObjectsList
};


PlaceHolderWrapper = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(PlaceHolderWrapper);
PlaceHolderWrapper = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_5__["default"])(PlaceHolderWrapper, {
    propNames: ["bitAssets"],
    defaultProps: {
        bitAssets: ["1.3.103", "1.3.113", "1.3.120", "1.3.121", "1.3.958", "1.3.1325", "1.3.1362", "1.3.105", "1.3.106"]
    },
    asList: true
});

var CollateralTable = function CollateralTable(_ref3) {
    var callOrders = _ref3.callOrders,
        account = _ref3.account,
        className = _ref3.className,
        children = _ref3.children,
        preferredUnit = _ref3.preferredUnit;

    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "table",
        { className: "table table-hover " + className },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "thead",
            null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "explorer.asset.title" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.balance" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "transaction.borrow_amount" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight, className: "column-hide-medium" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "transaction.collateral" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "tooltip inline-block",
                            "data-place": "top",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.coll_ratio")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "borrow.coll_ratio" })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        noLink: true,
                        string: "account.total",
                        keys: [{
                            type: "asset",
                            value: preferredUnit,
                            arg: "asset"
                        }]
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight, className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "tooltip inline-block",
                            "data-place": "top",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_14___default.a.translate("tooltip.call_price")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.call" })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight, className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.price" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { className: "column-hide-small", style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "explorer.assets.units" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: { textAlign: "center" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.market" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "borrow.adjust_short" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "transfer.close" })
                )
            )
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "tbody",
            null,
            callOrders.sort(function (a, b) {
                return a.split(".")[2] - b.split(".")[2];
            }).map(function (id) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarginPositionWrapper, {
                    key: id,
                    object: id,
                    account: account
                });
            })
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaceHolderWrapper, {
            account: account,
            callOrders: immutable__WEBPACK_IMPORTED_MODULE_17___default.a.List(callOrders)
        }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "tbody",
            null,
            children
        )
    );
};

/* harmony default export */ __webpack_exports__["default"] = (CollateralTable);

/***/ }),

/***/ 2711:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var components_Blockchain_ProposedOperation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2427);
/* harmony import */ var components_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1960);
/* harmony import */ var components_Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1959);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(580);
/* harmony import */ var _Modal_ProposalModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2712);
/* harmony import */ var _Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2713);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(429);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var common_permission_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2714);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2423);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(562);
var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
















var Proposals = function (_Component) {
    _inherits(Proposals, _Component);

    function Proposals() {
        _classCallCheck(this, Proposals);

        var _this = _possibleConstructorReturn(this, (Proposals.__proto__ || Object.getPrototypeOf(Proposals)).call(this));

        _this.state = {
            isModalVisible: false,
            modal: {
                action: null,
                proposalId: null,
                accountId: null
            }
        };

        _this.forceUpdate = _this.forceUpdate.bind(_this);
        _this.showModal = _this.showModal.bind(_this);
        _this.hideModal = _this.hideModal.bind(_this);
        return _this;
    }

    _createClass(Proposals, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            /*
            * Account objects don't get updated by underlying proposal changes, but
            * the ChainStore does, so in order to update this component when a proposal
            * changes, we need to update it whenever the ChainStore itself updates
            */
            bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].subscribe(this.forceUpdate);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].unsubscribe(this.forceUpdate);
        }
    }, {
        key: "showModal",
        value: function showModal(_ref) {
            var action = _ref.action,
                proposalId = _ref.proposalId,
                accountId = _ref.accountId;

            this.setState({
                isModalVisible: true,
                modal: {
                    action: action,
                    proposalId: proposalId,
                    accountId: accountId
                }
            });
        }
    }, {
        key: "hideModal",
        value: function hideModal() {
            this.setState({
                isModalVisible: false,
                modal: {
                    action: null,
                    proposalId: null,
                    accountId: null
                }
            });
        }
    }, {
        key: "_onApproveModal",
        value: function _onApproveModal(proposalId, accountId, action) {
            this.showModal({ action: action, proposalId: proposalId, accountId: accountId });
        }
    }, {
        key: "_canReject",
        value: function _canReject(proposal) {
            return proposal.available_active_approvals.length || proposal.available_owner_approvals.length || proposal.available_key_approvals.length;
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var account = this.props.account;

            if (!account) return null;

            var proposals = [];

            if (account.get("proposals").size) {
                account.get("proposals").forEach(function (proposal_id) {
                    var proposal = bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].getObject(proposal_id);
                    if (proposal) {
                        var proposed_transaction = proposal.get("proposed_transaction");
                        var operations = proposed_transaction.get("operations");
                        proposals.push({ operations: operations, account: account, proposal: proposal });
                    }
                });
            }

            var proposalRows = proposals.sort(function (a, b) {
                return common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].sortID(a.proposal.get("id"), b.proposal.get("id"), true);
            }).reduce(function (result, proposal, index) {
                var isScam = false;
                var id = proposal.proposal.get("id");
                var proposer = proposal.proposal.get("proposer");
                var expiration = proposal.proposal.get("expiration_time");
                var text = proposal.operations.map(function (o, index) {
                    if (o.getIn([1, "to"]) === "1.2.153124") isScam = true;
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Blockchain_ProposedOperation__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        key: proposal.proposal.get("id") + "_operation_" + index,
                        expiration: expiration,
                        index: index,
                        op: o.toJS(),
                        inverted: false,
                        hideFee: true,
                        hideOpLabel: true,
                        hideExpiration: true,
                        hideDate: true,
                        proposal: true,
                        id: id,
                        proposer: proposer
                    });
                }).toArray();

                var canReject = _this2._canReject(proposal.proposal.toJS());
                var proposalId = proposal.proposal.get("id");

                var type = proposal.proposal.get("required_active_approvals").size ? "active" : "owner";
                result.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: proposalId + "_id" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            colSpan: "4",
                            className: "proposal" + (index === 0 ? " first" : "")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Blockchain_ProposedOperation__WEBPACK_IMPORTED_MODULE_2__["TransactionIDAndExpiry"], {
                            id: id,
                            expiration: expiration
                        })
                    )
                ));

                var available = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.proposal.get("available_" + type + "_approvals"));
                var availableKeys = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.proposal.get("available_key_approvals"));

                var required = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.proposal.get("required_" + type + "_approvals"));
                var requiredPermissions = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].unnest(required, type);

                var _finalRequiredPerms = Object(_Modal_ProposalModal__WEBPACK_IMPORTED_MODULE_6__["finalRequiredPerms"])(requiredPermissions, available, availableKeys),
                    _finalRequiredPerms2 = _slicedToArray(_finalRequiredPerms, 2),
                    accounts = _finalRequiredPerms2[0],
                    keys = _finalRequiredPerms2[1];

                var accountNames = [];

                if (accounts.length) {
                    accounts.forEach(function (account) {
                        if (account && !proposal.proposal.get("available_" + type + "_approvals").includes(account)) {
                            accountNames.push(account);
                        }
                    });
                }

                var keyNames = [];
                if (keys.length) {
                    keys.forEach(function (key) {
                        var isMine = stores_AccountStore__WEBPACK_IMPORTED_MODULE_12__["default"].isMyKey(key);
                        if (isMine && !proposal.proposal.get("available_key_approvals").includes(key)) {
                            keyNames.push(key);
                        }
                    });
                }

                var canApprove = accountNames.length + keyNames.length > 0;

                result.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    {
                        className: "top-left-align",
                        key: proposalId + "_content"
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        text
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        requiredPermissions.map(function (account, index) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                {
                                    className: "list-item",
                                    key: proposalId + "_approver_" + index
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_11__["default"], {
                                    subpage: "permissions",
                                    account: account.id
                                })
                            );
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_7__["default"], {
                            proposal: proposal.proposal.get("id"),
                            type: type
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { className: "approval-buttons" },
                        isScam ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("tooltip.propose_scam"),
                                className: "tooltip has-error scam-error"
                            },
                            "SCAM"
                        ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                onClick: canApprove ? _this2._onApproveModal.bind(_this2, proposalId, proposal.account.get("id"), "approve") : function () {},
                                className: "button primary hollow" + (canApprove ? "" : " hidden")
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "span",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.approve" })
                            )
                        ),
                        canReject ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                onClick: _this2._onApproveModal.bind(_this2, proposalId, proposal.account.get("id"), "reject"),
                                className: "button primary hollow"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.reject" })
                        ) : null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                onClick: _this2._onApproveModal.bind(_this2, proposalId, proposal.account.get("id"), "delete"),
                                className: "button primary hollow"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.delete" })
                        )
                    )
                ));
                result.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: proposalId + "_separator" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { colSpan: "4" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("hr", null)
                    )
                ));
                return result;
            }, []);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    {
                        className: "table proposals compact " + this.props.className
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.proposals" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.approvers" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.status" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.action" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        proposalRows
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_ProposalModal__WEBPACK_IMPORTED_MODULE_6__["default"], {
                    ref: "modal",
                    visible: this.state.isModalVisible,
                    hideModal: this.hideModal,
                    showModal: this.showModal,
                    account: this.state && this.state.modal.accountId,
                    proposal: this.state && this.state.modal.proposalId,
                    action: this.state && this.state.modal.action
                })
            );
        }
    }]);

    return Proposals;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

Proposals.propTypes = {
    account: components_Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccount.isRequired
};


/* harmony default export */ __webpack_exports__["default"] = (Object(components_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(Proposals));

/***/ }),

/***/ 2712:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "finalRequiredPerms", function() { return finalRequiredPerms; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1959);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1960);
/* harmony import */ var components_Forms_AccountSelect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2083);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(562);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(602);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(599);
/* harmony import */ var _Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2713);
/* harmony import */ var common_permission_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2714);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(429);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(733);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12__);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }















var finalRequiredPerms = function finalRequiredPerms(requiredPermissions, available, availableKeys) {
    var finalRequired = [];

    requiredPermissions.forEach(function (account) {
        finalRequired = finalRequired.concat(account.getMissingSigs(available));
    });

    var finalRequiredKeys = [];

    requiredPermissions.forEach(function (account) {
        finalRequiredKeys = finalRequiredKeys.concat(account.getMissingKeys(availableKeys));
    });

    return [finalRequired, finalRequiredKeys];
};

var ProposalModal = function (_React$Component) {
    _inherits(ProposalModal, _React$Component);

    function ProposalModal(props) {
        _classCallCheck(this, ProposalModal);

        var _this = _possibleConstructorReturn(this, (ProposalModal.__proto__ || Object.getPrototypeOf(ProposalModal)).call(this));

        _this.state = {
            active: null,
            key: null,
            owner: null,
            payee: null
        };
        return _this;
    }

    _createClass(ProposalModal, [{
        key: "onActiveAccount",
        value: function onActiveAccount(accountMap, keyMap, type, account) {
            var newState = {};

            if (keyMap[account]) {
                newState["key"] = account;
                newState[type] = null;
            } else if (account) {
                newState[type] = accountMap[account];
                newState["key"] = null;
            } else {
                newState[type] = null;
                newState["key"] = null;
            }
            this.setState(newState);
        }
    }, {
        key: "_onProposalAction",
        value: function _onProposalAction(oldProposal) {
            var _this2 = this;

            var proposalObject = oldProposal.toJS();
            var _state = this.state,
                active = _state.active,
                key = _state.key,
                owner = _state.owner,
                payee = _state.payee;

            var fee_paying_account = payee || active;

            if (this.props.action === "delete") {
                var transaction = api_WalletApi__WEBPACK_IMPORTED_MODULE_8__["default"].new_transaction();
                transaction.add_type_operation("proposal_delete", {
                    fee_paying_account: fee_paying_account || this.props.account.get("id"),
                    proposal: proposalObject.id,
                    using_owner_authority: false
                });
                stores_WalletDb__WEBPACK_IMPORTED_MODULE_7__["default"].process_transaction(transaction, null, true);
            } else {
                var proposal = {
                    fee_paying_account: fee_paying_account,
                    proposal: proposalObject.id,
                    active_approvals_to_add: [],
                    active_approvals_to_remove: [],
                    owner_approvals_to_add: [],
                    owner_approvals_to_remove: [],
                    key_approvals_to_add: [],
                    key_approvals_to_remove: []
                };

                var isAdd = this.props.action === "approve";

                var neededKeys = [];

                ["active", "owner", "key"].forEach(function (auth_type) {
                    var value = _this2.state[auth_type];
                    if (value) {
                        var hasValue = proposalObject["available_" + auth_type + "_approvals"].indexOf(value) !== -1;
                        if (isAdd && !hasValue || !isAdd && hasValue) {
                            if (_this2.props.action === "approve") {
                                proposal[auth_type + "_approvals_to_add"] = [value];
                                if (auth_type === "key") neededKeys.push(value);
                            } else if (_this2.props.action === "reject") {
                                proposal[auth_type + "_approvals_to_remove"] = [value];
                                if (auth_type === "key") neededKeys.push(value);
                            }
                        }
                    }
                });

                var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_8__["default"].new_transaction();
                tr.add_type_operation("proposal_update", proposal);
                stores_WalletDb__WEBPACK_IMPORTED_MODULE_7__["default"].process_transaction(tr, null, true, neededKeys);
            }

            this.props.hideModal();
        }
    }, {
        key: "onChangePayee",
        value: function onChangePayee(account) {
            var fullAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_11__["ChainStore"].getAccount(account);

            if (fullAccount) {
                this.setState({
                    payee: fullAccount.get("id")
                });
            }
        }
    }, {
        key: "onCancel",
        value: function onCancel() {
            this.props.hideModal();
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                proposal = _props.proposal,
                type = _props.type;


            var accountNames = [];
            var accountMap = {};
            var isAdd = this.props.action === "approve";

            if (this.props.accounts.length) {
                this.props.accounts.forEach(function (account) {
                    var accountCheck = isAdd ? account && !proposal.get("available_" + type + "_approvals").includes(account.get("id")) : account && proposal.get("available_" + type + "_approvals").includes(account.get("id"));
                    if (accountCheck) {
                        accountMap[account.get("name")] = account.get("id");
                        accountNames.push(account.get("name"));
                    }
                });
            }

            var keyNames = [];
            var keyMap = {};
            if (this.props.keys.length) {
                this.props.keys.forEach(function (key) {
                    var isMine = stores_AccountStore__WEBPACK_IMPORTED_MODULE_6__["default"].isMyKey(key);
                    var hasValue = proposal.get("available_key_approvals").includes(key);
                    if (isMine && isAdd && !hasValue || isMine && !isAdd && hasValue) {
                        keyMap[key] = true;
                        keyNames.push(key);
                    }
                });
            }

            var myAccounts = stores_AccountStore__WEBPACK_IMPORTED_MODULE_6__["default"].getMyAccounts();

            var footer = [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12__["Button"],
                {
                    key: "submit",
                    type: "primary",
                    onClick: this._onProposalAction.bind(this, proposal)
                },
                counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("proposal." + this.props.action)
            ), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12__["Button"],
                { key: "cancel", onClick: this.onCancel.bind(this) },
                counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("account.perm.cancel")
            )];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12__["Modal"],
                {
                    visible: this.props.visible,
                    title: counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("modal.proposals.actions." + this.props.action),
                    footer: footer,
                    onCancel: this.props.hideModal
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block vertical" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "form",
                        {
                            className: "grid-block vertical full-width-content",
                            style: { paddingTop: 0 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "grid-container" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                {
                                    className: "content-block",
                                    style: { paddingRight: "20%" }
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_9__["default"], {
                                    expanded: true,
                                    proposal: proposal.get("id"),
                                    type: type,
                                    added: isAdd ? this.state.key ? this.state.key : this.state[type] || null : null,
                                    removed: !isAdd ? this.state.key ? this.state.key : this.state[type] || null : null,
                                    noFail: true
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "content-block full-width-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "full-width-content form-group" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        content: "modal.proposals.pay_with",
                                        component: "label"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Forms_AccountSelect__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                        account_names: myAccounts,
                                        onChange: this.onChangePayee.bind(this)
                                    })
                                ),
                                this.props.action !== "delete" && (accountNames.length || keyNames.length) ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "full-width-content form-group" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        content: "modal.proposals.approval_" + (isAdd ? "add" : "remove"),
                                        component: "label"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Forms_AccountSelect__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                        account_names: accountNames.concat(keyNames),
                                        onChange: this.onActiveAccount.bind(this, accountMap, keyMap, type)
                                    })
                                ) : null,
                                 false ? undefined : null
                            )
                        )
                    )
                )
            );
        }
    }]);

    return ProposalModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ProposalModal.propTypes = {
    accounts: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAccountsList
};

ProposalModal = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(ProposalModal);

var FirstLevel = function (_React$Component2) {
    _inherits(FirstLevel, _React$Component2);

    function FirstLevel() {
        _classCallCheck(this, FirstLevel);

        var _this3 = _possibleConstructorReturn(this, (FirstLevel.__proto__ || Object.getPrototypeOf(FirstLevel)).call(this));

        _this3._updateState = _this3._updateState.bind(_this3);
        return _this3;
    }

    _createClass(FirstLevel, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this._updateState();

            bitsharesjs__WEBPACK_IMPORTED_MODULE_11__["ChainStore"].subscribe(this._updateState);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            bitsharesjs__WEBPACK_IMPORTED_MODULE_11__["ChainStore"].unsubscribe(this._updateState);
        }
    }, {
        key: "_updateState",
        value: function _updateState() {
            var _props2 = this.props,
                proposal = _props2.proposal,
                account = _props2.account;

            var type = proposal.get("required_active_approvals").size ? "active" : "owner";

            var required = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.get("required_" + type + "_approvals"));
            var available = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.get("available_" + type + "_approvals"));
            var availableKeys = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.get("available_key_approvals"));

            this.setState({
                requiredPermissions: common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].unnest(required, type),
                available: available,
                availableKeys: availableKeys,
                type: type
            });
        }
    }, {
        key: "render",
        value: function render() {
            var action = this.props.action;
            var _state2 = this.state,
                requiredPermissions = _state2.requiredPermissions,
                available = _state2.available,
                availableKeys = _state2.availableKeys,
                type = _state2.type;

            var _finalRequiredPerms = finalRequiredPerms(requiredPermissions, available, availableKeys),
                _finalRequiredPerms2 = _slicedToArray(_finalRequiredPerms, 2),
                finalRequired = _finalRequiredPerms2[0],
                finalRequiredKeys = _finalRequiredPerms2[1];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ProposalModal, _extends({}, this.props, {
                type: type,
                accounts: action === "approve" ? finalRequired : available,
                keys: action === "approve" ? finalRequiredKeys : availableKeys
            }));
        }
    }]);

    return FirstLevel;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

FirstLevel.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAccount.isRequired,
    proposal: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired
};

FirstLevel = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(FirstLevel);

var ModalWrapper = function (_React$Component3) {
    _inherits(ModalWrapper, _React$Component3);

    function ModalWrapper() {
        _classCallCheck(this, ModalWrapper);

        return _possibleConstructorReturn(this, (ModalWrapper.__proto__ || Object.getPrototypeOf(ModalWrapper)).apply(this, arguments));
    }

    _createClass(ModalWrapper, [{
        key: "render",
        value: function render() {
            if (!this.props.account || !this.props.proposal || !this.props.action) return null;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FirstLevel, this.props);
        }
    }]);

    return ModalWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (ModalWrapper);

/***/ }),

/***/ 2713:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(603);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1959);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1960);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2423);
/* harmony import */ var common_permission_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2714);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(429);
/* harmony import */ var _NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2715);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(823);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__);


var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var AccountPermissionTree = function (_React$Component) {
    _inherits(AccountPermissionTree, _React$Component);

    function AccountPermissionTree(props) {
        _classCallCheck(this, AccountPermissionTree);

        var _this = _possibleConstructorReturn(this, (AccountPermissionTree.__proto__ || Object.getPrototypeOf(AccountPermissionTree)).call(this, props));

        _this.handleExpandToggle = function () {
            _this.setState({ expanded: !_this.state.expanded });
        };

        _this.state = { expanded: !!props.expanded };
        return _this;
    }

    _createClass(AccountPermissionTree, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                account = _props.account,
                available = _props.available,
                availableKeys = _props.availableKeys,
                permission = _props.permission,
                threshold = _props.threshold,
                level = _props.level,
                maxAuthorityDepth = _props.maxAuthorityDepth,
                hideRoot = _props.hideRoot;
            var expanded = this.state.expanded;


            var isOK = Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["isApproved"])(permission, available, availableKeys);
            var isNested = permission.isNested();
            var isMultiSig = permission.isMultiSig();

            var notNestedWeight = Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["notNestdWeight"])(permission.weight, threshold) || 1;

            var nestedWeight = Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["statusText"])(permission, available, availableKeys);

            var authorityDepthOverflow = level >= maxAuthorityDepth;

            var rootPerm = !isNested && !isMultiSig ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    { colSpan: "2" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ApprovedIcon"], { approved: isOK }),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        subpage: "permissions",
                        account: account.get("id")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    null,
                    !isNested && notNestedWeight ? "" + (notNestedWeight && notNestedWeight.length === 2 ? "\xA0\xA0" : "") + notNestedWeight + " " : null
                )
            ) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    { colSpan: "2" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ApprovedIcon"], { approved: isOK }),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        subpage: "permissions",
                        account: account.get("id")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    null,
                    expanded ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        { className: isOK ? "success-text" : "" },
                        notNestedWeight
                    ) : notNestedWeight && "" + (notNestedWeight && notNestedWeight.length === 2 ? "\xA0\xA0" : "") + notNestedWeight + " ",
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ExpandButton"], {
                        onToggle: this.handleExpandToggle,
                        expanded: expanded
                    }),
                    expanded && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        { className: "appended" },
                        "(",
                        nestedWeight,
                        ")"
                    ),
                    authorityDepthOverflow ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["AuthorityDepthOverflowWarning"], null) : Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["hasAuthorityDepthProblem"])(maxAuthorityDepth, permission, level) && !expanded && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ChildAuthorityDepthOverflowWarning"], null)
                )
            );

            var status = [];

            if ((isNested || isMultiSig) && expanded) {
                permission.accounts.forEach(function (subAccount) {
                    status.push(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(BoundAccountPermissionTree, {
                        key: subAccount.id,
                        account: subAccount.id,
                        accounts: subAccount.accounts,
                        permission: subAccount,
                        available: available,
                        availableKeys: availableKeys,
                        threshold: permission.threshold,
                        level: level + 1,
                        maxAuthorityDepth: maxAuthorityDepth
                    }));
                });

                if (permission.keys.length) {
                    permission.keys.forEach(function (key) {
                        return status.push(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["KeyPermissionBranch"], {
                            key: key.id,
                            permission: key,
                            available: availableKeys,
                            level: level + (hideRoot ? 0 : 1),
                            weight: Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["notNestdWeight"])(key.weight, threshold)
                        }));
                    });
                }
            }

            return status.length > 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tbody",
                null,
                hideRoot || rootPerm,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "tr",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { colSpan: "3", className: "heading-perm" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: hideRoot ? "" : "table-container" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "table",
                                null,
                                status
                            )
                        ),
                        expanded && level === 0 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "spacer" })
                    )
                )
            ) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tbody",
                null,
                rootPerm
            );
        }
    }]);

    return AccountPermissionTree;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

AccountPermissionTree.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccount.isRequired,
    accounts: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccountsList,
    level: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.number.isRequired
};
AccountPermissionTree.defaultProps = {
    level: 0
};

var BoundAccountPermissionTree = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(AccountPermissionTree);

var FirstLevel = function (_React$Component2) {
    _inherits(FirstLevel, _React$Component2);

    function FirstLevel(props) {
        _classCallCheck(this, FirstLevel);

        var _this2 = _possibleConstructorReturn(this, (FirstLevel.__proto__ || Object.getPrototypeOf(FirstLevel)).call(this, props));

        _this2.handleExpandToggle = function () {
            return _this2.setState({ expanded: !_this2.state.expanded });
        };

        _this2.state = {
            requiredPermissions: [],
            expanded: props.expanded
        };

        _this2._updateState = _this2._updateState.bind(_this2);
        return _this2;
    }

    _createClass(FirstLevel, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this._updateState();

            bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].subscribe(this._updateState);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].unsubscribe(this._updateState);
        }
    }, {
        key: "_updateState",
        value: function _updateState() {
            var required = common_permission_utils__WEBPACK_IMPORTED_MODULE_5__["default"].listToIDs(this.props.required);
            var available = common_permission_utils__WEBPACK_IMPORTED_MODULE_5__["default"].listToIDs(this.props.available);

            this.setState({
                requiredPermissions: common_permission_utils__WEBPACK_IMPORTED_MODULE_5__["default"].unnest(required, this.props.type),
                required: required,
                available: available
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props2 = this.props,
                type = _props2.type,
                added = _props2.added,
                removed = _props2.removed,
                availableKeys = _props2.availableKeys,
                globalObject = _props2.globalObject,
                reviewPeriodTime = _props2.reviewPeriodTime,
                noFail = _props2.noFail;
            var _state = this.state,
                requiredPermissions = _state.requiredPermissions,
                required = _state.required,
                available = _state.available,
                expanded = _state.expanded;


            available = Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__["default"])(available);
            availableKeys = availableKeys.toJS();

            if (added) {
                available.push(added);
                availableKeys.push(added);
            }

            if (removed) {
                if (available.indexOf(removed) !== -1) {
                    available.splice(available.indexOf(removed), 1);
                }
                if (availableKeys.indexOf(removed) !== -1) {
                    availableKeys.splice(availableKeys.indexOf(removed), 1);
                }
            }

            var approvedCount = requiredPermissions.reduce(function (total, perm) {
                return total + (Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["isApproved"])(perm, available, availableKeys) ? 1 : 0);
            }, 0);
            var approversCount = requiredPermissions.length;
            var isOK = approvedCount === approversCount;

            var failed = isOK && !reviewPeriodTime && !noFail;
            var pendingReview = isOK && reviewPeriodTime;

            var maxAuthorityDepth = globalObject.get("parameters").get("max_authority_depth");

            var onePerm = requiredPermissions.length === 1;
            var oPermission = onePerm ? requiredPermissions[0] : null;

            var nestedWeight = !onePerm && approvedCount + " / " + approversCount;

            var rows = requiredPermissions.map(function (account) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(BoundAccountPermissionTree, {
                    key: account.id,
                    account: account.id,
                    accounts: account.accounts,
                    permission: account,
                    available: available,
                    availableKeys: availableKeys,
                    expanded: _this3.props.expanded || onePerm,
                    level: 0,
                    maxAuthorityDepth: maxAuthorityDepth,
                    hideRoot: onePerm
                });
            });

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "div",
                { className: "nested-approval-state" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "root-status" },
                    failed ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["Failed"], null) : pendingReview ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["Review"], null) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["Pending"], null),
                    " ",
                    !oPermission ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        null,
                        "(",
                        nestedWeight,
                        ")"
                    ) : oPermission.threshold > 1 && Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["statusText"])(oPermission, available, availableKeys),
                    (!oPermission || oPermission.isMultiSig() || oPermission.isNested()) && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ExpandButton"], {
                        onToggle: this.handleExpandToggle,
                        expanded: expanded
                    }),
                    !expanded && requiredPermissions.some(function (permission) {
                        return Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["hasAuthorityDepthProblem"])(maxAuthorityDepth, permission, 0);
                    }) && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ChildAuthorityDepthOverflowWarning"], null)
                ),
                expanded && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "table",
                    null,
                    rows
                )
            );
        }
    }]);

    return FirstLevel;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

FirstLevel.propTypes = {
    required: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccountsList,
    available: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccountsList
};
FirstLevel.defaultProps = {
    type: "active",
    added: null,
    removed: null
};

FirstLevel = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(FirstLevel);

var ProposalWrapper = function (_React$Component3) {
    _inherits(ProposalWrapper, _React$Component3);

    function ProposalWrapper() {
        _classCallCheck(this, ProposalWrapper);

        return _possibleConstructorReturn(this, (ProposalWrapper.__proto__ || Object.getPrototypeOf(ProposalWrapper)).apply(this, arguments));
    }

    _createClass(ProposalWrapper, [{
        key: "render",
        value: function render() {
            var _props3 = this.props,
                proposal = _props3.proposal,
                type = _props3.type;

            var available = proposal.get("available_" + type + "_approvals");
            var availableKeys = proposal.get("available_key_approvals");
            var required = proposal.get("required_" + type + "_approvals");

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(FirstLevel, _extends({}, this.props, {
                required: required,
                available: available,
                availableKeys: availableKeys,
                reviewPeriodTime: proposal.get("review_period_time")
            }));
        }
    }]);

    return ProposalWrapper;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

ProposalWrapper.propTypes = {
    proposal: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainObject.isRequired,
    type: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.string.isRequired,
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainObject.isRequired
};
ProposalWrapper.defaultProps = {
    type: "active",
    added: null,
    globalObject: "2.0.0"
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(ProposalWrapper));

/***/ }),

/***/ 2714:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(429);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(536);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);



var KeyAuth = function KeyAuth(auth) {
    var _this = this;

    this.id = auth.toJS ? auth.get(0) : auth[0];
    this.weight = auth.toJS ? auth.get(1) : auth[1];

    this.isAvailable = function (auths) {
        return auths.includes ? auths.includes(_this.id) : auths.indexOf(_this) !== -1;
    };
};

var permissionUtils = {
    AccountPermission: function AccountPermission(account, weight, type) {
        var _this2 = this;

        this.id = account.get("id");
        this.weight = weight;
        this.threshold = account.getIn([type, "weight_threshold"]);
        this.accounts = [];
        this.keys = account.getIn([type, "key_auths"]).map(function (auth) {
            return new KeyAuth(auth);
        }).toArray();

        this.isAvailable = function (auths) {
            return auths.includes ? auths.includes(_this2.id) : auths.indexOf(_this2) !== -1;
        };

        this._sumWeights = function (auths) {
            if (!_this2.isNested() && !_this2.isMultiSig()) {
                return _this2.isAvailable(auths) ? _this2.weight : 0;
            } else {
                var sum = _this2.accounts.reduce(function (status, account) {
                    return status + (account._sumWeights(auths) ? account.weight : 0);
                }, 0);

                return Math.floor(sum / _this2.threshold);
            }
        };

        this.getStatus = function (auths, keyAuths) {
            if (!_this2.isNested()) {
                var sum = _this2._sumWeights(auths);
                if (_this2.isMultiSig()) {
                    sum += _this2.sumKeys(keyAuths);
                }
                return sum;
            } else {
                var _sum = _this2.accounts.reduce(function (status, account) {
                    return status + account._sumWeights(auths);
                }, 0);

                if (_this2.keys.length) {
                    _sum += _this2.sumKeys(keyAuths);
                }

                return _sum;
            }
        };

        this.sumKeys = function (keyAuths) {
            var keySum = _this2.keys.reduce(function (s, key) {
                return s + (key.isAvailable(keyAuths) ? key.weight : 0);
            }, 0);
            return keySum;
        };

        this.isNested = function () {
            return _this2.accounts.length > 0;
        };

        this.isMultiSig = function () {
            return _this2.keys.reduce(function (final, key) {
                return final || key.weight < _this2.threshold;
            }, false);
        };

        this.getMissingSigs = function (auths) {
            var missing = [];
            var nested = [];
            if (_this2.isNested()) {
                nested = _this2.accounts.reduce(function (a, account) {
                    return a.concat(account.getMissingSigs(auths));
                }, []);
            } else if (!_this2.isAvailable(auths)) {
                missing.push(_this2.id);
            }

            return missing.concat(nested);
        };

        this.getMissingKeys = function (auths) {
            var missing = [];
            var nested = [];
            if (_this2.keys.length && (_this2.isNested() || _this2.isMultiSig())) {
                _this2.keys.forEach(function (key) {
                    if (!key.isAvailable(auths)) {
                        missing.push(key.id);
                    }
                });
            }

            if (_this2.isNested()) {
                nested = _this2.accounts.reduce(function (a, account) {
                    return a.concat(account.getMissingKeys(auths));
                }, []);
            }

            return missing.concat(nested);
        };
    },

    listToIDs: function listToIDs(accountList) {
        var allAccounts = [];

        accountList.forEach(function (account) {
            if (account) {
                allAccounts.push(account.get ? account.get("id") : account);
            }
        });

        return allAccounts;
    },

    unravel: function unravel(accountPermission, type) {
        var _this3 = this;

        var recursive_count = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

        if (recursive_count < 3) {
            var account = bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["ChainStore"].getAccount(accountPermission.id);
            if (account && account.getIn([type, "account_auths"]).size) {
                account.getIn([type, "account_auths"]).forEach(function (auth) {
                    var nestedAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["ChainStore"].getAccount(auth.get(0));
                    if (nestedAccount) {
                        accountPermission.accounts.push(_this3.unravel(new _this3.AccountPermission(nestedAccount, auth.get(1), type), type, recursive_count + 1));
                    }
                });
            }
        }

        return accountPermission;
    },

    unnest: function unnest(accounts, type) {
        var _this4 = this;

        var map = [];
        accounts.forEach(function (id) {
            var fullAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["ChainStore"].getAccount(id);
            var currentPermission = _this4.unravel(new _this4.AccountPermission(fullAccount, null, type), type);
            map.push(currentPermission);
        });

        return map;
    },

    flatten_auths: function flatten_auths(auths) {
        var existingAuths = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List();

        if (!auths.size) {
            return existingAuths;
        }

        auths.forEach(function (owner) {
            if (!existingAuths.includes(owner.get(0))) {
                existingAuths = existingAuths.push(owner.get(0));
            }
        });
        return existingAuths;
    }
};

/* harmony default export */ __webpack_exports__["default"] = (permissionUtils);

/***/ }),

/***/ 2715:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tooltip", function() { return Tooltip; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthorityDepthOverflowWarning", function() { return AuthorityDepthOverflowWarning; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChildAuthorityDepthOverflowWarning", function() { return ChildAuthorityDepthOverflowWarning; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Pending", function() { return Pending; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Review", function() { return Review; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Failed", function() { return Failed; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExpandButton", function() { return ExpandButton; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ApprovedIcon", function() { return ApprovedIcon; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KeyPermissionBranch", function() { return KeyPermissionBranch; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAuthorityDepthProblem", function() { return hasAuthorityDepthProblem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getStatus", function() { return getStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isApproved", function() { return isApproved; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "statusText", function() { return statusText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "notNestdWeight", function() { return notNestdWeight; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1867);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2356);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(580);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_5__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








var Tooltip = function (_React$Component) {
    _inherits(Tooltip, _React$Component);

    function Tooltip() {
        _classCallCheck(this, Tooltip);

        return _possibleConstructorReturn(this, (Tooltip.__proto__ || Object.getPrototypeOf(Tooltip)).apply(this, arguments));
    }

    _createClass(Tooltip, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            react_tooltip__WEBPACK_IMPORTED_MODULE_2___default.a.rebuild();
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                className = _props.className,
                children = _props.children,
                dataTip = _props.dataTip,
                content = _props.content;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                {
                    className: "tooltip " + className,
                    "data-html": true,
                    "data-tip": dataTip || counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate(content)
                },
                children
            );
        }
    }]);

    return Tooltip;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var AuthorityDepthOverflowWarning = function AuthorityDepthOverflowWarning() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        {
            className: "error appended",
            content: "explorer.proposals.authority_depth_warning"
        },
        "/!\\"
    );
};

var ChildAuthorityDepthOverflowWarning = function ChildAuthorityDepthOverflowWarning() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        {
            className: "error appended",
            content: "explorer.proposals.children_authority_depth_warning"
        },
        "/!\\"
    );
};

var Pending = function Pending() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        { className: "warning", content: "explorer.proposals.pending_approval" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "explorer.proposals.pending" })
    );
};

var Review = function Review() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        { className: "warning", content: "explorer.proposals.pending_review" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "explorer.proposals.review" })
    );
};

var Failed = function Failed() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        { className: "error", content: "explorer.proposals.failed_execute" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "explorer.proposals.failed" })
    );
};

var ExpandButton = function ExpandButton(_ref) {
    var onToggle = _ref.onToggle,
        expanded = _ref.expanded;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "a",
        { className: "expand-button", onClick: onToggle },
        "[",
        expanded ? "-" : "+",
        "]"
    );
};

var ApprovedIcon = function ApprovedIcon(_ref2) {
    var approved = _ref2.approved;
    return approved ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_1__["default"], {
        name: "checkmark-circle",
        size: "1x",
        className: "success",
        title: "icons.checkmark_circle.operation_succeed"
    }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_1__["default"], {
        name: "cross-circle",
        size: "1x",
        className: "error",
        title: "icons.cross_circle.operation_failed"
    });
};

var KeyPermissionBranch = function KeyPermissionBranch(_ref3) {
    var available = _ref3.available,
        permission = _ref3.permission,
        weight = _ref3.weight,
        level = _ref3.level;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "tbody",
        null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "tr",
            null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "td",
                { colSpan: "2" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ApprovedIcon, { approved: permission.isAvailable(available) }),
                permission.id.substr(0, 20 - 4 * level),
                "..."
            ),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "td",
                null,
                weight
            )
        )
    );
};

var hasAuthorityDepthProblem = function hasAuthorityDepthProblem(maxAuthorityDepth, permission) {
    var level = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

    if (level > maxAuthorityDepth) {
        return true;
    } else if (!permission.isNested() && !permission.isMultiSig()) {
        return false;
    } else {
        return permission.accounts.some(function (subAccount) {
            return hasAuthorityDepthProblem(maxAuthorityDepth, subAccount, level + 1);
        });
    }
};

var getStatus = function getStatus(permission, available, availableKeys) {
    return permission.accounts.reduce(function (amount, subPermission) {
        return amount + (isApproved(subPermission, available, availableKeys) ? subPermission.weight : 0);
    }, 0) + permission.keys.reduce(function (amount, key) {
        return amount + (key.isAvailable(availableKeys) ? key.weight : 0);
    }, 0);
};

var isApproved = function isApproved(permission, available, availableKeys) {
    return permission.isNested() || permission.isMultiSig() ? getStatus(permission, available, availableKeys) >= permission.threshold : permission.isAvailable(available);
};

var statusText = function statusText(permission, available, availableKeys) {
    return permission && permission.threshold > 10 ? common_utils__WEBPACK_IMPORTED_MODULE_3__["default"].get_percentage(permission.getStatus(available, availableKeys), permission.threshold) + " / 100%" : permission.getStatus(available, availableKeys) + " / " + permission.threshold;
};

var notNestdWeight = function notNestdWeight(weight, threshold) {
    return threshold && threshold > 10 ? common_utils__WEBPACK_IMPORTED_MODULE_3__["default"].get_percentage(weight, threshold) : weight;
};

/***/ }),

/***/ 2716:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Exchange_MyOpenOrders__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2594);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_MarketsActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2354);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(429);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(595);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1859);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(722);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(723);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2352);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2670);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }














var AccountOrders = function (_React$Component) {
    _inherits(AccountOrders, _React$Component);

    function AccountOrders(props) {
        _classCallCheck(this, AccountOrders);

        var _this = _possibleConstructorReturn(this, (AccountOrders.__proto__ || Object.getPrototypeOf(AccountOrders)).call(this, props));

        _this.state = {
            selectedOrders: [],
            filterValue: ""
        };
        return _this;
    }

    _createClass(AccountOrders, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var cancelHeader = document.getElementById("cancelAllOrders");

            if (cancelHeader) {
                cancelHeader.addEventListener("click", function () {
                    var orders = this._getFilteredOrders.call(this);
                    orders = orders.toJS ? orders.toJS() : orders;

                    this.setState({ selectedOrders: orders });

                    var checkboxes = document.querySelectorAll(".orderCancel");

                    checkboxes.forEach(function (item) {
                        if (!item.checked) item.checked = true;
                    });
                }.bind(this));
            }
        }
    }, {
        key: "_getFilteredOrders",
        value: function _getFilteredOrders() {
            var filterValue = this.state.filterValue;


            var orders = this.props.account.get("orders") || [];

            return orders.filter(function (item) {
                var order = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(item).toJS();
                var base = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(order.sell_price.base.asset_id);
                var quote = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(order.sell_price.quote.asset_id);

                var baseSymbol = base.get("symbol").toLowerCase();
                var quoteSymbol = quote.get("symbol").toLowerCase();

                return baseSymbol.indexOf(filterValue) > -1 || quoteSymbol.indexOf(filterValue) > -1;
            });
        }
    }, {
        key: "_cancelLimitOrder",
        value: function _cancelLimitOrder(orderID, e) {
            e.preventDefault();

            actions_MarketsActions__WEBPACK_IMPORTED_MODULE_3__["default"].cancelLimitOrder(this.props.account.get("id"), orderID, // order id to cancel
            false // Don't show normal confirms
            ).catch(function (err) {
                console.log("cancel order error:", err);
            });
        }
    }, {
        key: "_cancelLimitOrders",
        value: function _cancelLimitOrders(orderId) {
            var _this2 = this;

            actions_MarketsActions__WEBPACK_IMPORTED_MODULE_3__["default"].cancelLimitOrders(this.props.account.get("id"), this.state.selectedOrders).then(function () {
                _this2.resetSelected();
            }).catch(function (err) {
                console.log("cancel orders error:", err);
            });
        }
    }, {
        key: "onFlip",
        value: function onFlip(marketId) {
            var setting = {};
            setting[marketId] = !this.props.marketDirections.get(marketId);
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_8__["default"].changeMarketDirection(setting);
        }
    }, {
        key: "onCheckCancel",
        value: function onCheckCancel(orderId, evt) {
            var selectedOrders = this.state.selectedOrders;

            var checked = evt.target.checked;

            if (checked) {
                this.setState({ selectedOrders: selectedOrders.concat([orderId]) });
            } else {
                var index = selectedOrders.indexOf(orderId);

                if (index > -1) {
                    this.setState({
                        selectedOrders: selectedOrders.slice(0, index).concat(selectedOrders.slice(index + 1))
                    });
                }
            }
        }
    }, {
        key: "setFilterValue",
        value: function setFilterValue(evt) {
            this.setState({ filterValue: evt.target.value.toLowerCase() });
        }
    }, {
        key: "resetSelected",
        value: function resetSelected() {
            this.setState({ selectedOrders: [] });

            var checkboxes = document.querySelectorAll(".orderCancel");

            checkboxes.forEach(function (item) {
                if (item.checked) item.checked = false;
            });
        }
    }, {
        key: "cancelSelected",
        value: function cancelSelected() {
            this._cancelLimitOrders.call(this);
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props = this.props,
                account = _props.account,
                marketDirections = _props.marketDirections;
            var _state = this.state,
                filterValue = _state.filterValue,
                selectedOrders = _state.selectedOrders;

            var cancel = counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("account.perm.cancel");
            var markets = {};

            var marketOrders = {};

            if (!account.get("orders")) {
                return null;
            }

            var orders = account.get("orders");
            var ordersCount = orders.size;
            if (filterValue) {
                orders = this._getFilteredOrders.call(this);
            }

            orders.forEach(function (orderID) {
                var order = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getObject(orderID).toJS();
                var base = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(order.sell_price.base.asset_id);
                var quote = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(order.sell_price.quote.asset_id);

                if (base && quote) {
                    var _assets;

                    var assets = (_assets = {}, _defineProperty(_assets, base.get("id"), { precision: base.get("precision") }), _defineProperty(_assets, quote.get("id"), { precision: quote.get("precision") }), _assets);
                    // let baseID = parseInt(order.sell_price.base.asset_id.split(".")[2], 10);
                    // let quoteID = parseInt(order.sell_price.quote.asset_id.split(".")[2], 10);

                    // let marketName = quoteID > baseID ? `${quote.get("symbol")}_${base.get("symbol")}` : `${base.get("symbol")}_${quote.get("symbol")}`;

                    var _marketUtils$getMarke = common_market_utils__WEBPACK_IMPORTED_MODULE_9__["default"].getMarketName(base, quote),
                        marketName = _marketUtils$getMarke.marketName;

                    var direction = marketDirections.get(marketName);

                    if (!markets[marketName]) {
                        if (direction) {
                            markets[marketName] = {
                                base: {
                                    id: base.get("id"),
                                    symbol: base.get("symbol"),
                                    precision: base.get("precision")
                                },
                                quote: {
                                    id: quote.get("id"),
                                    symbol: quote.get("symbol"),
                                    precision: quote.get("precision")
                                }
                            };
                        } else {
                            markets[marketName] = {
                                base: {
                                    id: quote.get("id"),
                                    symbol: quote.get("symbol"),
                                    precision: quote.get("precision")
                                },
                                quote: {
                                    id: base.get("id"),
                                    symbol: base.get("symbol"),
                                    precision: base.get("precision")
                                }
                            };
                        }
                    }
                    var limitOrder = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_5__["LimitOrder"](order, assets, markets[marketName].quote.id);

                    var marketBase = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(markets[marketName].base.id);
                    var marketQuote = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAsset(markets[marketName].quote.id);

                    if (!marketOrders[marketName]) {
                        marketOrders[marketName] = [];
                    }

                    marketOrders[marketName].push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Exchange_MyOpenOrders__WEBPACK_IMPORTED_MODULE_1__["OrderRow"], {
                        ref: markets[marketName].base.symbol,
                        key: order.id,
                        order: limitOrder,
                        base: marketBase,
                        quote: marketQuote,
                        cancel_text: cancel,
                        showSymbols: false,
                        invert: true,
                        onCancel: _this3._cancelLimitOrder.bind(_this3, order.id),
                        price: limitOrder.getPrice(),
                        dashboard: true,
                        isMyAccount: _this3.props.isMyAccount,
                        settings: _this3.props.settings,
                        onFlip: _this3.onFlip.bind(_this3, marketName),
                        onCheckCancel: _this3.onCheckCancel.bind(_this3, order.id)
                    }));
                }
            });

            var tables = [];

            for (var market in marketOrders) {
                if (marketOrders[market].length) {
                    tables = tables.concat(marketOrders[market].sort(function (a, b) {
                        return a.props.price - b.props.price;
                    }));
                    // tables.push(
                    //     <tbody key={market}>
                    //         {/* {marketIndex > 0 ? <tr><td colSpan={this.props.isMyAccount ? "7" : "6"}><span style={{visibility: "hidden"}}>H</span></td></tr> : null} */}
                    //         {marketOrders[market].sort((a, b) => {
                    //             return a.props.price - b.props.price;
                    //         })}
                    //     </tbody>
                    // );
                    // marketIndex++;
                }
            }

            // tables.sort((a, b) => {
            //     return parseInt(a.key, 10) - parseInt(b.key, 10);
            // })

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                {
                    className: "grid-content no-overflow no-padding",
                    style: { paddingBottom: 15 }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "header-selector" },
                    orders && ordersCount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "text",
                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("account.filter_orders"),
                        style: {
                            display: "inline-block",
                            maxWidth: "50%",
                            marginRight: "1em",
                            marginBottom: "0"
                        },
                        onChange: this.setFilterValue.bind(this)
                    }) : null,
                    selectedOrders.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            className: "button",
                            onClick: this.resetSelected.bind(this)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_10___default.a, { content: "account.reset_orders" })
                    ) : null,
                    selectedOrders.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            className: "button",
                            onClick: this.cancelSelected.bind(this)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_10___default.a, { content: "account.submit_orders" })
                    ) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_11__["default"], {
                    pageSize: 20,
                    className: "table table-striped dashboard-table table-hover",
                    header: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Exchange_MyOpenOrders__WEBPACK_IMPORTED_MODULE_1__["TableHeader"], {
                        settings: this.props.settings,
                        dashboard: true,
                        isMyAccount: this.props.isMyAccount
                    }),
                    rows: tables,
                    extraRow: this.props.children
                })
            );
        }
    }]);

    return AccountOrders;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountOrders = Object(alt_react__WEBPACK_IMPORTED_MODULE_6__["connect"])(AccountOrders, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_7__["default"]];
    },
    getProps: function getProps() {
        return {
            marketDirections: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_7__["default"].getState().marketDirections
        };
    }
});

/* harmony default export */ __webpack_exports__["default"] = (AccountOrders);

/***/ }),

/***/ 2717:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkMarginStatus", function() { return checkMarginStatus; });
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(429);
/* harmony import */ var _MarketClasses__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(595);



var asyncCache = {};
var checkMarginStatusTTL = 60000 * 1; // 1 minute

function checkMarginStatus(account) {
    if (!account || account && !account.get("call_orders", []).size) return Promise.resolve(null);

    var key = account.get("name") + JSON.stringify(account.get("call_orders"));
    if (asyncCache[key]) {
        if (asyncCache[key].result) {
            return Promise.resolve(asyncCache[key].result);
        }
        return new Promise(function (res, rej) {
            asyncCache[key].queue.push({ res: res, rej: rej });
        });
    }
    return new Promise(function (res, rej) {
        asyncCache[key] = { queue: [{ res: res, rej: rej }], result: null };

        Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["FetchChain"])("getObject", account.get("call_orders").toArray()).then(function (call_orders) {
            var assets = [];
            call_orders.forEach(function (a) {
                var baseId = a.getIn(["call_price", "base", "asset_id"]);
                var quoteId = a.getIn(["call_price", "quote", "asset_id"]);
                if (assets.indexOf(baseId) === -1) assets.push(baseId);
                if (assets.indexOf(quoteId) === -1) assets.push(quoteId);
            });
            Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["FetchChain"])("getAsset", assets, 6000).then(function (assets) {
                var assetsMap = {};
                assets.forEach(function (asset) {
                    assetsMap[asset.get("id")] = asset.toJS();
                });
                var status = {};
                call_orders.forEach(function (co) {
                    var debtAsset = assetsMap[co.getIn(["call_price", "quote", "asset_id"])];
                    var collateralAsset = assetsMap[co.getIn(["call_price", "base", "asset_id"])];
                    var sp = debtAsset.bitasset.current_feed.settlement_price;
                    if (sp.base.asset_id === sp.quote.asset_id) {
                        status[debtAsset.id] = { ratio: null };
                    } else {
                        var collateral = new _MarketClasses__WEBPACK_IMPORTED_MODULE_1__["Asset"]({
                            amount: co.get("collateral"),
                            asset_id: collateralAsset.id,
                            precision: collateralAsset.precision
                        });
                        var debt = new _MarketClasses__WEBPACK_IMPORTED_MODULE_1__["Asset"]({
                            amount: co.get("debt"),
                            asset_id: debtAsset.id,
                            precision: debtAsset.precision
                        });
                        var mr = debtAsset.bitasset.current_feed.maintenance_collateral_ratio / 1000;
                        var price = new _MarketClasses__WEBPACK_IMPORTED_MODULE_1__["FeedPrice"]({
                            priceObject: debtAsset.bitasset.current_feed.settlement_price,
                            market_base: debtAsset.bitasset.current_feed.settlement_price.quote.asset_id,
                            sqr: debtAsset.bitasset.current_feed.maximum_short_squeeze_ratio,
                            assets: assetsMap
                        });
                        var current = {
                            ratio: collateral.getAmount({ real: true }) / (debt.getAmount({ real: true }) / price.toReal())
                        };
                        if (isNaN(current.ratio)) return null;
                        if (current.ratio < mr) {
                            current.statusClass = "danger";
                        } else if (current.ratio < mr + 0.5) {
                            current.statusClass = "warning";
                        } else {
                            current.statusClass = null;
                        }
                        status[debtAsset.id] = current;
                    }
                });
                asyncCache[key].queue.forEach(function (promise) {
                    promise.res(status);
                });
                asyncCache[key] = { result: status };
                setTimeout(function () {
                    delete asyncCache[key];
                }, checkMarginStatusTTL);
            });
        }).catch(function () {
            asyncCache[key].queue.forEach(function (promise) {
                promise.rej();
            });
        });
    });
}



/***/ }),

/***/ 2718:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_highcharts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2639);
/* harmony import */ var react_highcharts__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_highcharts__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2719);
/* harmony import */ var highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2720);
/* harmony import */ var highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(580);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1959);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(429);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1960);
/* harmony import */ var alt_container__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1946);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2352);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2353);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(722);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }














highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2___default()(react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts);
highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3___default()(react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts);

var AccountTreemap = function (_React$Component) {
    _inherits(AccountTreemap, _React$Component);

    function AccountTreemap() {
        _classCallCheck(this, AccountTreemap);

        return _possibleConstructorReturn(this, (AccountTreemap.__proto__ || Object.getPrototypeOf(AccountTreemap)).apply(this, arguments));
    }

    _createClass(AccountTreemap, [{
        key: "render",


        // shouldComponentUpdate(nextProps) {
        //     return (
        //         !utils.are_equal_shallow(nextProps.balanceObjects, this.props.balanceObjects) ||
        //         !utils.are_equal_shallow(nextProps.assets, this.props.assets)
        //     );
        // }

        value: function render() {
            var _props = this.props,
                balanceObjects = _props.balanceObjects,
                core_asset = _props.core_asset,
                marketStats = _props.marketStats,
                preferredAsset = _props.preferredAsset;


            var accountBalances = null;

            if (balanceObjects && balanceObjects.length > 0) {
                var totalValue = 0;
                accountBalances = balanceObjects.forEach(function (balance) {
                    if (!balance) return;
                    var balanceObject = typeof balance == "string" ? bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getObject(balance) : balance;
                    var asset_type = balanceObject.get("asset_type");
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(asset_type);
                    if (!asset || !preferredAsset) return;
                    var amount = Number(balanceObject.get("balance"));
                    var eqValue = common_market_utils__WEBPACK_IMPORTED_MODULE_9__["default"].convertValue(amount, preferredAsset, asset, marketStats, core_asset);

                    if (!eqValue) return;
                    var precision = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_precision(preferredAsset.get("precision"));
                    totalValue += eqValue / precision;
                });

                accountBalances = balanceObjects.map(function (balance, index) {
                    if (!balance) return null;
                    var balanceObject = typeof balance == "string" ? bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getObject(balance) : balance;
                    var asset_type = balanceObject.get("asset_type");
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(asset_type);
                    if (!asset) return null;
                    var amount = Number(balanceObject.get("balance"));

                    var eqValue = common_market_utils__WEBPACK_IMPORTED_MODULE_9__["default"].convertValue(amount, preferredAsset, asset, marketStats, core_asset);

                    if (!eqValue) {
                        return null;
                    }

                    var precision = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_precision(preferredAsset.get("precision"));
                    var finalValue = eqValue / precision;
                    var percent = finalValue / totalValue * 100;

                    /*
                    * Filter out assets that make up a small percentage of
                    * the total value of the account
                    */
                    if (percent < 0.5) return null;

                    return finalValue >= 1 ? {
                        name: asset.get("symbol") + " (" + (totalValue === 0 ? 0 : percent.toFixed(2)) + "%)",
                        value: finalValue,
                        color: react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts.getOptions().colors[index]
                    } : null;
                }).filter(function (n) {
                    return !!n;
                });
            }

            if (accountBalances && accountBalances.length === 1 && accountBalances[0].value === 0) {
                accountBalances = null;
            }

            var config = {
                chart: {
                    backgroundColor: "rgba(255, 0, 0, 0)",
                    height: 250,
                    spacingLeft: 0,
                    spacingRight: 0,
                    spacingBottom: 0
                },
                // colorAxis: {
                //     min: 0,
                //     minColor: "#ffffff",
                //     maxColor: ReactHighcharts.Highcharts.getOptions().colors[0]
                // },
                credits: {
                    enabled: false
                },
                legend: {
                    enabled: false
                },
                plotOptions: {
                    treemap: {
                        animation: false,
                        tooltip: {
                            pointFormatter: function pointFormatter() {
                                return "<b>" + this.name + "</b>: " + react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts.numberFormat(this.value, 0) + " " + preferredAsset.get("symbol");
                            }
                        }
                    }
                },
                series: [{
                    type: "treemap",
                    levels: [{
                        level: 1,
                        layoutAlgorithm: "sliceAndDice",
                        dataLabels: {
                            enabled: true,
                            align: "center",
                            verticalAlign: "middle"
                        }
                    }],
                    data: accountBalances
                }],
                title: {
                    text: null
                }
            };

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "account-treemap" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a, { config: config })
            );
        }
    }]);

    return AccountTreemap;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountTreemap.propTypes = {
    assets: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAssetsList,
    preferredAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAsset.isRequired
};
AccountTreemap.defaultProps = {
    assets: [],
    preferredAsset: "1.3.0"
};


AccountTreemap = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(AccountTreemap);

var AccountTreemapBalanceWrapper = function (_React$Component2) {
    _inherits(AccountTreemapBalanceWrapper, _React$Component2);

    function AccountTreemapBalanceWrapper() {
        _classCallCheck(this, AccountTreemapBalanceWrapper);

        return _possibleConstructorReturn(this, (AccountTreemapBalanceWrapper.__proto__ || Object.getPrototypeOf(AccountTreemapBalanceWrapper)).apply(this, arguments));
    }

    _createClass(AccountTreemapBalanceWrapper, [{
        key: "render",
        value: function render() {
            var assets = this.props.balanceObjects.filter(function (a) {
                return !!a;
            }).map(function (a) {
                return a.get("asset_type");
            });
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountTreemap, _extends({
                preferredAsset: this.props.settings.get("unit", "1.3.0"),
                assets: assets
            }, this.props));
        }
    }]);

    return AccountTreemapBalanceWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountTreemapBalanceWrapper.propTypes = {
    balanceObjects: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainObjectsList,
    core_asset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAsset.isRequired
};
AccountTreemapBalanceWrapper.defaultProps = {
    balanceObjects: [],
    core_asset: "1.3.0"
};


AccountTreemapBalanceWrapper = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(AccountTreemapBalanceWrapper);

var AccountTreemapWrapper = function (_React$Component3) {
    _inherits(AccountTreemapWrapper, _React$Component3);

    function AccountTreemapWrapper() {
        _classCallCheck(this, AccountTreemapWrapper);

        return _possibleConstructorReturn(this, (AccountTreemapWrapper.__proto__ || Object.getPrototypeOf(AccountTreemapWrapper)).apply(this, arguments));
    }

    _createClass(AccountTreemapWrapper, [{
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                alt_container__WEBPACK_IMPORTED_MODULE_8__["default"],
                {
                    stores: [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_11__["default"], stores_MarketsStore__WEBPACK_IMPORTED_MODULE_10__["default"]],
                    inject: {
                        marketStats: function marketStats() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_10__["default"].getState().allMarketStats;
                        },
                        settings: function settings() {
                            return stores_SettingsStore__WEBPACK_IMPORTED_MODULE_11__["default"].getState().settings;
                        }
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountTreemapBalanceWrapper, _extends({}, this.props, {
                    ref: this.props.refCallback
                }))
            );
        }
    }]);

    return AccountTreemapWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountTreemapWrapper);

/***/ }),

/***/ 2721:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_debounce_render__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2626);
/* harmony import */ var react_debounce_render__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_debounce_render__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2319);
/* harmony import */ var _Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2611);
/* harmony import */ var _Utility_MarketChangeComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2722);
/* harmony import */ var _Utility_AssetImage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2591);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2102);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1819);
/* harmony import */ var _Utility_EquivalentPrice__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2723);
/* harmony import */ var _Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2424);
/* harmony import */ var _Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2641);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2356);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var common_gatewayUtils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2338);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(429);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(1859);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(722);
/* harmony import */ var stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2335);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2353);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(1867);
/* harmony import */ var _Icon_PulseIcon__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2724);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(580);
/* harmony import */ var _Modal_SendModal__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(2078);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(723);
/* harmony import */ var _Modal_SettleModal__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(2725);
/* harmony import */ var _Modal_DepositModal__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(2320);
/* harmony import */ var _Dashboard_SimpleDepositWithdraw__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(2653);
/* harmony import */ var _Dashboard_SimpleDepositBlocktradesBridge__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(2654);
/* harmony import */ var _Modal_WithdrawModalNew__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(2369);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(730);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_29__);
/* harmony import */ var _Modal_ReserveAssetModal__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(2728);
/* harmony import */ var _Modal_BaseModal__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(1936);
/* harmony import */ var _Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(2670);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(2352);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }




































var AccountPortfolioList = function (_React$Component) {
    _inherits(AccountPortfolioList, _React$Component);

    function AccountPortfolioList() {
        _classCallCheck(this, AccountPortfolioList);

        var _this = _possibleConstructorReturn(this, (AccountPortfolioList.__proto__ || Object.getPrototypeOf(AccountPortfolioList)).call(this));

        _this.sortFunctions = {
            qty: function qty(a, b, force) {
                if (Number(this.qtyRefs[a.key]) < Number(this.qtyRefs[b.key])) return this.props.sortDirection || force ? -1 : 1;

                if (Number(this.qtyRefs[a.key]) > Number(this.qtyRefs[b.key])) return this.props.sortDirection || force ? 1 : -1;
            },
            alphabetic: function alphabetic(a, b, force) {
                if (a.key > b.key) return this.props.sortDirection || force ? 1 : -1;
                if (a.key < b.key) return this.props.sortDirection || force ? -1 : 1;
                return 0;
            },
            priceValue: function priceValue(a, b) {
                var aPrice = this.priceRefs[a.key];
                var bPrice = this.priceRefs[b.key];
                if (aPrice && bPrice) {
                    return this.props.sortDirection ? aPrice - bPrice : bPrice - aPrice;
                } else if (aPrice === null && bPrice !== null) {
                    return 1;
                } else if (aPrice !== null && bPrice === null) {
                    return -1;
                } else {
                    return this.sortFunctions.alphabetic(a, b, true);
                }
            },
            totalValue: function totalValue(a, b) {
                var aValue = this.valueRefs[a.key];
                var bValue = this.valueRefs[b.key];
                if (aValue && bValue) {
                    return this.props.sortDirection ? aValue - bValue : bValue - aValue;
                } else if (!aValue && bValue) {
                    return 1;
                } else if (aValue && !bValue) {
                    return -1;
                } else {
                    return this.sortFunctions.alphabetic(a, b, true);
                }
            },
            changeValue: function changeValue(a, b) {
                var aValue = this.changeRefs[a.key];
                var bValue = this.changeRefs[b.key];

                if (aValue && bValue) {
                    var aChange = parseFloat(aValue) != "NaN" ? parseFloat(aValue) : aValue;
                    var bChange = parseFloat(bValue) != "NaN" ? parseFloat(bValue) : bValue;
                    var direction = typeof this.props.sortDirection !== "undefined" ? this.props.sortDirection : true;

                    return direction ? aChange - bChange : bChange - aChange;
                }
            }
        };

        _this._renderBuy = function (symbol, canBuy, assetName, emptyCell, balance) {
            if (symbol === "BTS" && balance <= 100000) {
                // Precision of 5, 1 = 10^5
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            onClick: _this._showDepositWithdraw.bind(_this, "bridge_modal", assetName, false)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_PulseIcon__WEBPACK_IMPORTED_MODULE_20__["default"], {
                            onIcon: "dollar",
                            offIcon: "dollar-green",
                            title: "icons.dollar.buy",
                            duration: 1000,
                            className: "icon-14px"
                        })
                    )
                );
            } else {
                return canBuy && _this.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            onClick: _this._showDepositWithdraw.bind(_this, "bridge_modal", assetName, false)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                            name: "dollar",
                            title: "icons.dollar.buy",
                            className: "icon-14px"
                        })
                    )
                ) : emptyCell;
            }
        };

        _this.state = {
            isBridgeModalVisible: false,
            isSettleModalVisible: false,
            isBorrowModalVisible: false,
            isDepositModalVisible: false,
            isWithdrawModalVisible: false,
            isBurnModalVisible: false,
            borrow: null,
            settleAsset: "1.3.0",
            depositAsset: null,
            withdrawAsset: null,
            bridgeAsset: null,
            allRefsAssigned: false
        };

        _this.qtyRefs = {};
        _this.priceRefs = {};
        _this.valueRefs = {};
        _this.changeRefs = {};
        for (var key in _this.sortFunctions) {
            _this.sortFunctions[key] = _this.sortFunctions[key].bind(_this);
        }
        _this._checkRefAssignments = _this._checkRefAssignments.bind(_this);

        _this.showSettleModal = _this.showSettleModal.bind(_this);
        _this.hideSettleModal = _this.hideSettleModal.bind(_this);

        _this.showDepositModal = _this.showDepositModal.bind(_this);
        _this.hideDepositModal = _this.hideDepositModal.bind(_this);

        _this.showWithdrawModal = _this.showWithdrawModal.bind(_this);
        _this.hideWithdrawModal = _this.hideWithdrawModal.bind(_this);

        _this.showBorrowModal = _this.showBorrowModal.bind(_this);
        _this.hideBorrowModal = _this.hideBorrowModal.bind(_this);

        _this.showBurnModal = _this.showBurnModal.bind(_this);
        _this.hideBurnModal = _this.hideBurnModal.bind(_this);

        _this.showBridgeModal = _this.showBridgeModal.bind(_this);
        _this.hideBridgeModal = _this.hideBridgeModal.bind(_this);
        return _this;
    }

    _createClass(AccountPortfolioList, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this.refCheckInterval = setInterval(this._checkRefAssignments);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            clearInterval(this.refCheckInterval);
        }
    }, {
        key: "_checkRefAssignments",
        value: function _checkRefAssignments() {
            var _this2 = this;

            /*
            * In order for sorting to work all refs must be assigned, so we check
            * this here and update the state to trigger a rerender
            */
            if (!this.state.allRefsAssigned) {
                var refKeys = ["qtyRefs", "priceRefs", "valueRefs", "changeRefs"];
                var allRefsAssigned = refKeys.reduce(function (a, b) {
                    if (a === undefined) return !!Object.keys(_this2[b]).length;
                    return !!Object.keys(_this2[b]).length && a;
                }, undefined);
                if (allRefsAssigned) {
                    clearInterval(this.refCheckInterval);
                    this.setState({ allRefsAssigned: allRefsAssigned });
                }
            }
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, ns) {
            var _this3 = this;

            return !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(ns, this.state) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.backedCoins, this.props.backedCoins) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.balances, this.props.balances) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.balanceList, this.props.balanceList) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.optionalAssets, this.props.optionalAssets) || np.account !== this.props.account || np.visible !== this.props.visible || np.settings !== this.props.settings || np.hiddenAssets !== this.props.hiddenAssets || np.sortDirection !== this.props.sortDirection || np.sortKey !== this.props.sortKey || np.allMarketStats.reduce(function (a, value, key) {
                return common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].check_market_stats(value, _this3.props.allMarketStats.get(key)) || a;
            }, false);
        }
    }, {
        key: "showBridgeModal",
        value: function showBridgeModal() {
            this.setState({
                isBridgeModalVisible: true
            });
        }
    }, {
        key: "hideBridgeModal",
        value: function hideBridgeModal() {
            this.setState({
                isBridgeModalVisible: false
            });
        }
    }, {
        key: "showWithdrawModal",
        value: function showWithdrawModal() {
            this.setState({
                isWithdrawModalVisible: true
            });
        }
    }, {
        key: "hideWithdrawModal",
        value: function hideWithdrawModal() {
            this.setState({
                isWithdrawModalVisible: false
            });
        }
    }, {
        key: "showBurnModal",
        value: function showBurnModal() {
            this.setState({
                isBurnModalVisible: true
            });
        }
    }, {
        key: "hideBurnModal",
        value: function hideBurnModal() {
            this.setState({
                isBurnModalVisible: false
            });
        }
    }, {
        key: "showSettleModal",
        value: function showSettleModal() {
            this.setState({
                isSettleModalVisible: true
            });
        }
    }, {
        key: "hideSettleModal",
        value: function hideSettleModal() {
            this.setState({
                isSettleModalVisible: false
            });
        }
    }, {
        key: "showDepositModal",
        value: function showDepositModal() {
            this.setState({
                isDepositModalVisible: true
            });
        }
    }, {
        key: "hideDepositModal",
        value: function hideDepositModal() {
            this.setState({
                isDepositModalVisible: false
            });
        }
    }, {
        key: "showBorrowModal",
        value: function showBorrowModal(quoteAsset, backingAsset, account) {
            this.setState({
                isBorrowModalVisible: true,
                borrow: {
                    quoteAsset: quoteAsset,
                    backingAsset: backingAsset,
                    account: account
                }
            });
        }
    }, {
        key: "hideBorrowModal",
        value: function hideBorrowModal() {
            this.setState({
                borrow: null,
                isBorrowModalVisible: false
            });
        }
    }, {
        key: "triggerSend",
        value: function triggerSend(asset) {
            var _this4 = this;

            this.setState({ send_asset: asset }, function () {
                if (_this4.send_modal) _this4.send_modal.show();
            });
        }
    }, {
        key: "_onSettleAsset",
        value: function _onSettleAsset(id, e) {
            e.preventDefault();
            this.setState({
                settleAsset: id
            });

            this.showSettleModal();
        }
    }, {
        key: "_hideAsset",
        value: function _hideAsset(asset, status) {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_23__["default"].hideAsset(asset, status);
        }
    }, {
        key: "_burnAsset",
        value: function _burnAsset(asset, e) {
            e.preventDefault();
            this.setState({ reserve: asset });
            this.showBurnModal();
        }
    }, {
        key: "_showDepositModal",
        value: function _showDepositModal(asset, e) {
            var _this5 = this;

            e.preventDefault();
            this.setState({ depositAsset: asset }, function () {
                _this5.showDepositModal();
            });
        }
    }, {
        key: "_showDepositWithdraw",
        value: function _showDepositWithdraw(action, asset, fiatModal, e) {
            var _setState,
                _this6 = this;

            e.preventDefault();
            this.setState((_setState = {}, _defineProperty(_setState, action === "bridge_modal" ? "bridgeAsset" : action === "deposit_modal" ? "depositAsset" : "withdrawAsset", asset), _defineProperty(_setState, "fiatModal", fiatModal), _setState), function () {
                if (action === "bridge_modal") {
                    _this6.showBridgeModal();
                    return true;
                }

                if (action === "deposit_modal") {
                    _this6.showDepositModal();
                    return true;
                }

                _this6.showWithdrawModal();
            });
        }
    }, {
        key: "_getSeparator",
        value: function _getSeparator(render) {
            return render ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                "\xA0|\xA0"
            ) : null;
        }
    }, {
        key: "_renderBalances",
        value: function _renderBalances(balanceList, optionalAssets, visible) {
            var _this7 = this;

            var _props = this.props,
                coreSymbol = _props.coreSymbol,
                preferredUnit = _props.preferredUnit,
                settings = _props.settings,
                hiddenAssets = _props.hiddenAssets,
                orders = _props.orders;

            var showAssetPercent = settings.get("showAssetPercent", false);

            var renderBorrow = function renderBorrow(asset, account) {
                var isBitAsset = asset && asset.has("bitasset_data_id");
                var modalRef = "cp_modal_" + asset.get("id");
                return {
                    isBitAsset: isBitAsset,
                    borrowModal: !isBitAsset ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_11__["default"], {
                        ref: modalRef,
                        modalId: "borrow_modal_" + asset.get("id"),
                        quote_asset: asset.get("id"),
                        backing_asset: asset.getIn(["bitasset", "options", "short_backing_asset"]),
                        account: account
                    }),
                    borrowLink: !isBitAsset ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            onClick: function onClick() {
                                react_tooltip__WEBPACK_IMPORTED_MODULE_12___default.a.hide();
                                _this7.showBorrowModal(asset.get("id"), asset.getIn(["bitasset", "options", "short_backing_asset"]), account);
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                            name: "dollar",
                            title: "icons.dollar.borrow",
                            className: "icon-14px"
                        })
                    )
                };
            };

            var balances = [];
            var emptyCell = "-";
            balanceList.forEach(function (balance) {
                var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getObject(balance);
                if (!balanceObject) return;
                var asset_type = balanceObject.get("asset_type");
                var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getObject(asset_type);
                if (!asset) return;

                var directMarketLink = void 0,
                    settleLink = void 0,
                    transferLink = void 0;
                var symbol = "";

                var assetName = asset.get("symbol");
                var notCore = asset.get("id") !== "1.3.0";
                var notCorePrefUnit = preferredUnit !== coreSymbol;

                var _assetUtils$parseDesc = common_asset_utils__WEBPACK_IMPORTED_MODULE_6__["default"].parseDescription(asset.getIn(["options", "description"])),
                    market = _assetUtils$parseDesc.market;

                symbol = asset.get("symbol");
                if (symbol.indexOf("OPEN.") !== -1 && !market) market = "USD";
                if (["RUDEX.GOLOS", "RUDEX.GBG"].indexOf(symbol) !== -1) market = "RUBLE";
                // let preferredMarket = market ? market : preferredUnit;
                var preferredMarket = market ? market : coreSymbol;

                /* Table content */
                directMarketLink = notCore ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                    { to: "/market/" + asset.get("symbol") + "_" + preferredMarket },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "trade",
                        title: "icons.trade.trade",
                        className: "icon-14px"
                    })
                ) : notCorePrefUnit ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                    { to: "/market/" + asset.get("symbol") + "_" + preferredUnit },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "trade",
                        title: "icons.trade.trade",
                        className: "icon-14px"
                    })
                ) : emptyCell;
                transferLink = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                    { to: "/transfer?asset=" + asset.get("id") },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "transfer",
                        title: "icons.transfer",
                        className: "icon-14px"
                    })
                );

                var _renderBorrow = renderBorrow(asset, _this7.props.account),
                    isBitAsset = _renderBorrow.isBitAsset,
                    borrowModal = _renderBorrow.borrowModal,
                    borrowLink = _renderBorrow.borrowLink;

                /* Popover content */


                settleLink = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "a",
                    { onClick: _this7._onSettleAsset.bind(_this7, asset.get("id")) },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "settle",
                        title: "icons.settle",
                        className: "icon-14px"
                    })
                );

                var includeAsset = !hiddenAssets.includes(asset_type);
                var hasBalance = !!balanceObject.get("balance");
                var hasOnOrder = !!orders[asset_type];

                var backedCoin = Object(common_gatewayUtils__WEBPACK_IMPORTED_MODULE_13__["getBackedCoin"])(asset.get("symbol"), _this7.props.backedCoins);
                // const canDeposit =
                //     (backedCoin && backedCoin.depositAllowed) ||
                //     asset.get("symbol") == "BTS";
                var canDeposit = false; // disable till stable version

                // const canWithdraw =
                //     backedCoin &&
                //     backedCoin.withdrawalAllowed &&
                //     (hasBalance && balanceObject.get("balance") != 0);
                var canWithdraw = false; // disable till stable version

                var canBuy = !!_this7.props.bridgeCoins.get(symbol);
                var assetAmount = balanceObject.get("balance");

                /* Sorting refs */
                _this7.qtyRefs[asset.get("symbol")] = common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].get_asset_amount(assetAmount, asset);

                {
                    /* Asset and Backing Asset Prefixes */
                }
                var options = asset && asset.getIn(["bitasset", "options"]) ? asset.getIn(["bitasset", "options"]).toJS() : null;
                var backingAsset = options && options.short_backing_asset ? bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getAsset(options.short_backing_asset) : null;

                var _utils$replaceName = common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].replaceName(asset),
                    isAssetBitAsset = _utils$replaceName.isBitAsset;

                var _utils$replaceName2 = common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].replaceName(backingAsset),
                    isBackingBitAsset = _utils$replaceName2.isBitAsset;

                var preferredAsset = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getAsset(preferredUnit);
                _this7.valueRefs[asset.get("symbol")] = hasBalance && !!preferredAsset ? common_market_utils__WEBPACK_IMPORTED_MODULE_33__["default"].convertValue(assetAmount, preferredAsset, asset, _this7.props.allMarketStats, _this7.props.coreAsset, true) : null;

                _this7.priceRefs[asset.get("symbol")] = !preferredAsset ? null : common_market_utils__WEBPACK_IMPORTED_MODULE_33__["default"].getFinalPrice(_this7.props.coreAsset, asset, preferredAsset, _this7.props.allMarketStats, true);

                var marketId = asset.get("symbol") + "_" + preferredUnit;
                var currentMarketStats = _this7.props.allMarketStats.get(marketId);
                _this7.changeRefs[asset.get("symbol")] = currentMarketStats && currentMarketStats.change ? currentMarketStats.change : 0;

                balances.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: asset.get("symbol"), style: { maxWidth: "100rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { style: { textAlign: "left" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetImage__WEBPACK_IMPORTED_MODULE_5__["default"], {
                            replaceNoneToBts: false,
                            maxWidth: 30,
                            name: asset.get("symbol")
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_10__["default"], { asset: asset.get("id") })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { style: { textAlign: "right" } },
                        hasBalance || hasOnOrder ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__["default"], { balance: balance, hide_asset: true }) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "right" },
                            className: "column-hide-small"
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentPrice__WEBPACK_IMPORTED_MODULE_9__["default"], {
                            fromAsset: asset.get("id"),
                            pulsate: { reverse: true, fill: "forwards" },
                            hide_symbols: true
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "right" },
                            className: "column-hide-small"
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_MarketChangeComponent__WEBPACK_IMPORTED_MODULE_4__["Market24HourChangeComponent"], {
                            base: asset.get("id"),
                            quote: preferredUnit,
                            marketId: marketId,
                            hide_symbols: true
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "right" },
                            className: "column-hide-small"
                        },
                        hasBalance || hasOnOrder ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_3__["BalanceValueComponent"], {
                            balance: balance,
                            toAsset: preferredUnit,
                            hide_asset: true
                        }) : null
                    ),
                    showAssetPercent ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { style: { textAlign: "right" } },
                        hasBalance ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__["default"], {
                            balance: balance,
                            asPercentage: true
                        }) : null
                    ) : null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        transferLink
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        _this7._renderBuy(asset.get("symbol"), canBuy, assetName, emptyCell, balanceObject.get("balance"))
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        canDeposit && _this7.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                style: { cursor: "pointer" },
                                name: "deposit",
                                title: "icons.deposit.deposit",
                                className: "icon-14x",
                                onClick: _this7._showDepositModal.bind(_this7, assetName)
                            })
                        ) : emptyCell
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        canWithdraw && _this7.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "a",
                                {
                                    className: !canWithdraw ? "disabled" : "",
                                    onClick: canWithdraw ? _this7._showDepositWithdraw.bind(_this7, "withdraw_modal_new", assetName, false) : function () {}
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                    name: "withdraw",
                                    title: "icons.withdraw",
                                    className: "icon-14px"
                                })
                            )
                        ) : emptyCell
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        directMarketLink
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                className: "inline-block",
                                "data-place": "bottom",
                                "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.borrow", { asset: symbol })
                            },
                            borrowLink
                        ) : emptyCell
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        isBitAsset && backingAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                className: "inline-block",
                                "data-place": "bottom",
                                "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.settle", {
                                    asset: isAssetBitAsset ? "bit" + symbol : symbol,
                                    backingAsset: isBackingBitAsset ? "bit" + backingAsset.get("symbol") : backingAsset.get("symbol"),
                                    settleDelay: options.force_settlement_delay_sec / 3600
                                })
                            },
                            settleLink
                        ) : emptyCell
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "center" },
                            className: "column-hide-small"
                        },
                        !isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            {
                                style: { marginRight: 0 },
                                onClick: _this7._burnAsset.bind(_this7, asset.get("id"))
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], { name: "fire", className: "icon-14px" })
                        ) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { textAlign: "center" },
                            className: "column-hide-small",
                            "data-place": "bottom",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip." + (includeAsset ? "hide_asset" : "show_asset"))
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            {
                                style: { marginRight: 0 },
                                className: includeAsset ? "order-cancel" : "action-plus",
                                onClick: _this7._hideAsset.bind(_this7, asset_type, includeAsset)
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                name: includeAsset ? "cross-circle" : "plus-circle",
                                title: includeAsset ? "icons.cross_circle.hide_asset" : "icons.plus_circle.show_asset",
                                className: "icon-14px"
                            })
                        )
                    )
                ));
            });

            if (optionalAssets) {
                optionalAssets.filter(function (asset) {
                    var isAvailable = false;
                    _this7.props.backedCoins.get("OPEN", []).forEach(function (coin) {
                        if (coin && coin.symbol === asset) {
                            isAvailable = true;
                        }
                    });
                    if (!!_this7.props.bridgeCoins.get(asset)) {
                        isAvailable = true;
                    }
                    var keep = true;
                    balances.forEach(function (a) {
                        if (a.key === asset) keep = false;
                    });
                    return keep && isAvailable;
                }).forEach(function (a) {
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getAsset(a);
                    if (asset && _this7.props.isMyAccount) {
                        var includeAsset = !hiddenAssets.includes(asset.get("id"));

                        var thisAssetName = asset.get("symbol").split(".");
                        var canDeposit = !!_this7.props.backedCoins.get("OPEN", []).find(function (a) {
                            return a.backingCoinType === thisAssetName[1];
                        }) || !!_this7.props.backedCoins.get("RUDEX", []).find(function (a) {
                            return a.backingCoin === thisAssetName[1];
                        }) || asset.get("symbol") == "BTS";

                        var canBuy = !!_this7.props.bridgeCoins.get(asset.get("symbol"));

                        var notCore = asset.get("id") !== "1.3.0";

                        var _assetUtils$parseDesc2 = common_asset_utils__WEBPACK_IMPORTED_MODULE_6__["default"].parseDescription(asset.getIn(["options", "description"])),
                            market = _assetUtils$parseDesc2.market;

                        if (asset.get("symbol").indexOf("OPEN.") !== -1 && !market) market = "USD";
                        var preferredMarket = market ? market : coreSymbol;

                        var directMarketLink = notCore ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                            {
                                to: "/market/" + asset.get("symbol") + "_" + preferredMarket
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                name: "trade",
                                title: "icons.trade.trade",
                                className: "icon-14px"
                            })
                        ) : emptyCell;

                        var _renderBorrow2 = renderBorrow(asset, _this7.props.account),
                            isBitAsset = _renderBorrow2.isBitAsset,
                            borrowLink = _renderBorrow2.borrowLink;

                        if (includeAsset && visible || !includeAsset && !visible) balances.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            {
                                key: asset.get("symbol"),
                                style: { maxWidth: "100rem" }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { textAlign: "left" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetImage__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                    replaceNoneToBts: false,
                                    maxWidth: 30,
                                    name: asset.get("symbol")
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                    asset: asset.get("id")
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "column-hide-small" },
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "column-hide-small" },
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "column-hide-small" },
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { textAlign: "center" } },
                                canBuy && _this7.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "span",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "a",
                                        {
                                            onClick: _this7._showDepositWithdraw.bind(_this7, "bridge_modal", a, false)
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                            name: "dollar",
                                            title: "icons.dollar.buy",
                                            className: "icon-14px"
                                        })
                                    )
                                ) : emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                canDeposit && _this7.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "span",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                        style: { cursor: "pointer" },
                                        name: "deposit",
                                        title: "icons.deposit.deposit",
                                        className: "icon-14x",
                                        onClick: _this7._showDepositModal.bind(_this7, asset.get("symbol"))
                                    })
                                ) : emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { textAlign: "center" } },
                                directMarketLink
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "inline-block",
                                        "data-place": "bottom",
                                        "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.borrow", { asset: asset.get("symbol") })
                                    },
                                    borrowLink
                                ) : emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                emptyCell
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                {
                                    style: { textAlign: "center" },
                                    className: "column-hide-small",
                                    "data-place": "bottom",
                                    "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip." + (includeAsset ? "hide_asset" : "show_asset"))
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "a",
                                    {
                                        style: { marginRight: 0 },
                                        className: includeAsset ? "order-cancel" : "action-plus",
                                        onClick: _this7._hideAsset.bind(_this7, asset.get("id"), includeAsset)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                        name: includeAsset ? "cross-circle" : "plus-circle",
                                        title: includeAsset ? "icons.cross_circle.hide_asset" : "icons.plus_circle.show_asset",
                                        className: "icon-14px"
                                    })
                                )
                            )
                        ));
                    }
                });
            }

            balances.sort(this.sortFunctions[this.props.sortKey]);
            return balances;
        }
    }, {
        key: "_renderSendModal",
        value: function _renderSendModal() {
            var _this8 = this;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_SendModal__WEBPACK_IMPORTED_MODULE_22__["default"], {
                id: "send_modal_portfolio",
                refCallback: function refCallback(e) {
                    if (e) _this8.send_modal = e;
                },
                from_name: this.props.account.get("name"),
                asset_id: this.state.send_asset || "1.3.0"
            });
        }
    }, {
        key: "_renderBorrowModal",
        value: function _renderBorrowModal() {
            if (!this.state.borrow || !this.state.borrow.quoteAsset || !this.state.borrow.backingAsset || !this.state.borrow.account) {
                return null;
            }

            console.log("render borrow modal");

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_11__["default"], {
                visible: this.state.isBorrowModalVisible,
                showModal: this.showBorrowModal,
                hideModal: this.hideBorrowModal,
                account: this.state.borrow && this.state.borrow.account,
                quote_asset: this.state.borrow && this.state.borrow.quoteAsset,
                backing_asset: this.state.borrow && this.state.borrow.backingAsset
            });
        }
    }, {
        key: "_renderSettleModal",
        value: function _renderSettleModal() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_SettleModal__WEBPACK_IMPORTED_MODULE_24__["default"], {
                visible: this.state.isSettleModalVisible,
                hideModal: this.hideSettleModal,
                showModal: this.showSettleModal,
                asset: this.state.settleAsset,
                account: this.props.account.get("name")
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this9 = this;

            var currentWithdrawAsset = this.props.backedCoins.get("OPEN", []).find(function (c) {
                return c.symbol === _this9.state.withdrawAsset;
            }) || {};
            var currentBridges = this.props.bridgeCoins.get(this.state.bridgeAsset) || null;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    _Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_32__["default"],
                    {
                        style: { padding: 0 },
                        className: "table dashboard-table table-hover",
                        rows: this._renderBalances(this.props.balanceList, this.props.optionalAssets, this.props.visible),
                        header: this.props.header,
                        pageSize: 20,
                        label: "utility.total_x_assets",
                        extraRow: this.props.extraRow,
                        leftPadding: "1.5rem"
                    },
                    this._renderSendModal(),
                    this._renderSettleModal(),
                    this._renderBorrowModal(),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_WithdrawModalNew__WEBPACK_IMPORTED_MODULE_28__["default"], {
                        hideModal: this.hideWithdrawModal,
                        visible: this.state.isWithdrawModalVisible,
                        backedCoins: this.props.backedCoins,
                        initialSymbol: this.state.withdrawAsset
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_DepositModal__WEBPACK_IMPORTED_MODULE_25__["default"], {
                        visible: this.state.isDepositModalVisible,
                        showModal: this.showDepositModal,
                        hideModal: this.hideDepositModal,
                        asset: this.state.depositAsset,
                        account: this.props.account.get("name"),
                        backedCoins: this.props.backedCoins
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Dashboard_SimpleDepositBlocktradesBridge__WEBPACK_IMPORTED_MODULE_27__["default"], {
                        visible: this.state.isBridgeModalVisible,
                        showModal: this.showBridgeModal,
                        hideModal: this.hideBridgeModal,
                        action: "deposit",
                        account: this.props.account.get("name"),
                        sender: this.props.account.get("id"),
                        asset: this.state.bridgeAsset,
                        balances: this.props.balances,
                        bridges: currentBridges,
                        isDown: this.props.gatewayDown.get("TRADE")
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_ReserveAssetModal__WEBPACK_IMPORTED_MODULE_30__["default"], {
                        visible: this.state.isBurnModalVisible,
                        hideModal: this.hideBurnModal,
                        asset: this.state.reserve,
                        account: this.props.account,
                        onClose: function onClose() {
                            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_29___default.a.publish("reserve_asset", "close");
                        }
                    })
                )
            );
        }
    }]);

    return AccountPortfolioList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPortfolioList = Object(alt_react__WEBPACK_IMPORTED_MODULE_15__["connect"])(AccountPortfolioList, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"], stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"], stores_MarketsStore__WEBPACK_IMPORTED_MODULE_18__["default"]];
    },
    getProps: function getProps() {
        return {
            settings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"].getState().settings,
            viewSettings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"].getState().viewSettings,
            backedCoins: stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"].getState().backedCoins,
            bridgeCoins: stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"].getState().bridgeCoins,
            gatewayDown: stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"].getState().down,
            allMarketStats: stores_MarketsStore__WEBPACK_IMPORTED_MODULE_18__["default"].getState().allMarketStats
        };
    }
});

AccountPortfolioList = react_debounce_render__WEBPACK_IMPORTED_MODULE_1___default()(AccountPortfolioList, 50, {
    leading: false
});

/* harmony default export */ __webpack_exports__["default"] = (AccountPortfolioList);

/***/ }),

/***/ 2722:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Market24HourChangeComponent", function() { return Market24HourChangeComponent; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2086);
/* harmony import */ var _AssetWrapper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2304);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1859);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2353);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2356);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Utility_MarketPrice__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2612);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }









/**
 *  Displays change in market value for an asset
 *
 *  Expects three properties
 *  -'quote' which should be a asset id
 *  -'base' which is the asset id of the original asset amount
 */

var MarketChangeComponent = function (_MarketStats) {
    _inherits(MarketChangeComponent, _MarketStats);

    function MarketChangeComponent(props) {
        _classCallCheck(this, MarketChangeComponent);

        return _possibleConstructorReturn(this, (MarketChangeComponent.__proto__ || Object.getPrototypeOf(MarketChangeComponent)).call(this, props));
    }

    _createClass(MarketChangeComponent, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            react_tooltip__WEBPACK_IMPORTED_MODULE_5___default.a.rebuild();
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np) {
            return _get(MarketChangeComponent.prototype.__proto__ || Object.getPrototypeOf(MarketChangeComponent.prototype), "shouldComponentUpdate", this).call(this, np) || np.base !== this.props.base;
        }
    }, {
        key: "getValue",
        value: function getValue() {
            var marketStats = this.props.marketStats;

            return marketStats && marketStats.change ? marketStats.change : 0;
        }
    }, {
        key: "render",
        value: function render() {
            var marketChangeValue = this.getValue();
            var dayChangeClass = parseFloat(marketChangeValue) === 0 ? "" : parseFloat(marketChangeValue) < 0 ? "change-down" : "change-up";
            var marketChangeFormattedValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_1__["FormattedNumber"], {
                style: "decimal",
                value: marketChangeValue,
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                { className: "value " + dayChangeClass },
                marketChangeFormattedValue,
                "%"
            );
        }
    }]);

    return MarketChangeComponent;
}(_Utility_MarketPrice__WEBPACK_IMPORTED_MODULE_6__["MarketStats"]);

MarketChangeComponent.defaultProps = {
    fullPrecision: false,
    noDecimals: false,
    hide_asset: false
};

MarketChangeComponent = Object(_AssetWrapper__WEBPACK_IMPORTED_MODULE_2__["default"])(MarketChangeComponent, {
    propNames: ["quote", "base"],
    defaultProps: { quote: "1.3.0" }
});

var Market24HourChangeComponent = function (_React$Component) {
    _inherits(Market24HourChangeComponent, _React$Component);

    function Market24HourChangeComponent() {
        _classCallCheck(this, Market24HourChangeComponent);

        return _possibleConstructorReturn(this, (Market24HourChangeComponent.__proto__ || Object.getPrototypeOf(Market24HourChangeComponent)).apply(this, arguments));
    }

    _createClass(Market24HourChangeComponent, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                refCallback = _props.refCallback,
                others = _objectWithoutProperties(_props, ["refCallback"]);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarketChangeComponent, _extends({}, others, { ref: refCallback }));
        }
    }]);

    return Market24HourChangeComponent;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

Market24HourChangeComponent = Object(alt_react__WEBPACK_IMPORTED_MODULE_3__["connect"])(Market24HourChangeComponent, {
    listenTo: function listenTo() {
        return [stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__["default"]];
    },
    getProps: function getProps(props) {
        return {
            marketStats: stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().allMarketStats.get(props.marketId),
            allMarketStats: stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().allMarketStats
        };
    }
});



/***/ }),

/***/ 2723:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(580);
/* harmony import */ var alt_container__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1946);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(722);
/* harmony import */ var _FormattedPrice__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2425);
/* harmony import */ var _MarketStatsCheck__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2355);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2353);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2352);
/* harmony import */ var _AssetWrapper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2304);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var EquivalentPrice = function (_MarketStatsCheck) {
    _inherits(EquivalentPrice, _MarketStatsCheck);

    function EquivalentPrice() {
        _classCallCheck(this, EquivalentPrice);

        return _possibleConstructorReturn(this, (EquivalentPrice.__proto__ || Object.getPrototypeOf(EquivalentPrice)).apply(this, arguments));
    }

    _createClass(EquivalentPrice, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, nextState) {
            return _get(EquivalentPrice.prototype.__proto__ || Object.getPrototypeOf(EquivalentPrice.prototype), "shouldComponentUpdate", this).call(this, np) || np.base_amount !== this.props.base_amount || np.quote_amount !== this.props.quote_amount || np.decimals !== this.props.decimals || !common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].are_equal_shallow(np.pulsate, this.props.pulsate) || !common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].are_equal_shallow(nextState, this.state);
        }
    }, {
        key: "getFinalPrice",
        value: function getFinalPrice() {
            var real = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
            var _props = this.props,
                coreAsset = _props.coreAsset,
                fromAsset = _props.fromAsset,
                toAsset = _props.toAsset,
                allMarketStats = _props.allMarketStats;

            return common_market_utils__WEBPACK_IMPORTED_MODULE_7__["default"].getFinalPrice(coreAsset, fromAsset, toAsset, allMarketStats, real);
        }
    }, {
        key: "render",
        value: function render() {
            var _props2 = this.props,
                toAsset = _props2.toAsset,
                forceDirection = _props2.forceDirection,
                others = _objectWithoutProperties(_props2, ["toAsset", "forceDirection"]);

            var finalPrice = this.getFinalPrice();

            if (finalPrice === 1) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    "1.00"
                );
            }

            if (!finalPrice) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                "--"
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FormattedPrice__WEBPACK_IMPORTED_MODULE_4__["default"], _extends({
                force_direction: forceDirection ? toAsset.get("symbol") : false,
                base_amount: finalPrice.base.amount,
                base_asset: finalPrice.base.asset_id,
                quote_amount: finalPrice.quote.amount,
                quote_asset: finalPrice.quote.asset_id
            }, others));
        }
    }]);

    return EquivalentPrice;
}(_MarketStatsCheck__WEBPACK_IMPORTED_MODULE_5__["default"]);

EquivalentPrice.defaultProps = {
    forceDirection: true
};


EquivalentPrice = Object(_AssetWrapper__WEBPACK_IMPORTED_MODULE_8__["default"])(EquivalentPrice, {
    propNames: ["toAsset", "fromAsset", "coreAsset"],
    defaultProps: {
        toAsset: "1.3.0",
        coreAsset: "1.3.0"
    }
});

var EquivalentPriceWrapper = function (_React$Component) {
    _inherits(EquivalentPriceWrapper, _React$Component);

    function EquivalentPriceWrapper() {
        _classCallCheck(this, EquivalentPriceWrapper);

        return _possibleConstructorReturn(this, (EquivalentPriceWrapper.__proto__ || Object.getPrototypeOf(EquivalentPriceWrapper)).apply(this, arguments));
    }

    _createClass(EquivalentPriceWrapper, [{
        key: "render",
        value: function render() {
            var _this3 = this;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                alt_container__WEBPACK_IMPORTED_MODULE_2__["default"],
                {
                    stores: [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"], stores_MarketsStore__WEBPACK_IMPORTED_MODULE_6__["default"]],
                    inject: {
                        toAsset: function toAsset() {
                            return _this3.props.toAsset || stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().settings.get("unit", "1.3.0");
                        },
                        allMarketStats: function allMarketStats() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().allMarketStats;
                        }
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EquivalentPrice, _extends({}, this.props, { ref: this.props.refCallback }))
            );
        }
    }]);

    return EquivalentPriceWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (EquivalentPriceWrapper);

/***/ }),

/***/ 2724:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(823);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1867);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






var PulseIcon = function (_Component) {
    _inherits(PulseIcon, _Component);

    function PulseIcon() {
        var _ref;

        var _temp, _this, _ret;

        _classCallCheck(this, PulseIcon);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = PulseIcon.__proto__ || Object.getPrototypeOf(PulseIcon)).call.apply(_ref, [this].concat(args))), _this), _this.tick = function () {
            var _this$props = _this.props,
                onIcon = _this$props.onIcon,
                offIcon = _this$props.offIcon;

            var _ref2 = _this.state || {},
                _ref2$name = _ref2.name,
                name = _ref2$name === undefined ? onIcon : _ref2$name;

            _this.setState({
                name: name === onIcon ? offIcon : onIcon
            });
        }, _temp), _possibleConstructorReturn(_this, _ret);
    }

    _createClass(PulseIcon, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var duration = this.props.duration;

            this.interval = setInterval(this.tick, duration);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            this.interval && clearInterval(this.interval);
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                onIcon = _props.onIcon,
                rest = _props.rest;

            var _ref3 = this.state || {},
                _ref3$name = _ref3.name,
                name = _ref3$name === undefined ? onIcon : _ref3$name;

            var title = this.props.title;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({ name: name, title: title }, rest));
        }
    }]);

    return PulseIcon;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

PulseIcon.propTypes = {
    duration: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.number.isRequired,
    offIcon: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,
    onIcon: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,
    title: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired
};
/* harmony default export */ __webpack_exports__["default"] = (PulseIcon);

/***/ }),

/***/ 2725:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(730);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _BaseModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1936);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1865);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1959);
/* harmony import */ var _Utility_MarketLink__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2726);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1960);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(580);
/* harmony import */ var _Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2319);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(599);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(602);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(429);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2084);
/* harmony import */ var _Utility_withWorthLessSettlementFlag__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2727);
/* harmony import */ var _Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2429);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(733);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_16__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }



















var WorthLessSettlementWarning = Object(_Utility_withWorthLessSettlementFlag__WEBPACK_IMPORTED_MODULE_14__["default"])(function (_ref) {
    var worthLessSettlement = _ref.worthLessSettlement,
        asset = _ref.asset,
        shortBackingAsset = _ref.shortBackingAsset;

    switch (worthLessSettlement) {
        case true:
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_15__["default"], {
                string: "exchange.worth_less_settlement_warning",
                keys: [{
                    value: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_MarketLink__WEBPACK_IMPORTED_MODULE_5__["default"], {
                        base: asset.get("id"),
                        quote: shortBackingAsset.get("id")
                    }),
                    arg: "market_link"
                }]
            });
        case undefined:
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.checking_for_worth_less_settlement" });
        default:
            return null;
    }
});

var ModalContent = function (_React$Component) {
    _inherits(ModalContent, _React$Component);

    function ModalContent() {
        _classCallCheck(this, ModalContent);

        var _this = _possibleConstructorReturn(this, (ModalContent.__proto__ || Object.getPrototypeOf(ModalContent)).call(this));

        _this.state = {
            amount: 0
        };

        _this.onSubmit = _this.onSubmit.bind(_this);
        return _this;
    }

    _createClass(ModalContent, [{
        key: "onAmountChanged",
        value: function onAmountChanged(_ref2) {
            var amount = _ref2.amount,
                asset = _ref2.asset;

            this.setState({ amount: amount });
        }
    }, {
        key: "onSubmit",
        value: function onSubmit(e) {
            e.preventDefault();

            this.props.hideModal();

            var precision = common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].get_asset_precision(this.props.asset.get("precision"));
            var amount = this.state.amount.replace(/,/g, "");
            amount *= precision;

            var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_9__["default"].new_transaction();
            tr.add_type_operation("asset_settle", {
                fee: {
                    amount: 0,
                    asset_id: 0
                },
                account: this.props.account.get("id"),
                amount: {
                    amount: amount,
                    asset_id: this.props.asset.get("id")
                }
            });
            return stores_WalletDb__WEBPACK_IMPORTED_MODULE_10__["default"].process_transaction(tr, null, true).then(function (result) {
                // console.log("asset settle result:", result);
                // this.dispatch(account_id);
                return true;
            }).catch(function (error) {
                console.error("asset settle error: ", error);
                return false;
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                asset = _props.asset,
                account = _props.account;
            var amount = this.state.amount;


            if (!asset) {
                return null;
            }

            var assetID = asset.get("id");

            var account_balances = account.get("balances");

            var currentBalance = null,
                balanceAmount = 0;

            account_balances && account_balances.forEach(function (balance) {
                var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_12__["ChainStore"].getObject(balance);
                if (!balanceObject.get("balance")) {
                    return null;
                }
                if (balanceObject.get("asset_type") === assetID) {
                    currentBalance = balance;
                    balanceAmount = balanceObject.get("balance");
                }
            });

            var precision = common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].get_asset_precision(asset.get("precision"));
            var parsedAmount = amount ? amount.replace(/,/g, "") : 0;
            var submit_btn_class = parseFloat(parsedAmount) > 0 && parseFloat(parsedAmount) * precision <= parseFloat(balanceAmount) ? "button success" : "button disabled";

            var balanceText = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.balance" }),
                ":\xA0",
                currentBalance ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_8__["default"], { balance: currentBalance }) : "0 " + asset.get("symbol")
            );

            var footer = [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_16__["Button"],
                { key: "submit", type: "primary", onClick: this.onSubmit },
                counterpart__WEBPACK_IMPORTED_MODULE_11___default.a.translate("modal.settle.submit")
            ), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_16__["Button"],
                { key: "close", onClick: this.props.hideModal },
                counterpart__WEBPACK_IMPORTED_MODULE_11___default.a.translate("modal.close")
            )];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_16__["Modal"],
                {
                    title: counterpart__WEBPACK_IMPORTED_MODULE_11___default.a.translate("modal.settle.title", {
                        asset: asset.get("symbol")
                    }),
                    visible: this.props.visible,
                    id: this.props.modalId,
                    footer: footer,
                    onCancel: this.props.hideModal,
                    overlay: true,
                    ref: "settlement_modal"
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block vertical" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "form",
                        { className: "grid-block vertical full-width-content" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(WorthLessSettlementWarning, { asset: assetID }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "grid-container " },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "content-block" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_13__["default"], {
                                    label: "modal.settle.amount",
                                    amount: amount,
                                    onChange: this.onAmountChanged.bind(this),
                                    display_balance: balanceText,
                                    asset: assetID,
                                    assets: [assetID],
                                    tabIndex: 1
                                })
                            )
                        )
                    )
                )
            );
        }
    }]);

    return ModalContent;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ModalContent.propTypes = {
    asset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAsset.isRequired,
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccount.isRequired
};

ModalContent = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(ModalContent);

var SettleModal = function (_React$Component2) {
    _inherits(SettleModal, _React$Component2);

    function SettleModal() {
        _classCallCheck(this, SettleModal);

        return _possibleConstructorReturn(this, (SettleModal.__proto__ || Object.getPrototypeOf(SettleModal)).apply(this, arguments));
    }

    _createClass(SettleModal, [{
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ModalContent, this.props);
        }
    }]);

    return SettleModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (SettleModal);

/***/ }),

/***/ 2726:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1819);
/* harmony import */ var _ChainTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1959);
/* harmony import */ var _AssetWrapper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2304);
/* harmony import */ var _AssetName__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2303);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }







/**
 *  Given a base and quote asset, render a link to that market
 *
 *  Expected Properties:
 *     base:  asset id, which will be fetched from the ChainStore
 *     quote: either an asset id or a balance id
 *
 */

var MarketLink = function (_React$Component) {
    _inherits(MarketLink, _React$Component);

    function MarketLink() {
        _classCallCheck(this, MarketLink);

        return _possibleConstructorReturn(this, (MarketLink.__proto__ || Object.getPrototypeOf(MarketLink)).apply(this, arguments));
    }

    _createClass(MarketLink, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                base = _props.base,
                quote = _props.quote;

            if (base.get("id") === quote.get("id")) {
                return null;
            }
            var marketID = quote.get("symbol") + "_" + base.get("symbol");
            var marketName = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: quote.get("symbol") }),
                " /",
                " ",
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: base.get("symbol") })
            );
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                { to: "/market/" + marketID },
                marketName
            );
        }
    }]);

    return MarketLink;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarketLink = Object(_AssetWrapper__WEBPACK_IMPORTED_MODULE_3__["default"])(MarketLink, {
    propNames: ["quote", "base"],
    defaultProps: { base: "1.3.0" }
});

/*
This hangs the page on MarketLink import with firefox 62.0

class ObjectWrapper extends React.Component {
    static propTypes = {
        object: ChainTypes.ChainObject.isRequired
    };

    render() {
        let {object} = this.props;
        let quoteAsset = object.has("asset_type")
            ? object.get("asset_type")
            : object.get("id");

        return <MarketLink quote={quoteAsset} />;
    }
}
ObjectWrapper = BindToChainState(ObjectWrapper);

MarketLink.ObjectWrapper = ObjectWrapper;
*/

/* harmony default export */ __webpack_exports__["default"] = (MarketLink);

/***/ }),

/***/ 2727:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(498);
/* harmony import */ var _AssetWrapper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2304);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(595);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }







var withShortBackingAsset = function withShortBackingAsset(WrappedComponent) {
    var WrappedComponentWithShortBackingAsset = Object(_AssetWrapper__WEBPACK_IMPORTED_MODULE_2__["default"])(WrappedComponent, { propNames: ["shortBackingAsset"] });
    return Object(_AssetWrapper__WEBPACK_IMPORTED_MODULE_2__["default"])(function (props) {
        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(WrappedComponentWithShortBackingAsset, _extends({}, props, {
            shortBackingAsset: props.asset.getIn(["bitasset", "options", "short_backing_asset"])
        }));
    });
};

var withWorthLessSettlementFlag = function withWorthLessSettlementFlag(WrappedComponent) {
    return withShortBackingAsset(function (_PureComponent) {
        _inherits(_class2, _PureComponent);

        function _class2() {
            var _ref;

            var _temp, _this, _ret;

            _classCallCheck(this, _class2);

            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
                args[_key] = arguments[_key];
            }

            return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = _class2.__proto__ || Object.getPrototypeOf(_class2)).call.apply(_ref, [this].concat(args))), _this), _this.state = { worthLessSettlement: undefined }, _temp), _possibleConstructorReturn(_this, _ret);
        }

        _createClass(_class2, [{
            key: "updateFlag",
            value: function updateFlag() {
                var _this2 = this;

                var _props = this.props,
                    asset = _props.asset,
                    shortBackingAsset = _props.shortBackingAsset;

                var assetId = asset.get("id");
                var shortBackingAssetId = shortBackingAsset.get("id");

                // TODO: maybe properly subscribe to market instead of calling api directly?
                var realMarketPricePromise = bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_1__["Apis"].instance().db_api().exec("get_order_book", [shortBackingAssetId, assetId, 1]).then(function (orderBook) {
                    return orderBook.bids.length === 0 ? 0 : Number(orderBook.bids[0].price);
                });

                var settlementPrice = asset.getIn(["bitasset", "current_feed", "settlement_price"]);
                var realSettlementPrice = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_3__["Price"]({
                    base: new common_MarketClasses__WEBPACK_IMPORTED_MODULE_3__["Asset"]({
                        asset_id: shortBackingAssetId,
                        amount: settlementPrice.getIn(["quote", "amount"]),
                        preicision: shortBackingAsset.get("precision")
                    }),
                    quote: new common_MarketClasses__WEBPACK_IMPORTED_MODULE_3__["Asset"]({
                        asset_id: assetId,
                        amount: settlementPrice.getIn(["base", "amount"]),
                        precision: asset.get("precision")
                    })
                }).toReal();

                // TODO: compare fractional price instead of real price
                realMarketPricePromise.then(function (realMarketPrice) {
                    return _this2.setState({
                        worthLessSettlement: realMarketPrice > realSettlementPrice
                    });
                });
            }
        }, {
            key: "componentWillMount",
            value: function componentWillMount() {
                this.updateFlag();
            }
        }, {
            key: "componentDidUpdate",
            value: function componentDidUpdate() {
                this.updateFlag();
            }
        }, {
            key: "render",
            value: function render() {
                var props = this.props,
                    worthLessSettlement = this.state.worthLessSettlement;

                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(WrappedComponent, _extends({}, props, {
                    worthLessSettlement: worthLessSettlement
                }));
            }
        }]);

        return _class2;
    }(react__WEBPACK_IMPORTED_MODULE_0__["PureComponent"]));
};

/* harmony default export */ __webpack_exports__["default"] = (withWorthLessSettlementFlag);

/***/ }),

/***/ 2728:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2319);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Utility_AmountSelectorStyleGuide__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2729);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2377);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(429);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(595);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2304);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(733);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var ReserveAssetModal = function (_React$Component) {
    _inherits(ReserveAssetModal, _React$Component);

    function ReserveAssetModal(props) {
        _classCallCheck(this, ReserveAssetModal);

        var _this = _possibleConstructorReturn(this, (ReserveAssetModal.__proto__ || Object.getPrototypeOf(ReserveAssetModal)).call(this, props));

        _this.state = _this.getInitialState(props);

        _this.onSubmit = _this.onSubmit.bind(_this);
        return _this;
    }

    _createClass(ReserveAssetModal, [{
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.asset && this.props.asset && np.asset.get("id") !== this.props.asset.get("id")) {
                this.setState(this.getInitialState(np));
            }
        }
    }, {
        key: "getInitialState",
        value: function getInitialState(props) {
            return {
                amount: 0,
                amountAsset: new common_MarketClasses__WEBPACK_IMPORTED_MODULE_6__["Asset"]({
                    amount: 0,
                    asset_id: props.asset.get("id"),
                    precision: props.asset.get("precision")
                })
            };
        }
    }, {
        key: "onAmountChanged",
        value: function onAmountChanged(_ref) {
            var amount = _ref.amount,
                asset = _ref.asset;

            this.state.amountAsset.setAmount({ real: amount });
            this.setState({ amount: amount, asset: asset });
        }
    }, {
        key: "onSubmit",
        value: function onSubmit() {
            var _this2 = this;

            actions_AssetActions__WEBPACK_IMPORTED_MODULE_4__["default"].reserveAsset(this.state.amountAsset.getAmount(), this.props.asset.get("id"), this.props.account.get("id")).then(function () {
                _this2.state.amountAsset.setAmount({ sats: 0 });
                _this2.setState({ amount: 0 });
            });
            this.props.hideModal();
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var assetId = this.props.asset.get("id");

            var currentBalance = this.props.account && this.props.account.get("balances", []).size && !!this.props.account.getIn(["balances", assetId]) ? bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getObject(this.props.account.getIn(["balances", assetId])) : null;
            if (!currentBalance) return null;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Modal"],
                {
                    visible: this.props.visible,
                    onCancel: this.props.hideModal,
                    title: counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("modal.reserve.title"),
                    footer: [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Button"],
                        { type: "primary", key: "submit", onClick: this.onSubmit },
                        counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("modal.reserve.submit")
                    ), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Button"],
                        { onClick: this.props.hideModal, key: "cancel" },
                        counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("cancel")
                    )]
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Form"],
                    { layout: "vertical" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelectorStyleGuide__WEBPACK_IMPORTED_MODULE_3__["default"], {
                        label: "modal.reserve.amount",
                        amount: this.state.amount,
                        onChange: this.onAmountChanged.bind(this),
                        asset: assetId,
                        assets: [assetId],
                        display_balance: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                onClick: function onClick() {
                                    _this3.state.amountAsset.setAmount({
                                        sats: currentBalance.get("balance")
                                    });
                                    _this3.setState({
                                        amount: _this3.state.amountAsset.getAmount({ real: true })
                                    });
                                }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_1__["default"], {
                                balance: this.props.account.getIn(["balances", assetId])
                            })
                        ),
                        tabIndex: 1
                    })
                )
            );
        }
    }]);

    return ReserveAssetModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ReserveAssetModal = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_7__["default"])(ReserveAssetModal, {
    propNames: ["asset"]
});

/* harmony default export */ __webpack_exports__["default"] = (ReserveAssetModal);

/***/ }),

/***/ 2729:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(580);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(399);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(536);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(584);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _AssetWrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2304);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(823);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _DecimalChecker__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2307);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(733);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }










var AssetSelector = function (_React$Component) {
    _inherits(AssetSelector, _React$Component);

    function AssetSelector() {
        _classCallCheck(this, AssetSelector);

        return _possibleConstructorReturn(this, (AssetSelector.__proto__ || Object.getPrototypeOf(AssetSelector)).apply(this, arguments));
    }

    _createClass(AssetSelector, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np) {
            return !common_utils__WEBPACK_IMPORTED_MODULE_0__["default"].are_equal_shallow(np.assets, this.props.assets) || np.value !== this.props.value || np.scroll_length !== this.props.scroll_length;
        }
    }, {
        key: "render",
        value: function render() {
            if (!this.props.assets.length) return null;

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Select"],
                {
                    showSearch: true,
                    style: this.props.style || {},
                    value: this.props.value,
                    onChange: this.props.onChange
                },
                this.props.assets.filter(function (asset) {
                    return asset && asset.get;
                }).map(function (asset) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Select"].Option,
                        { key: asset.get("symbol") },
                        asset.get("symbol")
                    );
                })
            );
        }
    }]);

    return AssetSelector;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

AssetSelector.propTypes = {
    value: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string, // asset id
    onChange: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.func,
    scroll_length: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.number
};


AssetSelector = Object(_AssetWrapper__WEBPACK_IMPORTED_MODULE_4__["default"])(AssetSelector, { asList: true });

var AmountSelector = function (_DecimalChecker) {
    _inherits(AmountSelector, _DecimalChecker);

    function AmountSelector() {
        _classCallCheck(this, AmountSelector);

        return _possibleConstructorReturn(this, (AmountSelector.__proto__ || Object.getPrototypeOf(AmountSelector)).apply(this, arguments));
    }

    _createClass(AmountSelector, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            this.onAssetChange(this.props.asset);
        }
    }, {
        key: "formatAmount",
        value: function formatAmount(v) {
            /*// TODO: use asset's precision to format the number*/
            if (!v) v = "";
            if (typeof v === "number") v = v.toString();
            var value = v.trim().replace(/,/g, "");

            return value;
        }
    }, {
        key: "_onChange",
        value: function _onChange(e) {
            if (this.props.onChange) this.props.onChange({
                amount: this.getNumericEventValue(e),
                asset: this.props.asset
            });
        }
    }, {
        key: "onAssetChange",
        value: function onAssetChange(selected_asset) {
            if (this.props.onChange) this.props.onChange({
                amount: this.props.amount,
                asset: selected_asset
            });
        }
    }, {
        key: "render",
        value: function render() {
            var value = this.props.error ? counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate(this.props.error) : this.formatAmount(this.props.amount);

            var label = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "div",
                { className: "amount-selector-field--label" },
                counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate(this.props.label).toUpperCase(),
                ":",
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "amount-selector-field--balance" },
                    this.props.display_balance
                )
            );

            var addonAfter = null;

            if (this.props.isPrice) {
                addonAfter = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    null,
                    this.props.asset.get("symbol"),
                    "/",
                    this.props.base
                );
            }

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Form"].Item,
                {
                    label: label,
                    style: this.props.style,
                    className: "amount-selector-field"
                },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Input"].Group,
                    { compact: true },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Input"], {
                        style: {
                            width: this.props.isPrice ? "100%" : "calc(100% - 130px)"
                        },
                        disabled: this.props.disabled,
                        value: value || "",
                        placeholder: this.props.placeholder,
                        onChange: this._onChange.bind(this),
                        tabIndex: this.props.tabIndex,
                        onPaste: this.props.onPaste || this.onPaste.bind(this),
                        onKeyPress: this.onKeyPress.bind(this),
                        addonAfter: addonAfter
                    }),
                    !this.props.isPrice ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(AssetSelector, {
                        style: { width: "130px" },
                        value: this.props.asset.get("symbol"),
                        assets: immutable__WEBPACK_IMPORTED_MODULE_2___default.a.List(this.props.assets),
                        onChange: this.onAssetChange.bind(this)
                    }) : null
                )
            );
        }
    }]);

    return AmountSelector;
}(_DecimalChecker__WEBPACK_IMPORTED_MODULE_6__["DecimalChecker"]);

AmountSelector.propTypes = {
    label: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string, // a translation key for the label
    assets: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.array,
    amount: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.any,
    placeholder: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,
    onChange: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.func,
    tabIndex: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.number,
    error: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,
    scroll_length: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.number
};
AmountSelector.defaultProps = {
    disabled: false,
    tabIndex: 0
};

AmountSelector = Object(_AssetWrapper__WEBPACK_IMPORTED_MODULE_4__["default"])(AmountSelector);

/* harmony default export */ __webpack_exports__["default"] = (AmountSelector);

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3VudC42NGQ4YzBhNzBjMDI3OGViMjU3Mi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRQYWdlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50QXNzZXRzLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvTW9kYWwvSXNzdWVNb2RhbC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudEFzc2V0Q3JlYXRlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50QXNzZXRVcGRhdGUuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9VdGlsaXR5L0Zvcm1hdHRlZEZlZS5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQXNzZXRXaGl0ZWxpc3QuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0Fzc2V0RmVlZFByb2R1Y2Vycy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudE1lbWJlcnNoaXAuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L1N0YXRpc3RpY3MuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRWZXN0aW5nLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50UGVybWlzc2lvbnMuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRQZXJtaXNzaW9uc0xpc3QuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9Qcml2YXRlS2V5Vmlldy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL01vZGFsL1FyY29kZU1vZGFsLmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvYXNzZXRzL3FyLnBuZyIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50UGVybWlzc2lvbnNNaWdyYXRlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvRm9ybXMvUHViS2V5SW5wdXQuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRTaWduZWRNZXNzYWdlcy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9hY3Rpb25zL1NpZ25lZE1lc3NhZ2VBY3Rpb24uanMiLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvU2lnbmVkTWVzc2FnZS5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudFdoaXRlbGlzdC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudFZvdGluZy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvV29ya2VyQXBwcm92YWwuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L1ZvdGluZ0FjY291bnRzTGlzdC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudE92ZXJ2aWV3LmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9NYXJnaW5Qb3NpdGlvbnMuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L1Byb3Bvc2Fscy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL01vZGFsL1Byb3Bvc2FsTW9kYWwuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L05lc3RlZEFwcHJvdmFsU3RhdGUuanN4Iiwid2VicGFjazovLy9hcHAvbGliL2NvbW1vbi9wZXJtaXNzaW9uX3V0aWxzLmpzIiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L05lc3RlZEFwcHJvdmFsU3RhdGVMaWIuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRPcmRlcnMuanN4Iiwid2VicGFjazovLy9hcHAvbGliL2NvbW1vbi9hY2NvdW50SGVscGVyLmpzIiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRUcmVlbWFwLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50UG9ydGZvbGlvTGlzdC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL1V0aWxpdHkvTWFya2V0Q2hhbmdlQ29tcG9uZW50LmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvVXRpbGl0eS9FcXVpdmFsZW50UHJpY2UuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9JY29uL1B1bHNlSWNvbi5qcyIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvTW9kYWwvU2V0dGxlTW9kYWwuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9VdGlsaXR5L01hcmtldExpbmsuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9VdGlsaXR5L3dpdGhXb3J0aExlc3NTZXR0bGVtZW50RmxhZy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL01vZGFsL1Jlc2VydmVBc3NldE1vZGFsLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvVXRpbGl0eS9BbW91bnRTZWxlY3RvclN0eWxlR3VpZGUuanN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBBY2NvdW50QWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9BY2NvdW50QWN0aW9uc1wiO1xuaW1wb3J0IEFjY291bnRTdG9yZSBmcm9tIFwic3RvcmVzL0FjY291bnRTdG9yZVwiO1xuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XG5pbXBvcnQgV2FsbGV0VW5sb2NrU3RvcmUgZnJvbSBcInN0b3Jlcy9XYWxsZXRVbmxvY2tTdG9yZVwiO1xuLy8gaW1wb3J0IEFjY291bnRMZWZ0UGFuZWwgZnJvbSBcIi4vQWNjb3VudExlZnRQYW5lbFwiO1xuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xuaW1wb3J0IHtjb25uZWN0fSBmcm9tIFwiYWx0LXJlYWN0XCI7XG5pbXBvcnQgYWNjb3VudFV0aWxzIGZyb20gXCJjb21tb24vYWNjb3VudF91dGlsc1wiO1xuaW1wb3J0IHtMaXN0fSBmcm9tIFwiaW1tdXRhYmxlXCI7XG5pbXBvcnQgUGFnZTQwNCBmcm9tIFwiLi4vUGFnZTQwNC9QYWdlNDA0XCI7XG5pbXBvcnQge1JvdXRlLCBTd2l0Y2gsIFJlZGlyZWN0fSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuXG4vKiBOZXN0ZWQgcm91dGVzICovXG5pbXBvcnQgQWNjb3VudEFzc2V0cyBmcm9tIFwiLi9BY2NvdW50QXNzZXRzXCI7XG5pbXBvcnQge0FjY291bnRBc3NldENyZWF0ZX0gZnJvbSBcIi4vQWNjb3VudEFzc2V0Q3JlYXRlXCI7XG5pbXBvcnQgQWNjb3VudEFzc2V0VXBkYXRlIGZyb20gXCIuL0FjY291bnRBc3NldFVwZGF0ZVwiO1xuaW1wb3J0IEFjY291bnRNZW1iZXJzaGlwIGZyb20gXCIuL0FjY291bnRNZW1iZXJzaGlwXCI7XG5pbXBvcnQgQWNjb3VudFZlc3RpbmcgZnJvbSBcIi4vQWNjb3VudFZlc3RpbmdcIjtcbmltcG9ydCBBY2NvdW50UGVybWlzc2lvbnMgZnJvbSBcIi4vQWNjb3VudFBlcm1pc3Npb25zXCI7XG5pbXBvcnQgQWNjb3VudFNpZ25lZE1lc3NhZ2VzIGZyb20gXCIuL0FjY291bnRTaWduZWRNZXNzYWdlc1wiO1xuaW1wb3J0IEFjY291bnRXaGl0ZWxpc3QgZnJvbSBcIi4vQWNjb3VudFdoaXRlbGlzdFwiO1xuaW1wb3J0IEFjY291bnRWb3RpbmcgZnJvbSBcIi4vQWNjb3VudFZvdGluZ1wiO1xuaW1wb3J0IEFjY291bnRPdmVydmlldyBmcm9tIFwiLi9BY2NvdW50T3ZlcnZpZXdcIjtcblxuY2xhc3MgQWNjb3VudFBhZ2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGFjY291bnQ6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50LmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjY291bnQpIHtcbiAgICAgICAgICAgIEFjY291bnRBY3Rpb25zLnNldEN1cnJlbnRBY2NvdW50LmRlZmVyKFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBGZXRjaCBwb3NzaWJsZSBmZWUgYXNzZXRzIGhlcmUgdG8gYXZvaWQgYXN5bmMgaXNzdWVzIGxhdGVyICh3aWxsIHJlc29sdmUgYXNzZXRzKVxuICAgICAgICAgICAgYWNjb3VudFV0aWxzLmdldFBvc3NpYmxlRmVlcyh0aGlzLnByb3BzLmFjY291bnQsIFwidHJhbnNmZXJcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5wKSB7XG4gICAgICAgIGlmIChucC5hY2NvdW50KSB7XG4gICAgICAgICAgICBjb25zdCBucE5hbWUgPSBucC5hY2NvdW50LmdldChcIm5hbWVcIik7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TmFtZSA9XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50ICYmIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMucHJvcHMuYWNjb3VudCB8fCBucE5hbWUgIT09IGN1cnJlbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBjdXJyZW50IGFjY291bnQgaW4gb3JkZXIgdG8gYWNjZXNzIHRoZSBoZWFkZXIgcmlnaHQgbWVudSBvcHRpb25zXG4gICAgICAgICAgICAgICAgQWNjb3VudEFjdGlvbnMuc2V0Q3VycmVudEFjY291bnQuZGVmZXIobnBOYW1lKTtcbiAgICAgICAgICAgICAgICAvLyBGZXRjaCBwb3NzaWJsZSBmZWUgYXNzZXRzIGhlcmUgdG8gYXZvaWQgYXN5bmMgaXNzdWVzIGxhdGVyICh3aWxsIHJlc29sdmUgYXNzZXRzKVxuICAgICAgICAgICAgICAgIGFjY291bnRVdGlscy5nZXRQb3NzaWJsZUZlZXMobnAuYWNjb3VudCwgXCJ0cmFuc2ZlclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICAgIG15QWN0aXZlQWNjb3VudHMsXG4gICAgICAgICAgICBzZWFyY2hBY2NvdW50cyxcbiAgICAgICAgICAgIHNldHRpbmdzLFxuICAgICAgICAgICAgd2FsbGV0X2xvY2tlZCxcbiAgICAgICAgICAgIGFjY291bnQsXG4gICAgICAgICAgICBoaWRkZW5Bc3NldHNcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgaWYgKCFhY2NvdW50KSB7XG4gICAgICAgICAgICByZXR1cm4gPFBhZ2U0MDQgLz47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGFjY291bnRfbmFtZSA9IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpO1xuICAgICAgICBsZXQgaXNNeUFjY291bnQgPSBBY2NvdW50U3RvcmUuaXNNeUFjY291bnQoYWNjb3VudCk7XG5cbiAgICAgICAgbGV0IHBhc3NPblByb3BzID0ge1xuICAgICAgICAgICAgYWNjb3VudF9uYW1lLFxuICAgICAgICAgICAgbXlBY3RpdmVBY2NvdW50cyxcbiAgICAgICAgICAgIHNlYXJjaEFjY291bnRzLFxuICAgICAgICAgICAgc2V0dGluZ3MsXG4gICAgICAgICAgICB3YWxsZXRfbG9ja2VkLFxuICAgICAgICAgICAgYWNjb3VudCxcbiAgICAgICAgICAgIGlzTXlBY2NvdW50LFxuICAgICAgICAgICAgaGlkZGVuQXNzZXRzLFxuICAgICAgICAgICAgY29udGFpbmVkOiB0cnVlLFxuICAgICAgICAgICAgYmFsYW5jZXM6IGFjY291bnQuZ2V0KFwiYmFsYW5jZXNcIiwgTGlzdCgpKS50b0xpc3QoKSxcbiAgICAgICAgICAgIG9yZGVyczogYWNjb3VudC5nZXQoXCJvcmRlcnNcIiwgTGlzdCgpKS50b0xpc3QoKSxcbiAgICAgICAgICAgIHZpZXdTZXR0aW5nczogdGhpcy5wcm9wcy52aWV3U2V0dGluZ3MsXG4gICAgICAgICAgICBwcm94eTogYWNjb3VudC5nZXRJbihbXCJvcHRpb25zXCIsIFwidm90aW5nX2FjY291bnRcIl0pLFxuICAgICAgICAgICAgaGlzdG9yeTogdGhpcy5wcm9wcy5oaXN0b3J5XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBwYWdlLWxheW91dFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1wYWRkaW5nXCI+XG4gICAgICAgICAgICAgICAgICAgIDxTd2l0Y2g+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Um91dGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gPEFjY291bnRPdmVydmlldyB7Li4ucGFzc09uUHJvcHN9IC8+fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxSZWRpcmVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb209e2AvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vb3ZlcnZpZXdgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Um91dGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9L2Fzc2V0c2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eygpID0+IDxBY2NvdW50QXNzZXRzIHsuLi5wYXNzT25Qcm9wc30gLz59XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFJvdXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS9jcmVhdGUtYXNzZXRgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50QXNzZXRDcmVhdGUgey4uLnBhc3NPblByb3BzfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFJvdXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS91cGRhdGUtYXNzZXQvOmFzc2V0YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudEFzc2V0VXBkYXRlIHsuLi5wYXNzT25Qcm9wc30gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxSb3V0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e2AvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vbWVtYmVyLXN0YXRzYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudE1lbWJlcnNoaXAgey4uLnBhc3NPblByb3BzfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFJvdXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS92ZXN0aW5nYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gPEFjY291bnRWZXN0aW5nIHsuLi5wYXNzT25Qcm9wc30gLz59XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFJvdXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS9wZXJtaXNzaW9uc2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eygpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRQZXJtaXNzaW9ucyB7Li4ucGFzc09uUHJvcHN9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Um91dGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9L3ZvdGluZ2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eygpID0+IDxBY2NvdW50Vm90aW5nIHsuLi5wYXNzT25Qcm9wc30gLz59XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFJvdXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS93aGl0ZWxpc3RgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoKSA9PiA8QWNjb3VudFdoaXRlbGlzdCB7Li4ucGFzc09uUHJvcHN9IC8+fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxSb3V0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e2AvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vc2lnbmVkbWVzc2FnZXNgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50U2lnbmVkTWVzc2FnZXMgey4uLnBhc3NPblByb3BzfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L1N3aXRjaD5cbiAgICAgICAgICAgICAgICAgICAgey8qIHtSZWFjdC5jbG9uZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5DaGlsZHJlbi5vbmx5KHRoaXMucHJvcHMuY2hpbGRyZW4pLFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteUFjdGl2ZUFjY291bnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaEFjY291bnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhbGxldF9sb2NrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc015QWNjb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRkZW5Bc3NldHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzOiBhY2NvdW50LmdldChcImJhbGFuY2VzXCIsIExpc3QoKSkudG9MaXN0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJzOiBhY2NvdW50LmdldChcIm9yZGVyc1wiLCBMaXN0KCkpLnRvTGlzdCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlZENvaW5zOiB0aGlzLnByb3BzLmJhY2tlZENvaW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaWRnZUNvaW5zOiB0aGlzLnByb3BzLmJyaWRnZUNvaW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhdGV3YXlEb3duOiB0aGlzLnByb3BzLmdhdGV3YXlEb3duLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdTZXR0aW5nczogdGhpcy5wcm9wcy52aWV3U2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHk6IGFjY291bnQuZ2V0SW4oW1wib3B0aW9uc1wiLCBcInZvdGluZ19hY2NvdW50XCJdKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApfSAqL31cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbkFjY291bnRQYWdlID0gQmluZFRvQ2hhaW5TdGF0ZShBY2NvdW50UGFnZSwge1xuICAgIHNob3dfbG9hZGVyOiB0cnVlXG59KTtcblxuY2xhc3MgQWNjb3VudFBhZ2VTdG9yZVdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IGFjY291bnRfbmFtZSA9IHRoaXMucHJvcHMubWF0Y2gucGFyYW1zLmFjY291bnRfbmFtZTtcbiAgICAgICAgcmV0dXJuIDxBY2NvdW50UGFnZSB7Li4udGhpcy5wcm9wc30gYWNjb3VudD17YWNjb3VudF9uYW1lfSAvPjtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QoXG4gICAgQWNjb3VudFBhZ2VTdG9yZVdyYXBwZXIsXG4gICAge1xuICAgICAgICBsaXN0ZW5UbygpIHtcbiAgICAgICAgICAgIHJldHVybiBbQWNjb3VudFN0b3JlLCBTZXR0aW5nc1N0b3JlLCBXYWxsZXRVbmxvY2tTdG9yZV07XG4gICAgICAgIH0sXG4gICAgICAgIGdldFByb3BzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBteUFjdGl2ZUFjY291bnRzOiBBY2NvdW50U3RvcmUuZ2V0U3RhdGUoKS5teUFjdGl2ZUFjY291bnRzLFxuICAgICAgICAgICAgICAgIHNlYXJjaEFjY291bnRzOiBBY2NvdW50U3RvcmUuZ2V0U3RhdGUoKS5zZWFyY2hBY2NvdW50cyxcbiAgICAgICAgICAgICAgICBzZXR0aW5nczogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnNldHRpbmdzLFxuICAgICAgICAgICAgICAgIGhpZGRlbkFzc2V0czogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLmhpZGRlbkFzc2V0cyxcbiAgICAgICAgICAgICAgICB3YWxsZXRfbG9ja2VkOiBXYWxsZXRVbmxvY2tTdG9yZS5nZXRTdGF0ZSgpLmxvY2tlZCxcbiAgICAgICAgICAgICAgICB2aWV3U2V0dGluZ3M6IFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKS52aWV3U2V0dGluZ3NcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4pO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xuaW1wb3J0IHtMaW5rfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xuaW1wb3J0IEFzc2V0QWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9Bc3NldEFjdGlvbnNcIjtcbmltcG9ydCBBc3NldFN0b3JlIGZyb20gXCJzdG9yZXMvQXNzZXRTdG9yZVwiO1xuaW1wb3J0IEFjY291bnRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL0FjY291bnRBY3Rpb25zXCI7XG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcbmltcG9ydCB7ZGVib3VuY2V9IGZyb20gXCJsb2Rhc2gtZXNcIjtcbmltcG9ydCBMb2FkaW5nSW5kaWNhdG9yIGZyb20gXCIuLi9Mb2FkaW5nSW5kaWNhdG9yXCI7XG5pbXBvcnQgSXNzdWVNb2RhbCBmcm9tIFwiLi4vTW9kYWwvSXNzdWVNb2RhbFwiO1xuaW1wb3J0IHtjb25uZWN0fSBmcm9tIFwiYWx0LXJlYWN0XCI7XG5pbXBvcnQgYXNzZXRVdGlscyBmcm9tIFwiY29tbW9uL2Fzc2V0X3V0aWxzXCI7XG5pbXBvcnQge01hcCwgTGlzdH0gZnJvbSBcImltbXV0YWJsZVwiO1xuaW1wb3J0IEFzc2V0V3JhcHBlciBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldFdyYXBwZXJcIjtcbmltcG9ydCB7VGFicywgVGFifSBmcm9tIFwiLi4vVXRpbGl0eS9UYWJzXCI7XG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XG5cbmNsYXNzIEFjY291bnRBc3NldHMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIHN5bWJvbDogXCJcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgICAgIG1heF9zdXBwbHk6IDAsXG4gICAgICAgIHByZWNpc2lvbjogMFxuICAgIH07XG5cbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBzeW1ib2w6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGlzSXNzdWVBc3NldE1vZGFsVmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjcmVhdGU6IHtcbiAgICAgICAgICAgICAgICBzeW1ib2w6IFwiXCIsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICAgICAgICAgICAgICBtYXhfc3VwcGx5OiAxMDAwMDAwMDAwMDAwMDAwLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogNFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzc3VlOiB7XG4gICAgICAgICAgICAgICAgYW1vdW50OiAwLFxuICAgICAgICAgICAgICAgIHRvOiBcIlwiLFxuICAgICAgICAgICAgICAgIHRvX2lkOiBcIlwiLFxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgICAgICAgICAgICAgIHN5bWJvbDogXCJcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yczoge1xuICAgICAgICAgICAgICAgIHN5bWJvbDogbnVsbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgc2VhcmNoVGVybTogXCJcIlxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX3NlYXJjaEFjY291bnRzID0gZGVib3VuY2UodGhpcy5fc2VhcmNoQWNjb3VudHMsIDE1MCk7XG5cbiAgICAgICAgdGhpcy5zaG93SXNzdWVBc3NldE1vZGFsID0gdGhpcy5zaG93SXNzdWVBc3NldE1vZGFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGlkZUlzc3VlQXNzZXRNb2RhbCA9IHRoaXMuaGlkZUlzc3VlQXNzZXRNb2RhbC5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIHNob3dJc3N1ZUFzc2V0TW9kYWwoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNJc3N1ZUFzc2V0TW9kYWxWaXNpYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhpZGVJc3N1ZUFzc2V0TW9kYWwoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNJc3N1ZUFzc2V0TW9kYWxWaXNpYmxlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfY2hlY2tBc3NldHMoYXNzZXRzLCBmb3JjZSkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY2NvdW50LmdldChcImFzc2V0c1wiKS5zaXplKSByZXR1cm47XG4gICAgICAgIGxldCBsYXN0QXNzZXQgPSBhc3NldHNcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGEuc3ltYm9sID4gYi5zeW1ib2wpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhLnN5bWJvbCA8IGIuc3ltYm9sKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmxhc3QoKTtcblxuICAgICAgICBpZiAoYXNzZXRzLnNpemUgPT09IDAgfHwgZm9yY2UpIHtcbiAgICAgICAgICAgIEFzc2V0QWN0aW9ucy5nZXRBc3NldExpc3QuZGVmZXIoXCJBXCIsIDEwMCk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHthc3NldHNGZXRjaGVkOiAxMDB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChhc3NldHMuc2l6ZSA+PSB0aGlzLnN0YXRlLmFzc2V0c0ZldGNoZWQpIHtcbiAgICAgICAgICAgIEFzc2V0QWN0aW9ucy5nZXRBc3NldExpc3QuZGVmZXIobGFzdEFzc2V0LnN5bWJvbCwgMTAwKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2Fzc2V0c0ZldGNoZWQ6IHRoaXMuc3RhdGUuYXNzZXRzRmV0Y2hlZCArIDk5fSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgICB0aGlzLl9jaGVja0Fzc2V0cyhuZXh0UHJvcHMuYXNzZXRzKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrQXNzZXRzKHRoaXMucHJvcHMuYXNzZXRzLCB0cnVlKTtcbiAgICB9XG5cbiAgICBfb25Jc3N1ZUlucHV0KHZhbHVlLCBlKSB7XG4gICAgICAgIGxldCBrZXkgPSBlLnRhcmdldC5pZDtcbiAgICAgICAgbGV0IHtpc3N1ZX0gPSB0aGlzLnN0YXRlO1xuXG4gICAgICAgIGlmIChrZXkgPT09IFwidG9cIikge1xuICAgICAgICAgICAgdGhpcy5fc2VhcmNoQWNjb3VudHMoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgaXNzdWUudG8gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIGxldCBhY2NvdW50ID0gdGhpcy5wcm9wcy5zZWFyY2hBY2NvdW50cy5maW5kRW50cnkobmFtZSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hbWUgPT09IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlzc3VlLnRvX2lkID0gYWNjb3VudCA/IGFjY291bnRbMF0gOiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXNzdWVbdmFsdWVdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc3N1ZTogaXNzdWV9KTtcbiAgICB9XG5cbiAgICBfc2VhcmNoQWNjb3VudHMoc2VhcmNoVGVybSkge1xuICAgICAgICBBY2NvdW50QWN0aW9ucy5hY2NvdW50U2VhcmNoKHNlYXJjaFRlcm0pO1xuICAgIH1cblxuICAgIF9pc3N1ZUJ1dHRvbkNsaWNrKGFzc2V0X2lkLCBzeW1ib2wsIGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsZXQge2lzc3VlfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGlzc3VlLmFzc2V0X2lkID0gYXNzZXRfaWQ7XG4gICAgICAgIGlzc3VlLnN5bWJvbCA9IHN5bWJvbDtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNzdWU6IGlzc3VlfSk7XG4gICAgICAgIHRoaXMuc2hvd0lzc3VlQXNzZXRNb2RhbCgpO1xuICAgIH1cblxuICAgIF9lZGl0QnV0dG9uQ2xpY2soc3ltYm9sLCBhY2NvdW50X25hbWUsIGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaChcbiAgICAgICAgICAgIGAvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vdXBkYXRlLWFzc2V0LyR7c3ltYm9sfWBcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQnV0dG9uQ2xpY2soYWNjb3VudF9uYW1lKSB7XG4gICAgICAgIHRoaXMucHJvcHMuaGlzdG9yeS5wdXNoKGAvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vY3JlYXRlLWFzc2V0YCk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge2FjY291bnQsIGFjY291bnRfbmFtZSwgYXNzZXRzLCBhc3NldHNMaXN0fSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgbGV0IGFjY291bnRFeGlzdHMgPSB0cnVlO1xuICAgICAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgICAgICAgIHJldHVybiA8TG9hZGluZ0luZGljYXRvciB0eXBlPVwiY2lyY2xlXCIgLz47XG4gICAgICAgIH0gZWxzZSBpZiAoYWNjb3VudC5ub3RGb3VuZCkge1xuICAgICAgICAgICAgYWNjb3VudEV4aXN0cyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYWNjb3VudEV4aXN0cykge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgPGg1PlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImg1XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC5lcnJvcnMubm90X2ZvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXthY2NvdW50X25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2g1PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhc3NldHNMaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgYXNzZXRzID0gYXNzZXRzLmNsZWFyKCk7XG4gICAgICAgICAgICBhc3NldHNMaXN0LmZvckVhY2goYSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGEpIGFzc2V0cyA9IGFzc2V0cy5zZXQoYS5nZXQoXCJpZFwiKSwgYS50b0pTKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG15QXNzZXRzID0gYXNzZXRzXG4gICAgICAgICAgICAuZmlsdGVyKGFzc2V0ID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXNzZXQuaXNzdWVyID09PSBhY2NvdW50LmdldChcImlkXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoYS5pZC5zdWJzdHJpbmcoNCwgYS5pZC5sZW5ndGgpLCAxMCkgLVxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChiLmlkLnN1YnN0cmluZyg0LCBiLmlkLmxlbmd0aCksIDEwKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm1hcChhc3NldCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gYXNzZXRVdGlscy5wYXJzZURlc2NyaXB0aW9uKFxuICAgICAgICAgICAgICAgICAgICBhc3NldC5vcHRpb25zLmRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBsZXQgZGVzYyA9IGRlc2NyaXB0aW9uLnNob3J0X25hbWVcbiAgICAgICAgICAgICAgICAgICAgPyBkZXNjcmlwdGlvbi5zaG9ydF9uYW1lXG4gICAgICAgICAgICAgICAgICAgIDogZGVzY3JpcHRpb24ubWFpbjtcblxuICAgICAgICAgICAgICAgIGlmIChkZXNjLmxlbmd0aCA+IDEwMCkge1xuICAgICAgICAgICAgICAgICAgICBkZXNjID0gZGVzYy5zdWJzdHIoMCwgMTAwKSArIFwiLi4uXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgZHluYW1pY09iamVjdCA9IHRoaXMucHJvcHMuZ2V0RHluYW1pY09iamVjdChcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQuZHluYW1pY19hc3NldF9kYXRhX2lkXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2Fzc2V0LnN5bWJvbH0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89e2AvYXNzZXQvJHthc3NldC5zeW1ib2x9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthc3NldC5zeW1ib2x9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XCJiaXRhc3NldFwiIGluIGFzc2V0ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5iaXRhc3NldC5pc19wcmVkaWN0aW9uX21hcmtldCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnBtXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1wYVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlVzZXIgSXNzdWVkIEFzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2R5bmFtaWNPYmplY3QgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtwYXJzZUludChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljT2JqZWN0LmdldChcImN1cnJlbnRfc3VwcGx5XCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2Fzc2V0LmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtwYXJzZUludChhc3NldC5vcHRpb25zLm1heF9zdXBwbHksIDEwKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2Fzc2V0LmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshYXNzZXQuYml0YXNzZXRfZGF0YV9pZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX2lzc3VlQnV0dG9uQ2xpY2suYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LnN5bWJvbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3RhdGU0NVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fZWRpdEJ1dHRvbkNsaWNrLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuc3ltYm9sLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudF9uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvbiBuYW1lPVwiZGFzaGJvYXJkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRvQXJyYXkoKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgYXBwLXRhYmxlcyBuby1wYWRkaW5nXCIgcmVmPVwiYXBwVGFibGVzXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1jb250YWluZXIgZ2VuZXJpYy1ib3JkZXJlZC1ib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudGVkPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwiaXNzdWVkQXNzZXRzVGFiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY2NvdW50LXRhYnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNDbGFzcz1cImFjY291bnQtb3ZlcnZpZXcgYm9yZGVyZWQtaGVhZGVyIGNvbnRlbnQtYmxvY2tcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cInBhZGRpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5pc3N1ZWRfYXNzZXRzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGRhc2hib2FyZC10YWJsZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnN5bWJvbFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLmFzc2V0LnN1bW1hcnkuYXNzZXRfdHlwZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cInRoXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwibWFya2V0cy5zdXBwbHlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1heF9zdXBwbHlcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogXCJjZW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNhY3Rpb24udHJ4VHlwZXMuYXNzZXRfaXNzdWVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogXCJjZW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNhY3Rpb24udHJ4VHlwZXMuYXNzZXRfdXBkYXRlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+e215QXNzZXRzfTwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX2NyZWF0ZUJ1dHRvbkNsaWNrLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNhY3Rpb24udHJ4VHlwZXMuYXNzZXRfY3JlYXRlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFicz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgPElzc3VlTW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMuc3RhdGUuaXNJc3N1ZUFzc2V0TW9kYWxWaXNpYmxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsPXt0aGlzLmhpZGVJc3N1ZUFzc2V0TW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93TW9kYWw9e3RoaXMuc2hvd0lzc3VlQXNzZXRNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0X3RvX2lzc3VlPXt0aGlzLnN0YXRlLmlzc3VlLmFzc2V0X2lkfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5BY2NvdW50QXNzZXRzID0gQXNzZXRXcmFwcGVyKEFjY291bnRBc3NldHMsIHtcbiAgICBwcm9wTmFtZXM6IFtcImFzc2V0c0xpc3RcIl0sXG4gICAgYXNMaXN0OiB0cnVlLFxuICAgIHdpdGhEeW5hbWljOiB0cnVlXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcbiAgICBBY2NvdW50QXNzZXRzLFxuICAgIHtcbiAgICAgICAgbGlzdGVuVG8oKSB7XG4gICAgICAgICAgICByZXR1cm4gW0Fzc2V0U3RvcmVdO1xuICAgICAgICB9LFxuICAgICAgICBnZXRQcm9wcyhwcm9wcykge1xuICAgICAgICAgICAgbGV0IGFzc2V0cyA9IE1hcCgpLFxuICAgICAgICAgICAgICAgIGFzc2V0c0xpc3QgPSBMaXN0KCk7XG4gICAgICAgICAgICBpZiAocHJvcHMuYWNjb3VudC5nZXQoXCJhc3NldHNcIiwgW10pLnNpemUpIHtcbiAgICAgICAgICAgICAgICBwcm9wcy5hY2NvdW50LmdldChcImFzc2V0c1wiLCBbXSkuZm9yRWFjaChpZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFzc2V0c0xpc3QgPSBhc3NldHNMaXN0LnB1c2goaWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhc3NldHMgPSBBc3NldFN0b3JlLmdldFN0YXRlKCkuYXNzZXRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHthc3NldHMsIGFzc2V0c0xpc3R9O1xuICAgICAgICB9XG4gICAgfVxuKTtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XG5pbXBvcnQgQXBwbGljYXRpb25BcGkgZnJvbSBcImFwaS9BcHBsaWNhdGlvbkFwaVwiO1xuaW1wb3J0IEFjY291bnRTZWxlY3RvciBmcm9tIFwiLi4vQWNjb3VudC9BY2NvdW50U2VsZWN0b3JcIjtcbmltcG9ydCBBbW91bnRTZWxlY3RvciBmcm9tIFwiLi4vVXRpbGl0eS9BbW91bnRTZWxlY3RvclwiO1xuaW1wb3J0IHtOb3RpZmljYXRpb24sIE1vZGFsLCBCdXR0b259IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcblxuY2xhc3MgSXNzdWVNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgYXNzZXRfdG9faXNzdWU6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGFtb3VudDogcHJvcHMuYW1vdW50LFxuICAgICAgICAgICAgdG86IHByb3BzLnRvLFxuICAgICAgICAgICAgdG9faWQ6IG51bGwsXG4gICAgICAgICAgICBtZW1vOiBcIlwiXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgb25BbW91bnRDaGFuZ2VkKHthbW91bnR9KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2Ftb3VudDogYW1vdW50fSk7XG4gICAgfVxuXG4gICAgb25Ub0FjY291bnRDaGFuZ2VkKHRvKSB7XG4gICAgICAgIGxldCBzdGF0ZSA9IHRvXG4gICAgICAgICAgICA/IHt0bzogdG8uZ2V0KFwibmFtZVwiKSwgdG9faWQ6IHRvLmdldChcImlkXCIpfVxuICAgICAgICAgICAgOiB7dG9faWQ6IG51bGx9O1xuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcbiAgICB9XG5cbiAgICBvblRvQ2hhbmdlZCh0bykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHt0bzogdG8sIHRvX2lkOiBudWxsfSk7XG4gICAgfVxuXG4gICAgb25TdWJtaXQoKSB7XG4gICAgICAgIHRoaXMucHJvcHMuaGlkZU1vZGFsKCk7XG4gICAgICAgIGxldCB7YXNzZXRfdG9faXNzdWV9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgbGV0IHByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXG4gICAgICAgICAgICBhc3NldF90b19pc3N1ZS5nZXQoXCJwcmVjaXNpb25cIilcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IGFtb3VudCA9IHRoaXMuc3RhdGUuYW1vdW50LnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCBcIlwiKTtcbiAgICAgICAgYW1vdW50ICo9IHByZWNpc2lvbjtcblxuICAgICAgICBBcHBsaWNhdGlvbkFwaS5pc3N1ZV9hc3NldChcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudG9faWQsXG4gICAgICAgICAgICBhc3NldF90b19pc3N1ZS5nZXQoXCJpc3N1ZXJcIiksXG4gICAgICAgICAgICBhc3NldF90b19pc3N1ZS5nZXQoXCJpZFwiKSxcbiAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubWVtb1xuICAgICAgICAgICAgICAgID8gbmV3IEJ1ZmZlcih0aGlzLnN0YXRlLm1lbW8sIFwidXRmLThcIilcbiAgICAgICAgICAgICAgICA6IHRoaXMuc3RhdGUubWVtb1xuICAgICAgICApLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImlzc3VlIGVycm9yIGNhdWdodCBoZXJlOlwiLCBlcnIpO1xuICAgICAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgIFwibm90aWZpY2F0aW9ucy5hc3NldF9pc3N1ZV9mYWlsdXJlXCJcbiAgICAgICAgICAgICAgICApIC8vOiAke3RoaXMuc3RhdGUud2FsbGV0X3B1YmxpY19uYW1lfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgYW1vdW50OiAwLFxuICAgICAgICAgICAgdG86IFwiXCIsXG4gICAgICAgICAgICB0b19pZDogbnVsbCxcbiAgICAgICAgICAgIG1lbW86IFwiXCJcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25NZW1vQ2hhbmdlZChlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe21lbW86IGUudGFyZ2V0LnZhbHVlfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgYXNzZXRfdG9faXNzdWUgPSB0aGlzLnByb3BzLmFzc2V0X3RvX2lzc3VlLmdldChcImlkXCIpO1xuICAgICAgICBsZXQgdGFiSW5kZXggPSAxO1xuXG4gICAgICAgIGxldCBmb290ZXIgPSBbXG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIGtleT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vblN1Ym1pdC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnRvLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmFtb3VudFxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLnRvX2lkIHx8ICF0aGlzLnN0YXRlLmFtb3VudH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwibW9kYWwuaXNzdWUuc3VibWl0XCIpfVxuICAgICAgICAgICAgPC9CdXR0b24+LFxuICAgICAgICAgICAgPEJ1dHRvbiBrZXk9XCJjYW5jZWxcIiBvbkNsaWNrPXt0aGlzLnByb3BzLmhpZGVNb2RhbH0+XG4gICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImNhbmNlbFwiKX1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICBdO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8TW9kYWxcbiAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFwibW9kYWwuaXNzdWUuc3VibWl0XCIpfVxuICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMucHJvcHMudmlzaWJsZX1cbiAgICAgICAgICAgICAgICBvbkNhbmNlbD17dGhpcy5wcm9wcy5oaWRlTW9kYWx9XG4gICAgICAgICAgICAgICAgZm9vdGVyPXtmb290ZXJ9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGZvcm0gY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbCBmdWxsLXdpZHRoLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRhaW5lciBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBUIE8gKi99XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtcIm1vZGFsLmlzc3VlLnRvXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lPXt0aGlzLnN0YXRlLnRvfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY291bnRDaGFuZ2VkPXt0aGlzLm9uVG9BY2NvdW50Q2hhbmdlZC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vblRvQ2hhbmdlZC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnN0YXRlLnRvfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGFiSW5kZXgrK31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBBIE0gTyBVIE4gVCAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBbW91bnRTZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIm1vZGFsLmlzc3VlLmFtb3VudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dGhpcy5zdGF0ZS5hbW91bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQW1vdW50Q2hhbmdlZC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17YXNzZXRfdG9faXNzdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W2Fzc2V0X3RvX2lzc3VlXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9e3RhYkluZGV4Kyt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogIE0gRSBNIE8gICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJzcGFuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJ0cmFuc2Zlci5tZW1vXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICg8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ0cmFuc2Zlci5vcHRpb25hbFwiIC8+KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubWVtb31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9e3RhYkluZGV4Kyt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uTWVtb0NoYW5nZWQuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgIDwvTW9kYWw+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCaW5kVG9DaGFpblN0YXRlKElzc3VlTW9kYWwpO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmltcG9ydCBBc3NldEFjdGlvbnMgZnJvbSBcImFjdGlvbnMvQXNzZXRBY3Rpb25zXCI7XG5pbXBvcnQgSGVscENvbnRlbnQgZnJvbSBcIi4uL1V0aWxpdHkvSGVscENvbnRlbnRcIjtcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XG5pbXBvcnQge0NoYWluU3RvcmUsIENoYWluVmFsaWRhdGlvbn0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcbmltcG9ydCBBc3NldFNlbGVjdG9yIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0U2VsZWN0b3JcIjtcbmltcG9ydCBiaWcgZnJvbSBcImJpZ251bWJlci5qc1wiO1xuaW1wb3J0IGNuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xuaW1wb3J0IGFzc2V0VXRpbHMgZnJvbSBcImNvbW1vbi9hc3NldF91dGlsc1wiO1xuaW1wb3J0IHtUYWJzLCBUYWJ9IGZyb20gXCIuLi9VdGlsaXR5L1RhYnNcIjtcbmltcG9ydCBBbW91bnRTZWxlY3RvciBmcm9tIFwiLi4vVXRpbGl0eS9BbW91bnRTZWxlY3RvclwiO1xuaW1wb3J0IGFzc2V0Q29uc3RhbnRzIGZyb20gXCJjaGFpbi9hc3NldF9jb25zdGFudHNcIjtcbmltcG9ydCB7ZXN0aW1hdGVGZWV9IGZyb20gXCJjb21tb24vdHJ4SGVscGVyXCI7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XG5pbXBvcnQge1N3aXRjaH0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xuXG5sZXQgR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWSA9IG5ldyBiaWcoXG4gICAgYXNzZXRDb25zdGFudHMuR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWVxuKTtcblxuY2xhc3MgQml0QXNzZXRPcHRpb25zIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBiYWNraW5nQXNzZXQ6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkLFxuICAgICAgICBpc1VwZGF0ZTogUHJvcFR5cGVzLmJvb2xcbiAgICB9O1xuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgaXNVcGRhdGU6IGZhbHNlXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGJhY2tpbmdBc3NldDogcHJvcHMuYmFja2luZ0Fzc2V0LmdldChcInN5bWJvbFwiKSxcbiAgICAgICAgICAgIGVycm9yOiBudWxsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX29uSW5wdXRCYWNraW5nQXNzZXQoYXNzZXQpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZGlzYWJsZUJhY2tpbmdBc3NldENoYW5nZSlcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGlzYWJsZWRCYWNraW5nQXNzZXRDaGFuZ2VDYWxsYmFjaygpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBiYWNraW5nQXNzZXQ6IGFzc2V0LnRvVXBwZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9vbkZvdW5kQmFja2luZ0Fzc2V0KGFzc2V0KSB7XG4gICAgICAgIGlmIChhc3NldCkge1xuICAgICAgICAgICAgbGV0IGJhY2tpbmcgPVxuICAgICAgICAgICAgICAgIGFzc2V0LmdldChcImJpdGFzc2V0XCIpICYmXG4gICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRBc3NldChcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQuZ2V0SW4oW1wiYml0YXNzZXRcIiwgXCJvcHRpb25zXCIsIFwic2hvcnRfYmFja2luZ19hc3NldFwiXSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgbGV0IGJhY2tpbmdfYmFja2luZyA9XG4gICAgICAgICAgICAgICAgYmFja2luZyAmJlxuICAgICAgICAgICAgICAgIGJhY2tpbmcuZ2V0KFwiYml0YXNzZXRcIikgJiZcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldEFzc2V0KFxuICAgICAgICAgICAgICAgICAgICBiYWNraW5nLmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwib3B0aW9uc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG9ydF9iYWNraW5nX2Fzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGJhY2tpbmdfYmFja2luZyAmJiBiYWNraW5nX2JhY2tpbmcgIT09IFwiMS4zLjBcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBlcnJvcjogY291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5lcnJvcl90b29fZGVlcFwiXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uVXBkYXRlKFwiaW52YWxpZFwiLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWFzc2V0LmdldEluKFtcImJpdGFzc2V0XCIsIFwiaXNfcHJlZGljdGlvbl9tYXJrZXRcIl0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmlzUHJlZGljdGlvbk1hcmtldCAmJlxuICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJwcmVjaXNpb25cIikgIT09XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aGlzLnByb3BzLmFzc2V0UHJlY2lzaW9uLCAxMClcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogY291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZXJyb3JfcHJlY2lzaW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2Fzc2V0OiB0aGlzLnByb3BzLmFzc2V0U3ltYm9sfVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZShcImludmFsaWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZShcInNob3J0X2JhY2tpbmdfYXNzZXRcIiwgYXNzZXQuZ2V0KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uVXBkYXRlKFwiaW52YWxpZFwiLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZXJyb3JfaW52YWxpZFwiXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uVXBkYXRlKFwiaW52YWxpZFwiLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25VcGRhdGUoXCJpbnZhbGlkXCIsIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge2JpdGFzc2V0X29wdHN9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgbGV0IHtlcnJvcn0gPSB0aGlzLnN0YXRlO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGdyaWQtY29udGVudFwiPlxuICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZmVlZF9saWZldGltZV9zZWNcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2JpdGFzc2V0X29wdHMuZmVlZF9saWZldGltZV9zZWMgLyA2MH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uVXBkYXRlLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZlZWRfbGlmZXRpbWVfc2VjXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWluaW11bV9mZWVkc1wiIC8+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Yml0YXNzZXRfb3B0cy5taW5pbXVtX2ZlZWRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMucHJvcHMub25VcGRhdGUuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWluaW11bV9mZWVkc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG5cbiAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZvcmNlX3NldHRsZW1lbnRfZGVsYXlfc2VjXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtiaXRhc3NldF9vcHRzLmZvcmNlX3NldHRsZW1lbnRfZGVsYXlfc2VjIC8gNjB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vblVwZGF0ZS5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmb3JjZV9zZXR0bGVtZW50X2RlbGF5X3NlY1wiXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG5cbiAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZvcmNlX3NldHRsZW1lbnRfb2Zmc2V0X3BlcmNlbnRcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHMuZm9yY2Vfc2V0dGxlbWVudF9vZmZzZXRfcGVyY2VudCAvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRDb25zdGFudHMuR1JBUEhFTkVfMV9QRVJDRU5UXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vblVwZGF0ZS5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmb3JjZV9zZXR0bGVtZW50X29mZnNldF9wZXJjZW50XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWF4aW11bV9mb3JjZV9zZXR0bGVtZW50X3ZvbHVtZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0cy5tYXhpbXVtX2ZvcmNlX3NldHRsZW1lbnRfdm9sdW1lIC9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldENvbnN0YW50cy5HUkFQSEVORV8xX1BFUkNFTlRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uVXBkYXRlLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1heGltdW1fZm9yY2Vfc2V0dGxlbWVudF92b2x1bWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpbiBzbWFsbC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICA8QXNzZXRTZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5iYWNraW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbklucHV0QmFja2luZ0Fzc2V0LmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17dGhpcy5zdGF0ZS5iYWNraW5nQXNzZXR9XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldElucHV0PXt0aGlzLnN0YXRlLmJhY2tpbmdBc3NldH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCIxMDAlXCIsIHBhZGRpbmdSaWdodDogXCIxMHB4XCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25Gb3VuZD17dGhpcy5fb25Gb3VuZEJhY2tpbmdBc3NldC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB7ZXJyb3IgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgaGFzLWVycm9yXCI+e2Vycm9yfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbkJpdEFzc2V0T3B0aW9ucyA9IEJpbmRUb0NoYWluU3RhdGUoQml0QXNzZXRPcHRpb25zKTtcblxuY2xhc3MgQWNjb3VudEFzc2V0Q3JlYXRlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBjb3JlOiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZCxcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBcIjIuMC4wXCIsXG4gICAgICAgIGNvcmU6IFwiMS4zLjBcIlxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMucmVzZXRTdGF0ZShwcm9wcyk7XG4gICAgfVxuXG4gICAgcmVzZXRTdGF0ZShwcm9wcykge1xuICAgICAgICAvLyBsZXQgYXNzZXQgPSBwcm9wcy5hc3NldC50b0pTKCk7XG4gICAgICAgIGxldCBpc0JpdEFzc2V0ID0gZmFsc2U7XG4gICAgICAgIGxldCBwcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKDQpO1xuICAgICAgICBsZXQgY29yZVByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXG4gICAgICAgICAgICBwcm9wcy5jb3JlLmdldChcInByZWNpc2lvblwiKVxuICAgICAgICApO1xuXG4gICAgICAgIGxldCB7ZmxhZ0Jvb2xlYW5zLCBwZXJtaXNzaW9uQm9vbGVhbnN9ID0gdGhpcy5fZ2V0UGVybWlzc2lvbnMoe1xuICAgICAgICAgICAgaXNCaXRBc3NldFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBsZXQgZmxhZ3MgPSBhc3NldFV0aWxzLmdldEZsYWdzKGZsYWdCb29sZWFucyk7XG4gICAgICAgIC8vIGxldCBwZXJtaXNzaW9ucyA9IGFzc2V0VXRpbHMuZ2V0UGVybWlzc2lvbnMocGVybWlzc2lvbkJvb2xlYW5zLCBpc0JpdEFzc2V0KTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJhbGwgcGVybWlzc2lvbnM6XCIsIHBlcm1pc3Npb25Cb29sZWFucywgcGVybWlzc2lvbnMpXG5cbiAgICAgICAgbGV0IGNvcmVSYXRlQmFzZUFzc2V0TmFtZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQoXCIxLjMuMFwiKS5nZXQoXCJzeW1ib2xcIik7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVwZGF0ZToge1xuICAgICAgICAgICAgICAgIHN5bWJvbDogXCJcIixcbiAgICAgICAgICAgICAgICBwcmVjaXNpb246IDQsXG4gICAgICAgICAgICAgICAgbWF4X3N1cHBseTogMTAwMDAwLFxuICAgICAgICAgICAgICAgIG1heF9tYXJrZXRfZmVlOiAwLFxuICAgICAgICAgICAgICAgIG1hcmtldF9mZWVfcGVyY2VudDogMCxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge21haW46IFwiXCJ9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3JzOiB7XG4gICAgICAgICAgICAgICAgbWF4X3N1cHBseTogbnVsbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnM6IGZsYWdCb29sZWFucyxcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb29sZWFuczogcGVybWlzc2lvbkJvb2xlYW5zLFxuICAgICAgICAgICAgaXNCaXRBc3NldDogaXNCaXRBc3NldCxcbiAgICAgICAgICAgIGlzX3ByZWRpY3Rpb25fbWFya2V0OiBmYWxzZSxcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZToge1xuICAgICAgICAgICAgICAgIHF1b3RlOiB7XG4gICAgICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJhc2U6IHtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRfaWQ6IFwiMS4zLjBcIixcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAxXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJpdGFzc2V0X29wdHM6IHtcbiAgICAgICAgICAgICAgICBmZWVkX2xpZmV0aW1lX3NlYzogNjAgKiA2MCAqIDI0LFxuICAgICAgICAgICAgICAgIG1pbmltdW1fZmVlZHM6IDcsXG4gICAgICAgICAgICAgICAgZm9yY2Vfc2V0dGxlbWVudF9kZWxheV9zZWM6IDYwICogNjAgKiAyNCxcbiAgICAgICAgICAgICAgICBmb3JjZV9zZXR0bGVtZW50X29mZnNldF9wZXJjZW50OlxuICAgICAgICAgICAgICAgICAgICAxICogYXNzZXRDb25zdGFudHMuR1JBUEhFTkVfMV9QRVJDRU5ULFxuICAgICAgICAgICAgICAgIG1heGltdW1fZm9yY2Vfc2V0dGxlbWVudF92b2x1bWU6XG4gICAgICAgICAgICAgICAgICAgIDIwICogYXNzZXRDb25zdGFudHMuR1JBUEhFTkVfMV9QRVJDRU5ULFxuICAgICAgICAgICAgICAgIHNob3J0X2JhY2tpbmdfYXNzZXQ6IFwiMS4zLjBcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1hcmtldElucHV0OiBcIlwiXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX2dldFBlcm1pc3Npb25zKHN0YXRlKSB7XG4gICAgICAgIGxldCBmbGFnQm9vbGVhbnMgPSBhc3NldFV0aWxzLmdldEZsYWdCb29sZWFucygwLCBzdGF0ZS5pc0JpdEFzc2V0KTtcbiAgICAgICAgbGV0IHBlcm1pc3Npb25Cb29sZWFucyA9IGFzc2V0VXRpbHMuZ2V0RmxhZ0Jvb2xlYW5zKFxuICAgICAgICAgICAgXCJhbGxcIixcbiAgICAgICAgICAgIHN0YXRlLmlzQml0QXNzZXRcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLFxuICAgICAgICAgICAgcGVybWlzc2lvbkJvb2xlYW5zXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX2NyZWF0ZUFzc2V0KGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsZXQge1xuICAgICAgICAgICAgdXBkYXRlLFxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLFxuICAgICAgICAgICAgcGVybWlzc2lvbkJvb2xlYW5zLFxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLFxuICAgICAgICAgICAgaXNCaXRBc3NldCxcbiAgICAgICAgICAgIGlzX3ByZWRpY3Rpb25fbWFya2V0LFxuICAgICAgICAgICAgYml0YXNzZXRfb3B0c1xuICAgICAgICB9ID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICBsZXQge2FjY291bnR9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICBsZXQgZmxhZ3MgPSBhc3NldFV0aWxzLmdldEZsYWdzKGZsYWdCb29sZWFucywgaXNCaXRBc3NldCk7XG4gICAgICAgIGxldCBwZXJtaXNzaW9ucyA9IGFzc2V0VXRpbHMuZ2V0UGVybWlzc2lvbnMoXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnMsXG4gICAgICAgICAgICBpc0JpdEFzc2V0XG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUubWFya2V0SW5wdXQgIT09IHVwZGF0ZS5kZXNjcmlwdGlvbi5tYXJrZXQpIHtcbiAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvbi5tYXJrZXQgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IEpTT04uc3RyaW5naWZ5KHVwZGF0ZS5kZXNjcmlwdGlvbik7XG5cbiAgICAgICAgQXNzZXRBY3Rpb25zLmNyZWF0ZUFzc2V0KFxuICAgICAgICAgICAgYWNjb3VudC5nZXQoXCJpZFwiKSxcbiAgICAgICAgICAgIHVwZGF0ZSxcbiAgICAgICAgICAgIGZsYWdzLFxuICAgICAgICAgICAgcGVybWlzc2lvbnMsXG4gICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUsXG4gICAgICAgICAgICBpc0JpdEFzc2V0LFxuICAgICAgICAgICAgaXNfcHJlZGljdGlvbl9tYXJrZXQsXG4gICAgICAgICAgICBiaXRhc3NldF9vcHRzLFxuICAgICAgICAgICAgZGVzY3JpcHRpb25cbiAgICAgICAgKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBcIi4uLiBBc3NldEFjdGlvbnMuY3JlYXRlQXNzZXQoYWNjb3VudF9pZCwgdXBkYXRlKVwiLFxuICAgICAgICAgICAgICAgIGFjY291bnQuZ2V0KFwiaWRcIiksXG4gICAgICAgICAgICAgICAgdXBkYXRlLFxuICAgICAgICAgICAgICAgIGZsYWdzLFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb25zXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfaGFzQ2hhbmdlZCgpIHtcbiAgICAgICAgcmV0dXJuICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhcbiAgICAgICAgICAgIHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB0aGlzLnJlc2V0U3RhdGUodGhpcy5wcm9wcylcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBfcmVzZXQoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnJlc2V0U3RhdGUodGhpcy5wcm9wcykpO1xuICAgIH1cblxuICAgIF9mb3JjZVBvc2l0aXZlKG51bWJlcikge1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChudW1iZXIpIDwgMCA/IFwiMFwiIDogbnVtYmVyO1xuICAgIH1cblxuICAgIF9vblVwZGF0ZURlc2NyaXB0aW9uKHZhbHVlLCBlKSB7XG4gICAgICAgIGxldCB7dXBkYXRlfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGxldCB1cGRhdGVTdGF0ZSA9IHRydWU7XG5cbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xuICAgICAgICAgICAgY2FzZSBcImNvbmRpdGlvblwiOlxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZS5sZW5ndGggPiA2MCkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcInNob3J0X25hbWVcIjpcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUubGVuZ3RoID4gMzIpIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU3RhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJtYXJrZXRcIjpcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gZTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcInZpc2libGVcIjpcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gIXVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uW3ZhbHVlXSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVwZGF0ZVN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLl92YWxpZGF0ZUVkaXRGaWVsZHModXBkYXRlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uQ2hhbmdlQml0QXNzZXRPcHRzKHZhbHVlLCBlKSB7XG4gICAgICAgIGxldCB7Yml0YXNzZXRfb3B0cywgZXJyb3JzfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xuICAgICAgICAgICAgY2FzZSBcImZvcmNlX3NldHRsZW1lbnRfb2Zmc2V0X3BlcmNlbnRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJtYXhpbXVtX2ZvcmNlX3NldHRsZW1lbnRfdm9sdW1lXCI6XG4gICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0c1t2YWx1ZV0gPVxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGUudGFyZ2V0LnZhbHVlKSAqXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0Q29uc3RhbnRzLkdSQVBIRU5FXzFfUEVSQ0VOVDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJtaW5pbXVtX2ZlZWRzXCI6XG4gICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0c1t2YWx1ZV0gPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSwgMTApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImZlZWRfbGlmZXRpbWVfc2VjXCI6XG4gICAgICAgICAgICBjYXNlIFwiZm9yY2Vfc2V0dGxlbWVudF9kZWxheV9zZWNcIjpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpICogNjAsIDEwKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0c1t2YWx1ZV0gPSBwYXJzZUludChcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChlLnRhcmdldC52YWx1ZSkgKiA2MCxcbiAgICAgICAgICAgICAgICAgICAgMTBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwic2hvcnRfYmFja2luZ19hc3NldFwiOlxuICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHNbdmFsdWVdID0gZTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcImludmFsaWRcIjpcbiAgICAgICAgICAgICAgICBlcnJvcnMuaW52YWxpZF9iaXRhc3NldCA9IGU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0c1t2YWx1ZV0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpc1ZhbGlkID1cbiAgICAgICAgICAgICFlcnJvcnMuc3ltYm9sICYmICFlcnJvcnMubWF4X3N1cHBseSAmJiAhZXJyb3JzLmludmFsaWRfYml0YXNzZXQ7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNWYWxpZDogaXNWYWxpZCwgZXJyb3JzOiBlcnJvcnN9KTtcbiAgICB9XG5cbiAgICBfb25VcGRhdGVJbnB1dCh2YWx1ZSwgZSkge1xuICAgICAgICBsZXQge3VwZGF0ZSwgZXJyb3JzfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGxldCB1cGRhdGVTdGF0ZSA9IHRydWU7XG4gICAgICAgIGxldCBzaG91bGRSZXN0b3JlQ3Vyc29yID0gZmFsc2U7XG4gICAgICAgIGxldCBwcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKHRoaXMuc3RhdGUudXBkYXRlLnByZWNpc2lvbik7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICBjb25zdCBjYXJldCA9IHRhcmdldC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgY29uc3QgaW5wdXRWYWx1ZSA9IHRhcmdldC52YWx1ZTtcblxuICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgICAgICAgICBjYXNlIFwibWFya2V0X2ZlZV9wZXJjZW50XCI6XG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IHRoaXMuX2ZvcmNlUG9zaXRpdmUodGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcIm1heF9tYXJrZXRfZmVlXCI6XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBuZXcgYmlnKGlucHV0VmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGltZXMocHJlY2lzaW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmd0KEdSQVBIRU5FX01BWF9TSEFSRV9TVVBQTFkpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ycy5tYXhfbWFya2V0X2ZlZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBcIlRoZSBudW1iZXIgeW91IHRyaWVkIHRvIGVudGVyIGlzIHRvbyBsYXJnZVwiO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7ZXJyb3JzfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZSA9IHV0aWxzLmxpbWl0QnlQcmVjaXNpb24oXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS51cGRhdGUucHJlY2lzaW9uXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwicHJlY2lzaW9uXCI6XG4gICAgICAgICAgICAgICAgLy8gRW5mb3JjZSBwb3NpdGl2ZSBudW1iZXJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdGhpcy5fZm9yY2VQb3NpdGl2ZSh0YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwibWF4X3N1cHBseVwiOlxuICAgICAgICAgICAgICAgIHNob3VsZFJlc3RvcmVDdXJzb3IgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVnZXhwX251bWVyYWwgPSBuZXcgUmVnRXhwKC9bWzpkaWdpdDpdXS8pO1xuXG4gICAgICAgICAgICAgICAgLy8gRW5zdXJlIGlucHV0IGlzIHZhbGlkXG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleHBfbnVtZXJhbC50ZXN0KHRhcmdldC52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlID0gdGFyZ2V0LnZhbHVlLnJlcGxhY2UoL1teMC05Ll0vZywgXCJcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ2F0Y2ggaW5pdGlhbCBkZWNpbWFsIGlucHV0XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC52YWx1ZS5jaGFyQXQoMCkgPT0gXCIuXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlID0gXCIwLlwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENhdGNoIGRvdWJsZSBkZWNpbWFsIGFuZCByZW1vdmUgaWYgaW52YWxpZFxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlLmNoYXJBdCh0YXJnZXQudmFsdWUubGVuZ3RoKSAhPVxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWUuc2VhcmNoKFwiLlwiKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWUuc3Vic3RyKDEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZSA9IHV0aWxzLmxpbWl0QnlQcmVjaXNpb24oXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS51cGRhdGUucHJlY2lzaW9uXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdGFyZ2V0LnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgLy8gaWYgKChuZXcgYmlnKHRhcmdldC52YWx1ZSkpLnRpbWVzKE1hdGgucG93KDEwLCBwcmVjaXNpb24pLmd0KEdSQVBIRU5FX01BWF9TSEFSRV9TVVBQTFkpKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHVwZGF0ZSxcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGVycm9yczoge21heF9zdXBwbHk6IFwiVGhlIG51bWJlciB5b3UgdHJpZWQgdG8gZW50ZXIgaXMgdG9vIGxhcmdlXCJcbiAgICAgICAgICAgICAgICAvLyAgICAgfX0pO1xuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgICAgIHNob3VsZFJlc3RvcmVDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIEVuZm9yY2UgdXBwZXJjYXNlXG4gICAgICAgICAgICAgICAgY29uc3Qgc3ltYm9sID0gdGFyZ2V0LnZhbHVlLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgLy8gRW5mb3JjZSBjaGFyYWN0ZXJzXG4gICAgICAgICAgICAgICAgbGV0IHJlZ2V4cCA9IG5ldyBSZWdFeHAoXCJeWy5BLVowLTldKyRcIik7XG4gICAgICAgICAgICAgICAgaWYgKHN5bWJvbCAhPT0gXCJcIiAmJiAhcmVnZXhwLnRlc3Qoc3ltYm9sKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRBc3NldChzeW1ib2wpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVt2YWx1ZV0gPSB0aGlzLl9mb3JjZVBvc2l0aXZlKHN5bWJvbCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IHRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1cGRhdGVTdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dXBkYXRlOiB1cGRhdGV9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZFJlc3RvcmVDdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0aW9uU3RhcnQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZXQgLSAoaW5wdXRWYWx1ZS5sZW5ndGggLSB1cGRhdGVbdmFsdWVdLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uU3RhcnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGVFZGl0RmllbGRzKHVwZGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfdmFsaWRhdGVFZGl0RmllbGRzKG5ld19zdGF0ZSkge1xuICAgICAgICBsZXQge2Vycm9yc30gPSB0aGlzLnN0YXRlO1xuICAgICAgICBlcnJvcnMubWF4X3N1cHBseSA9IG51bGw7XG5cbiAgICAgICAgZXJyb3JzLnN5bWJvbCA9IENoYWluVmFsaWRhdGlvbi5pc192YWxpZF9zeW1ib2xfZXJyb3IobmV3X3N0YXRlLnN5bWJvbCk7XG4gICAgICAgIGxldCBleGlzdGluZ0Fzc2V0ID0gQ2hhaW5TdG9yZS5nZXRBc3NldChuZXdfc3RhdGUuc3ltYm9sKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nQXNzZXQpIHtcbiAgICAgICAgICAgIGVycm9ycy5zeW1ib2wgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5leGlzdHNcIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBlcnJvcnMubWF4X3N1cHBseSA9XG4gICAgICAgICAgICAgICAgbmV3X3N0YXRlLm1heF9zdXBwbHkgPD0gMFxuICAgICAgICAgICAgICAgICAgICA/IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXhfcG9zaXRpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgYmlnKG5ld19zdGF0ZS5tYXhfc3VwcGx5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAudGltZXMoTWF0aC5wb3coMTAsIG5ld19zdGF0ZS5wcmVjaXNpb24pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAuZ3QoR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy50b29fbGFyZ2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJlcnI6XCIsIGVycik7XG4gICAgICAgICAgICBlcnJvcnMubWF4X3N1cHBseSA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnRvb19sYXJnZVwiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGlzVmFsaWQgPVxuICAgICAgICAgICAgIWVycm9ycy5zeW1ib2wgJiYgIWVycm9ycy5tYXhfc3VwcGx5ICYmICFlcnJvcnMuaW52YWxpZF9iaXRhc3NldDtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc1ZhbGlkOiBpc1ZhbGlkLCBlcnJvcnM6IGVycm9yc30pO1xuICAgIH1cblxuICAgIF9vbkZsYWdDaGFuZ2Uoa2V5KSB7XG4gICAgICAgIGxldCBib29sZWFucyA9IHRoaXMuc3RhdGUuZmxhZ0Jvb2xlYW5zO1xuICAgICAgICBib29sZWFuc1trZXldID0gIWJvb2xlYW5zW2tleV07XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zOiBib29sZWFuc1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfb25QZXJtaXNzaW9uQ2hhbmdlKGtleSkge1xuICAgICAgICBsZXQgYm9vbGVhbnMgPSB0aGlzLnN0YXRlLnBlcm1pc3Npb25Cb29sZWFucztcbiAgICAgICAgYm9vbGVhbnNba2V5XSA9ICFib29sZWFuc1trZXldO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb29sZWFuczogYm9vbGVhbnNcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX29uSW5wdXRDb3JlQXNzZXQodHlwZSwgYXNzZXQpIHtcbiAgICAgICAgaWYgKHR5cGUgPT09IFwicXVvdGVcIikge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgcXVvdGVBc3NldElucHV0OiBhc3NldFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJiYXNlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGJhc2VBc3NldElucHV0OiBhc3NldFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfb25Gb3VuZENvcmVBc3NldCh0eXBlLCBhc3NldCkge1xuICAgICAgICBpZiAoYXNzZXQpIHtcbiAgICAgICAgICAgIGxldCBjb3JlX3JhdGUgPSB0aGlzLnN0YXRlLmNvcmVfZXhjaGFuZ2VfcmF0ZTtcbiAgICAgICAgICAgIGNvcmVfcmF0ZVt0eXBlXS5hc3NldF9pZCA9IGFzc2V0LmdldChcImlkXCIpO1xuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGU6IGNvcmVfcmF0ZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRlRWRpdEZpZWxkcyh7XG4gICAgICAgICAgICAgICAgbWF4X3N1cHBseTogdGhpcy5zdGF0ZS5tYXhfc3VwcGx5LFxuICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZTogY29yZV9yYXRlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9vbklucHV0TWFya2V0KGFzc2V0KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbWFya2V0SW5wdXQ6IGFzc2V0XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9vbkZvdW5kTWFya2V0QXNzZXQoYXNzZXQpIHtcbiAgICAgICAgaWYgKGFzc2V0KSB7XG4gICAgICAgICAgICB0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uKFwibWFya2V0XCIsIGFzc2V0LmdldChcInN5bWJvbFwiKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfb25Db3JlUmF0ZUNoYW5nZSh0eXBlLCBlKSB7XG4gICAgICAgIGxldCBhbW91bnQsIGFzc2V0O1xuICAgICAgICBpZiAodHlwZSA9PT0gXCJxdW90ZVwiKSB7XG4gICAgICAgICAgICBhbW91bnQgPSB1dGlscy5saW1pdEJ5UHJlY2lzaW9uKFxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudXBkYXRlLnByZWNpc2lvblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGFzc2V0ID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghZSB8fCAhKFwiYW1vdW50XCIgaW4gZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbW91bnQgPVxuICAgICAgICAgICAgICAgIGUuYW1vdW50ID09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgPyBcIjBcIlxuICAgICAgICAgICAgICAgICAgICA6IHV0aWxzLmxpbWl0QnlQcmVjaXNpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGUuYW1vdW50LnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCBcIlwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jb3JlLmdldChcInByZWNpc2lvblwiKVxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBhc3NldCA9IGUuYXNzZXQuZ2V0KFwiaWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQge2NvcmVfZXhjaGFuZ2VfcmF0ZX0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVbdHlwZV0gPSB7XG4gICAgICAgICAgICBhbW91bnQ6IGFtb3VudCxcbiAgICAgICAgICAgIGFzc2V0X2lkOiBhc3NldFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgfVxuXG4gICAgX29uVG9nZ2xlQml0QXNzZXQoKSB7XG4gICAgICAgIGxldCB7dXBkYXRlfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIHRoaXMuc3RhdGUuaXNCaXRBc3NldCA9ICF0aGlzLnN0YXRlLmlzQml0QXNzZXQ7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5pc0JpdEFzc2V0KSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmlzX3ByZWRpY3Rpb25fbWFya2V0ID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQge2ZsYWdCb29sZWFucywgcGVybWlzc2lvbkJvb2xlYW5zfSA9IHRoaXMuX2dldFBlcm1pc3Npb25zKFxuICAgICAgICAgICAgdGhpcy5zdGF0ZVxuICAgICAgICApO1xuICAgICAgICB0aGlzLnN0YXRlLmZsYWdCb29sZWFucyA9IGZsYWdCb29sZWFucztcbiAgICAgICAgdGhpcy5zdGF0ZS5wZXJtaXNzaW9uQm9vbGVhbnMgPSBwZXJtaXNzaW9uQm9vbGVhbnM7XG5cbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgIH1cblxuICAgIF9vblRvZ2dsZVBNKCkge1xuICAgICAgICB0aGlzLnN0YXRlLmlzX3ByZWRpY3Rpb25fbWFya2V0ID0gIXRoaXMuc3RhdGUuaXNfcHJlZGljdGlvbl9tYXJrZXQ7XG4gICAgICAgIHRoaXMuc3RhdGUudXBkYXRlLnByZWNpc2lvbiA9IHRoaXMucHJvcHMuY29yZS5nZXQoXCJwcmVjaXNpb25cIik7XG4gICAgICAgIHRoaXMuc3RhdGUuY29yZV9leGNoYW5nZV9yYXRlLmJhc2UuYXNzZXRfaWQgPSB0aGlzLnByb3BzLmNvcmUuZ2V0KFwiaWRcIik7XG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7Z2xvYmFsT2JqZWN0LCBjb3JlfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB7XG4gICAgICAgICAgICBlcnJvcnMsXG4gICAgICAgICAgICBpc1ZhbGlkLFxuICAgICAgICAgICAgdXBkYXRlLFxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLFxuICAgICAgICAgICAgcGVybWlzc2lvbkJvb2xlYW5zLFxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLFxuICAgICAgICAgICAgaXNfcHJlZGljdGlvbl9tYXJrZXQsXG4gICAgICAgICAgICBpc0JpdEFzc2V0LFxuICAgICAgICAgICAgYml0YXNzZXRfb3B0c1xuICAgICAgICB9ID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICAvLyBFc3RpbWF0ZSB0aGUgYXNzZXQgY3JlYXRpb24gZmVlIGZyb20gdGhlIHN5bWJvbCBjaGFyYWN0ZXIgbGVuZ3RoXG4gICAgICAgIGxldCBzeW1ib2xMZW5ndGggPSB1cGRhdGUuc3ltYm9sLmxlbmd0aCxcbiAgICAgICAgICAgIGNyZWF0ZUZlZSA9IFwiTi9BXCI7XG5cbiAgICAgICAgaWYgKHN5bWJvbExlbmd0aCA9PT0gMykge1xuICAgICAgICAgICAgY3JlYXRlRmVlID0gKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2VzdGltYXRlRmVlKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhc3NldF9jcmVhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcInN5bWJvbDNcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxPYmplY3RcbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e1wiMS4zLjBcIn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChzeW1ib2xMZW5ndGggPT09IDQpIHtcbiAgICAgICAgICAgIGNyZWF0ZUZlZSA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtlc3RpbWF0ZUZlZShcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfY3JlYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBbXCJzeW1ib2w0XCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsT2JqZWN0XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcIjEuMy4wXCJ9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3ltYm9sTGVuZ3RoID4gNCkge1xuICAgICAgICAgICAgY3JlYXRlRmVlID0gKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2VzdGltYXRlRmVlKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhc3NldF9jcmVhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcImxvbmdfc3ltYm9sXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsT2JqZWN0XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcIjEuMy4wXCJ9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb29wIG92ZXIgZmxhZ3NcbiAgICAgICAgbGV0IGZsYWdzID0gW107XG4gICAgICAgIGxldCBnZXRGbGFnID0gKGtleSwgb25DbGljaywgaXNDaGVja2VkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDx0YWJsZSBrZXk9e1widGFibGVfXCIgKyBrZXl9IGNsYXNzTmFtZT1cInRhYmxlXCI+XG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwiLCB3aWR0aDogXCI4MCVcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtgYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuJHtrZXl9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiBcIm5vbmVcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtpc0NoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25DbGlja31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHBlcm1pc3Npb25Cb29sZWFucykge1xuICAgICAgICAgICAgaWYgKHBlcm1pc3Npb25Cb29sZWFuc1trZXldICYmIGtleSAhPT0gXCJjaGFyZ2VfbWFya2V0X2ZlZVwiKSB7XG4gICAgICAgICAgICAgICAgZmxhZ3MucHVzaChcbiAgICAgICAgICAgICAgICAgICAgZ2V0RmxhZyhcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uRmxhZ0NoYW5nZS5iaW5kKHRoaXMsIGtleSksXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnQm9vbGVhbnNba2V5XVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZsYWdzLnB1c2goXG4gICAgICAgICAgICBnZXRGbGFnKFxuICAgICAgICAgICAgICAgIFwidmlzaWJsZVwiLFxuICAgICAgICAgICAgICAgIHRoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24uYmluZCh0aGlzLCBcInZpc2libGVcIiksXG4gICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uLnZpc2libGVcbiAgICAgICAgICAgICAgICAgICAgPyBmYWxzZVxuICAgICAgICAgICAgICAgICAgICA6IHVwZGF0ZS5kZXNjcmlwdGlvbi52aXNpYmxlID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gTG9vcCBvdmVyIHBlcm1pc3Npb25zXG4gICAgICAgIGxldCBwZXJtaXNzaW9ucyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBrZXkgaW4gcGVybWlzc2lvbkJvb2xlYW5zKSB7XG4gICAgICAgICAgICBwZXJtaXNzaW9ucy5wdXNoKFxuICAgICAgICAgICAgICAgIDx0YWJsZSBrZXk9e1widGFibGVfXCIgKyBrZXl9IGNsYXNzTmFtZT1cInRhYmxlXCI+XG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwiLCB3aWR0aDogXCI4MCVcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtgYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuJHtrZXl9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiBcIm5vbmVcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtwZXJtaXNzaW9uQm9vbGVhbnNba2V5XX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblBlcm1pc3Npb25DaGFuZ2UuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b25zID0gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3Jlc2V0LmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0ucmVzZXRcIil9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucmVzZXRcIiAvPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKFwiYnV0dG9uXCIsIHtkaXNhYmxlZDogIWlzVmFsaWR9KX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fY3JlYXRlQXNzZXQuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImhlYWRlci5jcmVhdGVfYXNzZXRcIiAvPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBzbWFsbC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtY29udGFpbmVyIGdlbmVyaWMtYm9yZGVyZWQtYm94XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJoZWFkZXIuY3JlYXRlX2Fzc2V0XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZz1cImNyZWF0ZUFzc2V0VGFiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY2NvdW50LXRhYnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNDbGFzcz1cImFjY291bnQtb3ZlcnZpZXcgbm8tcGFkZGluZyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudENsYXNzPVwiZ3JpZC1ibG9jayBzaHJpbmsgc21hbGwtdmVydGljYWwgbWVkaXVtLWhvcml6b250YWwgcGFkZGluZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudGVkPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b25zPXtjb25maXJtQnV0dG9uc31cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMucHJpbWFyeVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGdyaWQtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnN5bWJvbFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3VwZGF0ZS5zeW1ib2x9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZUlucHV0LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzeW1ib2xcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5zeW1ib2wgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLnN5bWJvbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1heF9zdXBwbHlcIiAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXBkYXRlLnN5bWJvbCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+KHt1cGRhdGUuc3ltYm9sfSk8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3VwZGF0ZS5tYXhfc3VwcGx5fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVJbnB1dC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWF4X3N1cHBseVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLm1heF9zdXBwbHkgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLm1heF9zdXBwbHl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5kZWNpbWFsc1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbj1cIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg9XCI4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcD1cIjFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicmFuZ2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dXBkYXRlLnByZWNpc2lvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInByZWNpc2lvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD57dXBkYXRlLnByZWNpc2lvbn08L3A+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbkJvdHRvbTogMTB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInR4dGxhYmVsIGNhbmNlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMucHJlY2lzaW9uX3dhcm5pbmdcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRhYmxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiBcImluaGVyaXRcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubXBhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e2JvcmRlcjogXCJub25lXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2lzQml0QXNzZXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblRvZ2dsZUJpdEFzc2V0LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0JpdEFzc2V0ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiaW5oZXJpdFwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMucG1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTd2l0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3ByZWRpY3Rpb25fbWFya2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25Ub2dnbGVQTS5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogQ0VSICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImgzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY29yZV9leGNoYW5nZV9yYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tbWFyZ2luXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMucXVvdGVfYXNzZXQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5xdW90ZV9hc3NldH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMuYmFzZV9hc3NldCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBoYXMtZXJyb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLmJhc2VfYXNzZXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tbWFyZ2luIHNtYWxsLTEyIG1lZGl1bS02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYW1vdW50LXNlbGVjdG9yXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogXCIxMHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwibGFiZWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMucXVvdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmxpbmUtbGFiZWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25Db3JlUmF0ZUNoYW5nZS5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucXVvdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFtb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tbWFyZ2luIHNtYWxsLTEyIG1lZGl1bS02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QW1vdW50U2VsZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmJhc2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYW1vdW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbkNvcmVSYXRlQ2hhbmdlLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYmFzZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMC4wXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiBcIjEwcHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5wcmljZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1dGlscy5mb3JtYXRfbnVtYmVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5nZXRfYXNzZXRfcHJpY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucXVvdGUuYW1vdW50ICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucHJlY2lzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVjaXNpb246XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5wcmVjaXNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFzZS5hbW91bnQgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwYXJzZUludChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucHJlY2lzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHx8IDgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXBkYXRlLnN5bWJvbH0vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvcmUuZ2V0KFwic3ltYm9sXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY2VyX3dhcm5pbmdfMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGFzLWVycm9yXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmNlcl93YXJuaW5nXzJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmFwcHJveF9mZWVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHtjcmVhdGVGZWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5kZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGdyaWQtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3toZWlnaHQ6IFwiN3JlbVwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz1cIjFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dXBkYXRlLmRlc2NyaXB0aW9uLm1haW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYWluXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuc2hvcnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPVwiMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvbi5zaG9ydF9uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24uYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNob3J0X25hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwibGFiZWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXJrZXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldFNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5uYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25JbnB1dE1hcmtldC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17dGhpcy5zdGF0ZS5tYXJrZXRJbnB1dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldElucHV0PXt0aGlzLnN0YXRlLm1hcmtldElucHV0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBcIjEwcHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Gb3VuZD17dGhpcy5fb25Gb3VuZE1hcmtldEFzc2V0LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lzX3ByZWRpY3Rpb25fbWFya2V0ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImgzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5jb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz1cIjFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uZGl0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZXhwaXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImRhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXhwaXJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhwaXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0JpdEFzc2V0ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYml0YXNzZXRfb3B0c1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJpdEFzc2V0T3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHM9e2JpdGFzc2V0X29wdHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25VcGRhdGU9e3RoaXMub25DaGFuZ2VCaXRBc3NldE9wdHMuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2luZ0Fzc2V0PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0cy5zaG9ydF9iYWNraW5nX2Fzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0UHJlY2lzaW9uPXt1cGRhdGUucHJlY2lzaW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0U3ltYm9sPXt1cGRhdGUuc3ltYm9sfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUHJlZGljdGlvbk1hcmtldD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3ByZWRpY3Rpb25fbWFya2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5wZXJtaXNzaW9uc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGdyaWQtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e21heFdpZHRoOiA4MDB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SGVscENvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbXBvbmVudHMvQWNjb3VudEFzc2V0Q3JlYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uPVwicGVybWlzc2lvbnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwZXJtaXNzaW9uc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZmxhZ3NcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBncmlkLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ttYXhXaWR0aDogODAwfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEhlbHBDb250ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb21wb25lbnRzL0FjY291bnRBc3NldENyZWF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbj1cImZsYWdzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cGVybWlzc2lvbkJvb2xlYW5zW1wiY2hhcmdlX21hcmtldF9mZWVcIl0gPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiaDNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1hcmtldF9mZWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjgwJVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5jaGFyZ2VfbWFya2V0X2ZlZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdCb29sZWFucy5jaGFyZ2VfbWFya2V0X2ZlZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25GbGFnQ2hhbmdlLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hhcmdlX21hcmtldF9mZWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICFmbGFnQm9vbGVhbnMuY2hhcmdlX21hcmtldF9mZWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWFya2V0X2ZlZVwiIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICglKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLm1hcmtldF9mZWVfcGVyY2VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZUlucHV0LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXJrZXRfZmVlX3BlcmNlbnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWF4X21hcmtldF9mZWVcIiAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoe3VwZGF0ZS5zeW1ib2x9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLm1heF9tYXJrZXRfZmVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1heF9tYXJrZXRfZmVlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMubWF4X21hcmtldF9mZWUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLm1heF9tYXJrZXRfZmVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZmxhZ3NcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmbGFnc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5BY2NvdW50QXNzZXRDcmVhdGUgPSBCaW5kVG9DaGFpblN0YXRlKEFjY291bnRBc3NldENyZWF0ZSk7XG5cbmV4cG9ydCB7QWNjb3VudEFzc2V0Q3JlYXRlLCBCaXRBc3NldE9wdGlvbnN9O1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmltcG9ydCBBc3NldEFjdGlvbnMgZnJvbSBcImFjdGlvbnMvQXNzZXRBY3Rpb25zXCI7XG5pbXBvcnQgSGVscENvbnRlbnQgZnJvbSBcIi4uL1V0aWxpdHkvSGVscENvbnRlbnRcIjtcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xuaW1wb3J0IEZvcm1hdHRlZEZlZSBmcm9tIFwiLi4vVXRpbGl0eS9Gb3JtYXR0ZWRGZWVcIjtcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcbmltcG9ydCBBc3NldFdyYXBwZXIgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXRXcmFwcGVyXCI7XG5pbXBvcnQgQW1vdW50U2VsZWN0b3IgZnJvbSBcIi4uL1V0aWxpdHkvQW1vdW50U2VsZWN0b3JcIjtcbmltcG9ydCBGb3JtYXR0ZWRQcmljZSBmcm9tIFwiLi4vVXRpbGl0eS9Gb3JtYXR0ZWRQcmljZVwiO1xuaW1wb3J0IEFzc2V0U2VsZWN0b3IgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXRTZWxlY3RvclwiO1xuaW1wb3J0IGJpZyBmcm9tIFwiYmlnbnVtYmVyLmpzXCI7XG5pbXBvcnQgY25hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XG5pbXBvcnQgYXNzZXRVdGlscyBmcm9tIFwiY29tbW9uL2Fzc2V0X3V0aWxzXCI7XG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xuaW1wb3J0IHtCaXRBc3NldE9wdGlvbnN9IGZyb20gXCIuL0FjY291bnRBc3NldENyZWF0ZVwiO1xuaW1wb3J0IGFzc2V0Q29uc3RhbnRzIGZyb20gXCJjaGFpbi9hc3NldF9jb25zdGFudHNcIjtcbmltcG9ydCBBc3NldFdoaXRlbGlzdCBmcm9tIFwiLi9Bc3NldFdoaXRlbGlzdFwiO1xuaW1wb3J0IEFzc2V0RmVlZFByb2R1Y2VycyBmcm9tIFwiLi9Bc3NldEZlZWRQcm9kdWNlcnNcIjtcbmltcG9ydCBaZkFwaSBmcm9tIFwicmVhY3QtZm91bmRhdGlvbi1hcHBzL3NyYy91dGlscy9mb3VuZGF0aW9uLWFwaVwiO1xuaW1wb3J0IHt3aXRoUm91dGVyfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuaW1wb3J0IHtNb2RhbCwgQnV0dG9uLCBOb3RpZmljYXRpb24sIFN3aXRjaH0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xuXG5sZXQgR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWSA9IG5ldyBiaWcoXG4gICAgYXNzZXRDb25zdGFudHMuR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWVxuKTtcblxuY29uc3QgZGlzYWJsZWRCYWNraW5nQXNzZXRDaGFuZ2VDYWxsYmFjayA9ICgpID0+IHtcbiAgICBOb3RpZmljYXRpb24uZXJyb3Ioe1xuICAgICAgICBtZXNzYWdlOiBjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmludmFsaWRfYmFja2luZ19hc3NldF9jaGFuZ2VcIlxuICAgICAgICApXG4gICAgfSk7XG59O1xuXG5jbGFzcyBBY2NvdW50QXNzZXRVcGRhdGUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGdsb2JhbE9iamVjdDogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGdsb2JhbE9iamVjdDogXCIyLjAuMFwiXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5yZXNldFN0YXRlKHByb3BzKTtcblxuICAgICAgICB0aGlzLnNob3dBc3NldFVwZGF0ZUNvbmZpcm1hdGlvbk1vZGFsID0gdGhpcy5zaG93QXNzZXRVcGRhdGVDb25maXJtYXRpb25Nb2RhbC5iaW5kKFxuICAgICAgICAgICAgdGhpc1xuICAgICAgICApO1xuICAgICAgICB0aGlzLmhpZGVBc3NldFVwZGF0ZUNvbmZpcm1hdGlvbk1vZGFsID0gdGhpcy5oaWRlQXNzZXRVcGRhdGVDb25maXJtYXRpb25Nb2RhbC5iaW5kKFxuICAgICAgICAgICAgdGhpc1xuICAgICAgICApO1xuICAgIH1cblxuICAgIF9vcGVuQ29uZmlybSgpIHtcbiAgICAgICAgdGhpcy5zaG93QXNzZXRVcGRhdGVDb25maXJtYXRpb25Nb2RhbCgpO1xuICAgIH1cblxuICAgIF9jYW5jZWxDb25maXJtKCkge1xuICAgICAgICB0aGlzLmhpZGVBc3NldFVwZGF0ZUNvbmZpcm1hdGlvbk1vZGFsKCk7XG4gICAgfVxuXG4gICAgcmVzZXRTdGF0ZShwcm9wcykge1xuICAgICAgICBsZXQgYXNzZXQgPSBwcm9wcy5hc3NldC50b0pTKCk7XG4gICAgICAgIGxldCBpc0JpdEFzc2V0ID0gYXNzZXQuYml0YXNzZXRfZGF0YV9pZCAhPT0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihhc3NldC5wcmVjaXNpb24pO1xuICAgICAgICBsZXQgY29yZVByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXG4gICAgICAgICAgICBwcm9wcy5jb3JlLmdldChcInByZWNpc2lvblwiKVxuICAgICAgICApO1xuXG4gICAgICAgIGxldCBtYXhfbWFya2V0X2ZlZSA9IG5ldyBiaWcoYXNzZXQub3B0aW9ucy5tYXhfbWFya2V0X2ZlZSlcbiAgICAgICAgICAgIC5kaXYocHJlY2lzaW9uKVxuICAgICAgICAgICAgLnRvU3RyaW5nKCk7XG4gICAgICAgIGxldCBtYXhfc3VwcGx5ID0gbmV3IGJpZyhhc3NldC5vcHRpb25zLm1heF9zdXBwbHkpXG4gICAgICAgICAgICAuZGl2KHByZWNpc2lvbilcbiAgICAgICAgICAgIC50b1N0cmluZygpO1xuICAgICAgICBsZXQgY29yZV9leGNoYW5nZV9yYXRlID0gYXNzZXQub3B0aW9ucy5jb3JlX2V4Y2hhbmdlX3JhdGU7XG4gICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZS5hbW91bnQgPVxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLnF1b3RlLmFzc2V0X2lkID09PSBhc3NldC5pZFxuICAgICAgICAgICAgICAgID8gbmV3IGJpZyhjb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGUuYW1vdW50KVxuICAgICAgICAgICAgICAgICAgICAgIC5kaXYocHJlY2lzaW9uKVxuICAgICAgICAgICAgICAgICAgICAgIC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgOiBuZXcgYmlnKGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZS5hbW91bnQpXG4gICAgICAgICAgICAgICAgICAgICAgLmRpdihjb3JlUHJlY2lzaW9uKVxuICAgICAgICAgICAgICAgICAgICAgIC50b1N0cmluZygpO1xuXG4gICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFtb3VudCA9XG4gICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZS5hc3NldF9pZCA9PT0gYXNzZXQuaWRcbiAgICAgICAgICAgICAgICA/IG5ldyBiaWcoY29yZV9leGNoYW5nZV9yYXRlLmJhc2UuYW1vdW50KVxuICAgICAgICAgICAgICAgICAgICAgIC5kaXYocHJlY2lzaW9uKVxuICAgICAgICAgICAgICAgICAgICAgIC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgOiBuZXcgYmlnKGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFtb3VudClcbiAgICAgICAgICAgICAgICAgICAgICAuZGl2KGNvcmVQcmVjaXNpb24pXG4gICAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgbGV0IGZsYWdCb29sZWFucyA9IGFzc2V0VXRpbHMuZ2V0RmxhZ0Jvb2xlYW5zKFxuICAgICAgICAgICAgYXNzZXQub3B0aW9ucy5mbGFncyxcbiAgICAgICAgICAgIGlzQml0QXNzZXRcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IHBlcm1pc3Npb25Cb29sZWFucyA9IGFzc2V0VXRpbHMuZ2V0RmxhZ0Jvb2xlYW5zKFxuICAgICAgICAgICAgYXNzZXQub3B0aW9ucy5pc3N1ZXJfcGVybWlzc2lvbnMsXG4gICAgICAgICAgICBpc0JpdEFzc2V0XG4gICAgICAgICk7XG4gICAgICAgIGFzc2V0Lm9wdGlvbnMubWFya2V0X2ZlZV9wZXJjZW50IC89IDEwMDtcblxuICAgICAgICBsZXQgY29yZVJhdGVRdW90ZUFzc2V0TmFtZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQoXG4gICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGUuYXNzZXRfaWRcbiAgICAgICAgKS5nZXQoXCJzeW1ib2xcIik7XG4gICAgICAgIGxldCBjb3JlUmF0ZUJhc2VBc3NldE5hbWUgPSBDaGFpblN0b3JlLmdldEFzc2V0KFxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLmJhc2UuYXNzZXRfaWRcbiAgICAgICAgKS5nZXQoXCJzeW1ib2xcIik7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzQXNzZXRVcGRhdGVDb25maXJtYXRpb25Nb2RhbFZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgdXBkYXRlOiB7XG4gICAgICAgICAgICAgICAgbWF4X3N1cHBseTogbWF4X3N1cHBseSxcbiAgICAgICAgICAgICAgICBtYXhfbWFya2V0X2ZlZTogbWF4X21hcmtldF9mZWUsXG4gICAgICAgICAgICAgICAgbWFya2V0X2ZlZV9wZXJjZW50OiBhc3NldC5vcHRpb25zLm1hcmtldF9mZWVfcGVyY2VudCxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYXNzZXRVdGlscy5wYXJzZURlc2NyaXB0aW9uKFxuICAgICAgICAgICAgICAgICAgICBhc3NldC5vcHRpb25zLmRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZTogY29yZV9leGNoYW5nZV9yYXRlLFxuICAgICAgICAgICAgaXNzdWVyOiBhc3NldC5pc3N1ZXIsXG4gICAgICAgICAgICBuZXdfaXNzdWVyX2FjY291bnRfaWQ6IG51bGwsXG4gICAgICAgICAgICBuZXdfZnVuZGVyX2FjY291bnQ6IHByb3BzLmFjY291bnQuZ2V0KFwiaWRcIiksXG4gICAgICAgICAgICBhc3NldF90b191cGRhdGU6IGFzc2V0LmlkLFxuICAgICAgICAgICAgZXJyb3JzOiB7XG4gICAgICAgICAgICAgICAgbWF4X3N1cHBseTogbnVsbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5ld19hdXRob3JpdHlfaWQ6IG51bGwsXG4gICAgICAgICAgICBhdXRob3JpdHlfbmFtZTogbnVsbCxcbiAgICAgICAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnM6IGZsYWdCb29sZWFucyxcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb29sZWFuczogcGVybWlzc2lvbkJvb2xlYW5zLFxuICAgICAgICAgICAgaXNCaXRBc3NldDogaXNCaXRBc3NldCxcbiAgICAgICAgICAgIGNvcmVSYXRlUXVvdGVBc3NldE5hbWU6IGNvcmVSYXRlUXVvdGVBc3NldE5hbWUsXG4gICAgICAgICAgICBxdW90ZUFzc2V0SW5wdXQ6IGNvcmVSYXRlUXVvdGVBc3NldE5hbWUsXG4gICAgICAgICAgICBjb3JlUmF0ZUJhc2VBc3NldE5hbWU6IGNvcmVSYXRlQmFzZUFzc2V0TmFtZSxcbiAgICAgICAgICAgIGJhc2VBc3NldElucHV0OiBjb3JlUmF0ZUJhc2VBc3NldE5hbWUsXG4gICAgICAgICAgICBjbGFpbUZlZXNBbW91bnQ6IDAsXG4gICAgICAgICAgICBiaXRhc3NldF9vcHRzOiBpc0JpdEFzc2V0ID8gYXNzZXQuYml0YXNzZXQub3B0aW9ucyA6IG51bGwsXG4gICAgICAgICAgICBvcmlnaW5hbF9iaXRhc3NldF9vcHRzOiBpc0JpdEFzc2V0XG4gICAgICAgICAgICAgICAgPyBwcm9wcy5hc3NldC5nZXRJbihbXCJiaXRhc3NldFwiLCBcIm9wdGlvbnNcIl0pLnRvSlMoKVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIG1hcmtldElucHV0OiBcIlwiLFxuICAgICAgICAgICAgd2hpdGVsaXN0X2F1dGhvcml0aWVzOiBwcm9wcy5hc3NldC5nZXRJbihbXG4gICAgICAgICAgICAgICAgXCJvcHRpb25zXCIsXG4gICAgICAgICAgICAgICAgXCJ3aGl0ZWxpc3RfYXV0aG9yaXRpZXNcIlxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICBibGFja2xpc3RfYXV0aG9yaXRpZXM6IHByb3BzLmFzc2V0LmdldEluKFtcbiAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcbiAgICAgICAgICAgICAgICBcImJsYWNrbGlzdF9hdXRob3JpdGllc1wiXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIHdoaXRlbGlzdF9tYXJrZXRzOiBwcm9wcy5hc3NldC5nZXRJbihbXG4gICAgICAgICAgICAgICAgXCJvcHRpb25zXCIsXG4gICAgICAgICAgICAgICAgXCJ3aGl0ZWxpc3RfbWFya2V0c1wiXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIGJsYWNrbGlzdF9tYXJrZXRzOiBwcm9wcy5hc3NldC5nZXRJbihbXG4gICAgICAgICAgICAgICAgXCJvcHRpb25zXCIsXG4gICAgICAgICAgICAgICAgXCJibGFja2xpc3RfbWFya2V0c1wiXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIG1heEZlZWRQcm9kdWNlcnM6IHByb3BzLmdsb2JhbE9iamVjdC5nZXRJbihbXG4gICAgICAgICAgICAgICAgXCJwYXJhbWV0ZXJzXCIsXG4gICAgICAgICAgICAgICAgXCJtYXhpbXVtX2Fzc2V0X2ZlZWRfcHVibGlzaGVyc1wiXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIGZlZWRQcm9kdWNlcnM6IGlzQml0QXNzZXRcbiAgICAgICAgICAgICAgICA/IHByb3BzLmFzc2V0LmdldEluKFtcImJpdGFzc2V0XCIsIFwiZmVlZHNcIl0sIFtdKS5tYXAoYSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZmlyc3QoKTtcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgb3JpZ2luYWxGZWVkUHJvZHVjZXJzOiBpc0JpdEFzc2V0XG4gICAgICAgICAgICAgICAgPyBwcm9wcy5hc3NldC5nZXRJbihbXCJiaXRhc3NldFwiLCBcImZlZWRzXCJdLCBbXSkubWFwKGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmZpcnN0KCk7XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGhpZGVBc3NldFVwZGF0ZUNvbmZpcm1hdGlvbk1vZGFsKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzQXNzZXRVcGRhdGVDb25maXJtYXRpb25Nb2RhbFZpc2libGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3dBc3NldFVwZGF0ZUNvbmZpcm1hdGlvbk1vZGFsKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzQXNzZXRVcGRhdGVDb25maXJtYXRpb25Nb2RhbFZpc2libGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVXNpbmcgSlNPTi5zdHJpbmdpZnkgZm9yIChmYXN0PykgY29tcGFyc2lvbiwgY291bGQgYmUgaW1wcm92ZWQsIGJ1dCBzZWVtcyBlbm91Z2ggaGVyZSBhcyB0aGUgb3JkZXIgaXMgZml4ZWRcbiAgICBhc3NldENoYW5nZWQoKSB7XG4gICAgICAgIGxldCBzID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgbGV0IHAgPSB0aGlzLnJlc2V0U3RhdGUodGhpcy5wcm9wcyk7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLnVwZGF0ZSkgIT09IEpTT04uc3RyaW5naWZ5KHAudXBkYXRlKSB8fFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy5jb3JlX2V4Y2hhbmdlX3JhdGUpICE9PVxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAuY29yZV9leGNoYW5nZV9yYXRlKSB8fFxuICAgICAgICAgICAgKHMubmV3X2lzc3Vlcl9hY2NvdW50X2lkICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgcy5uZXdfaXNzdWVyX2FjY291bnRfaWQgIT09IHMuaXNzdWVyKSB8fFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy5mbGFnQm9vbGVhbnMpICE9PSBKU09OLnN0cmluZ2lmeShwLmZsYWdCb29sZWFucykgfHxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMucGVybWlzc2lvbkJvb2xlYW5zKSAhPT1cbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLnBlcm1pc3Npb25Cb29sZWFucykgfHxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMud2hpdGVsaXN0X2F1dGhvcml0aWVzKSAhPT1cbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLndoaXRlbGlzdF9hdXRob3JpdGllcykgfHxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMuYmxhY2tsaXN0X2F1dGhvcml0aWVzKSAhPT1cbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLmJsYWNrbGlzdF9hdXRob3JpdGllcykgfHxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMud2hpdGVsaXN0X21hcmtldHMpICE9PVxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAud2hpdGVsaXN0X21hcmtldHMpIHx8XG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLmJsYWNrbGlzdF9tYXJrZXRzKSAhPT1cbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLmJsYWNrbGlzdF9tYXJrZXRzKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0YWIgSUQgb24gY2hhbmdlXG4gICAgdGFiQ2hhbmdlZCh0YWJJZCkge1xuICAgICAgICBsZXQgdGFic0NoYW5nZWQgPSB0aGlzLnRhYnNDaGFuZ2VkKCk7XG4gICAgICAgIHJldHVybiB0YWJzQ2hhbmdlZFt0YWJJZF0gPyB0YWJzQ2hhbmdlZFt0YWJJZF0gOiBmYWxzZTtcbiAgICB9XG5cbiAgICB0YWJzQ2hhbmdlZCgpIHtcbiAgICAgICAgbGV0IHMgPSB0aGlzLnN0YXRlO1xuICAgICAgICBsZXQgcCA9IHRoaXMucmVzZXRTdGF0ZSh0aGlzLnByb3BzKTtcblxuICAgICAgICBsZXQgdGFiVXBkYXRlSW5kZXggPSBbXTtcblxuICAgICAgICAvKiBQcmltYXJ5ICovXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHMudXBkYXRlLm1heF9zdXBwbHkgIT09IHAudXBkYXRlLm1heF9zdXBwbHkgfHxcbiAgICAgICAgICAgIHMuY29yZV9leGNoYW5nZV9yYXRlLmJhc2UuYW1vdW50ICE9PVxuICAgICAgICAgICAgICAgIHAuY29yZV9leGNoYW5nZV9yYXRlLmJhc2UuYW1vdW50IHx8XG4gICAgICAgICAgICBzLmNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZS5hbW91bnQgIT09XG4gICAgICAgICAgICAgICAgcC5jb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGUuYW1vdW50XG4gICAgICAgIClcbiAgICAgICAgICAgIHRhYlVwZGF0ZUluZGV4W1wiMFwiXSA9IHRydWU7XG5cbiAgICAgICAgLyogV2hpdGVsaXN0ICovXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMud2hpdGVsaXN0X2F1dGhvcml0aWVzKSAhPT1cbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLndoaXRlbGlzdF9hdXRob3JpdGllcykgfHxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMuYmxhY2tsaXN0X2F1dGhvcml0aWVzKSAhPT1cbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLmJsYWNrbGlzdF9hdXRob3JpdGllcykgfHxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMud2hpdGVsaXN0X21hcmtldHMpICE9PVxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAud2hpdGVsaXN0X21hcmtldHMpIHx8XG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLmJsYWNrbGlzdF9tYXJrZXRzKSAhPT1cbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLmJsYWNrbGlzdF9tYXJrZXRzKVxuICAgICAgICApXG4gICAgICAgICAgICB0YWJVcGRhdGVJbmRleFtcIjFcIl0gPSB0cnVlO1xuXG4gICAgICAgIC8qIERlc2NyaXB0aW9uICovXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHMudXBkYXRlLmRlc2NyaXB0aW9uLm1haW4gIT09IHAudXBkYXRlLmRlc2NyaXB0aW9uLm1haW4gfHxcbiAgICAgICAgICAgIHMudXBkYXRlLmRlc2NyaXB0aW9uLnNob3J0X25hbWUgIT09XG4gICAgICAgICAgICAgICAgcC51cGRhdGUuZGVzY3JpcHRpb24uc2hvcnRfbmFtZSB8fFxuICAgICAgICAgICAgcy51cGRhdGUuZGVzY3JpcHRpb24ubWFya2V0ICE9PSBwLnVwZGF0ZS5kZXNjcmlwdGlvbi5tYXJrZXRcbiAgICAgICAgKVxuICAgICAgICAgICAgdGFiVXBkYXRlSW5kZXhbXCIyXCJdID0gdHJ1ZTtcblxuICAgICAgICAvKiBCaXRhc3NldCBvcHRpb25zICovXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMuYml0YXNzZXRfb3B0cykgIT09XG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLm9yaWdpbmFsX2JpdGFzc2V0X29wdHMpXG4gICAgICAgIClcbiAgICAgICAgICAgIHRhYlVwZGF0ZUluZGV4W1wiM1wiXSA9IHRydWU7XG5cbiAgICAgICAgLyogUGVybWlzc2lvbnMgKi9cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy5wZXJtaXNzaW9uQm9vbGVhbnMpICE9PVxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC5wZXJtaXNzaW9uQm9vbGVhbnMpXG4gICAgICAgIClcbiAgICAgICAgICAgIHRhYlVwZGF0ZUluZGV4W1wiNFwiXSA9IHRydWU7XG5cbiAgICAgICAgLyogRmxhZ3MgKi9cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy5mbGFnQm9vbGVhbnMpICE9PSBKU09OLnN0cmluZ2lmeShwLmZsYWdCb29sZWFucykgfHxcbiAgICAgICAgICAgIHMudXBkYXRlLm1hcmtldF9mZWVfcGVyY2VudCAhPT0gcC51cGRhdGUubWFya2V0X2ZlZV9wZXJjZW50IHx8XG4gICAgICAgICAgICBzLnVwZGF0ZS5tYXhfbWFya2V0X2ZlZSAhPT0gcC51cGRhdGUubWF4X21hcmtldF9mZWVcbiAgICAgICAgKVxuICAgICAgICAgICAgdGFiVXBkYXRlSW5kZXhbXCI1XCJdID0gdHJ1ZTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLmZlZWRQcm9kdWNlcnMpICE9PVxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC5vcmlnaW5hbEZlZWRQcm9kdWNlcnMpXG4gICAgICAgIClcbiAgICAgICAgICAgIHRhYlVwZGF0ZUluZGV4W1wiNlwiXSA9IHRydWU7XG5cbiAgICAgICAgcmV0dXJuIHRhYlVwZGF0ZUluZGV4O1xuICAgIH1cblxuICAgIHBhZ2VDaGFuZ2VkKCkge1xuICAgICAgICBsZXQge1xuICAgICAgICAgICAgaXNCaXRBc3NldCxcbiAgICAgICAgICAgIGJpdGFzc2V0X29wdHMsXG4gICAgICAgICAgICBvcmlnaW5hbF9iaXRhc3NldF9vcHRzLFxuICAgICAgICAgICAgZmVlZFByb2R1Y2VycyxcbiAgICAgICAgICAgIG9yaWdpbmFsRmVlZFByb2R1Y2Vyc1xuICAgICAgICB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMuYXNzZXRDaGFuZ2VkKCkgfHxcbiAgICAgICAgICAgIChpc0JpdEFzc2V0ICYmXG4gICAgICAgICAgICAgICAgKEpTT04uc3RyaW5naWZ5KGJpdGFzc2V0X29wdHMpICE9PVxuICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShvcmlnaW5hbF9iaXRhc3NldF9vcHRzKSB8fFxuICAgICAgICAgICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3coXG4gICAgICAgICAgICAgICAgICAgICAgICBmZWVkUHJvZHVjZXJzLnRvSlMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRmVlZFByb2R1Y2Vycy50b0pTKClcbiAgICAgICAgICAgICAgICAgICAgKSkpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgX3VwZGF0ZUFzc2V0KGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIC8vIENsb3NlIGNvbmZpcm1fbW9kYWwgaWYgaXQncyBvcGVuXG4gICAgICAgIHRoaXMuaGlkZUFzc2V0VXBkYXRlQ29uZmlybWF0aW9uTW9kYWwoKTtcblxuICAgICAgICBsZXQge1xuICAgICAgICAgICAgdXBkYXRlLFxuICAgICAgICAgICAgaXNzdWVyLFxuICAgICAgICAgICAgbmV3X2lzc3Vlcl9hY2NvdW50X2lkLFxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLFxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLFxuICAgICAgICAgICAgcGVybWlzc2lvbkJvb2xlYW5zLFxuICAgICAgICAgICAgaXNCaXRBc3NldCxcbiAgICAgICAgICAgIGJpdGFzc2V0X29wdHMsXG4gICAgICAgICAgICBvcmlnaW5hbF9iaXRhc3NldF9vcHRzLFxuICAgICAgICAgICAgZmVlZFByb2R1Y2VycyxcbiAgICAgICAgICAgIG9yaWdpbmFsRmVlZFByb2R1Y2Vyc1xuICAgICAgICB9ID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICBsZXQgZmxhZ3MgPSBhc3NldFV0aWxzLmdldEZsYWdzKGZsYWdCb29sZWFucyk7XG5cbiAgICAgICAgLy8gSGFuZGxlIGluY29ycmVjdCBmbGFnIGZyb20gZ2VuZXNpc1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFzc2V0LmdldEluKFtcIm9wdGlvbnNcIiwgXCJmbGFnc1wiXSkgJiAxMjggJiZcbiAgICAgICAgICAgICEodGhpcy5wcm9wcy5hc3NldC5nZXRJbihbXCJvcHRpb25zXCIsIFwiaXNzdWVyX3Blcm1pc3Npb25zXCJdKSAmIDEyOClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBmbGFncyArPSAxMjg7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBlcm1pc3Npb25zID0gYXNzZXRVdGlscy5nZXRQZXJtaXNzaW9ucyhcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb29sZWFucyxcbiAgICAgICAgICAgIGlzQml0QXNzZXRcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5tYXJrZXRJbnB1dCAhPT0gdXBkYXRlLmRlc2NyaXB0aW9uLm1hcmtldCkge1xuICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uLm1hcmtldCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gSlNPTi5zdHJpbmdpZnkodXBkYXRlLmRlc2NyaXB0aW9uKTtcblxuICAgICAgICBsZXQgYXV0aHMgPSB7XG4gICAgICAgICAgICB3aGl0ZWxpc3RfYXV0aG9yaXRpZXM6IHRoaXMuc3RhdGUud2hpdGVsaXN0X2F1dGhvcml0aWVzLFxuICAgICAgICAgICAgYmxhY2tsaXN0X2F1dGhvcml0aWVzOiB0aGlzLnN0YXRlLmJsYWNrbGlzdF9hdXRob3JpdGllcyxcbiAgICAgICAgICAgIHdoaXRlbGlzdF9tYXJrZXRzOiB0aGlzLnN0YXRlLndoaXRlbGlzdF9tYXJrZXRzLFxuICAgICAgICAgICAgYmxhY2tsaXN0X21hcmtldHM6IHRoaXMuc3RhdGUuYmxhY2tsaXN0X21hcmtldHNcbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgZmVlZFByb2R1Y2Vyc0pTID0gaXNCaXRBc3NldCA/IGZlZWRQcm9kdWNlcnMudG9KUygpIDogbnVsbDtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmVlZFByb2R1Y2Vyc0pTID0gaXNCaXRBc3NldFxuICAgICAgICAgICAgPyBvcmlnaW5hbEZlZWRQcm9kdWNlcnMudG9KUygpXG4gICAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgQXNzZXRBY3Rpb25zLnVwZGF0ZUFzc2V0KFxuICAgICAgICAgICAgaXNzdWVyLFxuICAgICAgICAgICAgbmV3X2lzc3Vlcl9hY2NvdW50X2lkLFxuICAgICAgICAgICAgdXBkYXRlLFxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldCxcbiAgICAgICAgICAgIGZsYWdzLFxuICAgICAgICAgICAgcGVybWlzc2lvbnMsXG4gICAgICAgICAgICBpc0JpdEFzc2V0LFxuICAgICAgICAgICAgYml0YXNzZXRfb3B0cyxcbiAgICAgICAgICAgIG9yaWdpbmFsX2JpdGFzc2V0X29wdHMsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGF1dGhzLFxuICAgICAgICAgICAgZmVlZFByb2R1Y2Vyc0pTLFxuICAgICAgICAgICAgb3JpZ2luYWxGZWVkUHJvZHVjZXJzSlMsXG4gICAgICAgICAgICB0aGlzLmFzc2V0Q2hhbmdlZCgpXG4gICAgICAgICkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBcIi4uLiBBc3NldEFjdGlvbnMudXBkYXRlQXNzZXQoYWNjb3VudF9pZCwgdXBkYXRlKVwiLFxuICAgICAgICAgICAgICAgIGlzc3VlcixcbiAgICAgICAgICAgICAgICBuZXdfaXNzdWVyX2FjY291bnRfaWQsXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJpZFwiKSxcbiAgICAgICAgICAgICAgICB1cGRhdGVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldEFzc2V0KHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy5yZXNldFN0YXRlKHRoaXMucHJvcHMpKTtcbiAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfcmVzZXQoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnJlc2V0U3RhdGUodGhpcy5wcm9wcykpO1xuICAgIH1cblxuICAgIF9mb3JjZVBvc2l0aXZlKG51bWJlcikge1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChudW1iZXIpIDwgMCA/IFwiMFwiIDogbnVtYmVyO1xuICAgIH1cblxuICAgIF9vblVwZGF0ZURlc2NyaXB0aW9uKHZhbHVlLCBlKSB7XG4gICAgICAgIGxldCB7dXBkYXRlfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGxldCB1cGRhdGVTdGF0ZSA9IHRydWU7XG5cbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xuICAgICAgICAgICAgY2FzZSBcImNvbmRpdGlvblwiOlxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZS5sZW5ndGggPiA2MCkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcInNob3J0X25hbWVcIjpcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUubGVuZ3RoID4gMzIpIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU3RhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJtYXJrZXRcIjpcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gZTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcInZpc2libGVcIjpcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gIXVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uW3ZhbHVlXSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVwZGF0ZVN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLl92YWxpZGF0ZUVkaXRGaWVsZHModXBkYXRlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uQ2hhbmdlQml0QXNzZXRPcHRzKHZhbHVlLCBlKSB7XG4gICAgICAgIGxldCB7Yml0YXNzZXRfb3B0c30gPSB0aGlzLnN0YXRlO1xuXG4gICAgICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJmb3JjZV9zZXR0bGVtZW50X29mZnNldF9wZXJjZW50XCI6XG4gICAgICAgICAgICBjYXNlIFwibWF4aW11bV9mb3JjZV9zZXR0bGVtZW50X3ZvbHVtZVwiOlxuICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHNbdmFsdWVdID1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChlLnRhcmdldC52YWx1ZSkgKlxuICAgICAgICAgICAgICAgICAgICBhc3NldENvbnN0YW50cy5HUkFQSEVORV8xX1BFUkNFTlQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJmZWVkX2xpZmV0aW1lX3NlY1wiOlxuICAgICAgICAgICAgY2FzZSBcImZvcmNlX3NldHRsZW1lbnRfZGVsYXlfc2VjXCI6XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChwYXJzZUZsb2F0KGUudGFyZ2V0LnZhbHVlKSAqIDYwLCAxMClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHNbdmFsdWVdID0gcGFyc2VJbnQoXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpICogNjAsXG4gICAgICAgICAgICAgICAgICAgIDEwXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcInNob3J0X2JhY2tpbmdfYXNzZXRcIjpcbiAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzW3ZhbHVlXSA9IGU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJtaW5pbXVtX2ZlZWRzXCI6XG4gICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0c1t2YWx1ZV0gPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSwgMTApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgIH1cblxuICAgIF9vblVwZGF0ZUlucHV0KHZhbHVlLCBlKSB7XG4gICAgICAgIGxldCB7dXBkYXRlfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGxldCB1cGRhdGVTdGF0ZSA9IHRydWU7XG4gICAgICAgIGxldCBwcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJwcmVjaXNpb25cIilcbiAgICAgICAgKTtcblxuICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgICAgICAgICBjYXNlIFwibWFya2V0X2ZlZV9wZXJjZW50XCI6XG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IHRoaXMuX2ZvcmNlUG9zaXRpdmUoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwibWF4X21hcmtldF9mZWVcIjpcbiAgICAgICAgICAgICAgICBsZXQgbWFya2V0RmVlID0gZS5hbW91bnQucmVwbGFjZSgvLC9nLCBcIlwiKTtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBiaWcobWFya2V0RmVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpbWVzKHByZWNpc2lvbilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5ndChHUkFQSEVORV9NQVhfU0hBUkVfU1VQUExZKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfbWFya2V0X2ZlZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJUaGUgbnVtYmVyIHlvdSB0cmllZCB0byBlbnRlciBpcyB0b28gbGFyZ2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IHV0aWxzLmxpbWl0QnlQcmVjaXNpb24oXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldEZlZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJwcmVjaXNpb25cIilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwibWF4X3N1cHBseVwiOlxuICAgICAgICAgICAgICAgIGxldCBtYXhTdXBwbHkgPSBlLmFtb3VudC5yZXBsYWNlKC8sL2csIFwiXCIpO1xuICAgICAgICAgICAgICAgIC8vIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gICAgIGlmICgobmV3IGJpZyhtYXhTdXBwbHkpKS50aW1lcyhNYXRoLnBvdygxMCwgcHJlY2lzaW9uKSkuZ3QoR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWSkpIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHVwZGF0ZVN0YXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7ZXJyb3JzOiB7bWF4X3N1cHBseTogXCJUaGUgbnVtYmVyIHlvdSB0cmllZCB0byBlbnRlciBpcyB0b28gbGFyZ2VcIn19KTtcbiAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZVt2YWx1ZV0gPSB1dGlscy5saW1pdEJ5UHJlY2lzaW9uKFxuICAgICAgICAgICAgICAgICAgICBtYXhTdXBwbHksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAvLyB9IGNhdGNoKGUpIHt9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVwZGF0ZVN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHt1cGRhdGU6IHVwZGF0ZX0pO1xuICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGVFZGl0RmllbGRzKHVwZGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfdmFsaWRhdGVFZGl0RmllbGRzKG5ld19zdGF0ZSkge1xuICAgICAgICBsZXQgY2VyID0gbmV3X3N0YXRlLmNvcmVfZXhjaGFuZ2VfcmF0ZTtcbiAgICAgICAgbGV0IGZlZWRQcm9kdWNlcnMgPSBuZXdfc3RhdGUuZmVlZFByb2R1Y2Vyc1xuICAgICAgICAgICAgPyBuZXdfc3RhdGUuZmVlZFByb2R1Y2Vyc1xuICAgICAgICAgICAgOiB0aGlzLnN0YXRlLmZlZWRQcm9kdWNlcnM7XG4gICAgICAgIGxldCBmbGFnQm9vbGVhbnMgPSB0aGlzLnN0YXRlLmZsYWdCb29sZWFucztcbiAgICAgICAgbGV0IHthc3NldCwgY29yZX0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIGxldCBlcnJvcnMgPSB7XG4gICAgICAgICAgICBtYXhfc3VwcGx5OiBudWxsLFxuICAgICAgICAgICAgcXVvdGVfYXNzZXQ6IG51bGwsXG4gICAgICAgICAgICBiYXNlX2Fzc2V0OiBudWxsLFxuICAgICAgICAgICAgbWF4X2ZlZWRfcHJvZHVjZXI6IG51bGwsXG4gICAgICAgICAgICBjb25mbGljdF9wcm9kdWNlcjogbnVsbCxcbiAgICAgICAgICAgIGludmFsaWRfbWFya2V0X3BhaXI6IG51bGxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwID0gdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJwcmVjaXNpb25cIik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBlcnJvcnMubWF4X3N1cHBseSA9XG4gICAgICAgICAgICAgICAgbmV3X3N0YXRlLm1heF9zdXBwbHkgPD0gMFxuICAgICAgICAgICAgICAgICAgICA/IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXhfcG9zaXRpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgYmlnKHBhcnNlSW50KG5ld19zdGF0ZS5tYXhfc3VwcGx5LCAxMCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC50aW1lcyhNYXRoLnBvdygxMCwgcCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5ndChHUkFQSEVORV9NQVhfU0hBUkVfU1VQUExZKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnRvb19sYXJnZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycjpcIiwgZXJyKTtcbiAgICAgICAgICAgIGVycm9ycy5tYXhfc3VwcGx5ID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMudG9vX2xhcmdlXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2VyKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgY2VyLnF1b3RlLmFzc2V0X2lkICE9PSBhc3NldC5nZXQoXCJpZFwiKSAmJlxuICAgICAgICAgICAgICAgIGNlci5iYXNlLmFzc2V0X2lkICE9PSBhc3NldC5nZXQoXCJpZFwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JzLnF1b3RlX2Fzc2V0ID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm5lZWRfYXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAge25hbWU6IGFzc2V0LmdldChcInN5bWJvbFwiKX1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgY2VyLnF1b3RlLmFzc2V0X2lkICE9PSBjb3JlLmdldChcImlkXCIpICYmXG4gICAgICAgICAgICAgICAgY2VyLmJhc2UuYXNzZXRfaWQgIT09IGNvcmUuZ2V0KFwiaWRcIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGVycm9ycy5iYXNlX2Fzc2V0ID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm5lZWRfYXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAge25hbWU6IGNvcmUuZ2V0KFwic3ltYm9sXCIpfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZlZWRQcm9kdWNlcnMpIHtcbiAgICAgICAgICAgIGlmIChmZWVkUHJvZHVjZXJzLnNpemUgPiB0aGlzLnN0YXRlLm1heEZlZWRQcm9kdWNlcnMpIHtcbiAgICAgICAgICAgICAgICBlcnJvcnMubWF4X2ZlZWRfcHJvZHVjZXIgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMudG9vX21hbnlfZmVlZFwiLFxuICAgICAgICAgICAgICAgICAgICB7bWF4OiB0aGlzLnN0YXRlLm1heEZlZWRQcm9kdWNlcnN9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnMuY29tbWl0dGVlX2ZlZF9hc3NldCAmJlxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLndpdG5lc3NfZmVkX2Fzc2V0XG4gICAgICAgICkge1xuICAgICAgICAgICAgZXJyb3JzLmNvbmZsaWN0X3Byb2R1Y2VyID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY29uZmxpY3RfZmVlZFwiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUubWFya2V0SW5wdXQgPT0gdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJzeW1ib2xcIikpIHtcbiAgICAgICAgICAgIGVycm9ycy5pbnZhbGlkX21hcmtldF9wYWlyID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuaW52YWxpZF9tYXJrZXRfcGFpclwiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGlzVmFsaWQgPVxuICAgICAgICAgICAgIWVycm9ycy5pbnZhbGlkX21hcmtldF9wYWlyICYmXG4gICAgICAgICAgICAhZXJyb3JzLm1heF9zdXBwbHkgJiZcbiAgICAgICAgICAgICFlcnJvcnMuYmFzZV9hc3NldCAmJlxuICAgICAgICAgICAgIWVycm9ycy5xdW90ZV9hc3NldCAmJlxuICAgICAgICAgICAgIWVycm9ycy5tYXhfZmVlZF9wcm9kdWNlciAmJlxuICAgICAgICAgICAgIWVycm9ycy5jb25mbGljdF9wcm9kdWNlcjtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc1ZhbGlkOiBpc1ZhbGlkLCBlcnJvcnM6IGVycm9yc30pO1xuICAgIH1cblxuICAgIF9vbkNvcmVSYXRlQ2hhbmdlKHR5cGUsIGFtb3VudCkge1xuICAgICAgICBhbW91bnQuYW1vdW50ID1cbiAgICAgICAgICAgIGFtb3VudC5hbW91bnQgPT0gXCJcIiA/IFwiMFwiIDogYW1vdW50LmFtb3VudC5yZXBsYWNlKC8sL2csIFwiXCIpO1xuXG4gICAgICAgIGFtb3VudC5hbW91bnQgPSB1dGlscy5saW1pdEJ5UHJlY2lzaW9uKFxuICAgICAgICAgICAgYW1vdW50LmFtb3VudCxcbiAgICAgICAgICAgIGFtb3VudC5hc3NldC5nZXQoXCJwcmVjaXNpb25cIilcbiAgICAgICAgKTtcblxuICAgICAgICBsZXQge2NvcmVfZXhjaGFuZ2VfcmF0ZX0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVbdHlwZV0gPSB7XG4gICAgICAgICAgICBhbW91bnQ6IGFtb3VudC5hbW91bnQsXG4gICAgICAgICAgICBhc3NldF9pZDogYW1vdW50LmFzc2V0LmdldChcImlkXCIpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICB9XG5cbiAgICBvbkFjY291bnRDaGFuZ2VkKGtleSwgYWNjb3VudCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIFtrZXldOiBhY2NvdW50ID8gYWNjb3VudC5nZXQoXCJpZFwiKSA6IG51bGxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25BY2NvdW50TmFtZUNoYW5nZWQoa2V5LCBuYW1lKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgW2tleV06IG5hbWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX29uSW5wdXRDb3JlQXNzZXQodHlwZSwgYXNzZXQpIHtcbiAgICAgICAgaWYgKHR5cGUgPT09IFwicXVvdGVcIikge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgcXVvdGVBc3NldElucHV0OiBhc3NldFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJiYXNlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGJhc2VBc3NldElucHV0OiBhc3NldFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfb25Gb3VuZENvcmVBc3NldCh0eXBlLCBhc3NldCkge1xuICAgICAgICBpZiAoYXNzZXQpIHtcbiAgICAgICAgICAgIGxldCBjb3JlX3JhdGUgPSB0aGlzLnN0YXRlLmNvcmVfZXhjaGFuZ2VfcmF0ZTtcbiAgICAgICAgICAgIGNvcmVfcmF0ZVt0eXBlXS5hc3NldF9pZCA9IGFzc2V0LmdldChcImlkXCIpO1xuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGU6IGNvcmVfcmF0ZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRlRWRpdEZpZWxkcyh7XG4gICAgICAgICAgICAgICAgbWF4X3N1cHBseTogdGhpcy5zdGF0ZS5tYXhfc3VwcGx5LFxuICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZTogY29yZV9yYXRlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9vbklucHV0TWFya2V0KGFzc2V0KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbWFya2V0SW5wdXQ6IGFzc2V0XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9vbkZvdW5kTWFya2V0QXNzZXQoYXNzZXQpIHtcbiAgICAgICAgaWYgKGFzc2V0KSB7XG4gICAgICAgICAgICB0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uKFwibWFya2V0XCIsIGFzc2V0LmdldChcInN5bWJvbFwiKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfb25GbGFnQ2hhbmdlKGtleSkge1xuICAgICAgICBsZXQgYm9vbGVhbnMgPSB0aGlzLnN0YXRlLmZsYWdCb29sZWFucztcbiAgICAgICAgYm9vbGVhbnNba2V5XSA9ICFib29sZWFuc1trZXldO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGZsYWdCb29sZWFuczogYm9vbGVhbnNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlRWRpdEZpZWxkcyh7fSk7XG4gICAgfVxuXG4gICAgX2dldEN1cnJlbnRTdXBwbHkoKSB7XG4gICAgICAgIGNvbnN0IHthc3NldCwgZ2V0RHluYW1pY09iamVjdH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBnZXREeW5hbWljT2JqZWN0ICYmXG4gICAgICAgICAgICBnZXREeW5hbWljT2JqZWN0KGFzc2V0LmdldChcImR5bmFtaWNfYXNzZXRfZGF0YV9pZFwiKSkuZ2V0KFxuICAgICAgICAgICAgICAgIFwiY3VycmVudF9zdXBwbHlcIlxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9vblBlcm1pc3Npb25DaGFuZ2Uoa2V5KSB7XG4gICAgICAgIGNvbnN0IHtpc0JpdEFzc2V0LCBwZXJtaXNzaW9uQm9vbGVhbnN9ID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICBjb25zdCBkaXNhYmxlZCA9ICFhc3NldFV0aWxzLmdldEZsYWdCb29sZWFucyhcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXQuZ2V0SW4oW1wib3B0aW9uc1wiLCBcImlzc3Vlcl9wZXJtaXNzaW9uc1wiXSksXG4gICAgICAgICAgICBpc0JpdEFzc2V0XG4gICAgICAgIClba2V5XTtcblxuICAgICAgICBpZiAodGhpcy5fZ2V0Q3VycmVudFN1cHBseSgpID4gMCAmJiBkaXNhYmxlZCkge1xuICAgICAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuaW52YWxpZF9wZXJtaXNzaW9uc19jaGFuZ2VcIlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGJvb2xlYW5zID0gcGVybWlzc2lvbkJvb2xlYW5zO1xuICAgICAgICBib29sZWFuc1trZXldID0gIWJvb2xlYW5zW2tleV07XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgcGVybWlzc2lvbkJvb2xlYW5zOiBib29sZWFuc1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfb25DbGFpbUlucHV0KGFzc2V0KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgY2xhaW1GZWVzQW1vdW50OiBhc3NldC5hbW91bnRcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25DaGFuZ2VMaXN0KGtleSwgYWN0aW9uID0gXCJhZGRcIiwgaWQpIHtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnN0YXRlW2tleV07XG4gICAgICAgIGlmIChhY3Rpb24gPT09IFwiYWRkXCIgJiYgIWN1cnJlbnQuaW5jbHVkZXMoaWQpKSB7XG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wdXNoKGlkKTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwicmVtb3ZlXCIgJiYgY3VycmVudC5pbmNsdWRlcyhpZCkpIHtcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnJlbW92ZShjdXJyZW50LmluZGV4T2YoaWQpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKHtba2V5XTogY3VycmVudH0pO1xuICAgIH1cblxuICAgIG9uQ2hhbmdlRmVlZFByb2R1Y2VyTGlzdChhY3Rpb24gPSBcImFkZFwiLCBpZCkge1xuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMuc3RhdGUuZmVlZFByb2R1Y2VycztcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gXCJhZGRcIiAmJiAhY3VycmVudC5pbmNsdWRlcyhpZCkpIHtcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnB1c2goaWQpO1xuICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJyZW1vdmVcIiAmJiBjdXJyZW50LmluY2x1ZGVzKGlkKSkge1xuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucmVtb3ZlKGN1cnJlbnQuaW5kZXhPZihpZCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2ZlZWRQcm9kdWNlcnM6IGN1cnJlbnR9KTtcbiAgICAgICAgdGhpcy5fdmFsaWRhdGVFZGl0RmllbGRzKHtmZWVkUHJvZHVjZXJzOiBjdXJyZW50fSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge2Fzc2V0fSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB7XG4gICAgICAgICAgICBlcnJvcnMsXG4gICAgICAgICAgICBpc1ZhbGlkLFxuICAgICAgICAgICAgdXBkYXRlLFxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLFxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLFxuICAgICAgICAgICAgcGVybWlzc2lvbkJvb2xlYW5zLFxuICAgICAgICAgICAgY2xhaW1GZWVzQW1vdW50LFxuICAgICAgICAgICAgaXNCaXRBc3NldCxcbiAgICAgICAgICAgIGJpdGFzc2V0X29wdHNcbiAgICAgICAgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgLy8gRXN0aW1hdGUgdGhlIGFzc2V0IHVwZGF0ZSBmZWVcbiAgICAgICAgbGV0IHN5bWJvbCA9IGFzc2V0LmdldChcInN5bWJvbFwiKTtcbiAgICAgICAgbGV0IHVwZGF0ZUZlZSA9IFwiTi9BXCI7XG5cbiAgICAgICAgdXBkYXRlRmVlID0gPEZvcm1hdHRlZEZlZSBvcFR5cGU9XCJhc3NldF91cGRhdGVcIiAvPjtcblxuICAgICAgICBsZXQgY3JfcXVvdGVfYXNzZXQgPSBDaGFpblN0b3JlLmdldEFzc2V0KFxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLnF1b3RlLmFzc2V0X2lkXG4gICAgICAgICk7XG4gICAgICAgIGxldCBwcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKFxuICAgICAgICAgICAgY3JfcXVvdGVfYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXG4gICAgICAgICk7XG4gICAgICAgIGxldCBjcl9iYXNlX2Fzc2V0ID0gQ2hhaW5TdG9yZS5nZXRBc3NldChcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFzc2V0X2lkXG4gICAgICAgICk7XG4gICAgICAgIGxldCBiYXNlUHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihcbiAgICAgICAgICAgIGNyX2Jhc2VfYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IGNyX3F1b3RlX2Ftb3VudCA9XG4gICAgICAgICAgICBwYXJzZUZsb2F0KGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZS5hbW91bnQpICogcHJlY2lzaW9uO1xuICAgICAgICBsZXQgY3JfYmFzZV9hbW91bnQgPVxuICAgICAgICAgICAgcGFyc2VGbG9hdChjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZS5hbW91bnQpICogYmFzZVByZWNpc2lvbjtcbiAgICAgICAgbGV0IG9yaWdpbmFsUGVybWlzc2lvbnMgPSBhc3NldFV0aWxzLmdldEZsYWdCb29sZWFucyhcbiAgICAgICAgICAgIGFzc2V0LmdldEluKFtcIm9wdGlvbnNcIiwgXCJpc3N1ZXJfcGVybWlzc2lvbnNcIl0pLFxuICAgICAgICAgICAgYXNzZXQuZ2V0KFwiYml0YXNzZXRcIikgIT09IHVuZGVmaW5lZFxuICAgICAgICApO1xuICAgICAgICAvLyBMb29wIG92ZXIgZmxhZ3NcbiAgICAgICAgbGV0IGZsYWdzID0gW107XG4gICAgICAgIGxldCBnZXRGbGFnID0gKGtleSwgb25DbGljaywgaXNDaGVja2VkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDx0YWJsZSBrZXk9e1widGFibGVfXCIgKyBrZXl9IGNsYXNzTmFtZT1cInRhYmxlXCI+XG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwiLCB3aWR0aDogXCI4MCVcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtgYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuJHtrZXl9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiBcIm5vbmVcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtpc0NoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25DbGlja31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gb3JpZ2luYWxQZXJtaXNzaW9ucykge1xuICAgICAgICAgICAgaWYgKG9yaWdpbmFsUGVybWlzc2lvbnNba2V5XSAmJiBrZXkgIT09IFwiY2hhcmdlX21hcmtldF9mZWVcIikge1xuICAgICAgICAgICAgICAgIGZsYWdzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIGdldEZsYWcoXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkZsYWdDaGFuZ2UuYmluZCh0aGlzLCBrZXkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zW2tleV1cbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmbGFncy5wdXNoKFxuICAgICAgICAgICAgZ2V0RmxhZyhcbiAgICAgICAgICAgICAgICBcInZpc2libGVcIixcbiAgICAgICAgICAgICAgICB0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQodGhpcywgXCJ2aXNpYmxlXCIpLFxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvbi52aXNpYmxlXG4gICAgICAgICAgICAgICAgICAgID8gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgOiB1cGRhdGUuZGVzY3JpcHRpb24udmlzaWJsZSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIExvb3Agb3ZlciBwZXJtaXNzaW9uc1xuICAgICAgICBsZXQgcGVybWlzc2lvbnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQga2V5IGluIG9yaWdpbmFsUGVybWlzc2lvbnMpIHtcbiAgICAgICAgICAgIGlmICh0cnVlIHx8IG9yaWdpbmFsUGVybWlzc2lvbnNba2V5XSkge1xuICAgICAgICAgICAgICAgIHBlcm1pc3Npb25zLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDx0YWJsZSBrZXk9e1widGFibGVfXCIgKyBrZXl9IGNsYXNzTmFtZT1cInRhYmxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwiLCB3aWR0aDogXCI4MCVcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2BhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy4ke2tleX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiBcIm5vbmVcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFN3aXRjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3Blcm1pc3Npb25Cb29sZWFuc1trZXldfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblBlcm1pc3Npb25DaGFuZ2UuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0YWJzQ2hhbmdlZENvdW50ID0gMDtcbiAgICAgICAgdGhpcy50YWJzQ2hhbmdlZCgpLmZvckVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0YWJzQ2hhbmdlZENvdW50Kys7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBjb25maXJtQnV0dG9ucyA9IChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICFpc1ZhbGlkIHx8ICF0aGlzLnBhZ2VDaGFuZ2VkKClcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiOXJlbVwifX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2hhbmdlZENvdW50ID4gMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5fb3BlbkNvbmZpcm0uYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fdXBkYXRlQXNzZXQuYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7dGFic0NoYW5nZWRDb3VudCA+IDEgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0uc2F2ZV9hbGxcIiAvPlxuICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnNhdmVcIiAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKFwiYnV0dG9uIHByaW1hcnkgaG9sbG93XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhdGhpcy5wYWdlQ2hhbmdlZCgpXG4gICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9yZXNldC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnJlc2V0XCIgLz5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuXG4gICAgICAgIGxldCBjZXJWYWxpZCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIChjcl9xdW90ZV9hc3NldC5nZXQoXCJpZFwiKSA9PT0gXCIxLjMuMFwiIHx8XG4gICAgICAgICAgICAgICAgY3JfYmFzZV9hc3NldC5nZXQoXCJpZFwiKSA9PT0gXCIxLjMuMFwiKSAmJlxuICAgICAgICAgICAgKGNyX3F1b3RlX2Fzc2V0LmdldChcImlkXCIpID09PSBhc3NldC5nZXQoXCJpZFwiKSB8fFxuICAgICAgICAgICAgICAgIGNyX2Jhc2VfYXNzZXQuZ2V0KFwiaWRcIikgPT09IGFzc2V0LmdldChcImlkXCIpKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNlclZhbGlkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpc1ByZWRpY3Rpb25NYXJrZXRBc3NldCA9IGFzc2V0LmdldEluKFtcbiAgICAgICAgICAgIFwiYml0YXNzZXRcIixcbiAgICAgICAgICAgIFwiaXNfcHJlZGljdGlvbl9tYXJrZXRcIlxuICAgICAgICBdKTtcblxuICAgICAgICBsZXQgYXNzZXRfZGVzY3JpcHRpb24gPSBhc3NldFV0aWxzLnBhcnNlRGVzY3JpcHRpb24oXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFzc2V0LnRvSlMoKS5vcHRpb25zLmRlc2NyaXB0aW9uXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBzbWFsbC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtY29udGFpbmVyIGdlbmVyaWMtYm9yZGVyZWQtYm94XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJoZWFkZXIudXBkYXRlX2Fzc2V0XCIgLz46e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3ltYm9sfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZz1cInVwZGF0ZUFzc2V0VGFiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY2NvdW50LXRhYnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNDbGFzcz1cImFjY291bnQtb3ZlcnZpZXcgYm9yZGVyZWQtaGVhZGVyIGNvbnRlbnQtYmxvY2tcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cImdyaWQtYmxvY2sgcGFkZGluZy10b3Agc2hyaW5rIHNtYWxsLXZlcnRpY2FsIG1lZGl1bS1ob3Jpem9udGFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkJ1dHRvbnM9e2NvbmZpcm1CdXR0b25zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlVGFiPXtpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YWN0aXZlVGFiOiBpfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMucHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUYWI9e3RoaXMudGFiQ2hhbmdlZCgwKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgbGFyZ2UtOCBsYXJnZS1vZmZzZXQtMiBncmlkLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wcmVjaXNpb25cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPjoge2Fzc2V0LmdldChcInByZWNpc2lvblwiKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QW1vdW50U2VsZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXhfc3VwcGx5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXt1cGRhdGUubWF4X3N1cHBseX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1heF9zdXBwbHlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17YXNzZXQuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W2Fzc2V0LmdldChcImlkXCIpXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMubWF4X3N1cHBseSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMubWF4X3N1cHBseX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImgzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY29yZV9leGNoYW5nZV9yYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2VyVmFsaWQgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpbiBzbWFsbC0xMiBtZWRpdW0tNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldFNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMucXVvdGVfbmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbklucHV0Q29yZUFzc2V0LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucXVvdGVBc3NldElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRJbnB1dD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnF1b3RlQXNzZXRJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBcIjEwcHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkZvdW5kPXt0aGlzLl9vbkZvdW5kQ29yZUFzc2V0LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2VyVmFsaWQgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpbiBzbWFsbC0xMiBtZWRpdW0tNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldFNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYmFzZV9uYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uSW5wdXRDb3JlQXNzZXQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJhc2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhc2VBc3NldElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRJbnB1dD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhc2VBc3NldElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDogXCIxMHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Gb3VuZD17dGhpcy5fb25Gb3VuZENvcmVBc3NldC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYmFzZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLnF1b3RlX2Fzc2V0ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMucXVvdGVfYXNzZXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLmJhc2VfYXNzZXQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5iYXNlX2Fzc2V0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpbiBzbWFsbC0xMiBtZWRpdW0tNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFtb3VudFNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5xdW90ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLnF1b3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYW1vdW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbkNvcmVSYXRlQ2hhbmdlLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicXVvdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hc3NldF9pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLnF1b3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMC4wXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogXCIxMHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1tYXJnaW4gc21hbGwtMTIgbWVkaXVtLTZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBbW91bnRTZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYmFzZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLmJhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hbW91bnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uQ29yZVJhdGVDaGFuZ2UuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLmJhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hc3NldF9pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLmJhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hc3NldF9pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6IFwiMTBweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnByaWNlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDp7XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkUHJpY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2ZvbnRXZWlnaHQ6IFwiYm9sZFwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZV9hbW91bnQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcl9xdW90ZV9hbW91bnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYXNzZXQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hc3NldF9pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlX2Fzc2V0PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLmJhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hc3NldF9pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlX2Ftb3VudD17Y3JfYmFzZV9hbW91bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY2VyX3dhcm5pbmdfMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGFzLWVycm9yXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmNlcl93YXJuaW5nXzJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYXBwcm94X2ZlZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoge3VwZGF0ZUZlZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImFjY291bnQud2hpdGVsaXN0LnRpdGxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFRhYj17dGhpcy50YWJDaGFuZ2VkKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0V2hpdGVsaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZUxpc3RFbmFibGVkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnQm9vbGVhbnNbXCJ3aGl0ZV9saXN0XCJdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZWxpc3RfYXV0aG9yaXRpZXM9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUud2hpdGVsaXN0X2F1dGhvcml0aWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFja2xpc3RfYXV0aG9yaXRpZXM9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYmxhY2tsaXN0X2F1dGhvcml0aWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZWxpc3RfbWFya2V0cz17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS53aGl0ZWxpc3RfbWFya2V0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhY2tsaXN0X21hcmtldHM9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYmxhY2tsaXN0X21hcmtldHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld19hdXRob3JpdHlfaWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubmV3X2F1dGhvcml0eV9pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXR5X25hbWU9e3RoaXMuc3RhdGUuYXV0aG9yaXR5X25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY291bnROYW1lQ2hhbmdlZD17dGhpcy5vbkFjY291bnROYW1lQ2hhbmdlZC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY291bnRDaGFuZ2VkPXt0aGlzLm9uQWNjb3VudENoYW5nZWQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VMaXN0PXt0aGlzLm9uQ2hhbmdlTGlzdC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmFwcHJveF9mZWVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt1cGRhdGVGZWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Fzc2V0V2hpdGVsaXN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFRhYj17dGhpcy50YWJDaGFuZ2VkKDIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBsYXJnZS04IGxhcmdlLW9mZnNldC0yIGdyaWQtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2hlaWdodDogXCI3cmVtXCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPVwiMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvbi5tYWluIHx8IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVEZXNjcmlwdGlvbi5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWFpblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnNob3J0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz1cIjFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb24uc2hvcnRfbmFtZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG9ydF9uYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImgzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWFya2V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXRTZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uSW5wdXRNYXJrZXQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2Fzc2V0X2Rlc2NyaXB0aW9uLm1hcmtldH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17dGhpcy5zdGF0ZS5tYXJrZXRJbnB1dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldElucHV0PXt0aGlzLnN0YXRlLm1hcmtldElucHV0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBcIjEwcHhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0JvdHRvbTogXCIyMHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRm91bmQ9e3RoaXMuX29uRm91bmRNYXJrZXRBc3NldC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLmludmFsaWRfbWFya2V0X3BhaXIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLmludmFsaWRfbWFya2V0X3BhaXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc1ByZWRpY3Rpb25NYXJrZXRBc3NldCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmRpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVEZXNjcmlwdGlvbi5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbmRpdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiaDNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmV4cGlyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJkYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmV4cGlyeVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVEZXNjcmlwdGlvbi5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4cGlyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5hcHByb3hfZmVlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7dXBkYXRlRmVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXNCaXRBc3NldCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5iaXRhc3NldF9vcHRzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUYWI9e3RoaXMudGFiQ2hhbmdlZCgzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBsYXJnZS04IGxhcmdlLW9mZnNldC0yIGdyaWQtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCaXRBc3NldE9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0cz17Yml0YXNzZXRfb3B0c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25VcGRhdGU9e3RoaXMub25DaGFuZ2VCaXRBc3NldE9wdHMuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2luZ0Fzc2V0PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHMuc2hvcnRfYmFja2luZ19hc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0UHJlY2lzaW9uPXthc3NldC5nZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInByZWNpc2lvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0U3ltYm9sPXthc3NldC5nZXQoXCJzeW1ib2xcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVCYWNraW5nQXNzZXRDaGFuZ2U9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZ2V0Q3VycmVudFN1cHBseSgpID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkQmFja2luZ0Fzc2V0Q2hhbmdlQ2FsbGJhY2s9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRCYWNraW5nQXNzZXRDaGFuZ2VDYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYXBwcm94X2ZlZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt1cGRhdGVGZWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC5wZXJtaXNzaW9uc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUYWI9e3RoaXMudGFiQ2hhbmdlZCg0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgbGFyZ2UtOCBsYXJnZS1vZmZzZXQtMiBncmlkLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIZWxwQ29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e1wiY29tcG9uZW50cy9BY2NvdW50QXNzZXRDcmVhdGVcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uPVwicGVybWlzc2lvbnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBoYXMtZXJyb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wZXJtX3dhcm5pbmdcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Blcm1pc3Npb25zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5hcHByb3hfZmVlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7dXBkYXRlRmVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZmxhZ3NcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVGFiPXt0aGlzLnRhYkNoYW5nZWQoNSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGxhcmdlLTggbGFyZ2Utb2Zmc2V0LTIgZ3JpZC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SGVscENvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtcImNvbXBvbmVudHMvQWNjb3VudEFzc2V0Q3JlYXRlXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbj1cImZsYWdzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3JpZ2luYWxQZXJtaXNzaW9uc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNoYXJnZV9tYXJrZXRfZmVlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0gPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiaDNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1hcmtldF9mZWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjgwJVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5jaGFyZ2VfbWFya2V0X2ZlZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdCb29sZWFucy5jaGFyZ2VfbWFya2V0X2ZlZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25GbGFnQ2hhbmdlLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hhcmdlX21hcmtldF9mZWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICFmbGFnQm9vbGVhbnMuY2hhcmdlX21hcmtldF9mZWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWFya2V0X2ZlZVwiIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICglKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLm1hcmtldF9mZWVfcGVyY2VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZUlucHV0LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXJrZXRfZmVlX3BlcmNlbnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFtb3VudFNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWF4X21hcmtldF9mZWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLm1heF9tYXJrZXRfZmVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1heF9tYXJrZXRfZmVlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2Fzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcImlkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMC4wXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLm1heF9tYXJrZXRfZmVlID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBoYXMtZXJyb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfbWFya2V0X2ZlZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZsYWdzXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmxhZ3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmFwcHJveF9mZWVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt1cGRhdGVGZWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5jb25mbGljdF9wcm9kdWNlciA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMuY29uZmxpY3RfcHJvZHVjZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2lzQml0QXNzZXQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZmVlZF9wcm9kdWNlcnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFRhYj17dGhpcy50YWJDaGFuZ2VkKDYpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXRGZWVkUHJvZHVjZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMucHJvcHMuYXNzZXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5wcm9wcy5hY2NvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdG5lc3NGZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnQm9vbGVhbnNbXCJ3aXRuZXNzX2ZlZF9hc3NldFwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXR0ZWVGZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnQm9vbGVhbnNbXCJjb21taXR0ZWVfZmVkX2Fzc2V0XCJdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y2Vycz17dGhpcy5zdGF0ZS5mZWVkUHJvZHVjZXJzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlTGlzdD17dGhpcy5vbkNoYW5nZUZlZWRQcm9kdWNlckxpc3QuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfZmVlZF9wcm9kdWNlciA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yIGxhcmdlLTggbGFyZ2Utb2Zmc2V0LTJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpblRvcDogXCIyMHB4XCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfZmVlZF9wcm9kdWNlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHsvKiBDb25maXJtYXRpb24gTW9kYWwgb24gTXVsdGlwbGUgQ2hhbmdlcyAqL31cbiAgICAgICAgICAgICAgICA8Q29uZmlybU1vZGFsXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMuc3RhdGUuaXNBc3NldFVwZGF0ZUNvbmZpcm1hdGlvbk1vZGFsVmlzaWJsZX1cbiAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsPXt0aGlzLmhpZGVBc3NldFVwZGF0ZUNvbmZpcm1hdGlvbk1vZGFsfVxuICAgICAgICAgICAgICAgICAgICBzaG93TW9kYWw9e3RoaXMuc2hvd0Fzc2V0VXBkYXRlQ29uZmlybWF0aW9uTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgIHRhYnNDaGFuZ2VkPXt0aGlzLnRhYnNDaGFuZ2VkKCl9XG4gICAgICAgICAgICAgICAgICAgIF9jYW5jZWxDb25maXJtPXt0aGlzLl9jYW5jZWxDb25maXJtLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgIF91cGRhdGVBc3NldD17dGhpcy5fdXBkYXRlQXNzZXQuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbkFjY291bnRBc3NldFVwZGF0ZSA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudEFzc2V0VXBkYXRlKTtcbkFjY291bnRBc3NldFVwZGF0ZSA9IEFzc2V0V3JhcHBlcihBY2NvdW50QXNzZXRVcGRhdGUsIHtcbiAgICBwcm9wTmFtZXM6IFtcImFzc2V0XCIsIFwiY29yZVwiXSxcbiAgICBkZWZhdWx0UHJvcHM6IHtcbiAgICAgICAgY29yZTogXCIxLjMuMFwiXG4gICAgfSxcbiAgICB3aXRoRHluYW1pYzogdHJ1ZVxufSk7XG5cbmNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7b3BlbjogZmFsc2V9O1xuICAgIH1cblxuICAgIHNob3coKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe29wZW46IHRydWV9LCAoKSA9PiB7XG4gICAgICAgICAgICBaZkFwaS5wdWJsaXNoKHRoaXMucHJvcHMubW9kYWxJZCwgXCJvcGVuXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtvcGVuOiBmYWxzZX0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHt0YWJzQ2hhbmdlZH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIGNvbnN0IGZvb3RlciA9IFtcbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAga2V5PVwic3VibWl0XCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLl91cGRhdGVBc3NldH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwiZ2xvYmFsLmNvbmZpcm1cIil9XG4gICAgICAgICAgICA8L0J1dHRvbj4sXG4gICAgICAgICAgICA8QnV0dG9uIGtleT1cImNhbmNlbFwiIG9uQ2xpY2s9e3RoaXMucHJvcHMuaGlkZU1vZGFsfT5cbiAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwiZ2xvYmFsLmNhbmNlbFwiKX1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICBdO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8TW9kYWxcbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnByb3BzLnZpc2libGV9XG4gICAgICAgICAgICAgICAgZm9vdGVyPXtmb290ZXJ9XG4gICAgICAgICAgICAgICAgb25DYW5jZWw9e3RoaXMucHJvcHMuaGlkZU1vZGFsfVxuICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5jb25maXJtX2Fzc2V0X21vZGFsLmhlYWRlclwiXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LmNvbmZpcm1fYXNzZXRfbW9kYWwuYXJlX3lvdV9zdXJlXCJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiZGl2XCJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiBcIjFyZW1cIn19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGFic0NoYW5nZWRbXCIwXCJdID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMucHJpbWFyeVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge3RhYnNDaGFuZ2VkW1wiMVwiXSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQud2hpdGVsaXN0LnRpdGxlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGFic0NoYW5nZWRbXCIyXCJdID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZGVzY3JpcHRpb25cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0YWJzQ2hhbmdlZFtcIjNcIl0gPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5iaXRhc3NldF9vcHRzXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0YWJzQ2hhbmdlZFtcIjRcIl0gPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm1pc3Npb25zXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGFic0NoYW5nZWRbXCI1XCJdID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZmxhZ3NcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIE5FRURTIENIRUNLSU5HICovfVxuICAgICAgICAgICAgICAgICAgICAgICAge3RhYnNDaGFuZ2VkW1wiNlwiXSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZlZWRfcHJvZHVjZXJzXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L01vZGFsPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuY2xhc3MgQXNzZXRVcGRhdGVXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBhc3NldCA9IHRoaXMucHJvcHMubWF0Y2gucGFyYW1zLmFzc2V0O1xuICAgICAgICByZXR1cm4gPEFjY291bnRBc3NldFVwZGF0ZSBhc3NldD17YXNzZXR9IHsuLi50aGlzLnByb3BzfSAvPjtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXIoQXNzZXRVcGRhdGVXcmFwcGVyKTtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcbmltcG9ydCBGb3JtYXR0ZWRBc3NldCBmcm9tIFwiLi9Gb3JtYXR0ZWRBc3NldFwiO1xuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4vQ2hhaW5UeXBlc1wiO1xuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4vQmluZFRvQ2hhaW5TdGF0ZVwiO1xuaW1wb3J0IHtlc3RpbWF0ZUZlZX0gZnJvbSBcImNvbW1vbi90cnhIZWxwZXJcIjtcblxuLyoqXG4gKlxuICogIEdpdmVuIGFuIG9wZXJhdGlvbiB0eXBlLCBkaXNwbGF5cyB0aGUgQ09SRSBmZWUgZm9yIHRoYXQgb3BlcmF0aW9uXG4gKlxuICovXG5cbmNsYXNzIEZvcm1hdHRlZEZlZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgICAgIG9wVHlwZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgb3B0aW9uczogUHJvcFR5cGVzLmFycmF5XG4gICAgfTtcblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGdsb2JhbE9iamVjdDogXCIyLjAuMFwiLFxuICAgICAgICBvcHRpb25zOiBbXVxuICAgIH07XG5cbiAgICBnZXRGZWUoKSB7XG4gICAgICAgIC8vIFJldHVybiBmZWUgdmlhIHJlZnNcbiAgICAgICAgcmV0dXJuIGVzdGltYXRlRmVlKFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vcFR5cGUsXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9wdGlvbnMsXG4gICAgICAgICAgICB0aGlzLnByb3BzLmdsb2JhbE9iamVjdFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHtvcFR5cGUsIG9wdGlvbnMsIGdsb2JhbE9iamVjdH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIGlmICghb3BUeXBlIHx8ICFvcHRpb25zIHx8ICFnbG9iYWxPYmplY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGFtb3VudCA9IGVzdGltYXRlRmVlKG9wVHlwZSwgb3B0aW9ucywgZ2xvYmFsT2JqZWN0KTtcblxuICAgICAgICByZXR1cm4gPEZvcm1hdHRlZEFzc2V0IGFtb3VudD17YW1vdW50fSBhc3NldD1cIjEuMy4wXCIgLz47XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCaW5kVG9DaGFpblN0YXRlKEZvcm1hdHRlZEZlZSk7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgTGlua1RvQWNjb3VudEJ5SWQgZnJvbSBcIi4uL1V0aWxpdHkvTGlua1RvQWNjb3VudEJ5SWRcIjtcbmltcG9ydCBMaW5rVG9Bc3NldEJ5SWQgZnJvbSBcIi4uL1V0aWxpdHkvTGlua1RvQXNzZXRCeUlkXCI7XG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuLi9BY2NvdW50L0FjY291bnRTZWxlY3RvclwiO1xuaW1wb3J0IEFzc2V0U2VsZWN0b3IgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXRTZWxlY3RvclwiO1xuaW1wb3J0IGNuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xuaW1wb3J0IHtjb25uZWN0fSBmcm9tIFwiYWx0LXJlYWN0XCI7XG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tIFwic3RvcmVzL1NldHRpbmdzU3RvcmVcIjtcbmltcG9ydCBTZXR0aW5nc0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvU2V0dGluZ3NBY3Rpb25zXCI7XG5cbmNsYXNzIEFzc2V0V2hpdGVsaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBsaXN0VHlwZTogcHJvcHMuYXNzZXRXaGl0ZUxpc3RUeXBlLFxuICAgICAgICAgICAgYWNjb3VudFRhYmxlOiBwcm9wcy5hc3NldFdoaXRlTGlzdFR5cGUuaW5kZXhPZihcIm1hcmtldFwiKSA9PT0gLTEsXG4gICAgICAgICAgICBsaXN0VHlwZXM6IFtcbiAgICAgICAgICAgICAgICBcIndoaXRlbGlzdF9hdXRob3JpdGllc1wiLFxuICAgICAgICAgICAgICAgIFwiYmxhY2tsaXN0X2F1dGhvcml0aWVzXCIsXG4gICAgICAgICAgICAgICAgXCJ3aGl0ZWxpc3RfbWFya2V0c1wiLFxuICAgICAgICAgICAgICAgIFwiYmxhY2tsaXN0X21hcmtldHNcIlxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGFzc2V0SW5wdXQ6IG51bGwsXG4gICAgICAgICAgICBhc3NldF9pZDogbnVsbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJlbmRlckFjY291bnRUYWJsZXMoKSB7XG4gICAgICAgIGNvbnN0IHtsaXN0VHlwZX0gPSB0aGlzLnN0YXRlO1xuXG4gICAgICAgIGlmICghdGhpcy5wcm9wcy53aGl0ZUxpc3RFbmFibGVkKVxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0eHRsYWJlbCBjYW5jZWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwicFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiZXhwbG9yZXIuYXNzZXQud2hpdGVsaXN0LmVuYWJsZV9mbGFnXCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGRhc2hib2FyZC10YWJsZSB0YWJsZS1ob3ZlclwiPlxuICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5hY2NvdW50LnRpdGxlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnJlbW92ZV90ZXh0XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHNbbGlzdFR5cGVdLm1hcChhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIga2V5PXthfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQWNjb3VudEJ5SWQgYWNjb3VudD17YX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjbGlja2FibGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25DaGFuZ2VMaXN0LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJlbW92ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5jcm9zc19jaXJjbGUucmVtb3ZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZ1RvcDogXCIycmVtXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e2BhY2NvdW50LndoaXRlbGlzdC4ke2xpc3RUeXBlfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZT17dGhpcy5wcm9wcy5hdXRob3JpdHlfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYXV0aG9yaXR5X25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vbkFjY291bnROYW1lQ2hhbmdlZC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhdXRob3JpdHlfbmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5wcm9wcy5vbkFjY291bnRDaGFuZ2VkLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5ld19hdXRob3JpdHlfaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yPXtudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25fbGFiZWw9XCJhY2NvdW50LnBlcm0uY29uZmlybV9hZGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY3Rpb249e3RoaXMucHJvcHMub25DaGFuZ2VMaXN0LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubmV3X2F1dGhvcml0eV9pZFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9vbkFzc2V0Q2hhbmdlKGFzc2V0KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgYXNzZXRJbnB1dDogYXNzZXRcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX29uQXNzZXRGb3VuZChhc3NldCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGFzc2V0X2lkOiBhc3NldCA/IGFzc2V0LmdldChcImlkXCIpIDogbnVsbFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXJNYXJrZXRUYWJsZSgpIHtcbiAgICAgICAgY29uc3Qge2xpc3RUeXBlfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGRhc2hib2FyZC10YWJsZSB0YWJsZS1ob3ZlclwiPlxuICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5hc3NldC50aXRsZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5yZW1vdmVfdGV4dFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzW2xpc3RUeXBlXS5tYXAoYSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17YX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtUb0Fzc2V0QnlJZCBhc3NldD17YX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjbGlja2FibGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25DaGFuZ2VMaXN0LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJlbW92ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5jcm9zc19jaXJjbGUucmVtb3ZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZ1RvcDogXCIycmVtXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgPEFzc2V0U2VsZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtgZXhwbG9yZXIuYXNzZXQud2hpdGVsaXN0LiR7bGlzdFR5cGV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbkFzc2V0Q2hhbmdlLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17dGhpcy5zdGF0ZS5hc3NldElucHV0fVxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRJbnB1dD17dGhpcy5zdGF0ZS5hc3NldElucHV0fVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiBcIjEwMCVcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkZvdW5kPXt0aGlzLl9vbkFzc2V0Rm91bmQuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbl9sYWJlbD1cImFjY291bnQucGVybS5jb25maXJtX2FkZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFjdGlvbj17dGhpcy5wcm9wcy5vbkNoYW5nZUxpc3QuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5hc3NldF9pZFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9vblN3aXRjaFR5cGUodHlwZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGxpc3RUeXBlOiB0eXBlLFxuICAgICAgICAgICAgYWNjb3VudFRhYmxlOiB0eXBlLmluZGV4T2YoXCJtYXJrZXRcIikgPT09IC0xXG4gICAgICAgIH0pO1xuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlVmlld1NldHRpbmcoe1xuICAgICAgICAgICAgYXNzZXRXaGl0ZUxpc3RUeXBlOiB0eXBlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge2FjY291bnRUYWJsZX0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBjb25zdCBhY3RpdmVJbmRleCA9IHRoaXMuc3RhdGUubGlzdFR5cGVzLmluZGV4T2YodGhpcy5zdGF0ZS5saXN0VHlwZSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgbGFyZ2UtOCBsYXJnZS1vZmZzZXQtMiBncmlkLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoZWFkZXItc2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiBcIjJyZW1cIn19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2VsZWN0b3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5saXN0VHlwZXMubWFwKCh0eXBlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17dHlwZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcImlubGluZS1ibG9ja1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlOiBhY3RpdmVJbmRleCAhPT0gaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblN3aXRjaFR5cGUuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtgZXhwbG9yZXIuYXNzZXQud2hpdGVsaXN0LiR7dHlwZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAge2FjY291bnRUYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnJlbmRlckFjY291bnRUYWJsZXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnJlbmRlck1hcmtldFRhYmxlKCl9XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KEFzc2V0V2hpdGVsaXN0LCB7XG4gICAgbGlzdGVuVG8oKSB7XG4gICAgICAgIHJldHVybiBbU2V0dGluZ3NTdG9yZV07XG4gICAgfSxcbiAgICBnZXRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFzc2V0V2hpdGVMaXN0VHlwZTogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnZpZXdTZXR0aW5ncy5nZXQoXG4gICAgICAgICAgICAgICAgXCJhc3NldFdoaXRlTGlzdFR5cGVcIixcbiAgICAgICAgICAgICAgICBcIndoaXRlbGlzdF9hdXRob3JpdGllc1wiXG4gICAgICAgICAgICApXG4gICAgICAgIH07XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgQXNzZXRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL0Fzc2V0QWN0aW9uc1wiO1xuaW1wb3J0IEFjY291bnRTZWxlY3RvciBmcm9tIFwiLi4vQWNjb3VudC9BY2NvdW50U2VsZWN0b3JcIjtcbmltcG9ydCBMaW5rVG9BY2NvdW50QnlJZCBmcm9tIFwiLi4vVXRpbGl0eS9MaW5rVG9BY2NvdW50QnlJZFwiO1xuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBY2NvdW50RmVlZFByb2R1Y2VycyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBwcm9kdWNlcl9uYW1lOiBudWxsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgb25BY2NvdW50Q2hhbmdlZChhY2NvdW50KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbmV3X3Byb2R1Y2VyX2lkOiBhY2NvdW50ID8gYWNjb3VudC5nZXQoXCJpZFwiKSA6IG51bGxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25BY2NvdW50TmFtZUNoYW5nZWQobmFtZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHByb2R1Y2VyX25hbWU6IG5hbWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7d2l0bmVzc0ZlZCwgY29tbWl0dGVlRmVkfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgaWYgKHdpdG5lc3NGZWQgfHwgY29tbWl0dGVlRmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IHNtYWxsLTEyIGxhcmdlLTggbGFyZ2Utb2Zmc2V0LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwicFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZmVlZF9ub3RfYWxsb3dlZF8xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhhcy1lcnJvclwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cInBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZlZWRfbm90X2FsbG93ZWRfMlwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IHNtYWxsLTEyIGxhcmdlLTggbGFyZ2Utb2Zmc2V0LTJcIj5cbiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUgZGFzaGJvYXJkLXRhYmxlIHRhYmxlLWhvdmVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLmFjY291bnQudGl0bGVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucmVtb3ZlX3RleHRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5wcm9kdWNlcnMubWFwKChhLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17YX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI3tpICsgMX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtUb0FjY291bnRCeUlkIGFjY291bnQ9e2F9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY2xpY2thYmxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2hhbmdlTGlzdC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJlbW92ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5jcm9zc19jaXJjbGUucmVtb3ZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZ1RvcDogXCIycmVtXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e1wiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYWRkX2ZlZWRcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lPXt0aGlzLnN0YXRlLnByb2R1Y2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnN0YXRlLnByb2R1Y2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkFjY291bnROYW1lQ2hhbmdlZC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5vbkFjY291bnRDaGFuZ2VkLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcj17bnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uX2xhYmVsPVwiYWNjb3VudC5wZXJtLmNvbmZpcm1fYWRkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWN0aW9uPXt0aGlzLnByb3BzLm9uQ2hhbmdlTGlzdC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLm5ld19wcm9kdWNlcl9pZFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7TGlua30gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XG5pbXBvcnQgU3RhdGlzdGljcyBmcm9tIFwiLi9TdGF0aXN0aWNzXCI7XG5pbXBvcnQgQWNjb3VudEFjdGlvbnMgZnJvbSBcImFjdGlvbnMvQWNjb3VudEFjdGlvbnNcIjtcbmltcG9ydCBUaW1lQWdvIGZyb20gXCIuLi9VdGlsaXR5L1RpbWVBZ29cIjtcbmltcG9ydCBIZWxwQ29udGVudCBmcm9tIFwiLi4vVXRpbGl0eS9IZWxwQ29udGVudFwiO1xuaW1wb3J0IGFjY291bnRVdGlscyBmcm9tIFwiY29tbW9uL2FjY291bnRfdXRpbHNcIjtcbmltcG9ydCB7VGFicywgVGFifSBmcm9tIFwiLi4vVXRpbGl0eS9UYWJzXCI7XG5pbXBvcnQge2dldFdhbGxldE5hbWV9IGZyb20gXCJicmFuZGluZ1wiO1xuaW1wb3J0IHtnZXRXYWxsZXRVUkx9IGZyb20gXCIuLi8uLi9icmFuZGluZ1wiO1xuXG5jbGFzcyBGZWVIZWxwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBkcHJvcHM6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZFxuICAgIH07XG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgZHByb3BzOiBcIjIuMS4wXCJcbiAgICB9O1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge2Rwcm9wc30gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8SGVscENvbnRlbnRcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgICAgICAgICBwYXRoPVwiY29tcG9uZW50cy9BY2NvdW50TWVtYmVyc2hpcFwiXG4gICAgICAgICAgICAgICAgc2VjdGlvbj1cImZlZS1kaXZpc2lvblwiXG4gICAgICAgICAgICAgICAgbmV4dE1haW50ZW5hbmNlVGltZT17e1xuICAgICAgICAgICAgICAgICAgICB0aW1lOiBkcHJvcHMuZ2V0KFwibmV4dF9tYWludGVuYW5jZV90aW1lXCIpXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxufVxuRmVlSGVscCA9IEJpbmRUb0NoYWluU3RhdGUoRmVlSGVscCk7XG5cbmNsYXNzIEFjY291bnRNZW1iZXJzaGlwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBhY2NvdW50OiBDaGFpblR5cGVzLkNoYWluQWNjb3VudC5pc1JlcXVpcmVkLFxuICAgICAgICBncHJvcHM6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZCxcbiAgICAgICAgY29yZV9hc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWRcbiAgICB9O1xuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGdwcm9wczogXCIyLjAuMFwiLFxuICAgICAgICBjb3JlX2Fzc2V0OiBcIjEuMy4wXCJcbiAgICB9O1xuXG4gICAgdXBncmFkZUFjY291bnQoaWQsIGxpZmV0aW1lLCBlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgQWNjb3VudEFjdGlvbnMudXBncmFkZUFjY291bnQoaWQsIGxpZmV0aW1lKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgIGFjY291bnRVdGlscy5nZXRGaW5hbEZlZUFzc2V0KHRoaXMucHJvcHMuYWNjb3VudCwgXCJhY2NvdW50X3VwZ3JhZGVcIik7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge2dwcm9wcywgY29yZV9hc3NldH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIGxldCBhY2NvdW50ID0gdGhpcy5wcm9wcy5hY2NvdW50LnRvSlMoKTtcblxuICAgICAgICBsZXQgbHRyID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGFjY291bnQubGlmZXRpbWVfcmVmZXJyZXIsIGZhbHNlKTtcbiAgICAgICAgaWYgKGx0cikgYWNjb3VudC5saWZldGltZV9yZWZlcnJlcl9uYW1lID0gbHRyLmdldChcIm5hbWVcIik7XG4gICAgICAgIGxldCByZWYgPSBDaGFpblN0b3JlLmdldEFjY291bnQoYWNjb3VudC5yZWZlcnJlciwgZmFsc2UpO1xuICAgICAgICBpZiAocmVmKSBhY2NvdW50LnJlZmVycmVyX25hbWUgPSByZWYuZ2V0KFwibmFtZVwiKTtcbiAgICAgICAgbGV0IHJlZyA9IENoYWluU3RvcmUuZ2V0QWNjb3VudChhY2NvdW50LnJlZ2lzdHJhciwgZmFsc2UpO1xuICAgICAgICBpZiAocmVnKSBhY2NvdW50LnJlZ2lzdHJhcl9uYW1lID0gcmVnLmdldChcIm5hbWVcIik7XG5cbiAgICAgICAgbGV0IGFjY291bnRfbmFtZSA9IGFjY291bnQubmFtZTtcblxuICAgICAgICBsZXQgbmV0d29ya19mZWUgPSBhY2NvdW50Lm5ldHdvcmtfZmVlX3BlcmNlbnRhZ2UgLyAxMDA7XG4gICAgICAgIGxldCBsaWZldGltZV9mZWUgPSBhY2NvdW50LmxpZmV0aW1lX3JlZmVycmVyX2ZlZV9wZXJjZW50YWdlIC8gMTAwO1xuICAgICAgICBsZXQgcmVmZXJyZXJfdG90YWxfZmVlID0gMTAwIC0gbmV0d29ya19mZWUgLSBsaWZldGltZV9mZWU7XG4gICAgICAgIGxldCByZWZlcnJlcl9mZWUgPVxuICAgICAgICAgICAgKHJlZmVycmVyX3RvdGFsX2ZlZSAqIGFjY291bnQucmVmZXJyZXJfcmV3YXJkc19wZXJjZW50YWdlKSAvIDEwMDAwO1xuICAgICAgICBsZXQgcmVnaXN0cmFyX2ZlZSA9IDEwMCAtIHJlZmVycmVyX2ZlZSAtIGxpZmV0aW1lX2ZlZSAtIG5ldHdvcmtfZmVlO1xuXG4gICAgICAgIGxldCBsaWZldGltZV9jb3N0ID1cbiAgICAgICAgICAgIChncHJvcHMuZ2V0SW4oW1xuICAgICAgICAgICAgICAgIFwicGFyYW1ldGVyc1wiLFxuICAgICAgICAgICAgICAgIFwiY3VycmVudF9mZWVzXCIsXG4gICAgICAgICAgICAgICAgXCJwYXJhbWV0ZXJzXCIsXG4gICAgICAgICAgICAgICAgOCxcbiAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgIFwibWVtYmVyc2hpcF9saWZldGltZV9mZWVcIlxuICAgICAgICAgICAgXSkgKlxuICAgICAgICAgICAgICAgIGdwcm9wcy5nZXRJbihbXCJwYXJhbWV0ZXJzXCIsIFwiY3VycmVudF9mZWVzXCIsIFwic2NhbGVcIl0pKSAvXG4gICAgICAgICAgICAxMDAwMDtcblxuICAgICAgICBsZXQgbWVtYmVyX3N0YXR1cyA9IENoYWluU3RvcmUuZ2V0QWNjb3VudE1lbWJlclN0YXR1cyhcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudFxuICAgICAgICApO1xuICAgICAgICBsZXQgbWVtYmVyc2hpcCA9IFwiYWNjb3VudC5tZW1iZXIuXCIgKyBtZW1iZXJfc3RhdHVzO1xuICAgICAgICBsZXQgZXhwaXJhdGlvbiA9IG51bGw7XG4gICAgICAgIGlmIChtZW1iZXJfc3RhdHVzID09PSBcImFubnVhbFwiKVxuICAgICAgICAgICAgZXhwaXJhdGlvbiA9IChcbiAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgKDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLmV4cGlyZXNcIiAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgPFRpbWVBZ28gdGltZT17YWNjb3VudC5tZW1iZXJzaGlwX2V4cGlyYXRpb25fZGF0ZX0gLz4pXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgbGV0IGV4cGlyYXRpb25fZGF0ZSA9IGFjY291bnQubWVtYmVyc2hpcF9leHBpcmF0aW9uX2RhdGU7XG4gICAgICAgIGlmIChleHBpcmF0aW9uX2RhdGUgPT09IFwiMTk2OS0xMi0zMVQyMzo1OTo1OVwiKVxuICAgICAgICAgICAgZXhwaXJhdGlvbl9kYXRlID0gXCJOZXZlclwiO1xuICAgICAgICBlbHNlIGlmIChleHBpcmF0aW9uX2RhdGUgPT09IFwiMTk3MC0wMS0wMVQwMDowMDowMFwiKVxuICAgICAgICAgICAgZXhwaXJhdGlvbl9kYXRlID0gXCJOL0FcIjtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgYXBwLXRhYmxlcyBuby1wYWRkaW5nXCIgcmVmPVwiYXBwVGFibGVzXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1jb250YWluZXIgZ2VuZXJpYy1ib3JkZXJlZC1ib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudGVkPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwibWVtYmVyc2hpcFRhYlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWNjb3VudC10YWJzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2xhc3M9XCJhY2NvdW50LW92ZXJ2aWV3IGJvcmRlcmVkLWhlYWRlciBjb250ZW50LWJsb2NrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50Q2xhc3M9XCJwYWRkaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5tZW1iZXIubWVtYmVyc2hpcFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9e21lbWJlcnNoaXB9IC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2V4cGlyYXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttZW1iZXJfc3RhdHVzID09PSBcImxpZmV0aW1lXCIgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxhcmdlLTYgbWVkaXVtLThcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEhlbHBDb250ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPVwiY29tcG9uZW50cy9BY2NvdW50TWVtYmVyc2hpcFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uPVwibGlmZXRpbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVlc0Nhc2hiYWNrPXsxMDAgLSBuZXR3b3JrX2ZlZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBsaWZldGltZV9jb3N0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0OiBjb3JlX2Fzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b24gbm8tbWFyZ2luXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudXBncmFkZUFjY291bnQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIudXBncmFkZV9saWZldGltZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7ICZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dHJ1ZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXJfc3RhdHVzID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhbm51YWxcIiA/IG51bGwgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnVwZ3JhZGVBY2NvdW50LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5zdWJzY3JpYmVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgbm8tbWFyZ2luXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5vLW1hcmdpbiBncmlkLWJsb2NrIHZlcnRpY2FsIGxhcmdlLWhvcml6b250YWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5vLW1hcmdpbiBncmlkLWJsb2NrIGxhcmdlLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttZW1iZXJfc3RhdHVzID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJsaWZldGltZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLnJlZmVycmFsX2xpbmtcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIucmVmZXJyYWxfdGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXRfbmFtZT17Z2V0V2FsbGV0TmFtZSgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2dldFdhbGxldFVSTCgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgLz9yPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuZmVlX2FsbG9jYXRpb25cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZSBrZXktdmFsdWUtdGFibGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5uZXR3b3JrX3BlcmNlbnRhZ2VcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmV0d29ya19mZWV9JVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLmxpZmV0aW1lX3JlZmVycmVyXCIgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7ICg8TGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17YGFjY291bnQvJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQubGlmZXRpbWVfcmVmZXJyZXJfbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQubGlmZXRpbWVfcmVmZXJyZXJfbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpZmV0aW1lX2ZlZX0lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIucmVnaXN0cmFyXCIgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7ICg8TGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17YGFjY291bnQvJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQucmVnaXN0cmFyX25hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LnJlZ2lzdHJhcl9uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVnaXN0cmFyX2ZlZX0lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIucmVmZXJyZXJcIiAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDsgKDxMaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvPXtgYWNjb3VudC8ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5yZWZlcnJlcl9uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5yZWZlcnJlcl9uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVmZXJyZXJfZmVlfSVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5tZW1iZXJzaGlwX2V4cGlyYXRpb25cIiAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uX2RhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdUb3A6IFwiMXJlbVwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5mZWVzX2Nhc2hiYWNrXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUga2V5LXZhbHVlLXRhYmxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFN0YXRpc3RpY3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdF9vYmplY3Q9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5zdGF0aXN0aWNzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIGxhcmdlLTdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGZWVIZWxwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudF9uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtGZWU9e25ldHdvcmtfZmVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVycmVyRmVlPXtyZWZlcnJlcl9mZWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmFyRmVlPXtyZWdpc3RyYXJfZmVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpZmV0aW1lRmVlPXtsaWZldGltZV9mZWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJyZXJUb3RhbEZlZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVycmVyX3RvdGFsX2ZlZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWludGVuYW5jZUludGVydmFsPXtncHJvcHMuZ2V0SW4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYW1ldGVyc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYWludGVuYW5jZV9pbnRlcnZhbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlc3RpbmdUaHJlc2hvbGQ9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBncHJvcHMuZ2V0SW4oW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhbWV0ZXJzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNhc2hiYWNrX3Zlc3RpbmdfdGhyZXNob2xkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0OiBjb3JlX2Fzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXN0aW5nUGVyaW9kPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3Byb3BzLmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYW1ldGVyc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjYXNoYmFja192ZXN0aW5nX3BlcmlvZF9zZWNvbmRzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA2MCAvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYwIC9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMjRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFicz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5BY2NvdW50TWVtYmVyc2hpcCA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudE1lbWJlcnNoaXApO1xuXG5leHBvcnQgZGVmYXVsdCBBY2NvdW50TWVtYmVyc2hpcDtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcbmltcG9ydCBGb3JtYXR0ZWRBc3NldCBmcm9tIFwiLi4vVXRpbGl0eS9Gb3JtYXR0ZWRBc3NldFwiO1xuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xuXG5jbGFzcyBTdGF0aXN0aWNzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBzdGF0X29iamVjdDogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHN0YXRfb2JqZWN0ID0gdGhpcy5wcm9wcy5zdGF0X29iamVjdC50b0pTKCk7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5mZWVzX3BhaWRcIiAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtwYXJzZUZsb2F0KHN0YXRfb2JqZWN0LmxpZmV0aW1lX2ZlZXNfcGFpZCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9XCIxLjMuMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQmluZFRvQ2hhaW5TdGF0ZShTdGF0aXN0aWNzKTtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcbmltcG9ydCBGb3JtYXR0ZWRBc3NldCBmcm9tIFwiLi4vVXRpbGl0eS9Gb3JtYXR0ZWRBc3NldFwiO1xuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XG5pbXBvcnQgV2FsbGV0QWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9XYWxsZXRBY3Rpb25zXCI7XG5pbXBvcnQge0FwaXN9IGZyb20gXCJiaXRzaGFyZXNqcy13c1wiO1xuaW1wb3J0IHtUYWJzLCBUYWJ9IGZyb20gXCIuLi9VdGlsaXR5L1RhYnNcIjtcblxuY2xhc3MgVmVzdGluZ0JhbGFuY2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIF9vbkNsYWltKGNsYWltQWxsLCBlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgV2FsbGV0QWN0aW9ucy5jbGFpbVZlc3RpbmdCYWxhbmNlKFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmlkLFxuICAgICAgICAgICAgdGhpcy5wcm9wcy52YixcbiAgICAgICAgICAgIGNsYWltQWxsXG4gICAgICAgICkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5wcm9wcy5oYW5kbGVDaGFuZ2VkID09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaGFuZGxlQ2hhbmdlZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7dmJ9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLnZiKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjdmJBc3NldCxcbiAgICAgICAgICAgIHZlc3RpbmdQZXJpb2QsXG4gICAgICAgICAgICBlYXJuZWQsXG4gICAgICAgICAgICBzZWNvbmRzUGVyRGF5ID0gNjAgKiA2MCAqIDI0LFxuICAgICAgICAgICAgYXZhaWxhYmxlUGVyY2VudCxcbiAgICAgICAgICAgIGJhbGFuY2U7XG4gICAgICAgIGlmICh2Yikge1xuICAgICAgICAgICAgYmFsYW5jZSA9IHZiLmJhbGFuY2UuYW1vdW50O1xuICAgICAgICAgICAgY3ZiQXNzZXQgPSBDaGFpblN0b3JlLmdldEFzc2V0KHZiLmJhbGFuY2UuYXNzZXRfaWQpO1xuICAgICAgICAgICAgZWFybmVkID0gdmIucG9saWN5WzFdLmNvaW5fc2Vjb25kc19lYXJuZWQ7XG4gICAgICAgICAgICB2ZXN0aW5nUGVyaW9kID0gdmIucG9saWN5WzFdLnZlc3Rpbmdfc2Vjb25kcztcbiAgICAgICAgICAgIGF2YWlsYWJsZVBlcmNlbnQgPVxuICAgICAgICAgICAgICAgIHZlc3RpbmdQZXJpb2QgPT09IDAgPyAxIDogZWFybmVkIC8gKHZlc3RpbmdQZXJpb2QgKiBiYWxhbmNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY3ZiQXNzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiYWxhbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiaDVcIlxuICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC52ZXN0aW5nLmJhbGFuY2VfbnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgaWQ9e3ZiLmlkfVxuICAgICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUga2V5LXZhbHVlLXRhYmxlXCI+XG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLmNhc2hiYWNrXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3ZiLmJhbGFuY2UuYW1vdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3ZiLmJhbGFuY2UuYXNzZXRfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5lYXJuZWRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmdldF9hc3NldF9hbW91bnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFybmVkIC8gc2Vjb25kc1BlckRheSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdmJBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7PFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuY29pbmRheXNcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIucmVxdWlyZWRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmdldF9hc3NldF9hbW91bnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZiLmJhbGFuY2UuYW1vdW50ICogdmVzdGluZ1BlcmlvZCkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzUGVyRGF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN2YkFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDs8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5jb2luZGF5c1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5yZW1haW5pbmdcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh2ZXN0aW5nUGVyaW9kICogKDEgLSBhdmFpbGFibGVQZXJjZW50KSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHNQZXJEYXkgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7ZGF5c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuYXZhaWxhYmxlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3V0aWxzLmZvcm1hdF9udW1iZXIoYXZhaWxhYmxlUGVyY2VudCAqIDEwMCwgMil9JVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAve1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlUGVyY2VudCAqIHZiLmJhbGFuY2UuYW1vdW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17Y3ZiQXNzZXQuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49XCIyXCIgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vbkNsYWltLmJpbmQodGhpcywgZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuY2xhaW1cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5jbGFzcyBBY2NvdW50VmVzdGluZyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHZiczogbnVsbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgdGhpcy5yZXRyaWV2ZVZlc3RpbmdCYWxhbmNlcy5jYWxsKHRoaXMsIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVwZGF0ZShuZXh0UHJvcHMpIHtcbiAgICAgICAgbGV0IG5ld0lkID0gbmV4dFByb3BzLmFjY291bnQuZ2V0KFwiaWRcIik7XG4gICAgICAgIGxldCBvbGRJZCA9IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKTtcblxuICAgICAgICBpZiAobmV3SWQgIT09IG9sZElkKSB7XG4gICAgICAgICAgICB0aGlzLnJldHJpZXZlVmVzdGluZ0JhbGFuY2VzLmNhbGwodGhpcywgbmV3SWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0cmlldmVWZXN0aW5nQmFsYW5jZXMoYWNjb3VudElkKSB7XG4gICAgICAgIGFjY291bnRJZCA9IGFjY291bnRJZCB8fCB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIik7XG4gICAgICAgIEFwaXMuaW5zdGFuY2UoKVxuICAgICAgICAgICAgLmRiX2FwaSgpXG4gICAgICAgICAgICAuZXhlYyhcImdldF92ZXN0aW5nX2JhbGFuY2VzXCIsIFthY2NvdW50SWRdKVxuICAgICAgICAgICAgLnRoZW4odmJzID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHt2YnN9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yOlwiLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge3Zic30gPSB0aGlzLnN0YXRlO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhdmJzIHx8XG4gICAgICAgICAgICAhdGhpcy5wcm9wcy5hY2NvdW50IHx8XG4gICAgICAgICAgICAhdGhpcy5wcm9wcy5hY2NvdW50LmdldChcInZlc3RpbmdfYmFsYW5jZXNcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBhY2NvdW50ID0gdGhpcy5wcm9wcy5hY2NvdW50LnRvSlMoKTtcblxuICAgICAgICBsZXQgYmFsYW5jZXMgPSB2YnNcbiAgICAgICAgICAgIC5tYXAodmIgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2Yi5iYWxhbmNlLmFtb3VudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFZlc3RpbmdCYWxhbmNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXt2Yi5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Yj17dmJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDaGFuZ2VkPXt0aGlzLnJldHJpZXZlVmVzdGluZ0JhbGFuY2VzLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcihhID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gISFhO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBzbWFsbC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtY29udGFpbmVyIGdlbmVyaWMtYm9yZGVyZWQtYm94XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFic1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRlZD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZz1cInZlc3RpbmdUYWJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFjY291bnQtdGFic1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic0NsYXNzPVwiYWNjb3VudC1vdmVydmlldyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudENsYXNzPVwicGFkZGluZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQudmVzdGluZy50aXRsZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC52ZXN0aW5nLmV4cGxhaW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwicFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFiYWxhbmNlcy5sZW5ndGggPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgc3R5bGU9e3twYWRkaW5nVG9wOiBcIjFyZW1cIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudmVzdGluZy5ub19iYWxhbmNlc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5BY2NvdW50VmVzdGluZy5WZXN0aW5nQmFsYW5jZSA9IFZlc3RpbmdCYWxhbmNlO1xuZXhwb3J0IGRlZmF1bHQgQWNjb3VudFZlc3Rpbmc7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgSW1tdXRhYmxlIGZyb20gXCJpbW11dGFibGVcIjtcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XG5pbXBvcnQgYWNjb3VudFV0aWxzIGZyb20gXCJjb21tb24vYWNjb3VudF91dGlsc1wiO1xuaW1wb3J0IEFwcGxpY2F0aW9uQXBpIGZyb20gXCJhcGkvQXBwbGljYXRpb25BcGlcIjtcbmltcG9ydCB7UHVibGljS2V5fSBmcm9tIFwiYml0c2hhcmVzanNcIjtcbmltcG9ydCBBY2NvdW50UGVybWlzc2lvbnNMaXN0IGZyb20gXCIuL0FjY291bnRQZXJtaXNzaW9uc0xpc3RcIjtcbmltcG9ydCBBY2NvdW50UGVybWlzc2lvbnNNaWdyYXRlIGZyb20gXCIuL0FjY291bnRQZXJtaXNzaW9uc01pZ3JhdGVcIjtcbmltcG9ydCBQdWJLZXlJbnB1dCBmcm9tIFwiLi4vRm9ybXMvUHViS2V5SW5wdXRcIjtcbmltcG9ydCB7VGFicywgVGFifSBmcm9tIFwiLi4vVXRpbGl0eS9UYWJzXCI7XG5pbXBvcnQgSGVscENvbnRlbnQgZnJvbSBcIi4uL1V0aWxpdHkvSGVscENvbnRlbnRcIjtcbmltcG9ydCB7UmVjZW50VHJhbnNhY3Rpb25zfSBmcm9tIFwiLi9SZWNlbnRUcmFuc2FjdGlvbnNcIjtcbmltcG9ydCB7Tm90aWZpY2F0aW9ufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XG5cbmNsYXNzIEFjY291bnRQZXJtaXNzaW9ucyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge307XG4gICAgICAgIHRoaXMub25QdWJsaXNoID0gdGhpcy5vblB1Ymxpc2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblJlc2V0ID0gdGhpcy5vblJlc2V0LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUFjY291bnREYXRhKHRoaXMucHJvcHMuYWNjb3VudCk7XG4gICAgICAgIGFjY291bnRVdGlscy5nZXRGaW5hbEZlZUFzc2V0KHRoaXMucHJvcHMuYWNjb3VudCwgXCJhY2NvdW50X3VwZGF0ZVwiKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgICBpZiAobmV4dFByb3BzLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudClcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQWNjb3VudERhdGEobmV4dFByb3BzLmFjY291bnQpO1xuICAgIH1cblxuICAgIHBlcm1pc3Npb25zRnJvbUltbXV0YWJsZU9iaihhdXRocykge1xuICAgICAgICBsZXQgdGhyZXNob2xkID0gYXV0aHMuZ2V0KFwid2VpZ2h0X3RocmVzaG9sZFwiKTtcbiAgICAgICAgbGV0IGFjY291bnRfYXV0aHMgPSBhdXRocy5nZXQoXCJhY2NvdW50X2F1dGhzXCIpO1xuICAgICAgICBsZXQga2V5X2F1dGhzID0gYXV0aHMuZ2V0KFwia2V5X2F1dGhzXCIpO1xuICAgICAgICBsZXQgYWRkcmVzc19hdXRocyA9IGF1dGhzLmdldChcImFkZHJlc3NfYXV0aHNcIik7XG5cbiAgICAgICAgbGV0IGFjY291bnRzID0gYWNjb3VudF9hdXRocy5tYXAoYSA9PiBhLmdldCgwKSk7XG4gICAgICAgIGxldCBrZXlzID0ga2V5X2F1dGhzLm1hcChhID0+IGEuZ2V0KDApKTtcbiAgICAgICAgbGV0IGFkZHJlc3NlcyA9IGFkZHJlc3NfYXV0aHMubWFwKGEgPT4gYS5nZXQoMCkpO1xuXG4gICAgICAgIGxldCB3ZWlnaHRzID0gYWNjb3VudF9hdXRocy5yZWR1Y2UoKHJlcywgYSkgPT4ge1xuICAgICAgICAgICAgcmVzW2EuZ2V0KDApXSA9IGEuZ2V0KDEpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSwge30pO1xuICAgICAgICB3ZWlnaHRzID0ga2V5X2F1dGhzLnJlZHVjZSgocmVzLCBhKSA9PiB7XG4gICAgICAgICAgICByZXNbYS5nZXQoMCldID0gYS5nZXQoMSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9LCB3ZWlnaHRzKTtcbiAgICAgICAgd2VpZ2h0cyA9IGFkZHJlc3NfYXV0aHMucmVkdWNlKChyZXMsIGEpID0+IHtcbiAgICAgICAgICAgIHJlc1thLmdldCgwKV0gPSBhLmdldCgxKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0sIHdlaWdodHMpO1xuXG4gICAgICAgIHJldHVybiB7dGhyZXNob2xkLCBhY2NvdW50cywga2V5cywgYWRkcmVzc2VzLCB3ZWlnaHRzfTtcbiAgICB9XG5cbiAgICBwZXJtaXNzaW9uc1RvSnNvbih0aHJlc2hvbGQsIGFjY291bnRzLCBrZXlzLCBhZGRyZXNzZXMsIHdlaWdodHMpIHtcbiAgICAgICAgbGV0IHJlcyA9IHt3ZWlnaHRfdGhyZXNob2xkOiB0aHJlc2hvbGR9O1xuICAgICAgICByZXNbXCJhY2NvdW50X2F1dGhzXCJdID0gYWNjb3VudHNcbiAgICAgICAgICAgIC5zb3J0KHV0aWxzLnNvcnRJRClcbiAgICAgICAgICAgIC5tYXAoYSA9PiBbYSwgd2VpZ2h0c1thXV0pXG4gICAgICAgICAgICAudG9KUygpO1xuICAgICAgICByZXNbXCJrZXlfYXV0aHNcIl0gPSBrZXlzXG4gICAgICAgICAgICAuc29ydCh1dGlscy5zb3J0SUQpXG4gICAgICAgICAgICAubWFwKGEgPT4gW2EsIHdlaWdodHNbYV1dKVxuICAgICAgICAgICAgLnRvSlMoKTtcbiAgICAgICAgcmVzW1wiYWRkcmVzc19hdXRoc1wiXSA9IGFkZHJlc3Nlc1xuICAgICAgICAgICAgLnNvcnQodXRpbHMuc29ydElEKVxuICAgICAgICAgICAgLm1hcChhID0+IFthLCB3ZWlnaHRzW2FdXSlcbiAgICAgICAgICAgIC50b0pTKCk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgdXBkYXRlQWNjb3VudERhdGEoYWNjb3VudCkge1xuICAgICAgICBsZXQgYWN0aXZlID0gdGhpcy5wZXJtaXNzaW9uc0Zyb21JbW11dGFibGVPYmooYWNjb3VudC5nZXQoXCJhY3RpdmVcIikpO1xuICAgICAgICBsZXQgb3duZXIgPSB0aGlzLnBlcm1pc3Npb25zRnJvbUltbXV0YWJsZU9iaihhY2NvdW50LmdldChcIm93bmVyXCIpKTtcbiAgICAgICAgbGV0IG1lbW9fa2V5ID0gYWNjb3VudC5nZXQoXCJvcHRpb25zXCIpLmdldChcIm1lbW9fa2V5XCIpO1xuICAgICAgICBsZXQgc3RhdGUgPSB7XG4gICAgICAgICAgICBhY3RpdmVfYWNjb3VudHM6IGFjdGl2ZS5hY2NvdW50cyxcbiAgICAgICAgICAgIGFjdGl2ZV9rZXlzOiBhY3RpdmUua2V5cyxcbiAgICAgICAgICAgIGFjdGl2ZV9hZGRyZXNzZXM6IGFjdGl2ZS5hZGRyZXNzZXMsXG4gICAgICAgICAgICBvd25lcl9hY2NvdW50czogb3duZXIuYWNjb3VudHMsXG4gICAgICAgICAgICBvd25lcl9rZXlzOiBvd25lci5rZXlzLFxuICAgICAgICAgICAgb3duZXJfYWRkcmVzc2VzOiBvd25lci5hZGRyZXNzZXMsXG4gICAgICAgICAgICBhY3RpdmVfd2VpZ2h0czogYWN0aXZlLndlaWdodHMsXG4gICAgICAgICAgICBvd25lcl93ZWlnaHRzOiBvd25lci53ZWlnaHRzLFxuICAgICAgICAgICAgYWN0aXZlX3RocmVzaG9sZDogYWN0aXZlLnRocmVzaG9sZCxcbiAgICAgICAgICAgIG93bmVyX3RocmVzaG9sZDogb3duZXIudGhyZXNob2xkLFxuICAgICAgICAgICAgbWVtb19rZXk6IG1lbW9fa2V5LFxuICAgICAgICAgICAgcHJldl9hY3RpdmVfYWNjb3VudHM6IGFjdGl2ZS5hY2NvdW50cyxcbiAgICAgICAgICAgIHByZXZfYWN0aXZlX2tleXM6IGFjdGl2ZS5rZXlzLFxuICAgICAgICAgICAgcHJldl9hY3RpdmVfYWRkcmVzc2VzOiBhY3RpdmUuYWRkcmVzc2VzLFxuICAgICAgICAgICAgcHJldl9vd25lcl9hY2NvdW50czogb3duZXIuYWNjb3VudHMsXG4gICAgICAgICAgICBwcmV2X293bmVyX2tleXM6IG93bmVyLmtleXMsXG4gICAgICAgICAgICBwcmV2X293bmVyX2FkZHJlc3Nlczogb3duZXIuYWRkcmVzc2VzLFxuICAgICAgICAgICAgcHJldl9hY3RpdmVfd2VpZ2h0czogYWN0aXZlLndlaWdodHMsXG4gICAgICAgICAgICBwcmV2X293bmVyX3dlaWdodHM6IG93bmVyLndlaWdodHMsXG4gICAgICAgICAgICBwcmV2X2FjdGl2ZV90aHJlc2hvbGQ6IGFjdGl2ZS50aHJlc2hvbGQsXG4gICAgICAgICAgICBwcmV2X293bmVyX3RocmVzaG9sZDogb3duZXIudGhyZXNob2xkLFxuICAgICAgICAgICAgcHJldl9tZW1vX2tleTogbWVtb19rZXlcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgfVxuXG4gICAgaXNDaGFuZ2VkKCkge1xuICAgICAgICBsZXQgcyA9IHRoaXMuc3RhdGU7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBzLmFjdGl2ZV9hY2NvdW50cyAhPT0gcy5wcmV2X2FjdGl2ZV9hY2NvdW50cyB8fFxuICAgICAgICAgICAgcy5hY3RpdmVfa2V5cyAhPT0gcy5wcmV2X2FjdGl2ZV9rZXlzIHx8XG4gICAgICAgICAgICBzLmFjdGl2ZV9hZGRyZXNzZXMgIT09IHMucHJldl9hY3RpdmVfYWRkcmVzc2VzIHx8XG4gICAgICAgICAgICBzLm93bmVyX2FjY291bnRzICE9PSBzLnByZXZfb3duZXJfYWNjb3VudHMgfHxcbiAgICAgICAgICAgIHMub3duZXJfa2V5cyAhPT0gcy5wcmV2X293bmVyX2tleXMgfHxcbiAgICAgICAgICAgIHMub3duZXJfYWRkcmVzc2VzICE9PSBzLnByZXZfb3duZXJfYWRkcmVzc2VzIHx8XG4gICAgICAgICAgICBzLmFjdGl2ZV90aHJlc2hvbGQgIT09IHMucHJldl9hY3RpdmVfdGhyZXNob2xkIHx8XG4gICAgICAgICAgICBzLm93bmVyX3RocmVzaG9sZCAhPT0gcy5wcmV2X293bmVyX3RocmVzaG9sZCB8fFxuICAgICAgICAgICAgcy5tZW1vX2tleSAhPT0gcy5wcmV2X21lbW9fa2V5XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZGlkQ2hhbmdlKHR5cGUsIHMgPSB0aGlzLnN0YXRlKSB7XG4gICAgICAgIGlmICh0eXBlID09PSBcIm1lbW9cIikge1xuICAgICAgICAgICAgcmV0dXJuIHMubWVtb19rZXkgIT09IHMucHJldl9tZW1vX2tleTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGlkQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgIFtcIl9rZXlzXCIsIFwiX2FjdGl2ZV9hZGRyZXNzZXNcIiwgXCJfYWNjb3VudHNcIiwgXCJfdGhyZXNob2xkXCJdLmZvckVhY2goXG4gICAgICAgICAgICBrZXkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50ID0gdHlwZSArIGtleTtcbiAgICAgICAgICAgICAgICBpZiAoc1tjdXJyZW50XSAhPT0gc1tcInByZXZfXCIgKyBjdXJyZW50XSkge1xuICAgICAgICAgICAgICAgICAgICBkaWRDaGFuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGRpZENoYW5nZTtcbiAgICB9XG5cbiAgICBvblB1Ymxpc2goKSB7XG4gICAgICAgIGxldCBzID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgbGV0IHVwZGF0ZWRfYWNjb3VudCA9IHRoaXMucHJvcHMuYWNjb3VudC50b0pTKCk7XG5cbiAgICAgICAgLy8gU2V0IGZlZSBhc3NldFxuICAgICAgICB1cGRhdGVkX2FjY291bnQuZmVlID0ge1xuICAgICAgICAgICAgYW1vdW50OiAwLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IGFjY291bnRVdGlscy5nZXRGaW5hbEZlZUFzc2V0KFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRfYWNjb3VudC5pZCxcbiAgICAgICAgICAgICAgICBcImFjY291bnRfdXBkYXRlXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgdXBkYXRlT2JqZWN0ID0ge1xuICAgICAgICAgICAgYWNjb3VudDogdXBkYXRlZF9hY2NvdW50LmlkXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHRoaXMuZGlkQ2hhbmdlKFwiYWN0aXZlXCIpKSB7XG4gICAgICAgICAgICB1cGRhdGVPYmplY3QuYWN0aXZlID0gdGhpcy5wZXJtaXNzaW9uc1RvSnNvbihcbiAgICAgICAgICAgICAgICBzLmFjdGl2ZV90aHJlc2hvbGQsXG4gICAgICAgICAgICAgICAgcy5hY3RpdmVfYWNjb3VudHMsXG4gICAgICAgICAgICAgICAgcy5hY3RpdmVfa2V5cyxcbiAgICAgICAgICAgICAgICBzLmFjdGl2ZV9hZGRyZXNzZXMsXG4gICAgICAgICAgICAgICAgcy5hY3RpdmVfd2VpZ2h0c1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kaWRDaGFuZ2UoXCJvd25lclwiKSkge1xuICAgICAgICAgICAgdXBkYXRlT2JqZWN0Lm93bmVyID0gdGhpcy5wZXJtaXNzaW9uc1RvSnNvbihcbiAgICAgICAgICAgICAgICBzLm93bmVyX3RocmVzaG9sZCxcbiAgICAgICAgICAgICAgICBzLm93bmVyX2FjY291bnRzLFxuICAgICAgICAgICAgICAgIHMub3duZXJfa2V5cyxcbiAgICAgICAgICAgICAgICBzLm93bmVyX2FkZHJlc3NlcyxcbiAgICAgICAgICAgICAgICBzLm93bmVyX3dlaWdodHNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5kaWRDaGFuZ2UoXCJvd25lclwiKSAmJlxuICAgICAgICAgICAgcy5vd25lcl9rZXlzLnNpemUgPT09IDAgJiZcbiAgICAgICAgICAgIHMub3duZXJfYWRkcmVzc2VzLnNpemUgPT09IDAgJiZcbiAgICAgICAgICAgIHMub3duZXJfYWNjb3VudHMuc2l6ZSA9PT0gMSAmJlxuICAgICAgICAgICAgcy5vd25lcl9hY2NvdW50cy5maXJzdCgpID09PSB1cGRhdGVkX2FjY291bnQuaWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gTm90aWZpY2F0aW9uLndhcm5pbmcoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgXCJub3RpZmljYXRpb25zLmFjY291bnRfcGVybWlzc2lvbnNfdXBkYXRlX3dhcm5pbmdcIlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHMubWVtb19rZXkgJiZcbiAgICAgICAgICAgIHRoaXMuZGlkQ2hhbmdlKFwibWVtb1wiKSAmJlxuICAgICAgICAgICAgdGhpcy5pc1ZhbGlkUHViS2V5KHMubWVtb19rZXkpXG4gICAgICAgICkge1xuICAgICAgICAgICAgdXBkYXRlT2JqZWN0Lm5ld19vcHRpb25zID0gdGhpcy5wcm9wcy5hY2NvdW50LmdldChcIm9wdGlvbnNcIikudG9KUygpO1xuICAgICAgICAgICAgdXBkYXRlT2JqZWN0Lm5ld19vcHRpb25zLm1lbW9fa2V5ID0gcy5tZW1vX2tleTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiLS0gQWNjb3VudFBlcm1pc3Npb25zLm9uUHVibGlzaCAtLT5cIiwgdXBkYXRlT2JqZWN0LCBzLm1lbW9fa2V5KTtcbiAgICAgICAgQXBwbGljYXRpb25BcGkudXBkYXRlQWNjb3VudCh1cGRhdGVPYmplY3QpO1xuICAgIH1cblxuICAgIGlzVmFsaWRQdWJLZXkodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICEhUHVibGljS2V5LmZyb21QdWJsaWNLZXlTdHJpbmcodmFsdWUpO1xuICAgIH1cblxuICAgIG9uUmVzZXQoKSB7XG4gICAgICAgIGxldCBzID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBhY3RpdmVfYWNjb3VudHM6IHMucHJldl9hY3RpdmVfYWNjb3VudHMsXG4gICAgICAgICAgICBhY3RpdmVfa2V5czogcy5wcmV2X2FjdGl2ZV9rZXlzLFxuICAgICAgICAgICAgYWN0aXZlX2FkZHJlc3Nlczogcy5wcmV2X2FjdGl2ZV9hZGRyZXNzZXMsXG4gICAgICAgICAgICBvd25lcl9hY2NvdW50czogcy5wcmV2X293bmVyX2FjY291bnRzLFxuICAgICAgICAgICAgb3duZXJfa2V5czogcy5wcmV2X293bmVyX2tleXMsXG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzZXM6IHMucHJldl9vd25lcl9hZGRyZXNzZXMsXG4gICAgICAgICAgICBhY3RpdmVfd2VpZ2h0czogcy5wcmV2X2FjdGl2ZV93ZWlnaHRzLFxuICAgICAgICAgICAgb3duZXJfd2VpZ2h0czogcy5wcmV2X293bmVyX3dlaWdodHMsXG4gICAgICAgICAgICBhY3RpdmVfdGhyZXNob2xkOiBzLnByZXZfYWN0aXZlX3RocmVzaG9sZCxcbiAgICAgICAgICAgIG93bmVyX3RocmVzaG9sZDogcy5wcmV2X293bmVyX3RocmVzaG9sZCxcbiAgICAgICAgICAgIG1lbW9fa2V5OiBzLnByZXZfbWVtb19rZXlcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25BZGRJdGVtKGNvbGxlY3Rpb24sIGl0ZW1fdmFsdWUsIHdlaWdodCkge1xuICAgICAgICBsZXQgc3RhdGUgPSB7fTtcbiAgICAgICAgbGV0IGxpc3QgPVxuICAgICAgICAgICAgY29sbGVjdGlvbiArXG4gICAgICAgICAgICAodXRpbHMuaXNfb2JqZWN0X2lkKGl0ZW1fdmFsdWUpID8gXCJfYWNjb3VudHNcIiA6IFwiX2tleXNcIik7XG4gICAgICAgIHN0YXRlW2xpc3RdID0gdGhpcy5zdGF0ZVtsaXN0XS5wdXNoKGl0ZW1fdmFsdWUpO1xuICAgICAgICB0aGlzLnN0YXRlW2NvbGxlY3Rpb24gKyBcIl93ZWlnaHRzXCJdW2l0ZW1fdmFsdWVdID0gd2VpZ2h0O1xuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcbiAgICB9XG5cbiAgICBvblJlbW92ZUl0ZW0oY29sbGVjdGlvbiwgaXRlbV92YWx1ZSwgbGlzdFN1ZmZpeCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIm9uUmVtb3ZlSXRlbVwiLCBjb2xsZWN0aW9uLCBpdGVtX3ZhbHVlLCBsaXN0U3VmZml4KTtcbiAgICAgICAgbGV0IHN0YXRlID0ge307XG4gICAgICAgIGxldCBsaXN0ID0gY29sbGVjdGlvbiArIGxpc3RTdWZmaXg7XG5cbiAgICAgICAgc3RhdGVbbGlzdF0gPSB0aGlzLnN0YXRlW2xpc3RdLmZpbHRlcihpID0+IGkgIT09IGl0ZW1fdmFsdWUpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcbiAgICB9XG5cbiAgICBvblRocmVzaG9sZENoYW5nZWQodmFyX25hbWUsIGV2ZW50KSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHBhcnNlSW50KGV2ZW50LnRhcmdldC52YWx1ZS50cmltKCkpO1xuICAgICAgICBsZXQgc3RhdGUgPSB7fTtcbiAgICAgICAgc3RhdGVbdmFyX25hbWVdID0gdmFsdWU7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xuICAgIH1cblxuICAgIHZhbGlkYXRlQWNjb3VudChjb2xsZWN0aW9uLCBhY2NvdW50KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHN1bVVwV2VpZ2h0cyhhY2NvdW50cywga2V5cywgYWRkcmVzc2VzLCB3ZWlnaHRzKSB7XG4gICAgICAgIGxldCBzdW0gPSBhY2NvdW50cy5yZWR1Y2UoKHN1bSwgYSkgPT4gc3VtICsgd2VpZ2h0c1thXSwgMCk7XG4gICAgICAgIHN1bSA9IGtleXMucmVkdWNlKChzdW0sIGEpID0+IHN1bSArIHdlaWdodHNbYV0sIHN1bSk7XG4gICAgICAgIHJldHVybiBhZGRyZXNzZXMucmVkdWNlKChzdW0sIGEpID0+IHN1bSArIHdlaWdodHNbYV0sIHN1bSk7XG4gICAgfVxuXG4gICAgb25NZW1vS2V5Q2hhbmdlZChtZW1vX2tleSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHttZW1vX2tleX0pO1xuICAgIH1cblxuICAgIG9uU2V0UGFzc3dvcmRLZXlzKGtleXMsIHJvbGVzID0gW1wiYWN0aXZlXCIsIFwib3duZXJcIiwgXCJtZW1vXCJdKSB7XG4gICAgICAgIGxldCBuZXdTdGF0ZSA9IHt9O1xuXG4gICAgICAgIHJvbGVzLmZvckVhY2gocm9sZSA9PiB7XG4gICAgICAgICAgICBuZXdTdGF0ZVtgcGFzc3dvcmRfJHtyb2xlfWBdID0ga2V5c1tyb2xlXTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgZXJyb3IxLCBlcnJvcjI7XG5cbiAgICAgICAgbGV0IHtcbiAgICAgICAgICAgIGFjdGl2ZV9hY2NvdW50cyxcbiAgICAgICAgICAgIGFjdGl2ZV9rZXlzLFxuICAgICAgICAgICAgYWN0aXZlX2FkZHJlc3NlcyxcbiAgICAgICAgICAgIGFjdGl2ZV93ZWlnaHRzXG4gICAgICAgIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBsZXQge1xuICAgICAgICAgICAgb3duZXJfYWNjb3VudHMsXG4gICAgICAgICAgICBvd25lcl9rZXlzLFxuICAgICAgICAgICAgb3duZXJfYWRkcmVzc2VzLFxuICAgICAgICAgICAgb3duZXJfd2VpZ2h0c1xuICAgICAgICB9ID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICBsZXQgdGhyZXNob2xkID1cbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYWN0aXZlX3RocmVzaG9sZCA+IDAgPyB0aGlzLnN0YXRlLmFjdGl2ZV90aHJlc2hvbGQgOiAwO1xuICAgICAgICBsZXQgd2VpZ2h0c190b3RhbCA9IHRoaXMuc3VtVXBXZWlnaHRzKFxuICAgICAgICAgICAgYWN0aXZlX2FjY291bnRzLFxuICAgICAgICAgICAgYWN0aXZlX2tleXMsXG4gICAgICAgICAgICBhY3RpdmVfYWRkcmVzc2VzLFxuICAgICAgICAgICAgYWN0aXZlX3dlaWdodHNcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHRoaXMuZGlkQ2hhbmdlKFwiYWN0aXZlXCIpICYmIHdlaWdodHNfdG90YWwgPCB0aHJlc2hvbGQpXG4gICAgICAgICAgICBlcnJvcjEgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0ud2FybmluZzFcIiwge1xuICAgICAgICAgICAgICAgIHdlaWdodHNfdG90YWwsXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB0aHJlc2hvbGQgPVxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5vd25lcl90aHJlc2hvbGQgPiAwID8gdGhpcy5zdGF0ZS5vd25lcl90aHJlc2hvbGQgOiAwO1xuICAgICAgICB3ZWlnaHRzX3RvdGFsID0gdGhpcy5zdW1VcFdlaWdodHMoXG4gICAgICAgICAgICBvd25lcl9hY2NvdW50cyxcbiAgICAgICAgICAgIG93bmVyX2tleXMsXG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzZXMsXG4gICAgICAgICAgICBvd25lcl93ZWlnaHRzXG4gICAgICAgICk7XG4gICAgICAgIGlmICh0aGlzLmRpZENoYW5nZShcIm93bmVyXCIpICYmIHdlaWdodHNfdG90YWwgPCB0aHJlc2hvbGQpXG4gICAgICAgICAgICBlcnJvcjIgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0ud2FybmluZzJcIiwge1xuICAgICAgICAgICAgICAgIHdlaWdodHNfdG90YWwsXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBsZXQgcHVibGlzaF9idXR0b25zX2NsYXNzID1cbiAgICAgICAgICAgIFwiYnV0dG9uXCIgK1xuICAgICAgICAgICAgKCEoZXJyb3IxIHx8IGVycm9yMikgJiZcbiAgICAgICAgICAgIHRoaXMuaXNDaGFuZ2VkKCkgJiZcbiAgICAgICAgICAgIHRoaXMuaXNWYWxpZFB1YktleSh0aGlzLnN0YXRlLm1lbW9fa2V5KVxuICAgICAgICAgICAgICAgID8gXCJcIlxuICAgICAgICAgICAgICAgIDogXCIgZGlzYWJsZWRcIik7XG4gICAgICAgIGxldCByZXNldF9idXR0b25zX2NsYXNzID1cbiAgICAgICAgICAgIFwiYnV0dG9uXCIgKyAodGhpcy5pc0NoYW5nZWQoKSA/IFwiXCIgOiBcIiBkaXNhYmxlZFwiKTtcblxuICAgICAgICBsZXQgYWNjb3VudHNMaXN0ID0gSW1tdXRhYmxlLlNldCgpO1xuICAgICAgICBhY2NvdW50c0xpc3QgPSBhY2NvdW50c0xpc3QuYWRkKHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBzbWFsbC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtY29udGFpbmVyIGdlbmVyaWMtYm9yZGVyZWQtYm94XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFic1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRBY3RpdmVUYWI9ezF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudGVkPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwicGVybWlzc2lvbnNUYWJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFjY291bnQtdGFic1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic0NsYXNzPVwiYWNjb3VudC1vdmVydmlldyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudENsYXNzPVwicGFkZGluZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9ucz17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uLWJ1dHRvbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3Jlc2V0X2J1dHRvbnNfY2xhc3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vblJlc2V0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5yZXNldFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17cHVibGlzaF9idXR0b25zX2NsYXNzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25QdWJsaXNofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs5fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5wdWJsaXNoXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQucGVybS5hY3RpdmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEhlbHBDb250ZW50IHBhdGg9XCJjb21wb25lbnRzL0FjY291bnRQZXJtQWN0aXZlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gY2xhc3NOYW1lPVwidGhyZXNob2xkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS50aHJlc2hvbGRcIiAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDsgJm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwiNVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmFjdGl2ZV90aHJlc2hvbGR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uVGhyZXNob2xkQ2hhbmdlZC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWN0aXZlX3RocmVzaG9sZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50UGVybWlzc2lvbnNMaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQucGVybS5hZGRfcGVybWlzc2lvbl9sYWJlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50cz17YWN0aXZlX2FjY291bnRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5cz17YWN0aXZlX2tleXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzPXthY3RpdmVfd2VpZ2h0c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3Nlcz17YWN0aXZlX2FkZHJlc3Nlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQWNjb3VudD17dGhpcy52YWxpZGF0ZUFjY291bnQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWN0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFkZEl0ZW09e3RoaXMub25BZGRJdGVtLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZW1vdmVJdGVtPXt0aGlzLm9uUmVtb3ZlSXRlbS5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnBlcm0uYWNjb3VudF9uYW1lX29yX2tleVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3IxID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIGhhcy1lcnJvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcjF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5wZXJtLm93bmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIZWxwQ29udGVudCBwYXRoPVwiY29tcG9uZW50cy9BY2NvdW50UGVybU93bmVyXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gY2xhc3NOYW1lPVwidGhyZXNob2xkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS50aHJlc2hvbGRcIiAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDsgJm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwiNVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm93bmVyX3RocmVzaG9sZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25UaHJlc2hvbGRDaGFuZ2VkLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvd25lcl90aHJlc2hvbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvQ29tcGxldGU9XCJvZmZcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFBlcm1pc3Npb25zTGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnBlcm0uYWRkX3Blcm1pc3Npb25fbGFiZWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudHM9e293bmVyX2FjY291bnRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5cz17b3duZXJfa2V5c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHM9e293bmVyX3dlaWdodHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzZXM9e293bmVyX2FkZHJlc3Nlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQWNjb3VudD17dGhpcy52YWxpZGF0ZUFjY291bnQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3duZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWRkSXRlbT17dGhpcy5vbkFkZEl0ZW0uYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3duZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlSXRlbT17dGhpcy5vblJlbW92ZUl0ZW0uYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3duZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnBlcm0uYWNjb3VudF9uYW1lX29yX2tleVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3IyID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIGhhcy1lcnJvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcjJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5wZXJtLm1lbW9fa2V5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIZWxwQ29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXhXaWR0aDogXCI4MDBweFwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9XCJjb21wb25lbnRzL0FjY291bnRQZXJtTWVtb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQdWJLZXlJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwibWVtb19rZXlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubWVtb19rZXl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQucGVybS5tZW1vX3B1YmxpY19rZXlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQdWJsaWMgS2V5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uTWVtb0tleUNoYW5nZWQuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs3fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQucGVybS5wYXNzd29yZF9tb2RlbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFBlcm1pc3Npb25zTWlncmF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlPXt0aGlzLnN0YXRlLnBhc3N3b3JkX2FjdGl2ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyPXt0aGlzLnN0YXRlLnBhc3N3b3JkX293bmVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtbz17dGhpcy5zdGF0ZS5wYXNzd29yZF9tZW1vfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZXRQYXNzd29yZEtleXM9e3RoaXMub25TZXRQYXNzd29yZEtleXMuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5wcm9wcy5hY2NvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlS2V5cz17dGhpcy5zdGF0ZS5hY3RpdmVfa2V5c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyS2V5cz17dGhpcy5zdGF0ZS5vd25lcl9rZXlzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb0tleT17dGhpcy5zdGF0ZS5tZW1vX2tleX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWRkQWN0aXZlPXt0aGlzLm9uQWRkSXRlbS5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlQWN0aXZlPXt0aGlzLm9uUmVtb3ZlSXRlbS5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWRkT3duZXI9e3RoaXMub25BZGRJdGVtLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm93bmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZU93bmVyPXt0aGlzLm9uUmVtb3ZlSXRlbS5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvd25lclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZXRNZW1vPXt0aGlzLm9uTWVtb0tleUNoYW5nZWQuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFicz5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWItY29udGVudFwiIHN0eWxlPXt7cGFkZGluZzogMTB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpdmlkZXJcIiAvPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJlY2VudFRyYW5zYWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50c0xpc3Q9e2FjY291bnRzTGlzdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ9ezI1fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYWN0Vmlldz17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcj1cImFjY291bnRfdXBkYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiBcIjJyZW1cIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQWNjb3VudFBlcm1pc3Npb25zO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtMaW5rfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuaW1wb3J0IEFjY291bnRTZWxlY3RvciBmcm9tIFwiLi9BY2NvdW50U2VsZWN0b3JcIjtcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcbmltcG9ydCBBY2NvdW50SW1hZ2UgZnJvbSBcIi4vQWNjb3VudEltYWdlXCI7XG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XG5pbXBvcnQgUHJpdmF0ZUtleVZpZXcgZnJvbSBcImNvbXBvbmVudHMvUHJpdmF0ZUtleVZpZXdcIjtcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XG5pbXBvcnQgQWRkcmVzc0luZGV4IGZyb20gXCJzdG9yZXMvQWRkcmVzc0luZGV4XCI7XG5pbXBvcnQgUHJpdmF0ZUtleVN0b3JlIGZyb20gXCJzdG9yZXMvUHJpdmF0ZUtleVN0b3JlXCI7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XG5cbmNsYXNzIEFjY291bnRQZXJtaXNzaW9uUm93IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBhY2NvdW50OiBQcm9wVHlwZXMub2JqZWN0LFxuICAgICAgICBwdWJrZXk6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIGFkZHJlc3M6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIG9uUmVtb3ZlSXRlbTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgICAgd2VpZ2h0czogUHJvcFR5cGVzLm9iamVjdFxuICAgIH07XG5cbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzKSB7XG4gICAgICAgIHJldHVybiAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobmV4dFByb3BzLCB0aGlzLnByb3BzKTtcbiAgICB9XG5cbiAgICBfbG9va1VwUHViS2V5Rm9yQWRkcmVzcyhhZGRyZXNzKSB7XG4gICAgICAgIHZhciBhZGRyZXNzZXMgPSBBZGRyZXNzSW5kZXguZ2V0U3RhdGUoKS5hZGRyZXNzZXM7XG4gICAgICAgIHZhciBwdWJrZXkgPSBhZGRyZXNzZXMuZ2V0KGFkZHJlc3MpO1xuICAgICAgICByZXR1cm4gcHVia2V5O1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IG5hbWUsIGl0ZW1faWQsIG5hbWVfb3Jfa2V5O1xuICAgICAgICBsZXQgc3VmZml4ID0gXCJfYWNjb3VudHNcIjtcbiAgICAgICAgbGV0IHB1YktleSA9IHRoaXMucHJvcHMucHVia2V5O1xuXG4gICAgICAgIGNvbnN0IGtleXMgPSBQcml2YXRlS2V5U3RvcmUuZ2V0U3RhdGUoKS5rZXlzO1xuXG4gICAgICAgIGxldCBoYXNfcHJpdmF0ZSA9IGZhbHNlO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjY291bnQpIHtcbiAgICAgICAgICAgIG5hbWUgPSB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwibmFtZVwiKTtcbiAgICAgICAgICAgIGl0ZW1faWQgPSB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIik7XG4gICAgICAgICAgICBuYW1lX29yX2tleSA9IChcbiAgICAgICAgICAgICAgICA8TGluayB0bz17YC9hY2NvdW50LyR7bmFtZX0vcGVybWlzc2lvbnNgfT57bmFtZX08L0xpbms+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHB1YktleSkge1xuICAgICAgICAgICAgbmFtZSA9IGl0ZW1faWQgPSBwdWJLZXk7XG4gICAgICAgICAgICBuYW1lX29yX2tleSA9IChcbiAgICAgICAgICAgICAgICA8UHJpdmF0ZUtleVZpZXcgcHVia2V5PXtwdWJLZXl9PntwdWJLZXl9PC9Qcml2YXRlS2V5Vmlldz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzdWZmaXggPSBcIl9rZXlzXCI7XG4gICAgICAgICAgICBoYXNfcHJpdmF0ZSA9IGtleXMuaGFzKHB1YktleSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5hZGRyZXNzKSB7XG4gICAgICAgICAgICBwdWJLZXkgPSB0aGlzLl9sb29rVXBQdWJLZXlGb3JBZGRyZXNzKHRoaXMucHJvcHMuYWRkcmVzcyk7XG4gICAgICAgICAgICBpdGVtX2lkID0gdGhpcy5wcm9wcy5hZGRyZXNzO1xuICAgICAgICAgICAgbmFtZV9vcl9rZXkgPSAhcHViS2V5ID8gKFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWRkcmVzc1xuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8UHJpdmF0ZUtleVZpZXcgcHVia2V5PXtwdWJLZXl9PntwdWJLZXl9PC9Qcml2YXRlS2V5Vmlldz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzdWZmaXggPSBcIl9hZGRyZXNzZXNcIjtcbiAgICAgICAgICAgIGhhc19wcml2YXRlID0ga2V5cy5oYXMocHViS2V5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dHIga2V5PXtuYW1lfT5cbiAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmFjY291bnQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT17e2hlaWdodDogMzAsIHdpZHRoOiAzMH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17bmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiBwdWJLZXkgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjY291bnQtaW1hZ2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJpdmF0ZUtleVZpZXcgcHVia2V5PXtwdWJLZXl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvbiBuYW1lPVwia2V5XCIgdGl0bGU9XCJpY29ucy5rZXlcIiBzaXplPVwiNHhcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvUHJpdmF0ZUtleVZpZXc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPXsoaGFzX3ByaXZhdGUgPyBcIm15LWtleVwiIDogXCJcIikgKyBcIiBwdWIta2V5XCJ9PlxuICAgICAgICAgICAgICAgICAgICB7bmFtZV9vcl9rZXl9XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQ+e3RoaXMucHJvcHMud2VpZ2h0c1tpdGVtX2lkXX08L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25SZW1vdmVJdGVtLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5yZW1vdmVfd2l0bmVzc1wiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8L3RyPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuY2xhc3MgQWNjb3VudFBlcm1pc3Npb25zTGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgYWNjb3VudHM6IENoYWluVHlwZXMuQ2hhaW5PYmplY3RzTGlzdCxcbiAgICAgICAgb25BZGRJdGVtOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgICBvblJlbW92ZUl0ZW06IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgICAgIHZhbGlkYXRlQWNjb3VudDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgIGxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsIC8vIGEgdHJhbnNsYXRpb24ga2V5IGZvciB0aGUgbGFiZWwsXG4gICAgICAgIHBsYWNlaG9sZGVyOiBQcm9wVHlwZXMuc3RyaW5nLCAvLyB0aGUgcGxhY2Vob2xkZXIgdGV4dCB0byBiZSBkaXNwbGF5ZWQgd2hlbiB0aGVyZSBpcyBubyB1c2VyX2lucHV0XG4gICAgICAgIHRhYkluZGV4OiBQcm9wVHlwZXMubnVtYmVyLCAvLyB0YWJpbmRleCBwcm9wZXJ0eSB0byBiZSBwYXNzZWQgdG8gaW5wdXQgdGFnXG4gICAgICAgIHdlaWdodHM6IFByb3BUeXBlcy5vYmplY3QgLy8gd2VpZ2h0czogaGFzaCBvZiB7YWNjb3VudCBpZCAtPiB3ZWlnaHR9XG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNlbGVjdGVkX2l0ZW06IG51bGwsXG4gICAgICAgICAgICBpdGVtX25hbWVfaW5wdXQ6IFwiXCIsXG4gICAgICAgICAgICB3ZWlnaHRfaW5wdXQ6IFwiXCIsXG4gICAgICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uSXRlbUNoYW5nZSA9IHRoaXMub25JdGVtQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25JdGVtQWNjb3VudENoYW5nZSA9IHRoaXMub25JdGVtQWNjb3VudENoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uQWRkSXRlbSA9IHRoaXMub25BZGRJdGVtLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgb25JdGVtQ2hhbmdlKGl0ZW1fbmFtZV9pbnB1dCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtpdGVtX25hbWVfaW5wdXR9KTtcbiAgICB9XG5cbiAgICBvbkl0ZW1BY2NvdW50Q2hhbmdlKHNlbGVjdGVkX2l0ZW0pIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRfaXRlbSwgZXJyb3I6IG51bGx9KTtcbiAgICAgICAgaWYgKHNlbGVjdGVkX2l0ZW0gJiYgdGhpcy5wcm9wcy52YWxpZGF0ZUFjY291bnQpIHtcbiAgICAgICAgICAgIGxldCByZXMgPSB0aGlzLnByb3BzLnZhbGlkYXRlQWNjb3VudChzZWxlY3RlZF9pdGVtKTtcbiAgICAgICAgICAgIGlmIChyZXMgPT09IG51bGwpIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzID09PSBcInN0cmluZ1wiKSB0aGlzLnNldFN0YXRlKHtlcnJvcjogcmVzfSk7XG4gICAgICAgICAgICBlbHNlIHJlcy50aGVuKGVycm9yID0+IHRoaXMuc2V0U3RhdGUoe2Vycm9yOiBlcnJvcn0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uV2VpZ2h0Q2hhbmdlZChldmVudCkge1xuICAgICAgICBsZXQgdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWUudHJpbSgpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHt3ZWlnaHRfaW5wdXQ6IHBhcnNlSW50KHZhbHVlKX0pO1xuICAgIH1cblxuICAgIG9uQWRkSXRlbShpdGVtKSB7XG4gICAgICAgIGlmICghaXRlbSkgcmV0dXJuO1xuICAgICAgICBsZXQgbmV4dF9zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNlbGVjdGVkX2l0ZW06IG51bGwsXG4gICAgICAgICAgICBpdGVtX25hbWVfaW5wdXQ6IFwiXCIsXG4gICAgICAgICAgICB3ZWlnaHRfaW5wdXQ6IFwiXCIsXG4gICAgICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFN0YXRlKG5leHRfc3RhdGUpO1xuICAgICAgICBsZXQgaXRlbV92YWx1ZSA9IHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiID8gaXRlbSA6IGl0ZW0uZ2V0KFwiaWRcIik7XG4gICAgICAgIHRoaXMucHJvcHMub25BZGRJdGVtKGl0ZW1fdmFsdWUsIHRoaXMuc3RhdGUud2VpZ2h0X2lucHV0KTtcbiAgICB9XG5cbiAgICBvbldlaWdodEtleURvd24oZXZlbnQpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMTMgJiZcbiAgICAgICAgICAgIHRoaXMuc3RhdGUud2VpZ2h0X2lucHV0ICYmXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNlbGVjdGVkX2l0ZW1cbiAgICAgICAgKVxuICAgICAgICAgICAgdGhpcy5vbkFkZEl0ZW0odGhpcy5zdGF0ZS5zZWxlY3RlZF9pdGVtKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHZhciBrZXkgPSAwO1xuICAgICAgICBsZXQgYWNjb3VudF9yb3dzID0gdGhpcy5wcm9wcy5hY2NvdW50c1xuICAgICAgICAgICAgLmZpbHRlcihpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAvL2lmICh0aGlzLnN0YXRlLml0ZW1fbmFtZV9pbnB1dCkgcmV0dXJuIGkuZ2V0KFwibmFtZVwiKS5pbmRleE9mKHRoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0KSAhPT0gLTE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYS5nZXQoXCJuYW1lXCIpID4gYi5nZXQoXCJuYW1lXCIpKSByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhLmdldChcIm5hbWVcIikgPCBiLmdldChcIm5hbWVcIikpIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAubWFwKGkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxBY2NvdW50UGVybWlzc2lvblJvd1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtrZXkrK31cbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2l9XG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzPXt0aGlzLnByb3BzLndlaWdodHN9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZUl0ZW09e3RoaXMucHJvcHMub25SZW1vdmVJdGVtfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBsZXQga2V5X3Jvd3MgPSB0aGlzLnByb3BzLmtleXMubWFwKGsgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8QWNjb3VudFBlcm1pc3Npb25Sb3dcbiAgICAgICAgICAgICAgICAgICAga2V5PXtrZXkrK31cbiAgICAgICAgICAgICAgICAgICAgcHVia2V5PXtrfVxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzPXt0aGlzLnByb3BzLndlaWdodHN9XG4gICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlSXRlbT17dGhpcy5wcm9wcy5vblJlbW92ZUl0ZW19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBhZGRyZXNzX3Jvd3MgPSB0aGlzLnByb3BzLmFkZHJlc3Nlcy5tYXAoayA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxBY2NvdW50UGVybWlzc2lvblJvd1xuICAgICAgICAgICAgICAgICAgICBrZXk9e2tleSsrfVxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzPXtrfVxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzPXt0aGlzLnByb3BzLndlaWdodHN9XG4gICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlSXRlbT17dGhpcy5wcm9wcy5vblJlbW92ZUl0ZW19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBlcnJvciA9IHRoaXMuc3RhdGUuZXJyb3I7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFlcnJvciAmJlxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZF9pdGVtICYmXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnRzLmluZGV4T2YodGhpcy5zdGF0ZS5zZWxlY3RlZF9pdGVtKSAhPT0gLTFcbiAgICAgICAgKVxuICAgICAgICAgICAgZXJyb3IgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0ud2FybmluZzNcIik7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFlcnJvciAmJlxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pdGVtX25hbWVfaW5wdXQgJiZcbiAgICAgICAgICAgIHRoaXMucHJvcHMua2V5cy5pbmRleE9mKHRoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0KSAhPT0gLTFcbiAgICAgICAgKVxuICAgICAgICAgICAgZXJyb3IgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0ud2FybmluZzRcIik7XG5cbiAgICAgICAgbGV0IGN3ID0gW1wiMTAlXCIsIFwiNzAlXCIsIFwiMzAlXCIsIFwiMTAlXCJdO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3RoaXMucHJvcHMubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgIGVycm9yPXtlcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0fVxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZT17dGhpcy5zdGF0ZS5pdGVtX25hbWVfaW5wdXR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uSXRlbUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5vbkl0ZW1BY2NvdW50Q2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICBvbkFjdGlvbj17dGhpcy5vbkFkZEl0ZW19XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbl9sYWJlbD1cImFjY291bnQudm90ZXMuYWRkX3dpdG5lc3NcIlxuICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGhpcy5wcm9wcy50YWJJbmRleH1cbiAgICAgICAgICAgICAgICAgICAgYWxsb3dQdWJLZXk9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVBY3Rpb25CdXR0b249eyF0aGlzLnN0YXRlLndlaWdodF9pbnB1dH1cbiAgICAgICAgICAgICAgICAgICAgYWxsb3dVcHBlcmNhc2U9e3RydWV9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLndlaWdodF9pbnB1dH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uV2VpZ2h0Q2hhbmdlZC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwid2VpZ2h0LWlucHV0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnBlcm0ud2VpZ2h0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMub25XZWlnaHRLZXlEb3duLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGhpcy5wcm9wcy50YWJJbmRleCArIDF9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9BY2NvdW50U2VsZWN0b3I+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZ1RvcDogXCIycmVtXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t3aWR0aDogY3dbMF19fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t3aWR0aDogY3dbMV19fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5hY2N0X29yX2tleVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3dpZHRoOiBjd1syXX19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLndlaWdodFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3dpZHRoOiBjd1szXX19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLmFjdGlvblwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2FjY291bnRfcm93c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7a2V5X3Jvd3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2FkZHJlc3Nfcm93c31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudFBlcm1pc3Npb25zTGlzdCwge2F1dG9zdWJzY3JpYmU6IGZhbHNlfSk7XG4iLCJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFdhbGxldFVubG9ja0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvV2FsbGV0VW5sb2NrQWN0aW9uc1wiO1xuaW1wb3J0IFdhbGxldERiIGZyb20gXCJzdG9yZXMvV2FsbGV0RGJcIjtcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcbmltcG9ydCBQcml2YXRlS2V5U3RvcmUgZnJvbSBcInN0b3Jlcy9Qcml2YXRlS2V5U3RvcmVcIjtcbmltcG9ydCBRcmNvZGVNb2RhbCBmcm9tIFwiLi9Nb2RhbC9RcmNvZGVNb2RhbFwiO1xuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xuaW1wb3J0IHtNb2RhbCwgQnV0dG9ufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByaXZhdGVLZXlWaWV3IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBwdWJrZXk6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuX2dldEluaXRpYWxTdGF0ZSgpO1xuXG4gICAgICAgIHRoaXMuc2hvd01vZGFsID0gdGhpcy5zaG93TW9kYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oaWRlTW9kYWwgPSB0aGlzLmhpZGVNb2RhbC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc2hvd1FyTW9kYWwgPSB0aGlzLnNob3dRck1vZGFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGlkZVFyTW9kYWwgPSB0aGlzLmhpZGVRck1vZGFsLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5vbkNsb3NlID0gdGhpcy5vbkNsb3NlLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgX2dldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzTW9kYWxWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzUXJNb2RhbFZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgd2lmOiBudWxsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy5fZ2V0SW5pdGlhbFN0YXRlKCkpO1xuICAgIH1cblxuICAgIGhpZGVNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc01vZGFsVmlzaWJsZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2hvd01vZGFsKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzTW9kYWxWaXNpYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhpZGVRck1vZGFsKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzUXJNb2RhbFZpc2libGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3dRck1vZGFsKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzUXJNb2RhbFZpc2libGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICB2YXIgbW9kYWxJZCA9IFwia2V5X3ZpZXdfbW9kYWxcIiArIHRoaXMucHJvcHMucHVia2V5O1xuICAgICAgICB2YXIga2V5cyA9IFByaXZhdGVLZXlTdG9yZS5nZXRTdGF0ZSgpLmtleXM7XG5cbiAgICAgICAgdmFyIGhhc19wcml2YXRlID0ga2V5cy5oYXModGhpcy5wcm9wcy5wdWJrZXkpO1xuICAgICAgICBpZiAoIWhhc19wcml2YXRlKSByZXR1cm4gPHNwYW4+e3RoaXMucHJvcHMuY2hpbGRyZW59PC9zcGFuPjtcbiAgICAgICAgdmFyIGtleSA9IGtleXMuZ2V0KHRoaXMucHJvcHMucHVia2V5KTtcblxuICAgICAgICBjb25zdCBmb290ZXIgPSBbXG4gICAgICAgICAgICA8QnV0dG9uIGtleT1cImNhbmNlbFwiIG9uQ2xpY2s9e3RoaXMub25DbG9zZX0+XG4gICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInRyYW5zZmVyLmNsb3NlXCIpfVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIF07XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgIDxhIG9uQ2xpY2s9e3RoaXMub25PcGVuLmJpbmQodGhpcyl9Pnt0aGlzLnByb3BzLmNoaWxkcmVufTwvYT5cbiAgICAgICAgICAgICAgICA8TW9kYWxcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZT17dGhpcy5zdGF0ZS5pc01vZGFsVmlzaWJsZX1cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQucGVybS5rZXlfdmlld2VyXCIpfVxuICAgICAgICAgICAgICAgICAgICByZWY9e21vZGFsSWR9XG4gICAgICAgICAgICAgICAgICAgIGlkPXttb2RhbElkfVxuICAgICAgICAgICAgICAgICAgICBvbkNhbmNlbD17dGhpcy5vbkNsb3NlfVxuICAgICAgICAgICAgICAgICAgICBmb290ZXI9e2Zvb3Rlcn1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnB1YmxpY1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnB1YmtleX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBncmlkLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnByaXZhdGVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUud2lmID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT17e2ZvbnRXZWlnaHQ6IDYwMH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUud2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uSGlkZS5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjbGlja2FibGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2hvd1FyTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2hlaWdodDogNTB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e3JlcXVpcmUoXCJhc3NldHMvcXIucG5nXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25TaG93LmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5zaG93XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgZ3JpZC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5icmFpblwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtrZXkuYnJhaW5rZXlfc2VxdWVuY2UgPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIk5vbi1kZXRlcm1pbmlzdGljXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoga2V5LmJyYWlua2V5X3NlcXVlbmNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2tleS5pbXBvcnRfYWNjb3VudF9uYW1lcyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleS5pbXBvcnRfYWNjb3VudF9uYW1lcy5sZW5ndGggPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBncmlkLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0uZnJvbVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2tleS5pbXBvcnRfYWNjb3VudF9uYW1lcy5qb2luKFwiLCBcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgICAgICAgICA8UXJjb2RlTW9kYWxcbiAgICAgICAgICAgICAgICAgICAgc2hvd01vZGFsPXt0aGlzLnNob3dRck1vZGFsfVxuICAgICAgICAgICAgICAgICAgICBoaWRlTW9kYWw9e3RoaXMuaGlkZVFyTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMuc3RhdGUuaXNRck1vZGFsVmlzaWJsZX1cbiAgICAgICAgICAgICAgICAgICAga2V5VmFsdWU9e3RoaXMuc3RhdGUud2lmfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICB0aGlzLnNob3dNb2RhbCgpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgdGhpcy5oaWRlTW9kYWwoKTtcbiAgICB9XG5cbiAgICBvblNob3coKSB7XG4gICAgICAgIFdhbGxldFVubG9ja0FjdGlvbnMudW5sb2NrKClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgcHJpdmF0ZV9rZXkgPSBXYWxsZXREYi5nZXRQcml2YXRlS2V5KHRoaXMucHJvcHMucHVia2V5KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHt3aWY6IHByaXZhdGVfa2V5LnRvV2lmKCl9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4ge30pO1xuICAgIH1cblxuICAgIG9uSGlkZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7d2lmOiBudWxsfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xuaW1wb3J0IFFSQ29kZSBmcm9tIFwicXJjb2RlLnJlYWN0XCI7XG5pbXBvcnQge0Flc30gZnJvbSBcImJpdHNoYXJlc2pzXCI7XG5pbXBvcnQge01vZGFsLCBCdXR0b259IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcblxuY2xhc3MgUXJjb2RlTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuX2dldEluaXRpYWxTdGF0ZSgpO1xuICAgICAgICB0aGlzLm9uUGFzc3dvcmRFbnRlciA9IHRoaXMub25QYXNzd29yZEVudGVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25LZXlEb3duID0gdGhpcy5vbktleURvd24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkNhbmNlbCA9IHRoaXMub25DYW5jZWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkNsb3NlID0gdGhpcy5vbkNsb3NlLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgX2dldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzU2hvd1FyY29kZTogZmFsc2UsXG4gICAgICAgICAgICBrZXlTdHJpbmc6IG51bGxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBvbkNhbmNlbCgpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5oaWRlTW9kYWwoKTtcbiAgICAgICAgdGhpcy5vbkNsb3NlKCk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVmcy5wYXNzd29yZF9pbnB1dCkgdGhpcy5yZWZzLnBhc3N3b3JkX2lucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLl9nZXRJbml0aWFsU3RhdGUoKSk7XG4gICAgfVxuXG4gICAgb25QYXNzd29yZEVudGVyKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsZXQgcHdkID0gdGhpcy5yZWZzLnBhc3N3b3JkX2lucHV0LnZhbHVlO1xuICAgICAgICBsZXQga2V5ID0gdGhpcy5wcm9wcy5rZXlWYWx1ZTtcbiAgICAgICAgaWYgKHB3ZCAhPSBudWxsICYmIHB3ZCAhPSBcIlwiKSB7XG4gICAgICAgICAgICBpZiAoa2V5ICE9PSB1bmRlZmluZWQgJiYga2V5ICE9IG51bGwgJiYga2V5ICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBsZXQgcHdkX2FlcyA9IEFlcy5mcm9tU2VlZChwd2QpO1xuICAgICAgICAgICAgICAgIGxldCBxcmtleSA9IHB3ZF9hZXMuZW5jcnlwdFRvSGV4KGtleSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNTaG93UXJjb2RlOiB0cnVlLCBrZXlTdHJpbmc6IHFya2V5fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvL25vdGlmeS5lcnJvcihcIllvdSdkIGJldHRlciBlbnRlciBhIHBhc3N3b3JkIHRvIGVuY3J5cHQgdGhlIHFyIGNvZGVcIik7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc1Nob3dRcmNvZGU6IHRydWUsIGtleVN0cmluZzoga2V5fSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbktleURvd24oZSkge1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykgdGhpcy5vblBhc3N3b3JkRW50ZXIoZSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgcG9zID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNTaG93UXJjb2RlKSBwb3MgPSB7dGV4dEFsaWduOiBcImNlbnRlclwifTtcblxuICAgICAgICBjb25zdCBmb290ZXIgPSBbXTtcblxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuaXNTaG93UXJjb2RlKSB7XG4gICAgICAgICAgICBmb290ZXIucHVzaChcbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAga2V5PVwic3VibWl0XCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vblBhc3N3b3JkRW50ZXJ9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwibW9kYWwub2tcIil9XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9vdGVyLnB1c2goXG4gICAgICAgICAgICA8QnV0dG9uIGtleT1cImNhbmNlbFwiIG9uQ2xpY2s9e3RoaXMub25DYW5jZWx9PlxuICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJjYW5jZWxcIil9XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPE1vZGFsXG4gICAgICAgICAgICAgICAgdmlzaWJsZT17dGhpcy5wcm9wcy52aXNpYmxlfVxuICAgICAgICAgICAgICAgIG9uQ2FuY2VsPXt0aGlzLm9uQ2FuY2VsfVxuICAgICAgICAgICAgICAgIGZvb3Rlcj17Zm9vdGVyfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e21hcmdpbjogXCIxLjVyZW0gMFwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiaDRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJtb2RhbC5xcmNvZGUudGl0bGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxmb3JtXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmdWxsLXdpZHRoXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luOiBcIjAgMy41cmVtXCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25TdWJtaXQ9e3RoaXMub25QYXNzd29yZEVudGVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgbm9WYWxpZGF0ZVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc1Nob3dRcmNvZGUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uIHN0eWxlPXtwb3N9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBcIiNmZmZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogXCIuNzVyZW1cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFFSQ29kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPXsyNTZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmtleVN0cmluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwibGVmdC1sYWJlbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zYWZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJtb2RhbC5xcmNvZGUuaW5wdXRfbWVzc2FnZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwicGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkZvY3VzPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcy5wYXNzd29yZF9pbnB1dC5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwicGFzc3dvcmRfaW5wdXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLm9uS2V5RG93bn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvTW9kYWw+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5RcmNvZGVNb2RhbC5wcm9wVHlwZXMgPSB7XG4gICAgbW9kYWxJZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIGtleVZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nXG59O1xuUXJjb2RlTW9kYWwuZGVmYXVsdFByb3BzID0ge1xuICAgIG1vZGFsSWQ6IFwicXJfY29kZV9wYXNzd29yZF9tb2RhbFwiXG59O1xuZXhwb3J0IGRlZmF1bHQgUXJjb2RlTW9kYWw7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFHUUFBQUJrQ0FJQUFBRC9nQUlEQUFBQUNYQklXWE1BQUFzVEFBQUxFd0VBbXB3WUFBQUFCM1JKVFVVSDRRb0xCekVLcjdvRkRnQUFJQUJKUkVGVWVOcTlmWG1ZWFZXVjcxcDc3M1B1dlZVVlNBTDJvNDBLbWpDRWdpU0VWRlVTQWlSUjZVOUJ3YW45dFBHMU9QTGsyYlFUYVFkODlyT2Zvb0pEODBSQlVmVHo0UlBuVnB4OWJadUV6SUhNQWFJQ3JhSWlaS2pwbnJQM1h1djlzZTVkdGV0VTFVMVNpdmVQK201dXp0bG43N1hYdEg5ck9Qald0NzUxeTVZdHpya1FRcFpsSVFSampER0dpT0I0UHN4c2pJa3hqb3lNYk5teWhaa0JBQkhsZjRuSUdOUFgxOWZUMCtPOTk5NXYyclFwdlJjUjVScjVycmZMUC9WS0l0cTdkKy9WVjE5dGpBR0FQTTlEQ015YzUvbmN1WE0vL2VsUHk0MTc5dXg1NHh2ZldLL1hpVWpXSlUvcFBIOXJiUWdCQUpRQzhtaG1qakVPREF5NGJkdTJyVisvWG42Tk1TS2l6RHVkNHJGOFpIU1o5K2pvYUtQUmtBR05NVEpVV1piYnQyKzMxbnJ2MHlrS2xXVUUvVjF1a1EyVCtjZ0ZpSGpvMEtGdDI3WjU3K1ZIV2FHMXR0bHN4aGl0dGN3OE9EaDR6ejMzNk1SMHFEelAwNmRQSkpidVVJeFJaeUtUUVVTblUwbnZrV1VmRjdGMDlCQkN2VjZYNy9KNG1YR2U1MFJVWVZqZEd5R1o4cEU4WGNtblh4RFJHTk5zTm5WVndnc3hSaUdaL2c0QXpqa2RXVGZzV0paUW9iTE95Z2gxMGwyVngwL2pZNHlSK1NGaUNDSEdHR01VNmxSSUw0OUxKMmV0RlVLa2dzbk0zbnNkUjRhU25SREtLaFdNTVljT0hkSUhPZWZrdTB3bXhpZ0Q2dVpOL01qVFpVRDV5TzdxamlLaWtiSGtWNkdpUElPUDh5TzNLNkdkYzlaYWEyMldaVEtQUE05VmxGU0NBTUI3WDZ2VmRFTE9PVVRNc3V6c3M4OEdnQ3pMWkJ4WlNRaEJ1SU9JR28xR1gxK2ZFREhHdUcvZnZuU3pSVDd5UE8vdjc1Y1pldS9Mc3B4cS9yb3JJUVFaY0dob1NNYlVhNXhNU05Ta2lxdHo3bmpGVUpsZk5iR0ttTFUyeGlqS29pS0d3dGY2Vnk4d3hzeVlNVU51RjhXdm5Kdm51UXc0T2pxcWtpS3FVRFpHOWtEWVZpZ3J1a3o1Y2RMNVY1aE9HUGJJa1NPcXNJd3hUcWlZWGljOGZMd0tQdFdGS2tjVlhTQ0xuSGhMNVVlNVJhbVdxZ2dpS29wQ1pWbmtTOWFaWlprYUtMMUFwcUcwVnFwMXNJazZpT3lmRUZla3phUmFVSzQ3cXBYdDhDUmxITkZCa3lvcFhieXFNL2xGMWJQY3FPSlFVWFlpTEhMbHlNaUlYaXdqcUppcmRWWXBVYkoybUx4b2dJbU1Zb3l4MW81NUU4TE02WVozL2xSWVdyL3JidWcvUmRsWDNCR2RsaWdYZFZ4RThSSFI1ejczdVN6TFJJVXRXTEJBeDF5eFlvV01Ga0s0Nzc3N1pPYk9PU1dyZW0zeUZPKzlQbmZUcGsxVExVYzBJeUwyOWZXSlVrcGR4VEdkOVdSL0toWmR1Uy9sTE4xOG5aK1FUSFpWTElBNmJzcWJxb24wdTR3d1VhNlBhN1lWc1JoVFVFODJwWVNoMVBtVUw3S1orc3RFNTZ1eVlERkJZbUdGSE1JdjZpTElJTUtHY3YwMGRJZ3E4cW4wdFhteWlTWFAxczFYYVJLRm9scXl3aG82YjcxUzZTSktYU1JVcjFSSjlONkwxUC9wTTYvb2s3OEVzVlFwMUdvMThSN1V5c2luS0FwaGhKUndIWmhVMldka1pPU2VlKzdSd2M4OTkxeHg2NXh6cVFFOVhzdWUwcWh5NDErSXMxS2VrbTBYZmtsVmUyVisrcjhWdWRCeHVycTYxTXRCeE83dWJ2bXZvaWltWWMwbkVqVDFRdjV5T2l0MUdsU1J5K2FuQjJZbHhNU2ppUnliVTU5RGJiZU1tVnJiUE0vL0ZKM1ZhZVAvQXRaUTZhS25xRlNGangxVGs0T2grTWFxczlRUlZZTW9CcXVycTB0ZEJJV1Y1T3hTWWNOakY4YVV0U3NjT2gzT0VrZThnbFYxZHZaU1JLRXlKL0hnSjRyaDRzV0xWV0RWZWlMaXhvMGJMN3p3UWdXRmpvb2FIYU95VDdFemRXdi9ESnlWcnFHQ1F4MExaeDBqSjJaWnBrQk55b24xZWwzdHB2cGN1aVhxN29xdmE0eFJaSzB6U0tmanBNZU15dExjdEdVcTNmT2ptakQ1ZTFTeUtqdW81bFk4VDcycW9paGtQUXBzaW9KVDVpM0xVcUZCRVdFNVkzYyt4dW1ZdWh6eFFvNkpXRk9SUURsZi9KcWpxbEwxc1BUR3pxZFp1U3lFTUR3OHJGQ3ZjODU3TDZjODRaUVU4NUxQOFBDd3pGbmNmYlVTV1piSkpJV0NIYlpXMkhOd2NGRHVUVjI1b3hCcktsR2ZxS282TDE2dmQ4Nk5qSXlJZ0J6VktnSEF2bjM3bElzWExGaHczMzMzaWR6MTl2WXFnZEpUdDJ4ZXlzaHlMQlVhaVIrN2JObXl6dXVTdFlRUUpwNGlwc2xaRlpDKzgrSjF3UXBhZFJaYlBkd2RPWEpFL0lDeUxPdjF1b3BKclZhcjZHQWhvcDZIMU8rVlExS2U1NHBWVEhYb1V6NFZ3VS9QQm44R25TVnpPa2FkVmJuM3FGWXBuYTVFbTFKMHhYc3Zyb09xY0VWQmxOYmlPc2pCU0hTY1RuaXFPWWpqVm9IWC93d2VmSW9XSEl2elVrRXBqeHBra3hrTDFpNytwL2haY3JzS3NucTJxZDhyODVGbHkxNTJkWFVwNE5GaHR4UmZWZEZ6enZYMDlJeTdhTldxVlJVZjUxajJ2NFBZMW1vMVVTaUtkcXJ6SXU3aVJHY3ZCZjUxQXVKbnlUZzdkdXd3N1UwNWQrRUNId016eCtqdldiOVdXWHZod29YcTlHN2F0Q20xL1JPZHVPUDlPT2RXcmx4cEZFVlZuMlVhUWNQMHVGQVVSUWhCeEVjUkQzV2FuSE55ZGxNV1NPMVVpZ3VyQnkrSXFKRFhXdHZWMVdXTnNLckxzN29BRWhLTWthaVNrcjVlcjZlNzBnR0FQeW9UeUxCRzVEL2QyR25EeWdySU91Y0VyZFlRVnFwS3hMVEwzb2cyeWJKTU5IU0swbFJnMjh4bEZjc3JrZTBLRGk2RUU5M1ViRGJUY09UMEZwWGlxTzdnd1lPcEV0R05uVVowUjJnaHQzdnY1UUd5QVBIdXhOOVJKa29KcXVxdkJlQTZKMHNWODU5bFdSbGlsdFdJd3VHRGgySUl6cmtzeTJ5V2kyaXIvaFpUSUdNS2Irb0p0SEpLT3k0RlRVUUhEeDVFc1JkaWp5c3c1dkVTUzdaZHBWaUVRaWlWZW5mNlQrOWpsdGxFaE5sN3YyWExOZzJKSHpseVJERGxQTThIQnBZWkEwVlIxR3JDWWd4Z2podzU4c0FEKy9NOEh4a1ptVDE3OXJ4NTgzUS9oRmpOWmxNTWdyTGs5RUo4M3ZzOHoxRTM0YzhGTGFhSE5SV1p0V3ZYaWxvcHkvTHNzOCtlTVdNR01XYVpRNFJJMFJvYnlZc213cmFCVm40UlA0c0JLRVpya1NtZ01RQ0dHUUdSWWd3aDFHcTE5R0FFQUF3dzJoeHQxQnNNREFBSVNFeUlhQUNudlRwTWNWNlZ3YzVBd2hSalJaRkUyZHVob2FHNzdycnJLMS81eW85Ly9GT2hZSjdueldaVE50a1ljLzZTL2hlODRBVlhYWFhWbkRsL1RVd3grc3hsUHZqY1RWaTJSR3VBRFRCRC9NQy8vTXQzdi90ZHRCYkJSb2JjWlVWUkNQK3E2NHVJejd2MCtiMjl2WmRmZnJrR2UyS01lWmJqOGZ0Slk2U2c5a2ZQRU5PSTNVc0FmTFE1eU94Ly9adUhYdnF5SzR3RlFEQVdKb1lQV3M5R2k4WUJtS1hMbCsyN2Z6OXhIQzFHaUtPaTdPbE1aSDdlRjh6K2RhLzlyd2lBQm93Qk1HTXBMaG9lYnFrL0JPTXNJTHpzNVg5NzhQQWhZZzRVSTA5dmFhMHBRWDkvZnlVVzNkblZjcEQxemorSG1RUDV5Skw5d1V3Y2lrUE01Zlh2Zmc4QUlJS29VWU81V3BNMCtJcUlGaUN6RHNDWXJBdHM3WTMvL1IrYmtUMXpKQ2JtWnJQSkhKa2pNNGZRb3BsbkgwYnBtdGU4eUJwd0NIVUU0MmFtM3RQNGc1Y3h4dW5mTzcvODFjRHNtWWs5TTBkUHpFek1nV01aQ2lZVzFtUG10V3ZYNnZJbFhqbVc2OURWMWFWakt5TFJ3Y21PRUoveWxLZUlRakZvd0FBQU1aSE42b3NYTExwdjE5NWFyVkVVbzhaWkZvOEh1Syt2NzduUGZhNDRGa1QwMDUvK2RPdldyY0VYSVFacmJmUk5OTzdXVC83dmRUOWZ1MzM3VnJSUUZyNWVxd0ZBMlN6eWVzMWFKQUtHNE1FM2NuRktvRjUzWlROUUNKVmpuU0ljdFN3cnlzSUFHZ05FOE1wWHZHSjR0UG1xdjcvU0dFWUFZMFd2aVEvc1VqZEFiaGU2YSs1VTY3TjY5ZW8wN2lRT1pHY3hYcjU4dWZjdFdhSG9mVG5Dc1RudjFEa1pRbVp6QUFjR0FlSFp6N25rZTkvL3NkaitpU3k5ZS9mdWw3LzhaUWpRbFZzRVFMU3UxblBLMCtjRzVzQmNsRzNmTXFqb1JNK2VBMTk5MWVVdGNVUDQyQzEzcXJSS0JFeXdtbzBiTjc3cm5Xc2E5YnlXT3hrOHIzV2pheHg0K05FZzF4UEhHQ05UWUJZZVV5ZEdVeEtOTWN1WEx4K1hLWFR4eFJkWERwQ2R3L2ZHNGNCQTM5aEsyRE0zTDF4K25nV28yeHFDQTNBOU0wNzhmei83OXhEWkIwNWRhcG1OT0N0bDhNenhvVi9zUDIzT1V4eUFGUkczWFFNclZnYm1JaklKbFltWkFsUHd2dkJjY3VEWFh2bDhSTXpyTlFEei9vL2VrYXEyc2l5VGpZa2MvRXN1djZ5Uk9WRUpZR3FyTHJuTU13ZUt2bXpHNklrNUVrZGlWV1VoaEIwN2RxalRkODQ1NTFTSmxUb1VxWnFmOUFNSVM1ZjJoeEE0Y3ZTQnliLzMzVy9QRENCQTdtb0EyVjgvOWRRL1BQWjRTVkdtSW12UUFmV2ZnVGxHVDM2RS9mQUZTeFowNTlhaVE1T0R5VDkwNHljQ3MyK3JxaGhLMFYrak5NS0IzM0wxeTFzUUFMci84ZEV2Q0t1bXpDc0lKMU5nOWh6TDh4ZWVVM2MyejNNQUI3YjI2Qk1qOG1obVQ4d2hNa1ZtNGpWcjFvZ01MbHEwU0JJcEpxcDVJN2lQZXFGQ1hYVWpKa21nTUpZSXJMRmdDRGsrK3V0ZmYrQUROd1lDQmloRG5EVjc5b08vK01Yc2syY0RCUUF5Q0lxM3FGTElzb3lJRU5nWWd5Nkx4T3Z1MlhqS0thY0FCNkFTbU5hc2VjZmhJOE1SVURTbnNWWmNPSWNPQWd5UERBbURpMjR0eTFKT2JFVlJpS29WVkNzU01RRWdmdTcyejhZUWZWa0NFTVM0Y2ROMmtuTWlrZGdGTkFCSTlYcGREa1p5eGt5VHZNWkJOSlhqenNTSTduZ0VsV3RaM213T0F4Tm1lTzIxMTZJMUFJQlpEZ2cvWDdlT2dZakpXUk5qQ1VCaS9pU3BUQVN3WmQwQlkyUUFaL01HWk5uUC91TS9MRUpOM05KSTExMTNuYk1BQm9naEJBSnM2MlBEOVN3M3lCUWlBR2RXV0thRmRnZ3MwNEk2ckl0RUFMQmc4YUlzdzY2YVF5QUF1dSsrdlJTRitHbjBoQ3JoeURRM2NZeFlnc2FLUVZGQ2RnZ2ZHYkJFVUsvWEFQbUp4eDc3K3JmK0xRUmljQnpERzYrNTVveXo1alhxR1NJU2s3TmoyUW15SkltenQzd1dabU10QXhCZ0NQVFVwei90bW12ZXdCR0FJeURlZnR0dFBqQXhNSUoxamhsQnJBWmlDTUcwWTl0RUFaSWtXTTJ4SVNJR3RNNlI5d0J3M3NKeml5STRCQVFZR2hwQkN3UnMycWdwTTh2cFExaEVDRElwdTR6TDl0WWcrNWczTkc1RUFBREtPUXdQQTNvb3Nscytkb096bVFNQUNHQzZQM3pUVFFiWmNIU01salBnVmpKdVpYOWFnd05DSkFSQ0pyVE8yT3g5Ny91Zm9va3RSSVQ0bWE5OE4rTm1BQ0FBNUJJUlM0aGdBWndOREU1c3Z6VWE1a21aQWhFTkFITmhzZ2F3YThlN2F3WW95MnhnWUlUSURBd1dBR2dNZlVmRXRXdlhpbXdwdmlTZmdZRUJrK1o1cDdsYmltMmw2Zk5FQkQ2NFdqMXlCQXZmK01hM3l1QVp3THI4OGhlL3BPYXNCUVFBcHBiZ2REb3pvVDdSR2pRQTBOM2RHT2c3cDIxcThHdDNmUVhRVXRzWGlqRTZjSEpVdEJhTnpZQ05ncitDekFqUHRwTC9tQXcwS0J3QnNIdjI3clNtenJhSWtDMWMwT3VFenVMS0lxQUJBR3cwR2dKTXBqQ1doaWF0dFkxR3czVE9HVXdMSDlMc2ZvdFplZVNKZmZmL0o0REpySTJSWC8vNjExb0RER1BJa1N4enlqTVhNQmhtbGprQkFOaDZkdm5sbHdHMFZNblBmL3BEUU9zUWtBa0FyTEVHQUFnUURVVW95eExRTUtQaVBDb0hMYmdWZ1NJYjIvUFFMelkwUjJxZW00RU1ZTDZzL3p4aHYvWlNRVTdXYWFwcW1nYzg1Z1pJSG55YWRaZm1SbFdTYnpUM3NDUUdnSzJiTjRoM3hJeUErVVVybHFmUE9KWWphdnBRMFpMUGVlNXFDMFJNMXVVd092eTdQeDdHMWlZakFFUUtMZGdhRU5FYVk5T0VUMGdxTW1RVEVCR3dlTmQxN3djb2dET3dwbmRKL3pQbXpFUmc0RGFSMnVxb0xFdE5QdGRqWDVvSEQ2MlRhSklLa1NhdVZNSnpMZWVld1RvSGpMdDNiL1hSQUJJUm5YemFzN3JxeGpBQVJUa1RIaFVJa1NzTUNwSUZ6QWpNWjgzdnRRQUdUWXpCT05qendDOEJ3TFE0bEp4eGdDMmV5UE9jb28raEZFblVtcHVrSU1JZ0ZuZCs4VXRmLzliMzJRQUJRNng5K01NZlJBQUQ3R3hPa2NWZ3lhcHZ1T0dHSTBlT2lMMlcrQzRSN2RtenArbzZUQnFrbVlxem5FVXdCaEIvLzl1SEl4aEFRT0JublhHbUlUQ1lobkNPR2gwWXozMEdtVjAyWTVZRmNKa0JSaTVILy9OM2Y3VFFabDRpSHR0dEtvdFJBR3FNNTRVMHdFTUIzditCNjY5ODladnk3b1luQUF5dmU4T2JMMWs1RUtNSE1BQUdVQlNzRU1zSXo4b1pRMWhNWTVmcVVUdXBMS2hBbzJrSVUzVjhpNnhFelRJQTQ2Ty9mVWlnT2lTZWVmSkpESUNnVVU4d1JtN3NBSUFCTXlHS3IyQVpMWUFCY0NkMlp3ZWJFWXl6QklPajVSaW9oTWpBd0dBelk0Mk5GT3MxZStEK1BSczJiQkR0THZGOVk4d0REenl3ZnYzNk96Ny9tWkdSd0VoRHc3V3N5LzNONmhkLzR1UHZkUXdrVzhnZ1ZxVVNpeGE0VGJQbjA2Q0pNY1pwaGNaVVdTVkNLVlYxQmlDcjVRQXdOSHdZd0lBRERuREN6QlBib1NwcXNRd2ZCVUZFQUFBTEVBR0lBUkF0QUViUE0yZWU4Tmh2SG9mTUdvSm1JY1FpdEE2Qkk0UU1JY1lZS1JvQVg4UTdicnYxaTUrK01WWEdDdms3Qk1RY25PRTQvTDczZm1yTm1xc3RCUENNbVNHR0dNRTVZQWFEUWozVWtLMldtU0dpRk9HTkJRazNiZHBVeVRIVFVHaWFkYWFBSEtJSmNSVElGVWdBa0VPdHNJQk5aR2dWYUpWbENRaU1SMUh6UklKN1FhQ0lnTXhBQk5ZWjlsNVFId3ZRM2QwTnpFeWk0QXdDQzRHRktYSUVDTTB4dVFNR0JFQWJBZ0dZZ0ZuWGpKUGY4WTYzSFJwOFlzMmFxMXNiYUJIQkdJVE10VVpzaVdTYlAyS01hOWV1YlRRYUFpNHNXTEFnOVExZHlvZHBLWUIrRWFSWUFmL0FCTVFRWTZQZWxXZXVMSVlCNGZEQng4VnloeEQxL0lIR01NY3BGWmNCUUFnK3Vpd1B4TWFBUllMZ0R3ME5HV3NneGdEUTA5MEZLQTRtTUlQRmRwQ1J5Vm9zSTRQSmlZcFdoSVZheFgvVzJSREM3Sk5PdWVWVG4zenBTNjRRa1NuS29wN1hpTDJCckFOOHJBQk14VU1RcDllcEEwVkVnbVNseFgxaVVOV3NpbDlTeXl3NCs5U25uZWI5UmdDVDErSFhEejFFRElqV09JSGlSTUYzeWdGQkJDSnlXUVpnckFFZlBMTjNHUjhaSVhZWm9QRU1wODQ1SmZFekVJQUJ3R1VaZ3drUm5JVVZxNTZ6ZXNVQ0lCWjFzM256eHUvODIzZGpDTTdDRTQ4OTlxcS9lOG10bi82YkgvN2dlMmlwbHRlQ0I1ZFI1NXdCRVVENW02WTBpZC9yOXUzYjkvampqMHNZYnVIQ2hZcjhDU3NKamJadjN5NWtic1graVFIbzZhZk5NMENBT2JQLzVZUDdHWUVpVzR2ZWwzbHVzZVdnODlSZUZnbUdhUXpFQ0lqc0hENzB3TzRTZ01YdVlYYjZNMCtOQUE0TUFDRmloT2lvVmFEQ2pNWmxxeTk1M3Z2ZThYcGlzaWhjakFEMFQyOS94MDAzZmR5WTZFdjY5NS84NUxMbnYrVHVIMzZkQ0d3R0ROekJRcGRsYWEwOTZhU1RGaTVjV0t2VmFyV2FKajViYTg4NDR3d1lHQmlRcEJ4TlhWVThxMUpxcElHR3BRTjlITVBQZnZMdE9rTE4xTUVBUVBlamZ6d3lPRnBHSmdIT1JRMTZYMHdWQWdqa2lZSkFYRVZKekRFMEgvL2VOMjhYbXdpbTVtYjhWV0F1U0lBNXo4eWVTL1o4eld1dlFMUUFEa3oyejUvNFFtUUtGRnRvSDhmbTZDQ1R2LzNXV3hDaDBlZ0djQUR1SXgvNWxBOU1YUHBZSGpVMklWNWJCZUFWc3BqdTdtNnRrcW5Jb0ZhWHBtSU1CaDB3SVBmMXIyQUdaQVFFQy9SLzcvcGF2WjV4eTNVQkhCK0NuMHdNYlR2VkMyd21wU251aHovNEtZSkZaR3Z3L1A1bGxsdUJEd2h0RkFSYnlmRm9ERENIRUJEUW9rZ1FlZTlyOWE0WTZUVnZlUDExYi85dnpkSENHQUlNNy95bmR6MzYrOGVLNk5Ga0hVSmVHbEZQazd4VXdST1JFVXFwWDVvbU04cGZ5WWZTTWx0Z09TaHhWOC9zczgrY0U1a0J3VUM4N2JPM2g3WXVUQU9SVTd1a2FFMUcwUU1TQUVRbXpCcWYvOXlkTFpjOWxsZSsraXFJVFpaakVmSVlqWUVOTUhBRXBrWmVLNHRDd1prc3F3RVlCZ1BnUHZpL2JqajlXWE15WndBeHhLRkxMNzNVMmE0T3lVN0dHRlhaYWM1NTZuYVpGTlpRVkpPSU5tL2V2R0hEaHUzYnQrL2Z2My8rL1BsTGxpeTU0SUlMTHJqZ0FqREdNQUJpVWZyWHYvWXExenFOOEw0ZE8zYnUzQk1wYXBGTjU2d1ZqaUNRRm1MTCtINzlLMTh0UEFBU01oSFRpMTUwdWRCUldGUmRXU0lDSnJtcktKcmlkcmVNTDRBUFpKMExrZEUxdnZudEwzc2ZnQ3lnMzcxbjErZHZ2NHY0NkdrTmxSeXA5SEFPSzFldXJLVEpUNVUvMVU1N2RzdVhYY1RFVkk2T0RqMHVvQXhDRHBpZnQyVFphR0RQWERJM3kxRm16MVNraUg0SzhIdG1IeVdVVnpJM21jdFRUcDVsQVd5dER1Z3V1K0lseE93REU3T1BnVWpVaHcrUjMveWFLeVMyZzJDdS8vam5wOVE5eE16eFRhOStLUUowQVFEMG1Lem45eVBFSENuNkVJS0VLVUlJekpGam1RWStVc1U5RG9Qdm5MRlhxYVF4eGxobmlFUHdFVjFXNzU3eHh0ZTkyamxBaUloNDc5YXRIN3ZwWStKQzVWazlSZ1kwNnRCV0tnWXNnRE1JQUw0c2dmRXQvL0FQVHp4eGtCRmlHY0NZRzI2NFFmZ0pBWnl4aVBhNFV4TVFJRFJ2L3R5WFp0VmhCRnpkbEJUNE5WZStNcEloY05iYUdBTHFRYVY5N2hjZG91SlZIYlF6WjRrdVMya01DRXY2KzlwYjUzM3pzRU13Q05abVlucStmZmNQUEhOSkhDaE96QVFRVzBORXpMRTVPc3prbWNzdjNYRTdpaFpEQjFoNzFXdmVFSmdMWDVJWXVKSFJGbU1kRDJjRlp0OGNKQzYvOEttYkFFek5BTGd1UVBlejladUdpMERNUkRReVBNZ2NoZWMxeXpDRld5cWZLWk5uZW50N1R6amhCQUFZSGg3ZXRXdlg0T0FnRWZYMDlDdzY3OXp6emp1dkxDakxEUkRZckhiMzNkKzg5TklYeGVpZHlWeWVYWDdwWlYrODgvKzg4aFYvSzlIcU5QMU04MmlaR1pocWVRWUFOOTd3NFhlLyszckI5WUJoNXNsL2RkdHR0OG8yQzR4VHE0U0ZqNVcxQ0dzOUdJZGVkZlUvL3V2TnQyemIrNnNjUmp5NjU3M2dpa09QL3pZQ09NUkdWeGN3aHdpSThQdmZQZnJJSTQ5bzBhMEl4SXdaTS9URTA0bXpsSnRFNjQ5Rmg3aUlUTVFjdk1oMnlkeGM4L1kzMTZ6SlRTdkR3YnI2eWxYUC9lUGpoNm10NmRKY0QyR3UwQngrY04vdWhiMW4xWjFGZ0ZxdGtkZTZBYkk5K3g4T3pKNHBjaG5pYUtRaWxMNGRCRDBPemlLT2dabXBKT1pmN2QzbW5IRnllamVOYTY5N3o2Z2ZtNW9vcit1dXU2NFNyTS96dksrdjcxaDFsbVNqYVE1RXE2Z0ZEQkJUQU9QQU9VZk1BUGFHajN6MHlpdGZHWW1OQVdPQW9sKy9mdTNKSjgxNjRRdXZ1T09PTy9idTNhdnlYNWJsdG0zYmJyNzU1c1Y5Uzg2WWY4NytCdytVZ1Z4V0t3cGZsc1dPM2J2bm4vbU1VQVlqUkRjTzJOak13WFF5SEkwRktpbkRXRDc5ckVWditQdVhtOHptQmt4bVB2R1JEejM4OE1NaHNnRGJFa0E4NFlRVHBHdUx3cVNUOUdMcHdGbHFBZFBzaHhoS0ppWmlZaWFPa1VOYnlNdVAzL2doWnpGM3JZdnplaTNGU3pVelU4K0cybW5HdWZ6VTArYmRmK0Joenh4YThXY21vdEhSVVhYTnA4RlpUTUpjZnRRSExnL1ZhNW1jYjExV083TjNnU1R0VU12MnhmZSs5NzBhb05YNDZiSmx5NDZKczlhdFc3ZHg0OGF0VzdmdTJyVXJSYVorK2VBdnQyemVLdVNORkJIUU9nY013SHp0Mjk2eWUvZk91Zk9lNll3RmdGQVdFc0pKR3l1TnRZNlFJNlprNzBSKytPR0h2dkhOci9zQTFrS2tWcFNsWHE4VE1FMkxyNEFDZ2JFRVJYUjFXM0xXL2RsYi9wWFJORElUZkhIL3ZuMjMzdm9aQUFnTXpobWcyRVpOZ2tLaGs5U3dYWFRSUlduRmlMQko2dE5Qek0xZHZIaHhOZE1zK2U1OThjTWZmdi9aejE3bHNyR1lRQm85MUVvbFFlcGRPK3dBcHJad3lmS0RSMFlsa2FiMExXNXErV0xFWlRIS1hMN3VxbGRpQ3p6TTN2ZkJqM1Z3czZnMXBVQVVJaFhNL3Z6RkN3QUJyUkhuOEE5L2ZDeElUZ2JUOWRkZnI0MTdkTWxMbHk0ZFp3MGxsQVRqdXpCVitrUlZNdDNUK3JhME1FNlFMK2ZjUlJkZGRNa2xsd0RBajM3MG8wMmJ0dXpkdS9kWHYvcVZiRUNXWlgxOWZmUG16YnZra3VjOGJjNmN2cjd6OSt5NUh3RVl5Rm5Zc1hYTFNTZWQ5UFZ2Zk8yRmx6N1BPUW1Bc0xVMnhCSVlzenhuQ212V3ZQTU5WMThUeVFTd3p6ajF0Q2taaTRtSU10dXFQa2R3QUhUMzNYZi82cEhmR0dQS3Nod0RGUkEwbVQ1RkRTWTVmcXhldlZyamlKd1lMNzJuMGczR0dETXdNREE2T2pwcGNtVlp0akpldkMva3kvZzBvTlpSM250ZkZFV01Qb2JtMjk5MmJXdW5FYTNOcktzRHVEZGRjMjBySDRoSk5sOThMb3BlaG0zQkZmSG9hWTlFUkJUYVUvSSt0bjEzaWo0R3NlekUvSjczdktkU2ppR1phT000Ni9UVFR5L0xzaXpMUTRjT2FhTUZhKzM1NTUrZjZ1TzByMXhmWDErYXRxNitSZnQwM2dxM3lBUFVPQWphb3hQSzh4eUFLUEpIYnJ4eDFhcFZWN3pnQ21LRzZDTkVBTGpsa3pkLzV6dmZYcmZobmxOT09jVWFFd0VzUUtEb1RBWUVSSXdXRUNnejFMbFdxNTFHM3NvTUxzc3l6K3V0MkVTU3VDeS9DQUtxTlorVDVIeE16TXhUVnloMWpsSW1raGlIbEoyazdwajZ2dWwzb1pFK1FzZHNkN09LTVRSamFQN3UxdzgvOCtsUGRRQUFKcy9yN1dpVnUrTkxYMjRHRHN5UkEzRnN6WUphL09MRGFBZWVrbm5LRTRXNTJrbXFyYVZwWFFJeml6V3MxRDFWZEpaSnM5VzF3RVA3ZTAyc0R4Sm1FUXc2VFdMUzRKMG1INHpsYUNUWWh2WlRrWkJ0V1Faak16VHV2OHg1Nmk4ZmZ2aGxMM3N4QUpWbEV4R050WWp3Nml2Lzd0a3JWNDBNTlNsRUJDUHVqWEtFczNubjhwZ0VMTEl4Y3JOWnd2Z21aenAvVFFaSmVhcGFJeTArcDFiSVRreityaFQwVEt6TGEzOG43Nk1vK0hhSE1Gc3BJTkRLVitjY1VFdElHWkFneERKa3p0MTUxMWZ2YktlTVNhMkE0TTRoa0hOUzZLTld4WVVnK01tVWNVbUtNVExKMW5ydlhaYlYycVVXbXBta0c2azFiRm9ScXNEV0dMSDI3dDE3Nk5BaDZYMlNCbE5UY0NmbHJCamp6Smt6enpycnJFcjl1OFk3dE5wRVZwaTIreHJua1NBeUU3Ykl4MWxlUjVBOFdpOTFUMUxUaGN6QXhsa0RES0pqck1VUUF4QTQ1eWpDbEhnRXM3SFdvQjEzT0lWeFJaNUNSMW1zT0RSWmxwMXd3Z2x6NTg2Vnk2U1YzdGhueFlvVmxSTEt6bUgzdE8vWnBFVjhhYk9MRkpuUkRKeUpJMHhzdWxrUkpmbXJtSngrMGxzV0xWb2ttaWlFc0g3OWV1MTNJRW0wb3IvV3JsMnJLMDFUOHl1NTJKeUFFS2tSYjBYS0ZMcEtZNnVkQzc1VnNvNWErYXQ1cEdrTnZtcTA5TWV4ZkJYVFNqNFFYRnorYWl3dnhaRzBESGxpSHdpNXNkRm9xRkVXUFp2R0JDc2tVOTlkdmNqME1xT1BsM0toU25YMXBBM1pwSnhRbWVpbzlmL0dHTkdtYVZIT3VDQklranltUmlEUGM4bVowaDV1YWJxZGFCYmxZcW5WU2h2aGFSZlg5R0NyOWJXcEF0V09jSkMwVkVuVC9uUnJuV2JMNUhtK2NPSENQTThuUHhZbE9rc0QxL3JYR0xOdTNicEpyMSt3WUlIMEg1TE9LSnJvVXVuUHB0TzQ4TUlMcFpQZjhQRHczcjE3aFIwYWpjYjgrZk1oYVlJaUJ2Y1BmL2pEQXc4OFVPbWdWNWJsakJremxpeFpJbHB2M3J4NVdnSXAvcUJvN2p6UEw3endRbEhrUlZGSWJGUmJ3QWtUU1BkTkdYL1dyRmx3OGNVWEt3bkZKMm83SnBOL0p0WkthQnZhU1hWV21sTXVtNTlXQ0ZXWUpjMEwyN0ZqaDJoNkFFaFAvMjJnbFVNSU8zZnVWRWtjR0Jpb29PWlNkOTgrc1hwbTNyQmhnNHI1cWxXck5FRmZhNm9CWU1tU0pmcWdMVnUyUUx1UDNzREFnRXZMMUNacXpVbERJQXA0S2xNY3RiTXNqRy81V29tbWFOMnh5TGdRZDJob3FGVWhOTjdtcEpNY0hCeE11MWJEK1A0N21uS1E5bXRSQjJoNGVGaTc0Mm5lclBwUG9qRkVENGdmMDlYVlpWSjlVZWxFTU9sSFNWT1dwWjV5T3NlWGxMSFRubnlxTmVyMXVqS0wrb2ZTRTZXUzBwa0dQbVRERktTVzg1TlNUVFpHUnBQRWhWUldWTmdTQUFBR2kwbEVRVlMxeVpha2lRcFNXU3pjSkRYeHlnMHk1MWFKSGt6UjlYbno1czJUT2czcUVCQ1JTRWZuR3VHTkd6Y0s3M1IzZC9mMjl0YnJkYzJVMHk4aUhUTFUzcjE3RHg0OG1PZjVnUU1IRmkxYUpDMXY1OHlaczIzYk5zbEZrTHZFWXR4MzMzM2FYdlhnd1lQMzNudXZLQ2F4bnRLalc0VW1oTEJueng3dDlUTTBOTFI5KzNhaHpvRURCeFlzV0NBZTladzVjL2J2M3o4eU1rSkVCdzRjU0JNd2p5bHVPSlY4cFFxaXM1K2xhalZ0K2FEYUpDMjAxejA3Ly96elZRZHQyN2F0Y3ZLWVdKd0ZFenJKVnFyZDBoYmlGZHU2Wk1rU25kdm16WnRUamFSL1Y2NWMrYVIzWmt0RlEvc3VhSVJOakZwcVlWVnNVKzlFRUtFRXJnRHR1Wnl1ZkZ5b1BUbHBhYy9vMUpkTXA2ZnowUllPazRyTGswNHNGUndGRGxQbktGV1JhU1dVNW1KVVdxcWtGYVFWOVZySkcwNjc0NlY1b1JPTEJhVzZQNlc0TkRlZldCdnlwRGRJbFAwVUc3ZDc5KzdCd1VFaFJIOS92eGhCWTR4Z1o3S1NqUnMzbG1XWlpkbmh3NGQzN3R6WmJEYWRjdzgrK09DaVJZdkVyVDEwNk5EOTk5K3ZPNUcrRWtBM1lOYXNXV2VjY1VaNk5oSkg5SWtubnRCTzZHa1YzR09QUGJaejU4NnlMRWRHUm43NzI5K2VjODQ1WWdkR1JrWjI3ZHAxckJIcFAxMW5UVlFUbFdjcDZxUjhwRlZSZXErZy92TFpzMmRQeFR2VDFDajVrdWU1V0I2MXNDSlpNY2F0VzdkVy9JK0trMkdNNmUvdlY4ZnczbnZ2L1l2cXJOU0dxa3lsQ0xmWWJGVXg5WHE5TE12S3F6NFVCZEdNZnJYbzZUbEpkRlpabGxvMW03cUJGY2dsOVFFa1JDamdraUxzSVFTSkpQN2xkRmJhTGpodEo1Y2l2eW1ja0VZNmxSQ05Sa09QMXVKQXBPaXVTTG9NN3B5VHdrUDF3alRSVEtEZGlXY0dPZXBxdENMdGpUNmg4OENUcjdQVUllN3I2NE4yMDhJZE8zYm9PeENXTGwxYU1mbk1QR1BHakhQUFBWZnVGUVVrcEprNWMrYTU1NTdiM2QyZHJrM2VZYkYvLzM3eFJZZUhoN2R2M3k0RW1qVnIxbGxublNVU2V1S0pKeTVldkZpVWV0cTdTRk9RblhObm4zMjI4bURWNVY2MWFsWGxLQ043MVFIWVV0ODN6V2FhaGk1VGE2VW51TFR3YlBueTVmSzduaFlyWHlyL3UyM2J0a29xbXZ4ellHQmdxc1NZZEQ0VG93UkVwR2RKYSszRkYxOXNsQzZWRnhwMEFCNHFSN3pPUGY4NnE3TktpVjVhYnl0NGdQYXlWUUJXMHhQMWJLU1luMEpNcVgrbkFZRU9RR1lsZzNSaTYrQVdGMnVIei9UU0NocVhldUc2ODZwMHA5ZWFTc09VcWNLS01jcUNCYlFUSDBLV0ttNlg5dGlDOWtzcjVBQWcvNlhkN3RKV2Q1VTFUN1Q0K3IzU0FGcXZoM1pIZlRkcDkzUmp6SklsUzlTT1ZQcGN5djJIRHgvV0RtSEgrNjRzQURqenpETm56cHdwSFZkMzd0d3BZZGRaczJiSmdyTXNPM0xreU83ZHU4VzBkWGQzTDF5NFVOOVlzbXZYcmp6UFJTYmtKT2k5UDNEZ2dBYVo2dlg2R1dlYzBkWFZWUlRGL1BuemhYblQwb2RKK2FzaVdJZzRlL1pzOFFHekxEdjk5Tk5oMWFwVkFqTnBKMkpGaTFLUlRrOXpGUTF5TEg3V3BEaVhmcW5BK1NtdmlhRDE5L2NyTHJadTNickpPd0VsSDRuM3BYd2trWG9oL1VSZ0xsWFdxUUtWdThZdytQU0ZIQ2tnTi9IMUp0V21uZTNJNERUZWxaV0NwZW1yd0ZJVVZGRXpzZmZwNFVQUDNucDRxbGdlZmJHVU9DTFNLZ3phamZaU0VWR2htUWh3VjV4VktaN0owaENwSm45UFZkT2xiNENxRlBwTXo2dW90SHl0c0p2SXVENUMyN1pxczBBeE5iVmFUYjZvTmRCR2k1TE1KK0dTU1k5N0tYVXEzWitGeXpTd2hJaE9uRmNSNmZ2dnYvL2d3WU9hVjVNcXlJbHVoRVlpQkNPZkJocWhZVHNkU3BXcjZKMUZpeFlWUllHSWMrZk8zYjU5dTB6MWtVY2VrZG9hWTh6UTBOQ2VQWHRFemMyZVBYdnUzTG55RXIvVFRqdE44QzlqVEU5UFQyOXZyMUJoZUhoNDkrN2RpakhvczV4eml4WXRTc2trTkIwZEhkMitmYnNRb2FlbkIxYXZYajJwcHBnMnhxRHNuUUtiYVJiSlJBZ2Z4dmVPbEw5TGx5NVZHUmNrTXMwT2szdTNidDJxWXBYbUpRZ21KUU9lZDk1NXFuVGtuUmN3NFMwb2xZd3pWVnZ5M2orNWJPblNwVzdpeTd1bWZheXB2SkZ2MGhkUFRCVlByVVRDSys5dENPMCtXYXFZNUg5VGYzaXFGK21KM3FsMFIweU5UeHBEcVFBUzZWU3pMSE9wSUtnZk1PMm1yakxqWnJNcDhIR3FDd1R4a1A0NGFSeGZHZ0dtVG8yMk9TbUtRcEQxc1g0UzFrb1NXbnA0bEtIMGVvMU9hajlaOGRmU2g2WWFYVTNaeEZXcmk5Y0M0eVI3V1dIZk5DQjRYTVRTZDQ0TkRnNktXcFVSK3Z2N0c0MEdFWTJNaktSZDROUkxGdDBrNzV4VFFGMmFUbXF1ZFhkMzk0b1ZLNFFFdmIyOTZxbDNkWFV0WDc1Y0ZMeitMbmovOHVYTFJYLzE5dlpxdzRhZW5wNWx5NWFsNFNoWnNyU3JtOWcydVZhckxWdTJURGFzdjcvLy93TUNtZFptNkFNOGpBQUFBQUJKUlU1RXJrSmdnZz09XCIiLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgUGFzc3dvcmRJbnB1dCBmcm9tIFwiLi8uLi9Gb3Jtcy9QYXNzd29yZElucHV0XCI7XG5pbXBvcnQgV2FsbGV0RGIgZnJvbSBcInN0b3Jlcy9XYWxsZXREYlwiO1xuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xuaW1wb3J0IHtrZXl9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBY2NvdW50UGVybWlzc2lvbnNNaWdyYXRlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHZhbGlkUGFzc3dvcmQ6IGZhbHNlLFxuICAgICAgICAgICAgcGFzczogbnVsbCxcbiAgICAgICAgICAgIGdlbmVyYXRlZFBhc3N3b3JkOlxuICAgICAgICAgICAgICAgIFwiUFwiICtcbiAgICAgICAgICAgICAgICBrZXlcbiAgICAgICAgICAgICAgICAgICAgLmdldF9yYW5kb21fa2V5KClcbiAgICAgICAgICAgICAgICAgICAgLnRvV2lmKClcbiAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBvblN1Ym1pdCgpIHt9XG5cbiAgICBvblBhc3N3b3JkQ2hhbmdlKGUpIHtcbiAgICAgICAgbGV0IHt2YWxpZH0gPSBlO1xuICAgICAgICBsZXQgbmFtZSA9IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpO1xuXG4gICAgICAgIGNvbnN0IGFjdGl2ZSA9ICF2YWxpZFxuICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICA6IFdhbGxldERiLmdlbmVyYXRlS2V5RnJvbVBhc3N3b3JkKG5hbWUsIFwiYWN0aXZlXCIsIGUudmFsdWUpLnB1YktleTtcbiAgICAgICAgY29uc3Qgb3duZXIgPSAhdmFsaWRcbiAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgOiBXYWxsZXREYi5nZW5lcmF0ZUtleUZyb21QYXNzd29yZChuYW1lLCBcIm93bmVyXCIsIGUudmFsdWUpLnB1YktleTtcbiAgICAgICAgY29uc3QgbWVtbyA9ICF2YWxpZFxuICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICA6IFdhbGxldERiLmdlbmVyYXRlS2V5RnJvbVBhc3N3b3JkKG5hbWUsIFwibWVtb1wiLCBlLnZhbHVlKS5wdWJLZXk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3ZhbGlkUGFzc3dvcmQ6IGUudmFsaWQsIHBhc3M6IGUudmFsdWV9KTtcbiAgICAgICAgdGhpcy5wcm9wcy5vblNldFBhc3N3b3JkS2V5cyh7YWN0aXZlLCBvd25lciwgbWVtb30pO1xuICAgIH1cblxuICAgIGNoZWNrS2V5VXNlKGtleSwgcm9sZSkge1xuICAgICAgICBpZiAoIWtleSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAocm9sZSA9PT0gXCJtZW1vXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBrZXkgPT09IHRoaXMucHJvcHMubWVtb0tleTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzW2Ake3JvbGV9S2V5c2BdLnJlZHVjZSgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBiID09PSBrZXkgfHwgYTtcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9vblVzZUtleShyb2xlLCByZW1vdmUgPSBmYWxzZSkge1xuICAgICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzW3JvbGUgPT09IFwiYWN0aXZlXCIgPyBcIm9uUmVtb3ZlQWN0aXZlXCIgOiBcIm9uUmVtb3ZlT3duZXJcIl0oXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wc1tyb2xlXSxcbiAgICAgICAgICAgICAgICBcIl9rZXlzXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wc1tyb2xlXSkge1xuICAgICAgICAgICAgY29uc3Qgd2VpZ2h0cyA9IHtcbiAgICAgICAgICAgICAgICBhY3RpdmU6IHRoaXMucHJvcHMuYWNjb3VudC5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgIFwiYWN0aXZlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwid2VpZ2h0X3RocmVzaG9sZFwiXG4gICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgb3duZXI6IHRoaXMucHJvcHMuYWNjb3VudC5nZXRJbihbXCJvd25lclwiLCBcIndlaWdodF90aHJlc2hvbGRcIl0pXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgXCJrZXlcIixcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzW3JvbGVdLFxuICAgICAgICAgICAgICAgIFwid2VpZ2h0c1wiLFxuICAgICAgICAgICAgICAgIHdlaWdodHMsXG4gICAgICAgICAgICAgICAgXCJ3ZWlnaHQgb2Ygcm9sZTpcIixcbiAgICAgICAgICAgICAgICB3ZWlnaHRzW3JvbGVdXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5wcm9wc1tcbiAgICAgICAgICAgICAgICByb2xlID09PSBcImFjdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgID8gXCJvbkFkZEFjdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgIDogcm9sZSA9PT0gXCJvd25lclwiXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwib25BZGRPd25lclwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwib25TZXRNZW1vXCJcbiAgICAgICAgICAgIF0odGhpcy5wcm9wc1tyb2xlXSwgd2VpZ2h0c1tyb2xlXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBhY3RpdmVJblVzZSA9IHRoaXMuY2hlY2tLZXlVc2UoXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjdGl2ZSAmJiB0aGlzLnByb3BzLmFjdGl2ZSxcbiAgICAgICAgICAgIFwiYWN0aXZlXCJcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IG93bmVySW5Vc2UgPSB0aGlzLmNoZWNrS2V5VXNlKFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vd25lciAmJiB0aGlzLnByb3BzLm93bmVyLFxuICAgICAgICAgICAgXCJvd25lclwiXG4gICAgICAgICk7XG4gICAgICAgIGxldCBtZW1vSW5Vc2UgPSB0aGlzLmNoZWNrS2V5VXNlKFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5tZW1vICYmIHRoaXMucHJvcHMubWVtbyxcbiAgICAgICAgICAgIFwibWVtb1wiXG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IHVzZVRleHQgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0udXNlX3RleHRcIik7XG4gICAgICAgIGxldCByZW1vdmVUZXh0ID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5wZXJtLnJlbW92ZV90ZXh0XCIpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPXt7bWF4V2lkdGg6IFwiODAwcHhcIn19PlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucGFzc3dvcmRfbW9kZWxfMVwiIC8+XG4gICAgICAgICAgICAgICAgPC9wPlxuXG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9e3ttYXhXaWR0aDogXCI4MDBweFwifX0+XG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cIndhbGxldC5wYXNzd29yZF9tb2RlbF8xXCIgLz5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9e3ttYXhXaWR0aDogXCI4MDBweFwifX0+XG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgdW5zYWZlIGNvbnRlbnQ9XCJ3YWxsZXQucGFzc3dvcmRfbW9kZWxfMlwiIC8+XG4gICAgICAgICAgICAgICAgPC9wPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXZpZGVyXCIgLz5cblxuICAgICAgICAgICAgICAgIDxmb3JtXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWF4V2lkdGg6IFwiNDByZW1cIn19XG4gICAgICAgICAgICAgICAgICAgIG9uU3VibWl0PXt0aGlzLm9uU3VibWl0LmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgIG5vVmFsaWRhdGVcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJsZWZ0LWxhYmVsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ3YWxsZXQuZ2VuZXJhdGVkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPHA+e3RoaXMuc3RhdGUuZ2VuZXJhdGVkUGFzc3dvcmR9PC9wPlxuXG4gICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPXt7Zm9udFdlaWdodDogXCJib2xkXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5wYXNzd29yZF9tb2RlbF8yXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuXG4gICAgICAgICAgICAgICAgICAgIDxQYXNzd29yZElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtYXRpb249e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vblBhc3N3b3JkQ2hhbmdlLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBub0xhYmVsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZExlbmd0aD17MTJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja1N0cmVuZ3RoXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9mb3JtPlxuXG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlXCI+XG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9e2FjdGl2ZUluVXNlID8gXCJpbi11c2VcIiA6IFwiXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLm5ld19hY3RpdmVcIiAvPjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57dGhpcy5wcm9wcy5hY3RpdmV9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwidGV4dC1yaWdodFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25Vc2VLZXkuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWN0aXZlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlSW5Vc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVJblVzZSA/IHJlbW92ZVRleHQgOiB1c2VUZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9e293bmVySW5Vc2UgPyBcImluLXVzZVwiIDogXCJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ubmV3X293bmVyXCIgLz46XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e3RoaXMucHJvcHMub3duZXJ9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwidGV4dC1yaWdodFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25Vc2VLZXkuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3duZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lckluVXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3duZXJJblVzZSA/IHJlbW92ZVRleHQgOiB1c2VUZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9e21lbW9JblVzZSA/IFwiaW4tdXNlXCIgOiBcIlwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5uZXdfbWVtb1wiIC8+OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnt0aGlzLnByb3BzLm1lbW99PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwidGV4dC1yaWdodFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBtZW1vSW5Vc2UgPyBcImhpZGRlblwiIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uVXNlS2V5LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1lbW9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vSW5Vc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VUZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxuXG4gICAgICAgICAgICAgICAge21lbW9JblVzZSA/IChcbiAgICAgICAgICAgICAgICAgICAgPHBcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWF4V2lkdGg6IFwiODAwcHhcIiwgcGFkZGluZ1RvcDogMTB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGFzLWVycm9yXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLm1lbW9fd2FybmluZ1wiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XG5pbXBvcnQgUHJpdmF0ZUtleVZpZXcgZnJvbSBcImNvbXBvbmVudHMvUHJpdmF0ZUtleVZpZXdcIjtcbmltcG9ydCB7UHVibGljS2V5fSBmcm9tIFwiYml0c2hhcmVzanNcIjtcbmltcG9ydCBJY29uIGZyb20gXCIuLi9JY29uL0ljb25cIjtcbmltcG9ydCBQcml2YXRlS2V5U3RvcmUgZnJvbSBcInN0b3Jlcy9Qcml2YXRlS2V5U3RvcmVcIjtcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcblxuLyoqXG4gKiBAYnJpZWYgQWxsb3dzIHRoZSB1c2VyIHRvIGVudGVyIGEgcHVibGljIGtleVxuICovXG5cbmNsYXNzIFB1YktleUlucHV0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLCAvLyBhIHRyYW5zbGF0aW9uIGtleSBmb3IgdGhlIGxhYmVsXG4gICAgICAgIHZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLCAvLyBjdXJyZW50IHZhbHVlXG4gICAgICAgIGVycm9yOiBQcm9wVHlwZXMuc3RyaW5nLCAvLyB0aGUgZXJyb3IgbWVzc2FnZSBvdmVycmlkZVxuICAgICAgICBwbGFjZWhvbGRlcjogUHJvcFR5cGVzLnN0cmluZywgLy8gdGhlIHBsYWNlaG9sZGVyIHRleHQgdG8gYmUgZGlzcGxheWVkIHdoZW4gdGhlcmUgaXMgbm8gdXNlcl9pbnB1dFxuICAgICAgICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsIC8vIGEgbWV0aG9kIHRvIGJlIGNhbGxlZCBhbnkgdGltZSB1c2VyIGlucHV0IGNoYW5nZXNcbiAgICAgICAgb25BY3Rpb246IFByb3BUeXBlcy5mdW5jLCAvLyBhIG1ldGhvZCBjYWxsZWQgd2hlbiBBZGQgYnV0dG9uIGlzIGNsaWNrZWRcbiAgICAgICAgdGFiSW5kZXg6IFByb3BUeXBlcy5udW1iZXIsIC8vIHRhYmluZGV4IHByb3BlcnR5IHRvIGJlIHBhc3NlZCB0byBpbnB1dCB0YWdcbiAgICAgICAgZGlzYWJsZUFjdGlvbkJ1dHRvbjogUHJvcFR5cGVzLmJvb2wgLy8gdXNlIGl0IGlmIHlvdSBuZWVkIHRvIGRpc2FibGUgYWN0aW9uIGJ1dHRvblxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgfVxuXG4gICAgaXNWYWxpZFB1YktleSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gISFQdWJsaWNLZXkuZnJvbVB1YmxpY0tleVN0cmluZyh2YWx1ZSk7XG4gICAgfVxuXG4gICAgb25JbnB1dENoYW5nZWQoZXZlbnQpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgb25LZXlEb3duKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykgdGhpcy5vbkFjdGlvbihldmVudCk7XG4gICAgfVxuXG4gICAgb25BY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkFjdGlvbiAmJlxuICAgICAgICAgICAgdGhpcy5zdGF0ZS52YWxpZCAmJlxuICAgICAgICAgICAgIXRoaXMucHJvcHMuZGlzYWJsZUFjdGlvbkJ1dHRvblxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25BY3Rpb24oZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgZXJyb3IgPSB0aGlzLnByb3BzLmVycm9yO1xuICAgICAgICBpZiAoIWVycm9yICYmIHRoaXMucHJvcHMudmFsdWUgJiYgIXRoaXMuaXNWYWxpZFB1YktleSh0aGlzLnByb3BzLnZhbHVlKSlcbiAgICAgICAgICAgIGVycm9yID0gXCJOb3QgYSB2YWxpZCBwdWJsaWMga2V5XCI7XG4gICAgICAgIGxldCBhY3Rpb25fY2xhc3MgPSBjbGFzc25hbWVzKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgIGRpc2FibGVkOiBlcnJvciB8fCB0aGlzLnByb3BzLmRpc2FibGVBY3Rpb25CdXR0b25cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGtleXMgPSBQcml2YXRlS2V5U3RvcmUuZ2V0U3RhdGUoKS5rZXlzO1xuICAgICAgICBjb25zdCBoYXNfcHJpdmF0ZSA9XG4gICAgICAgICAgICB0aGlzLmlzVmFsaWRQdWJLZXkodGhpcy5wcm9wcy52YWx1ZSkgJiYga2V5cy5oYXModGhpcy5wcm9wcy52YWx1ZSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHVia2V5LWlucHV0IG5vLW92ZXJmbG93XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWFyZWFcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXItYXJlYVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgeyFlcnJvciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy52YWx1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1ZhbGlkUHViS2V5KHRoaXMucHJvcHMudmFsdWUpID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJyaWdodC1sYWJlbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0udmFsaWRfcHViXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibGVmdC1sYWJlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwibGFiZWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e3RoaXMucHJvcHMubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dC1hcmVhXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmxpbmUtbGFiZWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjY291bnQtaW1hZ2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFByaXZhdGVLZXlWaWV3IHB1YmtleT17dGhpcy5wcm9wcy52YWx1ZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJrZXlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMua2V5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwiNHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qcml2YXRlS2V5Vmlldz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2hhc19wcml2YXRlID8gXCJteS1rZXlcIiA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnBsYWNlaG9sZGVyIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnB1YmxpY19rZXlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9XCJ1c2VyX2lucHV0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25JbnB1dENoYW5nZWQuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGhpcy5wcm9wcy50YWJJbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLm9uQWN0aW9uID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2FjdGlvbl9jbGFzc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25BY3Rpb24uYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e3RoaXMucHJvcHMuYWN0aW9uX2xhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVycm9yLWFyZWEgaGFzLWVycm9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57ZXJyb3J9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IFB1YktleUlucHV0O1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xuaW1wb3J0IFB1YktleUlucHV0IGZyb20gXCIuLi9Gb3Jtcy9QdWJLZXlJbnB1dFwiO1xuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xuaW1wb3J0IHtUYWJzLCBUYWJ9IGZyb20gXCIuLi9VdGlsaXR5L1RhYnNcIjtcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcbmltcG9ydCBTaWduZWRNZXNzYWdlQWN0aW9uIGZyb20gXCIuLi8uLi9hY3Rpb25zL1NpZ25lZE1lc3NhZ2VBY3Rpb25cIjtcbmltcG9ydCBTaWduZWRNZXNzYWdlIGZyb20gXCIuLi9BY2NvdW50L1NpZ25lZE1lc3NhZ2VcIjtcbmltcG9ydCB7U3dpdGNofSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XG5cbi8qKiBUaGlzIGNvbXBvbmVudCBnaXZlcyBhIHVzZXIgaW50ZXJmYWNlIGZvciBzaWduaW5nIGFuZCB2ZXJpZnlpbmcgbWVzc2FnZXMgd2l0aCB0aGUgYml0U2hhcmVzIG1lbW8ga2V5LlxuICogIEl0IGNvbnNpc3RzIG9mIHR3byB0YWJzOlxuICogICAgLSBTaWduIG1lc3NhZ2UgdGFiIChjb2RlIHByZWZpeDogdGFiU00pXG4gKiAgICAtIFZlcmlmeSBtZXNzYWdlIHRhYiAoY29kZSBwcmVmaXg6IHRhYlZNKVxuICpcbiAqICBTZWUgU2lnbmVkTWVzc2FnZUFjdGlvbiBmb3IgZGV0YWlscyBvbiBtZXNzYWdlIGZvcm1hdC5cbiAqXG4gKiAgICBAYXV0aG9yIFN0ZWZhbiBTY2hpZXNzbCA8c3RlZmFuLnNjaGllc3NsQGJsb2NrY2hhaW5wcm9qZWN0c2J2LmNvbT5cbiAqL1xuY2xhc3MgQWNjb3VudFNpZ25lZE1lc3NhZ2VzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBhY2NvdW50OiBDaGFpblR5cGVzLkNoYWluQWNjb3VudC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBzdGF0ZSAoZG8gbm90IHVzZSBzZXRTdGF0ZSBtZXRob2QhKVxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgdGFic21fbWVtb19rZXk6IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJvcHRpb25zXCIpLmdldChcIm1lbW9fa2V5XCIpLFxuICAgICAgICAgICAgdGFic21fcG9wdXA6IFwiXCIsXG4gICAgICAgICAgICB0YWJzbV9tZXNzYWdlX3RleHQ6IFwiXCIsXG4gICAgICAgICAgICB0YWJzbV9tZXNzYWdlX3NpZ25lZDogXCJcIixcbiAgICAgICAgICAgIHRhYnZtX3BvcHVwOiBcIlwiLFxuICAgICAgICAgICAgdGFidm1fbWVzc2FnZV9zaWduZWQ6IFwiXCIsXG4gICAgICAgICAgICB0YWJ2bV92ZXJpZmllZDogbnVsbCxcbiAgICAgICAgICAgIHRhYnZtX21lc3NhZ2Vfc2lnbmVkX2FuZF92ZXJpZmllZDogbnVsbCxcbiAgICAgICAgICAgIHRhYnZtX2ZsYWdfdmVyaWZ5b25jaGFuZ2U6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXZlbnQgd2hlbiB1c2VyIHB1c2hlcyBzaWduIGJ1dHRvbi4gTWVtbyBtZXNzYWdlIGFuZCBtZXRhIHdpbGwgYmUgc2lnbmVkIGFuZCBkaXNwbGF5ZWRcbiAgICAgKiBpbiB0aGUgYm90dG9tIHRleHRhcmVhXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgKi9cbiAgICBfdGFiU01TaWduQWN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIHZhbGlkYXRlIGtleXMgYXJlIHN0aWxsIHRoZSBzYW1lLiBCZXR0ZXI6IG1ha2UgcHVibGljIG1lbW9rZXkgZmllbGQgdW5lZGl0YWJsZVxuICAgICAgICAgICAgbGV0IHN0b3JlZEtleSA9IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJvcHRpb25zXCIpLmdldChcIm1lbW9fa2V5XCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUudGFic21fbWVtb19rZXkgIT09IHN0b3JlZEtleSkge1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFxuICAgICAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmtleW1pc21hdGNoXCIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdGhlcmUgc2hvdWxkIGJlIGEgbWVzc2FnZSBlbnRlcmVkXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS50YWJzbV9tZXNzYWdlX3RleHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90YWJTTVBvcE1lc3NhZ2UoXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQuc2lnbmVkbWVzc2FnZXMuc2lnbmluZ1wiKSxcbiAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgU2lnbmVkTWVzc2FnZUFjdGlvbi5zaWduTWVzc2FnZShcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnRhYnNtX21lc3NhZ2VfdGV4dFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNtX21lc3NhZ2Vfc2lnbmVkOiByZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic21fcG9wdXA6IFwiXCIgLy8gY2xlYXIgbG9hZGluZyBtZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90YWJTTVBvcE1lc3NhZ2UoZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic21fbWVzc2FnZV9zaWduZWQ6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLl90YWJTTVBvcE1lc3NhZ2UoZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgdGFic21fbWVzc2FnZV9zaWduZWQ6IG51bGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3RhYlNNSGFuZGxlQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIC8vIGV2ZW50IGZvciB0ZXh0YXJlYVxuICAgICAgICB0aGlzLnNldFN0YXRlKHt0YWJzbV9tZXNzYWdlX3RleHQ6IGV2ZW50LnRhcmdldC52YWx1ZX0pO1xuICAgIH1cblxuICAgIF90YWJTTUhhbmRsZUNoYW5nZUtleSh2YWx1ZSkge1xuICAgICAgICAvLyBldmVudCBmb3IgdGV4dGZpZWxkIG9mIHB1YmxpYyBrZXlcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dGFic21fbWVtb19rZXk6IHZhbHVlfSk7XG4gICAgfVxuXG4gICAgX3RhYlNNQ29weVRvQ2xpcEJvYXJkKGV2ZW50KSB7XG4gICAgICAgIC8vIGV2ZW50IHdoZW4gdXNlciBjbGlja3MgaW50byB0aGUgc2lnbmVkIG1lc3NhZ2UgdGV4dGFyZWFcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmZvY3VzKCk7XG4gICAgICAgICAgICBldmVudC50YXJnZXQuc2VsZWN0KCk7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3NmdWwgPSBkb2N1bWVudC5leGVjQ29tbWFuZChcImNvcHlcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5fdGFiU01Qb3BNZXNzYWdlKFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzZnVsXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5jb3B5c3VjY2Vzc2Z1bFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmNvcHl1bnN1Y2Nlc3NmdWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RhYlNNUG9wTWVzc2FnZShcbiAgICAgICAgICAgICAgICAgICAgY291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmNvcHl1bnN1Y2Nlc3NmdWxcIlxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXlzIGFuIGluZm9ybWF0aW9uIHRvIHRoZSB1c2VyIHRoYXQgZGlzYXBwZWFycyBvdmVyIHRpbWVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHRpbWVvdXRcbiAgICAgKi9cbiAgICBfdGFiU01Qb3BNZXNzYWdlKG1lc3NhZ2UsIHRpbWVvdXQgPSAzMDAwKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgdGFic21fcG9wdXA6IG1lc3NhZ2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG1lc3NhZ2UgIT09IFwiXCIgJiYgdGltZW91dCA+IDApIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB0YWJzbV9wb3B1cDogXCJcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFdmVudCB3aGVuIHRoZSB1c2VyIHRyaWVzIHRvIHZlcmlmeSBhIG1lc3NhZ2UsIGVpdGhlciBtYW51YWwgdGhyb3VnaCB0aGUgYnV0dG9uIG9yIG9uQ2hhbmdlIG9mIHRoZSB0ZXh0YXJlYS5cbiAgICAgKiBUaGUgbWVzc2FnZSBpcyBwYXJzZWQgYW5kIHZlcmlmaWVkLCB0aGUgdXNlciBnZXRzIHRoZSBtZXNzYWdlIHJlc3RhdGVkIGluIHRoZSBib3R0b20gcGFydCBvZiB0aGUgc2l0ZVxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50XG4gICAgICovXG4gICAgX3RhYlZNQWN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgLy8gcmVzZXQgdG8gdW52ZXJpZmllZCBzdGF0ZVxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHRhYnZtX21lc3NhZ2Vfc2lnbmVkX2FuZF92ZXJpZmllZDogbnVsbCxcbiAgICAgICAgICAgIHRhYnZtX3ZlcmlmaWVkOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBhdHRlbXB0IHZlcmlmeWluZ1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS50YWJ2bV9tZXNzYWdlX3NpZ25lZCkge1xuICAgICAgICAgICAgdGhpcy5fdGFiVk1Qb3BNZXNzYWdlKFxuICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQuc2lnbmVkbWVzc2FnZXMudmVyaWZ5aW5nXCIpLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBibG9jayBndWlcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZV9zaWduZWRfYW5kX3ZlcmlmaWVkID0gU2lnbmVkTWVzc2FnZUFjdGlvbi52ZXJpZnlNZW1vKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS50YWJ2bV9tZXNzYWdlX3NpZ25lZFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYnZtX21lc3NhZ2Vfc2lnbmVkX2FuZF92ZXJpZmllZDogbWVzc2FnZV9zaWduZWRfYW5kX3ZlcmlmaWVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFidm1fdmVyaWZpZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJ2bV9wb3B1cDogXCJcIiAvLyBjbGVhciB2ZXJpZnlpbmcgbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGFiVk1Qb3BNZXNzYWdlKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJ2bV9tZXNzYWdlX3NpZ25lZF9hbmRfdmVyaWZpZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJ2bV92ZXJpZmllZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfdGFiVk1IYW5kbGVDaGFuZ2UoZXZlbnQpIHtcbiAgICAgICAgLy8gb25jaGFuZ2UgZXZlbnQgb2YgdGhlIGlucHV0IHRleHRhcmVhXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgdGFidm1fbWVzc2FnZV9zaWduZWQ6IGV2ZW50LnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgIHRhYnZtX3ZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAgIHRhYnZtX21lc3NhZ2Vfc2lnbmVkX2FuZF92ZXJpZmllZDogbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUudGFidm1fZmxhZ192ZXJpZnlvbmNoYW5nZSkge1xuICAgICAgICAgICAgdGhpcy5fdGFiVk1BY3Rpb24oZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzcGxheXMgYW4gaW5mb3JtYXRpb24gdG8gdGhlIHVzZXIgdGhhdCBkaXNhcHBlYXJzIG92ZXIgdGltZVxuICAgICAqXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0gdGltZW91dFxuICAgICAqL1xuICAgIF90YWJWTVBvcE1lc3NhZ2UobWVzc2FnZSwgdGltZW91dCA9IDMwMDApIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICB0YWJ2bV9wb3B1cDogbWVzc2FnZVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAobWVzc2FnZSAhPT0gXCJcIiAmJiB0aW1lb3V0ID4gMCkge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHRhYnZtX3BvcHVwOiBcIlwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF90YWJWTVRvZ2dsZVZlcmlmeU9uQ2hhbmdlKCkge1xuICAgICAgICAvLyBldmVudCB3aGVuIHRoZSB1c2VyIGVuYWJsZXMgLyBkaXNhYmxlcyB2ZXJpZnlpbmcgd2hpbGUgdHlwaW5nXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgdGFidm1fZmxhZ192ZXJpZnlvbmNoYW5nZTogIXRoaXMuc3RhdGUudGFidm1fZmxhZ192ZXJpZnlvbmNoYW5nZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBhcHAtdGFibGVzIG5vLXBhZGRpbmdcIiByZWY9XCJhcHBUYWJsZXNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgc21hbGwtMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLWNvbnRhaW5lciBnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY2NvdW50LXRhYnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNDbGFzcz1cImFjY291bnQtb3ZlcnZpZXcgbm8tcGFkZGluZyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZz1cImFjY291bnRTaWduZWRNZXNzYWdlc1RhYlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudENsYXNzPVwiZ3JpZC1jb250ZW50IHNocmluayBzbWFsbC12ZXJ0aWNhbCBtZWRpdW0taG9yaXpvbnRhbCBwYWRkaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLnNpZ25tZXNzYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdyaWQtY29udGVudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e292ZXJmbG93WDogXCJoaWRkZW5cIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBuby1tYXJnaW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuc2lnbmVkbWVzc2FnZXMuc2lnbm1lc3NhZ2VcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQdWJLZXlJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cIm1lbW9fa2V5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS50YWJzbV9tZW1vX2tleX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQucGVybS5tZW1vX3B1YmxpY19rZXlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUHVibGljIEtleVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX3RhYlNNSGFuZGxlQ2hhbmdlS2V5LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVBY3Rpb25CdXR0b249e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPVwiMTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnRhYnNtX21lc3NhZ2VfdGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fdGFiU01IYW5kbGVDaGFuZ2UuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmVudGVybWVzc2FnZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3RhYlNNU2lnbkFjdGlvbi5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5zaWduXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7Y29sb3I6IFwiZ3JheVwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnRhYnNtX3BvcHVwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxNFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudGFic21fbWVzc2FnZV9zaWduZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tlZGl0YWJsZTogZmFsc2V9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5hdXRvbWF0aWNjcmVhdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90YWJTTUNvcHlUb0NsaXBCb2FyZC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQuc2lnbmVkbWVzc2FnZXMudmVyaWZ5bWVzc2FnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tvdmVyZmxvd1g6IFwiaGlkZGVuXCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgbm8tbWFyZ2luXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLnZlcmlmeW1lc3NhZ2VcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IFwicmlnaHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogXCIwLjFlbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luQm90dG9tOiBcIjAuNWVtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiMC41cmVtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuc2lnbmVkbWVzc2FnZXMudmVyaWZ5b25jaGFuZ2VcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50YWJ2bV9mbGFnX3ZlcmlmeW9uY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fdGFiVk1Ub2dnbGVWZXJpZnlPbkNoYW5nZS5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudGFidm1fbWVzc2FnZV9zaWduZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX3RhYlZNSGFuZGxlQ2hhbmdlLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5lbnRlcm1lc3NhZ2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90YWJWTUFjdGlvbi5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy52ZXJpZnlcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0IHN0eWxlPXt7Y29sb3I6IFwiZ3JheVwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnRhYnZtX3BvcHVwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGV4dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS50YWJ2bV92ZXJpZmllZCAhPT0gbnVsbCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmbG9hdDogXCJyaWdodFwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlIGlzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGFidm1fdmVyaWZpZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJncmVlblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwicmVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50YWJ2bV92ZXJpZmllZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcInZlcmlmaWVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJub3QgdmVyaWZpZWRcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeygodGhpcy5zdGF0ZS50YWJ2bV92ZXJpZmllZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGFidm1fbWVzc2FnZV9zaWduZWRfYW5kX3ZlcmlmaWVkICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRhYnZtX2ZsYWdfdmVyaWZ5b25jaGFuZ2UpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNpZ25lZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRhYnZtX21lc3NhZ2Vfc2lnbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuQWNjb3VudFNpZ25lZE1lc3NhZ2VzID0gQmluZFRvQ2hhaW5TdGF0ZShBY2NvdW50U2lnbmVkTWVzc2FnZXMpO1xuXG5leHBvcnQgZGVmYXVsdCBBY2NvdW50U2lnbmVkTWVzc2FnZXM7XG4iLCJpbXBvcnQgYWx0IGZyb20gXCJhbHQtaW5zdGFuY2VcIjtcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcbmltcG9ydCB7U2lnbmF0dXJlLCBDaGFpblN0b3JlLCBQdWJsaWNLZXl9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xuaW1wb3J0IFdhbGxldFVubG9ja0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvV2FsbGV0VW5sb2NrQWN0aW9uc1wiO1xuaW1wb3J0IFdhbGxldERiIGZyb20gXCJzdG9yZXMvV2FsbGV0RGJcIjtcblxuY29uc3QgTVNHX0hFQUQgPSBcIi0tLS0tQkVHSU4gQklUU0hBUkVTIFNJR05FRCBNRVNTQUdFLS0tLS1cIjtcbmNvbnN0IE1TR19NRVRBID0gXCItLS0tLUJFR0lOIE1FVEEtLS0tLVwiO1xuY29uc3QgTVNHX1NJR05BVFVSRSA9IFwiLS0tLS1CRUdJTiBTSUdOQVRVUkUtLS0tLVwiO1xuY29uc3QgTVNHX0ZPT1QgPSBcIi0tLS0tRU5EIEJJVFNIQVJFUyBTSUdORUQgTUVTU0FHRS0tLS0tXCI7XG5jb25zdCBNU0dfU0VOREVSID0gXCJhY2NvdW50XCI7XG5jb25zdCBNU0dfUFVCTElDS0VZID0gXCJtZW1va2V5XCI7XG5jb25zdCBNU0dfQkxPQ0sgPSBcImJsb2NrXCI7XG5jb25zdCBNU0dfREFURSA9IFwidGltZXN0YW1wXCI7XG5cbi8qKiBUaGlzIGFjdGlvbiBwcm92aWRlcyBmb2xsb3dpbmcgZnVuY3Rpb25hbGl0aWVzOlxuICogICAgLSBTaWduIGEgbWVzc2FnZVxuICogICAgLSBWZXJpZnkgYSBnaXZlbiBtZXNzYWdlXG4gKlxuICogIFRoZSBtZXNzYWdlIGZvcm1hdCB0aGF0IGlzIHVuZGVybHlpbmcgaXMgYXMgZm9sbG93czpcbiAqICAtLS0tLUJFR0lOIEJJVFNIQVJFUyBTSUdORUQgTUVTU0FHRS0tLS0tXG4gKiAgPG1lc3NhZ2UgZnJvbSB0aGUgYWNjb3VudD5cbiAqICAtLS0tLUJFR0lOIE1FVEEtLS0tLVxuICogIGFjY291bnQ9PGFjY291bnQgbmFtZT5cbiAqICBtZW1va2V5PTxhY2NvdW50IG1lbW8gcHVibGljIGtleT5cbiAqICBibG9jaz08bGFzdCBpcnJldmVyc2libGUgYmxvY2s+XG4gKiAgdGltZXN0YW1wPTxjdXJyZW50IHRpbWU+XG4gKiAgLS0tLS1CRUdJTiBTSUdOQVRVUkUtLS0tLVxuICogIDxzaWduYXR1cmU+XG4gKiAgLS0tLS1FTkQgQklUU0hBUkVTIFNJR05FRCBNRVNTQUdFLS0tLS1cbiAqXG4gKiAgICBAYXV0aG9yIFN0ZWZhbiBTY2hpZXNzbCA8c3RlZmFuLnNjaGllc3NsQGJsb2NrY2hhaW5wcm9qZWN0c2J2LmNvbT5cbiAqL1xuY2xhc3MgU2lnbmVkTWVzc2FnZUFjdGlvbiB7XG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBnaXZlbiByYXcgc3RyaW5nIHRvIGEgcHJvY2Vzc2luZyBmcmllbmRseSBkaWN0aW9uYXJ5XG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBNZXNzYWdlIGFzIHJhdyBzdHJpbmcsIHByb3Blcmx5IGZvcm1hdHRlZCB3aXRoIGhlYWQvbWV0YS9zaWduYXR1cmUvZm9vdGVyXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Kn0gcGFyc2VkIG1lc3NhZ2UgYXMgZGljdGlvbmFyeSB3aXRoIHRoZSBmb2xsb3dpbmcgZmllbGRzOlxuICAgICAqICAgICAgICAgICAgICBjb250ZW50IDogVXNlciBtZXNzYWdlIG9mIHRoZSBtZXNzYWdlXG4gICAgICogICAgICAgICAgICAgIG1ldGEgOiBEaWN0aW9uYXJ5IHdpdGggdGhlIG1ldGEgZGF0YVxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQgOiBBY2NvdW50IG5hbWUgb2YgdGhlIHNpZ25lclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIGtleSA6IE1lbW8gcHVibGljIGtleSBvZiB0aGUgc2lnbmVyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgYmxvY2sgOiBDdXJyZW50IGxhc3QgaXJyZXZlcnNpYmxlIGJsb2NrIG9mIHRoZSBiaXRTaGFyZXMgYmxvY2tjaGFpblxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcCA6IFRpbWUgdGhlIG1lc3NhZ2Ugd2FzIHNpZ25lZCBpbiBVVEMgZm9ybWF0XG4gICAgICogICAgICAgICAgICAgIHNpZ25lZCA6IFNlcGVyYXRlIHN0cmluZyB0aGF0IGNvbnRhaW5zIGFsbCBkYXRhIHRoYXQgd2lsbCBiZSBzaWduZWQgKGNvbnRlbnQgKyBtZXRhKVxuICAgICAqICAgICAgICAgICAgICBzaWduYXR1cmUgOiBTaWduYXR1cmUgb2YgdGhlIHNpZ25lZCBkYXRhXG4gICAgICovXG4gICAgcGFyc2VNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgbGV0IG1lc3NhZ2VDb250ZW50LCBtZXNzYWdlTWV0YSwgbWVzc2FnZVNpZ25hdHVyZSwgbWVzc2FnZVNpZ25lZENvbnRlbnQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBjdXQgdGhlIHNlY3Rpb25zXG4gICAgICAgICAgICBtZXNzYWdlQ29udGVudCA9IG1lc3NhZ2Uuc3BsaXQoTVNHX0hFQUQpWzFdOyAvLyBldmVyeXRoaW5nIGJlZm9yZSB0aGUgaGVhZCBpcyBpZ25vcmVkXG4gICAgICAgICAgICBtZXNzYWdlTWV0YSA9IG1lc3NhZ2VDb250ZW50LnNwbGl0KE1TR19NRVRBKTtcbiAgICAgICAgICAgIG1lc3NhZ2VDb250ZW50ID0gbWVzc2FnZU1ldGFbMF0ucmVwbGFjZSgvXlxcbnxcXG4kL2csIFwiXCIpO1xuICAgICAgICAgICAgbWVzc2FnZVNpZ25hdHVyZSA9IG1lc3NhZ2VNZXRhWzFdLnNwbGl0KE1TR19TSUdOQVRVUkUpO1xuICAgICAgICAgICAgbWVzc2FnZU1ldGEgPSBtZXNzYWdlU2lnbmF0dXJlWzBdLnRyaW0oKTtcbiAgICAgICAgICAgIG1lc3NhZ2VTaWduYXR1cmUgPSBtZXNzYWdlU2lnbmF0dXJlWzFdLnNwbGl0KE1TR19GT09UKVswXS50cmltKCk7IC8vIGV2ZXJ5dGhpbmcgYWZ0ZXIgZm9vdGVyIGlzIGlnbm9yZWRcblxuICAgICAgICAgICAgLy8gaG93IHRoZSBzaWduZWQgY29udGVudCBpdCBidWlsdCBpcyBjcnVjaWFsLCBjb25zaWRlciBlbmNhcHN1bGF0aW5nXG4gICAgICAgICAgICBtZXNzYWdlU2lnbmVkQ29udGVudCA9IG1lc3NhZ2VDb250ZW50ICsgXCJcXG5cIiArIG1lc3NhZ2VNZXRhO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmludmFsaWRmb3JtYXRcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbWVzc2FnZU1ldGFBY2NvdW50LFxuICAgICAgICAgICAgbWVzc2FnZU1ldGFLZXksXG4gICAgICAgICAgICBtZXNzYWdlTWV0YUJsb2NrLFxuICAgICAgICAgICAgbWVzc2FnZU1ldGFUaW1lc3RhbXA7XG4gICAgICAgIGlmIChtZXNzYWdlTWV0YSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBwcm9jZXNzIG1ldGFcbiAgICAgICAgICAgICAgICAvLyAuLi4gc2VuZGVyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFBY2NvdW50ID0gbWVzc2FnZU1ldGEuc3BsaXQoTVNHX1NFTkRFUiArIFwiPVwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlTWV0YUFjY291bnQgPSBtZXNzYWdlTWV0YUFjY291bnRbMV1cbiAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiXFxuXCIpWzBdXG4gICAgICAgICAgICAgICAgICAgIC50cmltKCk7XG5cbiAgICAgICAgICAgICAgICAvLyAuLi4gYW5kIGl0cyBwdWJsaWMga2V5XG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFLZXkgPSBtZXNzYWdlTWV0YS5zcGxpdChNU0dfUFVCTElDS0VZICsgXCI9XCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VNZXRhS2V5ID0gbWVzc2FnZU1ldGFLZXlbMV0uc3BsaXQoXCJcXG5cIilbMF0udHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgLy8gLi4uIGJsb2NrIG51bWJlclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VNZXRhQmxvY2sgPSBtZXNzYWdlTWV0YS5zcGxpdChNU0dfQkxPQ0sgKyBcIj1cIik7XG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFCbG9jayA9IG1lc3NhZ2VNZXRhQmxvY2tbMV0uc3BsaXQoXCJcXG5cIilbMF0udHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgLy8gLi4uIHRpbWUgc3RhbXBcbiAgICAgICAgICAgICAgICBtZXNzYWdlTWV0YVRpbWVzdGFtcCA9IG1lc3NhZ2VNZXRhLnNwbGl0KE1TR19EQVRFICsgXCI9XCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VNZXRhVGltZXN0YW1wID0gbWVzc2FnZU1ldGFUaW1lc3RhbXBbMV1cbiAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiXFxuXCIpWzBdXG4gICAgICAgICAgICAgICAgICAgIC50cmltKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5pbnZhbGlkZm9ybWF0XCJcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29udGVudDogbWVzc2FnZUNvbnRlbnQsXG4gICAgICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgICAgICAgYWNjb3VudDogbWVzc2FnZU1ldGFBY2NvdW50LFxuICAgICAgICAgICAgICAgIGtleTogbWVzc2FnZU1ldGFLZXksXG4gICAgICAgICAgICAgICAgYmxvY2s6IG1lc3NhZ2VNZXRhQmxvY2ssXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBtZXNzYWdlTWV0YVRpbWVzdGFtcFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNpZ25lZDogbWVzc2FnZVNpZ25lZENvbnRlbnQsXG4gICAgICAgICAgICBzaWduYXR1cmU6IG1lc3NhZ2VTaWduYXR1cmVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZ2l2ZW4gc3RyaW5nIG1lc3NhZ2UgaXMgcGFyc2VkIGFuZCB0aGVuIGl0cyBzaWduYXR1cmUgdmVyaWZpZWQuIEEgcG9zaXRpdmUgdmVyaWZpY2F0aW9uIHJldHVybiB0aGUgcGFyc2VkXG4gICAgICogbWVzc2FnZSwgYW55dGhpbmcgZWxzZSB0aHJvd3MgYW4gZXhlcHRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBNZXNzYWdlIGFzIHJhdyBzdHJpbmcsIHByb3Blcmx5IGZvcm1hdHRlZCB3aXRoIGhlYWQvbWV0YS9zaWduYXR1cmUvZm9vdGVyLCBvciBhbHJlYWR5IHBhcnNlZCBtZXNzYWdlXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBwYXJzZWQgbWVzc2FnZSwgc2VlIHBhcnNlTWVzc2FnZVxuICAgICAqL1xuICAgIHZlcmlmeU1lbW8obWVzc2FnZSkge1xuICAgICAgICBsZXQgbWVzc2FnZV9zaWduZWQ7XG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiB8fCBtZXNzYWdlIGluc3RhbmNlb2YgU3RyaW5nKSB7XG4gICAgICAgICAgICBtZXNzYWdlX3NpZ25lZCA9IHRoaXMucGFyc2VNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gYXNzdW1lIGl0cyBhIGRpY3Rpb25hcnlcbiAgICAgICAgICAgIG1lc3NhZ2Vfc2lnbmVkID0gbWVzc2FnZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkYXRlIGFjY291bnQgYW5kIGtleVxuICAgICAgICBsZXQgc3RvcmVkQWNjb3VudCA9IENoYWluU3RvcmUuZ2V0QWNjb3VudChtZXNzYWdlX3NpZ25lZC5tZXRhLmFjY291bnQpO1xuICAgICAgICBpZiAoc3RvcmVkQWNjb3VudCA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5pbnZhbGlkdXNlclwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZlcmlmeSBtZXNzYWdlIHNpZ25lZFxuICAgICAgICBsZXQgdmVyaWZpZWQgPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZlcmlmaWVkID0gU2lnbmF0dXJlLmZyb21IZXgobWVzc2FnZV9zaWduZWQuc2lnbmF0dXJlKS52ZXJpZnlCdWZmZXIoXG4gICAgICAgICAgICAgICAgbWVzc2FnZV9zaWduZWQuc2lnbmVkLFxuICAgICAgICAgICAgICAgIFB1YmxpY0tleS5mcm9tUHVibGljS2V5U3RyaW5nKG1lc3NhZ2Vfc2lnbmVkLm1ldGEua2V5KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAvLyB3cmFwIG1lc3NhZ2UgdGhhdCBjb3VsZCBiZSByYWlzZWQgZnJvbSBTaWduYXR1cmVcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmVycm9ydmVyaWZ5aW5nXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdmVyaWZpZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmludmFsaWRzaWduYXR1cmVcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2Vfc2lnbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdpdmVuIGFuIGFjY291bnQgYW5kIHRoZSBtZXNzYWdlIHRleHRcbiAgICAgKiBAcGFyYW0gYWNjb3VudCBBY2NvdW50IHRoYXQgd3JpdGVzIHRoZSBtZXNzYWdlXG4gICAgICogQHBhcmFtIG1lc3NhZ2VUZXh0IFN0cmluZyB0ZXh0IG9mIHRoZSBtZXNzYWdlXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAgICovXG4gICAgc2lnbk1lc3NhZ2UoYWNjb3VudCwgbWVzc2FnZVRleHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB3YWxsZXQgaXMgdW5sb2NrZWQgKHdlIG5lZWQgcHJpdmF0ZSBrZXkpXG4gICAgICAgICAgICBXYWxsZXRVbmxvY2tBY3Rpb25zLnVubG9jaygpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2J0YWluIGFsbCBuZWNlc3Nhcnkga2V5c1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lbW9fZnJvbV9wdWJsaWMgPSBhY2NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldChcIm9wdGlvbnNcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KFwibWVtb19rZXlcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgMXMgYXJlIGJhc2U1OCBmb3IgYWxsIHplcm9zIChudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC8xMTExMTExMTExMTExMTExMTExMTEvLnRlc3QobWVtb19mcm9tX3B1YmxpYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vX2Zyb21fcHVibGljID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZW1vX2Zyb21fcHJpdmtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlVGV4dCAmJiBtZW1vX2Zyb21fcHVibGljKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb19mcm9tX3ByaXZrZXkgPSBXYWxsZXREYi5nZXRQcml2YXRlS2V5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vX2Zyb21fcHVibGljXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lbW9fZnJvbV9wcml2a2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQuc2lnbmVkbWVzc2FnZXMuaW52YWxpZGtleVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IG90aGVyIG1ldGEgZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlycl9ibG9jayA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KFwiMi4xLjBcIikuZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGFzdF9pcnJldmVyc2libGVfYmxvY2tfbnVtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1ldGEgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TR19TRU5ERVIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPVwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmdldChcIm5hbWVcIikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TR19QVUJMSUNLRVkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPVwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vX2Zyb21fcHVibGljICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcblwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNU0dfQkxPQ0sgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPVwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcnJfYmxvY2sgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TR19EQVRFICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIj1cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93LnRvVVRDU3RyaW5nKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlQ29udGVudFRvQmVTaWduZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VUZXh0ICsgXCJcXG5cIiArIG1ldGE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBibG9jayBndWlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVtb19zaWduYXR1cmUgPSBTaWduYXR1cmUuc2lnbkJ1ZmZlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VDb250ZW50VG9CZVNpZ25lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9fZnJvbV9wcml2a2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb19mcm9tX3B1YmxpY1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVtb19mb3JtYXR0ZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTVNHX0hFQUQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlVGV4dCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcblwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TR19NRVRBICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcblwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TR19TSUdOQVRVUkUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vX3NpZ25hdHVyZS50b0hleCgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTVNHX0ZPT1Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobWVtb19mb3JtYXR0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFsdC5jcmVhdGVBY3Rpb25zKFNpZ25lZE1lc3NhZ2VBY3Rpb24pO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xuaW1wb3J0IFNpZ25lZE1lc3NhZ2VBY3Rpb24gZnJvbSBcIi4uLy4uL2FjdGlvbnMvU2lnbmVkTWVzc2FnZUFjdGlvblwiO1xuXG4vKiogVGhpcyBjb21wb25lbnQgYWxsb3dzIHRvIGRpc3BsYXkgYW5kIHZlcmlmeSBhIHNpZ25lZCBtZXNzYWdlXG4gKlxuICogIFNlZSBTaWduZWRNZXNzYWdlQWN0aW9uIGZvciBkZXRhaWxzIG9uIG1lc3NhZ2UgZm9ybWF0LlxuICpcbiAqICAgIEBhdXRob3IgU3RlZmFuIFNjaGllc3NsIDxzdGVmYW4uc2NoaWVzc2xAYmxvY2tjaGFpbnByb2plY3RzYnYuY29tPlxuICovXG5jbGFzcyBTaWduZWRNZXNzYWdlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICAvLyBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIC8vICAgICBzaWduZWRNZXNzYWdlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcbiAgICAvLyAgICBub1ZlcmlmaWNhdGlvblxuICAgIC8vIH07XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICBub1ZlcmlmaWNhdGlvbjogZmFsc2VcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5wcm9wcy5tZXNzYWdlLFxuICAgICAgICAgICAgbWVzc2FnZVBhcnNlZDogbnVsbCxcbiAgICAgICAgICAgIHNob3dSYXdNZXNzYWdlOiBmYWxzZSxcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICBub1ZlcmlmaWNhdGlvbjogdGhpcy5wcm9wcy5ub1ZlcmlmaWNhdGlvbixcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB2ZXJpZmllZDogbnVsbCxcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICBub3RpZmljYXRpb246IG51bGxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBfdmVyaWZ5TWVzc2FnZShzaWduZWRNZXNzYWdlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbWVzc2FnZTogc2lnbmVkTWVzc2FnZSxcbiAgICAgICAgICAgIG1lc3NhZ2VQYXJzZWQ6IG51bGwsXG4gICAgICAgICAgICB2ZXJpZmllZDogbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IG1lc3NhZ2VQYXJzZWQgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbWVzc2FnZVBhcnNlZCA9IFNpZ25lZE1lc3NhZ2VBY3Rpb24ucGFyc2VNZXNzYWdlKHNpZ25lZE1lc3NhZ2UpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgdmVyaWZpZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZVBhcnNlZDogbWVzc2FnZVBhcnNlZFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5zdGF0ZS5ub1ZlcmlmaWNhdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB2ZXJpZmllZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uOiBjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQuc2lnbmVkbWVzc2FnZXMudmVyaWZ5aW5nXCJcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3QgYmxvY2sgZ3VpXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBTaWduZWRNZXNzYWdlQWN0aW9uLnZlcmlmeU1lbW8obWVzc2FnZVBhcnNlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb246IFwiXCIgLy8gY2xlYXIgcG9wdXBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3dhcm5pbmcoZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZpZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuX3dhcm5pbmcoZXJyLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICB0aGlzLl92ZXJpZnlNZXNzYWdlKHRoaXMuc3RhdGUubWVzc2FnZSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgICAgbGV0IHNpZ25lZE1lc3NhZ2UgPSBuZXh0UHJvcHMubWVzc2FnZTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgc2lnbmVkTWVzc2FnZSAhPSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHNpZ25lZE1lc3NhZ2UgIT0gbnVsbCAmJlxuICAgICAgICAgICAgc2lnbmVkTWVzc2FnZSA9PSB0aGlzLnN0YXRlLm1lc3NhZ2VcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBhbHJlYWR5IGRvbmVcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl92ZXJpZnlNZXNzYWdlKHNpZ25lZE1lc3NhZ2UpO1xuICAgIH1cblxuICAgIF93YXJuaW5nKG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBub3RpZmljYXRpb246IG1lc3NhZ2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX3RvZ2dsZVJhd01lc3NhZ2UoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2hvd1Jhd01lc3NhZ2U6ICF0aGlzLnN0YXRlLnNob3dSYXdNZXNzYWdlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IGxlZ2VuZE1lc3NhZ2U7XG4gICAgICAgIGxldCBib3JkZXJDb2xvcjtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUubWVzc2FnZVBhcnNlZCAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS52ZXJpZmllZCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYm9yZGVyQ29sb3IgPSBcIiNGRkZcIjtcbiAgICAgICAgICAgICAgICBsZWdlbmRNZXNzYWdlID1cbiAgICAgICAgICAgICAgICAgICAgXCJVbnZlcmlmaWVkIG1lc3NhZ2UgZnJvbSBcIiArXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubWVzc2FnZVBhcnNlZC5tZXRhLmFjY291bnQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUudmVyaWZpZWQpIHtcbiAgICAgICAgICAgICAgICBib3JkZXJDb2xvciA9IFwiI0ZGRlwiO1xuICAgICAgICAgICAgICAgIGxlZ2VuZE1lc3NhZ2UgPVxuICAgICAgICAgICAgICAgICAgICBcIlZlcmlmaWVkIG1lc3NhZ2UgZnJvbSBcIiArXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubWVzc2FnZVBhcnNlZC5tZXRhLmFjY291bnQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yID0gXCIjRjAwXCI7XG4gICAgICAgICAgICAgICAgbGVnZW5kTWVzc2FnZSA9XG4gICAgICAgICAgICAgICAgICAgIFwiUmVmdXRlZCBtZXNzYWdlLCBpbmRpY2F0ZWQgc2VuZGVyIFwiICtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5tZXNzYWdlUGFyc2VkLm1ldGEuYWNjb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgbWVzc2FnZUdpdmVuID1cbiAgICAgICAgICAgIHRoaXMucHJvcHMubWVzc2FnZSAhPSBudWxsICYmIHRoaXMucHJvcHMubWVzc2FnZSAhPSBcIlwiO1xuICAgICAgICBsZXQgbm90aWZpY2F0aW9uR2l2ZW4gPVxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5ub3RpZmljYXRpb24gJiYgdGhpcy5zdGF0ZS5ub3RpZmljYXRpb24gIT0gXCJcIjtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tjb2xvcjogXCJncmF5XCIsIG1hcmdpbjogXCIxMHB4IDEwcHhcIn19PlxuICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLm1lc3NhZ2VQYXJzZWQgIT0gbnVsbCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxmaWVsZHNldCBzdHlsZT17e2JvcmRlckNvbG9yOiBib3JkZXJDb2xvcn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxlZ2VuZCBzdHlsZT17e2NvbG9yOiBcIndoaXRlXCIsIHdlaWdodDogXCJib2xkXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGVnZW5kTWVzc2FnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGVnZW5kPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHByZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJ0YWJsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5tZXNzYWdlUGFyc2VkLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge25vdGlmaWNhdGlvbkdpdmVuICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJ0YWJsZS1jZWxsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogXCJtaWRkbGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcImNhbGMoMTAwJSAtIDMwcHgpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBcImNhbGMoMTAwJSArIDE1cHgpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBcIjBweFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBcIjMwcHhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSg1MCw1MCw1MCwwLjUpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cIm92ZXJsYXlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5ub3RpZmljYXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IFwic21hbGxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IFwicmlnaHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2lnbmVkIG9uIHt0aGlzLnN0YXRlLm1lc3NhZ2VQYXJzZWQubWV0YS50aW1lc3RhbXB9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogXCJzbWFsbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IFwicmlnaHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IFwiMHB4IDBweFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjNzc3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fdG9nZ2xlUmF3TWVzc2FnZS5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiN4MWY1MGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5zaG93UmF3TWVzc2FnZSAmJiA8YnIgLz59XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5zaG93UmF3TWVzc2FnZSAmJiA8YnIgLz59XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5zaG93UmF3TWVzc2FnZSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiY2FsYygxMDAlKVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6IFwiMTAwMHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwcmU+e3RoaXMuc3RhdGUubWVzc2FnZX08L3ByZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICB7bWVzc2FnZUdpdmVuICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubWVzc2FnZVBhcnNlZCA9PSBudWxsICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxmaWVsZHNldCBzdHlsZT17e2JvcmRlckNvbG9yOiBcIiNGMDBcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsZWdlbmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tjb2xvcjogXCJyZWRcIiwgd2VpZ2h0OiBcImJvbGRcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImVycm9yXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVycm9yIHdoaWxlIHBhcnNpbmcgbWVzc2FnZSwgcGxlYXNlIGNoZWNrIHN5bnRheFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tIG1lc3NhZ2UgYmVsb3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xlZ2VuZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cHJlPnt0aGlzLnByb3BzLm1lc3NhZ2V9PC9wcmU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2ZpZWxkc2V0PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTaWduZWRNZXNzYWdlO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtUYWJzLCBUYWJ9IGZyb20gXCIuLi9VdGlsaXR5L1RhYnNcIjtcbmltcG9ydCBjb25zdGFudHMgZnJvbSBcImNoYWluL2FjY291bnRfY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuLi9BY2NvdW50L0FjY291bnRTZWxlY3RvclwiO1xuaW1wb3J0IEltbXV0YWJsZSBmcm9tIFwiaW1tdXRhYmxlXCI7XG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XG5pbXBvcnQgTGlua1RvQWNjb3VudEJ5SWQgZnJvbSBcIi4uL1V0aWxpdHkvTGlua1RvQWNjb3VudEJ5SWRcIjtcbmltcG9ydCBXYWxsZXRBcGkgZnJvbSBcImFwaS9XYWxsZXRBcGlcIjtcbmltcG9ydCBXYWxsZXREYiBmcm9tIFwic3RvcmVzL1dhbGxldERiLmpzXCI7XG5cbmNsYXNzIEFjY291bnRSb3cgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGFjY291bnQ6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50LmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgdGVtcENvbXBvbmVudDogXCJ0clwiXG4gICAgfTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHthY2NvdW50LCBvblJlbW92ZX0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgPHRkPnt0aGlzLnByb3BzLmluZGV4fTwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPnthY2NvdW50LmdldChcImlkXCIpfTwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICA8TGlua1RvQWNjb3VudEJ5SWQgYWNjb3VudD17YWNjb3VudC5nZXQoXCJpZFwiKX0gLz5cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIHtvblJlbW92ZSA/IChcbiAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uUmVtb3ZlLmJpbmQodGhpcywgYWNjb3VudC5nZXQoXCJpZFwiKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uIG91dGxpbmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbW92ZVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8L3RyPlxuICAgICAgICApO1xuICAgIH1cbn1cbkFjY291bnRSb3cgPSBCaW5kVG9DaGFpblN0YXRlKEFjY291bnRSb3cpO1xuXG5jbGFzcyBBY2NvdW50TGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgX29uUmVtb3ZlKGxpc3RpbmcsIGFjY291bnQsIGUpIHtcbiAgICAgICAgaWYgKGFjY291bnQpIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50U3RhdGUgPSB0aGlzLnByb3BzLmdldEN1cnJlbnRTdGF0ZShhY2NvdW50KTtcbiAgICAgICAgICAgIGxldCB0ciA9IFdhbGxldEFwaS5uZXdfdHJhbnNhY3Rpb24oKTtcbiAgICAgICAgICAgIHRyLmFkZF90eXBlX29wZXJhdGlvbihcImFjY291bnRfd2hpdGVsaXN0XCIsIHtcbiAgICAgICAgICAgICAgICBmZWU6IHtcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAwLFxuICAgICAgICAgICAgICAgICAgICBhc3NldF9pZDogXCIxLjMuMFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhdXRob3JpemluZ19hY2NvdW50OiB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIiksXG4gICAgICAgICAgICAgICAgYWNjb3VudF90b19saXN0OiBhY2NvdW50LFxuICAgICAgICAgICAgICAgIG5ld19saXN0aW5nOiBjdXJyZW50U3RhdGUgLSBjb25zdGFudHMuYWNjb3VudF9saXN0aW5nW2xpc3RpbmddXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFdhbGxldERiLnByb2Nlc3NfdHJhbnNhY3Rpb24odHIsIG51bGwsIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge3JlbW92ZUJ1dHRvbiwgd2hpdGUsIGxpc3R9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICBsZXQgcm93cyA9IGxpc3RcbiAgICAgICAgICAgIC5tYXAoKGFjY291bnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPEFjY291bnRSb3dcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YWNjb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9vblJlbW92ZS5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZSA/IFwid2hpdGVfbGlzdGVkXCIgOiBcImJsYWNrX2xpc3RlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleD17aW5kZXggKyAxfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRvQXJyYXkoKTtcblxuICAgICAgICBsZXQgc2hvd0hlYWRlcnMgPSB0cnVlO1xuICAgICAgICBpZiAoIXJvd3MubGVuZ3RoKSB7XG4gICAgICAgICAgICBzaG93SGVhZGVycyA9IGZhbHNlO1xuICAgICAgICAgICAgcm93cy5wdXNoKFxuICAgICAgICAgICAgICAgIDx0ciBrZXk9XCJlbXB0eVwiPlxuICAgICAgICAgICAgICAgICAgICA8dGRcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZzogXCIxcmVtIDBcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xTcGFuPXtyZW1vdmVCdXR0b24gPyA0IDogM31cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e3RoaXMucHJvcHMuZW1wdHlUZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUgY29tcGFjdCBkYXNoYm9hcmQtdGFibGVcIj5cbiAgICAgICAgICAgICAgICB7c2hvd0hlYWRlcnMgPyAoXG4gICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+IzwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LmlkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5uYW1lXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW1vdmVCdXR0b24gPyA8dGggLz4gOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICA8dGJvZHk+e3Jvd3N9PC90Ym9keT5cbiAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5jbGFzcyBBY2NvdW50V2hpdGVsaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgYWNjb3VudE5hbWU6IFwiXCIsXG4gICAgICAgICAgICBhY2NvdW50VG9MaXN0OiBudWxsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX2dldEN1cnJlbnRTdGF0ZShpZCkge1xuICAgICAgICBsZXQge2FjY291bnR9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgbGV0IHdoaXRlID0gYWNjb3VudC5nZXQoXCJ3aGl0ZWxpc3RlZF9hY2NvdW50c1wiKSB8fCBJbW11dGFibGUuTGlzdCgpO1xuICAgICAgICBsZXQgYmxhY2sgPSBhY2NvdW50LmdldChcImJsYWNrbGlzdGVkX2FjY291bnRzXCIpIHx8IEltbXV0YWJsZS5MaXN0KCk7XG4gICAgICAgIGxldCBjdXJyZW50ID0gY29uc3RhbnRzLmFjY291bnRfbGlzdGluZy5ub19saXN0aW5nO1xuXG4gICAgICAgIGlmICh3aGl0ZS5pbmNsdWRlcyhpZCkpIHtcbiAgICAgICAgICAgIGN1cnJlbnQgKz0gY29uc3RhbnRzLmFjY291bnRfbGlzdGluZy53aGl0ZV9saXN0ZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYmxhY2suaW5jbHVkZXMoaWQpKSB7XG4gICAgICAgICAgICBjdXJyZW50ICs9IGNvbnN0YW50cy5hY2NvdW50X2xpc3RpbmcuYmxhY2tfbGlzdGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgfVxuXG4gICAgX29uQWRkKGxpc3RpbmcsIGUpIHtcbiAgICAgICAgbGV0IHthY2NvdW50VG9MaXN0fSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGxldCB7YWNjb3VudH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIGxldCBjdXJyZW50U3RhdGUgPSB0aGlzLl9nZXRDdXJyZW50U3RhdGUoYWNjb3VudFRvTGlzdCk7XG5cbiAgICAgICAgaWYgKGFjY291bnRUb0xpc3QpIHtcbiAgICAgICAgICAgIGxldCB0ciA9IFdhbGxldEFwaS5uZXdfdHJhbnNhY3Rpb24oKTtcbiAgICAgICAgICAgIHRyLmFkZF90eXBlX29wZXJhdGlvbihcImFjY291bnRfd2hpdGVsaXN0XCIsIHtcbiAgICAgICAgICAgICAgICBmZWU6IHtcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAwLFxuICAgICAgICAgICAgICAgICAgICBhc3NldF9pZDogXCIxLjMuMFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhdXRob3JpemluZ19hY2NvdW50OiBhY2NvdW50LmdldChcImlkXCIpLFxuICAgICAgICAgICAgICAgIGFjY291bnRfdG9fbGlzdDogYWNjb3VudFRvTGlzdCxcbiAgICAgICAgICAgICAgICBuZXdfbGlzdGluZzogY3VycmVudFN0YXRlICsgY29uc3RhbnRzLmFjY291bnRfbGlzdGluZ1tsaXN0aW5nXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBXYWxsZXREYi5wcm9jZXNzX3RyYW5zYWN0aW9uKHRyLCBudWxsLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9vbkFjY291bnRGb3VuZChhY2NvdW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiYWNjb3VudEZvdW5kOlwiLCBhY2NvdW50KTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBhY2NvdW50TmFtZTogYWNjb3VudCA/IGFjY291bnQuZ2V0KFwibmFtZVwiKSA6IG51bGwsXG4gICAgICAgICAgICBhY2NvdW50VG9MaXN0OiBhY2NvdW50ID8gYWNjb3VudC5nZXQoXCJpZFwiKSA6IG51bGxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX29uQWNjb3VudENoYW5nZWQoYWNjb3VudCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImFjY291bnQgY2hhbmdlZDpcIiwgYWNjb3VudCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgYWNjb3VudE5hbWU6IGFjY291bnQsXG4gICAgICAgICAgICBhY2NvdW50VG9MaXN0OiBudWxsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHthY2NvdW50fSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB7YWNjb3VudE5hbWV9ID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgYXBwLXRhYmxlcyBuby1wYWRkaW5nXCIgcmVmPVwiYXBwVGFibGVzXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1jb250YWluZXIgZ2VuZXJpYy1ib3JkZXJlZC1ib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWNjb3VudC10YWJzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2xhc3M9XCJhY2NvdW50LW92ZXJ2aWV3IG5vLXBhZGRpbmcgYm9yZGVyZWQtaGVhZGVyIGNvbnRlbnQtYmxvY2tcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmc9XCJ3aGl0ZWxpc3RUYWJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cImdyaWQtY29udGVudCBzaHJpbmsgc21hbGwtdmVydGljYWwgbWVkaXVtLWhvcml6b250YWwgbm8tcGFkZGluZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudGVkPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC53aGl0ZWxpc3QudGl0bGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiBcIjFyZW1cIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzbWFsbC0xMlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRMaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5VGV4dD1cImFjY291bnQud2hpdGVsaXN0LmVtcHR5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Q3VycmVudFN0YXRlPXt0aGlzLl9nZXRDdXJyZW50U3RhdGUuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmdldChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndoaXRlbGlzdGVkX2FjY291bnRzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgfHwgSW1tdXRhYmxlLkxpc3QoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZT17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IWFjY291bnQuZ2V0KFwid2hpdGVsaXN0ZWRfYWNjb3VudHNcIikgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiaGFzLWVycm9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBsZWFzZSBub3RlLCB3aGl0ZWxpc3RpbmcgaXMgbm90XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtpbmcgeWV0IGR1ZSB0byB1bnJlc29sdmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQgaXNzdWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZzogXCIycmVtIDBcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e1wiYWNjb3VudC53aGl0ZWxpc3QuYWRkXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lPXthY2NvdW50TmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5fb25BY2NvdW50Rm91bmQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uQWNjb3VudENoYW5nZWQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudE5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjdGlvbj17dGhpcy5fb25BZGQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndoaXRlX2xpc3RlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbl9sYWJlbD1cImFjY291bnQucGVybS5jb25maXJtX2FkZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZWFoZWFkPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC53aGl0ZWxpc3QuYmxhY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiBcIjFyZW1cIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzbWFsbC0xMlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRMaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5VGV4dD1cImFjY291bnQud2hpdGVsaXN0LmVtcHR5X2JsYWNrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Q3VycmVudFN0YXRlPXt0aGlzLl9nZXRDdXJyZW50U3RhdGUuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdD17YWNjb3VudC5nZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJsYWNrbGlzdGVkX2FjY291bnRzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e3BhZGRpbmc6IFwiMnJlbSAxcmVtXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC53aGl0ZWxpc3QuYWRkX2JsYWNrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZT17YWNjb3VudE5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjb3VudENoYW5nZWQ9e3RoaXMuX29uQWNjb3VudEZvdW5kLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbkFjY291bnRDaGFuZ2VkLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnROYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17Mn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY3Rpb249e3RoaXMuX29uQWRkLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJibGFja19saXN0ZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25fbGFiZWw9XCJhY2NvdW50LnBlcm0uY29uZmlybV9hZGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlYWhlYWQ9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LndoaXRlbGlzdC53aGl0ZV9ieVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206IFwiMXJlbVwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNtYWxsLTEyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudExpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlUZXh0PVwiYWNjb3VudC53aGl0ZWxpc3QuZW1wdHlfd2hpdGVfYnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0PXthY2NvdW50LmdldChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2hpdGVsaXN0aW5nX2FjY291bnRzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQud2hpdGVsaXN0LmJsYWNrX2J5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIxcmVtXCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic21hbGwtMTJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50TGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eVRleHQ9XCJhY2NvdW50LndoaXRlbGlzdC5lbXB0eV9ibGFja19ieVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q9e2FjY291bnQuZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJibGFja2xpc3RpbmdfYWNjb3VudHNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBY2NvdW50V2hpdGVsaXN0O1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IEltbXV0YWJsZSBmcm9tIFwiaW1tdXRhYmxlXCI7XG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XG5pbXBvcnQgYWNjb3VudFV0aWxzIGZyb20gXCJjb21tb24vYWNjb3VudF91dGlsc1wiO1xuaW1wb3J0IHtDaGFpblN0b3JlLCBGZXRjaENoYWluT2JqZWN0c30gZnJvbSBcImJpdHNoYXJlc2pzXCI7XG5pbXBvcnQgV29ya2VyQXBwcm92YWwgZnJvbSBcIi4vV29ya2VyQXBwcm92YWxcIjtcbmltcG9ydCBWb3RpbmdBY2NvdW50c0xpc3QgZnJvbSBcIi4vVm90aW5nQWNjb3VudHNMaXN0XCI7XG5pbXBvcnQgY25hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xuaW1wb3J0IHtMaW5rfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuaW1wb3J0IEFwcGxpY2F0aW9uQXBpIGZyb20gXCJhcGkvQXBwbGljYXRpb25BcGlcIjtcbmltcG9ydCBBY2NvdW50U2VsZWN0b3IgZnJvbSBcIi4vQWNjb3VudFNlbGVjdG9yXCI7XG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XG5pbXBvcnQgQXNzZXROYW1lIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0TmFtZVwiO1xuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xuaW1wb3J0IHtFcXVpdmFsZW50VmFsdWVDb21wb25lbnR9IGZyb20gXCIuLi9VdGlsaXR5L0VxdWl2YWxlbnRWYWx1ZUNvbXBvbmVudFwiO1xuaW1wb3J0IEZvcm1hdHRlZEFzc2V0IGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZEFzc2V0XCI7XG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tIFwic3RvcmVzL1NldHRpbmdzU3RvcmVcIjtcblxuY2xhc3MgQWNjb3VudFZvdGluZyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgaW5pdGlhbEJ1ZGdldDogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkLFxuICAgICAgICBnbG9iYWxPYmplY3Q6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZCxcbiAgICAgICAgcHJveHk6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50LmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBcIjIuMC4wXCJcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICBjb25zdCBwcm94eUlkID0gcHJvcHMucHJveHkuZ2V0KFwiaWRcIik7XG4gICAgICAgIGNvbnN0IHByb3h5TmFtZSA9IHByb3BzLnByb3h5LmdldChcIm5hbWVcIik7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBwcm94eV9hY2NvdW50X2lkOiBwcm94eUlkID09PSBcIjEuMi41XCIgPyBcIlwiIDogcHJveHlJZCwgLy9cIjEuMi4xNlwiLFxuICAgICAgICAgICAgcHJldl9wcm94eV9hY2NvdW50X2lkOiBwcm94eUlkID09PSBcIjEuMi41XCIgPyBcIlwiIDogcHJveHlJZCxcbiAgICAgICAgICAgIGN1cnJlbnRfcHJveHlfaW5wdXQ6IHByb3h5SWQgPT09IFwiMS4yLjVcIiA/IFwiXCIgOiBwcm94eU5hbWUsXG4gICAgICAgICAgICB3aXRuZXNzZXM6IG51bGwsXG4gICAgICAgICAgICBjb21taXR0ZWU6IG51bGwsXG4gICAgICAgICAgICB2b3RlX2lkczogSW1tdXRhYmxlLlNldCgpLFxuICAgICAgICAgICAgcHJveHlfdm90ZV9pZHM6IEltbXV0YWJsZS5TZXQoKSxcbiAgICAgICAgICAgIGxhc3RCdWRnZXRPYmplY3Q6IHByb3BzLmluaXRpYWxCdWRnZXQuZ2V0KFwiaWRcIiksXG4gICAgICAgICAgICB3b3JrZXJUYWJsZUluZGV4OiBwcm9wcy52aWV3U2V0dGluZ3MuZ2V0KFwid29ya2VyVGFibGVJbmRleFwiLCAxKSxcbiAgICAgICAgICAgIGFsbF93aXRuZXNzZXM6IEltbXV0YWJsZS5MaXN0KCksXG4gICAgICAgICAgICBhbGxfY29tbWl0dGVlOiBJbW11dGFibGUuTGlzdCgpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25Qcm94eUFjY291bnRGb3VuZCA9IHRoaXMub25Qcm94eUFjY291bnRGb3VuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uUHVibGlzaCA9IHRoaXMub25QdWJsaXNoLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25SZXNldCA9IHRoaXMub25SZXNldC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9nZXRWb3RlT2JqZWN0cyA9IHRoaXMuX2dldFZvdGVPYmplY3RzLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICBhY2NvdW50VXRpbHMuZ2V0RmluYWxGZWVBc3NldCh0aGlzLnByb3BzLmFjY291bnQsIFwiYWNjb3VudF91cGRhdGVcIik7XG4gICAgICAgIENoYWluU3RvcmUuZmV0Y2hBbGxXb3JrZXJzKCk7XG4gICAgICAgIHRoaXMuZ2V0QnVkZ2V0T2JqZWN0KCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlQWNjb3VudERhdGEodGhpcy5wcm9wcyk7XG4gICAgICAgIHRoaXMuX2dldFZvdGVPYmplY3RzKCk7XG4gICAgICAgIHRoaXMuX2dldFZvdGVPYmplY3RzKFwiY29tbWl0dGVlXCIpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobnApIHtcbiAgICAgICAgaWYgKG5wLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudCkge1xuICAgICAgICAgICAgY29uc3QgcHJveHlJZCA9IG5wLnByb3h5LmdldChcImlkXCIpO1xuICAgICAgICAgICAgbGV0IG5ld1N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWQ6IHByb3h5SWQgPT09IFwiMS4yLjVcIiA/IFwiXCIgOiBwcm94eUlkXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cHJldl9wcm94eV9hY2NvdW50X2lkOiBuZXdTdGF0ZS5wcm94eV9hY2NvdW50X2lkfSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFjY291bnREYXRhKG5wLCBuZXdTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nZXRCdWRnZXRPYmplY3QoKTtcbiAgICB9XG5cbiAgICB1cGRhdGVBY2NvdW50RGF0YSh7YWNjb3VudH0sIHN0YXRlID0gdGhpcy5zdGF0ZSkge1xuICAgICAgICBsZXQge3Byb3h5X2FjY291bnRfaWR9ID0gc3RhdGU7XG4gICAgICAgIGNvbnN0IHByb3h5ID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KHByb3h5X2FjY291bnRfaWQpO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IGFjY291bnQuZ2V0KFwib3B0aW9uc1wiKTtcbiAgICAgICAgbGV0IHByb3h5T3B0aW9ucyA9IHByb3h5ID8gcHJveHkuZ2V0KFwib3B0aW9uc1wiKSA6IG51bGw7XG4gICAgICAgIC8vIGxldCBwcm94eV9hY2NvdW50X2lkID0gcHJveHkgPyBwcm94eS5nZXQoXCJpZFwiKSA6IFwiMS4yLjVcIjtcbiAgICAgICAgbGV0IGN1cnJlbnRfcHJveHlfaW5wdXQgPSBwcm94eSA/IHByb3h5LmdldChcIm5hbWVcIikgOiBcIlwiO1xuICAgICAgICBpZiAocHJveHlfYWNjb3VudF9pZCA9PT0gXCIxLjIuNVwiKSB7XG4gICAgICAgICAgICBwcm94eV9hY2NvdW50X2lkID0gXCJcIjtcbiAgICAgICAgICAgIGN1cnJlbnRfcHJveHlfaW5wdXQgPSBcIlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHZvdGVzID0gb3B0aW9ucy5nZXQoXCJ2b3Rlc1wiKTtcbiAgICAgICAgbGV0IHZvdGVfaWRzID0gdm90ZXMudG9BcnJheSgpO1xuICAgICAgICBsZXQgdmlkcyA9IEltbXV0YWJsZS5TZXQodm90ZV9pZHMpO1xuICAgICAgICBDaGFpblN0b3JlLmdldE9iamVjdHNCeVZvdGVJZHModm90ZV9pZHMpO1xuXG4gICAgICAgIGxldCBwcm94eVByb21pc2UgPSBudWxsLFxuICAgICAgICAgICAgcHJveHlfdmlkcyA9IEltbXV0YWJsZS5TZXQoW10pO1xuICAgICAgICBjb25zdCBoYXNQcm94eSA9IHByb3h5X2FjY291bnRfaWQgIT09IFwiMS4yLjVcIjtcbiAgICAgICAgaWYgKGhhc1Byb3h5ICYmIHByb3h5T3B0aW9ucykge1xuICAgICAgICAgICAgbGV0IHByb3h5X3ZvdGVzID0gcHJveHlPcHRpb25zLmdldChcInZvdGVzXCIpO1xuICAgICAgICAgICAgbGV0IHByb3h5X3ZvdGVfaWRzID0gcHJveHlfdm90ZXMudG9BcnJheSgpO1xuICAgICAgICAgICAgcHJveHlfdmlkcyA9IEltbXV0YWJsZS5TZXQocHJveHlfdm90ZV9pZHMpO1xuICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRPYmplY3RzQnlWb3RlSWRzKHByb3h5X3ZvdGVfaWRzKTtcblxuICAgICAgICAgICAgcHJveHlQcm9taXNlID0gRmV0Y2hDaGFpbk9iamVjdHMoXG4gICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRPYmplY3RCeVZvdGVJRCxcbiAgICAgICAgICAgICAgICBwcm94eV92b3RlX2lkcyxcbiAgICAgICAgICAgICAgICAxMDAwMFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIEZldGNoQ2hhaW5PYmplY3RzKENoYWluU3RvcmUuZ2V0T2JqZWN0QnlWb3RlSUQsIHZvdGVfaWRzLCAxMDAwMCksXG4gICAgICAgICAgICBwcm94eVByb21pc2VcbiAgICAgICAgXSkudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgY29uc3QgW3ZvdGVfb2JqcywgcHJveHlfdm90ZV9vYmpzXSA9IHJlcztcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNvcnRWb3RlT2JqZWN0cyhvYmplY3RzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHdpdG5lc3NlcyA9IG5ldyBJbW11dGFibGUuTGlzdCgpO1xuICAgICAgICAgICAgICAgIGxldCBjb21taXR0ZWUgPSBuZXcgSW1tdXRhYmxlLkxpc3QoKTtcbiAgICAgICAgICAgICAgICBsZXQgd29ya2VycyA9IG5ldyBJbW11dGFibGUuU2V0KCk7XG4gICAgICAgICAgICAgICAgb2JqZWN0cy5mb3JFYWNoKG9iaiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhY2NvdW50X2lkID0gb2JqLmdldChcImNvbW1pdHRlZV9tZW1iZXJfYWNjb3VudFwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjY291bnRfaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdHRlZSA9IGNvbW1pdHRlZS5wdXNoKGFjY291bnRfaWQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChhY2NvdW50X2lkID0gb2JqLmdldChcIndvcmtlcl9hY2NvdW50XCIpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIFwid29ya2VyOiBcIiwgb2JqICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgd29ya2VycyA9IHdvcmtlcnMuYWRkKG9iai5nZXQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKGFjY291bnRfaWQgPSBvYmouZ2V0KFwid2l0bmVzc19hY2NvdW50XCIpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2l0bmVzc2VzID0gd2l0bmVzc2VzLnB1c2goYWNjb3VudF9pZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7d2l0bmVzc2VzLCBjb21taXR0ZWUsIHdvcmtlcnN9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQge3dpdG5lc3NlcywgY29tbWl0dGVlLCB3b3JrZXJzfSA9IHNvcnRWb3RlT2JqZWN0cyh2b3RlX29ianMpO1xuICAgICAgICAgICAgbGV0IHtcbiAgICAgICAgICAgICAgICB3aXRuZXNzZXM6IHByb3h5X3dpdG5lc3NlcyxcbiAgICAgICAgICAgICAgICBjb21taXR0ZWU6IHByb3h5X2NvbW1pdHRlZSxcbiAgICAgICAgICAgICAgICB3b3JrZXJzOiBwcm94eV93b3JrZXJzXG4gICAgICAgICAgICB9ID0gc29ydFZvdGVPYmplY3RzKHByb3h5X3ZvdGVfb2JqcyB8fCBbXSk7XG4gICAgICAgICAgICBsZXQgc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgcHJveHlfYWNjb3VudF9pZCxcbiAgICAgICAgICAgICAgICBjdXJyZW50X3Byb3h5X2lucHV0LFxuICAgICAgICAgICAgICAgIHdpdG5lc3Nlczogd2l0bmVzc2VzLFxuICAgICAgICAgICAgICAgIGNvbW1pdHRlZTogY29tbWl0dGVlLFxuICAgICAgICAgICAgICAgIHdvcmtlcnM6IHdvcmtlcnMsXG4gICAgICAgICAgICAgICAgcHJveHlfd2l0bmVzc2VzOiBwcm94eV93aXRuZXNzZXMsXG4gICAgICAgICAgICAgICAgcHJveHlfY29tbWl0dGVlOiBwcm94eV9jb21taXR0ZWUsXG4gICAgICAgICAgICAgICAgcHJveHlfd29ya2VyczogcHJveHlfd29ya2VycyxcbiAgICAgICAgICAgICAgICB2b3RlX2lkczogdmlkcyxcbiAgICAgICAgICAgICAgICBwcm94eV92b3RlX2lkczogcHJveHlfdmlkcyxcbiAgICAgICAgICAgICAgICBwcmV2X3dpdG5lc3Nlczogd2l0bmVzc2VzLFxuICAgICAgICAgICAgICAgIHByZXZfY29tbWl0dGVlOiBjb21taXR0ZWUsXG4gICAgICAgICAgICAgICAgcHJldl93b3JrZXJzOiB3b3JrZXJzLFxuICAgICAgICAgICAgICAgIHByZXZfdm90ZV9pZHM6IHZpZHNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaXNDaGFuZ2VkKHMgPSB0aGlzLnN0YXRlKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBzLnByb3h5X2FjY291bnRfaWQgIT09IHMucHJldl9wcm94eV9hY2NvdW50X2lkIHx8XG4gICAgICAgICAgICBzLndpdG5lc3NlcyAhPT0gcy5wcmV2X3dpdG5lc3NlcyB8fFxuICAgICAgICAgICAgcy5jb21taXR0ZWUgIT09IHMucHJldl9jb21taXR0ZWUgfHxcbiAgICAgICAgICAgICFJbW11dGFibGUuaXMocy52b3RlX2lkcywgcy5wcmV2X3ZvdGVfaWRzKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9nZXRWb3RlT2JqZWN0cyh0eXBlID0gXCJ3aXRuZXNzZXNcIiwgdm90ZV9pZHMpIHtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnN0YXRlW2BhbGxfJHt0eXBlfWBdO1xuICAgICAgICBjb25zdCBpc1dpdG5lc3MgPSB0eXBlID09PSBcIndpdG5lc3Nlc1wiO1xuICAgICAgICBsZXQgbGFzdElkeDtcbiAgICAgICAgaWYgKCF2b3RlX2lkcykge1xuICAgICAgICAgICAgdm90ZV9pZHMgPSBbXTtcbiAgICAgICAgICAgIGxldCBhY3RpdmUgPSB0aGlzLnByb3BzLmdsb2JhbE9iamVjdFxuICAgICAgICAgICAgICAgIC5nZXQoXG4gICAgICAgICAgICAgICAgICAgIGlzV2l0bmVzcyA/IFwiYWN0aXZlX3dpdG5lc3Nlc1wiIDogXCJhY3RpdmVfY29tbWl0dGVlX21lbWJlcnNcIlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoYS5zcGxpdChcIi5cIilbMl0sIDEwKSAtXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChiLnNwbGl0KFwiLlwiKVsyXSwgMTApXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBsYXN0QWN0aXZlID0gYWN0aXZlLmxhc3QoKSB8fCBgMS4ke2lzV2l0bmVzcyA/IFwiNlwiIDogXCI1XCJ9LjFgO1xuICAgICAgICAgICAgbGFzdElkeCA9IHBhcnNlSW50KGxhc3RBY3RpdmUuc3BsaXQoXCIuXCIpWzJdLCAxMCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBsYXN0SWR4ICsgMTA7IGkrKykge1xuICAgICAgICAgICAgICAgIHZvdGVfaWRzLnB1c2goYDEuJHtpc1dpdG5lc3MgPyBcIjZcIiA6IFwiNVwifS4ke2l9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsYXN0SWR4ID0gcGFyc2VJbnQodm90ZV9pZHNbdm90ZV9pZHMubGVuZ3RoIC0gMV0uc3BsaXQoXCIuXCIpWzJdLCAxMCk7XG4gICAgICAgIH1cbiAgICAgICAgRmV0Y2hDaGFpbk9iamVjdHMoQ2hhaW5TdG9yZS5nZXRPYmplY3QsIHZvdGVfaWRzLCA1MDAwLCB7fSkudGhlbihcbiAgICAgICAgICAgIHZvdGVfb2JqcyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVtgYWxsXyR7dHlwZX1gXSA9IGN1cnJlbnQuY29uY2F0KFxuICAgICAgICAgICAgICAgICAgICBJbW11dGFibGUuTGlzdChcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVfb2Jqc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYSA9PiAhIWEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChhID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNXaXRuZXNzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIndpdG5lc3NfYWNjb3VudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImNvbW1pdHRlZV9tZW1iZXJfYWNjb3VudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmICghIXZvdGVfb2Jqc1t2b3RlX29ianMubGVuZ3RoIC0gMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgYXJlIG1vcmUgdmFsaWQgdm90ZSBvYmpzLCBmZXRjaCAxMCBtb3JlXG4gICAgICAgICAgICAgICAgICAgIHZvdGVfaWRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBsYXN0SWR4ICsgMTE7IGkgPD0gbGFzdElkeCArIDIwOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVfaWRzLnB1c2goYDEuJHtpc1dpdG5lc3MgPyBcIjZcIiA6IFwiNVwifS4ke2l9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFZvdGVPYmplY3RzKHR5cGUsIHZvdGVfaWRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIG9uUmVtb3ZlUHJveHkgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMucHVibGlzaChudWxsKTtcbiAgICB9O1xuXG4gICAgb25QdWJsaXNoKCkge1xuICAgICAgICB0aGlzLnB1Ymxpc2godGhpcy5zdGF0ZS5wcm94eV9hY2NvdW50X2lkKTtcbiAgICB9XG5cbiAgICBwdWJsaXNoKG5ld19wcm94eV9pZCkge1xuICAgICAgICBsZXQgdXBkYXRlZF9hY2NvdW50ID0gdGhpcy5wcm9wcy5hY2NvdW50LnRvSlMoKTtcbiAgICAgICAgbGV0IHVwZGF0ZU9iamVjdCA9IHthY2NvdW50OiB1cGRhdGVkX2FjY291bnQuaWR9O1xuICAgICAgICBsZXQgbmV3X29wdGlvbnMgPSB7bWVtb19rZXk6IHVwZGF0ZWRfYWNjb3VudC5vcHRpb25zLm1lbW9fa2V5fTtcbiAgICAgICAgLy8gdXBkYXRlZF9hY2NvdW50Lm5ld19vcHRpb25zID0gdXBkYXRlZF9hY2NvdW50Lm9wdGlvbnM7XG4gICAgICAgIG5ld19vcHRpb25zLnZvdGluZ19hY2NvdW50ID0gbmV3X3Byb3h5X2lkID8gbmV3X3Byb3h5X2lkIDogXCIxLjIuNVwiO1xuICAgICAgICBuZXdfb3B0aW9ucy5udW1fd2l0bmVzcyA9IHRoaXMuc3RhdGUud2l0bmVzc2VzLnNpemU7XG4gICAgICAgIG5ld19vcHRpb25zLm51bV9jb21taXR0ZWUgPSB0aGlzLnN0YXRlLmNvbW1pdHRlZS5zaXplO1xuXG4gICAgICAgIHVwZGF0ZU9iamVjdC5uZXdfb3B0aW9ucyA9IG5ld19vcHRpb25zO1xuICAgICAgICAvLyBTZXQgZmVlIGFzc2V0XG4gICAgICAgIHVwZGF0ZU9iamVjdC5mZWUgPSB7XG4gICAgICAgICAgICBhbW91bnQ6IDAsXG4gICAgICAgICAgICBhc3NldF9pZDogYWNjb3VudFV0aWxzLmdldEZpbmFsRmVlQXNzZXQoXG4gICAgICAgICAgICAgICAgdXBkYXRlZF9hY2NvdW50LmlkLFxuICAgICAgICAgICAgICAgIFwiYWNjb3VudF91cGRhdGVcIlxuICAgICAgICAgICAgKVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFJlbW92ZSB2b3RlcyBmb3IgZXhwaXJlZCB3b3JrZXJzXG4gICAgICAgIGxldCB7dm90ZV9pZHN9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgbGV0IHdvcmtlcnMgPSB0aGlzLl9nZXRXb3JrZXJBcnJheSgpO1xuICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiByZW1vdmVWb3RlKGxpc3QsIHZvdGUpIHtcbiAgICAgICAgICAgIGlmIChsaXN0LmluY2x1ZGVzKHZvdGUpKSB7XG4gICAgICAgICAgICAgICAgbGlzdCA9IGxpc3QuZGVsZXRlKHZvdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgICAgIH1cblxuICAgICAgICB3b3JrZXJzLmZvckVhY2god29ya2VyID0+IHtcbiAgICAgICAgICAgIGlmICh3b3JrZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV3IERhdGUod29ya2VyLmdldChcIndvcmtfZW5kX2RhdGVcIikpIDw9IG5vdykge1xuICAgICAgICAgICAgICAgICAgICB2b3RlX2lkcyA9IHJlbW92ZVZvdGUodm90ZV9pZHMsIHdvcmtlci5nZXQoXCJ2b3RlX2ZvclwiKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gVEVNUCBSZW1vdmUgdm90ZV9hZ2FpbnN0IHNpbmNlIHRoZXkncmUgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgICAgICAgICB2b3RlX2lkcyA9IHJlbW92ZVZvdGUodm90ZV9pZHMsIHdvcmtlci5nZXQoXCJ2b3RlX2FnYWluc3RcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdWJtaXQgdm90ZXNcbiAgICAgICAgRmV0Y2hDaGFpbk9iamVjdHMoXG4gICAgICAgICAgICBDaGFpblN0b3JlLmdldFdpdG5lc3NCeUlkLFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS53aXRuZXNzZXMudG9BcnJheSgpLFxuICAgICAgICAgICAgNDAwMFxuICAgICAgICApXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB3aXRuZXNzZXNfdm90ZV9pZHMgPSByZXMubWFwKG8gPT4gby5nZXQoXCJ2b3RlX2lkXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICBQcm9taXNlLnJlc29sdmUod2l0bmVzc2VzX3ZvdGVfaWRzKSxcbiAgICAgICAgICAgICAgICAgICAgRmV0Y2hDaGFpbk9iamVjdHMoXG4gICAgICAgICAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldENvbW1pdHRlZU1lbWJlckJ5SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNvbW1pdHRlZS50b0FycmF5KCksXG4gICAgICAgICAgICAgICAgICAgICAgICA0MDAwXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIHVwZGF0ZU9iamVjdC5uZXdfb3B0aW9ucy52b3RlcyA9IHJlc1swXVxuICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHJlc1sxXS5tYXAobyA9PiBvLmdldChcInZvdGVfaWRcIikpKVxuICAgICAgICAgICAgICAgICAgICAuY29uY2F0KFxuICAgICAgICAgICAgICAgICAgICAgICAgdm90ZV9pZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGlkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkLnNwbGl0KFwiOlwiKVswXSA9PT0gXCIyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9BcnJheSgpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhX3NwbGl0ID0gYS5zcGxpdChcIjpcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYl9zcGxpdCA9IGIuc3BsaXQoXCI6XCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGFfc3BsaXRbMV0sIDEwKSAtIHBhcnNlSW50KGJfc3BsaXRbMV0sIDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgQXBwbGljYXRpb25BcGkudXBkYXRlQWNjb3VudCh1cGRhdGVPYmplY3QpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25SZXNldCgpIHtcbiAgICAgICAgbGV0IHMgPSB0aGlzLnN0YXRlO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnJlZnMudm90aW5nX3Byb3h5ICYmXG4gICAgICAgICAgICB0aGlzLnJlZnMudm90aW5nX3Byb3h5LnJlZnMuYm91bmRfY29tcG9uZW50XG4gICAgICAgIClcbiAgICAgICAgICAgIHRoaXMucmVmcy52b3RpbmdfcHJveHkucmVmcy5ib3VuZF9jb21wb25lbnQub25SZXNldFByb3h5KCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJveHlfYWNjb3VudF9pZDogcy5wcmV2X3Byb3h5X2FjY291bnRfaWQsXG4gICAgICAgICAgICAgICAgY3VycmVudF9wcm94eV9pbnB1dDogcy5wcmV2X3Byb3h5X2lucHV0LFxuICAgICAgICAgICAgICAgIHdpdG5lc3Nlczogcy5wcmV2X3dpdG5lc3NlcyxcbiAgICAgICAgICAgICAgICBjb21taXR0ZWU6IHMucHJldl9jb21taXR0ZWUsXG4gICAgICAgICAgICAgICAgd29ya2Vyczogcy5wcmV2X3dvcmtlcnMsXG4gICAgICAgICAgICAgICAgdm90ZV9pZHM6IHMucHJldl92b3RlX2lkc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFjY291bnREYXRhKHRoaXMucHJvcHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIG9uQWRkSXRlbShjb2xsZWN0aW9uLCBpdGVtX2lkKSB7XG4gICAgICAgIGxldCBzdGF0ZSA9IHt9O1xuICAgICAgICBzdGF0ZVtjb2xsZWN0aW9uXSA9IHRoaXMuc3RhdGVbY29sbGVjdGlvbl0ucHVzaChpdGVtX2lkKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgfVxuXG4gICAgb25SZW1vdmVJdGVtKGNvbGxlY3Rpb24sIGl0ZW1faWQpIHtcbiAgICAgICAgbGV0IHN0YXRlID0ge307XG4gICAgICAgIHN0YXRlW2NvbGxlY3Rpb25dID0gdGhpcy5zdGF0ZVtjb2xsZWN0aW9uXS5maWx0ZXIoaSA9PiBpICE9PSBpdGVtX2lkKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgfVxuXG4gICAgb25DaGFuZ2VWb3RlcyhhZGRWb3RlcywgcmVtb3ZlVm90ZXMpIHtcbiAgICAgICAgbGV0IHN0YXRlID0ge307XG4gICAgICAgIHN0YXRlLnZvdGVfaWRzID0gdGhpcy5zdGF0ZS52b3RlX2lkcztcbiAgICAgICAgaWYgKGFkZFZvdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkVm90ZXMuZm9yRWFjaCh2b3RlID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZS52b3RlX2lkcyA9IHN0YXRlLnZvdGVfaWRzLmFkZCh2b3RlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZW1vdmVWb3Rlcykge1xuICAgICAgICAgICAgcmVtb3ZlVm90ZXMuZm9yRWFjaCh2b3RlID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZS52b3RlX2lkcyA9IHN0YXRlLnZvdGVfaWRzLmRlbGV0ZSh2b3RlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgfVxuXG4gICAgdmFsaWRhdGVBY2NvdW50KGNvbGxlY3Rpb24sIGFjY291bnQpIHtcbiAgICAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKGNvbGxlY3Rpb24gPT09IFwid2l0bmVzc2VzXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBGZXRjaENoYWluT2JqZWN0cyhcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldFdpdG5lc3NCeUlkLFxuICAgICAgICAgICAgICAgIFthY2NvdW50LmdldChcImlkXCIpXSxcbiAgICAgICAgICAgICAgICAzMDAwXG4gICAgICAgICAgICApLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzWzBdID8gbnVsbCA6IFwiTm90IGEgd2l0bmVzc1wiO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbGxlY3Rpb24gPT09IFwiY29tbWl0dGVlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBGZXRjaENoYWluT2JqZWN0cyhcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldENvbW1pdHRlZU1lbWJlckJ5SWQsXG4gICAgICAgICAgICAgICAgW2FjY291bnQuZ2V0KFwiaWRcIildLFxuICAgICAgICAgICAgICAgIDMwMDBcbiAgICAgICAgICAgICkudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNbMF0gPyBudWxsIDogXCJOb3QgYSBjb21taXR0ZWUgbWVtYmVyXCI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBvblByb3h5Q2hhbmdlKGN1cnJlbnRfcHJveHlfaW5wdXQpIHtcbiAgICAgICAgbGV0IHByb3h5QWNjb3VudCA9IENoYWluU3RvcmUuZ2V0QWNjb3VudChjdXJyZW50X3Byb3h5X2lucHV0KTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXByb3h5QWNjb3VudCB8fFxuICAgICAgICAgICAgKHByb3h5QWNjb3VudCAmJlxuICAgICAgICAgICAgICAgIHByb3h5QWNjb3VudC5nZXQoXCJpZFwiKSAhPT0gdGhpcy5zdGF0ZS5wcm94eV9hY2NvdW50X2lkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgcHJveHlfd2l0bmVzc2VzOiBJbW11dGFibGUuU2V0KCksXG4gICAgICAgICAgICAgICAgcHJveHlfY29tbWl0dGVlOiBJbW11dGFibGUuU2V0KCksXG4gICAgICAgICAgICAgICAgcHJveHlfd29ya2VyczogSW1tdXRhYmxlLlNldCgpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50X3Byb3h5X2lucHV0fSk7XG4gICAgfVxuXG4gICAgb25Qcm94eUFjY291bnRGb3VuZChwcm94eV9hY2NvdW50KSB7XG4gICAgICAgIGNvbnN0IHByb3h5X2FjY291bnRfaWQgPSBwcm94eV9hY2NvdW50ID8gcHJveHlfYWNjb3VudC5nZXQoXCJpZFwiKSA6IFwiXCI7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnByb3h5X2FjY291bnRfaWQgIT09IHByb3h5X2FjY291bnRfaWQpXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJveHlfYWNjb3VudF9pZFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFjY291bnREYXRhKHRoaXMucHJvcHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgb25DbGVhclByb3h5KCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWQ6IFwiXCJcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2dldFRvdGFsVm90ZXMod29ya2VyKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBwYXJzZUludCh3b3JrZXIuZ2V0KFwidG90YWxfdm90ZXNfZm9yXCIpLCAxMCkgLVxuICAgICAgICAgICAgcGFyc2VJbnQod29ya2VyLmdldChcInRvdGFsX3ZvdGVzX2FnYWluc3RcIiksIDEwKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGdldEJ1ZGdldE9iamVjdCgpIHtcbiAgICAgICAgbGV0IHtsYXN0QnVkZ2V0T2JqZWN0fSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGxldCBidWRnZXRPYmplY3Q7XG4gICAgICAgIGJ1ZGdldE9iamVjdCA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KGxhc3RCdWRnZXRPYmplY3QpO1xuICAgICAgICBsZXQgaWRJbmRleCA9IHBhcnNlSW50KGxhc3RCdWRnZXRPYmplY3Quc3BsaXQoXCIuXCIpWzJdLCAxMCk7XG4gICAgICAgIGlmIChidWRnZXRPYmplY3QpIHtcbiAgICAgICAgICAgIGxldCB0aW1lc3RhbXAgPSBidWRnZXRPYmplY3QuZ2V0KFwidGltZVwiKTtcbiAgICAgICAgICAgIGlmICghL1okLy50ZXN0KHRpbWVzdGFtcCkpIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXAgKz0gXCJaXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcblxuICAgICAgICAgICAgLyogVXNlIHRoZSBsYXN0IHZhbGlkIGJ1ZGdldCBvYmplY3QgdG8gZXN0aW1hdGUgdGhlIGN1cnJlbnQgYnVkZ2V0IG9iamVjdCBpZC5cbiAgICAgICAgICAgICoqIEJ1ZGdldCBvYmplY3RzIGFyZSBjcmVhdGVkIG9uY2UgcGVyIGhvdXJcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICBsZXQgY3VycmVudElEID1cbiAgICAgICAgICAgICAgICBpZEluZGV4ICtcbiAgICAgICAgICAgICAgICBNYXRoLmZsb29yKFxuICAgICAgICAgICAgICAgICAgICAobm93IC0gbmV3IERhdGUodGltZXN0YW1wKS5nZXRUaW1lKCkpIC8gMTAwMCAvIDYwIC8gNjBcbiAgICAgICAgICAgICAgICApIC1cbiAgICAgICAgICAgICAgICAxO1xuICAgICAgICAgICAgaWYgKGlkSW5kZXggPj0gY3VycmVudElEKSByZXR1cm47XG4gICAgICAgICAgICBsZXQgbmV3SUQgPSBcIjIuMTMuXCIgKyBNYXRoLm1heChpZEluZGV4LCBjdXJyZW50SUQpO1xuICAgICAgICAgICAgbGV0IG5ld0lESW50ID0gcGFyc2VJbnQobmV3SUQuc3BsaXQoXCIuXCIpWzJdLCAxMCk7XG4gICAgICAgICAgICBGZXRjaENoYWluT2JqZWN0cyhcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldE9iamVjdCxcbiAgICAgICAgICAgICAgICBbbmV3SURdLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB7fVxuICAgICAgICAgICAgKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IFtsYm9dID0gcmVzO1xuICAgICAgICAgICAgICAgIGlmIChsYm8gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG9iamVjdCBkb2VzIG5vdCBleGlzdCwgdGhlIGlkIHdhcyB0b28gaGlnaFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAge2xhc3RCdWRnZXRPYmplY3Q6IGAyLjEzLiR7bmV3SURJbnQgLSAxfWB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRCdWRnZXRPYmplY3RcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc1N0b3JlLnNldExhc3RCdWRnZXRPYmplY3QobmV3SUQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2xhc3RCdWRnZXRPYmplY3Q6IG5ld0lEfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUaGUgb2JqZWN0IGRvZXMgbm90IGV4aXN0LCBkZWNyZW1lbnQgdGhlIElEXG4gICAgICAgICAgICBsZXQgbmV3SUQgPSBgMi4xMy4ke2lkSW5kZXggLSAxfWA7XG4gICAgICAgICAgICBGZXRjaENoYWluT2JqZWN0cyhcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldE9iamVjdCxcbiAgICAgICAgICAgICAgICBbbmV3SURdLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB7fVxuICAgICAgICAgICAgKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IFtsYm9dID0gcmVzO1xuICAgICAgICAgICAgICAgIGlmIChsYm8gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG9iamVjdCBkb2VzIG5vdCBleGlzdCwgdGhlIGlkIHdhcyB0b28gaGlnaFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAge2xhc3RCdWRnZXRPYmplY3Q6IGAyLjEzLiR7aWRJbmRleCAtIDJ9YH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEJ1ZGdldE9iamVjdFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFNldHRpbmdzU3RvcmUuc2V0TGFzdEJ1ZGdldE9iamVjdChuZXdJRCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2xhc3RCdWRnZXRPYmplY3Q6IG5ld0lEfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfZ2V0V29ya2VyQXJyYXkoKSB7XG4gICAgICAgIGxldCB3b3JrZXJBcnJheSA9IFtdO1xuXG4gICAgICAgIENoYWluU3RvcmUud29ya2Vycy5mb3JFYWNoKHdvcmtlcklkID0+IHtcbiAgICAgICAgICAgIGxldCB3b3JrZXIgPSBDaGFpblN0b3JlLmdldE9iamVjdCh3b3JrZXJJZCwgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgICAgIGlmICh3b3JrZXIpIHdvcmtlckFycmF5LnB1c2god29ya2VyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHdvcmtlckFycmF5O1xuICAgIH1cblxuICAgIF9zZXRXb3JrZXJUYWJsZUluZGV4KGluZGV4KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgd29ya2VyVGFibGVJbmRleDogaW5kZXhcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge3dvcmtlclRhYmxlSW5kZXgsIHByZXZfcHJveHlfYWNjb3VudF9pZH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBjb25zdCBhY2NvdW50SGFzUHJveHkgPSAhIXByZXZfcHJveHlfYWNjb3VudF9pZDtcbiAgICAgICAgbGV0IHByZWZlcnJlZFVuaXQgPSB0aGlzLnByb3BzLnNldHRpbmdzLmdldChcInVuaXRcIikgfHwgXCIxLjMuMFwiO1xuICAgICAgICBsZXQgaGFzUHJveHkgPSAhIXRoaXMuc3RhdGUucHJveHlfYWNjb3VudF9pZDsgLy8gdGhpcy5wcm9wcy5hY2NvdW50LmdldEluKFtcIm9wdGlvbnNcIiwgXCJ2b3RpbmdfYWNjb3VudFwiXSkgIT09IFwiMS4yLjVcIjtcbiAgICAgICAgbGV0IHB1Ymxpc2hfYnV0dG9uc19jbGFzcyA9IGNuYW1lcyhcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICBkaXNhYmxlZDogIXRoaXMuaXNDaGFuZ2VkKClcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCB7Z2xvYmFsT2JqZWN0fSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCBidWRnZXRPYmplY3Q7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmxhc3RCdWRnZXRPYmplY3QpIHtcbiAgICAgICAgICAgIGJ1ZGdldE9iamVjdCA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KHRoaXMuc3RhdGUubGFzdEJ1ZGdldE9iamVjdCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdG90YWxCdWRnZXQgPSAwO1xuICAgICAgICAvLyBsZXQgdW51c2VkQnVkZ2V0ID0gMDtcbiAgICAgICAgbGV0IHdvcmtlckJ1ZGdldCA9IGdsb2JhbE9iamVjdFxuICAgICAgICAgICAgPyBwYXJzZUludChcbiAgICAgICAgICAgICAgICAgIGdsb2JhbE9iamVjdC5nZXRJbihbXCJwYXJhbWV0ZXJzXCIsIFwid29ya2VyX2J1ZGdldF9wZXJfZGF5XCJdKSxcbiAgICAgICAgICAgICAgICAgIDEwXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogMDtcblxuICAgICAgICBpZiAoYnVkZ2V0T2JqZWN0KSB7XG4gICAgICAgICAgICB3b3JrZXJCdWRnZXQgPSBNYXRoLm1pbihcbiAgICAgICAgICAgICAgICAyNCAqIGJ1ZGdldE9iamVjdC5nZXRJbihbXCJyZWNvcmRcIiwgXCJ3b3JrZXJfYnVkZ2V0XCJdKSxcbiAgICAgICAgICAgICAgICB3b3JrZXJCdWRnZXRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0b3RhbEJ1ZGdldCA9IE1hdGgubWluKFxuICAgICAgICAgICAgICAgIDI0ICogYnVkZ2V0T2JqZWN0LmdldEluKFtcInJlY29yZFwiLCBcIndvcmtlcl9idWRnZXRcIl0pLFxuICAgICAgICAgICAgICAgIHdvcmtlckJ1ZGdldFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBsZXQgd29ya2VyQXJyYXkgPSB0aGlzLl9nZXRXb3JrZXJBcnJheSgpO1xuXG4gICAgICAgIGxldCB2b3RlVGhyZXNob2xkID0gMDtcbiAgICAgICAgbGV0IHdvcmtlcnMgPSB3b3JrZXJBcnJheVxuICAgICAgICAgICAgLmZpbHRlcihhID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKGEuZ2V0KFwid29ya19lbmRfZGF0ZVwiKSArIFwiWlwiKSA+IG5vdyAmJlxuICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShhLmdldChcIndvcmtfYmVnaW5fZGF0ZVwiKSArIFwiWlwiKSA8PSBub3dcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFRvdGFsVm90ZXMoYikgLSB0aGlzLl9nZXRUb3RhbFZvdGVzKGEpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5tYXAoKHdvcmtlciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZGFpbHlQYXkgPSBwYXJzZUludCh3b3JrZXIuZ2V0KFwiZGFpbHlfcGF5XCIpLCAxMCk7XG4gICAgICAgICAgICAgICAgd29ya2VyQnVkZ2V0ID0gd29ya2VyQnVkZ2V0IC0gZGFpbHlQYXk7XG4gICAgICAgICAgICAgICAgbGV0IHZvdGVzID1cbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLmdldChcInRvdGFsX3ZvdGVzX2ZvclwiKSAtXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlci5nZXQoXCJ0b3RhbF92b3Rlc19hZ2FpbnN0XCIpO1xuICAgICAgICAgICAgICAgIGlmICh3b3JrZXJCdWRnZXQgPD0gMCAmJiAhdm90ZVRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgICAgICB2b3RlVGhyZXNob2xkID0gdm90ZXM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHZvdGVUaHJlc2hvbGQgJiYgdm90ZXMgPCB2b3RlVGhyZXNob2xkKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxXb3JrZXJBcHByb3ZhbFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkVW5pdD17cHJlZmVycmVkVW5pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3Q9e3dvcmtlckJ1ZGdldCArIGRhaWx5UGF5fVxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuaz17aW5kZXggKyAxfVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXt3b3JrZXIuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXI9e3dvcmtlci5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVfaWRzPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlW2hhc1Byb3h5ID8gXCJwcm94eV92b3RlX2lkc1wiIDogXCJ2b3RlX2lkc1wiXVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VWb3Rlcz17dGhpcy5vbkNoYW5nZVZvdGVzLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm94eT17aGFzUHJveHl9XG4gICAgICAgICAgICAgICAgICAgICAgICB2b3RlVGhyZXNob2xkPXt2b3RlVGhyZXNob2xkfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcihhID0+ICEhYSk7XG5cbiAgICAgICAgLy8gdW51c2VkQnVkZ2V0ID0gTWF0aC5tYXgoMCwgd29ya2VyQnVkZ2V0KTtcblxuICAgICAgICBsZXQgbmV3V29ya2VycyA9IHdvcmtlckFycmF5XG4gICAgICAgICAgICAuZmlsdGVyKGEgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghYSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGV0IHZvdGVzID1cbiAgICAgICAgICAgICAgICAgICAgYS5nZXQoXCJ0b3RhbF92b3Rlc19mb3JcIikgLSBhLmdldChcInRvdGFsX3ZvdGVzX2FnYWluc3RcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgKG5ldyBEYXRlKGEuZ2V0KFwid29ya19lbmRfZGF0ZVwiKSArIFwiWlwiKSA+IG5vdyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdm90ZXMgPCB2b3RlVGhyZXNob2xkKSB8fFxuICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShhLmdldChcIndvcmtfYmVnaW5fZGF0ZVwiKSArIFwiWlwiKSA+IG5vd1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VG90YWxWb3RlcyhiKSAtIHRoaXMuX2dldFRvdGFsVm90ZXMoYSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm1hcCgod29ya2VyLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGxldCBkYWlseVBheSA9IHBhcnNlSW50KHdvcmtlci5nZXQoXCJkYWlseV9wYXlcIiksIDEwKTtcbiAgICAgICAgICAgICAgICAvLyB3b3JrZXJCdWRnZXQgPSB3b3JrZXJCdWRnZXQgLSBkYWlseVBheTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxXb3JrZXJBcHByb3ZhbFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkVW5pdD17cHJlZmVycmVkVW5pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3Q9ezB9XG4gICAgICAgICAgICAgICAgICAgICAgICByYW5rPXtpbmRleCArIDF9XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3dvcmtlci5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlcj17d29ya2VyLmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgdm90ZV9pZHM9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVbaGFzUHJveHkgPyBcInByb3h5X3ZvdGVfaWRzXCIgOiBcInZvdGVfaWRzXCJdXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZVZvdGVzPXt0aGlzLm9uQ2hhbmdlVm90ZXMuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5PXtoYXNQcm94eX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVUaHJlc2hvbGQ9e3ZvdGVUaHJlc2hvbGR9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBleHBpcmVkV29ya2VycyA9IHdvcmtlckFycmF5XG4gICAgICAgICAgICAuZmlsdGVyKGEgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghYSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGEuZ2V0KFwid29ya19lbmRfZGF0ZVwiKSkgPD0gbm93O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFRvdGFsVm90ZXMoYikgLSB0aGlzLl9nZXRUb3RhbFZvdGVzKGEpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5tYXAoKHdvcmtlciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBsZXQgZGFpbHlQYXkgPSBwYXJzZUludCh3b3JrZXIuZ2V0KFwiZGFpbHlfcGF5XCIpLCAxMCk7XG4gICAgICAgICAgICAgICAgLy8gd29ya2VyQnVkZ2V0ID0gd29ya2VyQnVkZ2V0IC0gZGFpbHlQYXk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8V29ya2VyQXBwcm92YWxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZlcnJlZFVuaXQ9e3ByZWZlcnJlZFVuaXR9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN0PXswfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuaz17aW5kZXggKyAxfVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXt3b3JrZXIuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXI9e3dvcmtlci5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVfaWRzPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlW2hhc1Byb3h5ID8gXCJwcm94eV92b3RlX2lkc1wiIDogXCJ2b3RlX2lkc1wiXVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VWb3Rlcz17dGhpcy5vbkNoYW5nZVZvdGVzLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm94eT17aGFzUHJveHl9XG4gICAgICAgICAgICAgICAgICAgICAgICB2b3RlVGhyZXNob2xkPXt2b3RlVGhyZXNob2xkfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBsZXQgYWN0aW9uQnV0dG9ucyA9IChcbiAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMocHVibGlzaF9idXR0b25zX2NsYXNzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0aGlzLmlzQ2hhbmdlZCgpXG4gICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uUHVibGlzaH1cbiAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLnB1Ymxpc2hcIiAvPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcImJ1dHRvbiBcIiArIHB1Ymxpc2hfYnV0dG9uc19jbGFzc31cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vblJlc2V0fVxuICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17OH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5yZXNldFwiIC8+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAge2FjY291bnRIYXNQcm94eSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XCJidXR0b25cIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25SZW1vdmVQcm94eX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs5fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucmVtb3ZlX3Byb3h5XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgcHJveHlJbnB1dCA9IChcbiAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0b3JcbiAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiBcIjUwJVwiLCBtYXhXaWR0aDogMjUwLCBtYXJnaW5Cb3R0b206IDEwfX1cbiAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnN0YXRlLmN1cnJlbnRfcHJveHlfaW5wdXR9XG4gICAgICAgICAgICAgICAgYWNjb3VudE5hbWU9e3RoaXMuc3RhdGUuY3VycmVudF9wcm94eV9pbnB1dH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vblByb3h5Q2hhbmdlLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5vblByb3h5QWNjb3VudEZvdW5kfVxuICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnZvdGVzLnNldF9wcm94eVwiKX1cbiAgICAgICAgICAgICAgICB0b29sdGlwPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICF0aGlzLnN0YXRlLnByb3h5X2FjY291bnRfaWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJ0b29sdGlwLnByb3h5X3NlYXJjaFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwidG9vbHRpcC5wcm94eV9yZW1vdmVcIlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgaGlkZUltYWdlXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogOSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGhhc1Byb3h5ID8gXCJcIiA6IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8SWNvbiBuYW1lPVwibG9ja2VkXCIgc2l6ZT1cIjF4XCIgLz5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogOSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICFoYXNQcm94eSA/IFwiXCIgOiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89XCIvaGVscC92b3RpbmdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInF1ZXN0aW9uLWNpcmNsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5xdWVzdGlvbl9jaXJjbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCIxeFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9BY2NvdW50U2VsZWN0b3I+XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qgc2hvd0V4cGlyZWQgPSB3b3JrZXJUYWJsZUluZGV4ID09PSAyO1xuXG4gICAgICAgIGNvbnN0IHNhdmVUZXh0ID0gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlubGluZS1ibG9ja1wiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IFwicmlnaHRcIixcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogdGhpcy5pc0NoYW5nZWQoKSA/IFwidmlzaWJsZVwiIDogXCJoaWRkZW5cIixcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwicmVkXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IFwiMC44NXJlbVwiLFxuICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogXCIwLjlyZW1cIlxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5zYXZlX2ZpbmlzaFwiIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgYXBwLXRhYmxlcyBuby1wYWRkaW5nXCIgcmVmPVwiYXBwVGFibGVzXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1jb250YWluZXIgZ2VuZXJpYy1ib3JkZXJlZC1ib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZz1cInZvdGluZ1RhYlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWNjb3VudC10YWJzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0QWN0aXZlVGFiPXsxfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRlZD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9ucz17c2F2ZVRleHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic0NsYXNzPVwiYWNjb3VudC1vdmVydmlldyBuby1wYWRkaW5nIGJvcmRlcmVkLWhlYWRlciBjb250ZW50LWJsb2NrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiZXhwbG9yZXIud2l0bmVzc2VzLnRpdGxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbmFtZXMoXCJjb250ZW50LWJsb2NrXCIpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLXNlbGVjdG9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIDxMaW5rIHRvPVwiL2hlbHAvdm90aW5nL3dpdG5lc3NcIj48SWNvbiBuYW1lPVwicXVlc3Rpb24tY2lyY2xlXCIgdGl0bGU9XCJpY29ucy5xdWVzdGlvbl9jaXJsY2VcIiAvPjwvTGluaz4gKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Byb3h5SW5wdXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IFwicmlnaHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogXCItMi41cmVtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3Rpb25CdXR0b25zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxWb3RpbmdBY2NvdW50c0xpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwid2l0bmVzc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnZvdGVzLmFkZF93aXRuZXNzX2xhYmVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcz17dGhpcy5zdGF0ZS5hbGxfd2l0bmVzc2VzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQWNjb3VudD17dGhpcy52YWxpZGF0ZUFjY291bnQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aXRuZXNzZXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BZGRJdGVtPXt0aGlzLm9uQWRkSXRlbS5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndpdG5lc3Nlc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZUl0ZW09e3RoaXMub25SZW1vdmVJdGVtLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2l0bmVzc2VzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXtoYXNQcm94eSA/IC0xIDogMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzUHJveHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwicHJveHlfd2l0bmVzc2VzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwid2l0bmVzc2VzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoU2VsZWN0b3I9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZT17Z2xvYmFsT2JqZWN0LmdldChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVfd2l0bmVzc2VzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5PXt0aGlzLnN0YXRlLnByb3h5X2FjY291bnRfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJleHBsb3Jlci5jb21taXR0ZWVfbWVtYmVycy50aXRsZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y25hbWVzKFwiY29udGVudC1ibG9ja1wiKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1zZWxlY3RvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiA8TGluayB0bz1cIi9oZWxwL3ZvdGluZy9jb21taXR0ZWVcIj48SWNvbiBuYW1lPVwicXVlc3Rpb24tY2lyY2xlXCIgdGl0bGU9XCJpY29ucy5xdWVzdGlvbl9jaXJsY2VcIiAvPjwvTGluaz4gKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Byb3h5SW5wdXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IFwicmlnaHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogXCItMi41cmVtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3Rpb25CdXR0b25zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Vm90aW5nQWNjb3VudHNMaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNvbW1pdHRlZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnZvdGVzLmFkZF9jb21taXR0ZWVfbGFiZWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zPXt0aGlzLnN0YXRlLmFsbF9jb21taXR0ZWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVBY2NvdW50PXt0aGlzLnZhbGlkYXRlQWNjb3VudC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbW1pdHRlZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFkZEl0ZW09e3RoaXMub25BZGRJdGVtLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29tbWl0dGVlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlSXRlbT17dGhpcy5vblJlbW92ZUl0ZW0uYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb21taXR0ZWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9e2hhc1Byb3h5ID8gLTEgOiAzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNQcm94eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJwcm94eV9jb21taXR0ZWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJjb21taXR0ZWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhTZWxlY3Rvcj17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlPXtnbG9iYWxPYmplY3QuZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZV9jb21taXR0ZWVfbWVtYmVyc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm94eT17dGhpcy5zdGF0ZS5wcm94eV9hY2NvdW50X2lkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC52b3Rlcy53b3JrZXJzX3Nob3J0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLXNlbGVjdG9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZmxvYXQ6IFwicmlnaHRcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPVwiL2NyZWF0ZS13b3JrZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuY3JlYXRlX3dvcmtlclwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3RvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiA8TGluayB0bz1cIi9oZWxwL3ZvdGluZy93b3JrZXJcIj48SWNvbiBuYW1lPVwicXVlc3Rpb24tY2lyY2xlXCIgdGl0bGU9XCJpY29ucy5xdWVzdGlvbl9jaXJsY2VcIiAvPjwvTGluaz4gKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdMZWZ0OiAxMH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFwiaW5saW5lLWJsb2NrXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlOiB3b3JrZXJUYWJsZUluZGV4ICE9PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9zZXRXb3JrZXJUYWJsZUluZGV4LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC52b3Rlcy5uZXdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudDogbmV3V29ya2Vycy5sZW5ndGh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcImlubGluZS1ibG9ja1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmFjdGl2ZTogd29ya2VyVGFibGVJbmRleCAhPT0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fc2V0V29ya2VyVGFibGVJbmRleC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudm90ZXMuYWN0aXZlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291bnQ6IHdvcmtlcnMubGVuZ3RofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2V4cGlyZWRXb3JrZXJzLmxlbmd0aCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbmxpbmUtYmxvY2tcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aW5hY3RpdmU6ICFzaG93RXhwaXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhc2hvd0V4cGlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9zZXRXb3JrZXJUYWJsZUluZGV4LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCkgPT4ge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5leHBpcmVkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ttYXJnaW5Ub3A6IFwiMnJlbVwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Byb3h5SW5wdXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IFwicmlnaHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogXCItMi41cmVtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3Rpb25CdXR0b25zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiB7c2hvd0V4cGlyZWQgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZ1RvcDogMTAsIHBhZGRpbmdCb3R0b206IDIwfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy50b3RhbF9idWRnZXRcIiAvPjo8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7cGFkZGluZ0xlZnQ6IDIwLCB0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO3tnbG9iYWxPYmplY3QgPyA8Rm9ybWF0dGVkQXNzZXQgYW1vdW50PXt0b3RhbEJ1ZGdldH0gYXNzZXQ9XCIxLjMuMFwiIGRlY2ltYWxPZmZzZXQ9ezV9Lz4gOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiZuYnNwOyh7Z2xvYmFsT2JqZWN0ID8gPEVxdWl2YWxlbnRWYWx1ZUNvbXBvbmVudCBmcm9tQXNzZXQ9XCIxLjMuMFwiIHRvQXNzZXQ9e3ByZWZlcnJlZFVuaXR9IGFtb3VudD17dG90YWxCdWRnZXR9Lz4gOiBudWxsfSk8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPjwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLnVudXNlZF9idWRnZXRcIiAvPjo8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7cGFkZGluZ0xlZnQ6IDIwLCB0ZXh0QWxpZ246IFwicmlnaHRcIn19PiB7Z2xvYmFsT2JqZWN0ID8gPEZvcm1hdHRlZEFzc2V0IGFtb3VudD17dW51c2VkQnVkZ2V0fSBhc3NldD1cIjEuMy4wXCIgZGVjaW1hbE9mZnNldD17NX0vPiA6IG51bGx9PC90ZD48L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4pfSAqL31cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUgZGFzaGJvYXJkLXRhYmxlIHRhYmxlLWhvdmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7d29ya2VyVGFibGVJbmRleCA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgPyBudWxsIDogd29ya2VyVGFibGVJbmRleCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sU3Bhbj1cIjNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy50aHJlc2hvbGRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsT2Zmc2V0PXs1fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dm90ZVRocmVzaG9sZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9XCIxLjMuMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY29sU3Bhbj1cIjNcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRyYW5zcGFyZW50XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sU3Bhbj1cIjRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy50b3RhbF9idWRnZXRcIiAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtwcmVmZXJyZWRVbml0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbFNwYW49XCIyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRlLWNvbHVtbi1zbWFsbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2dsb2JhbE9iamVjdCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEVxdWl2YWxlbnRWYWx1ZUNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUFzc2V0PVwiMS4zLjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9Bc3NldD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkVW5pdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXt0b3RhbEJ1ZGdldH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwiaGlkZS1jb2x1bW4tc21hbGxcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRyYW5zcGFyZW50XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt3b3JrZXJUYWJsZUluZGV4ID09PSAyID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMubGluZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwiY2VudGVyXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmlkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZGVzY3JpcHRpb25cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZS1jb2x1bW4tc21hbGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLnRvdGFsX3ZvdGVzXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3dvcmtlclRhYmxlSW5kZXggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLm1pc3NpbmdcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLndvcmtlcnMucGVyaW9kXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3dvcmtlclRhYmxlSW5kZXggPT09IDIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyVGFibGVJbmRleCA9PT0gMCA/IG51bGwgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRlLWNvbHVtbi1zbWFsbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5mdW5kaW5nXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRlLWNvbHVtbi1zbWFsbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuZGFpbHlfcGF5XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nVG9wOiA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogXCIwLjhyZW1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17cHJlZmVycmVkVW5pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7d29ya2VyVGFibGVJbmRleCA9PT0gMiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXJUYWJsZUluZGV4ID09PSAwID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLndpdG5lc3Nlcy5idWRnZXRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdUb3A6IDUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogXCIwLjhyZW1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtwcmVmZXJyZWRVbml0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMudG9nZ2xlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt3b3JrZXJUYWJsZUluZGV4ID09PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3V29ya2Vyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHdvcmtlclRhYmxlSW5kZXggPT09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gd29ya2Vyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBleHBpcmVkV29ya2Vyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuQWNjb3VudFZvdGluZyA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudFZvdGluZyk7XG5cbmNvbnN0IEJ1ZGdldE9iamVjdFdyYXBwZXIgPSBwcm9wcyA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPEFjY291bnRWb3RpbmdcbiAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgIGluaXRpYWxCdWRnZXQ9e1NldHRpbmdzU3RvcmUuZ2V0TGFzdEJ1ZGdldE9iamVjdCgpfVxuICAgICAgICAvPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBCdWRnZXRPYmplY3RXcmFwcGVyO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcbmltcG9ydCBGb3JtYXR0ZWRBc3NldCBmcm9tIFwiLi4vVXRpbGl0eS9Gb3JtYXR0ZWRBc3NldFwiO1xuaW1wb3J0IExpbmtUb0FjY291bnRCeUlkIGZyb20gXCIuLi9VdGlsaXR5L0xpbmtUb0FjY291bnRCeUlkXCI7XG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XG5pbXBvcnQge0VxdWl2YWxlbnRWYWx1ZUNvbXBvbmVudH0gZnJvbSBcIi4uL1V0aWxpdHkvRXF1aXZhbGVudFZhbHVlQ29tcG9uZW50XCI7XG5pbXBvcnQgSWNvbiBmcm9tIFwiY29tcG9uZW50cy9JY29uL0ljb25cIjtcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcblxuY2xhc3MgV29ya2VyQXBwcm92YWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIHdvcmtlcjogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkLFxuICAgICAgICBvbkFkZFZvdGU6IFByb3BUeXBlcy5mdW5jLCAvLy8gY2FsbGVkIHdpdGggdm90ZSBpZCB0byBhZGRcbiAgICAgICAgb25SZW1vdmVWb3RlOiBQcm9wVHlwZXMuZnVuYywgLy8vIGNhbGxlZCB3aXRoIHZvdGUgaWQgdG8gcmVtb3ZlXG4gICAgICAgIHZvdGVfaWRzOiBQcm9wVHlwZXMub2JqZWN0IC8vLyBTZXQgb2YgaXRlbXMgY3VycmVudGx5IGJlaW5nIHZvdGVkIGZvclxuICAgIH07XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICB0ZW1wQ29tcG9uZW50OiBcInRyXCJcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgIH1cblxuICAgIG9uQXBwcm92ZSgpIHtcbiAgICAgICAgbGV0IGFkZFZvdGVzID0gW10sXG4gICAgICAgICAgICByZW1vdmVWb3RlcyA9IFtdO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZvdGVfaWRzLmhhcyh0aGlzLnByb3BzLndvcmtlci5nZXQoXCJ2b3RlX2FnYWluc3RcIikpKSB7XG4gICAgICAgICAgICByZW1vdmVWb3Rlcy5wdXNoKHRoaXMucHJvcHMud29ya2VyLmdldChcInZvdGVfYWdhaW5zdFwiKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMucHJvcHMudm90ZV9pZHMuaGFzKHRoaXMucHJvcHMud29ya2VyLmdldChcInZvdGVfZm9yXCIpKSkge1xuICAgICAgICAgICAgYWRkVm90ZXMucHVzaCh0aGlzLnByb3BzLndvcmtlci5nZXQoXCJ2b3RlX2ZvclwiKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlVm90ZXMoYWRkVm90ZXMsIHJlbW92ZVZvdGVzKTtcbiAgICB9XG5cbiAgICBvblJlamVjdCgpIHtcbiAgICAgICAgbGV0IGFkZFZvdGVzID0gW10sXG4gICAgICAgICAgICByZW1vdmVWb3RlcyA9IFtdO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZvdGVfaWRzLmhhcyh0aGlzLnByb3BzLndvcmtlci5nZXQoXCJ2b3RlX2FnYWluc3RcIikpKSB7XG4gICAgICAgICAgICByZW1vdmVWb3Rlcy5wdXNoKHRoaXMucHJvcHMud29ya2VyLmdldChcInZvdGVfYWdhaW5zdFwiKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy52b3RlX2lkcy5oYXModGhpcy5wcm9wcy53b3JrZXIuZ2V0KFwidm90ZV9mb3JcIikpKSB7XG4gICAgICAgICAgICByZW1vdmVWb3Rlcy5wdXNoKHRoaXMucHJvcHMud29ya2VyLmdldChcInZvdGVfZm9yXCIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2VWb3RlcyhhZGRWb3RlcywgcmVtb3ZlVm90ZXMpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHtyYW5rfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB3b3JrZXIgPSB0aGlzLnByb3BzLndvcmtlci50b0pTKCk7XG4gICAgICAgIGxldCB0b3RhbF92b3RlcyA9IHdvcmtlci50b3RhbF92b3Rlc19mb3IgLSB3b3JrZXIudG90YWxfdm90ZXNfYWdhaW5zdDtcbiAgICAgICAgbGV0IGFwcHJvdmFsU3RhdGUgPSB0aGlzLnByb3BzLnZvdGVfaWRzLmhhcyh3b3JrZXIudm90ZV9mb3IpXG4gICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgIDogdGhpcy5wcm9wcy52b3RlX2lkcy5oYXMod29ya2VyLnZvdGVfYWdhaW5zdClcbiAgICAgICAgICAgICAgICA/IGZhbHNlXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuXG4gICAgICAgIGxldCBmdW5kZWRQZXJjZW50ID0gMDtcblxuICAgICAgICBpZiAod29ya2VyLmRhaWx5X3BheSA8IHRoaXMucHJvcHMucmVzdCkge1xuICAgICAgICAgICAgZnVuZGVkUGVyY2VudCA9IDEwMDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnJlc3QgPiAwKSB7XG4gICAgICAgICAgICBmdW5kZWRQZXJjZW50ID0gKHRoaXMucHJvcHMucmVzdCAvIHdvcmtlci5kYWlseV9wYXkpICogMTAwO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHN0YXJ0RGF0ZSA9IGNvdW50ZXJwYXJ0LmxvY2FsaXplKFxuICAgICAgICAgICAgbmV3IERhdGUod29ya2VyLndvcmtfYmVnaW5fZGF0ZSArIFwiWlwiKSxcbiAgICAgICAgICAgIHt0eXBlOiBcImRhdGVcIiwgZm9ybWF0OiBcInNob3J0X2N1c3RvbVwifVxuICAgICAgICApO1xuICAgICAgICBsZXQgZW5kRGF0ZSA9IGNvdW50ZXJwYXJ0LmxvY2FsaXplKFxuICAgICAgICAgICAgbmV3IERhdGUod29ya2VyLndvcmtfZW5kX2RhdGUgKyBcIlpcIiksXG4gICAgICAgICAgICB7dHlwZTogXCJkYXRlXCIsIGZvcm1hdDogXCJzaG9ydF9jdXN0b21cIn1cbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGV0IGlzRXhwaXJlZCA9IG5ldyBEYXRlKHdvcmtlci53b3JrX2VuZF9kYXRlICsgXCJaXCIpIDw9IG5vdztcbiAgICAgICAgbGV0IGhhc1N0YXJ0ZWQgPSBuZXcgRGF0ZSh3b3JrZXIud29ya19iZWdpbl9kYXRlICsgXCJaXCIpIDw9IG5vdztcbiAgICAgICAgbGV0IGlzUHJvcG9zZWQgPVxuICAgICAgICAgICAgKCFpc0V4cGlyZWQgJiYgdG90YWxfdm90ZXMgPCB0aGlzLnByb3BzLnZvdGVUaHJlc2hvbGQpIHx8XG4gICAgICAgICAgICAhaGFzU3RhcnRlZDtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9e2FwcHJvdmFsU3RhdGUgPyBcIlwiIDogXCJ1bnN1cHBvcnRlZFwifT5cbiAgICAgICAgICAgICAgICB7aXNFeHBpcmVkID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogXCJyaWdodFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtyYW5rfVxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwid29ya2VyLWlkXCIgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XG4gICAgICAgICAgICAgICAgICAgIHt3b3JrZXIuaWR9XG4gICAgICAgICAgICAgICAgPC90ZD5cblxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ3b3JrZXItbmFtZVwiIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2tcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nUmlnaHQ6IDUsIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsIHRvcDogLTF9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIudXJsICYmIHdvcmtlci51cmwuaW5kZXhPZihcIi5cIikgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcInZpc2libGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJoaWRkZW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj17d29ya2VyLnVybH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJzaGFyZVwiIHRpdGxlPVwiaWNvbnMuc2hhcmVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt3b3JrZXIubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtUb0FjY291bnRCeUlkIGFjY291bnQ9e3dvcmtlci53b3JrZXJfYWNjb3VudH0gLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC90ZD5cblxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX0gY2xhc3NOYW1lPVwiaGlkZS1jb2x1bW4tc21hbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3RvdGFsX3ZvdGVzfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9XCIxLjMuMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsT2Zmc2V0PXs1fVxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG5cbiAgICAgICAgICAgICAgICB7IWlzUHJvcG9zZWQgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtNYXRoLm1heChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy52b3RlVGhyZXNob2xkIC0gdG90YWxfdm90ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PVwiMS4zLjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsT2Zmc2V0PXs1fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICB7c3RhcnREYXRlfSAtIHtlbmREYXRlfVxuICAgICAgICAgICAgICAgIDwvdGQ+XG5cbiAgICAgICAgICAgICAgICB7aXNFeHBpcmVkIHx8IGlzUHJvcG9zZWQgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgICA8dGRcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZS1jb2x1bW4tc21hbGxcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihmdW5kZWRQZXJjZW50LCAyKX0lXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX0gY2xhc3NOYW1lPVwiaGlkZS1jb2x1bW4tc21hbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgPEVxdWl2YWxlbnRWYWx1ZUNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUFzc2V0PVwiMS4zLjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdG9Bc3NldD17dGhpcy5wcm9wcy5wcmVmZXJyZWRVbml0fVxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXt3b3JrZXIuZGFpbHlfcGF5fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG5cbiAgICAgICAgICAgICAgICB7aXNFeHBpcmVkIHx8IGlzUHJvcG9zZWQgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMucmVzdCA8PSAwID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiMC4wMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFcXVpdmFsZW50VmFsdWVDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tQXNzZXQ9XCIxLjMuMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvQXNzZXQ9e3RoaXMucHJvcHMucHJlZmVycmVkVW5pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXt0aGlzLnByb3BzLnJlc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgIDx0ZFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjbGlja2FibGVcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHJveHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgpID0+IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsU3RhdGUgPyBcIm9uUmVqZWN0XCIgOiBcIm9uQXBwcm92ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeyF0aGlzLnByb3BzLnByb3h5ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwcm92YWxTdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImNoZWNrbWFyay1jaXJjbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIm1pbnVzLWNpcmNsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwcm92YWxTdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImljb25zLmNoZWNrbWFya19jaXJjbGUuYXBwcm92ZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImljb25zLm1pbnVzX2NpcmNsZS5kaXNhcHByb3ZlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJsb2NrZWRcIiB0aXRsZT1cImljb25zLmxvY2tlZC5hY3Rpb25cIiAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8L3RyPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQmluZFRvQ2hhaW5TdGF0ZShXb3JrZXJBcHByb3ZhbCk7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuL0FjY291bnRTZWxlY3RvclwiO1xuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcbmltcG9ydCBGb3JtYXR0ZWRBc3NldCBmcm9tIFwiLi4vVXRpbGl0eS9Gb3JtYXR0ZWRBc3NldFwiO1xuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xuaW1wb3J0IExpbmtUb0FjY291bnRCeUlkIGZyb20gXCIuLi9VdGlsaXR5L0xpbmtUb0FjY291bnRCeUlkXCI7XG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XG5pbXBvcnQgc2FuaXRpemUgZnJvbSBcInNhbml0aXplXCI7XG5cbmZ1bmN0aW9uIGdldFdpdG5lc3NPckNvbW1pdHRlZSh0eXBlLCBhY2N0KSB7XG4gICAgbGV0IHVybCA9IFwiXCIsXG4gICAgICAgIHZvdGVzID0gMCxcbiAgICAgICAgYWNjb3VudDtcbiAgICBpZiAodHlwZSA9PT0gXCJ3aXRuZXNzXCIpIHtcbiAgICAgICAgYWNjb3VudCA9IENoYWluU3RvcmUuZ2V0V2l0bmVzc0J5SWQoYWNjdC5nZXQoXCJpZFwiKSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcImNvbW1pdHRlZVwiKSB7XG4gICAgICAgIGFjY291bnQgPSBDaGFpblN0b3JlLmdldENvbW1pdHRlZU1lbWJlckJ5SWQoYWNjdC5nZXQoXCJpZFwiKSk7XG4gICAgfVxuXG4gICAgdXJsID0gYWNjb3VudCA/IGFjY291bnQuZ2V0KFwidXJsXCIpIDogdXJsO1xuICAgIHVybCA9IHNhbml0aXplKHVybCwge1xuICAgICAgICB3aGl0ZUxpc3Q6IFtdLCAvLyBlbXB0eSwgbWVhbnMgZmlsdGVyIG91dCBhbGwgdGFnc1xuICAgICAgICBzdHJpcElnbm9yZVRhZzogdHJ1ZSAvLyBmaWx0ZXIgb3V0IGFsbCBIVE1MIG5vdCBpbiB0aGUgd2hpbGVsaXN0XG4gICAgfSk7XG4gICAgdm90ZXMgPSBhY2NvdW50ID8gYWNjb3VudC5nZXQoXCJ0b3RhbF92b3Rlc1wiKSA6IHZvdGVzO1xuICAgIHJldHVybiB7XG4gICAgICAgIHVybCxcbiAgICAgICAgdm90ZXMsXG4gICAgICAgIGlkOiBhY2NvdW50LmdldChcImlkXCIpXG4gICAgfTtcbn1cblxuY2xhc3MgQWNjb3VudEl0ZW1Sb3cgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGFjY291bnQ6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICAgICAgb25BY3Rpb246IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcykge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgbmV4dFByb3BzLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudCB8fFxuICAgICAgICAgICAgbmV4dFByb3BzLmFjdGlvbiAhPT0gdGhpcy5wcm9wcy5hY3Rpb24gfHxcbiAgICAgICAgICAgIG5leHRQcm9wcy5pc0FjdGl2ZSAhPT0gdGhpcy5wcm9wcy5pc0FjdGl2ZSB8fFxuICAgICAgICAgICAgbmV4dFByb3BzLmlkeCAhPT0gdGhpcy5wcm9wcy5pZHggfHxcbiAgICAgICAgICAgIG5leHRQcm9wcy5wcm94eSAhPT0gdGhpcy5wcm9wcy5wcm94eVxuICAgICAgICApO1xuICAgIH1cblxuICAgIG9uQWN0aW9uKGl0ZW1faWQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkFjdGlvbihpdGVtX2lkKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7YWNjb3VudCwgdHlwZSwgYWN0aW9uLCBpc0FjdGl2ZX0gPSB0aGlzLnByb3BzO1xuICAgICAgICBsZXQgaXRlbV9pZCA9IGFjY291bnQuZ2V0KFwiaWRcIik7XG5cbiAgICAgICAgbGV0IHt1cmwsIHZvdGVzfSA9IGdldFdpdG5lc3NPckNvbW1pdHRlZSh0eXBlLCBhY2NvdW50KTtcblxuICAgICAgICBsZXQgbGluayA9XG4gICAgICAgICAgICB1cmwgJiYgdXJsLmxlbmd0aCA+IDAgJiYgdXJsLmluZGV4T2YoXCJodHRwXCIpID09PSAtMVxuICAgICAgICAgICAgICAgID8gXCJodHRwOi8vXCIgKyB1cmxcbiAgICAgICAgICAgICAgICA6IHVybDtcbiAgICAgICAgY29uc3QgaXNTdXBwb3J0ZWQgPSBhY3Rpb24gPT09IFwicmVtb3ZlXCI7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9e2lzU3VwcG9ydGVkID8gXCJcIiA6IFwidW5zdXBwb3J0ZWRcIn0+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fT57dGhpcy5wcm9wcy5pZHggKyAxfTwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxuICAgICAgICAgICAgICAgICAgICA8TGlua1RvQWNjb3VudEJ5SWQgYWNjb3VudD17YWNjb3VudC5nZXQoXCJpZFwiKX0gLz5cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAge2xpbmsgJiYgbGluay5pbmRleE9mKFwiLlwiKSAhPT0gLTEgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9e2xpbmt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvbiBuYW1lPVwic2hhcmVcIiB0aXRsZT1cImljb25zLnNoYXJlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXt2b3Rlc31cbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PVwiMS4zLjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgZGVjaW1hbE9mZnNldD17NX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17YGFjY291bnQudm90ZXMuJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FjdGl2ZSA/IFwiYWN0aXZlX3Nob3J0XCIgOiBcImluYWN0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcImNlbnRlclwifX0+XG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2BzZXR0aW5ncy4ke2lzU3VwcG9ydGVkID8gXCJ5ZXNcIiA6IFwibm9cIn1gfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5wcm9wcy5wcm94eSA/IFwiXCIgOiBcImNsaWNrYWJsZVwifVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHJveHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgpID0+IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLm9uQWN0aW9uLmJpbmQodGhpcywgaXRlbV9pZClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeyF0aGlzLnByb3BzLnByb3h5ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTdXBwb3J0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJjaGVja21hcmstY2lyY2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJtaW51cy1jaXJjbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU3VwcG9ydGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiaWNvbnMuY2hlY2ttYXJrX2NpcmNsZS55ZXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImljb25zLm1pbnVzX2NpcmNsZS5ub1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJsb2NrZWRcIiB0aXRsZT1cImljb25zLmxvY2tlZC5hY3Rpb25cIiAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8L3RyPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuY2xhc3MgVm90aW5nQWNjb3VudHNMaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBpdGVtczogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdHNMaXN0LFxuICAgICAgICBvbkFkZEl0ZW06IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgICAgIG9uUmVtb3ZlSXRlbTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgICAgdmFsaWRhdGVBY2NvdW50OiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCwgLy8gYSB0cmFuc2xhdGlvbiBrZXkgZm9yIHRoZSBsYWJlbCxcbiAgICAgICAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5zdHJpbmcsIC8vIHRoZSBwbGFjZWhvbGRlciB0ZXh0IHRvIGJlIGRpc3BsYXllZCB3aGVuIHRoZXJlIGlzIG5vIHVzZXJfaW5wdXRcbiAgICAgICAgdGFiSW5kZXg6IFByb3BUeXBlcy5udW1iZXIsIC8vIHRhYmluZGV4IHByb3BlcnR5IHRvIGJlIHBhc3NlZCB0byBpbnB1dCB0YWdcbiAgICAgICAgYWN0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICB3aXRoU2VsZWN0b3I6IFByb3BUeXBlcy5ib29sXG4gICAgfTtcblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGFjdGlvbjogXCJyZW1vdmVcIixcbiAgICAgICAgd2l0aFNlbGVjdG9yOiB0cnVlLFxuICAgICAgICBhdXRvc3Vic2NyaWJlOiBmYWxzZVxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzZWxlY3RlZF9pdGVtOiBudWxsLFxuICAgICAgICAgICAgaXRlbV9uYW1lX2lucHV0OiBcIlwiLFxuICAgICAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkl0ZW1DaGFuZ2UgPSB0aGlzLm9uSXRlbUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uSXRlbUFjY291bnRDaGFuZ2UgPSB0aGlzLm9uSXRlbUFjY291bnRDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkFkZEl0ZW0gPSB0aGlzLm9uQWRkSXRlbS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIG9uSXRlbUNoYW5nZShpdGVtX25hbWVfaW5wdXQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXRlbV9uYW1lX2lucHV0fSk7XG4gICAgfVxuXG4gICAgb25JdGVtQWNjb3VudENoYW5nZShzZWxlY3RlZF9pdGVtKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkX2l0ZW0sIGVycm9yOiBudWxsfSk7XG4gICAgICAgIGlmIChzZWxlY3RlZF9pdGVtICYmIHRoaXMucHJvcHMudmFsaWRhdGVBY2NvdW50KSB7XG4gICAgICAgICAgICBsZXQgcmVzID0gdGhpcy5wcm9wcy52YWxpZGF0ZUFjY291bnQoc2VsZWN0ZWRfaXRlbSk7XG4gICAgICAgICAgICBpZiAocmVzID09PSBudWxsKSByZXR1cm47XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlcyA9PT0gXCJzdHJpbmdcIikgdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6IHJlc30pO1xuICAgICAgICAgICAgZWxzZSByZXMudGhlbihlcnJvciA9PiB0aGlzLnNldFN0YXRlKHtlcnJvcjogZXJyb3J9KSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkFkZEl0ZW0oaXRlbSkge1xuICAgICAgICBpZiAoIWl0ZW0pIHJldHVybjtcbiAgICAgICAgbGV0IG5leHRfc3RhdGUgPSB7XG4gICAgICAgICAgICBzZWxlY3RlZF9pdGVtOiBudWxsLFxuICAgICAgICAgICAgaXRlbV9uYW1lX2lucHV0OiBcIlwiLFxuICAgICAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShuZXh0X3N0YXRlKTtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkFkZEl0ZW0oaXRlbS5nZXQoXCJpZFwiKSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMucHJvcHMuaXRlbXMpIHJldHVybiBudWxsO1xuXG4gICAgICAgIGxldCBpdGVtX3Jvd3MgPSB0aGlzLnByb3BzLml0ZW1zXG4gICAgICAgICAgICAuZmlsdGVyKGkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vaWYgKHRoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0KSByZXR1cm4gaS5nZXQoXCJuYW1lXCIpLmluZGV4T2YodGhpcy5zdGF0ZS5pdGVtX25hbWVfaW5wdXQpICE9PSAtMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB7dm90ZXM6IGFfdm90ZXN9ID0gZ2V0V2l0bmVzc09yQ29tbWl0dGVlKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGFcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGxldCB7dm90ZXM6IGJfdm90ZXN9ID0gZ2V0V2l0bmVzc09yQ29tbWl0dGVlKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChhX3ZvdGVzICE9PSBiX3ZvdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChiX3ZvdGVzLCAxMCkgLSBwYXJzZUludChhX3ZvdGVzLCAxMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhLmdldChcIm5hbWVcIikgPiBiLmdldChcIm5hbWVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhLmdldChcIm5hbWVcIikgPCBiLmdldChcIm5hbWVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAubWFwKChpLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgYWN0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zdXBwb3J0ZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zdXBwb3J0ZWQuaW5jbHVkZXMoaS5nZXQoXCJpZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJyZW1vdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcImFkZFwiO1xuICAgICAgICAgICAgICAgIGxldCBpc0FjdGl2ZSA9IHRoaXMucHJvcHMuYWN0aXZlLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICBnZXRXaXRuZXNzT3JDb21taXR0ZWUodGhpcy5wcm9wcy50eXBlLCBpKS5pZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPEFjY291bnRJdGVtUm93XG4gICAgICAgICAgICAgICAgICAgICAgICBpZHg9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aS5nZXQoXCJuYW1lXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17aX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9e3RoaXMucHJvcHMudHlwZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWN0aW9uPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb24gPT09IFwiYWRkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLm9uQWRkSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMucHJvcHMub25SZW1vdmVJdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkPXt0aGlzLnByb3BzLml0ZW1zLmluZGV4T2YoaSkgIT09IC0xfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPXthY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0FjdGl2ZT17aXNBY3RpdmV9XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm94eT17dGhpcy5wcm9wcy5wcm94eX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGVycm9yID0gdGhpcy5zdGF0ZS5lcnJvcjtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWVycm9yICYmXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNlbGVjdGVkX2l0ZW0gJiZcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaXRlbXMuaW5kZXhPZih0aGlzLnN0YXRlLnNlbGVjdGVkX2l0ZW0pICE9PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGVycm9yID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC52b3Rlcy5hbHJlYWR5XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGN3ID0gW1wiMTAlXCIsIFwiMjAlXCIsIFwiNDAlXCIsIFwiMjAlXCIsIFwiMTAlXCJdO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLndpdGhTZWxlY3RvciA/IChcbiAgICAgICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXhXaWR0aDogXCI2MDBweFwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0aGlzLnByb3BzLmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnN0YXRlLml0ZW1fbmFtZV9pbnB1dH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lPXt0aGlzLnN0YXRlLml0ZW1fbmFtZV9pbnB1dH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uSXRlbUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjb3VudENoYW5nZWQ9e3RoaXMub25JdGVtQWNjb3VudENoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWN0aW9uPXt0aGlzLm9uQWRkSXRlbX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbl9sYWJlbD1cImFjY291bnQudm90ZXMuYWRkX3dpdG5lc3NcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9e3RoaXMucHJvcHMudGFiSW5kZXh9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMudGl0bGUgJiYgaXRlbV9yb3dzLmxlbmd0aCA/IChcbiAgICAgICAgICAgICAgICAgICAgPGg0Pnt0aGlzLnByb3BzLnRpdGxlfTwvaDQ+XG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAge2l0ZW1fcm93cy5sZW5ndGggPyAoXG4gICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZSBkYXNoYm9hcmQtdGFibGUgdGFibGUtaG92ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX0+IzwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwiLCBtYXhXaWR0aDogY3dbMV19fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLm5hbWVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3ttYXhXaWR0aDogY3dbMl19fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuYWJvdXRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3ttYXhXaWR0aDogY3dbM119fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMudm90ZXNcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3ttYXhXaWR0aDogY3dbNF19fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuc3RhdHVzLnRpdGxlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7bWF4V2lkdGg6IGN3WzBdfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLnN1cHBvcnRlZFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e21heFdpZHRoOiBjd1s1XX19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy50b2dnbGVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PntpdGVtX3Jvd3N9PC90Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQmluZFRvQ2hhaW5TdGF0ZShWb3RpbmdBY2NvdW50c0xpc3QpO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IEltbXV0YWJsZSBmcm9tIFwiaW1tdXRhYmxlXCI7XG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XG5pbXBvcnQgVG90YWxCYWxhbmNlVmFsdWUgZnJvbSBcIi4uL1V0aWxpdHkvVG90YWxCYWxhbmNlVmFsdWVcIjtcbmltcG9ydCBBc3NldE5hbWUgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXROYW1lXCI7XG5pbXBvcnQgQXNzZXRJbWFnZSBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldEltYWdlXCI7XG5pbXBvcnQgTWFyZ2luUG9zaXRpb25zIGZyb20gXCIuL01hcmdpblBvc2l0aW9uc1wiO1xuaW1wb3J0IHtSZWNlbnRUcmFuc2FjdGlvbnN9IGZyb20gXCIuL1JlY2VudFRyYW5zYWN0aW9uc1wiO1xuaW1wb3J0IFByb3Bvc2FscyBmcm9tIFwiY29tcG9uZW50cy9BY2NvdW50L1Byb3Bvc2Fsc1wiO1xuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcbmltcG9ydCBTZXR0aW5nc0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvU2V0dGluZ3NBY3Rpb25zXCI7XG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xuaW1wb3J0IHtUYWJzLCBUYWJ9IGZyb20gXCIuLi9VdGlsaXR5L1RhYnNcIjtcbmltcG9ydCBBY2NvdW50T3JkZXJzIGZyb20gXCIuL0FjY291bnRPcmRlcnNcIjtcbmltcG9ydCBjbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmltcG9ydCBUcmFuc2xhdGVXaXRoTGlua3MgZnJvbSBcIi4uL1V0aWxpdHkvVHJhbnNsYXRlV2l0aExpbmtzXCI7XG5pbXBvcnQge2NoZWNrTWFyZ2luU3RhdHVzfSBmcm9tIFwiY29tbW9uL2FjY291bnRIZWxwZXJcIjtcbmltcG9ydCBCYWxhbmNlV3JhcHBlciBmcm9tIFwiLi9CYWxhbmNlV3JhcHBlclwiO1xuaW1wb3J0IEFjY291bnRUcmVlbWFwIGZyb20gXCIuL0FjY291bnRUcmVlbWFwXCI7XG5pbXBvcnQgQXNzZXRXcmFwcGVyIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0V3JhcHBlclwiO1xuaW1wb3J0IEFjY291bnRQb3J0Zm9saW9MaXN0IGZyb20gXCIuL0FjY291bnRQb3J0Zm9saW9MaXN0XCI7XG5cbmNsYXNzIEFjY291bnRPdmVydmlldyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNvcnRLZXk6IHByb3BzLnZpZXdTZXR0aW5ncy5nZXQoXCJwb3J0Zm9saW9Tb3J0XCIsIFwidG90YWxWYWx1ZVwiKSxcbiAgICAgICAgICAgIHNvcnREaXJlY3Rpb246IHByb3BzLnZpZXdTZXR0aW5ncy5nZXQoXG4gICAgICAgICAgICAgICAgXCJwb3J0Zm9saW9Tb3J0RGlyZWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKSwgLy8gYWxwaGFiZXRpY2FsIEEgLT4gQiwgbnVtYmVycyBoaWdoIHRvIGxvd1xuICAgICAgICAgICAgc2hvd25Bc3NldHM6IHByb3BzLnZpZXdTZXR0aW5ncy5nZXQoXCJzaG93bkFzc2V0c1wiLCBcImFjdGl2ZVwiKSxcbiAgICAgICAgICAgIGFsd2F5c1Nob3dBc3NldHM6IFtcbiAgICAgICAgICAgICAgICBcIkJUU1wiXG4gICAgICAgICAgICAgICAgLy8gXCJVU0RcIixcbiAgICAgICAgICAgICAgICAvLyBcIkNOWVwiLFxuICAgICAgICAgICAgICAgIC8vIFwiT1BFTi5CVENcIixcbiAgICAgICAgICAgICAgICAvLyBcIk9QRU4uVVNEVFwiLFxuICAgICAgICAgICAgICAgIC8vIFwiT1BFTi5FVEhcIixcbiAgICAgICAgICAgICAgICAvLyBcIk9QRU4uTUFJRFwiLFxuICAgICAgICAgICAgICAgIC8vIFwiT1BFTi5TVEVFTVwiLFxuICAgICAgICAgICAgICAgIC8vIFwiT1BFTi5EQVNIXCJcbiAgICAgICAgICAgIF1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9oYW5kbGVGaWx0ZXJJbnB1dCA9IHRoaXMuX2hhbmRsZUZpbHRlcklucHV0LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgX2hhbmRsZUZpbHRlcklucHV0KGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGZpbHRlclZhbHVlOiBlLnRhcmdldC52YWx1ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrTWFyZ2luU3RhdHVzKCk7XG4gICAgfVxuXG4gICAgX2NoZWNrTWFyZ2luU3RhdHVzKHByb3BzID0gdGhpcy5wcm9wcykge1xuICAgICAgICBjaGVja01hcmdpblN0YXR1cyhwcm9wcy5hY2NvdW50KS50aGVuKHN0YXR1cyA9PiB7XG4gICAgICAgICAgICBsZXQgZ2xvYmFsTWFyZ2luU3RhdHVzID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAobGV0IGFzc2V0IGluIHN0YXR1cykge1xuICAgICAgICAgICAgICAgIGdsb2JhbE1hcmdpblN0YXR1cyA9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1thc3NldF0uc3RhdHVzQ2xhc3MgfHwgZ2xvYmFsTWFyZ2luU3RhdHVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Z2xvYmFsTWFyZ2luU3RhdHVzfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobnApIHtcbiAgICAgICAgaWYgKG5wLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudCkge1xuICAgICAgICAgICAgdGhpcy5fY2hlY2tNYXJnaW5TdGF0dXMobnApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobmV4dFByb3BzLmJhbGFuY2VzLCB0aGlzLnByb3BzLmJhbGFuY2VzKSB8fFxuICAgICAgICAgICAgbmV4dFByb3BzLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudCB8fFxuICAgICAgICAgICAgbmV4dFByb3BzLnNldHRpbmdzICE9PSB0aGlzLnByb3BzLnNldHRpbmdzIHx8XG4gICAgICAgICAgICBuZXh0UHJvcHMuaGlkZGVuQXNzZXRzICE9PSB0aGlzLnByb3BzLmhpZGRlbkFzc2V0cyB8fFxuICAgICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KG5leHRTdGF0ZSwgdGhpcy5zdGF0ZSkgfHxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZmlsdGVyVmFsdWUgIT09IG5leHRTdGF0ZS5maWx0ZXJWYWx1ZVxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9jaGFuZ2VTaG93bkFzc2V0cyhzaG93bkFzc2V0cyA9IFwiYWN0aXZlXCIpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93bkFzc2V0c1xuICAgICAgICB9KTtcbiAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcbiAgICAgICAgICAgIHNob3duQXNzZXRzXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF90b2dnbGVTb3J0T3JkZXIoa2V5KSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNvcnRLZXkgPT09IGtleSkge1xuICAgICAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcbiAgICAgICAgICAgICAgICBwb3J0Zm9saW9Tb3J0RGlyZWN0aW9uOiAhdGhpcy5zdGF0ZS5zb3J0RGlyZWN0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHNvcnREaXJlY3Rpb246ICF0aGlzLnN0YXRlLnNvcnREaXJlY3Rpb25cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcbiAgICAgICAgICAgICAgICBwb3J0Zm9saW9Tb3J0OiBrZXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc29ydERpcmVjdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgc29ydEtleToga2V5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEhlYWRlcigpIHtcbiAgICAgICAgbGV0IHtzZXR0aW5nc30gPSB0aGlzLnByb3BzO1xuICAgICAgICBsZXQge3Nob3duQXNzZXRzfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgY29uc3QgcHJlZmVycmVkVW5pdCA9XG4gICAgICAgICAgICBzZXR0aW5ncy5nZXQoXCJ1bml0XCIpIHx8IHRoaXMucHJvcHMuY29yZV9hc3NldC5nZXQoXCJzeW1ib2xcIik7XG4gICAgICAgIGNvbnN0IHNob3dBc3NldFBlcmNlbnQgPSBzZXR0aW5ncy5nZXQoXCJzaG93QXNzZXRQZXJjZW50XCIsIGZhbHNlKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcImNsaWNrYWJsZSBpcy1zb3J0YWJsZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImlzLWFjdGl2ZVwiOiB0aGlzLnN0YXRlLnNvcnRLZXkgPT09IFwiYWxwaGFiZXRpY1wiXG4gICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90b2dnbGVTb3J0T3JkZXIuYmluZCh0aGlzLCBcImFscGhhYmV0aWNcIil9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbXBvbmVudD1cInNwYW5cIiBjb250ZW50PVwiYWNjb3VudC5hc3NldFwiIC8+XG4gICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICA8dGhcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fdG9nZ2xlU29ydE9yZGVyLmJpbmQodGhpcywgXCJxdHlcIil9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFwiY2xpY2thYmxlIGlzLXNvcnRhYmxlXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaXMtYWN0aXZlXCI6IHRoaXMuc3RhdGUuc29ydEtleSA9PT0gXCJxdHlcIlxuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnF0eVwiIC8+XG4gICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICA8dGhcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fdG9nZ2xlU29ydE9yZGVyLmJpbmQodGhpcywgXCJwcmljZVZhbHVlXCIpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sdW1uLWhpZGUtc21hbGwgY2xpY2thYmxlIGlzLXNvcnRhYmxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XCJpcy1hY3RpdmVcIjogdGhpcy5zdGF0ZS5zb3J0S2V5ID09PSBcInByaWNlVmFsdWVcIn1cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5wcmljZVwiIC8+IChcbiAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBuYW1lPXtwcmVmZXJyZWRVbml0fSBub1RpcCAvPilcbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90b2dnbGVTb3J0T3JkZXIuYmluZCh0aGlzLCBcImNoYW5nZVZhbHVlXCIpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sdW1uLWhpZGUtc21hbGwgY2xpY2thYmxlIGlzLXNvcnRhYmxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XCJpcy1hY3RpdmVcIjogdGhpcy5zdGF0ZS5zb3J0S2V5ID09PSBcImNoYW5nZVZhbHVlXCJ9XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5ob3VyXzI0X3Nob3J0XCIgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90b2dnbGVTb3J0T3JkZXIuYmluZCh0aGlzLCBcInRvdGFsVmFsdWVcIil9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sdW1uLWhpZGUtc21hbGwgY2xpY2thYmxlIGlzLXNvcnRhYmxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XCJpcy1hY3RpdmVcIjogdGhpcy5zdGF0ZS5zb3J0S2V5ID09PSBcInRvdGFsVmFsdWVcIn1cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVXaXRoTGlua3NcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vTGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nPVwiYWNjb3VudC5lcV92YWx1ZV9oZWFkZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5cz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcHJlZmVycmVkVW5pdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnOiBcImFzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgbm9UaXBcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIHtzaG93QXNzZXRQZXJjZW50ID8gKFxuICAgICAgICAgICAgICAgICAgICA8dGhcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcInJpZ2h0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29tcG9uZW50PVwic3BhblwiIGNvbnRlbnQ9XCJhY2NvdW50LnBlcmNlbnRcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiaGVhZGVyLnBheW1lbnRzXCIgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UuYnV5XCIgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwibW9kYWwuZGVwb3NpdC5zdWJtaXRcIiAvPlxuICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJtb2RhbC53aXRoZHJhdy5zdWJtaXRcIiAvPlxuICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnRyYWRlXCIgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UuYm9ycm93X3Nob3J0XCIgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5zZXR0bGVcIiAvPlxuICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cIm1vZGFsLnJlc2VydmUuc3VibWl0XCIgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiPlxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93bkFzc2V0cyA9PSBcImFjdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJleGNoYW5nZS5oaWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImFjY291bnQucGVybS5zaG93XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7YWNjb3VudCwgaGlkZGVuQXNzZXRzLCBzZXR0aW5ncywgb3JkZXJzfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB7c2hvd25Bc3NldHN9ID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJlZmVycmVkVW5pdCA9XG4gICAgICAgICAgICBzZXR0aW5ncy5nZXQoXCJ1bml0XCIpIHx8IHRoaXMucHJvcHMuY29yZV9hc3NldC5nZXQoXCJzeW1ib2xcIik7XG5cbiAgICAgICAgbGV0IGNhbGxfb3JkZXJzID0gW10sXG4gICAgICAgICAgICBjb2xsYXRlcmFsID0ge30sXG4gICAgICAgICAgICBkZWJ0ID0ge307XG5cbiAgICAgICAgaWYgKGFjY291bnQudG9KUyAmJiBhY2NvdW50LmhhcyhcImNhbGxfb3JkZXJzXCIpKVxuICAgICAgICAgICAgY2FsbF9vcmRlcnMgPSBhY2NvdW50LmdldChcImNhbGxfb3JkZXJzXCIpLnRvSlMoKTtcbiAgICAgICAgbGV0IGluY2x1ZGVkUG9ydGZvbGlvTGlzdCwgaGlkZGVuUG9ydGZvbGlvTGlzdDtcbiAgICAgICAgbGV0IGFjY291bnRfYmFsYW5jZXMgPSBhY2NvdW50LmdldChcImJhbGFuY2VzXCIpO1xuICAgICAgICBsZXQgaW5jbHVkZWRCYWxhbmNlc0xpc3QgPSBJbW11dGFibGUuTGlzdCgpLFxuICAgICAgICAgICAgaGlkZGVuQmFsYW5jZXNMaXN0ID0gSW1tdXRhYmxlLkxpc3QoKTtcbiAgICAgICAgY2FsbF9vcmRlcnMuZm9yRWFjaChjYWxsSUQgPT4ge1xuICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QoY2FsbElEKTtcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIGxldCBjb2xsYXRlcmFsQXNzZXQgPSBwb3NpdGlvbi5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgIFwiY2FsbF9wcmljZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImJhc2VcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgaWYgKCFjb2xsYXRlcmFsW2NvbGxhdGVyYWxBc3NldF0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGF0ZXJhbFtjb2xsYXRlcmFsQXNzZXRdID0gcGFyc2VJbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi5nZXQoXCJjb2xsYXRlcmFsXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgMTBcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2xsYXRlcmFsW2NvbGxhdGVyYWxBc3NldF0gKz0gcGFyc2VJbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi5nZXQoXCJjb2xsYXRlcmFsXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgMTBcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGRlYnRBc3NldCA9IHBvc2l0aW9uLmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgXCJjYWxsX3ByaWNlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwicXVvdGVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgaWYgKCFkZWJ0W2RlYnRBc3NldF0pIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidFtkZWJ0QXNzZXRdID0gcGFyc2VJbnQocG9zaXRpb24uZ2V0KFwiZGVidFwiKSwgMTApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnRbZGVidEFzc2V0XSArPSBwYXJzZUludChwb3NpdGlvbi5nZXQoXCJkZWJ0XCIpLCAxMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYWNjb3VudF9iYWxhbmNlcykge1xuICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBiYWxhbmNlIG9iamVjdHMgdGhhdCBoYXZlIDAgYmFsYW5jZSBvciBhcmUgbm90IGluY2x1ZGVkIGluIG9wZW4gb3JkZXJzXG4gICAgICAgICAgICBhY2NvdW50X2JhbGFuY2VzID0gYWNjb3VudF9iYWxhbmNlcy5maWx0ZXIoKGEsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGJhbGFuY2VPYmplY3QgPSBDaGFpblN0b3JlLmdldE9iamVjdChhKTtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGJhbGFuY2VPYmplY3QgJiZcbiAgICAgICAgICAgICAgICAgICAgKCFiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIikgJiYgIW9yZGVyc1tpbmRleF0pXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gU2VwYXJhdGUgYmFsYW5jZXMgaW50byBoaWRkZW4gYW5kIGluY2x1ZGVkXG4gICAgICAgICAgICBhY2NvdW50X2JhbGFuY2VzLmZvckVhY2goKGEsIGFzc2V0X3R5cGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQoYXNzZXRfdHlwZSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgYXNzZXROYW1lID0gXCJcIjtcbiAgICAgICAgICAgICAgICBsZXQgZmlsdGVyID0gXCJcIjtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlciA9IHRoaXMuc3RhdGUuZmlsdGVyVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gU3RyaW5nKHRoaXMuc3RhdGUuZmlsdGVyVmFsdWUpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXROYW1lID0gYXNzZXQuZ2V0KFwic3ltYm9sXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB7aXNCaXRBc3NldH0gPSB1dGlscy5yZXBsYWNlTmFtZShhc3NldCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0JpdEFzc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWUgPSBcImJpdFwiICsgYXNzZXROYW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBoaWRkZW5Bc3NldHMuaW5jbHVkZXMoYXNzZXRfdHlwZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgYXNzZXROYW1lLmluY2x1ZGVzKGZpbHRlcilcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuQmFsYW5jZXNMaXN0ID0gaGlkZGVuQmFsYW5jZXNMaXN0LnB1c2goYSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhc3NldE5hbWUuaW5jbHVkZXMoZmlsdGVyKSkge1xuICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZEJhbGFuY2VzTGlzdCA9IGluY2x1ZGVkQmFsYW5jZXNMaXN0LnB1c2goYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcG9ydGZvbGlvSGlkZGVuQXNzZXRzQmFsYW5jZSA9IChcbiAgICAgICAgICAgIDxUb3RhbEJhbGFuY2VWYWx1ZSBub1RpcCBiYWxhbmNlcz17aGlkZGVuQmFsYW5jZXNMaXN0fSBoaWRlX2Fzc2V0IC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IHBvcnRmb2xpb0FjdGl2ZUFzc2V0c0JhbGFuY2UgPSAoXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWVcbiAgICAgICAgICAgICAgICBub1RpcFxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXtpbmNsdWRlZEJhbGFuY2VzTGlzdH1cbiAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgICBsZXQgb3JkZXJzVmFsdWUgPSAoXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWVcbiAgICAgICAgICAgICAgICBub1RpcFxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXtJbW11dGFibGUuTGlzdCgpfVxuICAgICAgICAgICAgICAgIG9wZW5PcmRlcnM9e29yZGVyc31cbiAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgICBsZXQgbWFyZ2luVmFsdWUgPSAoXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWVcbiAgICAgICAgICAgICAgICBub1RpcFxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXtJbW11dGFibGUuTGlzdCgpfVxuICAgICAgICAgICAgICAgIGRlYnQ9e2RlYnR9XG4gICAgICAgICAgICAgICAgY29sbGF0ZXJhbD17Y29sbGF0ZXJhbH1cbiAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgICBsZXQgZGVidFZhbHVlID0gKFxuICAgICAgICAgICAgPFRvdGFsQmFsYW5jZVZhbHVlXG4gICAgICAgICAgICAgICAgbm9UaXBcbiAgICAgICAgICAgICAgICBiYWxhbmNlcz17SW1tdXRhYmxlLkxpc3QoKX1cbiAgICAgICAgICAgICAgICBkZWJ0PXtkZWJ0fVxuICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgICAgIGxldCBjb2xsYXRlcmFsVmFsdWUgPSAoXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWVcbiAgICAgICAgICAgICAgICBub1RpcFxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXtJbW11dGFibGUuTGlzdCgpfVxuICAgICAgICAgICAgICAgIGNvbGxhdGVyYWw9e2NvbGxhdGVyYWx9XG4gICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCB0b3RhbFZhbHVlVGV4dCA9IChcbiAgICAgICAgICAgIDxUcmFuc2xhdGVXaXRoTGlua3NcbiAgICAgICAgICAgICAgICBub0xpbmtcbiAgICAgICAgICAgICAgICBzdHJpbmc9XCJhY2NvdW50LnRvdGFsXCJcbiAgICAgICAgICAgICAgICBrZXlzPXtbe3R5cGU6IFwiYXNzZXRcIiwgdmFsdWU6IHByZWZlcnJlZFVuaXQsIGFyZzogXCJhc3NldFwifV19XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGluY2x1ZGVkUG9ydGZvbGlvQmFsYW5jZSA9IChcbiAgICAgICAgICAgIDx0ciBrZXk9XCJwb3J0Zm9saW9cIiBjbGFzc05hbWU9XCJ0b3RhbC12YWx1ZVwiPlxuICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiMlwiIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxuICAgICAgICAgICAgICAgICAgICB7dG90YWxWYWx1ZVRleHR9XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIiAvPlxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiIC8+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fT5cbiAgICAgICAgICAgICAgICAgICAge3BvcnRmb2xpb0FjdGl2ZUFzc2V0c0JhbGFuY2V9XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj1cIjlcIiAvPlxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBoaWRkZW5Qb3J0Zm9saW9CYWxhbmNlID0gKFxuICAgICAgICAgICAgPHRyIGtleT1cInBvcnRmb2xpb1wiIGNsYXNzTmFtZT1cInRvdGFsLXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49XCIyXCIgc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XG4gICAgICAgICAgICAgICAgICAgIHt0b3RhbFZhbHVlVGV4dH1cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiIC8+XG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCIgLz5cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxuICAgICAgICAgICAgICAgICAgICB7cG9ydGZvbGlvSGlkZGVuQXNzZXRzQmFsYW5jZX1cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiOVwiIC8+XG4gICAgICAgICAgICA8L3RyPlxuICAgICAgICApO1xuXG4gICAgICAgIGluY2x1ZGVkUG9ydGZvbGlvTGlzdCA9IChcbiAgICAgICAgICAgIDxBY2NvdW50UG9ydGZvbGlvTGlzdFxuICAgICAgICAgICAgICAgIGJhbGFuY2VMaXN0PXtpbmNsdWRlZEJhbGFuY2VzTGlzdH1cbiAgICAgICAgICAgICAgICBvcHRpb25hbEFzc2V0cz17XG4gICAgICAgICAgICAgICAgICAgICF0aGlzLnN0YXRlLmZpbHRlclZhbHVlID8gdGhpcy5zdGF0ZS5hbHdheXNTaG93QXNzZXRzIDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt0cnVlfVxuICAgICAgICAgICAgICAgIHByZWZlcnJlZFVuaXQ9e3ByZWZlcnJlZFVuaXR9XG4gICAgICAgICAgICAgICAgY29yZUFzc2V0PXt0aGlzLnByb3BzLmNvcmVfYXNzZXR9XG4gICAgICAgICAgICAgICAgY29yZVN5bWJvbD17dGhpcy5wcm9wcy5jb3JlX2Fzc2V0LmdldChcInN5bWJvbFwiKX1cbiAgICAgICAgICAgICAgICBoaWRkZW5Bc3NldHM9e2hpZGRlbkFzc2V0c31cbiAgICAgICAgICAgICAgICBvcmRlcnM9e29yZGVyc31cbiAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnR9XG4gICAgICAgICAgICAgICAgc29ydEtleT17dGhpcy5zdGF0ZS5zb3J0S2V5fVxuICAgICAgICAgICAgICAgIHNvcnREaXJlY3Rpb249e3RoaXMuc3RhdGUuc29ydERpcmVjdGlvbn1cbiAgICAgICAgICAgICAgICBpc015QWNjb3VudD17dGhpcy5wcm9wcy5pc015QWNjb3VudH1cbiAgICAgICAgICAgICAgICBiYWxhbmNlcz17dGhpcy5wcm9wcy5iYWxhbmNlc31cbiAgICAgICAgICAgICAgICBoZWFkZXI9e3RoaXMuZ2V0SGVhZGVyKCl9XG4gICAgICAgICAgICAgICAgZXh0cmFSb3c9e2luY2x1ZGVkUG9ydGZvbGlvQmFsYW5jZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgaGlkZGVuUG9ydGZvbGlvTGlzdCA9IChcbiAgICAgICAgICAgIDxBY2NvdW50UG9ydGZvbGlvTGlzdFxuICAgICAgICAgICAgICAgIGJhbGFuY2VMaXN0PXtoaWRkZW5CYWxhbmNlc0xpc3R9XG4gICAgICAgICAgICAgICAgb3B0aW9uYWxBc3NldHM9e1xuICAgICAgICAgICAgICAgICAgICAhdGhpcy5zdGF0ZS5maWx0ZXJWYWx1ZSA/IHRoaXMuc3RhdGUuYWx3YXlzU2hvd0Fzc2V0IDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aXNpYmxlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICBwcmVmZXJyZWRVbml0PXtwcmVmZXJyZWRVbml0fVxuICAgICAgICAgICAgICAgIGNvcmVTeW1ib2w9e3RoaXMucHJvcHMuY29yZV9hc3NldC5nZXQoXCJzeW1ib2xcIil9XG4gICAgICAgICAgICAgICAgc2V0dGluZ3M9e3NldHRpbmdzfVxuICAgICAgICAgICAgICAgIGhpZGRlbkFzc2V0cz17aGlkZGVuQXNzZXRzfVxuICAgICAgICAgICAgICAgIG9yZGVycz17b3JkZXJzfVxuICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudH1cbiAgICAgICAgICAgICAgICBzb3J0S2V5PXt0aGlzLnN0YXRlLnNvcnRLZXl9XG4gICAgICAgICAgICAgICAgc29ydERpcmVjdGlvbj17dGhpcy5zdGF0ZS5zb3J0RGlyZWN0aW9ufVxuICAgICAgICAgICAgICAgIGlzTXlBY2NvdW50PXt0aGlzLnByb3BzLmlzTXlBY2NvdW50fVxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXt0aGlzLnByb3BzLmJhbGFuY2VzfVxuICAgICAgICAgICAgICAgIGhlYWRlcj17dGhpcy5nZXRIZWFkZXIoKX1cbiAgICAgICAgICAgICAgICBleHRyYVJvdz17aGlkZGVuUG9ydGZvbGlvQmFsYW5jZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gYWRkIHVuaWNvZGUgbm9uLWJyZWFraW5nIHNwYWNlIGFzIHN1YnRleHQgdG8gQWN0aXZpdHkgVGFiIHRvIGVuc3VyZSB0aGF0IGFsbCB0aXRsZXMgYXJlIGFsaWduZWRcbiAgICAgICAgLy8gaG9yaXpvbnRhbGx5XG4gICAgICAgIGNvbnN0IGhpZGRlblN1YlRleHQgPSBcIlxcdTAwYTBcIjtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgYXBwLXRhYmxlcyBuby1wYWRkaW5nXCIgcmVmPVwiYXBwVGFibGVzXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1jb250YWluZXIgZ2VuZXJpYy1ib3JkZXJlZC1ib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEFjdGl2ZVRhYj17MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmc9XCJvdmVydmlld1RhYlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWNjb3VudC10YWJzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2xhc3M9XCJhY2NvdW50LW92ZXJ2aWV3IG5vLXBhZGRpbmcgYm9yZGVyZWQtaGVhZGVyIGNvbnRlbnQtYmxvY2tcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LnBvcnRmb2xpb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRleHQ9e3BvcnRmb2xpb0FjdGl2ZUFzc2V0c0JhbGFuY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1zZWxlY3RvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWx0ZXIgaW5saW5lLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJGaWx0ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5faGFuZGxlRmlsdGVySW5wdXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3RvciBpbmxpbmUtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFwiaW5saW5lLWJsb2NrXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3duQXNzZXRzICE9IFwiYWN0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgIT0gXCJhY3RpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5fY2hhbmdlU2hvd25Bc3NldHMuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWN0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgpID0+IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuaGlkZV9oaWRkZW5cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtoaWRkZW5CYWxhbmNlc0xpc3Quc2l6ZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbmxpbmUtYmxvY2tcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgIT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaGlkZGVuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgIT0gXCJoaWRkZW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX2NoYW5nZVNob3duQXNzZXRzLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaGlkZGVuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCkgPT4ge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5zaG93X2hpZGRlblwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMoXCJpbmxpbmUtYmxvY2tcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5hY3RpdmU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgIT0gXCJ2aXN1YWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93bkFzc2V0cyAhPSBcInZpc3VhbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9jaGFuZ2VTaG93bkFzc2V0cy5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ2aXN1YWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCkgPT4ge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5zaG93X3Zpc3VhbFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Nob3duQXNzZXRzICE9IFwidmlzdWFsXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93bkFzc2V0cyA9PT0gXCJoaWRkZW5cIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZGVuQmFsYW5jZXNMaXN0LnNpemUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZGVuUG9ydGZvbGlvTGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZFBvcnRmb2xpb0xpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50VHJlZW1hcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VPYmplY3RzPXtpbmNsdWRlZEJhbGFuY2VzTGlzdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC5vcGVuX29yZGVyc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRleHQ9e29yZGVyc1ZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRPcmRlcnMgey4uLnRoaXMucHJvcHN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT1cInRvdGFsLXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbFNwYW49XCI4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dG90YWxWYWx1ZVRleHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sU3Bhbj1cIjFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvcmRlcnNWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmlzTXlBY2NvdW50ID8gPHRkIC8+IDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQWNjb3VudE9yZGVycz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LmNvbGxhdGVyYWxzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViVGV4dD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZ2xvYmFsTWFyZ2luU3RhdHVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttYXJnaW5WYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdlbmVyaWMtYm9yZGVyZWQtYm94XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPE1hcmdpblBvc2l0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRVbml0PXtwcmVmZXJyZWRVbml0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJkYXNoYm9hcmQtdGFibGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsT3JkZXJzPXtjYWxsX29yZGVyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9XCJ0b3RhbC12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnt0b3RhbFZhbHVlVGV4dH08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2RlYnRWYWx1ZX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLW1lZGl1bVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb2xsYXRlcmFsVmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e21hcmdpblZhbHVlfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiNFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9NYXJnaW5Qb3NpdGlvbnM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC5hY3Rpdml0eVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRleHQ9e2hpZGRlblN1YlRleHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UmVjZW50VHJhbnNhY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50c0xpc3Q9e0ltbXV0YWJsZS5mcm9tSlMoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuZ2V0KFwiaWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFjdFZpZXc9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd01vcmU9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxsSGVpZ2h0PXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ9ezEwMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJzPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzaGJvYXJkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWNjb3VudC5nZXQoXCJwcm9wb3NhbHNcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmdldChcInByb3Bvc2Fsc1wiKS5zaXplID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImV4cGxvcmVyLnByb3Bvc2Fscy50aXRsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUZXh0PXtTdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5nZXQoXCJwcm9wb3NhbHNcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhY2NvdW50LmdldChcInByb3Bvc2Fsc1wiKS5zaXplXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFByb3Bvc2Fsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImRhc2hib2FyZC10YWJsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudC5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuQWNjb3VudE92ZXJ2aWV3ID0gQXNzZXRXcmFwcGVyKEFjY291bnRPdmVydmlldywge3Byb3BOYW1lczogW1wiY29yZV9hc3NldFwiXX0pO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBY2NvdW50T3ZlcnZpZXdXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiA8QmFsYW5jZVdyYXBwZXIgey4uLnRoaXMucHJvcHN9IHdyYXA9e0FjY291bnRPdmVydmlld30gLz47XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IEZvcm1hdHRlZEFzc2V0IGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZEFzc2V0XCI7XG5pbXBvcnQgRm9ybWF0dGVkUHJpY2UgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkUHJpY2VcIjtcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcbmltcG9ydCBBc3NldFdyYXBwZXIgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXRXcmFwcGVyXCI7XG5pbXBvcnQgQXNzZXRJbWFnZSBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldEltYWdlXCI7XG5pbXBvcnQgQXNzZXROYW1lIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0TmFtZVwiO1xuaW1wb3J0IEJvcnJvd01vZGFsIGZyb20gXCIuLi9Nb2RhbC9Cb3Jyb3dNb2RhbFwiO1xuaW1wb3J0IFdhbGxldEFwaSBmcm9tIFwiYXBpL1dhbGxldEFwaVwiO1xuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcbmltcG9ydCBXYWxsZXREYiBmcm9tIFwic3RvcmVzL1dhbGxldERiXCI7XG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xuaW1wb3J0IFRvdGFsQmFsYW5jZVZhbHVlIGZyb20gXCIuLi9VdGlsaXR5L1RvdGFsQmFsYW5jZVZhbHVlXCI7XG5pbXBvcnQge0xpc3R9IGZyb20gXCJpbW11dGFibGVcIjtcbmltcG9ydCB7TGlua30gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcbmltcG9ydCBUcmFuc2xhdGVXaXRoTGlua3MgZnJvbSBcIi4uL1V0aWxpdHkvVHJhbnNsYXRlV2l0aExpbmtzXCI7XG5pbXBvcnQgSW1tdXRhYmxlIGZyb20gXCJpbW11dGFibGVcIjtcblxuY29uc3QgYWxpZ25SaWdodCA9IHt0ZXh0QWxpZ246IFwicmlnaHRcIn07XG5jb25zdCBhbGlnbkxlZnQgPSB7dGV4dEFsaWduOiBcImxlZnRcIn07XG4vKipcbiAqICBHaXZlbiBhIGNvbGxhdGVyYWwgcG9zaXRpb24gb2JqZWN0IChjYWxsIG9yZGVyKSBhbmQgYWNjb3VudCxcbiAqICBkaXNwbGF5IGl0IGluIGEgcHJldHR5IHdheVxuICpcbiAqICBFeHBlY3RzIHByb3BlcnR5LCAnb2JqZWN0JyB3aGljaCBzaG91bGQgYmUgYSBjYWxsIG9yZGVyIGlkXG4gKiAgYW5kIGFub3RoZXIgcHJvcGVydHkgY2FsbGVkICdhY2NvdW50JyB3aGljaCBzaG91bGQgYmUgYW5cbiAqICBhY2NvdW50LlxuICovXG5cbmNsYXNzIE1hcmdpblBvc2l0aW9uIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBkZWJ0QXNzZXQ6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkLFxuICAgICAgICBjb2xsYXRlcmFsQXNzZXQ6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIHRlbXBDb21wb25lbnQ6IFwidHJcIlxuICAgIH07XG5cbiAgICBfb25VcGRhdGVQb3NpdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IHJlZiA9XG4gICAgICAgICAgICBcImNwX21vZGFsX1wiICtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub2JqZWN0LmdldEluKFtcImNhbGxfcHJpY2VcIiwgXCJxdW90ZVwiLCBcImFzc2V0X2lkXCJdKTtcbiAgICAgICAgdGhpcy5yZWZzW3JlZl0uc2hvdygpO1xuICAgIH1cblxuICAgIF9vbkNsb3NlUG9zaXRpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGxldCB0ciA9IFdhbGxldEFwaS5uZXdfdHJhbnNhY3Rpb24oKTtcblxuICAgICAgICB0ci5hZGRfdHlwZV9vcGVyYXRpb24oXCJjYWxsX29yZGVyX3VwZGF0ZVwiLCB7XG4gICAgICAgICAgICBmZWU6IHtcbiAgICAgICAgICAgICAgICBhbW91bnQ6IDAsXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5kaW5nX2FjY291bnQ6IHRoaXMucHJvcHMub2JqZWN0LmdldChcImJvcnJvd2VyXCIpLFxuICAgICAgICAgICAgZGVsdGFfY29sbGF0ZXJhbDoge1xuICAgICAgICAgICAgICAgIGFtb3VudDogLXRoaXMucHJvcHMub2JqZWN0LmdldChcImNvbGxhdGVyYWxcIiksXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ6IHRoaXMucHJvcHMub2JqZWN0LmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgXCJjYWxsX3ByaWNlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYmFzZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImFzc2V0X2lkXCJcbiAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlbHRhX2RlYnQ6IHtcbiAgICAgICAgICAgICAgICBhbW91bnQ6IC10aGlzLnByb3BzLm9iamVjdC5nZXQoXCJkZWJ0XCIpLFxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiB0aGlzLnByb3BzLm9iamVjdC5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgIFwiY2FsbF9wcmljZVwiLFxuICAgICAgICAgICAgICAgICAgICBcInF1b3RlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFdhbGxldERiLnByb2Nlc3NfdHJhbnNhY3Rpb24odHIsIG51bGwsIHRydWUpO1xuICAgIH1cblxuICAgIC8vIGhvdyBtYW55IHVuaXRzIG9mIHRoZSBkZWJ0IGFzc2V0IHRoZSBib3Jyb3dlciBoYXNcbiAgICAvLyBpbiBoaXMvaGVyIHdhbGxldC4gVGhpcyBoYXMgbm90aGluZyB0byBkbyB3aXRoXG4gICAgLy8gaG93IG1hbnkgb2YgdGhlIGFzc2V0IHRoZSBib3Jyb3dlciBoYXMgYm9ycm93ZWQuXG4gICAgX2dldEJhbGFuY2UoKSB7XG4gICAgICAgIGxldCBhY2NvdW50ID0gdGhpcy5wcm9wcy5hY2NvdW50O1xuICAgICAgICAvLyB0aGUgZGVidCBhc3NldCBpZCB3aGljaCB3ZSB3YW50IHRvIGRpc3BsYXlcbiAgICAgICAgbGV0IHJvd19hc3NldF9pZCA9IHRoaXMucHJvcHMub2JqZWN0LmdldEluKFtcbiAgICAgICAgICAgIFwiY2FsbF9wcmljZVwiLFxuICAgICAgICAgICAgXCJxdW90ZVwiLFxuICAgICAgICAgICAgXCJhc3NldF9pZFwiXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGxldCBhY2NvdW50X2JhbGFuY2VzID0gYWNjb3VudC5nZXQoXCJiYWxhbmNlc1wiKTtcblxuICAgICAgICBsZXQgYmFsYW5jZSA9IDA7XG5cbiAgICAgICAgLy8gcmVhbGx5IHRoaXMgaXRlcmF0aW9uIHNob3VsZCBiZSBjYWxsZWQgb25jZSwgYW5kXG4gICAgICAgIC8vIGVhY2ggYXNzZXRfaWQgbWF0Y2hlZCBvbmNlIHdpdGggaXRzIGJhbGFuY2VcblxuICAgICAgICAvLyBmb3IgZXZlcnkgZGVidCB0aGUgYWNjb3VudCBoYXMsIHdlIGl0ZXJhdGVcbiAgICAgICAgLy8gdGhyb3VnaCBldmVyeSBiYWxhbmNlIHRoZSB1c2VyIGhhc1xuICAgICAgICBpZiAoYWNjb3VudF9iYWxhbmNlcykge1xuICAgICAgICAgICAgYWNjb3VudF9iYWxhbmNlcy5mb3JFYWNoKChhLCBhc3NldF90eXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGFzc2V0X3R5cGUgPT0gcm93X2Fzc2V0X2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBiYWxhbmNlT2JqZWN0ID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QoYSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBiYWxhbmNlXG4gICAgICAgICAgICAgICAgICAgIGJhbGFuY2UgPSBiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIGFjY291bnQgZG9lc24ndCBob2xkXG4gICAgICAgIC8vIGFueSBvZiB0aGUgYXNzZXQgaGVyZVxuICAgICAgICByZXR1cm4gYmFsYW5jZTtcbiAgICB9XG5cbiAgICBfZ2V0RmVlZFByaWNlKCkge1xuICAgICAgICBpZiAoIXRoaXMucHJvcHMpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDEgL1xuICAgICAgICAgICAgdXRpbHMuZ2V0X2Fzc2V0X3ByaWNlKFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZGVidEFzc2V0LmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICBcImN1cnJlbnRfZmVlZFwiLFxuICAgICAgICAgICAgICAgICAgICBcInNldHRsZW1lbnRfcHJpY2VcIixcbiAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImFtb3VudFwiXG4gICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jb2xsYXRlcmFsQXNzZXQsXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5kZWJ0QXNzZXQuZ2V0SW4oW1xuICAgICAgICAgICAgICAgICAgICBcImJpdGFzc2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiY3VycmVudF9mZWVkXCIsXG4gICAgICAgICAgICAgICAgICAgIFwic2V0dGxlbWVudF9wcmljZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImJhc2VcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhbW91bnRcIlxuICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZGVidEFzc2V0XG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgX2dldENvbGxhdGVyYWxSYXRpbygpIHtcbiAgICAgICAgY29uc3QgY28gPSB0aGlzLnByb3BzLm9iamVjdC50b0pTKCk7XG4gICAgICAgIGNvbnN0IGMgPSB1dGlscy5nZXRfYXNzZXRfYW1vdW50KFxuICAgICAgICAgICAgY28uY29sbGF0ZXJhbCxcbiAgICAgICAgICAgIHRoaXMucHJvcHMuY29sbGF0ZXJhbEFzc2V0XG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGQgPSB1dGlscy5nZXRfYXNzZXRfYW1vdW50KGNvLmRlYnQsIHRoaXMucHJvcHMuZGVidEFzc2V0KTtcbiAgICAgICAgcmV0dXJuIGMgLyAoZCAvIHRoaXMuX2dldEZlZWRQcmljZSgpKTtcbiAgICB9XG5cbiAgICBfZ2V0TVIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICB0aGlzLnByb3BzLmRlYnRBc3NldC5nZXRJbihbXG4gICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxuICAgICAgICAgICAgICAgIFwiY3VycmVudF9mZWVkXCIsXG4gICAgICAgICAgICAgICAgXCJtYWludGVuYW5jZV9jb2xsYXRlcmFsX3JhdGlvXCJcbiAgICAgICAgICAgIF0pIC8gMTAwMFxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9nZXRTdGF0dXNDbGFzcygpIHtcbiAgICAgICAgbGV0IGNyID0gdGhpcy5fZ2V0Q29sbGF0ZXJhbFJhdGlvKCk7XG4gICAgICAgIGNvbnN0IG1yID0gdGhpcy5fZ2V0TVIoKTtcblxuICAgICAgICBpZiAoaXNOYU4oY3IpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKGNyIDwgbXIpIHtcbiAgICAgICAgICAgIHJldHVybiBcImRhbmdlclwiO1xuICAgICAgICB9IGVsc2UgaWYgKGNyIDwgbXIgKyAwLjUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIndhcm5pbmdcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2dldENSVGlwKCkge1xuICAgICAgICBjb25zdCBzdGF0dXNDbGFzcyA9IHRoaXMuX2dldFN0YXR1c0NsYXNzKCk7XG4gICAgICAgIGNvbnN0IG1yID0gdGhpcy5fZ2V0TVIoKTtcbiAgICAgICAgaWYgKCFzdGF0dXNDbGFzcyB8fCBzdGF0dXNDbGFzcyA9PT0gXCJcIikgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgaWYgKHN0YXR1c0NsYXNzID09PSBcImRhbmdlclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gY291bnRlcnBhcnQudHJhbnNsYXRlKFwidG9vbHRpcC5jcl9kYW5nZXJcIiwge21yfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzQ2xhc3MgPT09IFwid2FybmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gY291bnRlcnBhcnQudHJhbnNsYXRlKFwidG9vbHRpcC5jcl93YXJuaW5nXCIsIHttcn0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7ZGVidEFzc2V0LCBjb2xsYXRlcmFsQXNzZXQsIG9iamVjdH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCBjbyA9IG9iamVjdC50b0pTKCk7XG4gICAgICAgIGNvbnN0IGNyID0gdGhpcy5fZ2V0Q29sbGF0ZXJhbFJhdGlvKCk7XG4gICAgICAgIGNvbnN0IGQgPSB1dGlscy5nZXRfYXNzZXRfYW1vdW50KGNvLmRlYnQsIHRoaXMucHJvcHMuZGVidEFzc2V0KTtcbiAgICAgICAgY29uc3QgYmFsYW5jZSA9IHRoaXMuX2dldEJhbGFuY2UoKTtcblxuICAgICAgICBjb25zdCBzdGF0dXNDbGFzcyA9IHRoaXMuX2dldFN0YXR1c0NsYXNzKCk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9XCJtYXJnaW4tcm93XCI+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnbkxlZnR9PlxuICAgICAgICAgICAgICAgICAgICA8QXNzZXRJbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZU5vbmVUb0J0cz17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aD17MzB9XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtkZWJ0QXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8TGluayB0bz17YC9hc3NldC8ke2RlYnRBc3NldC5nZXQoXCJzeW1ib2xcIil9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lIG5vVGlwIG5hbWU9e2RlYnRBc3NldC5nZXQoXCJzeW1ib2xcIil9IC8+XG4gICAgICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17YWxpZ25SaWdodH0+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtiYWxhbmNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2NvLmNhbGxfcHJpY2UucXVvdGUuYXNzZXRfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduUmlnaHR9PlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17Y28uZGVidH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtjby5jYWxsX3ByaWNlLnF1b3RlLmFzc2V0X2lkfVxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1tZWRpdW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsT2Zmc2V0PXs1fVxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtjby5jb2xsYXRlcmFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2NvLmNhbGxfcHJpY2UuYmFzZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZFxuICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e3RoaXMuX2dldENSVGlwKCl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XCJjZW50ZXItY29udGVudCBcIiArIHN0YXR1c0NsYXNzfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge3V0aWxzLmZvcm1hdF9udW1iZXIoY3IsIDIpfVxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fT5cbiAgICAgICAgICAgICAgICAgICAgPFRvdGFsQmFsYW5jZVZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICBub1RpcFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZXM9e0xpc3QoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnQ9e3tbZGVidEFzc2V0LmdldChcImlkXCIpXTogY28uZGVidH19XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXRlcmFsPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NvbGxhdGVyYWxBc3NldC5nZXQoXCJpZFwiKV06IHBhcnNlSW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjby5jb2xsYXRlcmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduUmlnaHR9IGNsYXNzTmFtZT17XCJjb2x1bW4taGlkZS1zbWFsbFwifT5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZFByaWNlXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlX2Ftb3VudD17Y28uY2FsbF9wcmljZS5iYXNlLmFtb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VfYXNzZXQ9e2NvLmNhbGxfcHJpY2UuYmFzZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlX2Ftb3VudD17Y28uY2FsbF9wcmljZS5xdW90ZS5hbW91bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICBxdW90ZV9hc3NldD17Y28uY2FsbF9wcmljZS5xdW90ZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfc3ltYm9sc1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9e1wiY29sdW1uLWhpZGUtc21hbGxcIn0+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRQcmljZVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9hbW91bnQ9e2RlYnRBc3NldC5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY3VycmVudF9mZWVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZXR0bGVtZW50X3ByaWNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhbW91bnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgXSl9XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlX2Fzc2V0PXtjby5jYWxsX3ByaWNlLnF1b3RlLmFzc2V0X2lkfVxuICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYW1vdW50PXtkZWJ0QXNzZXQuZ2V0SW4oW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImN1cnJlbnRfZmVlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2V0dGxlbWVudF9wcmljZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicXVvdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFtb3VudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBdKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlX2Fzc2V0PXtjby5jYWxsX3ByaWNlLmJhc2UuYXNzZXRfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlX3N5bWJvbHNcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1wiY2VudGVyLWNvbnRlbnQgY29sdW1uLWhpZGUtc21hbGxcIn1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e2FsaWduTGVmdH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRQcmljZVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9hbW91bnQ9e2NvLmNhbGxfcHJpY2UuYmFzZS5hbW91bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlX2Fzc2V0PXtjby5jYWxsX3ByaWNlLmJhc2UuYXNzZXRfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBxdW90ZV9hbW91bnQ9e2NvLmNhbGxfcHJpY2UucXVvdGUuYW1vdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYXNzZXQ9e2NvLmNhbGxfcHJpY2UucXVvdGUuYXNzZXRfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlX3ZhbHVlXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICB7LyogPHRkPjxBc3NldE5hbWUgbmFtZT17ZGVidEFzc2V0LmdldChcInN5bWJvbFwiKX0gLz4vPEFzc2V0TmFtZSBuYW1lPXtjb2xsYXRlcmFsQXNzZXQuZ2V0KFwic3ltYm9sXCIpfSAvPjwvdGQ+ICovfVxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19PlxuICAgICAgICAgICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgdG89e2AvbWFya2V0LyR7ZGVidEFzc2V0LmdldChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN5bWJvbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICApfV8ke2NvbGxhdGVyYWxBc3NldC5nZXQoXCJzeW1ib2xcIil9YH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwidHJhZGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMudHJhZGUudHJhZGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5SaWdodDogNX19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJsZWZ0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGlwPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLnVwZGF0ZV9wb3NpdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiA1fX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgb25DbGljaz17dGhpcy5fb25VcGRhdGVQb3NpdGlvbi5iaW5kKHRoaXMpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiYWRqdXN0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5hZGp1c3RcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHggcm90YXRlOTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwibGVmdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRpcD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5jbG9zZV9wb3NpdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthbW91bnQ6IGQsIGFzc2V0OiBkZWJ0QXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogNX19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIG9uQ2xpY2s9e3RoaXMuX29uQ2xvc2VQb3NpdGlvbi5iaW5kKHRoaXMpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5jcm9zc19jaXJjbGUuY2xvc2VfcG9zaXRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7ZGVidEFzc2V0ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEJvcnJvd01vZGFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtcImNwX21vZGFsX1wiICsgY28uY2FsbF9wcmljZS5xdW90ZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RhbElkPXtcImNwX21vZGFsX1wiICsgY28uY2FsbF9wcmljZS5xdW90ZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZV9hc3NldD17Y28uY2FsbF9wcmljZS5xdW90ZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNraW5nX2Fzc2V0PXtkZWJ0QXNzZXQuZ2V0SW4oW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJpdGFzc2V0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3B0aW9uc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNob3J0X2JhY2tpbmdfYXNzZXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8L3RyPlxuICAgICAgICApO1xuICAgIH1cbn1cbk1hcmdpblBvc2l0aW9uID0gQmluZFRvQ2hhaW5TdGF0ZShNYXJnaW5Qb3NpdGlvbik7XG5cbmNsYXNzIE1hcmdpblBvc2l0aW9uV3JhcHBlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgb2JqZWN0OiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge29iamVjdCwgYWNjb3VudH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBsZXQgZGVidEFzc2V0ID0gb2JqZWN0LmdldEluKFtcImNhbGxfcHJpY2VcIiwgXCJxdW90ZVwiLCBcImFzc2V0X2lkXCJdKTtcbiAgICAgICAgbGV0IGNvbGxhdGVyYWxBc3NldCA9IG9iamVjdC5nZXRJbihbXCJjYWxsX3ByaWNlXCIsIFwiYmFzZVwiLCBcImFzc2V0X2lkXCJdKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPE1hcmdpblBvc2l0aW9uXG4gICAgICAgICAgICAgICAgZGVidEFzc2V0PXtkZWJ0QXNzZXR9XG4gICAgICAgICAgICAgICAgY29sbGF0ZXJhbEFzc2V0PXtjb2xsYXRlcmFsQXNzZXR9XG4gICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5NYXJnaW5Qb3NpdGlvbldyYXBwZXIgPSBCaW5kVG9DaGFpblN0YXRlKE1hcmdpblBvc2l0aW9uV3JhcHBlcik7XG5cbmNsYXNzIE1hcmdpblBvc2l0aW9uUGxhY2VIb2xkZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGRlYnRBc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWQsXG4gICAgICAgIGNvbGxhdGVyYWxBc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgdGVtcENvbXBvbmVudDogXCJ0clwiXG4gICAgfTtcblxuICAgIF9vblVwZGF0ZVBvc2l0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsZXQgcmVmID0gXCJjcF9tb2RhbF9cIiArIHRoaXMucHJvcHMuZGVidEFzc2V0LmdldChcImlkXCIpO1xuICAgICAgICB0aGlzLnJlZnNbcmVmXS5zaG93KCk7XG4gICAgfVxuXG4gICAgX2dldEZlZWRQcmljZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAxIC9cbiAgICAgICAgICAgIHV0aWxzLmdldF9hc3NldF9wcmljZShcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmRlYnRBc3NldC5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJjdXJyZW50X2ZlZWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzZXR0bGVtZW50X3ByaWNlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwicXVvdGVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhbW91bnRcIlxuICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY29sbGF0ZXJhbEFzc2V0LFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZGVidEFzc2V0LmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICBcImN1cnJlbnRfZmVlZFwiLFxuICAgICAgICAgICAgICAgICAgICBcInNldHRsZW1lbnRfcHJpY2VcIixcbiAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYW1vdW50XCJcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmRlYnRBc3NldFxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHtkZWJ0QXNzZXQsIGNvbGxhdGVyYWxBc3NldCwgYWNjb3VudH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIC8vIGdldCB0aGUgYmFsYW5jZVxuXG4gICAgICAgIC8vIHRoZSBkZWJ0IGFzc2V0IGlkIHdoaWNoIHdlIHdhbnQgdG8gZGlzcGxheVxuICAgICAgICBsZXQgcm93X2Fzc2V0X2lkID0gZGVidEFzc2V0LmdldChcImlkXCIpO1xuXG4gICAgICAgIGxldCBhY2NvdW50X2JhbGFuY2VzID0gYWNjb3VudC5nZXQoXCJiYWxhbmNlc1wiKTtcblxuICAgICAgICBsZXQgYmFsYW5jZSA9IDA7XG5cbiAgICAgICAgLy8gcmVhbGx5IHRoaXMgaXRlcmF0aW9uIHNob3VsZCBiZSBjYWxsZWQgb25jZSwgYW5kXG4gICAgICAgIC8vIGVhY2ggYXNzZXRfaWQgbWF0Y2hlZCBvbmNlIHdpdGggaXRzIGJhbGFuY2VcblxuICAgICAgICAvLyBmb3IgZXZlcnkgZGVidCB0aGUgYWNjb3VudCBoYXMsIHdlIGl0ZXJhdGVcbiAgICAgICAgLy8gdGhyb3VnaCBldmVyeSBiYWxhbmNlIHRoZSB1c2VyIGhhc1xuICAgICAgICBpZiAoYWNjb3VudF9iYWxhbmNlcykge1xuICAgICAgICAgICAgYWNjb3VudF9iYWxhbmNlcy5mb3JFYWNoKChhLCBhc3NldF90eXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGFzc2V0X3R5cGUgPT0gcm93X2Fzc2V0X2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBiYWxhbmNlT2JqZWN0ID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QoYSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBiYWxhbmNlXG4gICAgICAgICAgICAgICAgICAgIGJhbGFuY2UgPSBiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT1cIm1hcmdpbi1yb3dcIj5cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduTGVmdH0+XG4gICAgICAgICAgICAgICAgICAgIDxBc3NldEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlTm9uZVRvQnRzPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoPXszMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2RlYnRBc3NldC5nZXQoXCJzeW1ib2xcIil9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL2Fzc2V0LyR7ZGVidEFzc2V0LmdldChcInN5bWJvbFwiKX1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWUgbm9UaXAgbmFtZT17ZGVidEFzc2V0LmdldChcInN5bWJvbFwiKX0gLz5cbiAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fT5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2JhbGFuY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17ZGVidEFzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fT5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9ezB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17ZGVidEFzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1tZWRpdW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsT2Zmc2V0PXs1fVxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXswfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2NvbGxhdGVyYWxBc3NldC5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZCAvPlxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17YWxpZ25SaWdodH0gLz5cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduUmlnaHR9IGNsYXNzTmFtZT17XCJjb2x1bW4taGlkZS1zbWFsbFwifSAvPlxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17YWxpZ25SaWdodH0gY2xhc3NOYW1lPXtcImNvbHVtbi1oaWRlLXNtYWxsXCJ9IC8+XG4gICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XCJjZW50ZXItY29udGVudCBjb2x1bW4taGlkZS1zbWFsbFwifVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17YWxpZ25MZWZ0fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgey8qIDx0ZD48QXNzZXROYW1lIG5hbWU9e2RlYnRBc3NldC5nZXQoXCJzeW1ib2xcIil9IC8+LzxBc3NldE5hbWUgbmFtZT17Y29sbGF0ZXJhbEFzc2V0LmdldChcInN5bWJvbFwiKX0gLz48L3RkPiAqL31cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwiY2VudGVyXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgPExpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvPXtgL21hcmtldC8ke2RlYnRBc3NldC5nZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzeW1ib2xcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1fJHtjb2xsYXRlcmFsQXNzZXQuZ2V0KFwic3ltYm9sXCIpfWB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInRyYWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLnRyYWRlLnRyYWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luUmlnaHQ6IDV9fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwibGVmdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRpcD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC51cGRhdGVfcG9zaXRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogNX19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIG9uQ2xpY2s9e3RoaXMuX29uVXBkYXRlUG9zaXRpb24uYmluZCh0aGlzKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImFkanVzdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMuYWRqdXN0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4IHJvdGF0ZTkwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAge2RlYnRBc3NldCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxCb3Jyb3dNb2RhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17XCJjcF9tb2RhbF9cIiArIGRlYnRBc3NldC5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RhbElkPXtcImNwX21vZGFsX1wiICsgZGVidEFzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlX2Fzc2V0PXtkZWJ0QXNzZXQuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2luZ19hc3NldD17ZGVidEFzc2V0LmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG9ydF9iYWNraW5nX2Fzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbk1hcmdpblBvc2l0aW9uUGxhY2VIb2xkZXIgPSBCaW5kVG9DaGFpblN0YXRlKE1hcmdpblBvc2l0aW9uUGxhY2VIb2xkZXIpO1xuXG5jbGFzcyBQbGFjZUhvbGRlcldyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGNhbGxPcmRlcnM6IENoYWluVHlwZXMuQ2hhaW5PYmplY3RzTGlzdFxuICAgIH07XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7YWNjb3VudCwgY2FsbE9yZGVycywgYml0QXNzZXRzfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNhbGxPcmRlcnMgPSBjYWxsT3JkZXJzLmZpbHRlcihvID0+ICEhbyk7XG4gICAgICAgIGJpdEFzc2V0cyA9IGJpdEFzc2V0cy5maWx0ZXIobyA9PiAhIW8pO1xuICAgICAgICBpZiAoIWJpdEFzc2V0cy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjYWxsT3JkZXJzLmZvckVhY2gob2JqZWN0ID0+IHtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAqIEV4aXN0aW5nIGNhbGwgb3JkZXJzIGFyZSBhbHJlYWR5IHJlbmRlcmVkIGVsc2V3aGVyZSwgc28gd2UgZmlsdGVyXG4gICAgICAgICAgICAqIG91dCBhc3NldHMgZnJvbSB0aGUgYml0QXNzZXRzIGxpc3QgZm9yIHdoaWNoIHRoZSBhY2NvdW50IGFscmVhZHlcbiAgICAgICAgICAgICogaGFzIGEgcG9zaXRpb25cbiAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gYml0QXNzZXRzLmZpbmRJbmRleChvID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIG8gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIG8uZ2V0KFwiaWRcIikgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmdldEluKFtcImNhbGxfcHJpY2VcIiwgXCJxdW90ZVwiLCBcImFzc2V0X2lkXCJdKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgYml0QXNzZXRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWJpdEFzc2V0cy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgcm93cyA9IGJpdEFzc2V0cy5tYXAoYSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxNYXJnaW5Qb3NpdGlvblBsYWNlSG9sZGVyXG4gICAgICAgICAgICAgICAgICAgIGtleT17YS5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgZGVidEFzc2V0PXthLmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICBjb2xsYXRlcmFsQXNzZXQ9e2EuZ2V0SW4oW1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInNob3J0X2JhY2tpbmdfYXNzZXRcIlxuICAgICAgICAgICAgICAgICAgICBdKX1cbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cbiAgICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiA8dGJvZHk+e3Jvd3N9PC90Ym9keT47XG4gICAgfVxufVxuXG5QbGFjZUhvbGRlcldyYXBwZXIgPSBCaW5kVG9DaGFpblN0YXRlKFBsYWNlSG9sZGVyV3JhcHBlcik7XG5QbGFjZUhvbGRlcldyYXBwZXIgPSBBc3NldFdyYXBwZXIoUGxhY2VIb2xkZXJXcmFwcGVyLCB7XG4gICAgcHJvcE5hbWVzOiBbXCJiaXRBc3NldHNcIl0sXG4gICAgZGVmYXVsdFByb3BzOiB7XG4gICAgICAgIGJpdEFzc2V0czogW1xuICAgICAgICAgICAgXCIxLjMuMTAzXCIsXG4gICAgICAgICAgICBcIjEuMy4xMTNcIixcbiAgICAgICAgICAgIFwiMS4zLjEyMFwiLFxuICAgICAgICAgICAgXCIxLjMuMTIxXCIsXG4gICAgICAgICAgICBcIjEuMy45NThcIixcbiAgICAgICAgICAgIFwiMS4zLjEzMjVcIixcbiAgICAgICAgICAgIFwiMS4zLjEzNjJcIixcbiAgICAgICAgICAgIFwiMS4zLjEwNVwiLFxuICAgICAgICAgICAgXCIxLjMuMTA2XCJcbiAgICAgICAgXVxuICAgIH0sXG4gICAgYXNMaXN0OiB0cnVlXG59KTtcblxuY29uc3QgQ29sbGF0ZXJhbFRhYmxlID0gKHtcbiAgICBjYWxsT3JkZXJzLFxuICAgIGFjY291bnQsXG4gICAgY2xhc3NOYW1lLFxuICAgIGNoaWxkcmVuLFxuICAgIHByZWZlcnJlZFVuaXRcbn0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8dGFibGUgY2xhc3NOYW1lPXtcInRhYmxlIHRhYmxlLWhvdmVyIFwiICsgY2xhc3NOYW1lfT5cbiAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17YWxpZ25MZWZ0fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLmFzc2V0LnRpdGxlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXthbGlnblJpZ2h0fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLmJhbGFuY2VcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e2FsaWduUmlnaHR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNhY3Rpb24uYm9ycm93X2Ftb3VudFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17YWxpZ25SaWdodH0gY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtbWVkaXVtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ0cmFuc2FjdGlvbi5jb2xsYXRlcmFsXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRvb2x0aXAgaW5saW5lLWJsb2NrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwidG9wXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRpcD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAuY29sbF9yYXRpb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJib3Jyb3cuY29sbF9yYXRpb1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVdpdGhMaW5rc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vTGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZz1cImFjY291bnQudG90YWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByZWZlcnJlZFVuaXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmc6IFwiYXNzZXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17YWxpZ25SaWdodH0gY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0b29sdGlwIGlubGluZS1ibG9ja1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1wbGFjZT1cInRvcFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLmNhbGxfcHJpY2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UuY2FsbFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UucHJpY2VcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIiBzdHlsZT17YWxpZ25MZWZ0fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLmFzc2V0cy51bml0c1wiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UubWFya2V0XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYm9ycm93LmFkanVzdF9zaG9ydFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInRyYW5zZmVyLmNsb3NlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICB7Y2FsbE9yZGVyc1xuICAgICAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5zcGxpdChcIi5cIilbMl0gLSBiLnNwbGl0KFwiLlwiKVsyXSlcbiAgICAgICAgICAgICAgICAgICAgLm1hcChpZCA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8TWFyZ2luUG9zaXRpb25XcmFwcGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Q9e2lkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICA8UGxhY2VIb2xkZXJXcmFwcGVyXG4gICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cbiAgICAgICAgICAgICAgICBjYWxsT3JkZXJzPXtJbW11dGFibGUuTGlzdChjYWxsT3JkZXJzKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8dGJvZHk+e2NoaWxkcmVufTwvdGJvZHk+XG4gICAgICAgIDwvdGFibGU+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENvbGxhdGVyYWxUYWJsZTtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7Q29tcG9uZW50fSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcbmltcG9ydCBQcm9wb3NlZE9wZXJhdGlvbiwge1xuICAgIFRyYW5zYWN0aW9uSURBbmRFeHBpcnlcbn0gZnJvbSBcImNvbXBvbmVudHMvQmxvY2tjaGFpbi9Qcm9wb3NlZE9wZXJhdGlvblwiO1xuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcImNvbXBvbmVudHMvVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiY29tcG9uZW50cy9VdGlsaXR5L0NoYWluVHlwZXNcIjtcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XG5pbXBvcnQgUHJvcG9zYWxNb2RhbCwge2ZpbmFsUmVxdWlyZWRQZXJtc30gZnJvbSBcIi4uL01vZGFsL1Byb3Bvc2FsTW9kYWxcIjtcbmltcG9ydCBOZXN0ZWRBcHByb3ZhbFN0YXRlIGZyb20gXCIuLi9BY2NvdW50L05lc3RlZEFwcHJvdmFsU3RhdGVcIjtcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XG5pbXBvcnQgcHUgZnJvbSBcImNvbW1vbi9wZXJtaXNzaW9uX3V0aWxzXCI7XG5pbXBvcnQgTGlua1RvQWNjb3VudEJ5SWQgZnJvbSBcIi4uL1V0aWxpdHkvTGlua1RvQWNjb3VudEJ5SWRcIjtcbmltcG9ydCBBY2NvdW50U3RvcmUgZnJvbSBcInN0b3Jlcy9BY2NvdW50U3RvcmVcIjtcblxuY2xhc3MgUHJvcG9zYWxzIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBhY2NvdW50OiBDaGFpblR5cGVzLkNoYWluQWNjb3VudC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBpc01vZGFsVmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICBtb2RhbDoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBwcm9wb3NhbElkOiBudWxsLFxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUgPSB0aGlzLmZvcmNlVXBkYXRlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2hvd01vZGFsID0gdGhpcy5zaG93TW9kYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oaWRlTW9kYWwgPSB0aGlzLmhpZGVNb2RhbC5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAvKlxuICAgICAgICAqIEFjY291bnQgb2JqZWN0cyBkb24ndCBnZXQgdXBkYXRlZCBieSB1bmRlcmx5aW5nIHByb3Bvc2FsIGNoYW5nZXMsIGJ1dFxuICAgICAgICAqIHRoZSBDaGFpblN0b3JlIGRvZXMsIHNvIGluIG9yZGVyIHRvIHVwZGF0ZSB0aGlzIGNvbXBvbmVudCB3aGVuIGEgcHJvcG9zYWxcbiAgICAgICAgKiBjaGFuZ2VzLCB3ZSBuZWVkIHRvIHVwZGF0ZSBpdCB3aGVuZXZlciB0aGUgQ2hhaW5TdG9yZSBpdHNlbGYgdXBkYXRlc1xuICAgICAgICAqL1xuICAgICAgICBDaGFpblN0b3JlLnN1YnNjcmliZSh0aGlzLmZvcmNlVXBkYXRlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgQ2hhaW5TdG9yZS51bnN1YnNjcmliZSh0aGlzLmZvcmNlVXBkYXRlKTtcbiAgICB9XG5cbiAgICBzaG93TW9kYWwoe2FjdGlvbiwgcHJvcG9zYWxJZCwgYWNjb3VudElkfSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzTW9kYWxWaXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgbW9kYWw6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgICAgICAgcHJvcG9zYWxJZCxcbiAgICAgICAgICAgICAgICBhY2NvdW50SWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGlkZU1vZGFsKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzTW9kYWxWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIG1vZGFsOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIHByb3Bvc2FsSWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9vbkFwcHJvdmVNb2RhbChwcm9wb3NhbElkLCBhY2NvdW50SWQsIGFjdGlvbikge1xuICAgICAgICB0aGlzLnNob3dNb2RhbCh7YWN0aW9uLCBwcm9wb3NhbElkLCBhY2NvdW50SWR9KTtcbiAgICB9XG5cbiAgICBfY2FuUmVqZWN0KHByb3Bvc2FsKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBwcm9wb3NhbC5hdmFpbGFibGVfYWN0aXZlX2FwcHJvdmFscy5sZW5ndGggfHxcbiAgICAgICAgICAgIHByb3Bvc2FsLmF2YWlsYWJsZV9vd25lcl9hcHByb3ZhbHMubGVuZ3RoIHx8XG4gICAgICAgICAgICBwcm9wb3NhbC5hdmFpbGFibGVfa2V5X2FwcHJvdmFscy5sZW5ndGhcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7YWNjb3VudH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBpZiAoIWFjY291bnQpIHJldHVybiBudWxsO1xuXG4gICAgICAgIGxldCBwcm9wb3NhbHMgPSBbXTtcblxuICAgICAgICBpZiAoYWNjb3VudC5nZXQoXCJwcm9wb3NhbHNcIikuc2l6ZSkge1xuICAgICAgICAgICAgYWNjb3VudC5nZXQoXCJwcm9wb3NhbHNcIikuZm9yRWFjaChwcm9wb3NhbF9pZCA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3Bvc2FsID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QocHJvcG9zYWxfaWQpO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wb3NhbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcG9zZWRfdHJhbnNhY3Rpb24gPSBwcm9wb3NhbC5nZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICBcInByb3Bvc2VkX3RyYW5zYWN0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wZXJhdGlvbnMgPSBwcm9wb3NlZF90cmFuc2FjdGlvbi5nZXQoXCJvcGVyYXRpb25zXCIpO1xuICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbHMucHVzaCh7b3BlcmF0aW9ucywgYWNjb3VudCwgcHJvcG9zYWx9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwcm9wb3NhbFJvd3MgPSBwcm9wb3NhbHNcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzLnNvcnRJRChcbiAgICAgICAgICAgICAgICAgICAgYS5wcm9wb3NhbC5nZXQoXCJpZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgYi5wcm9wb3NhbC5nZXQoXCJpZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnJlZHVjZSgocmVzdWx0LCBwcm9wb3NhbCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaXNTY2FtID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBwcm9wb3NhbC5wcm9wb3NhbC5nZXQoXCJpZFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wb3NlciA9IHByb3Bvc2FsLnByb3Bvc2FsLmdldChcInByb3Bvc2VyXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyYXRpb24gPSBwcm9wb3NhbC5wcm9wb3NhbC5nZXQoXCJleHBpcmF0aW9uX3RpbWVcIik7XG4gICAgICAgICAgICAgICAgbGV0IHRleHQgPSBwcm9wb3NhbC5vcGVyYXRpb25zXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKG8sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5nZXRJbihbMSwgXCJ0b1wiXSkgPT09IFwiMS4yLjE1MzEyNFwiKSBpc1NjYW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJvcG9zZWRPcGVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsLmdldChcImlkXCIpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiX29wZXJhdGlvbl9cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb249e2V4cGlyYXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A9e28udG9KUygpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnRlZD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVGZWU9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVPcExhYmVsPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlRXhwaXJhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlRGF0ZT17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWw9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtpZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zZXI9e3Byb3Bvc2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudG9BcnJheSgpO1xuXG4gICAgICAgICAgICAgICAgbGV0IGNhblJlamVjdCA9IHRoaXMuX2NhblJlamVjdChwcm9wb3NhbC5wcm9wb3NhbC50b0pTKCkpO1xuICAgICAgICAgICAgICAgIGxldCBwcm9wb3NhbElkID0gcHJvcG9zYWwucHJvcG9zYWwuZ2V0KFwiaWRcIik7XG5cbiAgICAgICAgICAgICAgICBsZXQgdHlwZSA9IHByb3Bvc2FsLnByb3Bvc2FsLmdldChcInJlcXVpcmVkX2FjdGl2ZV9hcHByb3ZhbHNcIilcbiAgICAgICAgICAgICAgICAgICAgLnNpemVcbiAgICAgICAgICAgICAgICAgICAgPyBcImFjdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgIDogXCJvd25lclwiO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8dHIga2V5PXtgJHtwcm9wb3NhbElkfV9pZGB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sU3Bhbj1cIjRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHJvcG9zYWxcIiArIChpbmRleCA9PT0gMCA/IFwiIGZpcnN0XCIgOiBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNhY3Rpb25JREFuZEV4cGlyeVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17aWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb249e2V4cGlyYXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZSA9IHB1Lmxpc3RUb0lEcyhcbiAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWwuZ2V0KGBhdmFpbGFibGVfJHt0eXBlfV9hcHByb3ZhbHNgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXZhaWxhYmxlS2V5cyA9IHB1Lmxpc3RUb0lEcyhcbiAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWwuZ2V0KFwiYXZhaWxhYmxlX2tleV9hcHByb3ZhbHNcIilcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWQgPSBwdS5saXN0VG9JRHMoXG4gICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsLmdldChgcmVxdWlyZWRfJHt0eXBlfV9hcHByb3ZhbHNgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWRQZXJtaXNzaW9ucyA9IHB1LnVubmVzdChyZXF1aXJlZCwgdHlwZSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBbYWNjb3VudHMsIGtleXNdID0gZmluYWxSZXF1aXJlZFBlcm1zKFxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFBlcm1pc3Npb25zLFxuICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGUsXG4gICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZUtleXNcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudE5hbWVzID0gW107XG5cbiAgICAgICAgICAgICAgICBpZiAoYWNjb3VudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRzLmZvckVhY2goYWNjb3VudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFwcm9wb3NhbC5wcm9wb3NhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KGBhdmFpbGFibGVfJHt0eXBlfV9hcHByb3ZhbHNgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoYWNjb3VudClcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lcy5wdXNoKGFjY291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBrZXlOYW1lcyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChrZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc01pbmUgPSBBY2NvdW50U3RvcmUuaXNNeUtleShrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTWluZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFwcm9wb3NhbC5wcm9wb3NhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KFwiYXZhaWxhYmxlX2tleV9hcHByb3ZhbHNcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleU5hbWVzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgY2FuQXBwcm92ZSA9IGFjY291bnROYW1lcy5sZW5ndGggKyBrZXlOYW1lcy5sZW5ndGggPiAwO1xuXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDx0clxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidG9wLWxlZnQtYWxpZ25cIlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtwcm9wb3NhbElkfV9jb250ZW50YH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnt0ZXh0fTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlcXVpcmVkUGVybWlzc2lvbnMubWFwKChhY2NvdW50LCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJsaXN0LWl0ZW1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtwcm9wb3NhbElkfV9hcHByb3Zlcl8ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rVG9BY2NvdW50QnlJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnBhZ2U9XCJwZXJtaXNzaW9uc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudC5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TmVzdGVkQXBwcm92YWxTdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbD17cHJvcG9zYWwucHJvcG9zYWwuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9e3R5cGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiYXBwcm92YWwtYnV0dG9uc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc1NjYW0gPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGlwPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLnByb3Bvc2Vfc2NhbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidG9vbHRpcCBoYXMtZXJyb3Igc2NhbS1lcnJvclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNDQU1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuQXBwcm92ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX29uQXBwcm92ZU1vZGFsLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsLmFjY291bnQuZ2V0KFwiaWRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYXBwcm92ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgpID0+IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYnV0dG9uIHByaW1hcnkgaG9sbG93XCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjYW5BcHByb3ZlID8gXCJcIiA6IFwiIGhpZGRlblwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJwcm9wb3NhbC5hcHByb3ZlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2FuUmVqZWN0ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vbkFwcHJvdmVNb2RhbC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWxJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbC5hY2NvdW50LmdldChcImlkXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicmVqZWN0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b24gcHJpbWFyeSBob2xsb3dcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJwcm9wb3NhbC5yZWplY3RcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uQXBwcm92ZU1vZGFsLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWxJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsLmFjY291bnQuZ2V0KFwiaWRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRlbGV0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvbiBwcmltYXJ5IGhvbGxvd1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJwcm9wb3NhbC5kZWxldGVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8dHIga2V5PXtgJHtwcm9wb3NhbElkfV9zZXBhcmF0b3JgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHRhYmxlXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XG4gICAgICAgICAgICAgICAgICAgICAgICBcInRhYmxlIHByb3Bvc2FscyBjb21wYWN0IFwiICsgdGhpcy5wcm9wcy5jbGFzc05hbWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwicHJvcG9zYWwucHJvcG9zYWxzXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwicHJvcG9zYWwuYXBwcm92ZXJzXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwicHJvcG9zYWwuc3RhdHVzXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwicHJvcG9zYWwuYWN0aW9uXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPHRib2R5Pntwcm9wb3NhbFJvd3N9PC90Ym9keT5cbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgIDxQcm9wb3NhbE1vZGFsXG4gICAgICAgICAgICAgICAgICAgIHJlZj17XCJtb2RhbFwifVxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLmlzTW9kYWxWaXNpYmxlfVxuICAgICAgICAgICAgICAgICAgICBoaWRlTW9kYWw9e3RoaXMuaGlkZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICBzaG93TW9kYWw9e3RoaXMuc2hvd01vZGFsfVxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnN0YXRlICYmIHRoaXMuc3RhdGUubW9kYWwuYWNjb3VudElkfVxuICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbD17dGhpcy5zdGF0ZSAmJiB0aGlzLnN0YXRlLm1vZGFsLnByb3Bvc2FsSWR9XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbj17dGhpcy5zdGF0ZSAmJiB0aGlzLnN0YXRlLm1vZGFsLmFjdGlvbn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCaW5kVG9DaGFpblN0YXRlKFByb3Bvc2Fscyk7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XG5pbXBvcnQgQWNjb3VudFNlbGVjdCBmcm9tIFwiY29tcG9uZW50cy9Gb3Jtcy9BY2NvdW50U2VsZWN0XCI7XG5pbXBvcnQgQWNjb3VudFN0b3JlIGZyb20gXCJzdG9yZXMvQWNjb3VudFN0b3JlXCI7XG5pbXBvcnQgV2FsbGV0RGIgZnJvbSBcInN0b3Jlcy9XYWxsZXREYlwiO1xuaW1wb3J0IFdhbGxldEFwaSBmcm9tIFwiYXBpL1dhbGxldEFwaVwiO1xuaW1wb3J0IE5lc3RlZEFwcHJvdmFsU3RhdGUgZnJvbSBcIi4uL0FjY291bnQvTmVzdGVkQXBwcm92YWxTdGF0ZVwiO1xuaW1wb3J0IHB1IGZyb20gXCJjb21tb24vcGVybWlzc2lvbl91dGlsc1wiO1xuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcbmltcG9ydCB7TW9kYWwsIEJ1dHRvbn0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xuXG5leHBvcnQgY29uc3QgZmluYWxSZXF1aXJlZFBlcm1zID0gKFxuICAgIHJlcXVpcmVkUGVybWlzc2lvbnMsXG4gICAgYXZhaWxhYmxlLFxuICAgIGF2YWlsYWJsZUtleXNcbikgPT4ge1xuICAgIGxldCBmaW5hbFJlcXVpcmVkID0gW107XG5cbiAgICByZXF1aXJlZFBlcm1pc3Npb25zLmZvckVhY2goYWNjb3VudCA9PiB7XG4gICAgICAgIGZpbmFsUmVxdWlyZWQgPSBmaW5hbFJlcXVpcmVkLmNvbmNhdChhY2NvdW50LmdldE1pc3NpbmdTaWdzKGF2YWlsYWJsZSkpO1xuICAgIH0pO1xuXG4gICAgbGV0IGZpbmFsUmVxdWlyZWRLZXlzID0gW107XG5cbiAgICByZXF1aXJlZFBlcm1pc3Npb25zLmZvckVhY2goYWNjb3VudCA9PiB7XG4gICAgICAgIGZpbmFsUmVxdWlyZWRLZXlzID0gZmluYWxSZXF1aXJlZEtleXMuY29uY2F0KFxuICAgICAgICAgICAgYWNjb3VudC5nZXRNaXNzaW5nS2V5cyhhdmFpbGFibGVLZXlzKVxuICAgICAgICApO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIFtmaW5hbFJlcXVpcmVkLCBmaW5hbFJlcXVpcmVkS2V5c107XG59O1xuXG5jbGFzcyBQcm9wb3NhbE1vZGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBhY2NvdW50czogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnRzTGlzdFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgYWN0aXZlOiBudWxsLFxuICAgICAgICAgICAga2V5OiBudWxsLFxuICAgICAgICAgICAgb3duZXI6IG51bGwsXG4gICAgICAgICAgICBwYXllZTogbnVsbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIG9uQWN0aXZlQWNjb3VudChhY2NvdW50TWFwLCBrZXlNYXAsIHR5cGUsIGFjY291bnQpIHtcbiAgICAgICAgbGV0IG5ld1N0YXRlID0ge307XG5cbiAgICAgICAgaWYgKGtleU1hcFthY2NvdW50XSkge1xuICAgICAgICAgICAgbmV3U3RhdGVbXCJrZXlcIl0gPSBhY2NvdW50O1xuICAgICAgICAgICAgbmV3U3RhdGVbdHlwZV0gPSBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKGFjY291bnQpIHtcbiAgICAgICAgICAgIG5ld1N0YXRlW3R5cGVdID0gYWNjb3VudE1hcFthY2NvdW50XTtcbiAgICAgICAgICAgIG5ld1N0YXRlW1wia2V5XCJdID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld1N0YXRlW3R5cGVdID0gbnVsbDtcbiAgICAgICAgICAgIG5ld1N0YXRlW1wia2V5XCJdID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlKTtcbiAgICB9XG5cbiAgICBfb25Qcm9wb3NhbEFjdGlvbihvbGRQcm9wb3NhbCkge1xuICAgICAgICBsZXQgcHJvcG9zYWxPYmplY3QgPSBvbGRQcm9wb3NhbC50b0pTKCk7XG4gICAgICAgIGxldCB7YWN0aXZlLCBrZXksIG93bmVyLCBwYXllZX0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBjb25zdCBmZWVfcGF5aW5nX2FjY291bnQgPSBwYXllZSB8fCBhY3RpdmU7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aW9uID09PSBcImRlbGV0ZVwiKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IFdhbGxldEFwaS5uZXdfdHJhbnNhY3Rpb24oKTtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLmFkZF90eXBlX29wZXJhdGlvbihcInByb3Bvc2FsX2RlbGV0ZVwiLCB7XG4gICAgICAgICAgICAgICAgZmVlX3BheWluZ19hY2NvdW50OlxuICAgICAgICAgICAgICAgICAgICBmZWVfcGF5aW5nX2FjY291bnQgfHwgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpLFxuICAgICAgICAgICAgICAgIHByb3Bvc2FsOiBwcm9wb3NhbE9iamVjdC5pZCxcbiAgICAgICAgICAgICAgICB1c2luZ19vd25lcl9hdXRob3JpdHk6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFdhbGxldERiLnByb2Nlc3NfdHJhbnNhY3Rpb24odHJhbnNhY3Rpb24sIG51bGwsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHByb3Bvc2FsID0ge1xuICAgICAgICAgICAgICAgIGZlZV9wYXlpbmdfYWNjb3VudCxcbiAgICAgICAgICAgICAgICBwcm9wb3NhbDogcHJvcG9zYWxPYmplY3QuaWQsXG4gICAgICAgICAgICAgICAgYWN0aXZlX2FwcHJvdmFsc190b19hZGQ6IFtdLFxuICAgICAgICAgICAgICAgIGFjdGl2ZV9hcHByb3ZhbHNfdG9fcmVtb3ZlOiBbXSxcbiAgICAgICAgICAgICAgICBvd25lcl9hcHByb3ZhbHNfdG9fYWRkOiBbXSxcbiAgICAgICAgICAgICAgICBvd25lcl9hcHByb3ZhbHNfdG9fcmVtb3ZlOiBbXSxcbiAgICAgICAgICAgICAgICBrZXlfYXBwcm92YWxzX3RvX2FkZDogW10sXG4gICAgICAgICAgICAgICAga2V5X2FwcHJvdmFsc190b19yZW1vdmU6IFtdXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZXQgaXNBZGQgPSB0aGlzLnByb3BzLmFjdGlvbiA9PT0gXCJhcHByb3ZlXCI7XG5cbiAgICAgICAgICAgIGxldCBuZWVkZWRLZXlzID0gW107XG5cbiAgICAgICAgICAgIFtcImFjdGl2ZVwiLCBcIm93bmVyXCIsIFwia2V5XCJdLmZvckVhY2goYXV0aF90eXBlID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLnN0YXRlW2F1dGhfdHlwZV07XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBoYXNWYWx1ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbE9iamVjdFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgYXZhaWxhYmxlXyR7YXV0aF90eXBlfV9hcHByb3ZhbHNgXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmluZGV4T2YodmFsdWUpICE9PSAtMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChpc0FkZCAmJiAhaGFzVmFsdWUpIHx8ICghaXNBZGQgJiYgaGFzVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3Rpb24gPT09IFwiYXBwcm92ZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWxbYCR7YXV0aF90eXBlfV9hcHByb3ZhbHNfdG9fYWRkYF0gPSBbdmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdXRoX3R5cGUgPT09IFwia2V5XCIpIG5lZWRlZEtleXMucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuYWN0aW9uID09PSBcInJlamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWxbYCR7YXV0aF90eXBlfV9hcHByb3ZhbHNfdG9fcmVtb3ZlYF0gPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV0aF90eXBlID09PSBcImtleVwiKSBuZWVkZWRLZXlzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciB0ciA9IFdhbGxldEFwaS5uZXdfdHJhbnNhY3Rpb24oKTtcbiAgICAgICAgICAgIHRyLmFkZF90eXBlX29wZXJhdGlvbihcInByb3Bvc2FsX3VwZGF0ZVwiLCBwcm9wb3NhbCk7XG4gICAgICAgICAgICBXYWxsZXREYi5wcm9jZXNzX3RyYW5zYWN0aW9uKHRyLCBudWxsLCB0cnVlLCBuZWVkZWRLZXlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJvcHMuaGlkZU1vZGFsKCk7XG4gICAgfVxuXG4gICAgb25DaGFuZ2VQYXllZShhY2NvdW50KSB7XG4gICAgICAgIGxldCBmdWxsQWNjb3VudCA9IENoYWluU3RvcmUuZ2V0QWNjb3VudChhY2NvdW50KTtcblxuICAgICAgICBpZiAoZnVsbEFjY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHBheWVlOiBmdWxsQWNjb3VudC5nZXQoXCJpZFwiKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkNhbmNlbCgpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5oaWRlTW9kYWwoKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7cHJvcG9zYWwsIHR5cGV9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICBsZXQgYWNjb3VudE5hbWVzID0gW107XG4gICAgICAgIGxldCBhY2NvdW50TWFwID0ge307XG4gICAgICAgIGxldCBpc0FkZCA9IHRoaXMucHJvcHMuYWN0aW9uID09PSBcImFwcHJvdmVcIjtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY2NvdW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudHMuZm9yRWFjaChhY2NvdW50ID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgYWNjb3VudENoZWNrID0gaXNBZGRcbiAgICAgICAgICAgICAgICAgICAgPyBhY2NvdW50ICYmXG4gICAgICAgICAgICAgICAgICAgICAgIXByb3Bvc2FsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoYGF2YWlsYWJsZV8ke3R5cGV9X2FwcHJvdmFsc2ApXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhhY2NvdW50LmdldChcImlkXCIpKVxuICAgICAgICAgICAgICAgICAgICA6IGFjY291bnQgJiZcbiAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KGBhdmFpbGFibGVfJHt0eXBlfV9hcHByb3ZhbHNgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoYWNjb3VudC5nZXQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnRDaGVjaykge1xuICAgICAgICAgICAgICAgICAgICBhY2NvdW50TWFwW2FjY291bnQuZ2V0KFwibmFtZVwiKV0gPSBhY2NvdW50LmdldChcImlkXCIpO1xuICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZXMucHVzaChhY2NvdW50LmdldChcIm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGtleU5hbWVzID0gW107XG4gICAgICAgIGxldCBrZXlNYXAgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMua2V5cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMua2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGlzTWluZSA9IEFjY291bnRTdG9yZS5pc015S2V5KGtleSk7XG4gICAgICAgICAgICAgICAgbGV0IGhhc1ZhbHVlID0gcHJvcG9zYWxcbiAgICAgICAgICAgICAgICAgICAgLmdldChcImF2YWlsYWJsZV9rZXlfYXBwcm92YWxzXCIpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhrZXkpO1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgKGlzTWluZSAmJiBpc0FkZCAmJiAhaGFzVmFsdWUpIHx8XG4gICAgICAgICAgICAgICAgICAgIChpc01pbmUgJiYgIWlzQWRkICYmIGhhc1ZhbHVlKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBrZXlNYXBba2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGtleU5hbWVzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBteUFjY291bnRzID0gQWNjb3VudFN0b3JlLmdldE15QWNjb3VudHMoKTtcblxuICAgICAgICBsZXQgZm9vdGVyID0gW1xuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIGtleT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uUHJvcG9zYWxBY3Rpb24uYmluZCh0aGlzLCBwcm9wb3NhbCl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShgcHJvcG9zYWwuJHt0aGlzLnByb3BzLmFjdGlvbn1gKX1cbiAgICAgICAgICAgIDwvQnV0dG9uPixcbiAgICAgICAgICAgIDxCdXR0b24ga2V5PVwiY2FuY2VsXCIgb25DbGljaz17dGhpcy5vbkNhbmNlbC5iaW5kKHRoaXMpfT5cbiAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5wZXJtLmNhbmNlbFwiKX1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICBdO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8TW9kYWxcbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnByb3BzLnZpc2libGV9XG4gICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgYG1vZGFsLnByb3Bvc2Fscy5hY3Rpb25zLiR7dGhpcy5wcm9wcy5hY3Rpb259YFxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgZm9vdGVyPXtmb290ZXJ9XG4gICAgICAgICAgICAgICAgb25DYW5jZWw9e3RoaXMucHJvcHMuaGlkZU1vZGFsfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbFwiPlxuICAgICAgICAgICAgICAgICAgICA8Zm9ybVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbCBmdWxsLXdpZHRoLWNvbnRlbnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nVG9wOiAwfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ1JpZ2h0OiBcIjIwJVwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxOZXN0ZWRBcHByb3ZhbFN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWw9e3Byb3Bvc2FsLmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT17dHlwZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FkZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUua2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUua2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuc3RhdGVbdHlwZV0gfHwgbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpc0FkZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUua2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUua2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuc3RhdGVbdHlwZV0gfHwgbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vRmFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIGZ1bGwtd2lkdGgtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZ1bGwtd2lkdGgtY29udGVudCBmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cIm1vZGFsLnByb3Bvc2Fscy5wYXlfd2l0aFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwibGFiZWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudF9uYW1lcz17bXlBY2NvdW50c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZVBheWVlLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5hY3Rpb24gIT09IFwiZGVsZXRlXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjY291bnROYW1lcy5sZW5ndGggfHwga2V5TmFtZXMubGVuZ3RoKSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbC13aWR0aC1jb250ZW50IGZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2Btb2RhbC5wcm9wb3NhbHMuYXBwcm92YWxfJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWRkID8gXCJhZGRcIiA6IFwicmVtb3ZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfbmFtZXM9e2FjY291bnROYW1lcy5jb25jYXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlOYW1lc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkFjdGl2ZUFjY291bnQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50TWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5TWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZhbHNlICYmIGtleU5hbWVzLmxlbmd0aCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbC13aWR0aC1jb250ZW50IGZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2Btb2RhbC5wcm9wb3NhbHMua2V5X2FwcHJvdmFsXyR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FkZCA/IFwiYWRkXCIgOiBcInJlbW92ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJsYWJlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X25hbWVzPXtrZXlOYW1lc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25BY3RpdmVBY2NvdW50LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5TWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJrZXlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgKTtcbiAgICB9XG59XG5Qcm9wb3NhbE1vZGFsID0gQmluZFRvQ2hhaW5TdGF0ZShQcm9wb3NhbE1vZGFsKTtcblxuY2xhc3MgRmlyc3RMZXZlbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgYWNjb3VudDogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnQuaXNSZXF1aXJlZCxcbiAgICAgICAgcHJvcG9zYWw6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSgpO1xuXG4gICAgICAgIENoYWluU3RvcmUuc3Vic2NyaWJlKHRoaXMuX3VwZGF0ZVN0YXRlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgQ2hhaW5TdG9yZS51bnN1YnNjcmliZSh0aGlzLl91cGRhdGVTdGF0ZSk7XG4gICAgfVxuXG4gICAgX3VwZGF0ZVN0YXRlKCkge1xuICAgICAgICBsZXQge3Byb3Bvc2FsLCBhY2NvdW50fSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB0eXBlID0gcHJvcG9zYWwuZ2V0KFwicmVxdWlyZWRfYWN0aXZlX2FwcHJvdmFsc1wiKS5zaXplXG4gICAgICAgICAgICA/IFwiYWN0aXZlXCJcbiAgICAgICAgICAgIDogXCJvd25lclwiO1xuXG4gICAgICAgIGxldCByZXF1aXJlZCA9IHB1Lmxpc3RUb0lEcyhwcm9wb3NhbC5nZXQoYHJlcXVpcmVkXyR7dHlwZX1fYXBwcm92YWxzYCkpO1xuICAgICAgICBsZXQgYXZhaWxhYmxlID0gcHUubGlzdFRvSURzKFxuICAgICAgICAgICAgcHJvcG9zYWwuZ2V0KGBhdmFpbGFibGVfJHt0eXBlfV9hcHByb3ZhbHNgKVxuICAgICAgICApO1xuICAgICAgICBsZXQgYXZhaWxhYmxlS2V5cyA9IHB1Lmxpc3RUb0lEcyhcbiAgICAgICAgICAgIHByb3Bvc2FsLmdldChcImF2YWlsYWJsZV9rZXlfYXBwcm92YWxzXCIpXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICByZXF1aXJlZFBlcm1pc3Npb25zOiBwdS51bm5lc3QocmVxdWlyZWQsIHR5cGUpLFxuICAgICAgICAgICAgYXZhaWxhYmxlLFxuICAgICAgICAgICAgYXZhaWxhYmxlS2V5cyxcbiAgICAgICAgICAgIHR5cGVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge2FjdGlvbn0gPSB0aGlzLnByb3BzO1xuICAgICAgICBsZXQge3JlcXVpcmVkUGVybWlzc2lvbnMsIGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cywgdHlwZX0gPSB0aGlzLnN0YXRlO1xuXG4gICAgICAgIGNvbnN0IFtmaW5hbFJlcXVpcmVkLCBmaW5hbFJlcXVpcmVkS2V5c10gPSBmaW5hbFJlcXVpcmVkUGVybXMoXG4gICAgICAgICAgICByZXF1aXJlZFBlcm1pc3Npb25zLFxuICAgICAgICAgICAgYXZhaWxhYmxlLFxuICAgICAgICAgICAgYXZhaWxhYmxlS2V5c1xuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8UHJvcG9zYWxNb2RhbFxuICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICAgICAgICAgIHR5cGU9e3R5cGV9XG4gICAgICAgICAgICAgICAgYWNjb3VudHM9e2FjdGlvbiA9PT0gXCJhcHByb3ZlXCIgPyBmaW5hbFJlcXVpcmVkIDogYXZhaWxhYmxlfVxuICAgICAgICAgICAgICAgIGtleXM9e2FjdGlvbiA9PT0gXCJhcHByb3ZlXCIgPyBmaW5hbFJlcXVpcmVkS2V5cyA6IGF2YWlsYWJsZUtleXN9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cbn1cbkZpcnN0TGV2ZWwgPSBCaW5kVG9DaGFpblN0YXRlKEZpcnN0TGV2ZWwpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLmFjY291bnQgfHwgIXRoaXMucHJvcHMucHJvcG9zYWwgfHwgIXRoaXMucHJvcHMuYWN0aW9uKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgcmV0dXJuIDxGaXJzdExldmVsIHsuLi50aGlzLnByb3BzfSAvPjtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XG5pbXBvcnQgTGlua1RvQWNjb3VudEJ5SWQgZnJvbSBcIi4uL1V0aWxpdHkvTGlua1RvQWNjb3VudEJ5SWRcIjtcbmltcG9ydCBwdSBmcm9tIFwiY29tbW9uL3Blcm1pc3Npb25fdXRpbHNcIjtcbmltcG9ydCB7Y2xvbmVEZWVwfSBmcm9tIFwibG9kYXNoLWVzXCI7XG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xuaW1wb3J0IHtcbiAgICBBdXRob3JpdHlEZXB0aE92ZXJmbG93V2FybmluZyxcbiAgICBDaGlsZEF1dGhvcml0eURlcHRoT3ZlcmZsb3dXYXJuaW5nLFxuICAgIFBlbmRpbmcsXG4gICAgUmV2aWV3LFxuICAgIEZhaWxlZCxcbiAgICBFeHBhbmRCdXR0b24sXG4gICAgQXBwcm92ZWRJY29uLFxuICAgIEtleVBlcm1pc3Npb25CcmFuY2gsXG4gICAgaGFzQXV0aG9yaXR5RGVwdGhQcm9ibGVtLFxuICAgIGlzQXBwcm92ZWQsXG4gICAgc3RhdHVzVGV4dCxcbiAgICBub3ROZXN0ZFdlaWdodFxufSBmcm9tIFwiLi9OZXN0ZWRBcHByb3ZhbFN0YXRlTGliXCI7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XG5cbmNsYXNzIEFjY291bnRQZXJtaXNzaW9uVHJlZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge2V4cGFuZGVkOiAhIXByb3BzLmV4cGFuZGVkfTtcbiAgICB9XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgYWNjb3VudDogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnQuaXNSZXF1aXJlZCxcbiAgICAgICAgYWNjb3VudHM6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50c0xpc3QsXG4gICAgICAgIGxldmVsOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgbGV2ZWw6IDBcbiAgICB9O1xuXG4gICAgaGFuZGxlRXhwYW5kVG9nZ2xlID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtleHBhbmRlZDogIXRoaXMuc3RhdGUuZXhwYW5kZWR9KTtcbiAgICB9O1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBhY2NvdW50LFxuICAgICAgICAgICAgYXZhaWxhYmxlLFxuICAgICAgICAgICAgYXZhaWxhYmxlS2V5cyxcbiAgICAgICAgICAgIHBlcm1pc3Npb24sXG4gICAgICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgICAgICBsZXZlbCxcbiAgICAgICAgICAgIG1heEF1dGhvcml0eURlcHRoLFxuICAgICAgICAgICAgaGlkZVJvb3RcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHtleHBhbmRlZH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgICAgIGNvbnN0IGlzT0sgPSBpc0FwcHJvdmVkKHBlcm1pc3Npb24sIGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cyk7XG4gICAgICAgIGNvbnN0IGlzTmVzdGVkID0gcGVybWlzc2lvbi5pc05lc3RlZCgpO1xuICAgICAgICBjb25zdCBpc011bHRpU2lnID0gcGVybWlzc2lvbi5pc011bHRpU2lnKCk7XG5cbiAgICAgICAgY29uc3Qgbm90TmVzdGVkV2VpZ2h0ID1cbiAgICAgICAgICAgIG5vdE5lc3RkV2VpZ2h0KHBlcm1pc3Npb24ud2VpZ2h0LCB0aHJlc2hvbGQpIHx8IDE7XG5cbiAgICAgICAgY29uc3QgbmVzdGVkV2VpZ2h0ID0gc3RhdHVzVGV4dChwZXJtaXNzaW9uLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpO1xuXG4gICAgICAgIGNvbnN0IGF1dGhvcml0eURlcHRoT3ZlcmZsb3cgPSBsZXZlbCA+PSBtYXhBdXRob3JpdHlEZXB0aDtcblxuICAgICAgICBjb25zdCByb290UGVybSA9XG4gICAgICAgICAgICAhaXNOZXN0ZWQgJiYgIWlzTXVsdGlTaWcgPyAoXG4gICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj1cIjJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxBcHByb3ZlZEljb24gYXBwcm92ZWQ9e2lzT0t9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQWNjb3VudEJ5SWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJwYWdlPVwicGVybWlzc2lvbnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnQuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IWlzTmVzdGVkICYmIG5vdE5lc3RlZFdlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYCR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90TmVzdGVkV2VpZ2h0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90TmVzdGVkV2VpZ2h0Lmxlbmd0aCA9PT0gMlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiXFx1MDBBMFxcdTAwQTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0ke25vdE5lc3RlZFdlaWdodH0gYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEFwcHJvdmVkSWNvbiBhcHByb3ZlZD17aXNPS30gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rVG9BY2NvdW50QnlJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnBhZ2U9XCJwZXJtaXNzaW9uc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudC5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtleHBhbmRlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2lzT0sgPyBcInN1Y2Nlc3MtdGV4dFwiIDogXCJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtub3ROZXN0ZWRXZWlnaHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3ROZXN0ZWRXZWlnaHQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90TmVzdGVkV2VpZ2h0ICYmIG5vdE5lc3RlZFdlaWdodC5sZW5ndGggPT09IDJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJcXHUwMEEwXFx1MDBBMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9JHtub3ROZXN0ZWRXZWlnaHR9IGBcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8RXhwYW5kQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Ub2dnbGU9e3RoaXMuaGFuZGxlRXhwYW5kVG9nZ2xlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZGVkPXtleHBhbmRlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZXhwYW5kZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFwcGVuZGVkXCI+KHtuZXN0ZWRXZWlnaHR9KTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7YXV0aG9yaXR5RGVwdGhPdmVyZmxvdyA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXV0aG9yaXR5RGVwdGhPdmVyZmxvd1dhcm5pbmcgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXV0aG9yaXR5RGVwdGhQcm9ibGVtKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBdXRob3JpdHlEZXB0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIWV4cGFuZGVkICYmIDxDaGlsZEF1dGhvcml0eURlcHRoT3ZlcmZsb3dXYXJuaW5nIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IFtdO1xuXG4gICAgICAgIGlmICgoaXNOZXN0ZWQgfHwgaXNNdWx0aVNpZykgJiYgZXhwYW5kZWQpIHtcbiAgICAgICAgICAgIHBlcm1pc3Npb24uYWNjb3VudHMuZm9yRWFjaChzdWJBY2NvdW50ID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0dXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPEJvdW5kQWNjb3VudFBlcm1pc3Npb25UcmVlXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3N1YkFjY291bnQuaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXtzdWJBY2NvdW50LmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudHM9e3N1YkFjY291bnQuYWNjb3VudHN9XG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uPXtzdWJBY2NvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlPXthdmFpbGFibGV9XG4gICAgICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVLZXlzPXthdmFpbGFibGVLZXlzfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyZXNob2xkPXtwZXJtaXNzaW9uLnRocmVzaG9sZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsPXtsZXZlbCArIDF9XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhBdXRob3JpdHlEZXB0aD17bWF4QXV0aG9yaXR5RGVwdGh9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocGVybWlzc2lvbi5rZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHBlcm1pc3Npb24ua2V5cy5mb3JFYWNoKGtleSA9PlxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxLZXlQZXJtaXNzaW9uQnJhbmNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtrZXkuaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbj17a2V5fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZT17YXZhaWxhYmxlS2V5c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbD17bGV2ZWwgKyAoaGlkZVJvb3QgPyAwIDogMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PXtub3ROZXN0ZFdlaWdodChrZXkud2VpZ2h0LCB0aHJlc2hvbGQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3RhdHVzLmxlbmd0aCA+IDAgPyAoXG4gICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAge2hpZGVSb290IHx8IHJvb3RQZXJtfVxuICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49XCIzXCIgY2xhc3NOYW1lPVwiaGVhZGluZy1wZXJtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17aGlkZVJvb3QgPyBcIlwiIDogXCJ0YWJsZS1jb250YWluZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlPntzdGF0dXN9PC90YWJsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAge2V4cGFuZGVkICYmIGxldmVsID09PSAwICYmIDxkaXYgY2xhc3NOYW1lPVwic3BhY2VyXCIgLz59XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgICA8dGJvZHk+e3Jvb3RQZXJtfTwvdGJvZHk+XG4gICAgICAgICk7XG4gICAgfVxufVxuY29uc3QgQm91bmRBY2NvdW50UGVybWlzc2lvblRyZWUgPSBCaW5kVG9DaGFpblN0YXRlKEFjY291bnRQZXJtaXNzaW9uVHJlZSk7XG5cbmNsYXNzIEZpcnN0TGV2ZWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIHJlcXVpcmVkOiBDaGFpblR5cGVzLkNoYWluQWNjb3VudHNMaXN0LFxuICAgICAgICBhdmFpbGFibGU6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50c0xpc3RcbiAgICB9O1xuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgdHlwZTogXCJhY3RpdmVcIixcbiAgICAgICAgYWRkZWQ6IG51bGwsXG4gICAgICAgIHJlbW92ZWQ6IG51bGxcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICByZXF1aXJlZFBlcm1pc3Npb25zOiBbXSxcbiAgICAgICAgICAgIGV4cGFuZGVkOiBwcm9wcy5leHBhbmRlZFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlKCk7XG5cbiAgICAgICAgQ2hhaW5TdG9yZS5zdWJzY3JpYmUodGhpcy5fdXBkYXRlU3RhdGUpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBDaGFpblN0b3JlLnVuc3Vic2NyaWJlKHRoaXMuX3VwZGF0ZVN0YXRlKTtcbiAgICB9XG5cbiAgICBfdXBkYXRlU3RhdGUoKSB7XG4gICAgICAgIGxldCByZXF1aXJlZCA9IHB1Lmxpc3RUb0lEcyh0aGlzLnByb3BzLnJlcXVpcmVkKTtcbiAgICAgICAgbGV0IGF2YWlsYWJsZSA9IHB1Lmxpc3RUb0lEcyh0aGlzLnByb3BzLmF2YWlsYWJsZSk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICByZXF1aXJlZFBlcm1pc3Npb25zOiBwdS51bm5lc3QocmVxdWlyZWQsIHRoaXMucHJvcHMudHlwZSksXG4gICAgICAgICAgICByZXF1aXJlZCxcbiAgICAgICAgICAgIGF2YWlsYWJsZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVFeHBhbmRUb2dnbGUgPSAoKSA9PiB0aGlzLnNldFN0YXRlKHtleHBhbmRlZDogIXRoaXMuc3RhdGUuZXhwYW5kZWR9KTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICBhZGRlZCxcbiAgICAgICAgICAgIHJlbW92ZWQsXG4gICAgICAgICAgICBhdmFpbGFibGVLZXlzLFxuICAgICAgICAgICAgZ2xvYmFsT2JqZWN0LFxuICAgICAgICAgICAgcmV2aWV3UGVyaW9kVGltZSxcbiAgICAgICAgICAgIG5vRmFpbFxuICAgICAgICB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgbGV0IHtyZXF1aXJlZFBlcm1pc3Npb25zLCByZXF1aXJlZCwgYXZhaWxhYmxlLCBleHBhbmRlZH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgICAgIGF2YWlsYWJsZSA9IGNsb25lRGVlcChhdmFpbGFibGUpO1xuICAgICAgICBhdmFpbGFibGVLZXlzID0gYXZhaWxhYmxlS2V5cy50b0pTKCk7XG5cbiAgICAgICAgaWYgKGFkZGVkKSB7XG4gICAgICAgICAgICBhdmFpbGFibGUucHVzaChhZGRlZCk7XG4gICAgICAgICAgICBhdmFpbGFibGVLZXlzLnB1c2goYWRkZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlbW92ZWQpIHtcbiAgICAgICAgICAgIGlmIChhdmFpbGFibGUuaW5kZXhPZihyZW1vdmVkKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBhdmFpbGFibGUuc3BsaWNlKGF2YWlsYWJsZS5pbmRleE9mKHJlbW92ZWQpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhdmFpbGFibGVLZXlzLmluZGV4T2YocmVtb3ZlZCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlS2V5cy5zcGxpY2UoYXZhaWxhYmxlS2V5cy5pbmRleE9mKHJlbW92ZWQpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFwcHJvdmVkQ291bnQgPSByZXF1aXJlZFBlcm1pc3Npb25zLnJlZHVjZShcbiAgICAgICAgICAgICh0b3RhbCwgcGVybSkgPT5cbiAgICAgICAgICAgICAgICB0b3RhbCArIChpc0FwcHJvdmVkKHBlcm0sIGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cykgPyAxIDogMCksXG4gICAgICAgICAgICAwXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGFwcHJvdmVyc0NvdW50ID0gcmVxdWlyZWRQZXJtaXNzaW9ucy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGlzT0sgPSBhcHByb3ZlZENvdW50ID09PSBhcHByb3ZlcnNDb3VudDtcblxuICAgICAgICBjb25zdCBmYWlsZWQgPSBpc09LICYmICFyZXZpZXdQZXJpb2RUaW1lICYmICFub0ZhaWw7XG4gICAgICAgIGNvbnN0IHBlbmRpbmdSZXZpZXcgPSBpc09LICYmIHJldmlld1BlcmlvZFRpbWU7XG5cbiAgICAgICAgY29uc3QgbWF4QXV0aG9yaXR5RGVwdGggPSBnbG9iYWxPYmplY3RcbiAgICAgICAgICAgIC5nZXQoXCJwYXJhbWV0ZXJzXCIpXG4gICAgICAgICAgICAuZ2V0KFwibWF4X2F1dGhvcml0eV9kZXB0aFwiKTtcblxuICAgICAgICBjb25zdCBvbmVQZXJtID0gcmVxdWlyZWRQZXJtaXNzaW9ucy5sZW5ndGggPT09IDE7XG4gICAgICAgIGNvbnN0IG9QZXJtaXNzaW9uID0gb25lUGVybSA/IHJlcXVpcmVkUGVybWlzc2lvbnNbMF0gOiBudWxsO1xuXG4gICAgICAgIGNvbnN0IG5lc3RlZFdlaWdodCA9ICFvbmVQZXJtICYmIGAke2FwcHJvdmVkQ291bnR9IC8gJHthcHByb3ZlcnNDb3VudH1gO1xuXG4gICAgICAgIGNvbnN0IHJvd3MgPSByZXF1aXJlZFBlcm1pc3Npb25zLm1hcChhY2NvdW50ID0+IChcbiAgICAgICAgICAgIDxCb3VuZEFjY291bnRQZXJtaXNzaW9uVHJlZVxuICAgICAgICAgICAgICAgIGtleT17YWNjb3VudC5pZH1cbiAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50LmlkfVxuICAgICAgICAgICAgICAgIGFjY291bnRzPXthY2NvdW50LmFjY291bnRzfVxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb249e2FjY291bnR9XG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlPXthdmFpbGFibGV9XG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlS2V5cz17YXZhaWxhYmxlS2V5c31cbiAgICAgICAgICAgICAgICBleHBhbmRlZD17dGhpcy5wcm9wcy5leHBhbmRlZCB8fCBvbmVQZXJtfVxuICAgICAgICAgICAgICAgIGxldmVsPXswfVxuICAgICAgICAgICAgICAgIG1heEF1dGhvcml0eURlcHRoPXttYXhBdXRob3JpdHlEZXB0aH1cbiAgICAgICAgICAgICAgICBoaWRlUm9vdD17b25lUGVybX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICkpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5lc3RlZC1hcHByb3ZhbC1zdGF0ZVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm9vdC1zdGF0dXNcIj5cbiAgICAgICAgICAgICAgICAgICAge2ZhaWxlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGYWlsZWQgLz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IHBlbmRpbmdSZXZpZXcgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8UmV2aWV3IC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8UGVuZGluZyAvPlxuICAgICAgICAgICAgICAgICAgICApfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgeyFvUGVybWlzc2lvbiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPih7bmVzdGVkV2VpZ2h0fSk8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBvUGVybWlzc2lvbi50aHJlc2hvbGQgPiAxICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0KG9QZXJtaXNzaW9uLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHsoIW9QZXJtaXNzaW9uIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBvUGVybWlzc2lvbi5pc011bHRpU2lnKCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9QZXJtaXNzaW9uLmlzTmVzdGVkKCkpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxFeHBhbmRCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblRvZ2dsZT17dGhpcy5oYW5kbGVFeHBhbmRUb2dnbGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kZWQ9e2V4cGFuZGVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgeyFleHBhbmRlZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRQZXJtaXNzaW9ucy5zb21lKHBlcm1pc3Npb24gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNBdXRob3JpdHlEZXB0aFByb2JsZW0oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEF1dGhvcml0eURlcHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSAmJiA8Q2hpbGRBdXRob3JpdHlEZXB0aE92ZXJmbG93V2FybmluZyAvPn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7ZXhwYW5kZWQgJiYgPHRhYmxlPntyb3dzfTwvdGFibGU+fVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuRmlyc3RMZXZlbCA9IEJpbmRUb0NoYWluU3RhdGUoRmlyc3RMZXZlbCk7XG5cbmNsYXNzIFByb3Bvc2FsV3JhcHBlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgcHJvcG9zYWw6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZCxcbiAgICAgICAgdHlwZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICBnbG9iYWxPYmplY3Q6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZFxuICAgIH07XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICB0eXBlOiBcImFjdGl2ZVwiLFxuICAgICAgICBhZGRlZDogbnVsbCxcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBcIjIuMC4wXCJcbiAgICB9O1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge3Byb3Bvc2FsLCB0eXBlfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCBhdmFpbGFibGUgPSBwcm9wb3NhbC5nZXQoYGF2YWlsYWJsZV8ke3R5cGV9X2FwcHJvdmFsc2ApO1xuICAgICAgICBsZXQgYXZhaWxhYmxlS2V5cyA9IHByb3Bvc2FsLmdldChcImF2YWlsYWJsZV9rZXlfYXBwcm92YWxzXCIpO1xuICAgICAgICBsZXQgcmVxdWlyZWQgPSBwcm9wb3NhbC5nZXQoYHJlcXVpcmVkXyR7dHlwZX1fYXBwcm92YWxzYCk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxGaXJzdExldmVsXG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkfVxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZT17YXZhaWxhYmxlfVxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZUtleXM9e2F2YWlsYWJsZUtleXN9XG4gICAgICAgICAgICAgICAgcmV2aWV3UGVyaW9kVGltZT17cHJvcG9zYWwuZ2V0KFwicmV2aWV3X3BlcmlvZF90aW1lXCIpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJpbmRUb0NoYWluU3RhdGUoUHJvcG9zYWxXcmFwcGVyKTtcbiIsImltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XG5pbXBvcnQgSW1tdXRhYmxlIGZyb20gXCJpbW11dGFibGVcIjtcblxubGV0IEtleUF1dGggPSBmdW5jdGlvbihhdXRoKSB7XG4gICAgdGhpcy5pZCA9IGF1dGgudG9KUyA/IGF1dGguZ2V0KDApIDogYXV0aFswXTtcbiAgICB0aGlzLndlaWdodCA9IGF1dGgudG9KUyA/IGF1dGguZ2V0KDEpIDogYXV0aFsxXTtcblxuICAgIHRoaXMuaXNBdmFpbGFibGUgPSBhdXRocyA9PiB7XG4gICAgICAgIHJldHVybiBhdXRocy5pbmNsdWRlc1xuICAgICAgICAgICAgPyBhdXRocy5pbmNsdWRlcyh0aGlzLmlkKVxuICAgICAgICAgICAgOiBhdXRocy5pbmRleE9mKHRoaXMpICE9PSAtMTtcbiAgICB9O1xufTtcblxubGV0IHBlcm1pc3Npb25VdGlscyA9IHtcbiAgICBBY2NvdW50UGVybWlzc2lvbjogZnVuY3Rpb24oYWNjb3VudCwgd2VpZ2h0LCB0eXBlKSB7XG4gICAgICAgIHRoaXMuaWQgPSBhY2NvdW50LmdldChcImlkXCIpO1xuICAgICAgICB0aGlzLndlaWdodCA9IHdlaWdodDtcbiAgICAgICAgdGhpcy50aHJlc2hvbGQgPSBhY2NvdW50LmdldEluKFt0eXBlLCBcIndlaWdodF90aHJlc2hvbGRcIl0pO1xuICAgICAgICB0aGlzLmFjY291bnRzID0gW107XG4gICAgICAgIHRoaXMua2V5cyA9IGFjY291bnRcbiAgICAgICAgICAgIC5nZXRJbihbdHlwZSwgXCJrZXlfYXV0aHNcIl0pXG4gICAgICAgICAgICAubWFwKGF1dGggPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgS2V5QXV0aChhdXRoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudG9BcnJheSgpO1xuXG4gICAgICAgIHRoaXMuaXNBdmFpbGFibGUgPSBhdXRocyA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYXV0aHMuaW5jbHVkZXNcbiAgICAgICAgICAgICAgICA/IGF1dGhzLmluY2x1ZGVzKHRoaXMuaWQpXG4gICAgICAgICAgICAgICAgOiBhdXRocy5pbmRleE9mKHRoaXMpICE9PSAtMTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9zdW1XZWlnaHRzID0gYXV0aHMgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTmVzdGVkKCkgJiYgIXRoaXMuaXNNdWx0aVNpZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNBdmFpbGFibGUoYXV0aHMpID8gdGhpcy53ZWlnaHQgOiAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgc3VtID0gdGhpcy5hY2NvdW50cy5yZWR1Y2UoKHN0YXR1cywgYWNjb3VudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChhY2NvdW50Ll9zdW1XZWlnaHRzKGF1dGhzKSA/IGFjY291bnQud2VpZ2h0IDogMClcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9LCAwKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKHN1bSAvIHRoaXMudGhyZXNob2xkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldFN0YXR1cyA9IChhdXRocywga2V5QXV0aHMpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc05lc3RlZCgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHN1bSA9IHRoaXMuX3N1bVdlaWdodHMoYXV0aHMpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTXVsdGlTaWcoKSkge1xuICAgICAgICAgICAgICAgICAgICBzdW0gKz0gdGhpcy5zdW1LZXlzKGtleUF1dGhzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1bTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHN1bSA9IHRoaXMuYWNjb3VudHMucmVkdWNlKChzdGF0dXMsIGFjY291bnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXR1cyArIGFjY291bnQuX3N1bVdlaWdodHMoYXV0aHMpO1xuICAgICAgICAgICAgICAgIH0sIDApO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMua2V5cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VtICs9IHRoaXMuc3VtS2V5cyhrZXlBdXRocyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1bTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnN1bUtleXMgPSBrZXlBdXRocyA9PiB7XG4gICAgICAgICAgICBsZXQga2V5U3VtID0gdGhpcy5rZXlzLnJlZHVjZSgocywga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHMgKyAoa2V5LmlzQXZhaWxhYmxlKGtleUF1dGhzKSA/IGtleS53ZWlnaHQgOiAwKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgcmV0dXJuIGtleVN1bTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmlzTmVzdGVkID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudHMubGVuZ3RoID4gMDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmlzTXVsdGlTaWcgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5rZXlzLnJlZHVjZSgoZmluYWwsIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaW5hbCB8fCBrZXkud2VpZ2h0IDwgdGhpcy50aHJlc2hvbGQ7XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRNaXNzaW5nU2lncyA9IGF1dGhzID0+IHtcbiAgICAgICAgICAgIGxldCBtaXNzaW5nID0gW107XG4gICAgICAgICAgICBsZXQgbmVzdGVkID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5pc05lc3RlZCgpKSB7XG4gICAgICAgICAgICAgICAgbmVzdGVkID0gdGhpcy5hY2NvdW50cy5yZWR1Y2UoKGEsIGFjY291bnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuY29uY2F0KGFjY291bnQuZ2V0TWlzc2luZ1NpZ3MoYXV0aHMpKTtcbiAgICAgICAgICAgICAgICB9LCBbXSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmlzQXZhaWxhYmxlKGF1dGhzKSkge1xuICAgICAgICAgICAgICAgIG1pc3NpbmcucHVzaCh0aGlzLmlkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG1pc3NpbmcuY29uY2F0KG5lc3RlZCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRNaXNzaW5nS2V5cyA9IGF1dGhzID0+IHtcbiAgICAgICAgICAgIGxldCBtaXNzaW5nID0gW107XG4gICAgICAgICAgICBsZXQgbmVzdGVkID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5rZXlzLmxlbmd0aCAmJiAodGhpcy5pc05lc3RlZCgpIHx8IHRoaXMuaXNNdWx0aVNpZygpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgha2V5LmlzQXZhaWxhYmxlKGF1dGhzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWlzc2luZy5wdXNoKGtleS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuaXNOZXN0ZWQoKSkge1xuICAgICAgICAgICAgICAgIG5lc3RlZCA9IHRoaXMuYWNjb3VudHMucmVkdWNlKChhLCBhY2NvdW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmNvbmNhdChhY2NvdW50LmdldE1pc3NpbmdLZXlzKGF1dGhzKSk7XG4gICAgICAgICAgICAgICAgfSwgW10pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbWlzc2luZy5jb25jYXQobmVzdGVkKTtcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgbGlzdFRvSURzOiBmdW5jdGlvbihhY2NvdW50TGlzdCkge1xuICAgICAgICBsZXQgYWxsQWNjb3VudHMgPSBbXTtcblxuICAgICAgICBhY2NvdW50TGlzdC5mb3JFYWNoKGFjY291bnQgPT4ge1xuICAgICAgICAgICAgaWYgKGFjY291bnQpIHtcbiAgICAgICAgICAgICAgICBhbGxBY2NvdW50cy5wdXNoKGFjY291bnQuZ2V0ID8gYWNjb3VudC5nZXQoXCJpZFwiKSA6IGFjY291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYWxsQWNjb3VudHM7XG4gICAgfSxcblxuICAgIHVucmF2ZWw6IGZ1bmN0aW9uKGFjY291bnRQZXJtaXNzaW9uLCB0eXBlLCByZWN1cnNpdmVfY291bnQgPSAwKSB7XG4gICAgICAgIGlmIChyZWN1cnNpdmVfY291bnQgPCAzKSB7XG4gICAgICAgICAgICBsZXQgYWNjb3VudCA9IENoYWluU3RvcmUuZ2V0QWNjb3VudChhY2NvdW50UGVybWlzc2lvbi5pZCk7XG4gICAgICAgICAgICBpZiAoYWNjb3VudCAmJiBhY2NvdW50LmdldEluKFt0eXBlLCBcImFjY291bnRfYXV0aHNcIl0pLnNpemUpIHtcbiAgICAgICAgICAgICAgICBhY2NvdW50LmdldEluKFt0eXBlLCBcImFjY291bnRfYXV0aHNcIl0pLmZvckVhY2goYXV0aCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXN0ZWRBY2NvdW50ID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGF1dGguZ2V0KDApKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5lc3RlZEFjY291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRQZXJtaXNzaW9uLmFjY291bnRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bnJhdmVsKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgdGhpcy5BY2NvdW50UGVybWlzc2lvbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lc3RlZEFjY291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoLmdldCgxKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlX2NvdW50ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhY2NvdW50UGVybWlzc2lvbjtcbiAgICB9LFxuXG4gICAgdW5uZXN0OiBmdW5jdGlvbihhY2NvdW50cywgdHlwZSkge1xuICAgICAgICBsZXQgbWFwID0gW107XG4gICAgICAgIGFjY291bnRzLmZvckVhY2goaWQgPT4ge1xuICAgICAgICAgICAgbGV0IGZ1bGxBY2NvdW50ID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGlkKTtcbiAgICAgICAgICAgIGxldCBjdXJyZW50UGVybWlzc2lvbiA9IHRoaXMudW5yYXZlbChcbiAgICAgICAgICAgICAgICBuZXcgdGhpcy5BY2NvdW50UGVybWlzc2lvbihmdWxsQWNjb3VudCwgbnVsbCwgdHlwZSksXG4gICAgICAgICAgICAgICAgdHlwZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG1hcC5wdXNoKGN1cnJlbnRQZXJtaXNzaW9uKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG1hcDtcbiAgICB9LFxuXG4gICAgZmxhdHRlbl9hdXRocyhhdXRocywgZXhpc3RpbmdBdXRocyA9IEltbXV0YWJsZS5MaXN0KCkpIHtcbiAgICAgICAgaWYgKCFhdXRocy5zaXplKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdBdXRocztcbiAgICAgICAgfVxuXG4gICAgICAgIGF1dGhzLmZvckVhY2gob3duZXIgPT4ge1xuICAgICAgICAgICAgaWYgKCFleGlzdGluZ0F1dGhzLmluY2x1ZGVzKG93bmVyLmdldCgwKSkpIHtcbiAgICAgICAgICAgICAgICBleGlzdGluZ0F1dGhzID0gZXhpc3RpbmdBdXRocy5wdXNoKG93bmVyLmdldCgwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZXhpc3RpbmdBdXRocztcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBwZXJtaXNzaW9uVXRpbHM7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XG5pbXBvcnQgUmVhY3RUb29sdGlwIGZyb20gXCJyZWFjdC10b29sdGlwXCI7XG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xuXG5leHBvcnQgY2xhc3MgVG9vbHRpcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIFJlYWN0VG9vbHRpcC5yZWJ1aWxkKCk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge2NsYXNzTmFtZSwgY2hpbGRyZW4sIGRhdGFUaXAsIGNvbnRlbnR9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcInRvb2x0aXAgXCIgKyBjbGFzc05hbWV9XG4gICAgICAgICAgICAgICAgZGF0YS1odG1sPXt0cnVlfVxuICAgICAgICAgICAgICAgIGRhdGEtdGlwPXtkYXRhVGlwIHx8IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShjb250ZW50KX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgQXV0aG9yaXR5RGVwdGhPdmVyZmxvd1dhcm5pbmcgPSAoKSA9PiAoXG4gICAgPFRvb2x0aXBcbiAgICAgICAgY2xhc3NOYW1lPVwiZXJyb3IgYXBwZW5kZWRcIlxuICAgICAgICBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLmF1dGhvcml0eV9kZXB0aF93YXJuaW5nXCJcbiAgICA+XG4gICAgICAgIC8hXFxcbiAgICA8L1Rvb2x0aXA+XG4pO1xuXG5leHBvcnQgY29uc3QgQ2hpbGRBdXRob3JpdHlEZXB0aE92ZXJmbG93V2FybmluZyA9ICgpID0+IChcbiAgICA8VG9vbHRpcFxuICAgICAgICBjbGFzc05hbWU9XCJlcnJvciBhcHBlbmRlZFwiXG4gICAgICAgIGNvbnRlbnQ9XCJleHBsb3Jlci5wcm9wb3NhbHMuY2hpbGRyZW5fYXV0aG9yaXR5X2RlcHRoX3dhcm5pbmdcIlxuICAgID5cbiAgICAgICAgLyFcXFxuICAgIDwvVG9vbHRpcD5cbik7XG5cbmV4cG9ydCBjb25zdCBQZW5kaW5nID0gKCkgPT4gKFxuICAgIDxUb29sdGlwIGNsYXNzTmFtZT1cIndhcm5pbmdcIiBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLnBlbmRpbmdfYXBwcm92YWxcIj5cbiAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLnBlbmRpbmdcIiAvPlxuICAgIDwvVG9vbHRpcD5cbik7XG5cbmV4cG9ydCBjb25zdCBSZXZpZXcgPSAoKSA9PiAoXG4gICAgPFRvb2x0aXAgY2xhc3NOYW1lPVwid2FybmluZ1wiIGNvbnRlbnQ9XCJleHBsb3Jlci5wcm9wb3NhbHMucGVuZGluZ19yZXZpZXdcIj5cbiAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLnJldmlld1wiIC8+XG4gICAgPC9Ub29sdGlwPlxuKTtcblxuZXhwb3J0IGNvbnN0IEZhaWxlZCA9ICgpID0+IChcbiAgICA8VG9vbHRpcCBjbGFzc05hbWU9XCJlcnJvclwiIGNvbnRlbnQ9XCJleHBsb3Jlci5wcm9wb3NhbHMuZmFpbGVkX2V4ZWN1dGVcIj5cbiAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLmZhaWxlZFwiIC8+XG4gICAgPC9Ub29sdGlwPlxuKTtcblxuZXhwb3J0IGNvbnN0IEV4cGFuZEJ1dHRvbiA9ICh7b25Ub2dnbGUsIGV4cGFuZGVkfSkgPT4gKFxuICAgIDxhIGNsYXNzTmFtZT1cImV4cGFuZC1idXR0b25cIiBvbkNsaWNrPXtvblRvZ2dsZX0+XG4gICAgICAgIFt7ZXhwYW5kZWQgPyBcIi1cIiA6IFwiK1wifV1cbiAgICA8L2E+XG4pO1xuXG5leHBvcnQgY29uc3QgQXBwcm92ZWRJY29uID0gKHthcHByb3ZlZH0pID0+XG4gICAgYXBwcm92ZWQgPyAoXG4gICAgICAgIDxJY29uXG4gICAgICAgICAgICBuYW1lPVwiY2hlY2ttYXJrLWNpcmNsZVwiXG4gICAgICAgICAgICBzaXplPVwiMXhcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwic3VjY2Vzc1wiXG4gICAgICAgICAgICB0aXRsZT1cImljb25zLmNoZWNrbWFya19jaXJjbGUub3BlcmF0aW9uX3N1Y2NlZWRcIlxuICAgICAgICAvPlxuICAgICkgOiAoXG4gICAgICAgIDxJY29uXG4gICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcbiAgICAgICAgICAgIHNpemU9XCIxeFwiXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJlcnJvclwiXG4gICAgICAgICAgICB0aXRsZT1cImljb25zLmNyb3NzX2NpcmNsZS5vcGVyYXRpb25fZmFpbGVkXCJcbiAgICAgICAgLz5cbiAgICApO1xuXG5leHBvcnQgY29uc3QgS2V5UGVybWlzc2lvbkJyYW5jaCA9ICh7YXZhaWxhYmxlLCBwZXJtaXNzaW9uLCB3ZWlnaHQsIGxldmVsfSkgPT4gKFxuICAgIDx0Ym9keT5cbiAgICAgICAgPHRyPlxuICAgICAgICAgICAgPHRkIGNvbFNwYW49XCIyXCI+XG4gICAgICAgICAgICAgICAgPEFwcHJvdmVkSWNvbiBhcHByb3ZlZD17cGVybWlzc2lvbi5pc0F2YWlsYWJsZShhdmFpbGFibGUpfSAvPlxuICAgICAgICAgICAgICAgIHtwZXJtaXNzaW9uLmlkLnN1YnN0cigwLCAyMCAtIDQgKiBsZXZlbCl9Li4uXG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPHRkPnt3ZWlnaHR9PC90ZD5cbiAgICAgICAgPC90cj5cbiAgICA8L3Rib2R5PlxuKTtcblxuZXhwb3J0IGNvbnN0IGhhc0F1dGhvcml0eURlcHRoUHJvYmxlbSA9IChcbiAgICBtYXhBdXRob3JpdHlEZXB0aCxcbiAgICBwZXJtaXNzaW9uLFxuICAgIGxldmVsID0gMFxuKSA9PiB7XG4gICAgaWYgKGxldmVsID4gbWF4QXV0aG9yaXR5RGVwdGgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICghcGVybWlzc2lvbi5pc05lc3RlZCgpICYmICFwZXJtaXNzaW9uLmlzTXVsdGlTaWcoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBlcm1pc3Npb24uYWNjb3VudHMuc29tZShzdWJBY2NvdW50ID0+XG4gICAgICAgICAgICBoYXNBdXRob3JpdHlEZXB0aFByb2JsZW0obWF4QXV0aG9yaXR5RGVwdGgsIHN1YkFjY291bnQsIGxldmVsICsgMSlcbiAgICAgICAgKTtcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0U3RhdHVzID0gKHBlcm1pc3Npb24sIGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cykgPT5cbiAgICBwZXJtaXNzaW9uLmFjY291bnRzLnJlZHVjZShcbiAgICAgICAgKGFtb3VudCwgc3ViUGVybWlzc2lvbikgPT5cbiAgICAgICAgICAgIGFtb3VudCArXG4gICAgICAgICAgICAoaXNBcHByb3ZlZChzdWJQZXJtaXNzaW9uLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpXG4gICAgICAgICAgICAgICAgPyBzdWJQZXJtaXNzaW9uLndlaWdodFxuICAgICAgICAgICAgICAgIDogMCksXG5cbiAgICAgICAgMFxuICAgICkgK1xuICAgIHBlcm1pc3Npb24ua2V5cy5yZWR1Y2UoXG4gICAgICAgIChhbW91bnQsIGtleSkgPT5cbiAgICAgICAgICAgIGFtb3VudCArIChrZXkuaXNBdmFpbGFibGUoYXZhaWxhYmxlS2V5cykgPyBrZXkud2VpZ2h0IDogMCksXG4gICAgICAgIDBcbiAgICApO1xuXG5leHBvcnQgY29uc3QgaXNBcHByb3ZlZCA9IChwZXJtaXNzaW9uLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpID0+XG4gICAgcGVybWlzc2lvbi5pc05lc3RlZCgpIHx8IHBlcm1pc3Npb24uaXNNdWx0aVNpZygpXG4gICAgICAgID8gZ2V0U3RhdHVzKHBlcm1pc3Npb24sIGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cykgPj1cbiAgICAgICAgICBwZXJtaXNzaW9uLnRocmVzaG9sZFxuICAgICAgICA6IHBlcm1pc3Npb24uaXNBdmFpbGFibGUoYXZhaWxhYmxlKTtcblxuZXhwb3J0IGNvbnN0IHN0YXR1c1RleHQgPSAocGVybWlzc2lvbiwgYXZhaWxhYmxlLCBhdmFpbGFibGVLZXlzKSA9PlxuICAgIHBlcm1pc3Npb24gJiYgcGVybWlzc2lvbi50aHJlc2hvbGQgPiAxMFxuICAgICAgICA/IGAke3V0aWxzLmdldF9wZXJjZW50YWdlKFxuICAgICAgICAgICAgICBwZXJtaXNzaW9uLmdldFN0YXR1cyhhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpLFxuICAgICAgICAgICAgICBwZXJtaXNzaW9uLnRocmVzaG9sZFxuICAgICAgICAgICl9IC8gMTAwJWBcbiAgICAgICAgOiBgJHtwZXJtaXNzaW9uLmdldFN0YXR1cyhhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpfSAvICR7XG4gICAgICAgICAgICAgIHBlcm1pc3Npb24udGhyZXNob2xkXG4gICAgICAgICAgfWA7XG5cbmV4cG9ydCBjb25zdCBub3ROZXN0ZFdlaWdodCA9ICh3ZWlnaHQsIHRocmVzaG9sZCkgPT5cbiAgICB0aHJlc2hvbGQgJiYgdGhyZXNob2xkID4gMTBcbiAgICAgICAgPyB1dGlscy5nZXRfcGVyY2VudGFnZSh3ZWlnaHQsIHRocmVzaG9sZClcbiAgICAgICAgOiB3ZWlnaHQ7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge09yZGVyUm93LCBUYWJsZUhlYWRlcn0gZnJvbSBcIi4uL0V4Y2hhbmdlL015T3Blbk9yZGVyc1wiO1xuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xuaW1wb3J0IE1hcmtldHNBY3Rpb25zIGZyb20gXCJhY3Rpb25zL01hcmtldHNBY3Rpb25zXCI7XG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xuaW1wb3J0IHtMaW1pdE9yZGVyfSBmcm9tIFwiY29tbW9uL01hcmtldENsYXNzZXNcIjtcbmltcG9ydCB7Y29ubmVjdH0gZnJvbSBcImFsdC1yZWFjdFwiO1xuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XG5pbXBvcnQgU2V0dGluZ3NBY3Rpb25zIGZyb20gXCJhY3Rpb25zL1NldHRpbmdzQWN0aW9uc1wiO1xuaW1wb3J0IG1hcmtldFV0aWxzIGZyb20gXCJjb21tb24vbWFya2V0X3V0aWxzXCI7XG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XG5pbXBvcnQgUGFnaW5hdGVkTGlzdCBmcm9tIFwiLi4vVXRpbGl0eS9QYWdpbmF0ZWRMaXN0XCI7XG5cbmNsYXNzIEFjY291bnRPcmRlcnMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2VsZWN0ZWRPcmRlcnM6IFtdLFxuICAgICAgICAgICAgZmlsdGVyVmFsdWU6IFwiXCJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgbGV0IGNhbmNlbEhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FuY2VsQWxsT3JkZXJzXCIpO1xuXG4gICAgICAgIGlmIChjYW5jZWxIZWFkZXIpIHtcbiAgICAgICAgICAgIGNhbmNlbEhlYWRlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9yZGVycyA9IHRoaXMuX2dldEZpbHRlcmVkT3JkZXJzLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIG9yZGVycyA9IG9yZGVycy50b0pTID8gb3JkZXJzLnRvSlMoKSA6IG9yZGVycztcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZE9yZGVyczogb3JkZXJzfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm9yZGVyQ2FuY2VsXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94ZXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXRlbS5jaGVja2VkKSBpdGVtLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfZ2V0RmlsdGVyZWRPcmRlcnMoKSB7XG4gICAgICAgIGxldCB7ZmlsdGVyVmFsdWV9ID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICBsZXQgb3JkZXJzID0gdGhpcy5wcm9wcy5hY2NvdW50LmdldChcIm9yZGVyc1wiKSB8fCBbXTtcblxuICAgICAgICByZXR1cm4gb3JkZXJzLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgICAgIGxldCBvcmRlciA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KGl0ZW0pLnRvSlMoKTtcbiAgICAgICAgICAgIGxldCBiYXNlID0gQ2hhaW5TdG9yZS5nZXRBc3NldChvcmRlci5zZWxsX3ByaWNlLmJhc2UuYXNzZXRfaWQpO1xuICAgICAgICAgICAgbGV0IHF1b3RlID0gQ2hhaW5TdG9yZS5nZXRBc3NldChvcmRlci5zZWxsX3ByaWNlLnF1b3RlLmFzc2V0X2lkKTtcblxuICAgICAgICAgICAgbGV0IGJhc2VTeW1ib2wgPSBiYXNlLmdldChcInN5bWJvbFwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgbGV0IHF1b3RlU3ltYm9sID0gcXVvdGUuZ2V0KFwic3ltYm9sXCIpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgYmFzZVN5bWJvbC5pbmRleE9mKGZpbHRlclZhbHVlKSA+IC0xIHx8XG4gICAgICAgICAgICAgICAgcXVvdGVTeW1ib2wuaW5kZXhPZihmaWx0ZXJWYWx1ZSkgPiAtMVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2NhbmNlbExpbWl0T3JkZXIob3JkZXJJRCwgZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgTWFya2V0c0FjdGlvbnMuY2FuY2VsTGltaXRPcmRlcihcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKSxcbiAgICAgICAgICAgIG9yZGVySUQsIC8vIG9yZGVyIGlkIHRvIGNhbmNlbFxuICAgICAgICAgICAgZmFsc2UgLy8gRG9uJ3Qgc2hvdyBub3JtYWwgY29uZmlybXNcbiAgICAgICAgKS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjYW5jZWwgb3JkZXIgZXJyb3I6XCIsIGVycik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9jYW5jZWxMaW1pdE9yZGVycyhvcmRlcklkKSB7XG4gICAgICAgIE1hcmtldHNBY3Rpb25zLmNhbmNlbExpbWl0T3JkZXJzKFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpLFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZE9yZGVyc1xuICAgICAgICApXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldFNlbGVjdGVkKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjYW5jZWwgb3JkZXJzIGVycm9yOlwiLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25GbGlwKG1hcmtldElkKSB7XG4gICAgICAgIGxldCBzZXR0aW5nID0ge307XG4gICAgICAgIHNldHRpbmdbbWFya2V0SWRdID0gIXRoaXMucHJvcHMubWFya2V0RGlyZWN0aW9ucy5nZXQobWFya2V0SWQpO1xuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlTWFya2V0RGlyZWN0aW9uKHNldHRpbmcpO1xuICAgIH1cblxuICAgIG9uQ2hlY2tDYW5jZWwob3JkZXJJZCwgZXZ0KSB7XG4gICAgICAgIGxldCB7c2VsZWN0ZWRPcmRlcnN9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgbGV0IGNoZWNrZWQgPSBldnQudGFyZ2V0LmNoZWNrZWQ7XG5cbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkT3JkZXJzOiBzZWxlY3RlZE9yZGVycy5jb25jYXQoW29yZGVySWRdKX0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gc2VsZWN0ZWRPcmRlcnMuaW5kZXhPZihvcmRlcklkKTtcblxuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcmRlcnM6IHNlbGVjdGVkT3JkZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2xpY2UoMCwgaW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHNlbGVjdGVkT3JkZXJzLnNsaWNlKGluZGV4ICsgMSkpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRGaWx0ZXJWYWx1ZShldnQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZmlsdGVyVmFsdWU6IGV2dC50YXJnZXQudmFsdWUudG9Mb3dlckNhc2UoKX0pO1xuICAgIH1cblxuICAgIHJlc2V0U2VsZWN0ZWQoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkT3JkZXJzOiBbXX0pO1xuXG4gICAgICAgIGxldCBjaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5vcmRlckNhbmNlbFwiKTtcblxuICAgICAgICBjaGVja2JveGVzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5jaGVja2VkKSBpdGVtLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2FuY2VsU2VsZWN0ZWQoKSB7XG4gICAgICAgIHRoaXMuX2NhbmNlbExpbWl0T3JkZXJzLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge2FjY291bnQsIG1hcmtldERpcmVjdGlvbnN9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgbGV0IHtmaWx0ZXJWYWx1ZSwgc2VsZWN0ZWRPcmRlcnN9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgbGV0IGNhbmNlbCA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQucGVybS5jYW5jZWxcIik7XG4gICAgICAgIGxldCBtYXJrZXRzID0ge307XG5cbiAgICAgICAgbGV0IG1hcmtldE9yZGVycyA9IHt9O1xuXG4gICAgICAgIGlmICghYWNjb3VudC5nZXQoXCJvcmRlcnNcIikpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG9yZGVycyA9IGFjY291bnQuZ2V0KFwib3JkZXJzXCIpO1xuICAgICAgICBjb25zdCBvcmRlcnNDb3VudCA9IG9yZGVycy5zaXplO1xuICAgICAgICBpZiAoZmlsdGVyVmFsdWUpIHtcbiAgICAgICAgICAgIG9yZGVycyA9IHRoaXMuX2dldEZpbHRlcmVkT3JkZXJzLmNhbGwodGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICBvcmRlcnMuZm9yRWFjaChvcmRlcklEID0+IHtcbiAgICAgICAgICAgIGxldCBvcmRlciA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KG9yZGVySUQpLnRvSlMoKTtcbiAgICAgICAgICAgIGxldCBiYXNlID0gQ2hhaW5TdG9yZS5nZXRBc3NldChvcmRlci5zZWxsX3ByaWNlLmJhc2UuYXNzZXRfaWQpO1xuICAgICAgICAgICAgbGV0IHF1b3RlID0gQ2hhaW5TdG9yZS5nZXRBc3NldChvcmRlci5zZWxsX3ByaWNlLnF1b3RlLmFzc2V0X2lkKTtcblxuICAgICAgICAgICAgaWYgKGJhc2UgJiYgcXVvdGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgYXNzZXRzID0ge1xuICAgICAgICAgICAgICAgICAgICBbYmFzZS5nZXQoXCJpZFwiKV06IHtwcmVjaXNpb246IGJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpfSxcbiAgICAgICAgICAgICAgICAgICAgW3F1b3RlLmdldChcImlkXCIpXToge3ByZWNpc2lvbjogcXVvdGUuZ2V0KFwicHJlY2lzaW9uXCIpfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gbGV0IGJhc2VJRCA9IHBhcnNlSW50KG9yZGVyLnNlbGxfcHJpY2UuYmFzZS5hc3NldF9pZC5zcGxpdChcIi5cIilbMl0sIDEwKTtcbiAgICAgICAgICAgICAgICAvLyBsZXQgcXVvdGVJRCA9IHBhcnNlSW50KG9yZGVyLnNlbGxfcHJpY2UucXVvdGUuYXNzZXRfaWQuc3BsaXQoXCIuXCIpWzJdLCAxMCk7XG5cbiAgICAgICAgICAgICAgICAvLyBsZXQgbWFya2V0TmFtZSA9IHF1b3RlSUQgPiBiYXNlSUQgPyBgJHtxdW90ZS5nZXQoXCJzeW1ib2xcIil9XyR7YmFzZS5nZXQoXCJzeW1ib2xcIil9YCA6IGAke2Jhc2UuZ2V0KFwic3ltYm9sXCIpfV8ke3F1b3RlLmdldChcInN5bWJvbFwiKX1gO1xuICAgICAgICAgICAgICAgIGNvbnN0IHttYXJrZXROYW1lfSA9IG1hcmtldFV0aWxzLmdldE1hcmtldE5hbWUoYmFzZSwgcXVvdGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IG1hcmtldERpcmVjdGlvbnMuZ2V0KG1hcmtldE5hbWUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFtYXJrZXRzW21hcmtldE5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldHNbbWFya2V0TmFtZV0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogYmFzZS5nZXQoXCJpZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiBiYXNlLmdldChcInN5bWJvbFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBiYXNlLmdldChcInByZWNpc2lvblwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHF1b3RlLmdldChcImlkXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2w6IHF1b3RlLmdldChcInN5bWJvbFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBxdW90ZS5nZXQoXCJwcmVjaXNpb25cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0c1ttYXJrZXROYW1lXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBxdW90ZS5nZXQoXCJpZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiBxdW90ZS5nZXQoXCJzeW1ib2xcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWNpc2lvbjogcXVvdGUuZ2V0KFwicHJlY2lzaW9uXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogYmFzZS5nZXQoXCJpZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiBiYXNlLmdldChcInN5bWJvbFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBiYXNlLmdldChcInByZWNpc2lvblwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGxpbWl0T3JkZXIgPSBuZXcgTGltaXRPcmRlcihcbiAgICAgICAgICAgICAgICAgICAgb3JkZXIsXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0cyxcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0c1ttYXJrZXROYW1lXS5xdW90ZS5pZFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBsZXQgbWFya2V0QmFzZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQoXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldHNbbWFya2V0TmFtZV0uYmFzZS5pZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgbGV0IG1hcmtldFF1b3RlID0gQ2hhaW5TdG9yZS5nZXRBc3NldChcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0c1ttYXJrZXROYW1lXS5xdW90ZS5pZFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIW1hcmtldE9yZGVyc1ttYXJrZXROYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXRPcmRlcnNbbWFya2V0TmFtZV0gPSBbXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtYXJrZXRPcmRlcnNbbWFya2V0TmFtZV0ucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPE9yZGVyUm93XG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9e21hcmtldHNbbWFya2V0TmFtZV0uYmFzZS5zeW1ib2x9XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e29yZGVyLmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI9e2xpbWl0T3JkZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlPXttYXJrZXRCYXNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU9e21hcmtldFF1b3RlfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsX3RleHQ9e2NhbmNlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTeW1ib2xzPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGludmVydD17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2FuY2VsPXt0aGlzLl9jYW5jZWxMaW1pdE9yZGVyLmJpbmQodGhpcywgb3JkZXIuaWQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U9e2xpbWl0T3JkZXIuZ2V0UHJpY2UoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhc2hib2FyZFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNNeUFjY291bnQ9e3RoaXMucHJvcHMuaXNNeUFjY291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncz17dGhpcy5wcm9wcy5zZXR0aW5nc31cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRmxpcD17dGhpcy5vbkZsaXAuYmluZCh0aGlzLCBtYXJrZXROYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hlY2tDYW5jZWw9e3RoaXMub25DaGVja0NhbmNlbC5iaW5kKHRoaXMsIG9yZGVyLmlkKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgdGFibGVzID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgbWFya2V0IGluIG1hcmtldE9yZGVycykge1xuICAgICAgICAgICAgaWYgKG1hcmtldE9yZGVyc1ttYXJrZXRdLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRhYmxlcyA9IHRhYmxlcy5jb25jYXQoXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldE9yZGVyc1ttYXJrZXRdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnByb3BzLnByaWNlIC0gYi5wcm9wcy5wcmljZTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIC8vIHRhYmxlcy5wdXNoKFxuICAgICAgICAgICAgICAgIC8vICAgICA8dGJvZHkga2V5PXttYXJrZXR9PlxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgey8qIHttYXJrZXRJbmRleCA+IDAgPyA8dHI+PHRkIGNvbFNwYW49e3RoaXMucHJvcHMuaXNNeUFjY291bnQgPyBcIjdcIiA6IFwiNlwifT48c3BhbiBzdHlsZT17e3Zpc2liaWxpdHk6IFwiaGlkZGVuXCJ9fT5IPC9zcGFuPjwvdGQ+PC90cj4gOiBudWxsfSAqL31cbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHttYXJrZXRPcmRlcnNbbWFya2V0XS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgcmV0dXJuIGEucHJvcHMucHJpY2UgLSBiLnByb3BzLnByaWNlO1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgLy8gICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgLy8gKTtcbiAgICAgICAgICAgICAgICAvLyBtYXJrZXRJbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGFibGVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgLy8gICAgIHJldHVybiBwYXJzZUludChhLmtleSwgMTApIC0gcGFyc2VJbnQoYi5rZXksIDEwKTtcbiAgICAgICAgLy8gfSlcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBuby1vdmVyZmxvdyBuby1wYWRkaW5nXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206IDE1fX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1zZWxlY3RvclwiPlxuICAgICAgICAgICAgICAgICAgICB7b3JkZXJzICYmIG9yZGVyc0NvdW50ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5maWx0ZXJfb3JkZXJzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiBcIjUwJVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogXCIxZW1cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luQm90dG9tOiBcIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuc2V0RmlsdGVyVmFsdWUuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRPcmRlcnMubGVuZ3RoID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5yZXNldFNlbGVjdGVkLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5yZXNldF9vcmRlcnNcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRPcmRlcnMubGVuZ3RoID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5jYW5jZWxTZWxlY3RlZC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuc3VibWl0X29yZGVyc1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8UGFnaW5hdGVkTGlzdFxuICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZT17MjB9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRhYmxlIHRhYmxlLXN0cmlwZWQgZGFzaGJvYXJkLXRhYmxlIHRhYmxlLWhvdmVyXCJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyPXtcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZUhlYWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzPXt0aGlzLnByb3BzLnNldHRpbmdzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhc2hib2FyZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTXlBY2NvdW50PXt0aGlzLnByb3BzLmlzTXlBY2NvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByb3dzPXt0YWJsZXN9XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhUm93PXt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbkFjY291bnRPcmRlcnMgPSBjb25uZWN0KFxuICAgIEFjY291bnRPcmRlcnMsXG4gICAge1xuICAgICAgICBsaXN0ZW5UbygpIHtcbiAgICAgICAgICAgIHJldHVybiBbU2V0dGluZ3NTdG9yZV07XG4gICAgICAgIH0sXG4gICAgICAgIGdldFByb3BzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtYXJrZXREaXJlY3Rpb25zOiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkubWFya2V0RGlyZWN0aW9uc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbik7XG5cbmV4cG9ydCBkZWZhdWx0IEFjY291bnRPcmRlcnM7XG4iLCJpbXBvcnQge0ZldGNoQ2hhaW59IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xuaW1wb3J0IHtGZWVkUHJpY2UsIEFzc2V0fSBmcm9tIFwiLi9NYXJrZXRDbGFzc2VzXCI7XG5cbmxldCBhc3luY0NhY2hlID0ge307XG5jb25zdCBjaGVja01hcmdpblN0YXR1c1RUTCA9IDYwMDAwICogMTsgLy8gMSBtaW51dGVcblxuZnVuY3Rpb24gY2hlY2tNYXJnaW5TdGF0dXMoYWNjb3VudCkge1xuICAgIGlmICghYWNjb3VudCB8fCAoYWNjb3VudCAmJiAhYWNjb3VudC5nZXQoXCJjYWxsX29yZGVyc1wiLCBbXSkuc2l6ZSkpXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG5cbiAgICBjb25zdCBrZXkgPVxuICAgICAgICBhY2NvdW50LmdldChcIm5hbWVcIikgKyBKU09OLnN0cmluZ2lmeShhY2NvdW50LmdldChcImNhbGxfb3JkZXJzXCIpKTtcbiAgICBpZiAoYXN5bmNDYWNoZVtrZXldKSB7XG4gICAgICAgIGlmIChhc3luY0NhY2hlW2tleV0ucmVzdWx0KSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGFzeW5jQ2FjaGVba2V5XS5yZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcbiAgICAgICAgICAgIGFzeW5jQ2FjaGVba2V5XS5xdWV1ZS5wdXNoKHtyZXMsIHJlan0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgICBhc3luY0NhY2hlW2tleV0gPSB7cXVldWU6IFt7cmVzLCByZWp9XSwgcmVzdWx0OiBudWxsfTtcblxuICAgICAgICBGZXRjaENoYWluKFwiZ2V0T2JqZWN0XCIsIGFjY291bnQuZ2V0KFwiY2FsbF9vcmRlcnNcIikudG9BcnJheSgpKVxuICAgICAgICAgICAgLnRoZW4oY2FsbF9vcmRlcnMgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBhc3NldHMgPSBbXTtcbiAgICAgICAgICAgICAgICBjYWxsX29yZGVycy5mb3JFYWNoKGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmFzZUlkID0gYS5nZXRJbihbXCJjYWxsX3ByaWNlXCIsIFwiYmFzZVwiLCBcImFzc2V0X2lkXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHF1b3RlSWQgPSBhLmdldEluKFtcImNhbGxfcHJpY2VcIiwgXCJxdW90ZVwiLCBcImFzc2V0X2lkXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFzc2V0cy5pbmRleE9mKGJhc2VJZCkgPT09IC0xKSBhc3NldHMucHVzaChiYXNlSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXNzZXRzLmluZGV4T2YocXVvdGVJZCkgPT09IC0xKSBhc3NldHMucHVzaChxdW90ZUlkKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBGZXRjaENoYWluKFwiZ2V0QXNzZXRcIiwgYXNzZXRzLCA2MDAwKS50aGVuKGFzc2V0cyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhc3NldHNNYXAgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRzLmZvckVhY2goYXNzZXQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzTWFwW2Fzc2V0LmdldChcImlkXCIpXSA9IGFzc2V0LnRvSlMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzdGF0dXMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbF9vcmRlcnMuZm9yRWFjaChjbyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVidEFzc2V0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHNNYXBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvLmdldEluKFtcImNhbGxfcHJpY2VcIiwgXCJxdW90ZVwiLCBcImFzc2V0X2lkXCJdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29sbGF0ZXJhbEFzc2V0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHNNYXBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvLmdldEluKFtcImNhbGxfcHJpY2VcIiwgXCJiYXNlXCIsIFwiYXNzZXRfaWRcIl0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidEFzc2V0LmJpdGFzc2V0LmN1cnJlbnRfZmVlZC5zZXR0bGVtZW50X3ByaWNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwLmJhc2UuYXNzZXRfaWQgPT09IHNwLnF1b3RlLmFzc2V0X2lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzW2RlYnRBc3NldC5pZF0gPSB7cmF0aW86IG51bGx9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29sbGF0ZXJhbCA9IG5ldyBBc3NldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogY28uZ2V0KFwiY29sbGF0ZXJhbFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRfaWQ6IGNvbGxhdGVyYWxBc3NldC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBjb2xsYXRlcmFsQXNzZXQucHJlY2lzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRlYnQgPSBuZXcgQXNzZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGNvLmdldChcImRlYnRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBkZWJ0QXNzZXQuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWNpc2lvbjogZGVidEFzc2V0LnByZWNpc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtciA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnRBc3NldC5iaXRhc3NldC5jdXJyZW50X2ZlZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYWludGVuYW5jZV9jb2xsYXRlcmFsX3JhdGlvIC8gMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJpY2UgPSBuZXcgRmVlZFByaWNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VPYmplY3Q6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ0QXNzZXQuYml0YXNzZXQuY3VycmVudF9mZWVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldHRsZW1lbnRfcHJpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldF9iYXNlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidEFzc2V0LmJpdGFzc2V0LmN1cnJlbnRfZmVlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXR0bGVtZW50X3ByaWNlLnF1b3RlLmFzc2V0X2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcXI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ0QXNzZXQuYml0YXNzZXQuY3VycmVudF9mZWVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1heGltdW1fc2hvcnRfc3F1ZWV6ZV9yYXRpbyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzOiBhc3NldHNNYXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW86XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXRlcmFsLmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pIC9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkZWJ0LmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pIC9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZS50b1JlYWwoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hTihjdXJyZW50LnJhdGlvKSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQucmF0aW8gPCBtcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LnN0YXR1c0NsYXNzID0gXCJkYW5nZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnQucmF0aW8gPCBtciArIDAuNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LnN0YXR1c0NsYXNzID0gXCJ3YXJuaW5nXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5zdGF0dXNDbGFzcyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1tkZWJ0QXNzZXQuaWRdID0gY3VycmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jQ2FjaGVba2V5XS5xdWV1ZS5mb3JFYWNoKHByb21pc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5yZXMoc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jQ2FjaGVba2V5XSA9IHtyZXN1bHQ6IHN0YXR1c307XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGFzeW5jQ2FjaGVba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfSwgY2hlY2tNYXJnaW5TdGF0dXNUVEwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXN5bmNDYWNoZVtrZXldLnF1ZXVlLmZvckVhY2gocHJvbWlzZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UucmVqKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IHtjaGVja01hcmdpblN0YXR1c307XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgUmVhY3RIaWdoY2hhcnRzIGZyb20gXCJyZWFjdC1oaWdoY2hhcnRzXCI7XG5pbXBvcnQgVHJlZW1hcCBmcm9tIFwiaGlnaGNoYXJ0cy9tb2R1bGVzL3RyZWVtYXBcIjtcbmltcG9ydCBIZWF0bWFwIGZyb20gXCJoaWdoY2hhcnRzL21vZHVsZXMvaGVhdG1hcFwiO1xuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XG5pbXBvcnQgQWx0Q29udGFpbmVyIGZyb20gXCJhbHQtY29udGFpbmVyXCI7XG5pbXBvcnQgTWFya2V0VXRpbHMgZnJvbSBcImNvbW1vbi9tYXJrZXRfdXRpbHNcIjtcbmltcG9ydCBNYXJrZXRzU3RvcmUgZnJvbSBcInN0b3Jlcy9NYXJrZXRzU3RvcmVcIjtcbmltcG9ydCBTZXR0aW5nc1N0b3JlIGZyb20gXCJzdG9yZXMvU2V0dGluZ3NTdG9yZVwiO1xuXG5UcmVlbWFwKFJlYWN0SGlnaGNoYXJ0cy5IaWdoY2hhcnRzKTtcbkhlYXRtYXAoUmVhY3RIaWdoY2hhcnRzLkhpZ2hjaGFydHMpO1xuXG5jbGFzcyBBY2NvdW50VHJlZW1hcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgYXNzZXRzOiBDaGFpblR5cGVzLkNoYWluQXNzZXRzTGlzdCxcbiAgICAgICAgcHJlZmVycmVkQXNzZXQ6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGFzc2V0czogW10sXG4gICAgICAgIHByZWZlcnJlZEFzc2V0OiBcIjEuMy4wXCJcbiAgICB9O1xuXG4gICAgLy8gc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcykge1xuICAgIC8vICAgICByZXR1cm4gKFxuICAgIC8vICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KG5leHRQcm9wcy5iYWxhbmNlT2JqZWN0cywgdGhpcy5wcm9wcy5iYWxhbmNlT2JqZWN0cykgfHxcbiAgICAvLyAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhuZXh0UHJvcHMuYXNzZXRzLCB0aGlzLnByb3BzLmFzc2V0cylcbiAgICAvLyAgICAgKTtcbiAgICAvLyB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7XG4gICAgICAgICAgICBiYWxhbmNlT2JqZWN0cyxcbiAgICAgICAgICAgIGNvcmVfYXNzZXQsXG4gICAgICAgICAgICBtYXJrZXRTdGF0cyxcbiAgICAgICAgICAgIHByZWZlcnJlZEFzc2V0XG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIGxldCBhY2NvdW50QmFsYW5jZXMgPSBudWxsO1xuXG4gICAgICAgIGlmIChiYWxhbmNlT2JqZWN0cyAmJiBiYWxhbmNlT2JqZWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsZXQgdG90YWxWYWx1ZSA9IDA7XG4gICAgICAgICAgICBhY2NvdW50QmFsYW5jZXMgPSBiYWxhbmNlT2JqZWN0cy5mb3JFYWNoKGJhbGFuY2UgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghYmFsYW5jZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGxldCBiYWxhbmNlT2JqZWN0ID1cbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGJhbGFuY2UgPT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyBDaGFpblN0b3JlLmdldE9iamVjdChiYWxhbmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBiYWxhbmNlO1xuICAgICAgICAgICAgICAgIGxldCBhc3NldF90eXBlID0gYmFsYW5jZU9iamVjdC5nZXQoXCJhc3NldF90eXBlXCIpO1xuICAgICAgICAgICAgICAgIGxldCBhc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQoYXNzZXRfdHlwZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFhc3NldCB8fCAhcHJlZmVycmVkQXNzZXQpIHJldHVybjtcbiAgICAgICAgICAgICAgICBsZXQgYW1vdW50ID0gTnVtYmVyKGJhbGFuY2VPYmplY3QuZ2V0KFwiYmFsYW5jZVwiKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZXFWYWx1ZSA9IE1hcmtldFV0aWxzLmNvbnZlcnRWYWx1ZShcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldCxcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQsXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldFN0YXRzLFxuICAgICAgICAgICAgICAgICAgICBjb3JlX2Fzc2V0XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmICghZXFWYWx1ZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXG4gICAgICAgICAgICAgICAgICAgIHByZWZlcnJlZEFzc2V0LmdldChcInByZWNpc2lvblwiKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdG90YWxWYWx1ZSArPSBlcVZhbHVlIC8gcHJlY2lzaW9uO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGFjY291bnRCYWxhbmNlcyA9IGJhbGFuY2VPYmplY3RzXG4gICAgICAgICAgICAgICAgLm1hcCgoYmFsYW5jZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiYWxhbmNlKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJhbGFuY2VPYmplY3QgPVxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGJhbGFuY2UgPT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gQ2hhaW5TdG9yZS5nZXRPYmplY3QoYmFsYW5jZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGJhbGFuY2U7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhc3NldF90eXBlID0gYmFsYW5jZU9iamVjdC5nZXQoXCJhc3NldF90eXBlXCIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYXNzZXQgPSBDaGFpblN0b3JlLmdldEFzc2V0KGFzc2V0X3R5cGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFzc2V0KSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFtb3VudCA9IE51bWJlcihiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIikpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVxVmFsdWUgPSBNYXJrZXRVdGlscy5jb252ZXJ0VmFsdWUoXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0U3RhdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2Fzc2V0XG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlcVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldC5nZXQoXCJwcmVjaXNpb25cIilcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmluYWxWYWx1ZSA9IGVxVmFsdWUgLyBwcmVjaXNpb247XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcmNlbnQgPSAoZmluYWxWYWx1ZSAvIHRvdGFsVmFsdWUpICogMTAwO1xuXG4gICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgKiBGaWx0ZXIgb3V0IGFzc2V0cyB0aGF0IG1ha2UgdXAgYSBzbWFsbCBwZXJjZW50YWdlIG9mXG4gICAgICAgICAgICAgICAgKiB0aGUgdG90YWwgdmFsdWUgb2YgdGhlIGFjY291bnRcbiAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVyY2VudCA8IDAuNSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbmFsVmFsdWUgPj0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBgJHthc3NldC5nZXQoXCJzeW1ib2xcIil9ICgke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsVmFsdWUgPT09IDAgPyAwIDogcGVyY2VudC50b0ZpeGVkKDIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9JSlgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZpbmFsVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogUmVhY3RIaWdoY2hhcnRzLkhpZ2hjaGFydHMuZ2V0T3B0aW9ucygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbG9yc1tpbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZpbHRlcihuID0+ICEhbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBhY2NvdW50QmFsYW5jZXMgJiZcbiAgICAgICAgICAgIGFjY291bnRCYWxhbmNlcy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICAgIGFjY291bnRCYWxhbmNlc1swXS52YWx1ZSA9PT0gMFxuICAgICAgICApIHtcbiAgICAgICAgICAgIGFjY291bnRCYWxhbmNlcyA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY29uZmlnID0ge1xuICAgICAgICAgICAgY2hhcnQ6IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgyNTUsIDAsIDAsIDApXCIsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyNTAsXG4gICAgICAgICAgICAgICAgc3BhY2luZ0xlZnQ6IDAsXG4gICAgICAgICAgICAgICAgc3BhY2luZ1JpZ2h0OiAwLFxuICAgICAgICAgICAgICAgIHNwYWNpbmdCb3R0b206IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBjb2xvckF4aXM6IHtcbiAgICAgICAgICAgIC8vICAgICBtaW46IDAsXG4gICAgICAgICAgICAvLyAgICAgbWluQ29sb3I6IFwiI2ZmZmZmZlwiLFxuICAgICAgICAgICAgLy8gICAgIG1heENvbG9yOiBSZWFjdEhpZ2hjaGFydHMuSGlnaGNoYXJ0cy5nZXRPcHRpb25zKCkuY29sb3JzWzBdXG4gICAgICAgICAgICAvLyB9LFxuICAgICAgICAgICAgY3JlZGl0czoge1xuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwbG90T3B0aW9uczoge1xuICAgICAgICAgICAgICAgIHRyZWVtYXA6IHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRGb3JtYXR0ZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgPGI+JHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTwvYj46ICR7UmVhY3RIaWdoY2hhcnRzLkhpZ2hjaGFydHMubnVtYmVyRm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0gJHtwcmVmZXJyZWRBc3NldC5nZXQoXCJzeW1ib2xcIil9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXJpZXM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidHJlZW1hcFwiLFxuICAgICAgICAgICAgICAgICAgICBsZXZlbHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRBbGdvcml0aG06IFwic2xpY2VBbmREaWNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUxhYmVsczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogXCJtaWRkbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogYWNjb3VudEJhbGFuY2VzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICAgICAgdGV4dDogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjY291bnQtdHJlZW1hcFwiPlxuICAgICAgICAgICAgICAgIDxSZWFjdEhpZ2hjaGFydHMgY29uZmlnPXtjb25maWd9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbkFjY291bnRUcmVlbWFwID0gQmluZFRvQ2hhaW5TdGF0ZShBY2NvdW50VHJlZW1hcCk7XG5cbmNsYXNzIEFjY291bnRUcmVlbWFwQmFsYW5jZVdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGJhbGFuY2VPYmplY3RzOiBDaGFpblR5cGVzLkNoYWluT2JqZWN0c0xpc3QsXG4gICAgICAgIGNvcmVfYXNzZXQ6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGJhbGFuY2VPYmplY3RzOiBbXSxcbiAgICAgICAgY29yZV9hc3NldDogXCIxLjMuMFwiXG4gICAgfTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IGFzc2V0cyA9IHRoaXMucHJvcHMuYmFsYW5jZU9iamVjdHMuZmlsdGVyKGEgPT4gISFhKS5tYXAoYSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYS5nZXQoXCJhc3NldF90eXBlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxBY2NvdW50VHJlZW1hcFxuICAgICAgICAgICAgICAgIHByZWZlcnJlZEFzc2V0PXt0aGlzLnByb3BzLnNldHRpbmdzLmdldChcInVuaXRcIiwgXCIxLjMuMFwiKX1cbiAgICAgICAgICAgICAgICBhc3NldHM9e2Fzc2V0c31cbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5BY2NvdW50VHJlZW1hcEJhbGFuY2VXcmFwcGVyID0gQmluZFRvQ2hhaW5TdGF0ZShBY2NvdW50VHJlZW1hcEJhbGFuY2VXcmFwcGVyKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWNjb3VudFRyZWVtYXBXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8QWx0Q29udGFpbmVyXG4gICAgICAgICAgICAgICAgc3RvcmVzPXtbU2V0dGluZ3NTdG9yZSwgTWFya2V0c1N0b3JlXX1cbiAgICAgICAgICAgICAgICBpbmplY3Q9e3tcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0U3RhdHM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXJrZXRzU3RvcmUuZ2V0U3RhdGUoKS5hbGxNYXJrZXRTdGF0cztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkuc2V0dGluZ3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxBY2NvdW50VHJlZW1hcEJhbGFuY2VXcmFwcGVyXG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICAgICAgICAgICAgICByZWY9e3RoaXMucHJvcHMucmVmQ2FsbGJhY2t9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvQWx0Q29udGFpbmVyPlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBkZWJvdW5jZVJlbmRlciBmcm9tIFwicmVhY3QtZGVib3VuY2UtcmVuZGVyXCI7XG5pbXBvcnQgQmFsYW5jZUNvbXBvbmVudCBmcm9tIFwiLi4vVXRpbGl0eS9CYWxhbmNlQ29tcG9uZW50XCI7XG5pbXBvcnQge0JhbGFuY2VWYWx1ZUNvbXBvbmVudH0gZnJvbSBcIi4uL1V0aWxpdHkvRXF1aXZhbGVudFZhbHVlQ29tcG9uZW50XCI7XG5pbXBvcnQge01hcmtldDI0SG91ckNoYW5nZUNvbXBvbmVudH0gZnJvbSBcIi4uL1V0aWxpdHkvTWFya2V0Q2hhbmdlQ29tcG9uZW50XCI7XG5pbXBvcnQgQXNzZXRJbWFnZSBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldEltYWdlXCI7XG5pbXBvcnQgYXNzZXRVdGlscyBmcm9tIFwiY29tbW9uL2Fzc2V0X3V0aWxzXCI7XG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XG5pbXBvcnQge0xpbmt9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XG5pbXBvcnQgRXF1aXZhbGVudFByaWNlIGZyb20gXCIuLi9VdGlsaXR5L0VxdWl2YWxlbnRQcmljZVwiO1xuaW1wb3J0IExpbmtUb0Fzc2V0QnlJZCBmcm9tIFwiLi4vVXRpbGl0eS9MaW5rVG9Bc3NldEJ5SWRcIjtcbmltcG9ydCBCb3Jyb3dNb2RhbCBmcm9tIFwiLi4vTW9kYWwvQm9ycm93TW9kYWxcIjtcbmltcG9ydCBSZWFjdFRvb2x0aXAgZnJvbSBcInJlYWN0LXRvb2x0aXBcIjtcbmltcG9ydCB7Z2V0QmFja2VkQ29pbn0gZnJvbSBcImNvbW1vbi9nYXRld2F5VXRpbHNcIjtcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gXCJhbHQtcmVhY3RcIjtcbmltcG9ydCBTZXR0aW5nc1N0b3JlIGZyb20gXCJzdG9yZXMvU2V0dGluZ3NTdG9yZVwiO1xuaW1wb3J0IEdhdGV3YXlTdG9yZSBmcm9tIFwic3RvcmVzL0dhdGV3YXlTdG9yZVwiO1xuaW1wb3J0IE1hcmtldHNTdG9yZSBmcm9tIFwic3RvcmVzL01hcmtldHNTdG9yZVwiO1xuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xuaW1wb3J0IFB1bHNlSWNvbiBmcm9tIFwiLi4vSWNvbi9QdWxzZUljb25cIjtcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XG5pbXBvcnQgU2VuZE1vZGFsIGZyb20gXCIuLi9Nb2RhbC9TZW5kTW9kYWxcIjtcbmltcG9ydCBTZXR0aW5nc0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvU2V0dGluZ3NBY3Rpb25zXCI7XG5pbXBvcnQgU2V0dGxlTW9kYWwgZnJvbSBcIi4uL01vZGFsL1NldHRsZU1vZGFsXCI7XG5pbXBvcnQgRGVwb3NpdE1vZGFsIGZyb20gXCIuLi9Nb2RhbC9EZXBvc2l0TW9kYWxcIjtcbmltcG9ydCBTaW1wbGVEZXBvc2l0V2l0aGRyYXcgZnJvbSBcIi4uL0Rhc2hib2FyZC9TaW1wbGVEZXBvc2l0V2l0aGRyYXdcIjtcbmltcG9ydCBTaW1wbGVEZXBvc2l0QmxvY2t0cmFkZXNCcmlkZ2UgZnJvbSBcIi4uL0Rhc2hib2FyZC9TaW1wbGVEZXBvc2l0QmxvY2t0cmFkZXNCcmlkZ2VcIjtcbmltcG9ydCBXaXRoZHJhd01vZGFsIGZyb20gXCIuLi9Nb2RhbC9XaXRoZHJhd01vZGFsTmV3XCI7XG5pbXBvcnQgWmZBcGkgZnJvbSBcInJlYWN0LWZvdW5kYXRpb24tYXBwcy9zcmMvdXRpbHMvZm91bmRhdGlvbi1hcGlcIjtcbmltcG9ydCBSZXNlcnZlQXNzZXRNb2RhbCBmcm9tIFwiLi4vTW9kYWwvUmVzZXJ2ZUFzc2V0TW9kYWxcIjtcbmltcG9ydCBCYXNlTW9kYWwgZnJvbSBcIi4uL01vZGFsL0Jhc2VNb2RhbFwiO1xuaW1wb3J0IFBhZ2luYXRlZExpc3QgZnJvbSBcIi4uL1V0aWxpdHkvUGFnaW5hdGVkTGlzdFwiO1xuaW1wb3J0IE1hcmtldFV0aWxzIGZyb20gXCJjb21tb24vbWFya2V0X3V0aWxzXCI7XG5cbmNsYXNzIEFjY291bnRQb3J0Zm9saW9MaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaXNCcmlkZ2VNb2RhbFZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgaXNTZXR0bGVNb2RhbFZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgaXNCb3Jyb3dNb2RhbFZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgaXNEZXBvc2l0TW9kYWxWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzV2l0aGRyYXdNb2RhbFZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgaXNCdXJuTW9kYWxWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGJvcnJvdzogbnVsbCxcbiAgICAgICAgICAgIHNldHRsZUFzc2V0OiBcIjEuMy4wXCIsXG4gICAgICAgICAgICBkZXBvc2l0QXNzZXQ6IG51bGwsXG4gICAgICAgICAgICB3aXRoZHJhd0Fzc2V0OiBudWxsLFxuICAgICAgICAgICAgYnJpZGdlQXNzZXQ6IG51bGwsXG4gICAgICAgICAgICBhbGxSZWZzQXNzaWduZWQ6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5xdHlSZWZzID0ge307XG4gICAgICAgIHRoaXMucHJpY2VSZWZzID0ge307XG4gICAgICAgIHRoaXMudmFsdWVSZWZzID0ge307XG4gICAgICAgIHRoaXMuY2hhbmdlUmVmcyA9IHt9O1xuICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5zb3J0RnVuY3Rpb25zKSB7XG4gICAgICAgICAgICB0aGlzLnNvcnRGdW5jdGlvbnNba2V5XSA9IHRoaXMuc29ydEZ1bmN0aW9uc1trZXldLmJpbmQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2hlY2tSZWZBc3NpZ25tZW50cyA9IHRoaXMuX2NoZWNrUmVmQXNzaWdubWVudHMuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnNob3dTZXR0bGVNb2RhbCA9IHRoaXMuc2hvd1NldHRsZU1vZGFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGlkZVNldHRsZU1vZGFsID0gdGhpcy5oaWRlU2V0dGxlTW9kYWwuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnNob3dEZXBvc2l0TW9kYWwgPSB0aGlzLnNob3dEZXBvc2l0TW9kYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oaWRlRGVwb3NpdE1vZGFsID0gdGhpcy5oaWRlRGVwb3NpdE1vZGFsLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zaG93V2l0aGRyYXdNb2RhbCA9IHRoaXMuc2hvd1dpdGhkcmF3TW9kYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oaWRlV2l0aGRyYXdNb2RhbCA9IHRoaXMuaGlkZVdpdGhkcmF3TW9kYWwuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnNob3dCb3Jyb3dNb2RhbCA9IHRoaXMuc2hvd0JvcnJvd01vZGFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGlkZUJvcnJvd01vZGFsID0gdGhpcy5oaWRlQm9ycm93TW9kYWwuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnNob3dCdXJuTW9kYWwgPSB0aGlzLnNob3dCdXJuTW9kYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oaWRlQnVybk1vZGFsID0gdGhpcy5oaWRlQnVybk1vZGFsLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zaG93QnJpZGdlTW9kYWwgPSB0aGlzLnNob3dCcmlkZ2VNb2RhbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhpZGVCcmlkZ2VNb2RhbCA9IHRoaXMuaGlkZUJyaWRnZU1vZGFsLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICB0aGlzLnJlZkNoZWNrSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLl9jaGVja1JlZkFzc2lnbm1lbnRzKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnJlZkNoZWNrSW50ZXJ2YWwpO1xuICAgIH1cblxuICAgIF9jaGVja1JlZkFzc2lnbm1lbnRzKCkge1xuICAgICAgICAvKlxuICAgICAgICAqIEluIG9yZGVyIGZvciBzb3J0aW5nIHRvIHdvcmsgYWxsIHJlZnMgbXVzdCBiZSBhc3NpZ25lZCwgc28gd2UgY2hlY2tcbiAgICAgICAgKiB0aGlzIGhlcmUgYW5kIHVwZGF0ZSB0aGUgc3RhdGUgdG8gdHJpZ2dlciBhIHJlcmVuZGVyXG4gICAgICAgICovXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5hbGxSZWZzQXNzaWduZWQpIHtcbiAgICAgICAgICAgIGxldCByZWZLZXlzID0gW1wicXR5UmVmc1wiLCBcInByaWNlUmVmc1wiLCBcInZhbHVlUmVmc1wiLCBcImNoYW5nZVJlZnNcIl07XG4gICAgICAgICAgICBjb25zdCBhbGxSZWZzQXNzaWduZWQgPSByZWZLZXlzLnJlZHVjZSgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhID09PSB1bmRlZmluZWQpIHJldHVybiAhIU9iamVjdC5rZXlzKHRoaXNbYl0pLmxlbmd0aDtcbiAgICAgICAgICAgICAgICByZXR1cm4gISFPYmplY3Qua2V5cyh0aGlzW2JdKS5sZW5ndGggJiYgYTtcbiAgICAgICAgICAgIH0sIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBpZiAoYWxsUmVmc0Fzc2lnbmVkKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnJlZkNoZWNrSW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2FsbFJlZnNBc3NpZ25lZH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5wLCBucykge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KG5zLCB0aGlzLnN0YXRlKSB8fFxuICAgICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KG5wLmJhY2tlZENvaW5zLCB0aGlzLnByb3BzLmJhY2tlZENvaW5zKSB8fFxuICAgICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KG5wLmJhbGFuY2VzLCB0aGlzLnByb3BzLmJhbGFuY2VzKSB8fFxuICAgICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KG5wLmJhbGFuY2VMaXN0LCB0aGlzLnByb3BzLmJhbGFuY2VMaXN0KSB8fFxuICAgICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KFxuICAgICAgICAgICAgICAgIG5wLm9wdGlvbmFsQXNzZXRzLFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub3B0aW9uYWxBc3NldHNcbiAgICAgICAgICAgICkgfHxcbiAgICAgICAgICAgIG5wLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudCB8fFxuICAgICAgICAgICAgbnAudmlzaWJsZSAhPT0gdGhpcy5wcm9wcy52aXNpYmxlIHx8XG4gICAgICAgICAgICBucC5zZXR0aW5ncyAhPT0gdGhpcy5wcm9wcy5zZXR0aW5ncyB8fFxuICAgICAgICAgICAgbnAuaGlkZGVuQXNzZXRzICE9PSB0aGlzLnByb3BzLmhpZGRlbkFzc2V0cyB8fFxuICAgICAgICAgICAgbnAuc29ydERpcmVjdGlvbiAhPT0gdGhpcy5wcm9wcy5zb3J0RGlyZWN0aW9uIHx8XG4gICAgICAgICAgICBucC5zb3J0S2V5ICE9PSB0aGlzLnByb3BzLnNvcnRLZXkgfHxcbiAgICAgICAgICAgIG5wLmFsbE1hcmtldFN0YXRzLnJlZHVjZSgoYSwgdmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIHV0aWxzLmNoZWNrX21hcmtldF9zdGF0cyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hbGxNYXJrZXRTdGF0cy5nZXQoa2V5KVxuICAgICAgICAgICAgICAgICAgICApIHx8IGFcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSwgZmFsc2UpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgc2hvd0JyaWRnZU1vZGFsKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzQnJpZGdlTW9kYWxWaXNpYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhpZGVCcmlkZ2VNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0JyaWRnZU1vZGFsVmlzaWJsZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2hvd1dpdGhkcmF3TW9kYWwoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNXaXRoZHJhd01vZGFsVmlzaWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoaWRlV2l0aGRyYXdNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc1dpdGhkcmF3TW9kYWxWaXNpYmxlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzaG93QnVybk1vZGFsKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzQnVybk1vZGFsVmlzaWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoaWRlQnVybk1vZGFsKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzQnVybk1vZGFsVmlzaWJsZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2hvd1NldHRsZU1vZGFsKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzU2V0dGxlTW9kYWxWaXNpYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhpZGVTZXR0bGVNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc1NldHRsZU1vZGFsVmlzaWJsZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2hvd0RlcG9zaXRNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0RlcG9zaXRNb2RhbFZpc2libGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGlkZURlcG9zaXRNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0RlcG9zaXRNb2RhbFZpc2libGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3dCb3Jyb3dNb2RhbChxdW90ZUFzc2V0LCBiYWNraW5nQXNzZXQsIGFjY291bnQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0JvcnJvd01vZGFsVmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGJvcnJvdzoge1xuICAgICAgICAgICAgICAgIHF1b3RlQXNzZXQ6IHF1b3RlQXNzZXQsXG4gICAgICAgICAgICAgICAgYmFja2luZ0Fzc2V0OiBiYWNraW5nQXNzZXQsXG4gICAgICAgICAgICAgICAgYWNjb3VudDogYWNjb3VudFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoaWRlQm9ycm93TW9kYWwoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgYm9ycm93OiBudWxsLFxuICAgICAgICAgICAgaXNCb3Jyb3dNb2RhbFZpc2libGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNvcnRGdW5jdGlvbnMgPSB7XG4gICAgICAgIHF0eTogZnVuY3Rpb24oYSwgYiwgZm9yY2UpIHtcbiAgICAgICAgICAgIGlmIChOdW1iZXIodGhpcy5xdHlSZWZzW2Eua2V5XSkgPCBOdW1iZXIodGhpcy5xdHlSZWZzW2Iua2V5XSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc29ydERpcmVjdGlvbiB8fCBmb3JjZSA/IC0xIDogMTtcblxuICAgICAgICAgICAgaWYgKE51bWJlcih0aGlzLnF0eVJlZnNbYS5rZXldKSA+IE51bWJlcih0aGlzLnF0eVJlZnNbYi5rZXldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5zb3J0RGlyZWN0aW9uIHx8IGZvcmNlID8gMSA6IC0xO1xuICAgICAgICB9LFxuICAgICAgICBhbHBoYWJldGljOiBmdW5jdGlvbihhLCBiLCBmb3JjZSkge1xuICAgICAgICAgICAgaWYgKGEua2V5ID4gYi5rZXkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc29ydERpcmVjdGlvbiB8fCBmb3JjZSA/IDEgOiAtMTtcbiAgICAgICAgICAgIGlmIChhLmtleSA8IGIua2V5KVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnNvcnREaXJlY3Rpb24gfHwgZm9yY2UgPyAtMSA6IDE7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSxcbiAgICAgICAgcHJpY2VWYWx1ZTogZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgbGV0IGFQcmljZSA9IHRoaXMucHJpY2VSZWZzW2Eua2V5XTtcbiAgICAgICAgICAgIGxldCBiUHJpY2UgPSB0aGlzLnByaWNlUmVmc1tiLmtleV07XG4gICAgICAgICAgICBpZiAoYVByaWNlICYmIGJQcmljZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnNvcnREaXJlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgPyBhUHJpY2UgLSBiUHJpY2VcbiAgICAgICAgICAgICAgICAgICAgOiBiUHJpY2UgLSBhUHJpY2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFQcmljZSA9PT0gbnVsbCAmJiBiUHJpY2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYVByaWNlICE9PSBudWxsICYmIGJQcmljZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc29ydEZ1bmN0aW9ucy5hbHBoYWJldGljKGEsIGIsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0b3RhbFZhbHVlOiBmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICBsZXQgYVZhbHVlID0gdGhpcy52YWx1ZVJlZnNbYS5rZXldO1xuICAgICAgICAgICAgbGV0IGJWYWx1ZSA9IHRoaXMudmFsdWVSZWZzW2Iua2V5XTtcbiAgICAgICAgICAgIGlmIChhVmFsdWUgJiYgYlZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc29ydERpcmVjdGlvblxuICAgICAgICAgICAgICAgICAgICA/IGFWYWx1ZSAtIGJWYWx1ZVxuICAgICAgICAgICAgICAgICAgICA6IGJWYWx1ZSAtIGFWYWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWFWYWx1ZSAmJiBiVmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYVZhbHVlICYmICFiVmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNvcnRGdW5jdGlvbnMuYWxwaGFiZXRpYyhhLCBiLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2hhbmdlVmFsdWU6IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgIGxldCBhVmFsdWUgPSB0aGlzLmNoYW5nZVJlZnNbYS5rZXldO1xuICAgICAgICAgICAgbGV0IGJWYWx1ZSA9IHRoaXMuY2hhbmdlUmVmc1tiLmtleV07XG5cbiAgICAgICAgICAgIGlmIChhVmFsdWUgJiYgYlZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbGV0IGFDaGFuZ2UgPVxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGFWYWx1ZSkgIT0gXCJOYU5cIiA/IHBhcnNlRmxvYXQoYVZhbHVlKSA6IGFWYWx1ZTtcbiAgICAgICAgICAgICAgICBsZXQgYkNoYW5nZSA9XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoYlZhbHVlKSAhPSBcIk5hTlwiID8gcGFyc2VGbG9hdChiVmFsdWUpIDogYlZhbHVlO1xuICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb24gPVxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdGhpcy5wcm9wcy5zb3J0RGlyZWN0aW9uICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMucHJvcHMuc29ydERpcmVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0cnVlO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGlvbiA/IGFDaGFuZ2UgLSBiQ2hhbmdlIDogYkNoYW5nZSAtIGFDaGFuZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdHJpZ2dlclNlbmQoYXNzZXQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VuZF9hc3NldDogYXNzZXR9LCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZW5kX21vZGFsKSB0aGlzLnNlbmRfbW9kYWwuc2hvdygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfb25TZXR0bGVBc3NldChpZCwgZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2V0dGxlQXNzZXQ6IGlkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2hvd1NldHRsZU1vZGFsKCk7XG4gICAgfVxuXG4gICAgX2hpZGVBc3NldChhc3NldCwgc3RhdHVzKSB7XG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5oaWRlQXNzZXQoYXNzZXQsIHN0YXR1cyk7XG4gICAgfVxuXG4gICAgX2J1cm5Bc3NldChhc3NldCwgZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Jlc2VydmU6IGFzc2V0fSk7XG4gICAgICAgIHRoaXMuc2hvd0J1cm5Nb2RhbCgpO1xuICAgIH1cblxuICAgIF9zaG93RGVwb3NpdE1vZGFsKGFzc2V0LCBlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZGVwb3NpdEFzc2V0OiBhc3NldH0sICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0RlcG9zaXRNb2RhbCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfc2hvd0RlcG9zaXRXaXRoZHJhdyhhY3Rpb24sIGFzc2V0LCBmaWF0TW9kYWwsIGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFthY3Rpb24gPT09IFwiYnJpZGdlX21vZGFsXCJcbiAgICAgICAgICAgICAgICAgICAgPyBcImJyaWRnZUFzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgOiBhY3Rpb24gPT09IFwiZGVwb3NpdF9tb2RhbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwiZGVwb3NpdEFzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJ3aXRoZHJhd0Fzc2V0XCJdOiBhc3NldCxcbiAgICAgICAgICAgICAgICBmaWF0TW9kYWxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gXCJicmlkZ2VfbW9kYWxcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dCcmlkZ2VNb2RhbCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09PSBcImRlcG9zaXRfbW9kYWxcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEZXBvc2l0TW9kYWwoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93V2l0aGRyYXdNb2RhbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9nZXRTZXBhcmF0b3IocmVuZGVyKSB7XG4gICAgICAgIHJldHVybiByZW5kZXIgPyA8c3Bhbj4mbmJzcDt8Jm5ic3A7PC9zcGFuPiA6IG51bGw7XG4gICAgfVxuXG4gICAgX3JlbmRlckJ1eSA9IChzeW1ib2wsIGNhbkJ1eSwgYXNzZXROYW1lLCBlbXB0eUNlbGwsIGJhbGFuY2UpID0+IHtcbiAgICAgICAgaWYgKHN5bWJvbCA9PT0gXCJCVFNcIiAmJiBiYWxhbmNlIDw9IDEwMDAwMCkge1xuICAgICAgICAgICAgLy8gUHJlY2lzaW9uIG9mIDUsIDEgPSAxMF41XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fc2hvd0RlcG9zaXRXaXRoZHJhdy5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJicmlkZ2VfbW9kYWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQdWxzZUljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkljb249XCJkb2xsYXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZkljb249XCJkb2xsYXItZ3JlZW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMuZG9sbGFyLmJ1eVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb249ezEwMDB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGNhbkJ1eSAmJiB0aGlzLnByb3BzLmlzTXlBY2NvdW50ID8gKFxuICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fc2hvd0RlcG9zaXRXaXRoZHJhdy5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJicmlkZ2VfbW9kYWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRvbGxhclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5kb2xsYXIuYnV5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgZW1wdHlDZWxsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIF9yZW5kZXJCYWxhbmNlcyhiYWxhbmNlTGlzdCwgb3B0aW9uYWxBc3NldHMsIHZpc2libGUpIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY29yZVN5bWJvbCxcbiAgICAgICAgICAgIHByZWZlcnJlZFVuaXQsXG4gICAgICAgICAgICBzZXR0aW5ncyxcbiAgICAgICAgICAgIGhpZGRlbkFzc2V0cyxcbiAgICAgICAgICAgIG9yZGVyc1xuICAgICAgICB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgbGV0IHNob3dBc3NldFBlcmNlbnQgPSBzZXR0aW5ncy5nZXQoXCJzaG93QXNzZXRQZXJjZW50XCIsIGZhbHNlKTtcblxuICAgICAgICBjb25zdCByZW5kZXJCb3Jyb3cgPSAoYXNzZXQsIGFjY291bnQpID0+IHtcbiAgICAgICAgICAgIGxldCBpc0JpdEFzc2V0ID0gYXNzZXQgJiYgYXNzZXQuaGFzKFwiYml0YXNzZXRfZGF0YV9pZFwiKTtcbiAgICAgICAgICAgIGxldCBtb2RhbFJlZiA9IFwiY3BfbW9kYWxfXCIgKyBhc3NldC5nZXQoXCJpZFwiKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaXNCaXRBc3NldCxcbiAgICAgICAgICAgICAgICBib3Jyb3dNb2RhbDogIWlzQml0QXNzZXQgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgICA8Qm9ycm93TW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17bW9kYWxSZWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbElkPXtcImJvcnJvd19tb2RhbF9cIiArIGFzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYXNzZXQ9e2Fzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2luZ19hc3NldD17YXNzZXQuZ2V0SW4oW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNob3J0X2JhY2tpbmdfYXNzZXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgXSl9XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgYm9ycm93TGluazogIWlzQml0QXNzZXQgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0VG9vbHRpcC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Qm9ycm93TW9kYWwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcImlkXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJpdGFzc2V0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2hvcnRfYmFja2luZ19hc3NldFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRvbGxhclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5kb2xsYXIuYm9ycm93XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IGJhbGFuY2VzID0gW107XG4gICAgICAgIGNvbnN0IGVtcHR5Q2VsbCA9IFwiLVwiO1xuICAgICAgICBiYWxhbmNlTGlzdC5mb3JFYWNoKGJhbGFuY2UgPT4ge1xuICAgICAgICAgICAgbGV0IGJhbGFuY2VPYmplY3QgPSBDaGFpblN0b3JlLmdldE9iamVjdChiYWxhbmNlKTtcbiAgICAgICAgICAgIGlmICghYmFsYW5jZU9iamVjdCkgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IGFzc2V0X3R5cGUgPSBiYWxhbmNlT2JqZWN0LmdldChcImFzc2V0X3R5cGVcIik7XG4gICAgICAgICAgICBsZXQgYXNzZXQgPSBDaGFpblN0b3JlLmdldE9iamVjdChhc3NldF90eXBlKTtcbiAgICAgICAgICAgIGlmICghYXNzZXQpIHJldHVybjtcblxuICAgICAgICAgICAgbGV0IGRpcmVjdE1hcmtldExpbmssIHNldHRsZUxpbmssIHRyYW5zZmVyTGluaztcbiAgICAgICAgICAgIGxldCBzeW1ib2wgPSBcIlwiO1xuXG4gICAgICAgICAgICBjb25zdCBhc3NldE5hbWUgPSBhc3NldC5nZXQoXCJzeW1ib2xcIik7XG4gICAgICAgICAgICBjb25zdCBub3RDb3JlID0gYXNzZXQuZ2V0KFwiaWRcIikgIT09IFwiMS4zLjBcIjtcbiAgICAgICAgICAgIGNvbnN0IG5vdENvcmVQcmVmVW5pdCA9IHByZWZlcnJlZFVuaXQgIT09IGNvcmVTeW1ib2w7XG5cbiAgICAgICAgICAgIGxldCB7bWFya2V0fSA9IGFzc2V0VXRpbHMucGFyc2VEZXNjcmlwdGlvbihcbiAgICAgICAgICAgICAgICBhc3NldC5nZXRJbihbXCJvcHRpb25zXCIsIFwiZGVzY3JpcHRpb25cIl0pXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgc3ltYm9sID0gYXNzZXQuZ2V0KFwic3ltYm9sXCIpO1xuICAgICAgICAgICAgaWYgKHN5bWJvbC5pbmRleE9mKFwiT1BFTi5cIikgIT09IC0xICYmICFtYXJrZXQpIG1hcmtldCA9IFwiVVNEXCI7XG4gICAgICAgICAgICBpZiAoW1wiUlVERVguR09MT1NcIiwgXCJSVURFWC5HQkdcIl0uaW5kZXhPZihzeW1ib2wpICE9PSAtMSlcbiAgICAgICAgICAgICAgICBtYXJrZXQgPSBcIlJVQkxFXCI7XG4gICAgICAgICAgICAvLyBsZXQgcHJlZmVycmVkTWFya2V0ID0gbWFya2V0ID8gbWFya2V0IDogcHJlZmVycmVkVW5pdDtcbiAgICAgICAgICAgIGxldCBwcmVmZXJyZWRNYXJrZXQgPSBtYXJrZXQgPyBtYXJrZXQgOiBjb3JlU3ltYm9sO1xuXG4gICAgICAgICAgICAvKiBUYWJsZSBjb250ZW50ICovXG4gICAgICAgICAgICBkaXJlY3RNYXJrZXRMaW5rID0gbm90Q29yZSA/IChcbiAgICAgICAgICAgICAgICA8TGluayB0bz17YC9tYXJrZXQvJHthc3NldC5nZXQoXCJzeW1ib2xcIil9XyR7cHJlZmVycmVkTWFya2V0fWB9PlxuICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInRyYWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMudHJhZGUudHJhZGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICApIDogbm90Q29yZVByZWZVbml0ID8gKFxuICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL21hcmtldC8ke2Fzc2V0LmdldChcInN5bWJvbFwiKX1fJHtwcmVmZXJyZWRVbml0fWB9PlxuICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInRyYWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMudHJhZGUudHJhZGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIGVtcHR5Q2VsbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRyYW5zZmVyTGluayA9IChcbiAgICAgICAgICAgICAgICA8TGluayB0bz17YC90cmFuc2Zlcj9hc3NldD0ke2Fzc2V0LmdldChcImlkXCIpfWB9PlxuICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInRyYW5zZmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMudHJhbnNmZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsZXQge2lzQml0QXNzZXQsIGJvcnJvd01vZGFsLCBib3Jyb3dMaW5rfSA9IHJlbmRlckJvcnJvdyhcbiAgICAgICAgICAgICAgICBhc3NldCxcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8qIFBvcG92ZXIgY29udGVudCAqL1xuICAgICAgICAgICAgc2V0dGxlTGluayA9IChcbiAgICAgICAgICAgICAgICA8YSBvbkNsaWNrPXt0aGlzLl9vblNldHRsZUFzc2V0LmJpbmQodGhpcywgYXNzZXQuZ2V0KFwiaWRcIikpfT5cbiAgICAgICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJzZXR0bGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5zZXR0bGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBpbmNsdWRlQXNzZXQgPSAhaGlkZGVuQXNzZXRzLmluY2x1ZGVzKGFzc2V0X3R5cGUpO1xuICAgICAgICAgICAgY29uc3QgaGFzQmFsYW5jZSA9ICEhYmFsYW5jZU9iamVjdC5nZXQoXCJiYWxhbmNlXCIpO1xuICAgICAgICAgICAgY29uc3QgaGFzT25PcmRlciA9ICEhb3JkZXJzW2Fzc2V0X3R5cGVdO1xuXG4gICAgICAgICAgICBjb25zdCBiYWNrZWRDb2luID0gZ2V0QmFja2VkQ29pbihcbiAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJzeW1ib2xcIiksXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5iYWNrZWRDb2luc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vIGNvbnN0IGNhbkRlcG9zaXQgPVxuICAgICAgICAgICAgLy8gICAgIChiYWNrZWRDb2luICYmIGJhY2tlZENvaW4uZGVwb3NpdEFsbG93ZWQpIHx8XG4gICAgICAgICAgICAvLyAgICAgYXNzZXQuZ2V0KFwic3ltYm9sXCIpID09IFwiQlRTXCI7XG4gICAgICAgICAgICBjb25zdCBjYW5EZXBvc2l0ID0gZmFsc2U7IC8vIGRpc2FibGUgdGlsbCBzdGFibGUgdmVyc2lvblxuXG4gICAgICAgICAgICAvLyBjb25zdCBjYW5XaXRoZHJhdyA9XG4gICAgICAgICAgICAvLyAgICAgYmFja2VkQ29pbiAmJlxuICAgICAgICAgICAgLy8gICAgIGJhY2tlZENvaW4ud2l0aGRyYXdhbEFsbG93ZWQgJiZcbiAgICAgICAgICAgIC8vICAgICAoaGFzQmFsYW5jZSAmJiBiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIikgIT0gMCk7XG4gICAgICAgICAgICBjb25zdCBjYW5XaXRoZHJhdyA9IGZhbHNlOyAvLyBkaXNhYmxlIHRpbGwgc3RhYmxlIHZlcnNpb25cblxuICAgICAgICAgICAgY29uc3QgY2FuQnV5ID0gISF0aGlzLnByb3BzLmJyaWRnZUNvaW5zLmdldChzeW1ib2wpO1xuICAgICAgICAgICAgY29uc3QgYXNzZXRBbW91bnQgPSBiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIik7XG5cbiAgICAgICAgICAgIC8qIFNvcnRpbmcgcmVmcyAqL1xuICAgICAgICAgICAgdGhpcy5xdHlSZWZzW2Fzc2V0LmdldChcInN5bWJvbFwiKV0gPSB1dGlscy5nZXRfYXNzZXRfYW1vdW50KFxuICAgICAgICAgICAgICAgIGFzc2V0QW1vdW50LFxuICAgICAgICAgICAgICAgIGFzc2V0XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLyogQXNzZXQgYW5kIEJhY2tpbmcgQXNzZXQgUHJlZml4ZXMgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBvcHRpb25zID1cbiAgICAgICAgICAgICAgICBhc3NldCAmJiBhc3NldC5nZXRJbihbXCJiaXRhc3NldFwiLCBcIm9wdGlvbnNcIl0pXG4gICAgICAgICAgICAgICAgICAgID8gYXNzZXQuZ2V0SW4oW1wiYml0YXNzZXRcIiwgXCJvcHRpb25zXCJdKS50b0pTKClcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgbGV0IGJhY2tpbmdBc3NldCA9XG4gICAgICAgICAgICAgICAgb3B0aW9ucyAmJiBvcHRpb25zLnNob3J0X2JhY2tpbmdfYXNzZXRcbiAgICAgICAgICAgICAgICAgICAgPyBDaGFpblN0b3JlLmdldEFzc2V0KG9wdGlvbnMuc2hvcnRfYmFja2luZ19hc3NldClcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgbGV0IHtpc0JpdEFzc2V0OiBpc0Fzc2V0Qml0QXNzZXR9ID0gdXRpbHMucmVwbGFjZU5hbWUoYXNzZXQpO1xuICAgICAgICAgICAgbGV0IHtpc0JpdEFzc2V0OiBpc0JhY2tpbmdCaXRBc3NldH0gPSB1dGlscy5yZXBsYWNlTmFtZShcbiAgICAgICAgICAgICAgICBiYWNraW5nQXNzZXRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGxldCBwcmVmZXJyZWRBc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQocHJlZmVycmVkVW5pdCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlUmVmc1thc3NldC5nZXQoXCJzeW1ib2xcIildID1cbiAgICAgICAgICAgICAgICBoYXNCYWxhbmNlICYmICEhcHJlZmVycmVkQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgPyBNYXJrZXRVdGlscy5jb252ZXJ0VmFsdWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0QW1vdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWxsTWFya2V0U3RhdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY29yZUFzc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgICAgIHRoaXMucHJpY2VSZWZzW2Fzc2V0LmdldChcInN5bWJvbFwiKV0gPSAhcHJlZmVycmVkQXNzZXRcbiAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICA6IE1hcmtldFV0aWxzLmdldEZpbmFsUHJpY2UoXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jb3JlQXNzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgYXNzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkQXNzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hbGxNYXJrZXRTdGF0cyxcbiAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsZXQgbWFya2V0SWQgPSBhc3NldC5nZXQoXCJzeW1ib2xcIikgKyBcIl9cIiArIHByZWZlcnJlZFVuaXQ7XG4gICAgICAgICAgICBsZXQgY3VycmVudE1hcmtldFN0YXRzID0gdGhpcy5wcm9wcy5hbGxNYXJrZXRTdGF0cy5nZXQobWFya2V0SWQpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VSZWZzW2Fzc2V0LmdldChcInN5bWJvbFwiKV0gPVxuICAgICAgICAgICAgICAgIGN1cnJlbnRNYXJrZXRTdGF0cyAmJiBjdXJyZW50TWFya2V0U3RhdHMuY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgID8gY3VycmVudE1hcmtldFN0YXRzLmNoYW5nZVxuICAgICAgICAgICAgICAgICAgICA6IDA7XG5cbiAgICAgICAgICAgIGJhbGFuY2VzLnB1c2goXG4gICAgICAgICAgICAgICAgPHRyIGtleT17YXNzZXQuZ2V0KFwic3ltYm9sXCIpfSBzdHlsZT17e21heFdpZHRoOiBcIjEwMHJlbVwifX0+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZU5vbmVUb0J0cz17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg9ezMwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2Fzc2V0LmdldChcInN5bWJvbFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQXNzZXRCeUlkIGFzc2V0PXthc3NldC5nZXQoXCJpZFwiKX0gLz5cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtoYXNCYWxhbmNlIHx8IGhhc09uT3JkZXIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhbGFuY2VDb21wb25lbnQgYmFsYW5jZT17YmFsYW5jZX0gaGlkZV9hc3NldCAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZFxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxFcXVpdmFsZW50UHJpY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tQXNzZXQ9e2Fzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1bHNhdGU9e3tyZXZlcnNlOiB0cnVlLCBmaWxsOiBcImZvcndhcmRzXCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfc3ltYm9sc1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPE1hcmtldDI0SG91ckNoYW5nZUNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U9e2Fzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlPXtwcmVmZXJyZWRVbml0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldElkPXttYXJrZXRJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX3N5bWJvbHNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZFxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtoYXNCYWxhbmNlIHx8IGhhc09uT3JkZXIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhbGFuY2VWYWx1ZUNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlPXtiYWxhbmNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0Fzc2V0PXtwcmVmZXJyZWRVbml0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICB7c2hvd0Fzc2V0UGVyY2VudCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2hhc0JhbGFuY2UgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCYWxhbmNlQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlPXtiYWxhbmNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNQZXJjZW50YWdlPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDx0ZD57dHJhbnNmZXJMaW5rfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLl9yZW5kZXJCdXkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuZ2V0KFwic3ltYm9sXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJ1eSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlDZWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VPYmplY3QuZ2V0KFwiYmFsYW5jZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAge2NhbkRlcG9zaXQgJiYgdGhpcy5wcm9wcy5pc015QWNjb3VudCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7Y3Vyc29yOiBcInBvaW50ZXJcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGVwb3NpdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmRlcG9zaXQuZGVwb3NpdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0eFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9zaG93RGVwb3NpdE1vZGFsLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eUNlbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjYW5XaXRoZHJhdyAmJiB0aGlzLnByb3BzLmlzTXlBY2NvdW50ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXshY2FuV2l0aGRyYXcgPyBcImRpc2FibGVkXCIgOiBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuV2l0aGRyYXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9zaG93RGVwb3NpdFdpdGhkcmF3LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2l0aGRyYXdfbW9kYWxfbmV3XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCkgPT4ge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwid2l0aGRyYXdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMud2l0aGRyYXdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eUNlbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD57ZGlyZWN0TWFya2V0TGlua308L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICB7aXNCaXRBc3NldCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlubGluZS1ibG9ja1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRpcD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLmJvcnJvd1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Fzc2V0OiBzeW1ib2x9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Ym9ycm93TGlua31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlDZWxsXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICB7aXNCaXRBc3NldCAmJiBiYWNraW5nQXNzZXQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2tcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5zZXR0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldDogaXNBc3NldEJpdEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJiaXRcIiArIHN5bWJvbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHN5bWJvbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNraW5nQXNzZXQ6IGlzQmFja2luZ0JpdEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJiaXRcIiArIGJhY2tpbmdBc3NldC5nZXQoXCJzeW1ib2xcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBiYWNraW5nQXNzZXQuZ2V0KFwic3ltYm9sXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRsZURlbGF5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmZvcmNlX3NldHRsZW1lbnRfZGVsYXlfc2VjIC9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMzYwMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NldHRsZUxpbmt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5Q2VsbFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHshaXNCaXRBc3NldCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpblJpZ2h0OiAwfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fYnVybkFzc2V0LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuZ2V0KFwiaWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJmaXJlXCIgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cblxuICAgICAgICAgICAgICAgICAgICA8dGRcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcImNlbnRlclwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAuXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5jbHVkZUFzc2V0ID8gXCJoaWRlX2Fzc2V0XCIgOiBcInNob3dfYXNzZXRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5SaWdodDogMH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUFzc2V0ID8gXCJvcmRlci1jYW5jZWxcIiA6IFwiYWN0aW9uLXBsdXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9oaWRlQXNzZXQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJjcm9zcy1jaXJjbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJwbHVzLWNpcmNsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImljb25zLmNyb3NzX2NpcmNsZS5oaWRlX2Fzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiaWNvbnMucGx1c19jaXJjbGUuc2hvd19hc3NldFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAob3B0aW9uYWxBc3NldHMpIHtcbiAgICAgICAgICAgIG9wdGlvbmFsQXNzZXRzXG4gICAgICAgICAgICAgICAgLmZpbHRlcihhc3NldCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpc0F2YWlsYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJhY2tlZENvaW5zLmdldChcIk9QRU5cIiwgW10pLmZvckVhY2goY29pbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29pbiAmJiBjb2luLnN5bWJvbCA9PT0gYXNzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0F2YWlsYWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByb3BzLmJyaWRnZUNvaW5zLmdldChhc3NldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXZhaWxhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQga2VlcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzLmZvckVhY2goYSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5rZXkgPT09IGFzc2V0KSBrZWVwID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2VlcCAmJiBpc0F2YWlsYWJsZTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYXNzZXQgPSBDaGFpblN0b3JlLmdldEFzc2V0KGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXNzZXQgJiYgdGhpcy5wcm9wcy5pc015QWNjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5jbHVkZUFzc2V0ID0gIWhpZGRlbkFzc2V0cy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJpZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGhpc0Fzc2V0TmFtZSA9IGFzc2V0LmdldChcInN5bWJvbFwiKS5zcGxpdChcIi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5EZXBvc2l0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIXRoaXMucHJvcHMuYmFja2VkQ29pbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldChcIk9QRU5cIiwgW10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9PiBhLmJhY2tpbmdDb2luVHlwZSA9PT0gdGhpc0Fzc2V0TmFtZVsxXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgISF0aGlzLnByb3BzLmJhY2tlZENvaW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoXCJSVURFWFwiLCBbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0+IGEuYmFja2luZ0NvaW4gPT09IHRoaXNBc3NldE5hbWVbMV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcInN5bWJvbFwiKSA9PSBcIkJUU1wiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5CdXkgPSAhIXRoaXMucHJvcHMuYnJpZGdlQ29pbnMuZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcInN5bWJvbFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90Q29yZSA9IGFzc2V0LmdldChcImlkXCIpICE9PSBcIjEuMy4wXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQge21hcmtldH0gPSBhc3NldFV0aWxzLnBhcnNlRGVzY3JpcHRpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuZ2V0SW4oW1wib3B0aW9uc1wiLCBcImRlc2NyaXB0aW9uXCJdKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJzeW1ib2xcIikuaW5kZXhPZihcIk9QRU4uXCIpICE9PSAtMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFtYXJrZXRcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXQgPSBcIlVTRFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHByZWZlcnJlZE1hcmtldCA9IG1hcmtldCA/IG1hcmtldCA6IGNvcmVTeW1ib2w7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkaXJlY3RNYXJrZXRMaW5rID0gbm90Q29yZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17YC9tYXJrZXQvJHthc3NldC5nZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN5bWJvbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XyR7cHJlZmVycmVkTWFya2V0fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInRyYWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMudHJhZGUudHJhZGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5Q2VsbFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB7aXNCaXRBc3NldCwgYm9ycm93TGlua30gPSByZW5kZXJCb3Jyb3coXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbmNsdWRlQXNzZXQgJiYgdmlzaWJsZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIWluY2x1ZGVBc3NldCAmJiAhdmlzaWJsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXhXaWR0aDogXCIxMDByZW1cIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXRJbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlTm9uZVRvQnRzPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg9ezMwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXthc3NldC5nZXQoXCJzeW1ib2xcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQXNzZXRCeUlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldC5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57ZW1wdHlDZWxsfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZW1wdHlDZWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlbXB0eUNlbGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2VtcHR5Q2VsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2VtcHR5Q2VsbH08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcImNlbnRlclwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NhbkJ1eSAmJiB0aGlzLnByb3BzLmlzTXlBY2NvdW50ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fc2hvd0RlcG9zaXRXaXRoZHJhdy5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJyaWRnZV9tb2RhbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRvbGxhclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMuZG9sbGFyLmJ1eVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5Q2VsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjYW5EZXBvc2l0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5pc015QWNjb3VudCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7Y3Vyc29yOiBcInBvaW50ZXJcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRlcG9zaXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMuZGVwb3NpdC5kZXBvc2l0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0eFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fc2hvd0RlcG9zaXRNb2RhbC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJzeW1ib2xcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5Q2VsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntlbXB0eUNlbGx9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkaXJlY3RNYXJrZXRMaW5rfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXNCaXRBc3NldCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5saW5lLWJsb2NrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAuYm9ycm93XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Fzc2V0OiBhc3NldC5nZXQoXCJzeW1ib2xcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Ym9ycm93TGlua31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlDZWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2VtcHR5Q2VsbH08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwiY2VudGVyXCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRpcD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAuXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGluY2x1ZGVBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJoaWRlX2Fzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwic2hvd19hc3NldFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5SaWdodDogMH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwib3JkZXItY2FuY2VsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiYWN0aW9uLXBsdXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX2hpZGVBc3NldC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcImlkXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJjcm9zcy1jaXJjbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwicGx1cy1jaXJjbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiaWNvbnMuY3Jvc3NfY2lyY2xlLmhpZGVfYXNzZXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiaWNvbnMucGx1c19jaXJjbGUuc2hvd19hc3NldFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYmFsYW5jZXMuc29ydCh0aGlzLnNvcnRGdW5jdGlvbnNbdGhpcy5wcm9wcy5zb3J0S2V5XSk7XG4gICAgICAgIHJldHVybiBiYWxhbmNlcztcbiAgICB9XG5cbiAgICBfcmVuZGVyU2VuZE1vZGFsKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFNlbmRNb2RhbFxuICAgICAgICAgICAgICAgIGlkPVwic2VuZF9tb2RhbF9wb3J0Zm9saW9cIlxuICAgICAgICAgICAgICAgIHJlZkNhbGxiYWNrPXtlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHRoaXMuc2VuZF9tb2RhbCA9IGU7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBmcm9tX25hbWU9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpfVxuICAgICAgICAgICAgICAgIGFzc2V0X2lkPXt0aGlzLnN0YXRlLnNlbmRfYXNzZXQgfHwgXCIxLjMuMFwifVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBfcmVuZGVyQm9ycm93TW9kYWwoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICF0aGlzLnN0YXRlLmJvcnJvdyB8fFxuICAgICAgICAgICAgIXRoaXMuc3RhdGUuYm9ycm93LnF1b3RlQXNzZXQgfHxcbiAgICAgICAgICAgICF0aGlzLnN0YXRlLmJvcnJvdy5iYWNraW5nQXNzZXQgfHxcbiAgICAgICAgICAgICF0aGlzLnN0YXRlLmJvcnJvdy5hY2NvdW50XG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhcInJlbmRlciBib3Jyb3cgbW9kYWxcIik7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxCb3Jyb3dNb2RhbFxuICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMuc3RhdGUuaXNCb3Jyb3dNb2RhbFZpc2libGV9XG4gICAgICAgICAgICAgICAgc2hvd01vZGFsPXt0aGlzLnNob3dCb3Jyb3dNb2RhbH1cbiAgICAgICAgICAgICAgICBoaWRlTW9kYWw9e3RoaXMuaGlkZUJvcnJvd01vZGFsfVxuICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMuc3RhdGUuYm9ycm93ICYmIHRoaXMuc3RhdGUuYm9ycm93LmFjY291bnR9XG4gICAgICAgICAgICAgICAgcXVvdGVfYXNzZXQ9e3RoaXMuc3RhdGUuYm9ycm93ICYmIHRoaXMuc3RhdGUuYm9ycm93LnF1b3RlQXNzZXR9XG4gICAgICAgICAgICAgICAgYmFja2luZ19hc3NldD17XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYm9ycm93ICYmIHRoaXMuc3RhdGUuYm9ycm93LmJhY2tpbmdBc3NldFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgX3JlbmRlclNldHRsZU1vZGFsKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFNldHRsZU1vZGFsXG4gICAgICAgICAgICAgICAgdmlzaWJsZT17dGhpcy5zdGF0ZS5pc1NldHRsZU1vZGFsVmlzaWJsZX1cbiAgICAgICAgICAgICAgICBoaWRlTW9kYWw9e3RoaXMuaGlkZVNldHRsZU1vZGFsfVxuICAgICAgICAgICAgICAgIHNob3dNb2RhbD17dGhpcy5zaG93U2V0dGxlTW9kYWx9XG4gICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUuc2V0dGxlQXNzZXR9XG4gICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5wcm9wcy5hY2NvdW50LmdldChcIm5hbWVcIil9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFdpdGhkcmF3QXNzZXQgPVxuICAgICAgICAgICAgdGhpcy5wcm9wcy5iYWNrZWRDb2lucy5nZXQoXCJPUEVOXCIsIFtdKS5maW5kKGMgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBjLnN5bWJvbCA9PT0gdGhpcy5zdGF0ZS53aXRoZHJhd0Fzc2V0O1xuICAgICAgICAgICAgfSkgfHwge307XG4gICAgICAgIGNvbnN0IGN1cnJlbnRCcmlkZ2VzID1cbiAgICAgICAgICAgIHRoaXMucHJvcHMuYnJpZGdlQ29pbnMuZ2V0KHRoaXMuc3RhdGUuYnJpZGdlQXNzZXQpIHx8IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPFBhZ2luYXRlZExpc3RcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nOiAwfX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFibGUgZGFzaGJvYXJkLXRhYmxlIHRhYmxlLWhvdmVyXCJcbiAgICAgICAgICAgICAgICAgICAgcm93cz17dGhpcy5fcmVuZGVyQmFsYW5jZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJhbGFuY2VMaXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vcHRpb25hbEFzc2V0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudmlzaWJsZVxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e3RoaXMucHJvcHMuaGVhZGVyfVxuICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZT17MjB9XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwidXRpbGl0eS50b3RhbF94X2Fzc2V0c1wiXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhUm93PXt0aGlzLnByb3BzLmV4dHJhUm93fVxuICAgICAgICAgICAgICAgICAgICBsZWZ0UGFkZGluZz1cIjEuNXJlbVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5fcmVuZGVyU2VuZE1vZGFsKCl9XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLl9yZW5kZXJTZXR0bGVNb2RhbCgpfVxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5fcmVuZGVyQm9ycm93TW9kYWwoKX1cblxuICAgICAgICAgICAgICAgICAgICA8V2l0aGRyYXdNb2RhbFxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsPXt0aGlzLmhpZGVXaXRoZHJhd01vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZT17dGhpcy5zdGF0ZS5pc1dpdGhkcmF3TW9kYWxWaXNpYmxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VkQ29pbnM9e3RoaXMucHJvcHMuYmFja2VkQ29pbnN9XG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsU3ltYm9sPXt0aGlzLnN0YXRlLndpdGhkcmF3QXNzZXR9XG4gICAgICAgICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgICAgICAgey8qIERlcG9zaXQgTW9kYWwgKi99XG4gICAgICAgICAgICAgICAgICAgIDxEZXBvc2l0TW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMuc3RhdGUuaXNEZXBvc2l0TW9kYWxWaXNpYmxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd01vZGFsPXt0aGlzLnNob3dEZXBvc2l0TW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlTW9kYWw9e3RoaXMuaGlkZURlcG9zaXRNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXt0aGlzLnN0YXRlLmRlcG9zaXRBc3NldH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VkQ29pbnM9e3RoaXMucHJvcHMuYmFja2VkQ29pbnN9XG4gICAgICAgICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgICAgICAgey8qIEJyaWRnZSBtb2RhbCAqL31cbiAgICAgICAgICAgICAgICAgICAgPFNpbXBsZURlcG9zaXRCbG9ja3RyYWRlc0JyaWRnZVxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZT17dGhpcy5zdGF0ZS5pc0JyaWRnZU1vZGFsVmlzaWJsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dNb2RhbD17dGhpcy5zaG93QnJpZGdlTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlTW9kYWw9e3RoaXMuaGlkZUJyaWRnZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPVwiZGVwb3NpdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwibmFtZVwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRlcj17dGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUuYnJpZGdlQXNzZXR9XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlcz17dGhpcy5wcm9wcy5iYWxhbmNlc31cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyaWRnZXM9e2N1cnJlbnRCcmlkZ2VzfVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNEb3duPXt0aGlzLnByb3BzLmdhdGV3YXlEb3duLmdldChcIlRSQURFXCIpfVxuICAgICAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgICAgIHsvKiBCdXJuIE1vZGFsICovfVxuICAgICAgICAgICAgICAgICAgICA8UmVzZXJ2ZUFzc2V0TW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMuc3RhdGUuaXNCdXJuTW9kYWxWaXNpYmxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsPXt0aGlzLmhpZGVCdXJuTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17dGhpcy5zdGF0ZS5yZXNlcnZlfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5wcm9wcy5hY2NvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFpmQXBpLnB1Ymxpc2goXCJyZXNlcnZlX2Fzc2V0XCIsIFwiY2xvc2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvUGFnaW5hdGVkTGlzdD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuQWNjb3VudFBvcnRmb2xpb0xpc3QgPSBjb25uZWN0KFxuICAgIEFjY291bnRQb3J0Zm9saW9MaXN0LFxuICAgIHtcbiAgICAgICAgbGlzdGVuVG8oKSB7XG4gICAgICAgICAgICByZXR1cm4gW1NldHRpbmdzU3RvcmUsIEdhdGV3YXlTdG9yZSwgTWFya2V0c1N0b3JlXTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UHJvcHMoKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNldHRpbmdzOiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkuc2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgdmlld1NldHRpbmdzOiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkudmlld1NldHRpbmdzLFxuICAgICAgICAgICAgICAgIGJhY2tlZENvaW5zOiBHYXRld2F5U3RvcmUuZ2V0U3RhdGUoKS5iYWNrZWRDb2lucyxcbiAgICAgICAgICAgICAgICBicmlkZ2VDb2luczogR2F0ZXdheVN0b3JlLmdldFN0YXRlKCkuYnJpZGdlQ29pbnMsXG4gICAgICAgICAgICAgICAgZ2F0ZXdheURvd246IEdhdGV3YXlTdG9yZS5nZXRTdGF0ZSgpLmRvd24sXG4gICAgICAgICAgICAgICAgYWxsTWFya2V0U3RhdHM6IE1hcmtldHNTdG9yZS5nZXRTdGF0ZSgpLmFsbE1hcmtldFN0YXRzXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuKTtcblxuQWNjb3VudFBvcnRmb2xpb0xpc3QgPSBkZWJvdW5jZVJlbmRlcihBY2NvdW50UG9ydGZvbGlvTGlzdCwgNTAsIHtcbiAgICBsZWFkaW5nOiBmYWxzZVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEFjY291bnRQb3J0Zm9saW9MaXN0O1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtGb3JtYXR0ZWROdW1iZXJ9IGZyb20gXCJyZWFjdC1pbnRsXCI7XG5pbXBvcnQgQXNzZXRXcmFwcGVyIGZyb20gXCIuL0Fzc2V0V3JhcHBlclwiO1xuaW1wb3J0IHtjb25uZWN0fSBmcm9tIFwiYWx0LXJlYWN0XCI7XG5pbXBvcnQgTWFya2V0c1N0b3JlIGZyb20gXCJzdG9yZXMvTWFya2V0c1N0b3JlXCI7XG5pbXBvcnQgUmVhY3RUb29sdGlwIGZyb20gXCJyZWFjdC10b29sdGlwXCI7XG5pbXBvcnQge01hcmtldFN0YXRzfSBmcm9tIFwiLi4vVXRpbGl0eS9NYXJrZXRQcmljZVwiO1xuXG4vKipcbiAqICBEaXNwbGF5cyBjaGFuZ2UgaW4gbWFya2V0IHZhbHVlIGZvciBhbiBhc3NldFxuICpcbiAqICBFeHBlY3RzIHRocmVlIHByb3BlcnRpZXNcbiAqICAtJ3F1b3RlJyB3aGljaCBzaG91bGQgYmUgYSBhc3NldCBpZFxuICogIC0nYmFzZScgd2hpY2ggaXMgdGhlIGFzc2V0IGlkIG9mIHRoZSBvcmlnaW5hbCBhc3NldCBhbW91bnRcbiAqL1xuXG5jbGFzcyBNYXJrZXRDaGFuZ2VDb21wb25lbnQgZXh0ZW5kcyBNYXJrZXRTdGF0cyB7XG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgZnVsbFByZWNpc2lvbjogZmFsc2UsXG4gICAgICAgIG5vRGVjaW1hbHM6IGZhbHNlLFxuICAgICAgICBoaWRlX2Fzc2V0OiBmYWxzZVxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIFJlYWN0VG9vbHRpcC5yZWJ1aWxkKCk7XG4gICAgfVxuXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5wKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5zaG91bGRDb21wb25lbnRVcGRhdGUobnApIHx8IG5wLmJhc2UgIT09IHRoaXMucHJvcHMuYmFzZTtcbiAgICB9XG5cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgbGV0IHttYXJrZXRTdGF0c30gPSB0aGlzLnByb3BzO1xuICAgICAgICByZXR1cm4gbWFya2V0U3RhdHMgJiYgbWFya2V0U3RhdHMuY2hhbmdlID8gbWFya2V0U3RhdHMuY2hhbmdlIDogMDtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBtYXJrZXRDaGFuZ2VWYWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTtcbiAgICAgICAgbGV0IGRheUNoYW5nZUNsYXNzID1cbiAgICAgICAgICAgIHBhcnNlRmxvYXQobWFya2V0Q2hhbmdlVmFsdWUpID09PSAwXG4gICAgICAgICAgICAgICAgPyBcIlwiXG4gICAgICAgICAgICAgICAgOiBwYXJzZUZsb2F0KG1hcmtldENoYW5nZVZhbHVlKSA8IDBcbiAgICAgICAgICAgICAgICAgICAgPyBcImNoYW5nZS1kb3duXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcImNoYW5nZS11cFwiO1xuICAgICAgICBsZXQgbWFya2V0Q2hhbmdlRm9ybWF0dGVkVmFsdWUgPSAoXG4gICAgICAgICAgICA8Rm9ybWF0dGVkTnVtYmVyXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJkZWNpbWFsXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17bWFya2V0Q2hhbmdlVmFsdWV9XG4gICAgICAgICAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzPXsyfVxuICAgICAgICAgICAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0cz17Mn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17XCJ2YWx1ZSBcIiArIGRheUNoYW5nZUNsYXNzfT5cbiAgICAgICAgICAgICAgICB7bWFya2V0Q2hhbmdlRm9ybWF0dGVkVmFsdWV9JVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICApO1xuICAgIH1cbn1cbk1hcmtldENoYW5nZUNvbXBvbmVudCA9IEFzc2V0V3JhcHBlcihNYXJrZXRDaGFuZ2VDb21wb25lbnQsIHtcbiAgICBwcm9wTmFtZXM6IFtcInF1b3RlXCIsIFwiYmFzZVwiXSxcbiAgICBkZWZhdWx0UHJvcHM6IHtxdW90ZTogXCIxLjMuMFwifVxufSk7XG5cbmNsYXNzIE1hcmtldDI0SG91ckNoYW5nZUNvbXBvbmVudCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQge3JlZkNhbGxiYWNrLCAuLi5vdGhlcnN9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICByZXR1cm4gPE1hcmtldENoYW5nZUNvbXBvbmVudCB7Li4ub3RoZXJzfSByZWY9e3JlZkNhbGxiYWNrfSAvPjtcbiAgICB9XG59XG5cbk1hcmtldDI0SG91ckNoYW5nZUNvbXBvbmVudCA9IGNvbm5lY3QoXG4gICAgTWFya2V0MjRIb3VyQ2hhbmdlQ29tcG9uZW50LFxuICAgIHtcbiAgICAgICAgbGlzdGVuVG8oKSB7XG4gICAgICAgICAgICByZXR1cm4gW01hcmtldHNTdG9yZV07XG4gICAgICAgIH0sXG4gICAgICAgIGdldFByb3BzKHByb3BzKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1hcmtldFN0YXRzOiBNYXJrZXRzU3RvcmUuZ2V0U3RhdGUoKS5hbGxNYXJrZXRTdGF0cy5nZXQoXG4gICAgICAgICAgICAgICAgICAgIHByb3BzLm1hcmtldElkXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBhbGxNYXJrZXRTdGF0czogTWFya2V0c1N0b3JlLmdldFN0YXRlKCkuYWxsTWFya2V0U3RhdHNcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4pO1xuXG5leHBvcnQge01hcmtldDI0SG91ckNoYW5nZUNvbXBvbmVudH07XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xuaW1wb3J0IEFsdENvbnRhaW5lciBmcm9tIFwiYWx0LWNvbnRhaW5lclwiO1xuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XG5pbXBvcnQgRm9ybWF0dGVkUHJpY2UgZnJvbSBcIi4vRm9ybWF0dGVkUHJpY2VcIjtcbmltcG9ydCBNYXJrZXRTdGF0c0NoZWNrIGZyb20gXCIuL01hcmtldFN0YXRzQ2hlY2tcIjtcbmltcG9ydCBNYXJrZXRzU3RvcmUgZnJvbSBcInN0b3Jlcy9NYXJrZXRzU3RvcmVcIjtcbmltcG9ydCBNYXJrZXRVdGlscyBmcm9tIFwiY29tbW9uL21hcmtldF91dGlsc1wiO1xuaW1wb3J0IEFzc2V0V3JhcHBlciBmcm9tIFwiLi9Bc3NldFdyYXBwZXJcIjtcblxuY2xhc3MgRXF1aXZhbGVudFByaWNlIGV4dGVuZHMgTWFya2V0U3RhdHNDaGVjayB7XG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgZm9yY2VEaXJlY3Rpb246IHRydWVcbiAgICB9O1xuXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5wLCBuZXh0U3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHN1cGVyLnNob3VsZENvbXBvbmVudFVwZGF0ZShucCkgfHxcbiAgICAgICAgICAgIG5wLmJhc2VfYW1vdW50ICE9PSB0aGlzLnByb3BzLmJhc2VfYW1vdW50IHx8XG4gICAgICAgICAgICBucC5xdW90ZV9hbW91bnQgIT09IHRoaXMucHJvcHMucXVvdGVfYW1vdW50IHx8XG4gICAgICAgICAgICBucC5kZWNpbWFscyAhPT0gdGhpcy5wcm9wcy5kZWNpbWFscyB8fFxuICAgICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KG5wLnB1bHNhdGUsIHRoaXMucHJvcHMucHVsc2F0ZSkgfHxcbiAgICAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhuZXh0U3RhdGUsIHRoaXMuc3RhdGUpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZ2V0RmluYWxQcmljZShyZWFsID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3Qge2NvcmVBc3NldCwgZnJvbUFzc2V0LCB0b0Fzc2V0LCBhbGxNYXJrZXRTdGF0c30gPSB0aGlzLnByb3BzO1xuICAgICAgICByZXR1cm4gTWFya2V0VXRpbHMuZ2V0RmluYWxQcmljZShcbiAgICAgICAgICAgIGNvcmVBc3NldCxcbiAgICAgICAgICAgIGZyb21Bc3NldCxcbiAgICAgICAgICAgIHRvQXNzZXQsXG4gICAgICAgICAgICBhbGxNYXJrZXRTdGF0cyxcbiAgICAgICAgICAgIHJlYWxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHt0b0Fzc2V0LCBmb3JjZURpcmVjdGlvbiwgLi4ub3RoZXJzfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgY29uc3QgZmluYWxQcmljZSA9IHRoaXMuZ2V0RmluYWxQcmljZSgpO1xuXG4gICAgICAgIGlmIChmaW5hbFByaWNlID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gPHNwYW4+MS4wMDwvc3Bhbj47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWZpbmFsUHJpY2UpIHJldHVybiA8c3Bhbj4tLTwvc3Bhbj47XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRQcmljZVxuICAgICAgICAgICAgICAgIGZvcmNlX2RpcmVjdGlvbj17Zm9yY2VEaXJlY3Rpb24gPyB0b0Fzc2V0LmdldChcInN5bWJvbFwiKSA6IGZhbHNlfVxuICAgICAgICAgICAgICAgIGJhc2VfYW1vdW50PXtmaW5hbFByaWNlLmJhc2UuYW1vdW50fVxuICAgICAgICAgICAgICAgIGJhc2VfYXNzZXQ9e2ZpbmFsUHJpY2UuYmFzZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICBxdW90ZV9hbW91bnQ9e2ZpbmFsUHJpY2UucXVvdGUuYW1vdW50fVxuICAgICAgICAgICAgICAgIHF1b3RlX2Fzc2V0PXtmaW5hbFByaWNlLnF1b3RlLmFzc2V0X2lkfVxuICAgICAgICAgICAgICAgIHsuLi5vdGhlcnN9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuRXF1aXZhbGVudFByaWNlID0gQXNzZXRXcmFwcGVyKEVxdWl2YWxlbnRQcmljZSwge1xuICAgIHByb3BOYW1lczogW1widG9Bc3NldFwiLCBcImZyb21Bc3NldFwiLCBcImNvcmVBc3NldFwiXSxcbiAgICBkZWZhdWx0UHJvcHM6IHtcbiAgICAgICAgdG9Bc3NldDogXCIxLjMuMFwiLFxuICAgICAgICBjb3JlQXNzZXQ6IFwiMS4zLjBcIlxuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFcXVpdmFsZW50UHJpY2VXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8QWx0Q29udGFpbmVyXG4gICAgICAgICAgICAgICAgc3RvcmVzPXtbU2V0dGluZ3NTdG9yZSwgTWFya2V0c1N0b3JlXX1cbiAgICAgICAgICAgICAgICBpbmplY3Q9e3tcbiAgICAgICAgICAgICAgICAgICAgdG9Bc3NldDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnRvQXNzZXQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkuc2V0dGluZ3MuZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVuaXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIxLjMuMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYWxsTWFya2V0U3RhdHM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXJrZXRzU3RvcmUuZ2V0U3RhdGUoKS5hbGxNYXJrZXRTdGF0cztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEVxdWl2YWxlbnRQcmljZSB7Li4udGhpcy5wcm9wc30gcmVmPXt0aGlzLnByb3BzLnJlZkNhbGxiYWNrfSAvPlxuICAgICAgICAgICAgPC9BbHRDb250YWluZXI+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcblxuaW1wb3J0IEljb24gZnJvbSBcIi4vSWNvblwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQdWxzZUljb24gZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGR1cmF0aW9uOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgICAgIG9mZkljb246IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgICAgb25JY29uOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIGNvbnN0IHtkdXJhdGlvbn0gPSB0aGlzLnByb3BzO1xuICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy50aWNrLCBkdXJhdGlvbik7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHRoaXMuaW50ZXJ2YWwgJiYgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcbiAgICB9XG5cbiAgICB0aWNrID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7b25JY29uLCBvZmZJY29ufSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHtuYW1lID0gb25JY29ufSA9IHRoaXMuc3RhdGUgfHwge307XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbmFtZTogbmFtZSA9PT0gb25JY29uID8gb2ZmSWNvbiA6IG9uSWNvblxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7b25JY29uLCByZXN0fSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHtuYW1lID0gb25JY29ufSA9IHRoaXMuc3RhdGUgfHwge307XG4gICAgICAgIGNvbnN0IHt0aXRsZX0gPSB0aGlzLnByb3BzO1xuICAgICAgICByZXR1cm4gPEljb24gbmFtZT17bmFtZX0gdGl0bGU9e3RpdGxlfSB7Li4ucmVzdH0gLz47XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFpmQXBpIGZyb20gXCJyZWFjdC1mb3VuZGF0aW9uLWFwcHMvc3JjL3V0aWxzL2ZvdW5kYXRpb24tYXBpXCI7XG5pbXBvcnQgQmFzZU1vZGFsIGZyb20gXCIuL0Jhc2VNb2RhbFwiO1xuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xuaW1wb3J0IE1hcmtldExpbmsgZnJvbSBcIi4uL1V0aWxpdHkvTWFya2V0TGlua1wiO1xuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcbmltcG9ydCBCYWxhbmNlQ29tcG9uZW50IGZyb20gXCIuLi9VdGlsaXR5L0JhbGFuY2VDb21wb25lbnRcIjtcbmltcG9ydCBXYWxsZXRBcGkgZnJvbSBcImFwaS9XYWxsZXRBcGlcIjtcbmltcG9ydCBXYWxsZXREYiBmcm9tIFwic3RvcmVzL1dhbGxldERiXCI7XG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xuaW1wb3J0IEFtb3VudFNlbGVjdG9yIGZyb20gXCIuLi9VdGlsaXR5L0Ftb3VudFNlbGVjdG9yXCI7XG5pbXBvcnQgd2l0aFdvcnRoTGVzc1NldHRsZW1lbnRGbGFnIGZyb20gXCIuLi9VdGlsaXR5L3dpdGhXb3J0aExlc3NTZXR0bGVtZW50RmxhZ1wiO1xuaW1wb3J0IFRyYW5zbGF0ZVdpdGhMaW5rcyBmcm9tIFwiLi4vVXRpbGl0eS9UcmFuc2xhdGVXaXRoTGlua3NcIjtcbmltcG9ydCB7TW9kYWwsIEJ1dHRvbn0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xuXG5jb25zdCBXb3J0aExlc3NTZXR0bGVtZW50V2FybmluZyA9IHdpdGhXb3J0aExlc3NTZXR0bGVtZW50RmxhZyhcbiAgICAoe3dvcnRoTGVzc1NldHRsZW1lbnQsIGFzc2V0LCBzaG9ydEJhY2tpbmdBc3NldH0pID0+IHtcbiAgICAgICAgc3dpdGNoICh3b3J0aExlc3NTZXR0bGVtZW50KSB7XG4gICAgICAgICAgICBjYXNlIHRydWU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVdpdGhMaW5rc1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nPVwiZXhjaGFuZ2Uud29ydGhfbGVzc19zZXR0bGVtZW50X3dhcm5pbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5cz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxNYXJrZXRMaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17YXNzZXQuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU9e3Nob3J0QmFja2luZ0Fzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnOiBcIm1hcmtldF9saW5rXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjYXNlIHVuZGVmaW5lZDpcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5jaGVja2luZ19mb3Jfd29ydGhfbGVzc19zZXR0bGVtZW50XCIgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbik7XG5cbmNsYXNzIE1vZGFsQ29udGVudCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgYXNzZXQ6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkLFxuICAgICAgICBhY2NvdW50OiBDaGFpblR5cGVzLkNoYWluQWNjb3VudC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgYW1vdW50OiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5vblN1Ym1pdCA9IHRoaXMub25TdWJtaXQuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBvbkFtb3VudENoYW5nZWQoe2Ftb3VudCwgYXNzZXR9KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2Ftb3VudDogYW1vdW50fSk7XG4gICAgfVxuXG4gICAgb25TdWJtaXQoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdGhpcy5wcm9wcy5oaWRlTW9kYWwoKTtcblxuICAgICAgICBsZXQgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXG4gICAgICAgICk7XG4gICAgICAgIGxldCBhbW91bnQgPSB0aGlzLnN0YXRlLmFtb3VudC5yZXBsYWNlKC8sL2csIFwiXCIpO1xuICAgICAgICBhbW91bnQgKj0gcHJlY2lzaW9uO1xuXG4gICAgICAgIHZhciB0ciA9IFdhbGxldEFwaS5uZXdfdHJhbnNhY3Rpb24oKTtcbiAgICAgICAgdHIuYWRkX3R5cGVfb3BlcmF0aW9uKFwiYXNzZXRfc2V0dGxlXCIsIHtcbiAgICAgICAgICAgIGZlZToge1xuICAgICAgICAgICAgICAgIGFtb3VudDogMCxcbiAgICAgICAgICAgICAgICBhc3NldF9pZDogMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFjY291bnQ6IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKSxcbiAgICAgICAgICAgIGFtb3VudDoge1xuICAgICAgICAgICAgICAgIGFtb3VudDogYW1vdW50LFxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiB0aGlzLnByb3BzLmFzc2V0LmdldChcImlkXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gV2FsbGV0RGIucHJvY2Vzc190cmFuc2FjdGlvbih0ciwgbnVsbCwgdHJ1ZSlcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJhc3NldCBzZXR0bGUgcmVzdWx0OlwiLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMuZGlzcGF0Y2goYWNjb3VudF9pZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiYXNzZXQgc2V0dGxlIGVycm9yOiBcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHthc3NldCwgYWNjb3VudH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBsZXQge2Ftb3VudH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgICAgIGlmICghYXNzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGFzc2V0SUQgPSBhc3NldC5nZXQoXCJpZFwiKTtcblxuICAgICAgICBsZXQgYWNjb3VudF9iYWxhbmNlcyA9IGFjY291bnQuZ2V0KFwiYmFsYW5jZXNcIik7XG5cbiAgICAgICAgbGV0IGN1cnJlbnRCYWxhbmNlID0gbnVsbCxcbiAgICAgICAgICAgIGJhbGFuY2VBbW91bnQgPSAwO1xuXG4gICAgICAgIGFjY291bnRfYmFsYW5jZXMgJiZcbiAgICAgICAgICAgIGFjY291bnRfYmFsYW5jZXMuZm9yRWFjaChiYWxhbmNlID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgYmFsYW5jZU9iamVjdCA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KGJhbGFuY2UpO1xuICAgICAgICAgICAgICAgIGlmICghYmFsYW5jZU9iamVjdC5nZXQoXCJiYWxhbmNlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYmFsYW5jZU9iamVjdC5nZXQoXCJhc3NldF90eXBlXCIpID09PSBhc3NldElEKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCYWxhbmNlID0gYmFsYW5jZTtcbiAgICAgICAgICAgICAgICAgICAgYmFsYW5jZUFtb3VudCA9IGJhbGFuY2VPYmplY3QuZ2V0KFwiYmFsYW5jZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBsZXQgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihhc3NldC5nZXQoXCJwcmVjaXNpb25cIikpO1xuICAgICAgICBsZXQgcGFyc2VkQW1vdW50ID0gYW1vdW50ID8gYW1vdW50LnJlcGxhY2UoLywvZywgXCJcIikgOiAwO1xuICAgICAgICBsZXQgc3VibWl0X2J0bl9jbGFzcyA9XG4gICAgICAgICAgICBwYXJzZUZsb2F0KHBhcnNlZEFtb3VudCkgPiAwICYmXG4gICAgICAgICAgICBwYXJzZUZsb2F0KHBhcnNlZEFtb3VudCkgKiBwcmVjaXNpb24gPD0gcGFyc2VGbG9hdChiYWxhbmNlQW1vdW50KVxuICAgICAgICAgICAgICAgID8gXCJidXR0b24gc3VjY2Vzc1wiXG4gICAgICAgICAgICAgICAgOiBcImJ1dHRvbiBkaXNhYmxlZFwiO1xuXG4gICAgICAgIGxldCBiYWxhbmNlVGV4dCA9IChcbiAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLmJhbGFuY2VcIiAvPlxuICAgICAgICAgICAgICAgIDombmJzcDtcbiAgICAgICAgICAgICAgICB7Y3VycmVudEJhbGFuY2UgPyAoXG4gICAgICAgICAgICAgICAgICAgIDxCYWxhbmNlQ29tcG9uZW50IGJhbGFuY2U9e2N1cnJlbnRCYWxhbmNlfSAvPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIFwiMCBcIiArIGFzc2V0LmdldChcInN5bWJvbFwiKVxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgZm9vdGVyID0gW1xuICAgICAgICAgICAgPEJ1dHRvbiBrZXk9e1wic3VibWl0XCJ9IHR5cGU9XCJwcmltYXJ5XCIgb25DbGljaz17dGhpcy5vblN1Ym1pdH0+XG4gICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcIm1vZGFsLnNldHRsZS5zdWJtaXRcIil9XG4gICAgICAgICAgICA8L0J1dHRvbj4sXG4gICAgICAgICAgICA8QnV0dG9uIGtleT17XCJjbG9zZVwifSBvbkNsaWNrPXt0aGlzLnByb3BzLmhpZGVNb2RhbH0+XG4gICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcIm1vZGFsLmNsb3NlXCIpfVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIF07XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxNb2RhbFxuICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJtb2RhbC5zZXR0bGUudGl0bGVcIiwge1xuICAgICAgICAgICAgICAgICAgICBhc3NldDogYXNzZXQuZ2V0KFwic3ltYm9sXCIpXG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgdmlzaWJsZT17dGhpcy5wcm9wcy52aXNpYmxlfVxuICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLm1vZGFsSWR9XG4gICAgICAgICAgICAgICAgZm9vdGVyPXtmb290ZXJ9XG4gICAgICAgICAgICAgICAgb25DYW5jZWw9e3RoaXMucHJvcHMuaGlkZU1vZGFsfVxuICAgICAgICAgICAgICAgIG92ZXJsYXk9e3RydWV9XG4gICAgICAgICAgICAgICAgcmVmPVwic2V0dGxlbWVudF9tb2RhbFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIHZlcnRpY2FsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxmb3JtIGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgdmVydGljYWwgZnVsbC13aWR0aC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8V29ydGhMZXNzU2V0dGxlbWVudFdhcm5pbmcgYXNzZXQ9e2Fzc2V0SUR9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGFpbmVyIFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QW1vdW50U2VsZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwibW9kYWwuc2V0dGxlLmFtb3VudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2Ftb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQW1vdW50Q2hhbmdlZC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9iYWxhbmNlPXtiYWxhbmNlVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldElEfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzPXtbYXNzZXRJRF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L01vZGFsPlxuICAgICAgICApO1xuICAgIH1cbn1cbk1vZGFsQ29udGVudCA9IEJpbmRUb0NoYWluU3RhdGUoTW9kYWxDb250ZW50KTtcblxuY2xhc3MgU2V0dGxlTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIDxNb2RhbENvbnRlbnQgey4uLnRoaXMucHJvcHN9IC8+O1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2V0dGxlTW9kYWw7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge0xpbmt9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi9DaGFpblR5cGVzXCI7XG5pbXBvcnQgQXNzZXRXcmFwcGVyIGZyb20gXCIuL0Fzc2V0V3JhcHBlclwiO1xuaW1wb3J0IEFzc2V0TmFtZSBmcm9tIFwiLi9Bc3NldE5hbWVcIjtcblxuLyoqXG4gKiAgR2l2ZW4gYSBiYXNlIGFuZCBxdW90ZSBhc3NldCwgcmVuZGVyIGEgbGluayB0byB0aGF0IG1hcmtldFxuICpcbiAqICBFeHBlY3RlZCBQcm9wZXJ0aWVzOlxuICogICAgIGJhc2U6ICBhc3NldCBpZCwgd2hpY2ggd2lsbCBiZSBmZXRjaGVkIGZyb20gdGhlIENoYWluU3RvcmVcbiAqICAgICBxdW90ZTogZWl0aGVyIGFuIGFzc2V0IGlkIG9yIGEgYmFsYW5jZSBpZFxuICpcbiAqL1xuXG5jbGFzcyBNYXJrZXRMaW5rIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7YmFzZSwgcXVvdGV9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgaWYgKGJhc2UuZ2V0KFwiaWRcIikgPT09IHF1b3RlLmdldChcImlkXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbWFya2V0SUQgPSBxdW90ZS5nZXQoXCJzeW1ib2xcIikgKyBcIl9cIiArIGJhc2UuZ2V0KFwic3ltYm9sXCIpO1xuICAgICAgICBsZXQgbWFya2V0TmFtZSA9IChcbiAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgIDxBc3NldE5hbWUgbmFtZT17cXVvdGUuZ2V0KFwic3ltYm9sXCIpfSAvPiAve1wiIFwifVxuICAgICAgICAgICAgICAgIDxBc3NldE5hbWUgbmFtZT17YmFzZS5nZXQoXCJzeW1ib2xcIil9IC8+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiA8TGluayB0bz17YC9tYXJrZXQvJHttYXJrZXRJRH1gfT57bWFya2V0TmFtZX08L0xpbms+O1xuICAgIH1cbn1cblxuTWFya2V0TGluayA9IEFzc2V0V3JhcHBlcihNYXJrZXRMaW5rLCB7XG4gICAgcHJvcE5hbWVzOiBbXCJxdW90ZVwiLCBcImJhc2VcIl0sXG4gICAgZGVmYXVsdFByb3BzOiB7YmFzZTogXCIxLjMuMFwifVxufSk7XG5cbi8qXG5UaGlzIGhhbmdzIHRoZSBwYWdlIG9uIE1hcmtldExpbmsgaW1wb3J0IHdpdGggZmlyZWZveCA2Mi4wXG5cbmNsYXNzIE9iamVjdFdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIG9iamVjdDogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHtvYmplY3R9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgbGV0IHF1b3RlQXNzZXQgPSBvYmplY3QuaGFzKFwiYXNzZXRfdHlwZVwiKVxuICAgICAgICAgICAgPyBvYmplY3QuZ2V0KFwiYXNzZXRfdHlwZVwiKVxuICAgICAgICAgICAgOiBvYmplY3QuZ2V0KFwiaWRcIik7XG5cbiAgICAgICAgcmV0dXJuIDxNYXJrZXRMaW5rIHF1b3RlPXtxdW90ZUFzc2V0fSAvPjtcbiAgICB9XG59XG5PYmplY3RXcmFwcGVyID0gQmluZFRvQ2hhaW5TdGF0ZShPYmplY3RXcmFwcGVyKTtcblxuTWFya2V0TGluay5PYmplY3RXcmFwcGVyID0gT2JqZWN0V3JhcHBlcjtcbiovXG5cbmV4cG9ydCBkZWZhdWx0IE1hcmtldExpbms7XG4iLCJpbXBvcnQgUmVhY3QsIHtQdXJlQ29tcG9uZW50fSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7QXBpc30gZnJvbSBcImJpdHNoYXJlc2pzLXdzXCI7XG5cbmltcG9ydCBBc3NldFdyYXBwZXIgZnJvbSBcIi4vQXNzZXRXcmFwcGVyXCI7XG5pbXBvcnQge0Fzc2V0LCBQcmljZX0gZnJvbSBcImNvbW1vbi9NYXJrZXRDbGFzc2VzXCI7XG5cbmNvbnN0IHdpdGhTaG9ydEJhY2tpbmdBc3NldCA9IFdyYXBwZWRDb21wb25lbnQgPT4ge1xuICAgIGNvbnN0IFdyYXBwZWRDb21wb25lbnRXaXRoU2hvcnRCYWNraW5nQXNzZXQgPSBBc3NldFdyYXBwZXIoXG4gICAgICAgIFdyYXBwZWRDb21wb25lbnQsXG4gICAgICAgIHtwcm9wTmFtZXM6IFtcInNob3J0QmFja2luZ0Fzc2V0XCJdfVxuICAgICk7XG4gICAgcmV0dXJuIEFzc2V0V3JhcHBlcihwcm9wcyA9PiAoXG4gICAgICAgIDxXcmFwcGVkQ29tcG9uZW50V2l0aFNob3J0QmFja2luZ0Fzc2V0XG4gICAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgICAgICBzaG9ydEJhY2tpbmdBc3NldD17cHJvcHMuYXNzZXQuZ2V0SW4oW1xuICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcbiAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcbiAgICAgICAgICAgICAgICBcInNob3J0X2JhY2tpbmdfYXNzZXRcIlxuICAgICAgICAgICAgXSl9XG4gICAgICAgIC8+XG4gICAgKSk7XG59O1xuXG5jb25zdCB3aXRoV29ydGhMZXNzU2V0dGxlbWVudEZsYWcgPSBXcmFwcGVkQ29tcG9uZW50ID0+XG4gICAgd2l0aFNob3J0QmFja2luZ0Fzc2V0KFxuICAgICAgICBjbGFzcyBleHRlbmRzIFB1cmVDb21wb25lbnQge1xuICAgICAgICAgICAgc3RhdGUgPSB7d29ydGhMZXNzU2V0dGxlbWVudDogdW5kZWZpbmVkfTtcbiAgICAgICAgICAgIHVwZGF0ZUZsYWcoKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qge2Fzc2V0LCBzaG9ydEJhY2tpbmdBc3NldH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFzc2V0SWQgPSBhc3NldC5nZXQoXCJpZFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzaG9ydEJhY2tpbmdBc3NldElkID0gc2hvcnRCYWNraW5nQXNzZXQuZ2V0KFwiaWRcIik7XG5cbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBtYXliZSBwcm9wZXJseSBzdWJzY3JpYmUgdG8gbWFya2V0IGluc3RlYWQgb2YgY2FsbGluZyBhcGkgZGlyZWN0bHk/XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbE1hcmtldFByaWNlUHJvbWlzZSA9IEFwaXMuaW5zdGFuY2UoKVxuICAgICAgICAgICAgICAgICAgICAuZGJfYXBpKClcbiAgICAgICAgICAgICAgICAgICAgLmV4ZWMoXCJnZXRfb3JkZXJfYm9va1wiLCBbc2hvcnRCYWNraW5nQXNzZXRJZCwgYXNzZXRJZCwgMV0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJCb29rID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJCb29rLmJpZHMubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IE51bWJlcihvcmRlckJvb2suYmlkc1swXS5wcmljZSlcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHNldHRsZW1lbnRQcmljZSA9IGFzc2V0LmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICBcImN1cnJlbnRfZmVlZFwiLFxuICAgICAgICAgICAgICAgICAgICBcInNldHRsZW1lbnRfcHJpY2VcIlxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxTZXR0bGVtZW50UHJpY2UgPSBuZXcgUHJpY2Uoe1xuICAgICAgICAgICAgICAgICAgICBiYXNlOiBuZXcgQXNzZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRfaWQ6IHNob3J0QmFja2luZ0Fzc2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHNldHRsZW1lbnRQcmljZS5nZXRJbihbXCJxdW90ZVwiLCBcImFtb3VudFwiXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVpY2lzaW9uOiBzaG9ydEJhY2tpbmdBc3NldC5nZXQoXCJwcmVjaXNpb25cIilcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlOiBuZXcgQXNzZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRfaWQ6IGFzc2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHNldHRsZW1lbnRQcmljZS5nZXRJbihbXCJiYXNlXCIsIFwiYW1vdW50XCJdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWNpc2lvbjogYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSkudG9SZWFsKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBjb21wYXJlIGZyYWN0aW9uYWwgcHJpY2UgaW5zdGVhZCBvZiByZWFsIHByaWNlXG4gICAgICAgICAgICAgICAgcmVhbE1hcmtldFByaWNlUHJvbWlzZS50aGVuKHJlYWxNYXJrZXRQcmljZSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcnRoTGVzc1NldHRsZW1lbnQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhbE1hcmtldFByaWNlID4gcmVhbFNldHRsZW1lbnRQcmljZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGbGFnKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGbGFnKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZW5kZXIoKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgICAgICBwcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHt3b3J0aExlc3NTZXR0bGVtZW50fVxuICAgICAgICAgICAgICAgIH0gPSB0aGlzO1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxXcmFwcGVkQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3J0aExlc3NTZXR0bGVtZW50PXt3b3J0aExlc3NTZXR0bGVtZW50fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoV29ydGhMZXNzU2V0dGxlbWVudEZsYWc7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgQmFsYW5jZUNvbXBvbmVudCBmcm9tIFwiLi4vVXRpbGl0eS9CYWxhbmNlQ29tcG9uZW50XCI7XG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XG5pbXBvcnQgQW1vdW50U2VsZWN0b3IgZnJvbSBcIi4uL1V0aWxpdHkvQW1vdW50U2VsZWN0b3JTdHlsZUd1aWRlXCI7XG5pbXBvcnQgQXNzZXRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL0Fzc2V0QWN0aW9uc1wiO1xuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcbmltcG9ydCB7QXNzZXR9IGZyb20gXCJjb21tb24vTWFya2V0Q2xhc3Nlc1wiO1xuaW1wb3J0IEFzc2V0V3JhcHBlciBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldFdyYXBwZXJcIjtcbmltcG9ydCB7TW9kYWwsIEJ1dHRvbiwgRm9ybSwgSW5wdXR9IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcblxuY2xhc3MgUmVzZXJ2ZUFzc2V0TW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuZ2V0SW5pdGlhbFN0YXRlKHByb3BzKTtcblxuICAgICAgICB0aGlzLm9uU3VibWl0ID0gdGhpcy5vblN1Ym1pdC5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobnApIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgbnAuYXNzZXQgJiZcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXQgJiZcbiAgICAgICAgICAgIG5wLmFzc2V0LmdldChcImlkXCIpICE9PSB0aGlzLnByb3BzLmFzc2V0LmdldChcImlkXCIpXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLmdldEluaXRpYWxTdGF0ZShucCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0SW5pdGlhbFN0YXRlKHByb3BzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhbW91bnQ6IDAsXG4gICAgICAgICAgICBhbW91bnRBc3NldDogbmV3IEFzc2V0KHtcbiAgICAgICAgICAgICAgICBhbW91bnQ6IDAsXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ6IHByb3BzLmFzc2V0LmdldChcImlkXCIpLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogcHJvcHMuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIG9uQW1vdW50Q2hhbmdlZCh7YW1vdW50LCBhc3NldH0pIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5hbW91bnRBc3NldC5zZXRBbW91bnQoe3JlYWw6IGFtb3VudH0pO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHthbW91bnQsIGFzc2V0fSk7XG4gICAgfVxuXG4gICAgb25TdWJtaXQoKSB7XG4gICAgICAgIEFzc2V0QWN0aW9ucy5yZXNlcnZlQXNzZXQoXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmFtb3VudEFzc2V0LmdldEFtb3VudCgpLFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJpZFwiKSxcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKVxuICAgICAgICApLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5hbW91bnRBc3NldC5zZXRBbW91bnQoe3NhdHM6IDB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2Ftb3VudDogMH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcm9wcy5oaWRlTW9kYWwoKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBhc3NldElkID0gdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJpZFwiKTtcblxuICAgICAgICBsZXQgY3VycmVudEJhbGFuY2UgPVxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50ICYmXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiYmFsYW5jZXNcIiwgW10pLnNpemUgJiZcbiAgICAgICAgICAgICEhdGhpcy5wcm9wcy5hY2NvdW50LmdldEluKFtcImJhbGFuY2VzXCIsIGFzc2V0SWRdKVxuICAgICAgICAgICAgICAgID8gQ2hhaW5TdG9yZS5nZXRPYmplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmdldEluKFtcImJhbGFuY2VzXCIsIGFzc2V0SWRdKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgaWYgKCFjdXJyZW50QmFsYW5jZSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxNb2RhbFxuICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMucHJvcHMudmlzaWJsZX1cbiAgICAgICAgICAgICAgICBvbkNhbmNlbD17dGhpcy5wcm9wcy5oaWRlTW9kYWx9XG4gICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcIm1vZGFsLnJlc2VydmUudGl0bGVcIil9XG4gICAgICAgICAgICAgICAgZm9vdGVyPXtbXG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cInByaW1hcnlcIiBrZXk9XCJzdWJtaXRcIiBvbkNsaWNrPXt0aGlzLm9uU3VibWl0fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJtb2RhbC5yZXNlcnZlLnN1Ym1pdFwiKX1cbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+LFxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e3RoaXMucHJvcHMuaGlkZU1vZGFsfSBrZXk9XCJjYW5jZWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJjYW5jZWxcIil9XG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIj5cbiAgICAgICAgICAgICAgICAgICAgPEFtb3VudFNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIm1vZGFsLnJlc2VydmUuYW1vdW50XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dGhpcy5zdGF0ZS5hbW91bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkFtb3VudENoYW5nZWQuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldElkfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzPXtbYXNzZXRJZF19XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X2JhbGFuY2U9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5hbW91bnRBc3NldC5zZXRBbW91bnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdHM6IGN1cnJlbnRCYWxhbmNlLmdldChcImJhbGFuY2VcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB0aGlzLnN0YXRlLmFtb3VudEFzc2V0LmdldEFtb3VudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlYWw6IHRydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QmFsYW5jZUNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZT17dGhpcy5wcm9wcy5hY2NvdW50LmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJhbGFuY2VzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICA8L01vZGFsPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuUmVzZXJ2ZUFzc2V0TW9kYWwgPSBBc3NldFdyYXBwZXIoUmVzZXJ2ZUFzc2V0TW9kYWwsIHtcbiAgICBwcm9wTmFtZXM6IFtcImFzc2V0XCJdXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgUmVzZXJ2ZUFzc2V0TW9kYWw7XG4iLCJpbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IEltbXV0YWJsZSBmcm9tIFwiaW1tdXRhYmxlXCI7XG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XG5pbXBvcnQgQXNzZXRXcmFwcGVyIGZyb20gXCIuL0Fzc2V0V3JhcHBlclwiO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xuaW1wb3J0IHtEZWNpbWFsQ2hlY2tlcn0gZnJvbSBcIi4vRGVjaW1hbENoZWNrZXJcIjtcbmltcG9ydCB7Rm9ybSwgSW5wdXQsIFNlbGVjdH0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xuXG5jbGFzcyBBc3NldFNlbGVjdG9yIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZywgLy8gYXNzZXQgaWRcbiAgICAgICAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgICBzY3JvbGxfbGVuZ3RoOiBQcm9wVHlwZXMubnVtYmVyXG4gICAgfTtcblxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShucCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KG5wLmFzc2V0cywgdGhpcy5wcm9wcy5hc3NldHMpIHx8XG4gICAgICAgICAgICBucC52YWx1ZSAhPT0gdGhpcy5wcm9wcy52YWx1ZSB8fFxuICAgICAgICAgICAgbnAuc2Nyb2xsX2xlbmd0aCAhPT0gdGhpcy5wcm9wcy5zY3JvbGxfbGVuZ3RoXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMucHJvcHMuYXNzZXRzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICBzaG93U2VhcmNoXG4gICAgICAgICAgICAgICAgc3R5bGU9e3RoaXMucHJvcHMuc3R5bGUgfHwge319XG4gICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMudmFsdWV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMucHJvcHMub25DaGFuZ2V9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMuYXNzZXRzXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYXNzZXQgPT4gYXNzZXQgJiYgYXNzZXQuZ2V0KVxuICAgICAgICAgICAgICAgICAgICAubWFwKGFzc2V0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXthc3NldC5nZXQoXCJzeW1ib2xcIil9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5Bc3NldFNlbGVjdG9yID0gQXNzZXRXcmFwcGVyKEFzc2V0U2VsZWN0b3IsIHthc0xpc3Q6IHRydWV9KTtcblxuY2xhc3MgQW1vdW50U2VsZWN0b3IgZXh0ZW5kcyBEZWNpbWFsQ2hlY2tlciB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcsIC8vIGEgdHJhbnNsYXRpb24ga2V5IGZvciB0aGUgbGFiZWxcbiAgICAgICAgYXNzZXRzOiBQcm9wVHlwZXMuYXJyYXksXG4gICAgICAgIGFtb3VudDogUHJvcFR5cGVzLmFueSxcbiAgICAgICAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgdGFiSW5kZXg6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgICAgIGVycm9yOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBzY3JvbGxfbGVuZ3RoOiBQcm9wVHlwZXMubnVtYmVyXG4gICAgfTtcblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgdGFiSW5kZXg6IDBcbiAgICB9O1xuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMub25Bc3NldENoYW5nZSh0aGlzLnByb3BzLmFzc2V0KTtcbiAgICB9XG5cbiAgICBmb3JtYXRBbW91bnQodikge1xuICAgICAgICAvKi8vIFRPRE86IHVzZSBhc3NldCdzIHByZWNpc2lvbiB0byBmb3JtYXQgdGhlIG51bWJlciovXG4gICAgICAgIGlmICghdikgdiA9IFwiXCI7XG4gICAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJudW1iZXJcIikgdiA9IHYudG9TdHJpbmcoKTtcbiAgICAgICAgbGV0IHZhbHVlID0gdi50cmltKCkucmVwbGFjZSgvLC9nLCBcIlwiKTtcblxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgX29uQ2hhbmdlKGUpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMub25DaGFuZ2UpXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICBhbW91bnQ6IHRoaXMuZ2V0TnVtZXJpY0V2ZW50VmFsdWUoZSksXG4gICAgICAgICAgICAgICAgYXNzZXQ6IHRoaXMucHJvcHMuYXNzZXRcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uQXNzZXRDaGFuZ2Uoc2VsZWN0ZWRfYXNzZXQpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMub25DaGFuZ2UpXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICBhbW91bnQ6IHRoaXMucHJvcHMuYW1vdW50LFxuICAgICAgICAgICAgICAgIGFzc2V0OiBzZWxlY3RlZF9hc3NldFxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLnByb3BzLmVycm9yXG4gICAgICAgICAgICA/IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZSh0aGlzLnByb3BzLmVycm9yKVxuICAgICAgICAgICAgOiB0aGlzLmZvcm1hdEFtb3VudCh0aGlzLnByb3BzLmFtb3VudCk7XG5cbiAgICAgICAgY29uc3QgbGFiZWwgPSAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFtb3VudC1zZWxlY3Rvci1maWVsZC0tbGFiZWxcIj5cbiAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKHRoaXMucHJvcHMubGFiZWwpLnRvVXBwZXJDYXNlKCl9OlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW1vdW50LXNlbGVjdG9yLWZpZWxkLS1iYWxhbmNlXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmRpc3BsYXlfYmFsYW5jZX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuXG4gICAgICAgIGxldCBhZGRvbkFmdGVyID0gbnVsbDtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5pc1ByaWNlKSB7XG4gICAgICAgICAgICBhZGRvbkFmdGVyID0gKFxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmFzc2V0LmdldChcInN5bWJvbFwiKX0ve3RoaXMucHJvcHMuYmFzZX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIGxhYmVsPXtsYWJlbH1cbiAgICAgICAgICAgICAgICBzdHlsZT17dGhpcy5wcm9wcy5zdHlsZX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhbW91bnQtc2VsZWN0b3ItZmllbGRcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxJbnB1dC5Hcm91cCBjb21wYWN0PlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMucHJvcHMuaXNQcmljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiMTAwJVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJjYWxjKDEwMCUgLSAxMzBweClcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXt0aGlzLnByb3BzLmRpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlIHx8IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dGhpcy5wcm9wcy5wbGFjZWhvbGRlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbkNoYW5nZS5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9e3RoaXMucHJvcHMudGFiSW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblBhc3RlPXt0aGlzLnByb3BzLm9uUGFzdGUgfHwgdGhpcy5vblBhc3RlLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbktleVByZXNzPXt0aGlzLm9uS2V5UHJlc3MuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZG9uQWZ0ZXI9e2FkZG9uQWZ0ZXJ9XG4gICAgICAgICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgICAgICAgeyF0aGlzLnByb3BzLmlzUHJpY2UgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXRTZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiMTMwcHhcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMuYXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17SW1tdXRhYmxlLkxpc3QodGhpcy5wcm9wcy5hc3NldHMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQXNzZXRDaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgIDwvSW5wdXQuR3JvdXA+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgKTtcbiAgICB9XG59XG5BbW91bnRTZWxlY3RvciA9IEFzc2V0V3JhcHBlcihBbW91bnRTZWxlY3Rvcik7XG5cbmV4cG9ydCBkZWZhdWx0IEFtb3VudFNlbGVjdG9yO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFkQTtBQUNBO0FBZ0JBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUExREE7QUFEQTtBQURBO0FBNEZBOzs7O0FBN0pBO0FBQ0E7QUFEQTtBQUVBO0FBREE7QUFDQTtBQTZKQTtBQUNBO0FBREE7QUFDQTtBQUdBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSkE7QUFDQTtBQU1BO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFiQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3RNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBYUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQXBCQTtBQUNBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBN0JBO0FBOEJBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFEQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUlBO0FBRUE7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBTkE7QUFGQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQVBBO0FBRkE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU9BO0FBUEE7QUFEQTtBQXJEQTtBQWtFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBTEE7QUF4QkE7QUFEQTtBQWtDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBbkNBO0FBREE7QUF3Q0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBT0E7QUFQQTtBQURBO0FBekNBO0FBUEE7QUFEQTtBQWdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFqRUE7QUFEQTtBQTJFQTs7OztBQTVVQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFEQTtBQVVBO0FBREE7QUFDQTtBQUNBO0FBb1VBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6V0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFLQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBRkE7QUFRQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBUkE7QUFVQTtBQVZBO0FBWUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQVJBO0FBREE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBREE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUdBO0FBSkE7QUFLQTtBQUxBO0FBQUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFSQTtBQTVCQTtBQURBO0FBTkE7QUFzREE7Ozs7QUFqSkE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBQ0E7QUFpSkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQy9KQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTs7O0FBVUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFNQTtBQUNBOzs7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBVUE7QUFDQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUZBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBRkE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBTkE7QUFGQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFOQTtBQUZBO0FBZUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQVhBO0FBbkVBO0FBbUZBOzs7O0FBMUtBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFEQTtBQUNBO0FBcUtBO0FBQ0E7QUFDQTs7O0FBV0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBSEE7QUFJQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVNBO0FBREE7QUFSQTtBQUFBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQVJBO0FBVUE7QUFyQ0E7QUF1Q0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQU9BO0FBQ0E7OztBQUVBO0FBQ0E7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzQkE7QUFDQTtBQTZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhDQTtBQUNBO0FBa0NBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvRUE7QUFDQTtBQWlGQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBckJBO0FBQ0E7QUFzQkE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFLQTtBQU5BO0FBU0E7QUFDQTtBQUVBO0FBS0E7QUFOQTtBQVNBO0FBQ0E7QUFFQTtBQUtBO0FBTkE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFBQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFQQTtBQURBO0FBREE7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFBQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFQQTtBQURBO0FBREE7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFSQTtBQUNBO0FBZ0JBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBRkE7QUFXQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUxBO0FBY0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUZBO0FBY0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUFBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQVRBO0FBREE7QUFKQTtBQTBCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBSEE7QUFBQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBR0E7QUFKQTtBQUhBO0FBWEE7QUFEQTtBQUpBO0FBa0NBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFQQTtBQURBO0FBWEE7QUFEQTtBQTZCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFwQkE7QUFEQTtBQXhDQTtBQW9FQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVFBO0FBREE7QUFUQTtBQTJCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUhBO0FBN0JBO0FBREE7QUFyRUE7QUEyR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTkE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFGQTtBQXRQQTtBQURBO0FBK1BBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFZQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFOQTtBQURBO0FBY0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQVhBO0FBZ0JBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQVBBO0FBREE7QUFlQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBTkE7QUFEQTtBQXhCQTtBQXhEQTtBQURBO0FBbUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBVkE7QUFEQTtBQWtCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFKQTtBQURBO0FBUUE7QUFUQTtBQURBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBSkE7QUFEQTtBQVFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBTkE7QUFBQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFDQTtBQUdBO0FBSkE7QUFMQTtBQVZBO0FBREE7QUFEQTtBQThCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBTEE7QUFIQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUVBO0FBRkE7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUxBO0FBSEE7QUFjQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBbkNBO0FBbkNBO0FBOEVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQTNGQTtBQURBO0FBM1lBO0FBUEE7QUFEQTtBQURBO0FBd2ZBOzs7O0FBbG5DQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFGQTtBQUNBO0FBQ0E7QUE2bUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5ekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTs7O0FBU0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBUkE7QUFXQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFRQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBSUE7QUFJQTtBQUlBO0FBSUE7QUFJQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUE5REE7QUFpRUE7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBa0JBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUtBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFPQTtBQVVBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBR0E7QUFpQkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBM0JBO0FBQ0E7QUE2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTdCQTtBQUNBO0FBK0JBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFNQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExQ0E7QUFDQTtBQTRDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUxBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBSUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUxBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7OztBQUVBO0FBQ0E7QUFHQTs7O0FBRUE7QUFDQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBYUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFBQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFQQTtBQURBO0FBREE7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBQUE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBUEE7QUFEQTtBQURBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBTEE7QUFXQTtBQVhBO0FBaUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBSkE7QUFNQTtBQU5BO0FBbEJBO0FBQ0E7QUE0QkE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQURBO0FBY0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQW5CQTtBQURBO0FBMkJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFuQkE7QUFEQTtBQTJCQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQXBCQTtBQURBO0FBMkJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQXBCQTtBQURBO0FBOUZBO0FBMEhBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSUE7QUFJQTtBQWJBO0FBSEE7QUFEQTtBQTNIQTtBQWlKQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQWFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBN0xBO0FBSkE7QUF5TUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUdBO0FBR0E7QUExQkE7QUE2QkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUE3QkE7QUFKQTtBQXlDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBTkE7QUFEQTtBQWNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQVBBO0FBREE7QUFlQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQWJBO0FBaUJBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFQQTtBQURBO0FBZUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQU5BO0FBREE7QUF4QkE7QUF5Q0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUF2R0E7QUFKQTtBQW1IQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUdBO0FBZkE7QUFvQkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUFyQkE7QUFKQTtBQWtDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBVkE7QUFKQTtBQXNCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBTkE7QUFBQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFDQTtBQUdBO0FBSkE7QUFMQTtBQVZBO0FBREE7QUFEQTtBQThCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBTEE7QUFIQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSUE7QUFDQTtBQUdBO0FBQ0E7QUFkQTtBQURBO0FBa0JBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUF2Q0E7QUFuQ0E7QUFrRkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBckdBO0FBSkE7QUFnSEE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFWQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFuQkE7QUExaEJBO0FBUEE7QUFEQTtBQWtrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQW5rQkE7QUE4a0JBOzs7O0FBaitDQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBREE7QUFNQTtBQURBO0FBQ0E7QUE2OUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFDQTtBQU9BOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFGQTtBQUdBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBT0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQW5DQTtBQURBO0FBYkE7QUF5REE7Ozs7QUExRkE7QUFDQTtBQTRGQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUpBO0FBQ0E7QUFNQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7Ozs7Ozs7Ozs7O0FBWUE7QUFDQTtBQUNBO0FBS0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQS9CQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBUUE7QUFDQTtBQUZBO0FBQ0E7QUFDQTtBQXlCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQVZBO0FBSEE7QUFlQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFDQTtBQVFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSkE7QUFEQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFUQTtBQUpBO0FBcUJBO0FBeEJBO0FBWEE7QUFzQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFmQTtBQURBO0FBdkNBO0FBaUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUpBO0FBREE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBVEE7QUFKQTtBQXFCQTtBQXhCQTtBQVhBO0FBc0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFEQTtBQXZDQTtBQTJEQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBVUE7QUFDQTtBQURBO0FBVkE7QUFlQTtBQWxCQTtBQUpBO0FBeUJBO0FBR0E7QUE3QkE7QUFEQTtBQWtDQTs7OztBQWxPQTtBQUNBO0FBb09BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFNQTtBQVhBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDalBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFIQTtBQU1BO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQU5BO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFMQTtBQURBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVJBO0FBUEE7QUF1QkE7QUExQkE7QUFaQTtBQXlDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBREE7QUExQ0E7QUE2REE7Ozs7QUF0R0E7QUFDQTtBQURBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBUUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFKQTtBQVNBOzs7O0FBckJBO0FBQ0E7QUFEQTtBQUVBO0FBREE7QUFEQTtBQUtBO0FBREE7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBV0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBUkE7QUFTQTtBQW5CQTtBQXFCQSxnRUFHQTtBQXhCQTtBQW9DQTtBQUNBO0FBdENBO0FBMENBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVJBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBSkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFOQTtBQUZBO0FBQUE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFiQTtBQWlCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFOQTtBQUZBO0FBQUE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFiQTtBQWlCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFOQTtBQUZBO0FBQUE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFiQTtBQWlCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFFQTtBQUZBO0FBSkE7QUE1REE7QUFEQTtBQTBFQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBckdBO0FBREE7QUErR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQU1BO0FBQ0E7QUFJQTtBQUxBO0FBT0E7QUF0QkE7QUFEQTtBQURBO0FBaEhBO0FBREE7QUFoREE7QUFQQTtBQURBO0FBREE7QUFEQTtBQXVOQTs7OztBQS9SQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBT0E7QUFDQTtBQUZBO0FBQ0E7QUEwUkE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFKQTtBQURBO0FBY0E7Ozs7QUF0QkE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBQ0E7QUFzQkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQy9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBS0E7QUFFQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBSkE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVFBO0FBUkE7QUFKQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBU0E7QUFUQTtBQUpBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFKQTtBQWFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFKQTtBQUhBO0FBSkE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBREE7QUFEQTtBQXZFQTtBQURBO0FBUEE7QUE2RkE7Ozs7QUF4SUE7QUFDQTtBQTBJQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFEQTtBQUhBO0FBTUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFTQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQVBBO0FBUEE7QUFEQTtBQURBO0FBREE7QUFpQ0E7Ozs7QUFwR0E7QUFDQTtBQXNHQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDNVBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUtBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdEJBO0FBd0JBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQVdBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBT0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQU9BO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFhQTs7O0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQWNBO0FBRUE7QUFNQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFFQTtBQU1BO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFUQTtBQVJBO0FBMkJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQVZBO0FBSEE7QUFEQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUdBO0FBckJBO0FBdUJBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQTdDQTtBQW1EQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFWQTtBQUhBO0FBREE7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBSUE7QUFHQTtBQXJCQTtBQXVCQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUE3Q0E7QUFtREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBTEE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUlBO0FBM0JBO0FBREE7QUFoSkE7QUFpTEE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUhBO0FBbExBO0FBREE7QUFEQTtBQW1NQTs7OztBQTVmQTtBQUNBO0FBOGZBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQy9nQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBU0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQVBBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFRQTtBQVJBO0FBREE7QUFuQkE7QUFpQ0E7Ozs7QUF2RkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUF3RkE7OztBQVlBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFWQTtBQVdBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBTUE7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWJBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBVkE7QUFmQTtBQTZCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVJBO0FBREE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQWZBO0FBREE7QUE5QkE7QUF1REE7Ozs7QUF4TEE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUFDQTtBQXdMQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFLQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFXQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFKQTtBQU1BO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQVRBO0FBSkE7QUF5QkE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFEQTtBQTNCQTtBQUpBO0FBMENBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSkE7QUFRQTtBQUVBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBTEE7QUFqRUE7QUFEQTtBQVJBO0FBcUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQXZGQTtBQStGQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBOzs7O0FBMUxBO0FBQ0E7QUFEQTtBQUVBO0FBREE7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBT0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBUEE7QUFEQTtBQWVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFQQTtBQWpCQTtBQU5BO0FBUEE7QUFMQTtBQThEQTs7OztBQXRJQTtBQUNBO0FBd0lBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQURBO0FBR0E7Ozs7Ozs7QUN4SkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVlBO0FBQ0E7OztBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBTEE7QUFPQTtBQVFBO0FBT0E7QUFDQTs7O0FBRUE7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBZEE7QUF3QkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBUkE7QUFEQTtBQUxBO0FBa0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFRQTtBQVJBO0FBREE7QUFMQTtBQWtCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBV0E7QUFYQTtBQURBO0FBTEE7QUFyQ0E7QUFEQTtBQThEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBckdBO0FBOEdBOzs7O0FBN01BO0FBQ0E7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBOzs7QUFZQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVJBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBREE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFEQTtBQUpBO0FBeEJBO0FBREE7QUFvQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBbkRBO0FBREE7QUEwREE7Ozs7QUE5R0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUE4R0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM3SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBU0E7OztBQUtBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFIQTtBQWNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQU1BO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQVRBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBTkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFNQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVRBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQVBBO0FBOUNBO0FBREE7QUE2REE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFPQTtBQVBBO0FBREE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFMQTtBQURBO0FBWkE7QUFEQTtBQVBBO0FBSkE7QUF1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQU5BO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBTUE7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVRBO0FBRkE7QUFvQkE7QUFNQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQXZDQTtBQXJEQTtBQURBO0FBcEVBO0FBREE7QUFEQTtBQURBO0FBc0xBOzs7O0FBMVlBO0FBQ0E7QUFEQTtBQUVBO0FBREE7QUFDQTtBQTBZQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNsYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7Ozs7Ozs7O0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztBQWVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQVRBO0FBV0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBZ0JBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25RQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQU1BOzs7QUFVQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQUZBO0FBYUE7QUF0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBb0JBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFXQTtBQVpBO0FBY0E7QUFkQTtBQVRBO0FBMkJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFBQTtBQU1BO0FBQUE7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQVRBO0FBQUE7QUFBQTtBQVJBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUEE7QUF4REE7QUFvRUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFSQTtBQXhFQTtBQXFGQTs7OztBQS9NQTtBQUNBO0FBREE7QUFPQTtBQURBO0FBQ0E7QUFDQTtBQTBNQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBU0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQURBO0FBUEE7QUFrQkE7Ozs7QUEvQkE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQURBO0FBTUE7QUFEQTtBQUNBO0FBMkJBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFRQTtBQUNBO0FBWEE7QUFjQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQURBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBUkE7QUFEQTtBQWFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFmQTtBQWtCQTs7OztBQTlFQTtBQUNBO0FBZ0ZBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFIQTtBQU9BO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUtBO0FBQ0E7QUFaQTtBQURBO0FBZ0JBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBakJBO0FBREE7QUEzQkE7QUFEQTtBQW9EQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFUQTtBQURBO0FBYUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFsQkE7QUFEQTtBQWpCQTtBQURBO0FBMkNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQUpBO0FBREE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBSkE7QUFEQTtBQXZIQTtBQURBO0FBREE7QUFEQTtBQStJQTs7OztBQXBOQTtBQUNBO0FBc05BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdlZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFXQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFnTUE7QUFDQTtBQUNBO0FBaE1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBcEJBO0FBcUJBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcEJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBMEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBZ0JBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFNQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFNQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQU9BO0FBbkJBO0FBQ0E7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBUUE7QUFFQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFTQTtBQUNBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFEQTtBQUlBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUlBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUxBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQVhBO0FBY0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQVhBO0FBY0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBWEE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUxBO0FBT0E7QUFQQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQU9BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQWxCQTtBQUNBO0FBNEJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQWJBO0FBZUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFRQTtBQVJBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFSQTtBQXpCQTtBQUNBO0FBMkNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBRkE7QUFVQTtBQVZBO0FBQ0E7QUFhQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBTkE7QUFIQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBSUE7QUFDQTtBQU9BO0FBQ0E7QUFHQTtBQTVCQTtBQWRBO0FBREE7QUFnREE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFOQTtBQUhBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUNBO0FBT0E7QUFDQTtBQUdBO0FBNUJBO0FBYkE7QUFEQTtBQStDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQVVBO0FBVkE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUpBO0FBU0E7QUFUQTtBQWVBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFMQTtBQWNBO0FBZEE7QUFqQ0E7QUFtREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFOQTtBQUZBO0FBM0RBO0FBMEZBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFIQTtBQVVBO0FBbEJBO0FBb0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQURBO0FBckJBO0FBZ0NBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFKQTtBQU1BO0FBQ0E7QUFEQTtBQU5BO0FBQUE7QUFXQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBTkE7QUFKQTtBQWNBO0FBL0JBO0FBaUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQURBO0FBbENBO0FBNkNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUFBO0FBT0E7QUFDQTtBQURBO0FBUEE7QUFBQTtBQUxBO0FBa0JBO0FBRUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFBQTtBQU9BO0FBQ0E7QUFEQTtBQVBBO0FBQUE7QUFKQTtBQW1CQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBOUVBO0FBREE7QUFxRkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQXJLQTtBQTNGQTtBQXZHQTtBQURBO0FBREE7QUFEQTtBQXdYQTs7OztBQTNsQ0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVFBO0FBREE7QUFDQTtBQXFsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUZBO0FBS0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM3bkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBWUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBOzs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBUEE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBVEE7QUFXQTtBQVhBO0FBSkE7QUFrQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFuQkE7QUEwQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFTQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBUEE7QUFEQTtBQWFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQUFBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFTQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFKQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVVBO0FBRUE7QUFLQTtBQU5BO0FBWEE7QUF2R0E7QUFvSUE7Ozs7QUFwTkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQURBO0FBU0E7QUFEQTtBQUNBO0FBQ0E7QUE2TUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNsT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBTUE7QUFDQTtBQU9BOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFGQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQURBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBRUE7QUFLQTtBQU5BO0FBVEE7QUFwQ0E7QUErREE7Ozs7QUFoR0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFpR0E7OztBQW1CQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQVRBO0FBVUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFjQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFuQkE7QUFEQTtBQXlCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBMUJBO0FBcEJBO0FBbURBOzs7O0FBL0tBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBREE7QUFjQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBQ0E7QUFtS0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDelRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBUEE7QUFDQTtBQW1CQTtBQXRCQTtBQXVCQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFRQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQU9BO0FBUEE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFPQTtBQVBBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBTkE7QUFRQTtBQVJBO0FBU0E7QUFUQTtBQUFBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBTkE7QUFRQTtBQVJBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFWQTtBQVJBO0FBcUJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFMQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUE5RkE7QUF5R0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUlBO0FBQ0E7QUFJQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBTEE7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFNQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQVRBO0FBQ0E7QUFZQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQVRBO0FBQ0E7QUFZQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpCQTtBQUNBO0FBb0JBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakJBO0FBQ0E7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFJQTtBQUxBO0FBY0E7QUFkQTtBQWdCQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBREE7QUFNQTtBQVRBO0FBa0JBO0FBbEJBO0FBcUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUlBO0FBTEE7QUFjQTtBQWRBO0FBdkNBO0FBUkE7QUFrRUE7QUFTQTtBQURBO0FBOUVBO0FBb0ZBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBTUE7QUFiQTtBQURBO0FBSkE7QUF1QkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFMQTtBQUhBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFOQTtBQURBO0FBREE7QUFaQTtBQXNDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFKQTtBQWlCQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFRQTtBQUNBO0FBQ0E7QUFGQTtBQVJBO0FBM0tBO0FBREE7QUFEQTtBQURBO0FBaU1BOzs7O0FBcG5CQTtBQUNBO0FBc25CQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBOzs7O0FBSEE7QUFDQTtBQURBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFTQTs7Ozs7Ozs7Ozs7QUFVQTtBQUNBO0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBUUE7QUFDQTtBQUNBO0FBRkE7QUFkQTtBQUNBO0FBdUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFxQkE7OztBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQU9BOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFOQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQVZBO0FBREE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQURBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFPQTtBQUNBO0FBakJBO0FBREE7QUFxQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFKQTtBQWFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFMQTtBQURBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFQQTtBQURBO0FBaUJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBUkE7QUFnQkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBVEE7QUFsQkE7QUEvSEE7QUFnS0E7Ozs7QUE1VUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUZBO0FBREE7QUFPQTtBQURBO0FBQ0E7QUF1VUE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBT0E7Ozs7QUFsQkE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBQ0E7QUFrQkE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXFCQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUxBO0FBREE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVBBO0FBREE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBVEE7QUFGQTtBQXhFQTtBQXlGQTs7OztBQWxLQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBREE7QUFDQTtBQUNBO0FBNkpBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFLQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFSQTtBQVlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7Ozs7QUFoREE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBQ0E7QUFnREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBYUE7QUFmQTtBQUNBO0FBaUJBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBT0E7QUFQQTtBQURBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQUpBO0FBREE7QUFhQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU9BO0FBUEE7QUFEQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBNURBO0FBREE7QUFrRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBSEE7QUFXQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFsRkE7QUFxRkE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3B0QkE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUtBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUZBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFkQTtBQWVBO0FBQ0E7OztBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVFBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBRkE7QUFRQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBS0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhCQTtBQW1CQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFNQTtBQUNBO0FBQ0E7QUFGQTtBQU5BO0FBREE7QUFDQTtBQWNBO0FBR0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQWpFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBdUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQURBO0FBREE7QUFhQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUpBO0FBQUE7QUFBQTtBQVNBO0FBQUE7QUFDQTtBQVVBO0FBWEE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWhCQTtBQXFCQTtBQUNBO0FBQUE7QUFDQTtBQU1BO0FBUEE7QUFTQTtBQVRBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFNQTtBQVBBO0FBU0E7QUFUQTtBQTdDQTtBQXhCQTtBQW1GQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVZBO0FBREE7QUFnQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXJCQTtBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUF4QkE7QUFtQ0E7Ozs7QUExVUE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBQ0E7QUEwVUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzlWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBS0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUZBO0FBUUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQU9BO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBT0E7QUFsQkE7QUFKQTtBQTBCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFXQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFKQTtBQU1BO0FBQ0E7QUFHQTtBQUpBO0FBUEE7QUFxQkEsa0RBQ0E7QUFwQ0E7QUEzQkE7QUFKQTtBQURBO0FBUkE7QUFtR0E7Ozs7QUF0UUE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBc1FBO0FBQ0E7QUFDQTs7O0FBTUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBSEE7QUFJQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFTQTtBQUdBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7Ozs7QUE5REE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUE4REE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7QUFOQTtBQUNBO0FBREE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaFhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFjQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQWVBO0FBQ0E7QUFDQTtBQWZBO0FBRkE7QUFHQTtBQUNBOzs7QUFjQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVJBO0FBb0JBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBV0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBcEJBO0FBUkE7QUFDQTtBQXlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBRkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBSkE7QUFEQTtBQUZBO0FBWUE7QUFBQTtBQUFBO0FBQUE7QUFFQTs7OztBQTVKQTtBQUNBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFIQTtBQUxBO0FBWUE7QUFEQTtBQUNBO0FBa0pBO0FBQ0E7QUFDQTs7O0FBWUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBZ0NBO0FBQUE7QUFDQTtBQTlCQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFSQTtBQVNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7OztBQUlBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBREE7QUFDQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBSUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUFBO0FBdkJBO0FBK0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFoQ0E7QUFtQ0E7Ozs7QUFsSkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBNklBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFhQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTs7OztBQTVCQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBUUE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUNBO0FBc0JBOzs7Ozs7OztBQzVXQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6S0E7QUFDQTtBQTJLQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBUUE7QUFmQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBaUJBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQURBO0FBQ0E7QUFRQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFEQTtBQUNBO0FBUUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFDQTtBQUtBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFEQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFUQTtBQUNBO0FBZ0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFMQTtBQURBO0FBREE7QUFDQTtBQVdBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQVNBO0FBQUE7QUFYQTtBQUNBO0FBZUE7QUFBQTtBQUFBO0FBQ0E7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQVNBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFIQTtBQU9BO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUhBO0FBS0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBQUE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU5BO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTkE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFmQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFYQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBekJBO0FBa0NBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBWEE7QUF0Q0E7QUFxREE7Ozs7QUE5U0E7QUFDQTtBQWdUQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFSQTtBQUNBO0FBV0E7Ozs7Ozs7O0FDNVVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFWQTtBQVlBO0FBQ0E7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDOUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUxBO0FBU0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQVJBO0FBRkE7QUFEQTtBQWVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSEE7QUFVQTtBQWJBO0FBZ0JBO0FBQ0E7QUFEQTtBQW5EQTtBQUNBO0FBdURBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTs7OztBQTlLQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFGQTtBQUNBO0FBQ0E7QUF5S0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBTUE7Ozs7QUF0QkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBRkE7QUFDQTtBQUNBO0FBaUJBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUZBO0FBV0E7QUFFQTtBQUZBO0FBWEE7QUFpQkE7Ozs7QUFwQkE7QUFDQTtBQURBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDOU5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBa0xBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQTdEQTtBQUNBO0FBbExBO0FBaVRBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFSQTtBQURBO0FBbUJBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFSQTtBQURBO0FBbUJBO0FBQ0E7QUFDQTtBQTNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBQ0E7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBM0NBO0FBNENBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFnQkE7QUFNQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBRkE7QUFRQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFrRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7QUFpREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQVRBO0FBWUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFaQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFkQTtBQWhCQTtBQXNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFBQTtBQUNBO0FBZ0JBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBUUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQUNBO0FBOUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUEwREE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQTFHQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFpSEE7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUpBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBSkE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTEE7QUFZQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUZBO0FBU0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQURBO0FBRkE7QUFrQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQWJBO0FBREE7QUFGQTtBQTJCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFRQTtBQVJBO0FBRkE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBUEE7QUFMQTtBQWtCQTtBQWxCQTtBQUZBO0FBMEJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQU9BO0FBUEE7QUFMQTtBQWlCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBTEE7QUFXQTtBQUNBO0FBS0E7QUFLQTtBQVhBO0FBWEE7QUFUQTtBQTVLQTtBQWlOQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUlBO0FBQUE7QUFLQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQXhCQTtBQUFBO0FBQ0E7QUEwQkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFMQTtBQUNBO0FBcENBO0FBQUE7QUFBQTtBQUNBO0FBb0RBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBREE7QUFOQTtBQVVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFSQTtBQURBO0FBRkE7QUFzQkE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFEQTtBQUhBO0FBbUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFRQTtBQVJBO0FBRkE7QUFnQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBS0E7QUFQQTtBQWFBO0FBQ0E7QUFLQTtBQUtBO0FBWEE7QUFiQTtBQVhBO0FBdkZBO0FBZ0lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBU0E7OztBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVdBOzs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFjQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBbERBO0FBREE7QUErREE7Ozs7QUE1a0NBO0FBQ0E7QUE4a0NBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFiQTtBQUNBO0FBZ0JBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3pvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQVFBOzs7QUFPQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU9BO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUlBOzs7O0FBOUNBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUE4Q0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBOzs7Ozs7Ozs7OztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBOzs7O0FBTEE7QUFDQTtBQU9BO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFKQTtBQU1BO0FBWEE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUtBO0FBQ0E7QUFRQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBT0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFTQTs7OztBQWhEQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBQ0E7QUFDQTtBQWdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQUNBO0FBT0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBRkE7QUFpQkE7QUFqQkE7QUFvQkE7Ozs7QUF2QkE7QUFDQTtBQURBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OztBQWlCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFHQTs7Ozs7QUFmQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQVVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBOzs7O0FBOUJBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBUEE7QUFIQTtBQWVBO0FBQ0E7QUFHQTtBQUNBO0FBdkJBO0FBeUJBO0FBQ0E7QUFFQTs7O0FBTUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFOQTtBQU9BO0FBQ0E7OztBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQU5BO0FBV0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFIQTtBQUNBO0FBVUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBREE7QUFEQTtBQUZBO0FBREE7QUFYQTtBQStCQTs7OztBQTlJQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBRkE7QUFDQTtBQThJQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBOzs7O0FBSEE7QUFDQTtBQUtBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3hNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBU0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7OztBQWRBO0FBQ0E7QUFnQkE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBc0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFHQTtBQUZBO0FBREE7QUFVQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQUtBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU5BO0FBQ0E7QUFZQTtBQUNBO0FBQUE7QUFFQTtBQURBO0FBREE7QUFNQTtBQTVDQTtBQUFBO0FBQUE7QUE4Q0E7QUFDQTtBQS9DQTtBQUFBO0FBQUE7QUFpREE7QUFDQTtBQWxEQTtBQUFBO0FBQUE7QUFtREE7QUFBQTtBQUNBO0FBSUE7QUFHQTtBQUZBO0FBS0E7QUE5REE7QUFDQTtBQURBO0FBQUE7QUFEQTtBQUNBO0FBa0VBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzFGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFLQTtBQUNBOzs7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBRkE7QUFRQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQ0E7QUFEQTtBQVJBO0FBYUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFLQTtBQVZBO0FBWUE7QUFDQTtBQURBO0FBWkE7QUFvQkE7QUEzQkE7QUFEQTtBQWJBO0FBOENBOzs7O0FBMUdBO0FBQ0E7QUE0R0E7QUFDQTtBQURBO0FBQ0E7QUFHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDM0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQU9BO0FBQ0E7QUFLQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQWRBO0FBaUJBOzs7O0FBcENBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFDQTtBQW9DQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBaUJBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRkE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFnQkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBbEJBO0FBTEE7QUFpQ0E7Ozs7QUF4R0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBREE7QUFhQTtBQUNBO0FBRkE7QUFDQTtBQTZGQTtBQUNBO0FBQ0E7Ozs7QSIsInNvdXJjZVJvb3QiOiIifQ==