(this["webpackJsonp"] = this["webpackJsonp"] || []).push([[5],{

/***/ 2736:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _InvoiceRequest__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2737);
/* harmony import */ var _InvoicePay__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2739);
/* harmony import */ var _Utility_BindToCurrentAccount__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2742);
/* harmony import */ var jsonschema__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2744);
/* harmony import */ var jsonschema__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(jsonschema__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _assets_stylesheets_components_merchant_scss__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2755);
/* harmony import */ var _assets_stylesheets_components_merchant_scss__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_assets_stylesheets_components_merchant_scss__WEBPACK_IMPORTED_MODULE_7__);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }










var Invoice = function (_React$Component) {
    _inherits(Invoice, _React$Component);

    function Invoice(props) {
        _classCallCheck(this, Invoice);

        var _this = _possibleConstructorReturn(this, (Invoice.__proto__ || Object.getPrototypeOf(Invoice)).call(this, props));

        _this.state = {
            tabs: [{
                name: "Request",
                link: "/invoice/request",
                translate: "invoice.request.title",
                content: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_InvoiceRequest__WEBPACK_IMPORTED_MODULE_3__["default"], _extends({}, props, {
                    validateFormat: _this._validateFormat.bind(_this)
                }))
            }, {
                name: "Pay",
                link: "/invoice/pay",
                translate: "invoice.pay.title",
                content: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_InvoicePay__WEBPACK_IMPORTED_MODULE_4__["default"], _extends({}, props, {
                    validateFormat: _this._validateFormat.bind(_this)
                }))
            }]
        };
        return _this;
    }

    _createClass(Invoice, [{
        key: "_validateFormat",
        value: function _validateFormat(invoice) {
            var schema = {
                type: "object",
                properties: {
                    to: { type: "string" },
                    to_label: { type: "string" },
                    currency: { type: "string" },
                    memo: { type: "string" },
                    line_items: {
                        type: "array",
                        items: {
                            type: "object",
                            properties: {
                                label: { type: "string" },
                                quantity: { type: "float", minimum: 1 },
                                price: { type: "float" }
                            }
                        }
                    },
                    note: { type: "string" },
                    required: ["to", "currency", "line_items"]
                }
            };
            var errors = Object(jsonschema__WEBPACK_IMPORTED_MODULE_6__["validate"])(invoice, schema).errors;
            return !errors.length;
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this2 = this;

            var isTab = this.state.tabs.some(function (tab) {
                return tab.link === _this2.props.match.url;
            });
            if (!isTab) this.props.history.push("/invoice/pay");
        }
    }, {
        key: "onTabChange",
        value: function onTabChange(value) {
            this.props.history.push(value);
        }
    }, {
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "merchant-protocol center" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Card"],
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Tabs"],
                        {
                            activeKey: this.props.location.pathname,
                            animated: false,
                            onChange: this.onTabChange.bind(this)
                        },
                        this.state.tabs.map(function (tab) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Tabs"].TabPane,
                                {
                                    key: tab.link,
                                    tab: counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate(tab.translate)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "padding" },
                                    tab.content
                                )
                            );
                        })
                    )
                )
            );
        }
    }]);

    return Invoice;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

Invoice = Object(_Utility_BindToCurrentAccount__WEBPACK_IMPORTED_MODULE_5__["bindToCurrentAccount"])(Invoice);
/* harmony default export */ __webpack_exports__["default"] = (Invoice);

/***/ }),

/***/ 2737:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(Buffer) {/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(420);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2139);
/* harmony import */ var _Utility_AssetSelect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2128);
/* harmony import */ var lzma__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2556);
/* harmony import */ var lzma__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lzma__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var common_base58__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2738);
/* harmony import */ var common_base58__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(common_base58__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Utility_CopyButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2341);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }












var id = 1;

var InvoiceRequest = function (_React$Component) {
    _inherits(InvoiceRequest, _React$Component);

    function InvoiceRequest(props) {
        _classCallCheck(this, InvoiceRequest);

        var _this = _possibleConstructorReturn(this, (InvoiceRequest.__proto__ || Object.getPrototypeOf(InvoiceRequest)).call(this, props));

        _this.hasErrors = function () {
            var formError = false;
            var values = _this.props.form.getFieldsValue(["line_items", "memo", "keys"]);

            formError = Object.keys(values).some(function (field) {
                if (field !== "line_items") {
                    return !values[field];
                } else {
                    if (values.keys) return values.keys.some(function (item) {
                        return !values[field][item].label || !values[field][item].price || !values[field][item].quantity;
                    });
                }
            });

            return formError || !_this.state.recipient_name;
        };

        _this.remove = function (k) {
            var form = _this.props.form;

            var keys = form.getFieldValue("keys");
            if (keys.length === 1) {
                return;
            }
            var nextKeys = keys.filter(function (key) {
                return key !== k;
            });
            form.setFieldsValue({
                keys: nextKeys
            });
        };

        _this.add = function () {
            var form = _this.props.form;

            var keys = form.getFieldValue("keys");
            var nextKeys = keys.concat(id++);
            form.setFieldsValue({
                keys: nextKeys
            });
        };

        _this.state = {
            invoice: null,
            invoiceData: null,
            recipient_name: null,
            recipient_name_account: null,
            currency: "BTS",
            defaultAssets: ["BTS", "CNY", "USD"]
        };
        return _this;
    }

    _createClass(InvoiceRequest, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            this.setState({
                recipient_name: this.props.currentAccount.get("name")
            });
        }
    }, {
        key: "_printInvoice",
        value: function _printInvoice(invoice) {
            var _this2 = this;

            if (this.props.validateFormat(invoice)) {
                Object(lzma__WEBPACK_IMPORTED_MODULE_4__["compress"])(JSON.stringify(invoice), 9, function (result, error) {
                    var invoiceData = common_base58__WEBPACK_IMPORTED_MODULE_5___default.a.encode(Buffer.from(result));
                    _this2.setState({
                        invoiceData: invoiceData
                    });
                    console.log("Invoice data", invoice, invoiceData);
                });
            }
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps, nextContext) {
            if (this.state.recipient_name == null && this.props.currentAccount) {
                this.setState({
                    recipient_name: this.props.currentAccount.get("name")
                });
            }
        }
    }, {
        key: "fromChanged",
        value: function fromChanged(recipient_name) {
            this.setState({ recipient_name: recipient_name, recipient_name_account: null });
        }
    }, {
        key: "onFromAccountChanged",
        value: function onFromAccountChanged(recipient_name_account) {
            this.setState({ recipient_name_account: recipient_name_account });
        }
    }, {
        key: "handleSubmit",
        value: function handleSubmit(e) {
            var _this3 = this;

            var currency = this.state.currency;

            e.preventDefault();
            this.props.form.validateFields(function (err, values) {
                if (!err) {
                    var line_items = values.line_items,
                        memo = values.memo,
                        note = values.note,
                        to_label = values.to_label;
                    // remove empty lines

                    line_items = line_items.filter(function (item) {
                        return !!item;
                    });
                    _this3._printInvoice({
                        currency: currency,
                        line_items: line_items,
                        memo: memo,
                        note: note,
                        to: _this3.state.recipient_name,
                        to_label: to_label
                    });
                }
            });
        }
    }, {
        key: "onChangeCurrency",
        value: function onChangeCurrency(e) {
            var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_1__["ChainStore"].getAsset(e);
            this.setState({ currency: asset.get("symbol") });
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var _props$form = this.props.form,
                getFieldValue = _props$form.getFieldValue,
                getFieldDecorator = _props$form.getFieldDecorator;
            var _state = this.state,
                currency = _state.currency,
                defaultAssets = _state.defaultAssets;

            getFieldDecorator("keys", { initialValue: [0] });
            var keys = getFieldValue("keys");
            var formItems = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Row"],
                    { style: { marginTop: "0.5rem", marginBottom: "0.5rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Col"],
                        { span: 12 },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, {
                            component: "span",
                            content: "invoice.request.items"
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Col"],
                        { span: 5 },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, {
                            component: "span",
                            content: "invoice.request.quantity"
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Col"],
                        { span: 5 },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, {
                            component: "span",
                            content: "invoice.request.price"
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Col"],
                        { span: 2 },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, {
                            component: "span",
                            content: "invoice.request.action"
                        })
                    )
                ),
                keys.map(function (k, index) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Form"].Item,
                        { key: k, style: { marginBottom: "0px" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Input"].Group,
                            { compact: true },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Row"],
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Col"],
                                    { span: 12 },
                                    getFieldDecorator("line_items[" + k + "]label")(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Input"], null))
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Col"],
                                    { span: 5 },
                                    getFieldDecorator("line_items[" + k + "]quantity")(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Input"], { type: "number" }))
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Col"],
                                    { span: 5 },
                                    getFieldDecorator("line_items[" + k + "]price")(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Input"], { type: "number" }))
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Col"],
                                    { span: 2 },
                                    k == keys[keys.length - 1] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Button"], {
                                        type: "primary",
                                        icon: "plus-circle-o",
                                        onClick: function onClick() {
                                            return _this4.add(k);
                                        }
                                    }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Button"], {
                                        type: "primary",
                                        icon: "minus-circle-o",
                                        onClick: function onClick() {
                                            return _this4.remove(k);
                                        }
                                    })
                                )
                            )
                        )
                    );
                })
            );

            var error = this.hasErrors();

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "merchant-protocol--request" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_2__["default"], {
                    className: "invoice-request-input",
                    label: "invoice.request.recipient_account",
                    accountName: this.state.recipient_name,
                    onChange: this.fromChanged.bind(this),
                    onAccountChanged: this.onFromAccountChanged.bind(this),
                    account: this.state.recipient_name,
                    typeahead: true,
                    size: 32
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Form"],
                    { onSubmit: this.handleSubmit.bind(this), required: true },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Form"].Item,
                        {
                            className: "invoice-request-input",
                            label: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "span",
                                null,
                                counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("invoice.request.identifier"),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Tooltip"],
                                    {
                                        placement: "topLeft",
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("invoice.request.identifier_tooltip")
                                    },
                                    "\xA0",
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        },
                        getFieldDecorator("memo")(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Input"], null))
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Form"].Item,
                        {
                            className: "invoice-request-input",
                            label: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "span",
                                null,
                                counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("invoice.request.payment_asset"),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Tooltip"],
                                    {
                                        placement: "topLeft",
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("invoice.request.payment_asset_tooltip")
                                    },
                                    "\xA0",
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelect__WEBPACK_IMPORTED_MODULE_3__["default"], {
                            value: currency,
                            assets: defaultAssets,
                            onChange: this.onChangeCurrency.bind(this)
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Form"].Item,
                        {
                            className: "invoice-request-input",
                            label: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "span",
                                null,
                                counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("invoice.request.recipient_name"),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Tooltip"],
                                    {
                                        placement: "topLeft",
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("invoice.request.recipient_name_tooltip")
                                    },
                                    "\xA0",
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        },
                        getFieldDecorator("to_label")(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Input"], null))
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Form"].Item,
                        {
                            className: "invoice-request-input",
                            label: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "span",
                                null,
                                counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("invoice.request.note"),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Tooltip"],
                                    {
                                        placement: "topLeft",
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("invoice.request.note_tooltip")
                                    },
                                    "\xA0",
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        },
                        getFieldDecorator("note")(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Input"].TextArea, { rows: 3 }))
                    ),
                    formItems,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Form"].Item,
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Button"],
                            {
                                type: "primary",
                                htmlType: "submit",
                                disabled: error
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "invoice.request.create_invoice_string" })
                        )
                    )
                ),
                this.state.invoiceData && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { style: { marginTop: "2rem" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Input"].TextArea, {
                            disabled: true,
                            rows: 4,
                            value: this.state.invoiceData
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { style: { float: "right" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_CopyButton__WEBPACK_IMPORTED_MODULE_9__["default"], {
                            useDiv: false,
                            text: this.state.invoiceData
                        })
                    )
                )
            );
        }
    }]);

    return InvoiceRequest;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

InvoiceRequest = bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Form"].create({ name: "invoice_request" })(InvoiceRequest);

/* harmony default export */ __webpack_exports__["default"] = (InvoiceRequest);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(427).Buffer))

/***/ }),

/***/ 2738:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(446);


/***/ }),

/***/ 2739:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(Buffer) {/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2146);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(569);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2139);
/* harmony import */ var _Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2145);
/* harmony import */ var bitsharesjs_es__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(420);
/* harmony import */ var actions_NotificationActions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1845);
/* harmony import */ var stores_TransactionConfirmStore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2144);
/* harmony import */ var lzma__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2556);
/* harmony import */ var lzma__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(lzma__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var common_base58__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2738);
/* harmony import */ var common_base58__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(common_base58__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(571);
/* harmony import */ var _PrintReceiptButton_jsx__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2740);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var sanitize__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(572);
/* harmony import */ var sanitize__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(sanitize__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _Utility_BindToCurrentAccount__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2742);
/* harmony import */ var _Blockchain_Operation__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2550);
/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2354);
/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(qrcode_react__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var _ScanOrEnterText__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2743);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






















// invoice example:
//{
//    "to" : "merchant_account_name",
//    "to_label" : "Merchant Name",
//    "currency": "TEST",
//    "memo" : "Invoice #1234",
//    "line_items" : [
//        { "label" : "Something to Buy", "quantity": 1, "price" : "1000.00" },
//        { "label" : "10 things to Buy", "quantity": 10, "price" : "1000.00" }
//    ],
//    "note" : "Something the merchant wants to say to the user",
//    "callback" : "https://merchant.org/complete"
//}
// http://localhost:8080/#/invoice/8Cv8ZjMa8XCazX37XgNhj4jNc4Z5WgZFM5jueMEs2eEvL3pEmELjAVCWZEJhj9tEG5RuinPCjY1Fi34ozb8Cg3H5YBemy9JoTRt89X1QaE76xnxWPZzLcUjvUd4QZPjCyqZNxvrpCN2mm1xVRY8FNSVsoxsrZwREMyygahYz8S23ErWPRVsfZXTwJNCCbqjWDTReL5yytTKzxyKhg4YrnntYG3jdyrBimDGBRLU7yRS9pQQLcAH4T7j8LXkTocS7w1Zj4amckBmpg5EJCMATTRhtH8RSycfiXWZConzqqzxitWCxZK846YHNh

var InvoicePay = function (_React$Component) {
    _inherits(InvoicePay, _React$Component);

    function InvoicePay(props) {
        var _this2 = this;

        _classCallCheck(this, InvoicePay);

        var _this = _possibleConstructorReturn(this, (InvoicePay.__proto__ || Object.getPrototypeOf(InvoicePay)).call(this, props));

        _this.decompressRawData = function (data) {
            return new Promise(function (resolve, reject) {
                Object(lzma__WEBPACK_IMPORTED_MODULE_8__["decompress"])(data, function (result, error) {
                    if (error) {
                        reject(error);
                    } else {
                        resolve(result);
                    }
                });
            });
        };

        _this.handleRawInvoiceDataChange = function (e) {
            var value = e.target.value.replace(/\s/g, "");
            _this.setState({ rawDataInputValue: value }, _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
                var compressedData, decompressedData;
                return regeneratorRuntime.wrap(function _callee$(_context) {
                    while (1) {
                        switch (_context.prev = _context.next) {
                            case 0:
                                _context.prev = 0;
                                compressedData = common_base58__WEBPACK_IMPORTED_MODULE_9___default.a.decode(value);
                                _context.next = 4;
                                return _this.decompressRawData(compressedData);

                            case 4:
                                decompressedData = _context.sent;

                                _this.parseInvoiceData(decompressedData);
                                _context.next = 12;
                                break;

                            case 8:
                                _context.prev = 8;
                                _context.t0 = _context["catch"](0);

                                console.log(_context.t0);
                                _this.setState({ error: _context.t0.message });

                            case 12:
                            case "end":
                                return _context.stop();
                        }
                    }
                }, _callee, _this2, [[0, 8]]);
            })));
        };

        _this.handleQrScanSuccess = function () {
            var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(_ref3) {
                var address = _ref3.address;
                var compressedData, decompressedData;
                return regeneratorRuntime.wrap(function _callee2$(_context2) {
                    while (1) {
                        switch (_context2.prev = _context2.next) {
                            case 0:
                                _context2.prev = 0;
                                compressedData = common_base58__WEBPACK_IMPORTED_MODULE_9___default.a.decode(address);
                                _context2.next = 4;
                                return _this.decompressRawData(compressedData);

                            case 4:
                                decompressedData = _context2.sent;

                                _this.parseInvoiceData(decompressedData);
                                _context2.next = 12;
                                break;

                            case 8:
                                _context2.prev = 8;
                                _context2.t0 = _context2["catch"](0);

                                console.log(_context2.t0);
                                _this.setState({ error: _context2.t0.message });

                            case 12:
                            case "end":
                                return _context2.stop();
                        }
                    }
                }, _callee2, _this2, [[0, 8]]);
            }));

            return function (_x) {
                return _ref2.apply(this, arguments);
            };
        }();

        _this.state = {
            invoice: null,
            pay_from_name: null,
            pay_from_account: null,
            pay_to_account: null,
            error: null,
            blockNum: null,
            invoiceQr: false,
            rawDataInputValue: "",
            isRawDataInputVisible: false
        };
        _this.onBroadcastAndConfirm = _this.onBroadcastAndConfirm.bind(_this);
        _this.getTotal = _this.getTotal.bind(_this);
        // this._printExampleInvoice();
        return _this;
    }

    _createClass(InvoicePay, [{
        key: "_printExampleInvoice",
        value: function _printExampleInvoice() {
            var invoice = {
                to: "sschiessl",
                to_label: "Stefan S.",
                currency: "BTS",
                memo: "Invoice #1234",
                line_items: [{ label: "Something to Buy", quantity: 1, price: "0.1" }, { label: "10 things to Buy", quantity: 10, price: "0.02" }],
                note: "Something the merchant wants to say to the user"
            };
            Object(lzma__WEBPACK_IMPORTED_MODULE_8__["compress"])(JSON.stringify(invoice), 9, function (result, error) {
                var a = common_base58__WEBPACK_IMPORTED_MODULE_9___default.a;
                console.log(common_base58__WEBPACK_IMPORTED_MODULE_9___default.a.encode(Buffer.from(result)));
            });
        }
    }, {
        key: "componentDidMount",
        value: function () {
            var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
                var compressed_data, data;
                return regeneratorRuntime.wrap(function _callee3$(_context3) {
                    while (1) {
                        switch (_context3.prev = _context3.next) {
                            case 0:
                                compressed_data = common_base58__WEBPACK_IMPORTED_MODULE_9___default.a.decode(this.props.match.params.data);

                                stores_TransactionConfirmStore__WEBPACK_IMPORTED_MODULE_7__["default"].unlisten(this.onBroadcastAndConfirm);
                                stores_TransactionConfirmStore__WEBPACK_IMPORTED_MODULE_7__["default"].listen(this.onBroadcastAndConfirm);
                                _context3.prev = 3;
                                _context3.next = 6;
                                return this.decompressRawData(compressed_data);

                            case 6:
                                data = _context3.sent;
                                _context3.next = 9;
                                return this.parseInvoiceData(data);

                            case 9:
                                _context3.next = 14;
                                break;

                            case 11:
                                _context3.prev = 11;
                                _context3.t0 = _context3["catch"](3);

                                this.setState({ isRawDataInputVisible: true });

                            case 14:
                            case "end":
                                return _context3.stop();
                        }
                    }
                }, _callee3, this, [[3, 11]]);
            }));

            function componentDidMount() {
                return _ref4.apply(this, arguments);
            }

            return componentDidMount;
        }()
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps, nextContext) {
            if (this.state.pay_from_name == null && this.props.currentAccount) {
                // check if current account has already paid
                var paymentOperation = this._findPayment();

                this.setState({
                    pay_from_name: this.props.currentAccount.get("name"),
                    paymentOperation: paymentOperation
                });
            }
        }
    }, {
        key: "parseInvoiceData",
        value: function () {
            var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(data) {
                var invoice, assetsArray, pay_to_account;
                return regeneratorRuntime.wrap(function _callee4$(_context4) {
                    while (1) {
                        switch (_context4.prev = _context4.next) {
                            case 0:
                                _context4.prev = 0;

                                data = sanitize__WEBPACK_IMPORTED_MODULE_14___default()(data, {
                                    whiteList: [], // empty, means filter out all tags
                                    stripIgnoreTag: true // filter out all HTML not in the whilelist
                                });

                                invoice = JSON.parse(data);

                                if (!this.props.validateFormat(invoice)) {
                                    _context4.next = 13;
                                    break;
                                }

                                _context4.next = 6;
                                return Object(bitsharesjs_es__WEBPACK_IMPORTED_MODULE_5__["FetchChainObjects"])(bitsharesjs_es__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getAsset, [invoice.currency]);

                            case 6:
                                assetsArray = _context4.sent;
                                _context4.next = 9;
                                return Object(bitsharesjs_es__WEBPACK_IMPORTED_MODULE_5__["FetchChain"])("getAccount", invoice.to, undefined, _defineProperty({}, invoice.to, false));

                            case 9:
                                pay_to_account = _context4.sent;

                                this.setState({
                                    invoice: invoice,
                                    asset: assetsArray[0],
                                    pay_to_account: pay_to_account,
                                    pay_from_name: this.props.currentAccount.get("name"),
                                    error: null,
                                    isRawDataInputVisible: false
                                }, this.getTotal);
                                _context4.next = 14;
                                break;

                            case 13:
                                this.setState({
                                    error: counterpart__WEBPACK_IMPORTED_MODULE_15___default.a.translate("invoice.invalid_format")
                                });

                            case 14:
                                _context4.next = 19;
                                break;

                            case 16:
                                _context4.prev = 16;
                                _context4.t0 = _context4["catch"](0);

                                this.setState({ error: _context4.t0.message });

                            case 19:
                            case "end":
                                return _context4.stop();
                        }
                    }
                }, _callee4, this, [[0, 16]]);
            }));

            function parseInvoiceData(_x2) {
                return _ref5.apply(this, arguments);
            }

            return parseInvoiceData;
        }()
    }, {
        key: "parsePrice",
        value: function parsePrice(price) {
            var m = price.match(/([\d\,\.\s]+)/);
            if (!m || m.length < 2) 0.0;
            return parseFloat(m[1].replace(/[\,\s]/g, ""));
        }
    }, {
        key: "_findPayment",
        value: function _findPayment() {
            var _this3 = this;

            if (Object(_Utility_BindToCurrentAccount__WEBPACK_IMPORTED_MODULE_16__["hasLoaded"])(this.props.currentAccount) && this.state.total_amount && this.state.pay_to_account) {
                var find_to = this.state.pay_to_account.get("id");
                var find_asset_id = this.state.asset.get("id");
                var find_amount = this.state.total_amount * Math.pow(10, this.state.asset.get("precision"));

                var transaction = null;
                this.props.currentAccount.get("history").toJS().forEach(function (_op) {
                    var op = _op.op;
                    if (op[0] == 0) {
                        var from = op[1].from;
                        var to = op[1].to;
                        var amount = op[1].amount.amount;
                        var asset_id = op[1].amount.asset_id;

                        var invoice = _this3.state.invoice;

                        console.log(find_to, to, find_asset_id, asset_id, find_amount, amount);

                        if (find_to == to && find_asset_id == asset_id && find_amount == amount) {
                            transaction = _op;
                        }
                    }
                });
                return transaction;
            }
        }
    }, {
        key: "getTotal",
        value: function getTotal() {
            var _this4 = this;

            var items = this.state.invoice.line_items;
            if (!items || items.length === 0) return 0.0;
            var total_amount = items.reduce(function (total, item) {
                var price = _this4.parsePrice(item.price);
                if (!price) return total;
                return total + item.quantity * price;
            }, 0.0);

            // check if current account has already paid
            var paymentOperation = this._findPayment();

            this.setState({
                total_amount: parseFloat(total_amount.toFixed(this.state.asset.get("precision"))),
                paymentOperation: paymentOperation
            });
        }
    }, {
        key: "onBroadcastAndConfirm",
        value: function onBroadcastAndConfirm(confirm_store_state) {
            if (confirm_store_state.included && confirm_store_state.broadcasted_transaction) {
                stores_TransactionConfirmStore__WEBPACK_IMPORTED_MODULE_7__["default"].unlisten(this.onBroadcastAndConfirm);
                stores_TransactionConfirmStore__WEBPACK_IMPORTED_MODULE_7__["default"].reset();
                this.setState({ blockNum: confirm_store_state.trx_block_num });

                /*  if (this.state.invoice.callback) {
                    let trx = confirm_store_state.broadcasted_transaction;
                    let url = `${this.state.invoice.callback}?block=${
                        trx.ref_block_num
                    }&trx=${trx.id()}`;
                    window.location.href = url;
                }  */
            }
        }
    }, {
        key: "onPayClick",
        value: function onPayClick(e) {
            var _this5 = this;

            e.preventDefault();
            var _state = this.state,
                asset = _state.asset,
                total_amount = _state.total_amount;

            var precision = common_utils__WEBPACK_IMPORTED_MODULE_10__["default"].get_asset_precision(asset.get("precision"));
            var to_account = bitsharesjs_es__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getAccount(this.state.invoice.to);
            if (!to_account) {
                actions_NotificationActions__WEBPACK_IMPORTED_MODULE_6__["default"].error("Account " + this.state.invoice.to + " not found");
                return;
            }
            actions_AccountActions__WEBPACK_IMPORTED_MODULE_2__["default"].transfer(this.state.pay_from_account.get("id"), to_account.get("id"), parseInt(total_amount * precision, 10), asset.get("id"), this.state.invoice.memo).then(function () {
                stores_TransactionConfirmStore__WEBPACK_IMPORTED_MODULE_7__["default"].unlisten(_this5.onBroadcastAndConfirm);
                stores_TransactionConfirmStore__WEBPACK_IMPORTED_MODULE_7__["default"].listen(_this5.onBroadcastAndConfirm);
            }).catch(function (e) {
                console.log("error: ", e);
            });
        }
    }, {
        key: "fromChanged",
        value: function fromChanged(pay_from_name) {
            this.setState({ pay_from_name: pay_from_name, pay_from_account: null });
        }
    }, {
        key: "onFromAccountChanged",
        value: function onFromAccountChanged(pay_from_account) {
            this.setState({ pay_from_account: pay_from_account });
        }
    }, {
        key: "onToAccountChanged",
        value: function onToAccountChanged(pay_to_account) {
            this.setState({ pay_to_account: pay_to_account });
        }
    }, {
        key: "render",
        value: function render() {
            var _this6 = this;

            var data = this.props.match.params.data;

            if (this.state.isRawDataInputVisible) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ScanOrEnterText__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        labelContent: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, {
                            component: "span",
                            content: "invoice.raw_invoice_data"
                        }),
                        submitBtnText: counterpart__WEBPACK_IMPORTED_MODULE_15___default.a.translate("invoice.use_invoice_data"),
                        dataFoundText: counterpart__WEBPACK_IMPORTED_MODULE_15___default.a.translate("invoice.invoice_data_found") + ":",
                        onInputChange: this.handleRawInvoiceDataChange,
                        inputValue: this.state.rawDataInputValue,
                        handleQrScanSuccess: this.handleQrScanSuccess
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "h4",
                        { className: "has-error text-center" },
                        this.state.error
                    )
                );
            }
            if (this.state.error) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "h4",
                    { className: "has-error text-center" },
                    this.state.error
                )
            );
            if (!this.state.invoice) return null;
            if (!this.state.asset) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, {
                    className: "has-error text-center",
                    component: "h4",
                    content: "transfer.errors.asset_unsupported",
                    currency: this.state.invoice.currency
                })
            );

            var _state2 = this.state,
                invoice = _state2.invoice,
                total_amount = _state2.total_amount;

            var asset = invoice.currency;
            var balance = null;

            if (invoice.to_label) {
                invoice.to_name = invoice.to_label;
            }

            var receiptData = _extends({}, invoice, {
                total_amount: total_amount ? total_amount.toString() : 0,
                asset: asset,
                from: this.state.pay_from_account,
                blockNum: this.state.blockNum
            });

            if (this.state.pay_from_account) {
                var balances = this.state.pay_from_account.get("balances");
                var balanceValue = balances.get(this.state.asset.get("id"));
                balance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { component: "span", content: "transfer.available" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                borderBottom: "#A09F9F 1px dotted",
                                cursor: "pointer"
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_4__["default"], { balance: balanceValue })
                    )
                );
            }
            var items = invoice.line_items.map(function (i, index) {
                var price = _this6.parsePrice(i.price);
                var amount = i.quantity * price;
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Row"],
                    { key: "invoice_item_" + index },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Col"],
                        { span: 10 },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "item-name" },
                            i.label
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "item-description" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Col"],
                        { span: 3 },
                        i.quantity,
                        " x"
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Col"],
                        { span: 5 },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                            amount: i.price,
                            asset: asset,
                            exact_amount: true
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Col"],
                        { span: 5 },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                            amount: amount,
                            asset: asset,
                            exact_amount: true
                        })
                    )
                );
            });
            var invoiceData = data !== "pay" ? data : this.state.rawDataInputValue;

            var qrcode = null;
            if (this.state.invoiceQr) {
                qrcode = invoiceData;
            } else {
                if (this.state.pay_from_name && invoice.to !== this.state.pay_from_name) {
                    qrcode = "bitshares:operation/transfer?to=" + invoice.to + "&from=" + this.state.pay_from_name + "&asset=" + asset + "&amount=" + total_amount + (invoice.memo ? "&memo=" + invoice.memo : "");
                }
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "merchant-protocol--pay" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { float: "right" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_PrintReceiptButton_jsx__WEBPACK_IMPORTED_MODULE_11__["default"], {
                        data: receiptData,
                        parsePrice: this.parsePrice
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { component: "h3", content: "invoice.payment_request" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Row"],
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Col"],
                        {
                            span: 10,
                            style: {
                                width: "30rem"
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "h4",
                            null,
                            invoice.memo
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_3__["default"], {
                            label: "invoice.paid_by",
                            accountName: this.state.pay_from_name,
                            onChange: this.fromChanged.bind(this),
                            onAccountChanged: this.onFromAccountChanged.bind(this),
                            account: this.state.pay_from_name,
                            typeahead: true,
                            size: 32
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_3__["default"], {
                            label: "invoice.pay_to",
                            accountName: invoice.to,
                            disabled: true,
                            onAccountChanged: this.onToAccountChanged.bind(this),
                            account: this.state.pay_to_account,
                            size: 32
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Col"],
                        { span: 6, offset: 4 },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "inline-block" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, {
                                component: "h4",
                                content: "invoice.pay.barcode"
                            }),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Button"],
                                {
                                    type: "secondary",
                                    style: {
                                        width: "180px",
                                        marginBottom: "20px"
                                    },
                                    onClick: function onClick() {
                                        _this6.setState({
                                            invoiceQr: !_this6.state.invoiceQr
                                        });
                                    }
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, {
                                    component: "span",
                                    content: this.state.invoiceQr ? "invoice.pay.invoice_qr_code" : "invoice.pay.payment_qr_code"
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(qrcode_react__WEBPACK_IMPORTED_MODULE_18___default.a, {
                            size: 180,
                            value: qrcode ? qrcode : "",
                            bgColor: qrcode ? undefined : "#000000"
                        })
                    )
                ),
                invoice.to_name && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "invoice.request.recipient_name" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "p",
                        null,
                        invoice.to_name
                    )
                ),
                invoice.note && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "invoice.note" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "p",
                        null,
                        invoice.note
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Row"],
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Col"],
                        { span: 10 },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { component: "span", content: "invoice.items" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Col"],
                        { span: 3 },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { component: "span", content: "invoice.amount" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Col"],
                        { span: 5 },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { component: "span", content: "invoice.unit" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Col"],
                        { span: 5 },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { component: "span", content: "invoice.total" })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "divider" }),
                items,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "divider" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Row"],
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Col"],
                        { span: 18 },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { component: "span", content: "invoice.total" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Col"],
                        { span: 5 },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                            amount: total_amount,
                            asset: asset,
                            exact_amount: true
                        })
                    )
                ),
                this.state.paymentOperation ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "h3",
                        null,
                        counterpart__WEBPACK_IMPORTED_MODULE_15___default.a.translate("invoice.payment_proof"),
                        "\xA0",
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Tooltip"],
                            {
                                title: counterpart__WEBPACK_IMPORTED_MODULE_15___default.a.translate("invoice.tooltip_payment_proof"),
                                mouseEnterDelay: 0.5
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Icon"], { type: "question-circle" })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "table",
                        { className: "table" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tbody",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Blockchain_Operation__WEBPACK_IMPORTED_MODULE_17__["default"], {
                                includeOperationId: true,
                                key: this.state.paymentOperation.id,
                                operationId: this.state.paymentOperation.id,
                                op: this.state.paymentOperation.op,
                                result: this.state.paymentOperation.result,
                                block: this.state.paymentOperation.block_num,
                                current: this.props.currentAccount.get("id")
                            })
                        )
                    )
                ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Button"],
                    {
                        type: "primary",
                        style: { marginTop: "30px" },
                        disabled: !this.state.pay_from_account,
                        onClick: this.onPayClick.bind(this)
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, {
                        content: "invoice.pay_button",
                        asset: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                            amount: total_amount,
                            asset: asset,
                            exact_amount: true
                        }),
                        name: invoice.to
                    })
                )
            );
        }
    }]);

    return InvoicePay;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (InvoicePay);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(427).Buffer))

/***/ }),

/***/ 2740:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2677);
/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jspdf__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jspdf_autotable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2741);
/* harmony import */ var jspdf_autotable__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jspdf_autotable__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var stores_BlockchainStore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1890);
/* harmony import */ var actions_BlockchainActions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1891);
function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }









var printReceipt = function printReceipt(_ref) {
    var data = _ref.data,
        parsePrice = _ref.parsePrice;
    var line_items = data.line_items,
        to = data.to,
        asset = data.asset,
        from = data.from,
        total_amount = data.total_amount,
        memo = data.memo,
        currency = data.currency,
        blockNum = data.blockNum,
        to_name = data.to_name,
        note = data.note;

    var marginUp = 25,
        lineMargin = 5,
        marginLeft = 15,
        transactionDataright = 150,
        width = 210,
        rowHeight = 10,
        fontSize = 16,
        totalFontSize = 20;

    var height = 0;
    var body = [];
    var transactionId = "";
    var fromName = "";

    if (from) {
        from.get("history").forEach(function (op) {
            if (op.get("block_num") === blockNum) {
                transactionId = op.get("id");
                return;
            }
        });
        fromName = from.get("name");
    }

    var date = stores_BlockchainStore__WEBPACK_IMPORTED_MODULE_5__["default"].getState().blockHeaders.get(blockNum);

    var timestamp = date ? date.timestamp.toLocaleDateString("en-US").replace(/\//g, ".") : new Date().toLocaleDateString("en-US").replace(/\//g, ".");

    var pdf = new jspdf__WEBPACK_IMPORTED_MODULE_3___default.a({
        orientation: "portrait",
        compressPdf: true
    });

    pdf.setFontStyle("bold");
    pdf.setFontSize(fontSize);
    pdf.text(counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("invoice.pay_to", { locale: "en" }).toUpperCase(), marginLeft, height += marginUp);
    pdf.setFontStyle("normal");
    pdf.text(to_name, marginLeft, height += rowHeight);
    pdf.text(to, marginLeft, height += rowHeight);

    pdf.autoTable({
        body: [["", counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("invoice.memo", { locale: "en" }), memo], [{
            content: counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("invoice.paid_by", { locale: "en" }).toUpperCase(),
            styles: { fontStyle: "bold" }
        }, counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("invoice.date", { locale: "en" }), timestamp], [fromName, counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("invoice.transaction", { locale: "en" }), transactionId], [{
            content: counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("invoice.note", { locale: "en" }).toUpperCase(),
            styles: { fontStyle: "bold" }
        }, "", ""], [note, "", ""]],
        bodyStyles: { valign: "top" },
        styles: { cellWidth: "wrap", rowPageBreak: "auto", halign: "justify" },
        columnStyles: {
            0: { halign: "left", cellWidth: 90 },
            1: { fontStyle: "bold" },
            2: { cellWidth: 40 }
        },
        startY: height += rowHeight,
        theme: "plain"
    });

    pdf.line(lineMargin, height = pdf.autoTable.previous.finalY + rowHeight, width - lineMargin, height);

    pdf.setFontSize(totalFontSize);
    pdf.text(counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("invoice.receipt_total", { locale: "en" }).toUpperCase(), marginLeft, height += rowHeight);
    pdf.text(total_amount + " " + currency, transactionDataright, height);
    pdf.line(lineMargin, height += 5, width - lineMargin, height);

    pdf.setFontStyle("normal");
    pdf.setFontSize(fontSize);
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
        for (var _iterator = line_items[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var item = _step.value;

            var price = parsePrice(item.price);
            var unit = price + " " + asset;
            var total = item.quantity * price + " " + asset;
            body = [].concat(_toConsumableArray(body), [{ descrption: item.label, unit: unit, amount: item.quantity, total: total }]);
        }
    } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
    } finally {
        try {
            if (!_iteratorNormalCompletion && _iterator.return) {
                _iterator.return();
            }
        } finally {
            if (_didIteratorError) {
                throw _iteratorError;
            }
        }
    }

    pdf.autoTable({
        columns: [{
            header: { content: "DESCRIPTION", styles: { halign: "left" } },
            dataKey: "descrption"
        }, { header: "AMOUNT", dataKey: "amount" }, { header: "UNIT", dataKey: "unit" }, { header: "TOTAL", dataKey: "total" }],
        body: body,
        startY: height + rowHeight,
        bodyStyles: { valign: "top" },
        styles: { cellWidth: "auto", rowPageBreak: "auto", halign: "right" },
        columnStyles: {
            descrption: { halign: "left" }
        },
        theme: "plain"
    });
    pdf.save("bitshares-receipt-" + to + ".pdf");
};
var PrintReceiptButton = function PrintReceiptButton(_ref2) {
    var data = _ref2.data,
        parsePrice = _ref2.parsePrice;

    var tip = "tooltip.print_receipt",
        dataPlace = "left",
        buttonText = counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("invoice.print_receipt");
    if (data.blockNum) actions_BlockchainActions__WEBPACK_IMPORTED_MODULE_6__["default"].getHeader.defer(data.blockNum);

    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Tooltip"],
        { placement: dataPlace, title: counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate(tip) },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Button"],
            {
                type: "primary",
                icon: "download",
                onClick: function onClick() {
                    return printReceipt({ data: data, parsePrice: parsePrice });
                }
            },
            buttonText
        )
    );
};

/* harmony default export */ __webpack_exports__["default"] = (PrintReceiptButton);

/***/ }),

/***/ 2742:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasLoaded", function() { return hasLoaded; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bindToCurrentAccount", function() { return bindToCurrentAccount; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _ChainTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2002);
/* harmony import */ var react_debounce_render__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2138);
/* harmony import */ var react_debounce_render__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_debounce_render__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2003);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1886);
/* harmony import */ var _stores_AccountStore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(553);
/* harmony import */ var _LoadingIndicator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1986);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }










var hasLoaded = function hasLoaded(currentAccount) {
    return !!currentAccount && !!currentAccount.get("id");
};

var bindToCurrentAccount = function bindToCurrentAccount(WrappedComponent) {
    var _class, _temp;

    // ...and returns another component...
    var BindToCurrentAccount = (_temp = _class = function (_React$Component) {
        _inherits(BindToCurrentAccount, _React$Component);

        function BindToCurrentAccount(props) {
            _classCallCheck(this, BindToCurrentAccount);

            return _possibleConstructorReturn(this, (BindToCurrentAccount.__proto__ || Object.getPrototypeOf(BindToCurrentAccount)).call(this, props));
        }

        _createClass(BindToCurrentAccount, [{
            key: "render",
            value: function render() {
                if (hasLoaded(this.props.currentAccount)) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(WrappedComponent, this.props);
                } else {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_LoadingIndicator__WEBPACK_IMPORTED_MODULE_6__["default"], null);
                }
            }
        }]);

        return BindToCurrentAccount;
    }(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component), _class.propTypes = {
        currentAccount: _ChainTypes__WEBPACK_IMPORTED_MODULE_1__["default"].ChainAccount
    }, _class.defaultProps = {
        // set subscription
        autosubscribe: true
    }, _temp);

    BindToCurrentAccount = Object(_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(BindToCurrentAccount);

    BindToCurrentAccount = react_debounce_render__WEBPACK_IMPORTED_MODULE_2___default()(BindToCurrentAccount, 100, {
        leading: false
    });

    return Object(alt_react__WEBPACK_IMPORTED_MODULE_4__["connect"])(BindToCurrentAccount, {
        listenTo: function listenTo() {
            return [_stores_AccountStore__WEBPACK_IMPORTED_MODULE_5__["default"]];
        },
        getProps: function getProps() {
            var currentAccount = _stores_AccountStore__WEBPACK_IMPORTED_MODULE_5__["default"].getState().currentAccount || _stores_AccountStore__WEBPACK_IMPORTED_MODULE_5__["default"].getState().passwordAccount || "please-login";
            return {
                currentAccount: new Map([["name", currentAccount]])
            };
        }
    });
};

/***/ }),

/***/ 2743:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ScanOrEnterText; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _QRAddressScanner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2393);





function ScanOrEnterText(_ref) {
    var labelContent = _ref.labelContent,
        handleQrScanSuccess = _ref.handleQrScanSuccess,
        onInputChange = _ref.onInputChange,
        inputValue = _ref.inputValue,
        submitBtnText = _ref.submitBtnText,
        dataFoundText = _ref.dataFoundText;

    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "div",
        { style: { marginBottom: "1em" } },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "label",
            { className: "left-label" },
            labelContent
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "div",
            null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "inline-label" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2__["Input"].TextArea, {
                    style: { marginBottom: 0 },
                    rows: 3,
                    onChange: onInputChange,
                    value: inputValue
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_QRAddressScanner__WEBPACK_IMPORTED_MODULE_3__["default"], {
                        label: "Scan",
                        onSuccess: handleQrScanSuccess,
                        submitBtnText: submitBtnText,
                        dataFoundText: dataFoundText
                    })
                )
            )
        )
    );
}

ScanOrEnterText.propTypes = {
    labelContent: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string, prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.element]),
    handleQrScanSuccess: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func.isRequired,
    onInputChange: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func.isRequired,
    inputValue: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,
    submitBtnText: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string, prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.element]),
    dataFoundText: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string, prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.element])
};

/***/ }),

/***/ 2755:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 2757:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2367);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(553);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(725);
/* harmony import */ var stores_GatewayStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2130);
/* harmony import */ var stores_IntlStore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2713);
/* harmony import */ var stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2364);
/* harmony import */ var alt_container__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1989);
/* harmony import */ var _Exchange__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2758);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2002);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(420);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2003);
/* harmony import */ var actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2368);
/* harmony import */ var components_Exchange_tradingViewClasses__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2838);
/* harmony import */ var _Page404_Page404__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2643);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

















var ExchangeContainer = function (_React$Component) {
    _inherits(ExchangeContainer, _React$Component);

    function ExchangeContainer() {
        _classCallCheck(this, ExchangeContainer);

        return _possibleConstructorReturn(this, (ExchangeContainer.__proto__ || Object.getPrototypeOf(ExchangeContainer)).apply(this, arguments));
    }

    _createClass(ExchangeContainer, [{
        key: "render",
        value: function render() {
            var symbols = this.props.match.params.marketID.toUpperCase().split("_");
            if (symbols[0] === symbols[1]) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Page404_Page404__WEBPACK_IMPORTED_MODULE_14__["default"], { subtitle: "market_not_found_subtitle" });
            }
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                alt_container__WEBPACK_IMPORTED_MODULE_7__["default"],
                {
                    stores: [stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"], stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"], stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"], stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_6__["default"], stores_IntlStore__WEBPACK_IMPORTED_MODULE_5__["default"]],
                    inject: {
                        hasAnyPriceAlert: function hasAnyPriceAlert() {
                            return stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].hasAnyPriceAlert(symbols[0], symbols[1]);
                        },
                        priceAlert: function priceAlert() {
                            return stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().priceAlert;
                        },
                        locale: function locale() {
                            return stores_IntlStore__WEBPACK_IMPORTED_MODULE_5__["default"].getState().currentLocale;
                        },
                        lockedWalletState: function lockedWalletState() {
                            return stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().locked;
                        },
                        marketLimitOrders: function marketLimitOrders() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().marketLimitOrders;
                        },
                        marketCallOrders: function marketCallOrders() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().marketCallOrders;
                        },
                        invertedCalls: function invertedCalls() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().invertedCalls;
                        },
                        marketSettleOrders: function marketSettleOrders() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().marketSettleOrders;
                        },
                        marketData: function marketData() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().marketData;
                        },
                        totals: function totals() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().totals;
                        },
                        activeMarketHistory: function activeMarketHistory() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().activeMarketHistory;
                        },
                        bucketSize: function bucketSize() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().bucketSize;
                        },
                        buckets: function buckets() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().buckets;
                        },
                        lowestCallPrice: function lowestCallPrice() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().lowestCallPrice;
                        },
                        feedPrice: function feedPrice() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().feedPrice;
                        },
                        currentAccount: function currentAccount() {
                            return stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].getState().currentAccount;
                        },
                        myActiveAccounts: function myActiveAccounts() {
                            return stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].getState().myActiveAccounts;
                        },
                        viewSettings: function viewSettings() {
                            return stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().viewSettings;
                        },
                        settings: function settings() {
                            return stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().settings;
                        },
                        exchange: function exchange() {
                            return stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().exchange;
                        },
                        starredMarkets: function starredMarkets() {
                            return stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().starredMarkets;
                        },
                        marketDirections: function marketDirections() {
                            return stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().marketDirections;
                        },
                        marketStats: function marketStats() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().marketStats;
                        },
                        marketReady: function marketReady() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().marketReady;
                        },
                        backedCoins: function backedCoins() {
                            return stores_GatewayStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().backedCoins.get("OPEN", []);
                        },
                        bridgeCoins: function bridgeCoins() {
                            return stores_GatewayStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().bridgeCoins;
                        },
                        miniDepthChart: function miniDepthChart() {
                            return stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().viewSettings.get("miniDepthChart", true);
                        },
                        viewChat: function viewChat() {
                            return stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().viewSettings.get("viewChat", true);
                        },

                        dataFeed: function dataFeed() {
                            return new components_Exchange_tradingViewClasses__WEBPACK_IMPORTED_MODULE_13__["DataFeed"]();
                        },

                        trackedGroupsConfig: function trackedGroupsConfig() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().trackedGroupsConfig;
                        },
                        currentGroupOrderLimit: function currentGroupOrderLimit() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().currentGroupLimit;
                        }
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ExchangeSubscriber, {
                    history: this.props.history,
                    location: this.props.location,
                    quoteAsset: symbols[0],
                    baseAsset: symbols[1]
                })
            );
        }
    }]);

    return ExchangeContainer;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var emitter = Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_10__["EmitterInstance"])();
var callListener = void 0,
    limitListener = void 0,
    newCallListener = void 0,
    feedUpdateListener = void 0,
    settleOrderListener = void 0;

var ExchangeSubscriber = function (_React$Component2) {
    _inherits(ExchangeSubscriber, _React$Component2);

    function ExchangeSubscriber(props) {
        _classCallCheck(this, ExchangeSubscriber);

        var _this2 = _possibleConstructorReturn(this, (ExchangeSubscriber.__proto__ || Object.getPrototypeOf(ExchangeSubscriber)).call(this));

        _this2.state = { sub: null };

        _this2._subToMarket = _this2._subToMarket.bind(_this2);
        return _this2;
    }

    _createClass(ExchangeSubscriber, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            var _this3 = this;

            if (this.props.quoteAsset === null || this.props.baseAsset === null) {
                return;
            }
            if (this.props.quoteAsset.toJS && this.props.baseAsset.toJS) {
                this._subToMarket(this.props);
                // this._addMarket(this.props.quoteAsset.get("symbol"), this.props.baseAsset.get("symbol"));
            }

            emitter.on("cancel-order", limitListener = actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].cancelLimitOrderSuccess);
            emitter.on("close-call", callListener = actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].closeCallOrderSuccess);

            emitter.on("call-order-update", newCallListener = function newCallListener(call_order) {
                var coBase = call_order.call_price.base.asset_id;
                var coQuote = call_order.call_price.quote.asset_id;

                var baseId = _this3.props.baseAsset.get("id"),
                    quoteId = _this3.props.quoteAsset.get("id");
                if ((coBase === baseId || coBase === quoteId) && (coQuote === baseId || coQuote === quoteId)) {
                    actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].callOrderUpdate(call_order);
                }
            });
            emitter.on("bitasset-update", feedUpdateListener = actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].feedUpdate);
            emitter.on("settle-order-update", settleOrderListener = function settleOrderListener(object) {
                var _market_utils$isMarke = market_utils.isMarketAsset(_this3.props.quoteAsset, _this3.props.baseAsset),
                    isMarketAsset = _market_utils$isMarke.isMarketAsset,
                    marketAsset = _market_utils$isMarke.marketAsset;

                if (isMarketAsset && marketAsset.id === object.balance.asset_id) {
                    actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].settleOrderUpdate(marketAsset.id);
                }
            });
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            var _this4 = this;

            if (nextProps.quoteAsset === null || nextProps.baseAsset === null) {
                return;
            }
            /* Prediction markets should only be shown in one direction, if the link goes to the wrong one we flip it */
            if (nextProps.baseAsset && nextProps.baseAsset.getIn(["bitasset", "is_prediction_market"])) {
                this.props.history.push("/market/" + nextProps.baseAsset.get("symbol") + "_" + nextProps.quoteAsset.get("symbol"));
            }

            if (nextProps.quoteAsset && nextProps.baseAsset) {
                if (!this.state.sub) {
                    return this._subToMarket(nextProps);
                }
            }

            if (nextProps.quoteAsset.get("symbol") !== this.props.quoteAsset.get("symbol") || nextProps.baseAsset.get("symbol") !== this.props.baseAsset.get("symbol")) {
                var currentSub = this.state.sub.split("_");
                actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].unSubscribeMarket(currentSub[0], currentSub[1]).then(function () {
                    _this4._subToMarket(nextProps);
                });
            }
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            var _props = this.props,
                quoteAsset = _props.quoteAsset,
                baseAsset = _props.baseAsset;

            if (quoteAsset === null || baseAsset === null) {
                return;
            }

            actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].unSubscribeMarket(quoteAsset.get("id"), baseAsset.get("id"));
            if (emitter) {
                emitter.off("cancel-order", limitListener);
                emitter.off("close-call", callListener);
                emitter.off("call-order-update", newCallListener);
                emitter.off("bitasset-update", feedUpdateListener);
                emitter.off("settle-order-update", settleOrderListener);
            }
        }
    }, {
        key: "_subToMarket",
        value: function _subToMarket(props, newBucketSize, newGroupLimit) {
            var quoteAsset = props.quoteAsset,
                baseAsset = props.baseAsset,
                bucketSize = props.bucketSize,
                currentGroupOrderLimit = props.currentGroupOrderLimit;

            if (newBucketSize) {
                bucketSize = newBucketSize;
            }
            if (newGroupLimit) {
                currentGroupOrderLimit = newGroupLimit;
            }
            if (quoteAsset.get("id") && baseAsset.get("id")) {
                actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].subscribeMarket.defer(baseAsset, quoteAsset, bucketSize, currentGroupOrderLimit);
                this.setState({
                    sub: quoteAsset.get("id") + "_" + baseAsset.get("id")
                });
            }
        }
    }, {
        key: "render",
        value: function render() {
            if (this.props.quoteAsset === null || this.props.baseAsset === null) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Page404_Page404__WEBPACK_IMPORTED_MODULE_14__["default"], { subtitle: "market_not_found_subtitle" });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Exchange__WEBPACK_IMPORTED_MODULE_8__["default"], _extends({}, this.props, {
                sub: this.state.sub,
                subToMarket: this._subToMarket
            }));
        }
    }]);

    return ExchangeSubscriber;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ExchangeSubscriber.propTypes = {
    currentAccount: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainAccount.isRequired,
    quoteAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainAsset.isRequired,
    baseAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainAsset.isRequired,
    coreAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainAsset.isRequired
};
ExchangeSubscriber.defaultProps = {
    currentAccount: "1.2.3",
    coreAsset: "1.3.0"
};


ExchangeSubscriber = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_11__["default"])(ExchangeSubscriber, {
    show_loader: true
});

/* harmony default export */ __webpack_exports__["default"] = (ExchangeContainer);

/***/ }),

/***/ 2758:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2759);
/* harmony import */ var bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(489);
/* harmony import */ var bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(420);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var intro_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2572);
/* harmony import */ var intro_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(intro_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(796);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var perfect_scrollbar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2761);
/* harmony import */ var perfect_scrollbar__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(perfect_scrollbar__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(726);
/* harmony import */ var actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2368);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(582);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2366);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(598);
/* harmony import */ var common_trxHelper__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(597);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(571);
/* harmony import */ var _BuySell__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2782);
/* harmony import */ var _ScaledOrderTab__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2787);
/* harmony import */ var _ExchangeHeader__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2791);
/* harmony import */ var _MyOpenOrders__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(2796);
/* harmony import */ var _OrderBook__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(2814);
/* harmony import */ var _MarketHistory__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(2821);
/* harmony import */ var _MyMarkets__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(2824);
/* harmony import */ var _MarketPicker__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(2831);
/* harmony import */ var _ConfirmOrderModal__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(2833);
/* harmony import */ var _Personalize__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(2834);
/* harmony import */ var _TradingViewPriceChart__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(2835);
/* harmony import */ var _DepthHighChart__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(2842);
/* harmony import */ var _LoadingIndicator__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(1986);
/* harmony import */ var _Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(2845);
/* harmony import */ var _Notifier_NotifierContainer__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(2847);
/* harmony import */ var _Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(2469);
/* harmony import */ var _Dashboard_SimpleDepositWithdraw__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(2857);
/* harmony import */ var _Dashboard_SimpleDepositBlocktradesBridge__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(2858);
/* harmony import */ var _PriceAlert__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(2859);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_37___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_37__);
/* harmony import */ var _Chat_ChatBro__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(2860);


var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











































var Exchange = function (_React$Component) {
    _inherits(Exchange, _React$Component);

    function Exchange(props) {
        _classCallCheck(this, Exchange);

        var _this = _possibleConstructorReturn(this, (Exchange.__proto__ || Object.getPrototypeOf(Exchange)).call(this));

        _this.EXPIRATIONS = {
            HOUR: {
                title: "1 hour",
                get: function get() {
                    return moment__WEBPACK_IMPORTED_MODULE_7___default()().add(1, "hour").valueOf();
                }
            },
            "12HOURS": {
                title: "12 hours",
                get: function get() {
                    return moment__WEBPACK_IMPORTED_MODULE_7___default()().add(12, "hour").valueOf();
                }
            },
            "24HOURS": {
                title: "24 hours",
                get: function get() {
                    return moment__WEBPACK_IMPORTED_MODULE_7___default()().add(1, "day").valueOf();
                }
            },
            "7DAYS": {
                title: "7 days",
                get: function get() {
                    return moment__WEBPACK_IMPORTED_MODULE_7___default()().add(7, "day").valueOf();
                }
            },
            MONTH: {
                title: "30 days",
                get: function get() {
                    return moment__WEBPACK_IMPORTED_MODULE_7___default()().add(30, "day").valueOf();
                }
            },
            YEAR: {
                title: "1 year",
                get: function get() {
                    return moment__WEBPACK_IMPORTED_MODULE_7___default()().add(1, "year").valueOf();
                }
            },
            SPECIFIC: {
                title: "Specific",
                get: function get(type) {
                    return _this.state.expirationCustomTime[type].valueOf();
                }
            }
        };

        _this._chartZoom = function () {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                chartZoom: !_this.state.chartZoom
            });

            var chartType = _this.state.chartType;
            _this.setState({
                chartZoom: !_this.state.chartZoom,
                chartType: "hidden_chart"
            });
            // force reload
            setTimeout(function () {
                _this.setState({
                    chartType: chartType
                });
            }, 100);
        };

        _this._chartTools = function () {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                chartTools: !_this.state.chartTools
            });

            var chartType = _this.state.chartType;
            _this.setState({
                chartTools: !_this.state.chartTools,
                chartType: "hidden_chart"
            });
            // force reload
            setTimeout(function () {
                _this.setState({
                    chartType: chartType
                });
            }, 100);
        };

        _this._flipOrderBook = function () {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                flipOrderBook: !_this.state.flipOrderBook
            });

            _this.setState({
                flipOrderBook: !_this.state.flipOrderBook
            });
        };

        _this._orderBookReversed = function () {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                orderBookReversed: !_this.state.orderBookReversed
            });

            _this.setState({
                orderBookReversed: !_this.state.orderBookReversed
            });
        };

        _this._hideFunctionButtons = function () {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                hideFunctionButtons: !_this.state.hideFunctionButtons
            });

            _this.setState({
                hideFunctionButtons: !_this.state.hideFunctionButtons
            });
        };

        _this.state = _extends({}, _this._initialState(props), {
            expirationType: {
                bid: props.exchange.getIn(["lastExpiration", "bid"]) || "YEAR",
                ask: props.exchange.getIn(["lastExpiration", "ask"]) || "YEAR"
            },
            expirationCustomTime: {
                bid: "Specific",
                ask: "Specific"
            },
            feeStatus: {}
        });

        _this._getWindowSize = Object(lodash_es_debounce__WEBPACK_IMPORTED_MODULE_0__["default"])(_this._getWindowSize.bind(_this), 150);
        _this._checkFeeStatus = _this._checkFeeStatus.bind(_this);

        _this._handleExpirationChange = _this._handleExpirationChange.bind(_this);
        _this._handleCustomExpirationChange = _this._handleCustomExpirationChange.bind(_this);

        _this.showPersonalizeModal = _this.showPersonalizeModal.bind(_this);
        _this.hidePersonalizeModal = _this.hidePersonalizeModal.bind(_this);

        _this.showConfirmSellOrderModal = _this.showConfirmSellOrderModal.bind(_this);
        _this.hideConfirmSellOrderModal = _this.hideConfirmSellOrderModal.bind(_this);

        _this.showConfirmBuyOrderModal = _this.showConfirmBuyOrderModal.bind(_this);
        _this.hideConfirmBuyOrderModal = _this.hideConfirmBuyOrderModal.bind(_this);

        _this.showMarketPickerModal = _this.showMarketPickerModal.bind(_this);
        _this.hideMarketPickerModal = _this.hideMarketPickerModal.bind(_this);

        _this.showDepositBridgeModal = _this.showDepositBridgeModal.bind(_this);
        _this.hideDepositBridgeModal = _this.hideDepositBridgeModal.bind(_this);

        _this.showDepositModal = _this.showDepositModal.bind(_this);
        _this.hideDepositModal = _this.hideDepositModal.bind(_this);

        _this.showBorrowQuoteModal = _this.showBorrowQuoteModal.bind(_this);
        _this.hideBorrowQuoteModal = _this.hideBorrowQuoteModal.bind(_this);

        _this.showBorrowBaseModal = _this.showBorrowBaseModal.bind(_this);
        _this.hideBorrowBaseModal = _this.hideBorrowBaseModal.bind(_this);

        _this.showPriceAlertModal = _this.showPriceAlertModal.bind(_this);
        _this.hidePriceAlertModal = _this.hidePriceAlertModal.bind(_this);

        _this.showScaledOrderModal = _this.showScaledOrderModal.bind(_this);
        _this.hideScaledOrderModal = _this.hideScaledOrderModal.bind(_this);

        _this.handlePriceAlertSave = _this.handlePriceAlertSave.bind(_this);
        _this._createScaledOrder = _this._createScaledOrder.bind(_this);

        _this.psInit = true;
        return _this;
    }

    _createClass(Exchange, [{
        key: "handleOrderTypeTabChange",
        value: function handleOrderTypeTabChange(type, value) {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting(_defineProperty({}, "order-form-" + type, value));
        }
    }, {
        key: "handlePriceAlertSave",
        value: function handlePriceAlertSave() {
            var _this2 = this;

            var savedRules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

            // add info about market asset pair
            savedRules = savedRules.map(function (rule) {
                return {
                    type: rule.type,
                    price: rule.price,
                    baseAssetSymbol: _this2.props.baseAsset.get("symbol"),
                    quoteAssetSymbol: _this2.props.quoteAsset.get("symbol")
                };
            });

            // drop old rules for current market pair
            var rules = this.props.priceAlert.filter(function (rule) {
                return rule && _this2.props.baseAsset && _this2.props.quoteAsset && (rule.get("baseAssetSymbol") !== _this2.props.baseAsset.get("symbol") || rule.get("quoteAssetSymbol") !== _this2.props.quoteAsset.get("symbol"));
            });

            // pushing new rules
            rules = [].concat(_toConsumableArray(rules), _toConsumableArray(savedRules));

            // saving rules
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].setPriceAlert(rules);

            this.hidePriceAlertModal();
        }
    }, {
        key: "getPriceAlertRules",
        value: function getPriceAlertRules() {
            var _this3 = this;

            //getting rules based on market pairs

            var rules = this.props.priceAlert.filter(function (rule) {
                return rule && _this3.props.baseAsset && _this3.props.quoteAsset && rule.get("baseAssetSymbol") === _this3.props.baseAsset.get("symbol") && rule.get("quoteAssetSymbol") === _this3.props.quoteAsset.get("symbol");
            });

            return rules.toJS();
        }
    }, {
        key: "_handleExpirationChange",
        value: function _handleExpirationChange(type, e) {
            var expirationType = _extends({}, this.state.expirationType, _defineProperty({}, type, e.target.value));

            if (e.target.value !== "SPECIFIC") {
                actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].setExchangeLastExpiration(_extends({}, this.props.exchange.has("lastExpiration") && this.props.exchange.get("lastExpiration").toJS() || {}, _defineProperty({}, type, e.target.value)));
            }

            this.setState({
                expirationType: expirationType
            });
        }
    }, {
        key: "_handleCustomExpirationChange",
        value: function _handleCustomExpirationChange(type, time) {
            var expirationCustomTime = _extends({}, this.state.expirationCustomTime, _defineProperty({}, type, time));

            this.setState({
                expirationCustomTime: expirationCustomTime
            });
        }
    }, {
        key: "_initialOrderState",
        value: function _initialOrderState(props) {
            var bid = {
                forSaleText: "",
                toReceiveText: "",
                priceText: "",
                for_sale: new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Asset"]({
                    asset_id: props.baseAsset.get("id"),
                    precision: props.baseAsset.get("precision")
                }),
                to_receive: new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Asset"]({
                    asset_id: props.quoteAsset.get("id"),
                    precision: props.quoteAsset.get("precision")
                })
            };
            bid.price = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Price"]({ base: bid.for_sale, quote: bid.to_receive });
            var ask = {
                forSaleText: "",
                toReceiveText: "",
                priceText: "",
                for_sale: new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Asset"]({
                    asset_id: props.quoteAsset.get("id"),
                    precision: props.quoteAsset.get("precision")
                }),
                to_receive: new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Asset"]({
                    asset_id: props.baseAsset.get("id"),
                    precision: props.baseAsset.get("precision")
                })
            };
            ask.price = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Price"]({ base: ask.for_sale, quote: ask.to_receive });

            return { ask: ask, bid: bid };
        }
    }, {
        key: "_initialState",
        value: function _initialState(props) {
            var ws = props.viewSettings;

            var _initialOrderState2 = this._initialOrderState(props),
                ask = _initialOrderState2.ask,
                bid = _initialOrderState2.bid;

            var chart_height = ws.get("chartHeight", 620);
            if (chart_height == 620 && window.innerWidth < 640) {
                // assume user is on default setting, use smaller for mobile
                chart_height = 425;
            }

            return {
                isDepositBridgeModelLoaded: false,
                isDepositModalLoaded: false,
                isPersonalizeModalLoaded: false,
                isMarketPickerModalLoaded: false,
                isBorrowQuoteModalLoaded: false,
                isBorrowBaseModalLoaded: false,
                isDepositBridgeModalVisible: false,
                isDepositModalVisible: false,
                isPersonalizeModalVisible: false,
                isMarketPickerModalVisible: false,
                isBorrowQuoteModalVisible: false,
                isBorrowBaseModalVisible: false,
                history: [],
                isConfirmBuyOrderModalVisible: false,
                isConfirmBuyOrderModalLoaded: false,
                isConfirmSellOrderModalVisible: false,
                isPriceAlertModalVisible: false,
                isScaledOrderModalVisible: false,
                isConfirmSellOrderModalLoaded: false,
                tabVerticalPanel: ws.get("tabVerticalPanel", "my-market"),
                tabBuySell: ws.get("tabBuySell", "buy"),
                buySellOpen: ws.get("buySellOpen", true),
                bid: bid,
                ask: ask,
                height: window.innerHeight,
                width: window.innerWidth,
                favorite: false,
                buyDiff: false,
                sellDiff: false,
                autoScroll: ws.get("global_AutoScroll", true),
                buySellTop: ws.get("buySellTop", true),
                buyFeeAssetIdx: ws.get("buyFeeAssetIdx", 0),
                sellFeeAssetIdx: ws.get("sellFeeAssetIdx", 0),
                verticalOrderBook: ws.get("verticalOrderBook", false),
                verticalOrderForm: ws.get("verticalOrderForm", false),
                hidePanel: ws.get("hidePanel", false),
                hideScrollbars: ws.get("hideScrollbars", false),
                singleColumnOrderForm: ws.get("singleColumnOrderForm", true),
                flipOrderBook: ws.get("flipOrderBook", false),
                flipBuySell: ws.get("flipBuySell", false),
                orderBookReversed: ws.get("orderBookReversed", false),
                chartType: ws.get("chartType", "price_chart"),
                chartHeight: chart_height,
                chartZoom: ws.get("chartZoom", true),
                chartTools: ws.get("chartTools", true),
                hideFunctionButtons: ws.get("hideFunctionButtons", true),
                currentPeriod: ws.get("currentPeriod", 3600 * 24 * 30 * 3), // 3 months
                showMarketPicker: false,
                activePanels: ws.get("activePanels", ["left", "right"]),
                mobileKey: [""],
                forceReRender: 0,
                panelWidth: 0,
                mirrorPanels: ws.get("mirrorPanels", false),
                panelTabs: ws.get("panelTabs", {
                    my_history: 1,
                    history: 1,
                    my_orders: 2,
                    open_settlement: 2
                }),
                panelTabsActive: ws.get("panelTabsActive", {
                    1: "my_history",
                    2: "my_orders"
                })
            };
        }
    }, {
        key: "showMarketPickerModal",
        value: function showMarketPickerModal() {
            this.setState({
                isMarketPickerModalVisible: true,
                isMarketPickerModalLoaded: true
            });
        }
    }, {
        key: "hideMarketPickerModal",
        value: function hideMarketPickerModal() {
            this.setState({
                isMarketPickerModalVisible: false
            });
        }
    }, {
        key: "showPersonalizeModal",
        value: function showPersonalizeModal() {
            this.setState({
                isPersonalizeModalVisible: true,
                isPersonalizeModalLoaded: true
            });
        }
    }, {
        key: "hidePersonalizeModal",
        value: function hidePersonalizeModal() {
            this.setState({
                isPersonalizeModalVisible: false
            });
        }
    }, {
        key: "showPriceAlertModal",
        value: function showPriceAlertModal() {
            this.setState({
                isPriceAlertModalVisible: true
            });
        }
    }, {
        key: "hidePriceAlertModal",
        value: function hidePriceAlertModal() {
            this.setState({
                isPriceAlertModalVisible: false
            });
        }
    }, {
        key: "showScaledOrderModal",
        value: function showScaledOrderModal() {
            this.setState({
                isScaledOrderModalVisible: true
            });
        }
    }, {
        key: "hideScaledOrderModal",
        value: function hideScaledOrderModal() {
            this.setState({
                isScaledOrderModalVisible: false
            });
        }
    }, {
        key: "showBorrowQuoteModal",
        value: function showBorrowQuoteModal() {
            this.setState({
                isBorrowQuoteModalVisible: true,
                isBorrowQuoteModalLoaded: true
            });
        }
    }, {
        key: "hideBorrowQuoteModal",
        value: function hideBorrowQuoteModal() {
            this.setState({
                isBorrowQuoteModalVisible: false
            });
        }
    }, {
        key: "showBorrowBaseModal",
        value: function showBorrowBaseModal() {
            this.setState({
                isBorrowBaseModalVisible: true,
                isBorrowBaseModalLoaded: true
            });
        }
    }, {
        key: "hideBorrowBaseModal",
        value: function hideBorrowBaseModal() {
            this.setState({
                isBorrowBaseModalVisible: false
            });
        }
    }, {
        key: "showDepositBridgeModal",
        value: function showDepositBridgeModal() {
            this.setState({
                isDepositBridgeModalVisible: true,
                isDepositBridgeModalLoaded: true
            });
        }
    }, {
        key: "hideDepositBridgeModal",
        value: function hideDepositBridgeModal() {
            this.setState({
                isDepositBridgeModalVisible: false
            });
        }
    }, {
        key: "showDepositModal",
        value: function showDepositModal() {
            this.setState({
                isDepositModalVisible: true,
                isDepositModalLoaded: true
            });
        }
    }, {
        key: "hideDepositModal",
        value: function hideDepositModal() {
            this.setState({
                isDepositModalVisible: false
            });
        }
    }, {
        key: "_getLastMarketKey",
        value: function _getLastMarketKey() {
            var chainID = bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_1__["Apis"].instance().chain_id;
            return "lastMarket" + (chainID ? "_" + chainID.substr(0, 8) : "");
        }
    }, {
        key: "showConfirmBuyOrderModal",
        value: function showConfirmBuyOrderModal() {
            this.setState({
                isConfirmBuyOrderModalVisible: true,
                isConfirmBuyOrderModalLoaded: true
            });
        }
    }, {
        key: "hideConfirmBuyOrderModal",
        value: function hideConfirmBuyOrderModal() {
            this.setState({
                isConfirmBuyOrderModalVisible: false
            });
        }
    }, {
        key: "showConfirmSellOrderModal",
        value: function showConfirmSellOrderModal() {
            this.setState({
                isConfirmSellOrderModalVisible: true,
                isConfirmSellOrderModalLoaded: true
            });
        }
    }, {
        key: "hideConfirmSellOrderModal",
        value: function hideConfirmSellOrderModal() {
            this.setState({
                isConfirmSellOrderModalVisible: false
            });
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            window.addEventListener("resize", this._setDimensions, {
                capture: false,
                passive: true
            });
            // updateGatewayBackers();
            this._checkFeeStatus();
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].getTrackedGroupsConfig();

            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting.defer(_defineProperty({}, this._getLastMarketKey(), this.props.quoteAsset.get("symbol") + "_" + this.props.baseAsset.get("symbol")));

            window.addEventListener("resize", this._getWindowSize, {
                capture: false,
                passive: true
            });
        }

        /*
         * Force re-rendering component when state changes.
         * This is required for an updated value of component width
         *
         * It will trigger a re-render twice
         * - Once when state is changed
         * - Once when forceReRender is set to false
         */

    }, {
        key: "_forceRender",
        value: function _forceRender(np, ns) {
            if (this.state.forceReRender) {
                this.setState({
                    forceReRender: false
                });
            }

            if (!common_utils__WEBPACK_IMPORTED_MODULE_17__["default"].are_equal_shallow(this.state.activePanels, ns.activePanels) || !common_utils__WEBPACK_IMPORTED_MODULE_17__["default"].are_equal_shallow(this.state.verticalOrderBook, ns.verticalOrderBook) || np.quoteAsset !== this.props.quoteAsset || np.baseAsset !== this.props.baseAsset) {
                this.setState({
                    forceReRender: true
                });
            }
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, ns) {
            var expirationType = this.state.expirationType;


            this._forceRender(np, ns);

            if (!np.marketReady && !this.props.marketReady) {
                return false;
            }
            var propsChanged = false;
            var stateChanged = false;

            if (np.quoteAsset !== this.props.quoteAsset || np.baseAsset !== this.props.baseAsset) {
                this.setState({
                    expirationType: {
                        bid: expirationType["bid"] == "SPECIFIC" ? expirationType["bid"] : "YEAR",
                        ask: expirationType["ask"] == "SPECIFIC" ? expirationType["ask"] : "YEAR"
                    }
                });
            }

            for (var key in np) {
                if (np.hasOwnProperty(key)) {
                    propsChanged = propsChanged || !common_utils__WEBPACK_IMPORTED_MODULE_17__["default"].are_equal_shallow(np[key], this.props[key]);
                    if (propsChanged) break;
                }
            }
            for (var _key in ns.panelTabsActive) {
                stateChanged = !common_utils__WEBPACK_IMPORTED_MODULE_17__["default"].are_equal_shallow(ns.panelTabsActive[_key], this.state.panelTabsActive[_key]);
            }
            return propsChanged || stateChanged || !common_utils__WEBPACK_IMPORTED_MODULE_17__["default"].are_equal_shallow(ns, this.state);
        }
    }, {
        key: "_checkFeeStatus",
        value: function _checkFeeStatus() {
            var _this4 = this;

            var assets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [this.props.coreAsset, this.props.baseAsset, this.props.quoteAsset];
            var account = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.props.currentAccount;

            var feeStatus = {};
            var p = [];
            assets.forEach(function (a) {
                p.push(Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_16__["checkFeeStatusAsync"])({
                    accountID: account.get("id"),
                    feeID: a.get("id"),
                    type: "limit_order_create"
                }));
            });
            Promise.all(p).then(function (status) {
                assets.forEach(function (a, idx) {
                    feeStatus[a.get("id")] = status[idx];
                });
                if (!common_utils__WEBPACK_IMPORTED_MODULE_17__["default"].are_equal_shallow(_this4.state.feeStatus, feeStatus)) {
                    _this4.setState({
                        feeStatus: feeStatus
                    });
                }
            }).catch(function (err) {
                console.error("checkFeeStatusAsync error", err);
                _this4.setState({ feeStatus: {} });
            });
        }
    }, {
        key: "_getWindowSize",
        value: function _getWindowSize() {
            var _window = window,
                innerHeight = _window.innerHeight,
                innerWidth = _window.innerWidth;

            if (innerHeight !== this.state.height || innerWidth !== this.state.width) {
                this.setState({
                    height: innerHeight,
                    width: innerWidth
                });
                var centerContainer = this.refs.center;
                if (centerContainer) {
                    perfect_scrollbar__WEBPACK_IMPORTED_MODULE_8___default.a.update(centerContainer);
                }
            }
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate(prevProps, prevState) {
            this._initPsContainer();
            if (!this.props.exchange.get("tutorialShown") && prevProps.coreAsset && prevState.feeStatus) {
                if (!this.tutorialShown) {
                    this.tutorialShown = true;
                    var theme = this.props.settings.get("themes");

                    intro_js__WEBPACK_IMPORTED_MODULE_6___default.a.introJs().setOptions({
                        tooltipClass: theme,
                        highlightClass: theme,
                        showBullets: false,
                        hideNext: true,
                        hidePrev: true,
                        nextLabel: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("walkthrough.next_label"),
                        prevLabel: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("walkthrough.prev_label"),
                        skipLabel: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("walkthrough.skip_label"),
                        doneLabel: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("walkthrough.done_label")
                    }).start();

                    actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].setExchangeTutorialShown.defer(true);
                }
            }
        }
    }, {
        key: "_initPsContainer",
        value: function _initPsContainer() {
            if (this.refs.center && this.psInit) {
                var centerContainer = this.refs.center;
                if (centerContainer) {
                    perfect_scrollbar__WEBPACK_IMPORTED_MODULE_8___default.a.initialize(centerContainer);
                    this.psInit = false;
                }
            }
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            this._initPsContainer();
            if (nextProps.quoteAsset !== this.props.quoteAsset || nextProps.baseAsset !== this.props.baseAsset || nextProps.currentAccount !== this.props.currentAccount) {
                this._checkFeeStatus([nextProps.coreAsset, nextProps.baseAsset, nextProps.quoteAsset], nextProps.currentAccount);
            }
            if (nextProps.quoteAsset.get("symbol") !== this.props.quoteAsset.get("symbol") || nextProps.baseAsset.get("symbol") !== this.props.baseAsset.get("symbol")) {
                this.setState(this._initialState(nextProps));

                return actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting(_defineProperty({}, this._getLastMarketKey(), nextProps.quoteAsset.get("symbol") + "_" + nextProps.baseAsset.get("symbol")));
            }

            // if (this.props.sub && nextProps.bucketSize !== this.props.bucketSize) {
            //     return this._changeBucketSize(nextProps.bucketSize);
            // }
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            window.removeEventListener("resize", this._getWindowSize);
        }
    }, {
        key: "_getFeeAssets",
        value: function _getFeeAssets(quote, base, coreAsset) {
            var _this5 = this;

            var currentAccount = this.props.currentAccount;
            var feeStatus = this.state.feeStatus;


            function addMissingAsset(target, asset) {
                if (target.indexOf(asset) === -1) {
                    target.push(asset);
                }
            }

            function hasFeePoolBalance(id) {
                return feeStatus[id] && feeStatus[id].hasPoolBalance;
            }

            function hasBalance(id) {
                return feeStatus[id] && feeStatus[id].hasBalance;
            }

            var sellAssets = [coreAsset, quote === coreAsset ? base : quote];
            addMissingAsset(sellAssets, quote);
            addMissingAsset(sellAssets, base);
            // let sellFeeAsset;

            var buyAssets = [coreAsset, base === coreAsset ? quote : base];
            addMissingAsset(buyAssets, quote);
            addMissingAsset(buyAssets, base);
            // let buyFeeAsset;

            var balances = {};

            currentAccount.get("balances", []).filter(function (balance, id) {
                return ["1.3.0", quote.get("id"), base.get("id")].indexOf(id) >= 0;
            }).forEach(function (balance, id) {
                var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getObject(balance);
                balances[id] = {
                    balance: balanceObject ? parseInt(balanceObject.get("balance"), 10) : 0,
                    fee: _this5._getFee(bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getAsset(id))
                };
            });

            function filterAndDefault(assets, balances, idx) {
                var asset = void 0;
                /* Only keep assets for which the user has a balance larger than the fee, and for which the fee pool is valid */
                assets = assets.filter(function (a) {
                    if (!balances[a.get("id")]) {
                        return false;
                    }
                    return hasFeePoolBalance(a.get("id")) && hasBalance(a.get("id"));
                });

                /* If the user has no valid balances, default to core fee */
                if (!assets.length) {
                    asset = coreAsset;
                    assets.push(coreAsset);
                    /* If the user has balances, use the stored idx value unless that asset is no longer available*/
                } else {
                    asset = assets[Math.min(assets.length - 1, idx)];
                }

                return { assets: assets, asset: asset };
            }

            var _filterAndDefault = filterAndDefault(sellAssets, balances, this.state.sellFeeAssetIdx),
                sellFeeAssets = _filterAndDefault.assets,
                sellFeeAsset = _filterAndDefault.asset;

            var _filterAndDefault2 = filterAndDefault(buyAssets, balances, this.state.buyFeeAssetIdx),
                buyFeeAssets = _filterAndDefault2.assets,
                buyFeeAsset = _filterAndDefault2.asset;

            var sellFee = this._getFee(sellFeeAsset);
            var buyFee = this._getFee(buyFeeAsset);

            return {
                sellFeeAsset: sellFeeAsset,
                sellFeeAssets: sellFeeAssets,
                sellFee: sellFee,
                buyFeeAsset: buyFeeAsset,
                buyFeeAssets: buyFeeAssets,
                buyFee: buyFee
            };
        }
    }, {
        key: "_getFee",
        value: function _getFee() {
            var asset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props.coreAsset;

            return this.state.feeStatus[asset.get("id")] && this.state.feeStatus[asset.get("id")].fee;
        }
    }, {
        key: "_verifyFee",
        value: function _verifyFee(fee, sell, sellBalance, coreBalance) {
            var coreFee = this._getFee();

            if (fee.asset_id === "1.3.0") {
                if (coreFee.getAmount() <= coreBalance) {
                    return "1.3.0";
                } else {
                    return null;
                }
            } else {
                var sellSum = sell.asset_id === fee.asset_id ? fee.getAmount() + sell.getAmount() : sell.getAmount();
                if (sellSum <= sellBalance) {
                    // Sufficient balance in asset to pay fee
                    return fee.asset_id;
                } else if (coreFee.getAmount() <= coreBalance && fee.asset_id !== "1.3.0") {
                    // Sufficient balance in core asset to pay fee
                    return "1.3.0";
                } else {
                    return null; // Unable to pay fee
                }
            }
        }
    }, {
        key: "_createLimitOrderConfirm",
        value: function _createLimitOrderConfirm(buyAsset, sellAsset, sellBalance, coreBalance, feeAsset, type) {
            var short = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;
            var e = arguments[7];

            e.preventDefault();
            var _props$marketData = this.props.marketData,
                highestBid = _props$marketData.highestBid,
                lowestAsk = _props$marketData.lowestAsk;

            var current = this.state[type === "sell" ? "ask" : "bid"];

            sellBalance = current.for_sale.clone(sellBalance ? parseInt(bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getObject(sellBalance).toJS().balance, 10) : 0);
            coreBalance = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Asset"]({
                amount: coreBalance ? parseInt(bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getObject(coreBalance).toJS().balance, 10) : 0
            });

            var fee = this._getFee(feeAsset);
            var feeID = this._verifyFee(fee, current.for_sale, sellBalance.getAmount(), coreBalance.getAmount());
            if (!feeID) {
                return bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Notification"].error({
                    message: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("notifications.exchange_insufficient_funds_for_fees")
                });
            }

            if (type === "buy" && lowestAsk) {
                var diff = this.state.bid.price.toReal() / lowestAsk.getPrice();
                if (diff > 1.2) {
                    this.showConfirmBuyOrderModal();
                    return this.setState({
                        buyDiff: diff
                    });
                }
            } else if (type === "sell" && highestBid) {
                var _diff = 1 / (this.state.ask.price.toReal() / highestBid.getPrice());
                if (_diff > 1.2) {
                    this.showConfirmSellOrderModal();
                    return this.setState({
                        sellDiff: _diff
                    });
                }
            }

            var isPredictionMarket = sellAsset.getIn(["bitasset", "is_prediction_market"]);

            if (current.for_sale.gt(sellBalance) && !isPredictionMarket) {
                return bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Notification"].error({
                    message: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("notifications.exchange_insufficient_funds_to_place_order", {
                        amount: current.for_sale.getAmount({ real: true }),
                        symbol: sellAsset.get("symbol")
                    })
                });
            }
            //
            if (!(current.for_sale.getAmount() > 0 && current.to_receive.getAmount() > 0)) {
                return bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Notification"].warning({
                    message: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("notifications.exchange_enter_valid_values")
                });
            }
            //
            if (type === "sell" && isPredictionMarket && short) {
                return this._createPredictionShort(feeID);
            }

            this._createLimitOrder(type, feeID);
        }
    }, {
        key: "_createScaledOrder",
        value: function _createScaledOrder(orders, feeID) {
            var _this6 = this;

            var limitOrders = orders.map(function (order) {
                return new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["LimitOrderCreate"]({
                    for_sale: order.for_sale,
                    expiration: new Date(order.expirationTime || false),
                    to_receive: order.to_receive,
                    seller: _this6.props.currentAccount.get("id"),
                    fee: {
                        asset_id: feeID,
                        amount: 0
                    }
                });
            });

            return actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].createLimitOrder2(limitOrders).then(function (result) {
                if (result.error) {
                    if (result.error.message !== "wallet locked") bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Notification"].error({
                        message: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("notifications.exchange_unknown_error_place_scaled_order")
                    });
                }
                console.log("order success");
            }).catch(function (e) {
                console.log("order failed:", e);
            });
        }
    }, {
        key: "_createLimitOrder",
        value: function _createLimitOrder(type, feeID) {
            var actionType = type === "sell" ? "ask" : "bid";

            var current = this.state[actionType];

            var expirationTime = null;
            if (this.state.expirationType[actionType] === "SPECIFIC") {
                expirationTime = this.EXPIRATIONS[this.state.expirationType[actionType]].get(actionType);
            } else {
                expirationTime = this.EXPIRATIONS[this.state.expirationType[actionType]].get();
            }

            var order = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["LimitOrderCreate"]({
                for_sale: current.for_sale,
                expiration: new Date(expirationTime || false),
                to_receive: current.to_receive,
                seller: this.props.currentAccount.get("id"),
                fee: {
                    asset_id: feeID,
                    amount: 0
                }
            });

            var _market_utils$getMark = common_market_utils__WEBPACK_IMPORTED_MODULE_14__["default"].getMarketName(this.props.baseAsset, this.props.quoteAsset),
                marketName = _market_utils$getMark.marketName,
                first = _market_utils$getMark.first;

            var inverted = this.props.marketDirections.get(marketName);
            var shouldFlip = inverted && first.get("id") !== this.props.baseAsset.get("id") || !inverted && first.get("id") !== this.props.baseAsset.get("id");
            if (shouldFlip) {
                var setting = {};
                setting[marketName] = !inverted;
                actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeMarketDirection(setting);
            }
            if (false) {}

            return actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].createLimitOrder2(order).then(function (result) {
                if (result.error) {
                    if (result.error.message !== "wallet locked") bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Notification"].error({
                        message: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("notifications.exchange_unknown_error_place_order", {
                            amount: current.to_receive.getAmount({
                                real: true
                            }),
                            symbol: current.to_receive.asset_id
                        })
                    });
                }
            }).catch(function (e) {
                console.error("order failed:", e);
            });
        }

        /***
         * Clear forms
         * @string: type
         */

    }, {
        key: "_clearForms",
        value: function _clearForms(type) {
            var _initialOrderState3 = this._initialOrderState(this.props),
                ask = _initialOrderState3.ask,
                bid = _initialOrderState3.bid;

            if (!type) {
                this.setState({
                    bid: bid,
                    ask: ask
                });
            } else if (type == "ask") {
                this.setState({ ask: ask });
            } else if (type == "bid") {
                this.setState({ bid: bid });
            }
        }
    }, {
        key: "_createPredictionShort",
        value: function _createPredictionShort(feeID) {
            var current = this.state.ask;
            var order = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["LimitOrderCreate"]({
                for_sale: current.for_sale,
                to_receive: current.to_receive,
                seller: this.props.currentAccount.get("id"),
                fee: {
                    asset_id: feeID,
                    amount: 0
                }
            });

            Promise.all([Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["FetchChain"])("getAsset", this.props.quoteAsset.getIn(["bitasset", "options", "short_backing_asset"]))]).then(function (assets) {
                var _assets = _slicedToArray(assets, 1),
                    backingAsset = _assets[0];

                var collateral = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Asset"]({
                    amount: order.amount_for_sale.getAmount(),
                    asset_id: backingAsset.get("id"),
                    precision: backingAsset.get("precision")
                });

                actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].createPredictionShort(order, collateral).then(function (result) {
                    if (result.error) {
                        if (result.error.message !== "wallet locked") bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Notification"].error({
                            message: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("notifications.exchange_unknown_error_place_order", {
                                amount: buyAssetAmount,
                                symbol: buyAsset.symbol
                            })
                        });
                    }
                });
            });
        }
    }, {
        key: "_forceBuy",
        value: function _forceBuy(type, feeAsset, sellBalance, coreBalance) {
            var current = this.state[type === "sell" ? "ask" : "bid"];
            // Convert fee to relevant asset fee and check if user has sufficient balance
            sellBalance = current.for_sale.clone(sellBalance ? parseInt(bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getObject(sellBalance).get("balance"), 10) : 0);
            coreBalance = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Asset"]({
                amount: coreBalance ? parseInt(bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getObject(coreBalance).toJS().balance, 10) : 0
            });
            var fee = this._getFee(feeAsset);
            var feeID = this._verifyFee(fee, current.for_sale, sellBalance.getAmount(), coreBalance.getAmount());

            if (feeID) {
                this._createLimitOrder(type, feeID);
            } else {
                console.error("Unable to pay fees, aborting limit order creation");
            }
        }
    }, {
        key: "_forceSell",
        value: function _forceSell(type, feeAsset, sellBalance, coreBalance) {
            var current = this.state[type === "sell" ? "ask" : "bid"];
            // Convert fee to relevant asset fee and check if user has sufficient balance
            sellBalance = current.for_sale.clone(sellBalance ? parseInt(bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getObject(sellBalance).get("balance"), 10) : 0);
            coreBalance = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Asset"]({
                amount: coreBalance ? parseInt(bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getObject(coreBalance).toJS().balance, 10) : 0
            });
            var fee = this._getFee(feeAsset);
            var feeID = this._verifyFee(fee, current.for_sale, sellBalance.getAmount(), coreBalance.getAmount());

            if (feeID) {
                this._createLimitOrder(type, feeID);
            } else {
                console.error("Unable to pay fees, aborting limit order creation");
            }
        }
    }, {
        key: "_cancelLimitOrder",
        value: function _cancelLimitOrder(orderID, e) {
            e.preventDefault();
            var currentAccount = this.props.currentAccount;

            actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].cancelLimitOrder(currentAccount.get("id"), orderID // order id to cancel
            );
        }
    }, {
        key: "_changeZoomPeriod",
        value: function _changeZoomPeriod(size, e) {
            e.preventDefault();
            if (size !== this.state.currentPeriod) {
                this.setState({
                    currentPeriod: size
                });
                actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                    currentPeriod: size
                });
            }
        }
    }, {
        key: "_onGroupOrderLimitChange",
        value: function _onGroupOrderLimitChange(e) {
            var _this7 = this;

            var groupLimit = void 0;

            if ((typeof e === "undefined" ? "undefined" : _typeof(e)) == "object") {
                e.preventDefault();
                groupLimit = parseInt(e.target.value);
            }

            if (typeof e == "number") groupLimit = parseInt(e);

            actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].changeCurrentGroupLimit(groupLimit);

            if (groupLimit !== this.props.currentGroupOrderLimit) {
                actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].changeCurrentGroupLimit(groupLimit);
                var currentSub = this.props.sub.split("_");
                actions_MarketsActions__WEBPACK_IMPORTED_MODULE_12__["default"].unSubscribeMarket(currentSub[0], currentSub[1]).then(function () {
                    _this7.props.subToMarket(_this7.props, _this7.props.bucketSize, groupLimit);
                });
            }
        }
    }, {
        key: "_depthChartClick",
        value: function _depthChartClick(base, quote, e) {
            e.preventDefault();
            var _state = this.state,
                bid = _state.bid,
                ask = _state.ask;


            bid.price = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Price"]({
                base: this.state.bid.for_sale,
                quote: this.state.bid.to_receive,
                real: e.xAxis[0].value
            });
            bid.priceText = bid.price.toReal();

            ask.price = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Price"]({
                base: this.state.ask.to_receive,
                quote: this.state.ask.for_sale,
                real: e.xAxis[0].value
            });
            ask.priceText = ask.price.toReal();
            var newState = {
                bid: bid,
                ask: ask,
                depthLine: bid.price.toReal()
            };

            this._setForSale(bid, true) || this._setReceive(bid, true);
            this._setReceive(ask) || this._setForSale(ask);

            this._setPriceText(bid, true);
            this._setPriceText(ask, false);
            // if (bid.for_sale.)
            this.setState(newState);
        }
    }, {
        key: "_setAutoscroll",
        value: function _setAutoscroll(value) {
            this.setState({
                autoScroll: value
            });
        }

        /**
         *
         * @param {string} panel - Panel to toggle
         */

    }, {
        key: "_togglePanel",
        value: function _togglePanel(panel) {
            if (!panel) return;

            var newState = [];

            this.state.activePanels.forEach(function (a) {
                if (a !== panel) {
                    newState.push(a);
                }
            });

            if (!this.state.activePanels.includes(panel)) {
                newState.push(panel);
            }

            this.setState({
                activePanels: newState
            });

            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                activePanels: newState
            });
        }
    }, {
        key: "_toggleChart",
        value: function _toggleChart(value) {
            this.setState({
                chartType: value
            });

            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                chartType: value
            });
        }
    }, {
        key: "_flipBuySell",
        value: function _flipBuySell() {
            this.setState({
                flipBuySell: !this.state.flipBuySell
            });

            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                flipBuySell: !this.state.flipBuySell
            });
        }

        /***
         * Toggle Buy/Sell order UX
         * Horizontal order book only
         */


        /***
         * Toggle order book to switch place of buy and sell orders
         * Vertical order book only
         */

    }, {
        key: "_toggleOpenBuySell",
        value: function _toggleOpenBuySell() {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                buySellOpen: !this.state.buySellOpen
            });

            this.setState({ buySellOpen: !this.state.buySellOpen });
        }
    }, {
        key: "_toggleMarketPicker",
        value: function _toggleMarketPicker(asset) {
            var showMarketPicker = !!asset ? true : false;

            if (showMarketPicker) {
                this.showMarketPickerModal();
            }

            this.setState({
                showMarketPicker: showMarketPicker,
                marketPickerAsset: asset
            });
        }
    }, {
        key: "_moveOrderBook",
        value: function _moveOrderBook() {
            // Unpin OrderForm
            if (this.state.verticalOrderForm) {
                this._moveOrderForm();
            }

            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                verticalOrderBook: !this.state.verticalOrderBook
            });

            this.setState({ verticalOrderBook: !this.state.verticalOrderBook });
        }
    }, {
        key: "_moveOrderForm",
        value: function _moveOrderForm() {
            // Unpin OrderBook
            if (this.state.verticalOrderBook) {
                this._moveOrderBook();
            }

            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                verticalOrderForm: !this.state.verticalOrderForm
            });

            this.setState({ verticalOrderForm: !this.state.verticalOrderForm });
        }
    }, {
        key: "_togglePersonalize",
        value: function _togglePersonalize() {
            if (!this.state.isPersonalizeModalVisible) {
                this.setState({
                    isPersonalizeModalVisible: !this.state.isPersonalizeModalVisible,
                    isPersonalizeModalLoaded: true
                });
            } else {
                this.setState({
                    isPersonalizeModalVisible: !this.state.isPersonalizeModalVisible
                });
            }
        }
    }, {
        key: "_toggleScrollbars",
        value: function _toggleScrollbars() {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                hideScrollbars: !this.state.hideScrollbars
            });

            this.setState({
                hideScrollbars: !this.state.hideScrollbars
            });
        }
    }, {
        key: "_toggleSingleColumnOrderForm",
        value: function _toggleSingleColumnOrderForm() {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                singleColumnOrderForm: !this.state.singleColumnOrderForm
            });

            this.setState({
                singleColumnOrderForm: !this.state.singleColumnOrderForm
            });
        }
    }, {
        key: "_mirrorPanels",
        value: function _mirrorPanels() {
            this.setState({
                mirrorPanels: !this.state.mirrorPanels
            });

            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                mirrorPanels: !this.state.mirrorPanels
            });
        }
    }, {
        key: "_currentPriceClick",
        value: function _currentPriceClick(type, price) {
            var isBid = type === "bid";
            var current = this.state[type];
            current.price = price[isBid ? "invert" : "clone"]();
            current.priceText = current.price.toReal();
            if (isBid) {
                this._setForSale(current, isBid) || this._setReceive(current, isBid);
            } else {
                this._setReceive(current, isBid) || this._setForSale(current, isBid);
            }
            this.forceUpdate();
        }
    }, {
        key: "_orderbookClick",
        value: function _orderbookClick(order) {
            var isBid = order.isBid();
            /*
             * Because we are using a bid order to construct an ask and vice versa,
             * totalToReceive becomes forSale, and totalForSale becomes toReceive
             */
            var forSale = order.totalToReceive({ noCache: true });
            // let toReceive = order.totalForSale({noCache: true});
            var toReceive = forSale.times(order.sellPrice());

            var newPrice = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Price"]({
                base: isBid ? toReceive : forSale,
                quote: isBid ? forSale : toReceive
            });

            var current = this.state[isBid ? "bid" : "ask"];
            current.price = newPrice;
            current.priceText = newPrice.toReal();

            var newState = _defineProperty({}, isBid ? "ask" : "bid", {
                for_sale: forSale,
                forSaleText: forSale.getAmount({ real: true }),
                to_receive: toReceive,
                toReceiveText: toReceive.getAmount({ real: true }),
                price: newPrice,
                priceText: newPrice.toReal()
            });

            if (isBid) {
                this._setForSale(current, isBid) || this._setReceive(current, isBid);
            } else {
                this._setReceive(current, isBid) || this._setForSale(current, isBid);
            }
            this.setState(newState);
        }
    }, {
        key: "_borrowQuote",
        value: function _borrowQuote() {
            this.showBorrowQuoteModal();
        }
    }, {
        key: "_borrowBase",
        value: function _borrowBase() {
            this.showBorrowBaseModal();
        }
    }, {
        key: "_onDeposit",
        value: function _onDeposit(type) {
            this.setState({
                depositModalType: type
            });

            this.showDepositModal();
        }
    }, {
        key: "_onBuy",
        value: function _onBuy(type) {
            this.setState({
                buyModalType: type
            });

            this.showDepositBridgeModal();
        }
    }, {
        key: "_getSettlementInfo",
        value: function _getSettlementInfo() {
            var _props = this.props,
                lowestCallPrice = _props.lowestCallPrice,
                feedPrice = _props.feedPrice,
                quoteAsset = _props.quoteAsset;


            var showCallLimit = false;
            if (feedPrice) {
                if (feedPrice.inverted) {
                    showCallLimit = lowestCallPrice <= feedPrice.toReal();
                } else {
                    showCallLimit = lowestCallPrice >= feedPrice.toReal();
                }
            }
            return !!(showCallLimit && lowestCallPrice && !quoteAsset.getIn(["bitasset", "is_prediction_market"]));
        }
    }, {
        key: "_setTabVerticalPanel",
        value: function _setTabVerticalPanel(tab) {
            this.setState({
                tabVerticalPanel: tab
            });
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                tabVerticalPanel: tab
            });
        }
    }, {
        key: "_setTabBuySell",
        value: function _setTabBuySell(tab) {
            this.setState({
                tabBuySell: tab
            });
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                tabBuySell: tab
            });
        }
    }, {
        key: "_setPanelTabInGroup",
        value: function _setPanelTabInGroup(group, activetab) {
            var panelTabsActive = this.state.panelTabsActive;


            Object.keys(panelTabsActive).map(function (a) {
                if (a == group) {
                    panelTabsActive[a] = activetab;
                }
            });

            this.setState({
                panelTabsActive: panelTabsActive,
                forceReRender: true // Requires to forcefully re-render for tab to stick
            });

            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                panelTabsActive: panelTabsActive
            });
        }
    }, {
        key: "_setPanelTabs",
        value: function _setPanelTabs(panelName, newTabsId) {
            var _state2 = this.state,
                panelTabs = _state2.panelTabs,
                panelTabsActive = _state2.panelTabsActive;


            var newState = {
                panelTabs: panelTabs,
                panelTabsActive: panelTabsActive
            };

            // Set new Tabs ID for Panel
            Object.keys(panelTabs).map(function (thisPanelName) {
                newState.panelTabs[thisPanelName] = thisPanelName == panelName ? newTabsId : panelTabs[thisPanelName];
            });

            // Reset all Active Panel Tabs
            Object.keys(panelTabsActive).map(function (thisTabId) {
                newState.panelTabsActive[thisTabId] = "";
            });

            this.setState({
                newState: newState
            });

            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting(_extends({}, newState));
        }
    }, {
        key: "onChangeFeeAsset",
        value: function onChangeFeeAsset(type, value) {
            if (type === "buy") {
                this.setState({
                    buyFeeAssetIdx: value
                });

                actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                    buyFeeAssetIdx: value
                });
            } else {
                this.setState({
                    sellFeeAssetIdx: value
                });

                actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                    sellFeeAssetIdx: value
                });
            }
        }
    }, {
        key: "onChangeChartHeight",
        value: function onChangeChartHeight(_ref) {
            var value = _ref.value,
                increase = _ref.increase;

            var newHeight = value ? value : this.state.chartHeight + (increase ? 20 : -20);
            if (newHeight < 425) {
                newHeight = 425;
            }
            if (newHeight > 1000) {
                newHeight = 1000;
            }

            this.setState({
                chartHeight: newHeight
            });

            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                chartHeight: newHeight
            });
        }
    }, {
        key: "_toggleBuySellPosition",
        value: function _toggleBuySellPosition() {
            this.setState({
                buySellTop: !this.state.buySellTop
            });

            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                buySellTop: !this.state.buySellTop
            });
        }
    }, {
        key: "_setReceive",
        value: function _setReceive(state, isBid) {
            if (state.price.isValid() && state.for_sale.hasAmount()) {
                state.to_receive = state.for_sale.times(state.price);
                state.toReceiveText = state.to_receive.getAmount({ real: true }).toString();
                return true;
            }
            return false;
        }
    }, {
        key: "_setForSale",
        value: function _setForSale(state, isBid) {
            if (state.price.isValid() && state.to_receive.hasAmount()) {
                state.for_sale = state.to_receive.times(state.price, true);
                state.forSaleText = state.for_sale.getAmount({ real: true }).toString();
                return true;
            }
            return false;
        }
    }, {
        key: "_setPrice",
        value: function _setPrice(state) {
            if (state.for_sale.hasAmount() && state.to_receive.hasAmount()) {
                state.price = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Price"]({
                    base: state.for_sale,
                    quote: state.to_receive
                });
                state.priceText = state.price.toReal().toString();
                return true;
            }
            return false;
        }
    }, {
        key: "_setPriceText",
        value: function _setPriceText(state, isBid) {
            var currentBase = state[isBid ? "for_sale" : "to_receive"];
            var currentQuote = state[isBid ? "to_receive" : "for_sale"];
            if (currentBase.hasAmount() && currentQuote.hasAmount()) {
                state.priceText = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Price"]({
                    base: currentBase,
                    quote: currentQuote
                }).toReal().toString();
            }
        }
    }, {
        key: "_onInputPrice",
        value: function _onInputPrice(type, e) {
            var current = this.state[type];
            var isBid = type === "bid";
            current.price = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_15__["Price"]({
                base: current[isBid ? "for_sale" : "to_receive"],
                quote: current[isBid ? "to_receive" : "for_sale"],
                real: parseFloat(e.target.value) || 0
            });

            if (isBid) {
                this._setForSale(current, isBid) || this._setReceive(current, isBid);
            } else {
                this._setReceive(current, isBid) || this._setForSale(current, isBid);
            }

            current.priceText = e.target.value;
            this.forceUpdate();
        }
    }, {
        key: "_onInputSell",
        value: function _onInputSell(type, isBid, e) {
            var current = this.state[type];
            // const isBid = type === "bid";
            current.for_sale.setAmount({ real: parseFloat(e.target.value) || 0 });
            if (current.price.isValid()) {
                this._setReceive(current, isBid);
            } else {
                this._setPrice(current);
            }

            current.forSaleText = e.target.value;
            this._setPriceText(current, type === "bid");

            this.forceUpdate();
        }
    }, {
        key: "_onInputReceive",
        value: function _onInputReceive(type, isBid, e) {
            var current = this.state[type];
            // const isBid = type === "bid";
            current.to_receive.setAmount({ real: parseFloat(e.target.value) || 0 });

            if (current.price.isValid()) {
                this._setForSale(current, isBid);
            } else {
                this._setPrice(current);
            }

            current.toReceiveText = e.target.value;
            this._setPriceText(current, type === "bid");
            this.forceUpdate();
        }
    }, {
        key: "isMarketFrozen",
        value: function isMarketFrozen() {
            var _props2 = this.props,
                baseAsset = _props2.baseAsset,
                quoteAsset = _props2.quoteAsset;


            var baseWhiteList = baseAsset.getIn(["options", "whitelist_markets"]).toJS();
            var quoteWhiteList = quoteAsset.getIn(["options", "whitelist_markets"]).toJS();
            var baseBlackList = baseAsset.getIn(["options", "blacklist_markets"]).toJS();
            var quoteBlackList = quoteAsset.getIn(["options", "blacklist_markets"]).toJS();

            if (quoteWhiteList.length && quoteWhiteList.indexOf(baseAsset.get("id")) === -1) {
                return { isFrozen: true, frozenAsset: quoteAsset.get("symbol") };
            }
            if (baseWhiteList.length && baseWhiteList.indexOf(quoteAsset.get("id")) === -1) {
                return { isFrozen: true, frozenAsset: baseAsset.get("symbol") };
            }

            if (quoteBlackList.length && quoteBlackList.indexOf(baseAsset.get("id")) !== -1) {
                return { isFrozen: true, frozenAsset: quoteAsset.get("symbol") };
            }
            if (baseBlackList.length && baseBlackList.indexOf(quoteAsset.get("id")) !== -1) {
                return { isFrozen: true, frozenAsset: baseAsset.get("symbol") };
            }

            return { isFrozen: false };
        }
    }, {
        key: "_toggleChat",
        value: function _toggleChat() {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                viewChat: !this.props.viewChat
            });
        }
    }, {
        key: "_toggleMiniChart",
        value: function _toggleMiniChart() {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_11__["default"].changeViewSetting({
                miniDepthChart: !this.props.miniDepthChart
            });
        }
    }, {
        key: "_onChangeMobilePanel",
        value: function _onChangeMobilePanel(val) {
            this.setState({
                mobileKey: val
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this8 = this;

            var _props3 = this.props,
                currentAccount = _props3.currentAccount,
                marketLimitOrders = _props3.marketLimitOrders,
                marketCallOrders = _props3.marketCallOrders,
                marketData = _props3.marketData,
                activeMarketHistory = _props3.activeMarketHistory,
                invertedCalls = _props3.invertedCalls,
                starredMarkets = _props3.starredMarkets,
                quoteAsset = _props3.quoteAsset,
                baseAsset = _props3.baseAsset,
                lowestCallPrice = _props3.lowestCallPrice,
                marketStats = _props3.marketStats,
                marketReady = _props3.marketReady,
                marketSettleOrders = _props3.marketSettleOrders,
                bucketSize = _props3.bucketSize,
                totals = _props3.totals,
                feedPrice = _props3.feedPrice,
                buckets = _props3.buckets,
                coreAsset = _props3.coreAsset,
                trackedGroupsConfig = _props3.trackedGroupsConfig,
                currentGroupOrderLimit = _props3.currentGroupOrderLimit;
            var combinedBids = marketData.combinedBids,
                combinedAsks = marketData.combinedAsks,
                lowestAsk = marketData.lowestAsk,
                highestBid = marketData.highestBid,
                flatBids = marketData.flatBids,
                flatAsks = marketData.flatAsks,
                flatCalls = marketData.flatCalls,
                flatSettles = marketData.flatSettles,
                groupedBids = marketData.groupedBids,
                groupedAsks = marketData.groupedAsks;
            var _state3 = this.state,
                bid = _state3.bid,
                ask = _state3.ask,
                verticalOrderBook = _state3.verticalOrderBook,
                verticalOrderForm = _state3.verticalOrderForm,
                chartHeight = _state3.chartHeight,
                chartType = _state3.chartType,
                flipBuySell = _state3.flipBuySell,
                buyDiff = _state3.buyDiff,
                sellDiff = _state3.sellDiff,
                width = _state3.width,
                buySellTop = _state3.buySellTop,
                tabBuySell = _state3.tabBuySell,
                tabVerticalPanel = _state3.tabVerticalPanel,
                hidePanel = _state3.hidePanel,
                hideScrollbars = _state3.hideScrollbars,
                buyModalType = _state3.buyModalType,
                depositModalType = _state3.depositModalType,
                autoScroll = _state3.autoScroll,
                activePanels = _state3.activePanels,
                panelWidth = _state3.panelWidth,
                mirrorPanels = _state3.mirrorPanels,
                panelTabsActive = _state3.panelTabsActive,
                panelTabs = _state3.panelTabs,
                singleColumnOrderForm = _state3.singleColumnOrderForm,
                flipOrderBook = _state3.flipOrderBook,
                orderBookReversed = _state3.orderBookReversed,
                chartZoom = _state3.chartZoom,
                chartTools = _state3.chartTools,
                hideFunctionButtons = _state3.hideFunctionButtons;

            var _isMarketFrozen = this.isMarketFrozen(),
                isFrozen = _isMarketFrozen.isFrozen,
                frozenAsset = _isMarketFrozen.frozenAsset;

            var centerContainerWidth = width;
            if (this.refs.center) {
                centerContainerWidth = this.refs.center.clientWidth;
            }

            var base = null,
                quote = null,
                accountBalance = null,
                quoteBalance = null,
                baseBalance = null,
                coreBalance = null,
                quoteSymbol = void 0,
                baseSymbol = void 0,
                showCallLimit = false,
                latest = void 0,
                changeClass = void 0;

            var showVolumeChart = this.props.viewSettings.get("showVolumeChart", true);

            hideScrollbars = tinyScreen ? true : hideScrollbars;

            if (quoteAsset.size && baseAsset.size && currentAccount.size) {
                base = baseAsset;
                quote = quoteAsset;
                baseSymbol = base.get("symbol");
                quoteSymbol = quote.get("symbol");

                accountBalance = currentAccount.get("balances").toJS();

                if (accountBalance) {
                    for (var id in accountBalance) {
                        if (id === quote.get("id")) {
                            quoteBalance = accountBalance[id];
                        }
                        if (id === base.get("id")) {
                            baseBalance = accountBalance[id];
                        }
                        if (id === "1.3.0") {
                            coreBalance = accountBalance[id];
                        }
                    }
                }

                showCallLimit = this._getSettlementInfo();
            }

            var quoteIsBitAsset = quoteAsset.get("bitasset_data_id") ? true : false;
            var baseIsBitAsset = baseAsset.get("bitasset_data_id") ? true : false;

            var spread = lowestAsk && highestBid ? lowestAsk.getPrice() - highestBid.getPrice() : 0;

            // Latest price
            if (activeMarketHistory.size) {
                var latest_two = activeMarketHistory.take(2);
                latest = latest_two.first();
                var second_latest = latest_two.last();

                changeClass = latest.getPrice() === second_latest.getPrice() ? "" : latest.getPrice() - second_latest.getPrice() > 0 ? "change-up" : "change-down";
            }

            // Fees
            if (!coreAsset || !Object.keys(this.state.feeStatus).length) {
                return null;
            }

            var _getFeeAssets2 = this._getFeeAssets(quote, base, coreAsset),
                sellFeeAsset = _getFeeAssets2.sellFeeAsset,
                sellFeeAssets = _getFeeAssets2.sellFeeAssets,
                sellFee = _getFeeAssets2.sellFee,
                buyFeeAsset = _getFeeAssets2.buyFeeAsset,
                buyFeeAssets = _getFeeAssets2.buyFeeAssets,
                buyFee = _getFeeAssets2.buyFee;

            // Decimals


            var hasPrediction = base.getIn(["bitasset", "is_prediction_market"]) || quote.getIn(["bitasset", "is_prediction_market"]);

            var description = null;

            if (hasPrediction) {
                description = quoteAsset.getIn(["options", "description"]);
                description = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].parseDescription(description).main;
            }

            var smallScreen = width < 850 ? true : false;
            var tinyScreen = width < 640 ? true : false;

            var minChartHeight = 300;
            var thisChartHeight = Math.max(this.state.height > 1100 ? chartHeight : chartHeight - 125, minChartHeight);

            var expirationType = this.state.expirationType;
            var expirationCustomTime = this.state.expirationCustomTime;

            var isPanelActive = activePanels.length >= 1 ? true : false;
            var isPredictionMarket = base.getIn(["bitasset", "is_prediction_market"]);

            /***
             * Generate layout cards
             */
            var actionCardIndex = 0;

            var buySellTitle = function buySellTitle(isBid) {
                return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    "div",
                    { className: "exchange-content-header" },
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_33__["default"], {
                        string: "exchange.buysell_formatter",
                        noLink: true,
                        noTip: true,
                        keys: [{
                            type: "asset",
                            value: _this8.props.quoteAsset.get("symbol"),
                            arg: "asset"
                        }, {
                            type: "translate",
                            value: isBid ? "exchange.buy" : "exchange.sell",
                            arg: "direction"
                        }]
                    })
                );
            };

            var buyForm = isFrozen ? null : tinyScreen && !this.state.mobileKey.includes("buySellTab") ? null : react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"],
                {
                    animated: false,
                    activeKey: this.props.viewSettings.get("order-form-bid") || "limit",
                    onChange: this.handleOrderTypeTabChange.bind(this, "bid"),
                    tabBarExtraContent: react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        "div",
                        null,
                        buySellTitle(true)
                    ),
                    defaultActiveKey: "limit",
                    className: classnames__WEBPACK_IMPORTED_MODULE_4___default()("exchange--buy-sell-form", verticalOrderForm && !smallScreen ? "" : centerContainerWidth > 1200 ? "medium-6 large-6 xlarge-4" : centerContainerWidth > 800 ? "medium-6" : "", "small-12 exchange-padded middle-content", flipBuySell ? "order-" + (buySellTop ? 2 : 3) + " large-order-" + (buySellTop ? 2 : 5) + " sell-form" : "order-" + (buySellTop ? 1 : 2) + " large-order-" + (buySellTop ? 1 : 4) + " buy-form")
                },
                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane,
                    {
                        tab: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.limit"),
                        key: "limit"
                    },
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_BuySell__WEBPACK_IMPORTED_MODULE_18__["default"], {
                        showScaledOrderModal: this.showScaledOrderModal,
                        key: "actionCard_" + actionCardIndex++,
                        onBorrow: baseIsBitAsset ? this._borrowBase.bind(this) : null,
                        onBuy: this._onBuy.bind(this, "bid"),
                        onDeposit: this._onDeposit.bind(this, "bid"),
                        currentAccount: currentAccount,
                        backedCoin: this.props.backedCoins.find(function (a) {
                            return a.symbol === base.get("symbol");
                        }),
                        currentBridges: this.props.bridgeCoins.get(base.get("symbol")) || null,
                        isOpen: this.state.buySellOpen,
                        onToggleOpen: this._toggleOpenBuySell.bind(this),
                        parentWidth: centerContainerWidth,
                        styles: {
                            padding: 5,
                            paddingRight: mirrorPanels ? 15 : 5
                        },
                        type: "bid",
                        hideHeader: true,
                        expirationType: expirationType["bid"],
                        expirations: this.EXPIRATIONS,
                        expirationCustomTime: expirationCustomTime["bid"],
                        onExpirationTypeChange: this._handleExpirationChange.bind(this, "bid"),
                        onExpirationCustomChange: this._handleCustomExpirationChange.bind(this, "bid"),
                        amount: bid.toReceiveText,
                        price: bid.priceText,
                        total: bid.forSaleText,
                        quote: quote,
                        base: base,
                        amountChange: this._onInputReceive.bind(this, "bid", true),
                        priceChange: this._onInputPrice.bind(this, "bid"),
                        setPrice: this._currentPriceClick.bind(this),
                        totalChange: this._onInputSell.bind(this, "bid", false),
                        clearForm: this._clearForms.bind(this, "bid"),
                        balance: baseBalance,
                        balanceId: base.get("id"),
                        onSubmit: this._createLimitOrderConfirm.bind(this, quote, base, baseBalance, coreBalance, buyFeeAsset, "buy"),
                        balancePrecision: base.get("precision"),
                        quotePrecision: quote.get("precision"),
                        totalPrecision: base.get("precision"),
                        currentPrice: lowestAsk.getPrice(),
                        currentPriceObject: lowestAsk,
                        account: currentAccount.get("name"),
                        fee: buyFee,
                        hasFeeBalance: this.state.feeStatus[buyFee.asset_id].hasBalance,
                        feeAssets: buyFeeAssets,
                        feeAsset: buyFeeAsset,
                        onChangeFeeAsset: this.onChangeFeeAsset.bind(this, "buy"),
                        isPredictionMarket: base.getIn(["bitasset", "is_prediction_market"]),
                        onFlip: !flipBuySell ? this._flipBuySell.bind(this) : null,
                        onTogglePosition: this.state.buySellTop && !verticalOrderBook ? this._toggleBuySellPosition.bind(this) : null,
                        moveOrderForm: !smallScreen && (!flipBuySell || verticalOrderForm) ? this._moveOrderForm.bind(this) : null,
                        verticalOrderForm: !smallScreen ? verticalOrderForm : false,
                        isPanelActive: isPanelActive,
                        activePanels: activePanels,
                        singleColumnOrderForm: singleColumnOrderForm,
                        hideFunctionButtons: hideFunctionButtons
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane,
                    {
                        tab: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.scaled"),
                        key: "scaled"
                    },
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_ScaledOrderTab__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        expirationType: expirationType["bid"],
                        expirations: this.EXPIRATIONS,
                        expirationCustomTime: expirationCustomTime["bid"],
                        onExpirationTypeChange: this._handleExpirationChange.bind(this, "bid"),
                        onExpirationCustomChange: this._handleCustomExpirationChange.bind(this, "bid"),
                        currentPrice: lowestAsk.getPrice(),
                        lastClickedPrice: this.state.ask && this.state.ask.priceText,
                        currentAccount: currentAccount,
                        createScaledOrder: this._createScaledOrder,
                        type: "bid",
                        quoteAsset: quote,
                        baseAsset: base
                    })
                )
            );

            var sellForm = isFrozen ? null : tinyScreen && !this.state.mobileKey.includes("buySellTab") ? null : react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"],
                {
                    activeKey: this.props.viewSettings.get("order-form-ask") || "limit",
                    onChange: this.handleOrderTypeTabChange.bind(this, "ask"),
                    animated: false,
                    tabBarExtraContent: react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        "div",
                        null,
                        buySellTitle(false)
                    ),
                    defaultActiveKey: "limit",
                    className: classnames__WEBPACK_IMPORTED_MODULE_4___default()("exchange--buy-sell-form", verticalOrderForm && !smallScreen ? "" : centerContainerWidth > 1200 ? "medium-6 large-6 xlarge-4" : centerContainerWidth > 800 ? "medium-6" : "", "small-12 exchange-padded middle-content", flipBuySell ? "order-" + (buySellTop ? 1 : 2) + " large-order-" + (buySellTop ? 1 : 4) + " buy-form" : "order-" + (buySellTop ? 2 : 3) + " large-order-" + (buySellTop ? 2 : 5) + " sell-form")
                },
                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane,
                    {
                        tab: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.limit"),
                        key: "limit"
                    },
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_BuySell__WEBPACK_IMPORTED_MODULE_18__["default"], {
                        showScaledOrderModal: this.showScaledOrderModal,
                        key: "actionCard_" + actionCardIndex++,
                        onBorrow: quoteIsBitAsset ? this._borrowQuote.bind(this) : null,
                        onBuy: this._onBuy.bind(this, "ask"),
                        onDeposit: this._onDeposit.bind(this, "ask"),
                        currentAccount: currentAccount,
                        backedCoin: this.props.backedCoins.find(function (a) {
                            return a.symbol === quote.get("symbol");
                        }),
                        currentBridges: this.props.bridgeCoins.get(quote.get("symbol")) || null,
                        isOpen: this.state.buySellOpen,
                        onToggleOpen: this._toggleOpenBuySell.bind(this),
                        parentWidth: centerContainerWidth,
                        styles: {
                            padding: 5,
                            paddingRight: mirrorPanels ? 15 : 5
                        },
                        type: "ask",
                        hideHeader: true,
                        amount: ask.forSaleText,
                        price: ask.priceText,
                        total: ask.toReceiveText,
                        quote: quote,
                        base: base,
                        expirationType: expirationType["ask"],
                        expirations: this.EXPIRATIONS,
                        expirationCustomTime: expirationCustomTime["ask"],
                        onExpirationTypeChange: this._handleExpirationChange.bind(this, "ask"),
                        onExpirationCustomChange: this._handleCustomExpirationChange.bind(this, "ask"),
                        amountChange: this._onInputSell.bind(this, "ask", false),
                        priceChange: this._onInputPrice.bind(this, "ask"),
                        setPrice: this._currentPriceClick.bind(this),
                        totalChange: this._onInputReceive.bind(this, "ask", true),
                        clearForm: this._clearForms.bind(this, "ask"),
                        balance: quoteBalance,
                        balanceId: quote.get("id"),
                        onSubmit: this._createLimitOrderConfirm.bind(this, base, quote, quoteBalance, coreBalance, sellFeeAsset, "sell"),
                        balancePrecision: quote.get("precision"),
                        quotePrecision: quote.get("precision"),
                        totalPrecision: base.get("precision"),
                        currentPrice: highestBid.getPrice(),
                        currentPriceObject: highestBid,
                        account: currentAccount.get("name"),
                        fee: sellFee,
                        hasFeeBalance: this.state.feeStatus[sellFee.asset_id].hasBalance,
                        feeAssets: sellFeeAssets,
                        feeAsset: sellFeeAsset,
                        onChangeFeeAsset: this.onChangeFeeAsset.bind(this, "sell"),
                        isPredictionMarket: quote.getIn(["bitasset", "is_prediction_market"]),
                        onFlip: flipBuySell ? this._flipBuySell.bind(this) : null,
                        onTogglePosition: this.state.buySellTop && !verticalOrderBook ? this._toggleBuySellPosition.bind(this) : null,
                        moveOrderForm: !smallScreen && (flipBuySell || verticalOrderForm) ? this._moveOrderForm.bind(this) : null,
                        verticalOrderForm: !smallScreen ? verticalOrderForm : false,
                        isPanelActive: isPanelActive,
                        activePanels: activePanels,
                        singleColumnOrderForm: singleColumnOrderForm,
                        hideFunctionButtons: hideFunctionButtons
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane,
                    {
                        tab: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.scaled"),
                        key: "scaled"
                    },
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_ScaledOrderTab__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        expirationType: expirationType["ask"],
                        expirations: this.EXPIRATIONS,
                        expirationCustomTime: expirationCustomTime["ask"],
                        onExpirationTypeChange: this._handleExpirationChange.bind(this, "ask"),
                        onExpirationCustomChange: this._handleCustomExpirationChange.bind(this, "ask"),
                        currentPrice: highestBid.getPrice(),
                        lastClickedPrice: this.state.ask && this.state.ask.priceText,
                        currentAccount: currentAccount,
                        createScaledOrder: this._createScaledOrder,
                        type: "ask",
                        baseAsset: base,
                        quoteAsset: quote
                    })
                )
            );

            var myMarkets = tinyScreen && !this.state.mobileKey.includes("myMarkets") ? null : react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_MyMarkets__WEBPACK_IMPORTED_MODULE_24__["default"], {
                key: "actionCard_" + actionCardIndex++,
                className: "grid-block left-order-book no-padding no-margin vertical",
                style: {
                    minWidth: 350,
                    height: smallScreen ? 680 : "calc(100vh - 215px)",
                    padding: smallScreen ? 10 : 0
                },
                headerStyle: {
                    width: "100%",
                    display: !smallScreen ? "display: none" : ""
                },
                noHeader: true,
                listHeight: this.state.height - 450,
                columns: [{ name: "star", index: 1 }, { name: "market", index: 2 }, { name: "vol", index: 3 }, { name: "price", index: 4 }, { name: "change", index: 5 }],
                findColumns: [{ name: "market", index: 1 }, { name: "issuer", index: 2 }, { name: "vol", index: 3 }, { name: "add", index: 4 }],
                current: quoteSymbol + "_" + baseSymbol,
                location: this.props.location,
                history: this.props.history,
                activeTab: tabVerticalPanel ? tabVerticalPanel : "my-market"
            });

            var Trollbox = react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                "div",
                {
                    style: {
                        padding: !this.props.viewChat ? 0 : "0 0 0 0"
                    },
                    className: "grid-block no-margin vertical shrink"
                },
                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    "div",
                    {
                        onClick: this._toggleChat.bind(this),
                        className: "exchange-content-header clickable",
                        style: {
                            textAlign: "left",
                            paddingRight: 10,
                            paddingLeft: 10,
                            paddingTop: 6,
                            paddingBottom: 6
                        }
                    },
                    this.props.viewChat ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        "span",
                        null,
                        "\u25BC"
                    ) : react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        "span",
                        null,
                        "\u25B2"
                    ),
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_37___default.a, { content: "exchange.trollbox" })
                ),
                this.props.viewChat ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_Chat_ChatBro__WEBPACK_IMPORTED_MODULE_38__["default"], { height: "400px" }) : null
            );

            var orderBook = tinyScreen && !this.state.mobileKey.includes("orderBook") ? null : react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_OrderBook__WEBPACK_IMPORTED_MODULE_22__["OrderBook"], {
                ref: "order_book",
                key: "actionCard_" + actionCardIndex++,
                latest: latest && latest.getPrice(),
                changeClass: changeClass,
                orders: marketLimitOrders,
                calls: marketCallOrders,
                invertedCalls: invertedCalls,
                combinedBids: combinedBids,
                combinedAsks: combinedAsks,
                highestBid: highestBid,
                lowestAsk: lowestAsk,
                totalBids: totals.bid,
                totalAsks: totals.ask,
                base: base,
                quote: quote,
                baseSymbol: baseSymbol,
                quoteSymbol: quoteSymbol,
                onClick: this._orderbookClick.bind(this),
                horizontal: !verticalOrderBook || smallScreen ? true : false,
                flipOrderBook: flipOrderBook,
                orderBookReversed: orderBookReversed,
                marketReady: marketReady,
                wrapperClass: classnames__WEBPACK_IMPORTED_MODULE_4___default()(centerContainerWidth > 1200 ? "xlarge-8" : centerContainerWidth > 800 ? "" : "", "medium-12 large-12", "small-12 grid-block orderbook no-padding align-spaced no-overflow wrap shrink", "order-" + (buySellTop ? 3 : 1) + " xlarge-order-" + (buySellTop ? 4 : 1)),
                innerClass: classnames__WEBPACK_IMPORTED_MODULE_4___default()(centerContainerWidth > 1200 ? "medium-6" : centerContainerWidth > 800 ? "medium-6 large-6" : "", "small-12 middle-content", !tinyScreen ? "exchange-padded" : ""),
                currentAccount: this.props.currentAccount.get("id"),
                handleGroupOrderLimitChange: this._onGroupOrderLimitChange.bind(this),
                trackedGroupsConfig: trackedGroupsConfig,
                currentGroupOrderLimit: currentGroupOrderLimit,
                groupedBids: groupedBids,
                groupedAsks: groupedAsks,
                isPanelActive: activePanels.length >= 1,
                onTogglePosition: !this.state.buySellTop ? this._toggleBuySellPosition.bind(this) : null,
                moveOrderBook: !smallScreen ? this._moveOrderBook.bind(this) : null,
                smallScreen: smallScreen,
                hideScrollbars: hideScrollbars,
                autoScroll: autoScroll,
                onFlipOrderBook: this._flipOrderBook.bind(this),
                hideFunctionButtons: hideFunctionButtons
            });

            panelWidth = 350;

            if (this.refs.order_book && this.refs.order_book.verticalStickyTable && this.refs.order_book.verticalStickyTable.current && this.refs.order_book.verticalStickyTable.current.scrollData) {
                panelWidth = this.refs.order_book.verticalStickyTable.current.scrollData.scrollWidth;
            }

            var marketHistory = tinyScreen && !this.state.mobileKey.includes("marketHistory") ? null : react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_MarketHistory__WEBPACK_IMPORTED_MODULE_23__["default"], {
                key: "actionCard_" + actionCardIndex++,
                className: classnames__WEBPACK_IMPORTED_MODULE_4___default()(panelTabs["history"] == 0 ? centerContainerWidth > 1200 ? "medium-6 large-6 xlarge-4" : centerContainerWidth > 800 ? "medium-6" : "" : "medium-12", "no-padding no-overflow middle-content small-12 order-6"),
                innerClass: !tinyScreen ? "exchange-padded" : "",
                innerStyle: { paddingBottom: !tinyScreen ? "1.2rem" : "0" },
                noHeader: panelTabs["history"] == 0 ? false : true,
                history: activeMarketHistory,
                currentAccount: currentAccount,
                myHistory: currentAccount.get("history"),
                base: base,
                quote: quote,
                baseSymbol: baseSymbol,
                quoteSymbol: quoteSymbol,
                activeTab: "history",
                tinyScreen: tinyScreen,
                isPanelActive: isPanelActive,
                hideScrollbars: hideScrollbars
            });

            var myMarketHistory = tinyScreen && !this.state.mobileKey.includes("myMarketHistory") ? null : react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_MarketHistory__WEBPACK_IMPORTED_MODULE_23__["default"], {
                key: "actionCard_" + actionCardIndex++,
                className: classnames__WEBPACK_IMPORTED_MODULE_4___default()(panelTabs["my_history"] == 0 ? centerContainerWidth > 1200 ? "medium-6 large-6 xlarge-4" : centerContainerWidth > 800 ? "medium-6" : "" : "medium-12", "no-padding no-overflow middle-content small-12", verticalOrderBook || verticalOrderForm ? "order-4" : "order-3"),
                innerClass: !tinyScreen ? "exchange-padded" : "",
                innerStyle: { paddingBottom: !tinyScreen ? "1.2rem" : "0" },
                noHeader: panelTabs["my_history"] == 0 ? false : true,
                history: activeMarketHistory,
                currentAccount: currentAccount,
                myHistory: currentAccount.get("history"),
                base: base,
                quote: quote,
                baseSymbol: baseSymbol,
                quoteSymbol: quoteSymbol,
                activeTab: "my_history",
                tinyScreen: tinyScreen,
                isPanelActive: isPanelActive,
                hideScrollbars: hideScrollbars
            });

            var myOpenOrders = tinyScreen && !this.state.mobileKey.includes("myOpenOrders") ? null : react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_MyOpenOrders__WEBPACK_IMPORTED_MODULE_21__["MarketOrders"], {
                key: "actionCard_" + actionCardIndex++,
                style: { marginBottom: !tinyScreen ? 15 : 0 },
                className: classnames__WEBPACK_IMPORTED_MODULE_4___default()(panelTabs["my_orders"] == 0 ? centerContainerWidth > 1200 ? "medium-6 large-6 xlarge-4" : centerContainerWidth > 800 ? "medium-6" : "" : "medium-12", "no-padding no-overflow middle-content small-12 order-7"),
                innerClass: !tinyScreen ? "exchange-padded" : "",
                innerStyle: { paddingBottom: !tinyScreen ? "1.2rem" : "0" },
                noHeader: panelTabs["my_orders"] == 0 ? false : true,
                orders: marketLimitOrders,
                settleOrders: marketSettleOrders,
                currentAccount: currentAccount,
                base: base,
                quote: quote,
                baseSymbol: baseSymbol,
                quoteSymbol: quoteSymbol,
                activeTab: "my_orders",
                onCancel: this._cancelLimitOrder.bind(this),
                flipMyOrders: this.props.viewSettings.get("flipMyOrders"),
                feedPrice: this.props.feedPrice,
                smallScreen: smallScreen,
                tinyScreen: tinyScreen,
                hidePanel: hidePanel,
                isPanelActive: isPanelActive,
                hideScrollbars: hideScrollbars
            });

            var settlementOrders = marketSettleOrders.size === 0 || tinyScreen && !this.state.mobileKey.includes("settlementOrders") ? null : react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_MyOpenOrders__WEBPACK_IMPORTED_MODULE_21__["MarketOrders"], {
                key: "actionCard_" + actionCardIndex++,
                style: { marginBottom: !tinyScreen ? 15 : 0 },
                className: classnames__WEBPACK_IMPORTED_MODULE_4___default()(panelTabs["open_settlement"] == 0 ? centerContainerWidth > 1200 ? "medium-6 large-6 xlarge-4" : centerContainerWidth > 800 ? "medium-6" : "" : "medium-12", "no-padding no-overflow middle-content small-12 order-8"),
                innerClass: !tinyScreen ? "exchange-padded" : "",
                innerStyle: { paddingBottom: !tinyScreen ? "1.2rem" : "0" },
                noHeader: panelTabs["open_settlement"] == 0 ? false : true,
                orders: marketLimitOrders,
                settleOrders: marketSettleOrders,
                currentAccount: currentAccount,
                base: base,
                quote: quote,
                baseSymbol: baseSymbol,
                quoteSymbol: quoteSymbol,
                activeTab: "open_settlement",
                onCancel: this._cancelLimitOrder.bind(this),
                flipMyOrders: this.props.viewSettings.get("flipMyOrders"),
                feedPrice: this.props.feedPrice,
                smallScreen: smallScreen,
                tinyScreen: tinyScreen,
                hidePanel: hidePanel,
                isPanelActive: isPanelActive,
                hideScrollbars: hideScrollbars
            });

            var tradingViewChart = !tinyScreen && !(chartType == "price_chart") || tinyScreen && !this.state.mobileKey.includes("tradingViewChart") ? null : react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_TradingViewPriceChart__WEBPACK_IMPORTED_MODULE_28__["default"], {
                locale: this.props.locale,
                dataFeed: this.props.dataFeed,
                baseSymbol: baseSymbol,
                quoteSymbol: quoteSymbol,
                marketReady: marketReady,
                theme: this.props.settings.get("themes"),
                buckets: buckets,
                bucketSize: bucketSize,
                currentPeriod: this.state.currentPeriod,
                chartHeight: thisChartHeight,
                chartZoom: tinyScreen ? false : chartZoom,
                chartTools: tinyScreen ? false : chartTools,
                mobile: tinyScreen
            });

            var deptHighChart = !tinyScreen && !(chartType == "market_depth") || tinyScreen && !this.state.mobileKey.includes("deptHighChart") ? null : react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_DepthHighChart__WEBPACK_IMPORTED_MODULE_29__["default"], {
                marketReady: marketReady,
                orders: marketLimitOrders,
                showCallLimit: showCallLimit,
                call_orders: marketCallOrders,
                flat_asks: flatAsks,
                flat_bids: flatBids,
                flat_calls: showCallLimit ? flatCalls : [],
                flat_settles: this.props.settings.get("showSettles") && flatSettles,
                settles: marketSettleOrders,
                invertedCalls: invertedCalls,
                totalBids: totals.bid,
                totalAsks: totals.ask,
                base: base,
                quote: quote,
                height: thisChartHeight,
                isPanelActive: isPanelActive,
                onClick: this._depthChartClick.bind(this, base, quote),
                feedPrice: !hasPrediction && feedPrice && feedPrice.toReal(),
                spread: spread,
                LCP: showCallLimit ? lowestCallPrice : null,
                hasPrediction: hasPrediction,
                noFrame: false,
                theme: this.props.settings.get("themes"),
                centerRef: this.refs.center,
                activePanels: activePanels
            });

            var tradingChartHeader = react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                "div",
                {
                    className: "exchange--chart-control",
                    style: {
                        height: 33,
                        right: chartType == "price_chart" ? "5rem" : "15rem",
                        top: "1px",
                        position: "absolute",
                        zIndex: 1,
                        padding: "0.2rem"
                    }
                },
                chartType == "price_chart" && react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tooltip"],
                    {
                        title: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.settings.tooltip.chart_tools")
                    },
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Icon"], {
                        style: {
                            cursor: "pointer",
                            fontSize: "1.4rem",
                            marginRight: "0.6rem"
                        },
                        onClick: this._chartTools.bind(this),
                        type: "tool"
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tooltip"],
                    {
                        title: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.settings.tooltip.increase_chart_height")
                    },
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Icon"], {
                        style: {
                            cursor: "pointer",
                            fontSize: "1.4rem",
                            marginRight: "0.6rem"
                        },
                        onClick: function onClick() {
                            _this8.onChangeChartHeight({ increase: true });
                        },
                        type: "up"
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tooltip"],
                    {
                        title: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.settings.tooltip.decrease_chart_height")
                    },
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Icon"], {
                        style: {
                            cursor: "pointer",
                            fontSize: "1.4rem",
                            marginRight: "0.6rem"
                        },
                        onClick: function onClick() {
                            _this8.onChangeChartHeight({ increase: false });
                        },
                        type: "down"
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tooltip"],
                    {
                        title: chartType == "market_depth" ? counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.settings.tooltip.show_price_chart") : counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.settings.tooltip.show_market_depth")
                    },
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Icon"], {
                        style: {
                            cursor: "pointer",
                            fontSize: "1.4rem"
                        },
                        onClick: function onClick() {
                            if (chartType == "market_depth") {
                                _this8._toggleChart("price_chart");
                            } else {
                                _this8._toggleChart("market_depth");
                            }
                        },
                        type: chartType == "market_depth" ? "bar-chart" : "area-chart"
                    })
                )
            );

            /***
             * Generate tabs based on Layout
             *
             */

            var buySellTab = react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                "div",
                {
                    key: "actionCard_" + actionCardIndex++,
                    className: "left-order-book small-12",
                    style: {
                        paddingLeft: 5,
                        width: !smallScreen ? 300 : "auto"
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"],
                    {
                        defaultActiveKey: "buy",
                        activeKey: tabBuySell,
                        onChange: this._setTabBuySell.bind(this),
                        style: {
                            padding: "0px !important",
                            margin: "0px !important"
                        }
                    },
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane,
                        {
                            tab: react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_33__["default"], {
                                string: "exchange.buysell_formatter",
                                noLink: true,
                                noTip: false,
                                keys: [{
                                    type: "asset",
                                    value: quote.get("symbol"),
                                    arg: "asset"
                                }, {
                                    type: "translate",
                                    value: isPredictionMarket ? "exchange.short" : "exchange.buy",
                                    arg: "direction"
                                }]
                            }),
                            key: "buy"
                        },
                        buyForm
                    ),
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane,
                        {
                            tab: react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_33__["default"], {
                                string: "exchange.buysell_formatter",
                                noLink: true,
                                noTip: false,
                                keys: [{
                                    type: "asset",
                                    value: quote.get("symbol"),
                                    arg: "asset"
                                }, {
                                    type: "translate",
                                    value: isPredictionMarket ? "exchange.short" : "exchange.sell",
                                    arg: "direction"
                                }]
                            }),
                            key: "sell"
                        },
                        sellForm
                    )
                )
            );

            // Generate Tabbed Groups
            var groupTabs = { 1: [], 2: [] };
            var groupStandalone = [];

            Object.keys(panelTabs).sort().map(function (a) {
                if (panelTabs[a] == 0) {
                    // Handle Standalone Settings
                    if (a == "my_history") {
                        groupStandalone.push(myMarketHistory);
                    }

                    if (a == "history") {
                        groupStandalone.push(marketHistory);
                    }

                    if (a == "my_orders") {
                        groupStandalone.push(myOpenOrders);
                    }

                    if (a == "open_settlement" && settlementOrders !== null) {
                        groupStandalone.push(settlementOrders);
                    }
                } else {
                    if (a == "my_history") {
                        groupTabs[panelTabs[a]].push(react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane,
                            {
                                tab: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.my_history"),
                                key: "my_history"
                            },
                            myMarketHistory
                        ));
                    }

                    if (a == "history") {
                        groupTabs[panelTabs[a]].push(react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane,
                            {
                                tab: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.history"),
                                key: "history"
                            },
                            marketHistory
                        ));
                    }

                    if (a == "my_orders") {
                        groupTabs[panelTabs[a]].push(react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane,
                            {
                                tab: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.my_orders"),
                                key: "my_orders"
                            },
                            myOpenOrders
                        ));
                    }

                    if (a == "open_settlement" && settlementOrders !== null) {
                        groupTabs[panelTabs[a]].push(react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane,
                            {
                                tab: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.settle_orders"),
                                key: "open_settlement"
                            },
                            settlementOrders
                        ));
                    }
                }
            });

            Object.keys(panelTabsActive).map(function (thisTabsId) {
                Object.keys(panelTabs).map(function (thisPanelName) {
                    var stop = false;
                    if (!stop && thisTabsId == panelTabs[thisPanelName]) {
                        panelTabsActive[thisTabsId] = !panelTabsActive[thisTabsId] ? thisPanelName : panelTabsActive[thisTabsId];
                        stop = true;
                    }
                });
            });

            var groupTabsCount = groupStandalone.length;

            Object.keys(groupTabs).map(function (tab) {
                if (groupTabs[tab].length) {
                    groupTabsCount++;
                }
            });

            var groupTabbed1 = groupTabs[1].length > 0 ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                "div",
                {
                    key: "actionCard_" + actionCardIndex++,
                    className: classnames__WEBPACK_IMPORTED_MODULE_4___default()(centerContainerWidth > 1200 ? groupTabsCount == 1 ? "medium-12 xlarge-4" : "medium-6 xlarge-4 " : centerContainerWidth > 800 ? groupTabsCount == 1 ? "medium-12" : "medium-6" : "", "small-12 order-5", verticalOrderBook ? "xlarge-order-5" : "", !verticalOrderBook && !verticalOrderForm ? centerContainerWidth < 1200 ? "xlarge-order-5" : "xlarge-order-2" : ""),
                    style: { paddingRight: 5 }
                },
                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"],
                    {
                        activeKey: panelTabsActive[1],
                        onChange: this._setPanelTabInGroup.bind(this, 1)
                    },
                    groupTabs[1]
                )
            ) : null;

            var groupTabbed2 = groupTabs[2].length > 0 ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                "div",
                {
                    key: "actionCard_" + actionCardIndex++,
                    className: classnames__WEBPACK_IMPORTED_MODULE_4___default()(centerContainerWidth > 1200 ? groupTabsCount == 1 ? "medium-12 xlarge-4" : "medium-6 xlarge-4 " : centerContainerWidth > 800 ? groupTabsCount == 1 ? "medium-12" : "medium-6" : "", "small-12 order-6"),
                    style: { paddingRight: 5 }
                },
                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"],
                    {
                        activeKey: panelTabsActive[2],
                        onChange: this._setPanelTabInGroup.bind(this, 2)
                    },
                    groupTabs[2]
                )
            ) : null;

            var emptyDiv = groupTabsCount > 2 ? null : react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                "div",
                {
                    className: classnames__WEBPACK_IMPORTED_MODULE_4___default()(centerContainerWidth > 1200 && (verticalOrderBook || verticalOrderBook) ? "xlarge-order-6 xlarge-8 order-9" : "", "small-12 grid-block orderbook no-padding align-spaced no-overflow wrap"),
                    key: "actionCard_" + actionCardIndex++
                },
                "\xA0"
            );

            /**
             * Generate layout grid based on Screen Size
             */
            var actionCards = [];
            if (!smallScreen) {
                if (!verticalOrderForm) {
                    actionCards.push(buyForm);
                    actionCards.push(sellForm);
                }

                if (!verticalOrderBook) {
                    actionCards.push(orderBook);
                }

                if (verticalOrderBook || verticalOrderForm) {
                    actionCards.push(emptyDiv);
                }

                actionCards.push(groupStandalone);
                actionCards.push(groupTabbed1);
                actionCards.push(groupTabbed2);
            } else if (!tinyScreen) {
                actionCards.push(buyForm);
                actionCards.push(sellForm);
                actionCards.push(orderBook);
                actionCards.push(groupStandalone);
                actionCards.push(groupTabbed1);
                actionCards.push(groupTabbed2);
                actionCards.push(react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    "div",
                    {
                        className: "order-10 small-12",
                        key: "actionCard_" + actionCardIndex++
                    },
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"],
                        {
                            defaultActiveKey: "my-market",
                            activeKey: tabVerticalPanel,
                            onChange: this._setTabVerticalPanel.bind(this)
                        },
                        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane, {
                            tab: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.market_name"),
                            key: "my-market"
                        }),
                        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane, {
                            tab: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.more"),
                            key: "find-market"
                        })
                    ),
                    myMarkets
                ));
            } else {
                actionCards = react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Collapse"],
                    {
                        activeKey: this.state.mobileKey,
                        onChange: this._onChangeMobilePanel.bind(this),
                        style: { paddingRight: 8 }
                    },
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Collapse"].Panel,
                        {
                            header: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.price_history"),
                            key: "tradingViewChart"
                        },
                        tradingViewChart
                    ),
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Collapse"].Panel,
                        {
                            header: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.order_depth"),
                            key: "deptHighChart"
                        },
                        deptHighChart
                    ),
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Collapse"].Panel,
                        {
                            header: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.buy_sell"),
                            key: "buySellTab"
                        },
                        buySellTab
                    ),
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Collapse"].Panel,
                        {
                            header: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.order_book"),
                            key: "orderBook"
                        },
                        orderBook
                    ),
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Collapse"].Panel,
                        {
                            header: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.history"),
                            key: "marketHistory"
                        },
                        marketHistory
                    ),
                    settlementOrders !== null ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Collapse"].Panel,
                        {
                            header: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.settle_orders"),
                            key: "settlementOrders"
                        },
                        settlementOrders
                    ) : null,
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Collapse"].Panel,
                        {
                            header: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.my_history"),
                            key: "myMarketHistory"
                        },
                        myMarketHistory
                    ),
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Collapse"].Panel,
                        {
                            header: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.my_orders"),
                            key: "myOpenOrders"
                        },
                        myOpenOrders
                    ),
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Collapse"].Panel,
                        {
                            header: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.market_name"),
                            key: "myMarkets"
                        },
                        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"],
                            {
                                defaultActiveKey: "my-market",
                                activeKey: tabVerticalPanel,
                                onChange: this._setTabVerticalPanel.bind(this)
                            },
                            react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane, {
                                tab: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.market_name"),
                                key: "my-market"
                            }),
                            react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane, {
                                tab: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.more"),
                                key: "find-market"
                            })
                        ),
                        myMarkets
                    )
                );
            }

            /***
             * Generate Panels
             */
            var leftPanel = null;
            var rightPanel = null;
            var leftPanelContainer = null;
            var rightPanelContainer = null;
            var enableToggleLeft = false;
            var enableToggleRight = false;

            if (!smallScreen) {
                if (verticalOrderBook) {
                    leftPanel = react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        "div",
                        {
                            className: "left-order-book no-padding no-overflow",
                            style: {
                                display: "block",
                                height: "calc(100vh - 170px)",
                                width: panelWidth
                            }
                        },
                        orderBook
                    );
                }

                if (verticalOrderForm) {
                    leftPanel = react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        "div",
                        {
                            className: "left-order-book no-padding no-overflow",
                            style: {
                                display: "block",
                                height: "calc(100vh - 170px)",
                                width: 300
                            }
                        },
                        buySellTab
                    );
                }

                rightPanel = react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    "div",
                    {
                        className: "grid-block shrink right-column no-overflow",
                        style: { maxWidth: 450 }
                    },
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        "div",
                        { className: "grid-block no-padding no-margin vertical" },
                        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                            "div",
                            {
                                className: "left-order-book no-padding no-overflow shrink",
                                style: { display: "block" },
                                key: "actionCard_" + actionCardIndex++
                            },
                            react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                                "div",
                                {
                                    className: "v-align no-padding align-center grid-block footer vertical shrink",
                                    "data-intro": counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("walkthrough.my_markets")
                                },
                                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"],
                                    {
                                        defaultActiveKey: "my-market",
                                        activeKey: tabVerticalPanel,
                                        onChange: this._setTabVerticalPanel.bind(this)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane, {
                                        tab: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.market_name"),
                                        key: "my-market"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Tabs"].TabPane, {
                                        tab: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.more"),
                                        key: "find-market"
                                    })
                                )
                            ),
                            myMarkets
                        ),
                        Trollbox
                    )
                );

                if (!mirrorPanels && leftPanel || mirrorPanels && rightPanel) {
                    enableToggleLeft = true;
                }
                if (!mirrorPanels && rightPanel || mirrorPanels && leftPanel) {
                    enableToggleRight = true;
                }

                leftPanelContainer = react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    "div",
                    { className: "grid-block left-column shrink no-overflow" },
                    activePanels.includes("left") ? mirrorPanels ? rightPanel : leftPanel : null,
                    enableToggleLeft ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        "div",
                        {
                            style: {
                                width: "auto",
                                paddingTop: "calc(50vh - 80px)"
                            },
                            onClick: this._togglePanel.bind(this, "left")
                        },
                        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Icon"], {
                            "data-intro": counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("walkthrough.panel_hide"),
                            type: activePanels.includes("left") ? "caret-left" : "caret-right"
                        })
                    ) : null
                );

                rightPanelContainer = react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    "div",
                    { className: "grid-block left-column shrink no-overflow" },
                    enableToggleRight ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        "div",
                        {
                            style: {
                                width: "auto",
                                paddingTop: "calc(50vh - 80px)"
                            },
                            onClick: this._togglePanel.bind(this, "right")
                        },
                        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Icon"], {
                            "data-intro": counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("walkthrough.panel_hide"),
                            type: activePanels.includes("right") ? "caret-right" : "caret-left"
                        })
                    ) : null,
                    activePanels.includes("right") ? !mirrorPanels ? rightPanel : leftPanel : null
                );
            }

            return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                "div",
                { className: "grid-block vertical" },
                !this.props.marketReady ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_LoadingIndicator__WEBPACK_IMPORTED_MODULE_30__["default"], null) : null,
                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_ExchangeHeader__WEBPACK_IMPORTED_MODULE_20__["default"], {
                    hasAnyPriceAlert: this.props.hasAnyPriceAlert,
                    showPriceAlertModal: this.showPriceAlertModal,
                    account: this.props.currentAccount,
                    quoteAsset: quoteAsset,
                    baseAsset: baseAsset,
                    hasPrediction: hasPrediction,
                    starredMarkets: starredMarkets,
                    lowestAsk: lowestAsk,
                    highestBid: highestBid,
                    lowestCallPrice: lowestCallPrice,
                    showCallLimit: showCallLimit,
                    feedPrice: feedPrice,
                    marketReady: marketReady,
                    latestPrice: latest && latest.getPrice(),
                    marketStats: marketStats,
                    selectedMarketPickerAsset: this.state.marketPickerAsset,
                    onToggleMarketPicker: this._toggleMarketPicker.bind(this),
                    onTogglePersonalize: this._togglePersonalize.bind(this),
                    showVolumeChart: showVolumeChart
                }),
                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                    "div",
                    { className: "grid-block page-layout market-layout" },
                    this.state.isMarketPickerModalVisible || this.state.isMarketPickerModalLoaded ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_MarketPicker__WEBPACK_IMPORTED_MODULE_25__["default"], _extends({
                        visible: this.state.isMarketPickerModalVisible,
                        showModal: this.showMarketPickerModal,
                        hideModal: this.hideMarketPickerModal,
                        marketPickerAsset: this.state.marketPickerAsset,
                        onToggleMarketPicker: this._toggleMarketPicker.bind(this)
                    }, this.props)) : null,
                    this.state.isPersonalizeModalVisible || this.state.isPersonalizeModalLoaded ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_Personalize__WEBPACK_IMPORTED_MODULE_27__["default"], {
                        visible: this.state.isPersonalizeModalVisible,
                        showModal: this.showPersonalizeModal,
                        hideModal: this.hidePersonalizeModal,
                        viewSettings: this.props.viewSettings,
                        chartType: chartType,
                        chartHeight: chartHeight,
                        onTogglePersonalize: this._togglePersonalize.bind(this),
                        onChangeChartHeight: this.onChangeChartHeight.bind(this),
                        handleGroupOrderLimitChange: this._onGroupOrderLimitChange.bind(this),
                        trackedGroupsConfig: trackedGroupsConfig,
                        currentGroupOrderLimit: currentGroupOrderLimit,
                        verticalOrderBook: verticalOrderBook,
                        hideScrollbars: hideScrollbars,
                        mirrorPanels: mirrorPanels,
                        panelTabs: panelTabs,
                        singleColumnOrderForm: singleColumnOrderForm,
                        buySellTop: buySellTop,
                        flipBuySell: flipBuySell,
                        flipOrderBook: flipOrderBook,
                        tinyScreen: tinyScreen,
                        smallScreen: smallScreen,
                        orderBookReversed: orderBookReversed,
                        chartZoom: chartZoom,
                        chartTools: chartTools,
                        hideFunctionButtons: hideFunctionButtons,
                        onMoveOrderBook: this._moveOrderBook.bind(this),
                        onMirrorPanels: this._mirrorPanels.bind(this),
                        onToggleScrollbars: this._toggleScrollbars.bind(this),
                        onSetAutoscroll: this._setAutoscroll.bind(this),
                        onToggleChart: this._toggleChart.bind(this),
                        onSetPanelTabs: this._setPanelTabs.bind(this),
                        onToggleSingleColumnOrderForm: this._toggleSingleColumnOrderForm.bind(this),
                        onToggleBuySellPosition: this._toggleBuySellPosition.bind(this),
                        onFlipBuySell: this._flipBuySell.bind(this),
                        onFlipOrderBook: this._flipOrderBook.bind(this),
                        onOrderBookReversed: this._orderBookReversed.bind(this),
                        onChartZoom: this._chartZoom.bind(this),
                        onChartTools: this._chartTools.bind(this),
                        onHideFunctionButtons: this._hideFunctionButtons.bind(this)
                    }) : null,
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_Notifier_NotifierContainer__WEBPACK_IMPORTED_MODULE_32__["default"], null),
                    leftPanelContainer,
                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                        "div",
                        {
                            style: { paddingTop: 0 },
                            className: classnames__WEBPACK_IMPORTED_MODULE_4___default()("grid-block main-content vertical no-overflow")
                        },
                        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                            "div",
                            {
                                className: "grid-block vertical no-padding ps-container",
                                id: "CenterContent",
                                ref: "center",
                                "data-intro": tinyScreen ? counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("walkthrough.collapsed_items") : null
                            },
                            !tinyScreen ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                                "div",
                                null,
                                tradingChartHeader,
                                chartType && chartType == "price_chart" ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                                    "div",
                                    {
                                        className: "grid-block shrink no-overflow",
                                        id: "market-charts"
                                    },
                                    tradingViewChart
                                ) : null,
                                chartType && chartType == "market_depth" ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                                    "div",
                                    { className: "grid-block vertical no-padding shrink" },
                                    deptHighChart
                                ) : null
                            ) : null,
                            react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(
                                "div",
                                { className: "grid-block no-overflow wrap shrink" },
                                actionCards
                            )
                        )
                    ),
                    rightPanelContainer
                ),
                quoteIsBitAsset && (this.state.isBorrowQuoteModalVisible || this.state.isBorrowQuoteModalLoaded) ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_31__["default"], {
                    visible: this.state.isBorrowQuoteModalVisible,
                    hideModal: this.hideBorrowQuoteModal,
                    quoteAssetObj: quoteAsset.get("id"),
                    backingAssetObj: quoteAsset.getIn(["bitasset", "options", "short_backing_asset"]),
                    accountObj: currentAccount
                }) : null,
                baseIsBitAsset && (this.state.isBorrowBaseModalVisible || this.state.isBorrowBaseModalLoaded) ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_31__["default"], {
                    visible: this.state.isBorrowBaseModalVisible,
                    hideModal: this.hideBorrowBaseModal,
                    quoteAssetObj: baseAsset.get("id"),
                    backingAssetObj: baseAsset.getIn(["bitasset", "options", "short_backing_asset"]),
                    accountObj: currentAccount
                }) : null,
                this.state.isDepositModalVisible || this.state.isDepositModalLoaded ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_Dashboard_SimpleDepositWithdraw__WEBPACK_IMPORTED_MODULE_34__["default"], _extends({
                    visible: this.state.isDepositModalVisible,
                    hideModal: this.hideDepositModal,
                    ref: "deposit_modal",
                    action: "deposit",
                    fiatModal: false,
                    account: currentAccount,
                    sender: currentAccount,
                    asset: depositModalType === "bid" ? base : quote,
                    modalId: "simple_deposit_modal" + (depositModalType === "bid" ? "" : "_ask"),
                    balance: depositModalType === "bid" ? baseBalance : quoteBalance
                }, this.props.backedCoins.find(function (a) {
                    return a.symbol === (depositModalType === "bid" ? base.get("symbol") : quote.get("symbol"));
                }))) : null,
                this.state.isDepositBridgeModalVisible || this.state.isDepositBridgeModalLoaded ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_Dashboard_SimpleDepositBlocktradesBridge__WEBPACK_IMPORTED_MODULE_35__["default"], {
                    visible: this.state.isDepositBridgeModalVisible,
                    hideModal: this.hideDepositBridgeModal,
                    ref: "bridge_modal",
                    action: "deposit",
                    account: currentAccount.get("name"),
                    sender: currentAccount.get("id"),
                    asset: buyModalType === "bid" ? base.get("id") : quote.get("id"),
                    modalId: "simple_bridge_modal" + (buyModalType === "bid" ? "" : "_ask"),
                    balances: [buyModalType === "bid" ? baseBalance : quoteBalance],
                    bridges: this.props.bridgeCoins.get(buyModalType === "bid" ? base.get("symbol") : quote.get("symbol")) || null
                }) : null,
                this.state.isConfirmBuyOrderModalVisible || this.state.isConfirmBuyOrderModalLoaded ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_ConfirmOrderModal__WEBPACK_IMPORTED_MODULE_26__["default"], {
                    visible: this.state.isConfirmBuyOrderModalVisible,
                    hideModal: this.hideConfirmBuyOrderModal,
                    type: "buy",
                    onForce: this._forceBuy.bind(this, "buy", buyFeeAsset, baseBalance, coreBalance),
                    diff: buyDiff,
                    hasOrders: combinedAsks.length > 0
                }) : null,
                this.state.isConfirmSellOrderModalVisible || this.state.isConfirmSellOrderModalLoaded ? react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_ConfirmOrderModal__WEBPACK_IMPORTED_MODULE_26__["default"], {
                    visible: this.state.isConfirmSellOrderModalVisible,
                    hideModal: this.hideConfirmSellOrderModal,
                    type: "sell",
                    onForce: this._forceSell.bind(this, "sell", sellFeeAsset, quoteBalance, coreBalance),
                    diff: sellDiff,
                    hasOrders: combinedBids.length > 0
                }) : null,
                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_PriceAlert__WEBPACK_IMPORTED_MODULE_36__["default"], {
                    onSave: this.handlePriceAlertSave,
                    rules: this.getPriceAlertRules(),
                    latestPrice: latest && latest.getPrice(),
                    quoteAsset: this.props.quoteAsset.get("id"),
                    baseAsset: this.props.baseAsset.get("id"),
                    visible: this.state.isPriceAlertModalVisible,
                    showModal: this.showPriceAlertModal,
                    hideModal: this.hidePriceAlertModal
                })
            );
        }
    }]);

    return Exchange;
}(react__WEBPACK_IMPORTED_MODULE_9___default.a.Component);

Exchange.propTypes = {
    marketCallOrders: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.object.isRequired,
    activeMarketHistory: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.object.isRequired,
    viewSettings: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.object.isRequired
};
Exchange.defaultProps = {
    marketCallOrders: [],
    activeMarketHistory: {},
    viewSettings: {}
};


/* harmony default export */ __webpack_exports__["default"] = (Exchange);

/***/ }),

/***/ 2782:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(571);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2469);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2003);
/* harmony import */ var _Utility_PriceText__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2783);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2129);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(598);
/* harmony import */ var _ExchangeInput__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2389);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(582);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(737);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(796);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(1894);
/* harmony import */ var _Modal_SettleModal__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2784);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2370);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var _stores_AccountStore__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(553);
/* harmony import */ var _stores_GatewayStore__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(2130);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

























var BuySell = function (_React$Component) {
    _inherits(BuySell, _React$Component);

    function BuySell() {
        _classCallCheck(this, BuySell);

        var _this = _possibleConstructorReturn(this, (BuySell.__proto__ || Object.getPrototypeOf(BuySell)).call(this));

        _this.getDatePickerRef = function (node) {
            _this.datePricker = node;
        };

        _this.handleQuickDepositVisibleChange = function (visible) {
            _this.setState({ isQuickDepositVisible: visible });
            if (visible) {
                setTimeout(function () {
                    react_tooltip__WEBPACK_IMPORTED_MODULE_19___default.a.rebuild();
                }, 20);
            }
        };

        _this.onExpirationSelectChange = function (e) {
            if (e.target.value === "SPECIFIC") {
                _this.datePricker.picker.handleOpenChange(true);
            } else {
                _this.datePricker.picker.handleOpenChange(false);
            }

            _this.props.onExpirationTypeChange(e);
        };

        _this.onExpirationSelectClick = function (e) {
            if (e.target.value === "SPECIFIC") {
                if (_this.firstClick) {
                    _this.secondClick = true;
                }
                _this.firstClick = true;
                if (_this.secondClick) {
                    _this.datePricker.picker.handleOpenChange(true);
                    _this.firstClick = false;
                    _this.secondClick = false;
                }
            }
        };

        _this.onExpirationSelectBlur = function () {
            _this.firstClick = false;
            _this.secondClick = false;
        };

        _this.state = {
            forceReRender: false,
            isSettleModalVisible: false
        };

        _this.showSettleModal = _this.showSettleModal.bind(_this);
        _this.hideSettleModal = _this.hideSettleModal.bind(_this);
        return _this;
    }

    /*
     * Force re-rendering component when state changes.
     * This is required for an updated value of component width
     *
     * It will trigger a re-render twice
     * - Once when state is changed
     * - Once when forceReRender is set to false
     */


    _createClass(BuySell, [{
        key: "_forceRender",
        value: function _forceRender(np) {
            if (this.state.forceReRender) {
                this.setState({
                    forceReRender: false
                });
            }

            if (this.props.parentWidth !== np.parentWidth) {
                this.setState({
                    forceReRender: true
                });
            }
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps, nextState) {
            this._forceRender(nextProps, nextState);

            return nextState.isSettleModalVisible !== this.state.isSettleModalVisible || nextProps.amount !== this.props.amount || nextProps.onBorrow !== this.props.onBorrow || nextProps.total !== this.props.total || nextProps.currentPrice !== this.props.currentPrice || nextProps.price !== this.props.price || nextProps.balance !== this.props.balance || nextProps.account !== this.props.account || nextProps.className !== this.props.className || (nextProps.fee && this.props.fee ? nextProps.fee.ne(this.props.fee) : false) || nextProps.isPredictionMarket !== this.props.isPredictionMarket || nextProps.feeAsset !== this.props.feeAsset || nextProps.isOpen !== this.props.isOpen || nextProps.hasFeeBalance !== this.props.hasFeeBalance || nextProps.expirationType !== this.props.expirationType || nextProps.expirationCustomTime !== this.props.expirationCustomTime || nextProps.parentWidth !== this.props.parentWidth || nextState.forceReRender !== this.state.forceReRender || nextProps.singleColumnOrderForm !== this.props.singleColumnOrderForm || nextProps.hideFunctionButtons !== this.props.hideFunctionButtons || nextState.isQuickDepositVisible !== this.state.isQuickDepositVisible;
        }
    }, {
        key: "showSettleModal",
        value: function showSettleModal() {
            this.setState({
                isSettleModalVisible: true
            });
        }
    }, {
        key: "hideSettleModal",
        value: function hideSettleModal() {
            this.setState({
                isSettleModalVisible: false
            });
        }
    }, {
        key: "_addBalance",
        value: function _addBalance(balance) {
            if (this.props.type === "bid") {
                this.props.totalChange({
                    target: { value: balance.getAmount({ real: true }).toString() }
                });
            } else {
                this.props.amountChange({
                    target: { value: balance.getAmount({ real: true }).toString() }
                });
            }
        }
    }, {
        key: "_setPrice",
        value: function _setPrice(price) {
            this.props.priceChange({ target: { value: price.toString() } });
        }
    }, {
        key: "onDeposit",
        value: function onDeposit() {
            this.setState({
                isQuickDepositVisible: false
            });
            this.props.onDeposit();
        }
    }, {
        key: "onBuy",
        value: function onBuy() {
            this.setState({
                isQuickDepositVisible: false
            });
            this.props.onBuy();
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var _props = this.props,
                type = _props.type,
                quote = _props.quote,
                base = _props.base,
                amountChange = _props.amountChange,
                fee = _props.fee,
                isPredictionMarket = _props.isPredictionMarket,
                priceChange = _props.priceChange,
                onSubmit = _props.onSubmit,
                balance = _props.balance,
                totalChange = _props.totalChange,
                balancePrecision = _props.balancePrecision,
                currentPrice = _props.currentPrice,
                currentPriceObject = _props.currentPriceObject,
                feeAsset = _props.feeAsset,
                feeAssets = _props.feeAssets,
                hasFeeBalance = _props.hasFeeBalance,
                hideHeader = _props.hideHeader,
                verticalOrderForm = _props.verticalOrderForm;
            var expirationCustomTime = this.props.expirationCustomTime;


            var clientWidth = this.refs.order_form ? this.refs.order_form.clientWidth : 0;
            var singleColumnForm = clientWidth < 450 || this.props.singleColumnOrderForm ? true : false;

            var amount = void 0,
                price = void 0,
                total = void 0;

            if (this.props.amount) amount = this.props.amount;
            if (this.props.price) price = this.props.price;
            if (this.props.total) total = this.props.total;

            var balanceAmount = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_11__["Asset"]({
                amount: balance ? balance.get("balance") : 0,
                precision: balancePrecision,
                asset_id: this.props.balanceId
            });

            var maxBaseMarketFee = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_11__["Asset"]({
                amount: base.getIn(["options", "max_market_fee"]),
                asset_id: base.get("asset_id"),
                precision: base.get("precision")
            });
            var maxQuoteMarketFee = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_11__["Asset"]({
                amount: quote.getIn(["options", "max_market_fee"]),
                asset_id: quote.get("asset_id"),
                precision: quote.get("precision")
            });
            var baseMarketFeePercent = base.getIn(["options", "market_fee_percent"]) / 100 + "%";
            var quoteMarketFeePercent = quote.getIn(["options", "market_fee_percent"]) / 100 + "%";
            var quoteFee = !amount ? 0 : Math.min(maxQuoteMarketFee.getAmount({ real: true }), amount * quote.getIn(["options", "market_fee_percent"]) / 10000).toFixed(maxQuoteMarketFee.precision);
            var baseFee = !amount ? 0 : Math.min(maxBaseMarketFee.getAmount({ real: true }), total * base.getIn(["options", "market_fee_percent"]) / 10000).toFixed(maxBaseMarketFee.precision);
            var baseFlagBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getFlagBooleans(base.getIn(["options", "flags"]), base.has("bitasset_data_id"));
            var quoteFlagBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getFlagBooleans(quote.getIn(["options", "flags"]), quote.has("bitasset_data_id"));

            var _utils$replaceName = common_utils__WEBPACK_IMPORTED_MODULE_3__["default"].replaceName(this.props.base),
                baseName = _utils$replaceName.name,
                basePrefix = _utils$replaceName.prefix;

            var baseMarketFee = baseFlagBooleans["charge_market_fee"] ? verticalOrderForm ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Tooltip"],
                {
                    title: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("tooltip.market_fee", {
                        percent: baseMarketFeePercent,
                        asset: (basePrefix || "") + baseName
                    })
                },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "grid-block no-overflow wrap shrink" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "small-12 buy-sell-label" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.asset.summary.market_fee" }),
                        ", ",
                        baseMarketFeePercent
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "inputAddon small-12" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                            placeholder: "0.0",
                            id: "baseMarketFee",
                            defaultValue: baseFee,
                            value: baseFee,
                            addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "span",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                    noTip: true,
                                    name: base.get("symbol")
                                })
                            )
                        })
                    )
                )
            ) : singleColumnForm ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Tooltip"],
                {
                    title: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("tooltip.market_fee", {
                        percent: baseMarketFeePercent,
                        asset: (basePrefix || "") + baseName
                    })
                },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "grid-block no-overflow wrap shrink" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "small-3 buy-sell-label" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.asset.summary.market_fee" }),
                        ", ",
                        baseMarketFeePercent
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "inputAddon small-9" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                            placeholder: "0.0",
                            id: "baseMarketFee",
                            defaultValue: baseFee,
                            value: baseFee,
                            addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "span",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                    noTip: true,
                                    name: base.get("symbol")
                                })
                            )
                        })
                    )
                )
            ) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Tooltip"],
                {
                    title: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("tooltip.market_fee", {
                        percent: baseMarketFeePercent,
                        asset: (basePrefix || "") + baseName
                    })
                },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "grid-block no-overflow wrap shrink" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "small-12 buy-sell-label" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.asset.summary.market_fee" }),
                        ", ",
                        baseMarketFeePercent
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "inputAddon small-12" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                            placeholder: "0.0",
                            id: "baseMarketFee",
                            defaultValue: baseFee,
                            value: baseFee,
                            addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "span",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                    noTip: true,
                                    name: base.get("symbol")
                                })
                            )
                        })
                    )
                )
            ) : null;

            var _utils$replaceName2 = common_utils__WEBPACK_IMPORTED_MODULE_3__["default"].replaceName(this.props.quote),
                quoteName = _utils$replaceName2.name,
                quotePrefix = _utils$replaceName2.prefix;

            var quoteMarketFee = quoteFlagBooleans["charge_market_fee"] ? verticalOrderForm ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Tooltip"],
                {
                    title: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("tooltip.market_fee", {
                        percent: quoteMarketFeePercent,
                        asset: (quotePrefix || "") + quoteName
                    })
                },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "grid-block no-overflow wrap shrink" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "small-12 buy-sell-label" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.asset.summary.market_fee" }),
                        ", ",
                        quoteMarketFeePercent
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "inputAddon small-12" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                            placeholder: "0.0",
                            id: "quoteMarketFee",
                            defaultValue: quoteFee,
                            value: quoteFee,
                            addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "span",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                    style: { width: 100 },
                                    noTip: true,
                                    name: quote.get("symbol")
                                })
                            )
                        })
                    )
                )
            ) : singleColumnForm ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Tooltip"],
                {
                    title: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("tooltip.market_fee", {
                        percent: quoteMarketFeePercent,
                        asset: (quotePrefix || "") + quoteName
                    })
                },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "grid-block no-overflow wrap shrink" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "small-3 buy-sell-label" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.asset.summary.market_fee" }),
                        ", ",
                        quoteMarketFeePercent
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "inputAddon small-9" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                            placeholder: "0.0",
                            id: "quoteMarketFee",
                            defaultValue: quoteFee,
                            value: quoteFee,
                            addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "span",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                    style: { width: 100 },
                                    noTip: true,
                                    name: quote.get("symbol")
                                })
                            )
                        })
                    )
                )
            ) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Tooltip"],
                {
                    title: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("tooltip.market_fee", {
                        percent: quoteMarketFeePercent,
                        asset: (quotePrefix || "") + quoteName
                    })
                },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "grid-block no-overflow wrap shrink" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "small-12 buy-sell-label" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.asset.summary.market_fee" }),
                        ", ",
                        quoteMarketFeePercent
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "inputAddon small-12" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                            placeholder: "0.0",
                            id: "quoteMarketFee",
                            defaultValue: quoteFee,
                            value: quoteFee,
                            addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "span",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                    style: { width: 100 },
                                    noTip: true,
                                    name: quote.get("symbol")
                                })
                            )
                        })
                    )
                )
            ) : null;

            var emptyCell = !verticalOrderForm ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "div",
                {
                    style: { visibility: "hidden" },
                    className: "grid-block no-overflow wrap shrink"
                },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "small-3 buy-sell-label" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.asset.summary.market_fee" })
                ),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "inputAddon small-9" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                        placeholder: "0.0",
                        id: "emptyPlaceholder",
                        defaultValue: "0",
                        addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "span",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                style: { width: 100 },
                                noTip: true,
                                name: quote.get("symbol")
                            })
                        )
                    })
                )
            ) : null;

            var isBid = type === "bid";
            var marketFee = isBid && quoteMarketFee ? quoteMarketFee : !isBid && baseMarketFee ? baseMarketFee : quoteMarketFee || baseMarketFee ? emptyCell : null;

            var hasBalance = isBid ? balanceAmount.getAmount({ real: true }) >= parseFloat(total) : balanceAmount.getAmount({ real: true }) >= parseFloat(amount);

            var forceSellText = isBid ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.buy") : counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.sell");

            var noBalance = isPredictionMarket ? false : !(balanceAmount.getAmount() > 0 && hasBalance);
            var invalidPrice = !(price > 0);
            var invalidAmount = !(amount > 0);

            var disabled = noBalance || invalidPrice || invalidAmount;

            var buttonClass = classnames__WEBPACK_IMPORTED_MODULE_0___default()("button buySellButton", type, {
                disabled: disabled
            });
            var balanceSymbol = isBid ? base.get("symbol") : quote.get("symbol");

            var disabledText = invalidPrice ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.invalid_price") : invalidAmount ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.invalid_amount") : noBalance ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.no_balance") : null;

            // Fee asset selection
            if (feeAssets[1] && feeAssets[1].getIn(["options", "core_exchange_rate", "quote", "asset_id"]) === "1.3.0" && feeAssets[1].getIn(["options", "core_exchange_rate", "base", "asset_id"]) === "1.3.0") {
                feeAsset = feeAssets[0];
                feeAssets.splice(1, 1);
            }
            var index = 0;
            var options = feeAssets.map(function (asset) {
                var _utils$replaceName3 = common_utils__WEBPACK_IMPORTED_MODULE_3__["default"].replaceName(asset),
                    name = _utils$replaceName3.name,
                    prefix = _utils$replaceName3.prefix;

                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Select"].Option,
                    { key: asset.get("id"), value: index++ },
                    prefix,
                    name
                );
            });

            // Subtract fee from amount to sell
            var balanceToAdd = void 0;

            if (feeAsset.get("symbol") === balanceSymbol) {
                balanceToAdd = balanceAmount.clone(balanceAmount.getAmount() - fee.getAmount());
            } else {
                balanceToAdd = balanceAmount;
            }

            var dataIntro = isBid ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("walkthrough.buy_form") : counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("walkthrough.sell_form");

            var expirationTip = void 0;

            if (this.props.expirationType !== "SPECIFIC") {
                expirationTip = this.props.expirations[this.props.expirationType].get();
            }

            var expirationsOptionsList = Object.keys(this.props.expirations).map(function (key) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "option",
                    { value: key, key: key },
                    key === "SPECIFIC" && expirationCustomTime !== "Specific" ? moment__WEBPACK_IMPORTED_MODULE_15___default()(expirationCustomTime).format("Do MMM YYYY hh:mm A") : _this2.props.expirations[key].title
                );
            });

            var containerClass = "small-12";
            var formContent = void 0;

            // OrderForm is in panel
            if (verticalOrderForm) {
                formContent = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: containerClass },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            className: "small-12 buy-sell-label",
                            content: "exchange.price"
                        }),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "inputAddon small-12" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                id: type + "Price",
                                value: price,
                                onChange: priceChange,
                                autoComplete: "off",
                                placeholder: "0.0",
                                addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "span",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                        dataPlace: "right",
                                        name: base.get("symbol")
                                    }),
                                    "\xA0/\xA0",
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                        dataPlace: "right",
                                        name: quote.get("symbol")
                                    })
                                )
                            })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            className: "small-12 buy-sell-label",
                            content: "transfer.amount"
                        }),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "inputAddon small-12" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                id: type + "Amount",
                                value: amount,
                                onChange: amountChange,
                                autoComplete: "off",
                                placeholder: "0.0",
                                addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "span",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                        dataPlace: "right",
                                        name: quote.get("symbol")
                                    })
                                )
                            })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            className: "small-12 buy-sell-label",
                            content: "exchange.total"
                        }),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "inputAddon small-12" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                id: type + "Total",
                                value: total,
                                onChange: totalChange,
                                autoComplete: "off",
                                placeholder: "0.0",
                                addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "span",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                        dataPlace: "right",
                                        name: base.get("symbol")
                                    })
                                )
                            })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            className: "small-12 buy-sell-label",
                            content: "transfer.fee"
                        }),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "inputAddon small-12" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                id: type + "Fee",
                                placeholder: "0.0",
                                defaultValue: !hasFeeBalance ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("transfer.errors.insufficient") : fee.getAmount({ real: true }),
                                disabled: true,
                                addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Select"],
                                    {
                                        style: { width: 100 },
                                        disabled: feeAssets.length === 1,
                                        defaultValue: feeAssets.indexOf(this.props.feeAsset),
                                        onChange: this.props.onChangeFeeAsset
                                    },
                                    options
                                )
                            })
                        )
                    ),
                    marketFee
                );
            } else {
                formContent = singleColumnForm ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: containerClass },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            className: "small-3 buy-sell-label",
                            content: "exchange.price"
                        }),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "inputAddon small-9" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                id: type + "Price",
                                value: price,
                                onChange: priceChange,
                                autoComplete: "off",
                                placeholder: "0.0",
                                addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "span",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                        dataPlace: "right",
                                        name: base.get("symbol")
                                    }),
                                    "\xA0/\xA0",
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                        dataPlace: "right",
                                        name: quote.get("symbol")
                                    })
                                )
                            })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            className: "small-3 buy-sell-label",
                            content: "transfer.amount"
                        }),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "inputAddon small-9" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                id: type + "Amount",
                                value: amount,
                                onChange: amountChange,
                                autoComplete: "off",
                                placeholder: "0.0",
                                addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "span",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                        dataPlace: "right",
                                        name: quote.get("symbol")
                                    })
                                )
                            })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            className: "small-3 buy-sell-label",
                            content: "exchange.total"
                        }),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "inputAddon small-9" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                id: type + "Total",
                                value: total,
                                onChange: totalChange,
                                autoComplete: "off",
                                placeholder: "0.0",
                                addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "span",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                        dataPlace: "right",
                                        name: base.get("symbol")
                                    })
                                )
                            })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            className: "small-3 buy-sell-label",
                            content: "transfer.fee"
                        }),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "inputAddon small-9" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                id: type + "Fee",
                                placeholder: "0.0",
                                value: !hasFeeBalance ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("transfer.errors.insufficient") : fee.getAmount({ real: true }),
                                disabled: true,
                                addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Select"],
                                    {
                                        style: { width: 100 },
                                        disabled: feeAssets.length === 1,
                                        defaultValue: feeAssets.indexOf(this.props.feeAsset),
                                        onChange: this.props.onChangeFeeAsset
                                    },
                                    options
                                )
                            })
                        )
                    ),
                    marketFee
                ) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: containerClass },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "div",
                                { className: "small-11 grid-block no-overflow wrap shrink" },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                    className: "small-3 buy-sell-label",
                                    content: "exchange.price"
                                }),
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "div",
                                    {
                                        className: "small-9 buy-sell-label",
                                        style: { textAlign: "right" }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "span",
                                        {
                                            style: {
                                                borderBottom: "#A09F9F 1px dotted",
                                                cursor: "pointer"
                                            },
                                            onClick: this.props.setPrice.bind(this, type, currentPriceObject.sellPrice())
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_PriceText__WEBPACK_IMPORTED_MODULE_9__["default"], {
                                            price: currentPrice,
                                            quote: quote,
                                            base: base
                                        }),
                                        " "
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "div",
                                { className: "inputAddon small-11" },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                    id: type + "Price",
                                    value: price,
                                    onChange: priceChange,
                                    autoComplete: "off",
                                    placeholder: "0.0",
                                    addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                            dataPlace: "right",
                                            name: base.get("symbol")
                                        }),
                                        "\xA0/\xA0",
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                            dataPlace: "right",
                                            name: quote.get("symbol")
                                        })
                                    )
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "div",
                                { className: "small-12 grid-block no-overflow wrap shrink" },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                    className: "small-3 buy-sell-label",
                                    content: "exchange.total"
                                }),
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "div",
                                    {
                                        className: "small-9 buy-sell-label",
                                        style: { textAlign: "right" }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                        className: "small-3 buy-sell-label",
                                        content: "exchange.balance"
                                    }),
                                    "\xA0",
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "span",
                                        {
                                            style: {
                                                borderBottom: "#A09F9F 1px dotted",
                                                cursor: "pointer"
                                            },
                                            onClick: this._addBalance.bind(this, balanceToAdd)
                                        },
                                        common_utils__WEBPACK_IMPORTED_MODULE_3__["default"].format_number(balanceAmount.getAmount({
                                            real: true
                                        }), balancePrecision),
                                        " "
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "div",
                                { className: "inputAddon small-12" },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                    id: type + "Total",
                                    value: total,
                                    onChange: totalChange,
                                    autoComplete: "off",
                                    placeholder: "0.0",
                                    addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                            dataPlace: "right",
                                            name: base.get("symbol")
                                        })
                                    )
                                })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                className: "small-3 buy-sell-label",
                                content: "transfer.amount"
                            }),
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "div",
                                { className: "inputAddon small-11" },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                    id: type + "Amount",
                                    value: amount,
                                    onChange: amountChange,
                                    autoComplete: "off",
                                    placeholder: "0.0",
                                    addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                            dataPlace: "right",
                                            name: quote.get("symbol")
                                        })
                                    )
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                className: "small-3 buy-sell-label",
                                content: "transfer.fee"
                            }),
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "div",
                                { className: "inputAddon small-12" },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ExchangeInput__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                    id: type + "Fee",
                                    placeholder: "0.0",
                                    defaultValue: !hasFeeBalance ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("transfer.errors.insufficient") : fee.getAmount({ real: true }),
                                    disabled: true,
                                    addonAfter: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Select"],
                                        {
                                            style: { width: 100 },
                                            disabled: feeAssets.length === 1,
                                            defaultValue: feeAssets.indexOf(this.props.feeAsset),
                                            onChange: this.props.onChangeFeeAsset
                                        },
                                        options
                                    )
                                })
                            )
                        )
                    )
                );
            }

            var otherAsset = isBid ? base : quote;
            var isBitAsset = !!otherAsset.get("bitasset");
            // check if globally settled
            var isGloballySettled = isBitAsset && otherAsset.get("bitasset").get("settlement_fund") > 0;

            var currentAccount = _stores_AccountStore__WEBPACK_IMPORTED_MODULE_20__["default"].getState().currentAccount;

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "div",
                {
                    className: classnames__WEBPACK_IMPORTED_MODULE_0___default()(this.props.className),
                    style: this.props.styles
                },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    {
                        className: "buy-sell-container",
                        style: { paddingRight: 5 }
                        //data-intro={dataIntro}
                    },
                    !hideHeader ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        {
                            className: "exchange-content-header exchange-content-header--buy-sell-form " + type
                        },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "span",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                string: "exchange.buysell_formatter",
                                noLink: true,
                                noTip: true,
                                keys: [{
                                    type: "asset",
                                    value: quote.get("symbol"),
                                    arg: "asset"
                                }, {
                                    type: "translate",
                                    value: isPredictionMarket ? "exchange.short" : isBid ? "exchange.buy" : "exchange.sell",
                                    arg: "direction"
                                }]
                            })
                        ),
                        this.props.onFlip && !this.props.hideFunctionButtons ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "span",
                            {
                                onClick: this.props.onFlip,
                                style: {
                                    cursor: "pointer",
                                    fontSize: "1rem"
                                },
                                className: "flip-arrow"
                            },
                            " ",
                            "\u21C6"
                        ) : null,
                        this.props.onTogglePosition && !this.props.hideFunctionButtons ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "span",
                            {
                                onClick: this.props.onTogglePosition,
                                style: {
                                    cursor: "pointer",
                                    fontSize: "1rem"
                                },
                                className: "flip-arrow"
                            },
                            " ",
                            "\u21C5"
                        ) : null,
                        this.props.moveOrderForm && !this.props.hideFunctionButtons ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_16__["default"], {
                            onClick: this.props.moveOrderForm,
                            name: "thumb-tack",
                            className: "icon-14px icon-fill order-book-button-v",
                            style: { marginLeft: 5 }
                        }) : null
                    ) : null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "form",
                        {
                            ref: "order_form",
                            className: (!this.props.isOpen ? "hide-container " : "") + "order-form",
                            style: { fontSize: "14px" },
                            noValidate: true
                        },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "grid-block no-overflow wrap shrink" },
                            this.props.moveOrderForm && verticalOrderForm ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "div",
                                {
                                    style: { width: "100%", textAlign: "right" },
                                    onClick: this.props.moveOrderForm
                                },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_16__["default"], {
                                    name: "thumb-tack",
                                    className: "icon-18px icon-fill order-book-button-v"
                                })
                            ) : null,
                            formContent
                        ),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "grid-block no-overflow wrap shrink" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "div",
                                {
                                    className: singleColumnForm ? "small-12 grid-block" : "small-6"
                                },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                    className: "small-4 buy-sell-label",
                                    content: "transaction.expiration"
                                }),
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "div",
                                    { className: "small-8 expiration-datetime-picker" },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_14__["DatePicker"], {
                                        ref: this.getDatePickerRef,
                                        className: "expiration-datetime-picker--hidden",
                                        showTime: true,
                                        showToday: false,
                                        disabledDate: function disabledDate(current) {
                                            return current < moment__WEBPACK_IMPORTED_MODULE_15___default()().add(59, "minutes");
                                        },
                                        value: expirationCustomTime !== "Specific" ? expirationCustomTime : moment__WEBPACK_IMPORTED_MODULE_15___default()().add(1, "hour"),
                                        onChange: this.props.onExpirationCustomChange
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "select",
                                        {
                                            className: "cursor-pointer",
                                            onChange: this.onExpirationSelectChange,
                                            onClick: this.onExpirationSelectClick,
                                            onBlur: this.onExpirationSelectBlur,
                                            "data-tip": expirationTip && moment__WEBPACK_IMPORTED_MODULE_15___default()(expirationTip).format("Do MMM YYYY hh:mm A"),
                                            value: this.props.expirationType
                                        },
                                        expirationsOptionsList
                                    )
                                )
                            ),
                            !singleColumnForm ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "div",
                                { className: "small-6" },
                                marketFee
                            ) : null,
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "div",
                                { className: "small-12 medium-12 xlarge-12" },
                                singleColumnForm ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "div",
                                    { className: "grid-block no-overflow wrap shrink" },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                        className: "small-4 buy-sell-label",
                                        content: isBid ? "exchange.lowest_ask" : "exchange.highest_bid"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "div",
                                        { className: "small-8 buy-sell-label" },
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            "span",
                                            {
                                                style: {
                                                    borderBottom: "#A09F9F 1px dotted",
                                                    cursor: "pointer"
                                                },
                                                onClick: this.props.setPrice.bind(this, type, currentPriceObject.sellPrice())
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_PriceText__WEBPACK_IMPORTED_MODULE_9__["default"], {
                                                price: currentPrice,
                                                quote: quote,
                                                base: base
                                            }),
                                            " ",
                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                                name: base.get("symbol"),
                                                noTip: true
                                            }),
                                            "/",
                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                                name: quote.get("symbol"),
                                                noTip: true
                                            })
                                        )
                                    )
                                ) : null,
                                singleColumnForm ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "div",
                                    { className: "grid-block no-overflow wrap shrink" },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                        className: "small-4 buy-sell-label",
                                        content: "exchange.balance"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "div",
                                        { className: "small-8 buy-sell-label" },
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            "span",
                                            {
                                                style: {
                                                    borderBottom: "#A09F9F 1px dotted",
                                                    cursor: "pointer"
                                                },
                                                onClick: this._addBalance.bind(this, balanceToAdd)
                                            },
                                            common_utils__WEBPACK_IMPORTED_MODULE_3__["default"].format_number(balanceAmount.getAmount({
                                                real: true
                                            }), balancePrecision),
                                            " ",
                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                                name: balanceSymbol,
                                                noTip: true
                                            })
                                        )
                                    )
                                ) : null,
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "div",
                                    { style: { marginTop: 10 } },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Tooltip"],
                                            {
                                                placement: "top",
                                                title: disabledText ? disabledText : ""
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                "div",
                                                {
                                                    className: "float-right",
                                                    "data-tip": disabledText,
                                                    "data-place": "right"
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Button"],
                                                    {
                                                        className: disabled ? null : buttonClass,
                                                        disabled: disabled,
                                                        onClick: onSubmit.bind(this, true),
                                                        type: "primary",
                                                        style: {
                                                            margin: "5px",
                                                            padding: "10px",
                                                            borderRadius: "5px",
                                                            opacity: 0.5
                                                        }
                                                    },
                                                    isBid ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.buy") : counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.sell")
                                                )
                                            )
                                        ),
                                        this.props.currentBridges && !this.props.backedCoin ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Tooltip"],
                                            {
                                                title: _stores_GatewayStore__WEBPACK_IMPORTED_MODULE_21__["default"].isDown("TRADE") ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("external_service_provider.is_down") : counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.quick_deposit_bridge", {
                                                    target: isBid ? baseName : quoteName
                                                })
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Button"],
                                                {
                                                    style: { margin: 5 },
                                                    onClick: this.props.onBuy.bind(this),
                                                    disabled: _stores_GatewayStore__WEBPACK_IMPORTED_MODULE_21__["default"].isDown("TRADE") || !this.props.currentAccount || this.props.currentAccount.get("id") === "1.2.3"
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                                    content: "exchange.quick_deposit",
                                                    asset: isBid ? baseName : quoteName
                                                })
                                            )
                                        ) : null,
                                        this.props.backedCoin && !this.props.currentBridges ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Tooltip"],
                                            {
                                                title: _stores_GatewayStore__WEBPACK_IMPORTED_MODULE_21__["default"].isDown("OPEN") ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("external_service_provider.is_down") : counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("tooltip.gateway")
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Button"],
                                                {
                                                    style: { margin: 5 },
                                                    onClick: this.props.onDeposit.bind(this),
                                                    disabled: _stores_GatewayStore__WEBPACK_IMPORTED_MODULE_21__["default"].isDown("OPEN") || !this.props.currentAccount || this.props.currentAccount.get("id") === "1.2.3"
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                                    content: "exchange.quick_deposit",
                                                    asset: isBid ? baseName : quoteName
                                                })
                                            )
                                        ) : null,
                                        this.props.currentBridges && this.props.backedCoin ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Popover"],
                                            {
                                                title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                                    content: "exchange.quick_deposit",
                                                    asset: isBid ? baseName : quoteName
                                                }),
                                                trigger: "click",
                                                visible: this.state.isQuickDepositVisible,
                                                onVisibleChange: this.handleQuickDepositVisibleChange,
                                                content: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "div",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Tooltip"],
                                                        {
                                                            title: _stores_GatewayStore__WEBPACK_IMPORTED_MODULE_21__["default"].isDown("OPEN") ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("external_service_provider.is_down") : counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.quick_deposit_gateway", {
                                                                asset: isBid ? baseName : quoteName
                                                            })
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Button"],
                                                            {
                                                                style: {
                                                                    marginRight: 5
                                                                },
                                                                onClick: this.onDeposit.bind(this),
                                                                disabled: _stores_GatewayStore__WEBPACK_IMPORTED_MODULE_21__["default"].isDown("OPEN")
                                                            },
                                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                                                content: "exchange.quick_deposit_gateway_button" })
                                                        )
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Tooltip"],
                                                        {
                                                            title: _stores_GatewayStore__WEBPACK_IMPORTED_MODULE_21__["default"].isDown("TRADE") ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("external_service_provider.is_down") : counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.quick_deposit_bridge", {
                                                                target: isBid ? baseName : quoteName
                                                            })
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Button"],
                                                            {
                                                                onClick: this.onBuy.bind(this),
                                                                disabled: _stores_GatewayStore__WEBPACK_IMPORTED_MODULE_21__["default"].isDown("TRADE")
                                                            },
                                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                                                content: "exchange.quick_deposit_bridge_button" })
                                                        )
                                                    )
                                                )
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Tooltip"],
                                                {
                                                    title: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.quick_deposit_tooltip", {
                                                        asset: isBid ? baseName : quoteName
                                                    })
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Button"],
                                                    {
                                                        style: { margin: 5 },
                                                        disabled: !this.props.currentAccount || this.props.currentAccount.get("id") === "1.2.3"
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                                        content: "exchange.quick_deposit",
                                                        asset: isBid ? baseName : quoteName
                                                    })
                                                )
                                            )
                                        ) : null,
                                        this.props.onBorrow && !isGloballySettled ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Button"],
                                            {
                                                style: { margin: 5 },
                                                disabled: !this.props.currentAccount || this.props.currentAccount.get("id") === "1.2.3",
                                                onClick: this.props.onBorrow
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "exchange.borrow" })
                                        ) : null,
                                        isGloballySettled ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Button"],
                                            {
                                                style: { margin: 5 },
                                                disabled: !this.props.currentAccount || this.props.currentAccount.get("id") === "1.2.3",
                                                onClick: this.showSettleModal,
                                                "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.settle_globally_settled_tooltip")
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "exchange.settle_globally_settled" })
                                        ) : null
                                    )
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "div",
                                { className: "grid-content clear-fix no-padding" },
                                disabledText && isPredictionMarket ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Tooltip"],
                                    {
                                        title: disabledText,
                                        placement: "right"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "div",
                                        {
                                            style: { paddingRight: 10 },
                                            className: "float-right",
                                            "data-place": "right"
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", {
                                            style: { margin: 0 },
                                            className: buttonClass,
                                            type: "submit",
                                            onClick: onSubmit.bind(this, false),
                                            value: forceSellText
                                        })
                                    )
                                ) : isPredictionMarket ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_18__["Tooltip"],
                                    { title: "", placement: "right" },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "div",
                                        {
                                            style: { paddingRight: 10 },
                                            className: "float-right",
                                            "data-place": "right"
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", {
                                            style: { margin: 0 },
                                            className: buttonClass,
                                            type: "submit",
                                            onClick: onSubmit.bind(this, false),
                                            value: forceSellText
                                        })
                                    )
                                ) : null
                            )
                        )
                    )
                ),
                isGloballySettled && !!this.props.currentAccount && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Modal_SettleModal__WEBPACK_IMPORTED_MODULE_17__["default"], {
                    visible: this.state.isSettleModalVisible,
                    hideModal: this.hideSettleModal,
                    showModal: this.showSettleModal,
                    asset: otherAsset.get("id"),
                    account: this.props.currentAccount
                })
            );
        }
    }]);

    return BuySell;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

BuySell.propTypes = {
    balance: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_7__["default"].ChainObject,
    type: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
    amountChange: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func.isRequired,
    priceChange: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func.isRequired,
    onSubmit: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func.isRequired,
    onExpirationTypeChange: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func.isRequired,
    onExpirationCustomChange: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func.isRequired
};
BuySell.defaultProps = {
    type: "bid"
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_8__["default"])(BuySell));

/***/ }),

/***/ 2783:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(571);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }




var PriceText = function (_React$Component) {
    _inherits(PriceText, _React$Component);

    function PriceText() {
        _classCallCheck(this, PriceText);

        return _possibleConstructorReturn(this, (PriceText.__proto__ || Object.getPrototypeOf(PriceText)).apply(this, arguments));
    }

    _createClass(PriceText, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                price = _props.price,
                preFormattedPrice = _props.preFormattedPrice,
                quote = _props.quote,
                base = _props.base;

            if (!price && !preFormattedPrice) return null;
            var formattedPrice = !!preFormattedPrice ? preFormattedPrice : common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].price_to_text(price, quote, base);

            if (formattedPrice.full >= 1) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { className: "price-integer" },
                        formattedPrice.int,
                        "."
                    ),
                    formattedPrice.dec ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { className: "price-integer" },
                        formattedPrice.dec
                    ) : null,
                    formattedPrice.trailing ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { className: "price-decimal" },
                        formattedPrice.trailing
                    ) : null
                );
            } else if (formattedPrice.full >= 0.1) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { className: "price-decimal" },
                        formattedPrice.int,
                        "."
                    ),
                    formattedPrice.dec ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { className: "price-integer" },
                        formattedPrice.dec
                    ) : null,
                    formattedPrice.trailing ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { className: "price-decimal" },
                        formattedPrice.trailing
                    ) : null
                );
            } else {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { className: "price-decimal" },
                        formattedPrice.int,
                        "."
                    ),
                    formattedPrice.dec ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { className: "price-decimal" },
                        formattedPrice.dec
                    ) : null,
                    formattedPrice.trailing ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { className: "price-integer" },
                        formattedPrice.trailing
                    ) : null
                );
            }
        }
    }]);

    return PriceText;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (PriceText);

/***/ }),

/***/ 2787:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(796);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2469);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2129);
/* harmony import */ var _services_Exchange__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2710);
/* harmony import */ var _lib_common_MarketClasses__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(598);
/* harmony import */ var bitsharesjs_es_chain_src_ChainStore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(526);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2788);
/* harmony import */ var _lib_common_asset_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(582);
/* harmony import */ var _lib_common_trxHelper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(597);
/* harmony import */ var _Utility_PriceText__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2783);
/* harmony import */ var _services_Math__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2790);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(737);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }


















var ScaledOrderForm = function (_Component) {
    _inherits(ScaledOrderForm, _Component);

    function ScaledOrderForm(props) {
        _classCallCheck(this, ScaledOrderForm);

        var _this = _possibleConstructorReturn(this, (ScaledOrderForm.__proto__ || Object.getPrototypeOf(ScaledOrderForm)).call(this, props));

        _this.getDatePickerRef = function (node) {
            _this.datePricker = node;
        };

        _this.onExpirationSelectChange = function (e) {
            if (e.target.value === "SPECIFIC") {
                _this.datePricker.picker.handleOpenChange(true);
            } else {
                _this.datePricker.picker.handleOpenChange(false);
            }

            _this.props.onExpirationTypeChange(e);
        };

        _this.onExpirationSelectClick = function (e) {
            if (e.target.value === "SPECIFIC") {
                if (_this.firstClick) {
                    _this.secondClick = true;
                }
                _this.firstClick = true;
                if (_this.secondClick) {
                    _this.datePricker.picker.handleOpenChange(true);
                    _this.firstClick = false;
                    _this.secondClick = false;
                }
            }
        };

        _this.onExpirationSelectBlur = function () {
            _this.firstClick = false;
            _this.secondClick = false;
        };

        _this.state = {
            orderCount: 1,
            feeAssets: []
        };

        _this.handleClickBalance = _this.handleClickBalance.bind(_this);
        _this.handleCurrentPriceClick = _this.handleCurrentPriceClick.bind(_this);
        return _this;
    }

    _createClass(ScaledOrderForm, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            this._checkFeeAssets();
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            var _this2 = this;

            var orderCount = Number(this._getFormValues().orderCount || 1);
            var stateOrderCount = Number(this.state.orderCount);

            if (!isNaN(stateOrderCount) && !isNaN(orderCount) && Number(this.state.orderCount) !== orderCount) {
                this.setState({
                    orderCount: orderCount
                }, function () {
                    _this2._checkFeeAssets();
                });
            }
        }
    }, {
        key: "isFormValid",
        value: function isFormValid() {
            var formValues = this._getFormValues();

            if (!formValues) return false;

            if (!formValues.priceLower || isNaN(Number(formValues.priceLower)) || Number(formValues.priceLower) <= 0) return false;

            if (!formValues.amount || isNaN(Number(formValues.amount)) || Number(formValues.amount) <= 0) return false;

            if (!formValues.priceUpper || isNaN(Number(formValues.priceUpper)) || Number(formValues.priceUpper) <= 0 || Number(formValues.priceUpper) <= Number(formValues.priceLower)) return false;

            if (!formValues.orderCount || isNaN(Number(formValues.orderCount)) || Number(formValues.orderCount) <= 1) return false;

            return true;
        }
    }, {
        key: "_getBaseAssetFlags",
        value: function _getBaseAssetFlags() {
            return _lib_common_asset_utils__WEBPACK_IMPORTED_MODULE_10__["default"].getFlagBooleans(this.props.baseAsset.getIn(["options", "flags"]), this.props.baseAsset.has("bitasset_data_id"));
        }
    }, {
        key: "_getQuoteAssetFlags",
        value: function _getQuoteAssetFlags() {
            return _lib_common_asset_utils__WEBPACK_IMPORTED_MODULE_10__["default"].getFlagBooleans(this.props.quoteAsset.getIn(["options", "flags"]), this.props.quoteAsset.has("bitasset_data_id"));
        }
    }, {
        key: "_isMarketFeeVisible",
        value: function _isMarketFeeVisible() {
            var baseAssetFlagBooleans = this._getBaseAssetFlags();

            var quoteAssetFlagBooleans = this._getQuoteAssetFlags();

            if (this._getFormValues().action === _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].SELL && baseAssetFlagBooleans.charge_market_fee) {
                return true;
            }

            if (this._getFormValues().action === _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].BUY && quoteAssetFlagBooleans.charge_market_fee) {
                return true;
            }

            return false;
        }
    }, {
        key: "_getFormValues",
        value: function _getFormValues() {
            return this.props.form.getFieldsValue();
        }
    }, {
        key: "_filterFeeStatuses",
        value: function _filterFeeStatuses(feeStatuses) {
            return feeStatuses.filter(function (feeStatus) {
                return feeStatus && feeStatus.hasPoolBalance && feeStatus.hasBalance;
            }).map(function (feeStatus) {
                return {
                    fee: feeStatus,
                    amount: feeStatus.fee.getAmount() / Math.pow(10, feeStatus.fee.precision),
                    asset: bitsharesjs_es_chain_src_ChainStore__WEBPACK_IMPORTED_MODULE_7__["default"].getAsset(feeStatus.fee.asset_id)
                };
            });
        }
    }, {
        key: "_checkFeeAssets",
        value: function _checkFeeAssets() {
            var _this3 = this;

            // get account balances, check is each balance available to pay fee
            // for limit_order, filter only available assets and put it to local state

            this._getAccountAssetsFeeStatus().then(function (feeStatuses) {
                var assets = _this3._filterFeeStatuses(feeStatuses);

                _this3.setState({
                    feeAssets: assets
                });
            });
        }
    }, {
        key: "_getAccountAssetsFeeStatus",
        value: function _getAccountAssetsFeeStatus() {
            var currentAccount = this.props.currentAccount;

            var _getFormValues2 = this._getFormValues(),
                orderCount = _getFormValues2.orderCount;

            if (!currentAccount || !currentAccount.get || !currentAccount.get("balances")) {
                return false;
            }

            return new Promise(function (resolve) {
                var promises = [];

                currentAccount.get("balances").forEach(function (balance) {
                    var balanceObj = bitsharesjs_es_chain_src_ChainStore__WEBPACK_IMPORTED_MODULE_7__["default"].getObject(balance);

                    var promise = Object(_lib_common_trxHelper__WEBPACK_IMPORTED_MODULE_11__["checkFeeStatusAsync"])({
                        accountID: currentAccount.get("id"),
                        feeID: balanceObj.get("asset_type"),
                        type: "limit_order_create",
                        operationsCount: orderCount
                    });

                    promises.push(promise);
                });

                Promise.all(promises).then(function (feesStatuses) {
                    resolve(feesStatuses);
                });
            });
        }
    }, {
        key: "_getFee",
        value: function _getFee() {
            var formValues = this._getFormValues();

            var amount = 0;

            if (formValues && formValues.feeCurrency) {
                this.state.feeAssets.forEach(function (feeAsset) {
                    if (feeAsset && feeAsset.asset && feeAsset.asset.get("symbol") === formValues.feeCurrency) {
                        amount = feeAsset.amount;
                    }
                });
            }

            return amount;
        }
    }, {
        key: "_getMarketFee",
        value: function _getMarketFee() {
            var formValues = this._getFormValues();

            var base = this.props.baseAsset;
            var quote = this.props.quoteAsset;

            var quantity = Number(this._getTotal());
            var action = formValues.action;

            if (isNaN(quantity)) return null;

            var asset = null;

            if (action === _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].SELL) asset = base;

            if (action === _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].BUY) asset = quote;

            if (!asset || !asset.get || !asset.getIn) return null;

            var maxMarketFee = new _lib_common_MarketClasses__WEBPACK_IMPORTED_MODULE_6__["Asset"]({
                amount: asset.getIn(["options", "max_market_fee"]),
                asset_id: asset.get("asset_id"),
                precision: asset.get("precision")
            });

            var marketFeePercent = this._getMarketFeePercentage();

            return !quantity ? 0 : Math.min(maxMarketFee.getAmount({ real: true }), quantity / 100 * marketFeePercent).toFixed(maxMarketFee.precision);
        }
    }, {
        key: "_getMarketFeePercentage",
        value: function _getMarketFeePercentage() {
            var _getFormValues3 = this._getFormValues(),
                action = _getFormValues3.action;

            var base = this.props.baseAsset;
            var quote = this.props.quoteAsset;

            var asset = null;

            if (action === _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].SELL) asset = base;

            if (action === _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].BUY) asset = quote;

            return Number(asset.getIn(["options", "market_fee_percent"]) / 100);
        }
    }, {
        key: "_getTotal",
        value: function _getTotal() {
            var formValues = this._getFormValues();

            var amount = Number(formValues.amount);
            var priceLower = Number(formValues.priceLower);
            var priceUpper = Number(formValues.priceUpper);
            var orderCount = Number(formValues.orderCount);

            var isCorrect = function isCorrect(value) {
                return !isNaN(value);
            };

            if (!isCorrect(priceLower) || !isCorrect(priceUpper) || !isCorrect(amount) || !isCorrect(orderCount) || orderCount <= 1 || orderCount <= 0 || priceLower >= priceUpper) return 0;

            var step = Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseDivide"])(Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseMinus"])(priceUpper, priceLower), Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseMinus"])(orderCount, 1));

            var amountPerOrder = Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseDivide"])(amount, orderCount);

            var total = 0;

            for (var i = 0; i < orderCount; i += 1) {
                // total += amountPerOrder * (priceLower + step * i);
                total = Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseAdd"])(total, Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseMultiply"])(amountPerOrder, Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseAdd"])(priceLower, Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseMultiply"])(step, i))));
            }

            return total;
        }
    }, {
        key: "_getQuantityFromTotal",
        value: function _getQuantityFromTotal(total) {
            var formValues = this._getFormValues();

            var priceLower = Number(formValues.priceLower);
            var priceUpper = Number(formValues.priceUpper);
            var orderCount = Number(formValues.orderCount);

            var isCorrect = function isCorrect(value) {
                return !isNaN(value);
            };

            if (!isCorrect(priceLower) || !isCorrect(priceUpper) || !isCorrect(total) || !isCorrect(orderCount) || orderCount <= 0 || priceLower >= priceUpper) return 0;

            var step = Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseDivide"])(Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseMinus"])(priceUpper, priceLower), Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseMinus"])(orderCount, 1));

            var sum = 0;

            for (var i = 0; i < orderCount; i += 1) {
                // sum + ((priceLower + step * i) / orderCount)

                sum = Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseAdd"])(sum, Number(Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseDivide"])(Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseAdd"])(priceLower, Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseMultiply"])(step, i)), orderCount)));
            }

            return Object(_services_Math__WEBPACK_IMPORTED_MODULE_13__["preciseDivide"])(total, sum);
        }
    }, {
        key: "_getPreviewDataSource",
        value: function _getPreviewDataSource() {
            var formValues = this._getFormValues();

            var dataSource = [];

            var action = formValues.action;
            var amount = Number(formValues.amount);
            var priceLower = Number(formValues.priceLower);
            var priceUpper = Number(formValues.priceUpper);
            var orderCount = Number(formValues.orderCount);

            var isCorrect = function isCorrect(value) {
                return !isNaN(value);
            };

            if (!isCorrect(priceLower) || !isCorrect(priceUpper) || !isCorrect(amount) || !isCorrect(orderCount) || orderCount <= 0 || priceLower >= priceUpper) return [];

            var step = ((priceUpper - priceLower) / (orderCount - 1)).toFixed(6);

            var amountPerOrder = amount / orderCount;

            for (var i = 0; i < orderCount; i += 1) {
                dataSource.push({
                    quote: amountPerOrder.toFixed(6),
                    base: (amountPerOrder * (priceLower + step * i)).toFixed(6),
                    price: (priceLower + step * i).toFixed(6)
                });
            }

            return action === _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].BUY ? dataSource.reverse() : dataSource;
        }
    }, {
        key: "handleClickBalance",
        value: function handleClickBalance() {
            if (this.props.type === "bid") {
                this.props.form.setFieldsValue({
                    amount: this._getQuantityFromTotal(this.props.baseAssetBalance)
                });
            } else {
                this.props.form.setFieldsValue({
                    amount: this.props.quoteAssetBalance
                });
            }
        }
    }, {
        key: "handleCurrentPriceClick",
        value: function handleCurrentPriceClick() {
            this.props.form.setFieldsValue({
                priceLower: this.props.currentPrice
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var _props = this.props,
                type = _props.type,
                quoteAsset = _props.quoteAsset,
                baseAsset = _props.baseAsset,
                expirationCustomTime = _props.expirationCustomTime;


            var isBid = type === "bid";

            var quote = quoteAsset;
            var base = baseAsset;

            var getFieldDecorator = this.props.form.getFieldDecorator;


            var marketFeeSymbol = isBid ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: this.props.quoteAsset.get("symbol") }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: this.props.baseAsset.get("symbol") });

            var quantitySymbol = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: this.props.quoteAsset.get("symbol") });

            var totalSymbol = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: this.props.baseAsset.get("symbol") });

            var priceSymbol = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { dataPlace: "right", name: baseAsset.get("symbol") }),
                "\xA0/\xA0",
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { dataPlace: "right", name: quoteAsset.get("symbol") })
            );

            var formItemProps = {
                labelCol: { span: 6 },
                wrapperCol: { span: 16, offset: 2 }
            };

            var actionRadio = getFieldDecorator("action", {
                initialValue: isBid ? _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].BUY : _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].SELL
            })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Radio"].Group,
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Radio"],
                    { value: _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].BUY },
                    counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("scaled_orders.action.buy")
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Radio"],
                    { value: _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].SELL },
                    counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("scaled_orders.action.sell")
                )
            ));

            var priceLowerInput = getFieldDecorator("priceLower", {
                validateFirst: true,
                validateTrigger: "onBlur",
                rules: [_services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__["Validation"].Rules.required(), _services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__["Validation"].Rules.number(), _services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__["Validation"].Rules.min({ min: 0, name: "Price", higherThan: true })]
            })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Input"], {
                placeholder: "0.0",
                style: { width: "100%" },
                autoComplete: "off",
                addonAfter: priceSymbol
            }));

            var formValues = this._getFormValues();

            var priceLower = Number(formValues && formValues.priceLower || 0);

            var priceUpperInput = getFieldDecorator("priceUpper", {
                validateFirst: true,
                validateTrigger: "onBlur",
                rules: [_services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__["Validation"].Rules.required(), _services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__["Validation"].Rules.number(), _services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__["Validation"].Rules.min({
                    min: priceLower,
                    name: "Price",
                    higherThan: true
                })]
            })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Input"], {
                placeholder: "0.0",
                style: { width: "100%" },
                autoComplete: "off",
                addonAfter: priceSymbol
            }));

            var feeCurrencySelect = getFieldDecorator("feeCurrency", {
                initialValue: bitsharesjs_es_chain_src_ChainStore__WEBPACK_IMPORTED_MODULE_7__["default"].getAsset("1.3.0") && bitsharesjs_es_chain_src_ChainStore__WEBPACK_IMPORTED_MODULE_7__["default"].getAsset("1.3.0").get && bitsharesjs_es_chain_src_ChainStore__WEBPACK_IMPORTED_MODULE_7__["default"].getAsset("1.3.0").get("symbol")
            })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Select"],
                {
                    showSearch: true,
                    dropdownMatchSelectWidth: false,
                    style: { minWidth: "80px", maxWidth: "120px" }
                },
                this.state.feeAssets && this.state.feeAssets.map && this.state.feeAssets.map(function (feeAsset) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Select"].Option,
                        {
                            key: feeAsset.asset.get("symbol"),
                            value: "" + feeAsset.asset.get("symbol")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], {
                            name: feeAsset.asset.get("symbol"),
                            noTip: true
                        })
                    );
                })
            ));

            var feeInput = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Input"], {
                disabled: true,
                placeholder: "0.0",
                style: { width: "100%" },
                autoComplete: "off",
                addonAfter: feeCurrencySelect,
                value: this._getFee()
            });

            var marketFeeInput = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Input"], {
                disabled: true,
                style: { width: "100%" },
                autoComplete: "off",
                addonAfter: marketFeeSymbol,
                value: this._getMarketFee()
            });

            var totalInput = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Input"], {
                disabled: true,
                style: { width: "100%" },
                autoComplete: "off",
                addonAfter: totalSymbol,
                value: this._getTotal()
            });

            var totalInputValidation = _services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__["Validation"].Rules.balance({
                balance: this.props.baseAssetBalance,
                symbol: this.props.baseAsset.get("symbol")
            });

            var totalInputValidator = totalInputValidation.validator(null, this._getTotal(), function (a) {
                return a === undefined;
            });
            var totalInputHelp = isBid && !totalInputValidator ? totalInputValidation.message : null;
            var totalInputStatus = isBid && !totalInputValidator ? "error" : "";

            var quantityRules = [_services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__["Validation"].Rules.required(), _services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__["Validation"].Rules.number(), _services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__["Validation"].Rules.min({ min: 0, higherThan: true, name: "Quantity" })];

            if (!isBid) {
                quantityRules.push(_services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__["Validation"].Rules.balance({
                    balance: this.props.quoteAssetBalance,
                    symbol: this.props.quoteAsset.get("symbol")
                }));
            }

            var quantityInput = getFieldDecorator("amount", {
                validateFirst: true,
                validateTrigger: "onBlur",
                rules: quantityRules
            })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Input"], {
                placeholder: "0.0",
                style: { width: "100%" },
                autoComplete: "off",
                addonAfter: quantitySymbol
            }));

            var orderCountInput = getFieldDecorator("orderCount", {
                validateFirst: true,
                rules: [_services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__["Validation"].Rules.required(), _services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__["Validation"].Rules.number(), _services_Validation_Validation__WEBPACK_IMPORTED_MODULE_9__["Validation"].Rules.min({
                    min: 1,
                    name: "Orders Count",
                    higherThan: true
                })]
            })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Input"], {
                style: { width: "100%" },
                placeholder: "0",
                autoComplete: "off",
                addonAfter: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("scaled_orders.order_s")
            }));

            var lastPriceLabel = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate(isBid ? "exchange.lowest_ask" : "exchange.highest_bid");

            var expirationTip = void 0;

            if (this.props.expirationType !== "SPECIFIC") {
                expirationTip = this.props.expirations[this.props.expirationType].get();
            }

            var expirationsOptionsList = Object.keys(this.props.expirations).map(function (key) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "option",
                    { value: key, key: key },
                    key === "SPECIFIC" && expirationCustomTime !== "Specific" ? moment__WEBPACK_IMPORTED_MODULE_1___default()(expirationCustomTime).format("Do MMM YYYY hh:mm A") : _this4.props.expirations[key].title
                );
            });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "buy-sell-container", style: { padding: "5px" } },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Form"],
                    {
                        className: "order-form",
                        layout: "horizontal",
                        hideRequiredMark: true,
                        style: { padding: "8px 15px" }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Form"].Item,
                        _extends({}, formItemProps, {
                            label: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("scaled_orders.price_lower")
                        }),
                        priceLowerInput
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Form"].Item,
                        _extends({}, formItemProps, {
                            label: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("scaled_orders.price_upper")
                        }),
                        priceUpperInput
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Form"].Item,
                        _extends({}, formItemProps, {
                            label: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("scaled_orders.quantity")
                        }),
                        quantityInput
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Form"].Item,
                        _extends({}, formItemProps, {
                            label: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("scaled_orders.order_count")
                        }),
                        orderCountInput
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Form"].Item,
                        _extends({}, formItemProps, {
                            help: totalInputHelp,
                            validateStatus: totalInputStatus,
                            label: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("scaled_orders.total")
                        }),
                        totalInput
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Form"].Item,
                        _extends({}, formItemProps, {
                            label: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("scaled_orders.fee")
                        }),
                        feeInput
                    ),
                    this._isMarketFeeVisible() ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Form"].Item,
                        _extends({}, formItemProps, {
                            label: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("scaled_orders.market_fee") + " " + this._getMarketFeePercentage() + "%"
                        }),
                        marketFeeInput
                    ) : null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Form"].Item,
                        _extends({
                            label: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("transaction.expiration")
                        }, formItemProps),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                className: "expiration-datetime-picker scaled-orders",
                                style: { marginTop: "5px" }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_14__["DatePicker"], {
                                ref: this.getDatePickerRef,
                                className: "expiration-datetime-picker--hidden",
                                showTime: true,
                                showToday: false,
                                disabledDate: function disabledDate(current) {
                                    return current < moment__WEBPACK_IMPORTED_MODULE_1___default()().add(59, "minutes");
                                },
                                value: expirationCustomTime !== "Specific" ? expirationCustomTime : moment__WEBPACK_IMPORTED_MODULE_1___default()().add(1, "hour"),
                                onChange: this.props.onExpirationCustomChange
                            }),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "select",
                                {
                                    className: "cursor-pointer",
                                    style: { marginTop: "5px" },
                                    onChange: this.onExpirationSelectChange,
                                    onClick: this.onExpirationSelectClick,
                                    onBlur: this.onExpirationSelectBlur,
                                    "data-tip": expirationTip && moment__WEBPACK_IMPORTED_MODULE_1___default()(expirationTip).format("Do MMM YYYY hh:mm A"),
                                    value: this.props.expirationType
                                },
                                expirationsOptionsList
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Form"].Item,
                        _extends({ label: lastPriceLabel }, formItemProps),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            {
                                style: {
                                    borderBottom: "#A09F9F 1px dotted",
                                    cursor: "pointer"
                                },
                                onClick: this.handleCurrentPriceClick
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_PriceText__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                price: this.props.currentPrice,
                                quote: quote,
                                base: base
                            }),
                            " ",
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: base.get("symbol"), noTip: true }),
                            "/",
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                name: quote.get("symbol"),
                                noTip: true
                            })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Form"].Item,
                        _extends({
                            label: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("exchange.balance")
                        }, formItemProps),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            {
                                style: {
                                    borderBottom: "#A09F9F 1px dotted",
                                    cursor: "pointer"
                                },
                                onClick: this.handleClickBalance
                            },
                            !isBid ? this.props.quoteAssetBalance : this.props.baseAssetBalance,
                            " ",
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                name: !isBid ? quote.get("symbol") : base.get("symbol"),
                                noTip: true
                            })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Button"],
                        {
                            onClick: this.props.handleSubmit,
                            type: "primary",
                            disabled: !this.isFormValid()
                        },
                        counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate(isBid ? "scaled_orders.action.buy" : "scaled_orders.action.sell")
                    )
                )
            );
        }
    }]);

    return ScaledOrderForm;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

ScaledOrderForm = bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Form"].create({})(ScaledOrderForm);

var ScaledOrderTab = function (_Component2) {
    _inherits(ScaledOrderTab, _Component2);

    function ScaledOrderTab(props) {
        _classCallCheck(this, ScaledOrderTab);

        var _this5 = _possibleConstructorReturn(this, (ScaledOrderTab.__proto__ || Object.getPrototypeOf(ScaledOrderTab)).call(this, props));

        _this5.saveFormRef = _this5.saveFormRef.bind(_this5);
        _this5.handleSubmit = _this5.handleSubmit.bind(_this5);
        _this5.handleCancel = _this5.handleCancel.bind(_this5);
        return _this5;
    }

    _createClass(ScaledOrderTab, [{
        key: "componentDidUpdate",
        value: function componentDidUpdate(prevProps) {
            if (this.props.baseAsset && prevProps.baseAsset && this.props.baseAsset.get && prevProps.baseAsset.get && this.props.baseAsset.get("id") !== prevProps.baseAsset.get("id") && this.formRef && this.formRef.props && this.formRef.props.form) {
                this.formRef.props.form.resetFields();
            }

            if (this.props.lastClickedPrice && this.props.lastClickedPrice !== prevProps.lastClickedPrice) {
                if (this.formRef && this.formRef.props && this.formRef.props.form && this.formRef.props.form.setFieldsValue) {
                    this.formRef.props.form.setFieldsValue({
                        priceLower: Number(this.props.lastClickedPrice)
                    });
                }
            }
        }
    }, {
        key: "prepareOrders",
        value: function prepareOrders(values) {
            var orders = [];

            var amount = Number(values.amount);
            var priceLower = Number(values.priceLower);
            var priceUpper = Number(values.priceUpper);
            var orderCount = Number(values.orderCount);

            var expirationTime = null;
            if (this.props.expirationType === "SPECIFIC") {
                expirationTime = this.props.expirations[this.props.expirationType].get(this.props.type);
            } else {
                expirationTime = this.props.expirations[this.props.expirationType].get(this.props.type);
            }

            var isCorrect = function isCorrect(value) {
                return !isNaN(value);
            };

            if (!isCorrect(priceLower) || !isCorrect(priceUpper) || !isCorrect(amount) || !isCorrect(orderCount) || orderCount <= 0 || priceLower >= priceUpper) return [];

            var step = ((priceUpper - priceLower) / (orderCount - 1)).toPrecision(5);

            var amountPerOrder = amount / orderCount;

            var sellAsset = values.action === _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].SELL ? this.props.quoteAsset : this.props.baseAsset;
            var buyAsset = values.action === _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].BUY ? this.props.quoteAsset : this.props.baseAsset;

            var sellAmount = function sellAmount(i) {
                var scaledAmount = amountPerOrder * (priceLower + step * i);
                return values.action === _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].BUY ? Number(scaledAmount.toPrecision(5)) * Math.pow(10, sellAsset.get("precision")) : Number(amountPerOrder.toPrecision(5)) * Math.pow(10, sellAsset.get("precision"));
            };

            var buyAmount = function buyAmount(i) {
                var scaledAmount = amountPerOrder * (priceLower + step * i);
                return values.action === _services_Exchange__WEBPACK_IMPORTED_MODULE_5__["SCALED_ORDER_ACTION_TYPES"].SELL ? Number(scaledAmount.toPrecision(5)) * Math.pow(10, buyAsset.get("precision")) : Number(amountPerOrder.toPrecision(5)) * Math.pow(10, buyAsset.get("precision"));
            };

            for (var i = 0; i < orderCount; i += 1) {
                orders.push({
                    for_sale: new _lib_common_MarketClasses__WEBPACK_IMPORTED_MODULE_6__["Asset"]({
                        asset_id: sellAsset.get("id"),
                        precision: sellAsset.get("precision"),
                        amount: sellAmount(i)
                    }),
                    to_receive: new _lib_common_MarketClasses__WEBPACK_IMPORTED_MODULE_6__["Asset"]({
                        asset_id: buyAsset.get("id"),
                        precision: buyAsset.get("precision"),
                        amount: buyAmount(i)
                    }),
                    expirationTime: expirationTime
                });
            }

            this.props.createScaledOrder(orders, bitsharesjs_es_chain_src_ChainStore__WEBPACK_IMPORTED_MODULE_7__["default"].getAsset(values.feeCurrency).get("id"));
        }
    }, {
        key: "handleSubmit",
        value: function handleSubmit() {
            var _this6 = this;

            var form = this.formRef.props.form;

            form.validateFields(function (err, values) {
                if (err) return;

                _this6.prepareOrders(values);
            });
        }
    }, {
        key: "handleCancel",
        value: function handleCancel() {
            this.props.hideModal();
        }
    }, {
        key: "saveFormRef",
        value: function saveFormRef(ref) {
            this.formRef = ref;
        }
    }, {
        key: "_getBalanceByAssetId",
        value: function _getBalanceByAssetId(assetId, precision) {
            var balance = 0;

            var balances = this.props.currentAccount.get("balances");

            if (balances.get(assetId) !== undefined) {
                var balanceObj = bitsharesjs_es_chain_src_ChainStore__WEBPACK_IMPORTED_MODULE_7__["default"].getObject(balances.get(assetId));

                balance = balanceObj.get("balance") / Math.pow(10, precision);
            }

            return balance;
        }
    }, {
        key: "render",
        value: function render() {
            var baseAssetBalance = this._getBalanceByAssetId(this.props.baseAsset.get("id"), this.props.baseAsset.get("precision"));
            var quoteAssetBalance = this._getBalanceByAssetId(this.props.quoteAsset.get("id"), this.props.quoteAsset.get("precision"));

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ScaledOrderForm, _extends({}, this.props, {
                wrappedComponentRef: this.saveFormRef,
                baseAssetBalance: baseAssetBalance,
                quoteAssetBalance: quoteAssetBalance,
                handleSubmit: this.handleSubmit
            }));
        }
    }]);

    return ScaledOrderTab;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

/* harmony default export */ __webpack_exports__["default"] = (ScaledOrderTab);

/***/ }),

/***/ 2788:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Messages", function() { return Messages; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Rules", function() { return Rules; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Validation", function() { return Validation; });
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2789);
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };




/** * * * *
 *
 * MESSAGES
 *
 * * * * * */

var Messages = {
    Required: function Required() {
        var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";

        if (name) return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.requiredNamed", {
            name: name
        });
        return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.required");
    },

    Type: function Type() {
        var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
        var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";

        if (name) return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.types." + type + "Named", { name: name, type: type });
        return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.types." + type, {
            type: type
        });
    },

    Range: function Range(min, max, name) {
        if (name) return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.rangeNamed", {
            name: name,
            min: min,
            max: max
        });
        return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.range", {
            min: min,
            max: max
        });
    },

    Min: function Min(min, name) {
        if (name) return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.minNamed", {
            name: name,
            min: min
        });
        return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.min", { min: min });
    },

    Max: function Max(max, name) {
        if (name) return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.maxNamed", {
            name: name,
            max: max
        });
        return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.max", { max: max });
    },

    Number: function Number(name) {
        if (name) return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.numberNamed", {
            name: name
        });
        return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.number");
    },

    Integer: function Integer(name) {
        if (name) return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.integerNamed", {
            name: name
        });
        return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.integer");
    },

    Float: function Float(name) {
        if (name) return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.floatNamed", {
            name: name
        });
        return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.float");
    },

    Email: function Email(name) {
        if (name) return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.emailNamed", {
            name: name
        });
        return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.email");
    },

    Url: function Url(name) {
        if (name) return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.urlNamed", {
            name: name
        });
        return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.url");
    },

    OneOf: function OneOf(name, list) {
        if (name) return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.oneOfNamed", {
            name: name,
            list: list
        });
        return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.oneOf", { list: list });
    },

    Balance: function Balance(balance, symbol) {
        return counterpart__WEBPACK_IMPORTED_MODULE_0___default.a.translate("validation.messages.balance", {
            balance: balance,
            symbol: symbol
        });
    }
};

/** * * * *
 *
 * RULES
 *
 * * * * * */

var Rules = {
    /**
     * Validation to check required Field
     * @param {string} props - name of field to use in translation
     * @param {Object} props
     * @param props.name - name of field to use in translation
     * @returns {{required: boolean, message: *}}
     */

    required: function required() {
        var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

        var name = "";

        if (typeof props === "string") {
            name = props;
        } else {
            name = props && props.name;
        }

        return {
            required: true,
            message: Messages.Required(name)
        };
    },

    /**
     * Validation to check field to match specific type
     * @param {string} props - type of field
     * @param {Object} props
     * @param {string} props.type - type of field
     * @param {string} [props.name] - name of field to use in translation
     * @returns {{validator: validator, message: *}}
     */

    type: function type(props) {
        var type = "";
        var name = "";

        if (typeof props === "string") type = props;

        if (props && props.type) type = props.type;

        if (props && props.name) name = props.name;

        if (type === "") throw new Error("[Validation] Rules.Type the property type is missed");

        if (!_types__WEBPACK_IMPORTED_MODULE_1__["default"][type]) throw new Error("[Validation] Rules.Type the property type '" + (props && props.type) + "' is not listed in supported types");

        return {
            validator: function validator(rule, value, callback) {
                if (_types__WEBPACK_IMPORTED_MODULE_1__["default"][type](value)) return callback();

                return callback(false);
            },
            message: Messages.Type(type, name)
        };
    },

    /**
     * Validation to check
     * @param {Object} props
     * @param {number} props.min - min value
     * @param {number} props.max - max value
     * @param {string} [props.name] - name of field to use in translation
     * @returns {{validator: validator, message: *}}
     */

    range: function range() {
        var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

        var max = Number(props.max);
        var min = Number(props.min);

        if (max === undefined || isNaN(max)) throw new Error("[Validation] Rules.Range the property max '" + (props && props.max) + "' is incorrect. Should be a number");

        if (min === undefined || isNaN(min)) throw new Error("[Validation] Rules.Range the property min '" + (props && props.min) + "' is incorrect. Should be a number");

        if (max < min) throw new Error("[Validation] Rules.Range the property min '" + (props && props.min) + "' cannot be higher than max '" + (props && props.max) + "'");

        return {
            validator: function validator(rule, value, callback) {
                value = Number(value);

                if (isNaN(value) || value < min || value > max) return callback(false);

                return callback();
            },
            message: Messages.Range(min, max, props.name || "")
        };
    },

    /**
     * Validation for min value
     * @param {number} props - min value
     * @param {Object} props
     * @param {number} props.min
     * @param {string} [props.name]
     * @param {boolean} props.higherThan - if (true) then check will be "value > min" instead of "value >= min"
     * @returns {{validator: validator, message: *}}
     */

    min: function min(props) {
        var min = void 0;

        if ((typeof props === "undefined" ? "undefined" : _typeof(props)) === "object") {
            min = Number(props && props.min);
        } else {
            min = Number(props);
        }

        if (min === undefined || isNaN(min)) throw new Error("[Validation] Rules.Min the property min '" + (props && props.min) + "' is incorrect. Should be a number");

        return {
            validator: function validator(rule, value, callback) {
                value = Number(value);

                if (props && props.higherThan) {
                    if (isNaN(value) || value <= min) return callback(false);
                } else {
                    if (isNaN(value) || value < min) return callback(false);
                }

                return callback();
            },
            message: Messages.Min(min, props.name || "")
        };
    },

    /**
     * Validation for max value
     * @param {number} props - max value
     * @param {Object} props
     * @param {number} props.max
     * @param {string} [props.name]
     * @returns {{validator: validator, message: *}}
     */

    max: function max(props) {
        var max = void 0;

        if ((typeof props === "undefined" ? "undefined" : _typeof(props)) === "object") {
            max = Number(props && props.max);
        } else {
            max = Number(props);
        }

        if (max === undefined || isNaN(max)) throw new Error("[Validation] Rules.Min the property max '" + (props && props.max) + "' is incorrect. Should be a number");

        return {
            validator: function validator(rule, value, callback) {
                value = Number(value);

                if (isNaN(value) || value > max) return callback(false);

                return callback();
            },
            message: Messages.Max(max, props.name || "")
        };
    },

    /**
     * Validate field to be number
     * @param {string} [name]
     * @returns {{validator: validator, message: *}}
     */

    number: function number(name) {
        return {
            validator: function validator(rule, value, callback) {
                if (!_types__WEBPACK_IMPORTED_MODULE_1__["default"].number(value)) return callback(false);

                return callback();
            },
            message: Messages.Number(name || "")
        };
    },

    /**
     * Validate field to be integer
     * @param {string} [name]
     * @returns {{validator: validator, message: *}}
     */

    integer: function integer(name) {
        return {
            validator: function validator(rule, value, callback) {
                if (!_types__WEBPACK_IMPORTED_MODULE_1__["default"].integer(value)) return callback(false);

                return callback();
            },
            message: Messages.Integer(name || "")
        };
    },

    /**
     * Validate field to be float
     * @param {string} [name]
     * @returns {{validator: validator, message: *}}
     */

    float: function float(name) {
        return {
            validator: function validator(rule, value, callback) {
                if (!_types__WEBPACK_IMPORTED_MODULE_1__["default"].float(value)) return callback(false);

                return callback();
            },
            message: Messages.Float(name || "")
        };
    },

    /**
     * Validate field to be email
     * @param {string} [name]
     * @returns {{validator: validator, message: *}}
     */

    email: function email(name) {
        return {
            validator: function validator(rule, value, callback) {
                if (!_types__WEBPACK_IMPORTED_MODULE_1__["default"].email(value)) return callback(false);

                return callback();
            },
            message: Messages.Email(name || "")
        };
    },

    /**
     * Validate field to be url
     * @param {string} [name]
     * @returns {{validator: validator, message: *}}
     */

    url: function url(name) {
        return {
            validator: function validator(rule, value, callback) {
                if (!_types__WEBPACK_IMPORTED_MODULE_1__["default"].url(value)) return callback(false);

                return callback();
            },
            message: Messages.Url(name || "")
        };
    },

    /**
     * Validate field to be oneOf
     * @param {Object} props
     * @param {Array} props.list
     * @param {string} [props.name]
     * @returns {{validator: validator, message: *}}
     */

    oneOf: function oneOf() {
        var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

        var list = void 0;

        if (!Array.isArray(props && props.list)) {
            throw new Error("[Validation] Rules.oneOf the property list is missed or incorrect");
        }

        list = props.list;

        return {
            validator: function validator(rule, value, callback) {
                if (list.indexOf(value) === -1) return callback(false);

                return callback();
            },
            message: Messages.OneOf(props && props.name || "", list.toString().replace(/,([a-z])/g, ", $1"))
        };
    },

    /**
     * Validate field to be in range from 0 to UserBalance
     * @param props
     */

    balance: function balance() {
        var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

        var validation = Rules.range({
            min: 0,
            max: props.balance
        });

        return {
            validator: validation.validator,
            message: Messages.Balance(props.balance, props.symbol)
        };
    }
};

/** * * * *
 *
 * VALIDATION
 *
 * * * * * */

var Validation = {
    Rules: Rules
};

/***/ }),

/***/ 2789:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "types", function() { return types; });
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var pattern = {
    // http://emailregex.com/
    email: /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
    url: new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$", "i"),
    hex: /^#?([a-f0-9]{6}|[a-f0-9]{3})$/i
};

var types = {
    integer: function integer(value) {
        return types.number(value) && parseInt(value, 10) === Number(value);
    },
    float: function float(value) {
        return types.number(value) && !types.integer(value);
    },
    array: function array(value) {
        return Array.isArray(value);
    },
    regexp: function regexp(value) {
        if (value instanceof RegExp) {
            return true;
        }
        try {
            return !!new RegExp(value);
        } catch (e) {
            return false;
        }
    },
    date: function date(value) {
        return typeof value.getTime === "function" && typeof value.getMonth === "function" && typeof value.getYear === "function";
    },
    number: function number(value) {
        if (isNaN(value) || isNaN(Number(value))) {
            return false;
        }
        return typeof Number(value) === "number";
    },
    object: function object(value) {
        return (typeof value === "undefined" ? "undefined" : _typeof(value)) === "object" && !types.array(value);
    },
    method: function method(value) {
        return typeof value === "function";
    },
    email: function email(value) {
        return typeof value === "string" && !!value.match(pattern.email) && value.length < 255;
    },
    url: function url(value) {
        return typeof value === "string" && !!value.match(pattern.url);
    },
    hex: function hex(value) {
        return typeof value === "string" && !!value.match(pattern.hex);
    },
    string: function string(value) {
        return typeof value === "string";
    },
    boolean: function boolean(value) {
        return typeof value === "boolean";
    },
    enum: function _enum(value, list) {
        return Array.isArray(list) && list.indexOf(value) >= -1;
    }
};

/* harmony default export */ __webpack_exports__["default"] = (types);

/***/ }),

/***/ 2790:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preciseAdd", function() { return preciseAdd; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preciseMinus", function() { return preciseMinus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preciseMultiply", function() { return preciseMultiply; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preciseDivide", function() { return preciseDivide; });
var preciseOperation = function preciseOperation(f) {
    return function (a, b) {
        var decimalDigits = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 6;
        return +f(a, b).toFixed(decimalDigits);
    };
};

var add = function add(a, b) {
    return a + b;
};
var minus = function minus(a, b) {
    return a - b;
};
var multiply = function multiply(a, b) {
    return a * b;
};
var divide = function divide(a, b) {
    return a / b;
};
var preciseAdd = function preciseAdd(a, b, decimalDigits) {
    return preciseOperation(add)(a, b, decimalDigits);
};
var preciseMinus = function preciseMinus(a, b, decimalDigits) {
    return preciseOperation(minus)(a, b, decimalDigits);
};
var preciseMultiply = function preciseMultiply(a, b, decimalDigits) {
    return preciseOperation(multiply)(a, b, decimalDigits);
};
var preciseDivide = function preciseDivide(a, b, decimalDigits) {
    return preciseOperation(divide)(a, b, decimalDigits);
};

/***/ }),

/***/ 2791:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1846);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1894);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2129);
/* harmony import */ var _Utility_AssetImage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2792);
/* harmony import */ var actions_MarketsActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2368);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(726);
/* harmony import */ var _PriceStatWithLabel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2794);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(420);
/* harmony import */ var _ExchangeHeaderCollateral__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2795);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(598);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
















var ExchangeHeader = function (_React$Component) {
    _inherits(ExchangeHeader, _React$Component);

    function ExchangeHeader(props) {
        _classCallCheck(this, ExchangeHeader);

        var _this = _possibleConstructorReturn(this, (ExchangeHeader.__proto__ || Object.getPrototypeOf(ExchangeHeader)).call(this));

        _this.state = {
            isModalVisible: false,
            volumeShowQuote: true,
            selectedMarketPickerAsset: props.selectedMarketPickerAsset
        };
        return _this;
    }

    _createClass(ExchangeHeader, [{
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            this.setState({
                selectedMarketPickerAsset: nextProps.selectedMarketPickerAsset
            });
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps) {
            if (!nextProps.marketReady) return false;
            return true;
        }
    }, {
        key: "_addMarket",
        value: function _addMarket(quote, base) {
            var marketID = quote + "_" + base;
            if (!this.props.starredMarkets.has(marketID)) {
                actions_SettingsActions__WEBPACK_IMPORTED_MODULE_6__["default"].addStarMarket(quote, base);
            } else {
                actions_SettingsActions__WEBPACK_IMPORTED_MODULE_6__["default"].removeStarMarket(quote, base);
            }
        }
    }, {
        key: "changeVolumeBase",
        value: function changeVolumeBase() {
            this.setState({
                volumeShowQuote: !this.state.volumeShowQuote
            });
        }
    }, {
        key: "marketPicker",
        value: function marketPicker(asset) {
            var selectedMarketPickerAsset = this.state.selectedMarketPickerAsset;


            selectedMarketPickerAsset = !!selectedMarketPickerAsset && selectedMarketPickerAsset == asset ? null : asset;

            this.setState({
                selectedMarketPickerAsset: selectedMarketPickerAsset
            });
            this.props.onToggleMarketPicker(selectedMarketPickerAsset);
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var _props = this.props,
                quoteAsset = _props.quoteAsset,
                baseAsset = _props.baseAsset,
                starredMarkets = _props.starredMarkets,
                hasPrediction = _props.hasPrediction,
                feedPrice = _props.feedPrice,
                showCallLimit = _props.showCallLimit,
                lowestCallPrice = _props.lowestCallPrice,
                marketReady = _props.marketReady,
                latestPrice = _props.latestPrice,
                marketStats = _props.marketStats,
                account = _props.account;


            var baseSymbol = baseAsset.get("symbol");
            var quoteSymbol = quoteAsset.get("symbol");

            // Favorite star
            var marketID = quoteSymbol + "_" + baseSymbol;
            var starClass = starredMarkets.has(marketID) ? "gold-star" : "grey-star";

            // Market stats
            var dayChange = marketStats.get("change");

            var dayChangeClass = parseFloat(dayChange) === 0 || isNaN(dayChange) ? "" : parseFloat(dayChange) < 0 ? "negative" : "positive";
            var volumeBase = marketStats.get("volumeBase");
            var volumeQuote = marketStats.get("volumeQuote");
            var dayChangeWithSign = isNaN(dayChange) ? undefined : dayChange > 0 ? "+" + dayChange : dayChange;

            var volume24h = this.state.volumeShowQuote ? volumeQuote : volumeBase;
            var volume24hAsset = this.state.volumeShowQuote ? quoteAsset : baseAsset;

            var showCollateralRatio = false;

            var quoteId = quoteAsset.get("id");
            var baseId = baseAsset.get("id");

            var lookForBitAsset = quoteId === "1.3.0" ? baseId : baseId === "1.3.0" ? quoteId : null;
            var possibleBitAsset = lookForBitAsset ? bitsharesjs__WEBPACK_IMPORTED_MODULE_10__["ChainStore"].getAsset(lookForBitAsset) : null;
            var isBitAsset = possibleBitAsset ? !!possibleBitAsset.get("bitasset") : false;
            var collOrderObject = "";
            var settlePrice = null;
            var settlePriceTitle = "exchange.settle";
            var settlePriceTooltip = "tooltip.settle_price";

            if (isBitAsset) {
                if (account.toJS && account.has("call_orders")) {
                    var call_orders = account.get("call_orders").toJS();

                    for (var i = 0; i < call_orders.length; i++) {
                        var callID = call_orders[i];

                        var position = bitsharesjs__WEBPACK_IMPORTED_MODULE_10__["ChainStore"].getObject(callID);
                        var debtAsset = position.getIn(["call_price", "quote", "asset_id"]);

                        if (debtAsset === lookForBitAsset) {
                            collOrderObject = callID;
                            showCollateralRatio = true;
                            break;
                        }
                    }
                }

                /* Settlment Offset */
                var settleAsset = baseId == "1.3.0" ? quoteAsset : quoteId == "1.3.0" ? baseAsset : quoteAsset;

                // globally settled
                if (possibleBitAsset.get("bitasset").get("settlement_fund") > 0) {
                    settlePriceTitle = "exchange.global_settle";
                    settlePriceTooltip = "tooltip.global_settle_price";
                    // if globally settled feed_price == settlement_price
                    settlePrice = possibleBitAsset.get("bitasset").get("settlement_price").toJS();
                    // add precision
                    if (settlePrice.base.asset_id == baseAsset.get("id")) {
                        settlePrice.base.precision = baseAsset.get("precision");
                        settlePrice.quote.precision = quoteAsset.get("precision");
                    } else {
                        settlePrice.quote.precision = baseAsset.get("precision");
                        settlePrice.base.precision = quoteAsset.get("precision");
                    }
                    settlePrice = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_13__["Price"]({
                        quote: new common_MarketClasses__WEBPACK_IMPORTED_MODULE_13__["Asset"]({
                            asset_id: settlePrice.quote.asset_id,
                            precision: settlePrice.quote.precision,
                            amount: settlePrice.quote.amount
                        }),
                        base: new common_MarketClasses__WEBPACK_IMPORTED_MODULE_13__["Asset"]({
                            asset_id: settlePrice.base.asset_id,
                            precision: settlePrice.base.precision,
                            amount: settlePrice.base.amount
                        })
                    }).toReal();
                    settlePrice = baseId == "1.3.0" ? 1 / settlePrice : settlePrice;
                } else if (settleAsset && feedPrice) {
                    var offset_percent = settleAsset.getIn(["bitasset", "options"]).toJS().force_settlement_offset_percent;
                    settlePrice = baseId == "1.3.0" ? feedPrice.toReal() / (1 + offset_percent / 10000) : feedPrice.toReal() * (1 + offset_percent / 10000);
                }
            }

            var translator = __webpack_require__(587);

            var isQuoteSelected = !!this.state.selectedMarketPickerAsset && this.state.selectedMarketPickerAsset == quoteSymbol;
            var isBaseSelected = !!this.state.selectedMarketPickerAsset && this.state.selectedMarketPickerAsset == baseSymbol;

            var PriceAlertBellClassName = this.props.hasAnyPriceAlert ? "exchange--price-alert--show-modal--active" : "";

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-block shrink no-padding overflow-visible top-bar" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block overflow-visible" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "grid-block shrink" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { style: { padding: "10px" } },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetImage__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                replaceNoneToBts: false,
                                maxWidth: 50,
                                name: quoteAsset.get("symbol")
                            })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { style: { padding: "10px" } },
                            !hasPrediction ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                {
                                    style: {
                                        padding: "0 5px",
                                        fontSize: this.props.tinyScreen ? "13px" : "18px",
                                        marginTop: "1px"
                                    }
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12__["Icon"], {
                                    onClick: this.props.showPriceAlertModal,
                                    type: "bell",
                                    className: "exchange--price-alert--show-modal " + PriceAlertBellClassName,
                                    style: { paddingRight: "10px" },
                                    "data-intro": translator.translate("walkthrough.price_alerts")
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "span",
                                    {
                                        onClick: this.marketPicker.bind(this, quoteSymbol),
                                        className: "underline",
                                        style: {
                                            cursor: "pointer",
                                            color: isQuoteSelected ? "#2196f3" : ""
                                        }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                        name: quoteSymbol,
                                        replace: true,
                                        noTip: true
                                    })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "span",
                                    { style: { padding: "0 5px" } },
                                    "/"
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "span",
                                    {
                                        onClick: this.marketPicker.bind(this, baseSymbol),
                                        className: "underline",
                                        style: {
                                            cursor: "pointer",
                                            color: isBaseSelected ? "#2196f3" : ""
                                        }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                        name: baseSymbol,
                                        replace: true,
                                        noTip: true
                                    })
                                )
                            ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "a",
                                { className: "market-symbol" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "span",
                                    null,
                                    quoteSymbol + " : " + baseSymbol
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "label-actions" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_8___default.a, {
                                    component: "span",
                                    style: { padding: "5px 0 0 5px" },
                                    className: "stat-text",
                                    content: "exchange.trading_pair"
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                                    {
                                        onClick: function onClick() {
                                            actions_MarketsActions__WEBPACK_IMPORTED_MODULE_5__["default"].switchMarket();
                                        },
                                        to: "/market/" + baseSymbol + "_" + quoteSymbol,
                                        "data-intro": translator.translate("walkthrough.switch_button")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_2__["default"], {
                                        className: "shuffle",
                                        name: "shuffle",
                                        title: "icons.shuffle"
                                    })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "a",
                                    {
                                        onClick: function onClick() {
                                            _this2._addMarket(_this2.props.quoteAsset.get("symbol"), _this2.props.baseAsset.get("symbol"));
                                        },
                                        "data-intro": translator.translate("walkthrough.favourite_button")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_2__["default"], {
                                        className: starClass,
                                        name: "fi-star",
                                        title: "icons.fi_star.market"
                                    })
                                )
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "grid-block vertical",
                            style: { overflow: "visible" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "grid-block wrap market-stats-container" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "ul",
                                { className: "market-stats stats top-stats" },
                                latestPrice ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_PriceStatWithLabel__WEBPACK_IMPORTED_MODULE_7__["default"], {
                                    ignoreColorChange: true,
                                    ready: marketReady,
                                    price: latestPrice,
                                    quote: quoteAsset,
                                    base: baseAsset,
                                    market: marketID,
                                    content: "exchange.latest"
                                }) : null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "li",
                                    {
                                        className: "hide-order-1 stressed-stat daily_change " + dayChangeClass
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "b",
                                            { className: "value" },
                                            dayChangeWithSign ? marketReady ? dayChangeWithSign : 0 : "-"
                                        ),
                                        dayChangeWithSign && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "span",
                                            null,
                                            " %"
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_8___default.a, {
                                        component: "div",
                                        className: "stat-text",
                                        content: "account.hour_24"
                                    })
                                ),
                                volumeBase >= 0 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_PriceStatWithLabel__WEBPACK_IMPORTED_MODULE_7__["default"], {
                                    ignoreColorChange: true,
                                    onClick: this.changeVolumeBase.bind(this),
                                    ready: marketReady,
                                    decimals: 0,
                                    volume: true,
                                    price: volume24h,
                                    className: "hide-order-2 clickable",
                                    base: volume24hAsset,
                                    market: marketID,
                                    content: "exchange.volume_24"
                                }) : null,
                                !hasPrediction && feedPrice ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_PriceStatWithLabel__WEBPACK_IMPORTED_MODULE_7__["default"], {
                                    ignoreColorChange: true,
                                    toolTip: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("tooltip.feed_price"),
                                    ready: marketReady,
                                    className: "hide-order-3",
                                    price: feedPrice.toReal(),
                                    quote: quoteAsset,
                                    base: baseAsset,
                                    market: marketID,
                                    content: "exchange.feed_price"
                                }) : null,
                                !hasPrediction && settlePrice ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_PriceStatWithLabel__WEBPACK_IMPORTED_MODULE_7__["default"], {
                                    ignoreColorChange: true,
                                    toolTip: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate(settlePriceTooltip),
                                    ready: marketReady,
                                    className: "hide-order-4",
                                    price: settlePrice,
                                    quote: quoteAsset,
                                    base: baseAsset,
                                    market: marketID,
                                    content: settlePriceTitle
                                }) : null,
                                showCollateralRatio ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ExchangeHeaderCollateral__WEBPACK_IMPORTED_MODULE_11__["default"], {
                                    object: collOrderObject,
                                    account: account,
                                    className: "hide-order-1"
                                }) : null,
                                lowestCallPrice && showCallLimit ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_PriceStatWithLabel__WEBPACK_IMPORTED_MODULE_7__["default"], {
                                    toolTip: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("tooltip.call_limit"),
                                    ready: marketReady,
                                    className: "hide-order-5 is-call",
                                    price: lowestCallPrice,
                                    quote: quoteAsset,
                                    base: baseAsset,
                                    market: marketID,
                                    content: "explorer.block.call_limit"
                                }) : null,
                                feedPrice && showCallLimit ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_PriceStatWithLabel__WEBPACK_IMPORTED_MODULE_7__["default"], {
                                    toolTip: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("tooltip.margin_price"),
                                    ready: marketReady,
                                    className: "hide-order-6 is-call",
                                    price: feedPrice.getSqueezePrice({
                                        real: true
                                    }),
                                    quote: quoteAsset,
                                    base: baseAsset,
                                    market: marketID,
                                    content: "exchange.squeeze"
                                }) : null
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "ul",
                                {
                                    className: "market-stats stats top-stats",
                                    "data-position": "left",
                                    "data-step": "1",
                                    "data-intro": translator.translate("walkthrough.personalize")
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "li",
                                    {
                                        className: "stressed-stat input clickable",
                                        style: { padding: "16px 16px 16px 0px" },
                                        onClick: this.props.onTogglePersonalize.bind(this)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12__["Icon"], {
                                        type: "setting",
                                        style: { paddingRight: 5 }
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_8___default.a, {
                                        className: "hide-order-2",
                                        content: "exchange.settings.header.title"
                                    })
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return ExchangeHeader;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (ExchangeHeader);

/***/ }),

/***/ 2794:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2129);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(571);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2370);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }









var PriceStatWithLabel = function (_React$Component) {
    _inherits(PriceStatWithLabel, _React$Component);

    function PriceStatWithLabel() {
        _classCallCheck(this, PriceStatWithLabel);

        var _this = _possibleConstructorReturn(this, (PriceStatWithLabel.__proto__ || Object.getPrototypeOf(PriceStatWithLabel)).call(this));

        _this.state = {
            change: null,
            curMarket: null,
            marketChange: false
        };
        return _this;
    }

    _createClass(PriceStatWithLabel, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps) {
            if (nextProps.volume2 && nextProps.volume2 !== this.props.volume2) {
                return true;
            }
            return nextProps.price !== this.props.price || nextProps.ready !== this.props.ready;
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            var state = {
                change: 0
            };

            var market = nextProps.market;


            var checkMarketChange = this.state.curMarket !== market;
            var marketChange = this.state.curMarket == null ? false : checkMarketChange;

            state["marketChange"] = marketChange;
            state["curMarket"] = market;
            state["prevAsset"] = this.state.marketAsset;

            if (nextProps.ready && this.props.ready) {
                state["change"] = parseFloat(nextProps.price) - parseFloat(this.props.price);
            }

            this.setState(state);
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            react_tooltip__WEBPACK_IMPORTED_MODULE_5___default.a.rebuild();
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                base = _props.base,
                quote = _props.quote,
                price = _props.price,
                content = _props.content,
                ready = _props.ready,
                volume = _props.volume,
                toolTip = _props.toolTip,
                ignoreColorChange = _props.ignoreColorChange;
            var _state = this.state,
                change = _state.change,
                marketChange = _state.marketChange;

            var changeClasses = null;
            if (!marketChange && change && change !== null && ignoreColorChange !== true) {
                changeClasses = change > 0 ? "pulsate green" : "pulsate red";
            }

            var value = !volume ? common_utils__WEBPACK_IMPORTED_MODULE_3__["default"].price_text(price, quote, base) : common_utils__WEBPACK_IMPORTED_MODULE_3__["default"].format_volume(price);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "li",
                {
                    className: classnames__WEBPACK_IMPORTED_MODULE_4___default()("stressed-stat", this.props.className, changeClasses),
                    onClick: this.props.onClick
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__["Tooltip"],
                    { placement: "bottom", title: toolTip },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            { className: "value stat-primary" },
                            !ready ? 0 : value,
                            "\xA0"
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            { className: "symbol-text" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_2__["default"], { name: base.get("symbol") })
                        )
                    ),
                    content ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "stat-text" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: content })
                    ) : null
                )
            );
        }
    }]);

    return PriceStatWithLabel;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (PriceStatWithLabel);

/***/ }),

/***/ 2795:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(571);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2003);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _lib_common_asset_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(582);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var MarginPosition = function (_React$Component) {
    _inherits(MarginPosition, _React$Component);

    function MarginPosition() {
        _classCallCheck(this, MarginPosition);

        return _possibleConstructorReturn(this, (MarginPosition.__proto__ || Object.getPrototypeOf(MarginPosition)).apply(this, arguments));
    }

    _createClass(MarginPosition, [{
        key: "_getFeedPrice",
        value: function _getFeedPrice() {
            if (!this.props) {
                return 1;
            }

            return 1 / common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].get_asset_price(_lib_common_asset_utils__WEBPACK_IMPORTED_MODULE_8__["default"].extractRawFeedPrice(this.props.debtAsset).getIn(["quote", "amount"]), this.props.collateralAsset, _lib_common_asset_utils__WEBPACK_IMPORTED_MODULE_8__["default"].extractRawFeedPrice(this.props.debtAsset).getIn(["base", "amount"]), this.props.debtAsset);
        }
    }, {
        key: "_getCollateralRatio",
        value: function _getCollateralRatio() {
            var co = this.props.object.toJS();
            var c = common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].get_asset_amount(co.collateral, this.props.collateralAsset);
            var d = common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].get_asset_amount(co.debt, this.props.debtAsset);
            return c / (d / this._getFeedPrice());
        }
    }, {
        key: "_getMR",
        value: function _getMR() {
            return this.props.debtAsset.getIn(["bitasset", "current_feed", "maintenance_collateral_ratio"]) / 1000;
        }
    }, {
        key: "_getStatusClass",
        value: function _getStatusClass() {
            var cr = this._getCollateralRatio();
            var mr = this._getMR();

            if (isNaN(cr)) return null;
            if (cr < mr) {
                return "danger";
            } else if (cr < mr + 0.5) {
                return "warning";
            } else {
                return "";
            }
        }
    }, {
        key: "_getCRTip",
        value: function _getCRTip() {
            var statusClass = this._getStatusClass();
            var mr = this._getMR();
            if (!statusClass || statusClass === "") return null;

            if (statusClass === "danger") {
                return counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("tooltip.cr_danger", { mr: mr });
            } else if (statusClass === "warning") {
                return counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("tooltip.cr_warning", { mr: mr });
            } else {
                return null;
            }
        }
    }, {
        key: "render",
        value: function render() {
            var object = this.props.object;

            var co = object.toJS();
            var cr = this._getCollateralRatio();
            var d = common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].get_asset_amount(co.debt, this.props.debtAsset);

            var statusClass = this._getStatusClass();

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Tooltip"],
                { placement: "bottom", title: this._getCRTip() },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "li",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_4___default()("stressed-stat", this.props.className),
                        onClick: this.props.onClick
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            {
                                className: classnames__WEBPACK_IMPORTED_MODULE_4___default()("value stat-primary", statusClass)
                            },
                            common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].format_number(cr, 2)
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "stat-text" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "header.collateral_ratio" })
                    )
                )
            );
        }
    }]);

    return MarginPosition;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarginPosition.propTypes = {
    debtAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAsset.isRequired,
    collateralAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAsset.isRequired
};

MarginPosition = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(MarginPosition);

var ExchangeHeaderCollateral = function (_React$Component2) {
    _inherits(ExchangeHeaderCollateral, _React$Component2);

    function ExchangeHeaderCollateral() {
        _classCallCheck(this, ExchangeHeaderCollateral);

        return _possibleConstructorReturn(this, (ExchangeHeaderCollateral.__proto__ || Object.getPrototypeOf(ExchangeHeaderCollateral)).apply(this, arguments));
    }

    _createClass(ExchangeHeaderCollateral, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                object = _props.object,
                account = _props.account;


            var debtAsset = object.getIn(["call_price", "quote", "asset_id"]);
            var collateralAsset = object.getIn(["call_price", "base", "asset_id"]);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarginPosition, _extends({
                debtAsset: debtAsset,
                collateralAsset: collateralAsset,
                account: account
            }, this.props));
        }
    }]);

    return ExchangeHeaderCollateral;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ExchangeHeaderCollateral.propTypes = {
    object: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainObject.isRequired
};

ExchangeHeaderCollateral = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(ExchangeHeaderCollateral);

/* harmony default export */ __webpack_exports__["default"] = (ExchangeHeaderCollateral);

/***/ }),

/***/ 2796:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MarketOrders", function() { return MarketOrders; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var perfect_scrollbar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2761);
/* harmony import */ var perfect_scrollbar__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(perfect_scrollbar__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _OpenSettleOrders__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2797);
/* harmony import */ var actions_MarketsActions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2368);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Utility_TransitionWrapper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2799);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(726);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(420);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(598);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2370);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _View_MarketOrdersView__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2813);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }















var MarketOrdersRow = function (_React$Component) {
    _inherits(MarketOrdersRow, _React$Component);

    function MarketOrdersRow() {
        _classCallCheck(this, MarketOrdersRow);

        return _possibleConstructorReturn(this, (MarketOrdersRow.__proto__ || Object.getPrototypeOf(MarketOrdersRow)).apply(this, arguments));
    }

    _createClass(MarketOrdersRow, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps) {
            return nextProps.order.for_sale !== this.props.order.for_sale || nextProps.order.id !== this.props.order.id || nextProps.quote !== this.props.quote || nextProps.base !== this.props.base || nextProps.order.market_base !== this.props.order.market_base || nextProps.selected !== this.props.selected;
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                base = _props.base,
                quote = _props.quote,
                order = _props.order,
                selected = _props.selected;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_View_MarketOrdersView__WEBPACK_IMPORTED_MODULE_12__["MarketOrdersRowView"], {
                key: order.id,
                order: order,
                selected: selected,
                base: base,
                quote: quote,
                onCheckCancel: this.props.onCheckCancel.bind(this)
            });
        }
    }]);

    return MarketOrdersRow;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var MarketOrders = function (_React$Component2) {
    _inherits(MarketOrders, _React$Component2);

    function MarketOrders(props) {
        _classCallCheck(this, MarketOrders);

        var _this2 = _possibleConstructorReturn(this, (MarketOrders.__proto__ || Object.getPrototypeOf(MarketOrders)).call(this));

        _this2.state = {
            activeTab: props.activeTab,
            rowCount: 20,
            showAll: false,
            selectedOrders: []
        };
        _this2._getOrders = _this2._getOrders.bind(_this2);
        return _this2;
    }

    _createClass(MarketOrders, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps, nextState) {
            return nextProps.baseSymbol !== this.props.baseSymbol || nextProps.quoteSymbol !== this.props.quoteSymbol || nextProps.className !== this.props.className || nextProps.activeTab !== this.props.activeTab || nextState.activeTab !== this.state.activeTab || nextState.showAll !== this.state.showAll || nextProps.currentAccount !== this.props.currentAccount || nextState.selectedOrders !== this.state.selectedOrders || nextProps.settleOrders !== this.props.settleOrders;
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            if (!this.props.hideScrollbars) {
                this.updateContainer(1);
            }
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate(prevState) {
            var hideScrollbars = this.props.hideScrollbars;
            var showAll = this.state.showAll;


            if (prevState.showAll != showAll) {
                if (showAll && !hideScrollbars) {
                    this.updateContainer(2);
                } else if (!showAll && !hideScrollbars) {
                    this.updateContainer(3);
                } else if (showAll && hideScrollbars) {
                    this.updateContainer(1);
                } else {
                    this.updateContainer(0);
                }
            }
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            if (nextProps.activeTab !== this.state.activeTab) {
                this.changeTab(nextProps.activeTab);
            }

            // Reset on Market Switch
            if (nextProps.baseSymbol !== this.props.baseSymbol || nextProps.quoteSymbol !== this.props.quoteSymbol) {
                this.setState({ showAll: false });
                this.updateContainer(0);

                if (!this.props.hideScrollbars) {
                    this.updateContainer(1);
                }
            }

            // Reset on hideScrollbars switch
            if (nextProps.hideScrollbars !== this.props.hideScrollbars) {
                this.updateContainer(0);

                if (!nextProps.hideScrollbars) {
                    this.updateContainer(1);
                }
            }
        }

        /***
         * Update PS Container
         * type:int [0:destroy, 1:init, 2:update, 3:update w/ scrollTop] (default: 2)
         */

    }, {
        key: "updateContainer",
        value: function updateContainer() {
            var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 2;

            var containerNode = this.refs.view.refs.container;
            var containerTransition = this.refs.contentTransition;

            if (!containerNode) return;

            if (type == 0) {
                containerNode.scrollTop = 0;
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_2___default.a.destroy(containerNode);
            } else if (type == 1) {
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_2___default.a.initialize(containerNode);
                this.updateContainer(3);
            } else if (type == 2) {
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_2___default.a.update(containerNode);
            } else if (type == 3) {
                containerNode.scrollTop = 0;
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_2___default.a.update(containerNode);
            }

            if (containerTransition) {
                containerTransition.resetAnimation();
            }
        }
    }, {
        key: "_onSetShowAll",
        value: function _onSetShowAll() {
            this.setState({
                showAll: !this.state.showAll
            });
        }
    }, {
        key: "changeTab",
        value: function changeTab(tab) {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_7__["default"].changeViewSetting({
                ordersTab: tab
            });
            this.setState({
                activeTab: tab
            });

            // Ensure that focus goes back to top of scrollable container when tab is changed
            this.updateContainer(3);

            setTimeout(react_tooltip__WEBPACK_IMPORTED_MODULE_10___default.a.rebuild, 1000);
        }
    }, {
        key: "onCheckCancel",
        value: function onCheckCancel(orderId, evt) {
            var selectedOrders = this.state.selectedOrders;

            var checked = evt.target.checked;

            if (checked) {
                this.setState({ selectedOrders: selectedOrders.concat([orderId]) });
            } else {
                var index = selectedOrders.indexOf(orderId);

                if (index > -1) {
                    this.setState({
                        selectedOrders: selectedOrders.slice(0, index).concat(selectedOrders.slice(index + 1))
                    });
                }
            }
        }
    }, {
        key: "cancelSelected",
        value: function cancelSelected() {
            this._cancelLimitOrders.call(this);
        }
    }, {
        key: "resetSelected",
        value: function resetSelected() {
            this.setState({ selectedOrders: [] });
        }
    }, {
        key: "onCancelToggle",
        value: function onCancelToggle(evt) {
            var orders = this._getOrders();
            var selectedOrders = [];

            orders.forEach(function (order) {
                selectedOrders.push(order.id);
            });

            if (evt.target.checked) {
                this.setState({ selectedOrders: selectedOrders });
            } else {
                this.resetSelected();
            }
        }
    }, {
        key: "_cancelLimitOrders",
        value: function _cancelLimitOrders() {
            var _this3 = this;

            actions_MarketsActions__WEBPACK_IMPORTED_MODULE_4__["default"].cancelLimitOrders(this.props.currentAccount.get("id"), this.state.selectedOrders).then(function () {
                _this3.resetSelected();
            }).catch(function (err) {
                console.log("cancel orders error:", err);
            });
        }
    }, {
        key: "_getOrders",
        value: function _getOrders() {
            var _assets;

            var _props2 = this.props,
                currentAccount = _props2.currentAccount,
                base = _props2.base,
                quote = _props2.quote,
                feedPrice = _props2.feedPrice;

            var orders = currentAccount.get("orders"),
                call_orders = currentAccount.get("call_orders");
            var baseID = base.get("id"),
                quoteID = quote.get("id");
            var assets = (_assets = {}, _defineProperty(_assets, base.get("id"), { precision: base.get("precision") }), _defineProperty(_assets, quote.get("id"), { precision: quote.get("precision") }), _assets);
            var limitOrders = orders.toArray().map(function (order) {
                var o = bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].getObject(order);
                if (!o) return null;
                var sellBase = o.getIn(["sell_price", "base", "asset_id"]),
                    sellQuote = o.getIn(["sell_price", "quote", "asset_id"]);
                if (sellBase === baseID && sellQuote === quoteID || sellBase === quoteID && sellQuote === baseID) {
                    return new common_MarketClasses__WEBPACK_IMPORTED_MODULE_9__["LimitOrder"](o.toJS(), assets, quote.get("id"));
                }
            }).filter(function (a) {
                return !!a;
            });

            var callOrders = call_orders.toArray().map(function (order) {
                try {
                    var o = bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].getObject(order);
                    if (!o) return null;
                    var sellBase = o.getIn(["call_price", "base", "asset_id"]),
                        sellQuote = o.getIn(["call_price", "quote", "asset_id"]);
                    if (sellBase === baseID && sellQuote === quoteID || sellBase === quoteID && sellQuote === baseID) {
                        return feedPrice ? new common_MarketClasses__WEBPACK_IMPORTED_MODULE_9__["CallOrder"](o.toJS(), assets, quote.get("id"), feedPrice) : null;
                    }
                } catch (e) {
                    return null;
                }
            }).filter(function (a) {
                return !!a;
            }).filter(function (a) {
                try {
                    return a.isMarginCalled();
                } catch (err) {
                    return false;
                }
            });
            return limitOrders.concat(callOrders);
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var _props3 = this.props,
                base = _props3.base,
                quote = _props3.quote,
                quoteSymbol = _props3.quoteSymbol,
                baseSymbol = _props3.baseSymbol,
                settleOrders = _props3.settleOrders;
            var _state = this.state,
                activeTab = _state.activeTab,
                showAll = _state.showAll,
                rowCount = _state.rowCount,
                selectedOrders = _state.selectedOrders;


            if (!base || !quote) return null;

            var contentContainer = void 0;
            var footerContainer = void 0;

            /* Users Open Orders Tab (default) */
            var totalRows = 0;

            // User Orders
            if (!activeTab || activeTab == "my_orders") {
                var orders = this._getOrders();

                var bids = orders.filter(function (a) {
                    return a.isBid();
                }).sort(function (a, b) {
                    return b.getPrice() - a.getPrice();
                }).map(function (order) {
                    var price = order.getPrice();
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarketOrdersRow, {
                        price: price,
                        key: order.id,
                        order: order,
                        base: base,
                        quote: quote,
                        selected: _this4.state.selectedOrders.length > 0 && _this4.state.selectedOrders.includes(order.id),
                        onCancel: _this4.props.onCancel.bind(_this4, order.id),
                        onCheckCancel: _this4.onCheckCancel.bind(_this4, order.id)
                    });
                });

                var asks = orders.filter(function (a) {
                    return !a.isBid();
                }).sort(function (a, b) {
                    return a.getPrice() - b.getPrice();
                }).map(function (order) {
                    var price = order.getPrice();
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarketOrdersRow, {
                        price: price,
                        key: order.id,
                        order: order,
                        base: base,
                        quote: quote,
                        selected: _this4.state.selectedOrders.length > 0 && _this4.state.selectedOrders.includes(order.id),
                        onCancel: _this4.props.onCancel.bind(_this4, order.id),
                        onCheckCancel: _this4.onCheckCancel.bind(_this4, order.id)
                    });
                });

                var rows = [];

                if (asks.length) {
                    rows = rows.concat(asks);
                }

                if (bids.length) {
                    rows = rows.concat(bids);
                }

                rows.sort(function (a, b) {
                    return a.props.price - b.props.price;
                });

                totalRows = rows.length;

                if (totalRows > 0 && !showAll) {
                    rows.splice(rowCount, rows.length);
                }

                var emptyRow = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: {
                                textAlign: "center",
                                lineHeight: 4,
                                fontStyle: "italic"
                            },
                            colSpan: "5"
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "account.no_orders" })
                    )
                );

                var cancelOrderButton = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { display: "grid" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__["Button"],
                        { onClick: this.cancelSelected.bind(this) },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, { content: "exchange.cancel_selected_orders" })
                    )
                );

                contentContainer = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    _Utility_TransitionWrapper__WEBPACK_IMPORTED_MODULE_6__["default"],
                    {
                        ref: "contentTransition",
                        component: "tbody",
                        transitionName: "newrow"
                    },
                    rows.length ? rows : emptyRow
                );

                footerContainer = totalRows > 11 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "orderbook-showall" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            { onClick: this._onSetShowAll.bind(this) },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, {
                                content: showAll ? "exchange.hide" : "exchange.show_all_orders",
                                rowcount: totalRows
                            })
                        )
                    ),
                    selectedOrders.length > 0 ? cancelOrderButton : null
                ) : selectedOrders.length > 0 ? cancelOrderButton : null;
            }

            // Open Settle Orders
            if (activeTab && activeTab == "open_settlement") {
                totalRows = settleOrders.length;

                if (totalRows > 0 && !showAll) {
                    settleOrders.splice(rowCount, settleOrders.length);
                }

                contentContainer = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_OpenSettleOrders__WEBPACK_IMPORTED_MODULE_3__["default"], {
                    key: "settle_orders",
                    orders: settleOrders,
                    base: base,
                    quote: quote,
                    baseSymbol: baseSymbol,
                    quoteSymbol: quoteSymbol
                });

                footerContainer = totalRows > 11 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "orderbook-showall" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        { onClick: this._onSetShowAll.bind(this) },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_5___default.a, {
                            content: showAll ? "exchange.hide" : "exchange.show_all_orders",
                            rowcount: totalRows
                        })
                    )
                );
            }

            var isSelected = this.state.selectedOrders.length > 0 && this.state.selectedOrders.length == totalRows;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_View_MarketOrdersView__WEBPACK_IMPORTED_MODULE_12__["MarketsOrderView"], {
                ref: "view"
                // Styles and Classes
                , style: this.props.style,
                className: this.props.className,
                innerClass: this.props.innerClass,
                innerStyle: this.props.innerStyle,
                headerStyle: this.props.headerStyle
                // Bools
                , noHeader: this.props.noHeader,
                isSelected: isSelected,
                tinyScreen: this.props.tinyScreen
                // Strings
                , activeTab: activeTab,
                baseSymbol: baseSymbol,
                quoteSymbol: quoteSymbol
                // Containers
                , contentContainer: contentContainer,
                footerContainer: footerContainer
                // Functions
                , onCancelToggle: this.onCancelToggle.bind(this)
            });
        }
    }]);

    return MarketOrders;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarketOrders.defaultProps = {
    base: {},
    quote: {},
    orders: {},
    quoteSymbol: "",
    baseSymbol: ""
};

MarketOrders.propTypes = {
    base: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object.isRequired,
    quote: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object.isRequired,
    orders: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object.isRequired,
    quoteSymbol: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,
    baseSymbol: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired
};



/***/ }),

/***/ 2797:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(571);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2129);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var browser_locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2798);
/* harmony import */ var browser_locale__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(browser_locale__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _Utility_TransitionWrapper__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2799);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var TableHeader = function (_React$Component) {
    _inherits(TableHeader, _React$Component);

    function TableHeader() {
        _classCallCheck(this, TableHeader);

        return _possibleConstructorReturn(this, (TableHeader.__proto__ || Object.getPrototypeOf(TableHeader)).apply(this, arguments));
    }

    _createClass(TableHeader, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                baseSymbol = _props.baseSymbol,
                quoteSymbol = _props.quoteSymbol;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "thead",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "th",
                        { style: { textAlign: "right" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.price" }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                        baseSymbol ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            { className: "header-sub-title" },
                            "(",
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: baseSymbol }),
                            "/",
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: quoteSymbol }),
                            ")"
                        ) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "th",
                        { style: { textAlign: "right" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "transfer.amount" }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                        quoteSymbol ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            { className: "header-sub-title" },
                            "(",
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: quoteSymbol }),
                            ")"
                        ) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "th",
                        { style: { textAlign: "right" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "transaction.settlement_date" }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            {
                                style: { visibility: "hidden" },
                                className: "header-sub-title"
                            },
                            "d"
                        )
                    )
                )
            );
        }
    }]);

    return TableHeader;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

TableHeader.defaultProps = {
    quoteSymbol: null,
    baseSymbol: null
};

var SettleOrderRow = function (_React$Component2) {
    _inherits(SettleOrderRow, _React$Component2);

    function SettleOrderRow() {
        _classCallCheck(this, SettleOrderRow);

        return _possibleConstructorReturn(this, (SettleOrderRow.__proto__ || Object.getPrototypeOf(SettleOrderRow)).apply(this, arguments));
    }

    _createClass(SettleOrderRow, [{
        key: "render",
        value: function render() {
            var _props2 = this.props,
                base = _props2.base,
                quote = _props2.quote,
                order = _props2.order,
                showSymbols = _props2.showSymbols;


            var price = base.get("id") == "1.3.0" ? order.getPrice() / (1 + order.offset_percent / 10000) : order.getPrice() * (1 + order.offset_percent / 10000);
            var amountSymbol = showSymbols ? " " + quote.get("symbol") : null;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { className: "text-center", style: { width: "6%" } },
                    " "
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    common_utils__WEBPACK_IMPORTED_MODULE_2__["default"].format_number(price, quote.get("precision")),
                    " ",
                    amountSymbol
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    common_utils__WEBPACK_IMPORTED_MODULE_2__["default"].format_number(order[!order.isBid() ? "amountForSale" : "amountToReceive"]().getAmount({ real: true }), quote.get("precision"))
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    common_utils__WEBPACK_IMPORTED_MODULE_2__["default"].format_number(order[!order.isBid() ? "amountToReceive" : "amountForSale"]().getAmount({ real: true }), base.get("precision"))
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Tooltip"],
                        { title: new Date(order.settlement_date).toString() },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { style: { textAlign: "right", whiteSpace: "nowrap" } },
                            counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.localize(new Date(order.settlement_date), {
                                type: "date",
                                format: browser_locale__WEBPACK_IMPORTED_MODULE_6___default()().toLowerCase().indexOf("en-us") !== -1 ? "market_history_us" : "market_history"
                            })
                        )
                    )
                )
            );
        }
    }]);

    return SettleOrderRow;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

SettleOrderRow.defaultProps = {
    showSymbols: false,
    invert: false
};

var OpenSettleOrders = function (_React$Component3) {
    _inherits(OpenSettleOrders, _React$Component3);

    function OpenSettleOrders() {
        _classCallCheck(this, OpenSettleOrders);

        return _possibleConstructorReturn(this, (OpenSettleOrders.__proto__ || Object.getPrototypeOf(OpenSettleOrders)).apply(this, arguments));
    }

    _createClass(OpenSettleOrders, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps) {
            return nextProps.currentAccount !== this.props.currentAccount || nextProps.orders !== this.props.orders;
        }
    }, {
        key: "render",
        value: function render() {
            var _props3 = this.props,
                orders = _props3.orders,
                base = _props3.base,
                quote = _props3.quote;


            var activeOrders = null;

            var emptyRow = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tbody",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: {
                                textAlign: "center",
                                lineHeight: 4,
                                fontStyle: "italic"
                            },
                            colSpan: "5"
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.no_orders" })
                    )
                )
            );

            if (orders.size > 0 && base && quote) {
                activeOrders = orders.sort(function (a, b) {
                    return a.isBefore(b) ? -1 : 1;
                }).map(function (order) {
                    return Date.now() < order.settlement_date ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SettleOrderRow, {
                        key: order.id,
                        order: order,
                        base: base,
                        quote: quote
                    }) : null;
                }).toArray();
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                _Utility_TransitionWrapper__WEBPACK_IMPORTED_MODULE_7__["default"],
                {
                    ref: "contentTransition",
                    component: "tbody",
                    transitionName: "newrow"
                },
                activeOrders ? activeOrders : emptyRow
            );
        }
    }]);

    return OpenSettleOrders;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

OpenSettleOrders.defaultProps = {
    base: {},
    quote: {},
    orders: {},
    quoteSymbol: "",
    baseSymbol: ""
};

OpenSettleOrders.propTypes = {
    base: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object.isRequired,
    quote: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object.isRequired,
    orders: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object.isRequired,
    quoteSymbol: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,
    baseSymbol: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired
};

/* harmony default export */ __webpack_exports__["default"] = (OpenSettleOrders);

/***/ }),

/***/ 2813:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MarketsOrderView", function() { return MarketsOrderView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MarketOrdersRowView", function() { return MarketOrdersRowView; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(571);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Utility_PriceText__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2783);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2129);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }







var rightAlign = { textAlign: "right" };


function MarketOrdersViewTableHeader(_ref) {
    var baseSymbol = _ref.baseSymbol,
        quoteSymbol = _ref.quoteSymbol,
        selected = _ref.selected,
        onCancelToggle = _ref.onCancelToggle;

    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "thead",
        null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "tr",
            null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "th",
                { style: { width: "6%", textAlign: "center" } },
                onCancelToggle ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__["Tooltip"],
                    {
                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.cancel_order_select_all"),
                        placement: "left"
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__["Checkbox"], {
                        className: "order-cancel-toggle",
                        checked: selected,
                        onChange: onCancelToggle
                    })
                ) : null
            ),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "th",
                { style: rightAlign },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                    className: "header-sub-title",
                    content: "exchange.price"
                })
            ),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "th",
                { style: rightAlign },
                baseSymbol ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    { className: "header-sub-title" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_5__["default"], { dataPlace: "top", name: quoteSymbol })
                ) : null
            ),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "th",
                { style: rightAlign },
                baseSymbol ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    { className: "header-sub-title" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_5__["default"], { dataPlace: "top", name: baseSymbol })
                ) : null
            ),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "th",
                { style: rightAlign },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                    className: "header-sub-title",
                    content: "transaction.expiration"
                })
            )
        )
    );
}

MarketOrdersViewTableHeader.defaultProps = {
    quoteSymbol: null,
    baseSymbol: null
};

function MarketOrdersRowView(_ref2) {
    var order = _ref2.order,
        selected = _ref2.selected,
        base = _ref2.base,
        quote = _ref2.quote,
        onCheckCancel = _ref2.onCheckCancel;

    var isBid = order.isBid();
    var isCall = order.isCall();
    var tdClass = isCall ? "orderHistoryCall" : isBid ? "orderHistoryBid" : "orderHistoryAsk";

    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "tr",
        { key: order.id },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "td",
            { className: "text-center", style: { width: "6%" } },
            isCall ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__["Checkbox"], {
                className: "orderCancel",
                checked: selected,
                onChange: onCheckCancel
            })
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "td",
            { className: tdClass, style: { paddingLeft: 10 } },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_PriceText__WEBPACK_IMPORTED_MODULE_4__["default"], { price: order.getPrice(), base: base, quote: quote })
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "td",
            null,
            common_utils__WEBPACK_IMPORTED_MODULE_2__["default"].format_number(order[!isBid ? "amountForSale" : "amountToReceive"]().getAmount({ real: true }), quote.get("precision")),
            " "
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "td",
            null,
            common_utils__WEBPACK_IMPORTED_MODULE_2__["default"].format_number(order[!isBid ? "amountToReceive" : "amountForSale"]().getAmount({ real: true }), base.get("precision")),
            " "
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "td",
            null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__["Tooltip"],
                { title: order.expiration.toLocaleString() },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    {
                        style: {
                            textAlign: "right",
                            whiteSpace: "nowrap"
                        }
                    },
                    isCall ? null : counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.localize(new Date(order.expiration), {
                        type: "date",
                        format: "short_custom"
                    })
                )
            )
        )
    );
}

var MarketsOrderView = function (_React$Component) {
    _inherits(MarketsOrderView, _React$Component);

    function MarketsOrderView() {
        _classCallCheck(this, MarketsOrderView);

        return _possibleConstructorReturn(this, (MarketsOrderView.__proto__ || Object.getPrototypeOf(MarketsOrderView)).apply(this, arguments));
    }

    _createClass(MarketsOrderView, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                style = _props.style,
                className = _props.className,
                innerClass = _props.innerClass,
                innerStyle = _props.innerStyle,
                headerStyle = _props.headerStyle,
                noHeader = _props.noHeader,
                isSelected = _props.isSelected,
                tinyScreen = _props.tinyScreen,
                activeTab = _props.activeTab,
                baseSymbol = _props.baseSymbol,
                quoteSymbol = _props.quoteSymbol,
                contentContainer = _props.contentContainer,
                footerContainer = _props.footerContainer,
                onCancelToggle = _props.onCancelToggle;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { style: style, key: "open_orders", className: className },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: innerClass, style: innerStyle },
                    noHeader ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            style: headerStyle,
                            className: "exchange-content-header"
                        },
                        activeTab == "my_orders" ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.my_orders" }) : null,
                        activeTab == "open_settlement" ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settle_orders" }) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "grid-block shrink left-orderbook-header market-right-padding-only" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "table",
                            { className: "table order-table text-right fixed-table market-right-padding" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarketOrdersViewTableHeader, {
                                baseSymbol: baseSymbol,
                                quoteSymbol: quoteSymbol,
                                selected: isSelected,
                                onCancelToggle: activeTab == "my_orders" ? onCancelToggle : null
                            })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "table-container grid-block market-right-padding-only no-overflow",
                            ref: "container",
                            style: {
                                overflow: "hidden",
                                minHeight: tinyScreen ? 260 : 0,
                                maxHeight: 260,
                                lineHeight: "13px"
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "table",
                            { className: "table order-table table-highlight-hover table-hover no-stripes text-right fixed-table market-right-padding" },
                            contentContainer
                        )
                    ),
                    footerContainer
                )
            );
        }
    }]);

    return MarketsOrderView;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);



/***/ }),

/***/ 2814:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OrderBook", function() { return OrderBook; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GroupOrderLimitSelector", function() { return GroupOrderLimitSelector; });
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_sticky_table__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2815);
/* harmony import */ var react_sticky_table__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_sticky_table__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2761);
/* harmony import */ var perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(571);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(726);
/* harmony import */ var _Utility_PriceText__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2783);
/* harmony import */ var _Utility_TransitionWrapper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2799);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2129);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1894);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
















/**
 * @array: orderRows
 * @bool: noOrders
 * @bool: isBid
 */

var OrderRows = function (_React$Component) {
    _inherits(OrderRows, _React$Component);

    function OrderRows() {
        _classCallCheck(this, OrderRows);

        return _possibleConstructorReturn(this, (OrderRows.__proto__ || Object.getPrototypeOf(OrderRows)).apply(this, arguments));
    }

    _createClass(OrderRows, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                orderRows = _props.orderRows,
                noOrders = _props.noOrders,
                isBid = _props.isBid,
                id = _props.id;

            return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                _Utility_TransitionWrapper__WEBPACK_IMPORTED_MODULE_10__["default"],
                {
                    id: id,
                    ref: isBid ? "bidTransition" : "askTransaction",
                    className: "transition-container clickable",
                    component: "div",
                    transitionName: "newrow"
                },
                orderRows.length > 0 ? orderRows : noOrders || react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    { className: "sticky-table-row" },
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        "td",
                        { className: "cell no-orders", colSpan: "3" },
                        isBid ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "exchange.no_bids" }) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "exchange.no_asks" })
                    )
                )
            );
        }
    }]);

    return OrderRows;
}(react__WEBPACK_IMPORTED_MODULE_3___default.a.Component);

OrderRows.propTypes = {
    orderRows: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.array.isRequired,
    noOrders: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.bool.isRequired,
    isBid: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.bool.isRequired
};

var OrderBookRowVertical = function (_React$Component2) {
    _inherits(OrderBookRowVertical, _React$Component2);

    function OrderBookRowVertical() {
        _classCallCheck(this, OrderBookRowVertical);

        return _possibleConstructorReturn(this, (OrderBookRowVertical.__proto__ || Object.getPrototypeOf(OrderBookRowVertical)).apply(this, arguments));
    }

    _createClass(OrderBookRowVertical, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np) {
            if (np.order.market_base !== this.props.order.market_base) return false;
            return np.order.ne(this.props.order) || np.index !== this.props.index || np.currentAccount !== this.props.currentAccount || np.isPanelActive !== this.props.isPanelActive || np.horizontal !== this.props.horizontal;
        }
    }, {
        key: "render",
        value: function render() {
            var _props2 = this.props,
                order = _props2.order,
                quote = _props2.quote,
                base = _props2.base,
                final = _props2.final;

            var isBid = order.isBid();
            var isCall = order.isCall();
            var integerClass = isCall ? "orderHistoryCall" : isBid ? "orderHistoryBid" : "orderHistoryAsk";

            var price = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_PriceText__WEBPACK_IMPORTED_MODULE_9__["default"], { price: order.getPrice(), quote: quote, base: base });
            return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                "div",
                {
                    onClick: this.props.onClick,
                    className: classnames__WEBPACK_IMPORTED_MODULE_0___default()("sticky-table-row order-row", { "final-row": final }, { "my-order": order.isMine(this.props.currentAccount) })
                },
                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    { className: "cell left" },
                    common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(order[isBid ? "amountForSale" : "amountToReceive"]().getAmount({ real: true }), base.get("precision"))
                ),
                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    { className: "cell" },
                    common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(order[isBid ? "amountToReceive" : "amountForSale"]().getAmount({ real: true }), quote.get("precision"))
                ),
                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    { className: "cell " + integerClass + " right" },
                    price
                )
            );
        }
    }]);

    return OrderBookRowVertical;
}(react__WEBPACK_IMPORTED_MODULE_3___default.a.Component);

var elemHeight = function elemHeight(elem) {
    return elem ? elem.getBoundingClientRect().height : 0;
};

var OrderBookRowHorizontal = function (_React$Component3) {
    _inherits(OrderBookRowHorizontal, _React$Component3);

    function OrderBookRowHorizontal() {
        _classCallCheck(this, OrderBookRowHorizontal);

        return _possibleConstructorReturn(this, (OrderBookRowHorizontal.__proto__ || Object.getPrototypeOf(OrderBookRowHorizontal)).apply(this, arguments));
    }

    _createClass(OrderBookRowHorizontal, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np) {
            return np.order.ne(this.props.order) || np.position !== this.props.position || np.index !== this.props.index || np.currentAccount !== this.props.currentAccount || np.quoteTotal !== this.props.quoteTotal;
        }
    }, {
        key: "render",
        value: function render() {
            var _props3 = this.props,
                order = _props3.order,
                quote = _props3.quote,
                base = _props3.base,
                position = _props3.position,
                quoteTotal = _props3.quoteTotal;

            var isBid = order.isBid();
            var isCall = order.isCall();

            var integerClass = isCall ? "orderHistoryCall" : isBid ? "orderHistoryBid" : "orderHistoryAsk";

            var price = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_PriceText__WEBPACK_IMPORTED_MODULE_9__["default"], { price: order.getPrice(), quote: quote, base: base });
            var amount = isBid ? common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(order.amountToReceive().getAmount({ real: true }), quote.get("precision")) : common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(order.amountForSale().getAmount({ real: true }), quote.get("precision"));
            var value = isBid ? common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(order.amountForSale().getAmount({ real: true }), base.get("precision")) : common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(order.amountToReceive().getAmount({ real: true }), base.get("precision"));
            var totalValueBids = quoteTotal ? order.totalToReceive() : order.totalForSale();
            var totalValueAsks = quoteTotal ? order.totalForSale() : order.totalToReceive();
            var totalAsset = quoteTotal ? quote : base;
            var total = isBid ? common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(totalValueBids.getAmount({ real: true }), totalAsset.get("precision")) : common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(totalValueAsks.getAmount({ real: true }), totalAsset.get("precision"));

            return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                "tr",
                {
                    onClick: this.props.onClick,
                    className: order.isMine(this.props.currentAccount) ? "my-order" : ""
                },
                position === "left" ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "td",
                    { className: "column-hide-xs" },
                    total
                ) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "td",
                    { style: { width: "25%" }, className: integerClass },
                    price
                ),
                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "td",
                    null,
                    position === "left" ? value : amount
                ),
                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "td",
                    null,
                    position === "left" ? amount : value
                ),
                position === "right" ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "td",
                    { className: "column-hide-xs" },
                    total
                ) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "td",
                    { style: { width: "25%" }, className: integerClass },
                    price
                )
            );
        }
    }]);

    return OrderBookRowHorizontal;
}(react__WEBPACK_IMPORTED_MODULE_3___default.a.Component);

var GroupedOrderBookRowVertical = function (_React$Component4) {
    _inherits(GroupedOrderBookRowVertical, _React$Component4);

    function GroupedOrderBookRowVertical() {
        _classCallCheck(this, GroupedOrderBookRowVertical);

        return _possibleConstructorReturn(this, (GroupedOrderBookRowVertical.__proto__ || Object.getPrototypeOf(GroupedOrderBookRowVertical)).apply(this, arguments));
    }

    _createClass(GroupedOrderBookRowVertical, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np) {
            if (np.order.market_base !== this.props.order.market_base) return false;
            return np.order.ne(this.props.order) || np.index !== this.props.index || np.currentAccount !== this.props.currentAccount;
        }
    }, {
        key: "render",
        value: function render() {
            var _props4 = this.props,
                order = _props4.order,
                quote = _props4.quote,
                base = _props4.base,
                final = _props4.final;

            var isBid = order.isBid();
            var integerClass = isBid ? "orderHistoryBid" : "orderHistoryAsk";

            var price = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_PriceText__WEBPACK_IMPORTED_MODULE_9__["default"], { price: order.getPrice(), quote: quote, base: base });
            return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                "div",
                {
                    onClick: this.props.onClick,
                    className: classnames__WEBPACK_IMPORTED_MODULE_0___default()("sticky-table-row order-row", {
                        "final-row": final
                    })
                },
                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    { className: "cell left" },
                    common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(order[isBid ? "amountForSale" : "amountToReceive"]().getAmount({ real: true }), base.get("precision"))
                ),
                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    { className: "cell" },
                    common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(order[isBid ? "amountToReceive" : "amountForSale"]().getAmount({ real: true }), quote.get("precision"))
                ),
                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    { className: "cell " + integerClass + " right" },
                    price
                )
            );
        }
    }]);

    return GroupedOrderBookRowVertical;
}(react__WEBPACK_IMPORTED_MODULE_3___default.a.Component);

var GroupedOrderBookRowHorizontal = function (_React$Component5) {
    _inherits(GroupedOrderBookRowHorizontal, _React$Component5);

    function GroupedOrderBookRowHorizontal() {
        _classCallCheck(this, GroupedOrderBookRowHorizontal);

        return _possibleConstructorReturn(this, (GroupedOrderBookRowHorizontal.__proto__ || Object.getPrototypeOf(GroupedOrderBookRowHorizontal)).apply(this, arguments));
    }

    _createClass(GroupedOrderBookRowHorizontal, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np) {
            return np.order.ne(this.props.order) || np.position !== this.props.position || np.index !== this.props.index || np.currentAccount !== this.props.currentAccount || np.quoteTotal !== this.props.quoteTotal;
        }
    }, {
        key: "render",
        value: function render() {
            var _props5 = this.props,
                order = _props5.order,
                quote = _props5.quote,
                base = _props5.base,
                position = _props5.position,
                quoteTotal = _props5.quoteTotal;

            var isBid = order.isBid();

            var integerClass = isBid ? "orderHistoryBid" : "orderHistoryAsk";

            var price = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_PriceText__WEBPACK_IMPORTED_MODULE_9__["default"], { price: order.getPrice(), quote: quote, base: base });
            var amount = isBid ? common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(order.amountToReceive().getAmount({ real: true }), quote.get("precision")) : common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(order.amountForSale().getAmount({ real: true }), quote.get("precision"));
            var value = isBid ? common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(order.amountForSale().getAmount({ real: true }), base.get("precision")) : common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(order.amountToReceive().getAmount({ real: true }), base.get("precision"));
            var totalValueBids = quoteTotal ? order.totalToReceive() : order.totalForSale();
            var totalValueAsks = quoteTotal ? order.totalForSale() : order.totalToReceive();
            var totalAsset = quoteTotal ? quote : base;
            var total = isBid ? common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(totalValueBids.getAmount({ real: true }), totalAsset.get("precision")) : common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(totalValueAsks.getAmount({ real: true }), totalAsset.get("precision"));

            return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                "tr",
                { onClick: this.props.onClick },
                position === "left" ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "td",
                    { className: "column-hide-xs" },
                    total
                ) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "td",
                    { style: { width: "25%" }, className: integerClass },
                    price
                ),
                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "td",
                    null,
                    position === "left" ? value : amount
                ),
                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "td",
                    null,
                    position === "left" ? amount : value
                ),
                position === "right" ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "td",
                    { className: "column-hide-xs" },
                    total
                ) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "td",
                    { style: { width: "25%" }, className: integerClass },
                    price
                )
            );
        }
    }]);

    return GroupedOrderBookRowHorizontal;
}(react__WEBPACK_IMPORTED_MODULE_3___default.a.Component);

var GroupOrderLimitSelector = function (_React$Component6) {
    _inherits(GroupOrderLimitSelector, _React$Component6);

    function GroupOrderLimitSelector() {
        _classCallCheck(this, GroupOrderLimitSelector);

        var _this6 = _possibleConstructorReturn(this, (GroupOrderLimitSelector.__proto__ || Object.getPrototypeOf(GroupOrderLimitSelector)).call(this));

        _this6.state = {
            groupLimit: ""
        };
        return _this6;
    }

    _createClass(GroupOrderLimitSelector, [{
        key: "render",
        value: function render() {
            var _this7 = this;

            var noGroupsAvailable = this.props.trackedGroupsConfig.length === 0;
            var trackedGroupsOptionsList = this.props.trackedGroupsConfig.map(function (key) {
                return _this7.props.globalSettingsSelector ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Select"].Option,
                    { value: key, key: key },
                    key / 100 + "%"
                ) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "option",
                    { value: key, key: key },
                    key / 100 + "%"
                );
            });

            if (this.props.globalSettingsSelector) {
                return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Select"],
                    {
                        placeholder: "Select option",
                        style: { width: "100%" },
                        value: this.props.currentGroupOrderLimit,
                        disabled: noGroupsAvailable,
                        onChange: this.props.handleGroupOrderLimitChange.bind(this)
                    },
                    noGroupsAvailable ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Select"].Option,
                        { value: 0 },
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "tooltip.no_groups_available" })
                    ) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Select"].Option,
                        { value: 0 },
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "settings.disabled" })
                    ),
                    trackedGroupsOptionsList
                );
            } else {
                return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Tooltip"],
                    {
                        placement: "bottom",
                        title: noGroupsAvailable ? counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("tooltip.no_groups_available") : null
                    },
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        "select",
                        {
                            value: this.state.groupLimit,
                            onChange: this.props.handleGroupOrderLimitChange,
                            className: "settings-select",
                            style: noGroupsAvailable ? { cursor: "not-allowed" } : null
                        },
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            content: "exchange.group_order_limit",
                            component: "option",
                            value: "0"
                        }),
                        trackedGroupsOptionsList
                    )
                );
            }
        }
    }], [{
        key: "getDerivedStateFromProps",
        value: function getDerivedStateFromProps(props) {
            return { groupLimit: props.currentGroupOrderLimit };
        }
    }]);

    return GroupOrderLimitSelector;
}(react__WEBPACK_IMPORTED_MODULE_3___default.a.Component);

var OrderBook = function (_React$Component7) {
    _inherits(OrderBook, _React$Component7);

    function OrderBook(props) {
        _classCallCheck(this, OrderBook);

        var _this8 = _possibleConstructorReturn(this, (OrderBook.__proto__ || Object.getPrototypeOf(OrderBook)).call(this));

        _this8.queryStickyTable = function (query) {
            return _this8.verticalStickyTable.current.table.querySelector(query);
        };

        _this8.verticalScrollBar = function () {
            return _this8.queryStickyTable("#y-scrollbar");
        };

        _this8.toggleSpreadValue = function () {
            _this8.setState({
                displaySpreadAsPercentage: !_this8.state.displaySpreadAsPercentage
            });
        };

        _this8.toggleAutoScroll = function () {
            _this8.setState({ autoScroll: !_this8.state.autoScroll });
        };

        _this8.state = {
            flip: props.flipOrderBook,
            showAllBids: false,
            showAllAsks: false,
            rowCount: 20,
            autoScroll: props.autoScroll,
            quoteTotalBids: false,
            quoteTotalAsks: false
        };
        _this8.verticalStickyTable = react__WEBPACK_IMPORTED_MODULE_3___default.a.createRef();
        _this8.centerText = react__WEBPACK_IMPORTED_MODULE_3___default.a.createRef();
        return _this8;
    }

    _createClass(OrderBook, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps, nextState) {
            if (this.props.horizontal && this.props.hideScrollbars && nextState.showAllAsks != this.state.showAllAsks) {
                var asksContainer = this.refs.hor_asks;
                if (!nextState.showAllAsks) {
                    perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default.a.destroy(asksContainer);
                } else {
                    perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default.a.initialize(asksContainer);
                    this.psUpdate();
                }
                this.refs.askTransition.resetAnimation();
                if (this.refs.hor_asks) this.refs.hor_asks.scrollTop = 0;
            }

            if (this.props.horizontal && this.props.hideScrollbars && nextState.showAllBids != this.state.showAllBids) {
                var bidsContainer = this.refs.hor_bids;
                if (!nextState.showAllBids) {
                    perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default.a.destroy(bidsContainer);
                } else {
                    perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default.a.initialize(bidsContainer);
                    this.psUpdate();
                }
                this.refs.bidTransition.resetAnimation();
                if (this.refs.hor_bids) this.refs.hor_bids.scrollTop = 0;
            }

            // if (!nextProps.marketReady) return false;
            return true;
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate(prevProps, prevState, snapshot) {
            var nextProps = this.props;
            // Change of market or direction
            if (nextProps.base.get("id") !== prevProps.base.get("id") || nextProps.quote.get("id") !== prevProps.quote.get("id")) {
                if (this.refs.askTransition) {
                    this.refs.askTransition.resetAnimation();
                    if (this.refs.hor_asks) this.refs.hor_asks.scrollTop = 0;
                    if (this.refs.hor_bids) this.refs.hor_bids.scrollTop = 0;
                }

                if (this.refs.bidTransition) {
                    this.refs.bidTransition.resetAnimation();
                }

                if (this.refs.vert_bids) this.refs.vert_bids.scrollTop = 0;

                if (!this.props.horizontal) {
                    this.setState({ autoScroll: this.state.autoScroll });
                }
            }

            var bidsContainer = this.refs.hor_bids;
            var asksContainer = this.refs.hor_asks;

            if (this.props.horizontal && nextProps.hideScrollbars !== this.props.hideScrollbars && nextProps.hideScrollbars) {
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default.a.destroy(bidsContainer);
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default.a.destroy(asksContainer);
            }

            if (this.props.horizontal && nextProps.hideScrollbars !== this.props.hideScrollbars && !nextProps.hideScrollbars) {
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default.a.initialize(bidsContainer);
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default.a.initialize(asksContainer);
                this.refs.askTransition.resetAnimation();
                this.refs.bidTransition.resetAnimation();
                if (asksContainer) asksContainer.scrollTop = 0;
                if (bidsContainer) bidsContainer.scrollTop = 0;
                this.psUpdate();
            }

            this.centerVerticalScrollBar();
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            if (!this.props.horizontal) {
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default.a.initialize(this.verticalScrollBar());
            } else {
                if (!this.props.hideScrollbars) {
                    var bidsContainer = this.refs.hor_bids;
                    perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default.a.initialize(bidsContainer);
                    var asksContainer = this.refs.hor_asks;
                    perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default.a.initialize(asksContainer);
                }
            }
        }
    }, {
        key: "centerVerticalScrollBar",
        value: function centerVerticalScrollBar() {
            if (!this.props.horizontal && this.state.autoScroll) {
                // Center vertical scroll bar
                var scrollableContainer = this.queryStickyTable("#sticky-table-y-wrapper");
                var header = this.queryStickyTable("#sticky-table-header");
                var centerTextContainer = this.centerText.current;
                var singleRowHeight = elemHeight(this.queryStickyTable(".order-row"));

                var rows = this.props.currentGroupOrderLimit !== 0 ? !this.props.orderBookReversed ? this.props.groupedAsks : this.props.groupedBids : !this.props.orderBookReversed ? this.props.combinedAsks : this.props.combinedBids;

                var rowsHeight = rows.length * singleRowHeight;

                var scrollableContainerHeight = elemHeight(scrollableContainer) - elemHeight(header);

                var scrollTo = rowsHeight + elemHeight(centerTextContainer) / 2 - scrollableContainerHeight / 2;

                scrollableContainer.scrollTop = scrollTo;
            }
        }
    }, {
        key: "psUpdate",
        value: function psUpdate() {
            if (!this.props.horizontal) {
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default.a.update(this.verticalScrollBar());
            } else {
                var bidsContainer = this.refs.hor_bids;
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default.a.update(bidsContainer);
                var asksContainer = this.refs.hor_asks;
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_6___default.a.update(asksContainer);
            }
        }

        /***
         * Sets status to show full order book by asks or bids
         * @string: type
         */

    }, {
        key: "_onSetShowAll",
        value: function _onSetShowAll(type) {
            if (type === "asks") {
                this.setState({
                    showAllAsks: !this.state.showAllAsks
                });

                if (this.state.showAllAsks) {
                    this.refs.hor_asks.scrollTop = 0;
                }
            } else {
                this.setState({
                    showAllBids: !this.state.showAllBids
                });

                if (this.state.showAllBids) {
                    this.refs.hor_bids.scrollTop = 0;
                }
            }
        }

        /***
         * Toggle spread value to view real value or percentage in spread
         * Vertical order book only
         */


        /***
         * Toggle auto scroll to lock/unlock auto centering
         * Vertical order book only
         */

    }, {
        key: "toggleTotalAsset",
        value: function toggleTotalAsset(isBid) {
            var quoteTotal = isBid ? "quoteTotalBids" : "quoteTotalAsks";
            this.setState(_defineProperty({}, quoteTotal, !this.state[quoteTotal]));
        }
    }, {
        key: "render",
        value: function render() {
            var _this9 = this;

            var _props6 = this.props,
                combinedBids = _props6.combinedBids,
                combinedAsks = _props6.combinedAsks,
                highestBid = _props6.highestBid,
                lowestAsk = _props6.lowestAsk,
                quote = _props6.quote,
                base = _props6.base,
                totalAsks = _props6.totalAsks,
                totalBids = _props6.totalBids,
                quoteSymbol = _props6.quoteSymbol,
                baseSymbol = _props6.baseSymbol,
                horizontal = _props6.horizontal,
                trackedGroupsConfig = _props6.trackedGroupsConfig,
                currentGroupOrderLimit = _props6.currentGroupOrderLimit,
                handleGroupOrderLimitChange = _props6.handleGroupOrderLimitChange,
                orderBookReversed = _props6.orderBookReversed,
                groupedBids = _props6.groupedBids,
                groupedAsks = _props6.groupedAsks,
                flipOrderBook = _props6.flipOrderBook;
            var _state = this.state,
                showAllAsks = _state.showAllAsks,
                showAllBids = _state.showAllBids,
                rowCount = _state.rowCount,
                displaySpreadAsPercentage = _state.displaySpreadAsPercentage;


            var noOrders = !lowestAsk.sell_price && !highestBid.sell_price;
            var hasAskAndBids = !!(lowestAsk.sell_price && highestBid.sell_price);
            var spread = hasAskAndBids && (displaySpreadAsPercentage ? (100 * (lowestAsk._real_price / highestBid._real_price - 1)).toFixed(2) + "%" : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_PriceText__WEBPACK_IMPORTED_MODULE_9__["default"], {
                price: lowestAsk._real_price - highestBid._real_price,
                base: base,
                quote: quote
            }));
            var bidRows = null,
                askRows = null;

            /* Sort */
            var tempAsks = this.props.currentGroupOrderLimit !== 0 ? groupedAsks : combinedAsks; // RED
            var tempBids = this.props.currentGroupOrderLimit !== 0 ? groupedBids : combinedBids; // GREEN

            if (!horizontal && !orderBookReversed) {
                tempBids.sort(function (a, b) {
                    return b.getPrice() - a.getPrice();
                });
                tempAsks.sort(function (a, b) {
                    return b.getPrice() - a.getPrice();
                });
            } else if (!horizontal && orderBookReversed) {
                tempBids.sort(function (a, b) {
                    return a.getPrice() - b.getPrice();
                });
                tempAsks.sort(function (a, b) {
                    return a.getPrice() - b.getPrice();
                });
            }

            if (base && quote) {
                // limit orders or grouped orders
                if (this.props.currentGroupOrderLimit !== 0) {
                    bidRows = tempBids.map(function (order, index) {
                        return horizontal ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(GroupedOrderBookRowHorizontal, {
                            index: index,
                            key: order.getPrice() + (order.isBid() ? "_bid" : ""),
                            order: order,
                            onClick: _this9.props.onClick.bind(_this9, order),
                            base: base,
                            quote: quote,
                            position: !flipOrderBook ? "left" : "right",
                            currentAccount: _this9.props.currentAccount,
                            quoteTotal: _this9.state.quoteTotalBids
                        }) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(GroupedOrderBookRowVertical, {
                            index: index,
                            key: order.getPrice() + (order.isBid() ? "_bid" : ""),
                            order: order,
                            onClick: _this9.props.onClick.bind(_this9, order),
                            base: base,
                            quote: quote,
                            final: index === 0,
                            currentAccount: _this9.props.currentAccount
                        });
                    });

                    askRows = tempAsks.map(function (order, index) {
                        return horizontal ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(GroupedOrderBookRowHorizontal, {
                            index: index,
                            key: order.getPrice() + (order.isBid() ? "_bid" : ""),
                            order: order,
                            onClick: _this9.props.onClick.bind(_this9, order),
                            base: base,
                            quote: quote,
                            type: order.type,
                            position: !flipOrderBook ? "right" : "left",
                            currentAccount: _this9.props.currentAccount,
                            quoteTotal: _this9.state.quoteTotalAsks
                        }) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(GroupedOrderBookRowVertical, {
                            index: index,
                            key: order.getPrice() + (order.isBid() ? "_bid" : ""),
                            order: order,
                            onClick: _this9.props.onClick.bind(_this9, order),
                            base: base,
                            quote: quote,
                            type: order.type,
                            final: 0 === index,
                            currentAccount: _this9.props.currentAccount
                        });
                    });
                } else {
                    bidRows = tempBids.map(function (order, index) {
                        return horizontal ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(OrderBookRowHorizontal, {
                            index: index,
                            key: order.getPrice() + (order.isCall() ? "_call" : ""),
                            order: order,
                            onClick: _this9.props.onClick.bind(_this9, order),
                            base: base,
                            quote: quote,
                            position: !flipOrderBook ? "left" : "right",
                            currentAccount: _this9.props.currentAccount,
                            quoteTotal: _this9.state.quoteTotalBids
                        }) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(OrderBookRowVertical, {
                            index: index,
                            key: order.getPrice() + (order.isCall() ? "_call" : ""),
                            order: order,
                            onClick: _this9.props.onClick.bind(_this9, order),
                            base: base,
                            quote: quote,
                            final: index === 0,
                            currentAccount: _this9.props.currentAccount
                        });
                    });

                    askRows = tempAsks.map(function (order, index) {
                        return horizontal ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(OrderBookRowHorizontal, {
                            index: index,
                            key: order.getPrice() + (order.isCall() ? "_call" : ""),
                            order: order,
                            onClick: _this9.props.onClick.bind(_this9, order),
                            base: base,
                            quote: quote,
                            type: order.type,
                            position: !flipOrderBook ? "right" : "left",
                            currentAccount: _this9.props.currentAccount,
                            quoteTotal: _this9.state.quoteTotalAsks
                        }) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(OrderBookRowVertical, {
                            index: index,
                            key: order.getPrice() + (order.isCall() ? "_call" : ""),
                            order: order,
                            onClick: _this9.props.onClick.bind(_this9, order),
                            base: base,
                            quote: quote,
                            type: order.type,
                            final: 0 === index,
                            currentAccount: _this9.props.currentAccount
                        });
                    });
                }
            }

            if (this.props.horizontal) {
                var totalBidsLength = bidRows.length;
                var totalAsksLength = askRows.length;

                if (!showAllBids) {
                    bidRows.splice(rowCount, bidRows.length);
                }

                if (!showAllAsks) {
                    askRows.splice(rowCount, askRows.length);
                }

                var leftHeader = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "thead",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        "tr",
                        { key: "top-header", className: "top-header" },
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "th",
                            { className: "column-hide-xs" },
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                className: "header-sub-title",
                                content: "exchange.total"
                            }),
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "a",
                                {
                                    onClick: function onClick() {
                                        return _this9.toggleTotalAsset(true);
                                    },
                                    className: "header-sub-title underline-title"
                                },
                                " ",
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_11__["default"], {
                                    dataPlace: "top",
                                    name: !this.state.quoteTotalBids ? baseSymbol : quoteSymbol,
                                    noTip: true
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "span",
                                { className: "header-sub-title" },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_11__["default"], { dataPlace: "top", name: baseSymbol })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "span",
                                { className: "header-sub-title" },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_11__["default"], { dataPlace: "top", name: quoteSymbol })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                className: (flipOrderBook ? "ask-total" : "bid-total") + " header-sub-title",
                                content: "exchange.price"
                            })
                        )
                    )
                );

                var rightHeader = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "thead",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        "tr",
                        { key: "top-header", className: "top-header" },
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                className: (!flipOrderBook ? "ask-total" : "bid-total") + " header-sub-title",
                                content: "exchange.price"
                            })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "span",
                                { className: "header-sub-title" },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_11__["default"], { dataPlace: "top", name: quoteSymbol })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "span",
                                { className: "header-sub-title" },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_11__["default"], { dataPlace: "top", name: baseSymbol })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "th",
                            { className: "column-hide-xs" },
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                className: "header-sub-title",
                                content: "exchange.total"
                            }),
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "a",
                                {
                                    onClick: function onClick() {
                                        return _this9.toggleTotalAsset();
                                    },
                                    className: "header-sub-title underline-title"
                                },
                                " ",
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_11__["default"], {
                                    dataPlace: "top",
                                    name: !this.state.quoteTotalAsks ? baseSymbol : quoteSymbol,
                                    noTip: true
                                })
                            )
                        )
                    )
                );

                var wrapperClass = this.props.wrapperClass;
                var innerClass = this.props.innerClass;

                return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    {
                        ref: "order_book",
                        style: { marginRight: this.props.smallScreen ? 10 : 0 },
                        className: classnames__WEBPACK_IMPORTED_MODULE_0___default()(wrapperClass)
                    },
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        "div",
                        {
                            className: classnames__WEBPACK_IMPORTED_MODULE_0___default()(innerClass, flipOrderBook ? "order-1" : "order-2")
                        },
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "div",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                {
                                    className: "exchange-content-header ask"
                                    //data-intro={translator.translate(
                                    //    "walkthrough.sell_orders"
                                    //)}
                                },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "exchange.asks" }),
                                flipOrderBook && !this.props.hideFunctionButtons ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "div",
                                    { style: { display: "inline-block" } },
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                        "span",
                                        {
                                            onClick: this.props.onFlipOrderBook.bind(this),
                                            style: {
                                                cursor: "pointer",
                                                fontSize: "1rem",
                                                marginLeft: "4px",
                                                position: "relative",
                                                top: "-2px"
                                            },
                                            className: "flip-arrow"
                                        },
                                        " ",
                                        "\u21C6"
                                    )
                                ) : null,
                                flipOrderBook && !this.props.hideFunctionButtons ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "div",
                                    { className: "float-right header-sub-title grouped_order" },
                                    trackedGroupsConfig ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(GroupOrderLimitSelector, {
                                        trackedGroupsConfig: trackedGroupsConfig,
                                        handleGroupOrderLimitChange: handleGroupOrderLimitChange,
                                        currentGroupOrderLimit: currentGroupOrderLimit
                                    }) : null
                                ) : null,
                                this.props.onTogglePosition && !this.props.hideFunctionButtons ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "span",
                                    {
                                        onClick: this.props.onTogglePosition,
                                        style: {
                                            cursor: "pointer",
                                            fontSize: "1rem"
                                        },
                                        className: "flip-arrow"
                                    },
                                    " ",
                                    "\u21C5"
                                ) : null,
                                flipOrderBook && !this.props.hideFunctionButtons ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "span",
                                    {
                                        className: "order-book-button-v",
                                        onClick: this.props.moveOrderBook
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                        name: "thumb-tack",
                                        className: "icon-14px icon-fill"
                                    })
                                ) : null,
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "div",
                                    {
                                        style: { lineHeight: "16px" },
                                        className: "header-sub-title float-right"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "exchange.market_depth" }),
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                        "span",
                                        null,
                                        ": "
                                    ),
                                    common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(totalAsks, quote.get("precision")),
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                        "span",
                                        null,
                                        " ",
                                        "(",
                                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_11__["default"], { name: quoteSymbol }),
                                        ")"
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                { className: "market-right-padding-only" },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "table",
                                    { className: "table order-table table-hover fixed-table text-right" },
                                    !flipOrderBook ? rightHeader : leftHeader
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                {
                                    className: "grid-block",
                                    ref: "hor_asks",
                                    style: {
                                        paddingRight: "0.6rem",
                                        overflow: "hidden",
                                        maxHeight: 260,
                                        lineHeight: "13px"
                                    }
                                },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "table",
                                    {
                                        style: { paddingBottom: 5 },
                                        className: "table order-table no-stripes table-hover fixed-table text-right no-overflow"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                        _Utility_TransitionWrapper__WEBPACK_IMPORTED_MODULE_10__["default"],
                                        {
                                            ref: "askTransition",
                                            className: "orderbook clickable",
                                            component: "tbody",
                                            transitionName: "newrow",
                                            id: "top-order-rows"
                                        },
                                        askRows
                                    )
                                )
                            ),
                            totalAsksLength > 11 ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                { className: "orderbook-showall" },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "a",
                                    {
                                        onClick: this._onSetShowAll.bind(this, "asks")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                        content: showAllAsks ? "exchange.hide" : "exchange.show_asks",
                                        ordercount: totalAsksLength
                                    })
                                )
                            ) : null
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        "div",
                        {
                            className: classnames__WEBPACK_IMPORTED_MODULE_0___default()(innerClass, flipOrderBook ? "order-2" : "order-1")
                        },
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "div",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                {
                                    className: "exchange-content-header bid"
                                    //data-intro={translator.translate(
                                    //    "walkthrough.buy_orders"
                                    //)}
                                },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "exchange.bids" }),
                                !flipOrderBook && !this.props.hideFunctionButtons ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "div",
                                    { style: { display: "inline-block" } },
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                        "span",
                                        {
                                            onClick: this.props.onFlipOrderBook.bind(this),
                                            style: {
                                                cursor: "pointer",
                                                fontSize: "1rem",
                                                marginLeft: "4px",
                                                position: "relative",
                                                top: "-2px"
                                            },
                                            className: "flip-arrow"
                                        },
                                        " ",
                                        "\u21C6"
                                    )
                                ) : null,
                                !flipOrderBook && !this.props.hideFunctionButtons ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "div",
                                    { className: "float-right header-sub-title grouped_order" },
                                    trackedGroupsConfig ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(GroupOrderLimitSelector, {
                                        trackedGroupsConfig: trackedGroupsConfig,
                                        handleGroupOrderLimitChange: handleGroupOrderLimitChange,
                                        currentGroupOrderLimit: currentGroupOrderLimit
                                    }) : null
                                ) : null,
                                currentGroupOrderLimit !== 0 && this.props.hideFunctionButtons && react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                    name: "grouping",
                                    className: "float-right icon-14px",
                                    title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("icons.order_grouping"),
                                    style: {
                                        marginLeft: "0.5rem"
                                    }
                                }),
                                this.props.onTogglePosition && !this.props.hideFunctionButtons ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "span",
                                    {
                                        onClick: this.props.onTogglePosition,
                                        style: {
                                            cursor: "pointer",
                                            fontSize: "1rem"
                                        },
                                        className: "flip-arrow"
                                    },
                                    " ",
                                    "\u21C5"
                                ) : null,
                                !flipOrderBook && !this.props.hideFunctionButtons ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "span",
                                    {
                                        className: "order-book-button-v",
                                        onClick: this.props.moveOrderBook
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                        name: "thumb-tack",
                                        className: "icon-14px"
                                    })
                                ) : null,
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "div",
                                    {
                                        style: { lineHeight: "16px" },
                                        className: "float-right header-sub-title"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "exchange.market_depth" }),
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                        "span",
                                        null,
                                        ": "
                                    ),
                                    common_utils__WEBPACK_IMPORTED_MODULE_7__["default"].format_number(totalBids, base.get("precision")),
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                        "span",
                                        null,
                                        " ",
                                        "(",
                                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_11__["default"], { name: baseSymbol }),
                                        ")"
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                { className: "market-right-padding-only" },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "table",
                                    { className: "table order-table table-hover fixed-table text-right" },
                                    flipOrderBook ? rightHeader : leftHeader
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                {
                                    className: "grid-block",
                                    ref: "hor_bids",
                                    style: {
                                        paddingRight: "0.6rem",
                                        overflow: "hidden",
                                        maxHeight: 260,
                                        lineHeight: "13px"
                                    }
                                },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "table",
                                    {
                                        style: { paddingBottom: 5 },
                                        className: "table order-table no-stripes table-hover fixed-table text-right no-overflow"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                        _Utility_TransitionWrapper__WEBPACK_IMPORTED_MODULE_10__["default"],
                                        {
                                            ref: "bidTransition",
                                            className: "orderbook clickable",
                                            component: "tbody",
                                            transitionName: "newrow"
                                        },
                                        bidRows
                                    )
                                )
                            ),
                            totalBidsLength > rowCount ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                { className: "orderbook-showall" },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "a",
                                    {
                                        onClick: this._onSetShowAll.bind(this, "bids")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                        content: showAllBids ? "exchange.hide" : "exchange.show_bids",
                                        ordercount: totalBidsLength
                                    })
                                )
                            ) : null
                        )
                    )
                );
            } else {
                // Vertical orderbook
                return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    { className: "order-table-container" },
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        react_sticky_table__WEBPACK_IMPORTED_MODULE_2__["StickyTable"],
                        {
                            stickyColumnCount: 0,
                            className: "order-table table",
                            ref: this.verticalStickyTable
                        },
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "div",
                            { className: "sticky-table-row top-header" },
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                { className: "cell header-cell left" },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "span",
                                    { className: "header-sub-title" },
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_11__["default"], { name: baseSymbol })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                { className: "cell header-cell" },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "span",
                                    { className: "header-sub-title" },
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_11__["default"], { name: quoteSymbol })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                { className: "cell header-cell right" },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                    className: "header-sub-title",
                                    content: "exchange.price"
                                })
                            )
                        ),
                        orderBookReversed ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(OrderRows, {
                            id: "top-order-rows",
                            noOrders: noOrders,
                            orderRows: bidRows,
                            isBid: true
                        }) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(OrderRows, {
                            id: "top-order-rows",
                            noOrders: noOrders,
                            orderRows: askRows,
                            isBid: false
                        }),
                        noOrders ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "div",
                            {
                                className: "sticky-table-row",
                                ref: this.centerText
                            },
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", { className: "cell" }),
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                { className: "cell no-orders padtop" },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "exchange.no_orders" })
                            )
                        ) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "div",
                            {
                                className: "sticky-table-row orderbook-latest-price",
                                ref: this.centerText,
                                style: { padding: 0 }
                                //data-intro={translator.translate(
                                //    "walkthrough.vertical_order"
                                //)}
                            },
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                { className: "cell right" },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "span",
                                    {
                                        className: "clickable left",
                                        onClick: this.toggleSpreadValue
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                        className: "orderbook-center-title",
                                        content: "exchange.spread"
                                    }),
                                    " ",
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                        "span",
                                        { className: "spread-value" },
                                        !!spread ? spread : "0"
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                { className: "cell cell-center" },
                                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "span",
                                    { style: { width: 75 } },
                                    !this.props.hideFunctionButtons ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_12__["default"]
                                    //data-intro={translator.translate(
                                    //    "walkthrough.vertical_lock"
                                    //)}
                                    , { className: "lock-unlock clickable icon-fill",
                                        onClick: this.toggleAutoScroll,
                                        name: this.state.autoScroll ? "locked" : "unlocked",
                                        title: this.state.autoScroll ? "icons.unlocked.disable_auto_scroll" : "icons.locked.enable_auto_scroll"
                                    }) : null,
                                    "\xA0",
                                    !this.props.hideFunctionButtons ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                        onClick: this.props.moveOrderBook,
                                        name: "thumb-tack",
                                        className: "icon-14px icon-fill order-book-button-v clickable",
                                        title: this.props.horizontal ? "icons.thumb_tack" : "icons.thumb_untack",
                                        style: {
                                            marginLeft: 0
                                        }
                                    }) : null,
                                    "\xA0",
                                    currentGroupOrderLimit == 0 ? null : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                        name: "grouping",
                                        className: "icon-14px",
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("icons.order_grouping"),
                                        style: {
                                            marginLeft: 0
                                        }
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                "div",
                                {
                                    className: "cell",
                                    style: { textAlign: "center" }
                                },
                                !!this.props.latest && react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                    "span",
                                    { className: "right" },
                                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                                        "span",
                                        {
                                            className: !this.props.changeClass ? "spread-value" : this.props.changeClass
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_PriceText__WEBPACK_IMPORTED_MODULE_9__["default"], {
                                            price: this.props.latest,
                                            base: this.props.base,
                                            quote: this.props.quote
                                        })
                                    )
                                )
                            )
                        ),
                        orderBookReversed ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(OrderRows, {
                            noOrders: noOrders,
                            orderRows: askRows,
                            isBid: false
                        }) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(OrderRows, {
                            noOrders: noOrders,
                            orderRows: bidRows,
                            isBid: true
                        })
                    )
                );
            }
        }
    }]);

    return OrderBook;
}(react__WEBPACK_IMPORTED_MODULE_3___default.a.Component);

OrderBook.defaultProps = {
    bids: [],
    asks: [],
    orders: {}
};

OrderBook.propTypes = {
    bids: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.array.isRequired,
    asks: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.array.isRequired,
    orders: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.object.isRequired
};



/***/ }),

/***/ 2821:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(527);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var perfect_scrollbar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2761);
/* harmony import */ var perfect_scrollbar__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(perfect_scrollbar__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(726);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(725);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1886);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(420);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2370);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(598);
/* harmony import */ var _View_MarketHistoryView__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2822);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }









var operations = bitsharesjs__WEBPACK_IMPORTED_MODULE_7__["ChainTypes"].operations;





var MarketHistory = function (_React$Component) {
    _inherits(MarketHistory, _React$Component);

    function MarketHistory(props) {
        _classCallCheck(this, MarketHistory);

        var _this = _possibleConstructorReturn(this, (MarketHistory.__proto__ || Object.getPrototypeOf(MarketHistory)).call(this));

        _this.state = {
            activeTab: props.viewSettings.get("historyTab", "history"),
            rowCount: 20,
            showAll: false
        };
        return _this;
    }

    _createClass(MarketHistory, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps, nextState) {
            return !immutable__WEBPACK_IMPORTED_MODULE_2___default.a.is(nextProps.history, this.props.history) || nextProps.baseSymbol !== this.props.baseSymbol || nextProps.quoteSymbol !== this.props.quoteSymbol || nextProps.className !== this.props.className || nextProps.activeTab !== this.props.activeTab || nextState.activeTab !== this.state.activeTab || nextState.showAll !== this.state.showAll || nextProps.currentAccount !== this.props.currentAccount || nextProps.isPanelActive !== this.props.isPanelActive || nextProps.hideScrollbars !== this.props.hideScrollbars;
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            if (!this.props.hideScrollbars) {
                this.updateContainer(1);
            }
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate(prevState) {
            var hideScrollbars = this.props.hideScrollbars;
            var showAll = this.state.showAll;


            if (prevState.showAll != showAll) {
                if (showAll && !hideScrollbars) {
                    this.updateContainer(2);
                } else if (!showAll && !hideScrollbars) {
                    this.updateContainer(3);
                } else if (showAll && hideScrollbars) {
                    this.updateContainer(1);
                } else {
                    this.updateContainer(0);
                }
            }
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            if (nextProps.activeTab !== this.props.activeTab) {
                this.changeTab(nextProps.activeTab);
            }

            // Reset on Market Switch
            if (nextProps.baseSymbol !== this.props.baseSymbol || nextProps.quoteSymbol !== this.props.quoteSymbol) {
                this.setState({ showAll: false });
                this.updateContainer(0);

                if (!this.props.hideScrollbars) {
                    this.updateContainer(1);
                }
            }

            // Reset on hideScrollbars switch
            if (nextProps.hideScrollbars !== this.props.hideScrollbars) {
                this.updateContainer(0);

                if (!nextProps.hideScrollbars) {
                    this.updateContainer(1);
                }
            }
        }

        /***
         * Update PS Container
         * type:int [0:destroy, 1:init, 2:update, 3:update w/ scrollTop] (default: 2)
         */

    }, {
        key: "updateContainer",
        value: function updateContainer() {
            var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 2;

            var containerNode = this.refs.view.refs.history;
            var containerTransition = this.refs.view.refs.historyTransition;

            if (!containerNode) return;

            if (type == 0) {
                containerNode.scrollTop = 0;
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_3___default.a.destroy(containerNode);
            } else if (type == 1) {
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_3___default.a.initialize(containerNode);
                this.updateContainer(3);
            } else if (type == 2) {
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_3___default.a.update(containerNode);
            } else if (type == 3) {
                containerNode.scrollTop = 0;
                perfect_scrollbar__WEBPACK_IMPORTED_MODULE_3___default.a.update(containerNode);
            }

            if (containerTransition) {
                containerTransition.resetAnimation();
            }
        }
    }, {
        key: "onSetShowAll",
        value: function onSetShowAll() {
            this.setState({
                showAll: !this.state.showAll
            });
        }
    }, {
        key: "changeTab",
        value: function changeTab(tab) {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_4__["default"].changeViewSetting({
                historyTab: tab
            });
            this.setState({
                activeTab: tab
            });

            // Ensure that focus goes back to top of scrollable container when tab is changed
            this.updateContainer(3);

            setTimeout(react_tooltip__WEBPACK_IMPORTED_MODULE_8___default.a.rebuild, 1000);
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                history = _props.history,
                myHistory = _props.myHistory,
                base = _props.base,
                quote = _props.quote,
                baseSymbol = _props.baseSymbol,
                quoteSymbol = _props.quoteSymbol,
                isNullAccount = _props.isNullAccount,
                activeTab = _props.activeTab;
            var _state = this.state,
                rowCount = _state.rowCount,
                showAll = _state.showAll;

            var historyRows = null;

            if (isNullAccount) {
                activeTab = "history";
            }

            if (activeTab === "my_history" && myHistory && myHistory.size) {
                var _assets;

                // User History

                var assets = (_assets = {}, _defineProperty(_assets, quote.get("id"), {
                    precision: quote.get("precision")
                }), _defineProperty(_assets, base.get("id"), {
                    precision: base.get("precision")
                }), _assets);

                historyRows = myHistory.filter(function (a) {
                    var opType = a.getIn(["op", 0]);
                    return opType === operations.fill_order;
                }).filter(function (a) {
                    var quoteID = quote.get("id");
                    var baseID = base.get("id");
                    var pays = a.getIn(["op", 1, "pays", "asset_id"]);
                    var receives = a.getIn(["op", 1, "receives", "asset_id"]);
                    var hasQuote = quoteID === pays || quoteID === receives;
                    var hasBase = baseID === pays || baseID === receives;
                    return hasQuote && hasBase;
                }).sort(function (a, b) {
                    return b.get("block_num") - a.get("block_num");
                }).map(function (trx) {
                    var fill = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_9__["FillOrder"](trx.toJS(), assets, quote.get("id"));

                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_View_MarketHistoryView__WEBPACK_IMPORTED_MODULE_10__["MarketHistoryViewRow"], {
                        key: fill.id,
                        fill: fill,
                        base: base,
                        quote: quote
                    });
                }).toArray();
            } else if (history && history.size) {
                // Market History
                historyRows = this.props.history.take(100).map(function (fill) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_View_MarketHistoryView__WEBPACK_IMPORTED_MODULE_10__["MarketHistoryViewRow"], {
                        key: fill.id,
                        fill: fill,
                        base: base,
                        quote: quote
                    });
                }).toArray();
            }

            var totalRows = historyRows ? historyRows.length : null;
            if (!showAll && historyRows) {
                historyRows.splice(rowCount, historyRows.length);
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_View_MarketHistoryView__WEBPACK_IMPORTED_MODULE_10__["MarketHistoryView"], {
                ref: "view",
                className: this.props.className,
                innerClass: this.props.innerClass,
                innerStyle: this.props.innerStyle,
                noHeader: this.props.noHeader,
                headerStyle: this.props.headerStyle,
                activeTab: activeTab,
                quoteSymbol: quoteSymbol,
                baseSymbol: baseSymbol,
                tinyScreen: this.props.tinyScreen,
                historyRows: historyRows,
                totalRows: totalRows,
                showAll: showAll,
                onSetShowAll: this.onSetShowAll.bind(this)
            });
        }
    }]);

    return MarketHistory;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarketHistory.defaultProps = {
    history: []
};

MarketHistory.propTypes = {
    history: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object.isRequired
};

/* harmony default export */ __webpack_exports__["default"] = (Object(alt_react__WEBPACK_IMPORTED_MODULE_6__["connect"])(MarketHistory, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_5__["default"]];
    },
    getProps: function getProps() {
        return {
            viewSettings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_5__["default"].getState().viewSettings
        };
    }
}));

/***/ }),

/***/ 2822:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MarketHistoryView", function() { return MarketHistoryView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MarketHistoryViewRow", function() { return MarketHistoryViewRow; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Utility_TransitionWrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2799);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2129);
/* harmony import */ var _Utility_BlockDate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2823);
/* harmony import */ var _Utility_PriceText__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2783);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var browser_locale__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2798);
/* harmony import */ var browser_locale__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(browser_locale__WEBPACK_IMPORTED_MODULE_9__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }












function MarketHistoryViewRow(_ref) {
    var fill = _ref.fill,
        base = _ref.base,
        quote = _ref.quote;

    var isMarket = fill.id.indexOf("5.0") !== -1 ? true : false;
    var timestamp = isMarket ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "td",
        null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Tooltip"],
            { title: fill.time.toString(), placement: "left" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "tooltip", style: { whiteSpace: "nowrap" } },
                counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.localize(fill.time, {
                    type: "date",
                    format: browser_locale__WEBPACK_IMPORTED_MODULE_9___default()().toLowerCase().indexOf("en-us") !== -1 ? "market_history_us" : "market_history"
                })
            )
        )
    ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BlockDate__WEBPACK_IMPORTED_MODULE_6__["default"], { component: "td", block_number: fill.block, tooltip: true });

    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "tr",
        null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "td",
            { className: fill.className },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_PriceText__WEBPACK_IMPORTED_MODULE_7__["default"], { price: fill.getPrice(), base: base, quote: quote })
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "td",
            null,
            fill.amountToReceive()
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "td",
            null,
            fill.amountToPay()
        ),
        timestamp
    );
}

var MarketHistoryView = function (_React$Component) {
    _inherits(MarketHistoryView, _React$Component);

    function MarketHistoryView() {
        _classCallCheck(this, MarketHistoryView);

        return _possibleConstructorReturn(this, (MarketHistoryView.__proto__ || Object.getPrototypeOf(MarketHistoryView)).apply(this, arguments));
    }

    _createClass(MarketHistoryView, [{
        key: "render",
        value: function render() {
            var _this2 = this;

            var _props = this.props,
                className = _props.className,
                innerClass = _props.innerClass,
                innerStyle = _props.innerStyle,
                noHeader = _props.noHeader,
                headerStyle = _props.headerStyle,
                activeTab = _props.activeTab,
                quoteSymbol = _props.quoteSymbol,
                baseSymbol = _props.baseSymbol,
                tinyScreen = _props.tinyScreen,
                totalRows = _props.totalRows,
                historyRows = _props.historyRows,
                showAll = _props.showAll;


            var emptyRow = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        style: {
                            textAlign: "center",
                            lineHeight: 4,
                            fontStyle: "italic"
                        },
                        colSpan: "5"
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.no_orders" })
                )
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: classnames__WEBPACK_IMPORTED_MODULE_3___default()(className) },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: innerClass, style: innerStyle },
                    noHeader ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            style: headerStyle,
                            className: "exchange-content-header"
                        },
                        activeTab === "my_history" ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "exchange.my_history" }) : null,
                        activeTab === "history" ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "exchange.history" }) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "grid-block shrink left-orderbook-header market-right-padding-only" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "table",
                            { className: "table table-no-padding order-table text-left fixed-table market-right-padding" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "thead",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "tr",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "th",
                                        { style: { textAlign: "right" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                            className: "header-sub-title",
                                            content: "exchange.price"
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "th",
                                        { style: { textAlign: "right" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "span",
                                            { className: "header-sub-title" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                                dataPlace: "top",
                                                name: quoteSymbol
                                            })
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "th",
                                        { style: { textAlign: "right" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "span",
                                            { className: "header-sub-title" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                                dataPlace: "top",
                                                name: baseSymbol
                                            })
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "th",
                                        { style: { textAlign: "right" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                            className: "header-sub-title",
                                            content: "explorer.block.date"
                                        })
                                    )
                                )
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "table-container grid-block market-right-padding-only no-overflow",
                            ref: "history",
                            style: {
                                minHeight: !tinyScreen ? 260 : 0,
                                maxHeight: 260,
                                overflow: "hidden",
                                lineHeight: "13px"
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "table",
                            { className: "table order-table no-stripes table-hover fixed-table text-right no-overflow" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_TransitionWrapper__WEBPACK_IMPORTED_MODULE_4__["default"],
                                {
                                    ref: "historyTransition",
                                    component: "tbody",
                                    transitionName: "newrow",
                                    className: "orderbook"
                                },
                                !!historyRows && historyRows.length > 0 ? historyRows : emptyRow
                            )
                        )
                    ),
                    historyRows && totalRows > 11 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "orderbook-showall" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            { onClick: function onClick(e) {
                                    return _this2.props.onSetShowAll(e);
                                } },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                content: showAll ? "exchange.hide" : "exchange.show_all_trades",
                                rowcount: totalRows
                            })
                        )
                    ) : null
                )
            );
        }
    }]);

    return MarketHistoryView;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);



/***/ }),

/***/ 2823:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1886);
/* harmony import */ var stores_BlockchainStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1890);
/* harmony import */ var actions_BlockchainActions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1891);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2370);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var browser_locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2798);
/* harmony import */ var browser_locale__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(browser_locale__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }










/**
 * @brief displays block's date and time based on block number
 *
 * properties: block - number
 * Note, it doesn't fetch block, just calculates time based on number alone.
 **/

var BlockDate = function (_React$Component) {
    _inherits(BlockDate, _React$Component);

    function BlockDate() {
        _classCallCheck(this, BlockDate);

        return _possibleConstructorReturn(this, (BlockDate.__proto__ || Object.getPrototypeOf(BlockDate)).apply(this, arguments));
    }

    _createClass(BlockDate, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            if (!this.props.blockHeader) actions_BlockchainActions__WEBPACK_IMPORTED_MODULE_4__["default"].getHeader.defer(this.props.block_number);
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np) {
            if (np.blockHeader && !this.props.blockHeader) setTimeout(react_tooltip__WEBPACK_IMPORTED_MODULE_5___default.a.rebuild, 1000);
            return np.blockHeader !== this.props.blockHeader;
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                blockHeader = _props.blockHeader,
                tooltip = _props.tooltip,
                component = _props.component,
                format = _props.format;


            if (!blockHeader) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(component);
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(component, {
                className: tooltip ? "tooltip" : ""
            }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Tooltip"],
                {
                    title: tooltip ? blockHeader.timestamp.toString() : "",
                    placement: "left"
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.localize(blockHeader.timestamp, {
                        type: "date",
                        format: format
                    })
                )
            ));
        }
    }]);

    return BlockDate;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

BlockDate.defaultProps = {
    format: browser_locale__WEBPACK_IMPORTED_MODULE_6___default()().toLowerCase().indexOf("en-us") !== -1 ? "market_history_us" : "market_history",
    tooltip: false,
    component: "span"
};


BlockDate = Object(alt_react__WEBPACK_IMPORTED_MODULE_2__["connect"])(BlockDate, {
    listenTo: function listenTo() {
        return [stores_BlockchainStore__WEBPACK_IMPORTED_MODULE_3__["default"]];
    },
    getProps: function getProps(props) {
        return {
            blockHeader: stores_BlockchainStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().blockHeaders.get(props.block_number)
        };
    }
});

/* harmony default export */ __webpack_exports__["default"] = (BlockDate);

/***/ }),

/***/ 2831:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2759);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1886);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(420);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1846);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2391);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(571);
/* harmony import */ var stores_AssetStore__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2390);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2129);
/* harmony import */ var _MarketPickerHelpers__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2832);


var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
















var MarketListItem = function (_Component) {
    _inherits(MarketListItem, _Component);

    function MarketListItem() {
        _classCallCheck(this, MarketListItem);

        return _possibleConstructorReturn(this, (MarketListItem.__proto__ || Object.getPrototypeOf(MarketListItem)).apply(this, arguments));
    }

    _createClass(MarketListItem, [{
        key: "onKeyPress",
        value: function onKeyPress(linkTo, e) {
            if (e.key == "Enter") {
                this.props.history.push(linkTo);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                quoteSymbol = _props.quoteSymbol,
                baseSymbol = _props.baseSymbol,
                market = _props.market,
                marketPickerAsset = _props.marketPickerAsset;
            var onClose = this.props.onClose;

            var marketSymbol = market[1]["quote"];
            var linkTo = quoteSymbol == marketPickerAsset ? "/market/" + marketSymbol + "_" + baseSymbol : "/market/" + quoteSymbol + "_" + marketSymbol;

            return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(
                "li",
                {
                    key: market[0],
                    style: { height: 40 },
                    onKeyPress: this.onKeyPress.bind(this, linkTo),
                    tabIndex: this.props.tabIndex
                },
                react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_7__["Link"],
                    { style: { display: "flex" }, onClick: onClose, to: linkTo },
                    react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(
                        "div",
                        { style: { flex: 2 } },
                        react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_12__["default"], { name: market[1]["quote"] })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(
                        "div",
                        { style: { flex: 3 } },
                        market[1].issuer
                    )
                )
            );
        }
    }]);

    return MarketListItem;
}(react__WEBPACK_IMPORTED_MODULE_4__["Component"]);

MarketListItem.propTypes = {
    onClose: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.func,
    quoteSymbol: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,
    baseSymbol: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string,
    market: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.array,
    marketPickerAsset: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.string
};

var MarketPickerWrapper = function (_Component2) {
    _inherits(MarketPickerWrapper, _Component2);

    function MarketPickerWrapper() {
        _classCallCheck(this, MarketPickerWrapper);

        var _this2 = _possibleConstructorReturn(this, (MarketPickerWrapper.__proto__ || Object.getPrototypeOf(MarketPickerWrapper)).call(this));

        _this2.state = _this2.initialState();

        _this2.getAssetList = Object(lodash_es_debounce__WEBPACK_IMPORTED_MODULE_0__["default"])(actions_AssetActions__WEBPACK_IMPORTED_MODULE_8__["default"].getAssetList.defer, 150);
        _this2.setState = _this2.setState.bind(_this2);
        _this2._checkAndUpdateMarketList = _this2._checkAndUpdateMarketList.bind(_this2);
        return _this2;
    }

    _createClass(MarketPickerWrapper, [{
        key: "initialState",
        value: function initialState() {
            return {
                marketsList: [],
                lookupQuote: null,
                inputValue: ""
            };
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            this.refs.marketPicker_input.focus();
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            this.refs.marketPicker_input.focus();
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            if (nextProps.marketPickerAsset !== this.props.marketPickerAsset) this.setState(this.initialState());

            if (nextProps.searchAssets !== this.props.searchAssets) Object(_MarketPickerHelpers__WEBPACK_IMPORTED_MODULE_13__["assetFilter"])({
                searchAssets: this.props.searchAssets,
                marketPickerAsset: this.props.marketPickerAsset,
                baseAsset: this.props.baseAsset,
                quoteAsset: this.props.quoteAsset
            }, {
                inputValue: this.state.inputValue,
                lookupQuote: this.state.lookupQuote
            }, this.setState, this._checkAndUpdateMarketList);
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, ns) {
            return np.visible !== this.props.visible || np.marketPickerAsset !== this.props.marketPickerAsset || np.searchAssets !== this.props.searchAssets || ns.marketsList !== this.state.marketsList || !common_utils__WEBPACK_IMPORTED_MODULE_9__["default"].are_equal_shallow(ns, this.state);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            if (this.intervalId) {
                clearInterval(this.intervalId);
            }
        }
    }, {
        key: "_onInputName",
        value: function _onInputName(getBackedAssets, e) {
            var _this3 = this;

            var toFind = e.target.value.trim().toUpperCase();
            var isValidName = !bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainValidation"].is_valid_symbol_error(toFind, true);

            if (!isValidName) {
                /* Don't lookup invalid asset names */
                this.setState({
                    inputValue: toFind,
                    activeSearch: false,
                    marketsList: []
                });
                return;
            } else {
                this.setState({
                    inputValue: toFind,
                    activeSearch: true,
                    marketsList: []
                });
            }

            if (this.state.inputValue !== toFind) {
                this.timer && clearTimeout(this.timer);
            }

            this.timer = setTimeout(function () {
                Object(_MarketPickerHelpers__WEBPACK_IMPORTED_MODULE_13__["lookupAssets"])(toFind, getBackedAssets, _this3.getAssetList, _this3.setState);
            }, 1500);
        }
    }, {
        key: "_checkAndUpdateMarketList",
        value: function _checkAndUpdateMarketList(marketsList) {
            var _this4 = this;

            clearInterval(this.intervalId);
            this.intervalId = setInterval(function () {
                var needFetchIssuer = 0;
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = marketsList[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var _ref = _step.value;

                        var _ref2 = _slicedToArray(_ref, 2);

                        var market = _ref2[1];

                        if (!market.issuer) {
                            market.issuer = Object(_MarketPickerHelpers__WEBPACK_IMPORTED_MODULE_13__["fetchIssuerName"])(market.issuerId);
                            if (!market.issuer) needFetchIssuer++;
                        }
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                if (needFetchIssuer) return;
                clearInterval(_this4.intervalId);
                _this4.setState({
                    marketsList: marketsList,
                    activeSearch: false
                });
            }, 300);
        }
    }, {
        key: "renderSearchBar",
        value: function renderSearchBar() {
            var inputValue = this.state.inputValue;


            var labelKey = "exchange.market_picker.find_by_asset";
            var label = counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate(labelKey).toUpperCase();
            var placeHolderKey = "exchange.market_picker.search";
            return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(
                "div",
                { id: "filter" },
                react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__["Form"].Item,
                    { label: label },
                    react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__["Input"], {
                        type: "text",
                        ref: "marketPicker_input",
                        value: inputValue,
                        onChange: this._onInputName.bind(this, true),
                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate(placeHolderKey),
                        maxLength: "16",
                        tabIndex: 2
                    })
                )
            );
        }
    }, {
        key: "renderResults",
        value: function renderResults() {
            var _this5 = this;

            var marketsList = this.state.marketsList;
            var _state = this.state,
                activeSearch = _state.activeSearch,
                inputValue = _state.inputValue;

            var loading = activeSearch && inputValue.length != 0;

            var marketPickerAsset = this.props.marketPickerAsset;

            var baseSymbol = this.props.baseAsset.get("symbol");
            var quoteSymbol = this.props.quoteAsset.get("symbol");

            if (!loading) return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(
                "div",
                { className: "results" },
                react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(
                    "ul",
                    { style: { marginLeft: 0, minHeight: "20px" } },
                    marketsList.map(function (market, index) {
                        return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(MarketListItem, {
                            key: index,
                            tabIndex: index + 100,
                            baseSymbol: baseSymbol,
                            quoteSymbol: quoteSymbol,
                            market: market,
                            marketPickerAsset: marketPickerAsset,
                            history: _this5.props.history,
                            onClose: _this5.props.onClose.bind(_this5)
                        });
                    })
                )
            );
            return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__["Icon"], {
                style: { marginLeft: "8px" },
                type: "loading",
                theme: "outlined"
            });
        }
    }, {
        key: "render",
        value: function render() {
            var marketPickerAsset = this.props.marketPickerAsset;

            return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(
                "div",
                { className: "marketPicker" },
                react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(
                    "div",
                    { className: "marketPicker__subHeader" },
                    react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "exchange.market_picker.sub_title" }),
                    "\xA0",
                    react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_7__["Link"],
                        {
                            to: "/asset/" + marketPickerAsset,
                            style: {
                                cursor: "pointer",
                                color: "lightblue !important"
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_12__["default"], { name: marketPickerAsset })
                    )
                ),
                this.renderSearchBar(),
                this.renderResults()
            );
        }
    }]);

    return MarketPickerWrapper;
}(react__WEBPACK_IMPORTED_MODULE_4__["Component"]);

var MarketPicker = function (_Component3) {
    _inherits(MarketPicker, _Component3);

    function MarketPicker() {
        _classCallCheck(this, MarketPicker);

        var _this6 = _possibleConstructorReturn(this, (MarketPicker.__proto__ || Object.getPrototypeOf(MarketPicker)).call(this));

        _this6.state = {
            open: false,
            smallScreen: false
        };
        return _this6;
    }

    _createClass(MarketPicker, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this.setState({
                smallScreen: window.innerWidth <= 800
            });
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            if (this.props.quoteAsset.get("id") !== nextProps.quoteAsset.get("id") || this.props.baseAsset.get("id") !== nextProps.baseAsset.get("id")) {
                this.onClose();
            }
        }
    }, {
        key: "show",
        value: function show() {
            this.props.showModal();
        }
    }, {
        key: "onClose",
        value: function onClose() {
            this.props.onToggleMarketPicker(null);
            this.props.hideModal();
        }
    }, {
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__["Modal"],
                _extends({
                    title: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("exchange.market_picker.title"),
                    closable: false,
                    visible: this.props.visible,
                    id: this.props.modalId,
                    overlay: true,
                    onCancel: this.onClose.bind(this),
                    noHeaderContainer: true,
                    footer: null,
                    ref: this.props.modalId
                }, this.props),
                react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(MarketPickerWrapper, _extends({
                    onClose: this.onClose.bind(this)
                }, this.props))
            );
        }
    }]);

    return MarketPicker;
}(react__WEBPACK_IMPORTED_MODULE_4__["Component"]);

MarketPicker = Object(alt_react__WEBPACK_IMPORTED_MODULE_1__["connect"])(MarketPicker, {
    listenTo: function listenTo() {
        return [stores_AssetStore__WEBPACK_IMPORTED_MODULE_10__["default"]];
    },
    getProps: function getProps() {
        return {
            searchAssets: stores_AssetStore__WEBPACK_IMPORTED_MODULE_10__["default"].getState().assets,
            assetsLoading: stores_AssetStore__WEBPACK_IMPORTED_MODULE_10__["default"].getState().assetsLoading
        };
    }
});

/* harmony default export */ __webpack_exports__["default"] = (MarketPicker);

/***/ }),

/***/ 2832:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lookupAssets", function() { return lookupAssets; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "assetFilter", function() { return assetFilter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fetchIssuerName", function() { return fetchIssuerName; });
/* harmony import */ var common_gatewayUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2135);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(420);
var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();




function lookupAssets(value) {
    var gatewayAssets = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var getAssetList = arguments[2];
    var setState = arguments[3];

    if (!value && value !== "") return;

    var quote = value.toUpperCase();

    if (quote.startsWith("BIT") && quote.length >= 6) {
        quote = value.substr(3, quote.length - 1);
    }

    getAssetList(quote, 10, gatewayAssets);

    setState({ lookupQuote: quote });
}

function assetFilter(_ref, _ref2, setState, checkAndUpdateMarketList) {
    var searchAssets = _ref.searchAssets,
        marketPickerAsset = _ref.marketPickerAsset,
        baseAsset = _ref.baseAsset,
        quoteAsset = _ref.quoteAsset;
    var inputValue = _ref2.inputValue,
        lookupQuote = _ref2.lookupQuote;

    setState({ activeSearch: true });

    var assetCount = 0;
    var allMarkets = [];

    var baseSymbol = baseAsset.get("symbol");
    var quoteSymbol = quoteAsset.get("symbol");

    if (searchAssets.size && !!inputValue && inputValue.length > 2) {
        searchAssets.filter(function (a) {
            try {
                if (a.options.description) {
                    var description = JSON.parse(a.options.description);
                    if ("visible" in description) {
                        if (!description.visible) return false;
                    }
                }
            } catch (e) {}

            return a.symbol.indexOf(lookupQuote) !== -1;
        }).forEach(function (asset) {
            if (assetCount > 100) return;
            assetCount++;

            var issuerName = fetchIssuerName(asset.issuer);

            var base = baseAsset.get("symbol");
            var marketID = asset.symbol + "_" + base;

            var isQuoteAsset = quoteSymbol == marketPickerAsset;
            var includeAsset = isQuoteAsset && asset.symbol != baseSymbol || !isQuoteAsset && asset.symbol != quoteSymbol;

            if (includeAsset) {
                allMarkets.push([marketID, {
                    quote: asset.symbol,
                    base: base,
                    issuerId: asset.issuer,
                    issuer: issuerName
                }]);
            }
        });
    }

    var marketsList = sortMarketsList(allMarkets, inputValue);
    checkAndUpdateMarketList(marketsList);
}

function getMarketSortComponents(market) {
    var weight = {};
    var quote = market.quote;
    if (quote.indexOf(".") !== -1) {
        var _quote$split = quote.split("."),
            _quote$split2 = _slicedToArray(_quote$split, 2),
            gateway = _quote$split2[0],
            asset = _quote$split2[1];

        weight.gateway = gateway;
        weight.asset = asset;
    } else {
        weight.asset = quote;
    }
    if (market.issuerId === "1.2.0") weight.isCommittee = true;
    return weight;
}

function sortMarketsList(allMarkets, inputValue) {
    if (inputValue.startsWith("BIT") && inputValue.length >= 6) {
        inputValue = inputValue.substr(3, inputValue.length - 1);
    }
    return allMarkets.sort(function (_ref3, _ref4) {
        var _ref6 = _slicedToArray(_ref3, 2),
            marketA = _ref6[1];

        var _ref5 = _slicedToArray(_ref4, 2),
            marketB = _ref5[1];

        var weightA = getMarketSortComponents(marketA);
        var weightB = getMarketSortComponents(marketB);

        if (weightA.asset !== weightB.asset) {
            if (weightA.asset === inputValue) return -1;
            if (weightB.asset === inputValue) return 1;
            if (weightA.asset > weightB.asset) return -1;
            if (weightA.asset < weightB.asset) return 1;
        }

        if (weightA.isCommittee ^ weightB.isCommittee) {
            if (weightA.isCommittee) return -1;
            if (weightB.isCommittee) return 1;
        }

        var aIsKnownGateway = Object(common_gatewayUtils__WEBPACK_IMPORTED_MODULE_0__["hasGatewayPrefix"])(marketA.quote);
        var bIsKnownGateway = Object(common_gatewayUtils__WEBPACK_IMPORTED_MODULE_0__["hasGatewayPrefix"])(marketB.quote);
        if (aIsKnownGateway && !bIsKnownGateway) return -1;
        if (bIsKnownGateway && !aIsKnownGateway) return 1;

        if (weightA.gateway > weightB.gateway) return 1;
        if (weightA.gateway < weightB.gateway) return -1;
        return 0;
    });
}

function fetchIssuerName(issuerId) {
    var issuer = bitsharesjs__WEBPACK_IMPORTED_MODULE_1__["ChainStore"].getObject(issuerId, false, false);
    if (!issuer) {
        return;
    } else {
        return issuer.get("name");
    }
}



/***/ }),

/***/ 2833:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(571);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_4__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }







var ConfirmModal = function (_React$Component) {
    _inherits(ConfirmModal, _React$Component);

    function ConfirmModal(props) {
        _classCallCheck(this, ConfirmModal);

        var _this = _possibleConstructorReturn(this, (ConfirmModal.__proto__ || Object.getPrototypeOf(ConfirmModal)).call(this, props));

        _this.submit = _this.submit.bind(_this);
        _this.cancel = _this.cancel.bind(_this);
        return _this;
    }

    _createClass(ConfirmModal, [{
        key: "_onForce",
        value: function _onForce(value, e) {
            e.preventDefault();

            this.props.hideModal();

            if (value) this.props.onForce();
        }
    }, {
        key: "submit",
        value: function submit(e) {
            this._onForce(true, e);
        }
    }, {
        key: "cancel",
        value: function cancel(e) {
            this._onForce(false, e);
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                type = _props.type,
                diff = _props.diff,
                hasOrders = _props.hasOrders;


            var footer = [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Button"],
                { key: "submit", onClick: this.submit },
                counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("settings.yes")
            ), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Button"],
                { key: "cancel", type: "primary", onClick: this.cancel },
                counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("settings.no")
            )];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Modal"],
                {
                    footer: footer,
                    visible: this.props.visible,
                    onCancel: this.cancel,
                    title: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("transaction.confirm")
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block vertical" },
                    !hasOrders ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                        content: "exchange.confirm_no_orders_" + type
                    }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                        content: "exchange.confirm_" + type,
                        diff: common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].format_number(diff, 2)
                    })
                )
            );
        }
    }]);

    return ConfirmModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (ConfirmModal);

/***/ }),

/***/ 2834:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _OrderBook__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2814);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(726);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








var Personalize = function (_React$Component) {
    _inherits(Personalize, _React$Component);

    function Personalize(props) {
        _classCallCheck(this, Personalize);

        var _this = _possibleConstructorReturn(this, (Personalize.__proto__ || Object.getPrototypeOf(Personalize)).call(this));

        _this.state = {
            open: false,
            smallScreen: false,
            autoScroll: props.viewSettings.get("global_AutoScroll", true)
        };

        _this.setChartHeight = _this.setChartHeight.bind(_this);
        return _this;
    }

    _createClass(Personalize, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this.setState({
                smallScreen: window.innerWidth <= 800
            });
        }
    }, {
        key: "onClose",
        value: function onClose() {
            this.props.hideModal();
        }
    }, {
        key: "setChartHeight",
        value: function setChartHeight(value) {
            this.props.onChangeChartHeight({
                value: value
            });
        }
    }, {
        key: "setAutoscroll",
        value: function setAutoscroll(target) {
            var newState = target == 1 ? true : false;

            this.setState({
                autoScroll: newState
            });

            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_5__["default"].changeViewSetting({
                global_AutoScroll: newState
            });

            this.props.onSetAutoscroll(newState);
        }
    }, {
        key: "_getGroupingOptions",
        value: function _getGroupingOptions(selectKey) {
            return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"],
                {
                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("settings.placeholder_select"),
                    style: { width: "100%" },
                    onChange: this.props.onSetPanelTabs.bind(this, selectKey),
                    value: this.props.panelTabs[selectKey]
                },
                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                    { value: 0 },
                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.options.grouping_standalone" })
                ),
                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                    { value: 1 },
                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.options.grouping_1" })
                ),
                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                    { value: 2 },
                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.options.grouping_2" })
                )
            );
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                chartType = _props.chartType,
                chartHeight = _props.chartHeight;


            return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Modal"],
                {
                    title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.header.title"),
                    visible: this.props.visible,
                    id: this.props.modalId,
                    overlay: true,
                    footer: [react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Button"],
                        { key: "close", onClick: this.onClose.bind(this) },
                        counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("modal.close")
                    )],
                    onCancel: this.onClose.bind(this),
                    noHeaderContainer: true,
                    ref: this.props.modalId
                },
                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Form"].Item,
                    null,
                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "header",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.header.chart_options" })
                    ),
                    !this.props.tinyScreen ? react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.chart_type" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.chart_type")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                ),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.chart_reload")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "info-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"],
                                {
                                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("settings.placeholder_select"),
                                    style: { width: "100%" },
                                    value: chartType,
                                    onChange: this.props.onToggleChart.bind(this)
                                },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                                    { value: "market_depth" },
                                    counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.order_depth")
                                ),
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                                    { value: "price_chart" },
                                    counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.price_history")
                                ),
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                                    { value: "hidden_chart" },
                                    counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.options.hidden_chart")
                                )
                            )
                        )
                    ) : null,
                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.chart_height" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.chart_height")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["InputNumber"], {
                                value: typeof chartHeight === "number" && chartHeight,
                                onChange: this.setChartHeight.bind(this)
                            })
                        )
                    ),
                    !this.props.tinyScreen && chartType == "price_chart" && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.chart_tools" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.chart_tools")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                ),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.chart_reload")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "info-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Switch"], {
                                style: { margin: 6 },
                                checked: this.props.chartTools,
                                onChange: this.props.onChartTools.bind(this)
                            })
                        )
                    ),
                    !this.props.tinyScreen && chartType == "price_chart" && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.chart_zoom" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.chart_zoom")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                ),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.chart_reload")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "info-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Switch"], {
                                style: { margin: 6 },
                                checked: this.props.chartZoom,
                                onChange: this.props.onChartZoom.bind(this)
                            })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "header",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.header.order_options" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.order_book_grouping" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.order_book_grouping")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            this.props.trackedGroupsConfig ? react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_OrderBook__WEBPACK_IMPORTED_MODULE_4__["GroupOrderLimitSelector"], {
                                globalSettingsSelector: true,
                                trackedGroupsConfig: this.props.trackedGroupsConfig,
                                handleGroupOrderLimitChange: this.props.handleGroupOrderLimitChange.bind(this),
                                currentGroupOrderLimit: this.props.currentGroupOrderLimit
                            }) : null
                        )
                    ),
                    !this.props.tinyScreen && !this.props.smallScreen && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.order_style" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.order_style")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"],
                                {
                                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("settings.placeholder_select"),
                                    style: { width: "100%" },
                                    value: this.props.verticalOrderBook.toString(),
                                    onSelect: this.props.onMoveOrderBook.bind(this)
                                },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                                    { value: "true" },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.options.vertical" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                                    { value: "false" },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.options.horizontal" })
                                )
                            )
                        )
                    ),
                    !this.props.tinyScreen && !this.props.verticalOrderBook || this.props.smallScreen ? react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        {
                            className: "grid-block no-overflow wrap shrink",
                            style: { paddingTop: "0.5em" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.position_order_form" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.position_order_form")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"],
                                {
                                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("settings.placeholder_select"),
                                    style: { width: "100%" },
                                    value: this.props.flipBuySell.toString(),
                                    onSelect: this.props.onFlipBuySell.bind(this)
                                },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                                    { value: "false" },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.options.position_order_form_opt1" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                                    { value: "true" },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.options.position_order_form_opt2" })
                                )
                            )
                        )
                    ) : null,
                    !this.props.tinyScreen && !this.props.verticalOrderBook || this.props.smallScreen ? react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        {
                            className: "grid-block no-overflow wrap shrink",
                            style: { paddingTop: "0.5em" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.position_order_orders" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.position_order_orders")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"],
                                {
                                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("settings.placeholder_select"),
                                    style: { width: "100%" },
                                    value: this.props.flipOrderBook.toString(),
                                    onSelect: this.props.onFlipOrderBook.bind(this)
                                },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                                    { value: "false" },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.options.position_order_orders_opt1" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                                    { value: "true" },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.options.position_order_orders_opt2" })
                                )
                            )
                        )
                    ) : null,
                    !this.props.tinyScreen && !this.props.verticalOrderBook || this.props.smallScreen ? react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        {
                            className: "grid-block no-overflow wrap shrink",
                            style: { paddingTop: "0.5em" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.position_order_asset" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.position_order_asset")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"],
                                {
                                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("settings.placeholder_select"),
                                    style: { width: "100%" },
                                    value: this.props.buySellTop.toString(),
                                    onSelect: this.props.onToggleBuySellPosition.bind(this)
                                },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                                    { value: "false" },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.options.position_order_asset_opt1" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                                    { value: "true" },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.options.position_order_asset_opt2" })
                                )
                            )
                        )
                    ) : null,
                    !this.props.tinyScreen && this.props.verticalOrderBook ? react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        {
                            className: "grid-block no-overflow wrap shrink",
                            style: { paddingTop: "0.5em" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.orderbook_auto_scroll" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.orderbook_auto_scroll")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Switch"], {
                                style: { margin: 6 },
                                checked: this.state.autoScroll,
                                onChange: this.setAutoscroll.bind(this)
                            })
                        )
                    ) : null,
                    !this.props.tinyScreen && this.props.verticalOrderBook ? react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.reverse_order_book" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.reverse_order_book")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Switch"], {
                                style: { margin: 6 },
                                checked: this.props.orderBookReversed,
                                onChange: this.props.onOrderBookReversed.bind(this)
                            })
                        )
                    ) : null,
                    !this.props.tinyScreen && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6", style: { paddingRight: 5 } },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.single_colum_order_form" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.single_colum_order_form")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Switch"], {
                                style: { margin: 6 },
                                checked: this.props.singleColumnOrderForm,
                                onChange: this.props.onToggleSingleColumnOrderForm.bind(this)
                            })
                        )
                    ),
                    !this.props.tinyScreen && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "header",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.header.panel_grouping" }),
                        "\xA0",
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                            {
                                title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.panel_grouping")
                            },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], { type: "question-circle", theme: "filled" })
                        )
                    ),
                    !this.props.tinyScreen && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        {
                            className: "grid-block no-overflow wrap shrink",
                            style: { paddingBottom: "0.5em" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.my_trades" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            this._getGroupingOptions("my_history")
                        )
                    ),
                    !this.props.tinyScreen && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        {
                            className: "grid-block no-overflow wrap shrink",
                            style: { paddingBottom: "0.5em" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.market_trades" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            this._getGroupingOptions("history")
                        )
                    ),
                    !this.props.tinyScreen && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        {
                            className: "grid-block no-overflow wrap shrink",
                            style: { paddingBottom: "0.5em" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.open_orders" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            this._getGroupingOptions("my_orders")
                        )
                    ),
                    !this.props.tinyScreen && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        {
                            className: "grid-block no-overflow wrap shrink",
                            style: { paddingBottom: "0.5em" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.settlements" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            this._getGroupingOptions("open_settlement")
                        )
                    ),
                    !this.props.tinyScreen && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "header",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.header.general" })
                    ),
                    !this.props.tinyScreen && !this.props.smallScreen && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        {
                            className: "grid-block no-overflow wrap shrink",
                            style: { paddingBottom: "0.5em" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            {
                                className: "small-6",
                                style: { paddingRight: 5 }
                            },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.market_location" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.market_location")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"],
                                {
                                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("settings.placeholder_select"),
                                    style: { width: "100%" },
                                    value: this.props.mirrorPanels.toString(),
                                    onSelect: this.props.onMirrorPanels.bind(this)
                                },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                                    { value: "false" },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "settings.left" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Select"].Option,
                                    { value: "true" },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "settings.right" })
                                )
                            )
                        )
                    ),
                    !this.props.tinyScreen && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6", style: { paddingRight: 5 } },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.reduce_scrollbars" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.reduce_scrollbars")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                ),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.reload")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "info-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Switch"], {
                                style: { margin: 6 },
                                checked: this.props.hideScrollbars,
                                onChange: this.props.onToggleScrollbars.bind(this)
                            })
                        )
                    ),
                    !this.props.tinyScreen && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                        "div",
                        { className: "grid-block no-overflow wrap shrink" },
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6", style: { paddingRight: 5 } },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                "h6",
                                { style: { margin: 9 } },
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "exchange.settings.title.hide_function_buttons" }),
                                "\xA0",
                                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Tooltip"],
                                    {
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("exchange.settings.tooltip.hide_function_buttons")
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Icon"], {
                                        type: "question-circle",
                                        theme: "filled"
                                    })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(
                            "div",
                            { className: "small-6" },
                            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_0__["Switch"], {
                                style: { margin: 6 },
                                checked: this.props.hideFunctionButtons,
                                onChange: this.props.onHideFunctionButtons.bind(this)
                            })
                        )
                    )
                )
            );
        }
    }]);

    return Personalize;
}(react__WEBPACK_IMPORTED_MODULE_2___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Personalize);

/***/ }),

/***/ 2835:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var assets_colors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2837);
/* harmony import */ var assets_colors__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(assets_colors__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _tradingViewClasses__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2838);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(725);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(726);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1886);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_8__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }


var TradingView = __webpack_require__(2836);









// import MarketsStore from "stores/MarketsStore";

var TradingViewPriceChart = function (_React$Component) {
    _inherits(TradingViewPriceChart, _React$Component);

    function TradingViewPriceChart(props) {
        _classCallCheck(this, TradingViewPriceChart);

        var _this = _possibleConstructorReturn(this, (TradingViewPriceChart.__proto__ || Object.getPrototypeOf(TradingViewPriceChart)).call(this));

        _this.state = {
            showSaveModal: false,
            showLoadModal: false,
            error: false
        };
        _this.layoutName = react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef();
        _this.hideModal = _this.hideModal.bind(_this);
        _this.resetError = _this.resetError.bind(_this);
        _this.loadLastChart = _this.loadLastChart.bind(_this);
        return _this;
    }

    _createClass(TradingViewPriceChart, [{
        key: "loadTradingView",
        value: function loadTradingView(props) {
            var _this2 = this;

            var dataFeed = props.dataFeed;

            var themeColors = assets_colors__WEBPACK_IMPORTED_MODULE_1___default.a[props.theme];
            var that = this;

            if (!dataFeed) return;
            if (!!this.tvWidget) return;

            if (false) {}

            dataFeed.update({
                resolutions: props.buckets,
                ticker: props.quoteSymbol + "_" + props.baseSymbol,
                interval: Object(_tradingViewClasses__WEBPACK_IMPORTED_MODULE_2__["getResolutionsFromBuckets"])([props.bucketSize])[0]
            });

            var disabled_features = ["symbol_info", "symbol_search_hot_key", "border_around_the_chart", "header_symbol_search", "header_compare", "header_saveload"];

            var enabled_features = [];

            if (this.props.mobile || !this.props.chartZoom) {
                disabled_features.push("chart_scroll");
                disabled_features.push("chart_zoom");
            }

            if (this.props.mobile || !this.props.chartTools) {
                disabled_features.push("left_toolbar");
                disabled_features.push("chart_crosshair_menu");
                disabled_features.push("chart_events");
                disabled_features.push("footer_share_buttons");
                disabled_features.push("footer_screenshot");
                disabled_features.push("footer_publish_idea_button");
                disabled_features.push("caption_buttons_text_if_possible");
                disabled_features.push("line_tool_templates");
                disabled_features.push("widgetbar_tabs");
                disabled_features.push("support_manage_drawings");
                disabled_features.push("support_multicharts");
                disabled_features.push("right_bar_stays_on_scroll");
                disabled_features.push("charts_auto_save");
                disabled_features.push("edit_buttons_in_legend");
                disabled_features.push("context_menus");
                disabled_features.push("control_bar");
                disabled_features.push("header_fullscreen_button");
                disabled_features.push("header_widget");
                disabled_features.push("symbollist_context_menu");
                disabled_features.push("show_pro_features");
            } else {
                enabled_features.push("study_templates");
                enabled_features.push("keep_left_toolbar_visible_on_small_screens");
            }

            if (false) {}
            if (false) {}

            this.tvWidget = new TradingView.widget({
                fullscreen: false,
                symbol: props.quoteSymbol + "_" + props.baseSymbol,
                interval: Object(_tradingViewClasses__WEBPACK_IMPORTED_MODULE_2__["getResolutionsFromBuckets"])([props.bucketSize])[0],
                library_path: ( false ? undefined : "") + "/charting_library/",
                datafeed: dataFeed,
                container_id: "tv_chart",
                charts_storage_url: "https://saveload.tradingview.com",
                charts_storage_api_version: "1.1",
                client_id: "tradingview.com",
                user_id: "public_user_id",
                autosize: true,
                locale: props.locale,
                timezone: Object(_tradingViewClasses__WEBPACK_IMPORTED_MODULE_2__["getTVTimezone"])(),
                toolbar_bg: themeColors.bgColor,
                overrides: {
                    "paneProperties.background": themeColors.bgColor,
                    "paneProperties.horzGridProperties.color": themeColors.axisLineColor,
                    "paneProperties.vertGridProperties.color": themeColors.axisLineColor,
                    "scalesProperties.lineColor": themeColors.axisLineColor,
                    "scalesProperties.textColor": themeColors.textColor
                },
                custom_css_url: props.theme + ".css",
                enabled_features: enabled_features,
                disabled_features: disabled_features,
                debug: false,
                preset: this.props.mobile ? "mobile" : ""
            });

            this.tvWidget.onChartReady(function () {
                if (false) {}
                if (false) {}
                _this2.tvWidget.createButton().attr("title", counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.load_custom_charts")).addClass("apply-common-tooltip").on("click", function () {
                    that.setState({ showLoadModal: true });
                }).append("<span>" + counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.chart_load") + "</span>");
                _this2.tvWidget.createButton().attr("title", counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.save_custom_charts")).addClass("apply-common-tooltip").on("click", function () {
                    that.setState({ showSaveModal: true });
                }).append("<span>" + counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.chart_save") + "</span>");

                dataFeed.update({
                    onMarketChange: _this2._setSymbol.bind(_this2)
                });
                _this2.loadLastChart();
            });

            this._onWheel = this._onWheel.bind(this);
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (!np.marketReady) return;
            if (!this.props.dataFeed && np.dataFeed) {
                this.loadTradingView(np);
            }
        }
    }, {
        key: "_setSymbol",
        value: function _setSymbol(ticker) {
            if (this.tvWidget) {
                this.tvWidget.chart().removeAllShapes();
                this.loadLastChart();
                this.tvWidget.setSymbol(ticker, Object(_tradingViewClasses__WEBPACK_IMPORTED_MODULE_2__["getResolutionsFromBuckets"])([this.props.bucketSize])[0]);
            }
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            this.loadTradingView(this.props);

            // continue investigating how to disable mouse wheel, here are the containted docs
            // document.getElementById("tv_chart").children[0].contentWindow
            // document.getElementById("tv_chart").children[0].contentDocument
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            this.props.dataFeed.clearSubs();
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, state) {
            return state.showLoadModal !== this.state.showLoadModal || state.showSaveModal !== this.state.showSaveModal || np.chartHeight !== this.props.chartHeight || this.props.charts.size !== np.charts.size || !this.tvWidget || np.marketReady;
        }
    }, {
        key: "_onWheel",
        value: function _onWheel(e) {
            console.log("Test wheel interception");
        }
    }, {
        key: "onSubmitConfirmation",
        value: function onSubmitConfirmation(e) {
            var _this3 = this;

            var layoutName = this.layoutName;

            var error = this.props.charts.some(function (chart) {
                return chart.key === layoutName.current.state.value && chart.symbol === _this3.props.quoteSymbol + "_" + _this3.props.baseSymbol;
            });
            var that = this;
            if (!error) {
                this.resetError();
                this.tvWidget.save(function (object) {
                    var chart = {};
                    chart.key = layoutName.current.state.value || "";
                    chart.object = object;
                    chart.name = layoutName.current.state.value || "";
                    chart.symbol = that.props.quoteSymbol + "_" + that.props.baseSymbol;
                    chart.modified = new Date().toLocaleDateString("en-US");
                    actions_SettingsActions__WEBPACK_IMPORTED_MODULE_6__["default"].addChartLayout(chart);
                    that.setState({ showSaveModal: false }, function () {
                        if (that.layoutName.current.state) {
                            that.layoutName.current.state.value = null;
                        }
                    });
                });
            } else {
                this.setState({ error: error });
            }
        }
    }, {
        key: "hideModal",
        value: function hideModal() {
            this.resetError();
            this.setState({ showSaveModal: false, showLoadModal: false });
        }
    }, {
        key: "handleDelete",
        value: function handleDelete(name) {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_6__["default"].deleteChartLayout(name);
        }
    }, {
        key: "resetError",
        value: function resetError() {
            this.setState({ error: false });
        }
    }, {
        key: "loadLastChart",
        value: function loadLastChart() {
            var _props = this.props,
                charts = _props.charts,
                quoteSymbol = _props.quoteSymbol,
                baseSymbol = _props.baseSymbol;


            var chart = charts.toArray().filter(function (chart) {
                return chart.symbol === quoteSymbol + "_" + baseSymbol && chart.enabled;
            });
            chart[0] && this.tvWidget.load(chart[0].object);
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var _props2 = this.props,
                charts = _props2.charts,
                quoteSymbol = _props2.quoteSymbol,
                baseSymbol = _props2.baseSymbol;
            var error = this.state.error;

            var _error = error ? "has-error" : "";
            var dataSource = charts.toArray().filter(function (chart) {
                return chart.symbol === quoteSymbol + "_" + baseSymbol;
            });
            var columns = [{
                title: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.layout_name"),
                dataIndex: "name",
                key: "name"
            }, {
                title: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.modified"),
                dataIndex: "modified",
                key: "modified"
            }, {
                title: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.actions"),
                dataIndex: "actions",
                key: "actions",
                render: function render(text, record) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Icon"], {
                        style: { width: "32px" },
                        onClick: _this4.handleDelete.bind(_this4, record.name),
                        type: "delete"
                    });
                }
            }];

            var onRow = function onRow(record) {
                return {
                    onClick: function onClick(event) {
                        if (event.target.localName === "td") {
                            _this4.hideModal();
                            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_6__["default"].addChartLayout(record);
                            _this4.tvWidget.load(record.object);
                        } else if (event.currentTarget.parentElement.childElementCount === 1) _this4.hideModal();
                    }
                };
            };

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "small-12" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
                    className: "exchange-bordered",
                    style: { height: this.props.chartHeight + "px" },
                    id: "tv_chart"
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Modal"],
                    {
                        title: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.load_chart_layout"),
                        closable: false,
                        visible: this.state.showLoadModal,
                        footer: [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Button"],
                            { key: "cancel", onClick: this.hideModal },
                            counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.close")
                        )]
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Table"], {
                        dataSource: dataSource || [],
                        columns: columns,
                        onRow: onRow
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Modal"],
                    {
                        title: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.save_new_chart_layout"),
                        closable: false,
                        visible: this.state.showSaveModal,
                        footer: [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Button"],
                            {
                                key: "submit",
                                type: "primary",
                                onClick: this.onSubmitConfirmation.bind(this)
                            },
                            counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.save")
                        ), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Button"],
                            { key: "cancel", onClick: this.hideModal },
                            counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.close")
                        )]
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        null,
                        error ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            { className: _error },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_8___default.a, { content: "exchange.chart_error" })
                        ) : null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            {
                                className: _error,
                                style: {
                                    borderBottom: "#A09F9F 1px dotted"
                                }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_3__["Input"], {
                                placeholder: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.enter_chart_layout_name"),
                                ref: this.layoutName,
                                onChange: this.resetError,
                                onPressEnter: this.onSubmitConfirmation.bind(this)
                            })
                        )
                    )
                )
            );
        }
    }]);

    return TradingViewPriceChart;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(alt_react__WEBPACK_IMPORTED_MODULE_7__["connect"])(TradingViewPriceChart, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_5__["default"]];
    },
    getProps: function getProps() {
        return {
            charts: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_5__["default"].getState().chartLayouts
        };
    }
}));

/***/ }),

/***/ 2836:
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){ true?e(exports):undefined}(this,function(t){"use strict";function e(t,o){var i=n({},t);for(var s in o)"object"!=typeof t[s]||null===t[s]||Array.isArray(t[s])?void 0!==o[s]&&(i[s]=o[s]):i[s]=e(t[s],o[s]);return i}function o(){return"1.12 (internal id 630b704a @ 2018-06-06 02:16:11.305509)"}function i(t){window.addEventListener("DOMContentLoaded",t,!1)}var n=Object.assign||function(t){for(var e,o=arguments,i=1,n=arguments.length;i<n;i++){e=o[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},s={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},r={width:800,height:500,symbol:"AA",interval:"D",timezone:"UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"W"},{text:"1y",resolution:"W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}},a=function(){function t(t){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!t.datafeed)throw new Error("Datafeed is not defined");if(this._options=e(r,t),t.preset){var o=s[t.preset];o?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(o.disabled_features):this._options.disabled_features=o.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(o.enabled_features):this._options.enabled_features=o.enabled_features):console.warn("Unknown preset: `"+t.preset+"`")}this._create()}return t.prototype.onChartReady=function(t){this._ready?t.call(this):this._readyHandlers.push(t)},t.prototype.onGrayedObjectClicked=function(t){this._innerAPI().onGrayedObjectClicked(t)},t.prototype.onShortcut=function(t,e){this._innerWindow().createShortcutAction(t,e)},t.prototype.subscribe=function(t,e){this._innerAPI().subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._innerAPI().unsubscribe(t,e)},t.prototype.chart=function(t){return this._innerAPI().chart(t)},t.prototype.setLanguage=function(t){this.remove(),this._options.locale=t,this._create()},t.prototype.setSymbol=function(t,e,o){this._innerAPI().changeSymbol(t,e+"",o)},t.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id];var t=this._getIFrameElement();t.contentWindow.destroyChart(),t.parentNode&&t.parentNode.removeChild(t)},t.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},t.prototype.selectLineTool=function(t){this._innerAPI().selectLineTool(t)},t.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},t.prototype.save=function(t){this._innerAPI().saveChart(t)},t.prototype.load=function(t,e){this._innerAPI().loadChart({json:t,extendedData:e})},t.prototype.getSavedCharts=function(t){this._innerAPI().getSavedCharts(t)},t.prototype.loadChartFromServer=function(t){this._innerAPI().loadChartFromServer(t)},t.prototype.saveChartToServer=function(t,e,o,i){this._innerAPI().saveChartToServer(t,e,o,i)},t.prototype.removeChartFromServer=function(t,e){this._innerAPI().removeChartFromServer(t,e)},t.prototype.onContextMenu=function(t){this._innerAPI().onContextMenu(t)},t.prototype.createButton=function(t){return this._innerWindow().createButton(t)},t.prototype.showNoticeDialog=function(t){this._innerAPI().showNoticeDialog(t)},t.prototype.showConfirmDialog=function(t){this._innerAPI().showConfirmDialog(t)},t.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},t.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},t.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},t.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},t.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},t.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},t.prototype.addCustomCSSFile=function(t){this._innerWindow().addCustomCSSFile(t)},t.prototype.applyOverrides=function(t){this._options=e(this._options,{overrides:t}),this._innerWindow().applyOverrides(t)},t.prototype.applyStudiesOverrides=function(t){this._innerWindow().applyStudiesOverrides(t)},t.prototype.watchList=function(){return this._innerAPI().watchlist()},t.prototype.activeChart=function(){return this._innerAPI().activeChart()},t.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},t.prototype.layout=function(){return this._innerAPI().layout()},t.prototype.setLayout=function(t){this._innerAPI().setLayout(t)},t.prototype._getIFrameElement=function(){var t=document.getElementById(this._id);if(null===t)throw new Error("There is no such iframe");return t},t.prototype._innerAPI=function(){return this._getIFrameElement().contentWindow.tradingViewApi},t.prototype._innerWindow=function(){return this._getIFrameElement().contentWindow},t.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._getIFrameElement().style.height=window.innerHeight+"px")},t.prototype._create=function(){var t=this,e=this._render(),o=document.getElementById(this._options.container_id);if(null===o)throw new Error("There is no such element - #"+this._options.container_id);o.innerHTML=e;var i=this._getIFrameElement();(this._options.autosize||this._options.fullscreen)&&(i.style.width="100%",this._options.fullscreen||(i.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize();var n=function(){i.removeEventListener("load",n,!1),i.contentWindow.widgetReady(function(){t._ready=!0;for(var e=0,o=t._readyHandlers;e<o.length;e++){o[e].call(t)}i.contentWindow.initializationFinished()})};i.addEventListener("load",n,!1)},t.prototype._render=function(){var t=window;t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter},this._options.saved_data&&(t[this._id].chartContent={json:this._options.saved_data});var e=(this._options.library_path||"")+"static/tv-chart.630b704a2b9d0eaf1593.html#localserver=1&symbol="+encodeURIComponent(this._options.symbol)+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+this._options.toolbar_bg.replace("#",""):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.indicators_file_name?"&indicatorsFile="+encodeURIComponent(this._options.indicators_file_name):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+this._options.debug+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+e+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},t}(),d=a;window.TradingView=window.TradingView||{},window.TradingView.version=o,t.version=o,t.onready=i,t.widget=d,Object.defineProperty(t,"__esModule",{value:!0})});


/***/ }),

/***/ 2837:
/***/ (function(module, exports) {

module.exports = {
    midnightTheme: {
        bidColor: "#50D2C2",
        bidFillColor: "rgba(80, 210, 194, 0.5)",
        askColor: "#E3745B",
        askFillColor: "rgba(227, 116, 91, 0.5)",
        callColor: "#BBBF2B",
        settleColor: "rgba(125, 134, 214, 1)",
        settleFillColor: "rgba(125, 134, 214, 0.5)",
        positiveColor: "#6BA583",
        negativeColor: "#DB0000",
        strokeColor: "#FFFF00",
        primaryText: "#e0e0e0",
        volumeColor: "#848484",

        //tooltip
        tooltipBackgroundColor: "rgba(0, 0, 0, 0.4)",
        tooltipColor: "#fff",
        tooltipFillColor: "#fff",
        //axis
        axisLabelsColor: "#fff",
        axisLineColor: "rgba(200, 200, 200, 0.3)",
        indicatorLineColor: "#FFFFFF",
        bgColor: "#191a1f",
        textColor: "#e0e0e0"
    },
    darkTheme: {
        bidColor: "#6BA583",
        bidFillColor: "rgba(80, 210, 194, 0.5)",
        askColor: "#E3745B",
        askFillColor: "rgba(227, 116, 91, 0.5)",
        callColor: "#BBBF2B",
        settleColor: "rgba(125, 134, 214, 1)",
        settleFillColor: "rgba(125, 134, 214, 0.5)",
        positiveColor: "#258A14",
        negativeColor: "#DB0000",
        strokeColor: "#FFFF00",
        primaryText: "#e0e0e0",
        volumeColor: "#848484",

        //tooltip
        tooltipBackgroundColor: "rgba(0, 0, 0, 0.4)",
        tooltipColor: "#fff",
        tooltipFillColor: "#fff",
        //axis
        axisLabelsColor: "#fff",
        axisLineColor: "rgba(200, 200, 200, 0.3)",
        indicatorLineColor: "#FFFFFF",
        bgColor: "#2a2a2a",
        textColor: "#ffffff"
    },
    lightTheme: {
        bidColor: "#258A14",
        bidFillColor: "rgba(80, 210, 194, 0.5)",
        askColor: "#EA340B",
        askFillColor: "rgba(227, 116, 91, 0.5)",
        callColor: "#BBBF2B",
        settleColor: "rgba(125, 134, 214, 1)",
        settleFillColor: "rgba(125, 134, 214, 0.5)",
        positiveColor: "#528c0a",
        negativeColor: "rgba(225, 66, 74, 1)",
        strokeColor: "#000000",
        primaryText: "#242424",
        volumeColor: "#848484",

        //tooltip
        tooltipBackgroundColor: "rgba(255,255,255, 0.9)",
        tooltipColor: "#000",
        tooltipFillColor: "#000",
        //axis
        axisLabelsColor: "#000",
        axisLineColor: "rgba(200, 200, 200, 0.3)",
        indicatorLineColor: "#848484",
        bgColor: "#fff",
        textColor: "#3d3d3d"
    }
};

/***/ }),

/***/ 2838:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataFeed", function() { return DataFeed; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SymbolInfo", function() { return SymbolInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getResolutionsFromBuckets", function() { return getResolutionsFromBuckets; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTVTimezone", function() { return getTVTimezone; });
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2367);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(420);
/* harmony import */ var moment_timezone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2839);
/* harmony import */ var moment_timezone__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_MarketsActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2368);
/* harmony import */ var common_gatewayUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2135);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(571);
var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }








var SymbolInfo = function SymbolInfo(options) {
    _classCallCheck(this, SymbolInfo);

    this.name = options.ticker;
    this.ticker = options.ticker;

    var quoteGateway = Object(common_gatewayUtils__WEBPACK_IMPORTED_MODULE_4__["getGatewayName"])(options.quoteAsset);
    var baseGateway = Object(common_gatewayUtils__WEBPACK_IMPORTED_MODULE_4__["getGatewayName"])(options.baseAsset);
    var currentExchange = quoteGateway === baseGateway ? quoteGateway : quoteGateway && !baseGateway ? quoteGateway : !quoteGateway && baseGateway ? baseGateway : quoteGateway + " / " + baseGateway;

    var _utils$replaceName = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].replaceName(options.baseAsset),
        baseSymbol = _utils$replaceName.name,
        basePrefix = _utils$replaceName.prefix;

    var _utils$replaceName2 = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].replaceName(options.quoteAsset),
        quoteSymbol = _utils$replaceName2.name,
        quotePrefix = _utils$replaceName2.prefix;

    this.description = "" + (quotePrefix || "") + quoteSymbol + " / " + (basePrefix || "") + baseSymbol + " " + (!!currentExchange ? "(" + currentExchange + ")" : "");
    this.type = "bitcoin";
    this.session = "24x7";
    this.timezone = moment_timezone__WEBPACK_IMPORTED_MODULE_2___default.a.tz.guess();
    this.data_status = "streaming";
    this.supported_resolutions = options.resolutions;
    this.has_empty_bars = true;
    this.pricescale = Math.pow(10, options.baseAsset.get("precision"));
    this.quoteAsset = options.quoteAsset;
    this.baseAsset = options.baseAsset;
    this.minmov = 1;

    this.has_intraday = this.supported_resolutions.reduce(function (supported, r) {
        return supported || !isNaN(parseInt(r, 10));
    }, false);
    this.intraday_multipliers = this.supported_resolutions.filter(function (r) {
        return !isNaN(parseInt(r, 10));
    });

    this.has_seconds = this.supported_resolutions.reduce(function (supported, r) {
        return supported || r.indexOf("S") !== -1;
    }, false);
    this.seconds_multipliers = this.supported_resolutions.filter(function (r) {
        return r.indexOf("S") !== -1;
    });

    this.has_daily = this.supported_resolutions.reduce(function (supported, r) {
        return supported || r.indexOf("D") !== -1;
    }, false);

    this.has_daily = this.supported_resolutions.reduce(function (supported, r) {
        return supported || r.indexOf("D") !== -1;
    }, false);
};

function getResolutionsFromBuckets(buckets) {
    var resolutions = buckets.map(function (r) {
        var minute = r / 60;
        var day = minute / 60 / 24;
        var week = day / 7;

        if (minute < 1) {
            // below 1 minute we return Seconds
            return r + "S";
        } else if (day < 1 && parseInt(minute, 10) === minute) {
            // below 1 day we return Minutes
            return minute.toString();
        } else if (week < 1) {
            // below 1 week we return Days
            if (day >= 1) {
                if (parseInt(day, 10) === day) {
                    if (day === 1) return "D";
                    return day + "D";
                }
            }
        } else {
            // we return weeks
            if (week >= 1) {
                if (parseInt(week, 10) === week) {
                    return week + "D";
                }
            }
        }

        return null;
    }).filter(function (a) {
        return !!a;
    });

    return resolutions;
}

function getBucketFromResolution(r) {
    if (r === "D") return 24 * 60 * 60;

    if (r.indexOf("W") !== -1) {
        return parseInt(r.replace("D", ""), 10) * 7 * 24 * 60 * 60;
    } else if (r.indexOf("D") !== -1) {
        return parseInt(r.replace("D", ""), 10) * 24 * 60 * 60;
    } else if (r.indexOf("S") !== -1) {
        return parseInt(r.replace("S", ""), 10);
    } else {
        return parseInt(r, 10) * 60;
    }
}

var DataFeed = function () {
    function DataFeed() {
        _classCallCheck(this, DataFeed);
    }

    _createClass(DataFeed, [{
        key: "update",
        value: function update(options) {
            for (var key in options) {
                switch (key) {
                    case "resolutions":
                        this.supported_resolutions = getResolutionsFromBuckets(options.resolutions);
                        break;

                    case "onMarketChange":
                        stores_MarketsStore__WEBPACK_IMPORTED_MODULE_0__["default"].unsubscribe("market_change");
                        stores_MarketsStore__WEBPACK_IMPORTED_MODULE_0__["default"].subscribe("market_change", options[key]);
                        break;

                    default:
                        this[key] = options[key];
                }
            }
        }
    }, {
        key: "clearSubs",
        value: function clearSubs() {
            stores_MarketsStore__WEBPACK_IMPORTED_MODULE_0__["default"].clearSubs();
        }
    }, {
        key: "onReady",
        value: function onReady(callback) {
            var _this = this;

            setTimeout(function () {
                callback({
                    exchanges: [{
                        value: "OPEN.",
                        name: "Openledger",
                        desc: "Openledger Gateway"
                    }],
                    symbols_types: [],
                    supported_resolutions: _this.supported_resolutions,
                    supports_marks: false,
                    supports_search: false,
                    supports_time: true
                });
            }, 10);
        }
    }, {
        key: "searchSymbols",
        value: function searchSymbols(userInput, exchange, symbolType, onResultReadyCallback) {
            console.log("searchSymbols", userInput, exchange, symbolType);

            onResultReadyCallback([]);

            /*
            [
                {
                    "symbol": "<short symbol name>",
                    "full_name": "<full symbol name>", // e.g. BTCE:BTCUSD
                    "description": "<symbol description>",
                    "exchange": "<symbol exchange name>",
                    "ticker": "<symbol ticker name, optional>",
                    "type": "stock" // or "futures" or "bitcoin" or "forex" or "index"
                },
                {
                    //    .....
                }
            ]
            */
        }
    }, {
        key: "resolveSymbol",
        value: function resolveSymbol(symbolName, onSymbolResolvedCallback, onResolveErrorCallback) {
            var _this2 = this;

            var _symbolName$split = symbolName.split("_"),
                _symbolName$split2 = _slicedToArray(_symbolName$split, 2),
                quote = _symbolName$split2[0],
                base = _symbolName$split2[1];

            Promise.all([Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_1__["FetchChain"])("getAsset", quote), Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_1__["FetchChain"])("getAsset", base)]).then(function (assets) {
                var _assets = _slicedToArray(assets, 2),
                    quoteAsset = _assets[0],
                    baseAsset = _assets[1];

                onSymbolResolvedCallback(new SymbolInfo({
                    ticker: symbolName,
                    quoteAsset: quoteAsset,
                    baseAsset: baseAsset,
                    resolutions: _this2.supported_resolutions
                }));
            }).catch(onResolveErrorCallback);
        }
    }, {
        key: "getBars",
        value: function getBars(symbolInfo, resolution, from, to, onHistoryCallback, onErrorCallback, firstDataRequest) {
            var _this3 = this;

            from *= 1000;
            to *= 1000;
            var bars = this._getHistory();
            this.latestBar = bars[bars.length - 1];
            bars = bars.filter(function (a) {
                return a.time >= from && a.time <= to;
            });

            if (this.interval !== resolution) {
                if (!firstDataRequest) return;

                var newBucketSize = getBucketFromResolution(resolution);
                actions_MarketsActions__WEBPACK_IMPORTED_MODULE_3__["default"].changeBucketSize(newBucketSize);

                return actions_MarketsActions__WEBPACK_IMPORTED_MODULE_3__["default"].unSubscribeMarket(symbolInfo.quoteAsset.get("id"), symbolInfo.baseAsset.get("id")).then(function () {
                    actions_MarketsActions__WEBPACK_IMPORTED_MODULE_3__["default"].subscribeMarket(symbolInfo.baseAsset, symbolInfo.quoteAsset, newBucketSize).then(function () {
                        var bars = _this3._getHistory();
                        _this3.latestBar = bars[bars.length - 1];
                        bars = bars.filter(function (a) {
                            return a.time >= from && a.time <= to;
                        });
                        _this3.interval = resolution;
                        if (!bars.length) return onHistoryCallback(bars, { noData: true });
                        onHistoryCallback(bars);
                    });
                });
            }

            // console.log(
            //     "getBars",
            //     symbolInfo.ticker,
            //     resolution,
            //     "firstDataRequest",
            //     firstDataRequest,
            //     "bars",
            //     bars
            // );
            this.interval = resolution;
            if (!bars.length) return onHistoryCallback(bars, { noData: true });

            onHistoryCallback(bars);
        }
    }, {
        key: "_getHistory",
        value: function _getHistory() {
            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_0__["default"].getState().priceData;
        }
    }, {
        key: "subscribeBars",
        value: function subscribeBars(symbolInfo, resolution, onRealtimeCallback, subscriberUID, onResetCacheNeededCallback) {
            var _this4 = this;

            stores_MarketsStore__WEBPACK_IMPORTED_MODULE_0__["default"].unsubscribe("subscribeBars");
            onResetCacheNeededCallback();
            stores_MarketsStore__WEBPACK_IMPORTED_MODULE_0__["default"].subscribe("subscribeBars", function () {
                var bars = _this4._getHistory();
                var newBars = bars.filter(function (a) {
                    if (!_this4.latestBar) return true;
                    return a.time > _this4.latestBar.time;
                });
                // console.log("subscribeBars", MarketsStore.getState().activeMarket, "found new bars:", newBars);
                if (newBars.length) {
                    newBars.forEach(function (bar) {
                        onRealtimeCallback(bar);
                    });
                    _this4.latestBar = newBars[newBars.length - 1];
                } else {
                    // Check if latest bar is different
                    var didChange = false;
                    for (var key in _this4.latestBar) {
                        if (_this4.latestBar[key] !== bars[bars.length - 1][key]) {
                            didChange = true;
                        }
                    }
                    if (didChange) {
                        onRealtimeCallback(bars[bars.length - 1]);
                    }
                }
            });
        }
    }, {
        key: "unsubscribeBars",
        value: function unsubscribeBars() {
            /*
            * This is ALWAYS called after subscribeBars for some reason, but
            * sometimes it executes BEFORE the subscribe call in subscribeBars and
            * sometimes AFTER. This causes the callback to be cleared and we stop
            * receiving updates from the MarketStore. Unless we find it causes bugs,
            * it's best to just not use this.
            */
            // MarketsStore.unsubscribe("subscribeBars");
            // this.latestBar = null;
        }
    }, {
        key: "calculateHistoryDepth",
        value: function calculateHistoryDepth(resolution, resolutionBack, intervalBack) {
            return undefined;
        }
    }, {
        key: "getServerTime",
        value: function getServerTime(callback) {
            callback(new Date().getTime() / 1000);
        }
    }]);

    return DataFeed;
}();

var supportedTimeZones = ["America/Argentina/Buenos_Aires", "America/Bogota", "America/Caracas", "America/Chicago", "America/El_Salvador", "America/Los_Angeles", "America/Mexico_City", "America/New_York", "America/Phoenix", "America/Sao_Paulo", "America/Toronto", "America/Vancouver", "Asia/Almaty", "Asia/Ashkhabad", "Asia/Bangkok", "Asia/Dubai", "Asia/Hong_Kong", "Asia/Kathmandu", "Asia/Kolkata", "Asia/Seoul", "Asia/Shanghai", "Asia/Singapore", "Asia/Taipei", "Asia/Tehran", "Asia/Tokyo", "Australia/ACT", "Australia/Adelaide", "Australia/Brisbane", "Australia/Sydney", "Europe/Athens", "Europe/Berlin", "Europe/Istanbul", "Europe/London", "Europe/Madrid", "Europe/Moscow", "Europe/Paris", "Europe/Warsaw", "Europe/Zurich", "Pacific/Auckland", "Pacific/Chatham", "Pacific/Fakaofo", "Pacific/Honolulu", "US/Mountain"];

function getTVTimezone() {
    var current = moment_timezone__WEBPACK_IMPORTED_MODULE_2___default.a.tz.guess();
    var defaultZone = "Europe/London";

    var isSupported = supportedTimeZones.indexOf(current) !== -1;
    if (isSupported) return current;else {
        /* Try to find a matching timezone from the limited list supported by TradingView */
        var time = moment_timezone__WEBPACK_IMPORTED_MODULE_2___default()().toISOString();
        var actual = moment_timezone__WEBPACK_IMPORTED_MODULE_2___default.a.tz(time, current).format();
        for (var i = 0; i < supportedTimeZones.length; i++) {
            var zoneTime = moment_timezone__WEBPACK_IMPORTED_MODULE_2___default.a.tz(time, supportedTimeZones[i]);
            if (zoneTime.format() === actual) {
                if (false) {}
                // Found a match, return that zone
                return supportedTimeZones[i];
            }
        }
    }
    console.log("No matching timezone found for " + current + ", setting to default value of Europe/London");
    return defaultZone;
}



/***/ }),

/***/ 2842:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(606);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_highcharts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2843);
/* harmony import */ var react_highcharts__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_highcharts__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(571);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var assets_colors__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2837);
/* harmony import */ var assets_colors__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(assets_colors__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2129);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(598);


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }












var DepthHighChart = function (_React$Component) {
    _inherits(DepthHighChart, _React$Component);

    function DepthHighChart() {
        _classCallCheck(this, DepthHighChart);

        return _possibleConstructorReturn(this, (DepthHighChart.__proto__ || Object.getPrototypeOf(DepthHighChart)).apply(this, arguments));
    }

    _createClass(DepthHighChart, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps) {
            var settleCheck = isNaN(nextProps.feedPrice) ? false : nextProps.feedPrice !== this.props.feedPrice;
            return Object(common_MarketClasses__WEBPACK_IMPORTED_MODULE_9__["didOrdersChange"])(nextProps.orders, this.props.orders) || Object(common_MarketClasses__WEBPACK_IMPORTED_MODULE_9__["didOrdersChange"])(nextProps.call_orders, this.props.call_orders) || settleCheck || nextProps.feedPrice !== this.props.feedPrice || nextProps.height !== this.props.height || nextProps.isPanelActive !== this.props.isPanelActive || nextProps.activePanels !== this.props.activePanels || nextProps.LCP !== this.props.LCP || nextProps.showCallLimit !== this.props.showCallLimit || nextProps.hasPrediction !== this.props.hasPrediction || nextProps.feedPrice !== this.props.feedPrice || nextProps.marketReady !== this.props.marketReady;
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            this.reflowChart(500);
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            if (this.refs.depthChart && nextProps.activePanels !== this.props.activePanels) {
                this.reflowChart(100);
            }
        }
    }, {
        key: "componentWillUpdate",
        value: function componentWillUpdate() {
            if (this.props.centerRef) {
                this.tempScroll = this.props.centerRef.scrollTop;
            }
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            if (this.props.centerRef) {
                this.props.centerRef.scrollTop = this.tempScroll;
            }
        }
    }, {
        key: "reflowChart",
        value: function reflowChart(timeout) {
            var _this2 = this;

            setTimeout(function () {
                if (_this2.refs.depthChart) {
                    _this2.refs.depthChart.chart.reflow();
                }
            }, timeout);
        }
    }, {
        key: "_getThemeColors",
        value: function _getThemeColors() {
            var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;

            return assets_colors__WEBPACK_IMPORTED_MODULE_7___default.a[props.theme];
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                flat_bids = _props.flat_bids,
                flat_asks = _props.flat_asks,
                flat_calls = _props.flat_calls,
                flat_settles = _props.flat_settles,
                totalBids = _props.totalBids,
                totalAsks = _props.totalAsks,
                base = _props.base,
                quote = _props.quote,
                feedPrice = _props.feedPrice;

            var _getThemeColors2 = this._getThemeColors(),
                primaryText = _getThemeColors2.primaryText,
                callColor = _getThemeColors2.callColor,
                settleColor = _getThemeColors2.settleColor,
                settleFillColor = _getThemeColors2.settleFillColor,
                bidColor = _getThemeColors2.bidColor,
                bidFillColor = _getThemeColors2.bidFillColor,
                askColor = _getThemeColors2.askColor,
                askFillColor = _getThemeColors2.askFillColor,
                axisLineColor = _getThemeColors2.axisLineColor;

            var _utils$replaceName = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].replaceName(base),
                baseSymbol = _utils$replaceName.name,
                basePrefix = _utils$replaceName.prefix;

            var _utils$replaceName2 = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].replaceName(quote),
                quoteSymbol = _utils$replaceName2.name,
                quotePrefix = _utils$replaceName2.prefix;

            baseSymbol = (basePrefix || "") + baseSymbol;
            quoteSymbol = (quotePrefix || "") + quoteSymbol;

            var flatBids = Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__["default"])(flat_bids),
                flatAsks = Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__["default"])(flat_asks),
                flatCalls = Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__["default"])(flat_calls),
                flatSettles = Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__["default"])(flat_settles);

            var config = {
                chart: {
                    type: "area",
                    backgroundColor: "rgba(255, 0, 0, 0)",
                    spacing: [10, 0, 5, 0]
                },
                title: {
                    text: null
                },
                credits: {
                    enabled: false
                },
                legend: {
                    enabled: false
                },
                rangeSelector: {
                    enabled: false
                },
                navigator: {
                    enabled: false
                },
                scrollbar: {
                    enabled: false
                },
                dataGrouping: {
                    enabled: false
                },
                tooltip: {
                    shared: false,
                    backgroundColor: "rgba(0, 0, 0, 0.75)",
                    useHTML: true,
                    formatter: function formatter() {
                        return "\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>" + counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.price") + ":</td>\n\t\t\t\t\t\t\t<td style=\"text-align: right\">" + common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(this.x, base.get("precision")) + " " + baseSymbol + "/" + quoteSymbol + "</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>" + counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("exchange.quantity") + ":</td>\n\t\t\t\t\t\t\t<td style=\"text-align: right\">" + common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(this.y, quote.get("precision")) + " " + quoteSymbol + "</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t\t";
                    },
                    style: {
                        color: "#FFFFFF"
                    }
                },
                series: [],
                yAxis: {
                    labels: {
                        enabled: true,
                        style: {
                            color: primaryText
                        },
                        formatter: function formatter() {
                            return common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(this.value, quote.get("precision"));
                        }
                    },
                    opposite: false,
                    title: {
                        text: null,
                        style: {
                            color: "#FFFFFF"
                        }
                    },
                    gridLineWidth: 1,
                    gridLineColor: "rgba(196, 196, 196, 0.30)",
                    gridZIndex: 1,
                    crosshair: {
                        snap: false
                    },
                    currentPriceIndicator: {
                        enabled: false
                    }
                },
                xAxis: {
                    labels: {
                        style: {
                            color: primaryText
                            // formatter: function() {
                            //     return this.value / power;
                            // }
                        } },
                    ordinal: false,
                    lineColor: "#000000",
                    title: {
                        text: null
                    },
                    plotLines: []
                },
                plotOptions: {
                    area: {
                        animation: false,
                        marker: {
                            enabled: false
                        },
                        series: {
                            enableMouseTracking: false
                        }
                    }
                }
            };

            // Center the charts between bids and asks
            if (flatBids.length > 0 && flatAsks.length > 0) {
                var middleValue = (flatAsks[0][0] + flatBids[flatBids.length - 1][0]) / 2;

                config.xAxis.min = middleValue * 0.4;
                config.xAxis.max = middleValue * 1.6;
                if (config.xAxis.max < flatAsks[0][0]) {
                    config.xAxis.max = flatAsks[0][0] * 1.5;
                }
                if (config.xAxis.min > flatBids[flatBids.length - 1][0]) {
                    config.xAxis.min = flatBids[flatBids.length - 1][0] * 0.5;
                }
                var yMax = 0;
                flatBids.forEach(function (b) {
                    if (b[0] >= config.xAxis.min) {
                        yMax = Math.max(b[1], yMax);
                    }
                });
                flatAsks.forEach(function (a) {
                    if (a[0] <= config.xAxis.max) {
                        yMax = Math.max(a[1], yMax);
                    }
                });
                config.yAxis.max = yMax * 1.15;

                // Adjust y axis label decimals
                var yLabelDecimals = yMax > 10 ? 0 : yMax > 1 ? 2 : 5;
                config.yAxis.labels.formatter = function () {
                    return common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(this.value, yLabelDecimals);
                };
            } else if (flatBids.length && !flatAsks.length) {
                config.xAxis.min = flatBids[flatBids.length - 1][0] * 0.4;
                config.xAxis.max = flatBids[flatBids.length - 1][0] * 1.6;
            } else if (flatAsks.length && !flatBids.length) {
                config.xAxis.min = 0;
                config.xAxis.max = flatAsks[0][0] * 2;
            }

            if (this.props.hasPrediction) {
                config.xAxis.min = -0.05;
                config.xAxis.max = 1.05;
            }

            // Add plotlines if defined
            // if (falsethis.props.plotLine) {
            //	 config.xAxis.plotLines.push({
            //		 color: "red",
            //		 id: "plot_line",
            //		 dashStyle: "longdashdot",
            //		 value: this.props.plotLine * power,
            //		 width: 1,
            //		 zIndex: 5
            //	 });
            // }

            // Market asset
            if (this.props.LCP) {
                var bitAsset = base.get("bitasset_data_id") ? base : quote;

                var mcr = bitAsset.getIn(["bitasset", "current_feed", "maintenance_collateral_ratio"]) / 1000;

                var sqr = bitAsset.getIn(["bitasset", "current_feed", "maximum_short_squeeze_ratio"]) / 1000;

                var settlement_support_price = this.props.invertedCalls ? this.props.LCP / mcr * sqr : this.props.LCP * mcr / sqr;

                config.xAxis.plotLines.push({
                    color: axisLineColor,
                    id: "plot_line",
                    dashStyle: "longdash",
                    value: this.props.LCP,
                    label: {
                        text: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("explorer.block.call_limit", {
                            price: this.props.LCP.toFixed(4)
                        }),
                        style: {
                            color: primaryText,
                            fontWeight: "bold"
                        },
                        x: !this.props.invertedCalls ? -10 : 5
                    },
                    width: 2,
                    zIndex: 5
                });

                config.xAxis.plotLines.push({
                    color: axisLineColor,
                    id: "plot_line",
                    dashStyle: "longdash",
                    value: settlement_support_price,
                    label: {
                        text: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("explorer.block.gs_support", {
                            price: settlement_support_price.toFixed(4)
                        }),
                        style: {
                            color: primaryText,
                            fontWeight: "bold"
                        },
                        x: this.props.invertedCalls ? -10 : 5
                    },
                    width: 2,
                    zIndex: 5
                });
            }

            // if (this.props.SQP) {
            // 	 config.xAxis.plotLines.push({
            // 		 color: "#B6B6B6",
            // 		 id: "plot_line",
            // 		 dashStyle: "longdash",
            // 		 value: this.props.SQP * power,
            // 		 label: {
            // 			 text: counterpart.translate("exchange.squeeze"),
            // 			 style: {
            // 				 color: "#DADADA",
            // 				 fontWeight: "bold"
            // 			 }
            // 		 },
            // 		 width: 2,
            // 		 zIndex: 5
            // 	 });
            // }

            if (feedPrice) {
                var settlementColor = base.has("bitasset") ? askColor : bidColor;
                config.xAxis.plotLines.push({
                    color: settlementColor,
                    id: "plot_line",
                    dashStyle: "solid",
                    value: feedPrice,
                    label: {
                        text: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("explorer.block.feed_price", {
                            price: feedPrice.toFixed(4)
                        }),
                        style: {
                            color: primaryText,
                            fontWeight: "bold"
                        },
                        x: !this.props.invertedCalls ? -10 : 5
                    },
                    width: 2,
                    zIndex: 5
                });

                // Add calls if present
                if (flatCalls && flatCalls.length) {
                    config.series.push({
                        name: "Call " + quoteSymbol,
                        data: flatCalls,
                        color: callColor
                    });
                }
            }

            // Add settle orders
            if (feedPrice && flatSettles && flatSettles.length) {
                config.series.push({
                    name: "Settle " + quoteSymbol,
                    data: flatSettles,
                    color: settleColor,
                    fillColor: settleFillColor
                });
            }

            // Push asks and bids
            if (flatBids.length) {
                config.series.push({
                    step: "right",
                    name: "Bid " + quoteSymbol,
                    data: flatBids,
                    color: bidColor,
                    fillColor: bidFillColor
                });
            }

            if (flatAsks.length) {
                config.series.push({
                    step: "left",
                    name: "Ask " + quoteSymbol,
                    data: flatAsks,
                    color: askColor,
                    fillColor: askFillColor
                });
            }

            // Fix the height if defined, else use 400px;
            if (this.props.height) {
                config.chart.height = this.props.height;
            } else {
                config.chart.height = "400px";
            }

            // Add onClick event listener if defined
            if (this.props.onClick) {
                config.chart.events = {
                    click: this.props.onClick.bind(this)
                };
            }

            if (this.props.noFrame) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "grid-content no-overflow no-padding" },
                    !flatBids.length && !flatAsks.length && !flatCalls.length ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        { className: "no-data" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "exchange.no_data" })
                    ) : null,
                    this.props.noText ? null : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "p",
                        { className: "bid-total" },
                        common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(totalBids, base.get("precision")),
                        " ",
                        baseSymbol
                    ),
                    this.props.noText ? null : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "p",
                        { className: "ask-total" },
                        common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(totalAsks, quote.get("precision")),
                        " ",
                        quoteSymbol
                    ),
                    flatBids || flatAsks || flatCalls ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_highcharts__WEBPACK_IMPORTED_MODULE_3___default.a, { config: config }) : null
                );
            } else {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "grid-content no-overflow no-padding middle-content" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "exchange-bordered", id: "depth_chart" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: "exchange-content-header" },
                            this.props.noText ? null : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "span",
                                { className: "bid-total" },
                                common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(totalBids, base.get("precision")),
                                " ",
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_8__["default"], { name: base.get("symbol") })
                            ),
                            this.props.noText ? null : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "span",
                                { className: "ask-total float-right" },
                                common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(totalAsks, quote.get("precision")),
                                " ",
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_8__["default"], { name: quote.get("symbol") })
                            )
                        ),
                        !flatBids.length && !flatAsks.length && !flatCalls.length ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "span",
                            { className: "no-data" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "exchange.no_data" })
                        ) : null,
                        flatBids || flatAsks || flatCalls ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_highcharts__WEBPACK_IMPORTED_MODULE_3___default.a, { ref: "depthChart", config: config }) : null
                    )
                );
            }
        }
    }]);

    return DepthHighChart;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

DepthHighChart.defaultProps = {
    flat_bids: [],
    flat_asks: [],
    orders: {},
    noText: false,
    noFrame: true
};

DepthHighChart.propTypes = {
    flat_bids: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.array.isRequired,
    flat_asks: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.array.isRequired,
    orders: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.object.isRequired
};

/* harmony default export */ __webpack_exports__["default"] = (DepthHighChart);

/***/ }),

/***/ 2847:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(553);
/* harmony import */ var alt_container__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1989);
/* harmony import */ var _Notifier__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2848);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






var NotifierContainer = function (_React$Component) {
    _inherits(NotifierContainer, _React$Component);

    function NotifierContainer() {
        _classCallCheck(this, NotifierContainer);

        return _possibleConstructorReturn(this, (NotifierContainer.__proto__ || Object.getPrototypeOf(NotifierContainer)).apply(this, arguments));
    }

    _createClass(NotifierContainer, [{
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                alt_container__WEBPACK_IMPORTED_MODULE_2__["default"],
                {
                    stores: [stores_AccountStore__WEBPACK_IMPORTED_MODULE_1__["default"]],
                    inject: {
                        account: function account() {
                            return stores_AccountStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().currentAccount;
                        }
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Notifier__WEBPACK_IMPORTED_MODULE_3__["default"], null)
            );
        }
    }]);

    return NotifierContainer;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (NotifierContainer);

/***/ }),

/***/ 2848:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_foundation_apps_src_notification__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2849);
/* harmony import */ var react_foundation_apps_src_notification__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_notification__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(733);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Blockchain_Operation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2550);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(527);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2003);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(420);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }









var operations = bitsharesjs__WEBPACK_IMPORTED_MODULE_7__["ChainTypes"].operations;


var ops = Object.keys(operations);

var Notifier = function (_React$Component) {
    _inherits(Notifier, _React$Component);

    function Notifier() {
        _classCallCheck(this, Notifier);

        return _possibleConstructorReturn(this, (Notifier.__proto__ || Object.getPrototypeOf(Notifier)).apply(this, arguments));
    }

    _createClass(Notifier, [{
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            if (nextProps.account && nextProps.account.size && this.props.account && this.props.account.get("history")) {
                var ch = this.props.account.get("history") && this.props.account.get("history").first() ? this.props.account.get("history").first().toJS() : null;
                var nh = nextProps.account.get("history") && nextProps.account.get("history").first() ? nextProps.account.get("history").first().toJS() : null;
                if (nh && ch) {
                    // Only trigger notifications for order fills
                    if (ops[nh.op[0]] === "fill_order" && (!ch && nh.id || nh.id !== ch.id)) {
                        react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default.a.publish("account-notify", "open");
                        setTimeout(function () {
                            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_2___default.a.publish("account-notify", "close");
                        }, 5000);
                    }
                }
            }
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps) {
            if (!nextProps.account || !this.props.account) return false;
            return !immutable__WEBPACK_IMPORTED_MODULE_4___default.a.is(nextProps.account.get("history"), this.props.account.get("history")) || !immutable__WEBPACK_IMPORTED_MODULE_4___default.a.is(nextProps.account, this.props.account);
        }
    }, {
        key: "render",
        value: function render() {
            var account = this.props.account;


            if (!account) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null);
            }

            var trx = void 0,
                info = void 0;

            if (this.props.account.get("history") && this.props.account.get("history").size) {
                trx = this.props.account.get("history").first().toJS();
                if (trx) {
                    info = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Blockchain_Operation__WEBPACK_IMPORTED_MODULE_3__["default"], {
                        key: trx.id,
                        op: trx.op,
                        result: trx.result,
                        block: trx.block_num,
                        current: account.get("id"),
                        hideDate: true,
                        hideFee: true
                    });
                }
            }

            if (!trx) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null);
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                react_foundation_apps_src_notification__WEBPACK_IMPORTED_MODULE_1___default.a.Static,
                {
                    id: "account-notify",
                    title: null,
                    image: "",
                    wrapperElement: "div"
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        info
                    )
                )
            );
        }
    }]);

    return Notifier;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

Notifier.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAccount.isRequired
};

Notifier = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(Notifier);

/* harmony default export */ __webpack_exports__["default"] = (Notifier);

/***/ }),

/***/ 2857:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(Buffer) {/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(733);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(598);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(571);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2003);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2002);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(569);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2370);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var common_gatewayMethods__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2132);
/* harmony import */ var _Utility_CopyButton__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2341);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1894);
/* harmony import */ var _LoadingIndicator__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(1986);
/* harmony import */ var common_trxHelper__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(597);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(1886);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(725);
/* harmony import */ var _Utility_DecimalChecker__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2127);
/* harmony import */ var api_apiConfig__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(731);
/* harmony import */ var branding__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(585);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(420);
/* harmony import */ var components_Utility_FeeAssetSelector__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(2136);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

























var DepositWithdrawContent = function (_DecimalChecker) {
    _inherits(DepositWithdrawContent, _DecimalChecker);

    function DepositWithdrawContent(props) {
        _classCallCheck(this, DepositWithdrawContent);

        var _this = _possibleConstructorReturn(this, (DepositWithdrawContent.__proto__ || Object.getPrototypeOf(DepositWithdrawContent)).call(this));

        _this.state = {
            toAddress: common_gatewayMethods__WEBPACK_IMPORTED_MODULE_10__["WithdrawAddresses"].getLast(props.walletType),
            withdrawValue: "",
            amountError: null,
            symbol: props.asset.get("symbol"),
            to_withdraw: new common_MarketClasses__WEBPACK_IMPORTED_MODULE_3__["Asset"]({
                asset_id: props.asset.get("id"),
                precision: props.asset.get("precision")
            }),
            feeAsset: {
                asset_id: bitsharesjs__WEBPACK_IMPORTED_MODULE_21__["ChainStore"].assets_by_symbol.get(props.fee_asset_symbol) || "1.3.0",
                amount: 0
            },
            loading: false,
            emptyAddressDeposit: false
        };

        _this._validateAddress(_this.state.toAddress, props);

        _this.addDepositAddress = _this.addDepositAddress.bind(_this);
        _this._checkBalance = _this._checkBalance.bind(_this);
        _this._getCurrentBalance = _this._getCurrentBalance.bind(_this);
        return _this;
    }

    _createClass(DepositWithdrawContent, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this._getDepositAddress();
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.asset && this.props.asset && np.asset.get("id") !== this.props.asset.get("id")) {
                this.setState({
                    to_withdraw: new common_MarketClasses__WEBPACK_IMPORTED_MODULE_3__["Asset"]({
                        asset_id: np.asset.get("id"),
                        precision: np.asset.get("precision")
                    }),
                    gateFee: np.asset.get("gateFee"),
                    intermediateAccount: np.asset.get("intermediateAccount"),
                    symbol: np.asset.get("symbol"),
                    memo: "",
                    withdrawValue: "",
                    receive_address: null,
                    toAddress: common_gatewayMethods__WEBPACK_IMPORTED_MODULE_10__["WithdrawAddresses"].getLast(np.walletType)
                }, this._getDepositAddress);
            }
        }
    }, {
        key: "_getDepositAddress",
        value: function _getDepositAddress() {
            if (!this.props.backingCoinType) return;

            var receive_address = Object(common_gatewayMethods__WEBPACK_IMPORTED_MODULE_10__["getDepositAddress"])({
                coin: "open." + this.props.backingCoinType.toLowerCase(),
                account: this.props.account,
                stateCallback: this.addDepositAddress
            });

            if (!receive_address) {
                Object(common_gatewayMethods__WEBPACK_IMPORTED_MODULE_10__["requestDepositAddress"])(this._getDepositObject());
            } else {
                this.setState({
                    receive_address: receive_address
                });
            }
        }
    }, {
        key: "_getDepositObject",
        value: function _getDepositObject() {
            return {
                inputCoinType: this.props.backingCoinType.toLowerCase(),
                outputCoinType: this.props.symbol.toLowerCase(),
                outputAddress: this.props.sender.get("name"),
                stateCallback: this.addDepositAddress
            };
        }
    }, {
        key: "requestDepositAddressLoad",
        value: function requestDepositAddressLoad() {
            this.setState({
                loading: true,
                emptyAddressDeposit: false
            });
            Object(common_gatewayMethods__WEBPACK_IMPORTED_MODULE_10__["requestDepositAddress"])(this._getDepositObject());
        }
    }, {
        key: "addDepositAddress",
        value: function addDepositAddress(receive_address) {
            if (receive_address.error) {
                receive_address.error.message === "no_address" ? this.setState({ emptyAddressDeposit: true }) : this.setState({ emptyAddressDeposit: false });
            }

            this.setState({
                receive_address: receive_address,
                loading: false
            });
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            react_tooltip__WEBPACK_IMPORTED_MODULE_8___default.a.rebuild();
        }
    }, {
        key: "getMemo",
        value: function getMemo() {
            return this.props.backingCoinType.toLowerCase() + ":" + this.state.toAddress + (this.state.memo ? ":" + new Buffer(this.state.memo, "utf-8") : "");
        }
    }, {
        key: "onSubmit",
        value: function onSubmit(e) {
            e.preventDefault();
            if (this.state.to_withdraw.getAmount() === 0) {
                return this.setState({
                    amountError: "transfer.errors.pos"
                });
            }

            if (!this.props.intermediateAccount) return;

            var fee = this.state.feeAsset;
            var gateFee = this._getGateFee();

            var sendAmount = this.state.to_withdraw.clone();

            var balanceAmount = sendAmount.clone(this._getCurrentBalance().get("balance"));

            sendAmount.plus(gateFee);

            /* Insufficient balance */
            if (balanceAmount.lt(sendAmount)) {
                // Send the originally entered amount
                sendAmount = this.state.to_withdraw.clone();
            }

            actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__["default"].transfer(this.props.sender.get("id"), this.props.intermediateAccount, this.state.to_withdraw.getAmount(), this.state.to_withdraw.asset_id, this.getMemo(), null, fee.asset_id);
        }
    }, {
        key: "_updateAmount",
        value: function _updateAmount() {
            var feeAsset = this.state.feeAsset;

            var currentBalance = this._getCurrentBalance();

            var total = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_3__["Asset"]({
                amount: currentBalance ? currentBalance.get("balance") : 0,
                asset_id: this.props.asset.get("id"),
                precision: this.props.asset.get("precision")
            });

            // Subtract the fee if it is using the same asset
            if (total.asset_id === feeAsset.asset_id) {
                total.minus(feeAsset);
            }

            this.state.to_withdraw.setAmount({ sats: total.getAmount() });
            this.setState({
                withdrawValue: total.getAmount({ real: true }),
                amountError: null
            }, this._checkBalance);
        }
    }, {
        key: "_getCurrentBalance",
        value: function _getCurrentBalance() {
            var _this2 = this;

            var balances = this.props.balance ? [bitsharesjs__WEBPACK_IMPORTED_MODULE_21__["ChainStore"].getObject(this.props.balance)] : this.props.balances;

            return !!balances ? balances.find(function (b) {
                return b && b.get("asset_type") === _this2.props.asset.get("id");
            }) : null;
        }
    }, {
        key: "_checkBalance",
        value: function _checkBalance() {
            var _state = this.state,
                feeAsset = _state.feeAsset,
                to_withdraw = _state.to_withdraw;
            var asset = this.props.asset;

            var balance = this._getCurrentBalance();
            if (!balance || !feeAsset) return;
            var hasBalance = Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_14__["checkBalance"])(to_withdraw.getAmount({ real: true }), asset, feeAsset, balance, this._getGateFee());
            if (hasBalance === null) return;
            if (this.state.balanceError !== !hasBalance) this.setState({ balanceError: !hasBalance });

            return hasBalance;
        }
    }, {
        key: "_onInputAmount",
        value: function _onInputAmount(e) {
            try {
                this.state.to_withdraw.setAmount({
                    real: parseFloat(e.target.value || 0)
                });
                this.setState({
                    withdrawValue: e.target.value,
                    amountError: null
                }, this._checkBalance);
            } catch (err) {
                console.error("err:", err);
            }
        }
    }, {
        key: "_onInputTo",
        value: function _onInputTo(e) {
            var toAddress = e.target.value.trim();

            this.setState({
                withdraw_address_check_in_progress: true,
                withdraw_address_selected: toAddress,
                validAddress: null,
                toAddress: toAddress
            });

            this._validateAddress(toAddress);
        }
    }, {
        key: "_onMemoChanged",
        value: function _onMemoChanged(e) {
            this.setState({ memo: e.target.value });
        }
    }, {
        key: "_validateAddress",
        value: function _validateAddress(address) {
            var _this3 = this;

            var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.props;

            Object(common_gatewayMethods__WEBPACK_IMPORTED_MODULE_10__["validateAddress"])({
                url: api_apiConfig__WEBPACK_IMPORTED_MODULE_18__["openledgerAPIs"].BASE,
                walletType: props.walletType,
                newAddress: address
            }).then(function (isValid) {
                if (_this3.state.toAddress === address) {
                    _this3.setState({
                        withdraw_address_check_in_progress: false,
                        validAddress: !!isValid
                    });
                }
            }).catch(function (err) {
                console.error("Error when validating address:", err);
            });
        }
    }, {
        key: "_openRegistrarSite",
        value: function _openRegistrarSite(e) {
            e.preventDefault();
            var newWnd = window.open(stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"].site_registr, "_blank");
            newWnd.opener = null;
        }
    }, {
        key: "_getGateFee",
        value: function _getGateFee() {
            var _props = this.props,
                gateFee = _props.gateFee,
                asset = _props.asset;

            return new common_MarketClasses__WEBPACK_IMPORTED_MODULE_3__["Asset"]({
                real: parseFloat(gateFee ? gateFee.replace(",", "") : 0),
                asset_id: asset.get("id"),
                precision: asset.get("precision")
            });
        }
    }, {
        key: "onFeeChanged",
        value: function onFeeChanged(asset) {
            this.setState({
                feeAsset: asset
            });
        }
    }, {
        key: "_renderWithdraw",
        value: function _renderWithdraw() {
            var _state2 = this.state,
                amountError = _state2.amountError,
                toAddress = _state2.toAddress,
                memo = _state2.memo,
                feeAsset = _state2.feeAsset,
                balanceError = _state2.balanceError,
                withdrawValue = _state2.withdrawValue,
                validAddress = _state2.validAddress;
            var _props2 = this.props,
                supportsMemos = _props2.supportsMemos,
                asset = _props2.asset,
                account = _props2.account;

            var _utils$replaceName = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].replaceName(asset),
                assetName = _utils$replaceName.name;

            var tabIndex = 1;

            // if(this.props.fiatModal){
            //     if(~this.props.fiatModal.indexOf('canFiatWith')){
            //         return (<WithdrawFiatOpenLedger
            //             account={this.props.account}
            //             issuer_account="openledger-fiat"
            //             deposit_asset={this.props.asset.get("symbol").split('OPEN.').join('')}
            //             receive_asset={this.props.asset.get("symbol")}
            //             rpc_url={SettingsStore.rpc_url}
            //         />);
            //     }else{
            //         return (<p>Click <a href='#' onClick={this._openRegistrarSite} >here</a> to register for deposits </p>);
            //     }
            // }

            var currentFee = feeAsset;

            var trxInfoContent = this.getMemo();

            var disableSubmit = !currentFee || balanceError || !toAddress || !withdrawValue;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                        content: "gateway.withdraw_funds",
                        asset: assetName,
                        wallet_name: Object(branding__WEBPACK_IMPORTED_MODULE_19__["getWalletName"])()
                    })
                ),
                this._renderCurrentBalance(),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "SimpleTrade__withdraw-row" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "label",
                        { className: "left-label" },
                        counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("modal.withdraw.amount")
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "inline-label input-wrapper" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                            tabIndex: tabIndex++,
                            type: "number",
                            min: "0",
                            onKeyPress: this.onKeyPress.bind(this),
                            value: withdrawValue,
                            onChange: this._onInputAmount.bind(this)
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "form-label select floating-dropdown" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "dropdown-wrapper inactive" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    null,
                                    assetName
                                )
                            )
                        )
                    ),
                    amountError ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "p",
                        {
                            className: "has-error no-margin",
                            style: { paddingTop: 10 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: amountError })
                    ) : null,
                    this.state.balanceError ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "p",
                        {
                            className: "has-error no-margin",
                            style: { paddingTop: 10 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "transfer.errors.insufficient" })
                    ) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "SimpleTrade__withdraw-row withdraw-fee-selector" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Utility_FeeAssetSelector__WEBPACK_IMPORTED_MODULE_22__["default"], {
                        label: "showcases.barter.fee_when_proposal_executes",
                        account: account,
                        transaction: {
                            type: "transfer",
                            options: ["price_per_kbyte"],
                            data: {
                                type: "memo",
                                content: trxInfoContent
                            }
                        },
                        onChange: this.onFeeChanged.bind(this)
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "SimpleTrade__withdraw-row" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "label",
                        { className: "left-label" },
                        counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("modal.withdraw.address")
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "inline-label input-wrapper" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                            placeholder: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("gateway.withdraw_placeholder", { asset: assetName }),
                            tabIndex: tabIndex++,
                            type: "text",
                            value: toAddress,
                            onChange: this._onInputTo.bind(this)
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "form-label select floating-dropdown" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "dropdown-wrapper inactive" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_20__["Tooltip"],
                                    {
                                        placement: "right",
                                        title: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("tooltip.withdraw_address", { asset: assetName })
                                    },
                                    "?"
                                )
                            )
                        )
                    ),
                    !validAddress && toAddress ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "has-error", style: { paddingTop: 10 } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                            content: "gateway.valid_address",
                            coin_type: assetName
                        })
                    ) : null
                ),
                supportsMemos ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "SimpleTrade__withdraw-row" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "label",
                        { className: "left-label" },
                        counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("transfer.memo")
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "inline-label input-wrapper" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                            rows: "3",
                            value: memo,
                            tabIndex: tabIndex++,
                            onChange: this._onMemoChanged.bind(this)
                        })
                    ),
                    !validAddress && toAddress ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "has-error", style: { paddingTop: 10 } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                            content: "gateway.valid_address",
                            coin_type: assetName
                        })
                    ) : null
                ) : null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "button-group SimpleTrade__withdraw-row" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            tabIndex: tabIndex++,
                            className: "button" + (disableSubmit ? " disabled" : ""),
                            onClick: this.onSubmit.bind(this),
                            type: "submit"
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "gateway.withdraw_now" })
                    )
                )
            );
        }
    }, {
        key: "_renderDeposit",
        value: function _renderDeposit() {
            var _state3 = this.state,
                receive_address = _state3.receive_address,
                loading = _state3.loading,
                emptyAddressDeposit = _state3.emptyAddressDeposit;

            var _utils$replaceName2 = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].replaceName(this.props.asset),
                assetName = _utils$replaceName2.name;

            var hasMemo = receive_address && "memo" in receive_address && receive_address.memo;
            var addressValue = receive_address && receive_address.address || "";
            var tabIndex = 1;

            // if(this.props.fiatModal){
            //     if(~this.props.fiatModal.indexOf('canFiatDep')){
            //         return (<DepositFiatOpenLedger
            //             account={this.props.account}
            //             issuer_account="openledger-fiat"
            //             deposit_asset={this.props.asset.get("symbol").split('OPEN.').join('')}
            //             receive_asset={this.props.asset.get("symbol")}
            //             rpc_url={SettingsStore.rpc_url}
            //         />);
            //     }else{
            //         return (<p>Click <a href='#' onClick={this._openRegistrarSite} >here</a> to register for deposits </p>);
            //     }
            // }
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: !addressValue ? "no-overflow" : "" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                        unsafe: true,
                        content: "gateway.add_funds",
                        account: this.props.sender.get("name"),
                        wallet_name: Object(branding__WEBPACK_IMPORTED_MODULE_19__["getWalletName"])()
                    })
                ),
                this._renderCurrentBalance(),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "SimpleTrade__withdraw-row" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_20__["Tooltip"],
                        {
                            placement: "right",
                            title: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("tooltip.deposit_tip", {
                                asset: assetName
                            })
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "p",
                            { style: { marginBottom: 10 } },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                className: "help-tooltip",
                                content: "gateway.deposit_to",
                                asset: assetName
                            }),
                            ":",
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "label",
                                { className: "fz_12 left-label" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "gateway.deposit_notice_delay" })
                            )
                        )
                    ),
                    !addressValue ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_LoadingIndicator__WEBPACK_IMPORTED_MODULE_13__["default"], { type: "three-bounce" }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "label",
                        null,
                        emptyAddressDeposit ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "gateway.please_generate_address" }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            { className: "inline-label" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                readOnly: true,
                                type: "text",
                                value: addressValue
                            }),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_CopyButton__WEBPACK_IMPORTED_MODULE_11__["default"], { text: addressValue }),
                            " "
                        )
                    ),
                    hasMemo ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "label",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            { className: "inline-label" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                readOnly: true,
                                type: "text",
                                value: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("transfer.memo") + ": " + receive_address.memo
                            }),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_CopyButton__WEBPACK_IMPORTED_MODULE_11__["default"], { text: receive_address.memo })
                        )
                    ) : null,
                    receive_address && receive_address.error ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "has-error", style: { paddingTop: 10 } },
                        receive_address.error.message
                    ) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "button-group SimpleTrade__withdraw-row" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            tabIndex: tabIndex++,
                            className: "button spinner-button-circle",
                            onClick: this.requestDepositAddressLoad.bind(this),
                            type: "submit"
                        },
                        loading ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_LoadingIndicator__WEBPACK_IMPORTED_MODULE_13__["default"], { type: "circle" }) : null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "gateway.generate_new" })
                    )
                )
            );
        }
    }, {
        key: "_renderCurrentBalance",
        value: function _renderCurrentBalance() {
            var _utils$replaceName3 = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].replaceName(this.props.asset),
                assetName = _utils$replaceName3.name;

            var isDeposit = this.props.action === "deposit";

            var currentBalance = this._getCurrentBalance();

            var asset = currentBalance ? new common_MarketClasses__WEBPACK_IMPORTED_MODULE_3__["Asset"]({
                asset_id: currentBalance.get("asset_type"),
                precision: this.props.asset.get("precision"),
                amount: currentBalance.get("balance")
            }) : null;

            // TEMP //
            // asset = new Asset({
            //     asset_id: this.props.asset.get("id"),
            //     precision: this.props.asset.get("precision"),
            //     amount: 65654645
            // });

            var applyBalanceButton = isDeposit ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                {
                    style: { border: "2px solid black", borderLeft: "none" },
                    className: "form-label"
                },
                assetName
            ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_20__["Tooltip"],
                {
                    placement: "right",
                    title: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("tooltip.withdraw_full")
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: "button",
                        style: { border: "2px solid black", borderLeft: "none" },
                        onClick: this._updateAmount.bind(this, !currentBalance ? 0 : parseInt(currentBalance.get("balance"), 10))
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_12__["default"], { name: "clippy", title: "icons.clippy.withdraw_full" })
                )
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                {
                    className: "SimpleTrade__withdraw-row",
                    style: { fontSize: "1rem" }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    { style: { fontSize: "1rem" } },
                    counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("gateway.balance_asset", {
                        asset: assetName
                    }),
                    ":",
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { className: "inline-label" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                            disabled: true,
                            style: {
                                color: "black",
                                border: "2px solid black",
                                padding: 10,
                                width: "100%"
                            },
                            value: !asset ? 0 : asset.getAmount({ real: true })
                        }),
                        applyBalanceButton
                    )
                )
            );
        }
    }, {
        key: "render",
        value: function render() {
            var _props3 = this.props,
                asset = _props3.asset,
                action = _props3.action;

            var isDeposit = action === "deposit";

            if (!asset) {
                return null;
            }

            var _utils$replaceName4 = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].replaceName(asset),
                assetName = _utils$replaceName4.name;

            var content = this.props.isDown ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                    className: "txtlabel cancel",
                    content: "gateway.unavailable_OPEN",
                    component: "p"
                })
            ) : !this.props.isAvailable ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                    className: "txtlabel cancel",
                    content: "gateway.unavailable",
                    component: "p"
                })
            ) : isDeposit ? this._renderDeposit() : this._renderWithdraw();

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "SimpleTrade__modal" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    {
                        className: "grid-block vertical no-overflow",
                        style: {
                            zIndex: 1002,
                            paddingLeft: "2rem",
                            paddingRight: "2rem",
                            paddingTop: "1rem"
                        }
                    },
                    content
                )
            );
        }
    }]);

    return DepositWithdrawContent;
}(_Utility_DecimalChecker__WEBPACK_IMPORTED_MODULE_17__["DecimalChecker"]);

DepositWithdrawContent.propTypes = {
    balance: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_6__["default"].ChainObject,
    sender: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_6__["default"].ChainAccount.isRequired,
    asset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_6__["default"].ChainAsset.isRequired,
    coreAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_6__["default"].ChainAsset.isRequired,
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_6__["default"].ChainAsset.isRequired
};
DepositWithdrawContent.defaultProps = {
    coreAsset: "1.3.0",
    globalObject: "2.0.0"
};


DepositWithdrawContent = Object(alt_react__WEBPACK_IMPORTED_MODULE_15__["connect"])(DepositWithdrawContent, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"]];
    },
    getProps: function getProps(props) {
        return {
            fee_asset_symbol: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"].getState().settings.get("fee_asset")
        };
    }
});

DepositWithdrawContent = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(DepositWithdrawContent);

var SimpleDepositWithdrawModal = function (_React$Component) {
    _inherits(SimpleDepositWithdrawModal, _React$Component);

    function SimpleDepositWithdrawModal() {
        _classCallCheck(this, SimpleDepositWithdrawModal);

        var _this4 = _possibleConstructorReturn(this, (SimpleDepositWithdrawModal.__proto__ || Object.getPrototypeOf(SimpleDepositWithdrawModal)).call(this));

        _this4.state = { open: false };
        return _this4;
    }

    _createClass(SimpleDepositWithdrawModal, [{
        key: "show",
        value: function show() {
            var _this5 = this;

            this.setState({ open: true }, function () {
                react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_1___default.a.publish(_this5.props.modalId, "open");
            });
        }
    }, {
        key: "onClose",
        value: function onClose() {
            this.setState({ open: false });
        }
    }, {
        key: "render",
        value: function render() {
            var isDeposit = this.props.action === "deposit";

            var title = isDeposit ? counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("gateway.deposit") : counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("modal.withdraw.submit");

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_20__["Modal"],
                {
                    title: title,
                    footer: [],
                    visible: this.props.visible,
                    onCancel: this.props.hideModal,
                    className: "test",
                    onClose: this.onClose.bind(this),
                    overlay: true,
                    id: this.props.modalId
                },
                this.props.visible ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DepositWithdrawContent, _extends({}, this.props, {
                    open: this.props.visible
                })) : null
            );
        }
    }]);

    return SimpleDepositWithdrawModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (SimpleDepositWithdrawModal);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(427).Buffer))

/***/ }),

/***/ 2859:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1846);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2129);
/* harmony import */ var _services_Exchange__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2710);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2126);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_6__);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }









var PriceAlert = function (_React$Component) {
    _inherits(PriceAlert, _React$Component);

    function PriceAlert(props) {
        _classCallCheck(this, PriceAlert);

        var _this = _possibleConstructorReturn(this, (PriceAlert.__proto__ || Object.getPrototypeOf(PriceAlert)).call(this, props));

        var testRules = [];

        _this.state = {
            rules: [].concat(testRules)
        };

        _this.handleSave = _this.handleSave.bind(_this);
        _this.handleAddRule = _this.handleAddRule.bind(_this);
        _this.handleTypeChange = _this.handleTypeChange.bind(_this);
        _this.handleDeleteRule = _this.handleDeleteRule.bind(_this);
        _this.handlePriceChange = _this.handlePriceChange.bind(_this);
        _this.handlePriceFieldBlur = _this.handlePriceFieldBlur.bind(_this);
        return _this;
    }

    _createClass(PriceAlert, [{
        key: "componentDidUpdate",
        value: function componentDidUpdate(prevProps) {
            if (!prevProps.visible && this.props.visible) {
                var example = {
                    type: _services_Exchange__WEBPACK_IMPORTED_MODULE_4__["PRICE_ALERT_TYPES"].HIGHER_THAN,
                    price: this.props.latestPrice ? Number(this.props.latestPrice) : null
                };

                var rules = [];

                if (!this.props.rules.length) {
                    rules = !this.state.openedPreviously ? [example] : [];
                } else {
                    rules = this.props.rules;
                }

                this.setState({
                    rules: rules,
                    openedPreviously: true
                });
            }
        }
    }, {
        key: "handleTypeChange",
        value: function handleTypeChange(key) {
            var _this2 = this;

            return function (value) {
                var rules = _this2.state.rules.map(function (rule, ruleKey) {
                    if (Number(key) !== Number(ruleKey)) return rule;

                    var validate = _this2.validatePrice(value, Number(rule.price), Number(_this2.props.latestPrice));

                    return _extends({}, rule, validate, {
                        type: String(value)
                    });
                });

                _this2.setState({
                    rules: rules
                });
            };
        }
    }, {
        key: "validatePrice",
        value: function validatePrice(type, price, latest) {
            if (type === _services_Exchange__WEBPACK_IMPORTED_MODULE_4__["PRICE_ALERT_TYPES"].HIGHER_THAN && price < latest) {
                return {
                    validateStatus: "error",
                    help: "Price of Alert should be higher than current price"
                };
            }

            if (type === _services_Exchange__WEBPACK_IMPORTED_MODULE_4__["PRICE_ALERT_TYPES"].LOWER_THAN && price > latest) {
                return {
                    validateStatus: "error",
                    help: "Price of Alert  should be lower than current price"
                };
            }

            return {
                validateStatus: "success",
                help: ""
            };
        }
    }, {
        key: "validatePriceFieldByKey",
        value: function validatePriceFieldByKey(key) {
            var _this3 = this;

            var rules = this.state.rules.map(function (rule, ruleKey) {
                if (Number(key) !== Number(ruleKey)) return rule;

                var validate = _this3.validatePrice(rule.type, Number(rule.price), Number(_this3.props.latestPrice));

                return _extends({}, rule, {
                    validateStatus: validate.validateStatus,
                    help: validate.help
                });
            });

            this.setState({
                rules: rules
            });
        }
    }, {
        key: "handlePriceFieldBlur",
        value: function handlePriceFieldBlur(key) {
            var _this4 = this;

            return function () {
                _this4.validatePriceFieldByKey(key);
            };
        }
    }, {
        key: "handlePriceChange",
        value: function handlePriceChange(key) {
            var _this5 = this;

            return function (event) {
                var rules = _this5.state.rules.map(function (rule, ruleKey) {
                    if (Number(key) !== Number(ruleKey)) return rule;

                    var validate = {};

                    // validate on a fly if field was touched previously
                    if (rule.validateStatus) {
                        validate = _this5.validatePrice(rule.type, Number(event.target.value), Number(_this5.props.latestPrice));
                    }

                    return _extends({}, rule, validate, {
                        price: event.target.value
                    });
                });

                _this5.setState({
                    rules: rules
                });
            };
        }
    }, {
        key: "handleAddRule",
        value: function handleAddRule() {
            var rules = [].concat(_toConsumableArray(this.state.rules));

            rules.push({
                type: _services_Exchange__WEBPACK_IMPORTED_MODULE_4__["PRICE_ALERT_TYPES"].HIGHER_THAN,
                price: this.props.latestPrice ? Number(this.props.latestPrice) : null
            });

            this.setState({
                rules: rules
            });
        }
    }, {
        key: "handleDeleteRule",
        value: function handleDeleteRule(key) {
            var _this6 = this;

            return function () {
                var rules = _this6.state.rules.filter(function (item, ruleKey) {
                    return Number(ruleKey) !== Number(key);
                });

                _this6.setState({
                    rules: rules
                });
            };
        }
    }, {
        key: "handleSave",
        value: function handleSave() {
            this.props.onSave(this.state.rules);
        }
    }, {
        key: "render",
        value: function render() {
            var _this7 = this;

            if (!this.props.quoteAsset || !this.props.quoteAsset.get || !this.props.baseAsset || !this.props.baseAsset.get) return null;

            var footer = [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Button"],
                { key: "submit", type: "primary", onClick: this.handleSave },
                counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("modal.save")
            ), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Button"],
                { key: "cancel", onClick: this.props.hideModal },
                counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("modal.cancel")
            )];

            var baseAssetSymbol = this.props.baseAsset.get("symbol");
            var quoteAssetSymbol = this.props.quoteAsset.get("symbol");

            var linkToExchange = quoteAssetSymbol + "_" + baseAssetSymbol;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Modal"],
                {
                    visible: this.props.visible,
                    onCancel: this.props.hideModal,
                    title: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.price_alert.title"),
                    footer: footer
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "exchange--price-alert" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "exchange--price-alert--description" },
                        this.state.rules.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            null,
                            counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.price_alert.alert_when"),
                            " ",
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"],
                                { to: linkToExchange },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_3__["default"], { name: quoteAssetSymbol }),
                                "/",
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_3__["default"], { name: baseAssetSymbol })
                            ),
                            " ",
                            "price:"
                        ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            null,
                            counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.price_alert.use_button"),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"],
                                { to: linkToExchange },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_3__["default"], { name: quoteAssetSymbol }),
                                "/",
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_3__["default"], { name: baseAssetSymbol })
                            ),
                            ":"
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Form"],
                            { layout: "vertical" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "exchange--price-alert--items" },
                                this.state.rules.map(function (rule, key) {
                                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Form"].Item,
                                        {
                                            key: key,
                                            validateStatus: rule.validateStatus || null,
                                            help: rule.help || null
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Input"].Group,
                                            {
                                                className: "exchange--price-alert--item",
                                                compact: true
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Select"],
                                                {
                                                    value: rule.type,
                                                    style: { width: "200px" },
                                                    onChange: _this7.handleTypeChange(key)
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Select"].Option,
                                                    {
                                                        value: _services_Exchange__WEBPACK_IMPORTED_MODULE_4__["PRICE_ALERT_TYPES"].HIGHER_THAN,
                                                        key: "1"
                                                    },
                                                    counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.price_alert.higher_than")
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Select"].Option,
                                                    {
                                                        value: _services_Exchange__WEBPACK_IMPORTED_MODULE_4__["PRICE_ALERT_TYPES"].LOWER_THAN,
                                                        key: "2"
                                                    },
                                                    counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.price_alert.lower_than")
                                                )
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Input"], {
                                                onBlur: _this7.handlePriceFieldBlur(key),
                                                style: {
                                                    width: "calc(100% - 200px - 32px)",
                                                    marginTop: "1px"
                                                },
                                                onChange: _this7.handlePriceChange(key),
                                                value: rule.price,
                                                className: "exchange--price-alert--item--price",
                                                placeholder: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.price_alert.price"),
                                                addonAfter: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                                    name: baseAssetSymbol
                                                })
                                            }),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Button"], {
                                                style: { width: "32px" },
                                                onClick: _this7.handleDeleteRule(key),
                                                className: "exchange--price-alert--item--control",
                                                type: "icon",
                                                icon: "delete"
                                            })
                                        )
                                    );
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "exchange--price-alert--items--add" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "a",
                                    {
                                        href: "javascript:void(0)",
                                        onClick: this.handleAddRule
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_1__["Icon"], { type: "plus" }),
                                    " ",
                                    counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("exchange.price_alert.add_rule")
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return PriceAlert;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

PriceAlert = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_5__["default"])(PriceAlert, {
    propNames: ["quoteAsset", "baseAsset"]
});

/* harmony default export */ __webpack_exports__["default"] = (PriceAlert);

/***/ }),

/***/ 2860:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(725);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }





/**
 *  Wrapper component for chatbro iframe
 *
 */

var ChatBro = function (_React$Component) {
    _inherits(ChatBro, _React$Component);

    function ChatBro() {
        _classCallCheck(this, ChatBro);

        return _possibleConstructorReturn(this, (ChatBro.__proto__ || Object.getPrototypeOf(ChatBro)).apply(this, arguments));
    }

    _createClass(ChatBro, [{
        key: "render",
        value: function render() {
            var frameHeight = this.props.height || "30%";

            var currentLocale = stores_SettingsStore__WEBPACK_IMPORTED_MODULE_1__["default"].getState().settings.get("locale");

            var chatUrl = null;
            switch (currentLocale) {
                default:
                    chatUrl = "https://chat.rudex.org/" + currentLocale + "/";
                    break;
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("iframe", {
                style: { height: frameHeight, width: "100%" },
                src: chatUrl,
                sandbox: "allow-same-origin allow-forms allow-scripts allow-popups"
            });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("iframe", {
                style: { height: frameHeight, width: "100%" },
                src: chatUrl,
                sandbox: "allow-same-origin allow-forms allow-scripts allow-popups"
            });
        }
    }]);

    return ChatBro;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ChatBro.propTypes = {
    height: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string
};

/* harmony default export */ __webpack_exports__["default"] = (ChatBro);

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhjaGFuZ2UuNTMxMTVlODNlOGEzZmVkMmE2NjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvVHJhbnNmZXIvSW52b2ljZS5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL1RyYW5zZmVyL0ludm9pY2VSZXF1ZXN0LmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvbGliL2NvbW1vbi9iYXNlNTguY29mZmVlIiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9UcmFuc2Zlci9JbnZvaWNlUGF5LmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvVHJhbnNmZXIvUHJpbnRSZWNlaXB0QnV0dG9uLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvVXRpbGl0eS9CaW5kVG9DdXJyZW50QWNjb3VudC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL1RyYW5zZmVyL1NjYW5PckVudGVyVGV4dC5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2Fzc2V0cy9zdHlsZXNoZWV0cy9jb21wb25lbnRzL19tZXJjaGFudC5zY3NzP2U4ZTUiLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0V4Y2hhbmdlL0V4Y2hhbmdlQ29udGFpbmVyLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvRXhjaGFuZ2UvRXhjaGFuZ2UuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9FeGNoYW5nZS9CdXlTZWxsLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvVXRpbGl0eS9QcmljZVRleHQuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9FeGNoYW5nZS9TY2FsZWRPcmRlclRhYi5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9zZXJ2aWNlcy9WYWxpZGF0aW9uL1ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vL2FwcC9zZXJ2aWNlcy9WYWxpZGF0aW9uL3R5cGVzLmpzIiwid2VicGFjazovLy9hcHAvc2VydmljZXMvTWF0aC5qcyIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvRXhjaGFuZ2UvRXhjaGFuZ2VIZWFkZXIuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9FeGNoYW5nZS9QcmljZVN0YXRXaXRoTGFiZWwuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9FeGNoYW5nZS9FeGNoYW5nZUhlYWRlckNvbGxhdGVyYWwuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9FeGNoYW5nZS9NeU9wZW5PcmRlcnMuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9FeGNoYW5nZS9PcGVuU2V0dGxlT3JkZXJzLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvRXhjaGFuZ2UvVmlldy9NYXJrZXRPcmRlcnNWaWV3LmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvRXhjaGFuZ2UvT3JkZXJCb29rLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvRXhjaGFuZ2UvTWFya2V0SGlzdG9yeS5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0V4Y2hhbmdlL1ZpZXcvTWFya2V0SGlzdG9yeVZpZXcuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9VdGlsaXR5L0Jsb2NrRGF0ZS5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0V4Y2hhbmdlL01hcmtldFBpY2tlci5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0V4Y2hhbmdlL01hcmtldFBpY2tlckhlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0V4Y2hhbmdlL0NvbmZpcm1PcmRlck1vZGFsLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvRXhjaGFuZ2UvUGVyc29uYWxpemUuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9FeGNoYW5nZS9UcmFkaW5nVmlld1ByaWNlQ2hhcnQuanN4Iiwid2VicGFjazovLy8uL2NoYXJ0aW5nX2xpYnJhcnkvY2hhcnRpbmdfbGlicmFyeS5taW4uanMiLCJ3ZWJwYWNrOi8vL2FwcC9hc3NldHMvY29sb3JzLmpzIiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9FeGNoYW5nZS90cmFkaW5nVmlld0NsYXNzZXMuanMiLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0V4Y2hhbmdlL0RlcHRoSGlnaENoYXJ0LmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvTm90aWZpZXIvTm90aWZpZXJDb250YWluZXIuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9Ob3RpZmllci9Ob3RpZmllci5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0Rhc2hib2FyZC9TaW1wbGVEZXBvc2l0V2l0aGRyYXcuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9FeGNoYW5nZS9QcmljZUFsZXJ0LmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQ2hhdC9DaGF0QnJvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHtDYXJkLCBUYWJzfSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IEludm9pY2VSZXF1ZXN0IGZyb20gXCIuL0ludm9pY2VSZXF1ZXN0XCI7XHJcbmltcG9ydCBJbnZvaWNlUGF5IGZyb20gXCIuL0ludm9pY2VQYXlcIjtcclxuaW1wb3J0IHtiaW5kVG9DdXJyZW50QWNjb3VudH0gZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ3VycmVudEFjY291bnRcIjtcclxuaW1wb3J0IHt2YWxpZGF0ZX0gZnJvbSBcImpzb25zY2hlbWFcIjtcclxuaW1wb3J0IFwiLi4vLi4vYXNzZXRzL3N0eWxlc2hlZXRzL2NvbXBvbmVudHMvX21lcmNoYW50LnNjc3NcIjtcclxuXHJcbmNsYXNzIEludm9pY2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgdGFiczogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUmVxdWVzdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IFwiL2ludm9pY2UvcmVxdWVzdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZTogXCJpbnZvaWNlLnJlcXVlc3QudGl0bGVcIixcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxJbnZvaWNlUmVxdWVzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLnByb3BzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVGb3JtYXQ9e3RoaXMuX3ZhbGlkYXRlRm9ybWF0LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlBheVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IFwiL2ludm9pY2UvcGF5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlOiBcImludm9pY2UucGF5LnRpdGxlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8SW52b2ljZVBheVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLnByb3BzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVGb3JtYXQ9e3RoaXMuX3ZhbGlkYXRlRm9ybWF0LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBfdmFsaWRhdGVGb3JtYXQoaW52b2ljZSkge1xyXG4gICAgICAgIGNvbnN0IHNjaGVtYSA9IHtcclxuICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcclxuICAgICAgICAgICAgcHJvcGVydGllczoge1xyXG4gICAgICAgICAgICAgICAgdG86IHt0eXBlOiBcInN0cmluZ1wifSxcclxuICAgICAgICAgICAgICAgIHRvX2xhYmVsOiB7dHlwZTogXCJzdHJpbmdcIn0sXHJcbiAgICAgICAgICAgICAgICBjdXJyZW5jeToge3R5cGU6IFwic3RyaW5nXCJ9LFxyXG4gICAgICAgICAgICAgICAgbWVtbzoge3R5cGU6IFwic3RyaW5nXCJ9LFxyXG4gICAgICAgICAgICAgICAgbGluZV9pdGVtczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcclxuICAgICAgICAgICAgICAgICAgICBpdGVtczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDoge3R5cGU6IFwic3RyaW5nXCJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IHt0eXBlOiBcImZsb2F0XCIsIG1pbmltdW06IDF9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHt0eXBlOiBcImZsb2F0XCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbm90ZToge3R5cGU6IFwic3RyaW5nXCJ9LFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFtcInRvXCIsIFwiY3VycmVuY3lcIiwgXCJsaW5lX2l0ZW1zXCJdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRlKGludm9pY2UsIHNjaGVtYSkuZXJyb3JzO1xyXG4gICAgICAgIHJldHVybiAhZXJyb3JzLmxlbmd0aDtcclxuICAgIH1cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIGNvbnN0IGlzVGFiID0gdGhpcy5zdGF0ZS50YWJzLnNvbWUoXHJcbiAgICAgICAgICAgIHRhYiA9PiB0YWIubGluayA9PT0gdGhpcy5wcm9wcy5tYXRjaC51cmxcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmICghaXNUYWIpIHRoaXMucHJvcHMuaGlzdG9yeS5wdXNoKFwiL2ludm9pY2UvcGF5XCIpO1xyXG4gICAgfVxyXG4gICAgb25UYWJDaGFuZ2UodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZXJjaGFudC1wcm90b2NvbCBjZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxDYXJkPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUYWJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUtleT17dGhpcy5wcm9wcy5sb2NhdGlvbi5wYXRobmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vblRhYkNoYW5nZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUudGFicy5tYXAodGFiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnMuVGFiUGFuZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3RhYi5saW5rfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWI9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZSh0YWIudHJhbnNsYXRlKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFkZGluZ1wiPnt0YWIuY29udGVudH08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgICAgIDwvQ2FyZD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuSW52b2ljZSA9IGJpbmRUb0N1cnJlbnRBY2NvdW50KEludm9pY2UpO1xyXG5leHBvcnQgZGVmYXVsdCBJbnZvaWNlO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBBY2NvdW50U2VsZWN0b3IgZnJvbSBcIi4uL0FjY291bnQvQWNjb3VudFNlbGVjdG9yXCI7XHJcbmltcG9ydCBBc3NldFNlbGVjdCBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldFNlbGVjdFwiO1xyXG5pbXBvcnQge2NvbXByZXNzfSBmcm9tIFwibHptYVwiO1xyXG5pbXBvcnQgYnM1OCBmcm9tIFwiY29tbW9uL2Jhc2U1OFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCB7XHJcbiAgICBCdXR0b24sXHJcbiAgICBSb3csXHJcbiAgICBDb2wsXHJcbiAgICBGb3JtLFxyXG4gICAgSW5wdXQsXHJcbiAgICBUb29sdGlwLFxyXG4gICAgSWNvblxyXG59IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgQ29weUJ1dHRvbiBmcm9tIFwiLi4vVXRpbGl0eS9Db3B5QnV0dG9uXCI7XHJcblxyXG5sZXQgaWQgPSAxO1xyXG5cclxuY2xhc3MgSW52b2ljZVJlcXVlc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgaW52b2ljZTogbnVsbCxcclxuICAgICAgICAgICAgaW52b2ljZURhdGE6IG51bGwsXHJcbiAgICAgICAgICAgIHJlY2lwaWVudF9uYW1lOiBudWxsLFxyXG4gICAgICAgICAgICByZWNpcGllbnRfbmFtZV9hY2NvdW50OiBudWxsLFxyXG4gICAgICAgICAgICBjdXJyZW5jeTogXCJCVFNcIixcclxuICAgICAgICAgICAgZGVmYXVsdEFzc2V0czogW1wiQlRTXCIsIFwiQ05ZXCIsIFwiVVNEXCJdXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgcmVjaXBpZW50X25hbWU6IHRoaXMucHJvcHMuY3VycmVudEFjY291bnQuZ2V0KFwibmFtZVwiKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9wcmludEludm9pY2UoaW52b2ljZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZhbGlkYXRlRm9ybWF0KGludm9pY2UpKSB7XHJcbiAgICAgICAgICAgIGNvbXByZXNzKEpTT04uc3RyaW5naWZ5KGludm9pY2UpLCA5LCAocmVzdWx0LCBlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW52b2ljZURhdGEgPSBiczU4LmVuY29kZShCdWZmZXIuZnJvbShyZXN1bHQpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGludm9pY2VEYXRhOiBpbnZvaWNlRGF0YVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkludm9pY2UgZGF0YVwiLCBpbnZvaWNlLCBpbnZvaWNlRGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcywgbmV4dENvbnRleHQpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5yZWNpcGllbnRfbmFtZSA9PSBudWxsICYmIHRoaXMucHJvcHMuY3VycmVudEFjY291bnQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICByZWNpcGllbnRfbmFtZTogdGhpcy5wcm9wcy5jdXJyZW50QWNjb3VudC5nZXQoXCJuYW1lXCIpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmcm9tQ2hhbmdlZChyZWNpcGllbnRfbmFtZSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3JlY2lwaWVudF9uYW1lLCByZWNpcGllbnRfbmFtZV9hY2NvdW50OiBudWxsfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Gcm9tQWNjb3VudENoYW5nZWQocmVjaXBpZW50X25hbWVfYWNjb3VudCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3JlY2lwaWVudF9uYW1lX2FjY291bnR9KTtcclxuICAgIH1cclxuXHJcbiAgICBoYXNFcnJvcnMgPSAoKSA9PiB7XHJcbiAgICAgICAgbGV0IGZvcm1FcnJvciA9IGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMucHJvcHMuZm9ybS5nZXRGaWVsZHNWYWx1ZShbXHJcbiAgICAgICAgICAgIFwibGluZV9pdGVtc1wiLFxyXG4gICAgICAgICAgICBcIm1lbW9cIixcclxuICAgICAgICAgICAgXCJrZXlzXCJcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgZm9ybUVycm9yID0gT2JqZWN0LmtleXModmFsdWVzKS5zb21lKGZpZWxkID0+IHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkICE9PSBcImxpbmVfaXRlbXNcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICF2YWx1ZXNbZmllbGRdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlcy5rZXlzKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXMua2V5cy5zb21lKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIXZhbHVlc1tmaWVsZF1baXRlbV0ubGFiZWwgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICF2YWx1ZXNbZmllbGRdW2l0ZW1dLnByaWNlIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdmFsdWVzW2ZpZWxkXVtpdGVtXS5xdWFudGl0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBmb3JtRXJyb3IgfHwgIXRoaXMuc3RhdGUucmVjaXBpZW50X25hbWU7XHJcbiAgICB9O1xyXG5cclxuICAgIHJlbW92ZSA9IGsgPT4ge1xyXG4gICAgICAgIGNvbnN0IHtmb3JtfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgY29uc3Qga2V5cyA9IGZvcm0uZ2V0RmllbGRWYWx1ZShcImtleXNcIik7XHJcbiAgICAgICAgaWYgKGtleXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbmV4dEtleXMgPSBrZXlzLmZpbHRlcihrZXkgPT4ga2V5ICE9PSBrKTtcclxuICAgICAgICBmb3JtLnNldEZpZWxkc1ZhbHVlKHtcclxuICAgICAgICAgICAga2V5czogbmV4dEtleXNcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgYWRkID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHtmb3JtfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgY29uc3Qga2V5cyA9IGZvcm0uZ2V0RmllbGRWYWx1ZShcImtleXNcIik7XHJcbiAgICAgICAgY29uc3QgbmV4dEtleXMgPSBrZXlzLmNvbmNhdChpZCsrKTtcclxuICAgICAgICBmb3JtLnNldEZpZWxkc1ZhbHVlKHtcclxuICAgICAgICAgICAga2V5czogbmV4dEtleXNcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgaGFuZGxlU3VibWl0KGUpIHtcclxuICAgICAgICBjb25zdCB7Y3VycmVuY3l9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5mb3JtLnZhbGlkYXRlRmllbGRzKChlcnIsIHZhbHVlcykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWVycikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHtsaW5lX2l0ZW1zLCBtZW1vLCBub3RlLCB0b19sYWJlbH0gPSB2YWx1ZXM7XHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgZW1wdHkgbGluZXNcclxuICAgICAgICAgICAgICAgIGxpbmVfaXRlbXMgPSBsaW5lX2l0ZW1zLmZpbHRlcihpdGVtID0+ICEhaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcmludEludm9pY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5LFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVfaXRlbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVtbyxcclxuICAgICAgICAgICAgICAgICAgICBub3RlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiB0aGlzLnN0YXRlLnJlY2lwaWVudF9uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvX2xhYmVsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlQ3VycmVuY3koZSkge1xyXG4gICAgICAgIGNvbnN0IGFzc2V0ID0gQ2hhaW5TdG9yZS5nZXRBc3NldChlKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW5jeTogYXNzZXQuZ2V0KFwic3ltYm9sXCIpfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHtnZXRGaWVsZFZhbHVlLCBnZXRGaWVsZERlY29yYXRvcn0gPSB0aGlzLnByb3BzLmZvcm07XHJcbiAgICAgICAgY29uc3Qge2N1cnJlbmN5LCBkZWZhdWx0QXNzZXRzfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgZ2V0RmllbGREZWNvcmF0b3IoXCJrZXlzXCIsIHtpbml0aWFsVmFsdWU6IFswXX0pO1xyXG4gICAgICAgIGxldCBrZXlzID0gZ2V0RmllbGRWYWx1ZShcImtleXNcIik7XHJcbiAgICAgICAgY29uc3QgZm9ybUl0ZW1zID0gKFxyXG4gICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgICAgICAgICAgICA8Um93IHN0eWxlPXt7bWFyZ2luVG9wOiBcIjAuNXJlbVwiLCBtYXJnaW5Cb3R0b206IFwiMC41cmVtXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICA8Q29sIHNwYW49ezEyfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwic3BhblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiaW52b2ljZS5yZXF1ZXN0Lml0ZW1zXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L0NvbD5cclxuICAgICAgICAgICAgICAgICAgICA8Q29sIHNwYW49ezV9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJzcGFuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJpbnZvaWNlLnJlcXVlc3QucXVhbnRpdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvQ29sPlxyXG4gICAgICAgICAgICAgICAgICAgIDxDb2wgc3Bhbj17NX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cInNwYW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImludm9pY2UucmVxdWVzdC5wcmljZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Db2w+XHJcbiAgICAgICAgICAgICAgICAgICAgPENvbCBzcGFuPXsyfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwic3BhblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiaW52b2ljZS5yZXF1ZXN0LmFjdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Db2w+XHJcbiAgICAgICAgICAgICAgICA8L1Jvdz5cclxuICAgICAgICAgICAgICAgIHtrZXlzLm1hcCgoaywgaW5kZXgpID0+IChcclxuICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIGtleT17a30gc3R5bGU9e3ttYXJnaW5Cb3R0b206IFwiMHB4XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0Lkdyb3VwIGNvbXBhY3Q+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Um93PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDb2wgc3Bhbj17MTJ9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Z2V0RmllbGREZWNvcmF0b3IoYGxpbmVfaXRlbXNbJHtrfV1sYWJlbGApKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Db2w+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENvbCBzcGFuPXs1fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2dldEZpZWxkRGVjb3JhdG9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYGxpbmVfaXRlbXNbJHtrfV1xdWFudGl0eWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSg8SW5wdXQgdHlwZT1cIm51bWJlclwiIC8+KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0NvbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29sIHNwYW49ezV9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Z2V0RmllbGREZWNvcmF0b3IoYGxpbmVfaXRlbXNbJHtrfV1wcmljZWApKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHR5cGU9XCJudW1iZXJcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQ29sPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDb2wgc3Bhbj17Mn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtrID09IGtleXNba2V5cy5sZW5ndGggLSAxXSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbj1cInBsdXMtY2lyY2xlLW9cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMuYWRkKGspfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbj1cIm1pbnVzLWNpcmNsZS1vXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnJlbW92ZShrKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Db2w+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Jvdz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9JbnB1dC5Hcm91cD5cclxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cclxuICAgICAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5oYXNFcnJvcnMoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZXJjaGFudC1wcm90b2NvbC0tcmVxdWVzdFwiPlxyXG4gICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImludm9pY2UtcmVxdWVzdC1pbnB1dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJpbnZvaWNlLnJlcXVlc3QucmVjaXBpZW50X2FjY291bnRcIlxyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lPXt0aGlzLnN0YXRlLnJlY2lwaWVudF9uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmZyb21DaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5vbkZyb21BY2NvdW50Q2hhbmdlZC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMuc3RhdGUucmVjaXBpZW50X25hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZWFoZWFkPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgIHNpemU9ezMyfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxGb3JtIG9uU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpfSByZXF1aXJlZD17dHJ1ZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpbnZvaWNlLXJlcXVlc3QtaW5wdXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImludm9pY2UucmVxdWVzdC5pZGVudGlmaWVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInRvcExlZnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbnZvaWNlLnJlcXVlc3QuaWRlbnRpZmllcl90b29sdGlwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInF1ZXN0aW9uLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZT1cImZpbGxlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0RmllbGREZWNvcmF0b3IoXCJtZW1vXCIpKDxJbnB1dCAvPil9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW52b2ljZS1yZXF1ZXN0LWlucHV0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbnZvaWNlLnJlcXVlc3QucGF5bWVudF9hc3NldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJ0b3BMZWZ0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaW52b2ljZS5yZXF1ZXN0LnBheW1lbnRfYXNzZXRfdG9vbHRpcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJxdWVzdGlvbi1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU9XCJmaWxsZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0U2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Y3VycmVuY3l9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHM9e2RlZmF1bHRBc3NldHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZUN1cnJlbmN5LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW52b2ljZS1yZXF1ZXN0LWlucHV0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbnZvaWNlLnJlcXVlc3QucmVjaXBpZW50X25hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwidG9wTGVmdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImludm9pY2UucmVxdWVzdC5yZWNpcGllbnRfbmFtZV90b29sdGlwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInF1ZXN0aW9uLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZT1cImZpbGxlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0RmllbGREZWNvcmF0b3IoXCJ0b19sYWJlbFwiKSg8SW5wdXQgLz4pfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxyXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW52b2ljZS1yZXF1ZXN0LWlucHV0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImludm9pY2UucmVxdWVzdC5ub3RlXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInRvcExlZnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbnZvaWNlLnJlcXVlc3Qubm90ZV90b29sdGlwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInF1ZXN0aW9uLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZT1cImZpbGxlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0RmllbGREZWNvcmF0b3IoXCJub3RlXCIpKDxJbnB1dC5UZXh0QXJlYSByb3dzPXszfSAvPil9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHtmb3JtSXRlbXN9XHJcbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbFR5cGU9XCJzdWJtaXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Vycm9yfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJpbnZvaWNlLnJlcXVlc3QuY3JlYXRlX2ludm9pY2Vfc3RyaW5nXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XHJcbiAgICAgICAgICAgICAgICA8L0Zvcm0+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5pbnZvaWNlRGF0YSAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7bWFyZ2luVG9wOiBcIjJyZW1cIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmludm9pY2VEYXRhfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmbG9hdDogXCJyaWdodFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29weUJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZURpdj17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dD17dGhpcy5zdGF0ZS5pbnZvaWNlRGF0YX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5JbnZvaWNlUmVxdWVzdCA9IEZvcm0uY3JlYXRlKHtuYW1lOiBcImludm9pY2VfcmVxdWVzdFwifSkoSW52b2ljZVJlcXVlc3QpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgSW52b2ljZVJlcXVlc3Q7XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSAnYnM1OCdcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcclxuaW1wb3J0IEFjY291bnRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL0FjY291bnRBY3Rpb25zXCI7XHJcbmltcG9ydCBBY2NvdW50U2VsZWN0b3IgZnJvbSBcIi4uL0FjY291bnQvQWNjb3VudFNlbGVjdG9yXCI7XHJcbmltcG9ydCBCYWxhbmNlQ29tcG9uZW50IGZyb20gXCIuLi9VdGlsaXR5L0JhbGFuY2VDb21wb25lbnRcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlLCBGZXRjaENoYWluLCBGZXRjaENoYWluT2JqZWN0c30gZnJvbSBcImJpdHNoYXJlc2pzL2VzXCI7XHJcbmltcG9ydCBOb3RpZmljYXRpb25BY3Rpb25zIGZyb20gXCJhY3Rpb25zL05vdGlmaWNhdGlvbkFjdGlvbnNcIjtcclxuaW1wb3J0IFRyYW5zYWN0aW9uQ29uZmlybVN0b3JlIGZyb20gXCJzdG9yZXMvVHJhbnNhY3Rpb25Db25maXJtU3RvcmVcIjtcclxuaW1wb3J0IHtkZWNvbXByZXNzLCBjb21wcmVzc30gZnJvbSBcImx6bWFcIjtcclxuaW1wb3J0IGJzNTggZnJvbSBcImNvbW1vbi9iYXNlNThcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IFByaW50UmVjZWlwdEJ1dHRvbiBmcm9tIFwiLi9QcmludFJlY2VpcHRCdXR0b24uanN4XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IHtcclxuICAgIEJ1dHRvbixcclxuICAgIFJvdyxcclxuICAgIENvbCxcclxuICAgIEljb24sXHJcbiAgICBUb29sdGlwLFxyXG4gICAgU3dpdGNoXHJcbn0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5pbXBvcnQgc2FuaXRpemUgZnJvbSBcInNhbml0aXplXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IHtoYXNMb2FkZWR9IGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0N1cnJlbnRBY2NvdW50XCI7XHJcbmltcG9ydCBPcGVyYXRpb24gZnJvbSBcIi4uL0Jsb2NrY2hhaW4vT3BlcmF0aW9uXCI7XHJcbmltcG9ydCBRUkNvZGUgZnJvbSBcInFyY29kZS5yZWFjdFwiO1xyXG5pbXBvcnQgU2Nhbk9yRW50ZXJUZXh0IGZyb20gXCIuL1NjYW5PckVudGVyVGV4dFwiO1xyXG5cclxuLy8gaW52b2ljZSBleGFtcGxlOlxyXG4vL3tcclxuLy8gICAgXCJ0b1wiIDogXCJtZXJjaGFudF9hY2NvdW50X25hbWVcIixcclxuLy8gICAgXCJ0b19sYWJlbFwiIDogXCJNZXJjaGFudCBOYW1lXCIsXHJcbi8vICAgIFwiY3VycmVuY3lcIjogXCJURVNUXCIsXHJcbi8vICAgIFwibWVtb1wiIDogXCJJbnZvaWNlICMxMjM0XCIsXHJcbi8vICAgIFwibGluZV9pdGVtc1wiIDogW1xyXG4vLyAgICAgICAgeyBcImxhYmVsXCIgOiBcIlNvbWV0aGluZyB0byBCdXlcIiwgXCJxdWFudGl0eVwiOiAxLCBcInByaWNlXCIgOiBcIjEwMDAuMDBcIiB9LFxyXG4vLyAgICAgICAgeyBcImxhYmVsXCIgOiBcIjEwIHRoaW5ncyB0byBCdXlcIiwgXCJxdWFudGl0eVwiOiAxMCwgXCJwcmljZVwiIDogXCIxMDAwLjAwXCIgfVxyXG4vLyAgICBdLFxyXG4vLyAgICBcIm5vdGVcIiA6IFwiU29tZXRoaW5nIHRoZSBtZXJjaGFudCB3YW50cyB0byBzYXkgdG8gdGhlIHVzZXJcIixcclxuLy8gICAgXCJjYWxsYmFja1wiIDogXCJodHRwczovL21lcmNoYW50Lm9yZy9jb21wbGV0ZVwiXHJcbi8vfVxyXG4vLyBodHRwOi8vbG9jYWxob3N0OjgwODAvIy9pbnZvaWNlLzhDdjhaak1hOFhDYXpYMzdYZ05oajRqTmM0WjVXZ1pGTTVqdWVNRXMyZUV2TDNwRW1FTGpBVkNXWkVKaGo5dEVHNVJ1aW5QQ2pZMUZpMzRvemI4Q2czSDVZQmVteTlKb1RSdDg5WDFRYUU3NnhueFdQWnpMY1VqdlVkNFFaUGpDeXFaTnh2cnBDTjJtbTF4VlJZOEZOU1Zzb3hzclp3UkVNeXlnYWhZejhTMjNFcldQUlZzZlpYVHdKTkNDYnFqV0RUUmVMNXl5dFRLenh5S2hnNFlybm50WUczamR5ckJpbURHQlJMVTd5UlM5cFFRTGNBSDRUN2o4TFhrVG9jUzd3MVpqNGFtY2tCbXBnNUVKQ01BVFRSaHRIOFJTeWNmaVhXWkNvbnpxcXp4aXRXQ3haSzg0NllITmhcclxuXHJcbmNsYXNzIEludm9pY2VQYXkgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgaW52b2ljZTogbnVsbCxcclxuICAgICAgICAgICAgcGF5X2Zyb21fbmFtZTogbnVsbCxcclxuICAgICAgICAgICAgcGF5X2Zyb21fYWNjb3VudDogbnVsbCxcclxuICAgICAgICAgICAgcGF5X3RvX2FjY291bnQ6IG51bGwsXHJcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxyXG4gICAgICAgICAgICBibG9ja051bTogbnVsbCxcclxuICAgICAgICAgICAgaW52b2ljZVFyOiBmYWxzZSxcclxuICAgICAgICAgICAgcmF3RGF0YUlucHV0VmFsdWU6IFwiXCIsXHJcbiAgICAgICAgICAgIGlzUmF3RGF0YUlucHV0VmlzaWJsZTogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub25Ccm9hZGNhc3RBbmRDb25maXJtID0gdGhpcy5vbkJyb2FkY2FzdEFuZENvbmZpcm0uYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmdldFRvdGFsID0gdGhpcy5nZXRUb3RhbC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIC8vIHRoaXMuX3ByaW50RXhhbXBsZUludm9pY2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBfcHJpbnRFeGFtcGxlSW52b2ljZSgpIHtcclxuICAgICAgICBsZXQgaW52b2ljZSA9IHtcclxuICAgICAgICAgICAgdG86IFwic3NjaGllc3NsXCIsXHJcbiAgICAgICAgICAgIHRvX2xhYmVsOiBcIlN0ZWZhbiBTLlwiLFxyXG4gICAgICAgICAgICBjdXJyZW5jeTogXCJCVFNcIixcclxuICAgICAgICAgICAgbWVtbzogXCJJbnZvaWNlICMxMjM0XCIsXHJcbiAgICAgICAgICAgIGxpbmVfaXRlbXM6IFtcclxuICAgICAgICAgICAgICAgIHtsYWJlbDogXCJTb21ldGhpbmcgdG8gQnV5XCIsIHF1YW50aXR5OiAxLCBwcmljZTogXCIwLjFcIn0sXHJcbiAgICAgICAgICAgICAgICB7bGFiZWw6IFwiMTAgdGhpbmdzIHRvIEJ1eVwiLCBxdWFudGl0eTogMTAsIHByaWNlOiBcIjAuMDJcIn1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgbm90ZTogXCJTb21ldGhpbmcgdGhlIG1lcmNoYW50IHdhbnRzIHRvIHNheSB0byB0aGUgdXNlclwiXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb21wcmVzcyhKU09OLnN0cmluZ2lmeShpbnZvaWNlKSwgOSwgKHJlc3VsdCwgZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgbGV0IGEgPSBiczU4O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhiczU4LmVuY29kZShCdWZmZXIuZnJvbShyZXN1bHQpKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgbGV0IGNvbXByZXNzZWRfZGF0YSA9IGJzNTguZGVjb2RlKHRoaXMucHJvcHMubWF0Y2gucGFyYW1zLmRhdGEpO1xyXG4gICAgICAgIFRyYW5zYWN0aW9uQ29uZmlybVN0b3JlLnVubGlzdGVuKHRoaXMub25Ccm9hZGNhc3RBbmRDb25maXJtKTtcclxuICAgICAgICBUcmFuc2FjdGlvbkNvbmZpcm1TdG9yZS5saXN0ZW4odGhpcy5vbkJyb2FkY2FzdEFuZENvbmZpcm0pO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmRlY29tcHJlc3NSYXdEYXRhKGNvbXByZXNzZWRfZGF0YSk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGFyc2VJbnZvaWNlRGF0YShkYXRhKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzUmF3RGF0YUlucHV0VmlzaWJsZTogdHJ1ZX0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcywgbmV4dENvbnRleHQpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5wYXlfZnJvbV9uYW1lID09IG51bGwgJiYgdGhpcy5wcm9wcy5jdXJyZW50QWNjb3VudCkge1xyXG4gICAgICAgICAgICAvLyBjaGVjayBpZiBjdXJyZW50IGFjY291bnQgaGFzIGFscmVhZHkgcGFpZFxyXG4gICAgICAgICAgICBsZXQgcGF5bWVudE9wZXJhdGlvbiA9IHRoaXMuX2ZpbmRQYXltZW50KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHBheV9mcm9tX25hbWU6IHRoaXMucHJvcHMuY3VycmVudEFjY291bnQuZ2V0KFwibmFtZVwiKSxcclxuICAgICAgICAgICAgICAgIHBheW1lbnRPcGVyYXRpb25cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRlY29tcHJlc3NSYXdEYXRhID0gZGF0YSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgZGVjb21wcmVzcyhkYXRhLCAocmVzdWx0LCBlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgYXN5bmMgcGFyc2VJbnZvaWNlRGF0YShkYXRhKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZGF0YSA9IHNhbml0aXplKGRhdGEsIHtcclxuICAgICAgICAgICAgICAgIHdoaXRlTGlzdDogW10sIC8vIGVtcHR5LCBtZWFucyBmaWx0ZXIgb3V0IGFsbCB0YWdzXHJcbiAgICAgICAgICAgICAgICBzdHJpcElnbm9yZVRhZzogdHJ1ZSAvLyBmaWx0ZXIgb3V0IGFsbCBIVE1MIG5vdCBpbiB0aGUgd2hpbGVsaXN0XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGludm9pY2UgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy52YWxpZGF0ZUZvcm1hdChpbnZvaWNlKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFzc2V0c0FycmF5ID0gYXdhaXQgRmV0Y2hDaGFpbk9iamVjdHMoQ2hhaW5TdG9yZS5nZXRBc3NldCwgW1xyXG4gICAgICAgICAgICAgICAgICAgIGludm9pY2UuY3VycmVuY3lcclxuICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBheV90b19hY2NvdW50ID0gYXdhaXQgRmV0Y2hDaGFpbihcclxuICAgICAgICAgICAgICAgICAgICBcImdldEFjY291bnRcIixcclxuICAgICAgICAgICAgICAgICAgICBpbnZvaWNlLnRvLFxyXG4gICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtpbnZvaWNlLnRvXTogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludm9pY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0OiBhc3NldHNBcnJheVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5X3RvX2FjY291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheV9mcm9tX25hbWU6IHRoaXMucHJvcHMuY3VycmVudEFjY291bnQuZ2V0KFwibmFtZVwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUmF3RGF0YUlucHV0VmlzaWJsZTogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VG90YWxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogY291bnRlcnBhcnQudHJhbnNsYXRlKFwiaW52b2ljZS5pbnZhbGlkX2Zvcm1hdFwiKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtlcnJvcjogZXJyb3IubWVzc2FnZX0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVSYXdJbnZvaWNlRGF0YUNoYW5nZSA9IGUgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZS50YXJnZXQudmFsdWUucmVwbGFjZSgvXFxzL2csIFwiXCIpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Jhd0RhdGFJbnB1dFZhbHVlOiB2YWx1ZX0sIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXByZXNzZWREYXRhID0gYnM1OC5kZWNvZGUodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVjb21wcmVzc2VkRGF0YSA9IGF3YWl0IHRoaXMuZGVjb21wcmVzc1Jhd0RhdGEoXHJcbiAgICAgICAgICAgICAgICAgICAgY29tcHJlc3NlZERhdGFcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlSW52b2ljZURhdGEoZGVjb21wcmVzc2VkRGF0YSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6IGUubWVzc2FnZX0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGhhbmRsZVFyU2NhblN1Y2Nlc3MgPSBhc3luYyAoe2FkZHJlc3N9KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgY29tcHJlc3NlZERhdGEgPSBiczU4LmRlY29kZShhZGRyZXNzKTtcclxuICAgICAgICAgICAgY29uc3QgZGVjb21wcmVzc2VkRGF0YSA9IGF3YWl0IHRoaXMuZGVjb21wcmVzc1Jhd0RhdGEoXHJcbiAgICAgICAgICAgICAgICBjb21wcmVzc2VkRGF0YVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnBhcnNlSW52b2ljZURhdGEoZGVjb21wcmVzc2VkRGF0YSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6IGUubWVzc2FnZX0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcGFyc2VQcmljZShwcmljZSkge1xyXG4gICAgICAgIGxldCBtID0gcHJpY2UubWF0Y2goLyhbXFxkXFwsXFwuXFxzXSspLyk7XHJcbiAgICAgICAgaWYgKCFtIHx8IG0ubGVuZ3RoIDwgMikgMC4wO1xyXG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KG1bMV0ucmVwbGFjZSgvW1xcLFxcc10vZywgXCJcIikpO1xyXG4gICAgfVxyXG5cclxuICAgIF9maW5kUGF5bWVudCgpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGhhc0xvYWRlZCh0aGlzLnByb3BzLmN1cnJlbnRBY2NvdW50KSAmJlxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnRvdGFsX2Ftb3VudCAmJlxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnBheV90b19hY2NvdW50XHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbmRfdG8gPSB0aGlzLnN0YXRlLnBheV90b19hY2NvdW50LmdldChcImlkXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBmaW5kX2Fzc2V0X2lkID0gdGhpcy5zdGF0ZS5hc3NldC5nZXQoXCJpZFwiKTtcclxuICAgICAgICAgICAgY29uc3QgZmluZF9hbW91bnQgPVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS50b3RhbF9hbW91bnQgKlxyXG4gICAgICAgICAgICAgICAgTWF0aC5wb3coMTAsIHRoaXMuc3RhdGUuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB0cmFuc2FjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuY3VycmVudEFjY291bnRcclxuICAgICAgICAgICAgICAgIC5nZXQoXCJoaXN0b3J5XCIpXHJcbiAgICAgICAgICAgICAgICAudG9KUygpXHJcbiAgICAgICAgICAgICAgICAuZm9yRWFjaChfb3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wID0gX29wLm9wO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyb20gPSBvcFsxXS5mcm9tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0byA9IG9wWzFdLnRvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnQgPSBvcFsxXS5hbW91bnQuYW1vdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhc3NldF9pZCA9IG9wWzFdLmFtb3VudC5hc3NldF9pZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludm9pY2UgPSB0aGlzLnN0YXRlLmludm9pY2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmRfdG8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0byxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmRfYXNzZXRfaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldF9pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmRfYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5kX3RvID09IHRvICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5kX2Fzc2V0X2lkID09IGFzc2V0X2lkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5kX2Ftb3VudCA9PSBhbW91bnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbiA9IF9vcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFRvdGFsKCkge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5zdGF0ZS5pbnZvaWNlLmxpbmVfaXRlbXM7XHJcbiAgICAgICAgaWYgKCFpdGVtcyB8fCBpdGVtcy5sZW5ndGggPT09IDApIHJldHVybiAwLjA7XHJcbiAgICAgICAgbGV0IHRvdGFsX2Ftb3VudCA9IGl0ZW1zLnJlZHVjZSgodG90YWwsIGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgbGV0IHByaWNlID0gdGhpcy5wYXJzZVByaWNlKGl0ZW0ucHJpY2UpO1xyXG4gICAgICAgICAgICBpZiAoIXByaWNlKSByZXR1cm4gdG90YWw7XHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbCArIGl0ZW0ucXVhbnRpdHkgKiBwcmljZTtcclxuICAgICAgICB9LCAwLjApO1xyXG5cclxuICAgICAgICAvLyBjaGVjayBpZiBjdXJyZW50IGFjY291bnQgaGFzIGFscmVhZHkgcGFpZFxyXG4gICAgICAgIGxldCBwYXltZW50T3BlcmF0aW9uID0gdGhpcy5fZmluZFBheW1lbnQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHRvdGFsX2Ftb3VudDogcGFyc2VGbG9hdChcclxuICAgICAgICAgICAgICAgIHRvdGFsX2Ftb3VudC50b0ZpeGVkKHRoaXMuc3RhdGUuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpKVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBwYXltZW50T3BlcmF0aW9uXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Ccm9hZGNhc3RBbmRDb25maXJtKGNvbmZpcm1fc3RvcmVfc3RhdGUpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGNvbmZpcm1fc3RvcmVfc3RhdGUuaW5jbHVkZWQgJiZcclxuICAgICAgICAgICAgY29uZmlybV9zdG9yZV9zdGF0ZS5icm9hZGNhc3RlZF90cmFuc2FjdGlvblxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBUcmFuc2FjdGlvbkNvbmZpcm1TdG9yZS51bmxpc3Rlbih0aGlzLm9uQnJvYWRjYXN0QW5kQ29uZmlybSk7XHJcbiAgICAgICAgICAgIFRyYW5zYWN0aW9uQ29uZmlybVN0b3JlLnJlc2V0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2Jsb2NrTnVtOiBjb25maXJtX3N0b3JlX3N0YXRlLnRyeF9ibG9ja19udW19KTtcclxuXHJcbiAgICAgICAgICAgIC8qICBpZiAodGhpcy5zdGF0ZS5pbnZvaWNlLmNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdHJ4ID0gY29uZmlybV9zdG9yZV9zdGF0ZS5icm9hZGNhc3RlZF90cmFuc2FjdGlvbjtcclxuICAgICAgICAgICAgICAgIGxldCB1cmwgPSBgJHt0aGlzLnN0YXRlLmludm9pY2UuY2FsbGJhY2t9P2Jsb2NrPSR7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ4LnJlZl9ibG9ja19udW1cclxuICAgICAgICAgICAgICAgIH0mdHJ4PSR7dHJ4LmlkKCl9YDtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsO1xyXG4gICAgICAgICAgICB9ICAqL1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblBheUNsaWNrKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgbGV0IHthc3NldCwgdG90YWxfYW1vdW50fSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpKTtcclxuICAgICAgICBsZXQgdG9fYWNjb3VudCA9IENoYWluU3RvcmUuZ2V0QWNjb3VudCh0aGlzLnN0YXRlLmludm9pY2UudG8pO1xyXG4gICAgICAgIGlmICghdG9fYWNjb3VudCkge1xyXG4gICAgICAgICAgICBOb3RpZmljYXRpb25BY3Rpb25zLmVycm9yKFxyXG4gICAgICAgICAgICAgICAgYEFjY291bnQgJHt0aGlzLnN0YXRlLmludm9pY2UudG99IG5vdCBmb3VuZGBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBBY2NvdW50QWN0aW9ucy50cmFuc2ZlcihcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5wYXlfZnJvbV9hY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICB0b19hY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICBwYXJzZUludCh0b3RhbF9hbW91bnQgKiBwcmVjaXNpb24sIDEwKSxcclxuICAgICAgICAgICAgYXNzZXQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaW52b2ljZS5tZW1vXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBUcmFuc2FjdGlvbkNvbmZpcm1TdG9yZS51bmxpc3Rlbih0aGlzLm9uQnJvYWRjYXN0QW5kQ29uZmlybSk7XHJcbiAgICAgICAgICAgICAgICBUcmFuc2FjdGlvbkNvbmZpcm1TdG9yZS5saXN0ZW4odGhpcy5vbkJyb2FkY2FzdEFuZENvbmZpcm0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yOiBcIiwgZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZyb21DaGFuZ2VkKHBheV9mcm9tX25hbWUpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtwYXlfZnJvbV9uYW1lLCBwYXlfZnJvbV9hY2NvdW50OiBudWxsfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Gcm9tQWNjb3VudENoYW5nZWQocGF5X2Zyb21fYWNjb3VudCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3BheV9mcm9tX2FjY291bnR9KTtcclxuICAgIH1cclxuXHJcbiAgICBvblRvQWNjb3VudENoYW5nZWQocGF5X3RvX2FjY291bnQpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtwYXlfdG9fYWNjb3VudDogcGF5X3RvX2FjY291bnR9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3Qge2RhdGF9ID0gdGhpcy5wcm9wcy5tYXRjaC5wYXJhbXM7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNSYXdEYXRhSW5wdXRWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxTY2FuT3JFbnRlclRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxDb250ZW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJzcGFuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiaW52b2ljZS5yYXdfaW52b2ljZV9kYXRhXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VibWl0QnRuVGV4dD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbnZvaWNlLnVzZV9pbnZvaWNlX2RhdGFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhRm91bmRUZXh0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImludm9pY2UuaW52b2ljZV9kYXRhX2ZvdW5kXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgKyBcIjpcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uSW5wdXRDaGFuZ2U9e3RoaXMuaGFuZGxlUmF3SW52b2ljZURhdGFDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWU9e3RoaXMuc3RhdGUucmF3RGF0YUlucHV0VmFsdWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVFyU2NhblN1Y2Nlc3M9e3RoaXMuaGFuZGxlUXJTY2FuU3VjY2Vzc31cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJoYXMtZXJyb3IgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZXJyb3J9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9oND5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5lcnJvcilcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cImhhcy1lcnJvciB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5lcnJvcn1cclxuICAgICAgICAgICAgICAgICAgICA8L2g0PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmludm9pY2UpIHJldHVybiBudWxsO1xyXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5hc3NldClcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoYXMtZXJyb3IgdGV4dC1jZW50ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJ0cmFuc2Zlci5lcnJvcnMuYXNzZXRfdW5zdXBwb3J0ZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeT17dGhpcy5zdGF0ZS5pbnZvaWNlLmN1cnJlbmN5fVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IHtpbnZvaWNlLCB0b3RhbF9hbW91bnR9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBjb25zdCBhc3NldCA9IGludm9pY2UuY3VycmVuY3k7XHJcbiAgICAgICAgbGV0IGJhbGFuY2UgPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAoaW52b2ljZS50b19sYWJlbCkge1xyXG4gICAgICAgICAgICBpbnZvaWNlLnRvX25hbWUgPSBpbnZvaWNlLnRvX2xhYmVsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVjZWlwdERhdGEgPSB7XHJcbiAgICAgICAgICAgIC4uLmludm9pY2UsXHJcbiAgICAgICAgICAgIHRvdGFsX2Ftb3VudDogdG90YWxfYW1vdW50ID8gdG90YWxfYW1vdW50LnRvU3RyaW5nKCkgOiAwLFxyXG4gICAgICAgICAgICBhc3NldCxcclxuICAgICAgICAgICAgZnJvbTogdGhpcy5zdGF0ZS5wYXlfZnJvbV9hY2NvdW50LFxyXG4gICAgICAgICAgICBibG9ja051bTogdGhpcy5zdGF0ZS5ibG9ja051bVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnBheV9mcm9tX2FjY291bnQpIHtcclxuICAgICAgICAgICAgbGV0IGJhbGFuY2VzID0gdGhpcy5zdGF0ZS5wYXlfZnJvbV9hY2NvdW50LmdldChcImJhbGFuY2VzXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBiYWxhbmNlVmFsdWUgPSBiYWxhbmNlcy5nZXQodGhpcy5zdGF0ZS5hc3NldC5nZXQoXCJpZFwiKSk7XHJcbiAgICAgICAgICAgIGJhbGFuY2UgPSAoXHJcbiAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbXBvbmVudD1cInNwYW5cIiBjb250ZW50PVwidHJhbnNmZXIuYXZhaWxhYmxlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQm90dG9tOiBcIiNBMDlGOUYgMXB4IGRvdHRlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEJhbGFuY2VDb21wb25lbnQgYmFsYW5jZT17YmFsYW5jZVZhbHVlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGl0ZW1zID0gaW52b2ljZS5saW5lX2l0ZW1zLm1hcCgoaSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgbGV0IHByaWNlID0gdGhpcy5wYXJzZVByaWNlKGkucHJpY2UpO1xyXG4gICAgICAgICAgICBsZXQgYW1vdW50ID0gaS5xdWFudGl0eSAqIHByaWNlO1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPFJvdyBrZXk9e1wiaW52b2ljZV9pdGVtX1wiICsgaW5kZXh9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxDb2wgc3Bhbj17MTB9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIml0ZW0tbmFtZVwiPntpLmxhYmVsfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIml0ZW0tZGVzY3JpcHRpb25cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvQ29sPlxyXG4gICAgICAgICAgICAgICAgICAgIDxDb2wgc3Bhbj17M30+e2kucXVhbnRpdHl9IHg8L0NvbD5cclxuICAgICAgICAgICAgICAgICAgICA8Q29sIHNwYW49ezV9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17aS5wcmljZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0X2Ftb3VudD17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L0NvbD5cclxuICAgICAgICAgICAgICAgICAgICA8Q29sIHNwYW49ezV9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17YW1vdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2Fzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3RfYW1vdW50PXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvQ29sPlxyXG4gICAgICAgICAgICAgICAgPC9Sb3c+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgaW52b2ljZURhdGEgPVxyXG4gICAgICAgICAgICBkYXRhICE9PSBcInBheVwiID8gZGF0YSA6IHRoaXMuc3RhdGUucmF3RGF0YUlucHV0VmFsdWU7XHJcblxyXG4gICAgICAgIGxldCBxcmNvZGUgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmludm9pY2VRcikge1xyXG4gICAgICAgICAgICBxcmNvZGUgPSBpbnZvaWNlRGF0YTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnBheV9mcm9tX25hbWUgJiZcclxuICAgICAgICAgICAgICAgIGludm9pY2UudG8gIT09IHRoaXMuc3RhdGUucGF5X2Zyb21fbmFtZVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHFyY29kZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgYGJpdHNoYXJlczpvcGVyYXRpb24vdHJhbnNmZXI/dG89JHtpbnZvaWNlLnRvfSZmcm9tPSR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucGF5X2Zyb21fbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0mYXNzZXQ9JHthc3NldH0mYW1vdW50PSR7dG90YWxfYW1vdW50fWAgK1xyXG4gICAgICAgICAgICAgICAgICAgIChpbnZvaWNlLm1lbW8gPyBgJm1lbW89JHtpbnZvaWNlLm1lbW99YCA6IFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1lcmNoYW50LXByb3RvY29sLS1wYXlcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmbG9hdDogXCJyaWdodFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPFByaW50UmVjZWlwdEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhPXtyZWNlaXB0RGF0YX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VQcmljZT17dGhpcy5wYXJzZVByaWNlfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29tcG9uZW50PVwiaDNcIiBjb250ZW50PVwiaW52b2ljZS5wYXltZW50X3JlcXVlc3RcIiAvPlxyXG4gICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICA8Um93PlxyXG4gICAgICAgICAgICAgICAgICAgIDxDb2xcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbj17MTB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIzMHJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQ+e2ludm9pY2UubWVtb308L2g0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImludm9pY2UucGFpZF9ieVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZT17dGhpcy5zdGF0ZS5wYXlfZnJvbV9uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuZnJvbUNoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjb3VudENoYW5nZWQ9e3RoaXMub25Gcm9tQWNjb3VudENoYW5nZWQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5zdGF0ZS5wYXlfZnJvbV9uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZWFoZWFkPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT17MzJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImludm9pY2UucGF5X3RvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lPXtpbnZvaWNlLnRvfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY291bnRDaGFuZ2VkPXt0aGlzLm9uVG9BY2NvdW50Q2hhbmdlZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnN0YXRlLnBheV90b19hY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT17MzJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Db2w+XHJcbiAgICAgICAgICAgICAgICAgICAgPENvbCBzcGFuPXs2fSBvZmZzZXQ9ezR9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlubGluZS1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImg0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiaW52b2ljZS5wYXkuYmFyY29kZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJzZWNvbmRhcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjE4MHB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogXCIyMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZvaWNlUXI6ICF0aGlzLnN0YXRlLmludm9pY2VRclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwic3BhblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pbnZvaWNlUXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiaW52b2ljZS5wYXkuaW52b2ljZV9xcl9jb2RlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiaW52b2ljZS5wYXkucGF5bWVudF9xcl9jb2RlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxRUkNvZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9ezE4MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtxcmNvZGUgPyBxcmNvZGUgOiBcIlwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmdDb2xvcj17cXJjb2RlID8gdW5kZWZpbmVkIDogXCIjMDAwMDAwXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Db2w+XHJcbiAgICAgICAgICAgICAgICA8L1Jvdz5cclxuICAgICAgICAgICAgICAgIHtpbnZvaWNlLnRvX25hbWUgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImludm9pY2UucmVxdWVzdC5yZWNpcGllbnRfbmFtZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPntpbnZvaWNlLnRvX25hbWV9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIHtpbnZvaWNlLm5vdGUgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImludm9pY2Uubm90ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPntpbnZvaWNlLm5vdGV9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIDxSb3c+XHJcbiAgICAgICAgICAgICAgICAgICAgPENvbCBzcGFuPXsxMH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29tcG9uZW50PVwic3BhblwiIGNvbnRlbnQ9XCJpbnZvaWNlLml0ZW1zXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L0NvbD5cclxuICAgICAgICAgICAgICAgICAgICA8Q29sIHNwYW49ezN9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbXBvbmVudD1cInNwYW5cIiBjb250ZW50PVwiaW52b2ljZS5hbW91bnRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvQ29sPlxyXG4gICAgICAgICAgICAgICAgICAgIDxDb2wgc3Bhbj17NX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29tcG9uZW50PVwic3BhblwiIGNvbnRlbnQ9XCJpbnZvaWNlLnVuaXRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvQ29sPlxyXG4gICAgICAgICAgICAgICAgICAgIDxDb2wgc3Bhbj17NX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29tcG9uZW50PVwic3BhblwiIGNvbnRlbnQ9XCJpbnZvaWNlLnRvdGFsXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L0NvbD5cclxuICAgICAgICAgICAgICAgIDwvUm93PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXZpZGVyXCIgLz5cclxuICAgICAgICAgICAgICAgIHtpdGVtc31cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGl2aWRlclwiIC8+XHJcbiAgICAgICAgICAgICAgICA8Um93PlxyXG4gICAgICAgICAgICAgICAgICAgIDxDb2wgc3Bhbj17MTh9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbXBvbmVudD1cInNwYW5cIiBjb250ZW50PVwiaW52b2ljZS50b3RhbFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Db2w+XHJcbiAgICAgICAgICAgICAgICAgICAgPENvbCBzcGFuPXs1fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3RvdGFsX2Ftb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0X2Ftb3VudD17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L0NvbD5cclxuICAgICAgICAgICAgICAgIDwvUm93PlxyXG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUucGF5bWVudE9wZXJhdGlvbiA/IChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwiaW52b2ljZS5wYXltZW50X3Byb29mXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaW52b2ljZS50b29sdGlwX3BheW1lbnRfcHJvb2ZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW91c2VFbnRlckRlbGF5PXswLjV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb24gdHlwZT1cInF1ZXN0aW9uLWNpcmNsZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8T3BlcmF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVPcGVyYXRpb25JZD17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXt0aGlzLnN0YXRlLnBheW1lbnRPcGVyYXRpb24uaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbklkPXt0aGlzLnN0YXRlLnBheW1lbnRPcGVyYXRpb24uaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wPXt0aGlzLnN0YXRlLnBheW1lbnRPcGVyYXRpb24ub3B9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdD17dGhpcy5zdGF0ZS5wYXltZW50T3BlcmF0aW9uLnJlc3VsdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5wYXltZW50T3BlcmF0aW9uLmJsb2NrX251bVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQ9e3RoaXMucHJvcHMuY3VycmVudEFjY291bnQuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpblRvcDogXCIzMHB4XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXRoaXMuc3RhdGUucGF5X2Zyb21fYWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vblBheUNsaWNrLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiaW52b2ljZS5wYXlfYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXt0b3RhbF9hbW91bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3RfYW1vdW50PXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtpbnZvaWNlLnRvfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSW52b2ljZVBheTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQge1Rvb2x0aXAsIEJ1dHRvbn0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCBqc1BERiBmcm9tIFwianNwZGZcIjtcclxuaW1wb3J0IFwianNwZGYtYXV0b3RhYmxlXCI7XHJcbmltcG9ydCBCbG9ja2NoYWluU3RvcmUgZnJvbSBcInN0b3Jlcy9CbG9ja2NoYWluU3RvcmVcIjtcclxuaW1wb3J0IEJsb2NrY2hhaW5BY3Rpb25zIGZyb20gXCJhY3Rpb25zL0Jsb2NrY2hhaW5BY3Rpb25zXCI7XHJcblxyXG5jb25zdCBwcmludFJlY2VpcHQgPSAoe2RhdGEsIHBhcnNlUHJpY2V9KSA9PiB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgICAgbGluZV9pdGVtcyxcclxuICAgICAgICB0byxcclxuICAgICAgICBhc3NldCxcclxuICAgICAgICBmcm9tLFxyXG4gICAgICAgIHRvdGFsX2Ftb3VudCxcclxuICAgICAgICBtZW1vLFxyXG4gICAgICAgIGN1cnJlbmN5LFxyXG4gICAgICAgIGJsb2NrTnVtLFxyXG4gICAgICAgIHRvX25hbWUsXHJcbiAgICAgICAgbm90ZVxyXG4gICAgfSA9IGRhdGE7XHJcbiAgICBjb25zdCBtYXJnaW5VcCA9IDI1LFxyXG4gICAgICAgIGxpbmVNYXJnaW4gPSA1LFxyXG4gICAgICAgIG1hcmdpbkxlZnQgPSAxNSxcclxuICAgICAgICB0cmFuc2FjdGlvbkRhdGFyaWdodCA9IDE1MCxcclxuICAgICAgICB3aWR0aCA9IDIxMCxcclxuICAgICAgICByb3dIZWlnaHQgPSAxMCxcclxuICAgICAgICBmb250U2l6ZSA9IDE2LFxyXG4gICAgICAgIHRvdGFsRm9udFNpemUgPSAyMDtcclxuXHJcbiAgICBsZXQgaGVpZ2h0ID0gMDtcclxuICAgIGxldCBib2R5ID0gW107XHJcbiAgICBsZXQgdHJhbnNhY3Rpb25JZCA9IFwiXCI7XHJcbiAgICBsZXQgZnJvbU5hbWUgPSBcIlwiO1xyXG5cclxuICAgIGlmIChmcm9tKSB7XHJcbiAgICAgICAgZnJvbS5nZXQoXCJoaXN0b3J5XCIpLmZvckVhY2gob3AgPT4ge1xyXG4gICAgICAgICAgICBpZiAob3AuZ2V0KFwiYmxvY2tfbnVtXCIpID09PSBibG9ja051bSkge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25JZCA9IG9wLmdldChcImlkXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZnJvbU5hbWUgPSBmcm9tLmdldChcIm5hbWVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0ZSA9IEJsb2NrY2hhaW5TdG9yZS5nZXRTdGF0ZSgpLmJsb2NrSGVhZGVycy5nZXQoYmxvY2tOdW0pO1xyXG5cclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IGRhdGVcclxuICAgICAgICA/IGRhdGUudGltZXN0YW1wLnRvTG9jYWxlRGF0ZVN0cmluZyhcImVuLVVTXCIpLnJlcGxhY2UoL1xcLy9nLCBcIi5cIilcclxuICAgICAgICA6IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZW4tVVNcIikucmVwbGFjZSgvXFwvL2csIFwiLlwiKTtcclxuXHJcbiAgICBjb25zdCBwZGYgPSBuZXcganNQREYoe1xyXG4gICAgICAgIG9yaWVudGF0aW9uOiBcInBvcnRyYWl0XCIsXHJcbiAgICAgICAgY29tcHJlc3NQZGY6IHRydWVcclxuICAgIH0pO1xyXG5cclxuICAgIHBkZi5zZXRGb250U3R5bGUoXCJib2xkXCIpO1xyXG4gICAgcGRmLnNldEZvbnRTaXplKGZvbnRTaXplKTtcclxuICAgIHBkZi50ZXh0KFxyXG4gICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImludm9pY2UucGF5X3RvXCIsIHtsb2NhbGU6IFwiZW5cIn0pLnRvVXBwZXJDYXNlKCksXHJcbiAgICAgICAgbWFyZ2luTGVmdCxcclxuICAgICAgICAoaGVpZ2h0ICs9IG1hcmdpblVwKVxyXG4gICAgKTtcclxuICAgIHBkZi5zZXRGb250U3R5bGUoXCJub3JtYWxcIik7XHJcbiAgICBwZGYudGV4dCh0b19uYW1lLCBtYXJnaW5MZWZ0LCAoaGVpZ2h0ICs9IHJvd0hlaWdodCkpO1xyXG4gICAgcGRmLnRleHQodG8sIG1hcmdpbkxlZnQsIChoZWlnaHQgKz0gcm93SGVpZ2h0KSk7XHJcblxyXG4gICAgcGRmLmF1dG9UYWJsZSh7XHJcbiAgICAgICAgYm9keTogW1xyXG4gICAgICAgICAgICBbXCJcIiwgY291bnRlcnBhcnQudHJhbnNsYXRlKFwiaW52b2ljZS5tZW1vXCIsIHtsb2NhbGU6IFwiZW5cIn0pLCBtZW1vXSxcclxuICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvdW50ZXJwYXJ0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmFuc2xhdGUoXCJpbnZvaWNlLnBhaWRfYnlcIiwge2xvY2FsZTogXCJlblwifSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRvVXBwZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiB7Zm9udFN0eWxlOiBcImJvbGRcIn1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJpbnZvaWNlLmRhdGVcIiwge2xvY2FsZTogXCJlblwifSksXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgZnJvbU5hbWUsXHJcbiAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJpbnZvaWNlLnRyYW5zYWN0aW9uXCIsIHtsb2NhbGU6IFwiZW5cIn0pLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25JZFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogY291bnRlcnBhcnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRyYW5zbGF0ZShcImludm9pY2Uubm90ZVwiLCB7bG9jYWxlOiBcImVuXCJ9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudG9VcHBlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IHtmb250U3R5bGU6IFwiYm9sZFwifVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIFwiXCIsXHJcbiAgICAgICAgICAgICAgICBcIlwiXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIFtub3RlLCBcIlwiLCBcIlwiXVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgYm9keVN0eWxlczoge3ZhbGlnbjogXCJ0b3BcIn0sXHJcbiAgICAgICAgc3R5bGVzOiB7Y2VsbFdpZHRoOiBcIndyYXBcIiwgcm93UGFnZUJyZWFrOiBcImF1dG9cIiwgaGFsaWduOiBcImp1c3RpZnlcIn0sXHJcbiAgICAgICAgY29sdW1uU3R5bGVzOiB7XHJcbiAgICAgICAgICAgIDA6IHtoYWxpZ246IFwibGVmdFwiLCBjZWxsV2lkdGg6IDkwfSxcclxuICAgICAgICAgICAgMToge2ZvbnRTdHlsZTogXCJib2xkXCJ9LFxyXG4gICAgICAgICAgICAyOiB7Y2VsbFdpZHRoOiA0MH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHN0YXJ0WTogKGhlaWdodCArPSByb3dIZWlnaHQpLFxyXG4gICAgICAgIHRoZW1lOiBcInBsYWluXCJcclxuICAgIH0pO1xyXG5cclxuICAgIHBkZi5saW5lKFxyXG4gICAgICAgIGxpbmVNYXJnaW4sXHJcbiAgICAgICAgKGhlaWdodCA9IHBkZi5hdXRvVGFibGUucHJldmlvdXMuZmluYWxZICsgcm93SGVpZ2h0KSxcclxuICAgICAgICB3aWR0aCAtIGxpbmVNYXJnaW4sXHJcbiAgICAgICAgaGVpZ2h0XHJcbiAgICApO1xyXG5cclxuICAgIHBkZi5zZXRGb250U2l6ZSh0b3RhbEZvbnRTaXplKTtcclxuICAgIHBkZi50ZXh0KFxyXG4gICAgICAgIGNvdW50ZXJwYXJ0XHJcbiAgICAgICAgICAgIC50cmFuc2xhdGUoXCJpbnZvaWNlLnJlY2VpcHRfdG90YWxcIiwge2xvY2FsZTogXCJlblwifSlcclxuICAgICAgICAgICAgLnRvVXBwZXJDYXNlKCksXHJcbiAgICAgICAgbWFyZ2luTGVmdCxcclxuICAgICAgICAoaGVpZ2h0ICs9IHJvd0hlaWdodClcclxuICAgICk7XHJcbiAgICBwZGYudGV4dChgJHt0b3RhbF9hbW91bnR9ICR7Y3VycmVuY3l9YCwgdHJhbnNhY3Rpb25EYXRhcmlnaHQsIGhlaWdodCk7XHJcbiAgICBwZGYubGluZShsaW5lTWFyZ2luLCAoaGVpZ2h0ICs9IDUpLCB3aWR0aCAtIGxpbmVNYXJnaW4sIGhlaWdodCk7XHJcblxyXG4gICAgcGRmLnNldEZvbnRTdHlsZShcIm5vcm1hbFwiKTtcclxuICAgIHBkZi5zZXRGb250U2l6ZShmb250U2l6ZSk7XHJcbiAgICBmb3IgKGxldCBpdGVtIG9mIGxpbmVfaXRlbXMpIHtcclxuICAgICAgICBjb25zdCBwcmljZSA9IHBhcnNlUHJpY2UoaXRlbS5wcmljZSk7XHJcbiAgICAgICAgY29uc3QgdW5pdCA9IGAke3ByaWNlfSAke2Fzc2V0fWA7XHJcbiAgICAgICAgY29uc3QgdG90YWwgPSBgJHtpdGVtLnF1YW50aXR5ICogcHJpY2V9ICR7YXNzZXR9YDtcclxuICAgICAgICBib2R5ID0gW1xyXG4gICAgICAgICAgICAuLi5ib2R5LFxyXG4gICAgICAgICAgICB7ZGVzY3JwdGlvbjogaXRlbS5sYWJlbCwgdW5pdCwgYW1vdW50OiBpdGVtLnF1YW50aXR5LCB0b3RhbH1cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG4gICAgcGRmLmF1dG9UYWJsZSh7XHJcbiAgICAgICAgY29sdW1uczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXI6IHtjb250ZW50OiBcIkRFU0NSSVBUSU9OXCIsIHN0eWxlczoge2hhbGlnbjogXCJsZWZ0XCJ9fSxcclxuICAgICAgICAgICAgICAgIGRhdGFLZXk6IFwiZGVzY3JwdGlvblwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtoZWFkZXI6IFwiQU1PVU5UXCIsIGRhdGFLZXk6IFwiYW1vdW50XCJ9LFxyXG4gICAgICAgICAgICB7aGVhZGVyOiBcIlVOSVRcIiwgZGF0YUtleTogXCJ1bml0XCJ9LFxyXG4gICAgICAgICAgICB7aGVhZGVyOiBcIlRPVEFMXCIsIGRhdGFLZXk6IFwidG90YWxcIn1cclxuICAgICAgICBdLFxyXG4gICAgICAgIGJvZHk6IGJvZHksXHJcbiAgICAgICAgc3RhcnRZOiBoZWlnaHQgKyByb3dIZWlnaHQsXHJcbiAgICAgICAgYm9keVN0eWxlczoge3ZhbGlnbjogXCJ0b3BcIn0sXHJcbiAgICAgICAgc3R5bGVzOiB7Y2VsbFdpZHRoOiBcImF1dG9cIiwgcm93UGFnZUJyZWFrOiBcImF1dG9cIiwgaGFsaWduOiBcInJpZ2h0XCJ9LFxyXG4gICAgICAgIGNvbHVtblN0eWxlczoge1xyXG4gICAgICAgICAgICBkZXNjcnB0aW9uOiB7aGFsaWduOiBcImxlZnRcIn1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHRoZW1lOiBcInBsYWluXCJcclxuICAgIH0pO1xyXG4gICAgcGRmLnNhdmUoXCJiaXRzaGFyZXMtcmVjZWlwdC1cIiArIHRvICsgXCIucGRmXCIpO1xyXG59O1xyXG5jb25zdCBQcmludFJlY2VpcHRCdXR0b24gPSAoe2RhdGEsIHBhcnNlUHJpY2V9KSA9PiB7XHJcbiAgICBjb25zdCB0aXAgPSBcInRvb2x0aXAucHJpbnRfcmVjZWlwdFwiLFxyXG4gICAgICAgIGRhdGFQbGFjZSA9IFwibGVmdFwiLFxyXG4gICAgICAgIGJ1dHRvblRleHQgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJpbnZvaWNlLnByaW50X3JlY2VpcHRcIik7XHJcbiAgICBpZiAoZGF0YS5ibG9ja051bSkgQmxvY2tjaGFpbkFjdGlvbnMuZ2V0SGVhZGVyLmRlZmVyKGRhdGEuYmxvY2tOdW0pO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PXtkYXRhUGxhY2V9IHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUodGlwKX0+XHJcbiAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcclxuICAgICAgICAgICAgICAgIGljb249XCJkb3dubG9hZFwiXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBwcmludFJlY2VpcHQoe2RhdGEsIHBhcnNlUHJpY2V9KX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge2J1dHRvblRleHR9XHJcbiAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgIDwvVG9vbHRpcD5cclxuICAgICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQcmludFJlY2VpcHRCdXR0b247XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuXHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuL0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IGRlYm91bmNlUmVuZGVyIGZyb20gXCJyZWFjdC1kZWJvdW5jZS1yZW5kZXJcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4vQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gXCJhbHQtcmVhY3RcIjtcclxuaW1wb3J0IEFjY291bnRTdG9yZSBmcm9tIFwiLi4vLi4vc3RvcmVzL0FjY291bnRTdG9yZVwiO1xyXG5pbXBvcnQgTG9hZGluZ0luZGljYXRvciBmcm9tIFwiLi4vTG9hZGluZ0luZGljYXRvclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGhhc0xvYWRlZCA9IGZ1bmN0aW9uIGhhc0xvYWRlZChjdXJyZW50QWNjb3VudCkge1xyXG4gICAgcmV0dXJuICEhY3VycmVudEFjY291bnQgJiYgISFjdXJyZW50QWNjb3VudC5nZXQoXCJpZFwiKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBiaW5kVG9DdXJyZW50QWNjb3VudCA9IGZ1bmN0aW9uIGJpbmRUb0N1cnJlbnRBY2NvdW50KFxyXG4gICAgV3JhcHBlZENvbXBvbmVudFxyXG4pIHtcclxuICAgIC8vIC4uLmFuZCByZXR1cm5zIGFub3RoZXIgY29tcG9uZW50Li4uXHJcbiAgICBsZXQgQmluZFRvQ3VycmVudEFjY291bnQgPSBjbGFzcyBCaW5kVG9DdXJyZW50QWNjb3VudCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICAgICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICAgICAgY3VycmVudEFjY291bnQ6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICAgICAgLy8gc2V0IHN1YnNjcmlwdGlvblxyXG4gICAgICAgICAgICBhdXRvc3Vic2NyaWJlOiB0cnVlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVuZGVyKCkge1xyXG4gICAgICAgICAgICBpZiAoaGFzTG9hZGVkKHRoaXMucHJvcHMuY3VycmVudEFjY291bnQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gPFdyYXBwZWRDb21wb25lbnQgey4uLnRoaXMucHJvcHN9IC8+O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDxMb2FkaW5nSW5kaWNhdG9yIC8+O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBCaW5kVG9DdXJyZW50QWNjb3VudCA9IEJpbmRUb0NoYWluU3RhdGUoQmluZFRvQ3VycmVudEFjY291bnQpO1xyXG5cclxuICAgIEJpbmRUb0N1cnJlbnRBY2NvdW50ID0gZGVib3VuY2VSZW5kZXIoQmluZFRvQ3VycmVudEFjY291bnQsIDEwMCwge1xyXG4gICAgICAgIGxlYWRpbmc6IGZhbHNlXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gY29ubmVjdChcclxuICAgICAgICBCaW5kVG9DdXJyZW50QWNjb3VudCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxpc3RlblRvKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtBY2NvdW50U3RvcmVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXRQcm9wcygpIHtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50QWNjb3VudCA9XHJcbiAgICAgICAgICAgICAgICAgICAgQWNjb3VudFN0b3JlLmdldFN0YXRlKCkuY3VycmVudEFjY291bnQgfHxcclxuICAgICAgICAgICAgICAgICAgICBBY2NvdW50U3RvcmUuZ2V0U3RhdGUoKS5wYXNzd29yZEFjY291bnQgfHxcclxuICAgICAgICAgICAgICAgICAgICBcInBsZWFzZS1sb2dpblwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWNjb3VudDogbmV3IE1hcChbW1wibmFtZVwiLCBjdXJyZW50QWNjb3VudF1dKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICk7XHJcbn07XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5pbXBvcnQge0lucHV0fSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcbmltcG9ydCBRUlNjYW5uZXIgZnJvbSBcIi4uL1FSQWRkcmVzc1NjYW5uZXJcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNjYW5PckVudGVyVGV4dCh7XHJcbiAgICBsYWJlbENvbnRlbnQsXHJcbiAgICBoYW5kbGVRclNjYW5TdWNjZXNzLFxyXG4gICAgb25JbnB1dENoYW5nZSxcclxuICAgIGlucHV0VmFsdWUsXHJcbiAgICBzdWJtaXRCdG5UZXh0LFxyXG4gICAgZGF0YUZvdW5kVGV4dFxyXG59KSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgc3R5bGU9e3ttYXJnaW5Cb3R0b206IFwiMWVtXCJ9fT5cclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImxlZnQtbGFiZWxcIj57bGFiZWxDb250ZW50fTwvbGFiZWw+XHJcblxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmxpbmUtbGFiZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5Cb3R0b206IDB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzPXszfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25JbnB1dENoYW5nZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2lucHV0VmFsdWV9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFFSU2Nhbm5lclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJTY2FuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3VjY2Vzcz17aGFuZGxlUXJTY2FuU3VjY2Vzc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pdEJ0blRleHQ9e3N1Ym1pdEJ0blRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhRm91bmRUZXh0PXtkYXRhRm91bmRUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICk7XHJcbn1cclxuXHJcblNjYW5PckVudGVyVGV4dC5wcm9wVHlwZXMgPSB7XHJcbiAgICBsYWJlbENvbnRlbnQ6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5lbGVtZW50XSksXHJcbiAgICBoYW5kbGVRclNjYW5TdWNjZXNzOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgb25JbnB1dENoYW5nZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgIGlucHV0VmFsdWU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICBzdWJtaXRCdG5UZXh0OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMuZWxlbWVudF0pLFxyXG4gICAgZGF0YUZvdW5kVGV4dDogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLmVsZW1lbnRdKVxyXG59O1xyXG4iLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgTWFya2V0c1N0b3JlIGZyb20gXCJzdG9yZXMvTWFya2V0c1N0b3JlXCI7XG5pbXBvcnQgQWNjb3VudFN0b3JlIGZyb20gXCJzdG9yZXMvQWNjb3VudFN0b3JlXCI7XG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tIFwic3RvcmVzL1NldHRpbmdzU3RvcmVcIjtcbmltcG9ydCBHYXRld2F5U3RvcmUgZnJvbSBcInN0b3Jlcy9HYXRld2F5U3RvcmVcIjtcbmltcG9ydCBJbnRsU3RvcmUgZnJvbSBcInN0b3Jlcy9JbnRsU3RvcmVcIjtcbmltcG9ydCBXYWxsZXRVbmxvY2tTdG9yZSBmcm9tIFwic3RvcmVzL1dhbGxldFVubG9ja1N0b3JlXCI7XG5pbXBvcnQgQWx0Q29udGFpbmVyIGZyb20gXCJhbHQtY29udGFpbmVyXCI7XG5pbXBvcnQgRXhjaGFuZ2UgZnJvbSBcIi4vRXhjaGFuZ2VcIjtcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcbmltcG9ydCB7RW1pdHRlckluc3RhbmNlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcbmltcG9ydCBNYXJrZXRzQWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9NYXJrZXRzQWN0aW9uc1wiO1xuaW1wb3J0IHtEYXRhRmVlZH0gZnJvbSBcImNvbXBvbmVudHMvRXhjaGFuZ2UvdHJhZGluZ1ZpZXdDbGFzc2VzXCI7XG5pbXBvcnQgUGFnZTQwNCBmcm9tIFwiLi4vUGFnZTQwNC9QYWdlNDA0XCI7XG5cbmNsYXNzIEV4Y2hhbmdlQ29udGFpbmVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBzeW1ib2xzID0gdGhpcy5wcm9wcy5tYXRjaC5wYXJhbXMubWFya2V0SUQudG9VcHBlckNhc2UoKS5zcGxpdChcIl9cIik7XG4gICAgICAgIGlmIChzeW1ib2xzWzBdID09PSBzeW1ib2xzWzFdKSB7XG4gICAgICAgICAgICByZXR1cm4gPFBhZ2U0MDQgc3VidGl0bGU9XCJtYXJrZXRfbm90X2ZvdW5kX3N1YnRpdGxlXCIgLz47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxBbHRDb250YWluZXJcbiAgICAgICAgICAgICAgICBzdG9yZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgTWFya2V0c1N0b3JlLFxuICAgICAgICAgICAgICAgICAgICBBY2NvdW50U3RvcmUsXG4gICAgICAgICAgICAgICAgICAgIFNldHRpbmdzU3RvcmUsXG4gICAgICAgICAgICAgICAgICAgIFdhbGxldFVubG9ja1N0b3JlLFxuICAgICAgICAgICAgICAgICAgICBJbnRsU3RvcmVcbiAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgIGluamVjdD17e1xuICAgICAgICAgICAgICAgICAgICBoYXNBbnlQcmljZUFsZXJ0OiAoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3NTdG9yZS5oYXNBbnlQcmljZUFsZXJ0KHN5bWJvbHNbMF0sIHN5bWJvbHNbMV0pLFxuICAgICAgICAgICAgICAgICAgICBwcmljZUFsZXJ0OiAoKSA9PiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkucHJpY2VBbGVydCxcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxlOiAoKSA9PiBJbnRsU3RvcmUuZ2V0U3RhdGUoKS5jdXJyZW50TG9jYWxlLFxuICAgICAgICAgICAgICAgICAgICBsb2NrZWRXYWxsZXRTdGF0ZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdhbGxldFVubG9ja1N0b3JlLmdldFN0YXRlKCkubG9ja2VkO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRMaW1pdE9yZGVyczogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcmtldHNTdG9yZS5nZXRTdGF0ZSgpLm1hcmtldExpbWl0T3JkZXJzO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRDYWxsT3JkZXJzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFya2V0c1N0b3JlLmdldFN0YXRlKCkubWFya2V0Q2FsbE9yZGVycztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaW52ZXJ0ZWRDYWxsczogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcmtldHNTdG9yZS5nZXRTdGF0ZSgpLmludmVydGVkQ2FsbHM7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldFNldHRsZU9yZGVyczogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcmtldHNTdG9yZS5nZXRTdGF0ZSgpLm1hcmtldFNldHRsZU9yZGVycztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0RGF0YTogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcmtldHNTdG9yZS5nZXRTdGF0ZSgpLm1hcmtldERhdGE7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsczogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcmtldHNTdG9yZS5nZXRTdGF0ZSgpLnRvdGFscztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlTWFya2V0SGlzdG9yeTogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcmtldHNTdG9yZS5nZXRTdGF0ZSgpLmFjdGl2ZU1hcmtldEhpc3Rvcnk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGJ1Y2tldFNpemU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXJrZXRzU3RvcmUuZ2V0U3RhdGUoKS5idWNrZXRTaXplO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBidWNrZXRzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFya2V0c1N0b3JlLmdldFN0YXRlKCkuYnVja2V0cztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbG93ZXN0Q2FsbFByaWNlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFya2V0c1N0b3JlLmdldFN0YXRlKCkubG93ZXN0Q2FsbFByaWNlO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmZWVkUHJpY2U6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXJrZXRzU3RvcmUuZ2V0U3RhdGUoKS5mZWVkUHJpY2U7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBY2NvdW50OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQWNjb3VudFN0b3JlLmdldFN0YXRlKCkuY3VycmVudEFjY291bnQ7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG15QWN0aXZlQWNjb3VudHM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBY2NvdW50U3RvcmUuZ2V0U3RhdGUoKS5teUFjdGl2ZUFjY291bnRzO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2aWV3U2V0dGluZ3M6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkudmlld1NldHRpbmdzO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKS5zZXR0aW5ncztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXhjaGFuZ2U6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkuZXhjaGFuZ2U7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHN0YXJyZWRNYXJrZXRzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnN0YXJyZWRNYXJrZXRzO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtYXJrZXREaXJlY3Rpb25zOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLm1hcmtldERpcmVjdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldFN0YXRzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFya2V0c1N0b3JlLmdldFN0YXRlKCkubWFya2V0U3RhdHM7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldFJlYWR5OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFya2V0c1N0b3JlLmdldFN0YXRlKCkubWFya2V0UmVhZHk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGJhY2tlZENvaW5zOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gR2F0ZXdheVN0b3JlLmdldFN0YXRlKCkuYmFja2VkQ29pbnMuZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiT1BFTlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtdXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBicmlkZ2VDb2luczogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdhdGV3YXlTdG9yZS5nZXRTdGF0ZSgpLmJyaWRnZUNvaW5zO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtaW5pRGVwdGhDaGFydDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKS52aWV3U2V0dGluZ3MuZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWluaURlcHRoQ2hhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2aWV3Q2hhdDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKS52aWV3U2V0dGluZ3MuZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidmlld0NoYXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIGRhdGFGZWVkOiAoKSA9PiBuZXcgRGF0YUZlZWQoKSxcblxuICAgICAgICAgICAgICAgICAgICB0cmFja2VkR3JvdXBzQ29uZmlnOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFya2V0c1N0b3JlLmdldFN0YXRlKCkudHJhY2tlZEdyb3Vwc0NvbmZpZztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEdyb3VwT3JkZXJMaW1pdDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcmtldHNTdG9yZS5nZXRTdGF0ZSgpLmN1cnJlbnRHcm91cExpbWl0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8RXhjaGFuZ2VTdWJzY3JpYmVyXG4gICAgICAgICAgICAgICAgICAgIGhpc3Rvcnk9e3RoaXMucHJvcHMuaGlzdG9yeX1cbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb249e3RoaXMucHJvcHMubG9jYXRpb259XG4gICAgICAgICAgICAgICAgICAgIHF1b3RlQXNzZXQ9e3N5bWJvbHNbMF19XG4gICAgICAgICAgICAgICAgICAgIGJhc2VBc3NldD17c3ltYm9sc1sxXX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9BbHRDb250YWluZXI+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5sZXQgZW1pdHRlciA9IEVtaXR0ZXJJbnN0YW5jZSgpO1xubGV0IGNhbGxMaXN0ZW5lcixcbiAgICBsaW1pdExpc3RlbmVyLFxuICAgIG5ld0NhbGxMaXN0ZW5lcixcbiAgICBmZWVkVXBkYXRlTGlzdGVuZXIsXG4gICAgc2V0dGxlT3JkZXJMaXN0ZW5lcjtcblxuY2xhc3MgRXhjaGFuZ2VTdWJzY3JpYmVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBjdXJyZW50QWNjb3VudDogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnQuaXNSZXF1aXJlZCxcbiAgICAgICAgcXVvdGVBc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWQsXG4gICAgICAgIGJhc2VBc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWQsXG4gICAgICAgIGNvcmVBc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY3VycmVudEFjY291bnQ6IFwiMS4yLjNcIixcbiAgICAgICAgY29yZUFzc2V0OiBcIjEuMy4wXCJcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtzdWI6IG51bGx9O1xuXG4gICAgICAgIHRoaXMuX3N1YlRvTWFya2V0ID0gdGhpcy5fc3ViVG9NYXJrZXQuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnF1b3RlQXNzZXQgPT09IG51bGwgfHwgdGhpcy5wcm9wcy5iYXNlQXNzZXQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9wcy5xdW90ZUFzc2V0LnRvSlMgJiYgdGhpcy5wcm9wcy5iYXNlQXNzZXQudG9KUykge1xuICAgICAgICAgICAgdGhpcy5fc3ViVG9NYXJrZXQodGhpcy5wcm9wcyk7XG4gICAgICAgICAgICAvLyB0aGlzLl9hZGRNYXJrZXQodGhpcy5wcm9wcy5xdW90ZUFzc2V0LmdldChcInN5bWJvbFwiKSwgdGhpcy5wcm9wcy5iYXNlQXNzZXQuZ2V0KFwic3ltYm9sXCIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVtaXR0ZXIub24oXG4gICAgICAgICAgICBcImNhbmNlbC1vcmRlclwiLFxuICAgICAgICAgICAgKGxpbWl0TGlzdGVuZXIgPSBNYXJrZXRzQWN0aW9ucy5jYW5jZWxMaW1pdE9yZGVyU3VjY2VzcylcbiAgICAgICAgKTtcbiAgICAgICAgZW1pdHRlci5vbihcbiAgICAgICAgICAgIFwiY2xvc2UtY2FsbFwiLFxuICAgICAgICAgICAgKGNhbGxMaXN0ZW5lciA9IE1hcmtldHNBY3Rpb25zLmNsb3NlQ2FsbE9yZGVyU3VjY2VzcylcbiAgICAgICAgKTtcblxuICAgICAgICBlbWl0dGVyLm9uKFxuICAgICAgICAgICAgXCJjYWxsLW9yZGVyLXVwZGF0ZVwiLFxuICAgICAgICAgICAgKG5ld0NhbGxMaXN0ZW5lciA9IGNhbGxfb3JkZXIgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB7YXNzZXRfaWQ6IGNvQmFzZX0gPSBjYWxsX29yZGVyLmNhbGxfcHJpY2UuYmFzZTtcbiAgICAgICAgICAgICAgICBsZXQge2Fzc2V0X2lkOiBjb1F1b3RlfSA9IGNhbGxfb3JkZXIuY2FsbF9wcmljZS5xdW90ZTtcbiAgICAgICAgICAgICAgICBsZXQgYmFzZUlkID0gdGhpcy5wcm9wcy5iYXNlQXNzZXQuZ2V0KFwiaWRcIiksXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlSWQgPSB0aGlzLnByb3BzLnF1b3RlQXNzZXQuZ2V0KFwiaWRcIik7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAoY29CYXNlID09PSBiYXNlSWQgfHwgY29CYXNlID09PSBxdW90ZUlkKSAmJlxuICAgICAgICAgICAgICAgICAgICAoY29RdW90ZSA9PT0gYmFzZUlkIHx8IGNvUXVvdGUgPT09IHF1b3RlSWQpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIE1hcmtldHNBY3Rpb25zLmNhbGxPcmRlclVwZGF0ZShjYWxsX29yZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBlbWl0dGVyLm9uKFxuICAgICAgICAgICAgXCJiaXRhc3NldC11cGRhdGVcIixcbiAgICAgICAgICAgIChmZWVkVXBkYXRlTGlzdGVuZXIgPSBNYXJrZXRzQWN0aW9ucy5mZWVkVXBkYXRlKVxuICAgICAgICApO1xuICAgICAgICBlbWl0dGVyLm9uKFxuICAgICAgICAgICAgXCJzZXR0bGUtb3JkZXItdXBkYXRlXCIsXG4gICAgICAgICAgICAoc2V0dGxlT3JkZXJMaXN0ZW5lciA9IG9iamVjdCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHtpc01hcmtldEFzc2V0LCBtYXJrZXRBc3NldH0gPSBtYXJrZXRfdXRpbHMuaXNNYXJrZXRBc3NldChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5xdW90ZUFzc2V0LFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJhc2VBc3NldFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGlzTWFya2V0QXNzZXQgJiZcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0QXNzZXQuaWQgPT09IG9iamVjdC5iYWxhbmNlLmFzc2V0X2lkXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIE1hcmtldHNBY3Rpb25zLnNldHRsZU9yZGVyVXBkYXRlKG1hcmtldEFzc2V0LmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICAgIGlmIChuZXh0UHJvcHMucXVvdGVBc3NldCA9PT0gbnVsbCB8fCBuZXh0UHJvcHMuYmFzZUFzc2V0ID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLyogUHJlZGljdGlvbiBtYXJrZXRzIHNob3VsZCBvbmx5IGJlIHNob3duIGluIG9uZSBkaXJlY3Rpb24sIGlmIHRoZSBsaW5rIGdvZXMgdG8gdGhlIHdyb25nIG9uZSB3ZSBmbGlwIGl0ICovXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIG5leHRQcm9wcy5iYXNlQXNzZXQgJiZcbiAgICAgICAgICAgIG5leHRQcm9wcy5iYXNlQXNzZXQuZ2V0SW4oW1wiYml0YXNzZXRcIiwgXCJpc19wcmVkaWN0aW9uX21hcmtldFwiXSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaChcbiAgICAgICAgICAgICAgICBgL21hcmtldC8ke25leHRQcm9wcy5iYXNlQXNzZXQuZ2V0KFxuICAgICAgICAgICAgICAgICAgICBcInN5bWJvbFwiXG4gICAgICAgICAgICAgICAgKX1fJHtuZXh0UHJvcHMucXVvdGVBc3NldC5nZXQoXCJzeW1ib2xcIil9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXh0UHJvcHMucXVvdGVBc3NldCAmJiBuZXh0UHJvcHMuYmFzZUFzc2V0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGUuc3ViKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1YlRvTWFya2V0KG5leHRQcm9wcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBuZXh0UHJvcHMucXVvdGVBc3NldC5nZXQoXCJzeW1ib2xcIikgIT09XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5xdW90ZUFzc2V0LmdldChcInN5bWJvbFwiKSB8fFxuICAgICAgICAgICAgbmV4dFByb3BzLmJhc2VBc3NldC5nZXQoXCJzeW1ib2xcIikgIT09XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5iYXNlQXNzZXQuZ2V0KFwic3ltYm9sXCIpXG4gICAgICAgICkge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRTdWIgPSB0aGlzLnN0YXRlLnN1Yi5zcGxpdChcIl9cIik7XG4gICAgICAgICAgICBNYXJrZXRzQWN0aW9ucy51blN1YnNjcmliZU1hcmtldChjdXJyZW50U3ViWzBdLCBjdXJyZW50U3ViWzFdKS50aGVuKFxuICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3ViVG9NYXJrZXQobmV4dFByb3BzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGxldCB7cXVvdGVBc3NldCwgYmFzZUFzc2V0fSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmIChxdW90ZUFzc2V0ID09PSBudWxsIHx8IGJhc2VBc3NldCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgTWFya2V0c0FjdGlvbnMudW5TdWJzY3JpYmVNYXJrZXQoXG4gICAgICAgICAgICBxdW90ZUFzc2V0LmdldChcImlkXCIpLFxuICAgICAgICAgICAgYmFzZUFzc2V0LmdldChcImlkXCIpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChlbWl0dGVyKSB7XG4gICAgICAgICAgICBlbWl0dGVyLm9mZihcImNhbmNlbC1vcmRlclwiLCBsaW1pdExpc3RlbmVyKTtcbiAgICAgICAgICAgIGVtaXR0ZXIub2ZmKFwiY2xvc2UtY2FsbFwiLCBjYWxsTGlzdGVuZXIpO1xuICAgICAgICAgICAgZW1pdHRlci5vZmYoXCJjYWxsLW9yZGVyLXVwZGF0ZVwiLCBuZXdDYWxsTGlzdGVuZXIpO1xuICAgICAgICAgICAgZW1pdHRlci5vZmYoXCJiaXRhc3NldC11cGRhdGVcIiwgZmVlZFVwZGF0ZUxpc3RlbmVyKTtcbiAgICAgICAgICAgIGVtaXR0ZXIub2ZmKFwic2V0dGxlLW9yZGVyLXVwZGF0ZVwiLCBzZXR0bGVPcmRlckxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zdWJUb01hcmtldChwcm9wcywgbmV3QnVja2V0U2l6ZSwgbmV3R3JvdXBMaW1pdCkge1xuICAgICAgICBsZXQge3F1b3RlQXNzZXQsIGJhc2VBc3NldCwgYnVja2V0U2l6ZSwgY3VycmVudEdyb3VwT3JkZXJMaW1pdH0gPSBwcm9wcztcbiAgICAgICAgaWYgKG5ld0J1Y2tldFNpemUpIHtcbiAgICAgICAgICAgIGJ1Y2tldFNpemUgPSBuZXdCdWNrZXRTaXplO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdHcm91cExpbWl0KSB7XG4gICAgICAgICAgICBjdXJyZW50R3JvdXBPcmRlckxpbWl0ID0gbmV3R3JvdXBMaW1pdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocXVvdGVBc3NldC5nZXQoXCJpZFwiKSAmJiBiYXNlQXNzZXQuZ2V0KFwiaWRcIikpIHtcbiAgICAgICAgICAgIE1hcmtldHNBY3Rpb25zLnN1YnNjcmliZU1hcmtldC5kZWZlcihcbiAgICAgICAgICAgICAgICBiYXNlQXNzZXQsXG4gICAgICAgICAgICAgICAgcXVvdGVBc3NldCxcbiAgICAgICAgICAgICAgICBidWNrZXRTaXplLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRHcm91cE9yZGVyTGltaXRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBzdWI6IGAke3F1b3RlQXNzZXQuZ2V0KFwiaWRcIil9XyR7YmFzZUFzc2V0LmdldChcImlkXCIpfWBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5xdW90ZUFzc2V0ID09PSBudWxsIHx8IHRoaXMucHJvcHMuYmFzZUFzc2V0ID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIDxQYWdlNDA0IHN1YnRpdGxlPVwibWFya2V0X25vdF9mb3VuZF9zdWJ0aXRsZVwiIC8+O1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8RXhjaGFuZ2VcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgICAgICAgICBzdWI9e3RoaXMuc3RhdGUuc3VifVxuICAgICAgICAgICAgICAgIHN1YlRvTWFya2V0PXt0aGlzLl9zdWJUb01hcmtldH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5FeGNoYW5nZVN1YnNjcmliZXIgPSBCaW5kVG9DaGFpblN0YXRlKEV4Y2hhbmdlU3Vic2NyaWJlciwge1xuICAgIHNob3dfbG9hZGVyOiB0cnVlXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgRXhjaGFuZ2VDb250YWluZXI7XG4iLCJpbXBvcnQge0FwaXN9IGZyb20gXCJiaXRzaGFyZXNqcy13c1wiO1xyXG5pbXBvcnQge0NoYWluU3RvcmUsIEZldGNoQ2hhaW59IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQge1xyXG4gICAgVGFicyxcclxuICAgIENvbGxhcHNlLFxyXG4gICAgSWNvbiBhcyBBbnRJY29uLFxyXG4gICAgQnV0dG9uLFxyXG4gICAgVG9vbHRpcFxyXG59IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcclxuaW1wb3J0IGNuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xyXG5pbXBvcnQgdHJhbnNsYXRvciBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IGd1aWRlIGZyb20gXCJpbnRyby5qc1wiO1xyXG5pbXBvcnQge2RlYm91bmNlfSBmcm9tIFwibG9kYXNoLWVzXCI7XHJcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xyXG5pbXBvcnQgUHMgZnJvbSBcInBlcmZlY3Qtc2Nyb2xsYmFyXCI7XHJcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5pbXBvcnQgU2V0dGluZ3NBY3Rpb25zIGZyb20gXCJhY3Rpb25zL1NldHRpbmdzQWN0aW9uc1wiO1xyXG5pbXBvcnQgTWFya2V0c0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvTWFya2V0c0FjdGlvbnNcIjtcclxuaW1wb3J0IGFzc2V0VXRpbHMgZnJvbSBcImNvbW1vbi9hc3NldF91dGlsc1wiO1xyXG5pbXBvcnQgbWFya2V0X3V0aWxzIGZyb20gXCJjb21tb24vbWFya2V0X3V0aWxzXCI7XHJcbmltcG9ydCB7QXNzZXQsIFByaWNlLCBMaW1pdE9yZGVyQ3JlYXRlfSBmcm9tIFwiY29tbW9uL01hcmtldENsYXNzZXNcIjtcclxuaW1wb3J0IHtjaGVja0ZlZVN0YXR1c0FzeW5jfSBmcm9tIFwiY29tbW9uL3RyeEhlbHBlclwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgQnV5U2VsbCBmcm9tIFwiLi9CdXlTZWxsXCI7XHJcbmltcG9ydCBTY2FsZWRPcmRlclRhYiBmcm9tIFwiLi9TY2FsZWRPcmRlclRhYlwiO1xyXG5pbXBvcnQgRXhjaGFuZ2VIZWFkZXIgZnJvbSBcIi4vRXhjaGFuZ2VIZWFkZXJcIjtcclxuaW1wb3J0IHtNYXJrZXRPcmRlcnN9IGZyb20gXCIuL015T3Blbk9yZGVyc1wiO1xyXG5pbXBvcnQge09yZGVyQm9va30gZnJvbSBcIi4vT3JkZXJCb29rXCI7XHJcbmltcG9ydCBNYXJrZXRIaXN0b3J5IGZyb20gXCIuL01hcmtldEhpc3RvcnlcIjtcclxuaW1wb3J0IE15TWFya2V0cyBmcm9tIFwiLi9NeU1hcmtldHNcIjtcclxuaW1wb3J0IE1hcmtldFBpY2tlciBmcm9tIFwiLi9NYXJrZXRQaWNrZXJcIjtcclxuaW1wb3J0IENvbmZpcm1PcmRlck1vZGFsIGZyb20gXCIuL0NvbmZpcm1PcmRlck1vZGFsXCI7XHJcbmltcG9ydCBQZXJzb25hbGl6ZSBmcm9tIFwiLi9QZXJzb25hbGl6ZVwiO1xyXG5pbXBvcnQgVHJhZGluZ1ZpZXdQcmljZUNoYXJ0IGZyb20gXCIuL1RyYWRpbmdWaWV3UHJpY2VDaGFydFwiO1xyXG5pbXBvcnQgRGVwdGhIaWdoQ2hhcnQgZnJvbSBcIi4vRGVwdGhIaWdoQ2hhcnRcIjtcclxuaW1wb3J0IExvYWRpbmdJbmRpY2F0b3IgZnJvbSBcIi4uL0xvYWRpbmdJbmRpY2F0b3JcIjtcclxuaW1wb3J0IEJvcnJvd01vZGFsIGZyb20gXCIuLi9Nb2RhbC9Cb3Jyb3dNb2RhbFwiO1xyXG5pbXBvcnQgQWNjb3VudE5vdGlmaWNhdGlvbnMgZnJvbSBcIi4uL05vdGlmaWVyL05vdGlmaWVyQ29udGFpbmVyXCI7XHJcbmltcG9ydCBUcmFuc2xhdGVXaXRoTGlua3MgZnJvbSBcIi4uL1V0aWxpdHkvVHJhbnNsYXRlV2l0aExpbmtzXCI7XHJcbmltcG9ydCBTaW1wbGVEZXBvc2l0V2l0aGRyYXcgZnJvbSBcIi4uL0Rhc2hib2FyZC9TaW1wbGVEZXBvc2l0V2l0aGRyYXdcIjtcclxuaW1wb3J0IFNpbXBsZURlcG9zaXRCbG9ja3RyYWRlc0JyaWRnZSBmcm9tIFwiLi4vRGFzaGJvYXJkL1NpbXBsZURlcG9zaXRCbG9ja3RyYWRlc0JyaWRnZVwiO1xyXG5pbXBvcnQge05vdGlmaWNhdGlvbn0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5pbXBvcnQgUHJpY2VBbGVydCBmcm9tIFwiLi9QcmljZUFsZXJ0XCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgQ2hhdEJybyBmcm9tIFwiLi4vQ2hhdC9DaGF0QnJvXCI7XHJcblxyXG5jbGFzcyBFeGNoYW5nZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIG1hcmtldENhbGxPcmRlcnM6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcclxuICAgICAgICBhY3RpdmVNYXJrZXRIaXN0b3J5OiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgdmlld1NldHRpbmdzOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBtYXJrZXRDYWxsT3JkZXJzOiBbXSxcclxuICAgICAgICBhY3RpdmVNYXJrZXRIaXN0b3J5OiB7fSxcclxuICAgICAgICB2aWV3U2V0dGluZ3M6IHt9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICAuLi50aGlzLl9pbml0aWFsU3RhdGUocHJvcHMpLFxyXG4gICAgICAgICAgICBleHBpcmF0aW9uVHlwZToge1xyXG4gICAgICAgICAgICAgICAgYmlkOiBwcm9wcy5leGNoYW5nZS5nZXRJbihbXCJsYXN0RXhwaXJhdGlvblwiLCBcImJpZFwiXSkgfHwgXCJZRUFSXCIsXHJcbiAgICAgICAgICAgICAgICBhc2s6IHByb3BzLmV4Y2hhbmdlLmdldEluKFtcImxhc3RFeHBpcmF0aW9uXCIsIFwiYXNrXCJdKSB8fCBcIllFQVJcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBleHBpcmF0aW9uQ3VzdG9tVGltZToge1xyXG4gICAgICAgICAgICAgICAgYmlkOiBcIlNwZWNpZmljXCIsXHJcbiAgICAgICAgICAgICAgICBhc2s6IFwiU3BlY2lmaWNcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmZWVTdGF0dXM6IHt9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5fZ2V0V2luZG93U2l6ZSA9IGRlYm91bmNlKHRoaXMuX2dldFdpbmRvd1NpemUuYmluZCh0aGlzKSwgMTUwKTtcclxuICAgICAgICB0aGlzLl9jaGVja0ZlZVN0YXR1cyA9IHRoaXMuX2NoZWNrRmVlU3RhdHVzLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuX2hhbmRsZUV4cGlyYXRpb25DaGFuZ2UgPSB0aGlzLl9oYW5kbGVFeHBpcmF0aW9uQ2hhbmdlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ3VzdG9tRXhwaXJhdGlvbkNoYW5nZSA9IHRoaXMuX2hhbmRsZUN1c3RvbUV4cGlyYXRpb25DaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd1BlcnNvbmFsaXplTW9kYWwgPSB0aGlzLnNob3dQZXJzb25hbGl6ZU1vZGFsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5oaWRlUGVyc29uYWxpemVNb2RhbCA9IHRoaXMuaGlkZVBlcnNvbmFsaXplTW9kYWwuYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaG93Q29uZmlybVNlbGxPcmRlck1vZGFsID0gdGhpcy5zaG93Q29uZmlybVNlbGxPcmRlck1vZGFsLmJpbmQoXHJcbiAgICAgICAgICAgIHRoaXNcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuaGlkZUNvbmZpcm1TZWxsT3JkZXJNb2RhbCA9IHRoaXMuaGlkZUNvbmZpcm1TZWxsT3JkZXJNb2RhbC5iaW5kKFxyXG4gICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaG93Q29uZmlybUJ1eU9yZGVyTW9kYWwgPSB0aGlzLnNob3dDb25maXJtQnV5T3JkZXJNb2RhbC5iaW5kKFxyXG4gICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmhpZGVDb25maXJtQnV5T3JkZXJNb2RhbCA9IHRoaXMuaGlkZUNvbmZpcm1CdXlPcmRlck1vZGFsLmJpbmQoXHJcbiAgICAgICAgICAgIHRoaXNcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLnNob3dNYXJrZXRQaWNrZXJNb2RhbCA9IHRoaXMuc2hvd01hcmtldFBpY2tlck1vZGFsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5oaWRlTWFya2V0UGlja2VyTW9kYWwgPSB0aGlzLmhpZGVNYXJrZXRQaWNrZXJNb2RhbC5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLnNob3dEZXBvc2l0QnJpZGdlTW9kYWwgPSB0aGlzLnNob3dEZXBvc2l0QnJpZGdlTW9kYWwuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmhpZGVEZXBvc2l0QnJpZGdlTW9kYWwgPSB0aGlzLmhpZGVEZXBvc2l0QnJpZGdlTW9kYWwuYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaG93RGVwb3NpdE1vZGFsID0gdGhpcy5zaG93RGVwb3NpdE1vZGFsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5oaWRlRGVwb3NpdE1vZGFsID0gdGhpcy5oaWRlRGVwb3NpdE1vZGFsLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd0JvcnJvd1F1b3RlTW9kYWwgPSB0aGlzLnNob3dCb3Jyb3dRdW90ZU1vZGFsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5oaWRlQm9ycm93UXVvdGVNb2RhbCA9IHRoaXMuaGlkZUJvcnJvd1F1b3RlTW9kYWwuYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaG93Qm9ycm93QmFzZU1vZGFsID0gdGhpcy5zaG93Qm9ycm93QmFzZU1vZGFsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5oaWRlQm9ycm93QmFzZU1vZGFsID0gdGhpcy5oaWRlQm9ycm93QmFzZU1vZGFsLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd1ByaWNlQWxlcnRNb2RhbCA9IHRoaXMuc2hvd1ByaWNlQWxlcnRNb2RhbC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaGlkZVByaWNlQWxlcnRNb2RhbCA9IHRoaXMuaGlkZVByaWNlQWxlcnRNb2RhbC5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLnNob3dTY2FsZWRPcmRlck1vZGFsID0gdGhpcy5zaG93U2NhbGVkT3JkZXJNb2RhbC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaGlkZVNjYWxlZE9yZGVyTW9kYWwgPSB0aGlzLmhpZGVTY2FsZWRPcmRlck1vZGFsLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZGxlUHJpY2VBbGVydFNhdmUgPSB0aGlzLmhhbmRsZVByaWNlQWxlcnRTYXZlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5fY3JlYXRlU2NhbGVkT3JkZXIgPSB0aGlzLl9jcmVhdGVTY2FsZWRPcmRlci5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLnBzSW5pdCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlT3JkZXJUeXBlVGFiQ2hhbmdlKHR5cGUsIHZhbHVlKSB7XHJcbiAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcclxuICAgICAgICAgICAgW2BvcmRlci1mb3JtLSR7dHlwZX1gXTogdmFsdWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVQcmljZUFsZXJ0U2F2ZShzYXZlZFJ1bGVzID0gW10pIHtcclxuICAgICAgICAvLyBhZGQgaW5mbyBhYm91dCBtYXJrZXQgYXNzZXQgcGFpclxyXG4gICAgICAgIHNhdmVkUnVsZXMgPSBzYXZlZFJ1bGVzLm1hcChydWxlID0+ICh7XHJcbiAgICAgICAgICAgIHR5cGU6IHJ1bGUudHlwZSxcclxuICAgICAgICAgICAgcHJpY2U6IHJ1bGUucHJpY2UsXHJcbiAgICAgICAgICAgIGJhc2VBc3NldFN5bWJvbDogdGhpcy5wcm9wcy5iYXNlQXNzZXQuZ2V0KFwic3ltYm9sXCIpLFxyXG4gICAgICAgICAgICBxdW90ZUFzc2V0U3ltYm9sOiB0aGlzLnByb3BzLnF1b3RlQXNzZXQuZ2V0KFwic3ltYm9sXCIpXHJcbiAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBkcm9wIG9sZCBydWxlcyBmb3IgY3VycmVudCBtYXJrZXQgcGFpclxyXG4gICAgICAgIGxldCBydWxlcyA9IHRoaXMucHJvcHMucHJpY2VBbGVydC5maWx0ZXIocnVsZSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICBydWxlICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJhc2VBc3NldCAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5xdW90ZUFzc2V0ICYmXHJcbiAgICAgICAgICAgICAgICAocnVsZS5nZXQoXCJiYXNlQXNzZXRTeW1ib2xcIikgIT09XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5iYXNlQXNzZXQuZ2V0KFwic3ltYm9sXCIpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgcnVsZS5nZXQoXCJxdW90ZUFzc2V0U3ltYm9sXCIpICE9PVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnF1b3RlQXNzZXQuZ2V0KFwic3ltYm9sXCIpKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBwdXNoaW5nIG5ldyBydWxlc1xyXG4gICAgICAgIHJ1bGVzID0gWy4uLnJ1bGVzLCAuLi5zYXZlZFJ1bGVzXTtcclxuXHJcbiAgICAgICAgLy8gc2F2aW5nIHJ1bGVzXHJcbiAgICAgICAgU2V0dGluZ3NBY3Rpb25zLnNldFByaWNlQWxlcnQocnVsZXMpO1xyXG5cclxuICAgICAgICB0aGlzLmhpZGVQcmljZUFsZXJ0TW9kYWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQcmljZUFsZXJ0UnVsZXMoKSB7XHJcbiAgICAgICAgLy9nZXR0aW5nIHJ1bGVzIGJhc2VkIG9uIG1hcmtldCBwYWlyc1xyXG5cclxuICAgICAgICBsZXQgcnVsZXMgPSB0aGlzLnByb3BzLnByaWNlQWxlcnQuZmlsdGVyKHJ1bGUgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgcnVsZSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5iYXNlQXNzZXQgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucXVvdGVBc3NldCAmJlxyXG4gICAgICAgICAgICAgICAgcnVsZS5nZXQoXCJiYXNlQXNzZXRTeW1ib2xcIikgPT09XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5iYXNlQXNzZXQuZ2V0KFwic3ltYm9sXCIpICYmXHJcbiAgICAgICAgICAgICAgICBydWxlLmdldChcInF1b3RlQXNzZXRTeW1ib2xcIikgPT09XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5xdW90ZUFzc2V0LmdldChcInN5bWJvbFwiKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcnVsZXMudG9KUygpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFeHBpcmF0aW9uQ2hhbmdlKHR5cGUsIGUpIHtcclxuICAgICAgICBsZXQgZXhwaXJhdGlvblR5cGUgPSB7XHJcbiAgICAgICAgICAgIC4uLnRoaXMuc3RhdGUuZXhwaXJhdGlvblR5cGUsXHJcbiAgICAgICAgICAgIFt0eXBlXTogZS50YXJnZXQudmFsdWVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgIT09IFwiU1BFQ0lGSUNcIikge1xyXG4gICAgICAgICAgICBTZXR0aW5nc0FjdGlvbnMuc2V0RXhjaGFuZ2VMYXN0RXhwaXJhdGlvbih7XHJcbiAgICAgICAgICAgICAgICAuLi4oKHRoaXMucHJvcHMuZXhjaGFuZ2UuaGFzKFwibGFzdEV4cGlyYXRpb25cIikgJiZcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmV4Y2hhbmdlLmdldChcImxhc3RFeHBpcmF0aW9uXCIpLnRvSlMoKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICB7fSksXHJcbiAgICAgICAgICAgICAgICBbdHlwZV06IGUudGFyZ2V0LnZhbHVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGV4cGlyYXRpb25UeXBlOiBleHBpcmF0aW9uVHlwZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVDdXN0b21FeHBpcmF0aW9uQ2hhbmdlKHR5cGUsIHRpbWUpIHtcclxuICAgICAgICBsZXQgZXhwaXJhdGlvbkN1c3RvbVRpbWUgPSB7XHJcbiAgICAgICAgICAgIC4uLnRoaXMuc3RhdGUuZXhwaXJhdGlvbkN1c3RvbVRpbWUsXHJcbiAgICAgICAgICAgIFt0eXBlXTogdGltZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBleHBpcmF0aW9uQ3VzdG9tVGltZTogZXhwaXJhdGlvbkN1c3RvbVRpbWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBFWFBJUkFUSU9OUyA9IHtcclxuICAgICAgICBIT1VSOiB7XHJcbiAgICAgICAgICAgIHRpdGxlOiBcIjEgaG91clwiLFxyXG4gICAgICAgICAgICBnZXQ6ICgpID0+XHJcbiAgICAgICAgICAgICAgICBtb21lbnQoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGQoMSwgXCJob3VyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnZhbHVlT2YoKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCIxMkhPVVJTXCI6IHtcclxuICAgICAgICAgICAgdGl0bGU6IFwiMTIgaG91cnNcIixcclxuICAgICAgICAgICAgZ2V0OiAoKSA9PlxyXG4gICAgICAgICAgICAgICAgbW9tZW50KClcclxuICAgICAgICAgICAgICAgICAgICAuYWRkKDEyLCBcImhvdXJcIilcclxuICAgICAgICAgICAgICAgICAgICAudmFsdWVPZigpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcIjI0SE9VUlNcIjoge1xyXG4gICAgICAgICAgICB0aXRsZTogXCIyNCBob3Vyc1wiLFxyXG4gICAgICAgICAgICBnZXQ6ICgpID0+XHJcbiAgICAgICAgICAgICAgICBtb21lbnQoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGQoMSwgXCJkYXlcIilcclxuICAgICAgICAgICAgICAgICAgICAudmFsdWVPZigpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcIjdEQVlTXCI6IHtcclxuICAgICAgICAgICAgdGl0bGU6IFwiNyBkYXlzXCIsXHJcbiAgICAgICAgICAgIGdldDogKCkgPT5cclxuICAgICAgICAgICAgICAgIG1vbWVudCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZCg3LCBcImRheVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC52YWx1ZU9mKClcclxuICAgICAgICB9LFxyXG4gICAgICAgIE1PTlRIOiB7XHJcbiAgICAgICAgICAgIHRpdGxlOiBcIjMwIGRheXNcIixcclxuICAgICAgICAgICAgZ2V0OiAoKSA9PlxyXG4gICAgICAgICAgICAgICAgbW9tZW50KClcclxuICAgICAgICAgICAgICAgICAgICAuYWRkKDMwLCBcImRheVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC52YWx1ZU9mKClcclxuICAgICAgICB9LFxyXG4gICAgICAgIFlFQVI6IHtcclxuICAgICAgICAgICAgdGl0bGU6IFwiMSB5ZWFyXCIsXHJcbiAgICAgICAgICAgIGdldDogKCkgPT5cclxuICAgICAgICAgICAgICAgIG1vbWVudCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZCgxLCBcInllYXJcIilcclxuICAgICAgICAgICAgICAgICAgICAudmFsdWVPZigpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBTUEVDSUZJQzoge1xyXG4gICAgICAgICAgICB0aXRsZTogXCJTcGVjaWZpY1wiLFxyXG4gICAgICAgICAgICBnZXQ6IHR5cGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuZXhwaXJhdGlvbkN1c3RvbVRpbWVbdHlwZV0udmFsdWVPZigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfaW5pdGlhbE9yZGVyU3RhdGUocHJvcHMpIHtcclxuICAgICAgICBsZXQgYmlkID0ge1xyXG4gICAgICAgICAgICBmb3JTYWxlVGV4dDogXCJcIixcclxuICAgICAgICAgICAgdG9SZWNlaXZlVGV4dDogXCJcIixcclxuICAgICAgICAgICAgcHJpY2VUZXh0OiBcIlwiLFxyXG4gICAgICAgICAgICBmb3Jfc2FsZTogbmV3IEFzc2V0KHtcclxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBwcm9wcy5iYXNlQXNzZXQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICBwcmVjaXNpb246IHByb3BzLmJhc2VBc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHRvX3JlY2VpdmU6IG5ldyBBc3NldCh7XHJcbiAgICAgICAgICAgICAgICBhc3NldF9pZDogcHJvcHMucXVvdGVBc3NldC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogcHJvcHMucXVvdGVBc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIGJpZC5wcmljZSA9IG5ldyBQcmljZSh7YmFzZTogYmlkLmZvcl9zYWxlLCBxdW90ZTogYmlkLnRvX3JlY2VpdmV9KTtcclxuICAgICAgICBsZXQgYXNrID0ge1xyXG4gICAgICAgICAgICBmb3JTYWxlVGV4dDogXCJcIixcclxuICAgICAgICAgICAgdG9SZWNlaXZlVGV4dDogXCJcIixcclxuICAgICAgICAgICAgcHJpY2VUZXh0OiBcIlwiLFxyXG4gICAgICAgICAgICBmb3Jfc2FsZTogbmV3IEFzc2V0KHtcclxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBwcm9wcy5xdW90ZUFzc2V0LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBwcm9wcy5xdW90ZUFzc2V0LmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgdG9fcmVjZWl2ZTogbmV3IEFzc2V0KHtcclxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBwcm9wcy5iYXNlQXNzZXQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICBwcmVjaXNpb246IHByb3BzLmJhc2VBc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIGFzay5wcmljZSA9IG5ldyBQcmljZSh7YmFzZTogYXNrLmZvcl9zYWxlLCBxdW90ZTogYXNrLnRvX3JlY2VpdmV9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHthc2ssIGJpZH07XHJcbiAgICB9XHJcblxyXG4gICAgX2luaXRpYWxTdGF0ZShwcm9wcykge1xyXG4gICAgICAgIGxldCB3cyA9IHByb3BzLnZpZXdTZXR0aW5ncztcclxuICAgICAgICBsZXQge2FzaywgYmlkfSA9IHRoaXMuX2luaXRpYWxPcmRlclN0YXRlKHByb3BzKTtcclxuXHJcbiAgICAgICAgbGV0IGNoYXJ0X2hlaWdodCA9IHdzLmdldChcImNoYXJ0SGVpZ2h0XCIsIDYyMCk7XHJcbiAgICAgICAgaWYgKGNoYXJ0X2hlaWdodCA9PSA2MjAgJiYgd2luZG93LmlubmVyV2lkdGggPCA2NDApIHtcclxuICAgICAgICAgICAgLy8gYXNzdW1lIHVzZXIgaXMgb24gZGVmYXVsdCBzZXR0aW5nLCB1c2Ugc21hbGxlciBmb3IgbW9iaWxlXHJcbiAgICAgICAgICAgIGNoYXJ0X2hlaWdodCA9IDQyNTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlzRGVwb3NpdEJyaWRnZU1vZGVsTG9hZGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNEZXBvc2l0TW9kYWxMb2FkZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc1BlcnNvbmFsaXplTW9kYWxMb2FkZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc01hcmtldFBpY2tlck1vZGFsTG9hZGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNCb3Jyb3dRdW90ZU1vZGFsTG9hZGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNCb3Jyb3dCYXNlTW9kYWxMb2FkZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc0RlcG9zaXRCcmlkZ2VNb2RhbFZpc2libGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc0RlcG9zaXRNb2RhbFZpc2libGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc1BlcnNvbmFsaXplTW9kYWxWaXNpYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNNYXJrZXRQaWNrZXJNb2RhbFZpc2libGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc0JvcnJvd1F1b3RlTW9kYWxWaXNpYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNCb3Jyb3dCYXNlTW9kYWxWaXNpYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgaGlzdG9yeTogW10sXHJcbiAgICAgICAgICAgIGlzQ29uZmlybUJ1eU9yZGVyTW9kYWxWaXNpYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNDb25maXJtQnV5T3JkZXJNb2RhbExvYWRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIGlzQ29uZmlybVNlbGxPcmRlck1vZGFsVmlzaWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGlzUHJpY2VBbGVydE1vZGFsVmlzaWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGlzU2NhbGVkT3JkZXJNb2RhbFZpc2libGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc0NvbmZpcm1TZWxsT3JkZXJNb2RhbExvYWRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIHRhYlZlcnRpY2FsUGFuZWw6IHdzLmdldChcInRhYlZlcnRpY2FsUGFuZWxcIiwgXCJteS1tYXJrZXRcIiksXHJcbiAgICAgICAgICAgIHRhYkJ1eVNlbGw6IHdzLmdldChcInRhYkJ1eVNlbGxcIiwgXCJidXlcIiksXHJcbiAgICAgICAgICAgIGJ1eVNlbGxPcGVuOiB3cy5nZXQoXCJidXlTZWxsT3BlblwiLCB0cnVlKSxcclxuICAgICAgICAgICAgYmlkLFxyXG4gICAgICAgICAgICBhc2ssXHJcbiAgICAgICAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0LFxyXG4gICAgICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsXHJcbiAgICAgICAgICAgIGZhdm9yaXRlOiBmYWxzZSxcclxuICAgICAgICAgICAgYnV5RGlmZjogZmFsc2UsXHJcbiAgICAgICAgICAgIHNlbGxEaWZmOiBmYWxzZSxcclxuICAgICAgICAgICAgYXV0b1Njcm9sbDogd3MuZ2V0KFwiZ2xvYmFsX0F1dG9TY3JvbGxcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGJ1eVNlbGxUb3A6IHdzLmdldChcImJ1eVNlbGxUb3BcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGJ1eUZlZUFzc2V0SWR4OiB3cy5nZXQoXCJidXlGZWVBc3NldElkeFwiLCAwKSxcclxuICAgICAgICAgICAgc2VsbEZlZUFzc2V0SWR4OiB3cy5nZXQoXCJzZWxsRmVlQXNzZXRJZHhcIiwgMCksXHJcbiAgICAgICAgICAgIHZlcnRpY2FsT3JkZXJCb29rOiB3cy5nZXQoXCJ2ZXJ0aWNhbE9yZGVyQm9va1wiLCBmYWxzZSksXHJcbiAgICAgICAgICAgIHZlcnRpY2FsT3JkZXJGb3JtOiB3cy5nZXQoXCJ2ZXJ0aWNhbE9yZGVyRm9ybVwiLCBmYWxzZSksXHJcbiAgICAgICAgICAgIGhpZGVQYW5lbDogd3MuZ2V0KFwiaGlkZVBhbmVsXCIsIGZhbHNlKSxcclxuICAgICAgICAgICAgaGlkZVNjcm9sbGJhcnM6IHdzLmdldChcImhpZGVTY3JvbGxiYXJzXCIsIGZhbHNlKSxcclxuICAgICAgICAgICAgc2luZ2xlQ29sdW1uT3JkZXJGb3JtOiB3cy5nZXQoXCJzaW5nbGVDb2x1bW5PcmRlckZvcm1cIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGZsaXBPcmRlckJvb2s6IHdzLmdldChcImZsaXBPcmRlckJvb2tcIiwgZmFsc2UpLFxyXG4gICAgICAgICAgICBmbGlwQnV5U2VsbDogd3MuZ2V0KFwiZmxpcEJ1eVNlbGxcIiwgZmFsc2UpLFxyXG4gICAgICAgICAgICBvcmRlckJvb2tSZXZlcnNlZDogd3MuZ2V0KFwib3JkZXJCb29rUmV2ZXJzZWRcIiwgZmFsc2UpLFxyXG4gICAgICAgICAgICBjaGFydFR5cGU6IHdzLmdldChcImNoYXJ0VHlwZVwiLCBcInByaWNlX2NoYXJ0XCIpLFxyXG4gICAgICAgICAgICBjaGFydEhlaWdodDogY2hhcnRfaGVpZ2h0LFxyXG4gICAgICAgICAgICBjaGFydFpvb206IHdzLmdldChcImNoYXJ0Wm9vbVwiLCB0cnVlKSxcclxuICAgICAgICAgICAgY2hhcnRUb29sczogd3MuZ2V0KFwiY2hhcnRUb29sc1wiLCB0cnVlKSxcclxuICAgICAgICAgICAgaGlkZUZ1bmN0aW9uQnV0dG9uczogd3MuZ2V0KFwiaGlkZUZ1bmN0aW9uQnV0dG9uc1wiLCB0cnVlKSxcclxuICAgICAgICAgICAgY3VycmVudFBlcmlvZDogd3MuZ2V0KFwiY3VycmVudFBlcmlvZFwiLCAzNjAwICogMjQgKiAzMCAqIDMpLCAvLyAzIG1vbnRoc1xyXG4gICAgICAgICAgICBzaG93TWFya2V0UGlja2VyOiBmYWxzZSxcclxuICAgICAgICAgICAgYWN0aXZlUGFuZWxzOiB3cy5nZXQoXCJhY3RpdmVQYW5lbHNcIiwgW1wibGVmdFwiLCBcInJpZ2h0XCJdKSxcclxuICAgICAgICAgICAgbW9iaWxlS2V5OiBbXCJcIl0sXHJcbiAgICAgICAgICAgIGZvcmNlUmVSZW5kZXI6IDAsXHJcbiAgICAgICAgICAgIHBhbmVsV2lkdGg6IDAsXHJcbiAgICAgICAgICAgIG1pcnJvclBhbmVsczogd3MuZ2V0KFwibWlycm9yUGFuZWxzXCIsIGZhbHNlKSxcclxuICAgICAgICAgICAgcGFuZWxUYWJzOiB3cy5nZXQoXCJwYW5lbFRhYnNcIiwge1xyXG4gICAgICAgICAgICAgICAgbXlfaGlzdG9yeTogMSxcclxuICAgICAgICAgICAgICAgIGhpc3Rvcnk6IDEsXHJcbiAgICAgICAgICAgICAgICBteV9vcmRlcnM6IDIsXHJcbiAgICAgICAgICAgICAgICBvcGVuX3NldHRsZW1lbnQ6IDJcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHBhbmVsVGFic0FjdGl2ZTogd3MuZ2V0KFwicGFuZWxUYWJzQWN0aXZlXCIsIHtcclxuICAgICAgICAgICAgICAgIDE6IFwibXlfaGlzdG9yeVwiLFxyXG4gICAgICAgICAgICAgICAgMjogXCJteV9vcmRlcnNcIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd01hcmtldFBpY2tlck1vZGFsKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc01hcmtldFBpY2tlck1vZGFsVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgaXNNYXJrZXRQaWNrZXJNb2RhbExvYWRlZDogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVNYXJrZXRQaWNrZXJNb2RhbCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXNNYXJrZXRQaWNrZXJNb2RhbFZpc2libGU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd1BlcnNvbmFsaXplTW9kYWwoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzUGVyc29uYWxpemVNb2RhbFZpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgIGlzUGVyc29uYWxpemVNb2RhbExvYWRlZDogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVQZXJzb25hbGl6ZU1vZGFsKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc1BlcnNvbmFsaXplTW9kYWxWaXNpYmxlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dQcmljZUFsZXJ0TW9kYWwoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzUHJpY2VBbGVydE1vZGFsVmlzaWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVQcmljZUFsZXJ0TW9kYWwoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzUHJpY2VBbGVydE1vZGFsVmlzaWJsZTogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93U2NhbGVkT3JkZXJNb2RhbCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXNTY2FsZWRPcmRlck1vZGFsVmlzaWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVTY2FsZWRPcmRlck1vZGFsKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc1NjYWxlZE9yZGVyTW9kYWxWaXNpYmxlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dCb3Jyb3dRdW90ZU1vZGFsKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc0JvcnJvd1F1b3RlTW9kYWxWaXNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBpc0JvcnJvd1F1b3RlTW9kYWxMb2FkZWQ6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlQm9ycm93UXVvdGVNb2RhbCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXNCb3Jyb3dRdW90ZU1vZGFsVmlzaWJsZTogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93Qm9ycm93QmFzZU1vZGFsKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc0JvcnJvd0Jhc2VNb2RhbFZpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgIGlzQm9ycm93QmFzZU1vZGFsTG9hZGVkOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZUJvcnJvd0Jhc2VNb2RhbCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXNCb3Jyb3dCYXNlTW9kYWxWaXNpYmxlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dEZXBvc2l0QnJpZGdlTW9kYWwoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzRGVwb3NpdEJyaWRnZU1vZGFsVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgaXNEZXBvc2l0QnJpZGdlTW9kYWxMb2FkZWQ6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlRGVwb3NpdEJyaWRnZU1vZGFsKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc0RlcG9zaXRCcmlkZ2VNb2RhbFZpc2libGU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0RlcG9zaXRNb2RhbCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXNEZXBvc2l0TW9kYWxWaXNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBpc0RlcG9zaXRNb2RhbExvYWRlZDogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVEZXBvc2l0TW9kYWwoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzRGVwb3NpdE1vZGFsVmlzaWJsZTogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0TGFzdE1hcmtldEtleSgpIHtcclxuICAgICAgICBjb25zdCBjaGFpbklEID0gQXBpcy5pbnN0YW5jZSgpLmNoYWluX2lkO1xyXG4gICAgICAgIHJldHVybiBgbGFzdE1hcmtldCR7Y2hhaW5JRCA/IFwiX1wiICsgY2hhaW5JRC5zdWJzdHIoMCwgOCkgOiBcIlwifWA7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0NvbmZpcm1CdXlPcmRlck1vZGFsKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc0NvbmZpcm1CdXlPcmRlck1vZGFsVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgaXNDb25maXJtQnV5T3JkZXJNb2RhbExvYWRlZDogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVDb25maXJtQnV5T3JkZXJNb2RhbCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXNDb25maXJtQnV5T3JkZXJNb2RhbFZpc2libGU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0NvbmZpcm1TZWxsT3JkZXJNb2RhbCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXNDb25maXJtU2VsbE9yZGVyTW9kYWxWaXNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBpc0NvbmZpcm1TZWxsT3JkZXJNb2RhbExvYWRlZDogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVDb25maXJtU2VsbE9yZGVyTW9kYWwoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzQ29uZmlybVNlbGxPcmRlck1vZGFsVmlzaWJsZTogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5fc2V0RGltZW5zaW9ucywge1xyXG4gICAgICAgICAgICBjYXB0dXJlOiBmYWxzZSxcclxuICAgICAgICAgICAgcGFzc2l2ZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHVwZGF0ZUdhdGV3YXlCYWNrZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tGZWVTdGF0dXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICBNYXJrZXRzQWN0aW9ucy5nZXRUcmFja2VkR3JvdXBzQ29uZmlnKCk7XHJcblxyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZy5kZWZlcih7XHJcbiAgICAgICAgICAgIFt0aGlzLl9nZXRMYXN0TWFya2V0S2V5KCldOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5xdW90ZUFzc2V0LmdldChcInN5bWJvbFwiKSArXHJcbiAgICAgICAgICAgICAgICBcIl9cIiArXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJhc2VBc3NldC5nZXQoXCJzeW1ib2xcIilcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5fZ2V0V2luZG93U2l6ZSwge1xyXG4gICAgICAgICAgICBjYXB0dXJlOiBmYWxzZSxcclxuICAgICAgICAgICAgcGFzc2l2ZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgKiBGb3JjZSByZS1yZW5kZXJpbmcgY29tcG9uZW50IHdoZW4gc3RhdGUgY2hhbmdlcy5cclxuICAgICAqIFRoaXMgaXMgcmVxdWlyZWQgZm9yIGFuIHVwZGF0ZWQgdmFsdWUgb2YgY29tcG9uZW50IHdpZHRoXHJcbiAgICAgKlxyXG4gICAgICogSXQgd2lsbCB0cmlnZ2VyIGEgcmUtcmVuZGVyIHR3aWNlXHJcbiAgICAgKiAtIE9uY2Ugd2hlbiBzdGF0ZSBpcyBjaGFuZ2VkXHJcbiAgICAgKiAtIE9uY2Ugd2hlbiBmb3JjZVJlUmVuZGVyIGlzIHNldCB0byBmYWxzZVxyXG4gICAgICovXHJcbiAgICBfZm9yY2VSZW5kZXIobnAsIG5zKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZm9yY2VSZVJlbmRlcikge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGZvcmNlUmVSZW5kZXI6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3coXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmFjdGl2ZVBhbmVscyxcclxuICAgICAgICAgICAgICAgIG5zLmFjdGl2ZVBhbmVsc1xyXG4gICAgICAgICAgICApIHx8XHJcbiAgICAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudmVydGljYWxPcmRlckJvb2ssXHJcbiAgICAgICAgICAgICAgICBucy52ZXJ0aWNhbE9yZGVyQm9va1xyXG4gICAgICAgICAgICApIHx8XHJcbiAgICAgICAgICAgIG5wLnF1b3RlQXNzZXQgIT09IHRoaXMucHJvcHMucXVvdGVBc3NldCB8fFxyXG4gICAgICAgICAgICBucC5iYXNlQXNzZXQgIT09IHRoaXMucHJvcHMuYmFzZUFzc2V0XHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgZm9yY2VSZVJlbmRlcjogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5wLCBucykge1xyXG4gICAgICAgIGxldCB7ZXhwaXJhdGlvblR5cGV9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgdGhpcy5fZm9yY2VSZW5kZXIobnAsIG5zKTtcclxuXHJcbiAgICAgICAgaWYgKCFucC5tYXJrZXRSZWFkeSAmJiAhdGhpcy5wcm9wcy5tYXJrZXRSZWFkeSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBwcm9wc0NoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICBsZXQgc3RhdGVDaGFuZ2VkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgbnAucXVvdGVBc3NldCAhPT0gdGhpcy5wcm9wcy5xdW90ZUFzc2V0IHx8XHJcbiAgICAgICAgICAgIG5wLmJhc2VBc3NldCAhPT0gdGhpcy5wcm9wcy5iYXNlQXNzZXRcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBleHBpcmF0aW9uVHlwZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGJpZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvblR5cGVbXCJiaWRcIl0gPT0gXCJTUEVDSUZJQ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGV4cGlyYXRpb25UeXBlW1wiYmlkXCJdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiWUVBUlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzazpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvblR5cGVbXCJhc2tcIl0gPT0gXCJTUEVDSUZJQ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGV4cGlyYXRpb25UeXBlW1wiYXNrXCJdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiWUVBUlwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIG5wKSB7XHJcbiAgICAgICAgICAgIGlmIChucC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9wc0NoYW5nZWQgPVxyXG4gICAgICAgICAgICAgICAgICAgIHByb3BzQ2hhbmdlZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhucFtrZXldLCB0aGlzLnByb3BzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BzQ2hhbmdlZCkgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIG5zLnBhbmVsVGFic0FjdGl2ZSkge1xyXG4gICAgICAgICAgICBzdGF0ZUNoYW5nZWQgPSAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3coXHJcbiAgICAgICAgICAgICAgICBucy5wYW5lbFRhYnNBY3RpdmVba2V5XSxcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucGFuZWxUYWJzQWN0aXZlW2tleV1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgcHJvcHNDaGFuZ2VkIHx8XHJcbiAgICAgICAgICAgIHN0YXRlQ2hhbmdlZCB8fFxyXG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobnMsIHRoaXMuc3RhdGUpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tGZWVTdGF0dXMoXHJcbiAgICAgICAgYXNzZXRzID0gW1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmNvcmVBc3NldCxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5iYXNlQXNzZXQsXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMucXVvdGVBc3NldFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgYWNjb3VudCA9IHRoaXMucHJvcHMuY3VycmVudEFjY291bnRcclxuICAgICkge1xyXG4gICAgICAgIGxldCBmZWVTdGF0dXMgPSB7fTtcclxuICAgICAgICBsZXQgcCA9IFtdO1xyXG4gICAgICAgIGFzc2V0cy5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICAgICAgICBwLnB1c2goXHJcbiAgICAgICAgICAgICAgICBjaGVja0ZlZVN0YXR1c0FzeW5jKHtcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50SUQ6IGFjY291bnQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlSUQ6IGEuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJsaW1pdF9vcmRlcl9jcmVhdGVcIlxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBQcm9taXNlLmFsbChwKVxyXG4gICAgICAgICAgICAudGhlbihzdGF0dXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXNzZXRzLmZvckVhY2goKGEsIGlkeCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZlZVN0YXR1c1thLmdldChcImlkXCIpXSA9IHN0YXR1c1tpZHhdO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KHRoaXMuc3RhdGUuZmVlU3RhdHVzLCBmZWVTdGF0dXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlZVN0YXR1c1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJjaGVja0ZlZVN0YXR1c0FzeW5jIGVycm9yXCIsIGVycik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtmZWVTdGF0dXM6IHt9fSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRXaW5kb3dTaXplKCkge1xyXG4gICAgICAgIGxldCB7aW5uZXJIZWlnaHQsIGlubmVyV2lkdGh9ID0gd2luZG93O1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgaW5uZXJIZWlnaHQgIT09IHRoaXMuc3RhdGUuaGVpZ2h0IHx8XHJcbiAgICAgICAgICAgIGlubmVyV2lkdGggIT09IHRoaXMuc3RhdGUud2lkdGhcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGlubmVySGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IGlubmVyV2lkdGhcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxldCBjZW50ZXJDb250YWluZXIgPSB0aGlzLnJlZnMuY2VudGVyO1xyXG4gICAgICAgICAgICBpZiAoY2VudGVyQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICBQcy51cGRhdGUoY2VudGVyQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcclxuICAgICAgICB0aGlzLl9pbml0UHNDb250YWluZXIoKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICF0aGlzLnByb3BzLmV4Y2hhbmdlLmdldChcInR1dG9yaWFsU2hvd25cIikgJiZcclxuICAgICAgICAgICAgcHJldlByb3BzLmNvcmVBc3NldCAmJlxyXG4gICAgICAgICAgICBwcmV2U3RhdGUuZmVlU3RhdHVzXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy50dXRvcmlhbFNob3duKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR1dG9yaWFsU2hvd24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGhlbWUgPSB0aGlzLnByb3BzLnNldHRpbmdzLmdldChcInRoZW1lc1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBndWlkZVxyXG4gICAgICAgICAgICAgICAgICAgIC5pbnRyb0pzKClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0T3B0aW9ucyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBDbGFzczogdGhlbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodENsYXNzOiB0aGVtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0J1bGxldHM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlTmV4dDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZVByZXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRMYWJlbDogdHJhbnNsYXRvci50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndhbGt0aHJvdWdoLm5leHRfbGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2TGFiZWw6IHRyYW5zbGF0b3IudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3YWxrdGhyb3VnaC5wcmV2X2xhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcExhYmVsOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2Fsa3Rocm91Z2guc2tpcF9sYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmVMYWJlbDogdHJhbnNsYXRvci50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndhbGt0aHJvdWdoLmRvbmVfbGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuc3RhcnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBTZXR0aW5nc0FjdGlvbnMuc2V0RXhjaGFuZ2VUdXRvcmlhbFNob3duLmRlZmVyKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9pbml0UHNDb250YWluZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVmcy5jZW50ZXIgJiYgdGhpcy5wc0luaXQpIHtcclxuICAgICAgICAgICAgbGV0IGNlbnRlckNvbnRhaW5lciA9IHRoaXMucmVmcy5jZW50ZXI7XHJcbiAgICAgICAgICAgIGlmIChjZW50ZXJDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIFBzLmluaXRpYWxpemUoY2VudGVyQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucHNJbml0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcclxuICAgICAgICB0aGlzLl9pbml0UHNDb250YWluZXIoKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5xdW90ZUFzc2V0ICE9PSB0aGlzLnByb3BzLnF1b3RlQXNzZXQgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLmJhc2VBc3NldCAhPT0gdGhpcy5wcm9wcy5iYXNlQXNzZXQgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLmN1cnJlbnRBY2NvdW50ICE9PSB0aGlzLnByb3BzLmN1cnJlbnRBY2NvdW50XHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrRmVlU3RhdHVzKFxyXG4gICAgICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHRQcm9wcy5jb3JlQXNzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dFByb3BzLmJhc2VBc3NldCxcclxuICAgICAgICAgICAgICAgICAgICBuZXh0UHJvcHMucXVvdGVBc3NldFxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIG5leHRQcm9wcy5jdXJyZW50QWNjb3VudFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5xdW90ZUFzc2V0LmdldChcInN5bWJvbFwiKSAhPT1cclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucXVvdGVBc3NldC5nZXQoXCJzeW1ib2xcIikgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLmJhc2VBc3NldC5nZXQoXCJzeW1ib2xcIikgIT09XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJhc2VBc3NldC5nZXQoXCJzeW1ib2xcIilcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLl9pbml0aWFsU3RhdGUobmV4dFByb3BzKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcclxuICAgICAgICAgICAgICAgIFt0aGlzLl9nZXRMYXN0TWFya2V0S2V5KCldOlxyXG4gICAgICAgICAgICAgICAgICAgIG5leHRQcm9wcy5xdW90ZUFzc2V0LmdldChcInN5bWJvbFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJfXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHRQcm9wcy5iYXNlQXNzZXQuZ2V0KFwic3ltYm9sXCIpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaWYgKHRoaXMucHJvcHMuc3ViICYmIG5leHRQcm9wcy5idWNrZXRTaXplICE9PSB0aGlzLnByb3BzLmJ1Y2tldFNpemUpIHtcclxuICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMuX2NoYW5nZUJ1Y2tldFNpemUobmV4dFByb3BzLmJ1Y2tldFNpemUpO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLl9nZXRXaW5kb3dTaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0RmVlQXNzZXRzKHF1b3RlLCBiYXNlLCBjb3JlQXNzZXQpIHtcclxuICAgICAgICBsZXQge2N1cnJlbnRBY2NvdW50fSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgY29uc3Qge2ZlZVN0YXR1c30gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRNaXNzaW5nQXNzZXQodGFyZ2V0LCBhc3NldCkge1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmluZGV4T2YoYXNzZXQpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnB1c2goYXNzZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBoYXNGZWVQb29sQmFsYW5jZShpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmVlU3RhdHVzW2lkXSAmJiBmZWVTdGF0dXNbaWRdLmhhc1Bvb2xCYWxhbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaGFzQmFsYW5jZShpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmVlU3RhdHVzW2lkXSAmJiBmZWVTdGF0dXNbaWRdLmhhc0JhbGFuY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2VsbEFzc2V0cyA9IFtjb3JlQXNzZXQsIHF1b3RlID09PSBjb3JlQXNzZXQgPyBiYXNlIDogcXVvdGVdO1xyXG4gICAgICAgIGFkZE1pc3NpbmdBc3NldChzZWxsQXNzZXRzLCBxdW90ZSk7XHJcbiAgICAgICAgYWRkTWlzc2luZ0Fzc2V0KHNlbGxBc3NldHMsIGJhc2UpO1xyXG4gICAgICAgIC8vIGxldCBzZWxsRmVlQXNzZXQ7XHJcblxyXG4gICAgICAgIGxldCBidXlBc3NldHMgPSBbY29yZUFzc2V0LCBiYXNlID09PSBjb3JlQXNzZXQgPyBxdW90ZSA6IGJhc2VdO1xyXG4gICAgICAgIGFkZE1pc3NpbmdBc3NldChidXlBc3NldHMsIHF1b3RlKTtcclxuICAgICAgICBhZGRNaXNzaW5nQXNzZXQoYnV5QXNzZXRzLCBiYXNlKTtcclxuICAgICAgICAvLyBsZXQgYnV5RmVlQXNzZXQ7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlcyA9IHt9O1xyXG5cclxuICAgICAgICBjdXJyZW50QWNjb3VudFxyXG4gICAgICAgICAgICAuZ2V0KFwiYmFsYW5jZXNcIiwgW10pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoKGJhbGFuY2UsIGlkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIjEuMy4wXCIsIHF1b3RlLmdldChcImlkXCIpLCBiYXNlLmdldChcImlkXCIpXS5pbmRleE9mKGlkKSA+PSAwXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZm9yRWFjaCgoYmFsYW5jZSwgaWQpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBiYWxhbmNlT2JqZWN0ID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QoYmFsYW5jZSk7XHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlc1tpZF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogYmFsYW5jZU9iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHBhcnNlSW50KGJhbGFuY2VPYmplY3QuZ2V0KFwiYmFsYW5jZVwiKSwgMTApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogMCxcclxuICAgICAgICAgICAgICAgICAgICBmZWU6IHRoaXMuX2dldEZlZShDaGFpblN0b3JlLmdldEFzc2V0KGlkKSlcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaWx0ZXJBbmREZWZhdWx0KGFzc2V0cywgYmFsYW5jZXMsIGlkeCkge1xyXG4gICAgICAgICAgICBsZXQgYXNzZXQ7XHJcbiAgICAgICAgICAgIC8qIE9ubHkga2VlcCBhc3NldHMgZm9yIHdoaWNoIHRoZSB1c2VyIGhhcyBhIGJhbGFuY2UgbGFyZ2VyIHRoYW4gdGhlIGZlZSwgYW5kIGZvciB3aGljaCB0aGUgZmVlIHBvb2wgaXMgdmFsaWQgKi9cclxuICAgICAgICAgICAgYXNzZXRzID0gYXNzZXRzLmZpbHRlcihhID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghYmFsYW5jZXNbYS5nZXQoXCJpZFwiKV0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc0ZlZVBvb2xCYWxhbmNlKGEuZ2V0KFwiaWRcIikpICYmIGhhc0JhbGFuY2UoYS5nZXQoXCJpZFwiKSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLyogSWYgdGhlIHVzZXIgaGFzIG5vIHZhbGlkIGJhbGFuY2VzLCBkZWZhdWx0IHRvIGNvcmUgZmVlICovXHJcbiAgICAgICAgICAgIGlmICghYXNzZXRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgYXNzZXQgPSBjb3JlQXNzZXQ7XHJcbiAgICAgICAgICAgICAgICBhc3NldHMucHVzaChjb3JlQXNzZXQpO1xyXG4gICAgICAgICAgICAgICAgLyogSWYgdGhlIHVzZXIgaGFzIGJhbGFuY2VzLCB1c2UgdGhlIHN0b3JlZCBpZHggdmFsdWUgdW5sZXNzIHRoYXQgYXNzZXQgaXMgbm8gbG9uZ2VyIGF2YWlsYWJsZSovXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhc3NldCA9IGFzc2V0c1tNYXRoLm1pbihhc3NldHMubGVuZ3RoIC0gMSwgaWR4KV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7YXNzZXRzLCBhc3NldH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQge2Fzc2V0czogc2VsbEZlZUFzc2V0cywgYXNzZXQ6IHNlbGxGZWVBc3NldH0gPSBmaWx0ZXJBbmREZWZhdWx0KFxyXG4gICAgICAgICAgICBzZWxsQXNzZXRzLFxyXG4gICAgICAgICAgICBiYWxhbmNlcyxcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZWxsRmVlQXNzZXRJZHhcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCB7YXNzZXRzOiBidXlGZWVBc3NldHMsIGFzc2V0OiBidXlGZWVBc3NldH0gPSBmaWx0ZXJBbmREZWZhdWx0KFxyXG4gICAgICAgICAgICBidXlBc3NldHMsXHJcbiAgICAgICAgICAgIGJhbGFuY2VzLFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmJ1eUZlZUFzc2V0SWR4XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IHNlbGxGZWUgPSB0aGlzLl9nZXRGZWUoc2VsbEZlZUFzc2V0KTtcclxuICAgICAgICBsZXQgYnV5RmVlID0gdGhpcy5fZ2V0RmVlKGJ1eUZlZUFzc2V0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2VsbEZlZUFzc2V0LFxyXG4gICAgICAgICAgICBzZWxsRmVlQXNzZXRzLFxyXG4gICAgICAgICAgICBzZWxsRmVlLFxyXG4gICAgICAgICAgICBidXlGZWVBc3NldCxcclxuICAgICAgICAgICAgYnV5RmVlQXNzZXRzLFxyXG4gICAgICAgICAgICBidXlGZWVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRGZWUoYXNzZXQgPSB0aGlzLnByb3BzLmNvcmVBc3NldCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZmVlU3RhdHVzW2Fzc2V0LmdldChcImlkXCIpXSAmJlxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmZlZVN0YXR1c1thc3NldC5nZXQoXCJpZFwiKV0uZmVlXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfdmVyaWZ5RmVlKGZlZSwgc2VsbCwgc2VsbEJhbGFuY2UsIGNvcmVCYWxhbmNlKSB7XHJcbiAgICAgICAgbGV0IGNvcmVGZWUgPSB0aGlzLl9nZXRGZWUoKTtcclxuXHJcbiAgICAgICAgaWYgKGZlZS5hc3NldF9pZCA9PT0gXCIxLjMuMFwiKSB7XHJcbiAgICAgICAgICAgIGlmIChjb3JlRmVlLmdldEFtb3VudCgpIDw9IGNvcmVCYWxhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCIxLjMuMFwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgc2VsbFN1bSA9XHJcbiAgICAgICAgICAgICAgICBzZWxsLmFzc2V0X2lkID09PSBmZWUuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICA/IGZlZS5nZXRBbW91bnQoKSArIHNlbGwuZ2V0QW1vdW50KClcclxuICAgICAgICAgICAgICAgICAgICA6IHNlbGwuZ2V0QW1vdW50KCk7XHJcbiAgICAgICAgICAgIGlmIChzZWxsU3VtIDw9IHNlbGxCYWxhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTdWZmaWNpZW50IGJhbGFuY2UgaW4gYXNzZXQgdG8gcGF5IGZlZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZlZS5hc3NldF9pZDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgICAgIGNvcmVGZWUuZ2V0QW1vdW50KCkgPD0gY29yZUJhbGFuY2UgJiZcclxuICAgICAgICAgICAgICAgIGZlZS5hc3NldF9pZCAhPT0gXCIxLjMuMFwiXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgLy8gU3VmZmljaWVudCBiYWxhbmNlIGluIGNvcmUgYXNzZXQgdG8gcGF5IGZlZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiMS4zLjBcIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBVbmFibGUgdG8gcGF5IGZlZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVMaW1pdE9yZGVyQ29uZmlybShcclxuICAgICAgICBidXlBc3NldCxcclxuICAgICAgICBzZWxsQXNzZXQsXHJcbiAgICAgICAgc2VsbEJhbGFuY2UsXHJcbiAgICAgICAgY29yZUJhbGFuY2UsXHJcbiAgICAgICAgZmVlQXNzZXQsXHJcbiAgICAgICAgdHlwZSxcclxuICAgICAgICBzaG9ydCA9IHRydWUsXHJcbiAgICAgICAgZVxyXG4gICAgKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGxldCB7aGlnaGVzdEJpZCwgbG93ZXN0QXNrfSA9IHRoaXMucHJvcHMubWFya2V0RGF0YTtcclxuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMuc3RhdGVbdHlwZSA9PT0gXCJzZWxsXCIgPyBcImFza1wiIDogXCJiaWRcIl07XHJcblxyXG4gICAgICAgIHNlbGxCYWxhbmNlID0gY3VycmVudC5mb3Jfc2FsZS5jbG9uZShcclxuICAgICAgICAgICAgc2VsbEJhbGFuY2VcclxuICAgICAgICAgICAgICAgID8gcGFyc2VJbnQoQ2hhaW5TdG9yZS5nZXRPYmplY3Qoc2VsbEJhbGFuY2UpLnRvSlMoKS5iYWxhbmNlLCAxMClcclxuICAgICAgICAgICAgICAgIDogMFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29yZUJhbGFuY2UgPSBuZXcgQXNzZXQoe1xyXG4gICAgICAgICAgICBhbW91bnQ6IGNvcmVCYWxhbmNlXHJcbiAgICAgICAgICAgICAgICA/IHBhcnNlSW50KENoYWluU3RvcmUuZ2V0T2JqZWN0KGNvcmVCYWxhbmNlKS50b0pTKCkuYmFsYW5jZSwgMTApXHJcbiAgICAgICAgICAgICAgICA6IDBcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGZlZSA9IHRoaXMuX2dldEZlZShmZWVBc3NldCk7XHJcbiAgICAgICAgbGV0IGZlZUlEID0gdGhpcy5fdmVyaWZ5RmVlKFxyXG4gICAgICAgICAgICBmZWUsXHJcbiAgICAgICAgICAgIGN1cnJlbnQuZm9yX3NhbGUsXHJcbiAgICAgICAgICAgIHNlbGxCYWxhbmNlLmdldEFtb3VudCgpLFxyXG4gICAgICAgICAgICBjb3JlQmFsYW5jZS5nZXRBbW91bnQoKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKCFmZWVJRCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTm90aWZpY2F0aW9uLmVycm9yKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICBcIm5vdGlmaWNhdGlvbnMuZXhjaGFuZ2VfaW5zdWZmaWNpZW50X2Z1bmRzX2Zvcl9mZWVzXCJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZSA9PT0gXCJidXlcIiAmJiBsb3dlc3RBc2spIHtcclxuICAgICAgICAgICAgbGV0IGRpZmYgPSB0aGlzLnN0YXRlLmJpZC5wcmljZS50b1JlYWwoKSAvIGxvd2VzdEFzay5nZXRQcmljZSgpO1xyXG4gICAgICAgICAgICBpZiAoZGlmZiA+IDEuMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Q29uZmlybUJ1eU9yZGVyTW9kYWwoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBidXlEaWZmOiBkaWZmXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJzZWxsXCIgJiYgaGlnaGVzdEJpZCkge1xyXG4gICAgICAgICAgICBsZXQgZGlmZiA9XHJcbiAgICAgICAgICAgICAgICAxIC8gKHRoaXMuc3RhdGUuYXNrLnByaWNlLnRvUmVhbCgpIC8gaGlnaGVzdEJpZC5nZXRQcmljZSgpKTtcclxuICAgICAgICAgICAgaWYgKGRpZmYgPiAxLjIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NvbmZpcm1TZWxsT3JkZXJNb2RhbCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxEaWZmOiBkaWZmXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGlzUHJlZGljdGlvbk1hcmtldCA9IHNlbGxBc3NldC5nZXRJbihbXHJcbiAgICAgICAgICAgIFwiYml0YXNzZXRcIixcclxuICAgICAgICAgICAgXCJpc19wcmVkaWN0aW9uX21hcmtldFwiXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50LmZvcl9zYWxlLmd0KHNlbGxCYWxhbmNlKSAmJiAhaXNQcmVkaWN0aW9uTWFya2V0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RpZmljYXRpb24uZXJyb3Ioe1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgIFwibm90aWZpY2F0aW9ucy5leGNoYW5nZV9pbnN1ZmZpY2llbnRfZnVuZHNfdG9fcGxhY2Vfb3JkZXJcIixcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogY3VycmVudC5mb3Jfc2FsZS5nZXRBbW91bnQoe3JlYWw6IHRydWV9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiBzZWxsQXNzZXQuZ2V0KFwic3ltYm9sXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICEoXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50LmZvcl9zYWxlLmdldEFtb3VudCgpID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgY3VycmVudC50b19yZWNlaXZlLmdldEFtb3VudCgpID4gMFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RpZmljYXRpb24ud2FybmluZyh7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJub3RpZmljYXRpb25zLmV4Y2hhbmdlX2VudGVyX3ZhbGlkX3ZhbHVlc1wiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL1xyXG4gICAgICAgIGlmICh0eXBlID09PSBcInNlbGxcIiAmJiBpc1ByZWRpY3Rpb25NYXJrZXQgJiYgc2hvcnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZVByZWRpY3Rpb25TaG9ydChmZWVJRCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jcmVhdGVMaW1pdE9yZGVyKHR5cGUsIGZlZUlEKTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlU2NhbGVkT3JkZXIob3JkZXJzLCBmZWVJRCkge1xyXG4gICAgICAgIGNvbnN0IGxpbWl0T3JkZXJzID0gb3JkZXJzLm1hcChcclxuICAgICAgICAgICAgb3JkZXIgPT5cclxuICAgICAgICAgICAgICAgIG5ldyBMaW1pdE9yZGVyQ3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBmb3Jfc2FsZTogb3JkZXIuZm9yX3NhbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbjogbmV3IERhdGUob3JkZXIuZXhwaXJhdGlvblRpbWUgfHwgZmFsc2UpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvX3JlY2VpdmU6IG9yZGVyLnRvX3JlY2VpdmUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbGVyOiB0aGlzLnByb3BzLmN1cnJlbnRBY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldF9pZDogZmVlSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogMFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIE1hcmtldHNBY3Rpb25zLmNyZWF0ZUxpbWl0T3JkZXIyKGxpbWl0T3JkZXJzKVxyXG4gICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZXJyb3IubWVzc2FnZSAhPT0gXCJ3YWxsZXQgbG9ja2VkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJub3RpZmljYXRpb25zLmV4Y2hhbmdlX3Vua25vd25fZXJyb3JfcGxhY2Vfc2NhbGVkX29yZGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm9yZGVyIHN1Y2Nlc3NcIik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib3JkZXIgZmFpbGVkOlwiLCBlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUxpbWl0T3JkZXIodHlwZSwgZmVlSUQpIHtcclxuICAgICAgICBsZXQgYWN0aW9uVHlwZSA9IHR5cGUgPT09IFwic2VsbFwiID8gXCJhc2tcIiA6IFwiYmlkXCI7XHJcblxyXG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5zdGF0ZVthY3Rpb25UeXBlXTtcclxuXHJcbiAgICAgICAgbGV0IGV4cGlyYXRpb25UaW1lID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5leHBpcmF0aW9uVHlwZVthY3Rpb25UeXBlXSA9PT0gXCJTUEVDSUZJQ1wiKSB7XHJcbiAgICAgICAgICAgIGV4cGlyYXRpb25UaW1lID0gdGhpcy5FWFBJUkFUSU9OU1tcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXhwaXJhdGlvblR5cGVbYWN0aW9uVHlwZV1cclxuICAgICAgICAgICAgXS5nZXQoYWN0aW9uVHlwZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZXhwaXJhdGlvblRpbWUgPSB0aGlzLkVYUElSQVRJT05TW1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHBpcmF0aW9uVHlwZVthY3Rpb25UeXBlXVxyXG4gICAgICAgICAgICBdLmdldCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBuZXcgTGltaXRPcmRlckNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGZvcl9zYWxlOiBjdXJyZW50LmZvcl9zYWxlLFxyXG4gICAgICAgICAgICBleHBpcmF0aW9uOiBuZXcgRGF0ZShleHBpcmF0aW9uVGltZSB8fCBmYWxzZSksXHJcbiAgICAgICAgICAgIHRvX3JlY2VpdmU6IGN1cnJlbnQudG9fcmVjZWl2ZSxcclxuICAgICAgICAgICAgc2VsbGVyOiB0aGlzLnByb3BzLmN1cnJlbnRBY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBmZWVJRCxcclxuICAgICAgICAgICAgICAgIGFtb3VudDogMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qge21hcmtldE5hbWUsIGZpcnN0fSA9IG1hcmtldF91dGlscy5nZXRNYXJrZXROYW1lKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmJhc2VBc3NldCxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5xdW90ZUFzc2V0XHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25zdCBpbnZlcnRlZCA9IHRoaXMucHJvcHMubWFya2V0RGlyZWN0aW9ucy5nZXQobWFya2V0TmFtZSk7XHJcbiAgICAgICAgY29uc3Qgc2hvdWxkRmxpcCA9XHJcbiAgICAgICAgICAgIChpbnZlcnRlZCAmJiBmaXJzdC5nZXQoXCJpZFwiKSAhPT0gdGhpcy5wcm9wcy5iYXNlQXNzZXQuZ2V0KFwiaWRcIikpIHx8XHJcbiAgICAgICAgICAgICghaW52ZXJ0ZWQgJiYgZmlyc3QuZ2V0KFwiaWRcIikgIT09IHRoaXMucHJvcHMuYmFzZUFzc2V0LmdldChcImlkXCIpKTtcclxuICAgICAgICBpZiAoc2hvdWxkRmxpcCkge1xyXG4gICAgICAgICAgICBsZXQgc2V0dGluZyA9IHt9O1xyXG4gICAgICAgICAgICBzZXR0aW5nW21hcmtldE5hbWVdID0gIWludmVydGVkO1xyXG4gICAgICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlTWFya2V0RGlyZWN0aW9uKHNldHRpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX19ERVZfXykgXCJvcmRlcjpcIiwgSlNPTi5zdHJpbmdpZnkob3JkZXIudG9PYmplY3QoKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBNYXJrZXRzQWN0aW9ucy5jcmVhdGVMaW1pdE9yZGVyMihvcmRlcilcclxuICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmVycm9yLm1lc3NhZ2UgIT09IFwid2FsbGV0IGxvY2tlZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24uZXJyb3Ioe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibm90aWZpY2F0aW9ucy5leGNoYW5nZV91bmtub3duX2Vycm9yX3BsYWNlX29yZGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGN1cnJlbnQudG9fcmVjZWl2ZS5nZXRBbW91bnQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhbDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiBjdXJyZW50LnRvX3JlY2VpdmUuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwib3JkZXIgZmFpbGVkOlwiLCBlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqKlxyXG4gICAgICogQ2xlYXIgZm9ybXNcclxuICAgICAqIEBzdHJpbmc6IHR5cGVcclxuICAgICAqL1xyXG4gICAgX2NsZWFyRm9ybXModHlwZSkge1xyXG4gICAgICAgIGxldCB7YXNrLCBiaWR9ID0gdGhpcy5faW5pdGlhbE9yZGVyU3RhdGUodGhpcy5wcm9wcyk7XHJcblxyXG4gICAgICAgIGlmICghdHlwZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGJpZCxcclxuICAgICAgICAgICAgICAgIGFza1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJhc2tcIikge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHthc2t9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJiaWRcIikge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtiaWR9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZVByZWRpY3Rpb25TaG9ydChmZWVJRCkge1xyXG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5zdGF0ZS5hc2s7XHJcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBuZXcgTGltaXRPcmRlckNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGZvcl9zYWxlOiBjdXJyZW50LmZvcl9zYWxlLFxyXG4gICAgICAgICAgICB0b19yZWNlaXZlOiBjdXJyZW50LnRvX3JlY2VpdmUsXHJcbiAgICAgICAgICAgIHNlbGxlcjogdGhpcy5wcm9wcy5jdXJyZW50QWNjb3VudC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICBhc3NldF9pZDogZmVlSUQsXHJcbiAgICAgICAgICAgICAgICBhbW91bnQ6IDBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIEZldGNoQ2hhaW4oXHJcbiAgICAgICAgICAgICAgICBcImdldEFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnF1b3RlQXNzZXQuZ2V0SW4oW1xyXG4gICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcclxuICAgICAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcclxuICAgICAgICAgICAgICAgICAgICBcInNob3J0X2JhY2tpbmdfYXNzZXRcIlxyXG4gICAgICAgICAgICAgICAgXSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIF0pLnRoZW4oYXNzZXRzID0+IHtcclxuICAgICAgICAgICAgbGV0IFtiYWNraW5nQXNzZXRdID0gYXNzZXRzO1xyXG4gICAgICAgICAgICBsZXQgY29sbGF0ZXJhbCA9IG5ldyBBc3NldCh7XHJcbiAgICAgICAgICAgICAgICBhbW91bnQ6IG9yZGVyLmFtb3VudF9mb3Jfc2FsZS5nZXRBbW91bnQoKSxcclxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBiYWNraW5nQXNzZXQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICBwcmVjaXNpb246IGJhY2tpbmdBc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBNYXJrZXRzQWN0aW9ucy5jcmVhdGVQcmVkaWN0aW9uU2hvcnQob3JkZXIsIGNvbGxhdGVyYWwpLnRoZW4oXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5lcnJvci5tZXNzYWdlICE9PSBcIndhbGxldCBsb2NrZWRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5vdGlmaWNhdGlvbnMuZXhjaGFuZ2VfdW5rbm93bl9lcnJvcl9wbGFjZV9vcmRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGJ1eUFzc2V0QW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiBidXlBc3NldC5zeW1ib2xcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfZm9yY2VCdXkodHlwZSwgZmVlQXNzZXQsIHNlbGxCYWxhbmNlLCBjb3JlQmFsYW5jZSkge1xyXG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5zdGF0ZVt0eXBlID09PSBcInNlbGxcIiA/IFwiYXNrXCIgOiBcImJpZFwiXTtcclxuICAgICAgICAvLyBDb252ZXJ0IGZlZSB0byByZWxldmFudCBhc3NldCBmZWUgYW5kIGNoZWNrIGlmIHVzZXIgaGFzIHN1ZmZpY2llbnQgYmFsYW5jZVxyXG4gICAgICAgIHNlbGxCYWxhbmNlID0gY3VycmVudC5mb3Jfc2FsZS5jbG9uZShcclxuICAgICAgICAgICAgc2VsbEJhbGFuY2VcclxuICAgICAgICAgICAgICAgID8gcGFyc2VJbnQoQ2hhaW5TdG9yZS5nZXRPYmplY3Qoc2VsbEJhbGFuY2UpLmdldChcImJhbGFuY2VcIiksIDEwKVxyXG4gICAgICAgICAgICAgICAgOiAwXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb3JlQmFsYW5jZSA9IG5ldyBBc3NldCh7XHJcbiAgICAgICAgICAgIGFtb3VudDogY29yZUJhbGFuY2VcclxuICAgICAgICAgICAgICAgID8gcGFyc2VJbnQoQ2hhaW5TdG9yZS5nZXRPYmplY3QoY29yZUJhbGFuY2UpLnRvSlMoKS5iYWxhbmNlLCAxMClcclxuICAgICAgICAgICAgICAgIDogMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBmZWUgPSB0aGlzLl9nZXRGZWUoZmVlQXNzZXQpO1xyXG4gICAgICAgIGxldCBmZWVJRCA9IHRoaXMuX3ZlcmlmeUZlZShcclxuICAgICAgICAgICAgZmVlLFxyXG4gICAgICAgICAgICBjdXJyZW50LmZvcl9zYWxlLFxyXG4gICAgICAgICAgICBzZWxsQmFsYW5jZS5nZXRBbW91bnQoKSxcclxuICAgICAgICAgICAgY29yZUJhbGFuY2UuZ2V0QW1vdW50KClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAoZmVlSUQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3JlYXRlTGltaXRPcmRlcih0eXBlLCBmZWVJRCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBwYXkgZmVlcywgYWJvcnRpbmcgbGltaXQgb3JkZXIgY3JlYXRpb25cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9mb3JjZVNlbGwodHlwZSwgZmVlQXNzZXQsIHNlbGxCYWxhbmNlLCBjb3JlQmFsYW5jZSkge1xyXG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5zdGF0ZVt0eXBlID09PSBcInNlbGxcIiA/IFwiYXNrXCIgOiBcImJpZFwiXTtcclxuICAgICAgICAvLyBDb252ZXJ0IGZlZSB0byByZWxldmFudCBhc3NldCBmZWUgYW5kIGNoZWNrIGlmIHVzZXIgaGFzIHN1ZmZpY2llbnQgYmFsYW5jZVxyXG4gICAgICAgIHNlbGxCYWxhbmNlID0gY3VycmVudC5mb3Jfc2FsZS5jbG9uZShcclxuICAgICAgICAgICAgc2VsbEJhbGFuY2VcclxuICAgICAgICAgICAgICAgID8gcGFyc2VJbnQoQ2hhaW5TdG9yZS5nZXRPYmplY3Qoc2VsbEJhbGFuY2UpLmdldChcImJhbGFuY2VcIiksIDEwKVxyXG4gICAgICAgICAgICAgICAgOiAwXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb3JlQmFsYW5jZSA9IG5ldyBBc3NldCh7XHJcbiAgICAgICAgICAgIGFtb3VudDogY29yZUJhbGFuY2VcclxuICAgICAgICAgICAgICAgID8gcGFyc2VJbnQoQ2hhaW5TdG9yZS5nZXRPYmplY3QoY29yZUJhbGFuY2UpLnRvSlMoKS5iYWxhbmNlLCAxMClcclxuICAgICAgICAgICAgICAgIDogMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBmZWUgPSB0aGlzLl9nZXRGZWUoZmVlQXNzZXQpO1xyXG4gICAgICAgIGxldCBmZWVJRCA9IHRoaXMuX3ZlcmlmeUZlZShcclxuICAgICAgICAgICAgZmVlLFxyXG4gICAgICAgICAgICBjdXJyZW50LmZvcl9zYWxlLFxyXG4gICAgICAgICAgICBzZWxsQmFsYW5jZS5nZXRBbW91bnQoKSxcclxuICAgICAgICAgICAgY29yZUJhbGFuY2UuZ2V0QW1vdW50KClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAoZmVlSUQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3JlYXRlTGltaXRPcmRlcih0eXBlLCBmZWVJRCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBwYXkgZmVlcywgYWJvcnRpbmcgbGltaXQgb3JkZXIgY3JlYXRpb25cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9jYW5jZWxMaW1pdE9yZGVyKG9yZGVySUQsIGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgbGV0IHtjdXJyZW50QWNjb3VudH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIE1hcmtldHNBY3Rpb25zLmNhbmNlbExpbWl0T3JkZXIoXHJcbiAgICAgICAgICAgIGN1cnJlbnRBY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICBvcmRlcklEIC8vIG9yZGVyIGlkIHRvIGNhbmNlbFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoYW5nZVpvb21QZXJpb2Qoc2l6ZSwgZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBpZiAoc2l6ZSAhPT0gdGhpcy5zdGF0ZS5jdXJyZW50UGVyaW9kKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFBlcmlvZDogc2l6ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQZXJpb2Q6IHNpemVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vbkdyb3VwT3JkZXJMaW1pdENoYW5nZShlKSB7XHJcbiAgICAgICAgbGV0IGdyb3VwTGltaXQ7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgZSA9PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgZ3JvdXBMaW1pdCA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgZSA9PSBcIm51bWJlclwiKSBncm91cExpbWl0ID0gcGFyc2VJbnQoZSk7XHJcblxyXG4gICAgICAgIE1hcmtldHNBY3Rpb25zLmNoYW5nZUN1cnJlbnRHcm91cExpbWl0KGdyb3VwTGltaXQpO1xyXG5cclxuICAgICAgICBpZiAoZ3JvdXBMaW1pdCAhPT0gdGhpcy5wcm9wcy5jdXJyZW50R3JvdXBPcmRlckxpbWl0KSB7XHJcbiAgICAgICAgICAgIE1hcmtldHNBY3Rpb25zLmNoYW5nZUN1cnJlbnRHcm91cExpbWl0KGdyb3VwTGltaXQpO1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudFN1YiA9IHRoaXMucHJvcHMuc3ViLnNwbGl0KFwiX1wiKTtcclxuICAgICAgICAgICAgTWFya2V0c0FjdGlvbnMudW5TdWJzY3JpYmVNYXJrZXQoY3VycmVudFN1YlswXSwgY3VycmVudFN1YlsxXSkudGhlbihcclxuICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnN1YlRvTWFya2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJ1Y2tldFNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwTGltaXRcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfZGVwdGhDaGFydENsaWNrKGJhc2UsIHF1b3RlLCBlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGxldCB7YmlkLCBhc2t9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgYmlkLnByaWNlID0gbmV3IFByaWNlKHtcclxuICAgICAgICAgICAgYmFzZTogdGhpcy5zdGF0ZS5iaWQuZm9yX3NhbGUsXHJcbiAgICAgICAgICAgIHF1b3RlOiB0aGlzLnN0YXRlLmJpZC50b19yZWNlaXZlLFxyXG4gICAgICAgICAgICByZWFsOiBlLnhBeGlzWzBdLnZhbHVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYmlkLnByaWNlVGV4dCA9IGJpZC5wcmljZS50b1JlYWwoKTtcclxuXHJcbiAgICAgICAgYXNrLnByaWNlID0gbmV3IFByaWNlKHtcclxuICAgICAgICAgICAgYmFzZTogdGhpcy5zdGF0ZS5hc2sudG9fcmVjZWl2ZSxcclxuICAgICAgICAgICAgcXVvdGU6IHRoaXMuc3RhdGUuYXNrLmZvcl9zYWxlLFxyXG4gICAgICAgICAgICByZWFsOiBlLnhBeGlzWzBdLnZhbHVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXNrLnByaWNlVGV4dCA9IGFzay5wcmljZS50b1JlYWwoKTtcclxuICAgICAgICBsZXQgbmV3U3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGJpZCxcclxuICAgICAgICAgICAgYXNrLFxyXG4gICAgICAgICAgICBkZXB0aExpbmU6IGJpZC5wcmljZS50b1JlYWwoKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEZvclNhbGUoYmlkLCB0cnVlKSB8fCB0aGlzLl9zZXRSZWNlaXZlKGJpZCwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5fc2V0UmVjZWl2ZShhc2spIHx8IHRoaXMuX3NldEZvclNhbGUoYXNrKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2V0UHJpY2VUZXh0KGJpZCwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5fc2V0UHJpY2VUZXh0KGFzaywgZmFsc2UpO1xyXG4gICAgICAgIC8vIGlmIChiaWQuZm9yX3NhbGUuKVxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRBdXRvc2Nyb2xsKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGF1dG9TY3JvbGw6IHZhbHVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhbmVsIC0gUGFuZWwgdG8gdG9nZ2xlXHJcbiAgICAgKi9cclxuICAgIF90b2dnbGVQYW5lbChwYW5lbCkge1xyXG4gICAgICAgIGlmICghcGFuZWwpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IG5ld1N0YXRlID0gW107XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUuYWN0aXZlUGFuZWxzLmZvckVhY2goYSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhICE9PSBwYW5lbCkge1xyXG4gICAgICAgICAgICAgICAgbmV3U3RhdGUucHVzaChhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuYWN0aXZlUGFuZWxzLmluY2x1ZGVzKHBhbmVsKSkge1xyXG4gICAgICAgICAgICBuZXdTdGF0ZS5wdXNoKHBhbmVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBhY3RpdmVQYW5lbHM6IG5ld1N0YXRlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIGFjdGl2ZVBhbmVsczogbmV3U3RhdGVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlQ2hhcnQodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgY2hhcnRUeXBlOiB2YWx1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlVmlld1NldHRpbmcoe1xyXG4gICAgICAgICAgICBjaGFydFR5cGU6IHZhbHVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoYXJ0Wm9vbSA9ICgpID0+IHtcclxuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlVmlld1NldHRpbmcoe1xyXG4gICAgICAgICAgICBjaGFydFpvb206ICF0aGlzLnN0YXRlLmNoYXJ0Wm9vbVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgY2hhcnRUeXBlID0gdGhpcy5zdGF0ZS5jaGFydFR5cGU7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGNoYXJ0Wm9vbTogIXRoaXMuc3RhdGUuY2hhcnRab29tLFxyXG4gICAgICAgICAgICBjaGFydFR5cGU6IFwiaGlkZGVuX2NoYXJ0XCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBmb3JjZSByZWxvYWRcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBjaGFydFR5cGU6IGNoYXJ0VHlwZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgfTtcclxuXHJcbiAgICBfY2hhcnRUb29scyA9ICgpID0+IHtcclxuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlVmlld1NldHRpbmcoe1xyXG4gICAgICAgICAgICBjaGFydFRvb2xzOiAhdGhpcy5zdGF0ZS5jaGFydFRvb2xzXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBjaGFydFR5cGUgPSB0aGlzLnN0YXRlLmNoYXJ0VHlwZTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgY2hhcnRUb29sczogIXRoaXMuc3RhdGUuY2hhcnRUb29scyxcclxuICAgICAgICAgICAgY2hhcnRUeXBlOiBcImhpZGRlbl9jaGFydFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gZm9yY2UgcmVsb2FkXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgY2hhcnRUeXBlOiBjaGFydFR5cGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgIH07XHJcblxyXG4gICAgX2ZsaXBCdXlTZWxsKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBmbGlwQnV5U2VsbDogIXRoaXMuc3RhdGUuZmxpcEJ1eVNlbGxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcclxuICAgICAgICAgICAgZmxpcEJ1eVNlbGw6ICF0aGlzLnN0YXRlLmZsaXBCdXlTZWxsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqKlxyXG4gICAgICogVG9nZ2xlIEJ1eS9TZWxsIG9yZGVyIFVYXHJcbiAgICAgKiBIb3Jpem9udGFsIG9yZGVyIGJvb2sgb25seVxyXG4gICAgICovXHJcbiAgICBfZmxpcE9yZGVyQm9vayA9ICgpID0+IHtcclxuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlVmlld1NldHRpbmcoe1xyXG4gICAgICAgICAgICBmbGlwT3JkZXJCb29rOiAhdGhpcy5zdGF0ZS5mbGlwT3JkZXJCb29rXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBmbGlwT3JkZXJCb29rOiAhdGhpcy5zdGF0ZS5mbGlwT3JkZXJCb29rXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKipcclxuICAgICAqIFRvZ2dsZSBvcmRlciBib29rIHRvIHN3aXRjaCBwbGFjZSBvZiBidXkgYW5kIHNlbGwgb3JkZXJzXHJcbiAgICAgKiBWZXJ0aWNhbCBvcmRlciBib29rIG9ubHlcclxuICAgICAqL1xyXG4gICAgX29yZGVyQm9va1JldmVyc2VkID0gKCkgPT4ge1xyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIG9yZGVyQm9va1JldmVyc2VkOiAhdGhpcy5zdGF0ZS5vcmRlckJvb2tSZXZlcnNlZFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgb3JkZXJCb29rUmV2ZXJzZWQ6ICF0aGlzLnN0YXRlLm9yZGVyQm9va1JldmVyc2VkXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9oaWRlRnVuY3Rpb25CdXR0b25zID0gKCkgPT4ge1xyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIGhpZGVGdW5jdGlvbkJ1dHRvbnM6ICF0aGlzLnN0YXRlLmhpZGVGdW5jdGlvbkJ1dHRvbnNcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGhpZGVGdW5jdGlvbkJ1dHRvbnM6ICF0aGlzLnN0YXRlLmhpZGVGdW5jdGlvbkJ1dHRvbnNcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgX3RvZ2dsZU9wZW5CdXlTZWxsKCkge1xyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIGJ1eVNlbGxPcGVuOiAhdGhpcy5zdGF0ZS5idXlTZWxsT3BlblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtidXlTZWxsT3BlbjogIXRoaXMuc3RhdGUuYnV5U2VsbE9wZW59KTtcclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlTWFya2V0UGlja2VyKGFzc2V0KSB7XHJcbiAgICAgICAgbGV0IHNob3dNYXJrZXRQaWNrZXIgPSAhIWFzc2V0ID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoc2hvd01hcmtldFBpY2tlcikge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dNYXJrZXRQaWNrZXJNb2RhbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHNob3dNYXJrZXRQaWNrZXIsXHJcbiAgICAgICAgICAgIG1hcmtldFBpY2tlckFzc2V0OiBhc3NldFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9tb3ZlT3JkZXJCb29rKCkge1xyXG4gICAgICAgIC8vIFVucGluIE9yZGVyRm9ybVxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnZlcnRpY2FsT3JkZXJGb3JtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21vdmVPcmRlckZvcm0oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIHZlcnRpY2FsT3JkZXJCb29rOiAhdGhpcy5zdGF0ZS52ZXJ0aWNhbE9yZGVyQm9va1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHt2ZXJ0aWNhbE9yZGVyQm9vazogIXRoaXMuc3RhdGUudmVydGljYWxPcmRlckJvb2t9KTtcclxuICAgIH1cclxuXHJcbiAgICBfbW92ZU9yZGVyRm9ybSgpIHtcclxuICAgICAgICAvLyBVbnBpbiBPcmRlckJvb2tcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS52ZXJ0aWNhbE9yZGVyQm9vaykge1xyXG4gICAgICAgICAgICB0aGlzLl9tb3ZlT3JkZXJCb29rKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlVmlld1NldHRpbmcoe1xyXG4gICAgICAgICAgICB2ZXJ0aWNhbE9yZGVyRm9ybTogIXRoaXMuc3RhdGUudmVydGljYWxPcmRlckZvcm1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dmVydGljYWxPcmRlckZvcm06ICF0aGlzLnN0YXRlLnZlcnRpY2FsT3JkZXJGb3JtfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3RvZ2dsZVBlcnNvbmFsaXplKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5pc1BlcnNvbmFsaXplTW9kYWxWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgaXNQZXJzb25hbGl6ZU1vZGFsVmlzaWJsZTogIXRoaXMuc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAuaXNQZXJzb25hbGl6ZU1vZGFsVmlzaWJsZSxcclxuICAgICAgICAgICAgICAgIGlzUGVyc29uYWxpemVNb2RhbExvYWRlZDogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGlzUGVyc29uYWxpemVNb2RhbFZpc2libGU6ICF0aGlzLnN0YXRlLmlzUGVyc29uYWxpemVNb2RhbFZpc2libGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF90b2dnbGVTY3JvbGxiYXJzKCkge1xyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIGhpZGVTY3JvbGxiYXJzOiAhdGhpcy5zdGF0ZS5oaWRlU2Nyb2xsYmFyc1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaGlkZVNjcm9sbGJhcnM6ICF0aGlzLnN0YXRlLmhpZGVTY3JvbGxiYXJzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3RvZ2dsZVNpbmdsZUNvbHVtbk9yZGVyRm9ybSgpIHtcclxuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlVmlld1NldHRpbmcoe1xyXG4gICAgICAgICAgICBzaW5nbGVDb2x1bW5PcmRlckZvcm06ICF0aGlzLnN0YXRlLnNpbmdsZUNvbHVtbk9yZGVyRm9ybVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2luZ2xlQ29sdW1uT3JkZXJGb3JtOiAhdGhpcy5zdGF0ZS5zaW5nbGVDb2x1bW5PcmRlckZvcm1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfbWlycm9yUGFuZWxzKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBtaXJyb3JQYW5lbHM6ICF0aGlzLnN0YXRlLm1pcnJvclBhbmVsc1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlVmlld1NldHRpbmcoe1xyXG4gICAgICAgICAgICBtaXJyb3JQYW5lbHM6ICF0aGlzLnN0YXRlLm1pcnJvclBhbmVsc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9jdXJyZW50UHJpY2VDbGljayh0eXBlLCBwcmljZSkge1xyXG4gICAgICAgIGNvbnN0IGlzQmlkID0gdHlwZSA9PT0gXCJiaWRcIjtcclxuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMuc3RhdGVbdHlwZV07XHJcbiAgICAgICAgY3VycmVudC5wcmljZSA9IHByaWNlW2lzQmlkID8gXCJpbnZlcnRcIiA6IFwiY2xvbmVcIl0oKTtcclxuICAgICAgICBjdXJyZW50LnByaWNlVGV4dCA9IGN1cnJlbnQucHJpY2UudG9SZWFsKCk7XHJcbiAgICAgICAgaWYgKGlzQmlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldEZvclNhbGUoY3VycmVudCwgaXNCaWQpIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRSZWNlaXZlKGN1cnJlbnQsIGlzQmlkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRSZWNlaXZlKGN1cnJlbnQsIGlzQmlkKSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0Rm9yU2FsZShjdXJyZW50LCBpc0JpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBfb3JkZXJib29rQ2xpY2sob3JkZXIpIHtcclxuICAgICAgICBjb25zdCBpc0JpZCA9IG9yZGVyLmlzQmlkKCk7XHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBCZWNhdXNlIHdlIGFyZSB1c2luZyBhIGJpZCBvcmRlciB0byBjb25zdHJ1Y3QgYW4gYXNrIGFuZCB2aWNlIHZlcnNhLFxyXG4gICAgICAgICAqIHRvdGFsVG9SZWNlaXZlIGJlY29tZXMgZm9yU2FsZSwgYW5kIHRvdGFsRm9yU2FsZSBiZWNvbWVzIHRvUmVjZWl2ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGxldCBmb3JTYWxlID0gb3JkZXIudG90YWxUb1JlY2VpdmUoe25vQ2FjaGU6IHRydWV9KTtcclxuICAgICAgICAvLyBsZXQgdG9SZWNlaXZlID0gb3JkZXIudG90YWxGb3JTYWxlKHtub0NhY2hlOiB0cnVlfSk7XHJcbiAgICAgICAgbGV0IHRvUmVjZWl2ZSA9IGZvclNhbGUudGltZXMob3JkZXIuc2VsbFByaWNlKCkpO1xyXG5cclxuICAgICAgICBsZXQgbmV3UHJpY2UgPSBuZXcgUHJpY2Uoe1xyXG4gICAgICAgICAgICBiYXNlOiBpc0JpZCA/IHRvUmVjZWl2ZSA6IGZvclNhbGUsXHJcbiAgICAgICAgICAgIHF1b3RlOiBpc0JpZCA/IGZvclNhbGUgOiB0b1JlY2VpdmVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnN0YXRlW2lzQmlkID8gXCJiaWRcIiA6IFwiYXNrXCJdO1xyXG4gICAgICAgIGN1cnJlbnQucHJpY2UgPSBuZXdQcmljZTtcclxuICAgICAgICBjdXJyZW50LnByaWNlVGV4dCA9IG5ld1ByaWNlLnRvUmVhbCgpO1xyXG5cclxuICAgICAgICBsZXQgbmV3U3RhdGUgPSB7XHJcbiAgICAgICAgICAgIC8vIElmIGlzQmlkIGlzIHRydWUsIG5ld1N0YXRlIGRlZmluZXMgYSBuZXcgYXNrIG9yZGVyIGFuZCB2aWNlIHZlcnNhXHJcbiAgICAgICAgICAgIFtpc0JpZCA/IFwiYXNrXCIgOiBcImJpZFwiXToge1xyXG4gICAgICAgICAgICAgICAgZm9yX3NhbGU6IGZvclNhbGUsXHJcbiAgICAgICAgICAgICAgICBmb3JTYWxlVGV4dDogZm9yU2FsZS5nZXRBbW91bnQoe3JlYWw6IHRydWV9KSxcclxuICAgICAgICAgICAgICAgIHRvX3JlY2VpdmU6IHRvUmVjZWl2ZSxcclxuICAgICAgICAgICAgICAgIHRvUmVjZWl2ZVRleHQ6IHRvUmVjZWl2ZS5nZXRBbW91bnQoe3JlYWw6IHRydWV9KSxcclxuICAgICAgICAgICAgICAgIHByaWNlOiBuZXdQcmljZSxcclxuICAgICAgICAgICAgICAgIHByaWNlVGV4dDogbmV3UHJpY2UudG9SZWFsKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChpc0JpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRGb3JTYWxlKGN1cnJlbnQsIGlzQmlkKSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0UmVjZWl2ZShjdXJyZW50LCBpc0JpZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0UmVjZWl2ZShjdXJyZW50LCBpc0JpZCkgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldEZvclNhbGUoY3VycmVudCwgaXNCaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBfYm9ycm93UXVvdGUoKSB7XHJcbiAgICAgICAgdGhpcy5zaG93Qm9ycm93UXVvdGVNb2RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9ib3Jyb3dCYXNlKCkge1xyXG4gICAgICAgIHRoaXMuc2hvd0JvcnJvd0Jhc2VNb2RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkRlcG9zaXQodHlwZSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBkZXBvc2l0TW9kYWxUeXBlOiB0eXBlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd0RlcG9zaXRNb2RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkJ1eSh0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGJ1eU1vZGFsVHlwZTogdHlwZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNob3dEZXBvc2l0QnJpZGdlTW9kYWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0U2V0dGxlbWVudEluZm8oKSB7XHJcbiAgICAgICAgbGV0IHtsb3dlc3RDYWxsUHJpY2UsIGZlZWRQcmljZSwgcXVvdGVBc3NldH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBsZXQgc2hvd0NhbGxMaW1pdCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChmZWVkUHJpY2UpIHtcclxuICAgICAgICAgICAgaWYgKGZlZWRQcmljZS5pbnZlcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgc2hvd0NhbGxMaW1pdCA9IGxvd2VzdENhbGxQcmljZSA8PSBmZWVkUHJpY2UudG9SZWFsKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzaG93Q2FsbExpbWl0ID0gbG93ZXN0Q2FsbFByaWNlID49IGZlZWRQcmljZS50b1JlYWwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gISEoXHJcbiAgICAgICAgICAgIHNob3dDYWxsTGltaXQgJiZcclxuICAgICAgICAgICAgbG93ZXN0Q2FsbFByaWNlICYmXHJcbiAgICAgICAgICAgICFxdW90ZUFzc2V0LmdldEluKFtcImJpdGFzc2V0XCIsIFwiaXNfcHJlZGljdGlvbl9tYXJrZXRcIl0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0VGFiVmVydGljYWxQYW5lbCh0YWIpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgdGFiVmVydGljYWxQYW5lbDogdGFiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcclxuICAgICAgICAgICAgdGFiVmVydGljYWxQYW5lbDogdGFiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldFRhYkJ1eVNlbGwodGFiKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHRhYkJ1eVNlbGw6IHRhYlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIHRhYkJ1eVNlbGw6IHRhYlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRQYW5lbFRhYkluR3JvdXAoZ3JvdXAsIGFjdGl2ZXRhYikge1xyXG4gICAgICAgIGxldCB7cGFuZWxUYWJzQWN0aXZlfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIE9iamVjdC5rZXlzKHBhbmVsVGFic0FjdGl2ZSkubWFwKGEgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYSA9PSBncm91cCkge1xyXG4gICAgICAgICAgICAgICAgcGFuZWxUYWJzQWN0aXZlW2FdID0gYWN0aXZldGFiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBwYW5lbFRhYnNBY3RpdmU6IHBhbmVsVGFic0FjdGl2ZSxcclxuICAgICAgICAgICAgZm9yY2VSZVJlbmRlcjogdHJ1ZSAvLyBSZXF1aXJlcyB0byBmb3JjZWZ1bGx5IHJlLXJlbmRlciBmb3IgdGFiIHRvIHN0aWNrXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIHBhbmVsVGFic0FjdGl2ZTogcGFuZWxUYWJzQWN0aXZlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldFBhbmVsVGFicyhwYW5lbE5hbWUsIG5ld1RhYnNJZCkge1xyXG4gICAgICAgIGxldCB7cGFuZWxUYWJzLCBwYW5lbFRhYnNBY3RpdmV9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgbGV0IG5ld1N0YXRlID0ge1xyXG4gICAgICAgICAgICBwYW5lbFRhYnM6IHBhbmVsVGFicyxcclxuICAgICAgICAgICAgcGFuZWxUYWJzQWN0aXZlOiBwYW5lbFRhYnNBY3RpdmVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBTZXQgbmV3IFRhYnMgSUQgZm9yIFBhbmVsXHJcbiAgICAgICAgT2JqZWN0LmtleXMocGFuZWxUYWJzKS5tYXAodGhpc1BhbmVsTmFtZSA9PiB7XHJcbiAgICAgICAgICAgIG5ld1N0YXRlLnBhbmVsVGFic1t0aGlzUGFuZWxOYW1lXSA9XHJcbiAgICAgICAgICAgICAgICB0aGlzUGFuZWxOYW1lID09IHBhbmVsTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgID8gbmV3VGFic0lkXHJcbiAgICAgICAgICAgICAgICAgICAgOiBwYW5lbFRhYnNbdGhpc1BhbmVsTmFtZV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFJlc2V0IGFsbCBBY3RpdmUgUGFuZWwgVGFic1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHBhbmVsVGFic0FjdGl2ZSkubWFwKHRoaXNUYWJJZCA9PiB7XHJcbiAgICAgICAgICAgIG5ld1N0YXRlLnBhbmVsVGFic0FjdGl2ZVt0aGlzVGFiSWRdID0gXCJcIjtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIG5ld1N0YXRlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIC4uLm5ld1N0YXRlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2VGZWVBc3NldCh0eXBlLCB2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0eXBlID09PSBcImJ1eVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgYnV5RmVlQXNzZXRJZHg6IHZhbHVlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcclxuICAgICAgICAgICAgICAgIGJ1eUZlZUFzc2V0SWR4OiB2YWx1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHNlbGxGZWVBc3NldElkeDogdmFsdWVcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlVmlld1NldHRpbmcoe1xyXG4gICAgICAgICAgICAgICAgc2VsbEZlZUFzc2V0SWR4OiB2YWx1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2VDaGFydEhlaWdodCh7dmFsdWUsIGluY3JlYXNlfSkge1xyXG4gICAgICAgIGxldCBuZXdIZWlnaHQgPSB2YWx1ZVxyXG4gICAgICAgICAgICA/IHZhbHVlXHJcbiAgICAgICAgICAgIDogdGhpcy5zdGF0ZS5jaGFydEhlaWdodCArIChpbmNyZWFzZSA/IDIwIDogLTIwKTtcclxuICAgICAgICBpZiAobmV3SGVpZ2h0IDwgNDI1KSB7XHJcbiAgICAgICAgICAgIG5ld0hlaWdodCA9IDQyNTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5ld0hlaWdodCA+IDEwMDApIHtcclxuICAgICAgICAgICAgbmV3SGVpZ2h0ID0gMTAwMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBjaGFydEhlaWdodDogbmV3SGVpZ2h0XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIGNoYXJ0SGVpZ2h0OiBuZXdIZWlnaHRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlQnV5U2VsbFBvc2l0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBidXlTZWxsVG9wOiAhdGhpcy5zdGF0ZS5idXlTZWxsVG9wXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIGJ1eVNlbGxUb3A6ICF0aGlzLnN0YXRlLmJ1eVNlbGxUb3BcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0UmVjZWl2ZShzdGF0ZSwgaXNCaWQpIHtcclxuICAgICAgICBpZiAoc3RhdGUucHJpY2UuaXNWYWxpZCgpICYmIHN0YXRlLmZvcl9zYWxlLmhhc0Ftb3VudCgpKSB7XHJcbiAgICAgICAgICAgIHN0YXRlLnRvX3JlY2VpdmUgPSBzdGF0ZS5mb3Jfc2FsZS50aW1lcyhzdGF0ZS5wcmljZSk7XHJcbiAgICAgICAgICAgIHN0YXRlLnRvUmVjZWl2ZVRleHQgPSBzdGF0ZS50b19yZWNlaXZlXHJcbiAgICAgICAgICAgICAgICAuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSlcclxuICAgICAgICAgICAgICAgIC50b1N0cmluZygpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRGb3JTYWxlKHN0YXRlLCBpc0JpZCkge1xyXG4gICAgICAgIGlmIChzdGF0ZS5wcmljZS5pc1ZhbGlkKCkgJiYgc3RhdGUudG9fcmVjZWl2ZS5oYXNBbW91bnQoKSkge1xyXG4gICAgICAgICAgICBzdGF0ZS5mb3Jfc2FsZSA9IHN0YXRlLnRvX3JlY2VpdmUudGltZXMoc3RhdGUucHJpY2UsIHRydWUpO1xyXG4gICAgICAgICAgICBzdGF0ZS5mb3JTYWxlVGV4dCA9IHN0YXRlLmZvcl9zYWxlXHJcbiAgICAgICAgICAgICAgICAuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSlcclxuICAgICAgICAgICAgICAgIC50b1N0cmluZygpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRQcmljZShzdGF0ZSkge1xyXG4gICAgICAgIGlmIChzdGF0ZS5mb3Jfc2FsZS5oYXNBbW91bnQoKSAmJiBzdGF0ZS50b19yZWNlaXZlLmhhc0Ftb3VudCgpKSB7XHJcbiAgICAgICAgICAgIHN0YXRlLnByaWNlID0gbmV3IFByaWNlKHtcclxuICAgICAgICAgICAgICAgIGJhc2U6IHN0YXRlLmZvcl9zYWxlLFxyXG4gICAgICAgICAgICAgICAgcXVvdGU6IHN0YXRlLnRvX3JlY2VpdmVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHN0YXRlLnByaWNlVGV4dCA9IHN0YXRlLnByaWNlLnRvUmVhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldFByaWNlVGV4dChzdGF0ZSwgaXNCaWQpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50QmFzZSA9IHN0YXRlW2lzQmlkID8gXCJmb3Jfc2FsZVwiIDogXCJ0b19yZWNlaXZlXCJdO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRRdW90ZSA9IHN0YXRlW2lzQmlkID8gXCJ0b19yZWNlaXZlXCIgOiBcImZvcl9zYWxlXCJdO1xyXG4gICAgICAgIGlmIChjdXJyZW50QmFzZS5oYXNBbW91bnQoKSAmJiBjdXJyZW50UXVvdGUuaGFzQW1vdW50KCkpIHtcclxuICAgICAgICAgICAgc3RhdGUucHJpY2VUZXh0ID0gbmV3IFByaWNlKHtcclxuICAgICAgICAgICAgICAgIGJhc2U6IGN1cnJlbnRCYXNlLFxyXG4gICAgICAgICAgICAgICAgcXVvdGU6IGN1cnJlbnRRdW90ZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRvUmVhbCgpXHJcbiAgICAgICAgICAgICAgICAudG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uSW5wdXRQcmljZSh0eXBlLCBlKSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnN0YXRlW3R5cGVdO1xyXG4gICAgICAgIGNvbnN0IGlzQmlkID0gdHlwZSA9PT0gXCJiaWRcIjtcclxuICAgICAgICBjdXJyZW50LnByaWNlID0gbmV3IFByaWNlKHtcclxuICAgICAgICAgICAgYmFzZTogY3VycmVudFtpc0JpZCA/IFwiZm9yX3NhbGVcIiA6IFwidG9fcmVjZWl2ZVwiXSxcclxuICAgICAgICAgICAgcXVvdGU6IGN1cnJlbnRbaXNCaWQgPyBcInRvX3JlY2VpdmVcIiA6IFwiZm9yX3NhbGVcIl0sXHJcbiAgICAgICAgICAgIHJlYWw6IHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpIHx8IDBcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGlzQmlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldEZvclNhbGUoY3VycmVudCwgaXNCaWQpIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRSZWNlaXZlKGN1cnJlbnQsIGlzQmlkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRSZWNlaXZlKGN1cnJlbnQsIGlzQmlkKSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0Rm9yU2FsZShjdXJyZW50LCBpc0JpZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdXJyZW50LnByaWNlVGV4dCA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25JbnB1dFNlbGwodHlwZSwgaXNCaWQsIGUpIHtcclxuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMuc3RhdGVbdHlwZV07XHJcbiAgICAgICAgLy8gY29uc3QgaXNCaWQgPSB0eXBlID09PSBcImJpZFwiO1xyXG4gICAgICAgIGN1cnJlbnQuZm9yX3NhbGUuc2V0QW1vdW50KHtyZWFsOiBwYXJzZUZsb2F0KGUudGFyZ2V0LnZhbHVlKSB8fCAwfSk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnQucHJpY2UuaXNWYWxpZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldFJlY2VpdmUoY3VycmVudCwgaXNCaWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldFByaWNlKGN1cnJlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3VycmVudC5mb3JTYWxlVGV4dCA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIHRoaXMuX3NldFByaWNlVGV4dChjdXJyZW50LCB0eXBlID09PSBcImJpZFwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbklucHV0UmVjZWl2ZSh0eXBlLCBpc0JpZCwgZSkge1xyXG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5zdGF0ZVt0eXBlXTtcclxuICAgICAgICAvLyBjb25zdCBpc0JpZCA9IHR5cGUgPT09IFwiYmlkXCI7XHJcbiAgICAgICAgY3VycmVudC50b19yZWNlaXZlLnNldEFtb3VudCh7cmVhbDogcGFyc2VGbG9hdChlLnRhcmdldC52YWx1ZSkgfHwgMH0pO1xyXG5cclxuICAgICAgICBpZiAoY3VycmVudC5wcmljZS5pc1ZhbGlkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0Rm9yU2FsZShjdXJyZW50LCBpc0JpZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0UHJpY2UoY3VycmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdXJyZW50LnRvUmVjZWl2ZVRleHQgPSBlLnRhcmdldC52YWx1ZTtcclxuICAgICAgICB0aGlzLl9zZXRQcmljZVRleHQoY3VycmVudCwgdHlwZSA9PT0gXCJiaWRcIik7XHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTWFya2V0RnJvemVuKCkge1xyXG4gICAgICAgIGxldCB7YmFzZUFzc2V0LCBxdW90ZUFzc2V0fSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGxldCBiYXNlV2hpdGVMaXN0ID0gYmFzZUFzc2V0XHJcbiAgICAgICAgICAgIC5nZXRJbihbXCJvcHRpb25zXCIsIFwid2hpdGVsaXN0X21hcmtldHNcIl0pXHJcbiAgICAgICAgICAgIC50b0pTKCk7XHJcbiAgICAgICAgbGV0IHF1b3RlV2hpdGVMaXN0ID0gcXVvdGVBc3NldFxyXG4gICAgICAgICAgICAuZ2V0SW4oW1wib3B0aW9uc1wiLCBcIndoaXRlbGlzdF9tYXJrZXRzXCJdKVxyXG4gICAgICAgICAgICAudG9KUygpO1xyXG4gICAgICAgIGxldCBiYXNlQmxhY2tMaXN0ID0gYmFzZUFzc2V0XHJcbiAgICAgICAgICAgIC5nZXRJbihbXCJvcHRpb25zXCIsIFwiYmxhY2tsaXN0X21hcmtldHNcIl0pXHJcbiAgICAgICAgICAgIC50b0pTKCk7XHJcbiAgICAgICAgbGV0IHF1b3RlQmxhY2tMaXN0ID0gcXVvdGVBc3NldFxyXG4gICAgICAgICAgICAuZ2V0SW4oW1wib3B0aW9uc1wiLCBcImJsYWNrbGlzdF9tYXJrZXRzXCJdKVxyXG4gICAgICAgICAgICAudG9KUygpO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHF1b3RlV2hpdGVMaXN0Lmxlbmd0aCAmJlxyXG4gICAgICAgICAgICBxdW90ZVdoaXRlTGlzdC5pbmRleE9mKGJhc2VBc3NldC5nZXQoXCJpZFwiKSkgPT09IC0xXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7aXNGcm96ZW46IHRydWUsIGZyb3plbkFzc2V0OiBxdW90ZUFzc2V0LmdldChcInN5bWJvbFwiKX07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgYmFzZVdoaXRlTGlzdC5sZW5ndGggJiZcclxuICAgICAgICAgICAgYmFzZVdoaXRlTGlzdC5pbmRleE9mKHF1b3RlQXNzZXQuZ2V0KFwiaWRcIikpID09PSAtMVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICByZXR1cm4ge2lzRnJvemVuOiB0cnVlLCBmcm96ZW5Bc3NldDogYmFzZUFzc2V0LmdldChcInN5bWJvbFwiKX07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHF1b3RlQmxhY2tMaXN0Lmxlbmd0aCAmJlxyXG4gICAgICAgICAgICBxdW90ZUJsYWNrTGlzdC5pbmRleE9mKGJhc2VBc3NldC5nZXQoXCJpZFwiKSkgIT09IC0xXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7aXNGcm96ZW46IHRydWUsIGZyb3plbkFzc2V0OiBxdW90ZUFzc2V0LmdldChcInN5bWJvbFwiKX07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgYmFzZUJsYWNrTGlzdC5sZW5ndGggJiZcclxuICAgICAgICAgICAgYmFzZUJsYWNrTGlzdC5pbmRleE9mKHF1b3RlQXNzZXQuZ2V0KFwiaWRcIikpICE9PSAtMVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICByZXR1cm4ge2lzRnJvemVuOiB0cnVlLCBmcm96ZW5Bc3NldDogYmFzZUFzc2V0LmdldChcInN5bWJvbFwiKX07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge2lzRnJvemVuOiBmYWxzZX07XHJcbiAgICB9XHJcblxyXG4gICAgX3RvZ2dsZUNoYXQoKSB7XHJcbiAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcclxuICAgICAgICAgICAgdmlld0NoYXQ6ICF0aGlzLnByb3BzLnZpZXdDaGF0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3RvZ2dsZU1pbmlDaGFydCgpIHtcclxuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlVmlld1NldHRpbmcoe1xyXG4gICAgICAgICAgICBtaW5pRGVwdGhDaGFydDogIXRoaXMucHJvcHMubWluaURlcHRoQ2hhcnRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25DaGFuZ2VNb2JpbGVQYW5lbCh2YWwpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgbW9iaWxlS2V5OiB2YWxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgY3VycmVudEFjY291bnQsXHJcbiAgICAgICAgICAgIG1hcmtldExpbWl0T3JkZXJzLFxyXG4gICAgICAgICAgICBtYXJrZXRDYWxsT3JkZXJzLFxyXG4gICAgICAgICAgICBtYXJrZXREYXRhLFxyXG4gICAgICAgICAgICBhY3RpdmVNYXJrZXRIaXN0b3J5LFxyXG4gICAgICAgICAgICBpbnZlcnRlZENhbGxzLFxyXG4gICAgICAgICAgICBzdGFycmVkTWFya2V0cyxcclxuICAgICAgICAgICAgcXVvdGVBc3NldCxcclxuICAgICAgICAgICAgYmFzZUFzc2V0LFxyXG4gICAgICAgICAgICBsb3dlc3RDYWxsUHJpY2UsXHJcbiAgICAgICAgICAgIG1hcmtldFN0YXRzLFxyXG4gICAgICAgICAgICBtYXJrZXRSZWFkeSxcclxuICAgICAgICAgICAgbWFya2V0U2V0dGxlT3JkZXJzLFxyXG4gICAgICAgICAgICBidWNrZXRTaXplLFxyXG4gICAgICAgICAgICB0b3RhbHMsXHJcbiAgICAgICAgICAgIGZlZWRQcmljZSxcclxuICAgICAgICAgICAgYnVja2V0cyxcclxuICAgICAgICAgICAgY29yZUFzc2V0LFxyXG4gICAgICAgICAgICB0cmFja2VkR3JvdXBzQ29uZmlnLFxyXG4gICAgICAgICAgICBjdXJyZW50R3JvdXBPcmRlckxpbWl0XHJcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgY29tYmluZWRCaWRzLFxyXG4gICAgICAgICAgICBjb21iaW5lZEFza3MsXHJcbiAgICAgICAgICAgIGxvd2VzdEFzayxcclxuICAgICAgICAgICAgaGlnaGVzdEJpZCxcclxuICAgICAgICAgICAgZmxhdEJpZHMsXHJcbiAgICAgICAgICAgIGZsYXRBc2tzLFxyXG4gICAgICAgICAgICBmbGF0Q2FsbHMsXHJcbiAgICAgICAgICAgIGZsYXRTZXR0bGVzLFxyXG4gICAgICAgICAgICBncm91cGVkQmlkcyxcclxuICAgICAgICAgICAgZ3JvdXBlZEFza3NcclxuICAgICAgICB9ID0gbWFya2V0RGF0YTtcclxuXHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgYmlkLFxyXG4gICAgICAgICAgICBhc2ssXHJcbiAgICAgICAgICAgIHZlcnRpY2FsT3JkZXJCb29rLFxyXG4gICAgICAgICAgICB2ZXJ0aWNhbE9yZGVyRm9ybSxcclxuICAgICAgICAgICAgY2hhcnRIZWlnaHQsXHJcbiAgICAgICAgICAgIGNoYXJ0VHlwZSxcclxuICAgICAgICAgICAgZmxpcEJ1eVNlbGwsXHJcbiAgICAgICAgICAgIGJ1eURpZmYsXHJcbiAgICAgICAgICAgIHNlbGxEaWZmLFxyXG4gICAgICAgICAgICB3aWR0aCxcclxuICAgICAgICAgICAgYnV5U2VsbFRvcCxcclxuICAgICAgICAgICAgdGFiQnV5U2VsbCxcclxuICAgICAgICAgICAgdGFiVmVydGljYWxQYW5lbCxcclxuICAgICAgICAgICAgaGlkZVBhbmVsLFxyXG4gICAgICAgICAgICBoaWRlU2Nyb2xsYmFycyxcclxuICAgICAgICAgICAgYnV5TW9kYWxUeXBlLFxyXG4gICAgICAgICAgICBkZXBvc2l0TW9kYWxUeXBlLFxyXG4gICAgICAgICAgICBhdXRvU2Nyb2xsLFxyXG4gICAgICAgICAgICBhY3RpdmVQYW5lbHMsXHJcbiAgICAgICAgICAgIHBhbmVsV2lkdGgsXHJcbiAgICAgICAgICAgIG1pcnJvclBhbmVscyxcclxuICAgICAgICAgICAgcGFuZWxUYWJzQWN0aXZlLFxyXG4gICAgICAgICAgICBwYW5lbFRhYnMsXHJcbiAgICAgICAgICAgIHNpbmdsZUNvbHVtbk9yZGVyRm9ybSxcclxuICAgICAgICAgICAgZmxpcE9yZGVyQm9vayxcclxuICAgICAgICAgICAgb3JkZXJCb29rUmV2ZXJzZWQsXHJcbiAgICAgICAgICAgIGNoYXJ0Wm9vbSxcclxuICAgICAgICAgICAgY2hhcnRUb29scyxcclxuICAgICAgICAgICAgaGlkZUZ1bmN0aW9uQnV0dG9uc1xyXG4gICAgICAgIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGNvbnN0IHtpc0Zyb3plbiwgZnJvemVuQXNzZXR9ID0gdGhpcy5pc01hcmtldEZyb3plbigpO1xyXG5cclxuICAgICAgICBsZXQgY2VudGVyQ29udGFpbmVyV2lkdGggPSB3aWR0aDtcclxuICAgICAgICBpZiAodGhpcy5yZWZzLmNlbnRlcikge1xyXG4gICAgICAgICAgICBjZW50ZXJDb250YWluZXJXaWR0aCA9IHRoaXMucmVmcy5jZW50ZXIuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYmFzZSA9IG51bGwsXHJcbiAgICAgICAgICAgIHF1b3RlID0gbnVsbCxcclxuICAgICAgICAgICAgYWNjb3VudEJhbGFuY2UgPSBudWxsLFxyXG4gICAgICAgICAgICBxdW90ZUJhbGFuY2UgPSBudWxsLFxyXG4gICAgICAgICAgICBiYXNlQmFsYW5jZSA9IG51bGwsXHJcbiAgICAgICAgICAgIGNvcmVCYWxhbmNlID0gbnVsbCxcclxuICAgICAgICAgICAgcXVvdGVTeW1ib2wsXHJcbiAgICAgICAgICAgIGJhc2VTeW1ib2wsXHJcbiAgICAgICAgICAgIHNob3dDYWxsTGltaXQgPSBmYWxzZSxcclxuICAgICAgICAgICAgbGF0ZXN0LFxyXG4gICAgICAgICAgICBjaGFuZ2VDbGFzcztcclxuXHJcbiAgICAgICAgY29uc3Qgc2hvd1ZvbHVtZUNoYXJ0ID0gdGhpcy5wcm9wcy52aWV3U2V0dGluZ3MuZ2V0KFxyXG4gICAgICAgICAgICBcInNob3dWb2x1bWVDaGFydFwiLFxyXG4gICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaGlkZVNjcm9sbGJhcnMgPSB0aW55U2NyZWVuID8gdHJ1ZSA6IGhpZGVTY3JvbGxiYXJzO1xyXG5cclxuICAgICAgICBpZiAocXVvdGVBc3NldC5zaXplICYmIGJhc2VBc3NldC5zaXplICYmIGN1cnJlbnRBY2NvdW50LnNpemUpIHtcclxuICAgICAgICAgICAgYmFzZSA9IGJhc2VBc3NldDtcclxuICAgICAgICAgICAgcXVvdGUgPSBxdW90ZUFzc2V0O1xyXG4gICAgICAgICAgICBiYXNlU3ltYm9sID0gYmFzZS5nZXQoXCJzeW1ib2xcIik7XHJcbiAgICAgICAgICAgIHF1b3RlU3ltYm9sID0gcXVvdGUuZ2V0KFwic3ltYm9sXCIpO1xyXG5cclxuICAgICAgICAgICAgYWNjb3VudEJhbGFuY2UgPSBjdXJyZW50QWNjb3VudC5nZXQoXCJiYWxhbmNlc1wiKS50b0pTKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoYWNjb3VudEJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGlkIGluIGFjY291bnRCYWxhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09PSBxdW90ZS5nZXQoXCJpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdW90ZUJhbGFuY2UgPSBhY2NvdW50QmFsYW5jZVtpZF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gYmFzZS5nZXQoXCJpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlQmFsYW5jZSA9IGFjY291bnRCYWxhbmNlW2lkXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09PSBcIjEuMy4wXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29yZUJhbGFuY2UgPSBhY2NvdW50QmFsYW5jZVtpZF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzaG93Q2FsbExpbWl0ID0gdGhpcy5fZ2V0U2V0dGxlbWVudEluZm8oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBxdW90ZUlzQml0QXNzZXQgPSBxdW90ZUFzc2V0LmdldChcImJpdGFzc2V0X2RhdGFfaWRcIikgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgbGV0IGJhc2VJc0JpdEFzc2V0ID0gYmFzZUFzc2V0LmdldChcImJpdGFzc2V0X2RhdGFfaWRcIikgPyB0cnVlIDogZmFsc2U7XHJcblxyXG4gICAgICAgIGxldCBzcHJlYWQgPVxyXG4gICAgICAgICAgICBsb3dlc3RBc2sgJiYgaGlnaGVzdEJpZFxyXG4gICAgICAgICAgICAgICAgPyBsb3dlc3RBc2suZ2V0UHJpY2UoKSAtIGhpZ2hlc3RCaWQuZ2V0UHJpY2UoKVxyXG4gICAgICAgICAgICAgICAgOiAwO1xyXG5cclxuICAgICAgICAvLyBMYXRlc3QgcHJpY2VcclxuICAgICAgICBpZiAoYWN0aXZlTWFya2V0SGlzdG9yeS5zaXplKSB7XHJcbiAgICAgICAgICAgIGxldCBsYXRlc3RfdHdvID0gYWN0aXZlTWFya2V0SGlzdG9yeS50YWtlKDIpO1xyXG4gICAgICAgICAgICBsYXRlc3QgPSBsYXRlc3RfdHdvLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIGxldCBzZWNvbmRfbGF0ZXN0ID0gbGF0ZXN0X3R3by5sYXN0KCk7XHJcblxyXG4gICAgICAgICAgICBjaGFuZ2VDbGFzcyA9XHJcbiAgICAgICAgICAgICAgICBsYXRlc3QuZ2V0UHJpY2UoKSA9PT0gc2Vjb25kX2xhdGVzdC5nZXRQcmljZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgPyBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgOiBsYXRlc3QuZ2V0UHJpY2UoKSAtIHNlY29uZF9sYXRlc3QuZ2V0UHJpY2UoKSA+IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcImNoYW5nZS11cFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJjaGFuZ2UtZG93blwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmVlc1xyXG4gICAgICAgIGlmICghY29yZUFzc2V0IHx8ICFPYmplY3Qua2V5cyh0aGlzLnN0YXRlLmZlZVN0YXR1cykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgc2VsbEZlZUFzc2V0LFxyXG4gICAgICAgICAgICBzZWxsRmVlQXNzZXRzLFxyXG4gICAgICAgICAgICBzZWxsRmVlLFxyXG4gICAgICAgICAgICBidXlGZWVBc3NldCxcclxuICAgICAgICAgICAgYnV5RmVlQXNzZXRzLFxyXG4gICAgICAgICAgICBidXlGZWVcclxuICAgICAgICB9ID0gdGhpcy5fZ2V0RmVlQXNzZXRzKHF1b3RlLCBiYXNlLCBjb3JlQXNzZXQpO1xyXG5cclxuICAgICAgICAvLyBEZWNpbWFsc1xyXG4gICAgICAgIGxldCBoYXNQcmVkaWN0aW9uID1cclxuICAgICAgICAgICAgYmFzZS5nZXRJbihbXCJiaXRhc3NldFwiLCBcImlzX3ByZWRpY3Rpb25fbWFya2V0XCJdKSB8fFxyXG4gICAgICAgICAgICBxdW90ZS5nZXRJbihbXCJiaXRhc3NldFwiLCBcImlzX3ByZWRpY3Rpb25fbWFya2V0XCJdKTtcclxuXHJcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGhhc1ByZWRpY3Rpb24pIHtcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBxdW90ZUFzc2V0LmdldEluKFtcIm9wdGlvbnNcIiwgXCJkZXNjcmlwdGlvblwiXSk7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gYXNzZXRVdGlscy5wYXJzZURlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKS5tYWluO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHNtYWxsU2NyZWVuID0gd2lkdGggPCA4NTAgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgbGV0IHRpbnlTY3JlZW4gPSB3aWR0aCA8IDY0MCA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgbWluQ2hhcnRIZWlnaHQgPSAzMDA7XHJcbiAgICAgICAgY29uc3QgdGhpc0NoYXJ0SGVpZ2h0ID0gTWF0aC5tYXgoXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaGVpZ2h0ID4gMTEwMCA/IGNoYXJ0SGVpZ2h0IDogY2hhcnRIZWlnaHQgLSAxMjUsXHJcbiAgICAgICAgICAgIG1pbkNoYXJ0SGVpZ2h0XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IGV4cGlyYXRpb25UeXBlID0gdGhpcy5zdGF0ZS5leHBpcmF0aW9uVHlwZTtcclxuICAgICAgICBsZXQgZXhwaXJhdGlvbkN1c3RvbVRpbWUgPSB0aGlzLnN0YXRlLmV4cGlyYXRpb25DdXN0b21UaW1lO1xyXG5cclxuICAgICAgICBsZXQgaXNQYW5lbEFjdGl2ZSA9IGFjdGl2ZVBhbmVscy5sZW5ndGggPj0gMSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICBsZXQgaXNQcmVkaWN0aW9uTWFya2V0ID0gYmFzZS5nZXRJbihbXHJcbiAgICAgICAgICAgIFwiYml0YXNzZXRcIixcclxuICAgICAgICAgICAgXCJpc19wcmVkaWN0aW9uX21hcmtldFwiXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIC8qKipcclxuICAgICAgICAgKiBHZW5lcmF0ZSBsYXlvdXQgY2FyZHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBsZXQgYWN0aW9uQ2FyZEluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgY29uc3QgYnV5U2VsbFRpdGxlID0gaXNCaWQgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJleGNoYW5nZS1jb250ZW50LWhlYWRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVXaXRoTGlua3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nPVwiZXhjaGFuZ2UuYnV5c2VsbF9mb3JtYXR0ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub0xpbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9UaXBcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5cz17W1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYXNzZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5wcm9wcy5xdW90ZUFzc2V0LmdldChcInN5bWJvbFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmc6IFwiYXNzZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRyYW5zbGF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpc0JpZCA/IFwiZXhjaGFuZ2UuYnV5XCIgOiBcImV4Y2hhbmdlLnNlbGxcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmc6IFwiZGlyZWN0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IGJ1eUZvcm0gPSBpc0Zyb3plbiA/IG51bGwgOiB0aW55U2NyZWVuICYmXHJcbiAgICAgICAgIXRoaXMuc3RhdGUubW9iaWxlS2V5LmluY2x1ZGVzKFwiYnV5U2VsbFRhYlwiKSA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgIDxUYWJzXHJcbiAgICAgICAgICAgICAgICBhbmltYXRlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVLZXk9e1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudmlld1NldHRpbmdzLmdldChcIm9yZGVyLWZvcm0tYmlkXCIpIHx8IFwibGltaXRcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlT3JkZXJUeXBlVGFiQ2hhbmdlLmJpbmQodGhpcywgXCJiaWRcIil9XHJcbiAgICAgICAgICAgICAgICB0YWJCYXJFeHRyYUNvbnRlbnQ9ezxkaXY+e2J1eVNlbGxUaXRsZSh0cnVlKX08L2Rpdj59XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0QWN0aXZlS2V5PXtcImxpbWl0XCJ9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcclxuICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLS1idXktc2VsbC1mb3JtXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdmVydGljYWxPcmRlckZvcm0gJiYgIXNtYWxsU2NyZWVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNlbnRlckNvbnRhaW5lcldpZHRoID4gMTIwMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwibWVkaXVtLTYgbGFyZ2UtNiB4bGFyZ2UtNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY2VudGVyQ29udGFpbmVyV2lkdGggPiA4MDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJtZWRpdW0tNlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzbWFsbC0xMiBleGNoYW5nZS1wYWRkZWQgbWlkZGxlLWNvbnRlbnRcIixcclxuICAgICAgICAgICAgICAgICAgICBmbGlwQnV5U2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGBvcmRlci0ke2J1eVNlbGxUb3AgPyAyIDogM30gbGFyZ2Utb3JkZXItJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1eVNlbGxUb3AgPyAyIDogNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBzZWxsLWZvcm1gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYG9yZGVyLSR7YnV5U2VsbFRvcCA/IDEgOiAyfSBsYXJnZS1vcmRlci0ke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV5U2VsbFRvcCA/IDEgOiA0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGJ1eS1mb3JtYFxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPFRhYnMuVGFiUGFuZVxyXG4gICAgICAgICAgICAgICAgICAgIHRhYj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFwiZXhjaGFuZ2UubGltaXRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAga2V5PXtcImxpbWl0XCJ9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPEJ1eVNlbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1NjYWxlZE9yZGVyTW9kYWw9e3RoaXMuc2hvd1NjYWxlZE9yZGVyTW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YGFjdGlvbkNhcmRfJHthY3Rpb25DYXJkSW5kZXgrK31gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkJvcnJvdz17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlSXNCaXRBc3NldCA/IHRoaXMuX2JvcnJvd0Jhc2UuYmluZCh0aGlzKSA6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkJ1eT17dGhpcy5fb25CdXkuYmluZCh0aGlzLCBcImJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25EZXBvc2l0PXt0aGlzLl9vbkRlcG9zaXQuYmluZCh0aGlzLCBcImJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEFjY291bnQ9e2N1cnJlbnRBY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZWRDb2luPXt0aGlzLnByb3BzLmJhY2tlZENvaW5zLmZpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0+IGEuc3ltYm9sID09PSBiYXNlLmdldChcInN5bWJvbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50QnJpZGdlcz17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJyaWRnZUNvaW5zLmdldChiYXNlLmdldChcInN5bWJvbFwiKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc09wZW49e3RoaXMuc3RhdGUuYnV5U2VsbE9wZW59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uVG9nZ2xlT3Blbj17dGhpcy5fdG9nZ2xlT3BlbkJ1eVNlbGwuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50V2lkdGg9e2NlbnRlckNvbnRhaW5lcldpZHRofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXM9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IG1pcnJvclBhbmVscyA/IDE1IDogNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYmlkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUhlYWRlcj17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvblR5cGU9e2V4cGlyYXRpb25UeXBlW1wiYmlkXCJdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9ucz17dGhpcy5FWFBJUkFUSU9OU31cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbkN1c3RvbVRpbWU9e2V4cGlyYXRpb25DdXN0b21UaW1lW1wiYmlkXCJdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkV4cGlyYXRpb25UeXBlQ2hhbmdlPXt0aGlzLl9oYW5kbGVFeHBpcmF0aW9uQ2hhbmdlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiaWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkV4cGlyYXRpb25DdXN0b21DaGFuZ2U9e3RoaXMuX2hhbmRsZUN1c3RvbUV4cGlyYXRpb25DaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJpZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17YmlkLnRvUmVjZWl2ZVRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlPXtiaWQucHJpY2VUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbD17YmlkLmZvclNhbGVUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdW90ZT17cXVvdGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U9e2Jhc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudENoYW5nZT17dGhpcy5fb25JbnB1dFJlY2VpdmUuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJpZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmljZUNoYW5nZT17dGhpcy5fb25JbnB1dFByaWNlLmJpbmQodGhpcywgXCJiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFByaWNlPXt0aGlzLl9jdXJyZW50UHJpY2VDbGljay5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbENoYW5nZT17dGhpcy5fb25JbnB1dFNlbGwuYmluZCh0aGlzLCBcImJpZFwiLCBmYWxzZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyRm9ybT17dGhpcy5fY2xlYXJGb3Jtcy5iaW5kKHRoaXMsIFwiYmlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlPXtiYXNlQmFsYW5jZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZUlkPXtiYXNlLmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblN1Ym1pdD17dGhpcy5fY3JlYXRlTGltaXRPcmRlckNvbmZpcm0uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlQmFsYW5jZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVCYWxhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV5RmVlQXNzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJ1eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VQcmVjaXNpb249e2Jhc2UuZ2V0KFwicHJlY2lzaW9uXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdW90ZVByZWNpc2lvbj17cXVvdGUuZ2V0KFwicHJlY2lzaW9uXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFByZWNpc2lvbj17YmFzZS5nZXQoXCJwcmVjaXNpb25cIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZT17bG93ZXN0QXNrLmdldFByaWNlKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZU9iamVjdD17bG93ZXN0QXNrfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXtjdXJyZW50QWNjb3VudC5nZXQoXCJuYW1lXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZWU9e2J1eUZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzRmVlQmFsYW5jZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmZlZVN0YXR1c1tidXlGZWUuYXNzZXRfaWRdLmhhc0JhbGFuY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZWVBc3NldHM9e2J1eUZlZUFzc2V0c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmVlQXNzZXQ9e2J1eUZlZUFzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUZlZUFzc2V0PXt0aGlzLm9uQ2hhbmdlRmVlQXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJ1eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUHJlZGljdGlvbk1hcmtldD17YmFzZS5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJpdGFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlzX3ByZWRpY3Rpb25fbWFya2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRmxpcD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZmxpcEJ1eVNlbGwgPyB0aGlzLl9mbGlwQnV5U2VsbC5iaW5kKHRoaXMpIDogbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uVG9nZ2xlUG9zaXRpb249e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5idXlTZWxsVG9wICYmICF2ZXJ0aWNhbE9yZGVyQm9va1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5fdG9nZ2xlQnV5U2VsbFBvc2l0aW9uLmJpbmQodGhpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlT3JkZXJGb3JtPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFzbWFsbFNjcmVlbiAmJiAoIWZsaXBCdXlTZWxsIHx8IHZlcnRpY2FsT3JkZXJGb3JtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5fbW92ZU9yZGVyRm9ybS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWxPcmRlckZvcm09e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIXNtYWxsU2NyZWVuID8gdmVydGljYWxPcmRlckZvcm0gOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUGFuZWxBY3RpdmU9e2lzUGFuZWxBY3RpdmV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVBhbmVscz17YWN0aXZlUGFuZWxzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGVDb2x1bW5PcmRlckZvcm09e3NpbmdsZUNvbHVtbk9yZGVyRm9ybX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUZ1bmN0aW9uQnV0dG9ucz17aGlkZUZ1bmN0aW9uQnV0dG9uc31cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XHJcbiAgICAgICAgICAgICAgICA8VGFicy5UYWJQYW5lXHJcbiAgICAgICAgICAgICAgICAgICAgdGFiPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJleGNoYW5nZS5zY2FsZWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAga2V5PXtcInNjYWxlZFwifVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxTY2FsZWRPcmRlclRhYlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uVHlwZT17ZXhwaXJhdGlvblR5cGVbXCJiaWRcIl19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb25zPXt0aGlzLkVYUElSQVRJT05TfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uQ3VzdG9tVGltZT17ZXhwaXJhdGlvbkN1c3RvbVRpbWVbXCJiaWRcIl19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRXhwaXJhdGlvblR5cGVDaGFuZ2U9e3RoaXMuX2hhbmRsZUV4cGlyYXRpb25DaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJpZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRXhwaXJhdGlvbkN1c3RvbUNoYW5nZT17dGhpcy5faGFuZGxlQ3VzdG9tRXhwaXJhdGlvbkNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYmlkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFByaWNlPXtsb3dlc3RBc2suZ2V0UHJpY2UoKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdENsaWNrZWRQcmljZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmFzayAmJiB0aGlzLnN0YXRlLmFzay5wcmljZVRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWNjb3VudD17Y3VycmVudEFjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVNjYWxlZE9yZGVyPXt0aGlzLl9jcmVhdGVTY2FsZWRPcmRlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT17XCJiaWRcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVBc3NldD17cXVvdGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VBc3NldD17YmFzZX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XHJcbiAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBsZXQgc2VsbEZvcm0gPSBpc0Zyb3plbiA/IG51bGwgOiB0aW55U2NyZWVuICYmXHJcbiAgICAgICAgIXRoaXMuc3RhdGUubW9iaWxlS2V5LmluY2x1ZGVzKFwiYnV5U2VsbFRhYlwiKSA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgIDxUYWJzXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVLZXk9e1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudmlld1NldHRpbmdzLmdldChcIm9yZGVyLWZvcm0tYXNrXCIpIHx8IFwibGltaXRcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlT3JkZXJUeXBlVGFiQ2hhbmdlLmJpbmQodGhpcywgXCJhc2tcIil9XHJcbiAgICAgICAgICAgICAgICBhbmltYXRlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICB0YWJCYXJFeHRyYUNvbnRlbnQ9ezxkaXY+e2J1eVNlbGxUaXRsZShmYWxzZSl9PC9kaXY+fVxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdEFjdGl2ZUtleT17XCJsaW1pdFwifVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS0tYnV5LXNlbGwtZm9ybVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsT3JkZXJGb3JtICYmICFzbWFsbFNjcmVlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjZW50ZXJDb250YWluZXJXaWR0aCA+IDEyMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcIm1lZGl1bS02IGxhcmdlLTYgeGxhcmdlLTRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNlbnRlckNvbnRhaW5lcldpZHRoID4gODAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwibWVkaXVtLTZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic21hbGwtMTIgZXhjaGFuZ2UtcGFkZGVkIG1pZGRsZS1jb250ZW50XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZmxpcEJ1eVNlbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBgb3JkZXItJHtidXlTZWxsVG9wID8gMSA6IDJ9IGxhcmdlLW9yZGVyLSR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXlTZWxsVG9wID8gMSA6IDRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gYnV5LWZvcm1gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYG9yZGVyLSR7YnV5U2VsbFRvcCA/IDIgOiAzfSBsYXJnZS1vcmRlci0ke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV5U2VsbFRvcCA/IDIgOiA1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHNlbGwtZm9ybWBcclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxUYWJzLlRhYlBhbmVcclxuICAgICAgICAgICAgICAgICAgICB0YWI9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImV4Y2hhbmdlLmxpbWl0XCIpfVxyXG4gICAgICAgICAgICAgICAgICAgIGtleT17XCJsaW1pdFwifVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxCdXlTZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTY2FsZWRPcmRlck1vZGFsPXt0aGlzLnNob3dTY2FsZWRPcmRlck1vZGFsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2BhY3Rpb25DYXJkXyR7YWN0aW9uQ2FyZEluZGV4Kyt9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Cb3Jyb3c9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVJc0JpdEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9ib3Jyb3dRdW90ZS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25CdXk9e3RoaXMuX29uQnV5LmJpbmQodGhpcywgXCJhc2tcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRGVwb3NpdD17dGhpcy5fb25EZXBvc2l0LmJpbmQodGhpcywgXCJhc2tcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBY2NvdW50PXtjdXJyZW50QWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VkQ29pbj17dGhpcy5wcm9wcy5iYWNrZWRDb2lucy5maW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9PiBhLnN5bWJvbCA9PT0gcXVvdGUuZ2V0KFwic3ltYm9sXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCcmlkZ2VzPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYnJpZGdlQ29pbnMuZ2V0KHF1b3RlLmdldChcInN5bWJvbFwiKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc09wZW49e3RoaXMuc3RhdGUuYnV5U2VsbE9wZW59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uVG9nZ2xlT3Blbj17dGhpcy5fdG9nZ2xlT3BlbkJ1eVNlbGwuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50V2lkdGg9e2NlbnRlckNvbnRhaW5lcldpZHRofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXM9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IG1pcnJvclBhbmVscyA/IDE1IDogNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYXNrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUhlYWRlcj17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXthc2suZm9yU2FsZVRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlPXthc2sucHJpY2VUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbD17YXNrLnRvUmVjZWl2ZVRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlPXtxdW90ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17YmFzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvblR5cGU9e2V4cGlyYXRpb25UeXBlW1wiYXNrXCJdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9ucz17dGhpcy5FWFBJUkFUSU9OU31cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbkN1c3RvbVRpbWU9e2V4cGlyYXRpb25DdXN0b21UaW1lW1wiYXNrXCJdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkV4cGlyYXRpb25UeXBlQ2hhbmdlPXt0aGlzLl9oYW5kbGVFeHBpcmF0aW9uQ2hhbmdlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhc2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkV4cGlyYXRpb25DdXN0b21DaGFuZ2U9e3RoaXMuX2hhbmRsZUN1c3RvbUV4cGlyYXRpb25DaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFza1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudENoYW5nZT17dGhpcy5fb25JbnB1dFNlbGwuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFza1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VDaGFuZ2U9e3RoaXMuX29uSW5wdXRQcmljZS5iaW5kKHRoaXMsIFwiYXNrXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQcmljZT17dGhpcy5fY3VycmVudFByaWNlQ2xpY2suYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxDaGFuZ2U9e3RoaXMuX29uSW5wdXRSZWNlaXZlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhc2tcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJGb3JtPXt0aGlzLl9jbGVhckZvcm1zLmJpbmQodGhpcywgXCJhc2tcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2U9e3F1b3RlQmFsYW5jZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZUlkPXtxdW90ZS5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25TdWJtaXQ9e3RoaXMuX2NyZWF0ZUxpbWl0T3JkZXJDb25maXJtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVCYWxhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZUJhbGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxsRmVlQXNzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNlbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlUHJlY2lzaW9uPXtxdW90ZS5nZXQoXCJwcmVjaXNpb25cIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlUHJlY2lzaW9uPXtxdW90ZS5nZXQoXCJwcmVjaXNpb25cIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsUHJlY2lzaW9uPXtiYXNlLmdldChcInByZWNpc2lvblwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFByaWNlPXtoaWdoZXN0QmlkLmdldFByaWNlKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZU9iamVjdD17aGlnaGVzdEJpZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17Y3VycmVudEFjY291bnQuZ2V0KFwibmFtZVwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmVlPXtzZWxsRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNGZWVCYWxhbmNlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZmVlU3RhdHVzW3NlbGxGZWUuYXNzZXRfaWRdLmhhc0JhbGFuY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZWVBc3NldHM9e3NlbGxGZWVBc3NldHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlZUFzc2V0PXtzZWxsRmVlQXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlRmVlQXNzZXQ9e3RoaXMub25DaGFuZ2VGZWVBc3NldC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUHJlZGljdGlvbk1hcmtldD17cXVvdGUuZ2V0SW4oW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpc19wcmVkaWN0aW9uX21hcmtldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkZsaXA9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxpcEJ1eVNlbGwgPyB0aGlzLl9mbGlwQnV5U2VsbC5iaW5kKHRoaXMpIDogbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uVG9nZ2xlUG9zaXRpb249e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5idXlTZWxsVG9wICYmICF2ZXJ0aWNhbE9yZGVyQm9va1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5fdG9nZ2xlQnV5U2VsbFBvc2l0aW9uLmJpbmQodGhpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlT3JkZXJGb3JtPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFzbWFsbFNjcmVlbiAmJiAoZmxpcEJ1eVNlbGwgfHwgdmVydGljYWxPcmRlckZvcm0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9tb3ZlT3JkZXJGb3JtLmJpbmQodGhpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbE9yZGVyRm9ybT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhc21hbGxTY3JlZW4gPyB2ZXJ0aWNhbE9yZGVyRm9ybSA6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQYW5lbEFjdGl2ZT17aXNQYW5lbEFjdGl2ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlUGFuZWxzPXthY3RpdmVQYW5lbHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZUNvbHVtbk9yZGVyRm9ybT17c2luZ2xlQ29sdW1uT3JkZXJGb3JtfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlRnVuY3Rpb25CdXR0b25zPXtoaWRlRnVuY3Rpb25CdXR0b25zfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cclxuXHJcbiAgICAgICAgICAgICAgICA8VGFicy5UYWJQYW5lXHJcbiAgICAgICAgICAgICAgICAgICAgdGFiPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJleGNoYW5nZS5zY2FsZWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAga2V5PXtcInNjYWxlZFwifVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxTY2FsZWRPcmRlclRhYlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uVHlwZT17ZXhwaXJhdGlvblR5cGVbXCJhc2tcIl19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb25zPXt0aGlzLkVYUElSQVRJT05TfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uQ3VzdG9tVGltZT17ZXhwaXJhdGlvbkN1c3RvbVRpbWVbXCJhc2tcIl19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRXhwaXJhdGlvblR5cGVDaGFuZ2U9e3RoaXMuX2hhbmRsZUV4cGlyYXRpb25DaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFza1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRXhwaXJhdGlvbkN1c3RvbUNoYW5nZT17dGhpcy5faGFuZGxlQ3VzdG9tRXhwaXJhdGlvbkNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYXNrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFByaWNlPXtoaWdoZXN0QmlkLmdldFByaWNlKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RDbGlja2VkUHJpY2U9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5hc2sgJiYgdGhpcy5zdGF0ZS5hc2sucHJpY2VUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEFjY291bnQ9e2N1cnJlbnRBY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVTY2FsZWRPcmRlcj17dGhpcy5fY3JlYXRlU2NhbGVkT3JkZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJhc2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlQXNzZXQ9e2Jhc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlQXNzZXQ9e3F1b3RlfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cclxuICAgICAgICAgICAgPC9UYWJzPlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGxldCBteU1hcmtldHMgPVxyXG4gICAgICAgICAgICB0aW55U2NyZWVuICYmICF0aGlzLnN0YXRlLm1vYmlsZUtleS5pbmNsdWRlcyhcIm15TWFya2V0c1wiKSA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICA8TXlNYXJrZXRzXHJcbiAgICAgICAgICAgICAgICAgICAga2V5PXtgYWN0aW9uQ2FyZF8ke2FjdGlvbkNhcmRJbmRleCsrfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBsZWZ0LW9yZGVyLWJvb2sgbm8tcGFkZGluZyBuby1tYXJnaW4gdmVydGljYWxcIlxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbldpZHRoOiAzNTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogc21hbGxTY3JlZW4gPyA2ODAgOiBcImNhbGMoMTAwdmggLSAyMTVweClcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogc21hbGxTY3JlZW4gPyAxMCA6IDBcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlclN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogIXNtYWxsU2NyZWVuID8gXCJkaXNwbGF5OiBub25lXCIgOiBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICBub0hlYWRlcj17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICBsaXN0SGVpZ2h0PXt0aGlzLnN0YXRlLmhlaWdodCAtIDQ1MH1cclxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zPXtbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiBcInN0YXJcIiwgaW5kZXg6IDF9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTogXCJtYXJrZXRcIiwgaW5kZXg6IDJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTogXCJ2b2xcIiwgaW5kZXg6IDN9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTogXCJwcmljZVwiLCBpbmRleDogNH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiBcImNoYW5nZVwiLCBpbmRleDogNX1cclxuICAgICAgICAgICAgICAgICAgICBdfVxyXG4gICAgICAgICAgICAgICAgICAgIGZpbmRDb2x1bW5zPXtbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiBcIm1hcmtldFwiLCBpbmRleDogMX0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiBcImlzc3VlclwiLCBpbmRleDogMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiBcInZvbFwiLCBpbmRleDogM30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiBcImFkZFwiLCBpbmRleDogNH1cclxuICAgICAgICAgICAgICAgICAgICBdfVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQ9e2Ake3F1b3RlU3ltYm9sfV8ke2Jhc2VTeW1ib2x9YH1cclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbj17dGhpcy5wcm9wcy5sb2NhdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5PXt0aGlzLnByb3BzLmhpc3Rvcnl9XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFiPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiVmVydGljYWxQYW5lbCA/IHRhYlZlcnRpY2FsUGFuZWwgOiBcIm15LW1hcmtldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IFRyb2xsYm94ID0gKFxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICF0aGlzLnByb3BzLnZpZXdDaGF0ID8gMCA6IFwiMCAwIDAgMFwiXHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1tYXJnaW4gdmVydGljYWwgc2hyaW5rXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3RvZ2dsZUNoYXQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJleGNoYW5nZS1jb250ZW50LWhlYWRlciBjbGlja2FibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogXCJsZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1RvcDogNixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0JvdHRvbTogNlxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMudmlld0NoYXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiYjOTY2MDs8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+JiM5NjUwOzwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnRyb2xsYm94XCIgLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnZpZXdDaGF0ID8gPENoYXRCcm8gaGVpZ2h0PXtcIjQwMHB4XCJ9IC8+IDogbnVsbH1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IG9yZGVyQm9vayA9XHJcbiAgICAgICAgICAgIHRpbnlTY3JlZW4gJiYgIXRoaXMuc3RhdGUubW9iaWxlS2V5LmluY2x1ZGVzKFwib3JkZXJCb29rXCIpID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgIDxPcmRlckJvb2tcclxuICAgICAgICAgICAgICAgICAgICByZWY9XCJvcmRlcl9ib29rXCJcclxuICAgICAgICAgICAgICAgICAgICBrZXk9e2BhY3Rpb25DYXJkXyR7YWN0aW9uQ2FyZEluZGV4Kyt9YH1cclxuICAgICAgICAgICAgICAgICAgICBsYXRlc3Q9e2xhdGVzdCAmJiBsYXRlc3QuZ2V0UHJpY2UoKX1cclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VDbGFzcz17Y2hhbmdlQ2xhc3N9XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJzPXttYXJrZXRMaW1pdE9yZGVyc31cclxuICAgICAgICAgICAgICAgICAgICBjYWxscz17bWFya2V0Q2FsbE9yZGVyc31cclxuICAgICAgICAgICAgICAgICAgICBpbnZlcnRlZENhbGxzPXtpbnZlcnRlZENhbGxzfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkQmlkcz17Y29tYmluZWRCaWRzfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkQXNrcz17Y29tYmluZWRBc2tzfVxyXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hlc3RCaWQ9e2hpZ2hlc3RCaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgbG93ZXN0QXNrPXtsb3dlc3RBc2t9XHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxCaWRzPXt0b3RhbHMuYmlkfVxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQXNrcz17dG90YWxzLmFza31cclxuICAgICAgICAgICAgICAgICAgICBiYXNlPXtiYXNlfVxyXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlPXtxdW90ZX1cclxuICAgICAgICAgICAgICAgICAgICBiYXNlU3ltYm9sPXtiYXNlU3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlU3ltYm9sPXtxdW90ZVN5bWJvbH1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vcmRlcmJvb2tDbGljay5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgIGhvcml6b250YWw9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdmVydGljYWxPcmRlckJvb2sgfHwgc21hbGxTY3JlZW4gPyB0cnVlIDogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZmxpcE9yZGVyQm9vaz17ZmxpcE9yZGVyQm9va31cclxuICAgICAgICAgICAgICAgICAgICBvcmRlckJvb2tSZXZlcnNlZD17b3JkZXJCb29rUmV2ZXJzZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0UmVhZHk9e21hcmtldFJlYWR5fVxyXG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXJDbGFzcz17Y25hbWVzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJDb250YWluZXJXaWR0aCA+IDEyMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJ4bGFyZ2UtOFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNlbnRlckNvbnRhaW5lcldpZHRoID4gODAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1lZGl1bS0xMiBsYXJnZS0xMlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInNtYWxsLTEyIGdyaWQtYmxvY2sgb3JkZXJib29rIG5vLXBhZGRpbmcgYWxpZ24tc3BhY2VkIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBvcmRlci0ke2J1eVNlbGxUb3AgPyAzIDogMX0geGxhcmdlLW9yZGVyLSR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXlTZWxsVG9wID8gNCA6IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWBcclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIGlubmVyQ2xhc3M9e2NuYW1lcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyQ29udGFpbmVyV2lkdGggPiAxMjAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwibWVkaXVtLTZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjZW50ZXJDb250YWluZXJXaWR0aCA+IDgwMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJtZWRpdW0tNiBsYXJnZS02XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic21hbGwtMTIgbWlkZGxlLWNvbnRlbnRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXRpbnlTY3JlZW4gPyBcImV4Y2hhbmdlLXBhZGRlZFwiIDogXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEFjY291bnQ9e3RoaXMucHJvcHMuY3VycmVudEFjY291bnQuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlR3JvdXBPcmRlckxpbWl0Q2hhbmdlPXt0aGlzLl9vbkdyb3VwT3JkZXJMaW1pdENoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICB0cmFja2VkR3JvdXBzQ29uZmlnPXt0cmFja2VkR3JvdXBzQ29uZmlnfVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRHcm91cE9yZGVyTGltaXQ9e2N1cnJlbnRHcm91cE9yZGVyTGltaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBlZEJpZHM9e2dyb3VwZWRCaWRzfVxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwZWRBc2tzPXtncm91cGVkQXNrc31cclxuICAgICAgICAgICAgICAgICAgICBpc1BhbmVsQWN0aXZlPXthY3RpdmVQYW5lbHMubGVuZ3RoID49IDF9XHJcbiAgICAgICAgICAgICAgICAgICAgb25Ub2dnbGVQb3NpdGlvbj17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnN0YXRlLmJ1eVNlbGxUb3BcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5fdG9nZ2xlQnV5U2VsbFBvc2l0aW9uLmJpbmQodGhpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBtb3ZlT3JkZXJCb29rPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXNtYWxsU2NyZWVuID8gdGhpcy5fbW92ZU9yZGVyQm9vay5iaW5kKHRoaXMpIDogbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzbWFsbFNjcmVlbj17c21hbGxTY3JlZW59XHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZVNjcm9sbGJhcnM9e2hpZGVTY3JvbGxiYXJzfVxyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9TY3JvbGw9e2F1dG9TY3JvbGx9XHJcbiAgICAgICAgICAgICAgICAgICAgb25GbGlwT3JkZXJCb29rPXt0aGlzLl9mbGlwT3JkZXJCb29rLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZUZ1bmN0aW9uQnV0dG9ucz17aGlkZUZ1bmN0aW9uQnV0dG9uc31cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIHBhbmVsV2lkdGggPSAzNTA7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5yZWZzLm9yZGVyX2Jvb2sgJiZcclxuICAgICAgICAgICAgdGhpcy5yZWZzLm9yZGVyX2Jvb2sudmVydGljYWxTdGlja3lUYWJsZSAmJlxyXG4gICAgICAgICAgICB0aGlzLnJlZnMub3JkZXJfYm9vay52ZXJ0aWNhbFN0aWNreVRhYmxlLmN1cnJlbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5yZWZzLm9yZGVyX2Jvb2sudmVydGljYWxTdGlja3lUYWJsZS5jdXJyZW50LnNjcm9sbERhdGFcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcGFuZWxXaWR0aCA9IHRoaXMucmVmcy5vcmRlcl9ib29rLnZlcnRpY2FsU3RpY2t5VGFibGUuY3VycmVudFxyXG4gICAgICAgICAgICAgICAgLnNjcm9sbERhdGEuc2Nyb2xsV2lkdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbWFya2V0SGlzdG9yeSA9XHJcbiAgICAgICAgICAgIHRpbnlTY3JlZW4gJiZcclxuICAgICAgICAgICAgIXRoaXMuc3RhdGUubW9iaWxlS2V5LmluY2x1ZGVzKFwibWFya2V0SGlzdG9yeVwiKSA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICA8TWFya2V0SGlzdG9yeVxyXG4gICAgICAgICAgICAgICAgICAgIGtleT17YGFjdGlvbkNhcmRfJHthY3Rpb25DYXJkSW5kZXgrK31gfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5lbFRhYnNbXCJoaXN0b3J5XCJdID09IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY2VudGVyQ29udGFpbmVyV2lkdGggPiAxMjAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwibWVkaXVtLTYgbGFyZ2UtNiB4bGFyZ2UtNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNlbnRlckNvbnRhaW5lcldpZHRoID4gODAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIm1lZGl1bS02XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJtZWRpdW0tMTJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJuby1wYWRkaW5nIG5vLW92ZXJmbG93IG1pZGRsZS1jb250ZW50IHNtYWxsLTEyIG9yZGVyLTZcIlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJDbGFzcz17IXRpbnlTY3JlZW4gPyBcImV4Y2hhbmdlLXBhZGRlZFwiIDogXCJcIn1cclxuICAgICAgICAgICAgICAgICAgICBpbm5lclN0eWxlPXt7cGFkZGluZ0JvdHRvbTogIXRpbnlTY3JlZW4gPyBcIjEuMnJlbVwiIDogXCIwXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgIG5vSGVhZGVyPXtwYW5lbFRhYnNbXCJoaXN0b3J5XCJdID09IDAgPyBmYWxzZSA6IHRydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeT17YWN0aXZlTWFya2V0SGlzdG9yeX1cclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWNjb3VudD17Y3VycmVudEFjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgbXlIaXN0b3J5PXtjdXJyZW50QWNjb3VudC5nZXQoXCJoaXN0b3J5XCIpfVxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2U9e2Jhc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGU9e3F1b3RlfVxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VTeW1ib2w9e2Jhc2VTeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGVTeW1ib2w9e3F1b3RlU3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhYj17XCJoaXN0b3J5XCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgdGlueVNjcmVlbj17dGlueVNjcmVlbn1cclxuICAgICAgICAgICAgICAgICAgICBpc1BhbmVsQWN0aXZlPXtpc1BhbmVsQWN0aXZlfVxyXG4gICAgICAgICAgICAgICAgICAgIGhpZGVTY3JvbGxiYXJzPXtoaWRlU2Nyb2xsYmFyc31cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIGxldCBteU1hcmtldEhpc3RvcnkgPVxyXG4gICAgICAgICAgICB0aW55U2NyZWVuICYmXHJcbiAgICAgICAgICAgICF0aGlzLnN0YXRlLm1vYmlsZUtleS5pbmNsdWRlcyhcIm15TWFya2V0SGlzdG9yeVwiKSA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICA8TWFya2V0SGlzdG9yeVxyXG4gICAgICAgICAgICAgICAgICAgIGtleT17YGFjdGlvbkNhcmRfJHthY3Rpb25DYXJkSW5kZXgrK31gfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5lbFRhYnNbXCJteV9oaXN0b3J5XCJdID09IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY2VudGVyQ29udGFpbmVyV2lkdGggPiAxMjAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwibWVkaXVtLTYgbGFyZ2UtNiB4bGFyZ2UtNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNlbnRlckNvbnRhaW5lcldpZHRoID4gODAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIm1lZGl1bS02XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJtZWRpdW0tMTJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJuby1wYWRkaW5nIG5vLW92ZXJmbG93IG1pZGRsZS1jb250ZW50IHNtYWxsLTEyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsT3JkZXJCb29rIHx8IHZlcnRpY2FsT3JkZXJGb3JtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwib3JkZXItNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwib3JkZXItM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICBpbm5lckNsYXNzPXshdGlueVNjcmVlbiA/IFwiZXhjaGFuZ2UtcGFkZGVkXCIgOiBcIlwifVxyXG4gICAgICAgICAgICAgICAgICAgIGlubmVyU3R5bGU9e3twYWRkaW5nQm90dG9tOiAhdGlueVNjcmVlbiA/IFwiMS4ycmVtXCIgOiBcIjBcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgbm9IZWFkZXI9e3BhbmVsVGFic1tcIm15X2hpc3RvcnlcIl0gPT0gMCA/IGZhbHNlIDogdHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5PXthY3RpdmVNYXJrZXRIaXN0b3J5fVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBY2NvdW50PXtjdXJyZW50QWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICBteUhpc3Rvcnk9e2N1cnJlbnRBY2NvdW50LmdldChcImhpc3RvcnlcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZT17YmFzZX1cclxuICAgICAgICAgICAgICAgICAgICBxdW90ZT17cXVvdGV9XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVN5bWJvbD17YmFzZVN5bWJvbH1cclxuICAgICAgICAgICAgICAgICAgICBxdW90ZVN5bWJvbD17cXVvdGVTeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFiPXtcIm15X2hpc3RvcnlcIn1cclxuICAgICAgICAgICAgICAgICAgICB0aW55U2NyZWVuPXt0aW55U2NyZWVufVxyXG4gICAgICAgICAgICAgICAgICAgIGlzUGFuZWxBY3RpdmU9e2lzUGFuZWxBY3RpdmV9XHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZVNjcm9sbGJhcnM9e2hpZGVTY3JvbGxiYXJzfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IG15T3Blbk9yZGVycyA9XHJcbiAgICAgICAgICAgIHRpbnlTY3JlZW4gJiZcclxuICAgICAgICAgICAgIXRoaXMuc3RhdGUubW9iaWxlS2V5LmluY2x1ZGVzKFwibXlPcGVuT3JkZXJzXCIpID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgIDxNYXJrZXRPcmRlcnNcclxuICAgICAgICAgICAgICAgICAgICBrZXk9e2BhY3Rpb25DYXJkXyR7YWN0aW9uQ2FyZEluZGV4Kyt9YH1cclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbkJvdHRvbTogIXRpbnlTY3JlZW4gPyAxNSA6IDB9fVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5lbFRhYnNbXCJteV9vcmRlcnNcIl0gPT0gMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjZW50ZXJDb250YWluZXJXaWR0aCA+IDEyMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJtZWRpdW0tNiBsYXJnZS02IHhsYXJnZS00XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY2VudGVyQ29udGFpbmVyV2lkdGggPiA4MDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwibWVkaXVtLTZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIm1lZGl1bS0xMlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5vLXBhZGRpbmcgbm8tb3ZlcmZsb3cgbWlkZGxlLWNvbnRlbnQgc21hbGwtMTIgb3JkZXItN1wiXHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICBpbm5lckNsYXNzPXshdGlueVNjcmVlbiA/IFwiZXhjaGFuZ2UtcGFkZGVkXCIgOiBcIlwifVxyXG4gICAgICAgICAgICAgICAgICAgIGlubmVyU3R5bGU9e3twYWRkaW5nQm90dG9tOiAhdGlueVNjcmVlbiA/IFwiMS4ycmVtXCIgOiBcIjBcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgbm9IZWFkZXI9e3BhbmVsVGFic1tcIm15X29yZGVyc1wiXSA9PSAwID8gZmFsc2UgOiB0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVycz17bWFya2V0TGltaXRPcmRlcnN9XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGxlT3JkZXJzPXttYXJrZXRTZXR0bGVPcmRlcnN9XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEFjY291bnQ9e2N1cnJlbnRBY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2U9e2Jhc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGU9e3F1b3RlfVxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VTeW1ib2w9e2Jhc2VTeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGVTeW1ib2w9e3F1b3RlU3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhYj17XCJteV9vcmRlcnNcIn1cclxuICAgICAgICAgICAgICAgICAgICBvbkNhbmNlbD17dGhpcy5fY2FuY2VsTGltaXRPcmRlci5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgIGZsaXBNeU9yZGVycz17dGhpcy5wcm9wcy52aWV3U2V0dGluZ3MuZ2V0KFwiZmxpcE15T3JkZXJzXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgIGZlZWRQcmljZT17dGhpcy5wcm9wcy5mZWVkUHJpY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgc21hbGxTY3JlZW49e3NtYWxsU2NyZWVufVxyXG4gICAgICAgICAgICAgICAgICAgIHRpbnlTY3JlZW49e3RpbnlTY3JlZW59XHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZVBhbmVsPXtoaWRlUGFuZWx9XHJcbiAgICAgICAgICAgICAgICAgICAgaXNQYW5lbEFjdGl2ZT17aXNQYW5lbEFjdGl2ZX1cclxuICAgICAgICAgICAgICAgICAgICBoaWRlU2Nyb2xsYmFycz17aGlkZVNjcm9sbGJhcnN9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICBsZXQgc2V0dGxlbWVudE9yZGVycyA9XHJcbiAgICAgICAgICAgIG1hcmtldFNldHRsZU9yZGVycy5zaXplID09PSAwIHx8XHJcbiAgICAgICAgICAgICh0aW55U2NyZWVuICYmXHJcbiAgICAgICAgICAgICAgICAhdGhpcy5zdGF0ZS5tb2JpbGVLZXkuaW5jbHVkZXMoXCJzZXR0bGVtZW50T3JkZXJzXCIpKSA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICA8TWFya2V0T3JkZXJzXHJcbiAgICAgICAgICAgICAgICAgICAga2V5PXtgYWN0aW9uQ2FyZF8ke2FjdGlvbkNhcmRJbmRleCsrfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5Cb3R0b206ICF0aW55U2NyZWVuID8gMTUgOiAwfX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWxUYWJzW1wib3Blbl9zZXR0bGVtZW50XCJdID09IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY2VudGVyQ29udGFpbmVyV2lkdGggPiAxMjAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwibWVkaXVtLTYgbGFyZ2UtNiB4bGFyZ2UtNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNlbnRlckNvbnRhaW5lcldpZHRoID4gODAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIm1lZGl1bS02XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJtZWRpdW0tMTJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJuby1wYWRkaW5nIG5vLW92ZXJmbG93IG1pZGRsZS1jb250ZW50IHNtYWxsLTEyIG9yZGVyLThcIlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJDbGFzcz17IXRpbnlTY3JlZW4gPyBcImV4Y2hhbmdlLXBhZGRlZFwiIDogXCJcIn1cclxuICAgICAgICAgICAgICAgICAgICBpbm5lclN0eWxlPXt7cGFkZGluZ0JvdHRvbTogIXRpbnlTY3JlZW4gPyBcIjEuMnJlbVwiIDogXCIwXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgIG5vSGVhZGVyPXtwYW5lbFRhYnNbXCJvcGVuX3NldHRsZW1lbnRcIl0gPT0gMCA/IGZhbHNlIDogdHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICBvcmRlcnM9e21hcmtldExpbWl0T3JkZXJzfVxyXG4gICAgICAgICAgICAgICAgICAgIHNldHRsZU9yZGVycz17bWFya2V0U2V0dGxlT3JkZXJzfVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBY2NvdW50PXtjdXJyZW50QWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICBiYXNlPXtiYXNlfVxyXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlPXtxdW90ZX1cclxuICAgICAgICAgICAgICAgICAgICBiYXNlU3ltYm9sPXtiYXNlU3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlU3ltYm9sPXtxdW90ZVN5bWJvbH1cclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVUYWI9e1wib3Blbl9zZXR0bGVtZW50XCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DYW5jZWw9e3RoaXMuX2NhbmNlbExpbWl0T3JkZXIuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICBmbGlwTXlPcmRlcnM9e3RoaXMucHJvcHMudmlld1NldHRpbmdzLmdldChcImZsaXBNeU9yZGVyc1wiKX1cclxuICAgICAgICAgICAgICAgICAgICBmZWVkUHJpY2U9e3RoaXMucHJvcHMuZmVlZFByaWNlfVxyXG4gICAgICAgICAgICAgICAgICAgIHNtYWxsU2NyZWVuPXtzbWFsbFNjcmVlbn1cclxuICAgICAgICAgICAgICAgICAgICB0aW55U2NyZWVuPXt0aW55U2NyZWVufVxyXG4gICAgICAgICAgICAgICAgICAgIGhpZGVQYW5lbD17aGlkZVBhbmVsfVxyXG4gICAgICAgICAgICAgICAgICAgIGlzUGFuZWxBY3RpdmU9e2lzUGFuZWxBY3RpdmV9XHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZVNjcm9sbGJhcnM9e2hpZGVTY3JvbGxiYXJzfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IHRyYWRpbmdWaWV3Q2hhcnQgPVxyXG4gICAgICAgICAgICAoIXRpbnlTY3JlZW4gJiYgIShjaGFydFR5cGUgPT0gXCJwcmljZV9jaGFydFwiKSkgfHxcclxuICAgICAgICAgICAgKHRpbnlTY3JlZW4gJiZcclxuICAgICAgICAgICAgICAgICF0aGlzLnN0YXRlLm1vYmlsZUtleS5pbmNsdWRlcyhcInRyYWRpbmdWaWV3Q2hhcnRcIikpID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgIDxUcmFkaW5nVmlld1ByaWNlQ2hhcnRcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbGU9e3RoaXMucHJvcHMubG9jYWxlfVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFGZWVkPXt0aGlzLnByb3BzLmRhdGFGZWVkfVxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VTeW1ib2w9e2Jhc2VTeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGVTeW1ib2w9e3F1b3RlU3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldFJlYWR5PXttYXJrZXRSZWFkeX1cclxuICAgICAgICAgICAgICAgICAgICB0aGVtZT17dGhpcy5wcm9wcy5zZXR0aW5ncy5nZXQoXCJ0aGVtZXNcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0cz17YnVja2V0c31cclxuICAgICAgICAgICAgICAgICAgICBidWNrZXRTaXplPXtidWNrZXRTaXplfVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQZXJpb2Q9e3RoaXMuc3RhdGUuY3VycmVudFBlcmlvZH1cclxuICAgICAgICAgICAgICAgICAgICBjaGFydEhlaWdodD17dGhpc0NoYXJ0SGVpZ2h0fVxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0Wm9vbT17dGlueVNjcmVlbiA/IGZhbHNlIDogY2hhcnRab29tfVxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0VG9vbHM9e3RpbnlTY3JlZW4gPyBmYWxzZSA6IGNoYXJ0VG9vbHN9XHJcbiAgICAgICAgICAgICAgICAgICAgbW9iaWxlPXt0aW55U2NyZWVufVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IGRlcHRIaWdoQ2hhcnQgPVxyXG4gICAgICAgICAgICAoIXRpbnlTY3JlZW4gJiYgIShjaGFydFR5cGUgPT0gXCJtYXJrZXRfZGVwdGhcIikpIHx8XHJcbiAgICAgICAgICAgICh0aW55U2NyZWVuICYmXHJcbiAgICAgICAgICAgICAgICAhdGhpcy5zdGF0ZS5tb2JpbGVLZXkuaW5jbHVkZXMoXCJkZXB0SGlnaENoYXJ0XCIpKSA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICA8RGVwdGhIaWdoQ2hhcnRcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRSZWFkeT17bWFya2V0UmVhZHl9XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJzPXttYXJrZXRMaW1pdE9yZGVyc31cclxuICAgICAgICAgICAgICAgICAgICBzaG93Q2FsbExpbWl0PXtzaG93Q2FsbExpbWl0fVxyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxfb3JkZXJzPXttYXJrZXRDYWxsT3JkZXJzfVxyXG4gICAgICAgICAgICAgICAgICAgIGZsYXRfYXNrcz17ZmxhdEFza3N9XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhdF9iaWRzPXtmbGF0Qmlkc31cclxuICAgICAgICAgICAgICAgICAgICBmbGF0X2NhbGxzPXtzaG93Q2FsbExpbWl0ID8gZmxhdENhbGxzIDogW119XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhdF9zZXR0bGVzPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zZXR0aW5ncy5nZXQoXCJzaG93U2V0dGxlc1wiKSAmJiBmbGF0U2V0dGxlc1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZXR0bGVzPXttYXJrZXRTZXR0bGVPcmRlcnN9XHJcbiAgICAgICAgICAgICAgICAgICAgaW52ZXJ0ZWRDYWxscz17aW52ZXJ0ZWRDYWxsc31cclxuICAgICAgICAgICAgICAgICAgICB0b3RhbEJpZHM9e3RvdGFscy5iaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxBc2tzPXt0b3RhbHMuYXNrfVxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2U9e2Jhc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGU9e3F1b3RlfVxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD17dGhpc0NoYXJ0SGVpZ2h0fVxyXG4gICAgICAgICAgICAgICAgICAgIGlzUGFuZWxBY3RpdmU9e2lzUGFuZWxBY3RpdmV9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fZGVwdGhDaGFydENsaWNrLmJpbmQodGhpcywgYmFzZSwgcXVvdGUpfVxyXG4gICAgICAgICAgICAgICAgICAgIGZlZWRQcmljZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICFoYXNQcmVkaWN0aW9uICYmIGZlZWRQcmljZSAmJiBmZWVkUHJpY2UudG9SZWFsKClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc3ByZWFkPXtzcHJlYWR9XHJcbiAgICAgICAgICAgICAgICAgICAgTENQPXtzaG93Q2FsbExpbWl0ID8gbG93ZXN0Q2FsbFByaWNlIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICBoYXNQcmVkaWN0aW9uPXtoYXNQcmVkaWN0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgIG5vRnJhbWU9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoZW1lPXt0aGlzLnByb3BzLnNldHRpbmdzLmdldChcInRoZW1lc1wiKX1cclxuICAgICAgICAgICAgICAgICAgICBjZW50ZXJSZWY9e3RoaXMucmVmcy5jZW50ZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlUGFuZWxzPXthY3RpdmVQYW5lbHN9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICBsZXQgdHJhZGluZ0NoYXJ0SGVhZGVyID0gKFxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1wiZXhjaGFuZ2UtLWNoYXJ0LWNvbnRyb2xcIn1cclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAzMyxcclxuICAgICAgICAgICAgICAgICAgICByaWdodDogY2hhcnRUeXBlID09IFwicHJpY2VfY2hhcnRcIiA/IFwiNXJlbVwiIDogXCIxNXJlbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogXCIxcHhcIixcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHpJbmRleDogMSxcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiBcIjAuMnJlbVwiXHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICB7Y2hhcnRUeXBlID09IFwicHJpY2VfY2hhcnRcIiAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGluZ3MudG9vbHRpcC5jaGFydF90b29sc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QW50SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjEuNHJlbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBcIjAuNnJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fY2hhcnRUb29scy5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRvb2xcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGluZ3MudG9vbHRpcC5pbmNyZWFzZV9jaGFydF9oZWlnaHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFudEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogXCIxLjRyZW1cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBcIjAuNnJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25DaGFuZ2VDaGFydEhlaWdodCh7aW5jcmVhc2U6IHRydWV9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT17XCJ1cFwifVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGluZ3MudG9vbHRpcC5kZWNyZWFzZV9jaGFydF9oZWlnaHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFudEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogXCIxLjRyZW1cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBcIjAuNnJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25DaGFuZ2VDaGFydEhlaWdodCh7aW5jcmVhc2U6IGZhbHNlfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9e1wiZG93blwifVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnRUeXBlID09IFwibWFya2V0X2RlcHRoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS5zZXR0aW5ncy50b29sdGlwLnNob3dfcHJpY2VfY2hhcnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLnNldHRpbmdzLnRvb2x0aXAuc2hvd19tYXJrZXRfZGVwdGhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8QW50SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjEuNHJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFydFR5cGUgPT0gXCJtYXJrZXRfZGVwdGhcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUNoYXJ0KFwicHJpY2VfY2hhcnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUNoYXJ0KFwibWFya2V0X2RlcHRoXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0VHlwZSA9PSBcIm1hcmtldF9kZXB0aFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJhci1jaGFydFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImFyZWEtY2hhcnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLyoqKlxyXG4gICAgICAgICAqIEdlbmVyYXRlIHRhYnMgYmFzZWQgb24gTGF5b3V0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgbGV0IGJ1eVNlbGxUYWIgPSAoXHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGtleT17YGFjdGlvbkNhcmRfJHthY3Rpb25DYXJkSW5kZXgrK31gfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcImxlZnQtb3JkZXItYm9vayBzbWFsbC0xMlwifVxyXG4gICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDogNSxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogIXNtYWxsU2NyZWVuID8gMzAwIDogXCJhdXRvXCJcclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxUYWJzXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEFjdGl2ZUtleT1cImJ1eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlS2V5PXt0YWJCdXlTZWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9zZXRUYWJCdXlTZWxsLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogXCIwcHggIWltcG9ydGFudFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IFwiMHB4ICFpbXBvcnRhbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRhYnMuVGFiUGFuZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWI9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVdpdGhMaW5rc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZz1cImV4Y2hhbmdlLmJ1eXNlbGxfZm9ybWF0dGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub0xpbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub1RpcD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5cz17W1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcXVvdGUuZ2V0KFwic3ltYm9sXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnOiBcImFzc2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0cmFuc2xhdGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpc1ByZWRpY3Rpb25NYXJrZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiZXhjaGFuZ2Uuc2hvcnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJleGNoYW5nZS5idXlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZzogXCJkaXJlY3Rpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PVwiYnV5XCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtidXlGb3JtfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvVGFicy5UYWJQYW5lPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUYWJzLlRhYlBhbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVXaXRoTGlua3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmc9XCJleGNoYW5nZS5idXlzZWxsX2Zvcm1hdHRlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9MaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9UaXA9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXM9e1tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhc3NldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHF1b3RlLmdldChcInN5bWJvbFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZzogXCJhc3NldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidHJhbnNsYXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXNQcmVkaWN0aW9uTWFya2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImV4Y2hhbmdlLnNob3J0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiZXhjaGFuZ2Uuc2VsbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnOiBcImRpcmVjdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9XCJzZWxsXCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtzZWxsRm9ybX1cclxuICAgICAgICAgICAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cclxuICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gR2VuZXJhdGUgVGFiYmVkIEdyb3Vwc1xyXG4gICAgICAgIGxldCBncm91cFRhYnMgPSB7MTogW10sIDI6IFtdfTtcclxuICAgICAgICBsZXQgZ3JvdXBTdGFuZGFsb25lID0gW107XHJcblxyXG4gICAgICAgIE9iamVjdC5rZXlzKHBhbmVsVGFicylcclxuICAgICAgICAgICAgLnNvcnQoKVxyXG4gICAgICAgICAgICAubWFwKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhbmVsVGFic1thXSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIFN0YW5kYWxvbmUgU2V0dGluZ3NcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYSA9PSBcIm15X2hpc3RvcnlcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cFN0YW5kYWxvbmUucHVzaChteU1hcmtldEhpc3RvcnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEgPT0gXCJoaXN0b3J5XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBTdGFuZGFsb25lLnB1c2gobWFya2V0SGlzdG9yeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYSA9PSBcIm15X29yZGVyc1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwU3RhbmRhbG9uZS5wdXNoKG15T3Blbk9yZGVycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYSA9PSBcIm9wZW5fc2V0dGxlbWVudFwiICYmIHNldHRsZW1lbnRPcmRlcnMgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBTdGFuZGFsb25lLnB1c2goc2V0dGxlbWVudE9yZGVycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYSA9PSBcIm15X2hpc3RvcnlcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cFRhYnNbcGFuZWxUYWJzW2FdXS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnMuVGFiUGFuZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYj17dHJhbnNsYXRvci50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2UubXlfaGlzdG9yeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9XCJteV9oaXN0b3J5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bXlNYXJrZXRIaXN0b3J5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYSA9PSBcImhpc3RvcnlcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cFRhYnNbcGFuZWxUYWJzW2FdXS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnMuVGFiUGFuZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYj17dHJhbnNsYXRvci50cmFuc2xhdGUoXCJleGNoYW5nZS5oaXN0b3J5XCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT1cImhpc3RvcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttYXJrZXRIaXN0b3J5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYSA9PSBcIm15X29yZGVyc1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwVGFic1twYW5lbFRhYnNbYV1dLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFicy5UYWJQYW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiPXt0cmFuc2xhdG9yLnRyYW5zbGF0ZShcImV4Y2hhbmdlLm15X29yZGVyc1wiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9XCJteV9vcmRlcnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtteU9wZW5PcmRlcnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhID09IFwib3Blbl9zZXR0bGVtZW50XCIgJiYgc2V0dGxlbWVudE9yZGVycyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cFRhYnNbcGFuZWxUYWJzW2FdXS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnMuVGFiUGFuZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYj17dHJhbnNsYXRvci50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGxlX29yZGVyc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9XCJvcGVuX3NldHRsZW1lbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZXR0bGVtZW50T3JkZXJzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmtleXMocGFuZWxUYWJzQWN0aXZlKS5tYXAodGhpc1RhYnNJZCA9PiB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHBhbmVsVGFicykubWFwKHRoaXNQYW5lbE5hbWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0b3AgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICghc3RvcCAmJiB0aGlzVGFic0lkID09IHBhbmVsVGFic1t0aGlzUGFuZWxOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhbmVsVGFic0FjdGl2ZVt0aGlzVGFic0lkXSA9ICFwYW5lbFRhYnNBY3RpdmVbdGhpc1RhYnNJZF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzUGFuZWxOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcGFuZWxUYWJzQWN0aXZlW3RoaXNUYWJzSWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0b3AgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGdyb3VwVGFic0NvdW50ID0gZ3JvdXBTdGFuZGFsb25lLmxlbmd0aDtcclxuXHJcbiAgICAgICAgT2JqZWN0LmtleXMoZ3JvdXBUYWJzKS5tYXAodGFiID0+IHtcclxuICAgICAgICAgICAgaWYgKGdyb3VwVGFic1t0YWJdLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBUYWJzQ291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgZ3JvdXBUYWJiZWQxID1cclxuICAgICAgICAgICAgZ3JvdXBUYWJzWzFdLmxlbmd0aCA+IDAgPyAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAga2V5PXtgYWN0aW9uQ2FyZF8ke2FjdGlvbkNhcmRJbmRleCsrfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckNvbnRhaW5lcldpZHRoID4gMTIwMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBncm91cFRhYnNDb3VudCA9PSAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIm1lZGl1bS0xMiB4bGFyZ2UtNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIm1lZGl1bS02IHhsYXJnZS00IFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNlbnRlckNvbnRhaW5lcldpZHRoID4gODAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBncm91cFRhYnNDb3VudCA9PSAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJtZWRpdW0tMTJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwibWVkaXVtLTZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzbWFsbC0xMiBvcmRlci01XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsT3JkZXJCb29rID8gXCJ4bGFyZ2Utb3JkZXItNVwiIDogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXZlcnRpY2FsT3JkZXJCb29rICYmICF2ZXJ0aWNhbE9yZGVyRm9ybVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjZW50ZXJDb250YWluZXJXaWR0aCA8IDEyMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwieGxhcmdlLW9yZGVyLTVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJ4bGFyZ2Utb3JkZXItMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ1JpZ2h0OiA1fX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8VGFic1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVLZXk9e3BhbmVsVGFic0FjdGl2ZVsxXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX3NldFBhbmVsVGFiSW5Hcm91cC5iaW5kKHRoaXMsIDEpfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2dyb3VwVGFic1sxXX1cclxuICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKSA6IG51bGw7XHJcblxyXG4gICAgICAgIGxldCBncm91cFRhYmJlZDIgPVxyXG4gICAgICAgICAgICBncm91cFRhYnNbMl0ubGVuZ3RoID4gMCA/IChcclxuICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICBrZXk9e2BhY3Rpb25DYXJkXyR7YWN0aW9uQ2FyZEluZGV4Kyt9YH1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyQ29udGFpbmVyV2lkdGggPiAxMjAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdyb3VwVGFic0NvdW50ID09IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwibWVkaXVtLTEyIHhsYXJnZS00XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwibWVkaXVtLTYgeGxhcmdlLTQgXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY2VudGVyQ29udGFpbmVyV2lkdGggPiA4MDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdyb3VwVGFic0NvdW50ID09IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIm1lZGl1bS0xMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJtZWRpdW0tNlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInNtYWxsLTEyIG9yZGVyLTZcIlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nUmlnaHQ6IDV9fVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUYWJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUtleT17cGFuZWxUYWJzQWN0aXZlWzJdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fc2V0UGFuZWxUYWJJbkdyb3VwLmJpbmQodGhpcywgMil9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Z3JvdXBUYWJzWzJdfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApIDogbnVsbDtcclxuXHJcbiAgICAgICAgbGV0IGVtcHR5RGl2ID1cclxuICAgICAgICAgICAgZ3JvdXBUYWJzQ291bnQgPiAyID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyQ29udGFpbmVyV2lkdGggPiAxMjAwICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh2ZXJ0aWNhbE9yZGVyQm9vayB8fCB2ZXJ0aWNhbE9yZGVyQm9vaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJ4bGFyZ2Utb3JkZXItNiB4bGFyZ2UtOCBvcmRlci05XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzbWFsbC0xMiBncmlkLWJsb2NrIG9yZGVyYm9vayBuby1wYWRkaW5nIGFsaWduLXNwYWNlZCBuby1vdmVyZmxvdyB3cmFwXCJcclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIGtleT17YGFjdGlvbkNhcmRfJHthY3Rpb25DYXJkSW5kZXgrK31gfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdlbmVyYXRlIGxheW91dCBncmlkIGJhc2VkIG9uIFNjcmVlbiBTaXplXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbGV0IGFjdGlvbkNhcmRzID0gW107XHJcbiAgICAgICAgaWYgKCFzbWFsbFNjcmVlbikge1xyXG4gICAgICAgICAgICBpZiAoIXZlcnRpY2FsT3JkZXJGb3JtKSB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb25DYXJkcy5wdXNoKGJ1eUZvcm0pO1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uQ2FyZHMucHVzaChzZWxsRm9ybSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdmVydGljYWxPcmRlckJvb2spIHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbkNhcmRzLnB1c2gob3JkZXJCb29rKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHZlcnRpY2FsT3JkZXJCb29rIHx8IHZlcnRpY2FsT3JkZXJGb3JtKSB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb25DYXJkcy5wdXNoKGVtcHR5RGl2KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYWN0aW9uQ2FyZHMucHVzaChncm91cFN0YW5kYWxvbmUpO1xyXG4gICAgICAgICAgICBhY3Rpb25DYXJkcy5wdXNoKGdyb3VwVGFiYmVkMSk7XHJcbiAgICAgICAgICAgIGFjdGlvbkNhcmRzLnB1c2goZ3JvdXBUYWJiZWQyKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCF0aW55U2NyZWVuKSB7XHJcbiAgICAgICAgICAgIGFjdGlvbkNhcmRzLnB1c2goYnV5Rm9ybSk7XHJcbiAgICAgICAgICAgIGFjdGlvbkNhcmRzLnB1c2goc2VsbEZvcm0pO1xyXG4gICAgICAgICAgICBhY3Rpb25DYXJkcy5wdXNoKG9yZGVyQm9vayk7XHJcbiAgICAgICAgICAgIGFjdGlvbkNhcmRzLnB1c2goZ3JvdXBTdGFuZGFsb25lKTtcclxuICAgICAgICAgICAgYWN0aW9uQ2FyZHMucHVzaChncm91cFRhYmJlZDEpO1xyXG4gICAgICAgICAgICBhY3Rpb25DYXJkcy5wdXNoKGdyb3VwVGFiYmVkMik7XHJcbiAgICAgICAgICAgIGFjdGlvbkNhcmRzLnB1c2goXHJcbiAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib3JkZXItMTAgc21hbGwtMTJcIlxyXG4gICAgICAgICAgICAgICAgICAgIGtleT17YGFjdGlvbkNhcmRfJHthY3Rpb25DYXJkSW5kZXgrK31gfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUYWJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRBY3RpdmVLZXk9XCJteS1tYXJrZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVLZXk9e3RhYlZlcnRpY2FsUGFuZWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9zZXRUYWJWZXJ0aWNhbFBhbmVsLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFicy5UYWJQYW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWI9e3RyYW5zbGF0b3IudHJhbnNsYXRlKFwiZXhjaGFuZ2UubWFya2V0X25hbWVcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9XCJteS1tYXJrZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFicy5UYWJQYW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWI9e3RyYW5zbGF0b3IudHJhbnNsYXRlKFwiZXhjaGFuZ2UubW9yZVwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT1cImZpbmQtbWFya2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XHJcbiAgICAgICAgICAgICAgICAgICAge215TWFya2V0c31cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFjdGlvbkNhcmRzID0gKFxyXG4gICAgICAgICAgICAgICAgPENvbGxhcHNlXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlS2V5PXt0aGlzLnN0YXRlLm1vYmlsZUtleX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25DaGFuZ2VNb2JpbGVQYW5lbC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ1JpZ2h0OiA4fX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8Q29sbGFwc2UuUGFuZWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyPXt0cmFuc2xhdG9yLnRyYW5zbGF0ZShcImV4Y2hhbmdlLnByaWNlX2hpc3RvcnlcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT1cInRyYWRpbmdWaWV3Q2hhcnRcIlxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RyYWRpbmdWaWV3Q2hhcnR9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Db2xsYXBzZS5QYW5lbD5cclxuICAgICAgICAgICAgICAgICAgICA8Q29sbGFwc2UuUGFuZWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyPXt0cmFuc2xhdG9yLnRyYW5zbGF0ZShcImV4Y2hhbmdlLm9yZGVyX2RlcHRoXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9XCJkZXB0SGlnaENoYXJ0XCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkZXB0SGlnaENoYXJ0fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvQ29sbGFwc2UuUGFuZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPENvbGxhcHNlLlBhbmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcj17dHJhbnNsYXRvci50cmFuc2xhdGUoXCJleGNoYW5nZS5idXlfc2VsbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PVwiYnV5U2VsbFRhYlwiXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7YnV5U2VsbFRhYn1cclxuICAgICAgICAgICAgICAgICAgICA8L0NvbGxhcHNlLlBhbmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxDb2xsYXBzZS5QYW5lbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e3RyYW5zbGF0b3IudHJhbnNsYXRlKFwiZXhjaGFuZ2Uub3JkZXJfYm9va1wiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PVwib3JkZXJCb29rXCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtvcmRlckJvb2t9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Db2xsYXBzZS5QYW5lbD5cclxuICAgICAgICAgICAgICAgICAgICA8Q29sbGFwc2UuUGFuZWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyPXt0cmFuc2xhdG9yLnRyYW5zbGF0ZShcImV4Y2hhbmdlLmhpc3RvcnlcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT1cIm1hcmtldEhpc3RvcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAge21hcmtldEhpc3Rvcnl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Db2xsYXBzZS5QYW5lbD5cclxuICAgICAgICAgICAgICAgICAgICB7c2V0dGxlbWVudE9yZGVycyAhPT0gbnVsbCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPENvbGxhcHNlLlBhbmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e3RyYW5zbGF0b3IudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGxlX29yZGVyc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PVwic2V0dGxlbWVudE9yZGVyc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZXR0bGVtZW50T3JkZXJzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0NvbGxhcHNlLlBhbmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIDxDb2xsYXBzZS5QYW5lbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e3RyYW5zbGF0b3IudHJhbnNsYXRlKFwiZXhjaGFuZ2UubXlfaGlzdG9yeVwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PVwibXlNYXJrZXRIaXN0b3J5XCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtteU1hcmtldEhpc3Rvcnl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Db2xsYXBzZS5QYW5lbD5cclxuICAgICAgICAgICAgICAgICAgICA8Q29sbGFwc2UuUGFuZWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyPXt0cmFuc2xhdG9yLnRyYW5zbGF0ZShcImV4Y2hhbmdlLm15X29yZGVyc1wiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PVwibXlPcGVuT3JkZXJzXCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtteU9wZW5PcmRlcnN9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Db2xsYXBzZS5QYW5lbD5cclxuICAgICAgICAgICAgICAgICAgICA8Q29sbGFwc2UuUGFuZWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyPXt0cmFuc2xhdG9yLnRyYW5zbGF0ZShcImV4Y2hhbmdlLm1hcmtldF9uYW1lXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9XCJteU1hcmtldHNcIlxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRBY3RpdmVLZXk9XCJteS1tYXJrZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlS2V5PXt0YWJWZXJ0aWNhbFBhbmVsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX3NldFRhYlZlcnRpY2FsUGFuZWwuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnMuVGFiUGFuZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYj17dHJhbnNsYXRvci50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2UubWFya2V0X25hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PVwibXktbWFya2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFicy5UYWJQYW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiPXt0cmFuc2xhdG9yLnRyYW5zbGF0ZShcImV4Y2hhbmdlLm1vcmVcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PVwiZmluZC1tYXJrZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7bXlNYXJrZXRzfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvQ29sbGFwc2UuUGFuZWw+XHJcbiAgICAgICAgICAgICAgICA8L0NvbGxhcHNlPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqKlxyXG4gICAgICAgICAqIEdlbmVyYXRlIFBhbmVsc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGxldCBsZWZ0UGFuZWwgPSBudWxsO1xyXG4gICAgICAgIGxldCByaWdodFBhbmVsID0gbnVsbDtcclxuICAgICAgICBsZXQgbGVmdFBhbmVsQ29udGFpbmVyID0gbnVsbDtcclxuICAgICAgICBsZXQgcmlnaHRQYW5lbENvbnRhaW5lciA9IG51bGw7XHJcbiAgICAgICAgbGV0IGVuYWJsZVRvZ2dsZUxlZnQgPSBmYWxzZTtcclxuICAgICAgICBsZXQgZW5hYmxlVG9nZ2xlUmlnaHQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKCFzbWFsbFNjcmVlbikge1xyXG4gICAgICAgICAgICBpZiAodmVydGljYWxPcmRlckJvb2spIHtcclxuICAgICAgICAgICAgICAgIGxlZnRQYW5lbCA9IChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImxlZnQtb3JkZXItYm9vayBuby1wYWRkaW5nIG5vLW92ZXJmbG93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiYmxvY2tcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogXCJjYWxjKDEwMHZoIC0gMTcwcHgpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogcGFuZWxXaWR0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAge29yZGVyQm9va31cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh2ZXJ0aWNhbE9yZGVyRm9ybSkge1xyXG4gICAgICAgICAgICAgICAgbGVmdFBhbmVsID0gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibGVmdC1vcmRlci1ib29rIG5vLXBhZGRpbmcgbm8tb3ZlcmZsb3dcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBcImNhbGMoMTAwdmggLSAxNzBweClcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtidXlTZWxsVGFifVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmlnaHRQYW5lbCA9IChcclxuICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJncmlkLWJsb2NrIHNocmluayByaWdodC1jb2x1bW4gbm8tb3ZlcmZsb3dcIlxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWF4V2lkdGg6IDQ1MH19XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLXBhZGRpbmcgbm8tbWFyZ2luIHZlcnRpY2FsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImxlZnQtb3JkZXItYm9vayBuby1wYWRkaW5nIG5vLW92ZXJmbG93IHNocmlua1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2Rpc3BsYXk6IFwiYmxvY2tcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2BhY3Rpb25DYXJkXyR7YWN0aW9uQ2FyZEluZGV4Kyt9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInYtYWxpZ24gbm8tcGFkZGluZyBhbGlnbi1jZW50ZXIgZ3JpZC1ibG9jayBmb290ZXIgdmVydGljYWwgc2hyaW5rXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWludHJvPXt0cmFuc2xhdG9yLnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3YWxrdGhyb3VnaC5teV9tYXJrZXRzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRBY3RpdmVLZXk9XCJteS1tYXJrZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVLZXk9e3RhYlZlcnRpY2FsUGFuZWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9zZXRUYWJWZXJ0aWNhbFBhbmVsLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFicy5UYWJQYW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWI9e3RyYW5zbGF0b3IudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2UubWFya2V0X25hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT1cIm15LW1hcmtldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzLlRhYlBhbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYj17dHJhbnNsYXRvci50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS5tb3JlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9XCJmaW5kLW1hcmtldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bXlNYXJrZXRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge1Ryb2xsYm94fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoKCFtaXJyb3JQYW5lbHMgJiYgbGVmdFBhbmVsKSB8fCAobWlycm9yUGFuZWxzICYmIHJpZ2h0UGFuZWwpKSB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVUb2dnbGVMZWZ0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoKCFtaXJyb3JQYW5lbHMgJiYgcmlnaHRQYW5lbCkgfHwgKG1pcnJvclBhbmVscyAmJiBsZWZ0UGFuZWwpKSB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVUb2dnbGVSaWdodCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxlZnRQYW5lbENvbnRhaW5lciA9IChcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBsZWZ0LWNvbHVtbiBzaHJpbmsgbm8tb3ZlcmZsb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICB7YWN0aXZlUGFuZWxzLmluY2x1ZGVzKFwibGVmdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG1pcnJvclBhbmVsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyByaWdodFBhbmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGxlZnRQYW5lbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAge2VuYWJsZVRvZ2dsZUxlZnQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiYXV0b1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdUb3A6IFwiY2FsYyg1MHZoIC0gODBweClcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3RvZ2dsZVBhbmVsLmJpbmQodGhpcywgXCJsZWZ0XCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QW50SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtaW50cm89e3RyYW5zbGF0b3IudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndhbGt0aHJvdWdoLnBhbmVsX2hpZGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVBhbmVscy5pbmNsdWRlcyhcImxlZnRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJjYXJldC1sZWZ0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJjYXJldC1yaWdodFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIHJpZ2h0UGFuZWxDb250YWluZXIgPSAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbGVmdC1jb2x1bW4gc2hyaW5rIG5vLW92ZXJmbG93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAge2VuYWJsZVRvZ2dsZVJpZ2h0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcImF1dG9cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nVG9wOiBcImNhbGMoNTB2aCAtIDgwcHgpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90b2dnbGVQYW5lbC5iaW5kKHRoaXMsIFwicmlnaHRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBbnRJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1pbnRybz17dHJhbnNsYXRvci50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2Fsa3Rocm91Z2gucGFuZWxfaGlkZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlUGFuZWxzLmluY2x1ZGVzKFwicmlnaHRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJjYXJldC1yaWdodFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiY2FyZXQtbGVmdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAge2FjdGl2ZVBhbmVscy5pbmNsdWRlcyhcInJpZ2h0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gIW1pcnJvclBhbmVsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyByaWdodFBhbmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGxlZnRQYW5lbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbFwiPlxyXG4gICAgICAgICAgICAgICAgeyF0aGlzLnByb3BzLm1hcmtldFJlYWR5ID8gPExvYWRpbmdJbmRpY2F0b3IgLz4gOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPEV4Y2hhbmdlSGVhZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgaGFzQW55UHJpY2VBbGVydD17dGhpcy5wcm9wcy5oYXNBbnlQcmljZUFsZXJ0fVxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dQcmljZUFsZXJ0TW9kYWw9e3RoaXMuc2hvd1ByaWNlQWxlcnRNb2RhbH1cclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmN1cnJlbnRBY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlQXNzZXQ9e3F1b3RlQXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZUFzc2V0PXtiYXNlQXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzUHJlZGljdGlvbj17aGFzUHJlZGljdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICBzdGFycmVkTWFya2V0cz17c3RhcnJlZE1hcmtldHN9XHJcbiAgICAgICAgICAgICAgICAgICAgbG93ZXN0QXNrPXtsb3dlc3RBc2t9XHJcbiAgICAgICAgICAgICAgICAgICAgaGlnaGVzdEJpZD17aGlnaGVzdEJpZH1cclxuICAgICAgICAgICAgICAgICAgICBsb3dlc3RDYWxsUHJpY2U9e2xvd2VzdENhbGxQcmljZX1cclxuICAgICAgICAgICAgICAgICAgICBzaG93Q2FsbExpbWl0PXtzaG93Q2FsbExpbWl0fVxyXG4gICAgICAgICAgICAgICAgICAgIGZlZWRQcmljZT17ZmVlZFByaWNlfVxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldFJlYWR5PXttYXJrZXRSZWFkeX1cclxuICAgICAgICAgICAgICAgICAgICBsYXRlc3RQcmljZT17bGF0ZXN0ICYmIGxhdGVzdC5nZXRQcmljZSgpfVxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldFN0YXRzPXttYXJrZXRTdGF0c31cclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE1hcmtldFBpY2tlckFzc2V0PXt0aGlzLnN0YXRlLm1hcmtldFBpY2tlckFzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uVG9nZ2xlTWFya2V0UGlja2VyPXt0aGlzLl90b2dnbGVNYXJrZXRQaWNrZXIuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICBvblRvZ2dsZVBlcnNvbmFsaXplPXt0aGlzLl90b2dnbGVQZXJzb25hbGl6ZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dWb2x1bWVDaGFydD17c2hvd1ZvbHVtZUNoYXJ0fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgcGFnZS1sYXlvdXQgbWFya2V0LWxheW91dFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzTWFya2V0UGlja2VyTW9kYWxWaXNpYmxlIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc01hcmtldFBpY2tlck1vZGFsTG9hZGVkID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TWFya2V0UGlja2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLmlzTWFya2V0UGlja2VyTW9kYWxWaXNpYmxlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd01vZGFsPXt0aGlzLnNob3dNYXJrZXRQaWNrZXJNb2RhbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVNb2RhbD17dGhpcy5oaWRlTWFya2V0UGlja2VyTW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXRQaWNrZXJBc3NldD17dGhpcy5zdGF0ZS5tYXJrZXRQaWNrZXJBc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVG9nZ2xlTWFya2V0UGlja2VyPXt0aGlzLl90b2dnbGVNYXJrZXRQaWNrZXIuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzUGVyc29uYWxpemVNb2RhbFZpc2libGUgfHxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzUGVyc29uYWxpemVNb2RhbExvYWRlZCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPFBlcnNvbmFsaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLmlzUGVyc29uYWxpemVNb2RhbFZpc2libGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93TW9kYWw9e3RoaXMuc2hvd1BlcnNvbmFsaXplTW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlTW9kYWw9e3RoaXMuaGlkZVBlcnNvbmFsaXplTW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3U2V0dGluZ3M9e3RoaXMucHJvcHMudmlld1NldHRpbmdzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnRUeXBlPXtjaGFydFR5cGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFydEhlaWdodD17Y2hhcnRIZWlnaHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblRvZ2dsZVBlcnNvbmFsaXplPXt0aGlzLl90b2dnbGVQZXJzb25hbGl6ZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUNoYXJ0SGVpZ2h0PXt0aGlzLm9uQ2hhbmdlQ2hhcnRIZWlnaHQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlR3JvdXBPcmRlckxpbWl0Q2hhbmdlPXt0aGlzLl9vbkdyb3VwT3JkZXJMaW1pdENoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja2VkR3JvdXBzQ29uZmlnPXt0cmFja2VkR3JvdXBzQ29uZmlnfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEdyb3VwT3JkZXJMaW1pdD17Y3VycmVudEdyb3VwT3JkZXJMaW1pdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsT3JkZXJCb29rPXt2ZXJ0aWNhbE9yZGVyQm9va31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVTY3JvbGxiYXJzPXtoaWRlU2Nyb2xsYmFyc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pcnJvclBhbmVscz17bWlycm9yUGFuZWxzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWxUYWJzPXtwYW5lbFRhYnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGVDb2x1bW5PcmRlckZvcm09e3NpbmdsZUNvbHVtbk9yZGVyRm9ybX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1eVNlbGxUb3A9e2J1eVNlbGxUb3B9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGlwQnV5U2VsbD17ZmxpcEJ1eVNlbGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGlwT3JkZXJCb29rPXtmbGlwT3JkZXJCb29rfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlueVNjcmVlbj17dGlueVNjcmVlbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNtYWxsU2NyZWVuPXtzbWFsbFNjcmVlbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyQm9va1JldmVyc2VkPXtvcmRlckJvb2tSZXZlcnNlZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0Wm9vbT17Y2hhcnRab29tfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnRUb29scz17Y2hhcnRUb29sc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVGdW5jdGlvbkJ1dHRvbnM9e2hpZGVGdW5jdGlvbkJ1dHRvbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdmVPcmRlckJvb2s9e3RoaXMuX21vdmVPcmRlckJvb2suYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTWlycm9yUGFuZWxzPXt0aGlzLl9taXJyb3JQYW5lbHMuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVG9nZ2xlU2Nyb2xsYmFycz17dGhpcy5fdG9nZ2xlU2Nyb2xsYmFycy5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNldEF1dG9zY3JvbGw9e3RoaXMuX3NldEF1dG9zY3JvbGwuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVG9nZ2xlQ2hhcnQ9e3RoaXMuX3RvZ2dsZUNoYXJ0LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNldFBhbmVsVGFicz17dGhpcy5fc2V0UGFuZWxUYWJzLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblRvZ2dsZVNpbmdsZUNvbHVtbk9yZGVyRm9ybT17dGhpcy5fdG9nZ2xlU2luZ2xlQ29sdW1uT3JkZXJGb3JtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVG9nZ2xlQnV5U2VsbFBvc2l0aW9uPXt0aGlzLl90b2dnbGVCdXlTZWxsUG9zaXRpb24uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25GbGlwQnV5U2VsbD17dGhpcy5fZmxpcEJ1eVNlbGwuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRmxpcE9yZGVyQm9vaz17dGhpcy5fZmxpcE9yZGVyQm9vay5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25PcmRlckJvb2tSZXZlcnNlZD17dGhpcy5fb3JkZXJCb29rUmV2ZXJzZWQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFydFpvb209e3RoaXMuX2NoYXJ0Wm9vbS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFydFRvb2xzPXt0aGlzLl9jaGFydFRvb2xzLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkhpZGVGdW5jdGlvbkJ1dHRvbnM9e3RoaXMuX2hpZGVGdW5jdGlvbkJ1dHRvbnMuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8QWNjb3VudE5vdGlmaWNhdGlvbnMgLz5cclxuICAgICAgICAgICAgICAgICAgICB7LyogTWFpbiB2ZXJ0aWNhbCBibG9jayB3aXRoIGNvbnRlbnQgKi99XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHsvKiBMZWZ0IENvbHVtbiAtIE9wZW4gT3JkZXJzICovfVxyXG4gICAgICAgICAgICAgICAgICAgIHtsZWZ0UGFuZWxDb250YWluZXJ9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHsvKiBDZW50ZXIgQ29sdW1uICovfVxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nVG9wOiAwfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImdyaWQtYmxvY2sgbWFpbi1jb250ZW50IHZlcnRpY2FsIG5vLW92ZXJmbG93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgdmVydGljYWwgbm8tcGFkZGluZyBwcy1jb250YWluZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJDZW50ZXJDb250ZW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cImNlbnRlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWludHJvPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW55U2NyZWVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJhbnNsYXRvci50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2Fsa3Rocm91Z2guY29sbGFwc2VkX2l0ZW1zXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyF0aW55U2NyZWVuID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0cmFkaW5nQ2hhcnRIZWFkZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBQcmljZSBoaXN0b3J5IGNoYXJ0ICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2hhcnRUeXBlICYmIGNoYXJ0VHlwZSA9PSBcInByaWNlX2NoYXJ0XCIgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBzaHJpbmsgbm8tb3ZlcmZsb3dcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwibWFya2V0LWNoYXJ0c1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RyYWRpbmdWaWV3Q2hhcnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogTWFya2V0IGRlcHRoIGNoYXJ0ICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2hhcnRUeXBlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0VHlwZSA9PSBcIm1hcmtldF9kZXB0aFwiID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIHZlcnRpY2FsIG5vLXBhZGRpbmcgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RlcHRIaWdoQ2hhcnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tb3ZlcmZsb3cgd3JhcCBzaHJpbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWN0aW9uQ2FyZHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgey8qIEVuZCBvZiBNYWluIENvbnRlbnQgQ29sdW1uICovfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7LyogUmlnaHQgQ29sdW1uICovfVxyXG4gICAgICAgICAgICAgICAgICAgIHtyaWdodFBhbmVsQ29udGFpbmVyfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7LyogRW5kIG9mIFNlY29uZCBWZXJ0aWNhbCBCbG9jayAqL31cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIHtxdW90ZUlzQml0QXNzZXQgJiZcclxuICAgICAgICAgICAgICAgICh0aGlzLnN0YXRlLmlzQm9ycm93UXVvdGVNb2RhbFZpc2libGUgfHxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzQm9ycm93UXVvdGVNb2RhbExvYWRlZCkgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEJvcnJvd01vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMuc3RhdGUuaXNCb3Jyb3dRdW90ZU1vZGFsVmlzaWJsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsPXt0aGlzLmhpZGVCb3Jyb3dRdW90ZU1vZGFsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdW90ZUFzc2V0T2JqPXtxdW90ZUFzc2V0LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNraW5nQXNzZXRPYmo9e3F1b3RlQXNzZXQuZ2V0SW4oW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25zXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNob3J0X2JhY2tpbmdfYXNzZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE9iaj17Y3VycmVudEFjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAge2Jhc2VJc0JpdEFzc2V0ICYmXHJcbiAgICAgICAgICAgICAgICAodGhpcy5zdGF0ZS5pc0JvcnJvd0Jhc2VNb2RhbFZpc2libGUgfHxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzQm9ycm93QmFzZU1vZGFsTG9hZGVkKSA/IChcclxuICAgICAgICAgICAgICAgICAgICA8Qm9ycm93TW9kYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZT17dGhpcy5zdGF0ZS5pc0JvcnJvd0Jhc2VNb2RhbFZpc2libGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVNb2RhbD17dGhpcy5oaWRlQm9ycm93QmFzZU1vZGFsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdW90ZUFzc2V0T2JqPXtiYXNlQXNzZXQuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tpbmdBc3NldE9iaj17YmFzZUFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3B0aW9uc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG9ydF9iYWNraW5nX2Fzc2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRPYmo9e2N1cnJlbnRBY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc0RlcG9zaXRNb2RhbFZpc2libGUgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNEZXBvc2l0TW9kYWxMb2FkZWQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPFNpbXBsZURlcG9zaXRXaXRoZHJhd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLmlzRGVwb3NpdE1vZGFsVmlzaWJsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsPXt0aGlzLmhpZGVEZXBvc2l0TW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cImRlcG9zaXRfbW9kYWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb249XCJkZXBvc2l0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlhdE1vZGFsPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17Y3VycmVudEFjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRlcj17Y3VycmVudEFjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtkZXBvc2l0TW9kYWxUeXBlID09PSBcImJpZFwiID8gYmFzZSA6IHF1b3RlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbElkPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2ltcGxlX2RlcG9zaXRfbW9kYWxcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZGVwb3NpdE1vZGFsVHlwZSA9PT0gXCJiaWRcIiA/IFwiXCIgOiBcIl9hc2tcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcG9zaXRNb2RhbFR5cGUgPT09IFwiYmlkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGJhc2VCYWxhbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBxdW90ZUJhbGFuY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5iYWNrZWRDb2lucy5maW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuc3ltYm9sID09PVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkZXBvc2l0TW9kYWxUeXBlID09PSBcImJpZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYmFzZS5nZXQoXCJzeW1ib2xcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBxdW90ZS5nZXQoXCJzeW1ib2xcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgIHsvKiBCcmlkZ2UgbW9kYWwgKi99XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc0RlcG9zaXRCcmlkZ2VNb2RhbFZpc2libGUgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNEZXBvc2l0QnJpZGdlTW9kYWxMb2FkZWQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPFNpbXBsZURlcG9zaXRCbG9ja3RyYWRlc0JyaWRnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLmlzRGVwb3NpdEJyaWRnZU1vZGFsVmlzaWJsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsPXt0aGlzLmhpZGVEZXBvc2l0QnJpZGdlTW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cImJyaWRnZV9tb2RhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbj1cImRlcG9zaXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXtjdXJyZW50QWNjb3VudC5nZXQoXCJuYW1lXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kZXI9e2N1cnJlbnRBY2NvdW50LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXlNb2RhbFR5cGUgPT09IFwiYmlkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGJhc2UuZ2V0KFwiaWRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHF1b3RlLmdldChcImlkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxJZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNpbXBsZV9icmlkZ2VfbW9kYWxcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYnV5TW9kYWxUeXBlID09PSBcImJpZFwiID8gXCJcIiA6IFwiX2Fza1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzPXtbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXlNb2RhbFR5cGUgPT09IFwiYmlkXCIgPyBiYXNlQmFsYW5jZSA6IHF1b3RlQmFsYW5jZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmlkZ2VzPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYnJpZGdlQ29pbnMuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1eU1vZGFsVHlwZSA9PT0gXCJiaWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGJhc2UuZ2V0KFwic3ltYm9sXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcXVvdGUuZ2V0KFwic3ltYm9sXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHx8IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICB7LyogQ29uZmlybSBNb2RhbCAqL31cclxuICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzQ29uZmlybUJ1eU9yZGVyTW9kYWxWaXNpYmxlIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzQ29uZmlybUJ1eU9yZGVyTW9kYWxMb2FkZWQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPENvbmZpcm1PcmRlck1vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMuc3RhdGUuaXNDb25maXJtQnV5T3JkZXJNb2RhbFZpc2libGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVNb2RhbD17dGhpcy5oaWRlQ29uZmlybUJ1eU9yZGVyTW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkZvcmNlPXt0aGlzLl9mb3JjZUJ1eS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYnV5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXlGZWVBc3NldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VCYWxhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZUJhbGFuY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlmZj17YnV5RGlmZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzT3JkZXJzPXtjb21iaW5lZEFza3MubGVuZ3RoID4gMH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNDb25maXJtU2VsbE9yZGVyTW9kYWxWaXNpYmxlIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzQ29uZmlybVNlbGxPcmRlck1vZGFsTG9hZGVkID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxDb25maXJtT3JkZXJNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLmlzQ29uZmlybVNlbGxPcmRlck1vZGFsVmlzaWJsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsPXt0aGlzLmhpZGVDb25maXJtU2VsbE9yZGVyTW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJzZWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Gb3JjZT17dGhpcy5fZm9yY2VTZWxsLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZWxsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxsRmVlQXNzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZUJhbGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlQmFsYW5jZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWZmPXtzZWxsRGlmZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzT3JkZXJzPXtjb21iaW5lZEJpZHMubGVuZ3RoID4gMH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgPFByaWNlQWxlcnRcclxuICAgICAgICAgICAgICAgICAgICBvblNhdmU9e3RoaXMuaGFuZGxlUHJpY2VBbGVydFNhdmV9XHJcbiAgICAgICAgICAgICAgICAgICAgcnVsZXM9e3RoaXMuZ2V0UHJpY2VBbGVydFJ1bGVzKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgbGF0ZXN0UHJpY2U9e2xhdGVzdCAmJiBsYXRlc3QuZ2V0UHJpY2UoKX1cclxuICAgICAgICAgICAgICAgICAgICBxdW90ZUFzc2V0PXt0aGlzLnByb3BzLnF1b3RlQXNzZXQuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZUFzc2V0PXt0aGlzLnByb3BzLmJhc2VBc3NldC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLmlzUHJpY2VBbGVydE1vZGFsVmlzaWJsZX1cclxuICAgICAgICAgICAgICAgICAgICBzaG93TW9kYWw9e3RoaXMuc2hvd1ByaWNlQWxlcnRNb2RhbH1cclxuICAgICAgICAgICAgICAgICAgICBoaWRlTW9kYWw9e3RoaXMuaGlkZVByaWNlQWxlcnRNb2RhbH1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEV4Y2hhbmdlO1xyXG4iLCJpbXBvcnQgY25hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XHJcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBUcmFuc2xhdGVXaXRoTGlua3MgZnJvbSBcIi4uL1V0aWxpdHkvVHJhbnNsYXRlV2l0aExpbmtzXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCBQcmljZVRleHQgZnJvbSBcIi4uL1V0aWxpdHkvUHJpY2VUZXh0XCI7XHJcbmltcG9ydCBBc3NldE5hbWUgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXROYW1lXCI7XHJcbmltcG9ydCB7QXNzZXR9IGZyb20gXCJjb21tb24vTWFya2V0Q2xhc3Nlc1wiO1xyXG5pbXBvcnQgRXhjaGFuZ2VJbnB1dCBmcm9tIFwiLi9FeGNoYW5nZUlucHV0XCI7XHJcbmltcG9ydCBhc3NldFV0aWxzIGZyb20gXCJjb21tb24vYXNzZXRfdXRpbHNcIjtcclxuaW1wb3J0IHtEYXRlUGlja2VyfSBmcm9tIFwiYW50ZFwiO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcclxuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xyXG5pbXBvcnQgU2V0dGxlTW9kYWwgZnJvbSBcIi4uL01vZGFsL1NldHRsZU1vZGFsXCI7XHJcbmltcG9ydCB7QnV0dG9uLCBTZWxlY3QsIFBvcG92ZXIsIFRvb2x0aXB9IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcclxuaW1wb3J0IFJlYWN0VG9vbHRpcCBmcm9tIFwicmVhY3QtdG9vbHRpcFwiO1xyXG5pbXBvcnQgQWNjb3VudFN0b3JlIGZyb20gXCIuLi8uLi9zdG9yZXMvQWNjb3VudFN0b3JlXCI7XHJcbmltcG9ydCBHYXRld2F5U3RvcmUgZnJvbSBcIi4uLy4uL3N0b3Jlcy9HYXRld2F5U3RvcmVcIjtcclxuXHJcbmNsYXNzIEJ1eVNlbGwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBiYWxhbmNlOiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LFxyXG4gICAgICAgIHR5cGU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICAgICAgYW1vdW50Q2hhbmdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgICAgIHByaWNlQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgICAgIG9uU3VibWl0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgICAgIG9uRXhwaXJhdGlvblR5cGVDaGFuZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXHJcbiAgICAgICAgb25FeHBpcmF0aW9uQ3VzdG9tQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgdHlwZTogXCJiaWRcIlxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGZvcmNlUmVSZW5kZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc1NldHRsZU1vZGFsVmlzaWJsZTogZmFsc2VcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNob3dTZXR0bGVNb2RhbCA9IHRoaXMuc2hvd1NldHRsZU1vZGFsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5oaWRlU2V0dGxlTW9kYWwgPSB0aGlzLmhpZGVTZXR0bGVNb2RhbC5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgKiBGb3JjZSByZS1yZW5kZXJpbmcgY29tcG9uZW50IHdoZW4gc3RhdGUgY2hhbmdlcy5cclxuICAgICAqIFRoaXMgaXMgcmVxdWlyZWQgZm9yIGFuIHVwZGF0ZWQgdmFsdWUgb2YgY29tcG9uZW50IHdpZHRoXHJcbiAgICAgKlxyXG4gICAgICogSXQgd2lsbCB0cmlnZ2VyIGEgcmUtcmVuZGVyIHR3aWNlXHJcbiAgICAgKiAtIE9uY2Ugd2hlbiBzdGF0ZSBpcyBjaGFuZ2VkXHJcbiAgICAgKiAtIE9uY2Ugd2hlbiBmb3JjZVJlUmVuZGVyIGlzIHNldCB0byBmYWxzZVxyXG4gICAgICovXHJcbiAgICBfZm9yY2VSZW5kZXIobnApIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5mb3JjZVJlUmVuZGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgZm9yY2VSZVJlbmRlcjogZmFsc2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5wYXJlbnRXaWR0aCAhPT0gbnAucGFyZW50V2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBmb3JjZVJlUmVuZGVyOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcclxuICAgICAgICB0aGlzLl9mb3JjZVJlbmRlcihuZXh0UHJvcHMsIG5leHRTdGF0ZSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIG5leHRTdGF0ZS5pc1NldHRsZU1vZGFsVmlzaWJsZSAhPT1cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc1NldHRsZU1vZGFsVmlzaWJsZSB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuYW1vdW50ICE9PSB0aGlzLnByb3BzLmFtb3VudCB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMub25Cb3Jyb3cgIT09IHRoaXMucHJvcHMub25Cb3Jyb3cgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLnRvdGFsICE9PSB0aGlzLnByb3BzLnRvdGFsIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5jdXJyZW50UHJpY2UgIT09IHRoaXMucHJvcHMuY3VycmVudFByaWNlIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5wcmljZSAhPT0gdGhpcy5wcm9wcy5wcmljZSB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuYmFsYW5jZSAhPT0gdGhpcy5wcm9wcy5iYWxhbmNlIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5hY2NvdW50ICE9PSB0aGlzLnByb3BzLmFjY291bnQgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLmNsYXNzTmFtZSAhPT0gdGhpcy5wcm9wcy5jbGFzc05hbWUgfHxcclxuICAgICAgICAgICAgKG5leHRQcm9wcy5mZWUgJiYgdGhpcy5wcm9wcy5mZWVcclxuICAgICAgICAgICAgICAgID8gbmV4dFByb3BzLmZlZS5uZSh0aGlzLnByb3BzLmZlZSlcclxuICAgICAgICAgICAgICAgIDogZmFsc2UpIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5pc1ByZWRpY3Rpb25NYXJrZXQgIT09IHRoaXMucHJvcHMuaXNQcmVkaWN0aW9uTWFya2V0IHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5mZWVBc3NldCAhPT0gdGhpcy5wcm9wcy5mZWVBc3NldCB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuaXNPcGVuICE9PSB0aGlzLnByb3BzLmlzT3BlbiB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuaGFzRmVlQmFsYW5jZSAhPT0gdGhpcy5wcm9wcy5oYXNGZWVCYWxhbmNlIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5leHBpcmF0aW9uVHlwZSAhPT0gdGhpcy5wcm9wcy5leHBpcmF0aW9uVHlwZSB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuZXhwaXJhdGlvbkN1c3RvbVRpbWUgIT09XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZXhwaXJhdGlvbkN1c3RvbVRpbWUgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLnBhcmVudFdpZHRoICE9PSB0aGlzLnByb3BzLnBhcmVudFdpZHRoIHx8XHJcbiAgICAgICAgICAgIG5leHRTdGF0ZS5mb3JjZVJlUmVuZGVyICE9PSB0aGlzLnN0YXRlLmZvcmNlUmVSZW5kZXIgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLnNpbmdsZUNvbHVtbk9yZGVyRm9ybSAhPT1cclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5zaW5nbGVDb2x1bW5PcmRlckZvcm0gfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLmhpZGVGdW5jdGlvbkJ1dHRvbnMgIT09IHRoaXMucHJvcHMuaGlkZUZ1bmN0aW9uQnV0dG9ucyB8fFxyXG4gICAgICAgICAgICBuZXh0U3RhdGUuaXNRdWlja0RlcG9zaXRWaXNpYmxlICE9PSB0aGlzLnN0YXRlLmlzUXVpY2tEZXBvc2l0VmlzaWJsZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0ZVBpY2tlclJlZiA9IG5vZGUgPT4ge1xyXG4gICAgICAgIHRoaXMuZGF0ZVByaWNrZXIgPSBub2RlO1xyXG4gICAgfTtcclxuXHJcbiAgICBzaG93U2V0dGxlTW9kYWwoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzU2V0dGxlTW9kYWxWaXNpYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZVNldHRsZU1vZGFsKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc1NldHRsZU1vZGFsVmlzaWJsZTogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfYWRkQmFsYW5jZShiYWxhbmNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMudHlwZSA9PT0gXCJiaWRcIikge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLnRvdGFsQ2hhbmdlKHtcclxuICAgICAgICAgICAgICAgIHRhcmdldDoge3ZhbHVlOiBiYWxhbmNlLmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pLnRvU3RyaW5nKCl9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYW1vdW50Q2hhbmdlKHtcclxuICAgICAgICAgICAgICAgIHRhcmdldDoge3ZhbHVlOiBiYWxhbmNlLmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pLnRvU3RyaW5nKCl9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfc2V0UHJpY2UocHJpY2UpIHtcclxuICAgICAgICB0aGlzLnByb3BzLnByaWNlQ2hhbmdlKHt0YXJnZXQ6IHt2YWx1ZTogcHJpY2UudG9TdHJpbmcoKX19KTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVRdWlja0RlcG9zaXRWaXNpYmxlQ2hhbmdlID0gdmlzaWJsZSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNRdWlja0RlcG9zaXRWaXNpYmxlOiB2aXNpYmxlfSk7XHJcbiAgICAgICAgaWYgKHZpc2libGUpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBSZWFjdFRvb2x0aXAucmVidWlsZCgpO1xyXG4gICAgICAgICAgICB9LCAyMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBvbkRlcG9zaXQoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzUXVpY2tEZXBvc2l0VmlzaWJsZTogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnByb3BzLm9uRGVwb3NpdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQnV5KCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc1F1aWNrRGVwb3NpdFZpc2libGU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5vbkJ1eSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRXhwaXJhdGlvblNlbGVjdENoYW5nZSA9IGUgPT4ge1xyXG4gICAgICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gXCJTUEVDSUZJQ1wiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVByaWNrZXIucGlja2VyLmhhbmRsZU9wZW5DaGFuZ2UodHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRlUHJpY2tlci5waWNrZXIuaGFuZGxlT3BlbkNoYW5nZShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnByb3BzLm9uRXhwaXJhdGlvblR5cGVDaGFuZ2UoZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIG9uRXhwaXJhdGlvblNlbGVjdENsaWNrID0gZSA9PiB7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlNQRUNJRklDXCIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmlyc3RDbGljaykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWNvbmRDbGljayA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5maXJzdENsaWNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2Vjb25kQ2xpY2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVByaWNrZXIucGlja2VyLmhhbmRsZU9wZW5DaGFuZ2UodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0Q2xpY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Vjb25kQ2xpY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgb25FeHBpcmF0aW9uU2VsZWN0Qmx1ciA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmZpcnN0Q2xpY2sgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNlY29uZENsaWNrID0gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICB0eXBlLFxyXG4gICAgICAgICAgICBxdW90ZSxcclxuICAgICAgICAgICAgYmFzZSxcclxuICAgICAgICAgICAgYW1vdW50Q2hhbmdlLFxyXG4gICAgICAgICAgICBmZWUsXHJcbiAgICAgICAgICAgIGlzUHJlZGljdGlvbk1hcmtldCxcclxuICAgICAgICAgICAgcHJpY2VDaGFuZ2UsXHJcbiAgICAgICAgICAgIG9uU3VibWl0LFxyXG4gICAgICAgICAgICBiYWxhbmNlLFxyXG4gICAgICAgICAgICB0b3RhbENoYW5nZSxcclxuICAgICAgICAgICAgYmFsYW5jZVByZWNpc2lvbixcclxuICAgICAgICAgICAgY3VycmVudFByaWNlLFxyXG4gICAgICAgICAgICBjdXJyZW50UHJpY2VPYmplY3QsXHJcbiAgICAgICAgICAgIGZlZUFzc2V0LFxyXG4gICAgICAgICAgICBmZWVBc3NldHMsXHJcbiAgICAgICAgICAgIGhhc0ZlZUJhbGFuY2UsXHJcbiAgICAgICAgICAgIGhpZGVIZWFkZXIsXHJcbiAgICAgICAgICAgIHZlcnRpY2FsT3JkZXJGb3JtXHJcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgY29uc3Qge2V4cGlyYXRpb25DdXN0b21UaW1lfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGxldCBjbGllbnRXaWR0aCA9IHRoaXMucmVmcy5vcmRlcl9mb3JtXHJcbiAgICAgICAgICAgID8gdGhpcy5yZWZzLm9yZGVyX2Zvcm0uY2xpZW50V2lkdGhcclxuICAgICAgICAgICAgOiAwO1xyXG4gICAgICAgIGxldCBzaW5nbGVDb2x1bW5Gb3JtID1cclxuICAgICAgICAgICAgY2xpZW50V2lkdGggPCA0NTAgfHwgdGhpcy5wcm9wcy5zaW5nbGVDb2x1bW5PcmRlckZvcm1cclxuICAgICAgICAgICAgICAgID8gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IGFtb3VudCwgcHJpY2UsIHRvdGFsO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hbW91bnQpIGFtb3VudCA9IHRoaXMucHJvcHMuYW1vdW50O1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnByaWNlKSBwcmljZSA9IHRoaXMucHJvcHMucHJpY2U7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMudG90YWwpIHRvdGFsID0gdGhpcy5wcm9wcy50b3RhbDtcclxuXHJcbiAgICAgICAgbGV0IGJhbGFuY2VBbW91bnQgPSBuZXcgQXNzZXQoe1xyXG4gICAgICAgICAgICBhbW91bnQ6IGJhbGFuY2UgPyBiYWxhbmNlLmdldChcImJhbGFuY2VcIikgOiAwLFxyXG4gICAgICAgICAgICBwcmVjaXNpb246IGJhbGFuY2VQcmVjaXNpb24sXHJcbiAgICAgICAgICAgIGFzc2V0X2lkOiB0aGlzLnByb3BzLmJhbGFuY2VJZFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBtYXhCYXNlTWFya2V0RmVlID0gbmV3IEFzc2V0KHtcclxuICAgICAgICAgICAgYW1vdW50OiBiYXNlLmdldEluKFtcIm9wdGlvbnNcIiwgXCJtYXhfbWFya2V0X2ZlZVwiXSksXHJcbiAgICAgICAgICAgIGFzc2V0X2lkOiBiYXNlLmdldChcImFzc2V0X2lkXCIpLFxyXG4gICAgICAgICAgICBwcmVjaXNpb246IGJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgbWF4UXVvdGVNYXJrZXRGZWUgPSBuZXcgQXNzZXQoe1xyXG4gICAgICAgICAgICBhbW91bnQ6IHF1b3RlLmdldEluKFtcIm9wdGlvbnNcIiwgXCJtYXhfbWFya2V0X2ZlZVwiXSksXHJcbiAgICAgICAgICAgIGFzc2V0X2lkOiBxdW90ZS5nZXQoXCJhc3NldF9pZFwiKSxcclxuICAgICAgICAgICAgcHJlY2lzaW9uOiBxdW90ZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBiYXNlTWFya2V0RmVlUGVyY2VudCA9XHJcbiAgICAgICAgICAgIGJhc2UuZ2V0SW4oW1wib3B0aW9uc1wiLCBcIm1hcmtldF9mZWVfcGVyY2VudFwiXSkgLyAxMDAgKyBcIiVcIjtcclxuICAgICAgICBjb25zdCBxdW90ZU1hcmtldEZlZVBlcmNlbnQgPVxyXG4gICAgICAgICAgICBxdW90ZS5nZXRJbihbXCJvcHRpb25zXCIsIFwibWFya2V0X2ZlZV9wZXJjZW50XCJdKSAvIDEwMCArIFwiJVwiO1xyXG4gICAgICAgIGNvbnN0IHF1b3RlRmVlID0gIWFtb3VudFxyXG4gICAgICAgICAgICA/IDBcclxuICAgICAgICAgICAgOiBNYXRoLm1pbihcclxuICAgICAgICAgICAgICAgIG1heFF1b3RlTWFya2V0RmVlLmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pLFxyXG4gICAgICAgICAgICAgICAgKGFtb3VudCAqIHF1b3RlLmdldEluKFtcIm9wdGlvbnNcIiwgXCJtYXJrZXRfZmVlX3BlcmNlbnRcIl0pKSAvXHJcbiAgICAgICAgICAgICAgICAxMDAwMFxyXG4gICAgICAgICAgICApLnRvRml4ZWQobWF4UXVvdGVNYXJrZXRGZWUucHJlY2lzaW9uKTtcclxuICAgICAgICBjb25zdCBiYXNlRmVlID0gIWFtb3VudFxyXG4gICAgICAgICAgICA/IDBcclxuICAgICAgICAgICAgOiBNYXRoLm1pbihcclxuICAgICAgICAgICAgICAgIG1heEJhc2VNYXJrZXRGZWUuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSksXHJcbiAgICAgICAgICAgICAgICAodG90YWwgKiBiYXNlLmdldEluKFtcIm9wdGlvbnNcIiwgXCJtYXJrZXRfZmVlX3BlcmNlbnRcIl0pKSAvXHJcbiAgICAgICAgICAgICAgICAxMDAwMFxyXG4gICAgICAgICAgICApLnRvRml4ZWQobWF4QmFzZU1hcmtldEZlZS5wcmVjaXNpb24pO1xyXG4gICAgICAgIGNvbnN0IGJhc2VGbGFnQm9vbGVhbnMgPSBhc3NldFV0aWxzLmdldEZsYWdCb29sZWFucyhcclxuICAgICAgICAgICAgYmFzZS5nZXRJbihbXCJvcHRpb25zXCIsIFwiZmxhZ3NcIl0pLFxyXG4gICAgICAgICAgICBiYXNlLmhhcyhcImJpdGFzc2V0X2RhdGFfaWRcIilcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IHF1b3RlRmxhZ0Jvb2xlYW5zID0gYXNzZXRVdGlscy5nZXRGbGFnQm9vbGVhbnMoXHJcbiAgICAgICAgICAgIHF1b3RlLmdldEluKFtcIm9wdGlvbnNcIiwgXCJmbGFnc1wiXSksXHJcbiAgICAgICAgICAgIHF1b3RlLmhhcyhcImJpdGFzc2V0X2RhdGFfaWRcIilcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCB7bmFtZTogYmFzZU5hbWUsIHByZWZpeDogYmFzZVByZWZpeH0gPSB1dGlscy5yZXBsYWNlTmFtZShcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5iYXNlXHJcbiAgICAgICAgKTtcclxuICAgICAgICB2YXIgYmFzZU1hcmtldEZlZSA9IGJhc2VGbGFnQm9vbGVhbnNbXCJjaGFyZ2VfbWFya2V0X2ZlZVwiXSA/IChcclxuICAgICAgICAgICAgdmVydGljYWxPcmRlckZvcm0gPyAoXHJcbiAgICAgICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJ0b29sdGlwLm1hcmtldF9mZWVcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJjZW50OiBiYXNlTWFya2V0RmVlUGVyY2VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ6IChiYXNlUHJlZml4IHx8IFwiXCIpICsgYmFzZU5hbWVcclxuICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tb3ZlcmZsb3cgd3JhcCBzaHJpbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBidXktc2VsbC1sYWJlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIuYXNzZXQuc3VtbWFyeS5tYXJrZXRfZmVlXCIvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCB7YmFzZU1hcmtldEZlZVBlcmNlbnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0QWRkb24gc21hbGwtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFeGNoYW5nZUlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiYmFzZU1hcmtldEZlZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtiYXNlRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtiYXNlRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZG9uQWZ0ZXI9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub1RpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2Jhc2UuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICApIDogc2luZ2xlQ29sdW1uRm9ybSA/IChcclxuICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInRvb2x0aXAubWFya2V0X2ZlZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnQ6IGJhc2VNYXJrZXRGZWVQZXJjZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldDogKGJhc2VQcmVmaXggfHwgXCJcIikgKyBiYXNlTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1vdmVyZmxvdyB3cmFwIHNocmlua1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTMgYnV5LXNlbGwtbGFiZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLmFzc2V0LnN1bW1hcnkubWFya2V0X2ZlZVwiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwge2Jhc2VNYXJrZXRGZWVQZXJjZW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dEFkZG9uIHNtYWxsLTlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFeGNoYW5nZUlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiYmFzZU1hcmtldEZlZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtiYXNlRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtiYXNlRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZG9uQWZ0ZXI9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub1RpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2Jhc2UuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFwidG9vbHRpcC5tYXJrZXRfZmVlXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudDogYmFzZU1hcmtldEZlZVBlcmNlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0OiAoYmFzZVByZWZpeCB8fCBcIlwiKSArIGJhc2VOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgYnV5LXNlbGwtbGFiZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLmFzc2V0LnN1bW1hcnkubWFya2V0X2ZlZVwiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwge2Jhc2VNYXJrZXRGZWVQZXJjZW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dEFkZG9uIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RXhjaGFuZ2VJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMC4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cImJhc2VNYXJrZXRGZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17YmFzZUZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17YmFzZUZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRvbkFmdGVyPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9UaXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtiYXNlLmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICkgOiBudWxsO1xyXG5cclxuICAgICAgICBjb25zdCB7bmFtZTogcXVvdGVOYW1lLCBwcmVmaXg6IHF1b3RlUHJlZml4fSA9IHV0aWxzLnJlcGxhY2VOYW1lKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLnF1b3RlXHJcbiAgICAgICAgKTtcclxuICAgICAgICB2YXIgcXVvdGVNYXJrZXRGZWUgPSBxdW90ZUZsYWdCb29sZWFuc1tcImNoYXJnZV9tYXJrZXRfZmVlXCJdID8gKFxyXG4gICAgICAgICAgICB2ZXJ0aWNhbE9yZGVyRm9ybSA/IChcclxuICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInRvb2x0aXAubWFya2V0X2ZlZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnQ6IHF1b3RlTWFya2V0RmVlUGVyY2VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ6IChxdW90ZVByZWZpeCB8fCBcIlwiKSArIHF1b3RlTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1vdmVyZmxvdyB3cmFwIHNocmlua1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGJ1eS1zZWxsLWxhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5hc3NldC5zdW1tYXJ5Lm1hcmtldF9mZWVcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHtxdW90ZU1hcmtldEZlZVBlcmNlbnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0QWRkb24gc21hbGwtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFeGNoYW5nZUlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwicXVvdGVNYXJrZXRGZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17cXVvdGVGZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3F1b3RlRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZG9uQWZ0ZXI9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiAxMDB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vVGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17cXVvdGUuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICApIDogc2luZ2xlQ29sdW1uRm9ybSA/IChcclxuICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInRvb2x0aXAubWFya2V0X2ZlZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnQ6IHF1b3RlTWFya2V0RmVlUGVyY2VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ6IChxdW90ZVByZWZpeCB8fCBcIlwiKSArIHF1b3RlTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1vdmVyZmxvdyB3cmFwIHNocmlua1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTMgYnV5LXNlbGwtbGFiZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLmFzc2V0LnN1bW1hcnkubWFya2V0X2ZlZVwiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwge3F1b3RlTWFya2V0RmVlUGVyY2VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5wdXRBZGRvbiBzbWFsbC05XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RXhjaGFuZ2VJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMC4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cInF1b3RlTWFya2V0RmVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3F1b3RlRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtxdW90ZUZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRvbkFmdGVyPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogMTAwfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub1RpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3F1b3RlLmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInRvb2x0aXAubWFya2V0X2ZlZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnQ6IHF1b3RlTWFya2V0RmVlUGVyY2VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ6IChxdW90ZVByZWZpeCB8fCBcIlwiKSArIHF1b3RlTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1vdmVyZmxvdyB3cmFwIHNocmlua1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGJ1eS1zZWxsLWxhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5hc3NldC5zdW1tYXJ5Lm1hcmtldF9mZWVcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHtxdW90ZU1hcmtldEZlZVBlcmNlbnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0QWRkb24gc21hbGwtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFeGNoYW5nZUlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwicXVvdGVNYXJrZXRGZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17cXVvdGVGZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3F1b3RlRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZG9uQWZ0ZXI9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiAxMDB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vVGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17cXVvdGUuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKSA6IG51bGw7XHJcblxyXG4gICAgICAgIHZhciBlbXB0eUNlbGwgPSAhdmVydGljYWxPcmRlckZvcm0gPyAoXHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7dmlzaWJpbGl0eTogXCJoaWRkZW5cIn19XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0zIGJ1eS1zZWxsLWxhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIuYXNzZXQuc3VtbWFyeS5tYXJrZXRfZmVlXCIvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0QWRkb24gc21hbGwtOVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxFeGNoYW5nZUlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMC4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJlbXB0eVBsYWNlaG9sZGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPVwiMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZG9uQWZ0ZXI9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiAxMDB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub1RpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtxdW90ZS5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKSA6IG51bGw7XHJcblxyXG4gICAgICAgIGNvbnN0IGlzQmlkID0gdHlwZSA9PT0gXCJiaWRcIjtcclxuICAgICAgICBsZXQgbWFya2V0RmVlID1cclxuICAgICAgICAgICAgaXNCaWQgJiYgcXVvdGVNYXJrZXRGZWVcclxuICAgICAgICAgICAgICAgID8gcXVvdGVNYXJrZXRGZWVcclxuICAgICAgICAgICAgICAgIDogIWlzQmlkICYmIGJhc2VNYXJrZXRGZWVcclxuICAgICAgICAgICAgICAgICAgICA/IGJhc2VNYXJrZXRGZWVcclxuICAgICAgICAgICAgICAgICAgICA6IHF1b3RlTWFya2V0RmVlIHx8IGJhc2VNYXJrZXRGZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBlbXB0eUNlbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xyXG5cclxuICAgICAgICBsZXQgaGFzQmFsYW5jZSA9IGlzQmlkXHJcbiAgICAgICAgICAgID8gYmFsYW5jZUFtb3VudC5nZXRBbW91bnQoe3JlYWw6IHRydWV9KSA+PSBwYXJzZUZsb2F0KHRvdGFsKVxyXG4gICAgICAgICAgICA6IGJhbGFuY2VBbW91bnQuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSkgPj0gcGFyc2VGbG9hdChhbW91bnQpO1xyXG5cclxuICAgICAgICBsZXQgZm9yY2VTZWxsVGV4dCA9IGlzQmlkXHJcbiAgICAgICAgICAgID8gY291bnRlcnBhcnQudHJhbnNsYXRlKFwiZXhjaGFuZ2UuYnV5XCIpXHJcbiAgICAgICAgICAgIDogY291bnRlcnBhcnQudHJhbnNsYXRlKFwiZXhjaGFuZ2Uuc2VsbFwiKTtcclxuXHJcbiAgICAgICAgbGV0IG5vQmFsYW5jZSA9IGlzUHJlZGljdGlvbk1hcmtldFxyXG4gICAgICAgICAgICA/IGZhbHNlXHJcbiAgICAgICAgICAgIDogIShiYWxhbmNlQW1vdW50LmdldEFtb3VudCgpID4gMCAmJiBoYXNCYWxhbmNlKTtcclxuICAgICAgICBsZXQgaW52YWxpZFByaWNlID0gIShwcmljZSA+IDApO1xyXG4gICAgICAgIGxldCBpbnZhbGlkQW1vdW50ID0gIShhbW91bnQgPiAwKTtcclxuXHJcbiAgICAgICAgbGV0IGRpc2FibGVkID0gbm9CYWxhbmNlIHx8IGludmFsaWRQcmljZSB8fCBpbnZhbGlkQW1vdW50O1xyXG5cclxuICAgICAgICBsZXQgYnV0dG9uQ2xhc3MgPSBjbGFzc05hbWVzKFwiYnV0dG9uIGJ1eVNlbGxCdXR0b25cIiwgdHlwZSwge1xyXG4gICAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWRcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgYmFsYW5jZVN5bWJvbCA9IGlzQmlkID8gYmFzZS5nZXQoXCJzeW1ib2xcIikgOiBxdW90ZS5nZXQoXCJzeW1ib2xcIik7XHJcblxyXG4gICAgICAgIGxldCBkaXNhYmxlZFRleHQgPSBpbnZhbGlkUHJpY2VcclxuICAgICAgICAgICAgPyBjb3VudGVycGFydC50cmFuc2xhdGUoXCJleGNoYW5nZS5pbnZhbGlkX3ByaWNlXCIpXHJcbiAgICAgICAgICAgIDogaW52YWxpZEFtb3VudFxyXG4gICAgICAgICAgICAgICAgPyBjb3VudGVycGFydC50cmFuc2xhdGUoXCJleGNoYW5nZS5pbnZhbGlkX2Ftb3VudFwiKVxyXG4gICAgICAgICAgICAgICAgOiBub0JhbGFuY2VcclxuICAgICAgICAgICAgICAgICAgICA/IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImV4Y2hhbmdlLm5vX2JhbGFuY2VcIilcclxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XHJcblxyXG4gICAgICAgIC8vIEZlZSBhc3NldCBzZWxlY3Rpb25cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGZlZUFzc2V0c1sxXSAmJlxyXG4gICAgICAgICAgICBmZWVBc3NldHNbMV0uZ2V0SW4oW1xyXG4gICAgICAgICAgICAgICAgXCJvcHRpb25zXCIsXHJcbiAgICAgICAgICAgICAgICBcImNvcmVfZXhjaGFuZ2VfcmF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJxdW90ZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJhc3NldF9pZFwiXHJcbiAgICAgICAgICAgIF0pID09PSBcIjEuMy4wXCIgJiZcclxuICAgICAgICAgICAgZmVlQXNzZXRzWzFdLmdldEluKFtcclxuICAgICAgICAgICAgICAgIFwib3B0aW9uc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJjb3JlX2V4Y2hhbmdlX3JhdGVcIixcclxuICAgICAgICAgICAgICAgIFwiYmFzZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJhc3NldF9pZFwiXHJcbiAgICAgICAgICAgIF0pID09PSBcIjEuMy4wXCJcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgZmVlQXNzZXQgPSBmZWVBc3NldHNbMF07XHJcbiAgICAgICAgICAgIGZlZUFzc2V0cy5zcGxpY2UoMSwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBmZWVBc3NldHMubWFwKGFzc2V0ID0+IHtcclxuICAgICAgICAgICAgbGV0IHtuYW1lLCBwcmVmaXh9ID0gdXRpbHMucmVwbGFjZU5hbWUoYXNzZXQpO1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXthc3NldC5nZXQoXCJpZFwiKX0gdmFsdWU9e2luZGV4Kyt9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtwcmVmaXh9XHJcbiAgICAgICAgICAgICAgICAgICAge25hbWV9XHJcbiAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN1YnRyYWN0IGZlZSBmcm9tIGFtb3VudCB0byBzZWxsXHJcbiAgICAgICAgbGV0IGJhbGFuY2VUb0FkZDtcclxuXHJcbiAgICAgICAgaWYgKGZlZUFzc2V0LmdldChcInN5bWJvbFwiKSA9PT0gYmFsYW5jZVN5bWJvbCkge1xyXG4gICAgICAgICAgICBiYWxhbmNlVG9BZGQgPSBiYWxhbmNlQW1vdW50LmNsb25lKFxyXG4gICAgICAgICAgICAgICAgYmFsYW5jZUFtb3VudC5nZXRBbW91bnQoKSAtIGZlZS5nZXRBbW91bnQoKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJhbGFuY2VUb0FkZCA9IGJhbGFuY2VBbW91bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZGF0YUludHJvID0gaXNCaWRcclxuICAgICAgICAgICAgPyBjb3VudGVycGFydC50cmFuc2xhdGUoXCJ3YWxrdGhyb3VnaC5idXlfZm9ybVwiKVxyXG4gICAgICAgICAgICA6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcIndhbGt0aHJvdWdoLnNlbGxfZm9ybVwiKTtcclxuXHJcbiAgICAgICAgbGV0IGV4cGlyYXRpb25UaXA7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmV4cGlyYXRpb25UeXBlICE9PSBcIlNQRUNJRklDXCIpIHtcclxuICAgICAgICAgICAgZXhwaXJhdGlvblRpcCA9IHRoaXMucHJvcHMuZXhwaXJhdGlvbnNbXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmV4cGlyYXRpb25UeXBlXHJcbiAgICAgICAgICAgIF0uZ2V0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBleHBpcmF0aW9uc09wdGlvbnNMaXN0ID0gT2JqZWN0LmtleXModGhpcy5wcm9wcy5leHBpcmF0aW9ucykubWFwKFxyXG4gICAgICAgICAgICBrZXkgPT4gKFxyXG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT17a2V5fSBrZXk9e2tleX0+XHJcbiAgICAgICAgICAgICAgICAgICAge2tleSA9PT0gXCJTUEVDSUZJQ1wiICYmIGV4cGlyYXRpb25DdXN0b21UaW1lICE9PSBcIlNwZWNpZmljXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBtb21lbnQoZXhwaXJhdGlvbkN1c3RvbVRpbWUpLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiRG8gTU1NIFlZWVkgaGg6bW0gQVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnByb3BzLmV4cGlyYXRpb25zW2tleV0udGl0bGV9XHJcbiAgICAgICAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckNsYXNzID0gXCJzbWFsbC0xMlwiO1xyXG4gICAgICAgIGxldCBmb3JtQ29udGVudDtcclxuXHJcbiAgICAgICAgLy8gT3JkZXJGb3JtIGlzIGluIHBhbmVsXHJcbiAgICAgICAgaWYgKHZlcnRpY2FsT3JkZXJGb3JtKSB7XHJcbiAgICAgICAgICAgIGZvcm1Db250ZW50ID0gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NvbnRhaW5lckNsYXNzfT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tb3ZlcmZsb3cgd3JhcCBzaHJpbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic21hbGwtMTIgYnV5LXNlbGwtbGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4Y2hhbmdlLnByaWNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dEFkZG9uIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RXhjaGFuZ2VJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgJHt0eXBlfVByaWNlYH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cHJpY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3ByaWNlQ2hhbmdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZG9uQWZ0ZXI9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhUGxhY2U9XCJyaWdodFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17YmFzZS5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7LyZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFQbGFjZT1cInJpZ2h0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtxdW90ZS5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiAgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNtYWxsLTEyIGJ1eS1zZWxsLWxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJ0cmFuc2Zlci5hbW91bnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0QWRkb24gc21hbGwtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFeGNoYW5nZUlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2Ake3R5cGV9QW1vdW50YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17YW1vdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXthbW91bnRDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkb25BZnRlcj17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFQbGFjZT1cInJpZ2h0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtxdW90ZS5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNtYWxsLTEyIGJ1eS1zZWxsLWxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJleGNoYW5nZS50b3RhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5wdXRBZGRvbiBzbWFsbC0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEV4Y2hhbmdlSW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17YCR7dHlwZX1Ub3RhbGB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RvdGFsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0b3RhbENoYW5nZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvQ29tcGxldGU9XCJvZmZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMC4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRvbkFmdGVyPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVBsYWNlPVwicmlnaHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2Jhc2UuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1vdmVyZmxvdyB3cmFwIHNocmlua1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzbWFsbC0xMiBidXktc2VsbC1sYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwidHJhbnNmZXIuZmVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dEFkZG9uIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RXhjaGFuZ2VJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgJHt0eXBlfUZlZWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFoYXNGZWVCYWxhbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHJhbnNmZXIuZXJyb3JzLmluc3VmZmljaWVudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZlZS5nZXRBbW91bnQoe3JlYWw6IHRydWV9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZG9uQWZ0ZXI9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiAxMDB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2ZlZUFzc2V0cy5sZW5ndGggPT09IDF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZlZUFzc2V0cy5pbmRleE9mKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZmVlQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vbkNoYW5nZUZlZUFzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3B0aW9uc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAge21hcmtldEZlZX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvcm1Db250ZW50ID0gc2luZ2xlQ29sdW1uRm9ybSA/IChcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjb250YWluZXJDbGFzc30+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNtYWxsLTMgYnV5LXNlbGwtbGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4Y2hhbmdlLnByaWNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dEFkZG9uIHNtYWxsLTlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFeGNoYW5nZUlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2Ake3R5cGV9UHJpY2VgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtwcmljZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17cHJpY2VDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkb25BZnRlcj17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFQbGFjZT1cInJpZ2h0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtiYXNlLmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDsvJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVBsYWNlPVwicmlnaHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3F1b3RlLmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tb3ZlcmZsb3cgd3JhcCBzaHJpbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgey8qICAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic21hbGwtMyBidXktc2VsbC1sYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwidHJhbnNmZXIuYW1vdW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dEFkZG9uIHNtYWxsLTlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFeGNoYW5nZUlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2Ake3R5cGV9QW1vdW50YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17YW1vdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXthbW91bnRDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkb25BZnRlcj17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFQbGFjZT1cInJpZ2h0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtxdW90ZS5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNtYWxsLTMgYnV5LXNlbGwtbGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4Y2hhbmdlLnRvdGFsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dEFkZG9uIHNtYWxsLTlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFeGNoYW5nZUlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2Ake3R5cGV9VG90YWxgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0b3RhbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dG90YWxDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkb25BZnRlcj17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFQbGFjZT1cInJpZ2h0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtiYXNlLmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tb3ZlcmZsb3cgd3JhcCBzaHJpbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic21hbGwtMyBidXktc2VsbC1sYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwidHJhbnNmZXIuZmVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dEFkZG9uIHNtYWxsLTlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFeGNoYW5nZUlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2Ake3R5cGV9RmVlYH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaGFzRmVlQmFsYW5jZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRyYW5zZmVyLmVycm9ycy5pbnN1ZmZpY2llbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmZWUuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRvbkFmdGVyPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogMTAwfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtmZWVBc3NldHMubGVuZ3RoID09PSAxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmZWVBc3NldHMuaW5kZXhPZihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmZlZUFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMucHJvcHMub25DaGFuZ2VGZWVBc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge29wdGlvbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIHttYXJrZXRGZWV9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjb250YWluZXJDbGFzc30+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMSBncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzbWFsbC0zIGJ1eS1zZWxsLWxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4Y2hhbmdlLnByaWNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic21hbGwtOSBidXktc2VsbC1sYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQm90dG9tOiBcIiNBMDlGOUYgMXB4IGRvdHRlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLnNldFByaWNlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZU9iamVjdC5zZWxsUHJpY2UoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFByaWNlVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlPXtjdXJyZW50UHJpY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU9e3F1b3RlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U9e2Jhc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0QWRkb24gc21hbGwtMTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RXhjaGFuZ2VJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17YCR7dHlwZX1QcmljZWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtwcmljZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3ByaWNlQ2hhbmdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvQ29tcGxldGU9XCJvZmZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZG9uQWZ0ZXI9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhUGxhY2U9XCJyaWdodFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2Jhc2UuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7LyZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVBsYWNlPVwicmlnaHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtxdW90ZS5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzbWFsbC0zIGJ1eS1zZWxsLWxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4Y2hhbmdlLnRvdGFsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic21hbGwtOSBidXktc2VsbC1sYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dGV4dEFsaWduOiBcInJpZ2h0XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic21hbGwtMyBidXktc2VsbC1sYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiZXhjaGFuZ2UuYmFsYW5jZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJCb3R0b206IFwiI0EwOUY5RiAxcHggZG90dGVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX2FkZEJhbGFuY2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VUb0FkZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3V0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZUFtb3VudC5nZXRBbW91bnQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFsOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVByZWNpc2lvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX17XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5wdXRBZGRvbiBzbWFsbC0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFeGNoYW5nZUlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgJHt0eXBlfVRvdGFsYH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RvdGFsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dG90YWxDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMC4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkb25BZnRlcj17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFQbGFjZT1cInJpZ2h0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17YmFzZS5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qICAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzbWFsbC0zIGJ1eS1zZWxsLWxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwidHJhbnNmZXIuYW1vdW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0QWRkb24gc21hbGwtMTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RXhjaGFuZ2VJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17YCR7dHlwZX1BbW91bnRgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17YW1vdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17YW1vdW50Q2hhbmdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvQ29tcGxldGU9XCJvZmZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZG9uQWZ0ZXI9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhUGxhY2U9XCJyaWdodFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3F1b3RlLmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic21hbGwtMyBidXktc2VsbC1sYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cInRyYW5zZmVyLmZlZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dEFkZG9uIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEV4Y2hhbmdlSW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2Ake3R5cGV9RmVlYH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWhhc0ZlZUJhbGFuY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRyYW5zZmVyLmVycm9ycy5pbnN1ZmZpY2llbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZlZS5nZXRBbW91bnQoe3JlYWw6IHRydWV9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZG9uQWZ0ZXI9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IDEwMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2ZlZUFzc2V0cy5sZW5ndGggPT09IDF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmZWVBc3NldHMuaW5kZXhPZihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5mZWVBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlRmVlQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge29wdGlvbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG90aGVyQXNzZXQgPSBpc0JpZCA/IGJhc2UgOiBxdW90ZTtcclxuICAgICAgICBjb25zdCBpc0JpdEFzc2V0ID0gISFvdGhlckFzc2V0LmdldChcImJpdGFzc2V0XCIpO1xyXG4gICAgICAgIC8vIGNoZWNrIGlmIGdsb2JhbGx5IHNldHRsZWRcclxuICAgICAgICBjb25zdCBpc0dsb2JhbGx5U2V0dGxlZCA9XHJcbiAgICAgICAgICAgIGlzQml0QXNzZXQgJiYgb3RoZXJBc3NldC5nZXQoXCJiaXRhc3NldFwiKS5nZXQoXCJzZXR0bGVtZW50X2Z1bmRcIikgPiAwO1xyXG5cclxuICAgICAgICBjb25zdCBjdXJyZW50QWNjb3VudCA9IEFjY291bnRTdG9yZS5nZXRTdGF0ZSgpLmN1cnJlbnRBY2NvdW50O1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyh0aGlzLnByb3BzLmNsYXNzTmFtZSl9XHJcbiAgICAgICAgICAgICAgICBzdHlsZT17dGhpcy5wcm9wcy5zdHlsZXN9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXktc2VsbC1jb250YWluZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ1JpZ2h0OiA1fX1cclxuICAgICAgICAgICAgICAgICAgICAvL2RhdGEtaW50cm89e2RhdGFJbnRyb31cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICB7IWhpZGVIZWFkZXIgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS1jb250ZW50LWhlYWRlciBleGNoYW5nZS1jb250ZW50LWhlYWRlci0tYnV5LXNlbGwtZm9ybSBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlV2l0aExpbmtzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZz1cImV4Y2hhbmdlLmJ1eXNlbGxfZm9ybWF0dGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9MaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vVGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXM9e1tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHF1b3RlLmdldChcInN5bWJvbFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmc6IFwiYXNzZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRyYW5zbGF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpc1ByZWRpY3Rpb25NYXJrZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImV4Y2hhbmdlLnNob3J0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBpc0JpZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImV4Y2hhbmdlLmJ1eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiZXhjaGFuZ2Uuc2VsbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZzogXCJkaXJlY3Rpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogPHNwYW4+e2J1dHRvblRleHR9IDxBc3NldE5hbWUgZGF0YVBsYWNlPVwidG9wXCIgbmFtZT17cXVvdGUuZ2V0KFwic3ltYm9sXCIpfSAvPjwvc3Bhbj4gKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5vbkZsaXAgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnByb3BzLmhpZGVGdW5jdGlvbkJ1dHRvbnMgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkZsaXB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IFwiMXJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsaXAtYXJyb3dcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiM4NjQ2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLm9uVG9nZ2xlUG9zaXRpb24gJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnByb3BzLmhpZGVGdW5jdGlvbkJ1dHRvbnMgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vblRvZ2dsZVBvc2l0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjFyZW1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGlwLWFycm93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYjODY0NTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5tb3ZlT3JkZXJGb3JtICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5wcm9wcy5oaWRlRnVuY3Rpb25CdXR0b25zID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMubW92ZU9yZGVyRm9ybX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInRodW1iLXRhY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHggaWNvbi1maWxsIG9yZGVyLWJvb2stYnV0dG9uLXZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbkxlZnQ6IDV9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxmb3JtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cIm9yZGVyX2Zvcm1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCF0aGlzLnByb3BzLmlzT3BlbiA/IFwiaGlkZS1jb250YWluZXIgXCIgOiBcIlwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9yZGVyLWZvcm1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7Zm9udFNpemU6IFwiMTRweFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9WYWxpZGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5tb3ZlT3JkZXJGb3JtICYmIHZlcnRpY2FsT3JkZXJGb3JtID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCIxMDAlXCIsIHRleHRBbGlnbjogXCJyaWdodFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5tb3ZlT3JkZXJGb3JtfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0aHVtYi10YWNrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMThweCBpY29uLWZpbGwgb3JkZXItYm9vay1idXR0b24tdlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtQ29udGVudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tb3ZlcmZsb3cgd3JhcCBzaHJpbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGVDb2x1bW5Gb3JtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwic21hbGwtMTIgZ3JpZC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwic21hbGwtNlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic21hbGwtNCBidXktc2VsbC1sYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJ0cmFuc2FjdGlvbi5leHBpcmF0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtOCBleHBpcmF0aW9uLWRhdGV0aW1lLXBpY2tlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXt0aGlzLmdldERhdGVQaWNrZXJSZWZ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJleHBpcmF0aW9uLWRhdGV0aW1lLXBpY2tlci0taGlkZGVuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dUaW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93VG9kYXk9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWREYXRlPXtjdXJyZW50ID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudCA8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9tZW50KCkuYWRkKDU5LCBcIm1pbnV0ZXNcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uQ3VzdG9tVGltZSAhPT0gXCJTcGVjaWZpY1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZXhwaXJhdGlvbkN1c3RvbVRpbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBtb21lbnQoKS5hZGQoMSwgXCJob3VyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkV4cGlyYXRpb25DdXN0b21DaGFuZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY3Vyc29yLXBvaW50ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25FeHBpcmF0aW9uU2VsZWN0Q2hhbmdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkV4cGlyYXRpb25TZWxlY3RDbGlja31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQmx1cj17dGhpcy5vbkV4cGlyYXRpb25TZWxlY3RCbHVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb25UaXAgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb21lbnQoZXhwaXJhdGlvblRpcCkuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkRvIE1NTSBZWVlZIGhoOm1tIEFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLmV4cGlyYXRpb25UeXBlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXhwaXJhdGlvbnNPcHRpb25zTGlzdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshc2luZ2xlQ29sdW1uRm9ybSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTZcIj57bWFya2V0RmVlfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIG1lZGl1bS0xMiB4bGFyZ2UtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2luZ2xlQ29sdW1uRm9ybSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic21hbGwtNCBidXktc2VsbC1sYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQmlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiZXhjaGFuZ2UubG93ZXN0X2Fza1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiZXhjaGFuZ2UuaGlnaGVzdF9iaWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTggYnV5LXNlbGwtbGFiZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQm90dG9tOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiI0EwOUY5RiAxcHggZG90dGVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMuc2V0UHJpY2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFByaWNlT2JqZWN0LnNlbGxQcmljZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJpY2VUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZT17Y3VycmVudFByaWNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU9e3F1b3RlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17YmFzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2Jhc2UuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9UaXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtxdW90ZS5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub1RpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2luZ2xlQ29sdW1uRm9ybSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic21hbGwtNCBidXktc2VsbC1sYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4Y2hhbmdlLmJhbGFuY2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtOCBidXktc2VsbC1sYWJlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJCb3R0b206XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIjQTA5RjlGIDFweCBkb3R0ZWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fYWRkQmFsYW5jZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VUb0FkZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3V0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlQW1vdW50LmdldEFtb3VudCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhbDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlUHJlY2lzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtiYWxhbmNlU3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9UaXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e21hcmdpblRvcDogMTB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwidG9wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkVGV4dCA/IGRpc2FibGVkVGV4dCA6IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbG9hdC1yaWdodFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGlwPXtkaXNhYmxlZFRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJyaWdodFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGJ1dHRvbkNsYXNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvblN1Ym1pdC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiBcIjVweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IFwiMTBweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogXCI1cHhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0JpZCA/IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImV4Y2hhbmdlLmJ1eVwiKSA6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImV4Y2hhbmdlLnNlbGxcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbjogNX19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5jbGVhckZvcm0uYmluZCh0aGlzLCBpc0JpZCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2xlYXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPiAqL31cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jdXJyZW50QnJpZGdlcyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMucHJvcHMuYmFja2VkQ29pbiA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHYXRld2F5U3RvcmUuaXNEb3duKFwiVFJBREVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4dGVybmFsX3NlcnZpY2VfcHJvdmlkZXIuaXNfZG93blwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2UucXVpY2tfZGVwb3NpdF9icmlkZ2VcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogaXNCaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYmFzZU5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcXVvdGVOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW46IDV9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkJ1eS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2F0ZXdheVN0b3JlLmlzRG93bihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJUUkFERVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnByb3BzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jdXJyZW50QWNjb3VudCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY3VycmVudEFjY291bnQuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApID09PSBcIjEuMi4zXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJleGNoYW5nZS5xdWlja19kZXBvc2l0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQmlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGJhc2VOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHF1b3RlTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuYmFja2VkQ29pbiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMucHJvcHMuY3VycmVudEJyaWRnZXMgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2F0ZXdheVN0b3JlLmlzRG93bihcIk9QRU5cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4dGVybmFsX3NlcnZpY2VfcHJvdmlkZXIuaXNfZG93blwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5nYXRld2F5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luOiA1fX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25EZXBvc2l0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHYXRld2F5U3RvcmUuaXNEb3duKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIk9QRU5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5wcm9wc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3VycmVudEFjY291bnQgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRBY2NvdW50LmdldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA9PT0gXCIxLjIuM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiZXhjaGFuZ2UucXVpY2tfZGVwb3NpdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0JpZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBiYXNlTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBxdW90ZU5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmN1cnJlbnRCcmlkZ2VzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJhY2tlZENvaW4gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcG92ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJleGNoYW5nZS5xdWlja19kZXBvc2l0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQmlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGJhc2VOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHF1b3RlTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcj1cImNsaWNrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmlzUXVpY2tEZXBvc2l0VmlzaWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVmlzaWJsZUNoYW5nZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhhbmRsZVF1aWNrRGVwb3NpdFZpc2libGVDaGFuZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2F0ZXdheVN0b3JlLmlzRG93bihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIk9QRU5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXh0ZXJuYWxfc2VydmljZV9wcm92aWRlci5pc19kb3duXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS5xdWlja19kZXBvc2l0X2dhdGV3YXlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0OiBpc0JpZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBiYXNlTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBxdW90ZU5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiA1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkRlcG9zaXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e0dhdGV3YXlTdG9yZS5pc0Rvd24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJPUEVOXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiZXhjaGFuZ2UucXVpY2tfZGVwb3NpdF9nYXRld2F5X2J1dHRvblwiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHYXRld2F5U3RvcmUuaXNEb3duKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiVFJBREVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXh0ZXJuYWxfc2VydmljZV9wcm92aWRlci5pc19kb3duXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS5xdWlja19kZXBvc2l0X2JyaWRnZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBpc0JpZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBiYXNlTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBxdW90ZU5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uQnV5LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtHYXRld2F5U3RvcmUuaXNEb3duKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiVFJBREVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJleGNoYW5nZS5xdWlja19kZXBvc2l0X2JyaWRnZV9idXR0b25cIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLnF1aWNrX2RlcG9zaXRfdG9vbHRpcFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ6IGlzQmlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGJhc2VOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHF1b3RlTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbjogNX19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5wcm9wc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmN1cnJlbnRBY2NvdW50IHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY3VycmVudEFjY291bnQuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgPT09IFwiMS4yLjNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJleGNoYW5nZS5xdWlja19kZXBvc2l0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNCaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGJhc2VOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBxdW90ZU5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wb3Zlcj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMub25Cb3Jyb3cgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpc0dsb2JhbGx5U2V0dGxlZCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luOiA1fX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMucHJvcHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3VycmVudEFjY291bnQgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY3VycmVudEFjY291bnQuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA9PT0gXCIxLjIuM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkJvcnJvd31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLmJvcnJvd1wiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lzR2xvYmFsbHlTZXR0bGVkID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW46IDV9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5wcm9wc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jdXJyZW50QWNjb3VudCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jdXJyZW50QWNjb3VudC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApID09PSBcIjEuMi4zXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnNob3dTZXR0bGVNb2RhbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGxlX2dsb2JhbGx5X3NldHRsZWRfdG9vbHRpcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5zZXR0bGVfZ2xvYmFsbHlfc2V0dGxlZFwiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGNsZWFyLWZpeCBuby1wYWRkaW5nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIFNIT1JUIGJ1dHRvbiAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGlzYWJsZWRUZXh0ICYmIGlzUHJlZGljdGlvbk1hcmtldCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtkaXNhYmxlZFRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdSaWdodDogMTB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsb2F0LXJpZ2h0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwicmlnaHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbjogMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YnV0dG9uQ2xhc3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvblN1Ym1pdC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmb3JjZVNlbGxUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBpc1ByZWRpY3Rpb25NYXJrZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtcIlwifSBwbGFjZW1lbnQ9XCJyaWdodFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ1JpZ2h0OiAxMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxvYXQtcmlnaHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJyaWdodFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luOiAwfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtidXR0b25DbGFzc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uU3VibWl0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2ZvcmNlU2VsbFRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAge2lzR2xvYmFsbHlTZXR0bGVkICYmXHJcbiAgICAgICAgICAgICAgICAhIXRoaXMucHJvcHMuY3VycmVudEFjY291bnQgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxTZXR0bGVNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLmlzU2V0dGxlTW9kYWxWaXNpYmxlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlTW9kYWw9e3RoaXMuaGlkZVNldHRsZU1vZGFsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93TW9kYWw9e3RoaXMuc2hvd1NldHRsZU1vZGFsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17b3RoZXJBc3NldC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5wcm9wcy5jdXJyZW50QWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQmluZFRvQ2hhaW5TdGF0ZShCdXlTZWxsKTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5cclxuY2xhc3MgUHJpY2VUZXh0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge3ByaWNlLCBwcmVGb3JtYXR0ZWRQcmljZSwgcXVvdGUsIGJhc2V9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBpZiAoIXByaWNlICYmICFwcmVGb3JtYXR0ZWRQcmljZSkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgbGV0IGZvcm1hdHRlZFByaWNlID0gISFwcmVGb3JtYXR0ZWRQcmljZVxyXG4gICAgICAgICAgICA/IHByZUZvcm1hdHRlZFByaWNlXHJcbiAgICAgICAgICAgIDogdXRpbHMucHJpY2VfdG9fdGV4dChwcmljZSwgcXVvdGUsIGJhc2UpO1xyXG5cclxuICAgICAgICBpZiAoZm9ybWF0dGVkUHJpY2UuZnVsbCA+PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJwcmljZS1pbnRlZ2VyXCI+e2Zvcm1hdHRlZFByaWNlLmludH0uPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIHtmb3JtYXR0ZWRQcmljZS5kZWMgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInByaWNlLWludGVnZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXR0ZWRQcmljZS5kZWN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0dGVkUHJpY2UudHJhaWxpbmcgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInByaWNlLWRlY2ltYWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXR0ZWRQcmljZS50cmFpbGluZ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZm9ybWF0dGVkUHJpY2UuZnVsbCA+PSAwLjEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInByaWNlLWRlY2ltYWxcIj57Zm9ybWF0dGVkUHJpY2UuaW50fS48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAge2Zvcm1hdHRlZFByaWNlLmRlYyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwicHJpY2UtaW50ZWdlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdHRlZFByaWNlLmRlY31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIHtmb3JtYXR0ZWRQcmljZS50cmFpbGluZyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwicHJpY2UtZGVjaW1hbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdHRlZFByaWNlLnRyYWlsaW5nfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInByaWNlLWRlY2ltYWxcIj57Zm9ybWF0dGVkUHJpY2UuaW50fS48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAge2Zvcm1hdHRlZFByaWNlLmRlYyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwicHJpY2UtZGVjaW1hbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdHRlZFByaWNlLmRlY31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIHtmb3JtYXR0ZWRQcmljZS50cmFpbGluZyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwicHJpY2UtaW50ZWdlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdHRlZFByaWNlLnRyYWlsaW5nfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQcmljZVRleHQ7XHJcbiIsImltcG9ydCBSZWFjdCwge0NvbXBvbmVudH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlV2l0aExpbmtzIGZyb20gXCIuLi9VdGlsaXR5L1RyYW5zbGF0ZVdpdGhMaW5rc1wiO1xyXG5pbXBvcnQge1xyXG4gICAgSW5wdXQsXHJcbiAgICBGb3JtLFxyXG4gICAgU2VsZWN0LFxyXG4gICAgQnV0dG9uLFxyXG4gICAgQ29sLFxyXG4gICAgUm93LFxyXG4gICAgUmFkaW9cclxufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcbmltcG9ydCBBc3NldE5hbWVXcmFwcGVyIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0TmFtZVwiO1xyXG5pbXBvcnQge1NDQUxFRF9PUkRFUl9BQ1RJT05fVFlQRVN9IGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9FeGNoYW5nZVwiO1xyXG5pbXBvcnQge0Fzc2V0fSBmcm9tIFwiLi4vLi4vbGliL2NvbW1vbi9NYXJrZXRDbGFzc2VzXCI7XHJcbmltcG9ydCBDaGFpblN0b3JlIGZyb20gXCJiaXRzaGFyZXNqcy9lcy9jaGFpbi9zcmMvQ2hhaW5TdG9yZVwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCB7VmFsaWRhdGlvbn0gZnJvbSBcIi4uLy4uL3NlcnZpY2VzL1ZhbGlkYXRpb24vVmFsaWRhdGlvblwiO1xyXG5pbXBvcnQgYXNzZXRVdGlscyBmcm9tIFwiLi4vLi4vbGliL2NvbW1vbi9hc3NldF91dGlsc1wiO1xyXG5pbXBvcnQge2NoZWNrRmVlU3RhdHVzQXN5bmN9IGZyb20gXCIuLi8uLi9saWIvY29tbW9uL3RyeEhlbHBlclwiO1xyXG5pbXBvcnQgUHJpY2VUZXh0IGZyb20gXCIuLi9VdGlsaXR5L1ByaWNlVGV4dFwiO1xyXG5pbXBvcnQgQXNzZXROYW1lIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0TmFtZVwiO1xyXG5pbXBvcnQge1xyXG4gICAgcHJlY2lzZUFkZCxcclxuICAgIHByZWNpc2VEaXZpZGUsXHJcbiAgICBwcmVjaXNlTXVsdGlwbHksXHJcbiAgICBwcmVjaXNlTWludXNcclxufSBmcm9tIFwiLi4vLi4vc2VydmljZXMvTWF0aFwiO1xyXG5pbXBvcnQge0RhdGVQaWNrZXJ9IGZyb20gXCJhbnRkXCI7XHJcblxyXG5jbGFzcyBTY2FsZWRPcmRlckZvcm0gZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIG9yZGVyQ291bnQ6IDEsXHJcbiAgICAgICAgICAgIGZlZUFzc2V0czogW11cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmhhbmRsZUNsaWNrQmFsYW5jZSA9IHRoaXMuaGFuZGxlQ2xpY2tCYWxhbmNlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVDdXJyZW50UHJpY2VDbGljayA9IHRoaXMuaGFuZGxlQ3VycmVudFByaWNlQ2xpY2suYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICB0aGlzLl9jaGVja0ZlZUFzc2V0cygpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcclxuICAgICAgICBjb25zdCBvcmRlckNvdW50ID0gTnVtYmVyKHRoaXMuX2dldEZvcm1WYWx1ZXMoKS5vcmRlckNvdW50IHx8IDEpO1xyXG4gICAgICAgIGNvbnN0IHN0YXRlT3JkZXJDb3VudCA9IE51bWJlcih0aGlzLnN0YXRlLm9yZGVyQ291bnQpO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICFpc05hTihzdGF0ZU9yZGVyQ291bnQpICYmXHJcbiAgICAgICAgICAgICFpc05hTihvcmRlckNvdW50KSAmJlxyXG4gICAgICAgICAgICBOdW1iZXIodGhpcy5zdGF0ZS5vcmRlckNvdW50KSAhPT0gb3JkZXJDb3VudFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyQ291bnQ6IG9yZGVyQ291bnRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tGZWVBc3NldHMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNGb3JtVmFsaWQoKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybVZhbHVlcyA9IHRoaXMuX2dldEZvcm1WYWx1ZXMoKTtcclxuXHJcbiAgICAgICAgaWYgKCFmb3JtVmFsdWVzKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgIWZvcm1WYWx1ZXMucHJpY2VMb3dlciB8fFxyXG4gICAgICAgICAgICBpc05hTihOdW1iZXIoZm9ybVZhbHVlcy5wcmljZUxvd2VyKSkgfHxcclxuICAgICAgICAgICAgTnVtYmVyKGZvcm1WYWx1ZXMucHJpY2VMb3dlcikgPD0gMFxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICFmb3JtVmFsdWVzLmFtb3VudCB8fFxyXG4gICAgICAgICAgICBpc05hTihOdW1iZXIoZm9ybVZhbHVlcy5hbW91bnQpKSB8fFxyXG4gICAgICAgICAgICBOdW1iZXIoZm9ybVZhbHVlcy5hbW91bnQpIDw9IDBcclxuICAgICAgICApXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhZm9ybVZhbHVlcy5wcmljZVVwcGVyIHx8XHJcbiAgICAgICAgICAgIGlzTmFOKE51bWJlcihmb3JtVmFsdWVzLnByaWNlVXBwZXIpKSB8fFxyXG4gICAgICAgICAgICBOdW1iZXIoZm9ybVZhbHVlcy5wcmljZVVwcGVyKSA8PSAwIHx8XHJcbiAgICAgICAgICAgIE51bWJlcihmb3JtVmFsdWVzLnByaWNlVXBwZXIpIDw9IE51bWJlcihmb3JtVmFsdWVzLnByaWNlTG93ZXIpXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgIWZvcm1WYWx1ZXMub3JkZXJDb3VudCB8fFxyXG4gICAgICAgICAgICBpc05hTihOdW1iZXIoZm9ybVZhbHVlcy5vcmRlckNvdW50KSkgfHxcclxuICAgICAgICAgICAgTnVtYmVyKGZvcm1WYWx1ZXMub3JkZXJDb3VudCkgPD0gMVxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0QmFzZUFzc2V0RmxhZ3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIGFzc2V0VXRpbHMuZ2V0RmxhZ0Jvb2xlYW5zKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmJhc2VBc3NldC5nZXRJbihbXCJvcHRpb25zXCIsIFwiZmxhZ3NcIl0pLFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmJhc2VBc3NldC5oYXMoXCJiaXRhc3NldF9kYXRhX2lkXCIpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0UXVvdGVBc3NldEZsYWdzKCkge1xyXG4gICAgICAgIHJldHVybiBhc3NldFV0aWxzLmdldEZsYWdCb29sZWFucyhcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5xdW90ZUFzc2V0LmdldEluKFtcIm9wdGlvbnNcIiwgXCJmbGFnc1wiXSksXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMucXVvdGVBc3NldC5oYXMoXCJiaXRhc3NldF9kYXRhX2lkXCIpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfaXNNYXJrZXRGZWVWaXNpYmxlKCkge1xyXG4gICAgICAgIGNvbnN0IGJhc2VBc3NldEZsYWdCb29sZWFucyA9IHRoaXMuX2dldEJhc2VBc3NldEZsYWdzKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHF1b3RlQXNzZXRGbGFnQm9vbGVhbnMgPSB0aGlzLl9nZXRRdW90ZUFzc2V0RmxhZ3MoKTtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLl9nZXRGb3JtVmFsdWVzKCkuYWN0aW9uID09PSBTQ0FMRURfT1JERVJfQUNUSU9OX1RZUEVTLlNFTEwgJiZcclxuICAgICAgICAgICAgYmFzZUFzc2V0RmxhZ0Jvb2xlYW5zLmNoYXJnZV9tYXJrZXRfZmVlXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLl9nZXRGb3JtVmFsdWVzKCkuYWN0aW9uID09PSBTQ0FMRURfT1JERVJfQUNUSU9OX1RZUEVTLkJVWSAmJlxyXG4gICAgICAgICAgICBxdW90ZUFzc2V0RmxhZ0Jvb2xlYW5zLmNoYXJnZV9tYXJrZXRfZmVlXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRGb3JtVmFsdWVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmZvcm0uZ2V0RmllbGRzVmFsdWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBfZmlsdGVyRmVlU3RhdHVzZXMoZmVlU3RhdHVzZXMpIHtcclxuICAgICAgICByZXR1cm4gZmVlU3RhdHVzZXNcclxuICAgICAgICAgICAgLmZpbHRlcihmZWVTdGF0dXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICBmZWVTdGF0dXMgJiZcclxuICAgICAgICAgICAgICAgICAgICBmZWVTdGF0dXMuaGFzUG9vbEJhbGFuY2UgJiZcclxuICAgICAgICAgICAgICAgICAgICBmZWVTdGF0dXMuaGFzQmFsYW5jZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm1hcChmZWVTdGF0dXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBmZWU6IGZlZVN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlZVN0YXR1cy5mZWUuZ2V0QW1vdW50KCkgL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnBvdygxMCwgZmVlU3RhdHVzLmZlZS5wcmVjaXNpb24pLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0OiBDaGFpblN0b3JlLmdldEFzc2V0KGZlZVN0YXR1cy5mZWUuYXNzZXRfaWQpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tGZWVBc3NldHMoKSB7XHJcbiAgICAgICAgLy8gZ2V0IGFjY291bnQgYmFsYW5jZXMsIGNoZWNrIGlzIGVhY2ggYmFsYW5jZSBhdmFpbGFibGUgdG8gcGF5IGZlZVxyXG4gICAgICAgIC8vIGZvciBsaW1pdF9vcmRlciwgZmlsdGVyIG9ubHkgYXZhaWxhYmxlIGFzc2V0cyBhbmQgcHV0IGl0IHRvIGxvY2FsIHN0YXRlXHJcblxyXG4gICAgICAgIHRoaXMuX2dldEFjY291bnRBc3NldHNGZWVTdGF0dXMoKS50aGVuKGZlZVN0YXR1c2VzID0+IHtcclxuICAgICAgICAgICAgbGV0IGFzc2V0cyA9IHRoaXMuX2ZpbHRlckZlZVN0YXR1c2VzKGZlZVN0YXR1c2VzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgZmVlQXNzZXRzOiBhc3NldHNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldEFjY291bnRBc3NldHNGZWVTdGF0dXMoKSB7XHJcbiAgICAgICAgY29uc3Qge2N1cnJlbnRBY2NvdW50fSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGNvbnN0IHtvcmRlckNvdW50fSA9IHRoaXMuX2dldEZvcm1WYWx1ZXMoKTtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhY3VycmVudEFjY291bnQgfHxcclxuICAgICAgICAgICAgIWN1cnJlbnRBY2NvdW50LmdldCB8fFxyXG4gICAgICAgICAgICAhY3VycmVudEFjY291bnQuZ2V0KFwiYmFsYW5jZXNcIilcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcHJvbWlzZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGN1cnJlbnRBY2NvdW50LmdldChcImJhbGFuY2VzXCIpLmZvckVhY2goYmFsYW5jZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYmFsYW5jZU9iaiA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KGJhbGFuY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBwcm9taXNlID0gY2hlY2tGZWVTdGF0dXNBc3luYyh7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElEOiBjdXJyZW50QWNjb3VudC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgICAgICBmZWVJRDogYmFsYW5jZU9iai5nZXQoXCJhc3NldF90eXBlXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibGltaXRfb3JkZXJfY3JlYXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uc0NvdW50OiBvcmRlckNvdW50XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHByb21pc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZlZXNTdGF0dXNlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGZlZXNTdGF0dXNlcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRGZWUoKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybVZhbHVlcyA9IHRoaXMuX2dldEZvcm1WYWx1ZXMoKTtcclxuXHJcbiAgICAgICAgbGV0IGFtb3VudCA9IDA7XHJcblxyXG4gICAgICAgIGlmIChmb3JtVmFsdWVzICYmIGZvcm1WYWx1ZXMuZmVlQ3VycmVuY3kpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5mZWVBc3NldHMuZm9yRWFjaChmZWVBc3NldCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlQXNzZXQgJiZcclxuICAgICAgICAgICAgICAgICAgICBmZWVBc3NldC5hc3NldCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGZlZUFzc2V0LmFzc2V0LmdldChcInN5bWJvbFwiKSA9PT0gZm9ybVZhbHVlcy5mZWVDdXJyZW5jeVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50ID0gZmVlQXNzZXQuYW1vdW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhbW91bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldE1hcmtldEZlZSgpIHtcclxuICAgICAgICBjb25zdCBmb3JtVmFsdWVzID0gdGhpcy5fZ2V0Rm9ybVZhbHVlcygpO1xyXG5cclxuICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5wcm9wcy5iYXNlQXNzZXQ7XHJcbiAgICAgICAgY29uc3QgcXVvdGUgPSB0aGlzLnByb3BzLnF1b3RlQXNzZXQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHF1YW50aXR5ID0gTnVtYmVyKHRoaXMuX2dldFRvdGFsKCkpO1xyXG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IGZvcm1WYWx1ZXMuYWN0aW9uO1xyXG5cclxuICAgICAgICBpZiAoaXNOYU4ocXVhbnRpdHkpKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgbGV0IGFzc2V0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gU0NBTEVEX09SREVSX0FDVElPTl9UWVBFUy5TRUxMKSBhc3NldCA9IGJhc2U7XHJcblxyXG4gICAgICAgIGlmIChhY3Rpb24gPT09IFNDQUxFRF9PUkRFUl9BQ1RJT05fVFlQRVMuQlVZKSBhc3NldCA9IHF1b3RlO1xyXG5cclxuICAgICAgICBpZiAoIWFzc2V0IHx8ICFhc3NldC5nZXQgfHwgIWFzc2V0LmdldEluKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgY29uc3QgbWF4TWFya2V0RmVlID0gbmV3IEFzc2V0KHtcclxuICAgICAgICAgICAgYW1vdW50OiBhc3NldC5nZXRJbihbXCJvcHRpb25zXCIsIFwibWF4X21hcmtldF9mZWVcIl0pLFxyXG4gICAgICAgICAgICBhc3NldF9pZDogYXNzZXQuZ2V0KFwiYXNzZXRfaWRcIiksXHJcbiAgICAgICAgICAgIHByZWNpc2lvbjogYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1hcmtldEZlZVBlcmNlbnQgPSB0aGlzLl9nZXRNYXJrZXRGZWVQZXJjZW50YWdlKCk7XHJcblxyXG4gICAgICAgIHJldHVybiAhcXVhbnRpdHlcclxuICAgICAgICAgICAgPyAwXHJcbiAgICAgICAgICAgIDogTWF0aC5taW4oXHJcbiAgICAgICAgICAgICAgICAgIG1heE1hcmtldEZlZS5nZXRBbW91bnQoe3JlYWw6IHRydWV9KSxcclxuICAgICAgICAgICAgICAgICAgKHF1YW50aXR5IC8gMTAwKSAqIG1hcmtldEZlZVBlcmNlbnRcclxuICAgICAgICAgICAgICApLnRvRml4ZWQobWF4TWFya2V0RmVlLnByZWNpc2lvbik7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldE1hcmtldEZlZVBlcmNlbnRhZ2UoKSB7XHJcbiAgICAgICAgY29uc3Qge2FjdGlvbn0gPSB0aGlzLl9nZXRGb3JtVmFsdWVzKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJhc2UgPSB0aGlzLnByb3BzLmJhc2VBc3NldDtcclxuICAgICAgICBjb25zdCBxdW90ZSA9IHRoaXMucHJvcHMucXVvdGVBc3NldDtcclxuXHJcbiAgICAgICAgbGV0IGFzc2V0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gU0NBTEVEX09SREVSX0FDVElPTl9UWVBFUy5TRUxMKSBhc3NldCA9IGJhc2U7XHJcblxyXG4gICAgICAgIGlmIChhY3Rpb24gPT09IFNDQUxFRF9PUkRFUl9BQ1RJT05fVFlQRVMuQlVZKSBhc3NldCA9IHF1b3RlO1xyXG5cclxuICAgICAgICByZXR1cm4gTnVtYmVyKGFzc2V0LmdldEluKFtcIm9wdGlvbnNcIiwgXCJtYXJrZXRfZmVlX3BlcmNlbnRcIl0pIC8gMTAwKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0VG90YWwoKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybVZhbHVlcyA9IHRoaXMuX2dldEZvcm1WYWx1ZXMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgYW1vdW50ID0gTnVtYmVyKGZvcm1WYWx1ZXMuYW1vdW50KTtcclxuICAgICAgICBjb25zdCBwcmljZUxvd2VyID0gTnVtYmVyKGZvcm1WYWx1ZXMucHJpY2VMb3dlcik7XHJcbiAgICAgICAgY29uc3QgcHJpY2VVcHBlciA9IE51bWJlcihmb3JtVmFsdWVzLnByaWNlVXBwZXIpO1xyXG4gICAgICAgIGNvbnN0IG9yZGVyQ291bnQgPSBOdW1iZXIoZm9ybVZhbHVlcy5vcmRlckNvdW50KTtcclxuXHJcbiAgICAgICAgY29uc3QgaXNDb3JyZWN0ID0gdmFsdWUgPT4gIWlzTmFOKHZhbHVlKTtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhaXNDb3JyZWN0KHByaWNlTG93ZXIpIHx8XHJcbiAgICAgICAgICAgICFpc0NvcnJlY3QocHJpY2VVcHBlcikgfHxcclxuICAgICAgICAgICAgIWlzQ29ycmVjdChhbW91bnQpIHx8XHJcbiAgICAgICAgICAgICFpc0NvcnJlY3Qob3JkZXJDb3VudCkgfHxcclxuICAgICAgICAgICAgb3JkZXJDb3VudCA8PSAxIHx8XHJcbiAgICAgICAgICAgIG9yZGVyQ291bnQgPD0gMCB8fFxyXG4gICAgICAgICAgICBwcmljZUxvd2VyID49IHByaWNlVXBwZXJcclxuICAgICAgICApXHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG5cclxuICAgICAgICBjb25zdCBzdGVwID0gcHJlY2lzZURpdmlkZShcclxuICAgICAgICAgICAgcHJlY2lzZU1pbnVzKHByaWNlVXBwZXIsIHByaWNlTG93ZXIpLFxyXG4gICAgICAgICAgICBwcmVjaXNlTWludXMob3JkZXJDb3VudCwgMSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBhbW91bnRQZXJPcmRlciA9IHByZWNpc2VEaXZpZGUoYW1vdW50LCBvcmRlckNvdW50KTtcclxuXHJcbiAgICAgICAgbGV0IHRvdGFsID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcmRlckNvdW50OyBpICs9IDEpIHtcclxuICAgICAgICAgICAgLy8gdG90YWwgKz0gYW1vdW50UGVyT3JkZXIgKiAocHJpY2VMb3dlciArIHN0ZXAgKiBpKTtcclxuICAgICAgICAgICAgdG90YWwgPSBwcmVjaXNlQWRkKFxyXG4gICAgICAgICAgICAgICAgdG90YWwsXHJcbiAgICAgICAgICAgICAgICBwcmVjaXNlTXVsdGlwbHkoXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50UGVyT3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJlY2lzZUFkZChwcmljZUxvd2VyLCBwcmVjaXNlTXVsdGlwbHkoc3RlcCwgaSkpXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdG90YWw7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFF1YW50aXR5RnJvbVRvdGFsKHRvdGFsKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybVZhbHVlcyA9IHRoaXMuX2dldEZvcm1WYWx1ZXMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgcHJpY2VMb3dlciA9IE51bWJlcihmb3JtVmFsdWVzLnByaWNlTG93ZXIpO1xyXG4gICAgICAgIGNvbnN0IHByaWNlVXBwZXIgPSBOdW1iZXIoZm9ybVZhbHVlcy5wcmljZVVwcGVyKTtcclxuICAgICAgICBjb25zdCBvcmRlckNvdW50ID0gTnVtYmVyKGZvcm1WYWx1ZXMub3JkZXJDb3VudCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGlzQ29ycmVjdCA9IHZhbHVlID0+ICFpc05hTih2YWx1ZSk7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgIWlzQ29ycmVjdChwcmljZUxvd2VyKSB8fFxyXG4gICAgICAgICAgICAhaXNDb3JyZWN0KHByaWNlVXBwZXIpIHx8XHJcbiAgICAgICAgICAgICFpc0NvcnJlY3QodG90YWwpIHx8XHJcbiAgICAgICAgICAgICFpc0NvcnJlY3Qob3JkZXJDb3VudCkgfHxcclxuICAgICAgICAgICAgb3JkZXJDb3VudCA8PSAwIHx8XHJcbiAgICAgICAgICAgIHByaWNlTG93ZXIgPj0gcHJpY2VVcHBlclxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcblxyXG4gICAgICAgIGNvbnN0IHN0ZXAgPSBwcmVjaXNlRGl2aWRlKFxyXG4gICAgICAgICAgICBwcmVjaXNlTWludXMocHJpY2VVcHBlciwgcHJpY2VMb3dlciksXHJcbiAgICAgICAgICAgIHByZWNpc2VNaW51cyhvcmRlckNvdW50LCAxKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGxldCBzdW0gPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9yZGVyQ291bnQ7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAvLyBzdW0gKyAoKHByaWNlTG93ZXIgKyBzdGVwICogaSkgLyBvcmRlckNvdW50KVxyXG5cclxuICAgICAgICAgICAgc3VtID0gcHJlY2lzZUFkZChcclxuICAgICAgICAgICAgICAgIHN1bSxcclxuICAgICAgICAgICAgICAgIE51bWJlcihcclxuICAgICAgICAgICAgICAgICAgICBwcmVjaXNlRGl2aWRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVjaXNlQWRkKHByaWNlTG93ZXIsIHByZWNpc2VNdWx0aXBseShzdGVwLCBpKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyQ291bnRcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcHJlY2lzZURpdmlkZSh0b3RhbCwgc3VtKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0UHJldmlld0RhdGFTb3VyY2UoKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybVZhbHVlcyA9IHRoaXMuX2dldEZvcm1WYWx1ZXMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGF0YVNvdXJjZSA9IFtdO1xyXG5cclxuICAgICAgICBjb25zdCBhY3Rpb24gPSBmb3JtVmFsdWVzLmFjdGlvbjtcclxuICAgICAgICBjb25zdCBhbW91bnQgPSBOdW1iZXIoZm9ybVZhbHVlcy5hbW91bnQpO1xyXG4gICAgICAgIGNvbnN0IHByaWNlTG93ZXIgPSBOdW1iZXIoZm9ybVZhbHVlcy5wcmljZUxvd2VyKTtcclxuICAgICAgICBjb25zdCBwcmljZVVwcGVyID0gTnVtYmVyKGZvcm1WYWx1ZXMucHJpY2VVcHBlcik7XHJcbiAgICAgICAgY29uc3Qgb3JkZXJDb3VudCA9IE51bWJlcihmb3JtVmFsdWVzLm9yZGVyQ291bnQpO1xyXG5cclxuICAgICAgICBjb25zdCBpc0NvcnJlY3QgPSB2YWx1ZSA9PiAhaXNOYU4odmFsdWUpO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICFpc0NvcnJlY3QocHJpY2VMb3dlcikgfHxcclxuICAgICAgICAgICAgIWlzQ29ycmVjdChwcmljZVVwcGVyKSB8fFxyXG4gICAgICAgICAgICAhaXNDb3JyZWN0KGFtb3VudCkgfHxcclxuICAgICAgICAgICAgIWlzQ29ycmVjdChvcmRlckNvdW50KSB8fFxyXG4gICAgICAgICAgICBvcmRlckNvdW50IDw9IDAgfHxcclxuICAgICAgICAgICAgcHJpY2VMb3dlciA+PSBwcmljZVVwcGVyXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcblxyXG4gICAgICAgIGNvbnN0IHN0ZXAgPSAoKHByaWNlVXBwZXIgLSBwcmljZUxvd2VyKSAvIChvcmRlckNvdW50IC0gMSkpLnRvRml4ZWQoNik7XHJcblxyXG4gICAgICAgIGNvbnN0IGFtb3VudFBlck9yZGVyID0gYW1vdW50IC8gb3JkZXJDb3VudDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcmRlckNvdW50OyBpICs9IDEpIHtcclxuICAgICAgICAgICAgZGF0YVNvdXJjZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHF1b3RlOiBhbW91bnRQZXJPcmRlci50b0ZpeGVkKDYpLFxyXG4gICAgICAgICAgICAgICAgYmFzZTogKGFtb3VudFBlck9yZGVyICogKHByaWNlTG93ZXIgKyBzdGVwICogaSkpLnRvRml4ZWQoNiksXHJcbiAgICAgICAgICAgICAgICBwcmljZTogKHByaWNlTG93ZXIgKyBzdGVwICogaSkudG9GaXhlZCg2KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhY3Rpb24gPT09IFNDQUxFRF9PUkRFUl9BQ1RJT05fVFlQRVMuQlVZXHJcbiAgICAgICAgICAgID8gZGF0YVNvdXJjZS5yZXZlcnNlKClcclxuICAgICAgICAgICAgOiBkYXRhU291cmNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGVQaWNrZXJSZWYgPSBub2RlID0+IHtcclxuICAgICAgICB0aGlzLmRhdGVQcmlja2VyID0gbm9kZTtcclxuICAgIH07XHJcblxyXG4gICAgaGFuZGxlQ2xpY2tCYWxhbmNlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnR5cGUgPT09IFwiYmlkXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5mb3JtLnNldEZpZWxkc1ZhbHVlKHtcclxuICAgICAgICAgICAgICAgIGFtb3VudDogdGhpcy5fZ2V0UXVhbnRpdHlGcm9tVG90YWwodGhpcy5wcm9wcy5iYXNlQXNzZXRCYWxhbmNlKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmZvcm0uc2V0RmllbGRzVmFsdWUoe1xyXG4gICAgICAgICAgICAgICAgYW1vdW50OiB0aGlzLnByb3BzLnF1b3RlQXNzZXRCYWxhbmNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVDdXJyZW50UHJpY2VDbGljaygpIHtcclxuICAgICAgICB0aGlzLnByb3BzLmZvcm0uc2V0RmllbGRzVmFsdWUoe1xyXG4gICAgICAgICAgICBwcmljZUxvd2VyOiB0aGlzLnByb3BzLmN1cnJlbnRQcmljZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRXhwaXJhdGlvblNlbGVjdENoYW5nZSA9IGUgPT4ge1xyXG4gICAgICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gXCJTUEVDSUZJQ1wiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVByaWNrZXIucGlja2VyLmhhbmRsZU9wZW5DaGFuZ2UodHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRlUHJpY2tlci5waWNrZXIuaGFuZGxlT3BlbkNoYW5nZShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnByb3BzLm9uRXhwaXJhdGlvblR5cGVDaGFuZ2UoZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIG9uRXhwaXJhdGlvblNlbGVjdENsaWNrID0gZSA9PiB7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlNQRUNJRklDXCIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmlyc3RDbGljaykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWNvbmRDbGljayA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5maXJzdENsaWNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2Vjb25kQ2xpY2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVByaWNrZXIucGlja2VyLmhhbmRsZU9wZW5DaGFuZ2UodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0Q2xpY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Vjb25kQ2xpY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgb25FeHBpcmF0aW9uU2VsZWN0Qmx1ciA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmZpcnN0Q2xpY2sgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNlY29uZENsaWNrID0gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB7dHlwZSwgcXVvdGVBc3NldCwgYmFzZUFzc2V0LCBleHBpcmF0aW9uQ3VzdG9tVGltZX0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBjb25zdCBpc0JpZCA9IHR5cGUgPT09IFwiYmlkXCI7XHJcblxyXG4gICAgICAgIGNvbnN0IHF1b3RlID0gcXVvdGVBc3NldDtcclxuICAgICAgICBjb25zdCBiYXNlID0gYmFzZUFzc2V0O1xyXG5cclxuICAgICAgICBjb25zdCB7Z2V0RmllbGREZWNvcmF0b3J9ID0gdGhpcy5wcm9wcy5mb3JtO1xyXG5cclxuICAgICAgICBjb25zdCBtYXJrZXRGZWVTeW1ib2wgPSBpc0JpZCA/IChcclxuICAgICAgICAgICAgPEFzc2V0TmFtZVdyYXBwZXIgbmFtZT17dGhpcy5wcm9wcy5xdW90ZUFzc2V0LmdldChcInN5bWJvbFwiKX0gLz5cclxuICAgICAgICApIDogKFxyXG4gICAgICAgICAgICA8QXNzZXROYW1lV3JhcHBlciBuYW1lPXt0aGlzLnByb3BzLmJhc2VBc3NldC5nZXQoXCJzeW1ib2xcIil9IC8+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgcXVhbnRpdHlTeW1ib2wgPSAoXHJcbiAgICAgICAgICAgIDxBc3NldE5hbWVXcmFwcGVyIG5hbWU9e3RoaXMucHJvcHMucXVvdGVBc3NldC5nZXQoXCJzeW1ib2xcIil9IC8+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgdG90YWxTeW1ib2wgPSAoXHJcbiAgICAgICAgICAgIDxBc3NldE5hbWVXcmFwcGVyIG5hbWU9e3RoaXMucHJvcHMuYmFzZUFzc2V0LmdldChcInN5bWJvbFwiKX0gLz5cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBwcmljZVN5bWJvbCA9IChcclxuICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICA8QXNzZXROYW1lIGRhdGFQbGFjZT1cInJpZ2h0XCIgbmFtZT17YmFzZUFzc2V0LmdldChcInN5bWJvbFwiKX0gLz5cclxuICAgICAgICAgICAgICAgICZuYnNwOy8mbmJzcDtcclxuICAgICAgICAgICAgICAgIDxBc3NldE5hbWUgZGF0YVBsYWNlPVwicmlnaHRcIiBuYW1lPXtxdW90ZUFzc2V0LmdldChcInN5bWJvbFwiKX0gLz5cclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZvcm1JdGVtUHJvcHMgPSB7XHJcbiAgICAgICAgICAgIGxhYmVsQ29sOiB7c3BhbjogNn0sXHJcbiAgICAgICAgICAgIHdyYXBwZXJDb2w6IHtzcGFuOiAxNiwgb2Zmc2V0OiAyfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGlvblJhZGlvID0gZ2V0RmllbGREZWNvcmF0b3IoXCJhY3Rpb25cIiwge1xyXG4gICAgICAgICAgICBpbml0aWFsVmFsdWU6IGlzQmlkXHJcbiAgICAgICAgICAgICAgICA/IFNDQUxFRF9PUkRFUl9BQ1RJT05fVFlQRVMuQlVZXHJcbiAgICAgICAgICAgICAgICA6IFNDQUxFRF9PUkRFUl9BQ1RJT05fVFlQRVMuU0VMTFxyXG4gICAgICAgIH0pKFxyXG4gICAgICAgICAgICA8UmFkaW8uR3JvdXA+XHJcbiAgICAgICAgICAgICAgICA8UmFkaW8gdmFsdWU9e1NDQUxFRF9PUkRFUl9BQ1RJT05fVFlQRVMuQlVZfT5cclxuICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwic2NhbGVkX29yZGVycy5hY3Rpb24uYnV5XCIpfVxyXG4gICAgICAgICAgICAgICAgPC9SYWRpbz5cclxuICAgICAgICAgICAgICAgIDxSYWRpbyB2YWx1ZT17U0NBTEVEX09SREVSX0FDVElPTl9UWVBFUy5TRUxMfT5cclxuICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwic2NhbGVkX29yZGVycy5hY3Rpb24uc2VsbFwiKX1cclxuICAgICAgICAgICAgICAgIDwvUmFkaW8+XHJcbiAgICAgICAgICAgIDwvUmFkaW8uR3JvdXA+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgcHJpY2VMb3dlcklucHV0ID0gZ2V0RmllbGREZWNvcmF0b3IoXCJwcmljZUxvd2VyXCIsIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVGaXJzdDogdHJ1ZSxcclxuICAgICAgICAgICAgdmFsaWRhdGVUcmlnZ2VyOiBcIm9uQmx1clwiLFxyXG4gICAgICAgICAgICBydWxlczogW1xyXG4gICAgICAgICAgICAgICAgVmFsaWRhdGlvbi5SdWxlcy5yZXF1aXJlZCgpLFxyXG4gICAgICAgICAgICAgICAgVmFsaWRhdGlvbi5SdWxlcy5udW1iZXIoKSxcclxuICAgICAgICAgICAgICAgIFZhbGlkYXRpb24uUnVsZXMubWluKHttaW46IDAsIG5hbWU6IFwiUHJpY2VcIiwgaGlnaGVyVGhhbjogdHJ1ZX0pXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KShcclxuICAgICAgICAgICAgPElucHV0XHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiBcIjEwMCVcIn19XHJcbiAgICAgICAgICAgICAgICBhdXRvQ29tcGxldGU9XCJvZmZcIlxyXG4gICAgICAgICAgICAgICAgYWRkb25BZnRlcj17cHJpY2VTeW1ib2x9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgZm9ybVZhbHVlcyA9IHRoaXMuX2dldEZvcm1WYWx1ZXMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgcHJpY2VMb3dlciA9IE51bWJlcigoZm9ybVZhbHVlcyAmJiBmb3JtVmFsdWVzLnByaWNlTG93ZXIpIHx8IDApO1xyXG5cclxuICAgICAgICBjb25zdCBwcmljZVVwcGVySW5wdXQgPSBnZXRGaWVsZERlY29yYXRvcihcInByaWNlVXBwZXJcIiwge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUZpcnN0OiB0cnVlLFxyXG4gICAgICAgICAgICB2YWxpZGF0ZVRyaWdnZXI6IFwib25CbHVyXCIsXHJcbiAgICAgICAgICAgIHJ1bGVzOiBbXHJcbiAgICAgICAgICAgICAgICBWYWxpZGF0aW9uLlJ1bGVzLnJlcXVpcmVkKCksXHJcbiAgICAgICAgICAgICAgICBWYWxpZGF0aW9uLlJ1bGVzLm51bWJlcigpLFxyXG4gICAgICAgICAgICAgICAgVmFsaWRhdGlvbi5SdWxlcy5taW4oe1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbjogcHJpY2VMb3dlcixcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlByaWNlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGlnaGVyVGhhbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH0pKFxyXG4gICAgICAgICAgICA8SW5wdXRcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMC4wXCJcclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwifX1cclxuICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgICAgICAgICBhZGRvbkFmdGVyPXtwcmljZVN5bWJvbH1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBmZWVDdXJyZW5jeVNlbGVjdCA9IGdldEZpZWxkRGVjb3JhdG9yKFwiZmVlQ3VycmVuY3lcIiwge1xyXG4gICAgICAgICAgICBpbml0aWFsVmFsdWU6XHJcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldEFzc2V0KFwiMS4zLjBcIikgJiZcclxuICAgICAgICAgICAgICAgIENoYWluU3RvcmUuZ2V0QXNzZXQoXCIxLjMuMFwiKS5nZXQgJiZcclxuICAgICAgICAgICAgICAgIENoYWluU3RvcmUuZ2V0QXNzZXQoXCIxLjMuMFwiKS5nZXQoXCJzeW1ib2xcIilcclxuICAgICAgICB9KShcclxuICAgICAgICAgICAgPFNlbGVjdFxyXG4gICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25NYXRjaFNlbGVjdFdpZHRoPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7bWluV2lkdGg6IFwiODBweFwiLCBtYXhXaWR0aDogXCIxMjBweFwifX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZmVlQXNzZXRzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5mZWVBc3NldHMubWFwICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5mZWVBc3NldHMubWFwKGZlZUFzc2V0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtmZWVBc3NldC5hc3NldC5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2Ake2ZlZUFzc2V0LmFzc2V0LmdldChcInN5bWJvbFwiKX1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWVXcmFwcGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2ZlZUFzc2V0LmFzc2V0LmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9UaXA9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgPC9TZWxlY3Q+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgZmVlSW5wdXQgPSAoXHJcbiAgICAgICAgICAgIDxJbnB1dFxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZWRcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMC4wXCJcclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwifX1cclxuICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgICAgICAgICBhZGRvbkFmdGVyPXtmZWVDdXJyZW5jeVNlbGVjdH1cclxuICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLl9nZXRGZWUoKX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBtYXJrZXRGZWVJbnB1dCA9IChcclxuICAgICAgICAgICAgPElucHV0XHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZFxyXG4gICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCIxMDAlXCJ9fVxyXG4gICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcclxuICAgICAgICAgICAgICAgIGFkZG9uQWZ0ZXI9e21hcmtldEZlZVN5bWJvbH1cclxuICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLl9nZXRNYXJrZXRGZWUoKX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCB0b3RhbElucHV0ID0gKFxyXG4gICAgICAgICAgICA8SW5wdXRcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkXHJcbiAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiBcIjEwMCVcIn19XHJcbiAgICAgICAgICAgICAgICBhdXRvQ29tcGxldGU9XCJvZmZcIlxyXG4gICAgICAgICAgICAgICAgYWRkb25BZnRlcj17dG90YWxTeW1ib2x9XHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5fZ2V0VG90YWwoKX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCB0b3RhbElucHV0VmFsaWRhdGlvbiA9IFZhbGlkYXRpb24uUnVsZXMuYmFsYW5jZSh7XHJcbiAgICAgICAgICAgIGJhbGFuY2U6IHRoaXMucHJvcHMuYmFzZUFzc2V0QmFsYW5jZSxcclxuICAgICAgICAgICAgc3ltYm9sOiB0aGlzLnByb3BzLmJhc2VBc3NldC5nZXQoXCJzeW1ib2xcIilcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgdG90YWxJbnB1dFZhbGlkYXRvciA9IHRvdGFsSW5wdXRWYWxpZGF0aW9uLnZhbGlkYXRvcihcclxuICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgdGhpcy5fZ2V0VG90YWwoKSxcclxuICAgICAgICAgICAgYSA9PiBhID09PSB1bmRlZmluZWRcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsSW5wdXRIZWxwID1cclxuICAgICAgICAgICAgaXNCaWQgJiYgIXRvdGFsSW5wdXRWYWxpZGF0b3IgPyB0b3RhbElucHV0VmFsaWRhdGlvbi5tZXNzYWdlIDogbnVsbDtcclxuICAgICAgICBjb25zdCB0b3RhbElucHV0U3RhdHVzID0gaXNCaWQgJiYgIXRvdGFsSW5wdXRWYWxpZGF0b3IgPyBcImVycm9yXCIgOiBcIlwiO1xyXG5cclxuICAgICAgICBjb25zdCBxdWFudGl0eVJ1bGVzID0gW1xyXG4gICAgICAgICAgICBWYWxpZGF0aW9uLlJ1bGVzLnJlcXVpcmVkKCksXHJcbiAgICAgICAgICAgIFZhbGlkYXRpb24uUnVsZXMubnVtYmVyKCksXHJcbiAgICAgICAgICAgIFZhbGlkYXRpb24uUnVsZXMubWluKHttaW46IDAsIGhpZ2hlclRoYW46IHRydWUsIG5hbWU6IFwiUXVhbnRpdHlcIn0pXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgaWYgKCFpc0JpZCkge1xyXG4gICAgICAgICAgICBxdWFudGl0eVJ1bGVzLnB1c2goXHJcbiAgICAgICAgICAgICAgICBWYWxpZGF0aW9uLlJ1bGVzLmJhbGFuY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGJhbGFuY2U6IHRoaXMucHJvcHMucXVvdGVBc3NldEJhbGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiB0aGlzLnByb3BzLnF1b3RlQXNzZXQuZ2V0KFwic3ltYm9sXCIpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcXVhbnRpdHlJbnB1dCA9IGdldEZpZWxkRGVjb3JhdG9yKFwiYW1vdW50XCIsIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVGaXJzdDogdHJ1ZSxcclxuICAgICAgICAgICAgdmFsaWRhdGVUcmlnZ2VyOiBcIm9uQmx1clwiLFxyXG4gICAgICAgICAgICBydWxlczogcXVhbnRpdHlSdWxlc1xyXG4gICAgICAgIH0pKFxyXG4gICAgICAgICAgICA8SW5wdXRcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMC4wXCJcclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwifX1cclxuICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgICAgICAgICBhZGRvbkFmdGVyPXtxdWFudGl0eVN5bWJvbH1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBvcmRlckNvdW50SW5wdXQgPSBnZXRGaWVsZERlY29yYXRvcihcIm9yZGVyQ291bnRcIiwge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUZpcnN0OiB0cnVlLFxyXG4gICAgICAgICAgICBydWxlczogW1xyXG4gICAgICAgICAgICAgICAgVmFsaWRhdGlvbi5SdWxlcy5yZXF1aXJlZCgpLFxyXG4gICAgICAgICAgICAgICAgVmFsaWRhdGlvbi5SdWxlcy5udW1iZXIoKSxcclxuICAgICAgICAgICAgICAgIFZhbGlkYXRpb24uUnVsZXMubWluKHtcclxuICAgICAgICAgICAgICAgICAgICBtaW46IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJPcmRlcnMgQ291bnRcIixcclxuICAgICAgICAgICAgICAgICAgICBoaWdoZXJUaGFuOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSkoXHJcbiAgICAgICAgICAgIDxJbnB1dFxyXG4gICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCIxMDAlXCJ9fVxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwXCJcclxuICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgICAgICAgICBhZGRvbkFmdGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJzY2FsZWRfb3JkZXJzLm9yZGVyX3NcIil9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGFzdFByaWNlTGFiZWwgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgIGlzQmlkID8gXCJleGNoYW5nZS5sb3dlc3RfYXNrXCIgOiBcImV4Y2hhbmdlLmhpZ2hlc3RfYmlkXCJcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBsZXQgZXhwaXJhdGlvblRpcDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZXhwaXJhdGlvblR5cGUgIT09IFwiU1BFQ0lGSUNcIikge1xyXG4gICAgICAgICAgICBleHBpcmF0aW9uVGlwID0gdGhpcy5wcm9wcy5leHBpcmF0aW9uc1tcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZXhwaXJhdGlvblR5cGVcclxuICAgICAgICAgICAgXS5nZXQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGV4cGlyYXRpb25zT3B0aW9uc0xpc3QgPSBPYmplY3Qua2V5cyh0aGlzLnByb3BzLmV4cGlyYXRpb25zKS5tYXAoXHJcbiAgICAgICAgICAgIGtleSA9PiAoXHJcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPXtrZXl9IGtleT17a2V5fT5cclxuICAgICAgICAgICAgICAgICAgICB7a2V5ID09PSBcIlNQRUNJRklDXCIgJiYgZXhwaXJhdGlvbkN1c3RvbVRpbWUgIT09IFwiU3BlY2lmaWNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG1vbWVudChleHBpcmF0aW9uQ3VzdG9tVGltZSkuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkRvIE1NTSBZWVlZIGhoOm1tIEFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnByb3BzLmV4cGlyYXRpb25zW2tleV0udGl0bGV9XHJcbiAgICAgICAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV5LXNlbGwtY29udGFpbmVyXCIgc3R5bGU9e3twYWRkaW5nOiBcIjVweFwifX0+XHJcbiAgICAgICAgICAgICAgICA8Rm9ybVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9yZGVyLWZvcm1cIlxyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dD1cImhvcml6b250YWxcIlxyXG4gICAgICAgICAgICAgICAgICAgIGhpZGVSZXF1aXJlZE1hcms9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nOiBcIjhweCAxNXB4XCJ9fVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgey4uLmZvcm1JdGVtUHJvcHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNjYWxlZF9vcmRlcnMucHJpY2VfbG93ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3ByaWNlTG93ZXJJbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Li4uZm9ybUl0ZW1Qcm9wc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2NhbGVkX29yZGVycy5wcmljZV91cHBlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7cHJpY2VVcHBlcklucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsuLi5mb3JtSXRlbVByb3BzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFwic2NhbGVkX29yZGVycy5xdWFudGl0eVwiKX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtxdWFudGl0eUlucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsuLi5mb3JtSXRlbVByb3BzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzY2FsZWRfb3JkZXJzLm9yZGVyX2NvdW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtvcmRlckNvdW50SW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgey4uLmZvcm1JdGVtUHJvcHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9e3RvdGFsSW5wdXRIZWxwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZVN0YXR1cz17dG90YWxJbnB1dFN0YXR1c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInNjYWxlZF9vcmRlcnMudG90YWxcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dG90YWxJbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Li4uZm9ybUl0ZW1Qcm9wc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInNjYWxlZF9vcmRlcnMuZmVlXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2ZlZUlucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5faXNNYXJrZXRGZWVWaXNpYmxlKCkgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsuLi5mb3JtSXRlbVByb3BzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e2Ake2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNjYWxlZF9vcmRlcnMubWFya2V0X2ZlZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfSAke3RoaXMuX2dldE1hcmtldEZlZVBlcmNlbnRhZ2UoKX0lYH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge21hcmtldEZlZUlucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFwidHJhbnNhY3Rpb24uZXhwaXJhdGlvblwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgey4uLmZvcm1JdGVtUHJvcHN9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJleHBpcmF0aW9uLWRhdGV0aW1lLXBpY2tlciBzY2FsZWQtb3JkZXJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luVG9wOiBcIjVweFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e3RoaXMuZ2V0RGF0ZVBpY2tlclJlZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJleHBpcmF0aW9uLWRhdGV0aW1lLXBpY2tlci0taGlkZGVuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93VGltZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dUb2RheT17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWREYXRlPXtjdXJyZW50ID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPCBtb21lbnQoKS5hZGQoNTksIFwibWludXRlc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb25DdXN0b21UaW1lICE9PSBcIlNwZWNpZmljXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZXhwaXJhdGlvbkN1c3RvbVRpbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbW9tZW50KCkuYWRkKDEsIFwiaG91clwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vbkV4cGlyYXRpb25DdXN0b21DaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImN1cnNvci1wb2ludGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpblRvcDogXCI1cHhcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25FeHBpcmF0aW9uU2VsZWN0Q2hhbmdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25FeHBpcmF0aW9uU2VsZWN0Q2xpY2t9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25CbHVyPXt0aGlzLm9uRXhwaXJhdGlvblNlbGVjdEJsdXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uVGlwICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbWVudChleHBpcmF0aW9uVGlwKS5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkRvIE1NTSBZWVlZIGhoOm1tIEFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLmV4cGlyYXRpb25UeXBlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtleHBpcmF0aW9uc09wdGlvbnNMaXN0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIGxhYmVsPXtsYXN0UHJpY2VMYWJlbH0gey4uLmZvcm1JdGVtUHJvcHN9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJCb3R0b206IFwiI0EwOUY5RiAxcHggZG90dGVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ3VycmVudFByaWNlQ2xpY2t9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQcmljZVRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZT17dGhpcy5wcm9wcy5jdXJyZW50UHJpY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU9e3F1b3RlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U9e2Jhc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWVXcmFwcGVyIG5hbWU9e2Jhc2UuZ2V0KFwic3ltYm9sXCIpfSBub1RpcCAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVdyYXBwZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtxdW90ZS5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9UaXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFwiZXhjaGFuZ2UuYmFsYW5jZVwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgey4uLmZvcm1JdGVtUHJvcHN9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJCb3R0b206IFwiI0EwOUY5RiAxcHggZG90dGVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2tCYWxhbmNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IWlzQmlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLnF1b3RlQXNzZXRCYWxhbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnByb3BzLmJhc2VBc3NldEJhbGFuY2V9e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVdyYXBwZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWlzQmlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHF1b3RlLmdldChcInN5bWJvbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBiYXNlLmdldChcInN5bWJvbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub1RpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMuaGFuZGxlU3VibWl0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshdGhpcy5pc0Zvcm1WYWxpZCgpfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQmlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcInNjYWxlZF9vcmRlcnMuYWN0aW9uLmJ1eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcInNjYWxlZF9vcmRlcnMuYWN0aW9uLnNlbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9Gb3JtPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5TY2FsZWRPcmRlckZvcm0gPSBGb3JtLmNyZWF0ZSh7fSkoU2NhbGVkT3JkZXJGb3JtKTtcclxuXHJcbmNsYXNzIFNjYWxlZE9yZGVyVGFiIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG5cclxuICAgICAgICB0aGlzLnNhdmVGb3JtUmVmID0gdGhpcy5zYXZlRm9ybVJlZi5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gdGhpcy5oYW5kbGVTdWJtaXQuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmhhbmRsZUNhbmNlbCA9IHRoaXMuaGFuZGxlQ2FuY2VsLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5iYXNlQXNzZXQgJiZcclxuICAgICAgICAgICAgcHJldlByb3BzLmJhc2VBc3NldCAmJlxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmJhc2VBc3NldC5nZXQgJiZcclxuICAgICAgICAgICAgcHJldlByb3BzLmJhc2VBc3NldC5nZXQgJiZcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5iYXNlQXNzZXQuZ2V0KFwiaWRcIikgIT09IHByZXZQcm9wcy5iYXNlQXNzZXQuZ2V0KFwiaWRcIikgJiZcclxuICAgICAgICAgICAgdGhpcy5mb3JtUmVmICYmXHJcbiAgICAgICAgICAgIHRoaXMuZm9ybVJlZi5wcm9wcyAmJlxyXG4gICAgICAgICAgICB0aGlzLmZvcm1SZWYucHJvcHMuZm9ybVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLmZvcm1SZWYucHJvcHMuZm9ybS5yZXNldEZpZWxkcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmxhc3RDbGlja2VkUHJpY2UgJiZcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5sYXN0Q2xpY2tlZFByaWNlICE9PSBwcmV2UHJvcHMubGFzdENsaWNrZWRQcmljZVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1SZWYgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuZm9ybVJlZi5wcm9wcyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtUmVmLnByb3BzLmZvcm0gJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuZm9ybVJlZi5wcm9wcy5mb3JtLnNldEZpZWxkc1ZhbHVlXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtUmVmLnByb3BzLmZvcm0uc2V0RmllbGRzVmFsdWUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlTG93ZXI6IE51bWJlcih0aGlzLnByb3BzLmxhc3RDbGlja2VkUHJpY2UpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcmVwYXJlT3JkZXJzKHZhbHVlcykge1xyXG4gICAgICAgIGNvbnN0IG9yZGVycyA9IFtdO1xyXG5cclxuICAgICAgICBjb25zdCBhbW91bnQgPSBOdW1iZXIodmFsdWVzLmFtb3VudCk7XHJcbiAgICAgICAgY29uc3QgcHJpY2VMb3dlciA9IE51bWJlcih2YWx1ZXMucHJpY2VMb3dlcik7XHJcbiAgICAgICAgY29uc3QgcHJpY2VVcHBlciA9IE51bWJlcih2YWx1ZXMucHJpY2VVcHBlcik7XHJcbiAgICAgICAgY29uc3Qgb3JkZXJDb3VudCA9IE51bWJlcih2YWx1ZXMub3JkZXJDb3VudCk7XHJcblxyXG4gICAgICAgIGxldCBleHBpcmF0aW9uVGltZSA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZXhwaXJhdGlvblR5cGUgPT09IFwiU1BFQ0lGSUNcIikge1xyXG4gICAgICAgICAgICBleHBpcmF0aW9uVGltZSA9IHRoaXMucHJvcHMuZXhwaXJhdGlvbnNbXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmV4cGlyYXRpb25UeXBlXHJcbiAgICAgICAgICAgIF0uZ2V0KHRoaXMucHJvcHMudHlwZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZXhwaXJhdGlvblRpbWUgPSB0aGlzLnByb3BzLmV4cGlyYXRpb25zW1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5leHBpcmF0aW9uVHlwZVxyXG4gICAgICAgICAgICBdLmdldCh0aGlzLnByb3BzLnR5cGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaXNDb3JyZWN0ID0gdmFsdWUgPT4gIWlzTmFOKHZhbHVlKTtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhaXNDb3JyZWN0KHByaWNlTG93ZXIpIHx8XHJcbiAgICAgICAgICAgICFpc0NvcnJlY3QocHJpY2VVcHBlcikgfHxcclxuICAgICAgICAgICAgIWlzQ29ycmVjdChhbW91bnQpIHx8XHJcbiAgICAgICAgICAgICFpc0NvcnJlY3Qob3JkZXJDb3VudCkgfHxcclxuICAgICAgICAgICAgb3JkZXJDb3VudCA8PSAwIHx8XHJcbiAgICAgICAgICAgIHByaWNlTG93ZXIgPj0gcHJpY2VVcHBlclxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG5cclxuICAgICAgICBjb25zdCBzdGVwID0gKChwcmljZVVwcGVyIC0gcHJpY2VMb3dlcikgLyAob3JkZXJDb3VudCAtIDEpKS50b1ByZWNpc2lvbihcclxuICAgICAgICAgICAgNVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFtb3VudFBlck9yZGVyID0gYW1vdW50IC8gb3JkZXJDb3VudDtcclxuXHJcbiAgICAgICAgY29uc3Qgc2VsbEFzc2V0ID1cclxuICAgICAgICAgICAgdmFsdWVzLmFjdGlvbiA9PT0gU0NBTEVEX09SREVSX0FDVElPTl9UWVBFUy5TRUxMXHJcbiAgICAgICAgICAgICAgICA/IHRoaXMucHJvcHMucXVvdGVBc3NldFxyXG4gICAgICAgICAgICAgICAgOiB0aGlzLnByb3BzLmJhc2VBc3NldDtcclxuICAgICAgICBjb25zdCBidXlBc3NldCA9XHJcbiAgICAgICAgICAgIHZhbHVlcy5hY3Rpb24gPT09IFNDQUxFRF9PUkRFUl9BQ1RJT05fVFlQRVMuQlVZXHJcbiAgICAgICAgICAgICAgICA/IHRoaXMucHJvcHMucXVvdGVBc3NldFxyXG4gICAgICAgICAgICAgICAgOiB0aGlzLnByb3BzLmJhc2VBc3NldDtcclxuXHJcbiAgICAgICAgY29uc3Qgc2VsbEFtb3VudCA9IGkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc2NhbGVkQW1vdW50ID0gYW1vdW50UGVyT3JkZXIgKiAocHJpY2VMb3dlciArIHN0ZXAgKiBpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcy5hY3Rpb24gPT09IFNDQUxFRF9PUkRFUl9BQ1RJT05fVFlQRVMuQlVZXHJcbiAgICAgICAgICAgICAgICA/IE51bWJlcihzY2FsZWRBbW91bnQudG9QcmVjaXNpb24oNSkpICpcclxuICAgICAgICAgICAgICAgICAgICAgIE1hdGgucG93KDEwLCBzZWxsQXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpKVxyXG4gICAgICAgICAgICAgICAgOiBOdW1iZXIoYW1vdW50UGVyT3JkZXIudG9QcmVjaXNpb24oNSkpICpcclxuICAgICAgICAgICAgICAgICAgICAgIE1hdGgucG93KDEwLCBzZWxsQXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBidXlBbW91bnQgPSBpID0+IHtcclxuICAgICAgICAgICAgbGV0IHNjYWxlZEFtb3VudCA9IGFtb3VudFBlck9yZGVyICogKHByaWNlTG93ZXIgKyBzdGVwICogaSk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXMuYWN0aW9uID09PSBTQ0FMRURfT1JERVJfQUNUSU9OX1RZUEVTLlNFTExcclxuICAgICAgICAgICAgICAgID8gTnVtYmVyKHNjYWxlZEFtb3VudC50b1ByZWNpc2lvbig1KSkgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coMTAsIGJ1eUFzc2V0LmdldChcInByZWNpc2lvblwiKSlcclxuICAgICAgICAgICAgICAgIDogTnVtYmVyKGFtb3VudFBlck9yZGVyLnRvUHJlY2lzaW9uKDUpKSAqXHJcbiAgICAgICAgICAgICAgICAgICAgICBNYXRoLnBvdygxMCwgYnV5QXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9yZGVyQ291bnQ7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBvcmRlcnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBmb3Jfc2FsZTogbmV3IEFzc2V0KHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NldF9pZDogc2VsbEFzc2V0LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHByZWNpc2lvbjogc2VsbEFzc2V0LmdldChcInByZWNpc2lvblwiKSxcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHNlbGxBbW91bnQoaSlcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgdG9fcmVjZWl2ZTogbmV3IEFzc2V0KHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NldF9pZDogYnV5QXNzZXQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBidXlBc3NldC5nZXQoXCJwcmVjaXNpb25cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBidXlBbW91bnQoaSlcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IGV4cGlyYXRpb25UaW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wcm9wcy5jcmVhdGVTY2FsZWRPcmRlcihcclxuICAgICAgICAgICAgb3JkZXJzLFxyXG4gICAgICAgICAgICBDaGFpblN0b3JlLmdldEFzc2V0KHZhbHVlcy5mZWVDdXJyZW5jeSkuZ2V0KFwiaWRcIilcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVN1Ym1pdCgpIHtcclxuICAgICAgICBjb25zdCBmb3JtID0gdGhpcy5mb3JtUmVmLnByb3BzLmZvcm07XHJcblxyXG4gICAgICAgIGZvcm0udmFsaWRhdGVGaWVsZHMoKGVyciwgdmFsdWVzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucHJlcGFyZU9yZGVycyh2YWx1ZXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUNhbmNlbCgpIHtcclxuICAgICAgICB0aGlzLnByb3BzLmhpZGVNb2RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVGb3JtUmVmKHJlZikge1xyXG4gICAgICAgIHRoaXMuZm9ybVJlZiA9IHJlZjtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0QmFsYW5jZUJ5QXNzZXRJZChhc3NldElkLCBwcmVjaXNpb24pIHtcclxuICAgICAgICBsZXQgYmFsYW5jZSA9IDA7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlcyA9IHRoaXMucHJvcHMuY3VycmVudEFjY291bnQuZ2V0KFwiYmFsYW5jZXNcIik7XHJcblxyXG4gICAgICAgIGlmIChiYWxhbmNlcy5nZXQoYXNzZXRJZCkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZXQgYmFsYW5jZU9iaiA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KGJhbGFuY2VzLmdldChhc3NldElkKSk7XHJcblxyXG4gICAgICAgICAgICBiYWxhbmNlID0gYmFsYW5jZU9iai5nZXQoXCJiYWxhbmNlXCIpIC8gTWF0aC5wb3coMTAsIHByZWNpc2lvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYmFsYW5jZTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IGJhc2VBc3NldEJhbGFuY2UgPSB0aGlzLl9nZXRCYWxhbmNlQnlBc3NldElkKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmJhc2VBc3NldC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5iYXNlQXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgcXVvdGVBc3NldEJhbGFuY2UgPSB0aGlzLl9nZXRCYWxhbmNlQnlBc3NldElkKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLnF1b3RlQXNzZXQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMucXVvdGVBc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8U2NhbGVkT3JkZXJGb3JtXHJcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cclxuICAgICAgICAgICAgICAgIHdyYXBwZWRDb21wb25lbnRSZWY9e3RoaXMuc2F2ZUZvcm1SZWZ9XHJcbiAgICAgICAgICAgICAgICBiYXNlQXNzZXRCYWxhbmNlPXtiYXNlQXNzZXRCYWxhbmNlfVxyXG4gICAgICAgICAgICAgICAgcXVvdGVBc3NldEJhbGFuY2U9e3F1b3RlQXNzZXRCYWxhbmNlfVxyXG4gICAgICAgICAgICAgICAgaGFuZGxlU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdH1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTY2FsZWRPcmRlclRhYjtcclxuIiwiaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgdHlwZXNDaGVjayBmcm9tIFwiLi90eXBlc1wiO1xyXG5cclxuLyoqICogKiAqICpcclxuICpcclxuICogTUVTU0FHRVNcclxuICpcclxuICogKiAqICogKiAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IE1lc3NhZ2VzID0ge1xyXG4gICAgUmVxdWlyZWQ6IChuYW1lID0gXCJcIikgPT4ge1xyXG4gICAgICAgIGlmIChuYW1lKVxyXG4gICAgICAgICAgICByZXR1cm4gY291bnRlcnBhcnQudHJhbnNsYXRlKFwidmFsaWRhdGlvbi5tZXNzYWdlcy5yZXF1aXJlZE5hbWVkXCIsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInZhbGlkYXRpb24ubWVzc2FnZXMucmVxdWlyZWRcIik7XHJcbiAgICB9LFxyXG5cclxuICAgIFR5cGU6ICh0eXBlID0gXCJcIiwgbmFtZSA9IFwiXCIpID0+IHtcclxuICAgICAgICBpZiAobmFtZSlcclxuICAgICAgICAgICAgcmV0dXJuIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgIGB2YWxpZGF0aW9uLm1lc3NhZ2VzLnR5cGVzLiR7dHlwZX1OYW1lZGAsXHJcbiAgICAgICAgICAgICAgICB7bmFtZTogbmFtZSwgdHlwZTogdHlwZX1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gY291bnRlcnBhcnQudHJhbnNsYXRlKGB2YWxpZGF0aW9uLm1lc3NhZ2VzLnR5cGVzLiR7dHlwZX1gLCB7XHJcbiAgICAgICAgICAgIHR5cGU6IHR5cGVcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgUmFuZ2U6IChtaW4sIG1heCwgbmFtZSkgPT4ge1xyXG4gICAgICAgIGlmIChuYW1lKVxyXG4gICAgICAgICAgICByZXR1cm4gY291bnRlcnBhcnQudHJhbnNsYXRlKGB2YWxpZGF0aW9uLm1lc3NhZ2VzLnJhbmdlTmFtZWRgLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgbWluOiBtaW4sXHJcbiAgICAgICAgICAgICAgICBtYXg6IG1heFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY291bnRlcnBhcnQudHJhbnNsYXRlKGB2YWxpZGF0aW9uLm1lc3NhZ2VzLnJhbmdlYCwge1xyXG4gICAgICAgICAgICBtaW46IG1pbixcclxuICAgICAgICAgICAgbWF4OiBtYXhcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgTWluOiAobWluLCBuYW1lKSA9PiB7XHJcbiAgICAgICAgaWYgKG5hbWUpXHJcbiAgICAgICAgICAgIHJldHVybiBjb3VudGVycGFydC50cmFuc2xhdGUoYHZhbGlkYXRpb24ubWVzc2FnZXMubWluTmFtZWRgLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgbWluOiBtaW5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShgdmFsaWRhdGlvbi5tZXNzYWdlcy5taW5gLCB7bWluOiBtaW59KTtcclxuICAgIH0sXHJcblxyXG4gICAgTWF4OiAobWF4LCBuYW1lKSA9PiB7XHJcbiAgICAgICAgaWYgKG5hbWUpXHJcbiAgICAgICAgICAgIHJldHVybiBjb3VudGVycGFydC50cmFuc2xhdGUoYHZhbGlkYXRpb24ubWVzc2FnZXMubWF4TmFtZWRgLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgbWF4OiBtYXhcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShgdmFsaWRhdGlvbi5tZXNzYWdlcy5tYXhgLCB7bWF4OiBtYXh9KTtcclxuICAgIH0sXHJcblxyXG4gICAgTnVtYmVyOiBuYW1lID0+IHtcclxuICAgICAgICBpZiAobmFtZSlcclxuICAgICAgICAgICAgcmV0dXJuIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShgdmFsaWRhdGlvbi5tZXNzYWdlcy5udW1iZXJOYW1lZGAsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShgdmFsaWRhdGlvbi5tZXNzYWdlcy5udW1iZXJgKTtcclxuICAgIH0sXHJcblxyXG4gICAgSW50ZWdlcjogbmFtZSA9PiB7XHJcbiAgICAgICAgaWYgKG5hbWUpXHJcbiAgICAgICAgICAgIHJldHVybiBjb3VudGVycGFydC50cmFuc2xhdGUoYHZhbGlkYXRpb24ubWVzc2FnZXMuaW50ZWdlck5hbWVkYCwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY291bnRlcnBhcnQudHJhbnNsYXRlKGB2YWxpZGF0aW9uLm1lc3NhZ2VzLmludGVnZXJgKTtcclxuICAgIH0sXHJcblxyXG4gICAgRmxvYXQ6IG5hbWUgPT4ge1xyXG4gICAgICAgIGlmIChuYW1lKVxyXG4gICAgICAgICAgICByZXR1cm4gY291bnRlcnBhcnQudHJhbnNsYXRlKGB2YWxpZGF0aW9uLm1lc3NhZ2VzLmZsb2F0TmFtZWRgLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjb3VudGVycGFydC50cmFuc2xhdGUoYHZhbGlkYXRpb24ubWVzc2FnZXMuZmxvYXRgKTtcclxuICAgIH0sXHJcblxyXG4gICAgRW1haWw6IG5hbWUgPT4ge1xyXG4gICAgICAgIGlmIChuYW1lKVxyXG4gICAgICAgICAgICByZXR1cm4gY291bnRlcnBhcnQudHJhbnNsYXRlKGB2YWxpZGF0aW9uLm1lc3NhZ2VzLmVtYWlsTmFtZWRgLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjb3VudGVycGFydC50cmFuc2xhdGUoYHZhbGlkYXRpb24ubWVzc2FnZXMuZW1haWxgKTtcclxuICAgIH0sXHJcblxyXG4gICAgVXJsOiBuYW1lID0+IHtcclxuICAgICAgICBpZiAobmFtZSlcclxuICAgICAgICAgICAgcmV0dXJuIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShgdmFsaWRhdGlvbi5tZXNzYWdlcy51cmxOYW1lZGAsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShgdmFsaWRhdGlvbi5tZXNzYWdlcy51cmxgKTtcclxuICAgIH0sXHJcblxyXG4gICAgT25lT2Y6IChuYW1lLCBsaXN0KSA9PiB7XHJcbiAgICAgICAgaWYgKG5hbWUpXHJcbiAgICAgICAgICAgIHJldHVybiBjb3VudGVycGFydC50cmFuc2xhdGUoYHZhbGlkYXRpb24ubWVzc2FnZXMub25lT2ZOYW1lZGAsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgICBsaXN0OiBsaXN0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjb3VudGVycGFydC50cmFuc2xhdGUoYHZhbGlkYXRpb24ubWVzc2FnZXMub25lT2ZgLCB7bGlzdDogbGlzdH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBCYWxhbmNlOiAoYmFsYW5jZSwgc3ltYm9sKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShgdmFsaWRhdGlvbi5tZXNzYWdlcy5iYWxhbmNlYCwge1xyXG4gICAgICAgICAgICBiYWxhbmNlOiBiYWxhbmNlLFxyXG4gICAgICAgICAgICBzeW1ib2w6IHN5bWJvbFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLyoqICogKiAqICpcclxuICpcclxuICogUlVMRVNcclxuICpcclxuICogKiAqICogKiAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IFJ1bGVzID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0aW9uIHRvIGNoZWNrIHJlcXVpcmVkIEZpZWxkXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcHMgLSBuYW1lIG9mIGZpZWxkIHRvIHVzZSBpbiB0cmFuc2xhdGlvblxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzXHJcbiAgICAgKiBAcGFyYW0gcHJvcHMubmFtZSAtIG5hbWUgb2YgZmllbGQgdG8gdXNlIGluIHRyYW5zbGF0aW9uXHJcbiAgICAgKiBAcmV0dXJucyB7e3JlcXVpcmVkOiBib29sZWFuLCBtZXNzYWdlOiAqfX1cclxuICAgICAqL1xyXG5cclxuICAgIHJlcXVpcmVkOiBmdW5jdGlvbihwcm9wcyA9IHt9KSB7XHJcbiAgICAgICAgbGV0IG5hbWUgPSBcIlwiO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHByb3BzID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIG5hbWUgPSBwcm9wcztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuYW1lID0gcHJvcHMgJiYgcHJvcHMubmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBNZXNzYWdlcy5SZXF1aXJlZChuYW1lKVxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGlvbiB0byBjaGVjayBmaWVsZCB0byBtYXRjaCBzcGVjaWZpYyB0eXBlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcHMgLSB0eXBlIG9mIGZpZWxkXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wcy50eXBlIC0gdHlwZSBvZiBmaWVsZFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtwcm9wcy5uYW1lXSAtIG5hbWUgb2YgZmllbGQgdG8gdXNlIGluIHRyYW5zbGF0aW9uXHJcbiAgICAgKiBAcmV0dXJucyB7e3ZhbGlkYXRvcjogdmFsaWRhdG9yLCBtZXNzYWdlOiAqfX1cclxuICAgICAqL1xyXG5cclxuICAgIHR5cGU6IGZ1bmN0aW9uKHByb3BzKSB7XHJcbiAgICAgICAgbGV0IHR5cGUgPSBcIlwiO1xyXG4gICAgICAgIGxldCBuYW1lID0gXCJcIjtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wcyA9PT0gXCJzdHJpbmdcIikgdHlwZSA9IHByb3BzO1xyXG5cclxuICAgICAgICBpZiAocHJvcHMgJiYgcHJvcHMudHlwZSkgdHlwZSA9IHByb3BzLnR5cGU7XHJcblxyXG4gICAgICAgIGlmIChwcm9wcyAmJiBwcm9wcy5uYW1lKSBuYW1lID0gcHJvcHMubmFtZTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT09IFwiXCIpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIFwiW1ZhbGlkYXRpb25dIFJ1bGVzLlR5cGUgdGhlIHByb3BlcnR5IHR5cGUgaXMgbWlzc2VkXCJcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKCF0eXBlc0NoZWNrW3R5cGVdKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgW1ZhbGlkYXRpb25dIFJ1bGVzLlR5cGUgdGhlIHByb3BlcnR5IHR5cGUgJyR7cHJvcHMgJiZcclxuICAgICAgICAgICAgICAgICAgICBwcm9wcy50eXBlfScgaXMgbm90IGxpc3RlZCBpbiBzdXBwb3J0ZWQgdHlwZXNgXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRvcjogKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVzQ2hlY2tbdHlwZV0odmFsdWUpKSByZXR1cm4gY2FsbGJhY2soKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZmFsc2UpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBNZXNzYWdlcy5UeXBlKHR5cGUsIG5hbWUpXHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0aW9uIHRvIGNoZWNrXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwcm9wcy5taW4gLSBtaW4gdmFsdWVcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwcm9wcy5tYXggLSBtYXggdmFsdWVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvcHMubmFtZV0gLSBuYW1lIG9mIGZpZWxkIHRvIHVzZSBpbiB0cmFuc2xhdGlvblxyXG4gICAgICogQHJldHVybnMge3t2YWxpZGF0b3I6IHZhbGlkYXRvciwgbWVzc2FnZTogKn19XHJcbiAgICAgKi9cclxuXHJcbiAgICByYW5nZTogZnVuY3Rpb24ocHJvcHMgPSB7fSkge1xyXG4gICAgICAgIGxldCBtYXggPSBOdW1iZXIocHJvcHMubWF4KTtcclxuICAgICAgICBsZXQgbWluID0gTnVtYmVyKHByb3BzLm1pbik7XHJcblxyXG4gICAgICAgIGlmIChtYXggPT09IHVuZGVmaW5lZCB8fCBpc05hTihtYXgpKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgW1ZhbGlkYXRpb25dIFJ1bGVzLlJhbmdlIHRoZSBwcm9wZXJ0eSBtYXggJyR7cHJvcHMgJiZcclxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5tYXh9JyBpcyBpbmNvcnJlY3QuIFNob3VsZCBiZSBhIG51bWJlcmBcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKG1pbiA9PT0gdW5kZWZpbmVkIHx8IGlzTmFOKG1pbikpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIGBbVmFsaWRhdGlvbl0gUnVsZXMuUmFuZ2UgdGhlIHByb3BlcnR5IG1pbiAnJHtwcm9wcyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHByb3BzLm1pbn0nIGlzIGluY29ycmVjdC4gU2hvdWxkIGJlIGEgbnVtYmVyYFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAobWF4IDwgbWluKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgW1ZhbGlkYXRpb25dIFJ1bGVzLlJhbmdlIHRoZSBwcm9wZXJ0eSBtaW4gJyR7cHJvcHMgJiZcclxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5taW59JyBjYW5ub3QgYmUgaGlnaGVyIHRoYW4gbWF4ICcke3Byb3BzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMubWF4fSdgXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRvcjogKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBOdW1iZXIodmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPCBtaW4gfHwgdmFsdWUgPiBtYXgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWVzc2FnZTogTWVzc2FnZXMuUmFuZ2UobWluLCBtYXgsIHByb3BzLm5hbWUgfHwgXCJcIilcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFZhbGlkYXRpb24gZm9yIG1pbiB2YWx1ZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHByb3BzIC0gbWluIHZhbHVlXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwcm9wcy5taW5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvcHMubmFtZV1cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcHJvcHMuaGlnaGVyVGhhbiAtIGlmICh0cnVlKSB0aGVuIGNoZWNrIHdpbGwgYmUgXCJ2YWx1ZSA+IG1pblwiIGluc3RlYWQgb2YgXCJ2YWx1ZSA+PSBtaW5cIlxyXG4gICAgICogQHJldHVybnMge3t2YWxpZGF0b3I6IHZhbGlkYXRvciwgbWVzc2FnZTogKn19XHJcbiAgICAgKi9cclxuXHJcbiAgICBtaW46IGZ1bmN0aW9uKHByb3BzKSB7XHJcbiAgICAgICAgbGV0IG1pbjtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wcyA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICBtaW4gPSBOdW1iZXIocHJvcHMgJiYgcHJvcHMubWluKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtaW4gPSBOdW1iZXIocHJvcHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG1pbiA9PT0gdW5kZWZpbmVkIHx8IGlzTmFOKG1pbikpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIGBbVmFsaWRhdGlvbl0gUnVsZXMuTWluIHRoZSBwcm9wZXJ0eSBtaW4gJyR7cHJvcHMgJiZcclxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5taW59JyBpcyBpbmNvcnJlY3QuIFNob3VsZCBiZSBhIG51bWJlcmBcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdmFsaWRhdG9yOiAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IE51bWJlcih2YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BzICYmIHByb3BzLmhpZ2hlclRoYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlIDw9IG1pbikgcmV0dXJuIGNhbGxiYWNrKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA8IG1pbikgcmV0dXJuIGNhbGxiYWNrKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWVzc2FnZTogTWVzc2FnZXMuTWluKG1pbiwgcHJvcHMubmFtZSB8fCBcIlwiKVxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGlvbiBmb3IgbWF4IHZhbHVlXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcHJvcHMgLSBtYXggdmFsdWVcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHByb3BzLm1heFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtwcm9wcy5uYW1lXVxyXG4gICAgICogQHJldHVybnMge3t2YWxpZGF0b3I6IHZhbGlkYXRvciwgbWVzc2FnZTogKn19XHJcbiAgICAgKi9cclxuXHJcbiAgICBtYXg6IGZ1bmN0aW9uKHByb3BzKSB7XHJcbiAgICAgICAgbGV0IG1heDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wcyA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICBtYXggPSBOdW1iZXIocHJvcHMgJiYgcHJvcHMubWF4KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtYXggPSBOdW1iZXIocHJvcHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG1heCA9PT0gdW5kZWZpbmVkIHx8IGlzTmFOKG1heCkpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIGBbVmFsaWRhdGlvbl0gUnVsZXMuTWluIHRoZSBwcm9wZXJ0eSBtYXggJyR7cHJvcHMgJiZcclxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5tYXh9JyBpcyBpbmNvcnJlY3QuIFNob3VsZCBiZSBhIG51bWJlcmBcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdmFsaWRhdG9yOiAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IE51bWJlcih2YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA+IG1heCkgcmV0dXJuIGNhbGxiYWNrKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWVzc2FnZTogTWVzc2FnZXMuTWF4KG1heCwgcHJvcHMubmFtZSB8fCBcIlwiKVxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGUgZmllbGQgdG8gYmUgbnVtYmVyXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW25hbWVdXHJcbiAgICAgKiBAcmV0dXJucyB7e3ZhbGlkYXRvcjogdmFsaWRhdG9yLCBtZXNzYWdlOiAqfX1cclxuICAgICAqL1xyXG5cclxuICAgIG51bWJlcjogZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRvcjogKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0eXBlc0NoZWNrLm51bWJlcih2YWx1ZSkpIHJldHVybiBjYWxsYmFjayhmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IE1lc3NhZ2VzLk51bWJlcihuYW1lIHx8IFwiXCIpXHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0ZSBmaWVsZCB0byBiZSBpbnRlZ2VyXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW25hbWVdXHJcbiAgICAgKiBAcmV0dXJucyB7e3ZhbGlkYXRvcjogdmFsaWRhdG9yLCBtZXNzYWdlOiAqfX1cclxuICAgICAqL1xyXG5cclxuICAgIGludGVnZXI6IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB2YWxpZGF0b3I6IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdHlwZXNDaGVjay5pbnRlZ2VyKHZhbHVlKSkgcmV0dXJuIGNhbGxiYWNrKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWVzc2FnZTogTWVzc2FnZXMuSW50ZWdlcihuYW1lIHx8IFwiXCIpXHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0ZSBmaWVsZCB0byBiZSBmbG9hdFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtuYW1lXVxyXG4gICAgICogQHJldHVybnMge3t2YWxpZGF0b3I6IHZhbGlkYXRvciwgbWVzc2FnZTogKn19XHJcbiAgICAgKi9cclxuXHJcbiAgICBmbG9hdDogZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRvcjogKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0eXBlc0NoZWNrLmZsb2F0KHZhbHVlKSkgcmV0dXJuIGNhbGxiYWNrKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWVzc2FnZTogTWVzc2FnZXMuRmxvYXQobmFtZSB8fCBcIlwiKVxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGUgZmllbGQgdG8gYmUgZW1haWxcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbmFtZV1cclxuICAgICAqIEByZXR1cm5zIHt7dmFsaWRhdG9yOiB2YWxpZGF0b3IsIG1lc3NhZ2U6ICp9fVxyXG4gICAgICovXHJcblxyXG4gICAgZW1haWw6IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB2YWxpZGF0b3I6IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdHlwZXNDaGVjay5lbWFpbCh2YWx1ZSkpIHJldHVybiBjYWxsYmFjayhmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IE1lc3NhZ2VzLkVtYWlsKG5hbWUgfHwgXCJcIilcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFZhbGlkYXRlIGZpZWxkIHRvIGJlIHVybFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtuYW1lXVxyXG4gICAgICogQHJldHVybnMge3t2YWxpZGF0b3I6IHZhbGlkYXRvciwgbWVzc2FnZTogKn19XHJcbiAgICAgKi9cclxuXHJcbiAgICB1cmw6IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB2YWxpZGF0b3I6IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdHlwZXNDaGVjay51cmwodmFsdWUpKSByZXR1cm4gY2FsbGJhY2soZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBNZXNzYWdlcy5VcmwobmFtZSB8fCBcIlwiKVxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGUgZmllbGQgdG8gYmUgb25lT2ZcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xyXG4gICAgICogQHBhcmFtIHtBcnJheX0gcHJvcHMubGlzdFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtwcm9wcy5uYW1lXVxyXG4gICAgICogQHJldHVybnMge3t2YWxpZGF0b3I6IHZhbGlkYXRvciwgbWVzc2FnZTogKn19XHJcbiAgICAgKi9cclxuXHJcbiAgICBvbmVPZjogZnVuY3Rpb24ocHJvcHMgPSB7fSkge1xyXG4gICAgICAgIGxldCBsaXN0O1xyXG5cclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocHJvcHMgJiYgcHJvcHMubGlzdCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgYFtWYWxpZGF0aW9uXSBSdWxlcy5vbmVPZiB0aGUgcHJvcGVydHkgbGlzdCBpcyBtaXNzZWQgb3IgaW5jb3JyZWN0YFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGlzdCA9IHByb3BzLmxpc3Q7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRvcjogKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3QuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSByZXR1cm4gY2FsbGJhY2soZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBNZXNzYWdlcy5PbmVPZihcclxuICAgICAgICAgICAgICAgIChwcm9wcyAmJiBwcm9wcy5uYW1lKSB8fCBcIlwiLFxyXG4gICAgICAgICAgICAgICAgbGlzdC50b1N0cmluZygpLnJlcGxhY2UoLywoW2Etel0pL2csIFwiLCAkMVwiKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0ZSBmaWVsZCB0byBiZSBpbiByYW5nZSBmcm9tIDAgdG8gVXNlckJhbGFuY2VcclxuICAgICAqIEBwYXJhbSBwcm9wc1xyXG4gICAgICovXHJcblxyXG4gICAgYmFsYW5jZTogZnVuY3Rpb24ocHJvcHMgPSB7fSkge1xyXG4gICAgICAgIGxldCB2YWxpZGF0aW9uID0gUnVsZXMucmFuZ2Uoe1xyXG4gICAgICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgICAgIG1heDogcHJvcHMuYmFsYW5jZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRpb24udmFsaWRhdG9yLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBNZXNzYWdlcy5CYWxhbmNlKHByb3BzLmJhbGFuY2UsIHByb3BzLnN5bWJvbClcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59O1xyXG5cclxuLyoqICogKiAqICpcclxuICpcclxuICogVkFMSURBVElPTlxyXG4gKlxyXG4gKiAqICogKiAqICovXHJcblxyXG5leHBvcnQgY29uc3QgVmFsaWRhdGlvbiA9IHtcclxuICAgIFJ1bGVzOiBSdWxlc1xyXG59O1xyXG4iLCJjb25zdCBwYXR0ZXJuID0ge1xyXG4gICAgLy8gaHR0cDovL2VtYWlscmVnZXguY29tL1xyXG4gICAgZW1haWw6IC9eKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvLFxyXG4gICAgdXJsOiBuZXcgUmVnRXhwKFxyXG4gICAgICAgIFwiXig/IW1haWx0bzopKD86KD86aHR0cHxodHRwc3xmdHApOi8vfC8vKSg/OlxcXFxTKyg/OjpcXFxcUyopP0ApPyg/Oig/Oig/OlsxLTldXFxcXGQ/fDFcXFxcZFxcXFxkfDJbMDFdXFxcXGR8MjJbMC0zXSkoPzpcXFxcLig/OjE/XFxcXGR7MSwyfXwyWzAtNF1cXFxcZHwyNVswLTVdKSl7Mn0oPzpcXFxcLig/OlswLTldXFxcXGQ/fDFcXFxcZFxcXFxkfDJbMC00XVxcXFxkfDI1WzAtNF0pKXwoPzooPzpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZjAtOV0rLT8pKlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XSspKD86XFxcXC4oPzpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZjAtOV0rLT8pKlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XSspKig/OlxcXFwuKD86W2EtelxcXFx1MDBhMS1cXFxcdWZmZmZdezIsfSkpKXxsb2NhbGhvc3QpKD86OlxcXFxkezIsNX0pPyg/OigvfFxcXFw/fCMpW15cXFxcc10qKT8kXCIsXHJcbiAgICAgICAgXCJpXCJcclxuICAgICksXHJcbiAgICBoZXg6IC9eIz8oW2EtZjAtOV17Nn18W2EtZjAtOV17M30pJC9pXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdHlwZXMgPSB7XHJcbiAgICBpbnRlZ2VyKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVzLm51bWJlcih2YWx1ZSkgJiYgcGFyc2VJbnQodmFsdWUsIDEwKSA9PT0gTnVtYmVyKHZhbHVlKTtcclxuICAgIH0sXHJcbiAgICBmbG9hdCh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0eXBlcy5udW1iZXIodmFsdWUpICYmICF0eXBlcy5pbnRlZ2VyKHZhbHVlKTtcclxuICAgIH0sXHJcbiAgICBhcnJheSh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKTtcclxuICAgIH0sXHJcbiAgICByZWdleHAodmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhIW5ldyBSZWdFeHAodmFsdWUpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBkYXRlKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlLmdldFRpbWUgPT09IFwiZnVuY3Rpb25cIiAmJlxyXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUuZ2V0TW9udGggPT09IFwiZnVuY3Rpb25cIiAmJlxyXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUuZ2V0WWVhciA9PT0gXCJmdW5jdGlvblwiXHJcbiAgICAgICAgKTtcclxuICAgIH0sXHJcbiAgICBudW1iZXIodmFsdWUpIHtcclxuICAgICAgICBpZiAoaXNOYU4odmFsdWUpIHx8IGlzTmFOKE51bWJlcih2YWx1ZSkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBOdW1iZXIodmFsdWUpID09PSBcIm51bWJlclwiO1xyXG4gICAgfSxcclxuICAgIG9iamVjdCh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgIXR5cGVzLmFycmF5KHZhbHVlKTtcclxuICAgIH0sXHJcbiAgICBtZXRob2QodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCI7XHJcbiAgICB9LFxyXG4gICAgZW1haWwodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiZcclxuICAgICAgICAgICAgISF2YWx1ZS5tYXRjaChwYXR0ZXJuLmVtYWlsKSAmJlxyXG4gICAgICAgICAgICB2YWx1ZS5sZW5ndGggPCAyNTVcclxuICAgICAgICApO1xyXG4gICAgfSxcclxuICAgIHVybCh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgISF2YWx1ZS5tYXRjaChwYXR0ZXJuLnVybCk7XHJcbiAgICB9LFxyXG4gICAgaGV4KHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiAhIXZhbHVlLm1hdGNoKHBhdHRlcm4uaGV4KTtcclxuICAgIH0sXHJcbiAgICBzdHJpbmcodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiO1xyXG4gICAgfSxcclxuICAgIGJvb2xlYW4odmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIjtcclxuICAgIH0sXHJcbiAgICBlbnVtKHZhbHVlLCBsaXN0KSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkobGlzdCkgJiYgbGlzdC5pbmRleE9mKHZhbHVlKSA+PSAtMTtcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHR5cGVzO1xyXG4iLCJjb25zdCBwcmVjaXNlT3BlcmF0aW9uID0gZiA9PiAoYSwgYiwgZGVjaW1hbERpZ2l0cyA9IDYpID0+XHJcbiAgICArZihhLCBiKS50b0ZpeGVkKGRlY2ltYWxEaWdpdHMpO1xyXG5cclxuY29uc3QgYWRkID0gKGEsIGIpID0+IGEgKyBiO1xyXG5jb25zdCBtaW51cyA9IChhLCBiKSA9PiBhIC0gYjtcclxuY29uc3QgbXVsdGlwbHkgPSAoYSwgYikgPT4gYSAqIGI7XHJcbmNvbnN0IGRpdmlkZSA9IChhLCBiKSA9PiBhIC8gYjtcclxuZXhwb3J0IGNvbnN0IHByZWNpc2VBZGQgPSAoYSwgYiwgZGVjaW1hbERpZ2l0cykgPT5cclxuICAgIHByZWNpc2VPcGVyYXRpb24oYWRkKShhLCBiLCBkZWNpbWFsRGlnaXRzKTtcclxuZXhwb3J0IGNvbnN0IHByZWNpc2VNaW51cyA9IChhLCBiLCBkZWNpbWFsRGlnaXRzKSA9PlxyXG4gICAgcHJlY2lzZU9wZXJhdGlvbihtaW51cykoYSwgYiwgZGVjaW1hbERpZ2l0cyk7XHJcbmV4cG9ydCBjb25zdCBwcmVjaXNlTXVsdGlwbHkgPSAoYSwgYiwgZGVjaW1hbERpZ2l0cykgPT5cclxuICAgIHByZWNpc2VPcGVyYXRpb24obXVsdGlwbHkpKGEsIGIsIGRlY2ltYWxEaWdpdHMpO1xyXG5leHBvcnQgY29uc3QgcHJlY2lzZURpdmlkZSA9IChhLCBiLCBkZWNpbWFsRGlnaXRzKSA9PlxyXG4gICAgcHJlY2lzZU9wZXJhdGlvbihkaXZpZGUpKGEsIGIsIGRlY2ltYWxEaWdpdHMpO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7TGlua30gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcclxuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xyXG5pbXBvcnQgQXNzZXROYW1lIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0TmFtZVwiO1xyXG5pbXBvcnQgQXNzZXRJbWFnZSBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldEltYWdlXCI7XHJcbmltcG9ydCBNYXJrZXRzQWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9NYXJrZXRzQWN0aW9uc1wiO1xyXG5pbXBvcnQgU2V0dGluZ3NBY3Rpb25zIGZyb20gXCJhY3Rpb25zL1NldHRpbmdzQWN0aW9uc1wiO1xyXG5pbXBvcnQgUHJpY2VTdGF0V2l0aExhYmVsIGZyb20gXCIuL1ByaWNlU3RhdFdpdGhMYWJlbFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IEV4Y2hhbmdlSGVhZGVyQ29sbGF0ZXJhbCBmcm9tIFwiLi9FeGNoYW5nZUhlYWRlckNvbGxhdGVyYWxcIjtcclxuaW1wb3J0IHtJY29uIGFzIEFudEljb259IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcclxuaW1wb3J0IHtBc3NldCwgUHJpY2V9IGZyb20gXCJjb21tb24vTWFya2V0Q2xhc3Nlc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXhjaGFuZ2VIZWFkZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBpc01vZGFsVmlzaWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHZvbHVtZVNob3dRdW90ZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2VsZWN0ZWRNYXJrZXRQaWNrZXJBc3NldDogcHJvcHMuc2VsZWN0ZWRNYXJrZXRQaWNrZXJBc3NldFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRNYXJrZXRQaWNrZXJBc3NldDogbmV4dFByb3BzLnNlbGVjdGVkTWFya2V0UGlja2VyQXNzZXRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzKSB7XHJcbiAgICAgICAgaWYgKCFuZXh0UHJvcHMubWFya2V0UmVhZHkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBfYWRkTWFya2V0KHF1b3RlLCBiYXNlKSB7XHJcbiAgICAgICAgbGV0IG1hcmtldElEID0gYCR7cXVvdGV9XyR7YmFzZX1gO1xyXG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5zdGFycmVkTWFya2V0cy5oYXMobWFya2V0SUQpKSB7XHJcbiAgICAgICAgICAgIFNldHRpbmdzQWN0aW9ucy5hZGRTdGFyTWFya2V0KHF1b3RlLCBiYXNlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBTZXR0aW5nc0FjdGlvbnMucmVtb3ZlU3Rhck1hcmtldChxdW90ZSwgYmFzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZVZvbHVtZUJhc2UoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHZvbHVtZVNob3dRdW90ZTogIXRoaXMuc3RhdGUudm9sdW1lU2hvd1F1b3RlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbWFya2V0UGlja2VyKGFzc2V0KSB7XHJcbiAgICAgICAgbGV0IHtzZWxlY3RlZE1hcmtldFBpY2tlckFzc2V0fSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIHNlbGVjdGVkTWFya2V0UGlja2VyQXNzZXQgPVxyXG4gICAgICAgICAgICAhIXNlbGVjdGVkTWFya2V0UGlja2VyQXNzZXQgJiYgc2VsZWN0ZWRNYXJrZXRQaWNrZXJBc3NldCA9PSBhc3NldFxyXG4gICAgICAgICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICAgICAgICA6IGFzc2V0O1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRNYXJrZXRQaWNrZXJBc3NldFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucHJvcHMub25Ub2dnbGVNYXJrZXRQaWNrZXIoc2VsZWN0ZWRNYXJrZXRQaWNrZXJBc3NldCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgcXVvdGVBc3NldCxcclxuICAgICAgICAgICAgYmFzZUFzc2V0LFxyXG4gICAgICAgICAgICBzdGFycmVkTWFya2V0cyxcclxuICAgICAgICAgICAgaGFzUHJlZGljdGlvbixcclxuICAgICAgICAgICAgZmVlZFByaWNlLFxyXG4gICAgICAgICAgICBzaG93Q2FsbExpbWl0LFxyXG4gICAgICAgICAgICBsb3dlc3RDYWxsUHJpY2UsXHJcbiAgICAgICAgICAgIG1hcmtldFJlYWR5LFxyXG4gICAgICAgICAgICBsYXRlc3RQcmljZSxcclxuICAgICAgICAgICAgbWFya2V0U3RhdHMsXHJcbiAgICAgICAgICAgIGFjY291bnRcclxuICAgICAgICB9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgY29uc3QgYmFzZVN5bWJvbCA9IGJhc2VBc3NldC5nZXQoXCJzeW1ib2xcIik7XHJcbiAgICAgICAgY29uc3QgcXVvdGVTeW1ib2wgPSBxdW90ZUFzc2V0LmdldChcInN5bWJvbFwiKTtcclxuXHJcbiAgICAgICAgLy8gRmF2b3JpdGUgc3RhclxyXG4gICAgICAgIGNvbnN0IG1hcmtldElEID0gYCR7cXVvdGVTeW1ib2x9XyR7YmFzZVN5bWJvbH1gO1xyXG4gICAgICAgIGNvbnN0IHN0YXJDbGFzcyA9IHN0YXJyZWRNYXJrZXRzLmhhcyhtYXJrZXRJRClcclxuICAgICAgICAgICAgPyBcImdvbGQtc3RhclwiXHJcbiAgICAgICAgICAgIDogXCJncmV5LXN0YXJcIjtcclxuXHJcbiAgICAgICAgLy8gTWFya2V0IHN0YXRzXHJcbiAgICAgICAgY29uc3QgZGF5Q2hhbmdlID0gbWFya2V0U3RhdHMuZ2V0KFwiY2hhbmdlXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBkYXlDaGFuZ2VDbGFzcyA9XHJcbiAgICAgICAgICAgIHBhcnNlRmxvYXQoZGF5Q2hhbmdlKSA9PT0gMCB8fCBpc05hTihkYXlDaGFuZ2UpXHJcbiAgICAgICAgICAgICAgICA/IFwiXCJcclxuICAgICAgICAgICAgICAgIDogcGFyc2VGbG9hdChkYXlDaGFuZ2UpIDwgMFxyXG4gICAgICAgICAgICAgICAgICAgID8gXCJuZWdhdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgOiBcInBvc2l0aXZlXCI7XHJcbiAgICAgICAgY29uc3Qgdm9sdW1lQmFzZSA9IG1hcmtldFN0YXRzLmdldChcInZvbHVtZUJhc2VcIik7XHJcbiAgICAgICAgY29uc3Qgdm9sdW1lUXVvdGUgPSBtYXJrZXRTdGF0cy5nZXQoXCJ2b2x1bWVRdW90ZVwiKTtcclxuICAgICAgICBjb25zdCBkYXlDaGFuZ2VXaXRoU2lnbiA9IGlzTmFOKGRheUNoYW5nZSlcclxuICAgICAgICAgICAgPyB1bmRlZmluZWRcclxuICAgICAgICAgICAgOiBkYXlDaGFuZ2UgPiAwXHJcbiAgICAgICAgICAgICAgICA/IFwiK1wiICsgZGF5Q2hhbmdlXHJcbiAgICAgICAgICAgICAgICA6IGRheUNoYW5nZTtcclxuXHJcbiAgICAgICAgY29uc3Qgdm9sdW1lMjRoID0gdGhpcy5zdGF0ZS52b2x1bWVTaG93UXVvdGUgPyB2b2x1bWVRdW90ZSA6IHZvbHVtZUJhc2U7XHJcbiAgICAgICAgY29uc3Qgdm9sdW1lMjRoQXNzZXQgPSB0aGlzLnN0YXRlLnZvbHVtZVNob3dRdW90ZVxyXG4gICAgICAgICAgICA/IHF1b3RlQXNzZXRcclxuICAgICAgICAgICAgOiBiYXNlQXNzZXQ7XHJcblxyXG4gICAgICAgIGxldCBzaG93Q29sbGF0ZXJhbFJhdGlvID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHF1b3RlSWQgPSBxdW90ZUFzc2V0LmdldChcImlkXCIpO1xyXG4gICAgICAgIGNvbnN0IGJhc2VJZCA9IGJhc2VBc3NldC5nZXQoXCJpZFwiKTtcclxuXHJcbiAgICAgICAgY29uc3QgbG9va0ZvckJpdEFzc2V0ID1cclxuICAgICAgICAgICAgcXVvdGVJZCA9PT0gXCIxLjMuMFwiID8gYmFzZUlkIDogYmFzZUlkID09PSBcIjEuMy4wXCIgPyBxdW90ZUlkIDogbnVsbDtcclxuICAgICAgICBjb25zdCBwb3NzaWJsZUJpdEFzc2V0ID0gbG9va0ZvckJpdEFzc2V0XHJcbiAgICAgICAgICAgID8gQ2hhaW5TdG9yZS5nZXRBc3NldChsb29rRm9yQml0QXNzZXQpXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICBjb25zdCBpc0JpdEFzc2V0ID0gcG9zc2libGVCaXRBc3NldFxyXG4gICAgICAgICAgICA/ICEhcG9zc2libGVCaXRBc3NldC5nZXQoXCJiaXRhc3NldFwiKVxyXG4gICAgICAgICAgICA6IGZhbHNlO1xyXG4gICAgICAgIGxldCBjb2xsT3JkZXJPYmplY3QgPSBcIlwiO1xyXG4gICAgICAgIGxldCBzZXR0bGVQcmljZSA9IG51bGw7XHJcbiAgICAgICAgbGV0IHNldHRsZVByaWNlVGl0bGUgPSBcImV4Y2hhbmdlLnNldHRsZVwiO1xyXG4gICAgICAgIGxldCBzZXR0bGVQcmljZVRvb2x0aXAgPSBcInRvb2x0aXAuc2V0dGxlX3ByaWNlXCI7XHJcblxyXG4gICAgICAgIGlmIChpc0JpdEFzc2V0KSB7XHJcbiAgICAgICAgICAgIGlmIChhY2NvdW50LnRvSlMgJiYgYWNjb3VudC5oYXMoXCJjYWxsX29yZGVyc1wiKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbF9vcmRlcnMgPSBhY2NvdW50LmdldChcImNhbGxfb3JkZXJzXCIpLnRvSlMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhbGxfb3JkZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhbGxJRCA9IGNhbGxfb3JkZXJzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb24gPSBDaGFpblN0b3JlLmdldE9iamVjdChjYWxsSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkZWJ0QXNzZXQgPSBwb3NpdGlvbi5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2FsbF9wcmljZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInF1b3RlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfaWRcIlxyXG4gICAgICAgICAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVidEFzc2V0ID09PSBsb29rRm9yQml0QXNzZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbE9yZGVyT2JqZWN0ID0gY2FsbElEO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93Q29sbGF0ZXJhbFJhdGlvID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBTZXR0bG1lbnQgT2Zmc2V0ICovXHJcbiAgICAgICAgICAgIGxldCBzZXR0bGVBc3NldCA9XHJcbiAgICAgICAgICAgICAgICBiYXNlSWQgPT0gXCIxLjMuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgPyBxdW90ZUFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgOiBxdW90ZUlkID09IFwiMS4zLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGJhc2VBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHF1b3RlQXNzZXQ7XHJcblxyXG4gICAgICAgICAgICAvLyBnbG9iYWxseSBzZXR0bGVkXHJcbiAgICAgICAgICAgIGlmIChwb3NzaWJsZUJpdEFzc2V0LmdldChcImJpdGFzc2V0XCIpLmdldChcInNldHRsZW1lbnRfZnVuZFwiKSA+IDApIHtcclxuICAgICAgICAgICAgICAgIHNldHRsZVByaWNlVGl0bGUgPSBcImV4Y2hhbmdlLmdsb2JhbF9zZXR0bGVcIjtcclxuICAgICAgICAgICAgICAgIHNldHRsZVByaWNlVG9vbHRpcCA9IFwidG9vbHRpcC5nbG9iYWxfc2V0dGxlX3ByaWNlXCI7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiBnbG9iYWxseSBzZXR0bGVkIGZlZWRfcHJpY2UgPT0gc2V0dGxlbWVudF9wcmljZVxyXG4gICAgICAgICAgICAgICAgc2V0dGxlUHJpY2UgPSBwb3NzaWJsZUJpdEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgLmdldChcImJpdGFzc2V0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldChcInNldHRsZW1lbnRfcHJpY2VcIilcclxuICAgICAgICAgICAgICAgICAgICAudG9KUygpO1xyXG4gICAgICAgICAgICAgICAgLy8gYWRkIHByZWNpc2lvblxyXG4gICAgICAgICAgICAgICAgaWYgKHNldHRsZVByaWNlLmJhc2UuYXNzZXRfaWQgPT0gYmFzZUFzc2V0LmdldChcImlkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGxlUHJpY2UuYmFzZS5wcmVjaXNpb24gPSBiYXNlQXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRsZVByaWNlLnF1b3RlLnByZWNpc2lvbiA9IHF1b3RlQXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0bGVQcmljZS5xdW90ZS5wcmVjaXNpb24gPSBiYXNlQXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRsZVByaWNlLmJhc2UucHJlY2lzaW9uID0gcXVvdGVBc3NldC5nZXQoXCJwcmVjaXNpb25cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZXR0bGVQcmljZSA9IG5ldyBQcmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGU6IG5ldyBBc3NldCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBzZXR0bGVQcmljZS5xdW90ZS5hc3NldF9pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBzZXR0bGVQcmljZS5xdW90ZS5wcmVjaXNpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogc2V0dGxlUHJpY2UucXVvdGUuYW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZTogbmV3IEFzc2V0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRfaWQ6IHNldHRsZVByaWNlLmJhc2UuYXNzZXRfaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWNpc2lvbjogc2V0dGxlUHJpY2UuYmFzZS5wcmVjaXNpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogc2V0dGxlUHJpY2UuYmFzZS5hbW91bnRcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSkudG9SZWFsKCk7XHJcbiAgICAgICAgICAgICAgICBzZXR0bGVQcmljZSA9IGJhc2VJZCA9PSBcIjEuMy4wXCIgPyAxIC8gc2V0dGxlUHJpY2UgOiBzZXR0bGVQcmljZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZXR0bGVBc3NldCAmJiBmZWVkUHJpY2UpIHtcclxuICAgICAgICAgICAgICAgIGxldCBvZmZzZXRfcGVyY2VudCA9IHNldHRsZUFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgLmdldEluKFtcImJpdGFzc2V0XCIsIFwib3B0aW9uc1wiXSlcclxuICAgICAgICAgICAgICAgICAgICAudG9KUygpLmZvcmNlX3NldHRsZW1lbnRfb2Zmc2V0X3BlcmNlbnQ7XHJcbiAgICAgICAgICAgICAgICBzZXR0bGVQcmljZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZUlkID09IFwiMS4zLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGZlZWRQcmljZS50b1JlYWwoKSAvICgxICsgb2Zmc2V0X3BlcmNlbnQgLyAxMDAwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBmZWVkUHJpY2UudG9SZWFsKCkgKiAoMSArIG9mZnNldF9wZXJjZW50IC8gMTAwMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0cmFuc2xhdG9yID0gcmVxdWlyZShcImNvdW50ZXJwYXJ0XCIpO1xyXG5cclxuICAgICAgICBsZXQgaXNRdW90ZVNlbGVjdGVkID1cclxuICAgICAgICAgICAgISF0aGlzLnN0YXRlLnNlbGVjdGVkTWFya2V0UGlja2VyQXNzZXQgJiZcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZE1hcmtldFBpY2tlckFzc2V0ID09IHF1b3RlU3ltYm9sO1xyXG4gICAgICAgIGxldCBpc0Jhc2VTZWxlY3RlZCA9XHJcbiAgICAgICAgICAgICEhdGhpcy5zdGF0ZS5zZWxlY3RlZE1hcmtldFBpY2tlckFzc2V0ICYmXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRNYXJrZXRQaWNrZXJBc3NldCA9PSBiYXNlU3ltYm9sO1xyXG5cclxuICAgICAgICBsZXQgUHJpY2VBbGVydEJlbGxDbGFzc05hbWUgPSB0aGlzLnByb3BzLmhhc0FueVByaWNlQWxlcnRcclxuICAgICAgICAgICAgPyBcImV4Y2hhbmdlLS1wcmljZS1hbGVydC0tc2hvdy1tb2RhbC0tYWN0aXZlXCJcclxuICAgICAgICAgICAgOiBcIlwiO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgc2hyaW5rIG5vLXBhZGRpbmcgb3ZlcmZsb3ctdmlzaWJsZSB0b3AtYmFyXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgb3ZlcmZsb3ctdmlzaWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBzaHJpbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e3BhZGRpbmc6IFwiMTBweFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXRJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VOb25lVG9CdHM9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoPXs1MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtxdW90ZUFzc2V0LmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZzogXCIxMHB4XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshaGFzUHJlZGljdGlvbiA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiBcIjAgNXB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogdGhpcy5wcm9wcy50aW55U2NyZWVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIjEzcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCIxOHB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6IFwiMXB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBbnRJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLnNob3dQcmljZUFsZXJ0TW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPXtcImJlbGxcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGV4Y2hhbmdlLS1wcmljZS1hbGVydC0tc2hvdy1tb2RhbCAke1ByaWNlQWxlcnRCZWxsQ2xhc3NOYW1lfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdSaWdodDogXCIxMHB4XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1pbnRybz17dHJhbnNsYXRvci50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3YWxrdGhyb3VnaC5wcmljZV9hbGVydHNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMubWFya2V0UGlja2VyLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZVN5bWJvbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInVuZGVybGluZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGlzUXVvdGVTZWxlY3RlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiIzIxOTZmM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3F1b3RlU3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2U9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9UaXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3twYWRkaW5nOiBcIjAgNXB4XCJ9fT4vPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5tYXJrZXRQaWNrZXIuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VTeW1ib2xcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ1bmRlcmxpbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBpc0Jhc2VTZWxlY3RlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiIzIxOTZmM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2Jhc2VTeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub1RpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJtYXJrZXQtc3ltYm9sXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID57YCR7cXVvdGVTeW1ib2x9IDogJHtiYXNlU3ltYm9sfWB9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxhYmVsLWFjdGlvbnNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cInNwYW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmc6IFwiNXB4IDAgMCA1cHhcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInN0YXQtdGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJleGNoYW5nZS50cmFkaW5nX3BhaXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFya2V0c0FjdGlvbnMuc3dpdGNoTWFya2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvPXtgL21hcmtldC8ke2Jhc2VTeW1ib2x9XyR7cXVvdGVTeW1ib2x9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1pbnRybz17dHJhbnNsYXRvci50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndhbGt0aHJvdWdoLnN3aXRjaF9idXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNodWZmbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInNodWZmbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5zaHVmZmxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2FkZE1hcmtldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnF1b3RlQXNzZXQuZ2V0KFwic3ltYm9sXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYmFzZUFzc2V0LmdldChcInN5bWJvbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1pbnRybz17dHJhbnNsYXRvci50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndhbGt0aHJvdWdoLmZhdm91cml0ZV9idXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c3RhckNsYXNzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImZpLXN0YXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5maV9zdGFyLm1hcmtldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgdmVydGljYWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e292ZXJmbG93OiBcInZpc2libGVcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgd3JhcCBtYXJrZXQtc3RhdHMtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwibWFya2V0LXN0YXRzIHN0YXRzIHRvcC1zdGF0c1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYXRlc3RQcmljZSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFByaWNlU3RhdFdpdGhMYWJlbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWdub3JlQ29sb3JDaGFuZ2U9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeT17bWFya2V0UmVhZHl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZT17bGF0ZXN0UHJpY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZT17cXVvdGVBc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U9e2Jhc2VBc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldD17bWFya2V0SUR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiZXhjaGFuZ2UubGF0ZXN0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImhpZGUtb3JkZXItMSBzdHJlc3NlZC1zdGF0IGRhaWx5X2NoYW5nZSBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlDaGFuZ2VDbGFzc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiIGNsYXNzTmFtZT1cInZhbHVlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RheUNoYW5nZVdpdGhTaWduXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbWFya2V0UmVhZHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZGF5Q2hhbmdlV2l0aFNpZ25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiLVwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9iPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RheUNoYW5nZVdpdGhTaWduICYmIDxzcGFuPiAlPC9zcGFuPn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJkaXZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic3RhdC10ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LmhvdXJfMjRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2b2x1bWVCYXNlID49IDAgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQcmljZVN0YXRXaXRoTGFiZWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlnbm9yZUNvbG9yQ2hhbmdlPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5jaGFuZ2VWb2x1bWVCYXNlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5PXttYXJrZXRSZWFkeX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2ltYWxzPXswfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9sdW1lPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U9e3ZvbHVtZTI0aH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGUtb3JkZXItMiBjbGlja2FibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17dm9sdW1lMjRoQXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXQ9e21hcmtldElEfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4Y2hhbmdlLnZvbHVtZV8yNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFoYXNQcmVkaWN0aW9uICYmIGZlZWRQcmljZSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFByaWNlU3RhdFdpdGhMYWJlbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWdub3JlQ29sb3JDaGFuZ2U9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sVGlwPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLmZlZWRfcHJpY2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5PXttYXJrZXRSZWFkeX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGUtb3JkZXItM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZT17ZmVlZFByaWNlLnRvUmVhbCgpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU9e3F1b3RlQXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlPXtiYXNlQXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXQ9e21hcmtldElEfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4Y2hhbmdlLmZlZWRfcHJpY2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshaGFzUHJlZGljdGlvbiAmJiBzZXR0bGVQcmljZSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFByaWNlU3RhdFdpdGhMYWJlbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWdub3JlQ29sb3JDaGFuZ2U9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sVGlwPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGxlUHJpY2VUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHk9e21hcmtldFJlYWR5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZS1vcmRlci00XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlPXtzZXR0bGVQcmljZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlPXtxdW90ZUFzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17YmFzZUFzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0PXttYXJrZXRJRH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e3NldHRsZVByaWNlVGl0bGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Nob3dDb2xsYXRlcmFsUmF0aW8gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFeGNoYW5nZUhlYWRlckNvbGxhdGVyYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdD17Y29sbE9yZGVyT2JqZWN0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGUtb3JkZXItMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xvd2VzdENhbGxQcmljZSAmJiBzaG93Q2FsbExpbWl0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJpY2VTdGF0V2l0aExhYmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sVGlwPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLmNhbGxfbGltaXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5PXttYXJrZXRSZWFkeX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGUtb3JkZXItNSBpcy1jYWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlPXtsb3dlc3RDYWxsUHJpY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZT17cXVvdGVBc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U9e2Jhc2VBc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldD17bWFya2V0SUR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiZXhwbG9yZXIuYmxvY2suY2FsbF9saW1pdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmZWVkUHJpY2UgJiYgc2hvd0NhbGxMaW1pdCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFByaWNlU3RhdFdpdGhMYWJlbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbFRpcD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5tYXJnaW5fcHJpY2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5PXttYXJrZXRSZWFkeX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGUtb3JkZXItNiBpcy1jYWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlPXtmZWVkUHJpY2UuZ2V0U3F1ZWV6ZVByaWNlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFsOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlPXtxdW90ZUFzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17YmFzZUFzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0PXttYXJrZXRJRH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJleGNoYW5nZS5zcXVlZXplXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtYXJrZXQtc3RhdHMgc3RhdHMgdG9wLXN0YXRzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBvc2l0aW9uPXtcImxlZnRcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXN0ZXA9XCIxXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWludHJvPXt0cmFuc2xhdG9yLnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3YWxrdGhyb3VnaC5wZXJzb25hbGl6ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic3RyZXNzZWQtc3RhdCBpbnB1dCBjbGlja2FibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmc6IFwiMTZweCAxNnB4IDE2cHggMHB4XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uVG9nZ2xlUGVyc29uYWxpemUuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBbnRJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwic2V0dGluZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdSaWdodDogNX19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGUtb3JkZXItMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiZXhjaGFuZ2Uuc2V0dGluZ3MuaGVhZGVyLnRpdGxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IEFzc2V0TmFtZSBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldE5hbWVcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IGNuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xyXG5pbXBvcnQgUmVhY3RUb29sdGlwIGZyb20gXCJyZWFjdC10b29sdGlwXCI7XHJcbmltcG9ydCB7VG9vbHRpcH0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJpY2VTdGF0V2l0aExhYmVsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgY2hhbmdlOiBudWxsLFxyXG4gICAgICAgICAgICBjdXJNYXJrZXQ6IG51bGwsXHJcbiAgICAgICAgICAgIG1hcmtldENoYW5nZTogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMpIHtcclxuICAgICAgICBpZiAobmV4dFByb3BzLnZvbHVtZTIgJiYgbmV4dFByb3BzLnZvbHVtZTIgIT09IHRoaXMucHJvcHMudm9sdW1lMikge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgbmV4dFByb3BzLnByaWNlICE9PSB0aGlzLnByb3BzLnByaWNlIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5yZWFkeSAhPT0gdGhpcy5wcm9wcy5yZWFkeVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcclxuICAgICAgICBsZXQgc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGNoYW5nZTogMFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCB7bWFya2V0fSA9IG5leHRQcm9wcztcclxuXHJcbiAgICAgICAgbGV0IGNoZWNrTWFya2V0Q2hhbmdlID0gdGhpcy5zdGF0ZS5jdXJNYXJrZXQgIT09IG1hcmtldDtcclxuICAgICAgICBsZXQgbWFya2V0Q2hhbmdlID1cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5jdXJNYXJrZXQgPT0gbnVsbCA/IGZhbHNlIDogY2hlY2tNYXJrZXRDaGFuZ2U7XHJcblxyXG4gICAgICAgIHN0YXRlW1wibWFya2V0Q2hhbmdlXCJdID0gbWFya2V0Q2hhbmdlO1xyXG4gICAgICAgIHN0YXRlW1wiY3VyTWFya2V0XCJdID0gbWFya2V0O1xyXG4gICAgICAgIHN0YXRlW1wicHJldkFzc2V0XCJdID0gdGhpcy5zdGF0ZS5tYXJrZXRBc3NldDtcclxuXHJcbiAgICAgICAgaWYgKG5leHRQcm9wcy5yZWFkeSAmJiB0aGlzLnByb3BzLnJlYWR5KSB7XHJcbiAgICAgICAgICAgIHN0YXRlW1wiY2hhbmdlXCJdID1cclxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQobmV4dFByb3BzLnByaWNlKSAtIHBhcnNlRmxvYXQodGhpcy5wcm9wcy5wcmljZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7XHJcbiAgICAgICAgUmVhY3RUb29sdGlwLnJlYnVpbGQoKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgYmFzZSxcclxuICAgICAgICAgICAgcXVvdGUsXHJcbiAgICAgICAgICAgIHByaWNlLFxyXG4gICAgICAgICAgICBjb250ZW50LFxyXG4gICAgICAgICAgICByZWFkeSxcclxuICAgICAgICAgICAgdm9sdW1lLFxyXG4gICAgICAgICAgICB0b29sVGlwLFxyXG4gICAgICAgICAgICBpZ25vcmVDb2xvckNoYW5nZVxyXG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCB7Y2hhbmdlLCBtYXJrZXRDaGFuZ2V9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBsZXQgY2hhbmdlQ2xhc3NlcyA9IG51bGw7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhbWFya2V0Q2hhbmdlICYmXHJcbiAgICAgICAgICAgIGNoYW5nZSAmJlxyXG4gICAgICAgICAgICBjaGFuZ2UgIT09IG51bGwgJiZcclxuICAgICAgICAgICAgaWdub3JlQ29sb3JDaGFuZ2UgIT09IHRydWVcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgY2hhbmdlQ2xhc3NlcyA9IGNoYW5nZSA+IDAgPyBcInB1bHNhdGUgZ3JlZW5cIiA6IFwicHVsc2F0ZSByZWRcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2YWx1ZSA9ICF2b2x1bWVcclxuICAgICAgICAgICAgPyB1dGlscy5wcmljZV90ZXh0KHByaWNlLCBxdW90ZSwgYmFzZSlcclxuICAgICAgICAgICAgOiB1dGlscy5mb3JtYXRfdm9sdW1lKHByaWNlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGxpXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcclxuICAgICAgICAgICAgICAgICAgICBcInN0cmVzc2VkLXN0YXRcIixcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNsYXNzTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VDbGFzc2VzXHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNsaWNrfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9XCJib3R0b21cIiB0aXRsZT17dG9vbFRpcH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInZhbHVlIHN0YXQtcHJpbWFyeVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFyZWFkeSA/IDAgOiB2YWx1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInN5bWJvbC10ZXh0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lIG5hbWU9e2Jhc2UuZ2V0KFwic3ltYm9sXCIpfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIHtjb250ZW50ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0YXQtdGV4dFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PXtjb250ZW50fSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgPC9saT5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCBjbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCB7VG9vbHRpcH0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5pbXBvcnQgYXNzZXRfdXRpbHMgZnJvbSBcIi4uLy4uL2xpYi9jb21tb24vYXNzZXRfdXRpbHNcIjtcclxuXHJcbmNsYXNzIE1hcmdpblBvc2l0aW9uIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgZGVidEFzc2V0OiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZCxcclxuICAgICAgICBjb2xsYXRlcmFsQXNzZXQ6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIF9nZXRGZWVkUHJpY2UoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgMSAvXHJcbiAgICAgICAgICAgIHV0aWxzLmdldF9hc3NldF9wcmljZShcclxuICAgICAgICAgICAgICAgIGFzc2V0X3V0aWxzXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4dHJhY3RSYXdGZWVkUHJpY2UodGhpcy5wcm9wcy5kZWJ0QXNzZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldEluKFtcInF1b3RlXCIsIFwiYW1vdW50XCJdKSxcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY29sbGF0ZXJhbEFzc2V0LFxyXG4gICAgICAgICAgICAgICAgYXNzZXRfdXRpbHNcclxuICAgICAgICAgICAgICAgICAgICAuZXh0cmFjdFJhd0ZlZWRQcmljZSh0aGlzLnByb3BzLmRlYnRBc3NldClcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0SW4oW1wiYmFzZVwiLCBcImFtb3VudFwiXSksXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmRlYnRBc3NldFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0Q29sbGF0ZXJhbFJhdGlvKCkge1xyXG4gICAgICAgIGNvbnN0IGNvID0gdGhpcy5wcm9wcy5vYmplY3QudG9KUygpO1xyXG4gICAgICAgIGNvbnN0IGMgPSB1dGlscy5nZXRfYXNzZXRfYW1vdW50KFxyXG4gICAgICAgICAgICBjby5jb2xsYXRlcmFsLFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmNvbGxhdGVyYWxBc3NldFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uc3QgZCA9IHV0aWxzLmdldF9hc3NldF9hbW91bnQoY28uZGVidCwgdGhpcy5wcm9wcy5kZWJ0QXNzZXQpO1xyXG4gICAgICAgIHJldHVybiBjIC8gKGQgLyB0aGlzLl9nZXRGZWVkUHJpY2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldE1SKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGVidEFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcclxuICAgICAgICAgICAgICAgIFwiY3VycmVudF9mZWVkXCIsXHJcbiAgICAgICAgICAgICAgICBcIm1haW50ZW5hbmNlX2NvbGxhdGVyYWxfcmF0aW9cIlxyXG4gICAgICAgICAgICBdKSAvIDEwMDBcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRTdGF0dXNDbGFzcygpIHtcclxuICAgICAgICBsZXQgY3IgPSB0aGlzLl9nZXRDb2xsYXRlcmFsUmF0aW8oKTtcclxuICAgICAgICBjb25zdCBtciA9IHRoaXMuX2dldE1SKCk7XHJcblxyXG4gICAgICAgIGlmIChpc05hTihjcikpIHJldHVybiBudWxsO1xyXG4gICAgICAgIGlmIChjciA8IG1yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImRhbmdlclwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY3IgPCBtciArIDAuNSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJ3YXJuaW5nXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9nZXRDUlRpcCgpIHtcclxuICAgICAgICBjb25zdCBzdGF0dXNDbGFzcyA9IHRoaXMuX2dldFN0YXR1c0NsYXNzKCk7XHJcbiAgICAgICAgY29uc3QgbXIgPSB0aGlzLl9nZXRNUigpO1xyXG4gICAgICAgIGlmICghc3RhdHVzQ2xhc3MgfHwgc3RhdHVzQ2xhc3MgPT09IFwiXCIpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICBpZiAoc3RhdHVzQ2xhc3MgPT09IFwiZGFuZ2VyXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInRvb2x0aXAuY3JfZGFuZ2VyXCIsIHttcn0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzQ2xhc3MgPT09IFwid2FybmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3VudGVycGFydC50cmFuc2xhdGUoXCJ0b29sdGlwLmNyX3dhcm5pbmdcIiwge21yfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge29iamVjdH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGNvbnN0IGNvID0gb2JqZWN0LnRvSlMoKTtcclxuICAgICAgICBjb25zdCBjciA9IHRoaXMuX2dldENvbGxhdGVyYWxSYXRpbygpO1xyXG4gICAgICAgIGNvbnN0IGQgPSB1dGlscy5nZXRfYXNzZXRfYW1vdW50KGNvLmRlYnQsIHRoaXMucHJvcHMuZGVidEFzc2V0KTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3RhdHVzQ2xhc3MgPSB0aGlzLl9nZXRTdGF0dXNDbGFzcygpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9XCJib3R0b21cIiB0aXRsZT17dGhpcy5fZ2V0Q1JUaXAoKX0+XHJcbiAgICAgICAgICAgICAgICA8bGlcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcInN0cmVzc2VkLXN0YXRcIiwgdGhpcy5wcm9wcy5jbGFzc05hbWUpfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25DbGlja31cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidmFsdWUgc3RhdC1wcmltYXJ5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ2xhc3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1dGlscy5mb3JtYXRfbnVtYmVyKGNyLCAyKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0YXQtdGV4dFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJoZWFkZXIuY29sbGF0ZXJhbF9yYXRpb1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5NYXJnaW5Qb3NpdGlvbiA9IEJpbmRUb0NoYWluU3RhdGUoTWFyZ2luUG9zaXRpb24pO1xyXG5cclxuY2xhc3MgRXhjaGFuZ2VIZWFkZXJDb2xsYXRlcmFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgb2JqZWN0OiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7b2JqZWN0LCBhY2NvdW50fSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGxldCBkZWJ0QXNzZXQgPSBvYmplY3QuZ2V0SW4oW1wiY2FsbF9wcmljZVwiLCBcInF1b3RlXCIsIFwiYXNzZXRfaWRcIl0pO1xyXG4gICAgICAgIGxldCBjb2xsYXRlcmFsQXNzZXQgPSBvYmplY3QuZ2V0SW4oW1wiY2FsbF9wcmljZVwiLCBcImJhc2VcIiwgXCJhc3NldF9pZFwiXSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxNYXJnaW5Qb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgZGVidEFzc2V0PXtkZWJ0QXNzZXR9XHJcbiAgICAgICAgICAgICAgICBjb2xsYXRlcmFsQXNzZXQ9e2NvbGxhdGVyYWxBc3NldH1cclxuICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbkV4Y2hhbmdlSGVhZGVyQ29sbGF0ZXJhbCA9IEJpbmRUb0NoYWluU3RhdGUoRXhjaGFuZ2VIZWFkZXJDb2xsYXRlcmFsKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEV4Y2hhbmdlSGVhZGVyQ29sbGF0ZXJhbDtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcbmltcG9ydCBQcyBmcm9tIFwicGVyZmVjdC1zY3JvbGxiYXJcIjtcclxuaW1wb3J0IE9wZW5TZXR0bGVPcmRlcnMgZnJvbSBcIi4vT3BlblNldHRsZU9yZGVyc1wiO1xyXG5pbXBvcnQgTWFya2V0c0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvTWFya2V0c0FjdGlvbnNcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgVHJhbnNpdGlvbldyYXBwZXIgZnJvbSBcIi4uL1V0aWxpdHkvVHJhbnNpdGlvbldyYXBwZXJcIjtcclxuaW1wb3J0IFNldHRpbmdzQWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9TZXR0aW5nc0FjdGlvbnNcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IHtMaW1pdE9yZGVyLCBDYWxsT3JkZXJ9IGZyb20gXCJjb21tb24vTWFya2V0Q2xhc3Nlc1wiO1xyXG5pbXBvcnQgUmVhY3RUb29sdGlwIGZyb20gXCJyZWFjdC10b29sdGlwXCI7XHJcbmltcG9ydCB7QnV0dG9ufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcbmltcG9ydCB7TWFya2V0c09yZGVyVmlldywgTWFya2V0T3JkZXJzUm93Vmlld30gZnJvbSBcIi4vVmlldy9NYXJrZXRPcmRlcnNWaWV3XCI7XHJcblxyXG5jbGFzcyBNYXJrZXRPcmRlcnNSb3cgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcykge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5vcmRlci5mb3Jfc2FsZSAhPT0gdGhpcy5wcm9wcy5vcmRlci5mb3Jfc2FsZSB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMub3JkZXIuaWQgIT09IHRoaXMucHJvcHMub3JkZXIuaWQgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLnF1b3RlICE9PSB0aGlzLnByb3BzLnF1b3RlIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5iYXNlICE9PSB0aGlzLnByb3BzLmJhc2UgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLm9yZGVyLm1hcmtldF9iYXNlICE9PSB0aGlzLnByb3BzLm9yZGVyLm1hcmtldF9iYXNlIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5zZWxlY3RlZCAhPT0gdGhpcy5wcm9wcy5zZWxlY3RlZFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7YmFzZSwgcXVvdGUsIG9yZGVyLCBzZWxlY3RlZH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8TWFya2V0T3JkZXJzUm93Vmlld1xyXG4gICAgICAgICAgICAgICAga2V5PXtvcmRlci5pZH1cclxuICAgICAgICAgICAgICAgIG9yZGVyPXtvcmRlcn1cclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkPXtzZWxlY3RlZH1cclxuICAgICAgICAgICAgICAgIGJhc2U9e2Jhc2V9XHJcbiAgICAgICAgICAgICAgICBxdW90ZT17cXVvdGV9XHJcbiAgICAgICAgICAgICAgICBvbkNoZWNrQ2FuY2VsPXt0aGlzLnByb3BzLm9uQ2hlY2tDYW5jZWwuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBNYXJrZXRPcmRlcnMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhYjogcHJvcHMuYWN0aXZlVGFiLFxyXG4gICAgICAgICAgICByb3dDb3VudDogMjAsXHJcbiAgICAgICAgICAgIHNob3dBbGw6IGZhbHNlLFxyXG4gICAgICAgICAgICBzZWxlY3RlZE9yZGVyczogW11cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX2dldE9yZGVycyA9IHRoaXMuX2dldE9yZGVycy5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5iYXNlU3ltYm9sICE9PSB0aGlzLnByb3BzLmJhc2VTeW1ib2wgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLnF1b3RlU3ltYm9sICE9PSB0aGlzLnByb3BzLnF1b3RlU3ltYm9sIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5jbGFzc05hbWUgIT09IHRoaXMucHJvcHMuY2xhc3NOYW1lIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5hY3RpdmVUYWIgIT09IHRoaXMucHJvcHMuYWN0aXZlVGFiIHx8XHJcbiAgICAgICAgICAgIG5leHRTdGF0ZS5hY3RpdmVUYWIgIT09IHRoaXMuc3RhdGUuYWN0aXZlVGFiIHx8XHJcbiAgICAgICAgICAgIG5leHRTdGF0ZS5zaG93QWxsICE9PSB0aGlzLnN0YXRlLnNob3dBbGwgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLmN1cnJlbnRBY2NvdW50ICE9PSB0aGlzLnByb3BzLmN1cnJlbnRBY2NvdW50IHx8XHJcbiAgICAgICAgICAgIG5leHRTdGF0ZS5zZWxlY3RlZE9yZGVycyAhPT0gdGhpcy5zdGF0ZS5zZWxlY3RlZE9yZGVycyB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuc2V0dGxlT3JkZXJzICE9PSB0aGlzLnByb3BzLnNldHRsZU9yZGVyc1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLmhpZGVTY3JvbGxiYXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGFpbmVyKDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlN0YXRlKSB7XHJcbiAgICAgICAgbGV0IHtoaWRlU2Nyb2xsYmFyc30gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCB7c2hvd0FsbH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBpZiAocHJldlN0YXRlLnNob3dBbGwgIT0gc2hvd0FsbCkge1xyXG4gICAgICAgICAgICBpZiAoc2hvd0FsbCAmJiAhaGlkZVNjcm9sbGJhcnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGFpbmVyKDIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzaG93QWxsICYmICFoaWRlU2Nyb2xsYmFycykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250YWluZXIoMyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvd0FsbCAmJiBoaWRlU2Nyb2xsYmFycykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250YWluZXIoMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lcigwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xyXG4gICAgICAgIGlmIChuZXh0UHJvcHMuYWN0aXZlVGFiICE9PSB0aGlzLnN0YXRlLmFjdGl2ZVRhYikge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVRhYihuZXh0UHJvcHMuYWN0aXZlVGFiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlc2V0IG9uIE1hcmtldCBTd2l0Y2hcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5iYXNlU3ltYm9sICE9PSB0aGlzLnByb3BzLmJhc2VTeW1ib2wgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLnF1b3RlU3ltYm9sICE9PSB0aGlzLnByb3BzLnF1b3RlU3ltYm9sXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dBbGw6IGZhbHNlfSk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGFpbmVyKDApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnByb3BzLmhpZGVTY3JvbGxiYXJzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lcigxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVzZXQgb24gaGlkZVNjcm9sbGJhcnMgc3dpdGNoXHJcbiAgICAgICAgaWYgKG5leHRQcm9wcy5oaWRlU2Nyb2xsYmFycyAhPT0gdGhpcy5wcm9wcy5oaWRlU2Nyb2xsYmFycykge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lcigwKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghbmV4dFByb3BzLmhpZGVTY3JvbGxiYXJzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lcigxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKioqXHJcbiAgICAgKiBVcGRhdGUgUFMgQ29udGFpbmVyXHJcbiAgICAgKiB0eXBlOmludCBbMDpkZXN0cm95LCAxOmluaXQsIDI6dXBkYXRlLCAzOnVwZGF0ZSB3LyBzY3JvbGxUb3BdIChkZWZhdWx0OiAyKVxyXG4gICAgICovXHJcbiAgICB1cGRhdGVDb250YWluZXIodHlwZSA9IDIpIHtcclxuICAgICAgICBsZXQgY29udGFpbmVyTm9kZSA9IHRoaXMucmVmcy52aWV3LnJlZnMuY29udGFpbmVyO1xyXG4gICAgICAgIGxldCBjb250YWluZXJUcmFuc2l0aW9uID0gdGhpcy5yZWZzLmNvbnRlbnRUcmFuc2l0aW9uO1xyXG5cclxuICAgICAgICBpZiAoIWNvbnRhaW5lck5vZGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT0gMCkge1xyXG4gICAgICAgICAgICBjb250YWluZXJOb2RlLnNjcm9sbFRvcCA9IDA7XHJcbiAgICAgICAgICAgIFBzLmRlc3Ryb3koY29udGFpbmVyTm9kZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09IDEpIHtcclxuICAgICAgICAgICAgUHMuaW5pdGlhbGl6ZShjb250YWluZXJOb2RlKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDb250YWluZXIoMyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09IDIpIHtcclxuICAgICAgICAgICAgUHMudXBkYXRlKGNvbnRhaW5lck5vZGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAzKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lck5vZGUuc2Nyb2xsVG9wID0gMDtcclxuICAgICAgICAgICAgUHMudXBkYXRlKGNvbnRhaW5lck5vZGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRhaW5lclRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgY29udGFpbmVyVHJhbnNpdGlvbi5yZXNldEFuaW1hdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25TZXRTaG93QWxsKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBzaG93QWxsOiAhdGhpcy5zdGF0ZS5zaG93QWxsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlVGFiKHRhYikge1xyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIG9yZGVyc1RhYjogdGFiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhYjogdGFiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IGZvY3VzIGdvZXMgYmFjayB0byB0b3Agb2Ygc2Nyb2xsYWJsZSBjb250YWluZXIgd2hlbiB0YWIgaXMgY2hhbmdlZFxyXG4gICAgICAgIHRoaXMudXBkYXRlQ29udGFpbmVyKDMpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KFJlYWN0VG9vbHRpcC5yZWJ1aWxkLCAxMDAwKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNoZWNrQ2FuY2VsKG9yZGVySWQsIGV2dCkge1xyXG4gICAgICAgIGxldCB7c2VsZWN0ZWRPcmRlcnN9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBsZXQgY2hlY2tlZCA9IGV2dC50YXJnZXQuY2hlY2tlZDtcclxuXHJcbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRPcmRlcnM6IHNlbGVjdGVkT3JkZXJzLmNvbmNhdChbb3JkZXJJZF0pfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGluZGV4ID0gc2VsZWN0ZWRPcmRlcnMuaW5kZXhPZihvcmRlcklkKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE9yZGVyczogc2VsZWN0ZWRPcmRlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIGluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHNlbGVjdGVkT3JkZXJzLnNsaWNlKGluZGV4ICsgMSkpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjYW5jZWxTZWxlY3RlZCgpIHtcclxuICAgICAgICB0aGlzLl9jYW5jZWxMaW1pdE9yZGVycy5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0U2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRPcmRlcnM6IFtdfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DYW5jZWxUb2dnbGUoZXZ0KSB7XHJcbiAgICAgICAgY29uc3Qgb3JkZXJzID0gdGhpcy5fZ2V0T3JkZXJzKCk7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkT3JkZXJzID0gW107XHJcblxyXG4gICAgICAgIG9yZGVycy5mb3JFYWNoKG9yZGVyID0+IHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRPcmRlcnMucHVzaChvcmRlci5pZCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChldnQudGFyZ2V0LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRPcmRlcnM6IHNlbGVjdGVkT3JkZXJzfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNldFNlbGVjdGVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9jYW5jZWxMaW1pdE9yZGVycygpIHtcclxuICAgICAgICBNYXJrZXRzQWN0aW9ucy5jYW5jZWxMaW1pdE9yZGVycyhcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jdXJyZW50QWNjb3VudC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZE9yZGVyc1xyXG4gICAgICAgIClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldFNlbGVjdGVkKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjYW5jZWwgb3JkZXJzIGVycm9yOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0T3JkZXJzKCkge1xyXG4gICAgICAgIGNvbnN0IHtjdXJyZW50QWNjb3VudCwgYmFzZSwgcXVvdGUsIGZlZWRQcmljZX0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGNvbnN0IG9yZGVycyA9IGN1cnJlbnRBY2NvdW50LmdldChcIm9yZGVyc1wiKSxcclxuICAgICAgICAgICAgY2FsbF9vcmRlcnMgPSBjdXJyZW50QWNjb3VudC5nZXQoXCJjYWxsX29yZGVyc1wiKTtcclxuICAgICAgICBjb25zdCBiYXNlSUQgPSBiYXNlLmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICBxdW90ZUlEID0gcXVvdGUuZ2V0KFwiaWRcIik7XHJcbiAgICAgICAgY29uc3QgYXNzZXRzID0ge1xyXG4gICAgICAgICAgICBbYmFzZS5nZXQoXCJpZFwiKV06IHtwcmVjaXNpb246IGJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpfSxcclxuICAgICAgICAgICAgW3F1b3RlLmdldChcImlkXCIpXToge3ByZWNpc2lvbjogcXVvdGUuZ2V0KFwicHJlY2lzaW9uXCIpfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IGxpbWl0T3JkZXJzID0gb3JkZXJzXHJcbiAgICAgICAgICAgIC50b0FycmF5KClcclxuICAgICAgICAgICAgLm1hcChvcmRlciA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbyA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KG9yZGVyKTtcclxuICAgICAgICAgICAgICAgIGlmICghbykgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsbEJhc2UgPSBvLmdldEluKFtcInNlbGxfcHJpY2VcIiwgXCJiYXNlXCIsIFwiYXNzZXRfaWRcIl0pLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxRdW90ZSA9IG8uZ2V0SW4oW1wic2VsbF9wcmljZVwiLCBcInF1b3RlXCIsIFwiYXNzZXRfaWRcIl0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIChzZWxsQmFzZSA9PT0gYmFzZUlEICYmIHNlbGxRdW90ZSA9PT0gcXVvdGVJRCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAoc2VsbEJhc2UgPT09IHF1b3RlSUQgJiYgc2VsbFF1b3RlID09PSBiYXNlSUQpXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpbWl0T3JkZXIoby50b0pTKCksIGFzc2V0cywgcXVvdGUuZ2V0KFwiaWRcIikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGEgPT4gISFhKTtcclxuXHJcbiAgICAgICAgbGV0IGNhbGxPcmRlcnMgPSBjYWxsX29yZGVyc1xyXG4gICAgICAgICAgICAudG9BcnJheSgpXHJcbiAgICAgICAgICAgIC5tYXAob3JkZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbyA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KG9yZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW8pIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzZWxsQmFzZSA9IG8uZ2V0SW4oW1wiY2FsbF9wcmljZVwiLCBcImJhc2VcIiwgXCJhc3NldF9pZFwiXSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGxRdW90ZSA9IG8uZ2V0SW4oW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjYWxsX3ByaWNlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInF1b3RlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFzc2V0X2lkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoc2VsbEJhc2UgPT09IGJhc2VJRCAmJiBzZWxsUXVvdGUgPT09IHF1b3RlSUQpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChzZWxsQmFzZSA9PT0gcXVvdGVJRCAmJiBzZWxsUXVvdGUgPT09IGJhc2VJRClcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZlZWRQcmljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXcgQ2FsbE9yZGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby50b0pTKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZS5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlZWRQcmljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGEgPT4gISFhKVxyXG4gICAgICAgICAgICAuZmlsdGVyKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5pc01hcmdpbkNhbGxlZCgpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbGltaXRPcmRlcnMuY29uY2F0KGNhbGxPcmRlcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2Jhc2UsIHF1b3RlLCBxdW90ZVN5bWJvbCwgYmFzZVN5bWJvbCwgc2V0dGxlT3JkZXJzfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IHthY3RpdmVUYWIsIHNob3dBbGwsIHJvd0NvdW50LCBzZWxlY3RlZE9yZGVyc30gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBpZiAoIWJhc2UgfHwgIXF1b3RlKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgbGV0IGNvbnRlbnRDb250YWluZXI7XHJcbiAgICAgICAgbGV0IGZvb3RlckNvbnRhaW5lcjtcclxuXHJcbiAgICAgICAgLyogVXNlcnMgT3BlbiBPcmRlcnMgVGFiIChkZWZhdWx0KSAqL1xyXG4gICAgICAgIGxldCB0b3RhbFJvd3MgPSAwO1xyXG5cclxuICAgICAgICAvLyBVc2VyIE9yZGVyc1xyXG4gICAgICAgIGlmICghYWN0aXZlVGFiIHx8IGFjdGl2ZVRhYiA9PSBcIm15X29yZGVyc1wiKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yZGVycyA9IHRoaXMuX2dldE9yZGVycygpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGJpZHMgPSBvcmRlcnNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoYSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuaXNCaWQoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiLmdldFByaWNlKCkgLSBhLmdldFByaWNlKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm1hcChvcmRlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByaWNlID0gb3JkZXIuZ2V0UHJpY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TWFya2V0T3JkZXJzUm93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZT17cHJpY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e29yZGVyLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI9e29yZGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17YmFzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlPXtxdW90ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNlbGVjdGVkT3JkZXJzLmxlbmd0aCA+IDAgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNlbGVjdGVkT3JkZXJzLmluY2x1ZGVzKG9yZGVyLmlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DYW5jZWw9e3RoaXMucHJvcHMub25DYW5jZWwuYmluZCh0aGlzLCBvcmRlci5pZCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoZWNrQ2FuY2VsPXt0aGlzLm9uQ2hlY2tDYW5jZWwuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyLmlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBhc2tzID0gb3JkZXJzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhYS5pc0JpZCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZ2V0UHJpY2UoKSAtIGIuZ2V0UHJpY2UoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubWFwKG9yZGVyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJpY2UgPSBvcmRlci5nZXRQcmljZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxNYXJrZXRPcmRlcnNSb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlPXtwcmljZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17b3JkZXIuaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcj17b3JkZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlPXtiYXNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU9e3F1b3RlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRPcmRlcnMubGVuZ3RoID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRPcmRlcnMuaW5jbHVkZXMob3JkZXIuaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNhbmNlbD17dGhpcy5wcm9wcy5vbkNhbmNlbC5iaW5kKHRoaXMsIG9yZGVyLmlkKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hlY2tDYW5jZWw9e3RoaXMub25DaGVja0NhbmNlbC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIuaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJvd3MgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcm93cyA9IHJvd3MuY29uY2F0KGFza3MpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoYmlkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJvd3MgPSByb3dzLmNvbmNhdChiaWRzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcm93cy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5wcm9wcy5wcmljZSAtIGIucHJvcHMucHJpY2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdG90YWxSb3dzID0gcm93cy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBpZiAodG90YWxSb3dzID4gMCAmJiAhc2hvd0FsbCkge1xyXG4gICAgICAgICAgICAgICAgcm93cy5zcGxpY2Uocm93Q291bnQsIHJvd3MubGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGVtcHR5Um93ID0gKFxyXG4gICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZUhlaWdodDogNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogXCJpdGFsaWNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xTcGFuPVwiNVwiXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm5vX29yZGVyc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY2FuY2VsT3JkZXJCdXR0b24gPSAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZGlzcGxheTogXCJncmlkXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e3RoaXMuY2FuY2VsU2VsZWN0ZWQuYmluZCh0aGlzKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLmNhbmNlbF9zZWxlY3RlZF9vcmRlcnNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb250ZW50Q29udGFpbmVyID0gKFxyXG4gICAgICAgICAgICAgICAgPFRyYW5zaXRpb25XcmFwcGVyXHJcbiAgICAgICAgICAgICAgICAgICAgcmVmPVwiY29udGVudFRyYW5zaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cInRib2R5XCJcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uTmFtZT1cIm5ld3Jvd1wiXHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAge3Jvd3MubGVuZ3RoID8gcm93cyA6IGVtcHR5Um93fVxyXG4gICAgICAgICAgICAgICAgPC9UcmFuc2l0aW9uV3JhcHBlcj5cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGZvb3RlckNvbnRhaW5lciA9XHJcbiAgICAgICAgICAgICAgICB0b3RhbFJvd3MgPiAxMSA/IChcclxuICAgICAgICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3JkZXJib29rLXNob3dhbGxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIG9uQ2xpY2s9e3RoaXMuX29uU2V0U2hvd0FsbC5iaW5kKHRoaXMpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJleGNoYW5nZS5oaWRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiZXhjaGFuZ2Uuc2hvd19hbGxfb3JkZXJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3djb3VudD17dG90YWxSb3dzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRPcmRlcnMubGVuZ3RoID4gMCA/IGNhbmNlbE9yZGVyQnV0dG9uIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICAgICAgICAgKSA6IHNlbGVjdGVkT3JkZXJzLmxlbmd0aCA+IDAgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsT3JkZXJCdXR0b25cclxuICAgICAgICAgICAgICAgICkgOiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gT3BlbiBTZXR0bGUgT3JkZXJzXHJcbiAgICAgICAgaWYgKGFjdGl2ZVRhYiAmJiBhY3RpdmVUYWIgPT0gXCJvcGVuX3NldHRsZW1lbnRcIikge1xyXG4gICAgICAgICAgICB0b3RhbFJvd3MgPSBzZXR0bGVPcmRlcnMubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRvdGFsUm93cyA+IDAgJiYgIXNob3dBbGwpIHtcclxuICAgICAgICAgICAgICAgIHNldHRsZU9yZGVycy5zcGxpY2Uocm93Q291bnQsIHNldHRsZU9yZGVycy5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb250ZW50Q29udGFpbmVyID0gKFxyXG4gICAgICAgICAgICAgICAgPE9wZW5TZXR0bGVPcmRlcnNcclxuICAgICAgICAgICAgICAgICAgICBrZXk9XCJzZXR0bGVfb3JkZXJzXCJcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcnM9e3NldHRsZU9yZGVyc31cclxuICAgICAgICAgICAgICAgICAgICBiYXNlPXtiYXNlfVxyXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlPXtxdW90ZX1cclxuICAgICAgICAgICAgICAgICAgICBiYXNlU3ltYm9sPXtiYXNlU3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlU3ltYm9sPXtxdW90ZVN5bWJvbH1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBmb290ZXJDb250YWluZXIgPSB0b3RhbFJvd3MgPiAxMSAmJiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9yZGVyYm9vay1zaG93YWxsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGEgb25DbGljaz17dGhpcy5fb25TZXRTaG93QWxsLmJpbmQodGhpcyl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJleGNoYW5nZS5oaWRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImV4Y2hhbmdlLnNob3dfYWxsX29yZGVyc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3djb3VudD17dG90YWxSb3dzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGlzU2VsZWN0ZWQgPVxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNlbGVjdGVkT3JkZXJzLmxlbmd0aCA+IDAgJiZcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZE9yZGVycy5sZW5ndGggPT0gdG90YWxSb3dzO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8TWFya2V0c09yZGVyVmlld1xyXG4gICAgICAgICAgICAgICAgcmVmPVwidmlld1wiXHJcbiAgICAgICAgICAgICAgICAvLyBTdHlsZXMgYW5kIENsYXNzZXNcclxuICAgICAgICAgICAgICAgIHN0eWxlPXt0aGlzLnByb3BzLnN0eWxlfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLnByb3BzLmNsYXNzTmFtZX1cclxuICAgICAgICAgICAgICAgIGlubmVyQ2xhc3M9e3RoaXMucHJvcHMuaW5uZXJDbGFzc31cclxuICAgICAgICAgICAgICAgIGlubmVyU3R5bGU9e3RoaXMucHJvcHMuaW5uZXJTdHlsZX1cclxuICAgICAgICAgICAgICAgIGhlYWRlclN0eWxlPXt0aGlzLnByb3BzLmhlYWRlclN0eWxlfVxyXG4gICAgICAgICAgICAgICAgLy8gQm9vbHNcclxuICAgICAgICAgICAgICAgIG5vSGVhZGVyPXt0aGlzLnByb3BzLm5vSGVhZGVyfVxyXG4gICAgICAgICAgICAgICAgaXNTZWxlY3RlZD17aXNTZWxlY3RlZH1cclxuICAgICAgICAgICAgICAgIHRpbnlTY3JlZW49e3RoaXMucHJvcHMudGlueVNjcmVlbn1cclxuICAgICAgICAgICAgICAgIC8vIFN0cmluZ3NcclxuICAgICAgICAgICAgICAgIGFjdGl2ZVRhYj17YWN0aXZlVGFifVxyXG4gICAgICAgICAgICAgICAgYmFzZVN5bWJvbD17YmFzZVN5bWJvbH1cclxuICAgICAgICAgICAgICAgIHF1b3RlU3ltYm9sPXtxdW90ZVN5bWJvbH1cclxuICAgICAgICAgICAgICAgIC8vIENvbnRhaW5lcnNcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRDb250YWluZXI9e2NvbnRlbnRDb250YWluZXJ9XHJcbiAgICAgICAgICAgICAgICBmb290ZXJDb250YWluZXI9e2Zvb3RlckNvbnRhaW5lcn1cclxuICAgICAgICAgICAgICAgIC8vIEZ1bmN0aW9uc1xyXG4gICAgICAgICAgICAgICAgb25DYW5jZWxUb2dnbGU9e3RoaXMub25DYW5jZWxUb2dnbGUuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5NYXJrZXRPcmRlcnMuZGVmYXVsdFByb3BzID0ge1xyXG4gICAgYmFzZToge30sXHJcbiAgICBxdW90ZToge30sXHJcbiAgICBvcmRlcnM6IHt9LFxyXG4gICAgcXVvdGVTeW1ib2w6IFwiXCIsXHJcbiAgICBiYXNlU3ltYm9sOiBcIlwiXHJcbn07XHJcblxyXG5NYXJrZXRPcmRlcnMucHJvcFR5cGVzID0ge1xyXG4gICAgYmFzZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgcXVvdGU6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcclxuICAgIG9yZGVyczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgcXVvdGVTeW1ib2w6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcclxuICAgIGJhc2VTeW1ib2w6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxyXG59O1xyXG5cclxuZXhwb3J0IHtNYXJrZXRPcmRlcnN9O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgQXNzZXROYW1lIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0TmFtZVwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCBnZXRMb2NhbGUgZnJvbSBcImJyb3dzZXItbG9jYWxlXCI7XHJcbmltcG9ydCBUcmFuc2l0aW9uV3JhcHBlciBmcm9tIFwiLi4vVXRpbGl0eS9UcmFuc2l0aW9uV3JhcHBlclwiO1xyXG5pbXBvcnQge1Rvb2x0aXB9IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcclxuXHJcbmNsYXNzIFRhYmxlSGVhZGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2Jhc2VTeW1ib2wsIHF1b3RlU3ltYm9sfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5wcmljZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7YmFzZVN5bWJvbCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImhlYWRlci1zdWItdGl0bGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoPEFzc2V0TmFtZSBuYW1lPXtiYXNlU3ltYm9sfSAvPi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lIG5hbWU9e3F1b3RlU3ltYm9sfSAvPilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ0cmFuc2Zlci5hbW91bnRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3F1b3RlU3ltYm9sID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaGVhZGVyLXN1Yi10aXRsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICg8QXNzZXROYW1lIG5hbWU9e3F1b3RlU3ltYm9sfSAvPilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ0cmFuc2FjdGlvbi5zZXR0bGVtZW50X2RhdGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7dmlzaWJpbGl0eTogXCJoaWRkZW5cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoZWFkZXItc3ViLXRpdGxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuVGFibGVIZWFkZXIuZGVmYXVsdFByb3BzID0ge1xyXG4gICAgcXVvdGVTeW1ib2w6IG51bGwsXHJcbiAgICBiYXNlU3ltYm9sOiBudWxsXHJcbn07XHJcblxyXG5jbGFzcyBTZXR0bGVPcmRlclJvdyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtiYXNlLCBxdW90ZSwgb3JkZXIsIHNob3dTeW1ib2xzfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGxldCBwcmljZSA9XHJcbiAgICAgICAgICAgIGJhc2UuZ2V0KFwiaWRcIikgPT0gXCIxLjMuMFwiXHJcbiAgICAgICAgICAgICAgICA/IG9yZGVyLmdldFByaWNlKCkgLyAoMSArIG9yZGVyLm9mZnNldF9wZXJjZW50IC8gMTAwMDApXHJcbiAgICAgICAgICAgICAgICA6IG9yZGVyLmdldFByaWNlKCkgKiAoMSArIG9yZGVyLm9mZnNldF9wZXJjZW50IC8gMTAwMDApO1xyXG4gICAgICAgIGxldCBhbW91bnRTeW1ib2wgPSBzaG93U3ltYm9scyA/IFwiIFwiICsgcXVvdGUuZ2V0KFwic3ltYm9sXCIpIDogbnVsbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCIgc3R5bGU9e3t3aWR0aDogXCI2JVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAge1wiIFwifVxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihwcmljZSwgcXVvdGUuZ2V0KFwicHJlY2lzaW9uXCIpKX17XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAge2Ftb3VudFN5bWJvbH1cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAge3V0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIW9yZGVyLmlzQmlkKCkgPyBcImFtb3VudEZvclNhbGVcIiA6IFwiYW1vdW50VG9SZWNlaXZlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSgpLmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdW90ZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhb3JkZXIuaXNCaWQoKSA/IFwiYW1vdW50VG9SZWNlaXZlXCIgOiBcImFtb3VudEZvclNhbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdKCkuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e25ldyBEYXRlKG9yZGVyLnNldHRsZW1lbnRfZGF0ZSkudG9TdHJpbmcoKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIiwgd2hpdGVTcGFjZTogXCJub3dyYXBcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LmxvY2FsaXplKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKG9yZGVyLnNldHRsZW1lbnRfZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TG9jYWxlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKFwiZW4tdXNcIikgIT09IC0xXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIm1hcmtldF9oaXN0b3J5X3VzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwibWFya2V0X2hpc3RvcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuU2V0dGxlT3JkZXJSb3cuZGVmYXVsdFByb3BzID0ge1xyXG4gICAgc2hvd1N5bWJvbHM6IGZhbHNlLFxyXG4gICAgaW52ZXJ0OiBmYWxzZVxyXG59O1xyXG5cclxuY2xhc3MgT3BlblNldHRsZU9yZGVycyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgbmV4dFByb3BzLmN1cnJlbnRBY2NvdW50ICE9PSB0aGlzLnByb3BzLmN1cnJlbnRBY2NvdW50IHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5vcmRlcnMgIT09IHRoaXMucHJvcHMub3JkZXJzXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtvcmRlcnMsIGJhc2UsIHF1b3RlfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGxldCBhY3RpdmVPcmRlcnMgPSBudWxsO1xyXG5cclxuICAgICAgICBjb25zdCBlbXB0eVJvdyA9IChcclxuICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZUhlaWdodDogNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogXCJpdGFsaWNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xTcGFuPVwiNVwiXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm5vX29yZGVyc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKG9yZGVycy5zaXplID4gMCAmJiBiYXNlICYmIHF1b3RlKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZU9yZGVycyA9IG9yZGVyc1xyXG4gICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5pc0JlZm9yZShiKSA/IC0xIDogMTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubWFwKG9yZGVyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGF0ZS5ub3coKSA8IG9yZGVyLnNldHRsZW1lbnRfZGF0ZSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPFNldHRsZU9yZGVyUm93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e29yZGVyLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI9e29yZGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17YmFzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlPXtxdW90ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudG9BcnJheSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPFRyYW5zaXRpb25XcmFwcGVyXHJcbiAgICAgICAgICAgICAgICByZWY9XCJjb250ZW50VHJhbnNpdGlvblwiXHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJ0Ym9keVwiXHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uTmFtZT1cIm5ld3Jvd1wiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHthY3RpdmVPcmRlcnMgPyBhY3RpdmVPcmRlcnMgOiBlbXB0eVJvd31cclxuICAgICAgICAgICAgPC9UcmFuc2l0aW9uV3JhcHBlcj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5PcGVuU2V0dGxlT3JkZXJzLmRlZmF1bHRQcm9wcyA9IHtcclxuICAgIGJhc2U6IHt9LFxyXG4gICAgcXVvdGU6IHt9LFxyXG4gICAgb3JkZXJzOiB7fSxcclxuICAgIHF1b3RlU3ltYm9sOiBcIlwiLFxyXG4gICAgYmFzZVN5bWJvbDogXCJcIlxyXG59O1xyXG5cclxuT3BlblNldHRsZU9yZGVycy5wcm9wVHlwZXMgPSB7XHJcbiAgICBiYXNlOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICBxdW90ZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgb3JkZXJzOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICBxdW90ZVN5bWJvbDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAgYmFzZVN5bWJvbDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBPcGVuU2V0dGxlT3JkZXJzO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgUHJpY2VUZXh0IGZyb20gXCIuLi8uLi9VdGlsaXR5L1ByaWNlVGV4dFwiO1xyXG5pbXBvcnQgQXNzZXROYW1lIGZyb20gXCIuLi8uLi9VdGlsaXR5L0Fzc2V0TmFtZVwiO1xyXG5jb25zdCByaWdodEFsaWduID0ge3RleHRBbGlnbjogXCJyaWdodFwifTtcclxuaW1wb3J0IHtUb29sdGlwLCBDaGVja2JveH0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5cclxuZnVuY3Rpb24gTWFya2V0T3JkZXJzVmlld1RhYmxlSGVhZGVyKHtcclxuICAgIGJhc2VTeW1ib2wsXHJcbiAgICBxdW90ZVN5bWJvbCxcclxuICAgIHNlbGVjdGVkLFxyXG4gICAgb25DYW5jZWxUb2dnbGVcclxufSkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3dpZHRoOiBcIjYlXCIsIHRleHRBbGlnbjogXCJjZW50ZXJcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIHtvbkNhbmNlbFRvZ2dsZSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS5jYW5jZWxfb3JkZXJfc2VsZWN0X2FsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwibGVmdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9yZGVyLWNhbmNlbC10b2dnbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3NlbGVjdGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNhbmNlbFRvZ2dsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3JpZ2h0QWxpZ259PlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGVhZGVyLXN1Yi10aXRsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJleGNoYW5nZS5wcmljZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3JpZ2h0QWxpZ259PlxyXG4gICAgICAgICAgICAgICAgICAgIHtiYXNlU3ltYm9sID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJoZWFkZXItc3ViLXRpdGxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lIGRhdGFQbGFjZT1cInRvcFwiIG5hbWU9e3F1b3RlU3ltYm9sfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoIHN0eWxlPXtyaWdodEFsaWdufT5cclxuICAgICAgICAgICAgICAgICAgICB7YmFzZVN5bWJvbCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaGVhZGVyLXN1Yi10aXRsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBkYXRhUGxhY2U9XCJ0b3BcIiBuYW1lPXtiYXNlU3ltYm9sfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoIHN0eWxlPXtyaWdodEFsaWdufT5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhlYWRlci1zdWItdGl0bGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwidHJhbnNhY3Rpb24uZXhwaXJhdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgPC90aGVhZD5cclxuICAgICk7XHJcbn1cclxuXHJcbk1hcmtldE9yZGVyc1ZpZXdUYWJsZUhlYWRlci5kZWZhdWx0UHJvcHMgPSB7XHJcbiAgICBxdW90ZVN5bWJvbDogbnVsbCxcclxuICAgIGJhc2VTeW1ib2w6IG51bGxcclxufTtcclxuXHJcbmZ1bmN0aW9uIE1hcmtldE9yZGVyc1Jvd1ZpZXcoe29yZGVyLCBzZWxlY3RlZCwgYmFzZSwgcXVvdGUsIG9uQ2hlY2tDYW5jZWx9KSB7XHJcbiAgICBjb25zdCBpc0JpZCA9IG9yZGVyLmlzQmlkKCk7XHJcbiAgICBjb25zdCBpc0NhbGwgPSBvcmRlci5pc0NhbGwoKTtcclxuICAgIGNvbnN0IHRkQ2xhc3MgPSBpc0NhbGxcclxuICAgICAgICA/IFwib3JkZXJIaXN0b3J5Q2FsbFwiXHJcbiAgICAgICAgOiBpc0JpZFxyXG4gICAgICAgICAgICA/IFwib3JkZXJIaXN0b3J5QmlkXCJcclxuICAgICAgICAgICAgOiBcIm9yZGVySGlzdG9yeUFza1wiO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPHRyIGtleT17b3JkZXIuaWR9PlxyXG4gICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIiBzdHlsZT17e3dpZHRoOiBcIjYlXCJ9fT5cclxuICAgICAgICAgICAgICAgIHtpc0NhbGwgPyBudWxsIDogKFxyXG4gICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvcmRlckNhbmNlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3NlbGVjdGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25DaGVja0NhbmNlbH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT17dGRDbGFzc30gc3R5bGU9e3twYWRkaW5nTGVmdDogMTB9fT5cclxuICAgICAgICAgICAgICAgIDxQcmljZVRleHQgcHJpY2U9e29yZGVyLmdldFByaWNlKCl9IGJhc2U9e2Jhc2V9IHF1b3RlPXtxdW90ZX0gLz5cclxuICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAge3V0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICFpc0JpZCA/IFwiYW1vdW50Rm9yU2FsZVwiIDogXCJhbW91bnRUb1JlY2VpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIF0oKS5nZXRBbW91bnQoe3JlYWw6IHRydWV9KSxcclxuICAgICAgICAgICAgICAgICAgICBxdW90ZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICl9e1wiIFwifVxyXG4gICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcltcclxuICAgICAgICAgICAgICAgICAgICAgICAgIWlzQmlkID8gXCJhbW91bnRUb1JlY2VpdmVcIiA6IFwiYW1vdW50Rm9yU2FsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgXSgpLmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICApfXtcIiBcIn1cclxuICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e29yZGVyLmV4cGlyYXRpb24udG9Mb2NhbGVTdHJpbmcoKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7aXNDYWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY291bnRlcnBhcnQubG9jYWxpemUobmV3IERhdGUob3JkZXIuZXhwaXJhdGlvbiksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBcInNob3J0X2N1c3RvbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgIDwvdHI+XHJcbiAgICApO1xyXG59XHJcblxyXG5jbGFzcyBNYXJrZXRzT3JkZXJWaWV3IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICAvLyBTdHlsZXMgYW5kIENsYXNzZXNcclxuICAgICAgICAgICAgc3R5bGUsXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZSxcclxuICAgICAgICAgICAgaW5uZXJDbGFzcyxcclxuICAgICAgICAgICAgaW5uZXJTdHlsZSxcclxuICAgICAgICAgICAgaGVhZGVyU3R5bGUsXHJcblxyXG4gICAgICAgICAgICAvLyBCb29sc1xyXG4gICAgICAgICAgICBub0hlYWRlcixcclxuICAgICAgICAgICAgaXNTZWxlY3RlZCxcclxuICAgICAgICAgICAgdGlueVNjcmVlbixcclxuXHJcbiAgICAgICAgICAgIC8vIFN0cmluZ3NcclxuICAgICAgICAgICAgYWN0aXZlVGFiLFxyXG4gICAgICAgICAgICBiYXNlU3ltYm9sLFxyXG4gICAgICAgICAgICBxdW90ZVN5bWJvbCxcclxuXHJcbiAgICAgICAgICAgIC8vIENvbnRhaW5lcnNcclxuICAgICAgICAgICAgY29udGVudENvbnRhaW5lcixcclxuICAgICAgICAgICAgZm9vdGVyQ29udGFpbmVyLFxyXG5cclxuICAgICAgICAgICAgLy8gRnVuY3Rpb25zXHJcbiAgICAgICAgICAgIG9uQ2FuY2VsVG9nZ2xlXHJcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3N0eWxlfSBrZXk9XCJvcGVuX29yZGVyc1wiIGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtpbm5lckNsYXNzfSBzdHlsZT17aW5uZXJTdHlsZX0+XHJcbiAgICAgICAgICAgICAgICAgICAge25vSGVhZGVyID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e2hlYWRlclN0eWxlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZXhjaGFuZ2UtY29udGVudC1oZWFkZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWN0aXZlVGFiID09IFwibXlfb3JkZXJzXCIgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UubXlfb3JkZXJzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2FjdGl2ZVRhYiA9PSBcIm9wZW5fc2V0dGxlbWVudFwiID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRsZV9vcmRlcnNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIHNocmluayBsZWZ0LW9yZGVyYm9vay1oZWFkZXIgbWFya2V0LXJpZ2h0LXBhZGRpbmctb25seVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUgb3JkZXItdGFibGUgdGV4dC1yaWdodCBmaXhlZC10YWJsZSBtYXJrZXQtcmlnaHQtcGFkZGluZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPE1hcmtldE9yZGVyc1ZpZXdUYWJsZUhlYWRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VTeW1ib2w9e2Jhc2VTeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVTeW1ib2w9e3F1b3RlU3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkPXtpc1NlbGVjdGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2FuY2VsVG9nZ2xlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFiID09IFwibXlfb3JkZXJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gb25DYW5jZWxUb2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFibGUtY29udGFpbmVyIGdyaWQtYmxvY2sgbWFya2V0LXJpZ2h0LXBhZGRpbmctb25seSBuby1vdmVyZmxvd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cImNvbnRhaW5lclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW5cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkhlaWdodDogdGlueVNjcmVlbiA/IDI2MCA6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6IDI2MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6IFwiMTNweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUgb3JkZXItdGFibGUgdGFibGUtaGlnaGxpZ2h0LWhvdmVyIHRhYmxlLWhvdmVyIG5vLXN0cmlwZXMgdGV4dC1yaWdodCBmaXhlZC10YWJsZSBtYXJrZXQtcmlnaHQtcGFkZGluZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvbnRlbnRDb250YWluZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAge2Zvb3RlckNvbnRhaW5lcn1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge01hcmtldHNPcmRlclZpZXcsIE1hcmtldE9yZGVyc1Jvd1ZpZXd9O1xyXG4iLCJpbXBvcnQgY25hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XHJcbmltcG9ydCB0cmFuc2xhdG9yIGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQge1N0aWNreVRhYmxlfSBmcm9tIFwicmVhY3Qtc3RpY2t5LXRhYmxlXCI7XHJcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcbmltcG9ydCBQcyBmcm9tIFwicGVyZmVjdC1zY3JvbGxiYXJcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IFNldHRpbmdzQWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9TZXR0aW5nc0FjdGlvbnNcIjtcclxuaW1wb3J0IFByaWNlVGV4dCBmcm9tIFwiLi4vVXRpbGl0eS9QcmljZVRleHRcIjtcclxuaW1wb3J0IFRyYW5zaXRpb25XcmFwcGVyIGZyb20gXCIuLi9VdGlsaXR5L1RyYW5zaXRpb25XcmFwcGVyXCI7XHJcbmltcG9ydCBBc3NldE5hbWUgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXROYW1lXCI7XHJcbmltcG9ydCBJY29uIGZyb20gXCIuLi9JY29uL0ljb25cIjtcclxuaW1wb3J0IHtTZWxlY3QsIEljb24gYXMgQW50SWNvbiwgVG9vbHRpcH0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5cclxuLyoqXHJcbiAqIEBhcnJheTogb3JkZXJSb3dzXHJcbiAqIEBib29sOiBub09yZGVyc1xyXG4gKiBAYm9vbDogaXNCaWRcclxuICovXHJcbmNsYXNzIE9yZGVyUm93cyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIG9yZGVyUm93czogUHJvcFR5cGVzLmFycmF5LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgbm9PcmRlcnM6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXHJcbiAgICAgICAgaXNCaWQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7b3JkZXJSb3dzLCBub09yZGVycywgaXNCaWQsIGlkfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPFRyYW5zaXRpb25XcmFwcGVyXHJcbiAgICAgICAgICAgICAgICBpZD17aWR9XHJcbiAgICAgICAgICAgICAgICByZWY9e2lzQmlkID8gXCJiaWRUcmFuc2l0aW9uXCIgOiBcImFza1RyYW5zYWN0aW9uXCJ9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0cmFuc2l0aW9uLWNvbnRhaW5lciBjbGlja2FibGVcIlxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50PVwiZGl2XCJcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25OYW1lPVwibmV3cm93XCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge29yZGVyUm93cy5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICAgICAgPyBvcmRlclJvd3NcclxuICAgICAgICAgICAgICAgICAgICA6IG5vT3JkZXJzIHx8IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0aWNreS10YWJsZS1yb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNlbGwgbm8tb3JkZXJzXCIgY29sU3Bhbj1cIjNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0JpZCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5ub19iaWRzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2Uubm9fYXNrc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9UcmFuc2l0aW9uV3JhcHBlcj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBPcmRlckJvb2tSb3dWZXJ0aWNhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobnApIHtcclxuICAgICAgICBpZiAobnAub3JkZXIubWFya2V0X2Jhc2UgIT09IHRoaXMucHJvcHMub3JkZXIubWFya2V0X2Jhc2UpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBucC5vcmRlci5uZSh0aGlzLnByb3BzLm9yZGVyKSB8fFxyXG4gICAgICAgICAgICBucC5pbmRleCAhPT0gdGhpcy5wcm9wcy5pbmRleCB8fFxyXG4gICAgICAgICAgICBucC5jdXJyZW50QWNjb3VudCAhPT0gdGhpcy5wcm9wcy5jdXJyZW50QWNjb3VudCB8fFxyXG4gICAgICAgICAgICBucC5pc1BhbmVsQWN0aXZlICE9PSB0aGlzLnByb3BzLmlzUGFuZWxBY3RpdmUgfHxcclxuICAgICAgICAgICAgbnAuaG9yaXpvbnRhbCAhPT0gdGhpcy5wcm9wcy5ob3Jpem9udGFsXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtvcmRlciwgcXVvdGUsIGJhc2UsIGZpbmFsfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgY29uc3QgaXNCaWQgPSBvcmRlci5pc0JpZCgpO1xyXG4gICAgICAgIGNvbnN0IGlzQ2FsbCA9IG9yZGVyLmlzQ2FsbCgpO1xyXG4gICAgICAgIGxldCBpbnRlZ2VyQ2xhc3MgPSBpc0NhbGxcclxuICAgICAgICAgICAgPyBcIm9yZGVySGlzdG9yeUNhbGxcIlxyXG4gICAgICAgICAgICA6IGlzQmlkXHJcbiAgICAgICAgICAgICAgICA/IFwib3JkZXJIaXN0b3J5QmlkXCJcclxuICAgICAgICAgICAgICAgIDogXCJvcmRlckhpc3RvcnlBc2tcIjtcclxuXHJcbiAgICAgICAgbGV0IHByaWNlID0gKFxyXG4gICAgICAgICAgICA8UHJpY2VUZXh0IHByaWNlPXtvcmRlci5nZXRQcmljZSgpfSBxdW90ZT17cXVvdGV9IGJhc2U9e2Jhc2V9IC8+XHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2xpY2t9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcclxuICAgICAgICAgICAgICAgICAgICBcInN0aWNreS10YWJsZS1yb3cgb3JkZXItcm93XCIsXHJcbiAgICAgICAgICAgICAgICAgICAge1wiZmluYWwtcm93XCI6IGZpbmFsfSxcclxuICAgICAgICAgICAgICAgICAgICB7XCJteS1vcmRlclwiOiBvcmRlci5pc01pbmUodGhpcy5wcm9wcy5jdXJyZW50QWNjb3VudCl9XHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNlbGwgbGVmdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHt1dGlscy5mb3JtYXRfbnVtYmVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcltcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQmlkID8gXCJhbW91bnRGb3JTYWxlXCIgOiBcImFtb3VudFRvUmVjZWl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0oKS5nZXRBbW91bnQoe3JlYWw6IHRydWV9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNlbGxcIj5cclxuICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0JpZCA/IFwiYW1vdW50VG9SZWNlaXZlXCIgOiBcImFtb3VudEZvclNhbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdKCkuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgY2VsbCAke2ludGVnZXJDbGFzc30gcmlnaHRgfT57cHJpY2V9PC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGVsZW1IZWlnaHQgPSBlbGVtID0+IChlbGVtID8gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgOiAwKTtcclxuXHJcbmNsYXNzIE9yZGVyQm9va1Jvd0hvcml6b250YWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5wKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgbnAub3JkZXIubmUodGhpcy5wcm9wcy5vcmRlcikgfHxcclxuICAgICAgICAgICAgbnAucG9zaXRpb24gIT09IHRoaXMucHJvcHMucG9zaXRpb24gfHxcclxuICAgICAgICAgICAgbnAuaW5kZXggIT09IHRoaXMucHJvcHMuaW5kZXggfHxcclxuICAgICAgICAgICAgbnAuY3VycmVudEFjY291bnQgIT09IHRoaXMucHJvcHMuY3VycmVudEFjY291bnQgfHxcclxuICAgICAgICAgICAgbnAucXVvdGVUb3RhbCAhPT0gdGhpcy5wcm9wcy5xdW90ZVRvdGFsXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtvcmRlciwgcXVvdGUsIGJhc2UsIHBvc2l0aW9uLCBxdW90ZVRvdGFsfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgY29uc3QgaXNCaWQgPSBvcmRlci5pc0JpZCgpO1xyXG4gICAgICAgIGNvbnN0IGlzQ2FsbCA9IG9yZGVyLmlzQ2FsbCgpO1xyXG5cclxuICAgICAgICBsZXQgaW50ZWdlckNsYXNzID0gaXNDYWxsXHJcbiAgICAgICAgICAgID8gXCJvcmRlckhpc3RvcnlDYWxsXCJcclxuICAgICAgICAgICAgOiBpc0JpZFxyXG4gICAgICAgICAgICAgICAgPyBcIm9yZGVySGlzdG9yeUJpZFwiXHJcbiAgICAgICAgICAgICAgICA6IFwib3JkZXJIaXN0b3J5QXNrXCI7XHJcblxyXG4gICAgICAgIGxldCBwcmljZSA9IChcclxuICAgICAgICAgICAgPFByaWNlVGV4dCBwcmljZT17b3JkZXIuZ2V0UHJpY2UoKX0gcXVvdGU9e3F1b3RlfSBiYXNlPXtiYXNlfSAvPlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IGFtb3VudCA9IGlzQmlkXHJcbiAgICAgICAgICAgID8gdXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgb3JkZXIuYW1vdW50VG9SZWNlaXZlKCkuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSksXHJcbiAgICAgICAgICAgICAgICAgIHF1b3RlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgOiB1dGlscy5mb3JtYXRfbnVtYmVyKFxyXG4gICAgICAgICAgICAgICAgICBvcmRlci5hbW91bnRGb3JTYWxlKCkuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSksXHJcbiAgICAgICAgICAgICAgICAgIHF1b3RlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgbGV0IHZhbHVlID0gaXNCaWRcclxuICAgICAgICAgICAgPyB1dGlscy5mb3JtYXRfbnVtYmVyKFxyXG4gICAgICAgICAgICAgICAgICBvcmRlci5hbW91bnRGb3JTYWxlKCkuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSksXHJcbiAgICAgICAgICAgICAgICAgIGJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICA6IHV0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgIG9yZGVyLmFtb3VudFRvUmVjZWl2ZSgpLmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pLFxyXG4gICAgICAgICAgICAgICAgICBiYXNlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgY29uc3QgdG90YWxWYWx1ZUJpZHMgPSBxdW90ZVRvdGFsXHJcbiAgICAgICAgICAgID8gb3JkZXIudG90YWxUb1JlY2VpdmUoKVxyXG4gICAgICAgICAgICA6IG9yZGVyLnRvdGFsRm9yU2FsZSgpO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsVmFsdWVBc2tzID0gcXVvdGVUb3RhbFxyXG4gICAgICAgICAgICA/IG9yZGVyLnRvdGFsRm9yU2FsZSgpXHJcbiAgICAgICAgICAgIDogb3JkZXIudG90YWxUb1JlY2VpdmUoKTtcclxuICAgICAgICBjb25zdCB0b3RhbEFzc2V0ID0gcXVvdGVUb3RhbCA/IHF1b3RlIDogYmFzZTtcclxuICAgICAgICBjb25zdCB0b3RhbCA9IGlzQmlkXHJcbiAgICAgICAgICAgID8gdXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgdG90YWxWYWx1ZUJpZHMuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSksXHJcbiAgICAgICAgICAgICAgICAgIHRvdGFsQXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICA6IHV0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgIHRvdGFsVmFsdWVBc2tzLmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pLFxyXG4gICAgICAgICAgICAgICAgICB0b3RhbEFzc2V0LmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDx0clxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNsaWNrfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlci5pc01pbmUodGhpcy5wcm9wcy5jdXJyZW50QWNjb3VudCkgPyBcIm15LW9yZGVyXCIgOiBcIlwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHtwb3NpdGlvbiA9PT0gXCJsZWZ0XCIgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXhzXCI+e3RvdGFsfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3dpZHRoOiBcIjI1JVwifX0gY2xhc3NOYW1lPXtpbnRlZ2VyQ2xhc3N9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7cHJpY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8dGQ+e3Bvc2l0aW9uID09PSBcImxlZnRcIiA/IHZhbHVlIDogYW1vdW50fTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+e3Bvc2l0aW9uID09PSBcImxlZnRcIiA/IGFtb3VudCA6IHZhbHVlfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICB7cG9zaXRpb24gPT09IFwicmlnaHRcIiA/IChcclxuICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUteHNcIj57dG90YWx9PC90ZD5cclxuICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7d2lkdGg6IFwiMjUlXCJ9fSBjbGFzc05hbWU9e2ludGVnZXJDbGFzc30+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtwcmljZX1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBHcm91cGVkT3JkZXJCb29rUm93VmVydGljYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5wKSB7XHJcbiAgICAgICAgaWYgKG5wLm9yZGVyLm1hcmtldF9iYXNlICE9PSB0aGlzLnByb3BzLm9yZGVyLm1hcmtldF9iYXNlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgbnAub3JkZXIubmUodGhpcy5wcm9wcy5vcmRlcikgfHxcclxuICAgICAgICAgICAgbnAuaW5kZXggIT09IHRoaXMucHJvcHMuaW5kZXggfHxcclxuICAgICAgICAgICAgbnAuY3VycmVudEFjY291bnQgIT09IHRoaXMucHJvcHMuY3VycmVudEFjY291bnRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge29yZGVyLCBxdW90ZSwgYmFzZSwgZmluYWx9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCBpc0JpZCA9IG9yZGVyLmlzQmlkKCk7XHJcbiAgICAgICAgbGV0IGludGVnZXJDbGFzcyA9IGlzQmlkID8gXCJvcmRlckhpc3RvcnlCaWRcIiA6IFwib3JkZXJIaXN0b3J5QXNrXCI7XHJcblxyXG4gICAgICAgIGxldCBwcmljZSA9IChcclxuICAgICAgICAgICAgPFByaWNlVGV4dCBwcmljZT17b3JkZXIuZ2V0UHJpY2UoKX0gcXVvdGU9e3F1b3RlfSBiYXNlPXtiYXNlfSAvPlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNsaWNrfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMoXCJzdGlja3ktdGFibGUtcm93IG9yZGVyLXJvd1wiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJmaW5hbC1yb3dcIjogZmluYWxcclxuICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNlbGwgbGVmdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHt1dGlscy5mb3JtYXRfbnVtYmVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcltcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQmlkID8gXCJhbW91bnRGb3JTYWxlXCIgOiBcImFtb3VudFRvUmVjZWl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0oKS5nZXRBbW91bnQoe3JlYWw6IHRydWV9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNlbGxcIj5cclxuICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0JpZCA/IFwiYW1vdW50VG9SZWNlaXZlXCIgOiBcImFtb3VudEZvclNhbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdKCkuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgY2VsbCAke2ludGVnZXJDbGFzc30gcmlnaHRgfT57cHJpY2V9PC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEdyb3VwZWRPcmRlckJvb2tSb3dIb3Jpem9udGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShucCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIG5wLm9yZGVyLm5lKHRoaXMucHJvcHMub3JkZXIpIHx8XHJcbiAgICAgICAgICAgIG5wLnBvc2l0aW9uICE9PSB0aGlzLnByb3BzLnBvc2l0aW9uIHx8XHJcbiAgICAgICAgICAgIG5wLmluZGV4ICE9PSB0aGlzLnByb3BzLmluZGV4IHx8XHJcbiAgICAgICAgICAgIG5wLmN1cnJlbnRBY2NvdW50ICE9PSB0aGlzLnByb3BzLmN1cnJlbnRBY2NvdW50IHx8XHJcbiAgICAgICAgICAgIG5wLnF1b3RlVG90YWwgIT09IHRoaXMucHJvcHMucXVvdGVUb3RhbFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7b3JkZXIsIHF1b3RlLCBiYXNlLCBwb3NpdGlvbiwgcXVvdGVUb3RhbH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGNvbnN0IGlzQmlkID0gb3JkZXIuaXNCaWQoKTtcclxuXHJcbiAgICAgICAgbGV0IGludGVnZXJDbGFzcyA9IGlzQmlkID8gXCJvcmRlckhpc3RvcnlCaWRcIiA6IFwib3JkZXJIaXN0b3J5QXNrXCI7XHJcblxyXG4gICAgICAgIGxldCBwcmljZSA9IChcclxuICAgICAgICAgICAgPFByaWNlVGV4dCBwcmljZT17b3JkZXIuZ2V0UHJpY2UoKX0gcXVvdGU9e3F1b3RlfSBiYXNlPXtiYXNlfSAvPlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IGFtb3VudCA9IGlzQmlkXHJcbiAgICAgICAgICAgID8gdXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgb3JkZXIuYW1vdW50VG9SZWNlaXZlKCkuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSksXHJcbiAgICAgICAgICAgICAgICAgIHF1b3RlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgOiB1dGlscy5mb3JtYXRfbnVtYmVyKFxyXG4gICAgICAgICAgICAgICAgICBvcmRlci5hbW91bnRGb3JTYWxlKCkuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSksXHJcbiAgICAgICAgICAgICAgICAgIHF1b3RlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgbGV0IHZhbHVlID0gaXNCaWRcclxuICAgICAgICAgICAgPyB1dGlscy5mb3JtYXRfbnVtYmVyKFxyXG4gICAgICAgICAgICAgICAgICBvcmRlci5hbW91bnRGb3JTYWxlKCkuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSksXHJcbiAgICAgICAgICAgICAgICAgIGJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICA6IHV0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgIG9yZGVyLmFtb3VudFRvUmVjZWl2ZSgpLmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pLFxyXG4gICAgICAgICAgICAgICAgICBiYXNlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgY29uc3QgdG90YWxWYWx1ZUJpZHMgPSBxdW90ZVRvdGFsXHJcbiAgICAgICAgICAgID8gb3JkZXIudG90YWxUb1JlY2VpdmUoKVxyXG4gICAgICAgICAgICA6IG9yZGVyLnRvdGFsRm9yU2FsZSgpO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsVmFsdWVBc2tzID0gcXVvdGVUb3RhbFxyXG4gICAgICAgICAgICA/IG9yZGVyLnRvdGFsRm9yU2FsZSgpXHJcbiAgICAgICAgICAgIDogb3JkZXIudG90YWxUb1JlY2VpdmUoKTtcclxuICAgICAgICBjb25zdCB0b3RhbEFzc2V0ID0gcXVvdGVUb3RhbCA/IHF1b3RlIDogYmFzZTtcclxuICAgICAgICBjb25zdCB0b3RhbCA9IGlzQmlkXHJcbiAgICAgICAgICAgID8gdXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgdG90YWxWYWx1ZUJpZHMuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSksXHJcbiAgICAgICAgICAgICAgICAgIHRvdGFsQXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICA6IHV0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgIHRvdGFsVmFsdWVBc2tzLmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pLFxyXG4gICAgICAgICAgICAgICAgICB0b3RhbEFzc2V0LmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDx0ciBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2xpY2t9PlxyXG4gICAgICAgICAgICAgICAge3Bvc2l0aW9uID09PSBcImxlZnRcIiA/IChcclxuICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUteHNcIj57dG90YWx9PC90ZD5cclxuICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7d2lkdGg6IFwiMjUlXCJ9fSBjbGFzc05hbWU9e2ludGVnZXJDbGFzc30+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtwcmljZX1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIDx0ZD57cG9zaXRpb24gPT09IFwibGVmdFwiID8gdmFsdWUgOiBhbW91bnR9PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD57cG9zaXRpb24gPT09IFwibGVmdFwiID8gYW1vdW50IDogdmFsdWV9PC90ZD5cclxuICAgICAgICAgICAgICAgIHtwb3NpdGlvbiA9PT0gXCJyaWdodFwiID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS14c1wiPnt0b3RhbH08L3RkPlxyXG4gICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t3aWR0aDogXCIyNSVcIn19IGNsYXNzTmFtZT17aW50ZWdlckNsYXNzfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3ByaWNlfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEdyb3VwT3JkZXJMaW1pdFNlbGVjdG9yIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgZ3JvdXBMaW1pdDogXCJcIlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhwcm9wcykge1xyXG4gICAgICAgIHJldHVybiB7Z3JvdXBMaW1pdDogcHJvcHMuY3VycmVudEdyb3VwT3JkZXJMaW1pdH07XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IG5vR3JvdXBzQXZhaWxhYmxlID0gdGhpcy5wcm9wcy50cmFja2VkR3JvdXBzQ29uZmlnLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICBjb25zdCB0cmFja2VkR3JvdXBzT3B0aW9uc0xpc3QgPSB0aGlzLnByb3BzLnRyYWNrZWRHcm91cHNDb25maWcubWFwKFxyXG4gICAgICAgICAgICBrZXkgPT5cclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZ2xvYmFsU2V0dGluZ3NTZWxlY3RvciA/IChcclxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17a2V5fSBrZXk9e2tleX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtgJHtrZXkgLyAxMDB9JWB9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPXtrZXl9IGtleT17a2V5fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2Ake2tleSAvIDEwMH0lYH1cclxuICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5nbG9iYWxTZXR0aW5nc1NlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJTZWxlY3Qgb3B0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiBcIjEwMCVcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMuY3VycmVudEdyb3VwT3JkZXJMaW1pdH1cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17bm9Hcm91cHNBdmFpbGFibGV9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMucHJvcHMuaGFuZGxlR3JvdXBPcmRlckxpbWl0Q2hhbmdlLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAge25vR3JvdXBzQXZhaWxhYmxlID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ0b29sdGlwLm5vX2dyb3Vwc19hdmFpbGFibGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezB9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwic2V0dGluZ3MuZGlzYWJsZWRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICB7dHJhY2tlZEdyb3Vwc09wdGlvbnNMaXN0fVxyXG4gICAgICAgICAgICAgICAgPC9TZWxlY3Q+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vR3JvdXBzQXZhaWxhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRyYW5zbGF0b3IudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLm5vX2dyb3Vwc19hdmFpbGFibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5ncm91cExpbWl0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5oYW5kbGVHcm91cE9yZGVyTGltaXRDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNldHRpbmdzLXNlbGVjdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vR3JvdXBzQXZhaWxhYmxlID8ge2N1cnNvcjogXCJub3QtYWxsb3dlZFwifSA6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4Y2hhbmdlLmdyb3VwX29yZGVyX2xpbWl0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cIm9wdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1cIjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dHJhY2tlZEdyb3Vwc09wdGlvbnNMaXN0fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgT3JkZXJCb29rIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBmbGlwOiBwcm9wcy5mbGlwT3JkZXJCb29rLFxyXG4gICAgICAgICAgICBzaG93QWxsQmlkczogZmFsc2UsXHJcbiAgICAgICAgICAgIHNob3dBbGxBc2tzOiBmYWxzZSxcclxuICAgICAgICAgICAgcm93Q291bnQ6IDIwLFxyXG4gICAgICAgICAgICBhdXRvU2Nyb2xsOiBwcm9wcy5hdXRvU2Nyb2xsLFxyXG4gICAgICAgICAgICBxdW90ZVRvdGFsQmlkczogZmFsc2UsXHJcbiAgICAgICAgICAgIHF1b3RlVG90YWxBc2tzOiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy52ZXJ0aWNhbFN0aWNreVRhYmxlID0gUmVhY3QuY3JlYXRlUmVmKCk7XHJcbiAgICAgICAgdGhpcy5jZW50ZXJUZXh0ID0gUmVhY3QuY3JlYXRlUmVmKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmhvcml6b250YWwgJiZcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5oaWRlU2Nyb2xsYmFycyAmJlxyXG4gICAgICAgICAgICBuZXh0U3RhdGUuc2hvd0FsbEFza3MgIT0gdGhpcy5zdGF0ZS5zaG93QWxsQXNrc1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBsZXQgYXNrc0NvbnRhaW5lciA9IHRoaXMucmVmcy5ob3JfYXNrcztcclxuICAgICAgICAgICAgaWYgKCFuZXh0U3RhdGUuc2hvd0FsbEFza3MpIHtcclxuICAgICAgICAgICAgICAgIFBzLmRlc3Ryb3koYXNrc0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBQcy5pbml0aWFsaXplKGFza3NDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wc1VwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVmcy5hc2tUcmFuc2l0aW9uLnJlc2V0QW5pbWF0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlZnMuaG9yX2Fza3MpIHRoaXMucmVmcy5ob3JfYXNrcy5zY3JvbGxUb3AgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmhvcml6b250YWwgJiZcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5oaWRlU2Nyb2xsYmFycyAmJlxyXG4gICAgICAgICAgICBuZXh0U3RhdGUuc2hvd0FsbEJpZHMgIT0gdGhpcy5zdGF0ZS5zaG93QWxsQmlkc1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBsZXQgYmlkc0NvbnRhaW5lciA9IHRoaXMucmVmcy5ob3JfYmlkcztcclxuICAgICAgICAgICAgaWYgKCFuZXh0U3RhdGUuc2hvd0FsbEJpZHMpIHtcclxuICAgICAgICAgICAgICAgIFBzLmRlc3Ryb3koYmlkc0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBQcy5pbml0aWFsaXplKGJpZHNDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wc1VwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVmcy5iaWRUcmFuc2l0aW9uLnJlc2V0QW5pbWF0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlZnMuaG9yX2JpZHMpIHRoaXMucmVmcy5ob3JfYmlkcy5zY3JvbGxUb3AgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaWYgKCFuZXh0UHJvcHMubWFya2V0UmVhZHkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUsIHNuYXBzaG90KSB7XHJcbiAgICAgICAgY29uc3QgbmV4dFByb3BzID0gdGhpcy5wcm9wcztcclxuICAgICAgICAvLyBDaGFuZ2Ugb2YgbWFya2V0IG9yIGRpcmVjdGlvblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgbmV4dFByb3BzLmJhc2UuZ2V0KFwiaWRcIikgIT09IHByZXZQcm9wcy5iYXNlLmdldChcImlkXCIpIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5xdW90ZS5nZXQoXCJpZFwiKSAhPT0gcHJldlByb3BzLnF1b3RlLmdldChcImlkXCIpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlZnMuYXNrVHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZzLmFza1RyYW5zaXRpb24ucmVzZXRBbmltYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlZnMuaG9yX2Fza3MpIHRoaXMucmVmcy5ob3JfYXNrcy5zY3JvbGxUb3AgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVmcy5ob3JfYmlkcykgdGhpcy5yZWZzLmhvcl9iaWRzLnNjcm9sbFRvcCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlZnMuYmlkVHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZzLmJpZFRyYW5zaXRpb24ucmVzZXRBbmltYXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucmVmcy52ZXJ0X2JpZHMpIHRoaXMucmVmcy52ZXJ0X2JpZHMuc2Nyb2xsVG9wID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5wcm9wcy5ob3Jpem9udGFsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHthdXRvU2Nyb2xsOiB0aGlzLnN0YXRlLmF1dG9TY3JvbGx9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGJpZHNDb250YWluZXIgPSB0aGlzLnJlZnMuaG9yX2JpZHM7XHJcbiAgICAgICAgbGV0IGFza3NDb250YWluZXIgPSB0aGlzLnJlZnMuaG9yX2Fza3M7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5ob3Jpem9udGFsICYmXHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5oaWRlU2Nyb2xsYmFycyAhPT0gdGhpcy5wcm9wcy5oaWRlU2Nyb2xsYmFycyAmJlxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuaGlkZVNjcm9sbGJhcnNcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgUHMuZGVzdHJveShiaWRzQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgUHMuZGVzdHJveShhc2tzQ29udGFpbmVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5ob3Jpem9udGFsICYmXHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5oaWRlU2Nyb2xsYmFycyAhPT0gdGhpcy5wcm9wcy5oaWRlU2Nyb2xsYmFycyAmJlxyXG4gICAgICAgICAgICAhbmV4dFByb3BzLmhpZGVTY3JvbGxiYXJzXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIFBzLmluaXRpYWxpemUoYmlkc0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFBzLmluaXRpYWxpemUoYXNrc0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcy5hc2tUcmFuc2l0aW9uLnJlc2V0QW5pbWF0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcy5iaWRUcmFuc2l0aW9uLnJlc2V0QW5pbWF0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmIChhc2tzQ29udGFpbmVyKSBhc2tzQ29udGFpbmVyLnNjcm9sbFRvcCA9IDA7XHJcbiAgICAgICAgICAgIGlmIChiaWRzQ29udGFpbmVyKSBiaWRzQ29udGFpbmVyLnNjcm9sbFRvcCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMucHNVcGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2VudGVyVmVydGljYWxTY3JvbGxCYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeVN0aWNreVRhYmxlID0gcXVlcnkgPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZlcnRpY2FsU3RpY2t5VGFibGUuY3VycmVudC50YWJsZS5xdWVyeVNlbGVjdG9yKHF1ZXJ5KTtcclxuICAgIH07XHJcblxyXG4gICAgdmVydGljYWxTY3JvbGxCYXIgPSAoKSA9PiB0aGlzLnF1ZXJ5U3RpY2t5VGFibGUoXCIjeS1zY3JvbGxiYXJcIik7XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLmhvcml6b250YWwpIHtcclxuICAgICAgICAgICAgUHMuaW5pdGlhbGl6ZSh0aGlzLnZlcnRpY2FsU2Nyb2xsQmFyKCkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5wcm9wcy5oaWRlU2Nyb2xsYmFycykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGJpZHNDb250YWluZXIgPSB0aGlzLnJlZnMuaG9yX2JpZHM7XHJcbiAgICAgICAgICAgICAgICBQcy5pbml0aWFsaXplKGJpZHNDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGFza3NDb250YWluZXIgPSB0aGlzLnJlZnMuaG9yX2Fza3M7XHJcbiAgICAgICAgICAgICAgICBQcy5pbml0aWFsaXplKGFza3NDb250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNlbnRlclZlcnRpY2FsU2Nyb2xsQmFyKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5ob3Jpem9udGFsICYmIHRoaXMuc3RhdGUuYXV0b1Njcm9sbCkge1xyXG4gICAgICAgICAgICAvLyBDZW50ZXIgdmVydGljYWwgc2Nyb2xsIGJhclxyXG4gICAgICAgICAgICBjb25zdCBzY3JvbGxhYmxlQ29udGFpbmVyID0gdGhpcy5xdWVyeVN0aWNreVRhYmxlKFxyXG4gICAgICAgICAgICAgICAgXCIjc3RpY2t5LXRhYmxlLXktd3JhcHBlclwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IHRoaXMucXVlcnlTdGlja3lUYWJsZShcIiNzdGlja3ktdGFibGUtaGVhZGVyXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBjZW50ZXJUZXh0Q29udGFpbmVyID0gdGhpcy5jZW50ZXJUZXh0LmN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHNpbmdsZVJvd0hlaWdodCA9IGVsZW1IZWlnaHQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U3RpY2t5VGFibGUoXCIub3JkZXItcm93XCIpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBsZXQgcm93cyA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRHcm91cE9yZGVyTGltaXQgIT09IDBcclxuICAgICAgICAgICAgICAgICAgICA/ICF0aGlzLnByb3BzLm9yZGVyQm9va1JldmVyc2VkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5wcm9wcy5ncm91cGVkQXNrc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMucHJvcHMuZ3JvdXBlZEJpZHNcclxuICAgICAgICAgICAgICAgICAgICA6ICF0aGlzLnByb3BzLm9yZGVyQm9va1JldmVyc2VkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5wcm9wcy5jb21iaW5lZEFza3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnByb3BzLmNvbWJpbmVkQmlkcztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJvd3NIZWlnaHQgPSByb3dzLmxlbmd0aCAqIHNpbmdsZVJvd0hlaWdodDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbGFibGVDb250YWluZXJIZWlnaHQgPVxyXG4gICAgICAgICAgICAgICAgZWxlbUhlaWdodChzY3JvbGxhYmxlQ29udGFpbmVyKSAtIGVsZW1IZWlnaHQoaGVhZGVyKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbFRvID1cclxuICAgICAgICAgICAgICAgIHJvd3NIZWlnaHQgK1xyXG4gICAgICAgICAgICAgICAgZWxlbUhlaWdodChjZW50ZXJUZXh0Q29udGFpbmVyKSAvIDIgLVxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsYWJsZUNvbnRhaW5lckhlaWdodCAvIDI7XHJcblxyXG4gICAgICAgICAgICBzY3JvbGxhYmxlQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwc1VwZGF0ZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMucHJvcHMuaG9yaXpvbnRhbCkge1xyXG4gICAgICAgICAgICBQcy51cGRhdGUodGhpcy52ZXJ0aWNhbFNjcm9sbEJhcigpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgYmlkc0NvbnRhaW5lciA9IHRoaXMucmVmcy5ob3JfYmlkcztcclxuICAgICAgICAgICAgUHMudXBkYXRlKGJpZHNDb250YWluZXIpO1xyXG4gICAgICAgICAgICBsZXQgYXNrc0NvbnRhaW5lciA9IHRoaXMucmVmcy5ob3JfYXNrcztcclxuICAgICAgICAgICAgUHMudXBkYXRlKGFza3NDb250YWluZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKioqXHJcbiAgICAgKiBTZXRzIHN0YXR1cyB0byBzaG93IGZ1bGwgb3JkZXIgYm9vayBieSBhc2tzIG9yIGJpZHNcclxuICAgICAqIEBzdHJpbmc6IHR5cGVcclxuICAgICAqL1xyXG4gICAgX29uU2V0U2hvd0FsbCh0eXBlKSB7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09IFwiYXNrc1wiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgc2hvd0FsbEFza3M6ICF0aGlzLnN0YXRlLnNob3dBbGxBc2tzXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2hvd0FsbEFza3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVmcy5ob3JfYXNrcy5zY3JvbGxUb3AgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBzaG93QWxsQmlkczogIXRoaXMuc3RhdGUuc2hvd0FsbEJpZHNcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5zaG93QWxsQmlkcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZzLmhvcl9iaWRzLnNjcm9sbFRvcCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqKlxyXG4gICAgICogVG9nZ2xlIHNwcmVhZCB2YWx1ZSB0byB2aWV3IHJlYWwgdmFsdWUgb3IgcGVyY2VudGFnZSBpbiBzcHJlYWRcclxuICAgICAqIFZlcnRpY2FsIG9yZGVyIGJvb2sgb25seVxyXG4gICAgICovXHJcbiAgICB0b2dnbGVTcHJlYWRWYWx1ZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgZGlzcGxheVNwcmVhZEFzUGVyY2VudGFnZTogIXRoaXMuc3RhdGUuZGlzcGxheVNwcmVhZEFzUGVyY2VudGFnZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKioqXHJcbiAgICAgKiBUb2dnbGUgYXV0byBzY3JvbGwgdG8gbG9jay91bmxvY2sgYXV0byBjZW50ZXJpbmdcclxuICAgICAqIFZlcnRpY2FsIG9yZGVyIGJvb2sgb25seVxyXG4gICAgICovXHJcblxyXG4gICAgdG9nZ2xlQXV0b1Njcm9sbCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHthdXRvU2Nyb2xsOiAhdGhpcy5zdGF0ZS5hdXRvU2Nyb2xsfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRvZ2dsZVRvdGFsQXNzZXQoaXNCaWQpIHtcclxuICAgICAgICBjb25zdCBxdW90ZVRvdGFsID0gaXNCaWQgPyBcInF1b3RlVG90YWxCaWRzXCIgOiBcInF1b3RlVG90YWxBc2tzXCI7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7W3F1b3RlVG90YWxdOiAhdGhpcy5zdGF0ZVtxdW90ZVRvdGFsXX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICBjb21iaW5lZEJpZHMsXHJcbiAgICAgICAgICAgIGNvbWJpbmVkQXNrcyxcclxuICAgICAgICAgICAgaGlnaGVzdEJpZCxcclxuICAgICAgICAgICAgbG93ZXN0QXNrLFxyXG4gICAgICAgICAgICBxdW90ZSxcclxuICAgICAgICAgICAgYmFzZSxcclxuICAgICAgICAgICAgdG90YWxBc2tzLFxyXG4gICAgICAgICAgICB0b3RhbEJpZHMsXHJcbiAgICAgICAgICAgIHF1b3RlU3ltYm9sLFxyXG4gICAgICAgICAgICBiYXNlU3ltYm9sLFxyXG4gICAgICAgICAgICBob3Jpem9udGFsLFxyXG4gICAgICAgICAgICB0cmFja2VkR3JvdXBzQ29uZmlnLFxyXG4gICAgICAgICAgICBjdXJyZW50R3JvdXBPcmRlckxpbWl0LFxyXG4gICAgICAgICAgICBoYW5kbGVHcm91cE9yZGVyTGltaXRDaGFuZ2UsXHJcbiAgICAgICAgICAgIG9yZGVyQm9va1JldmVyc2VkLFxyXG4gICAgICAgICAgICBncm91cGVkQmlkcyxcclxuICAgICAgICAgICAgZ3JvdXBlZEFza3MsXHJcbiAgICAgICAgICAgIGZsaXBPcmRlckJvb2tcclxuICAgICAgICB9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICBzaG93QWxsQXNrcyxcclxuICAgICAgICAgICAgc2hvd0FsbEJpZHMsXHJcbiAgICAgICAgICAgIHJvd0NvdW50LFxyXG4gICAgICAgICAgICBkaXNwbGF5U3ByZWFkQXNQZXJjZW50YWdlXHJcbiAgICAgICAgfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIGNvbnN0IG5vT3JkZXJzID0gIWxvd2VzdEFzay5zZWxsX3ByaWNlICYmICFoaWdoZXN0QmlkLnNlbGxfcHJpY2U7XHJcbiAgICAgICAgY29uc3QgaGFzQXNrQW5kQmlkcyA9ICEhKGxvd2VzdEFzay5zZWxsX3ByaWNlICYmIGhpZ2hlc3RCaWQuc2VsbF9wcmljZSk7XHJcbiAgICAgICAgY29uc3Qgc3ByZWFkID1cclxuICAgICAgICAgICAgaGFzQXNrQW5kQmlkcyAmJlxyXG4gICAgICAgICAgICAoZGlzcGxheVNwcmVhZEFzUGVyY2VudGFnZSA/IChcclxuICAgICAgICAgICAgICAgIGAkeyhcclxuICAgICAgICAgICAgICAgICAgICAxMDAgKlxyXG4gICAgICAgICAgICAgICAgICAgIChsb3dlc3RBc2suX3JlYWxfcHJpY2UgLyBoaWdoZXN0QmlkLl9yZWFsX3ByaWNlIC0gMSlcclxuICAgICAgICAgICAgICAgICkudG9GaXhlZCgyKX0lYFxyXG4gICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgPFByaWNlVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlPXtsb3dlc3RBc2suX3JlYWxfcHJpY2UgLSBoaWdoZXN0QmlkLl9yZWFsX3ByaWNlfVxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2U9e2Jhc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGU9e3F1b3RlfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgbGV0IGJpZFJvd3MgPSBudWxsLFxyXG4gICAgICAgICAgICBhc2tSb3dzID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyogU29ydCAqL1xyXG4gICAgICAgIGxldCB0ZW1wQXNrcyA9XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuY3VycmVudEdyb3VwT3JkZXJMaW1pdCAhPT0gMFxyXG4gICAgICAgICAgICAgICAgPyBncm91cGVkQXNrc1xyXG4gICAgICAgICAgICAgICAgOiBjb21iaW5lZEFza3M7IC8vIFJFRFxyXG4gICAgICAgIGxldCB0ZW1wQmlkcyA9XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuY3VycmVudEdyb3VwT3JkZXJMaW1pdCAhPT0gMFxyXG4gICAgICAgICAgICAgICAgPyBncm91cGVkQmlkc1xyXG4gICAgICAgICAgICAgICAgOiBjb21iaW5lZEJpZHM7IC8vIEdSRUVOXHJcblxyXG4gICAgICAgIGlmICghaG9yaXpvbnRhbCAmJiAhb3JkZXJCb29rUmV2ZXJzZWQpIHtcclxuICAgICAgICAgICAgdGVtcEJpZHMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGIuZ2V0UHJpY2UoKSAtIGEuZ2V0UHJpY2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRlbXBBc2tzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiLmdldFByaWNlKCkgLSBhLmdldFByaWNlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIWhvcml6b250YWwgJiYgb3JkZXJCb29rUmV2ZXJzZWQpIHtcclxuICAgICAgICAgICAgdGVtcEJpZHMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEuZ2V0UHJpY2UoKSAtIGIuZ2V0UHJpY2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRlbXBBc2tzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLmdldFByaWNlKCkgLSBiLmdldFByaWNlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGJhc2UgJiYgcXVvdGUpIHtcclxuICAgICAgICAgICAgLy8gbGltaXQgb3JkZXJzIG9yIGdyb3VwZWQgb3JkZXJzXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmN1cnJlbnRHcm91cE9yZGVyTGltaXQgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGJpZFJvd3MgPSB0ZW1wQmlkcy5tYXAoKG9yZGVyLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBob3Jpem9udGFsID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8R3JvdXBlZE9yZGVyQm9va1Jvd0hvcml6b250YWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXtpbmRleH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIuZ2V0UHJpY2UoKSArIChvcmRlci5pc0JpZCgpID8gXCJfYmlkXCIgOiBcIlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI9e29yZGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNsaWNrLmJpbmQodGhpcywgb3JkZXIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17YmFzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlPXtxdW90ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uPXshZmxpcE9yZGVyQm9vayA/IFwibGVmdFwiIDogXCJyaWdodFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEFjY291bnQ9e3RoaXMucHJvcHMuY3VycmVudEFjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZVRvdGFsPXt0aGlzLnN0YXRlLnF1b3RlVG90YWxCaWRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxHcm91cGVkT3JkZXJCb29rUm93VmVydGljYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXtpbmRleH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIuZ2V0UHJpY2UoKSArIChvcmRlci5pc0JpZCgpID8gXCJfYmlkXCIgOiBcIlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI9e29yZGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNsaWNrLmJpbmQodGhpcywgb3JkZXIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17YmFzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlPXtxdW90ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsPXtpbmRleCA9PT0gMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBY2NvdW50PXt0aGlzLnByb3BzLmN1cnJlbnRBY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBhc2tSb3dzID0gdGVtcEFza3MubWFwKChvcmRlciwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaG9yaXpvbnRhbCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPEdyb3VwZWRPcmRlckJvb2tSb3dIb3Jpem9udGFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleD17aW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyLmdldFByaWNlKCkgKyAob3JkZXIuaXNCaWQoKSA/IFwiX2JpZFwiIDogXCJcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyPXtvcmRlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25DbGljay5iaW5kKHRoaXMsIG9yZGVyKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U9e2Jhc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZT17cXVvdGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPXtvcmRlci50eXBlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb249eyFmbGlwT3JkZXJCb29rID8gXCJyaWdodFwiIDogXCJsZWZ0XCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWNjb3VudD17dGhpcy5wcm9wcy5jdXJyZW50QWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlVG90YWw9e3RoaXMuc3RhdGUucXVvdGVUb3RhbEFza3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPEdyb3VwZWRPcmRlckJvb2tSb3dWZXJ0aWNhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg9e2luZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlci5nZXRQcmljZSgpICsgKG9yZGVyLmlzQmlkKCkgPyBcIl9iaWRcIiA6IFwiXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcj17b3JkZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2xpY2suYmluZCh0aGlzLCBvcmRlcil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlPXtiYXNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU9e3F1b3RlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT17b3JkZXIudHlwZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsPXswID09PSBpbmRleH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBY2NvdW50PXt0aGlzLnByb3BzLmN1cnJlbnRBY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJpZFJvd3MgPSB0ZW1wQmlkcy5tYXAoKG9yZGVyLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBob3Jpem9udGFsID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8T3JkZXJCb29rUm93SG9yaXpvbnRhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg9e2luZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlci5nZXRQcmljZSgpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAob3JkZXIuaXNDYWxsKCkgPyBcIl9jYWxsXCIgOiBcIlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI9e29yZGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNsaWNrLmJpbmQodGhpcywgb3JkZXIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17YmFzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlPXtxdW90ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uPXshZmxpcE9yZGVyQm9vayA/IFwibGVmdFwiIDogXCJyaWdodFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEFjY291bnQ9e3RoaXMucHJvcHMuY3VycmVudEFjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZVRvdGFsPXt0aGlzLnN0YXRlLnF1b3RlVG90YWxCaWRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxPcmRlckJvb2tSb3dWZXJ0aWNhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg9e2luZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlci5nZXRQcmljZSgpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAob3JkZXIuaXNDYWxsKCkgPyBcIl9jYWxsXCIgOiBcIlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI9e29yZGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNsaWNrLmJpbmQodGhpcywgb3JkZXIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17YmFzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlPXtxdW90ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsPXtpbmRleCA9PT0gMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBY2NvdW50PXt0aGlzLnByb3BzLmN1cnJlbnRBY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBhc2tSb3dzID0gdGVtcEFza3MubWFwKChvcmRlciwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaG9yaXpvbnRhbCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPE9yZGVyQm9va1Jvd0hvcml6b250YWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXtpbmRleH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIuZ2V0UHJpY2UoKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9yZGVyLmlzQ2FsbCgpID8gXCJfY2FsbFwiIDogXCJcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyPXtvcmRlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25DbGljay5iaW5kKHRoaXMsIG9yZGVyKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U9e2Jhc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZT17cXVvdGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPXtvcmRlci50eXBlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb249eyFmbGlwT3JkZXJCb29rID8gXCJyaWdodFwiIDogXCJsZWZ0XCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWNjb3VudD17dGhpcy5wcm9wcy5jdXJyZW50QWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlVG90YWw9e3RoaXMuc3RhdGUucXVvdGVUb3RhbEFza3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPE9yZGVyQm9va1Jvd1ZlcnRpY2FsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleD17aW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyLmdldFByaWNlKCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvcmRlci5pc0NhbGwoKSA/IFwiX2NhbGxcIiA6IFwiXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcj17b3JkZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2xpY2suYmluZCh0aGlzLCBvcmRlcil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlPXtiYXNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU9e3F1b3RlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT17b3JkZXIudHlwZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsPXswID09PSBpbmRleH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBY2NvdW50PXt0aGlzLnByb3BzLmN1cnJlbnRBY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaG9yaXpvbnRhbCkge1xyXG4gICAgICAgICAgICBsZXQgdG90YWxCaWRzTGVuZ3RoID0gYmlkUm93cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGxldCB0b3RhbEFza3NMZW5ndGggPSBhc2tSb3dzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIGlmICghc2hvd0FsbEJpZHMpIHtcclxuICAgICAgICAgICAgICAgIGJpZFJvd3Muc3BsaWNlKHJvd0NvdW50LCBiaWRSb3dzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghc2hvd0FsbEFza3MpIHtcclxuICAgICAgICAgICAgICAgIGFza1Jvd3Muc3BsaWNlKHJvd0NvdW50LCBhc2tSb3dzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBsZWZ0SGVhZGVyID0gKFxyXG4gICAgICAgICAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9XCJ0b3AtaGVhZGVyXCIgY2xhc3NOYW1lPVwidG9wLWhlYWRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUteHNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoZWFkZXItc3ViLXRpdGxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiZXhjaGFuZ2UudG90YWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdGhpcy50b2dnbGVUb3RhbEFzc2V0KHRydWUpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhlYWRlci1zdWItdGl0bGUgdW5kZXJsaW5lLXRpdGxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhUGxhY2U9XCJ0b3BcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnN0YXRlLnF1b3RlVG90YWxCaWRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBiYXNlU3ltYm9sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBxdW90ZVN5bWJvbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vVGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaGVhZGVyLXN1Yi10aXRsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWUgZGF0YVBsYWNlPVwidG9wXCIgbmFtZT17YmFzZVN5bWJvbH0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaGVhZGVyLXN1Yi10aXRsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWUgZGF0YVBsYWNlPVwidG9wXCIgbmFtZT17cXVvdGVTeW1ib2x9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZmxpcE9yZGVyQm9va1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImFzay10b3RhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiYmlkLXRvdGFsXCIpICsgXCIgaGVhZGVyLXN1Yi10aXRsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJleGNoYW5nZS5wcmljZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJpZ2h0SGVhZGVyID0gKFxyXG4gICAgICAgICAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9XCJ0b3AtaGVhZGVyXCIgY2xhc3NOYW1lPVwidG9wLWhlYWRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFmbGlwT3JkZXJCb29rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiYXNrLXRvdGFsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiaWQtdG90YWxcIikgKyBcIiBoZWFkZXItc3ViLXRpdGxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4Y2hhbmdlLnByaWNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImhlYWRlci1zdWItdGl0bGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lIGRhdGFQbGFjZT1cInRvcFwiIG5hbWU9e3F1b3RlU3ltYm9sfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJoZWFkZXItc3ViLXRpdGxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBkYXRhUGxhY2U9XCJ0b3BcIiBuYW1lPXtiYXNlU3ltYm9sfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUteHNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoZWFkZXItc3ViLXRpdGxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiZXhjaGFuZ2UudG90YWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdGhpcy50b2dnbGVUb3RhbEFzc2V0KCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGVhZGVyLXN1Yi10aXRsZSB1bmRlcmxpbmUtdGl0bGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFQbGFjZT1cInRvcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuc3RhdGUucXVvdGVUb3RhbEFza3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGJhc2VTeW1ib2xcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHF1b3RlU3ltYm9sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9UaXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgbGV0IHdyYXBwZXJDbGFzcyA9IHRoaXMucHJvcHMud3JhcHBlckNsYXNzO1xyXG4gICAgICAgICAgICBsZXQgaW5uZXJDbGFzcyA9IHRoaXMucHJvcHMuaW5uZXJDbGFzcztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgcmVmPVwib3JkZXJfYm9va1wiXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5SaWdodDogdGhpcy5wcm9wcy5zbWFsbFNjcmVlbiA/IDEwIDogMH19XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMod3JhcHBlckNsYXNzKX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJDbGFzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsaXBPcmRlckJvb2sgPyBcIm9yZGVyLTFcIiA6IFwib3JkZXItMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImV4Y2hhbmdlLWNvbnRlbnQtaGVhZGVyIGFza1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9kYXRhLWludHJvPXt0cmFuc2xhdG9yLnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBcIndhbGt0aHJvdWdoLnNlbGxfb3JkZXJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UuYXNrc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZsaXBPcmRlckJvb2sgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5wcm9wcy5oaWRlRnVuY3Rpb25CdXR0b25zID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uRmxpcE9yZGVyQm9vay5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogXCIxcmVtXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IFwiNHB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogXCItMnB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsaXAtYXJyb3dcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmIzg2NDY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmbGlwT3JkZXJCb29rICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMucHJvcHMuaGlkZUZ1bmN0aW9uQnV0dG9ucyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbG9hdC1yaWdodCBoZWFkZXItc3ViLXRpdGxlIGdyb3VwZWRfb3JkZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0cmFja2VkR3JvdXBzQ29uZmlnID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxHcm91cE9yZGVyTGltaXRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja2VkR3JvdXBzQ29uZmlnPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrZWRHcm91cHNDb25maWdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVHcm91cE9yZGVyTGltaXRDaGFuZ2U9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlR3JvdXBPcmRlckxpbWl0Q2hhbmdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEdyb3VwT3JkZXJMaW1pdD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50R3JvdXBPcmRlckxpbWl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLm9uVG9nZ2xlUG9zaXRpb24gJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5wcm9wcy5oaWRlRnVuY3Rpb25CdXR0b25zID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vblRvZ2dsZVBvc2l0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjFyZW1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsaXAtYXJyb3dcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmIzg2NDU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmxpcE9yZGVyQm9vayAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnByb3BzLmhpZGVGdW5jdGlvbkJ1dHRvbnMgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvcmRlci1ib29rLWJ1dHRvbi12XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMubW92ZU9yZGVyQm9va31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwidGh1bWItdGFja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4IGljb24tZmlsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2xpbmVIZWlnaHQ6IFwiMTZweFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGVhZGVyLXN1Yi10aXRsZSBmbG9hdC1yaWdodFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5tYXJrZXRfZGVwdGhcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj46IDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3V0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEFza3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoPEFzc2V0TmFtZSBuYW1lPXtxdW90ZVN5bWJvbH0gLz4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXJrZXQtcmlnaHQtcGFkZGluZy1vbmx5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIG9yZGVyLXRhYmxlIHRhYmxlLWhvdmVyIGZpeGVkLXRhYmxlIHRleHQtcmlnaHRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFmbGlwT3JkZXJCb29rID8gcmlnaHRIZWFkZXIgOiBsZWZ0SGVhZGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJncmlkLWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9XCJob3JfYXNrc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBcIjAuNnJlbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW5cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiAyNjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6IFwiMTNweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiA1fX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFibGUgb3JkZXItdGFibGUgbm8tc3RyaXBlcyB0YWJsZS1ob3ZlciBmaXhlZC10YWJsZSB0ZXh0LXJpZ2h0IG5vLW92ZXJmbG93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2l0aW9uV3JhcHBlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwiYXNrVHJhbnNpdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvcmRlcmJvb2sgY2xpY2thYmxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cInRib2R5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25OYW1lPVwibmV3cm93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwidG9wLW9yZGVyLXJvd3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YXNrUm93c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UcmFuc2l0aW9uV3JhcHBlcj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dG90YWxBc2tzTGVuZ3RoID4gMTEgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJvcmRlcmJvb2stc2hvd2FsbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25TZXRTaG93QWxsLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFza3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWxsQXNrc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImV4Y2hhbmdlLmhpZGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImV4Y2hhbmdlLnNob3dfYXNrc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyY291bnQ9e3RvdGFsQXNrc0xlbmd0aH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyQ2xhc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGlwT3JkZXJCb29rID8gXCJvcmRlci0yXCIgOiBcIm9yZGVyLTFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJleGNoYW5nZS1jb250ZW50LWhlYWRlciBiaWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZGF0YS1pbnRybz17dHJhbnNsYXRvci50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgXCJ3YWxrdGhyb3VnaC5idXlfb3JkZXJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UuYmlkc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFmbGlwT3JkZXJCb29rICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMucHJvcHMuaGlkZUZ1bmN0aW9uQnV0dG9ucyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Rpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkZsaXBPcmRlckJvb2suYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IFwiMXJlbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiBcIjRweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IFwiLTJweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGlwLWFycm93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiM4NjQ2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IWZsaXBPcmRlckJvb2sgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5wcm9wcy5oaWRlRnVuY3Rpb25CdXR0b25zID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsb2F0LXJpZ2h0IGhlYWRlci1zdWItdGl0bGUgZ3JvdXBlZF9vcmRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RyYWNrZWRHcm91cHNDb25maWcgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEdyb3VwT3JkZXJMaW1pdFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrZWRHcm91cHNDb25maWc9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tlZEdyb3Vwc0NvbmZpZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUdyb3VwT3JkZXJMaW1pdENoYW5nZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVHcm91cE9yZGVyTGltaXRDaGFuZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50R3JvdXBPcmRlckxpbWl0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRHcm91cE9yZGVyTGltaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRHcm91cE9yZGVyTGltaXQgIT09IDAgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oaWRlRnVuY3Rpb25CdXR0b25zICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImdyb3VwaW5nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbG9hdC1yaWdodCBpY29uLTE0cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt0cmFuc2xhdG9yLnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpY29ucy5vcmRlcl9ncm91cGluZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiBcIjAuNXJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMub25Ub2dnbGVQb3NpdGlvbiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnByb3BzLmhpZGVGdW5jdGlvbkJ1dHRvbnMgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uVG9nZ2xlUG9zaXRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IFwiMXJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxpcC1hcnJvd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYjODY0NTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshZmxpcE9yZGVyQm9vayAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnByb3BzLmhpZGVGdW5jdGlvbkJ1dHRvbnMgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvcmRlci1ib29rLWJ1dHRvbi12XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMubW92ZU9yZGVyQm9va31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwidGh1bWItdGFja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bGluZUhlaWdodDogXCIxNnB4XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbG9hdC1yaWdodCBoZWFkZXItc3ViLXRpdGxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLm1hcmtldF9kZXB0aFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPjogPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQmlkcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDxBc3NldE5hbWUgbmFtZT17YmFzZVN5bWJvbH0gLz4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXJrZXQtcmlnaHQtcGFkZGluZy1vbmx5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIG9yZGVyLXRhYmxlIHRhYmxlLWhvdmVyIGZpeGVkLXRhYmxlIHRleHQtcmlnaHRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZsaXBPcmRlckJvb2sgPyByaWdodEhlYWRlciA6IGxlZnRIZWFkZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdyaWQtYmxvY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cImhvcl9iaWRzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IFwiMC42cmVtXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6IDI2MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZUhlaWdodDogXCIxM3B4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206IDV9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZSBvcmRlci10YWJsZSBuby1zdHJpcGVzIHRhYmxlLWhvdmVyIGZpeGVkLXRhYmxlIHRleHQtcmlnaHQgbm8tb3ZlcmZsb3dcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zaXRpb25XcmFwcGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9XCJiaWRUcmFuc2l0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9yZGVyYm9vayBjbGlja2FibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwidGJvZHlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbk5hbWU9XCJuZXdyb3dcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YmlkUm93c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UcmFuc2l0aW9uV3JhcHBlcj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dG90YWxCaWRzTGVuZ3RoID4gcm93Q291bnQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJvcmRlcmJvb2stc2hvd2FsbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25TZXRTaG93QWxsLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJpZHNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWxsQmlkc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImV4Y2hhbmdlLmhpZGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImV4Y2hhbmdlLnNob3dfYmlkc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyY291bnQ9e3RvdGFsQmlkc0xlbmd0aH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFZlcnRpY2FsIG9yZGVyYm9va1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJvcmRlci10YWJsZS1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8U3RpY2t5VGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RpY2t5Q29sdW1uQ291bnQ9ezB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9yZGVyLXRhYmxlIHRhYmxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXt0aGlzLnZlcnRpY2FsU3RpY2t5VGFibGV9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0aWNreS10YWJsZS1yb3cgdG9wLWhlYWRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjZWxsIGhlYWRlci1jZWxsIGxlZnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJoZWFkZXItc3ViLXRpdGxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWUgbmFtZT17YmFzZVN5bWJvbH0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2VsbCBoZWFkZXItY2VsbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImhlYWRlci1zdWItdGl0bGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBuYW1lPXtxdW90ZVN5bWJvbH0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2VsbCBoZWFkZXItY2VsbCByaWdodFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGVhZGVyLXN1Yi10aXRsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJleGNoYW5nZS5wcmljZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge29yZGVyQm9va1JldmVyc2VkID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPE9yZGVyUm93c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwidG9wLW9yZGVyLXJvd3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vT3JkZXJzPXtub09yZGVyc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlclJvd3M9e2JpZFJvd3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNCaWQ9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPE9yZGVyUm93c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwidG9wLW9yZGVyLXJvd3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vT3JkZXJzPXtub09yZGVyc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlclJvd3M9e2Fza1Jvd3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNCaWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtub09yZGVycyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzdGlja3ktdGFibGUtcm93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e3RoaXMuY2VudGVyVGV4dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNlbGxcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2VsbCBuby1vcmRlcnMgcGFkdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLm5vX29yZGVyc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzdGlja3ktdGFibGUtcm93IG9yZGVyYm9vay1sYXRlc3QtcHJpY2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17dGhpcy5jZW50ZXJUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZzogMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9kYXRhLWludHJvPXt0cmFuc2xhdG9yLnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBcIndhbGt0aHJvdWdoLnZlcnRpY2FsX29yZGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjZWxsIHJpZ2h0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjbGlja2FibGUgbGVmdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZVNwcmVhZFZhbHVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib3JkZXJib29rLWNlbnRlci10aXRsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4Y2hhbmdlLnNwcmVhZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInNwcmVhZC12YWx1ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshIXNwcmVhZCA/IHNwcmVhZCA6IFwiMFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjZWxsIGNlbGwtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7d2lkdGg6IDc1fX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IXRoaXMucHJvcHMuaGlkZUZ1bmN0aW9uQnV0dG9ucyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2RhdGEtaW50cm89e3RyYW5zbGF0b3IudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBcIndhbGt0aHJvdWdoLnZlcnRpY2FsX2xvY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImxvY2stdW5sb2NrIGNsaWNrYWJsZSBpY29uLWZpbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZUF1dG9TY3JvbGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5hdXRvU2Nyb2xsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImxvY2tlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcInVubG9ja2VkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmF1dG9TY3JvbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiaWNvbnMudW5sb2NrZWQuZGlzYWJsZV9hdXRvX3Njcm9sbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImljb25zLmxvY2tlZC5lbmFibGVfYXV0b19zY3JvbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IXRoaXMucHJvcHMuaGlkZUZ1bmN0aW9uQnV0dG9ucyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubW92ZU9yZGVyQm9va1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0aHVtYi10YWNrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4IGljb24tZmlsbCBvcmRlci1ib29rLWJ1dHRvbi12IGNsaWNrYWJsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaG9yaXpvbnRhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJpY29ucy50aHVtYl90YWNrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiaWNvbnMudGh1bWJfdW50YWNrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRHcm91cE9yZGVyTGltaXQgPT0gMCA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImdyb3VwaW5nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3RyYW5zbGF0b3IudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpY29ucy5vcmRlcl9ncm91cGluZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNlbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3RleHRBbGlnbjogXCJjZW50ZXJcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ISF0aGlzLnByb3BzLmxhdGVzdCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJyaWdodFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5wcm9wcy5jaGFuZ2VDbGFzc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJzcHJlYWQtdmFsdWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5wcm9wcy5jaGFuZ2VDbGFzc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJpY2VUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZT17dGhpcy5wcm9wcy5sYXRlc3R9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlPXt0aGlzLnByb3BzLmJhc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZT17dGhpcy5wcm9wcy5xdW90ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtvcmRlckJvb2tSZXZlcnNlZCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxPcmRlclJvd3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub09yZGVycz17bm9PcmRlcnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJSb3dzPXthc2tSb3dzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQmlkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8T3JkZXJSb3dzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9PcmRlcnM9e25vT3JkZXJzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyUm93cz17YmlkUm93c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0JpZD17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9TdGlja3lUYWJsZT5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuT3JkZXJCb29rLmRlZmF1bHRQcm9wcyA9IHtcclxuICAgIGJpZHM6IFtdLFxyXG4gICAgYXNrczogW10sXHJcbiAgICBvcmRlcnM6IHt9XHJcbn07XHJcblxyXG5PcmRlckJvb2sucHJvcFR5cGVzID0ge1xyXG4gICAgYmlkczogUHJvcFR5cGVzLmFycmF5LmlzUmVxdWlyZWQsXHJcbiAgICBhc2tzOiBQcm9wVHlwZXMuYXJyYXkuaXNSZXF1aXJlZCxcclxuICAgIG9yZGVyczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXHJcbn07XHJcblxyXG5leHBvcnQge09yZGVyQm9vaywgR3JvdXBPcmRlckxpbWl0U2VsZWN0b3J9O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuaW1wb3J0IEltbXV0YWJsZSBmcm9tIFwiaW1tdXRhYmxlXCI7XHJcbmltcG9ydCBQcyBmcm9tIFwicGVyZmVjdC1zY3JvbGxiYXJcIjtcclxuaW1wb3J0IFNldHRpbmdzQWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9TZXR0aW5nc0FjdGlvbnNcIjtcclxuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XHJcbmltcG9ydCB7Y29ubmVjdH0gZnJvbSBcImFsdC1yZWFjdFwiO1xyXG5pbXBvcnQge0NoYWluVHlwZXMgYXMgZ3JhcGhlbmVDaGFpblR5cGVzfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuY29uc3Qge29wZXJhdGlvbnN9ID0gZ3JhcGhlbmVDaGFpblR5cGVzO1xyXG5pbXBvcnQgUmVhY3RUb29sdGlwIGZyb20gXCJyZWFjdC10b29sdGlwXCI7XHJcbmltcG9ydCB7RmlsbE9yZGVyfSBmcm9tIFwiY29tbW9uL01hcmtldENsYXNzZXNcIjtcclxuaW1wb3J0IHtcclxuICAgIE1hcmtldEhpc3RvcnlWaWV3LFxyXG4gICAgTWFya2V0SGlzdG9yeVZpZXdSb3dcclxufSBmcm9tIFwiLi9WaWV3L01hcmtldEhpc3RvcnlWaWV3XCI7XHJcblxyXG5jbGFzcyBNYXJrZXRIaXN0b3J5IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBhY3RpdmVUYWI6IHByb3BzLnZpZXdTZXR0aW5ncy5nZXQoXCJoaXN0b3J5VGFiXCIsIFwiaGlzdG9yeVwiKSxcclxuICAgICAgICAgICAgcm93Q291bnQ6IDIwLFxyXG4gICAgICAgICAgICBzaG93QWxsOiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIUltbXV0YWJsZS5pcyhuZXh0UHJvcHMuaGlzdG9yeSwgdGhpcy5wcm9wcy5oaXN0b3J5KSB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuYmFzZVN5bWJvbCAhPT0gdGhpcy5wcm9wcy5iYXNlU3ltYm9sIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5xdW90ZVN5bWJvbCAhPT0gdGhpcy5wcm9wcy5xdW90ZVN5bWJvbCB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuY2xhc3NOYW1lICE9PSB0aGlzLnByb3BzLmNsYXNzTmFtZSB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuYWN0aXZlVGFiICE9PSB0aGlzLnByb3BzLmFjdGl2ZVRhYiB8fFxyXG4gICAgICAgICAgICBuZXh0U3RhdGUuYWN0aXZlVGFiICE9PSB0aGlzLnN0YXRlLmFjdGl2ZVRhYiB8fFxyXG4gICAgICAgICAgICBuZXh0U3RhdGUuc2hvd0FsbCAhPT0gdGhpcy5zdGF0ZS5zaG93QWxsIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5jdXJyZW50QWNjb3VudCAhPT0gdGhpcy5wcm9wcy5jdXJyZW50QWNjb3VudCB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuaXNQYW5lbEFjdGl2ZSAhPT0gdGhpcy5wcm9wcy5pc1BhbmVsQWN0aXZlIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5oaWRlU2Nyb2xsYmFycyAhPT0gdGhpcy5wcm9wcy5oaWRlU2Nyb2xsYmFyc1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLmhpZGVTY3JvbGxiYXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGFpbmVyKDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlN0YXRlKSB7XHJcbiAgICAgICAgbGV0IHtoaWRlU2Nyb2xsYmFyc30gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCB7c2hvd0FsbH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBpZiAocHJldlN0YXRlLnNob3dBbGwgIT0gc2hvd0FsbCkge1xyXG4gICAgICAgICAgICBpZiAoc2hvd0FsbCAmJiAhaGlkZVNjcm9sbGJhcnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGFpbmVyKDIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzaG93QWxsICYmICFoaWRlU2Nyb2xsYmFycykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250YWluZXIoMyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvd0FsbCAmJiBoaWRlU2Nyb2xsYmFycykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250YWluZXIoMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lcigwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xyXG4gICAgICAgIGlmIChuZXh0UHJvcHMuYWN0aXZlVGFiICE9PSB0aGlzLnByb3BzLmFjdGl2ZVRhYikge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVRhYihuZXh0UHJvcHMuYWN0aXZlVGFiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlc2V0IG9uIE1hcmtldCBTd2l0Y2hcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5iYXNlU3ltYm9sICE9PSB0aGlzLnByb3BzLmJhc2VTeW1ib2wgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLnF1b3RlU3ltYm9sICE9PSB0aGlzLnByb3BzLnF1b3RlU3ltYm9sXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dBbGw6IGZhbHNlfSk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGFpbmVyKDApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnByb3BzLmhpZGVTY3JvbGxiYXJzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lcigxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVzZXQgb24gaGlkZVNjcm9sbGJhcnMgc3dpdGNoXHJcbiAgICAgICAgaWYgKG5leHRQcm9wcy5oaWRlU2Nyb2xsYmFycyAhPT0gdGhpcy5wcm9wcy5oaWRlU2Nyb2xsYmFycykge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lcigwKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghbmV4dFByb3BzLmhpZGVTY3JvbGxiYXJzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lcigxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKioqXHJcbiAgICAgKiBVcGRhdGUgUFMgQ29udGFpbmVyXHJcbiAgICAgKiB0eXBlOmludCBbMDpkZXN0cm95LCAxOmluaXQsIDI6dXBkYXRlLCAzOnVwZGF0ZSB3LyBzY3JvbGxUb3BdIChkZWZhdWx0OiAyKVxyXG4gICAgICovXHJcbiAgICB1cGRhdGVDb250YWluZXIodHlwZSA9IDIpIHtcclxuICAgICAgICBsZXQgY29udGFpbmVyTm9kZSA9IHRoaXMucmVmcy52aWV3LnJlZnMuaGlzdG9yeTtcclxuICAgICAgICBsZXQgY29udGFpbmVyVHJhbnNpdGlvbiA9IHRoaXMucmVmcy52aWV3LnJlZnMuaGlzdG9yeVRyYW5zaXRpb247XHJcblxyXG4gICAgICAgIGlmICghY29udGFpbmVyTm9kZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAodHlwZSA9PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lck5vZGUuc2Nyb2xsVG9wID0gMDtcclxuICAgICAgICAgICAgUHMuZGVzdHJveShjb250YWluZXJOb2RlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gMSkge1xyXG4gICAgICAgICAgICBQcy5pbml0aWFsaXplKGNvbnRhaW5lck5vZGUpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lcigzKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gMikge1xyXG4gICAgICAgICAgICBQcy51cGRhdGUoY29udGFpbmVyTm9kZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09IDMpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyTm9kZS5zY3JvbGxUb3AgPSAwO1xyXG4gICAgICAgICAgICBQcy51cGRhdGUoY29udGFpbmVyTm9kZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29udGFpbmVyVHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICBjb250YWluZXJUcmFuc2l0aW9uLnJlc2V0QW5pbWF0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2V0U2hvd0FsbCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2hvd0FsbDogIXRoaXMuc3RhdGUuc2hvd0FsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZVRhYih0YWIpIHtcclxuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlVmlld1NldHRpbmcoe1xyXG4gICAgICAgICAgICBoaXN0b3J5VGFiOiB0YWJcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgYWN0aXZlVGFiOiB0YWJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gRW5zdXJlIHRoYXQgZm9jdXMgZ29lcyBiYWNrIHRvIHRvcCBvZiBzY3JvbGxhYmxlIGNvbnRhaW5lciB3aGVuIHRhYiBpcyBjaGFuZ2VkXHJcbiAgICAgICAgdGhpcy51cGRhdGVDb250YWluZXIoMyk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoUmVhY3RUb29sdGlwLnJlYnVpbGQsIDEwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICBoaXN0b3J5LFxyXG4gICAgICAgICAgICBteUhpc3RvcnksXHJcbiAgICAgICAgICAgIGJhc2UsXHJcbiAgICAgICAgICAgIHF1b3RlLFxyXG4gICAgICAgICAgICBiYXNlU3ltYm9sLFxyXG4gICAgICAgICAgICBxdW90ZVN5bWJvbCxcclxuICAgICAgICAgICAgaXNOdWxsQWNjb3VudCxcclxuICAgICAgICAgICAgYWN0aXZlVGFiXHJcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IHtyb3dDb3VudCwgc2hvd0FsbH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGxldCBoaXN0b3J5Um93cyA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChpc051bGxBY2NvdW50KSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhYiA9IFwiaGlzdG9yeVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGFjdGl2ZVRhYiA9PT0gXCJteV9oaXN0b3J5XCIgJiYgKG15SGlzdG9yeSAmJiBteUhpc3Rvcnkuc2l6ZSkpIHtcclxuICAgICAgICAgICAgLy8gVXNlciBIaXN0b3J5XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhc3NldHMgPSB7XHJcbiAgICAgICAgICAgICAgICBbcXVvdGUuZ2V0KFwiaWRcIildOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBxdW90ZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBbYmFzZS5nZXQoXCJpZFwiKV06IHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVjaXNpb246IGJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBoaXN0b3J5Um93cyA9IG15SGlzdG9yeVxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgb3BUeXBlID0gYS5nZXRJbihbXCJvcFwiLCAwXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wVHlwZSA9PT0gb3BlcmF0aW9ucy5maWxsX29yZGVyO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoYSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHF1b3RlSUQgPSBxdW90ZS5nZXQoXCJpZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYmFzZUlEID0gYmFzZS5nZXQoXCJpZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcGF5cyA9IGEuZ2V0SW4oW1wib3BcIiwgMSwgXCJwYXlzXCIsIFwiYXNzZXRfaWRcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZWNlaXZlcyA9IGEuZ2V0SW4oW1wib3BcIiwgMSwgXCJyZWNlaXZlc1wiLCBcImFzc2V0X2lkXCJdKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaGFzUXVvdGUgPSBxdW90ZUlEID09PSBwYXlzIHx8IHF1b3RlSUQgPT09IHJlY2VpdmVzO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBoYXNCYXNlID0gYmFzZUlEID09PSBwYXlzIHx8IGJhc2VJRCA9PT0gcmVjZWl2ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhc1F1b3RlICYmIGhhc0Jhc2U7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYi5nZXQoXCJibG9ja19udW1cIikgLSBhLmdldChcImJsb2NrX251bVwiKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubWFwKHRyeCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbGwgPSBuZXcgRmlsbE9yZGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cngudG9KUygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlLmdldChcImlkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPE1hcmtldEhpc3RvcnlWaWV3Um93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2ZpbGwuaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPXtmaWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17YmFzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlPXtxdW90ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50b0FycmF5KCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChoaXN0b3J5ICYmIGhpc3Rvcnkuc2l6ZSkge1xyXG4gICAgICAgICAgICAvLyBNYXJrZXQgSGlzdG9yeVxyXG4gICAgICAgICAgICBoaXN0b3J5Um93cyA9IHRoaXMucHJvcHMuaGlzdG9yeVxyXG4gICAgICAgICAgICAgICAgLnRha2UoMTAwKVxyXG4gICAgICAgICAgICAgICAgLm1hcChmaWxsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TWFya2V0SGlzdG9yeVZpZXdSb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17ZmlsbC5pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9e2ZpbGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlPXtiYXNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU9e3F1b3RlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRvQXJyYXkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0b3RhbFJvd3MgPSBoaXN0b3J5Um93cyA/IGhpc3RvcnlSb3dzLmxlbmd0aCA6IG51bGw7XHJcbiAgICAgICAgaWYgKCFzaG93QWxsICYmIGhpc3RvcnlSb3dzKSB7XHJcbiAgICAgICAgICAgIGhpc3RvcnlSb3dzLnNwbGljZShyb3dDb3VudCwgaGlzdG9yeVJvd3MubGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxNYXJrZXRIaXN0b3J5Vmlld1xyXG4gICAgICAgICAgICAgICAgcmVmPVwidmlld1wiXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3RoaXMucHJvcHMuY2xhc3NOYW1lfVxyXG4gICAgICAgICAgICAgICAgaW5uZXJDbGFzcz17dGhpcy5wcm9wcy5pbm5lckNsYXNzfVxyXG4gICAgICAgICAgICAgICAgaW5uZXJTdHlsZT17dGhpcy5wcm9wcy5pbm5lclN0eWxlfVxyXG4gICAgICAgICAgICAgICAgbm9IZWFkZXI9e3RoaXMucHJvcHMubm9IZWFkZXJ9XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJTdHlsZT17dGhpcy5wcm9wcy5oZWFkZXJTdHlsZX1cclxuICAgICAgICAgICAgICAgIGFjdGl2ZVRhYj17YWN0aXZlVGFifVxyXG4gICAgICAgICAgICAgICAgcXVvdGVTeW1ib2w9e3F1b3RlU3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgYmFzZVN5bWJvbD17YmFzZVN5bWJvbH1cclxuICAgICAgICAgICAgICAgIHRpbnlTY3JlZW49e3RoaXMucHJvcHMudGlueVNjcmVlbn1cclxuICAgICAgICAgICAgICAgIGhpc3RvcnlSb3dzPXtoaXN0b3J5Um93c31cclxuICAgICAgICAgICAgICAgIHRvdGFsUm93cz17dG90YWxSb3dzfVxyXG4gICAgICAgICAgICAgICAgc2hvd0FsbD17c2hvd0FsbH1cclxuICAgICAgICAgICAgICAgIG9uU2V0U2hvd0FsbD17dGhpcy5vblNldFNob3dBbGwuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5NYXJrZXRIaXN0b3J5LmRlZmF1bHRQcm9wcyA9IHtcclxuICAgIGhpc3Rvcnk6IFtdXHJcbn07XHJcblxyXG5NYXJrZXRIaXN0b3J5LnByb3BUeXBlcyA9IHtcclxuICAgIGhpc3Rvcnk6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcclxuICAgIE1hcmtldEhpc3RvcnksXHJcbiAgICB7XHJcbiAgICAgICAgbGlzdGVuVG8oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbU2V0dGluZ3NTdG9yZV07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRQcm9wcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHZpZXdTZXR0aW5nczogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnZpZXdTZXR0aW5nc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuKTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IGNuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xyXG5pbXBvcnQgVHJhbnNpdGlvbldyYXBwZXIgZnJvbSBcIi4uLy4uL1V0aWxpdHkvVHJhbnNpdGlvbldyYXBwZXJcIjtcclxuaW1wb3J0IEFzc2V0TmFtZSBmcm9tIFwiLi4vLi4vVXRpbGl0eS9Bc3NldE5hbWVcIjtcclxuaW1wb3J0IEJsb2NrRGF0ZSBmcm9tIFwiLi4vLi4vVXRpbGl0eS9CbG9ja0RhdGVcIjtcclxuaW1wb3J0IFByaWNlVGV4dCBmcm9tIFwiLi4vLi4vVXRpbGl0eS9QcmljZVRleHRcIjtcclxuaW1wb3J0IHtUb29sdGlwfSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcbmltcG9ydCBnZXRMb2NhbGUgZnJvbSBcImJyb3dzZXItbG9jYWxlXCI7XHJcblxyXG5mdW5jdGlvbiBNYXJrZXRIaXN0b3J5Vmlld1Jvdyh7ZmlsbCwgYmFzZSwgcXVvdGV9KSB7XHJcbiAgICBjb25zdCBpc01hcmtldCA9IGZpbGwuaWQuaW5kZXhPZihcIjUuMFwiKSAhPT0gLTEgPyB0cnVlIDogZmFsc2U7XHJcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBpc01hcmtldCA/IChcclxuICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtmaWxsLnRpbWUudG9TdHJpbmcoKX0gcGxhY2VtZW50PVwibGVmdFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0b29sdGlwXCIgc3R5bGU9e3t3aGl0ZVNwYWNlOiBcIm5vd3JhcFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LmxvY2FsaXplKGZpbGwudGltZSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TG9jYWxlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKFwiZW4tdXNcIikgIT09IC0xXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIm1hcmtldF9oaXN0b3J5X3VzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwibWFya2V0X2hpc3RvcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICA8L3RkPlxyXG4gICAgKSA6IChcclxuICAgICAgICA8QmxvY2tEYXRlIGNvbXBvbmVudD1cInRkXCIgYmxvY2tfbnVtYmVyPXtmaWxsLmJsb2NrfSB0b29sdGlwIC8+XHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICA8dGQgY2xhc3NOYW1lPXtmaWxsLmNsYXNzTmFtZX0+XHJcbiAgICAgICAgICAgICAgICA8UHJpY2VUZXh0IHByaWNlPXtmaWxsLmdldFByaWNlKCl9IGJhc2U9e2Jhc2V9IHF1b3RlPXtxdW90ZX0gLz5cclxuICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgPHRkPntmaWxsLmFtb3VudFRvUmVjZWl2ZSgpfTwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZD57ZmlsbC5hbW91bnRUb1BheSgpfTwvdGQ+XHJcbiAgICAgICAgICAgIHt0aW1lc3RhbXB9XHJcbiAgICAgICAgPC90cj5cclxuICAgICk7XHJcbn1cclxuXHJcbmNsYXNzIE1hcmtldEhpc3RvcnlWaWV3IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICBjbGFzc05hbWUsXHJcbiAgICAgICAgICAgIGlubmVyQ2xhc3MsXHJcbiAgICAgICAgICAgIGlubmVyU3R5bGUsXHJcbiAgICAgICAgICAgIG5vSGVhZGVyLFxyXG4gICAgICAgICAgICBoZWFkZXJTdHlsZSxcclxuICAgICAgICAgICAgYWN0aXZlVGFiLFxyXG4gICAgICAgICAgICBxdW90ZVN5bWJvbCxcclxuICAgICAgICAgICAgYmFzZVN5bWJvbCxcclxuICAgICAgICAgICAgdGlueVNjcmVlbixcclxuICAgICAgICAgICAgdG90YWxSb3dzLFxyXG4gICAgICAgICAgICBoaXN0b3J5Um93cyxcclxuICAgICAgICAgICAgc2hvd0FsbFxyXG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBjb25zdCBlbXB0eVJvdyA9IChcclxuICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lSGVpZ2h0OiA0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250U3R5bGU6IFwiaXRhbGljXCJcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbFNwYW49XCI1XCJcclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm5vX29yZGVyc1wiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbmFtZXMoY2xhc3NOYW1lKX0+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17aW5uZXJDbGFzc30gc3R5bGU9e2lubmVyU3R5bGV9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtub0hlYWRlciA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXtoZWFkZXJTdHlsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImV4Y2hhbmdlLWNvbnRlbnQtaGVhZGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2FjdGl2ZVRhYiA9PT0gXCJteV9oaXN0b3J5XCIgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UubXlfaGlzdG9yeVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVUYWIgPT09IFwiaGlzdG9yeVwiID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLmhpc3RvcnlcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIHNocmluayBsZWZ0LW9yZGVyYm9vay1oZWFkZXIgbWFya2V0LXJpZ2h0LXBhZGRpbmctb25seVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUgdGFibGUtbm8tcGFkZGluZyBvcmRlci10YWJsZSB0ZXh0LWxlZnQgZml4ZWQtdGFibGUgbWFya2V0LXJpZ2h0LXBhZGRpbmdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGVhZGVyLXN1Yi10aXRsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4Y2hhbmdlLnByaWNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3RleHRBbGlnbjogXCJyaWdodFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJoZWFkZXItc3ViLXRpdGxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhUGxhY2U9XCJ0b3BcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtxdW90ZVN5bWJvbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaGVhZGVyLXN1Yi10aXRsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVBsYWNlPVwidG9wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17YmFzZVN5bWJvbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhlYWRlci1zdWItdGl0bGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJleHBsb3Jlci5ibG9jay5kYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZS1jb250YWluZXIgZ3JpZC1ibG9jayBtYXJrZXQtcmlnaHQtcGFkZGluZy1vbmx5IG5vLW92ZXJmbG93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwiaGlzdG9yeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6ICF0aW55U2NyZWVuID8gMjYwIDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEhlaWdodDogMjYwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lSGVpZ2h0OiBcIjEzcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIG9yZGVyLXRhYmxlIG5vLXN0cmlwZXMgdGFibGUtaG92ZXIgZml4ZWQtdGFibGUgdGV4dC1yaWdodCBuby1vdmVyZmxvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zaXRpb25XcmFwcGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwiaGlzdG9yeVRyYW5zaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cInRib2R5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uTmFtZT1cIm5ld3Jvd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib3JkZXJib29rXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ISFoaXN0b3J5Um93cyAmJiBoaXN0b3J5Um93cy5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gaGlzdG9yeVJvd3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBlbXB0eVJvd31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVHJhbnNpdGlvbldyYXBwZXI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAge2hpc3RvcnlSb3dzICYmIHRvdGFsUm93cyA+IDExID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9yZGVyYm9vay1zaG93YWxsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBvbkNsaWNrPXtlID0+IHRoaXMucHJvcHMub25TZXRTaG93QWxsKGUpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJleGNoYW5nZS5oaWRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiZXhjaGFuZ2Uuc2hvd19hbGxfdHJhZGVzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3djb3VudD17dG90YWxSb3dzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7TWFya2V0SGlzdG9yeVZpZXcsIE1hcmtldEhpc3RvcnlWaWV3Um93fTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCB7Y29ubmVjdH0gZnJvbSBcImFsdC1yZWFjdFwiO1xyXG5pbXBvcnQgQmxvY2tjaGFpblN0b3JlIGZyb20gXCJzdG9yZXMvQmxvY2tjaGFpblN0b3JlXCI7XHJcbmltcG9ydCBCbG9ja2NoYWluQWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9CbG9ja2NoYWluQWN0aW9uc1wiO1xyXG5pbXBvcnQgUmVhY3RUb29sdGlwIGZyb20gXCJyZWFjdC10b29sdGlwXCI7XHJcbmltcG9ydCBnZXRMb2NhbGUgZnJvbSBcImJyb3dzZXItbG9jYWxlXCI7XHJcbmltcG9ydCB7VG9vbHRpcH0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5cclxuLyoqXHJcbiAqIEBicmllZiBkaXNwbGF5cyBibG9jaydzIGRhdGUgYW5kIHRpbWUgYmFzZWQgb24gYmxvY2sgbnVtYmVyXHJcbiAqXHJcbiAqIHByb3BlcnRpZXM6IGJsb2NrIC0gbnVtYmVyXHJcbiAqIE5vdGUsIGl0IGRvZXNuJ3QgZmV0Y2ggYmxvY2ssIGp1c3QgY2FsY3VsYXRlcyB0aW1lIGJhc2VkIG9uIG51bWJlciBhbG9uZS5cclxuICoqL1xyXG5cclxuY2xhc3MgQmxvY2tEYXRlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgZm9ybWF0OlxyXG4gICAgICAgICAgICBnZXRMb2NhbGUoKVxyXG4gICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgICAgIC5pbmRleE9mKFwiZW4tdXNcIikgIT09IC0xXHJcbiAgICAgICAgICAgICAgICA/IFwibWFya2V0X2hpc3RvcnlfdXNcIlxyXG4gICAgICAgICAgICAgICAgOiBcIm1hcmtldF9oaXN0b3J5XCIsXHJcbiAgICAgICAgdG9vbHRpcDogZmFsc2UsXHJcbiAgICAgICAgY29tcG9uZW50OiBcInNwYW5cIlxyXG4gICAgfTtcclxuXHJcbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLmJsb2NrSGVhZGVyKVxyXG4gICAgICAgICAgICBCbG9ja2NoYWluQWN0aW9ucy5nZXRIZWFkZXIuZGVmZXIodGhpcy5wcm9wcy5ibG9ja19udW1iZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShucCkge1xyXG4gICAgICAgIGlmIChucC5ibG9ja0hlYWRlciAmJiAhdGhpcy5wcm9wcy5ibG9ja0hlYWRlcilcclxuICAgICAgICAgICAgc2V0VGltZW91dChSZWFjdFRvb2x0aXAucmVidWlsZCwgMTAwMCk7XHJcbiAgICAgICAgcmV0dXJuIG5wLmJsb2NrSGVhZGVyICE9PSB0aGlzLnByb3BzLmJsb2NrSGVhZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB7YmxvY2tIZWFkZXIsIHRvb2x0aXAsIGNvbXBvbmVudCwgZm9ybWF0fSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGlmICghYmxvY2tIZWFkZXIpIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudCk7XHJcbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXHJcbiAgICAgICAgICAgIGNvbXBvbmVudCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB0b29sdGlwID8gXCJ0b29sdGlwXCIgOiBcIlwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICB0aXRsZT17dG9vbHRpcCA/IGJsb2NrSGVhZGVyLnRpbWVzdGFtcC50b1N0cmluZygpIDogXCJcIn1cclxuICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImxlZnRcIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQubG9jYWxpemUoYmxvY2tIZWFkZXIudGltZXN0YW1wLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRcclxuICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkJsb2NrRGF0ZSA9IGNvbm5lY3QoXHJcbiAgICBCbG9ja0RhdGUsXHJcbiAgICB7XHJcbiAgICAgICAgbGlzdGVuVG8oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbQmxvY2tjaGFpblN0b3JlXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldFByb3BzKHByb3BzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBibG9ja0hlYWRlcjogQmxvY2tjaGFpblN0b3JlLmdldFN0YXRlKCkuYmxvY2tIZWFkZXJzLmdldChcclxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5ibG9ja19udW1iZXJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCbG9ja0RhdGU7XHJcbiIsImltcG9ydCB7Y29ubmVjdH0gZnJvbSBcImFsdC1yZWFjdFwiO1xyXG5pbXBvcnQge0NoYWluVmFsaWRhdGlvbn0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IHtkZWJvdW5jZX0gZnJvbSBcImxvZGFzaC1lc1wiO1xyXG5pbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IHtMaW5rfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5pbXBvcnQgQXNzZXRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL0Fzc2V0QWN0aW9uc1wiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgQXNzZXRTdG9yZSBmcm9tIFwic3RvcmVzL0Fzc2V0U3RvcmVcIjtcclxuaW1wb3J0IHtGb3JtLCBJbnB1dCwgTW9kYWwsIEljb24gYXMgQW50SWNvbn0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5pbXBvcnQgQXNzZXROYW1lIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0TmFtZVwiO1xyXG5pbXBvcnQge1xyXG4gICAgbG9va3VwQXNzZXRzLFxyXG4gICAgYXNzZXRGaWx0ZXIsXHJcbiAgICBmZXRjaElzc3Vlck5hbWVcclxufSBmcm9tIFwiLi9NYXJrZXRQaWNrZXJIZWxwZXJzXCI7XHJcblxyXG5jbGFzcyBNYXJrZXRMaXN0SXRlbSBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIG9uQ2xvc2U6IFByb3BUeXBlcy5mdW5jLFxyXG4gICAgICAgIHF1b3RlU3ltYm9sOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgICAgIGJhc2VTeW1ib2w6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICAgICAgbWFya2V0OiBQcm9wVHlwZXMuYXJyYXksXHJcbiAgICAgICAgbWFya2V0UGlja2VyQXNzZXQ6IFByb3BUeXBlcy5zdHJpbmdcclxuICAgIH07XHJcblxyXG4gICAgb25LZXlQcmVzcyhsaW5rVG8sIGUpIHtcclxuICAgICAgICBpZiAoZS5rZXkgPT0gXCJFbnRlclwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaGlzdG9yeS5wdXNoKGxpbmtUbyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB7cXVvdGVTeW1ib2wsIGJhc2VTeW1ib2wsIG1hcmtldCwgbWFya2V0UGlja2VyQXNzZXR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCB7b25DbG9zZX0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGNvbnN0IG1hcmtldFN5bWJvbCA9IG1hcmtldFsxXVtcInF1b3RlXCJdO1xyXG4gICAgICAgIGNvbnN0IGxpbmtUbyA9XHJcbiAgICAgICAgICAgIHF1b3RlU3ltYm9sID09IG1hcmtldFBpY2tlckFzc2V0XHJcbiAgICAgICAgICAgICAgICA/IGAvbWFya2V0LyR7bWFya2V0U3ltYm9sfV8ke2Jhc2VTeW1ib2x9YFxyXG4gICAgICAgICAgICAgICAgOiBgL21hcmtldC8ke3F1b3RlU3ltYm9sfV8ke21hcmtldFN5bWJvbH1gO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8bGlcclxuICAgICAgICAgICAgICAgIGtleT17bWFya2V0WzBdfVxyXG4gICAgICAgICAgICAgICAgc3R5bGU9e3toZWlnaHQ6IDQwfX1cclxuICAgICAgICAgICAgICAgIG9uS2V5UHJlc3M9e3RoaXMub25LZXlQcmVzcy5iaW5kKHRoaXMsIGxpbmtUbyl9XHJcbiAgICAgICAgICAgICAgICB0YWJJbmRleD17dGhpcy5wcm9wcy50YWJJbmRleH1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPExpbmsgc3R5bGU9e3tkaXNwbGF5OiBcImZsZXhcIn19IG9uQ2xpY2s9e29uQ2xvc2V9IHRvPXtsaW5rVG99PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmbGV4OiAyfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWUgbmFtZT17bWFya2V0WzFdW1wicXVvdGVcIl19IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2ZsZXg6IDN9fT57bWFya2V0WzFdLmlzc3Vlcn08L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgPC9saT5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBNYXJrZXRQaWNrZXJXcmFwcGVyIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLmluaXRpYWxTdGF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLmdldEFzc2V0TGlzdCA9IGRlYm91bmNlKEFzc2V0QWN0aW9ucy5nZXRBc3NldExpc3QuZGVmZXIsIDE1MCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSA9IHRoaXMuc2V0U3RhdGUuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9jaGVja0FuZFVwZGF0ZU1hcmtldExpc3QgPSB0aGlzLl9jaGVja0FuZFVwZGF0ZU1hcmtldExpc3QuYmluZChcclxuICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbFN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG1hcmtldHNMaXN0OiBbXSxcclxuICAgICAgICAgICAgbG9va3VwUXVvdGU6IG51bGwsXHJcbiAgICAgICAgICAgIGlucHV0VmFsdWU6IFwiXCJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMucmVmcy5tYXJrZXRQaWNrZXJfaW5wdXQuZm9jdXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5yZWZzLm1hcmtldFBpY2tlcl9pbnB1dC5mb2N1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XHJcbiAgICAgICAgaWYgKG5leHRQcm9wcy5tYXJrZXRQaWNrZXJBc3NldCAhPT0gdGhpcy5wcm9wcy5tYXJrZXRQaWNrZXJBc3NldClcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLmluaXRpYWxTdGF0ZSgpKTtcclxuXHJcbiAgICAgICAgaWYgKG5leHRQcm9wcy5zZWFyY2hBc3NldHMgIT09IHRoaXMucHJvcHMuc2VhcmNoQXNzZXRzKVxyXG4gICAgICAgICAgICBhc3NldEZpbHRlcihcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWFyY2hBc3NldHM6IHRoaXMucHJvcHMuc2VhcmNoQXNzZXRzLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldFBpY2tlckFzc2V0OiB0aGlzLnByb3BzLm1hcmtldFBpY2tlckFzc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VBc3NldDogdGhpcy5wcm9wcy5iYXNlQXNzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGVBc3NldDogdGhpcy5wcm9wcy5xdW90ZUFzc2V0XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IHRoaXMuc3RhdGUuaW5wdXRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBsb29rdXBRdW90ZTogdGhpcy5zdGF0ZS5sb29rdXBRdW90ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUsXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0FuZFVwZGF0ZU1hcmtldExpc3RcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobnAsIG5zKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgbnAudmlzaWJsZSAhPT0gdGhpcy5wcm9wcy52aXNpYmxlIHx8XHJcbiAgICAgICAgICAgIG5wLm1hcmtldFBpY2tlckFzc2V0ICE9PSB0aGlzLnByb3BzLm1hcmtldFBpY2tlckFzc2V0IHx8XHJcbiAgICAgICAgICAgIG5wLnNlYXJjaEFzc2V0cyAhPT0gdGhpcy5wcm9wcy5zZWFyY2hBc3NldHMgfHxcclxuICAgICAgICAgICAgbnMubWFya2V0c0xpc3QgIT09IHRoaXMuc3RhdGUubWFya2V0c0xpc3QgfHxcclxuICAgICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KG5zLCB0aGlzLnN0YXRlKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJ2YWxJZCkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vbklucHV0TmFtZShnZXRCYWNrZWRBc3NldHMsIGUpIHtcclxuICAgICAgICBsZXQgdG9GaW5kID0gZS50YXJnZXQudmFsdWUudHJpbSgpLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgbGV0IGlzVmFsaWROYW1lID0gIUNoYWluVmFsaWRhdGlvbi5pc192YWxpZF9zeW1ib2xfZXJyb3IodG9GaW5kLCB0cnVlKTtcclxuXHJcbiAgICAgICAgaWYgKCFpc1ZhbGlkTmFtZSkge1xyXG4gICAgICAgICAgICAvKiBEb24ndCBsb29rdXAgaW52YWxpZCBhc3NldCBuYW1lcyAqL1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IHRvRmluZCxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZVNlYXJjaDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBtYXJrZXRzTGlzdDogW11cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IHRvRmluZCxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZVNlYXJjaDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1hcmtldHNMaXN0OiBbXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmlucHV0VmFsdWUgIT09IHRvRmluZCkge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyICYmIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgbG9va3VwQXNzZXRzKFxyXG4gICAgICAgICAgICAgICAgdG9GaW5kLFxyXG4gICAgICAgICAgICAgICAgZ2V0QmFja2VkQXNzZXRzLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRBc3NldExpc3QsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSwgMTUwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrQW5kVXBkYXRlTWFya2V0TGlzdChtYXJrZXRzTGlzdCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcclxuICAgICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuZWVkRmV0Y2hJc3N1ZXIgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBbLCBtYXJrZXRdIG9mIG1hcmtldHNMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1hcmtldC5pc3N1ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXQuaXNzdWVyID0gZmV0Y2hJc3N1ZXJOYW1lKG1hcmtldC5pc3N1ZXJJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXJrZXQuaXNzdWVyKSBuZWVkRmV0Y2hJc3N1ZXIrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmVlZEZldGNoSXNzdWVyKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBtYXJrZXRzTGlzdCxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZVNlYXJjaDogZmFsc2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgMzAwKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJTZWFyY2hCYXIoKSB7XHJcbiAgICAgICAgY29uc3Qge2lucHV0VmFsdWV9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgY29uc3QgbGFiZWxLZXkgPSBcImV4Y2hhbmdlLm1hcmtldF9waWNrZXIuZmluZF9ieV9hc3NldFwiO1xyXG4gICAgICAgIGNvbnN0IGxhYmVsID0gY291bnRlcnBhcnQudHJhbnNsYXRlKGxhYmVsS2V5KS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IHBsYWNlSG9sZGVyS2V5ID0gXCJleGNoYW5nZS5tYXJrZXRfcGlja2VyLnNlYXJjaFwiO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgaWQ9XCJmaWx0ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbGFiZWw9e2xhYmVsfT5cclxuICAgICAgICAgICAgICAgICAgICA8SW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9XCJtYXJrZXRQaWNrZXJfaW5wdXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17aW5wdXRWYWx1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uSW5wdXROYW1lLmJpbmQodGhpcywgdHJ1ZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUocGxhY2VIb2xkZXJLZXkpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhMZW5ndGg9XCIxNlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsyfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJSZXN1bHRzKCkge1xyXG4gICAgICAgIGNvbnN0IHttYXJrZXRzTGlzdH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGNvbnN0IHthY3RpdmVTZWFyY2gsIGlucHV0VmFsdWV9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBjb25zdCBsb2FkaW5nID0gYWN0aXZlU2VhcmNoICYmIGlucHV0VmFsdWUubGVuZ3RoICE9IDA7XHJcblxyXG4gICAgICAgIGxldCB7bWFya2V0UGlja2VyQXNzZXR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQgYmFzZVN5bWJvbCA9IHRoaXMucHJvcHMuYmFzZUFzc2V0LmdldChcInN5bWJvbFwiKTtcclxuICAgICAgICBsZXQgcXVvdGVTeW1ib2wgPSB0aGlzLnByb3BzLnF1b3RlQXNzZXQuZ2V0KFwic3ltYm9sXCIpO1xyXG5cclxuICAgICAgICBpZiAoIWxvYWRpbmcpXHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlc3VsdHNcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dWwgc3R5bGU9e3ttYXJnaW5MZWZ0OiAwLCBtaW5IZWlnaHQ6IFwiMjBweFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHttYXJrZXRzTGlzdC5tYXAoKG1hcmtldCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPE1hcmtldExpc3RJdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXtpbmRleCArIDEwMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVN5bWJvbD17YmFzZVN5bWJvbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVTeW1ib2w9e3F1b3RlU3ltYm9sfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXQ9e21hcmtldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0UGlja2VyQXNzZXQ9e21hcmtldFBpY2tlckFzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaXN0b3J5PXt0aGlzLnByb3BzLmhpc3Rvcnl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9e3RoaXMucHJvcHMub25DbG9zZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPEFudEljb25cclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luTGVmdDogXCI4cHhcIn19XHJcbiAgICAgICAgICAgICAgICB0eXBlPVwibG9hZGluZ1wiXHJcbiAgICAgICAgICAgICAgICB0aGVtZT1cIm91dGxpbmVkXCJcclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB7bWFya2V0UGlja2VyQXNzZXR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1hcmtldFBpY2tlclwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXJrZXRQaWNrZXJfX3N1YkhlYWRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLm1hcmtldF9waWNrZXIuc3ViX3RpdGxlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgICAgICAgICAgICA8TGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bz17YC9hc3NldC8ke21hcmtldFBpY2tlckFzc2V0fWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwibGlnaHRibHVlICFpbXBvcnRhbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBuYW1lPXttYXJrZXRQaWNrZXJBc3NldH0gLz5cclxuICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlclNlYXJjaEJhcigpfVxyXG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyUmVzdWx0cygpfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBNYXJrZXRQaWNrZXIgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgb3BlbjogZmFsc2UsXHJcbiAgICAgICAgICAgIHNtYWxsU2NyZWVuOiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBzbWFsbFNjcmVlbjogd2luZG93LmlubmVyV2lkdGggPD0gODAwXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMucXVvdGVBc3NldC5nZXQoXCJpZFwiKSAhPT1cclxuICAgICAgICAgICAgICAgIG5leHRQcm9wcy5xdW90ZUFzc2V0LmdldChcImlkXCIpIHx8XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYmFzZUFzc2V0LmdldChcImlkXCIpICE9PSBuZXh0UHJvcHMuYmFzZUFzc2V0LmdldChcImlkXCIpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25DbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIHRoaXMucHJvcHMuc2hvd01vZGFsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICB0aGlzLnByb3BzLm9uVG9nZ2xlTWFya2V0UGlja2VyKG51bGwpO1xyXG4gICAgICAgIHRoaXMucHJvcHMuaGlkZU1vZGFsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxNb2RhbFxyXG4gICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImV4Y2hhbmdlLm1hcmtldF9waWNrZXIudGl0bGVcIil9XHJcbiAgICAgICAgICAgICAgICBjbG9zYWJsZT17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnByb3BzLnZpc2libGV9XHJcbiAgICAgICAgICAgICAgICBpZD17dGhpcy5wcm9wcy5tb2RhbElkfVxyXG4gICAgICAgICAgICAgICAgb3ZlcmxheT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgIG9uQ2FuY2VsPXt0aGlzLm9uQ2xvc2UuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgIG5vSGVhZGVyQ29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICBmb290ZXI9e251bGx9XHJcbiAgICAgICAgICAgICAgICByZWY9e3RoaXMucHJvcHMubW9kYWxJZH1cclxuICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8TWFya2V0UGlja2VyV3JhcHBlclxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9e3RoaXMub25DbG9zZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9Nb2RhbD5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5NYXJrZXRQaWNrZXIgPSBjb25uZWN0KFxyXG4gICAgTWFya2V0UGlja2VyLFxyXG4gICAge1xyXG4gICAgICAgIGxpc3RlblRvKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW0Fzc2V0U3RvcmVdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0UHJvcHMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzZWFyY2hBc3NldHM6IEFzc2V0U3RvcmUuZ2V0U3RhdGUoKS5hc3NldHMsXHJcbiAgICAgICAgICAgICAgICBhc3NldHNMb2FkaW5nOiBBc3NldFN0b3JlLmdldFN0YXRlKCkuYXNzZXRzTG9hZGluZ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE1hcmtldFBpY2tlcjtcclxuIiwiaW1wb3J0IHtoYXNHYXRld2F5UHJlZml4fSBmcm9tIFwiY29tbW9uL2dhdGV3YXlVdGlsc1wiO1xyXG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5cclxuZnVuY3Rpb24gbG9va3VwQXNzZXRzKHZhbHVlLCBnYXRld2F5QXNzZXRzID0gZmFsc2UsIGdldEFzc2V0TGlzdCwgc2V0U3RhdGUpIHtcclxuICAgIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IFwiXCIpIHJldHVybjtcclxuXHJcbiAgICBsZXQgcXVvdGUgPSB2YWx1ZS50b1VwcGVyQ2FzZSgpO1xyXG5cclxuICAgIGlmIChxdW90ZS5zdGFydHNXaXRoKFwiQklUXCIpICYmIHF1b3RlLmxlbmd0aCA+PSA2KSB7XHJcbiAgICAgICAgcXVvdGUgPSB2YWx1ZS5zdWJzdHIoMywgcXVvdGUubGVuZ3RoIC0gMSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXNzZXRMaXN0KHF1b3RlLCAxMCwgZ2F0ZXdheUFzc2V0cyk7XHJcblxyXG4gICAgc2V0U3RhdGUoe2xvb2t1cFF1b3RlOiBxdW90ZX0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhc3NldEZpbHRlcihcclxuICAgIHtzZWFyY2hBc3NldHMsIG1hcmtldFBpY2tlckFzc2V0LCBiYXNlQXNzZXQsIHF1b3RlQXNzZXR9LFxyXG4gICAge2lucHV0VmFsdWUsIGxvb2t1cFF1b3RlfSxcclxuICAgIHNldFN0YXRlLFxyXG4gICAgY2hlY2tBbmRVcGRhdGVNYXJrZXRMaXN0XHJcbikge1xyXG4gICAgc2V0U3RhdGUoe2FjdGl2ZVNlYXJjaDogdHJ1ZX0pO1xyXG5cclxuICAgIGxldCBhc3NldENvdW50ID0gMDtcclxuICAgIGxldCBhbGxNYXJrZXRzID0gW107XHJcblxyXG4gICAgbGV0IGJhc2VTeW1ib2wgPSBiYXNlQXNzZXQuZ2V0KFwic3ltYm9sXCIpO1xyXG4gICAgbGV0IHF1b3RlU3ltYm9sID0gcXVvdGVBc3NldC5nZXQoXCJzeW1ib2xcIik7XHJcblxyXG4gICAgaWYgKHNlYXJjaEFzc2V0cy5zaXplICYmICEhaW5wdXRWYWx1ZSAmJiBpbnB1dFZhbHVlLmxlbmd0aCA+IDIpIHtcclxuICAgICAgICBzZWFyY2hBc3NldHNcclxuICAgICAgICAgICAgLmZpbHRlcihhID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEub3B0aW9ucy5kZXNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBKU09OLnBhcnNlKGEub3B0aW9ucy5kZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInZpc2libGVcIiBpbiBkZXNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkZXNjcmlwdGlvbi52aXNpYmxlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBhLnN5bWJvbC5pbmRleE9mKGxvb2t1cFF1b3RlKSAhPT0gLTE7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5mb3JFYWNoKGFzc2V0ID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChhc3NldENvdW50ID4gMTAwKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBhc3NldENvdW50Kys7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGlzc3Vlck5hbWUgPSBmZXRjaElzc3Vlck5hbWUoYXNzZXQuaXNzdWVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgYmFzZSA9IGJhc2VBc3NldC5nZXQoXCJzeW1ib2xcIik7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWFya2V0SUQgPSBhc3NldC5zeW1ib2wgKyBcIl9cIiArIGJhc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGlzUXVvdGVBc3NldCA9IHF1b3RlU3ltYm9sID09IG1hcmtldFBpY2tlckFzc2V0O1xyXG4gICAgICAgICAgICAgICAgbGV0IGluY2x1ZGVBc3NldCA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGlzUXVvdGVBc3NldCAmJiBhc3NldC5zeW1ib2wgIT0gYmFzZVN5bWJvbCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAoIWlzUXVvdGVBc3NldCAmJiBhc3NldC5zeW1ib2wgIT0gcXVvdGVTeW1ib2wpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpbmNsdWRlQXNzZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGxNYXJrZXRzLnB1c2goW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXRJRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU6IGFzc2V0LnN5bWJvbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IGJhc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXJJZDogYXNzZXQuaXNzdWVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVyOiBpc3N1ZXJOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWFya2V0c0xpc3QgPSBzb3J0TWFya2V0c0xpc3QoYWxsTWFya2V0cywgaW5wdXRWYWx1ZSk7XHJcbiAgICBjaGVja0FuZFVwZGF0ZU1hcmtldExpc3QobWFya2V0c0xpc3QpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRNYXJrZXRTb3J0Q29tcG9uZW50cyhtYXJrZXQpIHtcclxuICAgIGNvbnN0IHdlaWdodCA9IHt9O1xyXG4gICAgY29uc3QgcXVvdGUgPSBtYXJrZXQucXVvdGU7XHJcbiAgICBpZiAocXVvdGUuaW5kZXhPZihcIi5cIikgIT09IC0xKSB7XHJcbiAgICAgICAgY29uc3QgW2dhdGV3YXksIGFzc2V0XSA9IHF1b3RlLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICB3ZWlnaHQuZ2F0ZXdheSA9IGdhdGV3YXk7XHJcbiAgICAgICAgd2VpZ2h0LmFzc2V0ID0gYXNzZXQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHdlaWdodC5hc3NldCA9IHF1b3RlO1xyXG4gICAgfVxyXG4gICAgaWYgKG1hcmtldC5pc3N1ZXJJZCA9PT0gXCIxLjIuMFwiKSB3ZWlnaHQuaXNDb21taXR0ZWUgPSB0cnVlO1xyXG4gICAgcmV0dXJuIHdlaWdodDtcclxufVxyXG5cclxuZnVuY3Rpb24gc29ydE1hcmtldHNMaXN0KGFsbE1hcmtldHMsIGlucHV0VmFsdWUpIHtcclxuICAgIGlmIChpbnB1dFZhbHVlLnN0YXJ0c1dpdGgoXCJCSVRcIikgJiYgaW5wdXRWYWx1ZS5sZW5ndGggPj0gNikge1xyXG4gICAgICAgIGlucHV0VmFsdWUgPSBpbnB1dFZhbHVlLnN1YnN0cigzLCBpbnB1dFZhbHVlLmxlbmd0aCAtIDEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFsbE1hcmtldHMuc29ydCgoWywgbWFya2V0QV0sIFssIG1hcmtldEJdKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2VpZ2h0QSA9IGdldE1hcmtldFNvcnRDb21wb25lbnRzKG1hcmtldEEpO1xyXG4gICAgICAgIGNvbnN0IHdlaWdodEIgPSBnZXRNYXJrZXRTb3J0Q29tcG9uZW50cyhtYXJrZXRCKTtcclxuXHJcbiAgICAgICAgaWYgKHdlaWdodEEuYXNzZXQgIT09IHdlaWdodEIuYXNzZXQpIHtcclxuICAgICAgICAgICAgaWYgKHdlaWdodEEuYXNzZXQgPT09IGlucHV0VmFsdWUpIHJldHVybiAtMTtcclxuICAgICAgICAgICAgaWYgKHdlaWdodEIuYXNzZXQgPT09IGlucHV0VmFsdWUpIHJldHVybiAxO1xyXG4gICAgICAgICAgICBpZiAod2VpZ2h0QS5hc3NldCA+IHdlaWdodEIuYXNzZXQpIHJldHVybiAtMTtcclxuICAgICAgICAgICAgaWYgKHdlaWdodEEuYXNzZXQgPCB3ZWlnaHRCLmFzc2V0KSByZXR1cm4gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh3ZWlnaHRBLmlzQ29tbWl0dGVlIF4gd2VpZ2h0Qi5pc0NvbW1pdHRlZSkge1xyXG4gICAgICAgICAgICBpZiAod2VpZ2h0QS5pc0NvbW1pdHRlZSkgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICBpZiAod2VpZ2h0Qi5pc0NvbW1pdHRlZSkgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBhSXNLbm93bkdhdGV3YXkgPSBoYXNHYXRld2F5UHJlZml4KG1hcmtldEEucXVvdGUpO1xyXG4gICAgICAgIGNvbnN0IGJJc0tub3duR2F0ZXdheSA9IGhhc0dhdGV3YXlQcmVmaXgobWFya2V0Qi5xdW90ZSk7XHJcbiAgICAgICAgaWYgKGFJc0tub3duR2F0ZXdheSAmJiAhYklzS25vd25HYXRld2F5KSByZXR1cm4gLTE7XHJcbiAgICAgICAgaWYgKGJJc0tub3duR2F0ZXdheSAmJiAhYUlzS25vd25HYXRld2F5KSByZXR1cm4gMTtcclxuXHJcbiAgICAgICAgaWYgKHdlaWdodEEuZ2F0ZXdheSA+IHdlaWdodEIuZ2F0ZXdheSkgcmV0dXJuIDE7XHJcbiAgICAgICAgaWYgKHdlaWdodEEuZ2F0ZXdheSA8IHdlaWdodEIuZ2F0ZXdheSkgcmV0dXJuIC0xO1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZldGNoSXNzdWVyTmFtZShpc3N1ZXJJZCkge1xyXG4gICAgbGV0IGlzc3VlciA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KGlzc3VlcklkLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgaWYgKCFpc3N1ZXIpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBpc3N1ZXIuZ2V0KFwibmFtZVwiKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtsb29rdXBBc3NldHMsIGFzc2V0RmlsdGVyLCBmZXRjaElzc3Vlck5hbWV9O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IHtNb2RhbCwgQnV0dG9ufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWJtaXQgPSB0aGlzLnN1Ym1pdC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsID0gdGhpcy5jYW5jZWwuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Gb3JjZSh2YWx1ZSwgZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5wcm9wcy5oaWRlTW9kYWwoKTtcclxuXHJcbiAgICAgICAgaWYgKHZhbHVlKSB0aGlzLnByb3BzLm9uRm9yY2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdWJtaXQoZSkge1xyXG4gICAgICAgIHRoaXMuX29uRm9yY2UodHJ1ZSwgZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuY2VsKGUpIHtcclxuICAgICAgICB0aGlzLl9vbkZvcmNlKGZhbHNlLCBlKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHt0eXBlLCBkaWZmLCBoYXNPcmRlcnN9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgY29uc3QgZm9vdGVyID0gW1xyXG4gICAgICAgICAgICA8QnV0dG9uIGtleT1cInN1Ym1pdFwiIG9uQ2xpY2s9e3RoaXMuc3VibWl0fT5cclxuICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJzZXR0aW5ncy55ZXNcIil9XHJcbiAgICAgICAgICAgIDwvQnV0dG9uPixcclxuICAgICAgICAgICAgPEJ1dHRvbiBrZXk9XCJjYW5jZWxcIiB0eXBlPVwicHJpbWFyeVwiIG9uQ2xpY2s9e3RoaXMuY2FuY2VsfT5cclxuICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJzZXR0aW5ncy5ub1wiKX1cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE1vZGFsXHJcbiAgICAgICAgICAgICAgICBmb290ZXI9e2Zvb3Rlcn1cclxuICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMucHJvcHMudmlzaWJsZX1cclxuICAgICAgICAgICAgICAgIG9uQ2FuY2VsPXt0aGlzLmNhbmNlbH1cclxuICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJ0cmFuc2FjdGlvbi5jb25maXJtXCIpfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgdmVydGljYWxcIj5cclxuICAgICAgICAgICAgICAgICAgICB7IWhhc09yZGVycyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17XCJleGNoYW5nZS5jb25maXJtX25vX29yZGVyc19cIiArIHR5cGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17XCJleGNoYW5nZS5jb25maXJtX1wiICsgdHlwZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmY9e3V0aWxzLmZvcm1hdF9udW1iZXIoZGlmZiwgMil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L01vZGFsPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtcclxuICAgIEJ1dHRvbixcclxuICAgIEZvcm0sXHJcbiAgICBTZWxlY3QsXHJcbiAgICBTbGlkZXIsXHJcbiAgICBTd2l0Y2gsXHJcbiAgICBJbnB1dCxcclxuICAgIElucHV0TnVtYmVyLFxyXG4gICAgTW9kYWwsXHJcbiAgICBJY29uLFxyXG4gICAgVG9vbHRpcFxyXG59IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IHtHcm91cE9yZGVyTGltaXRTZWxlY3Rvcn0gZnJvbSBcIi4vT3JkZXJCb29rXCI7XHJcbmltcG9ydCBTZXR0aW5nc0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvU2V0dGluZ3NBY3Rpb25zXCI7XHJcblxyXG5jbGFzcyBQZXJzb25hbGl6ZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgb3BlbjogZmFsc2UsXHJcbiAgICAgICAgICAgIHNtYWxsU2NyZWVuOiBmYWxzZSxcclxuICAgICAgICAgICAgYXV0b1Njcm9sbDogcHJvcHMudmlld1NldHRpbmdzLmdldChcImdsb2JhbF9BdXRvU2Nyb2xsXCIsIHRydWUpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRDaGFydEhlaWdodCA9IHRoaXMuc2V0Q2hhcnRIZWlnaHQuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHNtYWxsU2NyZWVuOiB3aW5kb3cuaW5uZXJXaWR0aCA8PSA4MDBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMucHJvcHMuaGlkZU1vZGFsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2hhcnRIZWlnaHQodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlQ2hhcnRIZWlnaHQoe1xyXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRBdXRvc2Nyb2xsKHRhcmdldCkge1xyXG4gICAgICAgIGxldCBuZXdTdGF0ZSA9IHRhcmdldCA9PSAxID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgYXV0b1Njcm9sbDogbmV3U3RhdGVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcclxuICAgICAgICAgICAgZ2xvYmFsX0F1dG9TY3JvbGw6IG5ld1N0YXRlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucHJvcHMub25TZXRBdXRvc2Nyb2xsKG5ld1N0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0R3JvdXBpbmdPcHRpb25zKHNlbGVjdEtleSkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxTZWxlY3RcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzZXR0aW5ncy5wbGFjZWhvbGRlcl9zZWxlY3RcIlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwifX1cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uU2V0UGFuZWxUYWJzLmJpbmQodGhpcywgc2VsZWN0S2V5KX1cclxuICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLnBhbmVsVGFic1tzZWxlY3RLZXldfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2Uuc2V0dGluZ3Mub3B0aW9ucy5ncm91cGluZ19zdGFuZGFsb25lXCIgLz5cclxuICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cclxuICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsxfT5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5zZXR0aW5ncy5vcHRpb25zLmdyb3VwaW5nXzFcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRpbmdzLm9wdGlvbnMuZ3JvdXBpbmdfMlwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XHJcbiAgICAgICAgICAgIDwvU2VsZWN0PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7Y2hhcnRUeXBlLCBjaGFydEhlaWdodH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8TW9kYWxcclxuICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJleGNoYW5nZS5zZXR0aW5ncy5oZWFkZXIudGl0bGVcIil9XHJcbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnByb3BzLnZpc2libGV9XHJcbiAgICAgICAgICAgICAgICBpZD17dGhpcy5wcm9wcy5tb2RhbElkfVxyXG4gICAgICAgICAgICAgICAgb3ZlcmxheT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgIGZvb3Rlcj17W1xyXG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b24ga2V5PXtcImNsb3NlXCJ9IG9uQ2xpY2s9e3RoaXMub25DbG9zZS5iaW5kKHRoaXMpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcIm1vZGFsLmNsb3NlXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgXX1cclxuICAgICAgICAgICAgICAgIG9uQ2FuY2VsPXt0aGlzLm9uQ2xvc2UuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgIG5vSGVhZGVyQ29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICByZWY9e3RoaXMucHJvcHMubW9kYWxJZH1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICA8aGVhZGVyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5zZXR0aW5ncy5oZWFkZXIuY2hhcnRfb3B0aW9uc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9oZWFkZXI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHshdGhpcy5wcm9wcy50aW55U2NyZWVuID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tb3ZlcmZsb3cgd3JhcCBzaHJpbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNiBzdHlsZT17e21hcmdpbjogOX19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5zZXR0aW5ncy50aXRsZS5jaGFydF90eXBlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGluZ3MudG9vbHRpcC5jaGFydF90eXBlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInF1ZXN0aW9uLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU9XCJmaWxsZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS5zZXR0aW5ncy50b29sdGlwLmNoYXJ0X3JlbG9hZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJpbmZvLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU9XCJmaWxsZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2V0dGluZ3MucGxhY2Vob2xkZXJfc2VsZWN0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCIxMDAlXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Y2hhcnRUeXBlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vblRvZ2dsZUNoYXJ0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT1cIm1hcmtldF9kZXB0aFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLm9yZGVyX2RlcHRoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9XCJwcmljZV9jaGFydFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLnByaWNlX2hpc3RvcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJoaWRkZW5fY2hhcnRcIn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGluZ3Mub3B0aW9ucy5oaWRkZW5fY2hhcnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tb3ZlcmZsb3cgd3JhcCBzaHJpbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDYgc3R5bGU9e3ttYXJnaW46IDl9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5zZXR0aW5ncy50aXRsZS5jaGFydF9oZWlnaHRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLnNldHRpbmdzLnRvb2x0aXAuY2hhcnRfaGVpZ2h0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicXVlc3Rpb24tY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lPVwiZmlsbGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBjaGFydEhlaWdodCA9PT0gXCJudW1iZXJcIiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFydEhlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5zZXRDaGFydEhlaWdodC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHshdGhpcy5wcm9wcy50aW55U2NyZWVuICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0VHlwZSA9PSBcInByaWNlX2NoYXJ0XCIgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNiBzdHlsZT17e21hcmdpbjogOX19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2Uuc2V0dGluZ3MudGl0bGUuY2hhcnRfdG9vbHNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGluZ3MudG9vbHRpcC5jaGFydF90b29sc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicXVlc3Rpb24tY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU9XCJmaWxsZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS5zZXR0aW5ncy50b29sdGlwLmNoYXJ0X3JlbG9hZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiaW5mby1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZT1cImZpbGxlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oNj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFN3aXRjaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW46IDZ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5wcm9wcy5jaGFydFRvb2xzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMucHJvcHMub25DaGFydFRvb2xzLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7IXRoaXMucHJvcHMudGlueVNjcmVlbiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFydFR5cGUgPT0gXCJwcmljZV9jaGFydFwiICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1vdmVyZmxvdyB3cmFwIHNocmlua1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDYgc3R5bGU9e3ttYXJnaW46IDl9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRpbmdzLnRpdGxlLmNoYXJ0X3pvb21cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGluZ3MudG9vbHRpcC5jaGFydF96b29tXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJxdWVzdGlvbi1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZT1cImZpbGxlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLnNldHRpbmdzLnRvb2x0aXAuY2hhcnRfcmVsb2FkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJpbmZvLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lPVwiZmlsbGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbjogNn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnByb3BzLmNoYXJ0Wm9vbX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uQ2hhcnRab29tLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8aGVhZGVyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5zZXR0aW5ncy5oZWFkZXIub3JkZXJfb3B0aW9uc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9oZWFkZXI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg2IHN0eWxlPXt7bWFyZ2luOiA5fX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2Uuc2V0dGluZ3MudGl0bGUub3JkZXJfYm9va19ncm91cGluZ1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGluZ3MudG9vbHRpcC5vcmRlcl9ib29rX2dyb3VwaW5nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicXVlc3Rpb24tY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lPVwiZmlsbGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy50cmFja2VkR3JvdXBzQ29uZmlnID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxHcm91cE9yZGVyTGltaXRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxTZXR0aW5nc1NlbGVjdG9yPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja2VkR3JvdXBzQ29uZmlnPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudHJhY2tlZEdyb3Vwc0NvbmZpZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUdyb3VwT3JkZXJMaW1pdENoYW5nZT17dGhpcy5wcm9wcy5oYW5kbGVHcm91cE9yZGVyTGltaXRDaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEdyb3VwT3JkZXJMaW1pdD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRHcm91cE9yZGVyTGltaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHshdGhpcy5wcm9wcy50aW55U2NyZWVuICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnByb3BzLnNtYWxsU2NyZWVuICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1vdmVyZmxvdyB3cmFwIHNocmlua1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDYgc3R5bGU9e3ttYXJnaW46IDl9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRpbmdzLnRpdGxlLm9yZGVyX3N0eWxlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLnNldHRpbmdzLnRvb2x0aXAub3JkZXJfc3R5bGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInF1ZXN0aW9uLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lPVwiZmlsbGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2V0dGluZ3MucGxhY2Vob2xkZXJfc2VsZWN0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiBcIjEwMCVcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5wcm9wcy52ZXJ0aWNhbE9yZGVyQm9vay50b1N0cmluZygpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q9e3RoaXMucHJvcHMub25Nb3ZlT3JkZXJCb29rLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1widHJ1ZVwifT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5zZXR0aW5ncy5vcHRpb25zLnZlcnRpY2FsXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImZhbHNlXCJ9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRpbmdzLm9wdGlvbnMuaG9yaXpvbnRhbFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHsvKiBPcmllbnRhdGlvbiBPcmRlciBGb3JtICovfVxyXG4gICAgICAgICAgICAgICAgICAgIHsoIXRoaXMucHJvcHMudGlueVNjcmVlbiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5wcm9wcy52ZXJ0aWNhbE9yZGVyQm9vaykgfHxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnNtYWxsU2NyZWVuID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ1RvcDogXCIwLjVlbVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg2IHN0eWxlPXt7bWFyZ2luOiA5fX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRpbmdzLnRpdGxlLnBvc2l0aW9uX29yZGVyX2Zvcm1cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS5zZXR0aW5ncy50b29sdGlwLnBvc2l0aW9uX29yZGVyX2Zvcm1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicXVlc3Rpb24tY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZT1cImZpbGxlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oNj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZXR0aW5ncy5wbGFjZWhvbGRlcl9zZWxlY3RcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiBcIjEwMCVcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLmZsaXBCdXlTZWxsLnRvU3RyaW5nKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXt0aGlzLnByb3BzLm9uRmxpcEJ1eVNlbGwuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImZhbHNlXCJ9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2Uuc2V0dGluZ3Mub3B0aW9ucy5wb3NpdGlvbl9vcmRlcl9mb3JtX29wdDFcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInRydWVcIn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5zZXR0aW5ncy5vcHRpb25zLnBvc2l0aW9uX29yZGVyX2Zvcm1fb3B0MlwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgey8qIE9yaWVudGF0aW9uIE9yZGVyIEJvb2sgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgeyghdGhpcy5wcm9wcy50aW55U2NyZWVuICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnByb3BzLnZlcnRpY2FsT3JkZXJCb29rKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuc21hbGxTY3JlZW4gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tb3ZlcmZsb3cgd3JhcCBzaHJpbmtcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nVG9wOiBcIjAuNWVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDYgc3R5bGU9e3ttYXJnaW46IDl9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2Uuc2V0dGluZ3MudGl0bGUucG9zaXRpb25fb3JkZXJfb3JkZXJzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGluZ3MudG9vbHRpcC5wb3NpdGlvbl9vcmRlcl9vcmRlcnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicXVlc3Rpb24tY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZT1cImZpbGxlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oNj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZXR0aW5ncy5wbGFjZWhvbGRlcl9zZWxlY3RcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiBcIjEwMCVcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLmZsaXBPcmRlckJvb2sudG9TdHJpbmcoKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q9e3RoaXMucHJvcHMub25GbGlwT3JkZXJCb29rLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJmYWxzZVwifT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRpbmdzLm9wdGlvbnMucG9zaXRpb25fb3JkZXJfb3JkZXJzX29wdDFcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInRydWVcIn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5zZXR0aW5ncy5vcHRpb25zLnBvc2l0aW9uX29yZGVyX29yZGVyc19vcHQyXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7LyogQXNzZXQgLyBPcmRlciBGb3JtIFBvc2l0aW9uICovfVxyXG4gICAgICAgICAgICAgICAgICAgIHsoIXRoaXMucHJvcHMudGlueVNjcmVlbiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5wcm9wcy52ZXJ0aWNhbE9yZGVyQm9vaykgfHxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnNtYWxsU2NyZWVuID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ1RvcDogXCIwLjVlbVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg2IHN0eWxlPXt7bWFyZ2luOiA5fX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRpbmdzLnRpdGxlLnBvc2l0aW9uX29yZGVyX2Fzc2V0XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGluZ3MudG9vbHRpcC5wb3NpdGlvbl9vcmRlcl9hc3NldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJxdWVzdGlvbi1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lPVwiZmlsbGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNldHRpbmdzLnBsYWNlaG9sZGVyX3NlbGVjdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMuYnV5U2VsbFRvcC50b1N0cmluZygpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdD17dGhpcy5wcm9wcy5vblRvZ2dsZUJ1eVNlbGxQb3NpdGlvbi5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZmFsc2VcIn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5zZXR0aW5ncy5vcHRpb25zLnBvc2l0aW9uX29yZGVyX2Fzc2V0X29wdDFcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInRydWVcIn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5zZXR0aW5ncy5vcHRpb25zLnBvc2l0aW9uX29yZGVyX2Fzc2V0X29wdDJcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHshdGhpcy5wcm9wcy50aW55U2NyZWVuICYmIHRoaXMucHJvcHMudmVydGljYWxPcmRlckJvb2sgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tb3ZlcmZsb3cgd3JhcCBzaHJpbmtcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nVG9wOiBcIjAuNWVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDYgc3R5bGU9e3ttYXJnaW46IDl9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2Uuc2V0dGluZ3MudGl0bGUub3JkZXJib29rX2F1dG9fc2Nyb2xsXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGluZ3MudG9vbHRpcC5vcmRlcmJvb2tfYXV0b19zY3JvbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicXVlc3Rpb24tY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZT1cImZpbGxlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oNj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFN3aXRjaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbjogNn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMuc3RhdGUuYXV0b1Njcm9sbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuc2V0QXV0b3Njcm9sbC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHshdGhpcy5wcm9wcy50aW55U2NyZWVuICYmIHRoaXMucHJvcHMudmVydGljYWxPcmRlckJvb2sgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1vdmVyZmxvdyB3cmFwIHNocmlua1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg2IHN0eWxlPXt7bWFyZ2luOiA5fX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRpbmdzLnRpdGxlLnJldmVyc2Vfb3JkZXJfYm9va1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLnNldHRpbmdzLnRvb2x0aXAucmV2ZXJzZV9vcmRlcl9ib29rXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInF1ZXN0aW9uLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU9XCJmaWxsZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTd2l0Y2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW46IDZ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnByb3BzLm9yZGVyQm9va1JldmVyc2VkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vbk9yZGVyQm9va1JldmVyc2VkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeyF0aGlzLnByb3BzLnRpbnlTY3JlZW4gJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tb3ZlcmZsb3cgd3JhcCBzaHJpbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiIHN0eWxlPXt7cGFkZGluZ1JpZ2h0OiA1fX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg2IHN0eWxlPXt7bWFyZ2luOiA5fX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRpbmdzLnRpdGxlLnNpbmdsZV9jb2x1bV9vcmRlcl9mb3JtXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGluZ3MudG9vbHRpcC5zaW5nbGVfY29sdW1fb3JkZXJfZm9ybVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJxdWVzdGlvbi1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lPVwiZmlsbGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luOiA2fX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5wcm9wcy5zaW5nbGVDb2x1bW5PcmRlckZvcm19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uVG9nZ2xlU2luZ2xlQ29sdW1uT3JkZXJGb3JtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7IXRoaXMucHJvcHMudGlueVNjcmVlbiAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoZWFkZXI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5zZXR0aW5ncy5oZWFkZXIucGFuZWxfZ3JvdXBpbmdcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGluZ3MudG9vbHRpcC5wYW5lbF9ncm91cGluZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvbiB0eXBlPVwicXVlc3Rpb24tY2lyY2xlXCIgdGhlbWU9XCJmaWxsZWRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2hlYWRlcj5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIHshdGhpcy5wcm9wcy50aW55U2NyZWVuICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1vdmVyZmxvdyB3cmFwIHNocmlua1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206IFwiMC41ZW1cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNiBzdHlsZT17e21hcmdpbjogOX19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5zZXR0aW5ncy50aXRsZS5teV90cmFkZXNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLl9nZXRHcm91cGluZ09wdGlvbnMoXCJteV9oaXN0b3J5XCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgeyF0aGlzLnByb3BzLnRpbnlTY3JlZW4gJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIwLjVlbVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg2IHN0eWxlPXt7bWFyZ2luOiA5fX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRpbmdzLnRpdGxlLm1hcmtldF90cmFkZXNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLl9nZXRHcm91cGluZ09wdGlvbnMoXCJoaXN0b3J5XCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgeyF0aGlzLnByb3BzLnRpbnlTY3JlZW4gJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIwLjVlbVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg2IHN0eWxlPXt7bWFyZ2luOiA5fX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRpbmdzLnRpdGxlLm9wZW5fb3JkZXJzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5fZ2V0R3JvdXBpbmdPcHRpb25zKFwibXlfb3JkZXJzXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgeyF0aGlzLnByb3BzLnRpbnlTY3JlZW4gJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIwLjVlbVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg2IHN0eWxlPXt7bWFyZ2luOiA5fX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRpbmdzLnRpdGxlLnNldHRsZW1lbnRzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5fZ2V0R3JvdXBpbmdPcHRpb25zKFwib3Blbl9zZXR0bGVtZW50XCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHshdGhpcy5wcm9wcy50aW55U2NyZWVuICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGhlYWRlcj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRpbmdzLmhlYWRlci5nZW5lcmFsXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oZWFkZXI+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeyF0aGlzLnByb3BzLnRpbnlTY3JlZW4gJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMucHJvcHMuc21hbGxTY3JlZW4gJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tb3ZlcmZsb3cgd3JhcCBzaHJpbmtcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIwLjVlbVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNtYWxsLTZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdSaWdodDogNX19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDYgc3R5bGU9e3ttYXJnaW46IDl9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnNldHRpbmdzLnRpdGxlLm1hcmtldF9sb2NhdGlvblwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS5zZXR0aW5ncy50b29sdGlwLm1hcmtldF9sb2NhdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicXVlc3Rpb24tY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU9XCJmaWxsZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZXR0aW5ncy5wbGFjZWhvbGRlcl9zZWxlY3RcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLm1pcnJvclBhbmVscy50b1N0cmluZygpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q9e3RoaXMucHJvcHMub25NaXJyb3JQYW5lbHMuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJmYWxzZVwifT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJzZXR0aW5ncy5sZWZ0XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInRydWVcIn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwic2V0dGluZ3MucmlnaHRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7IXRoaXMucHJvcHMudGlueVNjcmVlbiAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1vdmVyZmxvdyB3cmFwIHNocmlua1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC02XCIgc3R5bGU9e3twYWRkaW5nUmlnaHQ6IDV9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDYgc3R5bGU9e3ttYXJnaW46IDl9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2Uuc2V0dGluZ3MudGl0bGUucmVkdWNlX3Njcm9sbGJhcnNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS5zZXR0aW5ncy50b29sdGlwLnJlZHVjZV9zY3JvbGxiYXJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInF1ZXN0aW9uLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU9XCJmaWxsZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS5zZXR0aW5ncy50b29sdGlwLnJlbG9hZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJpbmZvLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU9XCJmaWxsZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTd2l0Y2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW46IDZ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnByb3BzLmhpZGVTY3JvbGxiYXJzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vblRvZ2dsZVNjcm9sbGJhcnMuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHshdGhpcy5wcm9wcy50aW55U2NyZWVuICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW92ZXJmbG93IHdyYXAgc2hyaW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTZcIiBzdHlsZT17e3BhZGRpbmdSaWdodDogNX19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNiBzdHlsZT17e21hcmdpbjogOX19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5zZXR0aW5ncy50aXRsZS5oaWRlX2Z1bmN0aW9uX2J1dHRvbnNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS5zZXR0aW5ncy50b29sdGlwLmhpZGVfZnVuY3Rpb25fYnV0dG9uc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJxdWVzdGlvbi1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lPVwiZmlsbGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luOiA2fX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5wcm9wcy5oaWRlRnVuY3Rpb25CdXR0b25zfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vbkhpZGVGdW5jdGlvbkJ1dHRvbnMuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cclxuICAgICAgICAgICAgPC9Nb2RhbD5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQZXJzb25hbGl6ZTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuY29uc3QgVHJhZGluZ1ZpZXcgPSByZXF1aXJlKFwiLi4vLi4vLi4vY2hhcnRpbmdfbGlicmFyeS9jaGFydGluZ19saWJyYXJ5Lm1pbi5qc1wiKTtcbmltcG9ydCBjb2xvcnMgZnJvbSBcImFzc2V0cy9jb2xvcnNcIjtcbmltcG9ydCB7Z2V0UmVzb2x1dGlvbnNGcm9tQnVja2V0cywgZ2V0VFZUaW1lem9uZX0gZnJvbSBcIi4vdHJhZGluZ1ZpZXdDbGFzc2VzXCI7XG5pbXBvcnQge01vZGFsLCBJbnB1dCwgVGFibGUsIEJ1dHRvbiwgSWNvbn0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XG5pbXBvcnQgU2V0dGluZ3NBY3Rpb25zIGZyb20gXCJhY3Rpb25zL1NldHRpbmdzQWN0aW9uc1wiO1xuaW1wb3J0IHtjb25uZWN0fSBmcm9tIFwiYWx0LXJlYWN0XCI7XG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XG5cbi8vIGltcG9ydCBNYXJrZXRzU3RvcmUgZnJvbSBcInN0b3Jlcy9NYXJrZXRzU3RvcmVcIjtcblxuY2xhc3MgVHJhZGluZ1ZpZXdQcmljZUNoYXJ0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2hvd1NhdmVNb2RhbDogZmFsc2UsXG4gICAgICAgICAgICBzaG93TG9hZE1vZGFsOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxheW91dE5hbWUgPSBSZWFjdC5jcmVhdGVSZWYoKTtcbiAgICAgICAgdGhpcy5oaWRlTW9kYWwgPSB0aGlzLmhpZGVNb2RhbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlc2V0RXJyb3IgPSB0aGlzLnJlc2V0RXJyb3IuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5sb2FkTGFzdENoYXJ0ID0gdGhpcy5sb2FkTGFzdENoYXJ0LmJpbmQodGhpcyk7XG4gICAgfVxuICAgIGxvYWRUcmFkaW5nVmlldyhwcm9wcykge1xuICAgICAgICBjb25zdCB7ZGF0YUZlZWR9ID0gcHJvcHM7XG4gICAgICAgIGxldCB0aGVtZUNvbG9ycyA9IGNvbG9yc1twcm9wcy50aGVtZV07XG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIGlmICghZGF0YUZlZWQpIHJldHVybjtcbiAgICAgICAgaWYgKCEhdGhpcy50dldpZGdldCkgcmV0dXJuO1xuXG4gICAgICAgIGlmIChfX0RFVl9fKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgXCJjdXJyZW50UmVzb2x1dGlvblwiLFxuICAgICAgICAgICAgICAgIGdldFJlc29sdXRpb25zRnJvbUJ1Y2tldHMoW3Byb3BzLmJ1Y2tldFNpemVdKVswXSxcbiAgICAgICAgICAgICAgICBcInN5bWJvbFwiLFxuICAgICAgICAgICAgICAgIHByb3BzLnF1b3RlU3ltYm9sICsgXCJfXCIgKyBwcm9wcy5iYXNlU3ltYm9sLFxuICAgICAgICAgICAgICAgIFwidGltZXpvbmU6XCIsXG4gICAgICAgICAgICAgICAgZ2V0VFZUaW1lem9uZSgpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGRhdGFGZWVkLnVwZGF0ZSh7XG4gICAgICAgICAgICByZXNvbHV0aW9uczogcHJvcHMuYnVja2V0cyxcbiAgICAgICAgICAgIHRpY2tlcjogcHJvcHMucXVvdGVTeW1ib2wgKyBcIl9cIiArIHByb3BzLmJhc2VTeW1ib2wsXG4gICAgICAgICAgICBpbnRlcnZhbDogZ2V0UmVzb2x1dGlvbnNGcm9tQnVja2V0cyhbcHJvcHMuYnVja2V0U2l6ZV0pWzBdXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBkaXNhYmxlZF9mZWF0dXJlcyA9IFtcbiAgICAgICAgICAgIFwic3ltYm9sX2luZm9cIixcbiAgICAgICAgICAgIFwic3ltYm9sX3NlYXJjaF9ob3Rfa2V5XCIsXG4gICAgICAgICAgICBcImJvcmRlcl9hcm91bmRfdGhlX2NoYXJ0XCIsXG4gICAgICAgICAgICBcImhlYWRlcl9zeW1ib2xfc2VhcmNoXCIsXG4gICAgICAgICAgICBcImhlYWRlcl9jb21wYXJlXCIsXG4gICAgICAgICAgICBcImhlYWRlcl9zYXZlbG9hZFwiXG4gICAgICAgIF07XG5cbiAgICAgICAgbGV0IGVuYWJsZWRfZmVhdHVyZXMgPSBbXTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5tb2JpbGUgfHwgIXRoaXMucHJvcHMuY2hhcnRab29tKSB7XG4gICAgICAgICAgICBkaXNhYmxlZF9mZWF0dXJlcy5wdXNoKFwiY2hhcnRfc2Nyb2xsXCIpO1xuICAgICAgICAgICAgZGlzYWJsZWRfZmVhdHVyZXMucHVzaChcImNoYXJ0X3pvb21cIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5tb2JpbGUgfHwgIXRoaXMucHJvcHMuY2hhcnRUb29scykge1xuICAgICAgICAgICAgZGlzYWJsZWRfZmVhdHVyZXMucHVzaChcImxlZnRfdG9vbGJhclwiKTtcbiAgICAgICAgICAgIGRpc2FibGVkX2ZlYXR1cmVzLnB1c2goXCJjaGFydF9jcm9zc2hhaXJfbWVudVwiKTtcbiAgICAgICAgICAgIGRpc2FibGVkX2ZlYXR1cmVzLnB1c2goXCJjaGFydF9ldmVudHNcIik7XG4gICAgICAgICAgICBkaXNhYmxlZF9mZWF0dXJlcy5wdXNoKFwiZm9vdGVyX3NoYXJlX2J1dHRvbnNcIik7XG4gICAgICAgICAgICBkaXNhYmxlZF9mZWF0dXJlcy5wdXNoKFwiZm9vdGVyX3NjcmVlbnNob3RcIik7XG4gICAgICAgICAgICBkaXNhYmxlZF9mZWF0dXJlcy5wdXNoKFwiZm9vdGVyX3B1Ymxpc2hfaWRlYV9idXR0b25cIik7XG4gICAgICAgICAgICBkaXNhYmxlZF9mZWF0dXJlcy5wdXNoKFwiY2FwdGlvbl9idXR0b25zX3RleHRfaWZfcG9zc2libGVcIik7XG4gICAgICAgICAgICBkaXNhYmxlZF9mZWF0dXJlcy5wdXNoKFwibGluZV90b29sX3RlbXBsYXRlc1wiKTtcbiAgICAgICAgICAgIGRpc2FibGVkX2ZlYXR1cmVzLnB1c2goXCJ3aWRnZXRiYXJfdGFic1wiKTtcbiAgICAgICAgICAgIGRpc2FibGVkX2ZlYXR1cmVzLnB1c2goXCJzdXBwb3J0X21hbmFnZV9kcmF3aW5nc1wiKTtcbiAgICAgICAgICAgIGRpc2FibGVkX2ZlYXR1cmVzLnB1c2goXCJzdXBwb3J0X211bHRpY2hhcnRzXCIpO1xuICAgICAgICAgICAgZGlzYWJsZWRfZmVhdHVyZXMucHVzaChcInJpZ2h0X2Jhcl9zdGF5c19vbl9zY3JvbGxcIik7XG4gICAgICAgICAgICBkaXNhYmxlZF9mZWF0dXJlcy5wdXNoKFwiY2hhcnRzX2F1dG9fc2F2ZVwiKTtcbiAgICAgICAgICAgIGRpc2FibGVkX2ZlYXR1cmVzLnB1c2goXCJlZGl0X2J1dHRvbnNfaW5fbGVnZW5kXCIpO1xuICAgICAgICAgICAgZGlzYWJsZWRfZmVhdHVyZXMucHVzaChcImNvbnRleHRfbWVudXNcIik7XG4gICAgICAgICAgICBkaXNhYmxlZF9mZWF0dXJlcy5wdXNoKFwiY29udHJvbF9iYXJcIik7XG4gICAgICAgICAgICBkaXNhYmxlZF9mZWF0dXJlcy5wdXNoKFwiaGVhZGVyX2Z1bGxzY3JlZW5fYnV0dG9uXCIpO1xuICAgICAgICAgICAgZGlzYWJsZWRfZmVhdHVyZXMucHVzaChcImhlYWRlcl93aWRnZXRcIik7XG4gICAgICAgICAgICBkaXNhYmxlZF9mZWF0dXJlcy5wdXNoKFwic3ltYm9sbGlzdF9jb250ZXh0X21lbnVcIik7XG4gICAgICAgICAgICBkaXNhYmxlZF9mZWF0dXJlcy5wdXNoKFwic2hvd19wcm9fZmVhdHVyZXNcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbmFibGVkX2ZlYXR1cmVzLnB1c2goXCJzdHVkeV90ZW1wbGF0ZXNcIik7XG4gICAgICAgICAgICBlbmFibGVkX2ZlYXR1cmVzLnB1c2goXCJrZWVwX2xlZnRfdG9vbGJhcl92aXNpYmxlX29uX3NtYWxsX3NjcmVlbnNcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX19ERVZfXykgY29uc29sZS5sb2coXCIqKiogTG9hZCBDaGFydCAqKipcIik7XG4gICAgICAgIGlmIChfX0RFVl9fKSBjb25zb2xlLnRpbWUoXCIqKiogQ2hhcnQgbG9hZCB0aW1lOiBcIik7XG5cbiAgICAgICAgdGhpcy50dldpZGdldCA9IG5ldyBUcmFkaW5nVmlldy53aWRnZXQoe1xuICAgICAgICAgICAgZnVsbHNjcmVlbjogZmFsc2UsXG4gICAgICAgICAgICBzeW1ib2w6IHByb3BzLnF1b3RlU3ltYm9sICsgXCJfXCIgKyBwcm9wcy5iYXNlU3ltYm9sLFxuICAgICAgICAgICAgaW50ZXJ2YWw6IGdldFJlc29sdXRpb25zRnJvbUJ1Y2tldHMoW3Byb3BzLmJ1Y2tldFNpemVdKVswXSxcbiAgICAgICAgICAgIGxpYnJhcnlfcGF0aDogYCR7XG4gICAgICAgICAgICAgICAgX19FTEVDVFJPTl9fID8gX19CQVNFX1VSTF9fIDogXCJcIlxuICAgICAgICAgICAgfS9jaGFydGluZ19saWJyYXJ5L2AsXG4gICAgICAgICAgICBkYXRhZmVlZDogZGF0YUZlZWQsXG4gICAgICAgICAgICBjb250YWluZXJfaWQ6IFwidHZfY2hhcnRcIixcbiAgICAgICAgICAgIGNoYXJ0c19zdG9yYWdlX3VybDogXCJodHRwczovL3NhdmVsb2FkLnRyYWRpbmd2aWV3LmNvbVwiLFxuICAgICAgICAgICAgY2hhcnRzX3N0b3JhZ2VfYXBpX3ZlcnNpb246IFwiMS4xXCIsXG4gICAgICAgICAgICBjbGllbnRfaWQ6IFwidHJhZGluZ3ZpZXcuY29tXCIsXG4gICAgICAgICAgICB1c2VyX2lkOiBcInB1YmxpY191c2VyX2lkXCIsXG4gICAgICAgICAgICBhdXRvc2l6ZTogdHJ1ZSxcbiAgICAgICAgICAgIGxvY2FsZTogcHJvcHMubG9jYWxlLFxuICAgICAgICAgICAgdGltZXpvbmU6IGdldFRWVGltZXpvbmUoKSxcbiAgICAgICAgICAgIHRvb2xiYXJfYmc6IHRoZW1lQ29sb3JzLmJnQ29sb3IsXG4gICAgICAgICAgICBvdmVycmlkZXM6IHtcbiAgICAgICAgICAgICAgICBcInBhbmVQcm9wZXJ0aWVzLmJhY2tncm91bmRcIjogdGhlbWVDb2xvcnMuYmdDb2xvcixcbiAgICAgICAgICAgICAgICBcInBhbmVQcm9wZXJ0aWVzLmhvcnpHcmlkUHJvcGVydGllcy5jb2xvclwiOlxuICAgICAgICAgICAgICAgICAgICB0aGVtZUNvbG9ycy5heGlzTGluZUNvbG9yLFxuICAgICAgICAgICAgICAgIFwicGFuZVByb3BlcnRpZXMudmVydEdyaWRQcm9wZXJ0aWVzLmNvbG9yXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoZW1lQ29sb3JzLmF4aXNMaW5lQ29sb3IsXG4gICAgICAgICAgICAgICAgXCJzY2FsZXNQcm9wZXJ0aWVzLmxpbmVDb2xvclwiOiB0aGVtZUNvbG9ycy5heGlzTGluZUNvbG9yLFxuICAgICAgICAgICAgICAgIFwic2NhbGVzUHJvcGVydGllcy50ZXh0Q29sb3JcIjogdGhlbWVDb2xvcnMudGV4dENvbG9yXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3VzdG9tX2Nzc191cmw6IHByb3BzLnRoZW1lICsgXCIuY3NzXCIsXG4gICAgICAgICAgICBlbmFibGVkX2ZlYXR1cmVzOiBlbmFibGVkX2ZlYXR1cmVzLFxuICAgICAgICAgICAgZGlzYWJsZWRfZmVhdHVyZXM6IGRpc2FibGVkX2ZlYXR1cmVzLFxuICAgICAgICAgICAgZGVidWc6IGZhbHNlLFxuICAgICAgICAgICAgcHJlc2V0OiB0aGlzLnByb3BzLm1vYmlsZSA/IFwibW9iaWxlXCIgOiBcIlwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudHZXaWRnZXQub25DaGFydFJlYWR5KCgpID0+IHtcbiAgICAgICAgICAgIGlmIChfX0RFVl9fKSBjb25zb2xlLmxvZyhcIioqKiBDaGFydCBSZWFkeSAqKipcIik7XG4gICAgICAgICAgICBpZiAoX19ERVZfXykgY29uc29sZS50aW1lRW5kKFwiKioqIENoYXJ0IGxvYWQgdGltZTogXCIpO1xuICAgICAgICAgICAgdGhpcy50dldpZGdldFxuICAgICAgICAgICAgICAgIC5jcmVhdGVCdXR0b24oKVxuICAgICAgICAgICAgICAgIC5hdHRyKFxuICAgICAgICAgICAgICAgICAgICBcInRpdGxlXCIsXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImV4Y2hhbmdlLmxvYWRfY3VzdG9tX2NoYXJ0c1wiKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJhcHBseS1jb21tb24tdG9vbHRpcFwiKVxuICAgICAgICAgICAgICAgIC5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zZXRTdGF0ZSh7c2hvd0xvYWRNb2RhbDogdHJ1ZX0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgYDxzcGFuPiR7Y291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJleGNoYW5nZS5jaGFydF9sb2FkXCJcbiAgICAgICAgICAgICAgICAgICAgKX08L3NwYW4+YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLnR2V2lkZ2V0XG4gICAgICAgICAgICAgICAgLmNyZWF0ZUJ1dHRvbigpXG4gICAgICAgICAgICAgICAgLmF0dHIoXG4gICAgICAgICAgICAgICAgICAgIFwidGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgY291bnRlcnBhcnQudHJhbnNsYXRlKFwiZXhjaGFuZ2Uuc2F2ZV9jdXN0b21fY2hhcnRzXCIpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImFwcGx5LWNvbW1vbi10b29sdGlwXCIpXG4gICAgICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnNldFN0YXRlKHtzaG93U2F2ZU1vZGFsOiB0cnVlfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICBgPHNwYW4+JHtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLmNoYXJ0X3NhdmVcIlxuICAgICAgICAgICAgICAgICAgICApfTwvc3Bhbj5gXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZGF0YUZlZWQudXBkYXRlKHtcbiAgICAgICAgICAgICAgICBvbk1hcmtldENoYW5nZTogdGhpcy5fc2V0U3ltYm9sLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5sb2FkTGFzdENoYXJ0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX29uV2hlZWwgPSB0aGlzLl9vbldoZWVsLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhucCkge1xuICAgICAgICBpZiAoIW5wLm1hcmtldFJlYWR5KSByZXR1cm47XG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5kYXRhRmVlZCAmJiBucC5kYXRhRmVlZCkge1xuICAgICAgICAgICAgdGhpcy5sb2FkVHJhZGluZ1ZpZXcobnApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3NldFN5bWJvbCh0aWNrZXIpIHtcbiAgICAgICAgaWYgKHRoaXMudHZXaWRnZXQpIHtcbiAgICAgICAgICAgIHRoaXMudHZXaWRnZXQuY2hhcnQoKS5yZW1vdmVBbGxTaGFwZXMoKTtcbiAgICAgICAgICAgIHRoaXMubG9hZExhc3RDaGFydCgpO1xuICAgICAgICAgICAgdGhpcy50dldpZGdldC5zZXRTeW1ib2woXG4gICAgICAgICAgICAgICAgdGlja2VyLFxuICAgICAgICAgICAgICAgIGdldFJlc29sdXRpb25zRnJvbUJ1Y2tldHMoW3RoaXMucHJvcHMuYnVja2V0U2l6ZV0pWzBdXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMubG9hZFRyYWRpbmdWaWV3KHRoaXMucHJvcHMpO1xuXG4gICAgICAgIC8vIGNvbnRpbnVlIGludmVzdGlnYXRpbmcgaG93IHRvIGRpc2FibGUgbW91c2Ugd2hlZWwsIGhlcmUgYXJlIHRoZSBjb250YWludGVkIGRvY3NcbiAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0dl9jaGFydFwiKS5jaGlsZHJlblswXS5jb250ZW50V2luZG93XG4gICAgICAgIC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHZfY2hhcnRcIikuY2hpbGRyZW5bMF0uY29udGVudERvY3VtZW50XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHRoaXMucHJvcHMuZGF0YUZlZWQuY2xlYXJTdWJzKCk7XG4gICAgfVxuXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5wLCBzdGF0ZSkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgc3RhdGUuc2hvd0xvYWRNb2RhbCAhPT0gdGhpcy5zdGF0ZS5zaG93TG9hZE1vZGFsIHx8XG4gICAgICAgICAgICBzdGF0ZS5zaG93U2F2ZU1vZGFsICE9PSB0aGlzLnN0YXRlLnNob3dTYXZlTW9kYWwgfHxcbiAgICAgICAgICAgIG5wLmNoYXJ0SGVpZ2h0ICE9PSB0aGlzLnByb3BzLmNoYXJ0SGVpZ2h0IHx8XG4gICAgICAgICAgICB0aGlzLnByb3BzLmNoYXJ0cy5zaXplICE9PSBucC5jaGFydHMuc2l6ZSB8fFxuICAgICAgICAgICAgIXRoaXMudHZXaWRnZXQgfHxcbiAgICAgICAgICAgIG5wLm1hcmtldFJlYWR5XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgX29uV2hlZWwoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlRlc3Qgd2hlZWwgaW50ZXJjZXB0aW9uXCIpO1xuICAgIH1cblxuICAgIG9uU3VibWl0Q29uZmlybWF0aW9uKGUpIHtcbiAgICAgICAgY29uc3Qge2xheW91dE5hbWV9ID0gdGhpcztcbiAgICAgICAgY29uc3QgZXJyb3IgPSB0aGlzLnByb3BzLmNoYXJ0cy5zb21lKFxuICAgICAgICAgICAgY2hhcnQgPT5cbiAgICAgICAgICAgICAgICBjaGFydC5rZXkgPT09IGxheW91dE5hbWUuY3VycmVudC5zdGF0ZS52YWx1ZSAmJlxuICAgICAgICAgICAgICAgIGNoYXJ0LnN5bWJvbCA9PT1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5xdW90ZVN5bWJvbCArIFwiX1wiICsgdGhpcy5wcm9wcy5iYXNlU3ltYm9sXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuICAgICAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0RXJyb3IoKTtcbiAgICAgICAgICAgIHRoaXMudHZXaWRnZXQuc2F2ZShmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBsZXQgY2hhcnQgPSB7fTtcbiAgICAgICAgICAgICAgICBjaGFydC5rZXkgPSBsYXlvdXROYW1lLmN1cnJlbnQuc3RhdGUudmFsdWUgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICBjaGFydC5vYmplY3QgPSBvYmplY3Q7XG4gICAgICAgICAgICAgICAgY2hhcnQubmFtZSA9IGxheW91dE5hbWUuY3VycmVudC5zdGF0ZS52YWx1ZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIGNoYXJ0LnN5bWJvbCA9XG4gICAgICAgICAgICAgICAgICAgIHRoYXQucHJvcHMucXVvdGVTeW1ib2wgKyBcIl9cIiArIHRoYXQucHJvcHMuYmFzZVN5bWJvbDtcbiAgICAgICAgICAgICAgICBjaGFydC5tb2RpZmllZCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZW4tVVNcIik7XG4gICAgICAgICAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmFkZENoYXJ0TGF5b3V0KGNoYXJ0KTtcbiAgICAgICAgICAgICAgICB0aGF0LnNldFN0YXRlKHtzaG93U2F2ZU1vZGFsOiBmYWxzZX0sICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQubGF5b3V0TmFtZS5jdXJyZW50LnN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmxheW91dE5hbWUuY3VycmVudC5zdGF0ZS52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZXJyb3J9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoaWRlTW9kYWwoKSB7XG4gICAgICAgIHRoaXMucmVzZXRFcnJvcigpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93U2F2ZU1vZGFsOiBmYWxzZSwgc2hvd0xvYWRNb2RhbDogZmFsc2V9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVEZWxldGUobmFtZSkge1xuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuZGVsZXRlQ2hhcnRMYXlvdXQobmFtZSk7XG4gICAgfVxuXG4gICAgcmVzZXRFcnJvcigpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6IGZhbHNlfSk7XG4gICAgfVxuXG4gICAgbG9hZExhc3RDaGFydCgpIHtcbiAgICAgICAgY29uc3Qge2NoYXJ0cywgcXVvdGVTeW1ib2wsIGJhc2VTeW1ib2x9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICBjb25zdCBjaGFydCA9IGNoYXJ0c1xuICAgICAgICAgICAgLnRvQXJyYXkoKVxuICAgICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgICAgICBjaGFydCA9PlxuICAgICAgICAgICAgICAgICAgICBjaGFydC5zeW1ib2wgPT09IHF1b3RlU3ltYm9sICsgXCJfXCIgKyBiYXNlU3ltYm9sICYmXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0LmVuYWJsZWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIGNoYXJ0WzBdICYmIHRoaXMudHZXaWRnZXQubG9hZChjaGFydFswXS5vYmplY3QpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge2NoYXJ0cywgcXVvdGVTeW1ib2wsIGJhc2VTeW1ib2x9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3Qge2Vycm9yfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGxldCBfZXJyb3IgPSBlcnJvciA/IFwiaGFzLWVycm9yXCIgOiBcIlwiO1xuICAgICAgICBsZXQgZGF0YVNvdXJjZSA9IGNoYXJ0c1xuICAgICAgICAgICAgLnRvQXJyYXkoKVxuICAgICAgICAgICAgLmZpbHRlcihjaGFydCA9PiBjaGFydC5zeW1ib2wgPT09IHF1b3RlU3ltYm9sICsgXCJfXCIgKyBiYXNlU3ltYm9sKTtcbiAgICAgICAgY29uc3QgY29sdW1ucyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogY291bnRlcnBhcnQudHJhbnNsYXRlKFwiZXhjaGFuZ2UubGF5b3V0X25hbWVcIiksXG4gICAgICAgICAgICAgICAgZGF0YUluZGV4OiBcIm5hbWVcIixcbiAgICAgICAgICAgICAgICBrZXk6IFwibmFtZVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBjb3VudGVycGFydC50cmFuc2xhdGUoXCJleGNoYW5nZS5tb2RpZmllZFwiKSxcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwibW9kaWZpZWRcIixcbiAgICAgICAgICAgICAgICBrZXk6IFwibW9kaWZpZWRcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogY291bnRlcnBhcnQudHJhbnNsYXRlKFwiZXhjaGFuZ2UuYWN0aW9uc1wiKSxcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwiYWN0aW9uc1wiLFxuICAgICAgICAgICAgICAgIGtleTogXCJhY3Rpb25zXCIsXG4gICAgICAgICAgICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiMzJweFwifX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZURlbGV0ZS5iaW5kKHRoaXMsIHJlY29yZC5uYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiZGVsZXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IG9uUm93ID0gcmVjb3JkID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgb25DbGljazogZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmxvY2FsTmFtZSA9PT0gXCJ0ZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVNb2RhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmFkZENoYXJ0TGF5b3V0KHJlY29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR2V2lkZ2V0LmxvYWQocmVjb3JkLm9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuY2hpbGRFbGVtZW50Q291bnQgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZU1vZGFsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMlwiPlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZXhjaGFuZ2UtYm9yZGVyZWRcIlxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2hlaWdodDogdGhpcy5wcm9wcy5jaGFydEhlaWdodCArIFwicHhcIn19XG4gICAgICAgICAgICAgICAgICAgIGlkPVwidHZfY2hhcnRcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPE1vZGFsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJleGNoYW5nZS5sb2FkX2NoYXJ0X2xheW91dFwiKX1cbiAgICAgICAgICAgICAgICAgICAgY2xvc2FibGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLnNob3dMb2FkTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgIGZvb3Rlcj17W1xuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBrZXk9XCJjYW5jZWxcIiBvbkNsaWNrPXt0aGlzLmhpZGVNb2RhbH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcIm1vZGFsLmNsb3NlXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VGFibGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U9e2RhdGFTb3VyY2UgfHwgW119XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25Sb3c9e29uUm93fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvTW9kYWw+XG4gICAgICAgICAgICAgICAgPE1vZGFsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLnNhdmVfbmV3X2NoYXJ0X2xheW91dFwiXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIGNsb3NhYmxlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZT17dGhpcy5zdGF0ZS5zaG93U2F2ZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICBmb290ZXI9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9XCJzdWJtaXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uU3VibWl0Q29uZmlybWF0aW9uLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcIm1vZGFsLnNhdmVcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj4sXG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIGtleT1cImNhbmNlbFwiIG9uQ2xpY2s9e3RoaXMuaGlkZU1vZGFsfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwibW9kYWwuY2xvc2VcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3IgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtfZXJyb3J9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5jaGFydF9lcnJvclwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17X2Vycm9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckJvdHRvbTogXCIjQTA5RjlGIDFweCBkb3R0ZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLmVudGVyX2NoYXJ0X2xheW91dF9uYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXt0aGlzLmxheW91dE5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnJlc2V0RXJyb3J9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUHJlc3NFbnRlcj17dGhpcy5vblN1Ym1pdENvbmZpcm1hdGlvbi5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvTW9kYWw+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QoXG4gICAgVHJhZGluZ1ZpZXdQcmljZUNoYXJ0LFxuICAgIHtcbiAgICAgICAgbGlzdGVuVG8oKSB7XG4gICAgICAgICAgICByZXR1cm4gW1NldHRpbmdzU3RvcmVdO1xuICAgICAgICB9LFxuICAgICAgICBnZXRQcm9wcygpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY2hhcnRzOiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkuY2hhcnRMYXlvdXRzXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuKTtcbiIsIiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP2UoZXhwb3J0cyk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJleHBvcnRzXCJdLGUpOmUodC5UcmFkaW5nVmlldz10LlRyYWRpbmdWaWV3fHx7fSl9KHRoaXMsZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZSh0LG8pe3ZhciBpPW4oe30sdCk7Zm9yKHZhciBzIGluIG8pXCJvYmplY3RcIiE9dHlwZW9mIHRbc118fG51bGw9PT10W3NdfHxBcnJheS5pc0FycmF5KHRbc10pP3ZvaWQgMCE9PW9bc10mJihpW3NdPW9bc10pOmlbc109ZSh0W3NdLG9bc10pO3JldHVybiBpfWZ1bmN0aW9uIG8oKXtyZXR1cm5cIjEuMTIgKGludGVybmFsIGlkIDYzMGI3MDRhIEAgMjAxOC0wNi0wNiAwMjoxNjoxMS4zMDU1MDkpXCJ9ZnVuY3Rpb24gaSh0KXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIix0LCExKX12YXIgbj1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUsbz1hcmd1bWVudHMsaT0xLG49YXJndW1lbnRzLmxlbmd0aDtpPG47aSsrKXtlPW9baV07Zm9yKHZhciBzIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscykmJih0W3NdPWVbc10pfXJldHVybiB0fSxzPXttb2JpbGU6e2Rpc2FibGVkX2ZlYXR1cmVzOltcImxlZnRfdG9vbGJhclwiLFwiaGVhZGVyX3dpZGdldFwiLFwidGltZWZyYW1lc190b29sYmFyXCIsXCJlZGl0X2J1dHRvbnNfaW5fbGVnZW5kXCIsXCJjb250ZXh0X21lbnVzXCIsXCJjb250cm9sX2JhclwiLFwiYm9yZGVyX2Fyb3VuZF90aGVfY2hhcnRcIl0sZW5hYmxlZF9mZWF0dXJlczpbXX19LHI9e3dpZHRoOjgwMCxoZWlnaHQ6NTAwLHN5bWJvbDpcIkFBXCIsaW50ZXJ2YWw6XCJEXCIsdGltZXpvbmU6XCJVVENcIixjb250YWluZXJfaWQ6XCJcIixsaWJyYXJ5X3BhdGg6XCJcIixsb2NhbGU6XCJlblwiLHdpZGdldGJhcjp7ZGV0YWlsczohMSx3YXRjaGxpc3Q6ITEsd2F0Y2hsaXN0X3NldHRpbmdzOntkZWZhdWx0X3N5bWJvbHM6W119fSxvdmVycmlkZXM6e1wibWFpblNlcmllc1Byb3BlcnRpZXMuc2hvd0NvdW50ZG93blwiOiExfSxzdHVkaWVzX292ZXJyaWRlczp7fSxicm9rZXJDb25maWc6e2NvbmZpZ0ZsYWdzOnt9fSxmdWxsc2NyZWVuOiExLGF1dG9zaXplOiExLGRpc2FibGVkX2ZlYXR1cmVzOltdLGVuYWJsZWRfZmVhdHVyZXM6W10sZGVidWc6ITEsbG9nbzp7fSx0aW1lX2ZyYW1lczpbe3RleHQ6XCI1eVwiLHJlc29sdXRpb246XCJXXCJ9LHt0ZXh0OlwiMXlcIixyZXNvbHV0aW9uOlwiV1wifSx7dGV4dDpcIjZtXCIscmVzb2x1dGlvbjpcIjEyMFwifSx7dGV4dDpcIjNtXCIscmVzb2x1dGlvbjpcIjYwXCJ9LHt0ZXh0OlwiMW1cIixyZXNvbHV0aW9uOlwiMzBcIn0se3RleHQ6XCI1ZFwiLHJlc29sdXRpb246XCI1XCJ9LHt0ZXh0OlwiMWRcIixyZXNvbHV0aW9uOlwiMVwifV0sY2xpZW50X2lkOlwiMFwiLHVzZXJfaWQ6XCIwXCIsY2hhcnRzX3N0b3JhZ2VfYXBpX3ZlcnNpb246XCIxLjBcIixmYXZvcml0ZXM6e2ludGVydmFsczpbXSxjaGFydFR5cGVzOltdfX0sYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7aWYodGhpcy5faWQ9XCJ0cmFkaW5ndmlld19cIisoMTA0ODU3NiooMStNYXRoLnJhbmRvbSgpKXwwKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpLHRoaXMuX3JlYWR5PSExLHRoaXMuX3JlYWR5SGFuZGxlcnM9W10sdGhpcy5fb25XaW5kb3dSZXNpemU9dGhpcy5fYXV0b1Jlc2l6ZUNoYXJ0LmJpbmQodGhpcyksIXQuZGF0YWZlZWQpdGhyb3cgbmV3IEVycm9yKFwiRGF0YWZlZWQgaXMgbm90IGRlZmluZWRcIik7aWYodGhpcy5fb3B0aW9ucz1lKHIsdCksdC5wcmVzZXQpe3ZhciBvPXNbdC5wcmVzZXRdO28/KHZvaWQgMCE9PXRoaXMuX29wdGlvbnMuZGlzYWJsZWRfZmVhdHVyZXM/dGhpcy5fb3B0aW9ucy5kaXNhYmxlZF9mZWF0dXJlcz10aGlzLl9vcHRpb25zLmRpc2FibGVkX2ZlYXR1cmVzLmNvbmNhdChvLmRpc2FibGVkX2ZlYXR1cmVzKTp0aGlzLl9vcHRpb25zLmRpc2FibGVkX2ZlYXR1cmVzPW8uZGlzYWJsZWRfZmVhdHVyZXMsdm9pZCAwIT09dGhpcy5fb3B0aW9ucy5lbmFibGVkX2ZlYXR1cmVzP3RoaXMuX29wdGlvbnMuZW5hYmxlZF9mZWF0dXJlcz10aGlzLl9vcHRpb25zLmVuYWJsZWRfZmVhdHVyZXMuY29uY2F0KG8uZW5hYmxlZF9mZWF0dXJlcyk6dGhpcy5fb3B0aW9ucy5lbmFibGVkX2ZlYXR1cmVzPW8uZW5hYmxlZF9mZWF0dXJlcyk6Y29uc29sZS53YXJuKFwiVW5rbm93biBwcmVzZXQ6IGBcIit0LnByZXNldCtcImBcIil9dGhpcy5fY3JlYXRlKCl9cmV0dXJuIHQucHJvdG90eXBlLm9uQ2hhcnRSZWFkeT1mdW5jdGlvbih0KXt0aGlzLl9yZWFkeT90LmNhbGwodGhpcyk6dGhpcy5fcmVhZHlIYW5kbGVycy5wdXNoKHQpfSx0LnByb3RvdHlwZS5vbkdyYXllZE9iamVjdENsaWNrZWQ9ZnVuY3Rpb24odCl7dGhpcy5faW5uZXJBUEkoKS5vbkdyYXllZE9iamVjdENsaWNrZWQodCl9LHQucHJvdG90eXBlLm9uU2hvcnRjdXQ9ZnVuY3Rpb24odCxlKXt0aGlzLl9pbm5lcldpbmRvdygpLmNyZWF0ZVNob3J0Y3V0QWN0aW9uKHQsZSl9LHQucHJvdG90eXBlLnN1YnNjcmliZT1mdW5jdGlvbih0LGUpe3RoaXMuX2lubmVyQVBJKCkuc3Vic2NyaWJlKHQsZSl9LHQucHJvdG90eXBlLnVuc3Vic2NyaWJlPWZ1bmN0aW9uKHQsZSl7dGhpcy5faW5uZXJBUEkoKS51bnN1YnNjcmliZSh0LGUpfSx0LnByb3RvdHlwZS5jaGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW5uZXJBUEkoKS5jaGFydCh0KX0sdC5wcm90b3R5cGUuc2V0TGFuZ3VhZ2U9ZnVuY3Rpb24odCl7dGhpcy5yZW1vdmUoKSx0aGlzLl9vcHRpb25zLmxvY2FsZT10LHRoaXMuX2NyZWF0ZSgpfSx0LnByb3RvdHlwZS5zZXRTeW1ib2w9ZnVuY3Rpb24odCxlLG8pe3RoaXMuX2lubmVyQVBJKCkuY2hhbmdlU3ltYm9sKHQsZStcIlwiLG8pfSx0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMuX29uV2luZG93UmVzaXplKSx0aGlzLl9yZWFkeUhhbmRsZXJzLnNwbGljZSgwLHRoaXMuX3JlYWR5SGFuZGxlcnMubGVuZ3RoKSxkZWxldGUgd2luZG93W3RoaXMuX2lkXTt2YXIgdD10aGlzLl9nZXRJRnJhbWVFbGVtZW50KCk7dC5jb250ZW50V2luZG93LmRlc3Ryb3lDaGFydCgpLHQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpfSx0LnByb3RvdHlwZS5jbG9zZVBvcHVwc0FuZERpYWxvZ3M9ZnVuY3Rpb24oKXt0aGlzLl9pbm5lckFQSSgpLmNsb3NlUG9wdXBzQW5kRGlhbG9ncygpfSx0LnByb3RvdHlwZS5zZWxlY3RMaW5lVG9vbD1mdW5jdGlvbih0KXt0aGlzLl9pbm5lckFQSSgpLnNlbGVjdExpbmVUb29sKHQpfSx0LnByb3RvdHlwZS5zZWxlY3RlZExpbmVUb29sPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lubmVyQVBJKCkuc2VsZWN0ZWRMaW5lVG9vbCgpfSx0LnByb3RvdHlwZS5zYXZlPWZ1bmN0aW9uKHQpe3RoaXMuX2lubmVyQVBJKCkuc2F2ZUNoYXJ0KHQpfSx0LnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKHQsZSl7dGhpcy5faW5uZXJBUEkoKS5sb2FkQ2hhcnQoe2pzb246dCxleHRlbmRlZERhdGE6ZX0pfSx0LnByb3RvdHlwZS5nZXRTYXZlZENoYXJ0cz1mdW5jdGlvbih0KXt0aGlzLl9pbm5lckFQSSgpLmdldFNhdmVkQ2hhcnRzKHQpfSx0LnByb3RvdHlwZS5sb2FkQ2hhcnRGcm9tU2VydmVyPWZ1bmN0aW9uKHQpe3RoaXMuX2lubmVyQVBJKCkubG9hZENoYXJ0RnJvbVNlcnZlcih0KX0sdC5wcm90b3R5cGUuc2F2ZUNoYXJ0VG9TZXJ2ZXI9ZnVuY3Rpb24odCxlLG8saSl7dGhpcy5faW5uZXJBUEkoKS5zYXZlQ2hhcnRUb1NlcnZlcih0LGUsbyxpKX0sdC5wcm90b3R5cGUucmVtb3ZlQ2hhcnRGcm9tU2VydmVyPWZ1bmN0aW9uKHQsZSl7dGhpcy5faW5uZXJBUEkoKS5yZW1vdmVDaGFydEZyb21TZXJ2ZXIodCxlKX0sdC5wcm90b3R5cGUub25Db250ZXh0TWVudT1mdW5jdGlvbih0KXt0aGlzLl9pbm5lckFQSSgpLm9uQ29udGV4dE1lbnUodCl9LHQucHJvdG90eXBlLmNyZWF0ZUJ1dHRvbj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW5uZXJXaW5kb3coKS5jcmVhdGVCdXR0b24odCl9LHQucHJvdG90eXBlLnNob3dOb3RpY2VEaWFsb2c9ZnVuY3Rpb24odCl7dGhpcy5faW5uZXJBUEkoKS5zaG93Tm90aWNlRGlhbG9nKHQpfSx0LnByb3RvdHlwZS5zaG93Q29uZmlybURpYWxvZz1mdW5jdGlvbih0KXt0aGlzLl9pbm5lckFQSSgpLnNob3dDb25maXJtRGlhbG9nKHQpfSx0LnByb3RvdHlwZS5zaG93TG9hZENoYXJ0RGlhbG9nPWZ1bmN0aW9uKCl7dGhpcy5faW5uZXJBUEkoKS5zaG93TG9hZENoYXJ0RGlhbG9nKCl9LHQucHJvdG90eXBlLnNob3dTYXZlQXNDaGFydERpYWxvZz1mdW5jdGlvbigpe3RoaXMuX2lubmVyQVBJKCkuc2hvd1NhdmVBc0NoYXJ0RGlhbG9nKCl9LHQucHJvdG90eXBlLnN5bWJvbEludGVydmFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lubmVyQVBJKCkuZ2V0U3ltYm9sSW50ZXJ2YWwoKX0sdC5wcm90b3R5cGUubWFpblNlcmllc1ByaWNlRm9ybWF0dGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lubmVyQVBJKCkubWFpblNlcmllc1ByaWNlRm9ybWF0dGVyKCl9LHQucHJvdG90eXBlLmdldEludGVydmFscz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbm5lckFQSSgpLmdldEludGVydmFscygpfSx0LnByb3RvdHlwZS5nZXRTdHVkaWVzTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbm5lckFQSSgpLmdldFN0dWRpZXNMaXN0KCl9LHQucHJvdG90eXBlLmFkZEN1c3RvbUNTU0ZpbGU9ZnVuY3Rpb24odCl7dGhpcy5faW5uZXJXaW5kb3coKS5hZGRDdXN0b21DU1NGaWxlKHQpfSx0LnByb3RvdHlwZS5hcHBseU92ZXJyaWRlcz1mdW5jdGlvbih0KXt0aGlzLl9vcHRpb25zPWUodGhpcy5fb3B0aW9ucyx7b3ZlcnJpZGVzOnR9KSx0aGlzLl9pbm5lcldpbmRvdygpLmFwcGx5T3ZlcnJpZGVzKHQpfSx0LnByb3RvdHlwZS5hcHBseVN0dWRpZXNPdmVycmlkZXM9ZnVuY3Rpb24odCl7dGhpcy5faW5uZXJXaW5kb3coKS5hcHBseVN0dWRpZXNPdmVycmlkZXModCl9LHQucHJvdG90eXBlLndhdGNoTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbm5lckFQSSgpLndhdGNobGlzdCgpfSx0LnByb3RvdHlwZS5hY3RpdmVDaGFydD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbm5lckFQSSgpLmFjdGl2ZUNoYXJ0KCl9LHQucHJvdG90eXBlLmNoYXJ0c0NvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lubmVyQVBJKCkuY2hhcnRzQ291bnQoKX0sdC5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lubmVyQVBJKCkubGF5b3V0KCl9LHQucHJvdG90eXBlLnNldExheW91dD1mdW5jdGlvbih0KXt0aGlzLl9pbm5lckFQSSgpLnNldExheW91dCh0KX0sdC5wcm90b3R5cGUuX2dldElGcmFtZUVsZW1lbnQ9ZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9pZCk7aWYobnVsbD09PXQpdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gc3VjaCBpZnJhbWVcIik7cmV0dXJuIHR9LHQucHJvdG90eXBlLl9pbm5lckFQST1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRJRnJhbWVFbGVtZW50KCkuY29udGVudFdpbmRvdy50cmFkaW5nVmlld0FwaX0sdC5wcm90b3R5cGUuX2lubmVyV2luZG93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldElGcmFtZUVsZW1lbnQoKS5jb250ZW50V2luZG93fSx0LnByb3RvdHlwZS5fYXV0b1Jlc2l6ZUNoYXJ0PWZ1bmN0aW9uKCl7dGhpcy5fb3B0aW9ucy5mdWxsc2NyZWVuJiYodGhpcy5fZ2V0SUZyYW1lRWxlbWVudCgpLnN0eWxlLmhlaWdodD13aW5kb3cuaW5uZXJIZWlnaHQrXCJweFwiKX0sdC5wcm90b3R5cGUuX2NyZWF0ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLl9yZW5kZXIoKSxvPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX29wdGlvbnMuY29udGFpbmVyX2lkKTtpZihudWxsPT09byl0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyBzdWNoIGVsZW1lbnQgLSAjXCIrdGhpcy5fb3B0aW9ucy5jb250YWluZXJfaWQpO28uaW5uZXJIVE1MPWU7dmFyIGk9dGhpcy5fZ2V0SUZyYW1lRWxlbWVudCgpOyh0aGlzLl9vcHRpb25zLmF1dG9zaXplfHx0aGlzLl9vcHRpb25zLmZ1bGxzY3JlZW4pJiYoaS5zdHlsZS53aWR0aD1cIjEwMCVcIix0aGlzLl9vcHRpb25zLmZ1bGxzY3JlZW58fChpLnN0eWxlLmhlaWdodD1cIjEwMCVcIikpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fb25XaW5kb3dSZXNpemUpLHRoaXMuX29uV2luZG93UmVzaXplKCk7dmFyIG49ZnVuY3Rpb24oKXtpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsbiwhMSksaS5jb250ZW50V2luZG93LndpZGdldFJlYWR5KGZ1bmN0aW9uKCl7dC5fcmVhZHk9ITA7Zm9yKHZhciBlPTAsbz10Ll9yZWFkeUhhbmRsZXJzO2U8by5sZW5ndGg7ZSsrKXtvW2VdLmNhbGwodCl9aS5jb250ZW50V2luZG93LmluaXRpYWxpemF0aW9uRmluaXNoZWQoKX0pfTtpLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsbiwhMSl9LHQucHJvdG90eXBlLl9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3c7dFt0aGlzLl9pZF09e2RhdGFmZWVkOnRoaXMuX29wdGlvbnMuZGF0YWZlZWQsY3VzdG9tRm9ybWF0dGVyczp0aGlzLl9vcHRpb25zLmN1c3RvbUZvcm1hdHRlcnMsYnJva2VyRmFjdG9yeTp0aGlzLl9vcHRpb25zLmJyb2tlckZhY3Rvcnksb3ZlcnJpZGVzOnRoaXMuX29wdGlvbnMub3ZlcnJpZGVzLHN0dWRpZXNPdmVycmlkZXM6dGhpcy5fb3B0aW9ucy5zdHVkaWVzX292ZXJyaWRlcyxkaXNhYmxlZEZlYXR1cmVzOnRoaXMuX29wdGlvbnMuZGlzYWJsZWRfZmVhdHVyZXMsZW5hYmxlZEZlYXR1cmVzOnRoaXMuX29wdGlvbnMuZW5hYmxlZF9mZWF0dXJlcyxicm9rZXJDb25maWc6dGhpcy5fb3B0aW9ucy5icm9rZXJDb25maWcscmVzdENvbmZpZzp0aGlzLl9vcHRpb25zLnJlc3RDb25maWcsZmF2b3JpdGVzOnRoaXMuX29wdGlvbnMuZmF2b3JpdGVzLGxvZ286dGhpcy5fb3B0aW9ucy5sb2dvLG51bWVyaWNfZm9ybWF0dGluZzp0aGlzLl9vcHRpb25zLm51bWVyaWNfZm9ybWF0dGluZyxyc3NfbmV3c19mZWVkOnRoaXMuX29wdGlvbnMucnNzX25ld3NfZmVlZCxuZXdzUHJvdmlkZXI6dGhpcy5fb3B0aW9ucy5uZXdzX3Byb3ZpZGVyLGxvYWRMYXN0Q2hhcnQ6dGhpcy5fb3B0aW9ucy5sb2FkX2xhc3RfY2hhcnQsc2F2ZUxvYWRBZGFwdGVyOnRoaXMuX29wdGlvbnMuc2F2ZV9sb2FkX2FkYXB0ZXIsbG9hZGluZ19zY3JlZW46dGhpcy5fb3B0aW9ucy5sb2FkaW5nX3NjcmVlbixzZXR0aW5nc0FkYXB0ZXI6dGhpcy5fb3B0aW9ucy5zZXR0aW5nc19hZGFwdGVyfSx0aGlzLl9vcHRpb25zLnNhdmVkX2RhdGEmJih0W3RoaXMuX2lkXS5jaGFydENvbnRlbnQ9e2pzb246dGhpcy5fb3B0aW9ucy5zYXZlZF9kYXRhfSk7dmFyIGU9KHRoaXMuX29wdGlvbnMubGlicmFyeV9wYXRofHxcIlwiKStcInN0YXRpYy90di1jaGFydC42MzBiNzA0YTJiOWQwZWFmMTU5My5odG1sI2xvY2Fsc2VydmVyPTEmc3ltYm9sPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLl9vcHRpb25zLnN5bWJvbCkrXCImaW50ZXJ2YWw9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuX29wdGlvbnMuaW50ZXJ2YWwpKyh0aGlzLl9vcHRpb25zLnRpbWVmcmFtZT9cIiZ0aW1lZnJhbWU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuX29wdGlvbnMudGltZWZyYW1lKTpcIlwiKSsodGhpcy5fb3B0aW9ucy50b29sYmFyX2JnP1wiJnRvb2xiYXJiZz1cIit0aGlzLl9vcHRpb25zLnRvb2xiYXJfYmcucmVwbGFjZShcIiNcIixcIlwiKTpcIlwiKSsodGhpcy5fb3B0aW9ucy5zdHVkaWVzX2FjY2Vzcz9cIiZzdHVkaWVzQWNjZXNzPVwiK2VuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeSh0aGlzLl9vcHRpb25zLnN0dWRpZXNfYWNjZXNzKSk6XCJcIikrXCImd2lkZ2V0YmFyPVwiK2VuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeSh0aGlzLl9vcHRpb25zLndpZGdldGJhcikpKyh0aGlzLl9vcHRpb25zLmRyYXdpbmdzX2FjY2Vzcz9cIiZkcmF3aW5nc0FjY2Vzcz1cIitlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkodGhpcy5fb3B0aW9ucy5kcmF3aW5nc19hY2Nlc3MpKTpcIlwiKStcIiZ0aW1lRnJhbWVzPVwiK2VuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeSh0aGlzLl9vcHRpb25zLnRpbWVfZnJhbWVzKSkrXCImbG9jYWxlPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLl9vcHRpb25zLmxvY2FsZSkrXCImdWlkPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLl9pZCkrXCImY2xpZW50SWQ9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh0aGlzLl9vcHRpb25zLmNsaWVudF9pZCkpK1wiJnVzZXJJZD1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHRoaXMuX29wdGlvbnMudXNlcl9pZCkpKyh0aGlzLl9vcHRpb25zLmNoYXJ0c19zdG9yYWdlX3VybD9cIiZjaGFydHNTdG9yYWdlVXJsPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLl9vcHRpb25zLmNoYXJ0c19zdG9yYWdlX3VybCk6XCJcIikrKHRoaXMuX29wdGlvbnMuY2hhcnRzX3N0b3JhZ2VfYXBpX3ZlcnNpb24/XCImY2hhcnRzU3RvcmFnZVZlcj1cIitlbmNvZGVVUklDb21wb25lbnQodGhpcy5fb3B0aW9ucy5jaGFydHNfc3RvcmFnZV9hcGlfdmVyc2lvbik6XCJcIikrKHRoaXMuX29wdGlvbnMuaW5kaWNhdG9yc19maWxlX25hbWU/XCImaW5kaWNhdG9yc0ZpbGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuX29wdGlvbnMuaW5kaWNhdG9yc19maWxlX25hbWUpOlwiXCIpKyh0aGlzLl9vcHRpb25zLmN1c3RvbV9jc3NfdXJsP1wiJmN1c3RvbUNTUz1cIitlbmNvZGVVUklDb21wb25lbnQodGhpcy5fb3B0aW9ucy5jdXN0b21fY3NzX3VybCk6XCJcIikrKHRoaXMuX29wdGlvbnMuYXV0b19zYXZlX2RlbGF5P1wiJmF1dG9TYXZlRGVsYXk9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh0aGlzLl9vcHRpb25zLmF1dG9fc2F2ZV9kZWxheSkpOlwiXCIpK1wiJmRlYnVnPVwiK3RoaXMuX29wdGlvbnMuZGVidWcrKHRoaXMuX29wdGlvbnMuc25hcHNob3RfdXJsP1wiJnNuYXBzaG90VXJsPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLl9vcHRpb25zLnNuYXBzaG90X3VybCk6XCJcIikrKHRoaXMuX29wdGlvbnMudGltZXpvbmU/XCImdGltZXpvbmU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuX29wdGlvbnMudGltZXpvbmUpOlwiXCIpKyh0aGlzLl9vcHRpb25zLnN0dWR5X2NvdW50X2xpbWl0P1wiJnN0dWR5Q291bnRMaW1pdD1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHRoaXMuX29wdGlvbnMuc3R1ZHlfY291bnRfbGltaXQpKTpcIlwiKSsodGhpcy5fb3B0aW9ucy5zeW1ib2xfc2VhcmNoX3JlcXVlc3RfZGVsYXk/XCImc3NyZXFkZWxheT1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHRoaXMuX29wdGlvbnMuc3ltYm9sX3NlYXJjaF9yZXF1ZXN0X2RlbGF5KSk6XCJcIik7cmV0dXJuJzxpZnJhbWUgaWQ9XCInK3RoaXMuX2lkKydcIiBuYW1lPVwiJyt0aGlzLl9pZCsnXCIgIHNyYz1cIicrZSsnXCInKyh0aGlzLl9vcHRpb25zLmF1dG9zaXplfHx0aGlzLl9vcHRpb25zLmZ1bGxzY3JlZW4/XCJcIjonIHdpZHRoPVwiJyt0aGlzLl9vcHRpb25zLndpZHRoKydcIiBoZWlnaHQ9XCInK3RoaXMuX29wdGlvbnMuaGVpZ2h0KydcIicpKycgZnJhbWVib3JkZXI9XCIwXCIgYWxsb3dUcmFuc3BhcmVuY3k9XCJ0cnVlXCIgc2Nyb2xsaW5nPVwibm9cIiBhbGxvd2Z1bGxzY3JlZW4gc3R5bGU9XCJkaXNwbGF5OmJsb2NrO1wiPjwvaWZyYW1lPid9LHR9KCksZD1hO3dpbmRvdy5UcmFkaW5nVmlldz13aW5kb3cuVHJhZGluZ1ZpZXd8fHt9LHdpbmRvdy5UcmFkaW5nVmlldy52ZXJzaW9uPW8sdC52ZXJzaW9uPW8sdC5vbnJlYWR5PWksdC53aWRnZXQ9ZCxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0pO1xuIiwibW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBtaWRuaWdodFRoZW1lOiB7XHJcbiAgICAgICAgYmlkQ29sb3I6IFwiIzUwRDJDMlwiLFxyXG4gICAgICAgIGJpZEZpbGxDb2xvcjogXCJyZ2JhKDgwLCAyMTAsIDE5NCwgMC41KVwiLFxyXG4gICAgICAgIGFza0NvbG9yOiBcIiNFMzc0NUJcIixcclxuICAgICAgICBhc2tGaWxsQ29sb3I6IFwicmdiYSgyMjcsIDExNiwgOTEsIDAuNSlcIixcclxuICAgICAgICBjYWxsQ29sb3I6IFwiI0JCQkYyQlwiLFxyXG4gICAgICAgIHNldHRsZUNvbG9yOiBcInJnYmEoMTI1LCAxMzQsIDIxNCwgMSlcIixcclxuICAgICAgICBzZXR0bGVGaWxsQ29sb3I6IFwicmdiYSgxMjUsIDEzNCwgMjE0LCAwLjUpXCIsXHJcbiAgICAgICAgcG9zaXRpdmVDb2xvcjogXCIjNkJBNTgzXCIsXHJcbiAgICAgICAgbmVnYXRpdmVDb2xvcjogXCIjREIwMDAwXCIsXHJcbiAgICAgICAgc3Ryb2tlQ29sb3I6IFwiI0ZGRkYwMFwiLFxyXG4gICAgICAgIHByaW1hcnlUZXh0OiBcIiNlMGUwZTBcIixcclxuICAgICAgICB2b2x1bWVDb2xvcjogXCIjODQ4NDg0XCIsXHJcblxyXG4gICAgICAgIC8vdG9vbHRpcFxyXG4gICAgICAgIHRvb2x0aXBCYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgwLCAwLCAwLCAwLjQpXCIsXHJcbiAgICAgICAgdG9vbHRpcENvbG9yOiBcIiNmZmZcIixcclxuICAgICAgICB0b29sdGlwRmlsbENvbG9yOiBcIiNmZmZcIixcclxuICAgICAgICAvL2F4aXNcclxuICAgICAgICBheGlzTGFiZWxzQ29sb3I6IFwiI2ZmZlwiLFxyXG4gICAgICAgIGF4aXNMaW5lQ29sb3I6IFwicmdiYSgyMDAsIDIwMCwgMjAwLCAwLjMpXCIsXHJcbiAgICAgICAgaW5kaWNhdG9yTGluZUNvbG9yOiBcIiNGRkZGRkZcIixcclxuICAgICAgICBiZ0NvbG9yOiBcIiMxOTFhMWZcIixcclxuICAgICAgICB0ZXh0Q29sb3I6IFwiI2UwZTBlMFwiXHJcbiAgICB9LFxyXG4gICAgZGFya1RoZW1lOiB7XHJcbiAgICAgICAgYmlkQ29sb3I6IFwiIzZCQTU4M1wiLFxyXG4gICAgICAgIGJpZEZpbGxDb2xvcjogXCJyZ2JhKDgwLCAyMTAsIDE5NCwgMC41KVwiLFxyXG4gICAgICAgIGFza0NvbG9yOiBcIiNFMzc0NUJcIixcclxuICAgICAgICBhc2tGaWxsQ29sb3I6IFwicmdiYSgyMjcsIDExNiwgOTEsIDAuNSlcIixcclxuICAgICAgICBjYWxsQ29sb3I6IFwiI0JCQkYyQlwiLFxyXG4gICAgICAgIHNldHRsZUNvbG9yOiBcInJnYmEoMTI1LCAxMzQsIDIxNCwgMSlcIixcclxuICAgICAgICBzZXR0bGVGaWxsQ29sb3I6IFwicmdiYSgxMjUsIDEzNCwgMjE0LCAwLjUpXCIsXHJcbiAgICAgICAgcG9zaXRpdmVDb2xvcjogXCIjMjU4QTE0XCIsXHJcbiAgICAgICAgbmVnYXRpdmVDb2xvcjogXCIjREIwMDAwXCIsXHJcbiAgICAgICAgc3Ryb2tlQ29sb3I6IFwiI0ZGRkYwMFwiLFxyXG4gICAgICAgIHByaW1hcnlUZXh0OiBcIiNlMGUwZTBcIixcclxuICAgICAgICB2b2x1bWVDb2xvcjogXCIjODQ4NDg0XCIsXHJcblxyXG4gICAgICAgIC8vdG9vbHRpcFxyXG4gICAgICAgIHRvb2x0aXBCYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgwLCAwLCAwLCAwLjQpXCIsXHJcbiAgICAgICAgdG9vbHRpcENvbG9yOiBcIiNmZmZcIixcclxuICAgICAgICB0b29sdGlwRmlsbENvbG9yOiBcIiNmZmZcIixcclxuICAgICAgICAvL2F4aXNcclxuICAgICAgICBheGlzTGFiZWxzQ29sb3I6IFwiI2ZmZlwiLFxyXG4gICAgICAgIGF4aXNMaW5lQ29sb3I6IFwicmdiYSgyMDAsIDIwMCwgMjAwLCAwLjMpXCIsXHJcbiAgICAgICAgaW5kaWNhdG9yTGluZUNvbG9yOiBcIiNGRkZGRkZcIixcclxuICAgICAgICBiZ0NvbG9yOiBcIiMyYTJhMmFcIixcclxuICAgICAgICB0ZXh0Q29sb3I6IFwiI2ZmZmZmZlwiXHJcbiAgICB9LFxyXG4gICAgbGlnaHRUaGVtZToge1xyXG4gICAgICAgIGJpZENvbG9yOiBcIiMyNThBMTRcIixcclxuICAgICAgICBiaWRGaWxsQ29sb3I6IFwicmdiYSg4MCwgMjEwLCAxOTQsIDAuNSlcIixcclxuICAgICAgICBhc2tDb2xvcjogXCIjRUEzNDBCXCIsXHJcbiAgICAgICAgYXNrRmlsbENvbG9yOiBcInJnYmEoMjI3LCAxMTYsIDkxLCAwLjUpXCIsXHJcbiAgICAgICAgY2FsbENvbG9yOiBcIiNCQkJGMkJcIixcclxuICAgICAgICBzZXR0bGVDb2xvcjogXCJyZ2JhKDEyNSwgMTM0LCAyMTQsIDEpXCIsXHJcbiAgICAgICAgc2V0dGxlRmlsbENvbG9yOiBcInJnYmEoMTI1LCAxMzQsIDIxNCwgMC41KVwiLFxyXG4gICAgICAgIHBvc2l0aXZlQ29sb3I6IFwiIzUyOGMwYVwiLFxyXG4gICAgICAgIG5lZ2F0aXZlQ29sb3I6IFwicmdiYSgyMjUsIDY2LCA3NCwgMSlcIixcclxuICAgICAgICBzdHJva2VDb2xvcjogXCIjMDAwMDAwXCIsXHJcbiAgICAgICAgcHJpbWFyeVRleHQ6IFwiIzI0MjQyNFwiLFxyXG4gICAgICAgIHZvbHVtZUNvbG9yOiBcIiM4NDg0ODRcIixcclxuXHJcbiAgICAgICAgLy90b29sdGlwXHJcbiAgICAgICAgdG9vbHRpcEJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDI1NSwyNTUsMjU1LCAwLjkpXCIsXHJcbiAgICAgICAgdG9vbHRpcENvbG9yOiBcIiMwMDBcIixcclxuICAgICAgICB0b29sdGlwRmlsbENvbG9yOiBcIiMwMDBcIixcclxuICAgICAgICAvL2F4aXNcclxuICAgICAgICBheGlzTGFiZWxzQ29sb3I6IFwiIzAwMFwiLFxyXG4gICAgICAgIGF4aXNMaW5lQ29sb3I6IFwicmdiYSgyMDAsIDIwMCwgMjAwLCAwLjMpXCIsXHJcbiAgICAgICAgaW5kaWNhdG9yTGluZUNvbG9yOiBcIiM4NDg0ODRcIixcclxuICAgICAgICBiZ0NvbG9yOiBcIiNmZmZcIixcclxuICAgICAgICB0ZXh0Q29sb3I6IFwiIzNkM2QzZFwiXHJcbiAgICB9XHJcbn07XHJcbiIsImltcG9ydCBNYXJrZXRzU3RvcmUgZnJvbSBcInN0b3Jlcy9NYXJrZXRzU3RvcmVcIjtcbmltcG9ydCB7RmV0Y2hDaGFpbn0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnQtdGltZXpvbmVcIjtcbmltcG9ydCBNYXJrZXRzQWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9NYXJrZXRzQWN0aW9uc1wiO1xuaW1wb3J0IHtnZXRHYXRld2F5TmFtZX0gZnJvbSBcImNvbW1vbi9nYXRld2F5VXRpbHNcIjtcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XG5cbmNsYXNzIFN5bWJvbEluZm8ge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gb3B0aW9ucy50aWNrZXI7XG4gICAgICAgIHRoaXMudGlja2VyID0gb3B0aW9ucy50aWNrZXI7XG5cbiAgICAgICAgY29uc3QgcXVvdGVHYXRld2F5ID0gZ2V0R2F0ZXdheU5hbWUob3B0aW9ucy5xdW90ZUFzc2V0KTtcbiAgICAgICAgY29uc3QgYmFzZUdhdGV3YXkgPSBnZXRHYXRld2F5TmFtZShvcHRpb25zLmJhc2VBc3NldCk7XG4gICAgICAgIGxldCBjdXJyZW50RXhjaGFuZ2UgPVxuICAgICAgICAgICAgcXVvdGVHYXRld2F5ID09PSBiYXNlR2F0ZXdheVxuICAgICAgICAgICAgICAgID8gcXVvdGVHYXRld2F5XG4gICAgICAgICAgICAgICAgOiBxdW90ZUdhdGV3YXkgJiYgIWJhc2VHYXRld2F5XG4gICAgICAgICAgICAgICAgICAgID8gcXVvdGVHYXRld2F5XG4gICAgICAgICAgICAgICAgICAgIDogIXF1b3RlR2F0ZXdheSAmJiBiYXNlR2F0ZXdheVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBiYXNlR2F0ZXdheVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBgJHtxdW90ZUdhdGV3YXl9IC8gJHtiYXNlR2F0ZXdheX1gO1xuXG4gICAgICAgIGxldCB7bmFtZTogYmFzZVN5bWJvbCwgcHJlZml4OiBiYXNlUHJlZml4fSA9IHV0aWxzLnJlcGxhY2VOYW1lKFxuICAgICAgICAgICAgb3B0aW9ucy5iYXNlQXNzZXRcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IHtuYW1lOiBxdW90ZVN5bWJvbCwgcHJlZml4OiBxdW90ZVByZWZpeH0gPSB1dGlscy5yZXBsYWNlTmFtZShcbiAgICAgICAgICAgIG9wdGlvbnMucXVvdGVBc3NldFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBgJHtxdW90ZVByZWZpeCB8fCBcIlwifSR7cXVvdGVTeW1ib2x9IC8gJHtiYXNlUHJlZml4IHx8XG4gICAgICAgICAgICBcIlwifSR7YmFzZVN5bWJvbH0gJHtcbiAgICAgICAgICAgICEhY3VycmVudEV4Y2hhbmdlID8gYCgke2N1cnJlbnRFeGNoYW5nZX0pYCA6IFwiXCJcbiAgICAgICAgfWA7XG4gICAgICAgIHRoaXMudHlwZSA9IFwiYml0Y29pblwiO1xuICAgICAgICB0aGlzLnNlc3Npb24gPSBcIjI0eDdcIjtcbiAgICAgICAgdGhpcy50aW1lem9uZSA9IG1vbWVudC50ei5ndWVzcygpO1xuICAgICAgICB0aGlzLmRhdGFfc3RhdHVzID0gXCJzdHJlYW1pbmdcIjtcbiAgICAgICAgdGhpcy5zdXBwb3J0ZWRfcmVzb2x1dGlvbnMgPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgICAgICB0aGlzLmhhc19lbXB0eV9iYXJzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wcmljZXNjYWxlID0gTWF0aC5wb3coMTAsIG9wdGlvbnMuYmFzZUFzc2V0LmdldChcInByZWNpc2lvblwiKSk7XG4gICAgICAgIHRoaXMucXVvdGVBc3NldCA9IG9wdGlvbnMucXVvdGVBc3NldDtcbiAgICAgICAgdGhpcy5iYXNlQXNzZXQgPSBvcHRpb25zLmJhc2VBc3NldDtcbiAgICAgICAgdGhpcy5taW5tb3YgPSAxO1xuXG4gICAgICAgIHRoaXMuaGFzX2ludHJhZGF5ID0gdGhpcy5zdXBwb3J0ZWRfcmVzb2x1dGlvbnMucmVkdWNlKFxuICAgICAgICAgICAgKHN1cHBvcnRlZCwgcikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdXBwb3J0ZWQgfHwgIWlzTmFOKHBhcnNlSW50KHIsIDEwKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5pbnRyYWRheV9tdWx0aXBsaWVycyA9IHRoaXMuc3VwcG9ydGVkX3Jlc29sdXRpb25zLmZpbHRlcihyID0+IHtcbiAgICAgICAgICAgIHJldHVybiAhaXNOYU4ocGFyc2VJbnQociwgMTApKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5oYXNfc2Vjb25kcyA9IHRoaXMuc3VwcG9ydGVkX3Jlc29sdXRpb25zLnJlZHVjZSgoc3VwcG9ydGVkLCByKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gc3VwcG9ydGVkIHx8IHIuaW5kZXhPZihcIlNcIikgIT09IC0xO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIHRoaXMuc2Vjb25kc19tdWx0aXBsaWVycyA9IHRoaXMuc3VwcG9ydGVkX3Jlc29sdXRpb25zLmZpbHRlcihyID0+IHtcbiAgICAgICAgICAgIHJldHVybiByLmluZGV4T2YoXCJTXCIpICE9PSAtMTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5oYXNfZGFpbHkgPSB0aGlzLnN1cHBvcnRlZF9yZXNvbHV0aW9ucy5yZWR1Y2UoKHN1cHBvcnRlZCwgcikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHN1cHBvcnRlZCB8fCByLmluZGV4T2YoXCJEXCIpICE9PSAtMTtcbiAgICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICAgIHRoaXMuaGFzX2RhaWx5ID0gdGhpcy5zdXBwb3J0ZWRfcmVzb2x1dGlvbnMucmVkdWNlKChzdXBwb3J0ZWQsIHIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBzdXBwb3J0ZWQgfHwgci5pbmRleE9mKFwiRFwiKSAhPT0gLTE7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldFJlc29sdXRpb25zRnJvbUJ1Y2tldHMoYnVja2V0cykge1xuICAgIGxldCByZXNvbHV0aW9ucyA9IGJ1Y2tldHNcbiAgICAgICAgLm1hcChyID0+IHtcbiAgICAgICAgICAgIGxldCBtaW51dGUgPSByIC8gNjA7XG4gICAgICAgICAgICBsZXQgZGF5ID0gbWludXRlIC8gNjAgLyAyNDtcbiAgICAgICAgICAgIGxldCB3ZWVrID0gZGF5IC8gNztcblxuICAgICAgICAgICAgaWYgKG1pbnV0ZSA8IDEpIHtcbiAgICAgICAgICAgICAgICAvLyBiZWxvdyAxIG1pbnV0ZSB3ZSByZXR1cm4gU2Vjb25kc1xuICAgICAgICAgICAgICAgIHJldHVybiByICsgXCJTXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRheSA8IDEgJiYgcGFyc2VJbnQobWludXRlLCAxMCkgPT09IG1pbnV0ZSkge1xuICAgICAgICAgICAgICAgIC8vIGJlbG93IDEgZGF5IHdlIHJldHVybiBNaW51dGVzXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1pbnV0ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3ZWVrIDwgMSkge1xuICAgICAgICAgICAgICAgIC8vIGJlbG93IDEgd2VlayB3ZSByZXR1cm4gRGF5c1xuICAgICAgICAgICAgICAgIGlmIChkYXkgPj0gMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoZGF5LCAxMCkgPT09IGRheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRheSA9PT0gMSkgcmV0dXJuIFwiRFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRheSArIFwiRFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB3ZSByZXR1cm4gd2Vla3NcbiAgICAgICAgICAgICAgICBpZiAod2VlayA+PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUludCh3ZWVrLCAxMCkgPT09IHdlZWspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3ZWVrICsgXCJEXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KVxuICAgICAgICAuZmlsdGVyKGEgPT4gISFhKTtcblxuICAgIHJldHVybiByZXNvbHV0aW9ucztcbn1cblxuZnVuY3Rpb24gZ2V0QnVja2V0RnJvbVJlc29sdXRpb24ocikge1xuICAgIGlmIChyID09PSBcIkRcIikgcmV0dXJuIDI0ICogNjAgKiA2MDtcblxuICAgIGlmIChyLmluZGV4T2YoXCJXXCIpICE9PSAtMSkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQoci5yZXBsYWNlKFwiRFwiLCBcIlwiKSwgMTApICogNyAqIDI0ICogNjAgKiA2MDtcbiAgICB9IGVsc2UgaWYgKHIuaW5kZXhPZihcIkRcIikgIT09IC0xKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChyLnJlcGxhY2UoXCJEXCIsIFwiXCIpLCAxMCkgKiAyNCAqIDYwICogNjA7XG4gICAgfSBlbHNlIGlmIChyLmluZGV4T2YoXCJTXCIpICE9PSAtMSkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQoci5yZXBsYWNlKFwiU1wiLCBcIlwiKSwgMTApO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChyLCAxMCkgKiA2MDtcbiAgICB9XG59XG5cbmNsYXNzIERhdGFGZWVkIHtcbiAgICB1cGRhdGUob3B0aW9ucykge1xuICAgICAgICBmb3IgKGxldCBrZXkgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwicmVzb2x1dGlvbnNcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdXBwb3J0ZWRfcmVzb2x1dGlvbnMgPSBnZXRSZXNvbHV0aW9uc0Zyb21CdWNrZXRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXNvbHV0aW9uc1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgXCJvbk1hcmtldENoYW5nZVwiOlxuICAgICAgICAgICAgICAgICAgICBNYXJrZXRzU3RvcmUudW5zdWJzY3JpYmUoXCJtYXJrZXRfY2hhbmdlXCIpO1xuICAgICAgICAgICAgICAgICAgICBNYXJrZXRzU3RvcmUuc3Vic2NyaWJlKFwibWFya2V0X2NoYW5nZVwiLCBvcHRpb25zW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXNba2V5XSA9IG9wdGlvbnNba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsZWFyU3VicygpIHtcbiAgICAgICAgTWFya2V0c1N0b3JlLmNsZWFyU3VicygpO1xuICAgIH1cblxuICAgIG9uUmVhZHkoY2FsbGJhY2spIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgZXhjaGFuZ2VzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIk9QRU4uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIk9wZW5sZWRnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2M6IFwiT3BlbmxlZGdlciBHYXRld2F5XCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgc3ltYm9sc190eXBlczogW10sXG4gICAgICAgICAgICAgICAgc3VwcG9ydGVkX3Jlc29sdXRpb25zOiB0aGlzLnN1cHBvcnRlZF9yZXNvbHV0aW9ucyxcbiAgICAgICAgICAgICAgICBzdXBwb3J0c19tYXJrczogZmFsc2UsXG4gICAgICAgICAgICAgICAgc3VwcG9ydHNfc2VhcmNoOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzdXBwb3J0c190aW1lOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMTApO1xuICAgIH1cblxuICAgIHNlYXJjaFN5bWJvbHModXNlcklucHV0LCBleGNoYW5nZSwgc3ltYm9sVHlwZSwgb25SZXN1bHRSZWFkeUNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwic2VhcmNoU3ltYm9sc1wiLCB1c2VySW5wdXQsIGV4Y2hhbmdlLCBzeW1ib2xUeXBlKTtcblxuICAgICAgICBvblJlc3VsdFJlYWR5Q2FsbGJhY2soW10pO1xuXG4gICAgICAgIC8qXG4gICAgICAgIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcInN5bWJvbFwiOiBcIjxzaG9ydCBzeW1ib2wgbmFtZT5cIixcbiAgICAgICAgICAgICAgICBcImZ1bGxfbmFtZVwiOiBcIjxmdWxsIHN5bWJvbCBuYW1lPlwiLCAvLyBlLmcuIEJUQ0U6QlRDVVNEXG4gICAgICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIjxzeW1ib2wgZGVzY3JpcHRpb24+XCIsXG4gICAgICAgICAgICAgICAgXCJleGNoYW5nZVwiOiBcIjxzeW1ib2wgZXhjaGFuZ2UgbmFtZT5cIixcbiAgICAgICAgICAgICAgICBcInRpY2tlclwiOiBcIjxzeW1ib2wgdGlja2VyIG5hbWUsIG9wdGlvbmFsPlwiLFxuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInN0b2NrXCIgLy8gb3IgXCJmdXR1cmVzXCIgb3IgXCJiaXRjb2luXCIgb3IgXCJmb3JleFwiIG9yIFwiaW5kZXhcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyAgICAuLi4uLlxuICAgICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICAgICovXG4gICAgfVxuXG4gICAgcmVzb2x2ZVN5bWJvbChcbiAgICAgICAgc3ltYm9sTmFtZSxcbiAgICAgICAgb25TeW1ib2xSZXNvbHZlZENhbGxiYWNrLFxuICAgICAgICBvblJlc29sdmVFcnJvckNhbGxiYWNrXG4gICAgKSB7XG4gICAgICAgIGxldCBbcXVvdGUsIGJhc2VdID0gc3ltYm9sTmFtZS5zcGxpdChcIl9cIik7XG4gICAgICAgIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIEZldGNoQ2hhaW4oXCJnZXRBc3NldFwiLCBxdW90ZSksXG4gICAgICAgICAgICBGZXRjaENoYWluKFwiZ2V0QXNzZXRcIiwgYmFzZSlcbiAgICAgICAgXSlcbiAgICAgICAgICAgIC50aGVuKGFzc2V0cyA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IFtxdW90ZUFzc2V0LCBiYXNlQXNzZXRdID0gYXNzZXRzO1xuICAgICAgICAgICAgICAgIG9uU3ltYm9sUmVzb2x2ZWRDYWxsYmFjayhcbiAgICAgICAgICAgICAgICAgICAgbmV3IFN5bWJvbEluZm8oe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlja2VyOiBzeW1ib2xOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVBc3NldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VBc3NldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb25zOiB0aGlzLnN1cHBvcnRlZF9yZXNvbHV0aW9uc1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKG9uUmVzb2x2ZUVycm9yQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIGdldEJhcnMoXG4gICAgICAgIHN5bWJvbEluZm8sXG4gICAgICAgIHJlc29sdXRpb24sXG4gICAgICAgIGZyb20sXG4gICAgICAgIHRvLFxuICAgICAgICBvbkhpc3RvcnlDYWxsYmFjayxcbiAgICAgICAgb25FcnJvckNhbGxiYWNrLFxuICAgICAgICBmaXJzdERhdGFSZXF1ZXN0XG4gICAgKSB7XG4gICAgICAgIGZyb20gKj0gMTAwMDtcbiAgICAgICAgdG8gKj0gMTAwMDtcbiAgICAgICAgbGV0IGJhcnMgPSB0aGlzLl9nZXRIaXN0b3J5KCk7XG4gICAgICAgIHRoaXMubGF0ZXN0QmFyID0gYmFyc1tiYXJzLmxlbmd0aCAtIDFdO1xuICAgICAgICBiYXJzID0gYmFycy5maWx0ZXIoYSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYS50aW1lID49IGZyb20gJiYgYS50aW1lIDw9IHRvO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5pbnRlcnZhbCAhPT0gcmVzb2x1dGlvbikge1xuICAgICAgICAgICAgaWYgKCFmaXJzdERhdGFSZXF1ZXN0KSByZXR1cm47XG5cbiAgICAgICAgICAgIGxldCBuZXdCdWNrZXRTaXplID0gZ2V0QnVja2V0RnJvbVJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgICAgICAgICBNYXJrZXRzQWN0aW9ucy5jaGFuZ2VCdWNrZXRTaXplKG5ld0J1Y2tldFNpemUpO1xuXG4gICAgICAgICAgICByZXR1cm4gTWFya2V0c0FjdGlvbnMudW5TdWJzY3JpYmVNYXJrZXQoXG4gICAgICAgICAgICAgICAgc3ltYm9sSW5mby5xdW90ZUFzc2V0LmdldChcImlkXCIpLFxuICAgICAgICAgICAgICAgIHN5bWJvbEluZm8uYmFzZUFzc2V0LmdldChcImlkXCIpXG4gICAgICAgICAgICApLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIE1hcmtldHNBY3Rpb25zLnN1YnNjcmliZU1hcmtldChcbiAgICAgICAgICAgICAgICAgICAgc3ltYm9sSW5mby5iYXNlQXNzZXQsXG4gICAgICAgICAgICAgICAgICAgIHN5bWJvbEluZm8ucXVvdGVBc3NldCxcbiAgICAgICAgICAgICAgICAgICAgbmV3QnVja2V0U2l6ZVxuICAgICAgICAgICAgICAgICkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBiYXJzID0gdGhpcy5fZ2V0SGlzdG9yeSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhdGVzdEJhciA9IGJhcnNbYmFycy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgYmFycyA9IGJhcnMuZmlsdGVyKGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEudGltZSA+PSBmcm9tICYmIGEudGltZSA8PSB0bztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwgPSByZXNvbHV0aW9uO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWJhcnMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uSGlzdG9yeUNhbGxiYWNrKGJhcnMsIHtub0RhdGE6IHRydWV9KTtcbiAgICAgICAgICAgICAgICAgICAgb25IaXN0b3J5Q2FsbGJhY2soYmFycyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFxuICAgICAgICAvLyAgICAgXCJnZXRCYXJzXCIsXG4gICAgICAgIC8vICAgICBzeW1ib2xJbmZvLnRpY2tlcixcbiAgICAgICAgLy8gICAgIHJlc29sdXRpb24sXG4gICAgICAgIC8vICAgICBcImZpcnN0RGF0YVJlcXVlc3RcIixcbiAgICAgICAgLy8gICAgIGZpcnN0RGF0YVJlcXVlc3QsXG4gICAgICAgIC8vICAgICBcImJhcnNcIixcbiAgICAgICAgLy8gICAgIGJhcnNcbiAgICAgICAgLy8gKTtcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHJlc29sdXRpb247XG4gICAgICAgIGlmICghYmFycy5sZW5ndGgpIHJldHVybiBvbkhpc3RvcnlDYWxsYmFjayhiYXJzLCB7bm9EYXRhOiB0cnVlfSk7XG5cbiAgICAgICAgb25IaXN0b3J5Q2FsbGJhY2soYmFycyk7XG4gICAgfVxuXG4gICAgX2dldEhpc3RvcnkoKSB7XG4gICAgICAgIHJldHVybiBNYXJrZXRzU3RvcmUuZ2V0U3RhdGUoKS5wcmljZURhdGE7XG4gICAgfVxuXG4gICAgc3Vic2NyaWJlQmFycyhcbiAgICAgICAgc3ltYm9sSW5mbyxcbiAgICAgICAgcmVzb2x1dGlvbixcbiAgICAgICAgb25SZWFsdGltZUNhbGxiYWNrLFxuICAgICAgICBzdWJzY3JpYmVyVUlELFxuICAgICAgICBvblJlc2V0Q2FjaGVOZWVkZWRDYWxsYmFja1xuICAgICkge1xuICAgICAgICBNYXJrZXRzU3RvcmUudW5zdWJzY3JpYmUoXCJzdWJzY3JpYmVCYXJzXCIpO1xuICAgICAgICBvblJlc2V0Q2FjaGVOZWVkZWRDYWxsYmFjaygpO1xuICAgICAgICBNYXJrZXRzU3RvcmUuc3Vic2NyaWJlKFwic3Vic2NyaWJlQmFyc1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgYmFycyA9IHRoaXMuX2dldEhpc3RvcnkoKTtcbiAgICAgICAgICAgIGxldCBuZXdCYXJzID0gYmFycy5maWx0ZXIoYSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmxhdGVzdEJhcikgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGEudGltZSA+IHRoaXMubGF0ZXN0QmFyLnRpbWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwic3Vic2NyaWJlQmFyc1wiLCBNYXJrZXRzU3RvcmUuZ2V0U3RhdGUoKS5hY3RpdmVNYXJrZXQsIFwiZm91bmQgbmV3IGJhcnM6XCIsIG5ld0JhcnMpO1xuICAgICAgICAgICAgaWYgKG5ld0JhcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbmV3QmFycy5mb3JFYWNoKGJhciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG9uUmVhbHRpbWVDYWxsYmFjayhiYXIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMubGF0ZXN0QmFyID0gbmV3QmFyc1tuZXdCYXJzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBsYXRlc3QgYmFyIGlzIGRpZmZlcmVudFxuICAgICAgICAgICAgICAgIGxldCBkaWRDaGFuZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5sYXRlc3RCYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubGF0ZXN0QmFyW2tleV0gIT09IGJhcnNbYmFycy5sZW5ndGggLSAxXVtrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaWRDaGFuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkaWRDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgb25SZWFsdGltZUNhbGxiYWNrKGJhcnNbYmFycy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB1bnN1YnNjcmliZUJhcnMoKSB7XG4gICAgICAgIC8qXG4gICAgICAgICogVGhpcyBpcyBBTFdBWVMgY2FsbGVkIGFmdGVyIHN1YnNjcmliZUJhcnMgZm9yIHNvbWUgcmVhc29uLCBidXRcbiAgICAgICAgKiBzb21ldGltZXMgaXQgZXhlY3V0ZXMgQkVGT1JFIHRoZSBzdWJzY3JpYmUgY2FsbCBpbiBzdWJzY3JpYmVCYXJzIGFuZFxuICAgICAgICAqIHNvbWV0aW1lcyBBRlRFUi4gVGhpcyBjYXVzZXMgdGhlIGNhbGxiYWNrIHRvIGJlIGNsZWFyZWQgYW5kIHdlIHN0b3BcbiAgICAgICAgKiByZWNlaXZpbmcgdXBkYXRlcyBmcm9tIHRoZSBNYXJrZXRTdG9yZS4gVW5sZXNzIHdlIGZpbmQgaXQgY2F1c2VzIGJ1Z3MsXG4gICAgICAgICogaXQncyBiZXN0IHRvIGp1c3Qgbm90IHVzZSB0aGlzLlxuICAgICAgICAqL1xuICAgICAgICAvLyBNYXJrZXRzU3RvcmUudW5zdWJzY3JpYmUoXCJzdWJzY3JpYmVCYXJzXCIpO1xuICAgICAgICAvLyB0aGlzLmxhdGVzdEJhciA9IG51bGw7XG4gICAgfVxuXG4gICAgY2FsY3VsYXRlSGlzdG9yeURlcHRoKHJlc29sdXRpb24sIHJlc29sdXRpb25CYWNrLCBpbnRlcnZhbEJhY2spIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBnZXRTZXJ2ZXJUaW1lKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7XG4gICAgfVxufVxuXG5jb25zdCBzdXBwb3J0ZWRUaW1lWm9uZXMgPSBbXG4gICAgXCJBbWVyaWNhL0FyZ2VudGluYS9CdWVub3NfQWlyZXNcIixcbiAgICBcIkFtZXJpY2EvQm9nb3RhXCIsXG4gICAgXCJBbWVyaWNhL0NhcmFjYXNcIixcbiAgICBcIkFtZXJpY2EvQ2hpY2Fnb1wiLFxuICAgIFwiQW1lcmljYS9FbF9TYWx2YWRvclwiLFxuICAgIFwiQW1lcmljYS9Mb3NfQW5nZWxlc1wiLFxuICAgIFwiQW1lcmljYS9NZXhpY29fQ2l0eVwiLFxuICAgIFwiQW1lcmljYS9OZXdfWW9ya1wiLFxuICAgIFwiQW1lcmljYS9QaG9lbml4XCIsXG4gICAgXCJBbWVyaWNhL1Nhb19QYXVsb1wiLFxuICAgIFwiQW1lcmljYS9Ub3JvbnRvXCIsXG4gICAgXCJBbWVyaWNhL1ZhbmNvdXZlclwiLFxuICAgIFwiQXNpYS9BbG1hdHlcIixcbiAgICBcIkFzaWEvQXNoa2hhYmFkXCIsXG4gICAgXCJBc2lhL0Jhbmdrb2tcIixcbiAgICBcIkFzaWEvRHViYWlcIixcbiAgICBcIkFzaWEvSG9uZ19Lb25nXCIsXG4gICAgXCJBc2lhL0thdGhtYW5kdVwiLFxuICAgIFwiQXNpYS9Lb2xrYXRhXCIsXG4gICAgXCJBc2lhL1Nlb3VsXCIsXG4gICAgXCJBc2lhL1NoYW5naGFpXCIsXG4gICAgXCJBc2lhL1NpbmdhcG9yZVwiLFxuICAgIFwiQXNpYS9UYWlwZWlcIixcbiAgICBcIkFzaWEvVGVocmFuXCIsXG4gICAgXCJBc2lhL1Rva3lvXCIsXG4gICAgXCJBdXN0cmFsaWEvQUNUXCIsXG4gICAgXCJBdXN0cmFsaWEvQWRlbGFpZGVcIixcbiAgICBcIkF1c3RyYWxpYS9CcmlzYmFuZVwiLFxuICAgIFwiQXVzdHJhbGlhL1N5ZG5leVwiLFxuICAgIFwiRXVyb3BlL0F0aGVuc1wiLFxuICAgIFwiRXVyb3BlL0JlcmxpblwiLFxuICAgIFwiRXVyb3BlL0lzdGFuYnVsXCIsXG4gICAgXCJFdXJvcGUvTG9uZG9uXCIsXG4gICAgXCJFdXJvcGUvTWFkcmlkXCIsXG4gICAgXCJFdXJvcGUvTW9zY293XCIsXG4gICAgXCJFdXJvcGUvUGFyaXNcIixcbiAgICBcIkV1cm9wZS9XYXJzYXdcIixcbiAgICBcIkV1cm9wZS9adXJpY2hcIixcbiAgICBcIlBhY2lmaWMvQXVja2xhbmRcIixcbiAgICBcIlBhY2lmaWMvQ2hhdGhhbVwiLFxuICAgIFwiUGFjaWZpYy9GYWthb2ZvXCIsXG4gICAgXCJQYWNpZmljL0hvbm9sdWx1XCIsXG4gICAgXCJVUy9Nb3VudGFpblwiXG5dO1xuXG5mdW5jdGlvbiBnZXRUVlRpbWV6b25lKCkge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBtb21lbnQudHouZ3Vlc3MoKTtcbiAgICBjb25zdCBkZWZhdWx0Wm9uZSA9IFwiRXVyb3BlL0xvbmRvblwiO1xuXG4gICAgbGV0IGlzU3VwcG9ydGVkID0gc3VwcG9ydGVkVGltZVpvbmVzLmluZGV4T2YoY3VycmVudCkgIT09IC0xO1xuICAgIGlmIChpc1N1cHBvcnRlZCkgcmV0dXJuIGN1cnJlbnQ7XG4gICAgZWxzZSB7XG4gICAgICAgIC8qIFRyeSB0byBmaW5kIGEgbWF0Y2hpbmcgdGltZXpvbmUgZnJvbSB0aGUgbGltaXRlZCBsaXN0IHN1cHBvcnRlZCBieSBUcmFkaW5nVmlldyAqL1xuICAgICAgICBjb25zdCB0aW1lID0gbW9tZW50KCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgYWN0dWFsID0gbW9tZW50LnR6KHRpbWUsIGN1cnJlbnQpLmZvcm1hdCgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1cHBvcnRlZFRpbWVab25lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHpvbmVUaW1lID0gbW9tZW50LnR6KHRpbWUsIHN1cHBvcnRlZFRpbWVab25lc1tpXSk7XG4gICAgICAgICAgICBpZiAoem9uZVRpbWUuZm9ybWF0KCkgPT09IGFjdHVhbCkge1xuICAgICAgICAgICAgICAgIGlmIChfX0RFVl9fKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgIGBGb3VuZCBhIG1hdGNoIGZvciAke2N1cnJlbnR9IHRpbWV6b25lLCB1c2luZyAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFRpbWVab25lc1tpXVxuICAgICAgICAgICAgICAgICAgICAgICAgfWBcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAvLyBGb3VuZCBhIG1hdGNoLCByZXR1cm4gdGhhdCB6b25lXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cHBvcnRlZFRpbWVab25lc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYE5vIG1hdGNoaW5nIHRpbWV6b25lIGZvdW5kIGZvciAke2N1cnJlbnR9LCBzZXR0aW5nIHRvIGRlZmF1bHQgdmFsdWUgb2YgRXVyb3BlL0xvbmRvbmBcbiAgICApO1xuICAgIHJldHVybiBkZWZhdWx0Wm9uZTtcbn1cblxuZXhwb3J0IHtEYXRhRmVlZCwgU3ltYm9sSW5mbywgZ2V0UmVzb2x1dGlvbnNGcm9tQnVja2V0cywgZ2V0VFZUaW1lem9uZX07XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuaW1wb3J0IFJlYWN0SGlnaGNoYXJ0IGZyb20gXCJyZWFjdC1oaWdoY2hhcnRzXCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IHtjbG9uZURlZXB9IGZyb20gXCJsb2Rhc2gtZXNcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgY29sb3JzIGZyb20gXCJhc3NldHMvY29sb3JzXCI7XHJcbmltcG9ydCBBc3NldE5hbWUgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXROYW1lXCI7XHJcbmltcG9ydCB7ZGlkT3JkZXJzQ2hhbmdlfSBmcm9tIFwiY29tbW9uL01hcmtldENsYXNzZXNcIjtcclxuXHJcbmNsYXNzIERlcHRoSGlnaENoYXJ0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMpIHtcclxuICAgICAgICBsZXQgc2V0dGxlQ2hlY2sgPSBpc05hTihuZXh0UHJvcHMuZmVlZFByaWNlKVxyXG4gICAgICAgICAgICA/IGZhbHNlXHJcbiAgICAgICAgICAgIDogbmV4dFByb3BzLmZlZWRQcmljZSAhPT0gdGhpcy5wcm9wcy5mZWVkUHJpY2U7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgZGlkT3JkZXJzQ2hhbmdlKG5leHRQcm9wcy5vcmRlcnMsIHRoaXMucHJvcHMub3JkZXJzKSB8fFxyXG4gICAgICAgICAgICBkaWRPcmRlcnNDaGFuZ2UobmV4dFByb3BzLmNhbGxfb3JkZXJzLCB0aGlzLnByb3BzLmNhbGxfb3JkZXJzKSB8fFxyXG4gICAgICAgICAgICBzZXR0bGVDaGVjayB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuZmVlZFByaWNlICE9PSB0aGlzLnByb3BzLmZlZWRQcmljZSB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuaGVpZ2h0ICE9PSB0aGlzLnByb3BzLmhlaWdodCB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuaXNQYW5lbEFjdGl2ZSAhPT0gdGhpcy5wcm9wcy5pc1BhbmVsQWN0aXZlIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5hY3RpdmVQYW5lbHMgIT09IHRoaXMucHJvcHMuYWN0aXZlUGFuZWxzIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5MQ1AgIT09IHRoaXMucHJvcHMuTENQIHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5zaG93Q2FsbExpbWl0ICE9PSB0aGlzLnByb3BzLnNob3dDYWxsTGltaXQgfHxcclxuICAgICAgICAgICAgbmV4dFByb3BzLmhhc1ByZWRpY3Rpb24gIT09IHRoaXMucHJvcHMuaGFzUHJlZGljdGlvbiB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMuZmVlZFByaWNlICE9PSB0aGlzLnByb3BzLmZlZWRQcmljZSB8fFxyXG4gICAgICAgICAgICBuZXh0UHJvcHMubWFya2V0UmVhZHkgIT09IHRoaXMucHJvcHMubWFya2V0UmVhZHlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMucmVmbG93Q2hhcnQoNTAwKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5yZWZzLmRlcHRoQ2hhcnQgJiZcclxuICAgICAgICAgICAgbmV4dFByb3BzLmFjdGl2ZVBhbmVscyAhPT0gdGhpcy5wcm9wcy5hY3RpdmVQYW5lbHNcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5yZWZsb3dDaGFydCgxMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsVXBkYXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNlbnRlclJlZikge1xyXG4gICAgICAgICAgICB0aGlzLnRlbXBTY3JvbGwgPSB0aGlzLnByb3BzLmNlbnRlclJlZi5zY3JvbGxUb3A7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jZW50ZXJSZWYpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jZW50ZXJSZWYuc2Nyb2xsVG9wID0gdGhpcy50ZW1wU2Nyb2xsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZWZsb3dDaGFydCh0aW1lb3V0KSB7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlZnMuZGVwdGhDaGFydCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZzLmRlcHRoQ2hhcnQuY2hhcnQucmVmbG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0VGhlbWVDb2xvcnMocHJvcHMgPSB0aGlzLnByb3BzKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbG9yc1twcm9wcy50aGVtZV07XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIGZsYXRfYmlkcyxcclxuICAgICAgICAgICAgZmxhdF9hc2tzLFxyXG4gICAgICAgICAgICBmbGF0X2NhbGxzLFxyXG4gICAgICAgICAgICBmbGF0X3NldHRsZXMsXHJcbiAgICAgICAgICAgIHRvdGFsQmlkcyxcclxuICAgICAgICAgICAgdG90YWxBc2tzLFxyXG4gICAgICAgICAgICBiYXNlLFxyXG4gICAgICAgICAgICBxdW90ZSxcclxuICAgICAgICAgICAgZmVlZFByaWNlXHJcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgcHJpbWFyeVRleHQsXHJcbiAgICAgICAgICAgIGNhbGxDb2xvcixcclxuICAgICAgICAgICAgc2V0dGxlQ29sb3IsXHJcbiAgICAgICAgICAgIHNldHRsZUZpbGxDb2xvcixcclxuICAgICAgICAgICAgYmlkQ29sb3IsXHJcbiAgICAgICAgICAgIGJpZEZpbGxDb2xvcixcclxuICAgICAgICAgICAgYXNrQ29sb3IsXHJcbiAgICAgICAgICAgIGFza0ZpbGxDb2xvcixcclxuICAgICAgICAgICAgYXhpc0xpbmVDb2xvclxyXG4gICAgICAgIH0gPSB0aGlzLl9nZXRUaGVtZUNvbG9ycygpO1xyXG5cclxuICAgICAgICBsZXQge25hbWU6IGJhc2VTeW1ib2wsIHByZWZpeDogYmFzZVByZWZpeH0gPSB1dGlscy5yZXBsYWNlTmFtZShiYXNlKTtcclxuICAgICAgICBsZXQge25hbWU6IHF1b3RlU3ltYm9sLCBwcmVmaXg6IHF1b3RlUHJlZml4fSA9IHV0aWxzLnJlcGxhY2VOYW1lKHF1b3RlKTtcclxuICAgICAgICBiYXNlU3ltYm9sID0gKGJhc2VQcmVmaXggfHwgXCJcIikgKyBiYXNlU3ltYm9sO1xyXG4gICAgICAgIHF1b3RlU3ltYm9sID0gKHF1b3RlUHJlZml4IHx8IFwiXCIpICsgcXVvdGVTeW1ib2w7XHJcblxyXG4gICAgICAgIGxldCBmbGF0QmlkcyA9IGNsb25lRGVlcChmbGF0X2JpZHMpLFxyXG4gICAgICAgICAgICBmbGF0QXNrcyA9IGNsb25lRGVlcChmbGF0X2Fza3MpLFxyXG4gICAgICAgICAgICBmbGF0Q2FsbHMgPSBjbG9uZURlZXAoZmxhdF9jYWxscyksXHJcbiAgICAgICAgICAgIGZsYXRTZXR0bGVzID0gY2xvbmVEZWVwKGZsYXRfc2V0dGxlcyk7XHJcblxyXG4gICAgICAgIGxldCBjb25maWcgPSB7XHJcbiAgICAgICAgICAgIGNoYXJ0OiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFyZWFcIixcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDI1NSwgMCwgMCwgMClcIixcclxuICAgICAgICAgICAgICAgIHNwYWNpbmc6IFsxMCwgMCwgNSwgMF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGl0bGU6IHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY3JlZGl0czoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGVnZW5kOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByYW5nZVNlbGVjdG9yOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBuYXZpZ2F0b3I6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNjcm9sbGJhcjoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGF0YUdyb3VwaW5nOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0b29sdGlwOiB7XHJcbiAgICAgICAgICAgICAgICBzaGFyZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoMCwgMCwgMCwgMC43NSlcIixcclxuICAgICAgICAgICAgICAgIHVzZUhUTUw6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgXHJcblx0XHRcdFx0XHQ8dGFibGU+XHJcblx0XHRcdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdFx0XHQ8dGQ+JHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJleGNoYW5nZS5wcmljZVwiKX06PC90ZD5cclxuXHRcdFx0XHRcdFx0XHQ8dGQgc3R5bGU9XCJ0ZXh0LWFsaWduOiByaWdodFwiPiR7dXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9ICR7YmFzZVN5bWJvbH0vJHtxdW90ZVN5bWJvbH08L3RkPlxyXG5cdFx0XHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHRcdFx0PHRkPiR7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwiZXhjaGFuZ2UucXVhbnRpdHlcIil9OjwvdGQ+XHJcblx0XHRcdFx0XHRcdFx0PHRkIHN0eWxlPVwidGV4dC1hbGlnbjogcmlnaHRcIj4ke3V0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0gJHtxdW90ZVN5bWJvbH08L3RkPlxyXG5cdFx0XHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdFx0PC90YWJsZT5cclxuXHRcdFx0XHRcdGA7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCIjRkZGRkZGXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2VyaWVzOiBbXSxcclxuICAgICAgICAgICAgeUF4aXM6IHtcclxuICAgICAgICAgICAgICAgIGxhYmVsczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHByaW1hcnlUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3Bwb3NpdGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIiNGRkZGRkZcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBncmlkTGluZVdpZHRoOiAxLFxyXG4gICAgICAgICAgICAgICAgZ3JpZExpbmVDb2xvcjogXCJyZ2JhKDE5NiwgMTk2LCAxOTYsIDAuMzApXCIsXHJcbiAgICAgICAgICAgICAgICBncmlkWkluZGV4OiAxLFxyXG4gICAgICAgICAgICAgICAgY3Jvc3NoYWlyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc25hcDogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UHJpY2VJbmRpY2F0b3I6IHtcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB4QXhpczoge1xyXG4gICAgICAgICAgICAgICAgbGFiZWxzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHByaW1hcnlUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvcm1hdHRlcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLnZhbHVlIC8gcG93ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGluYWw6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbGluZUNvbG9yOiBcIiMwMDAwMDBcIixcclxuICAgICAgICAgICAgICAgIHRpdGxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogbnVsbFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBsb3RMaW5lczogW11cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcGxvdE9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIGFyZWE6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VyaWVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZU1vdXNlVHJhY2tpbmc6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQ2VudGVyIHRoZSBjaGFydHMgYmV0d2VlbiBiaWRzIGFuZCBhc2tzXHJcbiAgICAgICAgaWYgKGZsYXRCaWRzLmxlbmd0aCA+IDAgJiYgZmxhdEFza3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsZXQgbWlkZGxlVmFsdWUgPVxyXG4gICAgICAgICAgICAgICAgKGZsYXRBc2tzWzBdWzBdICsgZmxhdEJpZHNbZmxhdEJpZHMubGVuZ3RoIC0gMV1bMF0pIC8gMjtcclxuXHJcbiAgICAgICAgICAgIGNvbmZpZy54QXhpcy5taW4gPSBtaWRkbGVWYWx1ZSAqIDAuNDtcclxuICAgICAgICAgICAgY29uZmlnLnhBeGlzLm1heCA9IG1pZGRsZVZhbHVlICogMS42O1xyXG4gICAgICAgICAgICBpZiAoY29uZmlnLnhBeGlzLm1heCA8IGZsYXRBc2tzWzBdWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcueEF4aXMubWF4ID0gZmxhdEFza3NbMF1bMF0gKiAxLjU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbmZpZy54QXhpcy5taW4gPiBmbGF0Qmlkc1tmbGF0Qmlkcy5sZW5ndGggLSAxXVswXSkge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLnhBeGlzLm1pbiA9IGZsYXRCaWRzW2ZsYXRCaWRzLmxlbmd0aCAtIDFdWzBdICogMC41O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCB5TWF4ID0gMDtcclxuICAgICAgICAgICAgZmxhdEJpZHMuZm9yRWFjaChiID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChiWzBdID49IGNvbmZpZy54QXhpcy5taW4pIHtcclxuICAgICAgICAgICAgICAgICAgICB5TWF4ID0gTWF0aC5tYXgoYlsxXSwgeU1heCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmbGF0QXNrcy5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFbMF0gPD0gY29uZmlnLnhBeGlzLm1heCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHlNYXggPSBNYXRoLm1heChhWzFdLCB5TWF4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbmZpZy55QXhpcy5tYXggPSB5TWF4ICogMS4xNTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkanVzdCB5IGF4aXMgbGFiZWwgZGVjaW1hbHNcclxuICAgICAgICAgICAgbGV0IHlMYWJlbERlY2ltYWxzID0geU1heCA+IDEwID8gMCA6IHlNYXggPiAxID8gMiA6IDU7XHJcbiAgICAgICAgICAgIGNvbmZpZy55QXhpcy5sYWJlbHMuZm9ybWF0dGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXRpbHMuZm9ybWF0X251bWJlcih0aGlzLnZhbHVlLCB5TGFiZWxEZWNpbWFscyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIGlmIChmbGF0Qmlkcy5sZW5ndGggJiYgIWZsYXRBc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25maWcueEF4aXMubWluID0gZmxhdEJpZHNbZmxhdEJpZHMubGVuZ3RoIC0gMV1bMF0gKiAwLjQ7XHJcbiAgICAgICAgICAgIGNvbmZpZy54QXhpcy5tYXggPSBmbGF0Qmlkc1tmbGF0Qmlkcy5sZW5ndGggLSAxXVswXSAqIDEuNjtcclxuICAgICAgICB9IGVsc2UgaWYgKGZsYXRBc2tzLmxlbmd0aCAmJiAhZmxhdEJpZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy54QXhpcy5taW4gPSAwO1xyXG4gICAgICAgICAgICBjb25maWcueEF4aXMubWF4ID0gZmxhdEFza3NbMF1bMF0gKiAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaGFzUHJlZGljdGlvbikge1xyXG4gICAgICAgICAgICBjb25maWcueEF4aXMubWluID0gLTAuMDU7XHJcbiAgICAgICAgICAgIGNvbmZpZy54QXhpcy5tYXggPSAxLjA1O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWRkIHBsb3RsaW5lcyBpZiBkZWZpbmVkXHJcbiAgICAgICAgLy8gaWYgKGZhbHNldGhpcy5wcm9wcy5wbG90TGluZSkge1xyXG4gICAgICAgIC8vXHQgY29uZmlnLnhBeGlzLnBsb3RMaW5lcy5wdXNoKHtcclxuICAgICAgICAvL1x0XHQgY29sb3I6IFwicmVkXCIsXHJcbiAgICAgICAgLy9cdFx0IGlkOiBcInBsb3RfbGluZVwiLFxyXG4gICAgICAgIC8vXHRcdCBkYXNoU3R5bGU6IFwibG9uZ2Rhc2hkb3RcIixcclxuICAgICAgICAvL1x0XHQgdmFsdWU6IHRoaXMucHJvcHMucGxvdExpbmUgKiBwb3dlcixcclxuICAgICAgICAvL1x0XHQgd2lkdGg6IDEsXHJcbiAgICAgICAgLy9cdFx0IHpJbmRleDogNVxyXG4gICAgICAgIC8vXHQgfSk7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAvLyBNYXJrZXQgYXNzZXRcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5MQ1ApIHtcclxuICAgICAgICAgICAgbGV0IGJpdEFzc2V0ID0gYmFzZS5nZXQoXCJiaXRhc3NldF9kYXRhX2lkXCIpID8gYmFzZSA6IHF1b3RlO1xyXG5cclxuICAgICAgICAgICAgbGV0IG1jciA9XHJcbiAgICAgICAgICAgICAgICBiaXRBc3NldC5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY3VycmVudF9mZWVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYWludGVuYW5jZV9jb2xsYXRlcmFsX3JhdGlvXCJcclxuICAgICAgICAgICAgICAgIF0pIC8gMTAwMDtcclxuXHJcbiAgICAgICAgICAgIGxldCBzcXIgPVxyXG4gICAgICAgICAgICAgICAgYml0QXNzZXQuZ2V0SW4oW1xyXG4gICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcclxuICAgICAgICAgICAgICAgICAgICBcImN1cnJlbnRfZmVlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibWF4aW11bV9zaG9ydF9zcXVlZXplX3JhdGlvXCJcclxuICAgICAgICAgICAgICAgIF0pIC8gMTAwMDtcclxuXHJcbiAgICAgICAgICAgIGxldCBzZXR0bGVtZW50X3N1cHBvcnRfcHJpY2UgPSB0aGlzLnByb3BzLmludmVydGVkQ2FsbHNcclxuICAgICAgICAgICAgICAgID8gKHRoaXMucHJvcHMuTENQIC8gbWNyKSAqIHNxclxyXG4gICAgICAgICAgICAgICAgOiAodGhpcy5wcm9wcy5MQ1AgKiBtY3IpIC8gc3FyO1xyXG5cclxuICAgICAgICAgICAgY29uZmlnLnhBeGlzLnBsb3RMaW5lcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBheGlzTGluZUNvbG9yLFxyXG4gICAgICAgICAgICAgICAgaWQ6IFwicGxvdF9saW5lXCIsXHJcbiAgICAgICAgICAgICAgICBkYXNoU3R5bGU6IFwibG9uZ2Rhc2hcIixcclxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BzLkxDUCxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogY291bnRlcnBhcnQudHJhbnNsYXRlKFwiZXhwbG9yZXIuYmxvY2suY2FsbF9saW1pdFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiB0aGlzLnByb3BzLkxDUC50b0ZpeGVkKDQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHByaW1hcnlUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250V2VpZ2h0OiBcImJvbGRcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeDogIXRoaXMucHJvcHMuaW52ZXJ0ZWRDYWxscyA/IC0xMCA6IDVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMixcclxuICAgICAgICAgICAgICAgIHpJbmRleDogNVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbmZpZy54QXhpcy5wbG90TGluZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogYXhpc0xpbmVDb2xvcixcclxuICAgICAgICAgICAgICAgIGlkOiBcInBsb3RfbGluZVwiLFxyXG4gICAgICAgICAgICAgICAgZGFzaFN0eWxlOiBcImxvbmdkYXNoXCIsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogc2V0dGxlbWVudF9zdXBwb3J0X3ByaWNlLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBjb3VudGVycGFydC50cmFuc2xhdGUoXCJleHBsb3Jlci5ibG9jay5nc19zdXBwb3J0XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHNldHRsZW1lbnRfc3VwcG9ydF9wcmljZS50b0ZpeGVkKDQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHByaW1hcnlUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250V2VpZ2h0OiBcImJvbGRcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeDogdGhpcy5wcm9wcy5pbnZlcnRlZENhbGxzID8gLTEwIDogNVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAyLFxyXG4gICAgICAgICAgICAgICAgekluZGV4OiA1XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaWYgKHRoaXMucHJvcHMuU1FQKSB7XHJcbiAgICAgICAgLy8gXHQgY29uZmlnLnhBeGlzLnBsb3RMaW5lcy5wdXNoKHtcclxuICAgICAgICAvLyBcdFx0IGNvbG9yOiBcIiNCNkI2QjZcIixcclxuICAgICAgICAvLyBcdFx0IGlkOiBcInBsb3RfbGluZVwiLFxyXG4gICAgICAgIC8vIFx0XHQgZGFzaFN0eWxlOiBcImxvbmdkYXNoXCIsXHJcbiAgICAgICAgLy8gXHRcdCB2YWx1ZTogdGhpcy5wcm9wcy5TUVAgKiBwb3dlcixcclxuICAgICAgICAvLyBcdFx0IGxhYmVsOiB7XHJcbiAgICAgICAgLy8gXHRcdFx0IHRleHQ6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImV4Y2hhbmdlLnNxdWVlemVcIiksXHJcbiAgICAgICAgLy8gXHRcdFx0IHN0eWxlOiB7XHJcbiAgICAgICAgLy8gXHRcdFx0XHQgY29sb3I6IFwiI0RBREFEQVwiLFxyXG4gICAgICAgIC8vIFx0XHRcdFx0IGZvbnRXZWlnaHQ6IFwiYm9sZFwiXHJcbiAgICAgICAgLy8gXHRcdFx0IH1cclxuICAgICAgICAvLyBcdFx0IH0sXHJcbiAgICAgICAgLy8gXHRcdCB3aWR0aDogMixcclxuICAgICAgICAvLyBcdFx0IHpJbmRleDogNVxyXG4gICAgICAgIC8vIFx0IH0pO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgaWYgKGZlZWRQcmljZSkge1xyXG4gICAgICAgICAgICBjb25zdCBzZXR0bGVtZW50Q29sb3IgPSBiYXNlLmhhcyhcImJpdGFzc2V0XCIpID8gYXNrQ29sb3IgOiBiaWRDb2xvcjtcclxuICAgICAgICAgICAgY29uZmlnLnhBeGlzLnBsb3RMaW5lcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBzZXR0bGVtZW50Q29sb3IsXHJcbiAgICAgICAgICAgICAgICBpZDogXCJwbG90X2xpbmVcIixcclxuICAgICAgICAgICAgICAgIGRhc2hTdHlsZTogXCJzb2xpZFwiLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGZlZWRQcmljZSxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogY291bnRlcnBhcnQudHJhbnNsYXRlKFwiZXhwbG9yZXIuYmxvY2suZmVlZF9wcmljZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiBmZWVkUHJpY2UudG9GaXhlZCg0KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBwcmltYXJ5VGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udFdlaWdodDogXCJib2xkXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHg6ICF0aGlzLnByb3BzLmludmVydGVkQ2FsbHMgPyAtMTAgOiA1XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDIsXHJcbiAgICAgICAgICAgICAgICB6SW5kZXg6IDVcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgY2FsbHMgaWYgcHJlc2VudFxyXG4gICAgICAgICAgICBpZiAoZmxhdENhbGxzICYmIGZsYXRDYWxscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5zZXJpZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogYENhbGwgJHtxdW90ZVN5bWJvbH1gLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGZsYXRDYWxscyxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogY2FsbENvbG9yXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWRkIHNldHRsZSBvcmRlcnNcclxuICAgICAgICBpZiAoZmVlZFByaWNlICYmIChmbGF0U2V0dGxlcyAmJiBmbGF0U2V0dGxlcy5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5zZXJpZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBgU2V0dGxlICR7cXVvdGVTeW1ib2x9YCxcclxuICAgICAgICAgICAgICAgIGRhdGE6IGZsYXRTZXR0bGVzLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IHNldHRsZUNvbG9yLFxyXG4gICAgICAgICAgICAgICAgZmlsbENvbG9yOiBzZXR0bGVGaWxsQ29sb3JcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQdXNoIGFza3MgYW5kIGJpZHNcclxuICAgICAgICBpZiAoZmxhdEJpZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5zZXJpZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBzdGVwOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBgQmlkICR7cXVvdGVTeW1ib2x9YCxcclxuICAgICAgICAgICAgICAgIGRhdGE6IGZsYXRCaWRzLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IGJpZENvbG9yLFxyXG4gICAgICAgICAgICAgICAgZmlsbENvbG9yOiBiaWRGaWxsQ29sb3JcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZmxhdEFza3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5zZXJpZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBzdGVwOiBcImxlZnRcIixcclxuICAgICAgICAgICAgICAgIG5hbWU6IGBBc2sgJHtxdW90ZVN5bWJvbH1gLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogZmxhdEFza3MsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogYXNrQ29sb3IsXHJcbiAgICAgICAgICAgICAgICBmaWxsQ29sb3I6IGFza0ZpbGxDb2xvclxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZpeCB0aGUgaGVpZ2h0IGlmIGRlZmluZWQsIGVsc2UgdXNlIDQwMHB4O1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmhlaWdodCkge1xyXG4gICAgICAgICAgICBjb25maWcuY2hhcnQuaGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uZmlnLmNoYXJ0LmhlaWdodCA9IFwiNDAwcHhcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkZCBvbkNsaWNrIGV2ZW50IGxpc3RlbmVyIGlmIGRlZmluZWRcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkNsaWNrKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jaGFydC5ldmVudHMgPSB7XHJcbiAgICAgICAgICAgICAgICBjbGljazogdGhpcy5wcm9wcy5vbkNsaWNrLmJpbmQodGhpcylcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm5vRnJhbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IG5vLW92ZXJmbG93IG5vLXBhZGRpbmdcIj5cclxuICAgICAgICAgICAgICAgICAgICB7IWZsYXRCaWRzLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFmbGF0QXNrcy5sZW5ndGggJiZcclxuICAgICAgICAgICAgICAgICAgICAhZmxhdENhbGxzLmxlbmd0aCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibm8tZGF0YVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2Uubm9fZGF0YVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5ub1RleHQgPyBudWxsIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJiaWQtdG90YWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1dGlscy5mb3JtYXRfbnVtYmVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQmlkcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX17XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YmFzZVN5bWJvbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMubm9UZXh0ID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiYXNrLXRvdGFsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEFza3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGUuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfXtcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtxdW90ZVN5bWJvbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAge2ZsYXRCaWRzIHx8IGZsYXRBc2tzIHx8IGZsYXRDYWxscyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPFJlYWN0SGlnaGNoYXJ0IGNvbmZpZz17Y29uZmlnfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IG5vLW92ZXJmbG93IG5vLXBhZGRpbmcgbWlkZGxlLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImV4Y2hhbmdlLWJvcmRlcmVkXCIgaWQ9XCJkZXB0aF9jaGFydFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImV4Y2hhbmdlLWNvbnRlbnQtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5ub1RleHQgPyBudWxsIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImJpZC10b3RhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQmlkcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lIG5hbWU9e2Jhc2UuZ2V0KFwic3ltYm9sXCIpfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5ub1RleHQgPyBudWxsIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFzay10b3RhbCBmbG9hdC1yaWdodFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQXNrcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlLmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfXtcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBuYW1lPXtxdW90ZS5nZXQoXCJzeW1ib2xcIil9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHshZmxhdEJpZHMubGVuZ3RoICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICFmbGF0QXNrcy5sZW5ndGggJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgIWZsYXRDYWxscy5sZW5ndGggPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuby1kYXRhXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2Uubm9fZGF0YVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZmxhdEJpZHMgfHwgZmxhdEFza3MgfHwgZmxhdENhbGxzID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJlYWN0SGlnaGNoYXJ0IHJlZj1cImRlcHRoQ2hhcnRcIiBjb25maWc9e2NvbmZpZ30gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbkRlcHRoSGlnaENoYXJ0LmRlZmF1bHRQcm9wcyA9IHtcclxuICAgIGZsYXRfYmlkczogW10sXHJcbiAgICBmbGF0X2Fza3M6IFtdLFxyXG4gICAgb3JkZXJzOiB7fSxcclxuICAgIG5vVGV4dDogZmFsc2UsXHJcbiAgICBub0ZyYW1lOiB0cnVlXHJcbn07XHJcblxyXG5EZXB0aEhpZ2hDaGFydC5wcm9wVHlwZXMgPSB7XHJcbiAgICBmbGF0X2JpZHM6IFByb3BUeXBlcy5hcnJheS5pc1JlcXVpcmVkLFxyXG4gICAgZmxhdF9hc2tzOiBQcm9wVHlwZXMuYXJyYXkuaXNSZXF1aXJlZCxcclxuICAgIG9yZGVyczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEZXB0aEhpZ2hDaGFydDtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgQWNjb3VudFN0b3JlIGZyb20gXCJzdG9yZXMvQWNjb3VudFN0b3JlXCI7XHJcbmltcG9ydCBBbHRDb250YWluZXIgZnJvbSBcImFsdC1jb250YWluZXJcIjtcclxuaW1wb3J0IE5vdGlmaWVyIGZyb20gXCIuL05vdGlmaWVyXCI7XHJcblxyXG5jbGFzcyBOb3RpZmllckNvbnRhaW5lciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPEFsdENvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgc3RvcmVzPXtbQWNjb3VudFN0b3JlXX1cclxuICAgICAgICAgICAgICAgIGluamVjdD17e1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFjY291bnRTdG9yZS5nZXRTdGF0ZSgpLmN1cnJlbnRBY2NvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxOb3RpZmllciAvPlxyXG4gICAgICAgICAgICA8L0FsdENvbnRhaW5lcj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBOb3RpZmllckNvbnRhaW5lcjtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgTm90aWZpY2F0aW9uIGZyb20gXCJyZWFjdC1mb3VuZGF0aW9uLWFwcHMvc3JjL25vdGlmaWNhdGlvblwiO1xyXG5pbXBvcnQgWmZBcGkgZnJvbSBcInJlYWN0LWZvdW5kYXRpb24tYXBwcy9zcmMvdXRpbHMvZm91bmRhdGlvbi1hcGlcIjtcclxuaW1wb3J0IE9wZXJhdGlvbiBmcm9tIFwiLi4vQmxvY2tjaGFpbi9PcGVyYXRpb25cIjtcclxuaW1wb3J0IEltbXV0YWJsZSBmcm9tIFwiaW1tdXRhYmxlXCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQge0NoYWluVHlwZXMgYXMgR3JhcGhDaGFpblR5cGVzfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxubGV0IHtvcGVyYXRpb25zfSA9IEdyYXBoQ2hhaW5UeXBlcztcclxuXHJcbmxldCBvcHMgPSBPYmplY3Qua2V5cyhvcGVyYXRpb25zKTtcclxuXHJcbmNsYXNzIE5vdGlmaWVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYWNjb3VudDogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnQuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgbmV4dFByb3BzLmFjY291bnQgJiZcclxuICAgICAgICAgICAgbmV4dFByb3BzLmFjY291bnQuc2l6ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnQgJiZcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImhpc3RvcnlcIilcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgbGV0IGNoID1cclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJoaXN0b3J5XCIpICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaGlzdG9yeVwiKS5maXJzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLmFjY291bnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KFwiaGlzdG9yeVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5maXJzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvSlMoKVxyXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgbGV0IG5oID1cclxuICAgICAgICAgICAgICAgIG5leHRQcm9wcy5hY2NvdW50LmdldChcImhpc3RvcnlcIikgJiZcclxuICAgICAgICAgICAgICAgIG5leHRQcm9wcy5hY2NvdW50LmdldChcImhpc3RvcnlcIikuZmlyc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgID8gbmV4dFByb3BzLmFjY291bnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KFwiaGlzdG9yeVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5maXJzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvSlMoKVxyXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgaWYgKG5oICYmIGNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHRyaWdnZXIgbm90aWZpY2F0aW9ucyBmb3Igb3JkZXIgZmlsbHNcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICBvcHNbbmgub3BbMF1dID09PSBcImZpbGxfb3JkZXJcIiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICgoIWNoICYmIG5oLmlkKSB8fCBuaC5pZCAhPT0gY2guaWQpXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICBaZkFwaS5wdWJsaXNoKFwiYWNjb3VudC1ub3RpZnlcIiwgXCJvcGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFpmQXBpLnB1Ymxpc2goXCJhY2NvdW50LW5vdGlmeVwiLCBcImNsb3NlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMpIHtcclxuICAgICAgICBpZiAoIW5leHRQcm9wcy5hY2NvdW50IHx8ICF0aGlzLnByb3BzLmFjY291bnQpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAhSW1tdXRhYmxlLmlzKFxyXG4gICAgICAgICAgICAgICAgbmV4dFByb3BzLmFjY291bnQuZ2V0KFwiaGlzdG9yeVwiKSxcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJoaXN0b3J5XCIpXHJcbiAgICAgICAgICAgICkgfHwgIUltbXV0YWJsZS5pcyhuZXh0UHJvcHMuYWNjb3VudCwgdGhpcy5wcm9wcy5hY2NvdW50KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7YWNjb3VudH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBpZiAoIWFjY291bnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDxkaXYgLz47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdHJ4LCBpbmZvO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJoaXN0b3J5XCIpICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJoaXN0b3J5XCIpLnNpemVcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdHJ4ID0gdGhpcy5wcm9wcy5hY2NvdW50XHJcbiAgICAgICAgICAgICAgICAuZ2V0KFwiaGlzdG9yeVwiKVxyXG4gICAgICAgICAgICAgICAgLmZpcnN0KClcclxuICAgICAgICAgICAgICAgIC50b0pTKCk7XHJcbiAgICAgICAgICAgIGlmICh0cngpIHtcclxuICAgICAgICAgICAgICAgIGluZm8gPSAoXHJcbiAgICAgICAgICAgICAgICAgICAgPE9wZXJhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3RyeC5pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb3A9e3RyeC5vcH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0PXt0cngucmVzdWx0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jaz17dHJ4LmJsb2NrX251bX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudD17YWNjb3VudC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZURhdGU9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVGZWU9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdHJ4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiA8ZGl2IC8+O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE5vdGlmaWNhdGlvbi5TdGF0aWNcclxuICAgICAgICAgICAgICAgIGlkPVwiYWNjb3VudC1ub3RpZnlcIlxyXG4gICAgICAgICAgICAgICAgdGl0bGU9e251bGx9XHJcbiAgICAgICAgICAgICAgICBpbWFnZT1cIlwiXHJcbiAgICAgICAgICAgICAgICB3cmFwcGVyRWxlbWVudD1cImRpdlwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT57aW5mb308L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgPC9Ob3RpZmljYXRpb24uU3RhdGljPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuTm90aWZpZXIgPSBCaW5kVG9DaGFpblN0YXRlKE5vdGlmaWVyKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE5vdGlmaWVyO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBaZkFwaSBmcm9tIFwicmVhY3QtZm91bmRhdGlvbi1hcHBzL3NyYy91dGlscy9mb3VuZGF0aW9uLWFwaVwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCB7QXNzZXR9IGZyb20gXCJjb21tb24vTWFya2V0Q2xhc3Nlc1wiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEFjY291bnRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL0FjY291bnRBY3Rpb25zXCI7XHJcbmltcG9ydCBSZWFjdFRvb2x0aXAgZnJvbSBcInJlYWN0LXRvb2x0aXBcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQge1xyXG4gICAgcmVxdWVzdERlcG9zaXRBZGRyZXNzLFxyXG4gICAgdmFsaWRhdGVBZGRyZXNzLFxyXG4gICAgV2l0aGRyYXdBZGRyZXNzZXMsXHJcbiAgICBnZXREZXBvc2l0QWRkcmVzc1xyXG59IGZyb20gXCJjb21tb24vZ2F0ZXdheU1ldGhvZHNcIjtcclxuaW1wb3J0IENvcHlCdXR0b24gZnJvbSBcIi4uL1V0aWxpdHkvQ29weUJ1dHRvblwiO1xyXG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XHJcbmltcG9ydCBMb2FkaW5nSW5kaWNhdG9yIGZyb20gXCIuLi9Mb2FkaW5nSW5kaWNhdG9yXCI7XHJcbmltcG9ydCB7Y2hlY2tCYWxhbmNlfSBmcm9tIFwiY29tbW9uL3RyeEhlbHBlclwiO1xyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gXCJhbHQtcmVhY3RcIjtcclxuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XHJcbmltcG9ydCB7RGVjaW1hbENoZWNrZXJ9IGZyb20gXCIuLi9VdGlsaXR5L0RlY2ltYWxDaGVja2VyXCI7XHJcbmltcG9ydCB7b3BlbmxlZGdlckFQSXN9IGZyb20gXCJhcGkvYXBpQ29uZmlnXCI7XHJcbmltcG9ydCB7Z2V0V2FsbGV0TmFtZX0gZnJvbSBcImJyYW5kaW5nXCI7XHJcbmltcG9ydCB7TW9kYWwsIFRvb2x0aXB9IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IEZlZUFzc2V0U2VsZWN0b3IgZnJvbSBcImNvbXBvbmVudHMvVXRpbGl0eS9GZWVBc3NldFNlbGVjdG9yXCI7XHJcblxyXG5jbGFzcyBEZXBvc2l0V2l0aGRyYXdDb250ZW50IGV4dGVuZHMgRGVjaW1hbENoZWNrZXIge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBiYWxhbmNlOiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LFxyXG4gICAgICAgIHNlbmRlcjogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnQuaXNSZXF1aXJlZCxcclxuICAgICAgICBhc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgY29yZUFzc2V0OiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZCxcclxuICAgICAgICBnbG9iYWxPYmplY3Q6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgY29yZUFzc2V0OiBcIjEuMy4wXCIsXHJcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBcIjIuMC4wXCJcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHRvQWRkcmVzczogV2l0aGRyYXdBZGRyZXNzZXMuZ2V0TGFzdChwcm9wcy53YWxsZXRUeXBlKSxcclxuICAgICAgICAgICAgd2l0aGRyYXdWYWx1ZTogXCJcIixcclxuICAgICAgICAgICAgYW1vdW50RXJyb3I6IG51bGwsXHJcbiAgICAgICAgICAgIHN5bWJvbDogcHJvcHMuYXNzZXQuZ2V0KFwic3ltYm9sXCIpLFxyXG4gICAgICAgICAgICB0b193aXRoZHJhdzogbmV3IEFzc2V0KHtcclxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBwcm9wcy5hc3NldC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogcHJvcHMuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBmZWVBc3NldDoge1xyXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5hc3NldHNfYnlfc3ltYm9sLmdldChwcm9wcy5mZWVfYXNzZXRfc3ltYm9sKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIFwiMS4zLjBcIixcclxuICAgICAgICAgICAgICAgIGFtb3VudDogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgZW1wdHlBZGRyZXNzRGVwb3NpdDogZmFsc2VcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl92YWxpZGF0ZUFkZHJlc3ModGhpcy5zdGF0ZS50b0FkZHJlc3MsIHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGREZXBvc2l0QWRkcmVzcyA9IHRoaXMuYWRkRGVwb3NpdEFkZHJlc3MuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9jaGVja0JhbGFuY2UgPSB0aGlzLl9jaGVja0JhbGFuY2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9nZXRDdXJyZW50QmFsYW5jZSA9IHRoaXMuX2dldEN1cnJlbnRCYWxhbmNlLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMuX2dldERlcG9zaXRBZGRyZXNzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhucCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgbnAuYXNzZXQgJiZcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldCAmJlxyXG4gICAgICAgICAgICBucC5hc3NldC5nZXQoXCJpZFwiKSAhPT0gdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJpZFwiKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvX3dpdGhkcmF3OiBuZXcgQXNzZXQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldF9pZDogbnAuYXNzZXQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnAuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZUZlZTogbnAuYXNzZXQuZ2V0KFwiZ2F0ZUZlZVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcm1lZGlhdGVBY2NvdW50OiBucC5hc3NldC5nZXQoXCJpbnRlcm1lZGlhdGVBY2NvdW50XCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHN5bWJvbDogbnAuYXNzZXQuZ2V0KFwic3ltYm9sXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lbW86IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd2l0aGRyYXdWYWx1ZTogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICByZWNlaXZlX2FkZHJlc3M6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9BZGRyZXNzOiBXaXRoZHJhd0FkZHJlc3Nlcy5nZXRMYXN0KG5wLndhbGxldFR5cGUpXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0RGVwb3NpdEFkZHJlc3NcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2dldERlcG9zaXRBZGRyZXNzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5iYWNraW5nQ29pblR5cGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IHJlY2VpdmVfYWRkcmVzcyA9IGdldERlcG9zaXRBZGRyZXNzKHtcclxuICAgICAgICAgICAgY29pbjogYG9wZW4uJHt0aGlzLnByb3BzLmJhY2tpbmdDb2luVHlwZS50b0xvd2VyQ2FzZSgpfWAsXHJcbiAgICAgICAgICAgIGFjY291bnQ6IHRoaXMucHJvcHMuYWNjb3VudCxcclxuICAgICAgICAgICAgc3RhdGVDYWxsYmFjazogdGhpcy5hZGREZXBvc2l0QWRkcmVzc1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoIXJlY2VpdmVfYWRkcmVzcykge1xyXG4gICAgICAgICAgICByZXF1ZXN0RGVwb3NpdEFkZHJlc3ModGhpcy5fZ2V0RGVwb3NpdE9iamVjdCgpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHJlY2VpdmVfYWRkcmVzc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2dldERlcG9zaXRPYmplY3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5wdXRDb2luVHlwZTogdGhpcy5wcm9wcy5iYWNraW5nQ29pblR5cGUudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgb3V0cHV0Q29pblR5cGU6IHRoaXMucHJvcHMuc3ltYm9sLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgIG91dHB1dEFkZHJlc3M6IHRoaXMucHJvcHMuc2VuZGVyLmdldChcIm5hbWVcIiksXHJcbiAgICAgICAgICAgIHN0YXRlQ2FsbGJhY2s6IHRoaXMuYWRkRGVwb3NpdEFkZHJlc3NcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJlcXVlc3REZXBvc2l0QWRkcmVzc0xvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsXHJcbiAgICAgICAgICAgIGVtcHR5QWRkcmVzc0RlcG9zaXQ6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVxdWVzdERlcG9zaXRBZGRyZXNzKHRoaXMuX2dldERlcG9zaXRPYmplY3QoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkRGVwb3NpdEFkZHJlc3MocmVjZWl2ZV9hZGRyZXNzKSB7XHJcbiAgICAgICAgaWYgKHJlY2VpdmVfYWRkcmVzcy5lcnJvcikge1xyXG4gICAgICAgICAgICByZWNlaXZlX2FkZHJlc3MuZXJyb3IubWVzc2FnZSA9PT0gXCJub19hZGRyZXNzXCJcclxuICAgICAgICAgICAgICAgID8gdGhpcy5zZXRTdGF0ZSh7ZW1wdHlBZGRyZXNzRGVwb3NpdDogdHJ1ZX0pXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuc2V0U3RhdGUoe2VtcHR5QWRkcmVzc0RlcG9zaXQ6IGZhbHNlfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgcmVjZWl2ZV9hZGRyZXNzLFxyXG4gICAgICAgICAgICBsb2FkaW5nOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcclxuICAgICAgICBSZWFjdFRvb2x0aXAucmVidWlsZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE1lbW8oKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5iYWNraW5nQ29pblR5cGUudG9Mb3dlckNhc2UoKSArXHJcbiAgICAgICAgICAgIFwiOlwiICtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS50b0FkZHJlc3MgK1xyXG4gICAgICAgICAgICAodGhpcy5zdGF0ZS5tZW1vID8gXCI6XCIgKyBuZXcgQnVmZmVyKHRoaXMuc3RhdGUubWVtbywgXCJ1dGYtOFwiKSA6IFwiXCIpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIG9uU3VibWl0KGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUudG9fd2l0aGRyYXcuZ2V0QW1vdW50KCkgPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgYW1vdW50RXJyb3I6IFwidHJhbnNmZXIuZXJyb3JzLnBvc1wiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLmludGVybWVkaWF0ZUFjY291bnQpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZmVlID0gdGhpcy5zdGF0ZS5mZWVBc3NldDtcclxuICAgICAgICBjb25zdCBnYXRlRmVlID0gdGhpcy5fZ2V0R2F0ZUZlZSgpO1xyXG5cclxuICAgICAgICBsZXQgc2VuZEFtb3VudCA9IHRoaXMuc3RhdGUudG9fd2l0aGRyYXcuY2xvbmUoKTtcclxuXHJcbiAgICAgICAgbGV0IGJhbGFuY2VBbW91bnQgPSBzZW5kQW1vdW50LmNsb25lKFxyXG4gICAgICAgICAgICB0aGlzLl9nZXRDdXJyZW50QmFsYW5jZSgpLmdldChcImJhbGFuY2VcIilcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBzZW5kQW1vdW50LnBsdXMoZ2F0ZUZlZSk7XHJcblxyXG4gICAgICAgIC8qIEluc3VmZmljaWVudCBiYWxhbmNlICovXHJcbiAgICAgICAgaWYgKGJhbGFuY2VBbW91bnQubHQoc2VuZEFtb3VudCkpIHtcclxuICAgICAgICAgICAgLy8gU2VuZCB0aGUgb3JpZ2luYWxseSBlbnRlcmVkIGFtb3VudFxyXG4gICAgICAgICAgICBzZW5kQW1vdW50ID0gdGhpcy5zdGF0ZS50b193aXRoZHJhdy5jbG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQWNjb3VudEFjdGlvbnMudHJhbnNmZXIoXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuc2VuZGVyLmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmludGVybWVkaWF0ZUFjY291bnQsXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudG9fd2l0aGRyYXcuZ2V0QW1vdW50KCksXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudG9fd2l0aGRyYXcuYXNzZXRfaWQsXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0TWVtbygpLFxyXG4gICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICBmZWUuYXNzZXRfaWRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIF91cGRhdGVBbW91bnQoKSB7XHJcbiAgICAgICAgY29uc3Qge2ZlZUFzc2V0fSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgY29uc3QgY3VycmVudEJhbGFuY2UgPSB0aGlzLl9nZXRDdXJyZW50QmFsYW5jZSgpO1xyXG5cclxuICAgICAgICBsZXQgdG90YWwgPSBuZXcgQXNzZXQoe1xyXG4gICAgICAgICAgICBhbW91bnQ6IGN1cnJlbnRCYWxhbmNlID8gY3VycmVudEJhbGFuY2UuZ2V0KFwiYmFsYW5jZVwiKSA6IDAsXHJcbiAgICAgICAgICAgIGFzc2V0X2lkOiB0aGlzLnByb3BzLmFzc2V0LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICBwcmVjaXNpb246IHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN1YnRyYWN0IHRoZSBmZWUgaWYgaXQgaXMgdXNpbmcgdGhlIHNhbWUgYXNzZXRcclxuICAgICAgICBpZiAodG90YWwuYXNzZXRfaWQgPT09IGZlZUFzc2V0LmFzc2V0X2lkKSB7XHJcbiAgICAgICAgICAgIHRvdGFsLm1pbnVzKGZlZUFzc2V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUudG9fd2l0aGRyYXcuc2V0QW1vdW50KHtzYXRzOiB0b3RhbC5nZXRBbW91bnQoKX0pO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdpdGhkcmF3VmFsdWU6IHRvdGFsLmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pLFxyXG4gICAgICAgICAgICAgICAgYW1vdW50RXJyb3I6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGhpcy5fY2hlY2tCYWxhbmNlXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIF9nZXRDdXJyZW50QmFsYW5jZSgpIHtcclxuICAgICAgICBsZXQgYmFsYW5jZXMgPSB0aGlzLnByb3BzLmJhbGFuY2VcclxuICAgICAgICAgICAgPyBbQ2hhaW5TdG9yZS5nZXRPYmplY3QodGhpcy5wcm9wcy5iYWxhbmNlKV1cclxuICAgICAgICAgICAgOiB0aGlzLnByb3BzLmJhbGFuY2VzO1xyXG5cclxuICAgICAgICByZXR1cm4gISFiYWxhbmNlc1xyXG4gICAgICAgICAgICA/IGJhbGFuY2VzLmZpbmQoYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICBiICYmIGIuZ2V0KFwiYXNzZXRfdHlwZVwiKSA9PT0gdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJpZFwiKVxyXG4gICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tCYWxhbmNlKCkge1xyXG4gICAgICAgIGNvbnN0IHtmZWVBc3NldCwgdG9fd2l0aGRyYXd9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBjb25zdCB7YXNzZXR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCBiYWxhbmNlID0gdGhpcy5fZ2V0Q3VycmVudEJhbGFuY2UoKTtcclxuICAgICAgICBpZiAoIWJhbGFuY2UgfHwgIWZlZUFzc2V0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgaGFzQmFsYW5jZSA9IGNoZWNrQmFsYW5jZShcclxuICAgICAgICAgICAgdG9fd2l0aGRyYXcuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSksXHJcbiAgICAgICAgICAgIGFzc2V0LFxyXG4gICAgICAgICAgICBmZWVBc3NldCxcclxuICAgICAgICAgICAgYmFsYW5jZSxcclxuICAgICAgICAgICAgdGhpcy5fZ2V0R2F0ZUZlZSgpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBpZiAoaGFzQmFsYW5jZSA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmJhbGFuY2VFcnJvciAhPT0gIWhhc0JhbGFuY2UpXHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2JhbGFuY2VFcnJvcjogIWhhc0JhbGFuY2V9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGhhc0JhbGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgX29uSW5wdXRBbW91bnQoZSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudG9fd2l0aGRyYXcuc2V0QW1vdW50KHtcclxuICAgICAgICAgICAgICAgIHJlYWw6IHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUgfHwgMClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2l0aGRyYXdWYWx1ZTogZS50YXJnZXQudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50RXJyb3I6IG51bGxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0JhbGFuY2VcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImVycjpcIiwgZXJyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uSW5wdXRUbyhlKSB7XHJcbiAgICAgICAgbGV0IHRvQWRkcmVzcyA9IGUudGFyZ2V0LnZhbHVlLnRyaW0oKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHdpdGhkcmF3X2FkZHJlc3NfY2hlY2tfaW5fcHJvZ3Jlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIHdpdGhkcmF3X2FkZHJlc3Nfc2VsZWN0ZWQ6IHRvQWRkcmVzcyxcclxuICAgICAgICAgICAgdmFsaWRBZGRyZXNzOiBudWxsLFxyXG4gICAgICAgICAgICB0b0FkZHJlc3M6IHRvQWRkcmVzc1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl92YWxpZGF0ZUFkZHJlc3ModG9BZGRyZXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25NZW1vQ2hhbmdlZChlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bWVtbzogZS50YXJnZXQudmFsdWV9KTtcclxuICAgIH1cclxuXHJcbiAgICBfdmFsaWRhdGVBZGRyZXNzKGFkZHJlc3MsIHByb3BzID0gdGhpcy5wcm9wcykge1xyXG4gICAgICAgIHZhbGlkYXRlQWRkcmVzcyh7XHJcbiAgICAgICAgICAgIHVybDogb3BlbmxlZGdlckFQSXMuQkFTRSxcclxuICAgICAgICAgICAgd2FsbGV0VHlwZTogcHJvcHMud2FsbGV0VHlwZSxcclxuICAgICAgICAgICAgbmV3QWRkcmVzczogYWRkcmVzc1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGlzVmFsaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUudG9BZGRyZXNzID09PSBhZGRyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhkcmF3X2FkZHJlc3NfY2hlY2tfaW5fcHJvZ3Jlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZEFkZHJlc3M6ICEhaXNWYWxpZFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGVuIHZhbGlkYXRpbmcgYWRkcmVzczpcIiwgZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29wZW5SZWdpc3RyYXJTaXRlKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgbGV0IG5ld1duZCA9IHdpbmRvdy5vcGVuKFNldHRpbmdzU3RvcmUuc2l0ZV9yZWdpc3RyLCBcIl9ibGFua1wiKTtcclxuICAgICAgICBuZXdXbmQub3BlbmVyID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0R2F0ZUZlZSgpIHtcclxuICAgICAgICBjb25zdCB7Z2F0ZUZlZSwgYXNzZXR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICByZXR1cm4gbmV3IEFzc2V0KHtcclxuICAgICAgICAgICAgcmVhbDogcGFyc2VGbG9hdChnYXRlRmVlID8gZ2F0ZUZlZS5yZXBsYWNlKFwiLFwiLCBcIlwiKSA6IDApLFxyXG4gICAgICAgICAgICBhc3NldF9pZDogYXNzZXQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgIHByZWNpc2lvbjogYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25GZWVDaGFuZ2VkKGFzc2V0KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGZlZUFzc2V0OiBhc3NldFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW5kZXJXaXRoZHJhdygpIHtcclxuICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgIGFtb3VudEVycm9yLFxyXG4gICAgICAgICAgICB0b0FkZHJlc3MsXHJcbiAgICAgICAgICAgIG1lbW8sXHJcbiAgICAgICAgICAgIGZlZUFzc2V0LFxyXG4gICAgICAgICAgICBiYWxhbmNlRXJyb3IsXHJcbiAgICAgICAgICAgIHdpdGhkcmF3VmFsdWUsXHJcbiAgICAgICAgICAgIHZhbGlkQWRkcmVzc1xyXG4gICAgICAgIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGNvbnN0IHtzdXBwb3J0c01lbW9zLCBhc3NldCwgYWNjb3VudH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGNvbnN0IHtuYW1lOiBhc3NldE5hbWV9ID0gdXRpbHMucmVwbGFjZU5hbWUoYXNzZXQpO1xyXG4gICAgICAgIGxldCB0YWJJbmRleCA9IDE7XHJcblxyXG4gICAgICAgIC8vIGlmKHRoaXMucHJvcHMuZmlhdE1vZGFsKXtcclxuICAgICAgICAvLyAgICAgaWYofnRoaXMucHJvcHMuZmlhdE1vZGFsLmluZGV4T2YoJ2NhbkZpYXRXaXRoJykpe1xyXG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuICg8V2l0aGRyYXdGaWF0T3BlbkxlZGdlclxyXG4gICAgICAgIC8vICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudH1cclxuICAgICAgICAvLyAgICAgICAgICAgICBpc3N1ZXJfYWNjb3VudD1cIm9wZW5sZWRnZXItZmlhdFwiXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgZGVwb3NpdF9hc3NldD17dGhpcy5wcm9wcy5hc3NldC5nZXQoXCJzeW1ib2xcIikuc3BsaXQoJ09QRU4uJykuam9pbignJyl9XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcmVjZWl2ZV9hc3NldD17dGhpcy5wcm9wcy5hc3NldC5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcnBjX3VybD17U2V0dGluZ3NTdG9yZS5ycGNfdXJsfVxyXG4gICAgICAgIC8vICAgICAgICAgLz4pO1xyXG4gICAgICAgIC8vICAgICB9ZWxzZXtcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybiAoPHA+Q2xpY2sgPGEgaHJlZj0nIycgb25DbGljaz17dGhpcy5fb3BlblJlZ2lzdHJhclNpdGV9ID5oZXJlPC9hPiB0byByZWdpc3RlciBmb3IgZGVwb3NpdHMgPC9wPik7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRGZWUgPSBmZWVBc3NldDtcclxuXHJcbiAgICAgICAgY29uc3QgdHJ4SW5mb0NvbnRlbnQgPSB0aGlzLmdldE1lbW8oKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGlzYWJsZVN1Ym1pdCA9XHJcbiAgICAgICAgICAgICFjdXJyZW50RmVlIHx8IGJhbGFuY2VFcnJvciB8fCAhdG9BZGRyZXNzIHx8ICF3aXRoZHJhd1ZhbHVlO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiZ2F0ZXdheS53aXRoZHJhd19mdW5kc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldE5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhbGxldF9uYW1lPXtnZXRXYWxsZXROYW1lKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuXHJcbiAgICAgICAgICAgICAgICB7dGhpcy5fcmVuZGVyQ3VycmVudEJhbGFuY2UoKX1cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIlNpbXBsZVRyYWRlX193aXRoZHJhdy1yb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwibGVmdC1sYWJlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwibW9kYWwud2l0aGRyYXcuYW1vdW50XCIpfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmxpbmUtbGFiZWwgaW5wdXQtd3JhcHBlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXt0YWJJbmRleCsrfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW49XCIwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5UHJlc3M9e3RoaXMub25LZXlQcmVzcy5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3dpdGhkcmF3VmFsdWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25JbnB1dEFtb3VudC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tbGFiZWwgc2VsZWN0IGZsb2F0aW5nLWRyb3Bkb3duXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRyb3Bkb3duLXdyYXBwZXIgaW5hY3RpdmVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pnthc3NldE5hbWV9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAge2Ftb3VudEVycm9yID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGFzLWVycm9yIG5vLW1hcmdpblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdUb3A6IDEwfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PXthbW91bnRFcnJvcn0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmJhbGFuY2VFcnJvciA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhhcy1lcnJvciBuby1tYXJnaW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nVG9wOiAxMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInRyYW5zZmVyLmVycm9ycy5pbnN1ZmZpY2llbnRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIlNpbXBsZVRyYWRlX193aXRoZHJhdy1yb3cgd2l0aGRyYXctZmVlLXNlbGVjdG9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPEZlZUFzc2V0U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJzaG93Y2FzZXMuYmFydGVyLmZlZV93aGVuX3Byb3Bvc2FsX2V4ZWN1dGVzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb249e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidHJhbnNmZXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtcInByaWNlX3Blcl9rYnl0ZVwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm1lbW9cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB0cnhJbmZvQ29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkZlZUNoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJTaW1wbGVUcmFkZV9fd2l0aGRyYXctcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImxlZnQtbGFiZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcIm1vZGFsLndpdGhkcmF3LmFkZHJlc3NcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlubGluZS1sYWJlbCBpbnB1dC13cmFwcGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImdhdGV3YXkud2l0aGRyYXdfcGxhY2Vob2xkZXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YXNzZXQ6IGFzc2V0TmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGFiSW5kZXgrK31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0b0FkZHJlc3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25JbnB1dFRvLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tbGFiZWwgc2VsZWN0IGZsb2F0aW5nLWRyb3Bkb3duXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRyb3Bkb3duLXdyYXBwZXIgaW5hY3RpdmVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAud2l0aGRyYXdfYWRkcmVzc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Fzc2V0OiBhc3NldE5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIHshdmFsaWRBZGRyZXNzICYmIHRvQWRkcmVzcyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoYXMtZXJyb3JcIiBzdHlsZT17e3BhZGRpbmdUb3A6IDEwfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImdhdGV3YXkudmFsaWRfYWRkcmVzc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29pbl90eXBlPXthc3NldE5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIHtzdXBwb3J0c01lbW9zID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiU2ltcGxlVHJhZGVfX3dpdGhkcmF3LXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwibGVmdC1sYWJlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInRyYW5zZmVyLm1lbW9cIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5saW5lLWxhYmVsIGlucHV0LXdyYXBwZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17bWVtb31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGFiSW5kZXgrK31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25NZW1vQ2hhbmdlZC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHshdmFsaWRBZGRyZXNzICYmIHRvQWRkcmVzcyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGFzLWVycm9yXCIgc3R5bGU9e3twYWRkaW5nVG9wOiAxMH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImdhdGV3YXkudmFsaWRfYWRkcmVzc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvaW5fdHlwZT17YXNzZXROYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbi1ncm91cCBTaW1wbGVUcmFkZV9fd2l0aGRyYXctcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGFiSW5kZXgrK31cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYnV0dG9uXCIgKyAoZGlzYWJsZVN1Ym1pdCA/IFwiIGRpc2FibGVkXCIgOiBcIlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25TdWJtaXQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJnYXRld2F5LndpdGhkcmF3X25vd1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVuZGVyRGVwb3NpdCgpIHtcclxuICAgICAgICBjb25zdCB7cmVjZWl2ZV9hZGRyZXNzLCBsb2FkaW5nLCBlbXB0eUFkZHJlc3NEZXBvc2l0fSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgY29uc3Qge25hbWU6IGFzc2V0TmFtZX0gPSB1dGlscy5yZXBsYWNlTmFtZSh0aGlzLnByb3BzLmFzc2V0KTtcclxuICAgICAgICBjb25zdCBoYXNNZW1vID1cclxuICAgICAgICAgICAgcmVjZWl2ZV9hZGRyZXNzICYmXHJcbiAgICAgICAgICAgIFwibWVtb1wiIGluIHJlY2VpdmVfYWRkcmVzcyAmJlxyXG4gICAgICAgICAgICByZWNlaXZlX2FkZHJlc3MubWVtbztcclxuICAgICAgICBjb25zdCBhZGRyZXNzVmFsdWUgPSAocmVjZWl2ZV9hZGRyZXNzICYmIHJlY2VpdmVfYWRkcmVzcy5hZGRyZXNzKSB8fCBcIlwiO1xyXG4gICAgICAgIGxldCB0YWJJbmRleCA9IDE7XHJcblxyXG4gICAgICAgIC8vIGlmKHRoaXMucHJvcHMuZmlhdE1vZGFsKXtcclxuICAgICAgICAvLyAgICAgaWYofnRoaXMucHJvcHMuZmlhdE1vZGFsLmluZGV4T2YoJ2NhbkZpYXREZXAnKSl7XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gKDxEZXBvc2l0RmlhdE9wZW5MZWRnZXJcclxuICAgICAgICAvLyAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnR9XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaXNzdWVyX2FjY291bnQ9XCJvcGVubGVkZ2VyLWZpYXRcIlxyXG4gICAgICAgIC8vICAgICAgICAgICAgIGRlcG9zaXRfYXNzZXQ9e3RoaXMucHJvcHMuYXNzZXQuZ2V0KFwic3ltYm9sXCIpLnNwbGl0KCdPUEVOLicpLmpvaW4oJycpfVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIHJlY2VpdmVfYXNzZXQ9e3RoaXMucHJvcHMuYXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIHJwY191cmw9e1NldHRpbmdzU3RvcmUucnBjX3VybH1cclxuICAgICAgICAvLyAgICAgICAgIC8+KTtcclxuICAgICAgICAvLyAgICAgfWVsc2V7XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gKDxwPkNsaWNrIDxhIGhyZWY9JyMnIG9uQ2xpY2s9e3RoaXMuX29wZW5SZWdpc3RyYXJTaXRlfSA+aGVyZTwvYT4gdG8gcmVnaXN0ZXIgZm9yIGRlcG9zaXRzIDwvcD4pO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXshYWRkcmVzc1ZhbHVlID8gXCJuby1vdmVyZmxvd1wiIDogXCJcIn0+XHJcbiAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuc2FmZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiZ2F0ZXdheS5hZGRfZnVuZHNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLnNlbmRlci5nZXQoXCJuYW1lXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXRfbmFtZT17Z2V0V2FsbGV0TmFtZSgpfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L3A+XHJcblxyXG4gICAgICAgICAgICAgICAge3RoaXMuX3JlbmRlckN1cnJlbnRCYWxhbmNlKCl9XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJTaW1wbGVUcmFkZV9fd2l0aGRyYXctcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFwidG9vbHRpcC5kZXBvc2l0X3RpcFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldDogYXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9e3ttYXJnaW5Cb3R0b206IDEwfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGVscC10b29sdGlwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiZ2F0ZXdheS5kZXBvc2l0X3RvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17YXNzZXROYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJmel8xMiBsZWZ0LWxhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZ2F0ZXdheS5kZXBvc2l0X25vdGljZV9kZWxheVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgIHshYWRkcmVzc1ZhbHVlID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TG9hZGluZ0luZGljYXRvciB0eXBlPVwidGhyZWUtYm91bmNlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZW1wdHlBZGRyZXNzRGVwb3NpdCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJnYXRld2F5LnBsZWFzZV9nZW5lcmF0ZV9hZGRyZXNzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaW5saW5lLWxhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXthZGRyZXNzVmFsdWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDb3B5QnV0dG9uIHRleHQ9e2FkZHJlc3NWYWx1ZX0gLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIHtoYXNNZW1vID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmxpbmUtbGFiZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJ0cmFuc2Zlci5tZW1vXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiOiBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlX2FkZHJlc3MubWVtb1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENvcHlCdXR0b24gdGV4dD17cmVjZWl2ZV9hZGRyZXNzLm1lbW99IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHtyZWNlaXZlX2FkZHJlc3MgJiYgcmVjZWl2ZV9hZGRyZXNzLmVycm9yID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhhcy1lcnJvclwiIHN0eWxlPXt7cGFkZGluZ1RvcDogMTB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZWNlaXZlX2FkZHJlc3MuZXJyb3IubWVzc2FnZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbi1ncm91cCBTaW1wbGVUcmFkZV9fd2l0aGRyYXctcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGFiSW5kZXgrK31cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uIHNwaW5uZXItYnV0dG9uLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucmVxdWVzdERlcG9zaXRBZGRyZXNzTG9hZC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtsb2FkaW5nID8gPExvYWRpbmdJbmRpY2F0b3IgdHlwZT1cImNpcmNsZVwiIC8+IDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZ2F0ZXdheS5nZW5lcmF0ZV9uZXdcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgX3JlbmRlckN1cnJlbnRCYWxhbmNlKCkge1xyXG4gICAgICAgIGNvbnN0IHtuYW1lOiBhc3NldE5hbWV9ID0gdXRpbHMucmVwbGFjZU5hbWUodGhpcy5wcm9wcy5hc3NldCk7XHJcbiAgICAgICAgY29uc3QgaXNEZXBvc2l0ID0gdGhpcy5wcm9wcy5hY3Rpb24gPT09IFwiZGVwb3NpdFwiO1xyXG5cclxuICAgICAgICBsZXQgY3VycmVudEJhbGFuY2UgPSB0aGlzLl9nZXRDdXJyZW50QmFsYW5jZSgpO1xyXG5cclxuICAgICAgICBsZXQgYXNzZXQgPSBjdXJyZW50QmFsYW5jZVxyXG4gICAgICAgICAgICA/IG5ldyBBc3NldCh7XHJcbiAgICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBjdXJyZW50QmFsYW5jZS5nZXQoXCJhc3NldF90eXBlXCIpLFxyXG4gICAgICAgICAgICAgICAgICBwcmVjaXNpb246IHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpLFxyXG4gICAgICAgICAgICAgICAgICBhbW91bnQ6IGN1cnJlbnRCYWxhbmNlLmdldChcImJhbGFuY2VcIilcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcblxyXG4gICAgICAgIC8vIFRFTVAgLy9cclxuICAgICAgICAvLyBhc3NldCA9IG5ldyBBc3NldCh7XHJcbiAgICAgICAgLy8gICAgIGFzc2V0X2lkOiB0aGlzLnByb3BzLmFzc2V0LmdldChcImlkXCIpLFxyXG4gICAgICAgIC8vICAgICBwcmVjaXNpb246IHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpLFxyXG4gICAgICAgIC8vICAgICBhbW91bnQ6IDY1NjU0NjQ1XHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFwcGx5QmFsYW5jZUJ1dHRvbiA9IGlzRGVwb3NpdCA/IChcclxuICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7Ym9yZGVyOiBcIjJweCBzb2xpZCBibGFja1wiLCBib3JkZXJMZWZ0OiBcIm5vbmVcIn19XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmb3JtLWxhYmVsXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge2Fzc2V0TmFtZX1cclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXHJcbiAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFwidG9vbHRpcC53aXRoZHJhd19mdWxsXCIpfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2JvcmRlcjogXCIycHggc29saWQgYmxhY2tcIiwgYm9yZGVyTGVmdDogXCJub25lXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3VwZGF0ZUFtb3VudC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhY3VycmVudEJhbGFuY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBwYXJzZUludChjdXJyZW50QmFsYW5jZS5nZXQoXCJiYWxhbmNlXCIpLCAxMClcclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJjbGlwcHlcIiB0aXRsZT1cImljb25zLmNsaXBweS53aXRoZHJhd19mdWxsXCIgLz5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiU2ltcGxlVHJhZGVfX3dpdGhkcmF3LXJvd1wiXHJcbiAgICAgICAgICAgICAgICBzdHlsZT17e2ZvbnRTaXplOiBcIjFyZW1cIn19XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT17e2ZvbnRTaXplOiBcIjFyZW1cIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJnYXRld2F5LmJhbGFuY2VfYXNzZXRcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldDogYXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImlubGluZS1sYWJlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcImJsYWNrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBcIjJweCBzb2xpZCBibGFja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXshYXNzZXQgPyAwIDogYXNzZXQuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHthcHBseUJhbGFuY2VCdXR0b259XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHthc3NldCwgYWN0aW9ufSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IGlzRGVwb3NpdCA9IGFjdGlvbiA9PT0gXCJkZXBvc2l0XCI7XHJcblxyXG4gICAgICAgIGlmICghYXNzZXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB7bmFtZTogYXNzZXROYW1lfSA9IHV0aWxzLnJlcGxhY2VOYW1lKGFzc2V0KTtcclxuXHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLnByb3BzLmlzRG93biA/IChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0eHRsYWJlbCBjYW5jZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJnYXRld2F5LnVuYXZhaWxhYmxlX09QRU5cIlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cInBcIlxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKSA6ICF0aGlzLnByb3BzLmlzQXZhaWxhYmxlID8gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInR4dGxhYmVsIGNhbmNlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImdhdGV3YXkudW5hdmFpbGFibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cInBcIlxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKSA6IGlzRGVwb3NpdCA/IChcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyRGVwb3NpdCgpXHJcbiAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyV2l0aGRyYXcoKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiU2ltcGxlVHJhZGVfX21vZGFsXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbCBuby1vdmVyZmxvd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgekluZGV4OiAxMDAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDogXCIycmVtXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogXCIycmVtXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdUb3A6IFwiMXJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICB7Y29udGVudH1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5EZXBvc2l0V2l0aGRyYXdDb250ZW50ID0gY29ubmVjdChcclxuICAgIERlcG9zaXRXaXRoZHJhd0NvbnRlbnQsXHJcbiAgICB7XHJcbiAgICAgICAgbGlzdGVuVG8oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbU2V0dGluZ3NTdG9yZV07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRQcm9wcyhwcm9wcykge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZmVlX2Fzc2V0X3N5bWJvbDogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnNldHRpbmdzLmdldChcclxuICAgICAgICAgICAgICAgICAgICBcImZlZV9hc3NldFwiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4pO1xyXG5cclxuRGVwb3NpdFdpdGhkcmF3Q29udGVudCA9IEJpbmRUb0NoYWluU3RhdGUoRGVwb3NpdFdpdGhkcmF3Q29udGVudCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaW1wbGVEZXBvc2l0V2l0aGRyYXdNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlID0ge29wZW46IGZhbHNlfTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe29wZW46IHRydWV9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIFpmQXBpLnB1Ymxpc2godGhpcy5wcm9wcy5tb2RhbElkLCBcIm9wZW5cIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtvcGVuOiBmYWxzZX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCBpc0RlcG9zaXQgPSB0aGlzLnByb3BzLmFjdGlvbiA9PT0gXCJkZXBvc2l0XCI7XHJcblxyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gaXNEZXBvc2l0XHJcbiAgICAgICAgICAgID8gY291bnRlcnBhcnQudHJhbnNsYXRlKFwiZ2F0ZXdheS5kZXBvc2l0XCIpXHJcbiAgICAgICAgICAgIDogY291bnRlcnBhcnQudHJhbnNsYXRlKFwibW9kYWwud2l0aGRyYXcuc3VibWl0XCIpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8TW9kYWxcclxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cclxuICAgICAgICAgICAgICAgIGZvb3Rlcj17W119XHJcbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnByb3BzLnZpc2libGV9XHJcbiAgICAgICAgICAgICAgICBvbkNhbmNlbD17dGhpcy5wcm9wcy5oaWRlTW9kYWx9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXN0XCJcclxuICAgICAgICAgICAgICAgIG9uQ2xvc2U9e3RoaXMub25DbG9zZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgb3ZlcmxheT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLm1vZGFsSWR9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnZpc2libGUgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPERlcG9zaXRXaXRoZHJhd0NvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW49e3RoaXMucHJvcHMudmlzaWJsZX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgIDwvTW9kYWw+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7XHJcbiAgICBNb2RhbCxcclxuICAgIEZvcm0sXHJcbiAgICBJbnB1dCxcclxuICAgIEJ1dHRvbixcclxuICAgIEljb24sXHJcbiAgICBTZWxlY3RcclxufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcbmltcG9ydCB7TGlua30gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcclxuaW1wb3J0IEFzc2V0TmFtZSBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldE5hbWVcIjtcclxuaW1wb3J0IHtQUklDRV9BTEVSVF9UWVBFU30gZnJvbSBcIi4uLy4uL3NlcnZpY2VzL0V4Y2hhbmdlXCI7XHJcbmltcG9ydCBBc3NldFdyYXBwZXIgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXRXcmFwcGVyXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuXHJcbmNsYXNzIFByaWNlQWxlcnQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRlc3RSdWxlcyA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBydWxlczogWy4uLnRlc3RSdWxlc11cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmhhbmRsZVNhdmUgPSB0aGlzLmhhbmRsZVNhdmUuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmhhbmRsZUFkZFJ1bGUgPSB0aGlzLmhhbmRsZUFkZFJ1bGUuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmhhbmRsZVR5cGVDaGFuZ2UgPSB0aGlzLmhhbmRsZVR5cGVDaGFuZ2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmhhbmRsZURlbGV0ZVJ1bGUgPSB0aGlzLmhhbmRsZURlbGV0ZVJ1bGUuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmhhbmRsZVByaWNlQ2hhbmdlID0gdGhpcy5oYW5kbGVQcmljZUNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlUHJpY2VGaWVsZEJsdXIgPSB0aGlzLmhhbmRsZVByaWNlRmllbGRCbHVyLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xyXG4gICAgICAgIGlmICghcHJldlByb3BzLnZpc2libGUgJiYgdGhpcy5wcm9wcy52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIGxldCBleGFtcGxlID0ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogUFJJQ0VfQUxFUlRfVFlQRVMuSElHSEVSX1RIQU4sXHJcbiAgICAgICAgICAgICAgICBwcmljZTogdGhpcy5wcm9wcy5sYXRlc3RQcmljZVxyXG4gICAgICAgICAgICAgICAgICAgID8gTnVtYmVyKHRoaXMucHJvcHMubGF0ZXN0UHJpY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBsZXQgcnVsZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5wcm9wcy5ydWxlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJ1bGVzID0gIXRoaXMuc3RhdGUub3BlbmVkUHJldmlvdXNseSA/IFtleGFtcGxlXSA6IFtdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcnVsZXMgPSB0aGlzLnByb3BzLnJ1bGVzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHJ1bGVzOiBydWxlcyxcclxuICAgICAgICAgICAgICAgIG9wZW5lZFByZXZpb3VzbHk6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVR5cGVDaGFuZ2Uoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlID0+IHtcclxuICAgICAgICAgICAgbGV0IHJ1bGVzID0gdGhpcy5zdGF0ZS5ydWxlcy5tYXAoKHJ1bGUsIHJ1bGVLZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChOdW1iZXIoa2V5KSAhPT0gTnVtYmVyKHJ1bGVLZXkpKSByZXR1cm4gcnVsZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsaWRhdGUgPSB0aGlzLnZhbGlkYXRlUHJpY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgTnVtYmVyKHJ1bGUucHJpY2UpLFxyXG4gICAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLnByb3BzLmxhdGVzdFByaWNlKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLnJ1bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgLi4udmFsaWRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogU3RyaW5nKHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHJ1bGVzOiBydWxlc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHZhbGlkYXRlUHJpY2UodHlwZSwgcHJpY2UsIGxhdGVzdCkge1xyXG4gICAgICAgIGlmICh0eXBlID09PSBQUklDRV9BTEVSVF9UWVBFUy5ISUdIRVJfVEhBTiAmJiBwcmljZSA8IGxhdGVzdCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVTdGF0dXM6IFwiZXJyb3JcIixcclxuICAgICAgICAgICAgICAgIGhlbHA6IFwiUHJpY2Ugb2YgQWxlcnQgc2hvdWxkIGJlIGhpZ2hlciB0aGFuIGN1cnJlbnQgcHJpY2VcIlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT09IFBSSUNFX0FMRVJUX1RZUEVTLkxPV0VSX1RIQU4gJiYgcHJpY2UgPiBsYXRlc3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlU3RhdHVzOiBcImVycm9yXCIsXHJcbiAgICAgICAgICAgICAgICBoZWxwOiBcIlByaWNlIG9mIEFsZXJ0ICBzaG91bGQgYmUgbG93ZXIgdGhhbiBjdXJyZW50IHByaWNlXCJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlU3RhdHVzOiBcInN1Y2Nlc3NcIixcclxuICAgICAgICAgICAgaGVscDogXCJcIlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgdmFsaWRhdGVQcmljZUZpZWxkQnlLZXkoa2V5KSB7XHJcbiAgICAgICAgbGV0IHJ1bGVzID0gdGhpcy5zdGF0ZS5ydWxlcy5tYXAoKHJ1bGUsIHJ1bGVLZXkpID0+IHtcclxuICAgICAgICAgICAgaWYgKE51bWJlcihrZXkpICE9PSBOdW1iZXIocnVsZUtleSkpIHJldHVybiBydWxlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGUgPSB0aGlzLnZhbGlkYXRlUHJpY2UoXHJcbiAgICAgICAgICAgICAgICBydWxlLnR5cGUsXHJcbiAgICAgICAgICAgICAgICBOdW1iZXIocnVsZS5wcmljZSksXHJcbiAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5wcm9wcy5sYXRlc3RQcmljZSlcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAuLi5ydWxlLFxyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVTdGF0dXM6IHZhbGlkYXRlLnZhbGlkYXRlU3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgaGVscDogdmFsaWRhdGUuaGVscFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgcnVsZXM6IHJ1bGVzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlUHJpY2VGaWVsZEJsdXIoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVByaWNlRmllbGRCeUtleShrZXkpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlUHJpY2VDaGFuZ2Uoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgbGV0IHJ1bGVzID0gdGhpcy5zdGF0ZS5ydWxlcy5tYXAoKHJ1bGUsIHJ1bGVLZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChOdW1iZXIoa2V5KSAhPT0gTnVtYmVyKHJ1bGVLZXkpKSByZXR1cm4gcnVsZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsaWRhdGUgPSB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB2YWxpZGF0ZSBvbiBhIGZseSBpZiBmaWVsZCB3YXMgdG91Y2hlZCBwcmV2aW91c2x5XHJcbiAgICAgICAgICAgICAgICBpZiAocnVsZS52YWxpZGF0ZVN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlID0gdGhpcy52YWxpZGF0ZVByaWNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlcihldmVudC50YXJnZXQudmFsdWUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5wcm9wcy5sYXRlc3RQcmljZSlcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4ucnVsZSxcclxuICAgICAgICAgICAgICAgICAgICAuLi52YWxpZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwcmljZTogZXZlbnQudGFyZ2V0LnZhbHVlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgcnVsZXM6IHJ1bGVzXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQWRkUnVsZSgpIHtcclxuICAgICAgICBsZXQgcnVsZXMgPSBbLi4udGhpcy5zdGF0ZS5ydWxlc107XHJcblxyXG4gICAgICAgIHJ1bGVzLnB1c2goe1xyXG4gICAgICAgICAgICB0eXBlOiBQUklDRV9BTEVSVF9UWVBFUy5ISUdIRVJfVEhBTixcclxuICAgICAgICAgICAgcHJpY2U6IHRoaXMucHJvcHMubGF0ZXN0UHJpY2VcclxuICAgICAgICAgICAgICAgID8gTnVtYmVyKHRoaXMucHJvcHMubGF0ZXN0UHJpY2UpXHJcbiAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHJ1bGVzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlRGVsZXRlUnVsZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcnVsZXMgPSB0aGlzLnN0YXRlLnJ1bGVzLmZpbHRlcihcclxuICAgICAgICAgICAgICAgIChpdGVtLCBydWxlS2V5KSA9PiBOdW1iZXIocnVsZUtleSkgIT09IE51bWJlcihrZXkpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHJ1bGVzOiBydWxlc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVNhdmUoKSB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5vblNhdmUodGhpcy5zdGF0ZS5ydWxlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgIXRoaXMucHJvcHMucXVvdGVBc3NldCB8fFxyXG4gICAgICAgICAgICAhdGhpcy5wcm9wcy5xdW90ZUFzc2V0LmdldCB8fFxyXG4gICAgICAgICAgICAhdGhpcy5wcm9wcy5iYXNlQXNzZXQgfHxcclxuICAgICAgICAgICAgIXRoaXMucHJvcHMuYmFzZUFzc2V0LmdldFxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIGNvbnN0IGZvb3RlciA9IFtcclxuICAgICAgICAgICAgPEJ1dHRvbiBrZXk9XCJzdWJtaXRcIiB0eXBlPVwicHJpbWFyeVwiIG9uQ2xpY2s9e3RoaXMuaGFuZGxlU2F2ZX0+XHJcbiAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwibW9kYWwuc2F2ZVwiKX1cclxuICAgICAgICAgICAgPC9CdXR0b24+LFxyXG4gICAgICAgICAgICA8QnV0dG9uIGtleT1cImNhbmNlbFwiIG9uQ2xpY2s9e3RoaXMucHJvcHMuaGlkZU1vZGFsfT5cclxuICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJtb2RhbC5jYW5jZWxcIil9XHJcbiAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGNvbnN0IGJhc2VBc3NldFN5bWJvbCA9IHRoaXMucHJvcHMuYmFzZUFzc2V0LmdldChcInN5bWJvbFwiKTtcclxuICAgICAgICBjb25zdCBxdW90ZUFzc2V0U3ltYm9sID0gdGhpcy5wcm9wcy5xdW90ZUFzc2V0LmdldChcInN5bWJvbFwiKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGlua1RvRXhjaGFuZ2UgPSBgJHtxdW90ZUFzc2V0U3ltYm9sfV8ke2Jhc2VBc3NldFN5bWJvbH1gO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8TW9kYWxcclxuICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMucHJvcHMudmlzaWJsZX1cclxuICAgICAgICAgICAgICAgIG9uQ2FuY2VsPXt0aGlzLnByb3BzLmhpZGVNb2RhbH1cclxuICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJleGNoYW5nZS5wcmljZV9hbGVydC50aXRsZVwiKX1cclxuICAgICAgICAgICAgICAgIGZvb3Rlcj17Zm9vdGVyfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImV4Y2hhbmdlLS1wcmljZS1hbGVydFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZXhjaGFuZ2UtLXByaWNlLWFsZXJ0LS1kZXNjcmlwdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5ydWxlcy5sZW5ndGggPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2UucHJpY2VfYWxlcnQuYWxlcnRfd2hlblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX17XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89e2xpbmtUb0V4Y2hhbmdlfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBuYW1lPXtxdW90ZUFzc2V0U3ltYm9sfSAvPi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBuYW1lPXtiYXNlQXNzZXRTeW1ib2x9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLnByaWNlX2FsZXJ0LnVzZV9idXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89e2xpbmtUb0V4Y2hhbmdlfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBuYW1lPXtxdW90ZUFzc2V0U3ltYm9sfSAvPi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBuYW1lPXtiYXNlQXNzZXRTeW1ib2x9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZXhjaGFuZ2UtLXByaWNlLWFsZXJ0LS1pdGVtc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnJ1bGVzLm1hcCgocnVsZSwga2V5KSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17a2V5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVTdGF0dXM9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGUudmFsaWRhdGVTdGF0dXMgfHwgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD17cnVsZS5oZWxwIHx8IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5Hcm91cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2UtLXByaWNlLWFsZXJ0LS1pdGVtXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3J1bGUudHlwZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCIyMDBweFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlVHlwZUNoYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQUklDRV9BTEVSVF9UWVBFUy5ISUdIRVJfVEhBTlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtcIjFcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLnByaWNlX2FsZXJ0LmhpZ2hlcl90aGFuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQUklDRV9BTEVSVF9UWVBFUy5MT1dFUl9USEFOXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e1wiMlwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2UucHJpY2VfYWxlcnQubG93ZXJfdGhhblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkJsdXI9e3RoaXMuaGFuZGxlUHJpY2VGaWVsZEJsdXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2FsYygxMDAlIC0gMjAwcHggLSAzMnB4KVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luVG9wOiBcIjFweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVByaWNlQ2hhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtydWxlLnByaWNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJleGNoYW5nZS0tcHJpY2UtYWxlcnQtLWl0ZW0tLXByaWNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2UucHJpY2VfYWxlcnQucHJpY2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRvbkFmdGVyPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtiYXNlQXNzZXRTeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiBcIjMycHhcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlRGVsZXRlUnVsZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJleGNoYW5nZS0tcHJpY2UtYWxlcnQtLWl0ZW0tLWNvbnRyb2xcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiaWNvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb249XCJkZWxldGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0lucHV0Lkdyb3VwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZXhjaGFuZ2UtLXByaWNlLWFsZXJ0LS1pdGVtcy0tYWRkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQWRkUnVsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIHR5cGU9XCJwbHVzXCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLnByaWNlX2FsZXJ0LmFkZF9ydWxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvTW9kYWw+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuUHJpY2VBbGVydCA9IEFzc2V0V3JhcHBlcihQcmljZUFsZXJ0LCB7XHJcbiAgICBwcm9wTmFtZXM6IFtcInF1b3RlQXNzZXRcIiwgXCJiYXNlQXNzZXRcIl1cclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQcmljZUFsZXJ0O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBTZXR0aW5nc1N0b3JlIGZyb20gXCJzdG9yZXMvU2V0dGluZ3NTdG9yZVwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcblxyXG4vKipcclxuICogIFdyYXBwZXIgY29tcG9uZW50IGZvciBjaGF0YnJvIGlmcmFtZVxyXG4gKlxyXG4gKi9cclxuY2xhc3MgQ2hhdEJybyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IGZyYW1lSGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQgfHwgXCIzMCVcIjtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRMb2NhbGUgPSBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkuc2V0dGluZ3MuZ2V0KFwibG9jYWxlXCIpO1xyXG5cclxuICAgICAgICBsZXQgY2hhdFVybCA9IG51bGw7XHJcbiAgICAgICAgc3dpdGNoIChjdXJyZW50TG9jYWxlKSB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjaGF0VXJsID0gYGh0dHBzOi8vY2hhdC5ydWRleC5vcmcvJHtjdXJyZW50TG9jYWxlfS9gO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8aWZyYW1lXHJcbiAgICAgICAgICAgICAgICBzdHlsZT17e2hlaWdodDogZnJhbWVIZWlnaHQsIHdpZHRoOiBcIjEwMCVcIn19XHJcbiAgICAgICAgICAgICAgICBzcmM9e2NoYXRVcmx9XHJcbiAgICAgICAgICAgICAgICBzYW5kYm94PVwiYWxsb3ctc2FtZS1vcmlnaW4gYWxsb3ctZm9ybXMgYWxsb3ctc2NyaXB0cyBhbGxvdy1wb3B1cHNcIlxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxpZnJhbWVcclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7aGVpZ2h0OiBmcmFtZUhlaWdodCwgd2lkdGg6IFwiMTAwJVwifX1cclxuICAgICAgICAgICAgICAgIHNyYz17Y2hhdFVybH1cclxuICAgICAgICAgICAgICAgIHNhbmRib3g9XCJhbGxvdy1zYW1lLW9yaWdpbiBhbGxvdy1mb3JtcyBhbGxvdy1zY3JpcHRzIGFsbG93LXBvcHVwc1wiXHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuQ2hhdEJyby5wcm9wVHlwZXMgPSB7XHJcbiAgICBoZWlnaHQ6IFByb3BUeXBlcy5zdHJpbmdcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IENoYXRCcm87XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUZBO0FBTEE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRkE7QUFMQTtBQWJBO0FBRkE7QUE0QkE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUZBO0FBRkE7QUFXQTtBQUNBO0FBakJBO0FBRkE7QUFzQkE7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFKQTtBQU9BO0FBZEE7QUFEQTtBQURBO0FBcUJBOzs7O0FBekZBO0FBQ0E7QUEyRkE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQStDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZFQTtBQXdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBbkZBO0FBb0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQTFGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBRkE7QUFVQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFpREE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBbkJBO0FBMEJBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFSQTtBQWhCQTtBQURBO0FBREE7QUFEQTtBQTNCQTtBQUNBO0FBbUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBUEE7QUFKQTtBQUhBO0FBc0JBO0FBdEJBO0FBeUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBUEE7QUFKQTtBQUhBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUF0QkE7QUE2QkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFQQTtBQUpBO0FBSEE7QUFzQkE7QUF0QkE7QUF3QkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFQQTtBQUZBO0FBSEE7QUFvQkE7QUFwQkE7QUF1QkE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFEQTtBQXZHQTtBQWlIQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBUkE7QUE3SEE7QUErSUE7Ozs7QUFuVkE7QUFDQTtBQXFWQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FDN1dBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUE2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZFQTtBQWtIQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFGQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFFQTtBQU5BO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBVkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFZQTtBQUNBO0FBaElBO0FBQUE7QUFpSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUZBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUVBO0FBTkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFWQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBbElBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBV0E7QUFDQTtBQUNBO0FBZkE7QUFnQkE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQVRBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQUdBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBOztBQURBOztBQUNBO0FBQ0E7Ozs7Ozs7OztBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTs7OztBQWNBOzs7Ozs7OztBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7Ozs7OztBQUNBO0FBQ0E7O0FBREE7O0FBR0E7QUFDQTs7QUFEQTtBQUNBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTs7Ozs7QUFXQTtBQUNBO0FBREE7QUFDQTs7Ozs7Ozs7O0FBSUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUpBO0FBTUE7OztBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBT0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQWpCQTtBQW1CQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFyQkE7QUEwQkE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFGQTtBQU9BO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFDQTtBQTVDQTtBQUFBO0FBQUE7QUFDQTtBQXFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFOQTtBQUZBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQWJBO0FBc0JBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBVEE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQVJBO0FBbkJBO0FBOEJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFWQTtBQVlBO0FBQ0E7QUFDQTtBQUZBO0FBWkE7QUFMQTtBQTJCQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBNUJBO0FBL0JBO0FBa0VBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBVkE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBSkE7QUFZQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUpBO0FBTUE7QUFOQTtBQUhBO0FBYUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQVRBO0FBREE7QUFEQTtBQWRBO0FBaUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQVRBO0FBTkE7QUF0SkE7QUEyS0E7Ozs7QUFua0JBO0FBQ0E7QUFxa0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBWUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFHQTtBQUpBO0FBZ0JBO0FBR0E7QUFKQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQXRDQTtBQUNBO0FBd0NBO0FBQ0E7QUFNQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZIQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBd0hBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFoSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBZ0lBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBakJBO0FBbUJBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFLQTtBQUxBO0FBREE7QUFVQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQVNBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQWJBO0FBQUE7QUFBQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBCQTtBQUNBO0FBREE7QUFBQTtBQUVBO0FBREE7QUFLQTtBQUNBO0FBRkE7QUFDQTtBQWlCQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBREE7QUFHQTtBQVpBO0FBZUE7Ozs7Ozs7O0FDL0RBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQURBO0FBUEE7QUFEQTtBQUhBO0FBdUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BOzs7Ozs7O0FDdkNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBT0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakdBO0FBUkE7QUE0R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBNUdBO0FBb0hBOzs7O0FBM0hBO0FBQ0E7QUE2SEE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFLQTs7O0FBYUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBS0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFIQTtBQU1BOzs7O0FBbktBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTtBQVNBO0FBQ0E7QUFGQTtBQUNBO0FBQ0E7QUE0SkE7QUFDQTtBQURBO0FBQ0E7QUFHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL1RBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFhQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUEwSkE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBM0NBO0FBQ0E7QUExSkE7QUFvdkNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFwd0NBO0FBc3dDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBdHhDQTtBQXN5Q0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBOXlDQTtBQW96Q0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBNXpDQTtBQTh6Q0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBcDBDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQVZBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhFQTtBQWlFQTtBQUNBOzs7QUFDQTtBQUNBO0FBR0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBREE7QUFHQTs7O0FBcURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBUkE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQVJBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUE1REE7QUFpRUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBTEE7QUFEQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUtBOzs7QUFTQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQWZBO0FBQ0E7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFRQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0RUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQWlGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQVFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBREE7QUFDQTtBQUtBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUZBO0FBSEE7QUFTQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBREE7QUFDQTtBQVlBO0FBRUE7QUFDQTtBQUVBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBQ0E7QUFqQkE7QUFBQTtBQUFBO0FBQ0E7QUE2QkE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUpBO0FBSEE7QUFXQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBQ0E7QUFTQTtBQVNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUZBO0FBSEE7QUFTQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQUE7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBREE7QUFHQTs7O0FBc0NBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7Ozs7OztBQWNBOzs7Ozs7O0FBd0JBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFTQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQU1BO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBcUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFXQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqSkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQTBKQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBSEE7QUFWQTtBQURBO0FBb0JBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVJBO0FBMkJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUdBO0FBS0E7QUFLQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBcEdBO0FBSkE7QUEyR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwQkE7QUFKQTtBQXRJQTtBQUNBO0FBbUtBO0FBRUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBUkE7QUEyQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBR0E7QUFLQTtBQUtBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUExR0E7QUFKQTtBQWtIQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBCQTtBQUpBO0FBN0lBO0FBQ0E7QUEwS0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBT0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQTlCQTtBQUNBO0FBbUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFIQTtBQVdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBaEJBO0FBbUJBO0FBekJBO0FBQ0E7QUE0QkE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBWUE7QUFTQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkVBO0FBQ0E7QUFzRUE7QUFDQTtBQUNBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpCQTtBQUNBO0FBNEJBO0FBSUE7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE1QkE7QUFDQTtBQStCQTtBQUlBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBL0JBO0FBQ0E7QUFrQ0E7QUFLQTtBQUNBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQS9CQTtBQUNBO0FBa0NBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFiQTtBQUNBO0FBZ0JBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE3QkE7QUFDQTtBQWdDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFGQTtBQVdBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBUEE7QUFMQTtBQWdCQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQUxBO0FBaUJBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBTEE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFYQTtBQTlEQTtBQUNBO0FBOEZBOzs7OztBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUhBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFHQTtBQUxBO0FBVkE7QUFvQkE7QUF0QkE7QUF3QkE7QUF4QkE7QUEwQkE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUdBO0FBTEE7QUFWQTtBQW9CQTtBQXRCQTtBQXdCQTtBQXhCQTtBQW5DQTtBQVJBO0FBQ0E7QUF3RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUpBO0FBTUE7QUFOQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUpBO0FBTUE7QUFOQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQWtCQTtBQXBCQTtBQXNCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBdEJBO0FBQ0E7QUE4QkE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQVlBO0FBZEE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQWhCQTtBQUNBO0FBd0JBO0FBRUE7QUFBQTtBQUNBO0FBT0E7QUFSQTtBQUFBO0FBQUE7QUFDQTtBQWFBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQVRBO0FBY0E7QUFsQkE7QUFxQkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUpBO0FBTUE7QUFOQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBR0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBWEE7QUFnQkE7QUFwQkE7QUF6REE7QUFpRkE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVFBO0FBUkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVFBO0FBUkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU9BO0FBQ0E7QUFHQTtBQUpBO0FBTUE7QUFDQTtBQUdBO0FBSkE7QUFiQTtBQU5BO0FBMkJBO0FBaENBO0FBa0NBO0FBbkNBO0FBSkE7QUFDQTtBQTJDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUxBO0FBT0E7QUFDQTtBQUdBO0FBSkE7QUFQQTtBQVBBO0FBQ0E7QUE0QkE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUxBO0FBT0E7QUFDQTtBQUdBO0FBSkE7QUFQQTtBQW1CQTtBQXJCQTtBQTRCQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkJBO0FBc0JBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBWUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFyREE7QUEyREE7QUFJQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFZQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFTQTtBQUVBO0FBQUE7QUFDQTtBQURBO0FBZkE7QUFzQkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQW5DQTtBQU5BO0FBaURBO0FBcElBO0FBeUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQVRBO0FBWUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBVEE7QUFhQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBYkE7QUFtQkE7QUFBQTtBQVVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUlBO0FBR0E7QUFuQkE7QUE4QkE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFaQTtBQWdCQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQVpBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBblNBO0FBK1NBOzs7O0FBaG1IQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBUUE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUNBO0FBMGxIQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNucEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFlQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFtRUE7QUFDQTtBQUNBO0FBckVBO0FBbUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExR0E7QUEwSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbElBO0FBb0lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaEpBO0FBa0pBO0FBQ0E7QUFDQTtBQUNBO0FBbkpBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBUkE7QUFTQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQTRCQTs7O0FBTUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFXQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTs7O0FBK0JBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBcUJBO0FBR0E7QUFDQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBRUE7QUFFQTtBQU9BO0FBT0E7QUFJQTtBQUNBO0FBNUVBO0FBQUE7QUFBQTtBQUNBO0FBa0ZBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTkE7QUFEQTtBQUxBO0FBTkE7QUE4QkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTkE7QUFEQTtBQUxBO0FBTkE7QUE4QkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTkE7QUFEQTtBQUxBO0FBTkE7QUFDQTtBQWxKQTtBQUFBO0FBQUE7QUFDQTtBQW1MQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBTkE7QUFEQTtBQUxBO0FBTkE7QUErQkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFOQTtBQURBO0FBTEE7QUFOQTtBQStCQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU5BO0FBREE7QUFMQTtBQU5BO0FBQ0E7QUFnQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBTEE7QUFEQTtBQVBBO0FBQ0E7QUF5QkE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQVBBO0FBREE7QUFMQTtBQTRCQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFQQTtBQURBO0FBTkE7QUF3QkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBUEE7QUFEQTtBQUxBO0FBdUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBTkE7QUFRQTtBQVJBO0FBWkE7QUFEQTtBQUxBO0FBZ0NBO0FBNUdBO0FBK0dBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQVBBO0FBREE7QUFMQTtBQTRCQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFQQTtBQURBO0FBTkE7QUF3QkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBUEE7QUFEQTtBQUxBO0FBdUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBTkE7QUFRQTtBQVJBO0FBWkE7QUFEQTtBQUxBO0FBZ0NBO0FBNUdBO0FBK0dBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFMQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFJQTtBQWZBO0FBSkE7QUFMQTtBQTRCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQVBBO0FBREE7QUE3QkE7QUFvREE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUxBO0FBVUE7QUFFQTtBQURBO0FBSUE7QUFmQTtBQVRBO0FBTEE7QUFrQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQVBBO0FBREE7QUFuQ0E7QUFyREE7QUEyR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBUEE7QUFEQTtBQU5BO0FBd0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBTkE7QUFVQTtBQVZBO0FBWkE7QUFEQTtBQUxBO0FBekJBO0FBNUdBO0FBMEtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFLQTtBQVBBO0FBVkE7QUFEQTtBQXdCQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFOQTtBQVFBO0FBUkE7QUFBQTtBQVlBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQU5BO0FBUUE7QUFSQTtBQUFBO0FBWUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBNURBO0FBc0VBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBUEE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBVUE7QUFaQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUtBO0FBZEE7QUFrQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBWEE7QUFhQTtBQWJBO0FBbkJBO0FBWEE7QUErQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBSEE7QUFLQTtBQU5BO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFqQkE7QUFzQkE7QUFDQTtBQUNBO0FBRkE7QUF0QkE7QUFEQTtBQVRBO0FBd0NBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBSEE7QUFLQTtBQU5BO0FBV0E7QUFFQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQWpCQTtBQURBO0FBTEE7QUErQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVpBO0FBbUJBO0FBbkJBO0FBTEE7QUFOQTtBQXlDQTtBQUVBO0FBQUE7QUFDQTtBQVFBO0FBREE7QUFSQTtBQWdCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFMQTtBQWdCQTtBQUNBO0FBQ0E7QUFGQTtBQWhCQTtBQWhCQTtBQTJDQTtBQUVBO0FBQUE7QUFDQTtBQURBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBTEE7QUFnQkE7QUFDQTtBQUNBO0FBRkE7QUFoQkE7QUFYQTtBQXNDQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQVNBO0FBQ0E7QUFJQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBVUE7QUFEQTtBQVZBO0FBa0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBR0E7QUFQQTtBQVdBO0FBQ0E7QUFaQTtBQWxCQTtBQWtDQTtBQUFBO0FBQUE7QUFDQTtBQVVBO0FBREE7QUFWQTtBQWtCQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBSkE7QUFRQTtBQUNBO0FBVEE7QUFsQkE7QUFuQ0E7QUFyQkE7QUF5RkE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQURBO0FBSEE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFVQTtBQUNBO0FBQ0E7QUFGQTtBQVZBO0FBVkE7QUF6RkE7QUF5SEE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQU9BO0FBVEE7QUFXQTtBQVhBO0FBY0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFWQTtBQWNBO0FBZEE7QUEzUUE7QUFEQTtBQTFFQTtBQW5EQTtBQThaQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQVJBO0FBTEE7QUFKQTtBQXNCQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFSQTtBQUxBO0FBREE7QUF6QkE7QUFEQTtBQXRiQTtBQTVFQTtBQW9qQkE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUExakJBO0FBb2tCQTs7OztBQTVoREE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQURBO0FBWUE7QUFEQTtBQUNBO0FBQ0E7QUFraERBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZqREE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBUkE7QUFjQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBUkE7QUFjQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBUkE7QUFjQTtBQUNBOzs7O0FBekRBO0FBQ0E7QUEyREE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0RBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBMlhBO0FBQ0E7QUFDQTtBQTdYQTtBQWlaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6WkE7QUEyWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2YUE7QUF5YUE7QUFDQTtBQUNBO0FBQ0E7QUF6YUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFUQTtBQVVBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBREE7QUFJQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBTUE7QUFDQTtBQU9BO0FBQ0E7QUFNQTtBQUNBOzs7QUFFQTtBQUNBO0FBSUE7OztBQUVBO0FBQ0E7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFFQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFMQTtBQU9BO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQUlBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBTUE7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBR0E7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQStCQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBS0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFIQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFEQTtBQUtBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUpBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUhBO0FBTkE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFPQTtBQUNBO0FBREE7QUFNQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSkE7QUFVQTtBQW5CQTtBQUNBO0FBc0JBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFDQTtBQVNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFRQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBR0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFIQTtBQUxBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBT0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBQ0E7QUFVQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBRUE7QUFGQTtBQU1BO0FBTkE7QUFTQTtBQUFBO0FBQUE7QUFFQTtBQUZBO0FBTUE7QUFOQTtBQVNBO0FBQUE7QUFBQTtBQUVBO0FBRkE7QUFJQTtBQUpBO0FBT0E7QUFBQTtBQUFBO0FBRUE7QUFGQTtBQU1BO0FBTkE7QUFTQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBTkE7QUFTQTtBQUFBO0FBQUE7QUFFQTtBQUZBO0FBSUE7QUFKQTtBQU9BO0FBQ0E7QUFBQTtBQUVBO0FBRkE7QUFNQTtBQU5BO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUtBO0FBYkE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQVpBO0FBY0E7QUFkQTtBQW5CQTtBQUpBO0FBMENBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFJQTtBQUNBO0FBWkE7QUFjQTtBQUNBO0FBQ0E7QUFGQTtBQWRBO0FBREE7QUFzQkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFMQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFOQTtBQVZBO0FBSkE7QUF5QkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBNUpBO0FBREE7QUEyS0E7Ozs7QUExMEJBO0FBQ0E7QUE0MEJBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUxBO0FBTUE7QUFDQTs7O0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFNQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQVhBO0FBYUE7QUFDQTtBQUNBO0FBSUE7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFJQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTs7OztBQWpMQTtBQUNBO0FBbUxBOzs7Ozs7Ozs7Ozs7Ozs7OztBQ2ppQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBekdBO0FBQ0E7QUEyR0E7Ozs7OztBQU1BO0FBQ0E7Ozs7Ozs7O0FBUUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBU0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFLQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBVEE7QUFXQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQWNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFRQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVdBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQTlUQTtBQUNBO0FBZ1VBOzs7Ozs7QUFNQTtBQUNBO0FBREE7Ozs7Ozs7Ozs7OztBQ2xjQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBUEE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE1REE7QUFDQTtBQThEQTs7Ozs7Ozs7QUN6RUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUhBO0FBUUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTkE7QUFZQTtBQUNBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFMQTtBQURBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFiQTtBQW1CQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBTkE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBYkE7QUF0Q0E7QUEyREE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFUQTtBQWdCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQVBBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVhBO0FBdkJBO0FBbEVBO0FBUkE7QUFzSEE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUkE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBaEJBO0FBdUJBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQWVBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFjQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBY0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBY0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBekdBO0FBeUhBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFYQTtBQVJBO0FBMUhBO0FBSkE7QUF2SEE7QUFEQTtBQW9SQTs7OztBQTVkQTtBQUNBO0FBREE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUZBO0FBT0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBRkE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVdBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFLQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUxBO0FBU0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQVhBO0FBUkE7QUEwQkE7Ozs7QUFwR0E7QUFDQTtBQURBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWFBOzs7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFPQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFOQTtBQURBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWRBO0FBREE7QUFxQkE7Ozs7QUF4R0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUF3R0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFPQTs7OztBQW5CQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBQ0E7QUFtQkE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM3SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFRQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFTQTs7OztBQXpCQTtBQUNBO0FBMkJBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFSQTtBQVNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFXQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQUlBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQU1BO0FBSUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBWEE7QUFpQkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQVhBO0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTkE7QUFRQTtBQVJBO0FBREE7QUFDQTtBQWFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUNBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBQ0E7QUFRQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBS0E7QUFOQTtBQURBO0FBREE7QUFZQTtBQWJBO0FBa0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUNBO0FBU0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBTkE7QUFEQTtBQURBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBQ0E7QUFDQTtBQVpBO0FBY0E7QUFDQTtBQUNBO0FBaEJBO0FBa0JBO0FBQ0E7QUFuQkE7QUFBQTtBQXVCQTs7OztBQTFjQTtBQUNBO0FBNGNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUFBQTtBQUpBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBSkE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUhBO0FBcEJBO0FBREE7QUFrQ0E7Ozs7QUF2Q0E7QUFDQTtBQXlDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBRkE7QUFIQTtBQURBO0FBREE7QUF4QkE7QUE0Q0E7Ozs7QUF2REE7QUFDQTtBQXlEQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUlBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFOQTtBQVFBO0FBUkE7QUFEQTtBQURBO0FBQ0E7QUFlQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQVFBOzs7O0FBekRBO0FBQ0E7QUEyREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFPQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcE1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFOQTtBQUZBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBRkE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBRkE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBckNBO0FBREE7QUErQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQUZBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUdBO0FBQ0E7QUFGQTtBQVJBO0FBREE7QUFEQTtBQTdCQTtBQWdEQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBeUJBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBR0E7QUFQQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQURBO0FBREE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBSEE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBVkE7QUFjQTtBQTNDQTtBQURBO0FBZ0RBOzs7O0FBN0VBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFLQTs7Ozs7Ozs7Ozs7QUFPQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQVZBO0FBc0JBOzs7O0FBaENBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFpQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBT0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXhCQTtBQTJCQTs7OztBQXJEQTtBQUNBO0FBdURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQU9BOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBR0E7QUFTQTtBQVNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFNQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQWxCQTtBQXdCQTs7OztBQXJGQTtBQUNBO0FBdUZBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUtBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXRCQTtBQXlCQTs7OztBQTVDQTtBQUNBO0FBOENBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFPQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQVNBO0FBU0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQURBO0FBYkE7QUFtQkE7Ozs7QUEzRUE7QUFDQTtBQTZFQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBS0E7QUFDQTs7O0FBS0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUFBO0FBQ0E7QUFEQTtBQU5BO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBaEJBO0FBbUJBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQWJBO0FBVkE7QUEyQkE7QUFDQTs7O0FBdEVBO0FBQ0E7QUFDQTs7OztBQVZBO0FBQ0E7QUFnRkE7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQTBHQTtBQUNBO0FBQ0E7QUE1R0E7QUE2R0E7QUFBQTtBQUNBO0FBOUdBO0FBdU1BO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUEzTUE7QUFrTkE7QUFDQTtBQUNBO0FBbE5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFaQTtBQWFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQVVBOzs7Ozs7O0FBU0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUEwQkE7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBZUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBZ0JBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQWdCQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFpQkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFQQTtBQUxBO0FBTEE7QUFxQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBTkE7QUFEQTtBQWhDQTtBQURBO0FBQ0E7QUE4Q0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBTkE7QUFEQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFQQTtBQUxBO0FBTEE7QUFyQkE7QUFEQTtBQUNBO0FBOENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQVhBO0FBYUE7QUFiQTtBQUFBO0FBREE7QUFtQkE7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUdBO0FBR0E7QUFQQTtBQUZBO0FBZ0JBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQU5BO0FBUUE7QUFSQTtBQUFBO0FBWUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUFBQTtBQVZBO0FBeEVBO0FBd0ZBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFIQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBUEE7QUFKQTtBQVZBO0FBeUJBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFNQTtBQUNBO0FBS0E7QUFOQTtBQU5BO0FBREE7QUF4SEE7QUFOQTtBQW1KQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBWEE7QUFhQTtBQWJBO0FBQUE7QUFEQTtBQW1CQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBR0E7QUFHQTtBQVBBO0FBRkE7QUFnQkE7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBREE7QUFOQTtBQVdBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQU5BO0FBUUE7QUFSQTtBQUFBO0FBWUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUFBQTtBQVZBO0FBckZBO0FBcUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFIQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQU5BO0FBSkE7QUFWQTtBQXdCQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUtBO0FBTkE7QUFOQTtBQURBO0FBcElBO0FBTkE7QUF4SkE7QUF3VEE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQVhBO0FBa0JBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFRQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFMQTtBQVVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBUkE7QUFEQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBS0E7QUFYQTtBQUZBO0FBcUJBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBREE7QUFYQTtBQXRCQTtBQXVDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQU5BO0FBeENBO0FBREE7QUFzREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFQQTtBQURBO0FBTEE7QUE1RUE7QUFxR0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU9BO0FBQ0E7QUFDQTtBQUhBO0FBOUpBO0FBREE7QUF3S0E7QUFDQTs7OztBQWpnQ0E7QUFDQTtBQW1nQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNsNkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQU9BO0FBQ0E7OztBQUNBO0FBQ0E7QUFZQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBREE7QUFJQTtBQURBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBaUJBOzs7O0FBcE9BO0FBQ0E7QUFzT0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQVJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2pRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQURBO0FBREE7QUFDQTtBQWtCQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU5BO0FBU0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQU5BO0FBUUE7QUFSQTtBQURBO0FBQ0E7QUFhQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUdBO0FBUEE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQURBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQURBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQXZCQTtBQURBO0FBREE7QUFEQTtBQW9DQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBSEE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFOQTtBQURBO0FBVkE7QUF1QkE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFLQTtBQU5BO0FBREE7QUFEQTtBQTFFQTtBQURBO0FBMkZBOzs7O0FBNUhBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFPQTs7Ozs7Ozs7Ozs7QUFZQTtBQUNBO0FBRUE7OztBQUVBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBREE7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUpBO0FBWUE7Ozs7QUE1Q0E7QUFDQTtBQURBO0FBRUE7QUFNQTtBQUNBO0FBUkE7QUFDQTtBQUNBO0FBNENBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFLQTtBQVZBO0FBQ0E7QUFhQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBOzs7Ozs7Ozs7OztBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFKQTtBQU5BO0FBY0E7Ozs7QUF2Q0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUF3Q0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFVQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFGQTtBQU9BOzs7QUFFQTtBQUNBO0FBT0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBREE7QUFEQTtBQWNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUpBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBV0E7QUFkQTtBQURBO0FBbUJBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQU9BO0FBUEE7QUFIQTtBQWFBO0FBQ0E7QUFmQTtBQWtCQTs7OztBQTFNQTtBQUNBO0FBNE1BOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFIQTtBQU9BO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFZQTtBQUNBO0FBREE7QUFaQTtBQWtCQTs7OztBQXZEQTtBQUNBO0FBeURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBVEE7QUFDQTtBQVlBOzs7Ozs7Ozs7Ozs7Ozs7O0FDblZBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFKQTtBQUtBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBREE7QUFLQTtBQUNBO0FBRkE7QUFOQTtBQU5BO0FBb0JBOzs7O0FBekRBO0FBQ0E7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTkE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBUkE7QUFTQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFkQTtBQW1CQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBWkE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBSEE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQWRBO0FBREE7QUEyQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFOQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQXBCQTtBQURBO0FBNUJBO0FBMkRBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQUhBO0FBREE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBTEE7QUFEQTtBQWpCQTtBQTRCQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFIQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBZEE7QUFEQTtBQTJCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUE1QkE7QUF3Q0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBSEE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQWRBO0FBREE7QUEyQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBNUJBO0FBd0NBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFIQTtBQURBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBR0E7QUFSQTtBQUZBO0FBakJBO0FBbUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQUhBO0FBREE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFOQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBYkE7QUFEQTtBQWpCQTtBQXdDQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFIQTtBQURBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBTkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWJBO0FBREE7QUFwQkE7QUEyQ0E7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBSEE7QUFEQTtBQWdCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQU5BO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFiQTtBQURBO0FBcEJBO0FBMkNBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQUhBO0FBREE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFOQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBYkE7QUFEQTtBQXBCQTtBQTBDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFIQTtBQURBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQXBCQTtBQThCQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFIQTtBQURBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQWpCQTtBQTZCQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFIQTtBQURBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQWpCQTtBQTZCQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBTEE7QUFIQTtBQVlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFUQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFUQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFUQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFUQTtBQWVBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFIQTtBQUpBO0FBbUJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBTkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWJBO0FBREE7QUF2QkE7QUE2Q0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBSEE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQWRBO0FBREE7QUEyQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBNUJBO0FBd0NBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQUhBO0FBREE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBakJBO0FBOW9CQTtBQWRBO0FBMnJCQTs7OztBQWh3QkE7QUFDQTtBQWt3QkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQVdBO0FBQ0E7OztBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlCQTtBQUNBO0FBZ0NBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQU1BO0FBUUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQVFBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFJQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBWkE7QUFDQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQVhBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBTEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBVkE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBT0E7QUFBQTtBQUNBO0FBREE7QUFkQTtBQW1CQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQU1BO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFOQTtBQU5BO0FBTkE7QUFuQkE7QUF0QkE7QUFvRUE7Ozs7QUExWEE7QUFDQTtBQTRYQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFSQTs7Ozs7OztBQzVZQTs7Ozs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZCQTtBQXlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2QkE7QUF5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdkJBO0FBbkRBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBcUJBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFiQTtBQWVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFjQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztBQWVBOzs7QUFHQTtBQUdBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBRUE7OztBQUdBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTs7Ozs7OztBQU9BO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUE2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3paQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUdBO0FBY0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQTBCQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBa0JBO0FBQ0E7QUFDQTtBQURBO0FBeEJBO0FBNEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUlBO0FBVkE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQTFCQTtBQThCQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBZEE7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBTEE7QUFEQTtBQXRHQTtBQUNBO0FBa0hBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQU1BO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBUkE7QUFVQTtBQUNBO0FBaEJBO0FBQ0E7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQVJBO0FBVUE7QUFDQTtBQWhCQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFSQTtBQVVBO0FBQ0E7QUFoQkE7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBTEE7QUFRQTtBQTFCQTtBQStCQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBTEE7QUFYQTtBQW9CQTtBQUdBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUE1QkE7QUFEQTtBQW1DQTtBQUNBOzs7O0FBMWVBO0FBQ0E7QUE0ZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdGdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVFBO0FBUkE7QUFXQTs7OztBQWRBO0FBQ0E7QUFnQkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBS0E7QUFDQTtBQU1BO0FBUUE7QUFRQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFNQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQU5BO0FBV0E7Ozs7QUFyR0E7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBcUdBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFjQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUdBO0FBSkE7QUFNQTtBQUNBO0FBaEJBO0FBQ0E7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpCQTtBQTBCQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBTUE7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBTUE7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUVBO0FBR0E7QUFFQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBRUE7QUFDQTtBQUZBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFRQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBREE7QUFUQTtBQWVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBNUJBO0FBcUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSEE7QUFRQTtBQVhBO0FBREE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQURBO0FBREE7QUFaQTtBQTBCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBL0JBO0FBd0NBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTtBQVFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFiQTtBQXVCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQU5BO0FBUUE7QUFSQTtBQURBO0FBaElBO0FBOElBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFTQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBUEE7QUFOQTtBQWtCQTtBQUdBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQU5BO0FBSkE7QUFlQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBVUE7QUFYQTtBQURBO0FBaUJBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUF4REE7QUE4REE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFQQTtBQURBO0FBMUVBO0FBdUZBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBT0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBVUE7QUFWQTtBQUpBO0FBQ0E7QUFrQkE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFSQTtBQVVBO0FBWEE7QUFMQTtBQUpBO0FBeUJBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFBQTtBQUNBO0FBU0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBUUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQUNBO0FBWUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFGQTtBQVNBO0FBVEE7QUFEQTtBQWNBOzs7O0FBNXNCQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFEQTtBQVVBO0FBQ0E7QUFGQTtBQUNBO0FBQ0E7QUFvc0JBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFLQTtBQVZBO0FBQ0E7QUFhQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUhBO0FBSUE7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBR0E7QUFGQTtBQVhBO0FBa0JBOzs7O0FBM0NBO0FBQ0E7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5dkJBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBZUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUdBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBR0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBTUE7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBR0E7QUFQQTtBQUFBO0FBV0E7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUFKQTtBQUFBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUpBO0FBTUE7QUFOQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFKQTtBQU1BO0FBTkE7QUFqQkE7QUE2QkE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUhBO0FBS0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBREE7QUFsQkE7QUF3QkE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBUEE7QUEzREE7QUFQQTtBQURBO0FBREE7QUFrRkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUNBO0FBTEE7QUFEQTtBQW5GQTtBQXpCQTtBQURBO0FBTkE7QUFtSUE7Ozs7QUExVUE7QUFDQTtBQTRVQTtBQUNBO0FBREE7QUFDQTtBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaFdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBSUE7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BOzs7O0FBNUJBO0FBQ0E7QUE4QkE7QUFDQTtBQURBO0FBQ0E7QUFHQTs7OztBIiwic291cmNlUm9vdCI6IiJ9