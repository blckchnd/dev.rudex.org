(this["webpackJsonp"] = this["webpackJsonp"] || []).push([[27],{

/***/ 2925:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(569);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(553);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(725);
/* harmony import */ var stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2364);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2003);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1886);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(570);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(527);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _Page404_Page404__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2643);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1846);
/* harmony import */ var _AccountAssets__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2926);
/* harmony import */ var _AccountAssetCreate__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2930);
/* harmony import */ var _AccountAssetUpdate__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2931);
/* harmony import */ var _AccountMembership__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2935);
/* harmony import */ var _AccountVesting__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2938);
/* harmony import */ var _AccountPermissions__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2939);
/* harmony import */ var _AccountSignedMessages__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2958);
/* harmony import */ var _AccountWhitelist__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2961);
/* harmony import */ var _AccountVoting__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2962);
/* harmony import */ var _AccountOverview__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(2973);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }














/* Nested routes */











var AccountPage = function (_React$Component) {
    _inherits(AccountPage, _React$Component);

    function AccountPage(props) {
        _classCallCheck(this, AccountPage);

        return _possibleConstructorReturn(this, (AccountPage.__proto__ || Object.getPrototypeOf(AccountPage)).call(this, props));
    }

    _createClass(AccountPage, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            if (this.props.account) {
                actions_AccountActions__WEBPACK_IMPORTED_MODULE_1__["default"].setCurrentAccount.defer(this.props.account.get("name"));
                // Fetch possible fee assets here to avoid async issues later (will resolve assets)
                common_account_utils__WEBPACK_IMPORTED_MODULE_8__["default"].getPossibleFees(this.props.account, "transfer");
            }
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.account) {
                var npName = np.account.get("name");
                var currentName = this.props.account && this.props.account.get("name");

                if (!this.props.account || npName !== currentName) {
                    // Update the current account in order to access the header right menu options
                    actions_AccountActions__WEBPACK_IMPORTED_MODULE_1__["default"].setCurrentAccount.defer(npName);
                    // Fetch possible fee assets here to avoid async issues later (will resolve assets)
                    common_account_utils__WEBPACK_IMPORTED_MODULE_8__["default"].getPossibleFees(np.account, "transfer");
                }
            }
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate(prevProps) {
            var _props = this.props,
                currentAccount = _props.currentAccount,
                history = _props.history,
                location = _props.location;

            if (prevProps.currentAccount !== currentAccount && currentAccount) {
                var currentPath = location.pathname.split("/");
                currentPath[2] = currentAccount;
                history.push(currentPath.join("/"));
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _props2 = this.props,
                myActiveAccounts = _props2.myActiveAccounts,
                searchAccounts = _props2.searchAccounts,
                settings = _props2.settings,
                wallet_locked = _props2.wallet_locked,
                account = _props2.account,
                hiddenAssets = _props2.hiddenAssets;


            if (!account) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Page404_Page404__WEBPACK_IMPORTED_MODULE_10__["default"], null);
            }
            var account_name = this.props.account.get("name");
            var isMyAccount = stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].isMyAccount(account);

            var passOnProps = {
                account_name: account_name,
                myActiveAccounts: myActiveAccounts,
                searchAccounts: searchAccounts,
                settings: settings,
                wallet_locked: wallet_locked,
                account: account,
                isMyAccount: isMyAccount,
                hiddenAssets: hiddenAssets,
                contained: true,
                balances: account.get("balances", Object(immutable__WEBPACK_IMPORTED_MODULE_9__["List"])()).toList(),
                orders: account.get("orders", Object(immutable__WEBPACK_IMPORTED_MODULE_9__["List"])()).toList(),
                viewSettings: this.props.viewSettings,
                proxy: account.getIn(["options", "voting_account"]),
                history: this.props.history
            };

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Switch"],
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                    path: "/account/" + account_name,
                    exact: true,
                    render: function render() {
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountOverview__WEBPACK_IMPORTED_MODULE_21__["default"], passOnProps);
                    }
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Redirect"], {
                    from: "/account/" + account_name + "/overview",
                    to: "/account/" + account_name
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                    path: "/account/" + account_name + "/assets",
                    exact: true,
                    render: function render() {
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssets__WEBPACK_IMPORTED_MODULE_12__["default"], passOnProps);
                    }
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                    path: "/account/" + account_name + "/create-asset",
                    exact: true,
                    render: function render() {
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssetCreate__WEBPACK_IMPORTED_MODULE_13__["AccountAssetCreate"], passOnProps);
                    }
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                    path: "/account/" + account_name + "/update-asset/:asset",
                    exact: true,
                    render: function render() {
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssetUpdate__WEBPACK_IMPORTED_MODULE_14__["default"], passOnProps);
                    }
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                    path: "/account/" + account_name + "/member-stats",
                    exact: true,
                    render: function render() {
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountMembership__WEBPACK_IMPORTED_MODULE_15__["default"], passOnProps);
                    }
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                    path: "/account/" + account_name + "/vesting",
                    exact: true,
                    render: function render() {
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountVesting__WEBPACK_IMPORTED_MODULE_16__["default"], passOnProps);
                    }
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                    path: "/account/" + account_name + "/permissions",
                    exact: true,
                    render: function render() {
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissions__WEBPACK_IMPORTED_MODULE_17__["default"], passOnProps);
                    }
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                    path: "/account/" + account_name + "/voting/:tab",
                    render: function render() {
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountVoting__WEBPACK_IMPORTED_MODULE_20__["default"], passOnProps);
                    }
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Redirect"], {
                    from: "/account/" + account_name + "/voting",
                    to: "/account/" + account_name + "/voting/witnesses"
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                    path: "/account/" + account_name + "/whitelist",
                    exact: true,
                    render: function render() {
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountWhitelist__WEBPACK_IMPORTED_MODULE_19__["default"], passOnProps);
                    }
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["Route"], {
                    path: "/account/" + account_name + "/signedmessages",
                    exact: true,
                    render: function render() {
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountSignedMessages__WEBPACK_IMPORTED_MODULE_18__["default"], passOnProps);
                    }
                })
            );
        }
    }]);

    return AccountPage;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPage.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAccount.isRequired
};

AccountPage = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(AccountPage, {
    show_loader: true
});

var AccountPageStoreWrapper = function (_React$Component2) {
    _inherits(AccountPageStoreWrapper, _React$Component2);

    function AccountPageStoreWrapper() {
        _classCallCheck(this, AccountPageStoreWrapper);

        return _possibleConstructorReturn(this, (AccountPageStoreWrapper.__proto__ || Object.getPrototypeOf(AccountPageStoreWrapper)).apply(this, arguments));
    }

    _createClass(AccountPageStoreWrapper, [{
        key: "render",
        value: function render() {
            var account_name = this.props.match.params.account_name;
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPage, _extends({}, this.props, { account: account_name }));
        }
    }]);

    return AccountPageStoreWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(alt_react__WEBPACK_IMPORTED_MODULE_7__["connect"])(AccountPageStoreWrapper, {
    listenTo: function listenTo() {
        return [stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"], stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"], stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_4__["default"]];
    },
    getProps: function getProps() {
        return {
            myActiveAccounts: stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].getState().myActiveAccounts,
            searchAccounts: stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].getState().searchAccounts,
            currentAccount: stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].getState().currentAccount || stores_AccountStore__WEBPACK_IMPORTED_MODULE_2__["default"].getState().passwordAccount,
            settings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().settings,
            hiddenAssets: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().hiddenAssets,
            wallet_locked: stores_WalletUnlockStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().locked,
            viewSettings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().viewSettings
        };
    }
}));

/***/ }),

/***/ 2926:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2759);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1846);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2391);
/* harmony import */ var stores_AssetStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2390);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(569);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2146);
/* harmony import */ var _LoadingIndicator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1986);
/* harmony import */ var _Modal_IssueModal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2927);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1886);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(582);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(527);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2126);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2929);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(1894);


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }



















var AccountAssets = function (_React$Component) {
    _inherits(AccountAssets, _React$Component);

    function AccountAssets(props) {
        _classCallCheck(this, AccountAssets);

        var _this = _possibleConstructorReturn(this, (AccountAssets.__proto__ || Object.getPrototypeOf(AccountAssets)).call(this, props));

        _this.state = {
            isIssueAssetModalVisible: false,
            create: {
                symbol: "",
                name: "",
                description: "",
                max_supply: 1000000000000000,
                precision: 4
            },
            issue: {
                amount: 0,
                to: "",
                to_id: "",
                asset_id: "",
                symbol: ""
            },
            errors: {
                symbol: null
            },
            isValid: false,
            searchTerm: ""
        };

        _this._searchAccounts = Object(lodash_es_debounce__WEBPACK_IMPORTED_MODULE_0__["default"])(_this._searchAccounts, 150);

        _this.showIssueAssetModal = _this.showIssueAssetModal.bind(_this);
        _this.hideIssueAssetModal = _this.hideIssueAssetModal.bind(_this);
        return _this;
    }

    _createClass(AccountAssets, [{
        key: "showIssueAssetModal",
        value: function showIssueAssetModal() {
            this.setState({
                isIssueAssetModalVisible: true
            });
        }
    }, {
        key: "hideIssueAssetModal",
        value: function hideIssueAssetModal() {
            this.setState({
                isIssueAssetModalVisible: false
            });
        }
    }, {
        key: "_checkAssets",
        value: function _checkAssets(assets, force) {
            if (this.props.account.get("assets").size) return;
            var lastAsset = assets.sort(function (a, b) {
                if (a.symbol > b.symbol) {
                    return 1;
                } else if (a.symbol < b.symbol) {
                    return -1;
                } else {
                    return 0;
                }
            }).last();

            if (assets.size === 0 || force) {
                actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__["default"].getAssetList.defer("A", 100);
                this.setState({ assetsFetched: 100 });
            } else if (assets.size >= this.state.assetsFetched) {
                actions_AssetActions__WEBPACK_IMPORTED_MODULE_5__["default"].getAssetList.defer(lastAsset.symbol, 100);
                this.setState({ assetsFetched: this.state.assetsFetched + 99 });
            }
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            this._checkAssets(nextProps.assets);
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            this._checkAssets(this.props.assets, true);
        }
    }, {
        key: "_onIssueInput",
        value: function _onIssueInput(value, e) {
            var key = e.target.id;
            var issue = this.state.issue;


            if (key === "to") {
                this._searchAccounts(e.target.value);
                issue.to = e.target.value;
                var account = this.props.searchAccounts.findEntry(function (name) {
                    return name === e.target.value;
                });

                issue.to_id = account ? account[0] : null;
            } else {
                issue[value] = e.target.value;
            }

            this.setState({ issue: issue });
        }
    }, {
        key: "_searchAccounts",
        value: function _searchAccounts(searchTerm) {
            actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__["default"].accountSearch(searchTerm);
        }
    }, {
        key: "_issueButtonClick",
        value: function _issueButtonClick(asset_id, symbol, e) {
            e.preventDefault();
            var issue = this.state.issue;

            issue.asset_id = asset_id;
            issue.symbol = symbol;
            this.setState({ issue: issue });
            this.showIssueAssetModal();
        }
    }, {
        key: "_editButtonClick",
        value: function _editButtonClick(symbol, account_name, e) {
            e.preventDefault();
            this.props.history.push("/account/" + account_name + "/update-asset/" + symbol);
        }
    }, {
        key: "_createButtonClick",
        value: function _createButtonClick(account_name) {
            this.props.history.push("/account/" + account_name + "/create-asset");
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var _props = this.props,
                account = _props.account,
                account_name = _props.account_name,
                assets = _props.assets,
                assetsList = _props.assetsList;


            var accountExists = true;
            if (!account) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_LoadingIndicator__WEBPACK_IMPORTED_MODULE_9__["default"], { type: "circle" });
            } else if (account.notFound) {
                accountExists = false;
            }
            if (!accountExists) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "grid-block" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "h5",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                            component: "h5",
                            content: "account.errors.not_found",
                            name: account_name
                        })
                    )
                );
            }

            if (assetsList.length) {
                assets = assets.clear();
                assetsList.forEach(function (a) {
                    if (a) assets = assets.set(a.get("id"), a.toJS());
                });
            }
            var myAssets = assets.filter(function (asset) {
                return asset.issuer === account.get("id");
            }).sort(function (a, b) {
                return parseInt(a.id.substring(4, a.id.length), 10) - parseInt(b.id.substring(4, b.id.length), 10);
            }).map(function (asset) {
                var description = common_asset_utils__WEBPACK_IMPORTED_MODULE_12__["default"].parseDescription(asset.options.description);
                var desc = description.short_name ? description.short_name : description.main;

                if (desc.length > 100) {
                    desc = desc.substr(0, 100) + "...";
                }

                var dynamicObject = _this2.props.getDynamicObject(asset.dynamic_asset_data_id);

                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "tr",
                    { key: asset.symbol },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "left" } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"],
                            { to: "/asset/" + asset.symbol },
                            asset.symbol
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "left" } },
                        "bitasset" in asset ? asset.bitasset.is_prediction_market ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.pm" }) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.mpa" }) : "User Issued Asset"
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "right" } },
                        dynamicObject ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_8__["default"], {
                            hide_asset: true,
                            amount: parseInt(dynamicObject.get("current_supply"), 10),
                            asset: asset.id
                        }) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { style: { textAlign: "right" } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_8__["default"], {
                            hide_asset: true,
                            amount: parseInt(asset.options.max_supply, 10),
                            asset: asset.id
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        null,
                        !asset.bitasset_data_id ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "a",
                            {
                                onClick: _this2._issueButtonClick.bind(_this2, asset.id, asset.symbol)
                            },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_16__["default"], {
                                name: "cross-circle",
                                className: "rotate45"
                            })
                        ) : null
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "a",
                            {
                                onClick: _this2._editButtonClick.bind(_this2, asset.symbol, account_name)
                            },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_16__["default"], { name: "dashboard" })
                        )
                    )
                );
            }).toArray();

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_15__["Tabs"],
                            {
                                segmented: false,
                                setting: "issuedAssetsTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding"
                            },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_15__["Tab"],
                                { title: "account.user_issued_assets.issued_assets" },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "div",
                                    { className: "content-block" },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "table",
                                        { className: "table dashboard-table" },
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            "thead",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                "tr",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    { style: { textAlign: "left" } },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.symbol" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    { style: { textAlign: "left" } },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.asset.summary.asset_type" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                                    component: "th",
                                                    content: "markets.supply",
                                                    style: { textAlign: "right" }
                                                }),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    {
                                                        style: { textAlign: "right" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.user_issued_assets.max_supply" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    {
                                                        style: {
                                                            textAlign: "center"
                                                        }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "transaction.trxTypes.asset_issue" })
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                                    "th",
                                                    {
                                                        style: {
                                                            textAlign: "center"
                                                        }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "transaction.trxTypes.asset_update" })
                                                )
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                            "tbody",
                                            null,
                                            myAssets
                                        )
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                    "div",
                                    { className: "content-block" },
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                        "button",
                                        {
                                            className: "button",
                                            onClick: this._createButtonClick.bind(this, account_name)
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "transaction.trxTypes.asset_create" })
                                    )
                                )
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Modal_IssueModal__WEBPACK_IMPORTED_MODULE_10__["default"], {
                        visible: this.state.isIssueAssetModalVisible,
                        hideModal: this.hideIssueAssetModal,
                        showModal: this.showIssueAssetModal,
                        asset_to_issue: this.state.issue.asset_id
                    })
                )
            );
        }
    }]);

    return AccountAssets;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

AccountAssets.defaultProps = {
    symbol: "",
    name: "",
    description: "",
    max_supply: 0,
    precision: 0
};
AccountAssets.propTypes = {
    symbol: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string.isRequired
};


AccountAssets = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_14__["default"])(AccountAssets, {
    propNames: ["assetsList"],
    asList: true,
    withDynamic: true
});

/* harmony default export */ __webpack_exports__["default"] = (Object(alt_react__WEBPACK_IMPORTED_MODULE_11__["connect"])(AccountAssets, {
    listenTo: function listenTo() {
        return [stores_AssetStore__WEBPACK_IMPORTED_MODULE_6__["default"]];
    },
    getProps: function getProps(props) {
        var assets = Object(immutable__WEBPACK_IMPORTED_MODULE_13__["Map"])(),
            assetsList = Object(immutable__WEBPACK_IMPORTED_MODULE_13__["List"])();
        if (props.account.get("assets", []).size) {
            props.account.get("assets", []).forEach(function (id) {
                assetsList = assetsList.push(id);
            });
        } else {
            assets = stores_AssetStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().assets;
        }
        return { assets: assets, assetsList: assetsList };
    }
}));

/***/ }),

/***/ 2927:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(Buffer) {/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2003);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(571);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var api_ApplicationApi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(603);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2139);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2928);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }












var IssueModal = function (_React$Component) {
    _inherits(IssueModal, _React$Component);

    function IssueModal(props) {
        _classCallCheck(this, IssueModal);

        var _this = _possibleConstructorReturn(this, (IssueModal.__proto__ || Object.getPrototypeOf(IssueModal)).call(this, props));

        _this.state = {
            amount: props.amount,
            to: props.to,
            to_id: null,
            memo: ""
        };
        return _this;
    }

    _createClass(IssueModal, [{
        key: "onAmountChanged",
        value: function onAmountChanged(_ref) {
            var amount = _ref.amount;

            this.setState({ amount: amount });
        }
    }, {
        key: "onToAccountChanged",
        value: function onToAccountChanged(to) {
            var state = to ? { to: to.get("name"), to_id: to.get("id") } : { to_id: null };
            this.setState(state);
        }
    }, {
        key: "onToChanged",
        value: function onToChanged(to) {
            this.setState({ to: to, to_id: null });
        }
    }, {
        key: "onSubmit",
        value: function onSubmit() {
            this.props.hideModal();
            var asset_to_issue = this.props.asset_to_issue;

            var precision = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_precision(asset_to_issue.get("precision"));
            var amount = this.state.amount.toString().replace(/,/g, "");
            amount *= precision;

            api_ApplicationApi__WEBPACK_IMPORTED_MODULE_6__["default"].issue_asset(this.state.to_id, asset_to_issue.get("issuer"), asset_to_issue.get("id"), amount, this.state.memo ? new Buffer(this.state.memo, "utf-8") : this.state.memo).catch(function (err) {
                console.log("issue error caught here:", err);
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__["Notification"].error({
                    message: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("notifications.asset_issue_failure") //: ${this.state.wallet_public_name}
                });
            });

            this.setState({
                amount: 0,
                to: "",
                to_id: null,
                memo: ""
            });
        }
    }, {
        key: "onMemoChanged",
        value: function onMemoChanged(e) {
            this.setState({ memo: e.target.value });
        }
    }, {
        key: "render",
        value: function render() {
            var asset_to_issue = this.props.asset_to_issue.get("id");
            var tabIndex = 1;

            var footer = [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__["Button"],
                {
                    type: "primary",
                    key: "submit",
                    onClick: this.onSubmit.bind(this, this.state.to, this.state.amount),
                    disabled: !this.state.to_id || !this.state.amount
                },
                counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("modal.issue.submit")
            ), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__["Button"],
                { key: "cancel", onClick: this.props.hideModal },
                counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("cancel")
            )];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__["Modal"],
                {
                    title: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("modal.issue.submit"),
                    visible: this.props.visible,
                    onCancel: this.props.hideModal,
                    footer: footer
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "form",
                    { className: "grid-block vertical full-width-content" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "grid-container " },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "content-block" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_7__["default"], {
                                label: "modal.issue.to",
                                accountName: this.state.to,
                                onAccountChanged: this.onToAccountChanged.bind(this),
                                onChange: this.onToChanged.bind(this),
                                account: this.state.to,
                                tabIndex: tabIndex++
                            })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "content-block" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                label: "modal.issue.amount",
                                amount: this.state.amount,
                                onChange: this.onAmountChanged.bind(this),
                                asset: asset_to_issue,
                                assets: [asset_to_issue],
                                tabIndex: tabIndex++
                            })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "content-block" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "label",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    component: "span",
                                    content: "transfer.memo"
                                }),
                                " ",
                                "(",
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "transfer.optional" }),
                                ")"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                rows: "3",
                                value: this.state.memo,
                                tabIndex: tabIndex++,
                                onChange: this.onMemoChanged.bind(this)
                            })
                        )
                    )
                )
            );
        }
    }]);

    return IssueModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

IssueModal.propTypes = {
    asset_to_issue: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAsset.isRequired
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(IssueModal));
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(427).Buffer))

/***/ }),

/***/ 2930:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AccountAssetCreate", function() { return AccountAssetCreate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BitAssetOptions", function() { return BitAssetOptions; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2391);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2163);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(571);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(420);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2146);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2003);
/* harmony import */ var _Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2827);
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(599);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(582);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2929);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2928);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(583);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(chain_asset_constants__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var common_trxHelper__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(597);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }























var GRAPHENE_MAX_SHARE_SUPPLY = new bignumber_js__WEBPACK_IMPORTED_MODULE_12__["default"](chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_MAX_SHARE_SUPPLY);

var BitAssetOptions = function (_React$Component) {
    _inherits(BitAssetOptions, _React$Component);

    function BitAssetOptions(props) {
        _classCallCheck(this, BitAssetOptions);

        var _this = _possibleConstructorReturn(this, (BitAssetOptions.__proto__ || Object.getPrototypeOf(BitAssetOptions)).call(this, props));

        _this.state = {
            backingAsset: props.backingAsset.get("symbol"),
            error: null
        };
        return _this;
    }

    _createClass(BitAssetOptions, [{
        key: "_onInputBackingAsset",
        value: function _onInputBackingAsset(asset) {
            if (this.props.disableBackingAssetChange) this.props.disabledBackingAssetChangeCallback();else this.setState({
                backingAsset: asset.toUpperCase(),
                error: null
            });
        }
    }, {
        key: "_onFoundBackingAsset",
        value: function _onFoundBackingAsset(asset) {
            if (asset) {
                var backing = asset.get("bitasset") && bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(asset.getIn(["bitasset", "options", "short_backing_asset"]));
                var backing_backing = backing && backing.get("bitasset") && bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(backing.getIn(["bitasset", "options", "short_backing_asset"]));
                if (backing_backing && backing_backing !== "1.3.0") {
                    this.setState({
                        error: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.error_too_deep")
                    });
                    this.props.onUpdate("invalid", true);
                } else if (!asset.getIn(["bitasset", "is_prediction_market"])) {
                    if (this.props.isPredictionMarket && asset.get("precision") !== parseInt(this.props.assetPrecision, 10)) {
                        this.setState({
                            error: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.error_precision", { asset: this.props.assetSymbol })
                        });
                        this.props.onUpdate("invalid", true);
                    } else {
                        this.props.onUpdate("short_backing_asset", asset.get("id"));
                        this.props.onUpdate("invalid", false);
                    }
                } else {
                    this.setState({
                        error: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.error_invalid")
                    });
                    this.props.onUpdate("invalid", true);
                }
            } else {
                this.props.onUpdate("invalid", true);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var bitasset_opts = this.props.bitasset_opts;
            var error = this.state.error;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "small-12 grid-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.feed_lifetime_sec" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.feed_lifetime_sec / 60,
                        onChange: this.props.onUpdate.bind(this, "feed_lifetime_sec")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.minimum_feeds" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.minimum_feeds,
                        onChange: this.props.onUpdate.bind(this, "minimum_feeds")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.force_settlement_delay_sec" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.force_settlement_delay_sec / 60,
                        onChange: this.props.onUpdate.bind(this, "force_settlement_delay_sec")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.force_settlement_offset_percent" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.force_settlement_offset_percent / chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                        onChange: this.props.onUpdate.bind(this, "force_settlement_offset_percent")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "label",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.maximum_force_settlement_volume" }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        type: "number",
                        value: bitasset_opts.maximum_force_settlement_volume / chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                        onChange: this.props.onUpdate.bind(this, "maximum_force_settlement_volume")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block no-margin small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_11__["default"], {
                        label: "account.user_issued_assets.backing",
                        onChange: this._onInputBackingAsset.bind(this),
                        asset: this.state.backingAsset,
                        assetInput: this.state.backingAsset,
                        tabIndex: 1,
                        style: { width: "100%", paddingRight: "10px" },
                        onFound: this._onFoundBackingAsset.bind(this)
                    }),
                    error ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "content-block has-error" },
                        error
                    ) : null
                )
            );
        }
    }]);

    return BitAssetOptions;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

BitAssetOptions.propTypes = {
    backingAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainAsset.isRequired,
    isUpdate: prop_types__WEBPACK_IMPORTED_MODULE_18___default.a.bool
};
BitAssetOptions.defaultProps = {
    isUpdate: false
};

BitAssetOptions = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__["default"])(BitAssetOptions);

var AccountAssetCreate = function (_React$Component2) {
    _inherits(AccountAssetCreate, _React$Component2);

    function AccountAssetCreate(props) {
        _classCallCheck(this, AccountAssetCreate);

        var _this2 = _possibleConstructorReturn(this, (AccountAssetCreate.__proto__ || Object.getPrototypeOf(AccountAssetCreate)).call(this, props));

        _this2.state = _this2.resetState(props);
        return _this2;
    }

    _createClass(AccountAssetCreate, [{
        key: "resetState",
        value: function resetState(props) {
            // let asset = props.asset.toJS();
            var isBitAsset = false;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(4);
            var corePrecision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(props.core.get("precision"));

            var _getPermissions2 = this._getPermissions({
                isBitAsset: isBitAsset
            }),
                flagBooleans = _getPermissions2.flagBooleans,
                permissionBooleans = _getPermissions2.permissionBooleans;

            // let flags = assetUtils.getFlags(flagBooleans);
            // let permissions = assetUtils.getPermissions(permissionBooleans, isBitAsset);
            // console.log("all permissions:", permissionBooleans, permissions)

            var coreRateBaseAssetName = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset("1.3.0").get("symbol");

            return {
                update: {
                    symbol: "",
                    precision: 4,
                    max_supply: 100000,
                    max_market_fee: 0,
                    market_fee_percent: 0,
                    description: { main: "" },
                    reward_percent: 0
                },
                errors: {
                    max_supply: null
                },
                isValid: true,
                flagBooleans: flagBooleans,
                permissionBooleans: permissionBooleans,
                isBitAsset: isBitAsset,
                is_prediction_market: false,
                core_exchange_rate: {
                    quote: {
                        asset_id: null,
                        amount: 1
                    },
                    base: {
                        asset_id: "1.3.0",
                        amount: 1
                    }
                },
                bitasset_opts: {
                    feed_lifetime_sec: 60 * 60 * 24,
                    minimum_feeds: 7,
                    force_settlement_delay_sec: 60 * 60 * 24,
                    force_settlement_offset_percent: 1 * chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                    maximum_force_settlement_volume: 20 * chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT,
                    short_backing_asset: "1.3.0"
                },
                marketInput: ""
            };
        }
    }, {
        key: "_getPermissions",
        value: function _getPermissions(state) {
            var flagBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getFlagBooleans(0, state.isBitAsset);
            var permissionBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getFlagBooleans("all", state.isBitAsset);

            return {
                flagBooleans: flagBooleans,
                permissionBooleans: permissionBooleans
            };
        }
    }, {
        key: "_createAsset",
        value: function _createAsset(e) {
            e.preventDefault();
            var _state = this.state,
                update = _state.update,
                flagBooleans = _state.flagBooleans,
                permissionBooleans = _state.permissionBooleans,
                core_exchange_rate = _state.core_exchange_rate,
                isBitAsset = _state.isBitAsset,
                is_prediction_market = _state.is_prediction_market,
                bitasset_opts = _state.bitasset_opts;
            var account = this.props.account;


            var flags = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getFlags(flagBooleans, isBitAsset);
            var permissions = common_asset_utils__WEBPACK_IMPORTED_MODULE_13__["default"].getPermissions(permissionBooleans, isBitAsset);

            if (this.state.marketInput !== update.description.market) {
                update.description.market = "";
            }
            var description = JSON.stringify(update.description);

            actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__["default"].createAsset(account.get("id"), update, flags, permissions, core_exchange_rate, isBitAsset, is_prediction_market, bitasset_opts, description).then(function (result) {
                console.log("... AssetActions.createAsset(account_id, update)", account.get("id"), update, flags, permissions);
            });
        }
    }, {
        key: "_hasChanged",
        value: function _hasChanged() {
            return !common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].are_equal_shallow(this.state, this.resetState(this.props));
        }
    }, {
        key: "_reset",
        value: function _reset(e) {
            e.preventDefault();

            this.setState(this.resetState(this.props));
        }
    }, {
        key: "_forcePositive",
        value: function _forcePositive(number) {
            return parseFloat(number) < 0 ? "0" : number;
        }
    }, {
        key: "_onUpdateDescription",
        value: function _onUpdateDescription(value, e) {
            var update = this.state.update;

            var updateState = true;

            switch (value) {
                case "condition":
                    if (e.target.value.length > 60) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "short_name":
                    if (e.target.value.length > 32) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "market":
                    update.description[value] = e;
                    break;

                case "visible":
                    update.description[value] = !update.description[value];
                    break;

                default:
                    update.description[value] = e.target.value;
                    break;
            }

            if (updateState) {
                this.forceUpdate();
                this._validateEditFields(update);
            }
        }
    }, {
        key: "onChangeBitAssetOpts",
        value: function onChangeBitAssetOpts(value, e) {
            var _state2 = this.state,
                bitasset_opts = _state2.bitasset_opts,
                errors = _state2.errors;


            switch (value) {
                case "force_settlement_offset_percent":
                case "maximum_force_settlement_volume":
                    bitasset_opts[value] = parseFloat(e.target.value) * chain_asset_constants__WEBPACK_IMPORTED_MODULE_16___default.a.GRAPHENE_1_PERCENT;
                    break;
                case "minimum_feeds":
                    bitasset_opts[value] = parseInt(e.target.value, 10);
                    break;
                case "feed_lifetime_sec":
                case "force_settlement_delay_sec":
                    console.log(e.target.value, parseInt(parseFloat(e.target.value) * 60, 10));
                    bitasset_opts[value] = parseInt(parseFloat(e.target.value) * 60, 10);
                    break;

                case "short_backing_asset":
                    bitasset_opts[value] = e;
                    break;

                case "invalid":
                    errors.invalid_bitasset = e;
                    break;

                default:
                    bitasset_opts[value] = e.target.value;
                    break;
            }

            var isValid = !errors.symbol && !errors.max_supply && !errors.invalid_bitasset;

            this.setState({ isValid: isValid, errors: errors });
        }
    }, {
        key: "_onUpdateInput",
        value: function _onUpdateInput(value, e) {
            var _state3 = this.state,
                update = _state3.update,
                errors = _state3.errors;

            var updateState = true;
            var shouldRestoreCursor = false;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(this.state.update.precision);
            var target = e.target;
            var caret = target.selectionStart;
            var inputValue = target.value;

            switch (value) {
                case "market_fee_percent":
                    update[value] = this._forcePositive(target.value);
                    break;
                case "reward_percent":
                    update[value] = this._forcePositive(target.value);
                    break;
                case "max_market_fee":
                    if (new bignumber_js__WEBPACK_IMPORTED_MODULE_12__["default"](inputValue).times(precision).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                        errors.max_market_fee = "The number you tried to enter is too large";
                        return this.setState({ errors: errors });
                    }
                    target.value = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(target.value, this.state.update.precision);
                    update[value] = target.value;
                    break;

                case "precision":
                    // Enforce positive number
                    update[value] = this._forcePositive(target.value);
                    break;

                case "max_supply":
                    shouldRestoreCursor = true;

                    var regexp_numeral = new RegExp(/[[:digit:]]/);

                    // Ensure input is valid
                    if (!regexp_numeral.test(target.value)) {
                        target.value = target.value.replace(/[^0-9.]/g, "");
                    }

                    // Catch initial decimal input
                    if (target.value.charAt(0) == ".") {
                        target.value = "0.";
                    }

                    // Catch double decimal and remove if invalid
                    if (target.value.charAt(target.value.length) != target.value.search(".")) {
                        target.value.substr(1);
                    }

                    target.value = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(target.value, this.state.update.precision);
                    update[value] = target.value;

                    // if ((new big(target.value)).times(Math.pow(10, precision).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                    //     return this.setState({
                    //         update,
                    //         errors: {max_supply: "The number you tried to enter is too large"
                    //     }});
                    // }
                    break;

                case "symbol":
                    shouldRestoreCursor = true;
                    // Enforce uppercase
                    var symbol = target.value.toUpperCase();
                    // Enforce characters
                    var regexp = new RegExp("^[.A-Z0-9]+$");
                    if (symbol !== "" && !regexp.test(symbol)) {
                        break;
                    }
                    bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(symbol);
                    update[value] = this._forcePositive(symbol);
                    break;

                default:
                    update[value] = target.value;
                    break;
            }

            if (updateState) {
                this.setState({ update: update }, function () {
                    if (shouldRestoreCursor) {
                        var selectionStart = caret - (inputValue.length - update[value].length);
                        target.setSelectionRange(selectionStart, selectionStart);
                    }
                });
                this._validateEditFields(update);
            }
        }
    }, {
        key: "_validateEditFields",
        value: function _validateEditFields(new_state) {
            var errors = this.state.errors;

            errors.max_supply = null;

            errors.symbol = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainValidation"].is_valid_symbol_error(new_state.symbol);
            var existingAsset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(new_state.symbol);
            if (existingAsset) {
                errors.symbol = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.exists");
            }

            try {
                errors.max_supply = new_state.max_supply <= 0 ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.max_positive") : new bignumber_js__WEBPACK_IMPORTED_MODULE_12__["default"](new_state.max_supply).times(Math.pow(10, new_state.precision)).gt(GRAPHENE_MAX_SHARE_SUPPLY) ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large") : null;
            } catch (err) {
                console.log("err:", err);
                errors.max_supply = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large");
            }

            var isValid = !errors.symbol && !errors.max_supply && !errors.invalid_bitasset;

            this.setState({ isValid: isValid, errors: errors });
        }
    }, {
        key: "_onFlagChange",
        value: function _onFlagChange(key) {
            var booleans = this.state.flagBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                flagBooleans: booleans
            });
        }
    }, {
        key: "_onPermissionChange",
        value: function _onPermissionChange(key) {
            var booleans = this.state.permissionBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                permissionBooleans: booleans
            });
        }
    }, {
        key: "_onInputCoreAsset",
        value: function _onInputCoreAsset(type, asset) {
            if (type === "quote") {
                this.setState({
                    quoteAssetInput: asset
                });
            } else if (type === "base") {
                this.setState({
                    baseAssetInput: asset
                });
            }
        }
    }, {
        key: "_onFoundCoreAsset",
        value: function _onFoundCoreAsset(type, asset) {
            if (asset) {
                var core_rate = this.state.core_exchange_rate;
                core_rate[type].asset_id = asset.get("id");

                this.setState({
                    core_exchange_rate: core_rate
                });

                this._validateEditFields({
                    max_supply: this.state.max_supply,
                    core_exchange_rate: core_rate
                });
            }
        }
    }, {
        key: "_onInputMarket",
        value: function _onInputMarket(asset) {
            this.setState({
                marketInput: asset
            });
        }
    }, {
        key: "_onFoundMarketAsset",
        value: function _onFoundMarketAsset(asset) {
            if (asset) {
                this._onUpdateDescription("market", asset.get("symbol"));
            }
        }
    }, {
        key: "_onCoreRateChange",
        value: function _onCoreRateChange(type, e) {
            var amount = void 0,
                asset = void 0;
            if (type === "quote") {
                amount = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(e.target.value, this.state.update.precision);
                asset = null;
            } else {
                if (!e || !("amount" in e)) {
                    return;
                }
                amount = e.amount == "" ? "0" : common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(e.amount.toString().replace(/,/g, ""), this.props.core.get("precision"));
                asset = e.asset.get("id");
            }

            var core_exchange_rate = this.state.core_exchange_rate;

            core_exchange_rate[type] = {
                amount: amount,
                asset_id: asset
            };
            this.forceUpdate();
        }
    }, {
        key: "_onToggleBitAsset",
        value: function _onToggleBitAsset() {
            var update = this.state.update;

            this.state.isBitAsset = !this.state.isBitAsset;
            if (!this.state.isBitAsset) {
                this.state.is_prediction_market = false;
            }

            var _getPermissions3 = this._getPermissions(this.state),
                flagBooleans = _getPermissions3.flagBooleans,
                permissionBooleans = _getPermissions3.permissionBooleans;

            this.state.flagBooleans = flagBooleans;
            this.state.permissionBooleans = permissionBooleans;

            this.forceUpdate();
        }
    }, {
        key: "_onTogglePM",
        value: function _onTogglePM() {
            this.state.is_prediction_market = !this.state.is_prediction_market;
            this.state.update.precision = this.props.core.get("precision");
            this.state.core_exchange_rate.base.asset_id = this.props.core.get("id");
            this.forceUpdate();
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                globalObject = _props.globalObject,
                core = _props.core;
            var _state4 = this.state,
                errors = _state4.errors,
                isValid = _state4.isValid,
                update = _state4.update,
                flagBooleans = _state4.flagBooleans,
                permissionBooleans = _state4.permissionBooleans,
                core_exchange_rate = _state4.core_exchange_rate,
                is_prediction_market = _state4.is_prediction_market,
                isBitAsset = _state4.isBitAsset,
                bitasset_opts = _state4.bitasset_opts;

            // Estimate the asset creation fee from the symbol character length

            var symbolLength = update.symbol.length,
                createFee = "N/A";

            if (symbolLength === 3) {
                createFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__["default"], {
                    amount: Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_17__["estimateFee"])("asset_create", ["symbol3"], globalObject),
                    asset: "1.3.0"
                });
            } else if (symbolLength === 4) {
                createFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__["default"], {
                    amount: Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_17__["estimateFee"])("asset_create", ["symbol4"], globalObject),
                    asset: "1.3.0"
                });
            } else if (symbolLength > 4) {
                createFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__["default"], {
                    amount: Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_17__["estimateFee"])("asset_create", ["long_symbol"], globalObject),
                    asset: "1.3.0"
                });
            }

            // Loop over flags
            var flags = [];
            var getFlag = function getFlag(key, onClick, isChecked) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { key: "table_" + key, className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none", width: "80%" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.user_issued_assets." + key
                                }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none", textAlign: "right" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Switch"], {
                                    checked: isChecked,
                                    onChange: onClick
                                })
                            )
                        )
                    )
                );
            };
            for (var key in permissionBooleans) {
                if (permissionBooleans[key] && key !== "charge_market_fee") {
                    flags.push(getFlag(key, this._onFlagChange.bind(this, key), flagBooleans[key]));
                }
            }

            flags.push(getFlag("visible", this._onUpdateDescription.bind(this, "visible"), update.description.visible ? false : update.description.visible === false ? true : false));

            // Loop over permissions
            var permissions = [];
            for (var _key in permissionBooleans) {
                permissions.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { key: "table_" + _key, className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none", width: "80%" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.user_issued_assets." + _key
                                }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Switch"], {
                                    checked: permissionBooleans[_key],
                                    onChange: this._onPermissionChange.bind(this, _key)
                                })
                            )
                        )
                    )
                ));
            }

            var confirmButtons = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: "button",
                        onClick: this._reset.bind(this),
                        value: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.perm.reset")
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.reset" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_2___default()("button", { disabled: !isValid }),
                        onClick: this._createAsset.bind(this)
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "header.create_asset" })
                )
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "tabs-header" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "h3",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "header.create_asset" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tabs"],
                            {
                                setting: "createAssetTab",
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block",
                                contentClass: "grid-block shrink small-vertical medium-horizontal padding",
                                segmented: false,
                                actionButtons: confirmButtons
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.primary" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.symbol" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            value: update.symbol,
                                            onChange: this._onUpdateInput.bind(this, "symbol")
                                        })
                                    ),
                                    errors.symbol ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.symbol
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.max_supply" }),
                                        " ",
                                        update.symbol ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "span",
                                            null,
                                            "(",
                                            update.symbol,
                                            ")"
                                        ) : null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            value: update.max_supply,
                                            onChange: this._onUpdateInput.bind(this, "max_supply")
                                        })
                                    ),
                                    errors.max_supply ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.max_supply
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.decimals" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            min: "0",
                                            max: "8",
                                            step: "1",
                                            type: "range",
                                            value: update.precision,
                                            onChange: this._onUpdateInput.bind(this, "precision")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        update.precision
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        {
                                            style: { marginBottom: 10 },
                                            className: "txtlabel cancel"
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.precision_warning" })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "table",
                                        {
                                            className: "table",
                                            style: { width: "inherit" }
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tbody",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tr",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    { style: { border: "none" } },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                                        content: "account.user_issued_assets.mpa"
                                                    }),
                                                    ":"
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    { style: { border: "none" } },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Switch"], {
                                                        checked: isBitAsset,
                                                        onChange: this._onToggleBitAsset.bind(this)
                                                    })
                                                )
                                            )
                                        )
                                    ),
                                    isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "table",
                                        {
                                            className: "table",
                                            style: { width: "inherit" }
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "tbody",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tr",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    {
                                                        style: { border: "none" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                                        content: "account.user_issued_assets.pm"
                                                    }),
                                                    ":"
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    {
                                                        style: { border: "none" }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Switch"], {
                                                        checked: is_prediction_market,
                                                        onChange: this._onTogglePM.bind(this)
                                                    })
                                                )
                                            )
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.core_exchange_rate"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "grid-block no-margin" },
                                            errors.quote_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.quote_asset
                                            ) : null,
                                            errors.base_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.base_asset
                                            ) : null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    {
                                                        className: "amount-selector",
                                                        style: {
                                                            width: "100%",
                                                            paddingRight: "10px"
                                                        }
                                                    },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                                        component: "label",
                                                        content: "account.user_issued_assets.quote"
                                                    }),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "div",
                                                        { className: "inline-label" },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                            type: "text",
                                                            placeholder: "0.0",
                                                            onChange: this._onCoreRateChange.bind(this, "quote"),
                                                            value: core_exchange_rate.quote.amount
                                                        })
                                                    )
                                                )
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                                    label: "account.user_issued_assets.base",
                                                    amount: core_exchange_rate.base.amount,
                                                    onChange: this._onCoreRateChange.bind(this, "base"),
                                                    asset: core_exchange_rate.base.asset_id,
                                                    assets: [core_exchange_rate.base.asset_id],
                                                    placeholder: "0.0",
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingLeft: "10px"
                                                    }
                                                })
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "h5",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "exchange.price" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "span",
                                                    null,
                                                    ":",
                                                    " ",
                                                    common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].format_number(common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_price(core_exchange_rate.quote.amount * common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(update.precision), {
                                                        precision: update.precision
                                                    }, core_exchange_rate.base.amount * common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(core), core), 2 + (parseInt(update.precision, 10) || 8))
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "span",
                                                    null,
                                                    " ",
                                                    update.symbol,
                                                    "/",
                                                    core.get("symbol")
                                                )
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_1",
                                            component: "label",
                                            className: "has-error"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_2",
                                            component: "p"
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        createFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.description" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "label",
                                        content: "account.user_issued_assets.description"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                            style: { height: "7rem" },
                                            rows: "1",
                                            value: update.description.main,
                                            onChange: this._onUpdateDescription.bind(this, "main")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "label",
                                        content: "account.user_issued_assets.short"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            rows: "1",
                                            value: update.description.short_name,
                                            onChange: this._onUpdateDescription.bind(this, "short_name")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "label",
                                        content: "account.user_issued_assets.market"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_11__["default"], {
                                        label: "account.user_issued_assets.name",
                                        onChange: this._onInputMarket.bind(this),
                                        asset: this.state.marketInput,
                                        assetInput: this.state.marketInput,
                                        style: {
                                            width: "100%",
                                            paddingRight: "10px"
                                        },
                                        onFound: this._onFoundMarketAsset.bind(this)
                                    }),
                                    is_prediction_market ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.condition"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "text",
                                                rows: "1",
                                                value: update.description.condition,
                                                onChange: this._onUpdateDescription.bind(this, "condition")
                                            })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.expiry"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "date",
                                                value: update.description.expiry,
                                                onChange: this._onUpdateDescription.bind(this, "expiry")
                                            })
                                        )
                                    ) : null
                                )
                            ),
                            isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.bitasset_opts" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BitAssetOptions, {
                                    bitasset_opts: bitasset_opts,
                                    onUpdate: this.onChangeBitAssetOpts.bind(this),
                                    backingAsset: bitasset_opts.short_backing_asset,
                                    assetPrecision: update.precision,
                                    assetSymbol: update.symbol,
                                    isPredictionMarket: is_prediction_market
                                })
                            ) : null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.permissions" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { maxWidth: 800 } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                            path: "components/AccountAssetCreate",
                                            section: "permissions"
                                        })
                                    ),
                                    permissions
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_14__["Tab"],
                                { title: "account.user_issued_assets.flags" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { maxWidth: 800 } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                            path: "components/AccountAssetCreate",
                                            section: "flags"
                                        })
                                    ),
                                    permissionBooleans["charge_market_fee"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "h3",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                                component: "span",
                                                content: "account.user_issued_assets.market_fee",
                                                style: {
                                                    paddingRight: "20px"
                                                }
                                            }),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Switch"], {
                                                checked: flagBooleans.charge_market_fee,
                                                onChange: this._onFlagChange.bind(this, "charge_market_fee")
                                            })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_2___default()({
                                                    disabled: !flagBooleans.charge_market_fee
                                                }),
                                                style: {
                                                    marginTop: "10px",
                                                    marginLeft: "30px"
                                                }
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.market_fee" }),
                                                " ",
                                                "(%)",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                    type: "number",
                                                    value: update.market_fee_percent,
                                                    onChange: this._onUpdateInput.bind(this, "market_fee_percent")
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.max_market_fee" }),
                                                " ",
                                                "(",
                                                update.symbol,
                                                ")",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                    type: "number",
                                                    value: update.max_market_fee,
                                                    onChange: this._onUpdateInput.bind(this, "max_market_fee")
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                {
                                                    className: classnames__WEBPACK_IMPORTED_MODULE_2___default()({
                                                        disabled: !(update.market_fee_percent > 0)
                                                    })
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "label",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.reward_percent" }),
                                                    " ",
                                                    "(%)",
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                        type: "number",
                                                        value: update.reward_percent,
                                                        onChange: this._onUpdateInput.bind(this, "reward_percent")
                                                    })
                                                )
                                            ),
                                            errors.max_market_fee ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.max_market_fee
                                            ) : null
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "h3",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.flags" })
                                    ),
                                    flags
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountAssetCreate;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountAssetCreate.propTypes = {
    core: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainAsset.isRequired,
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainObject.isRequired
};
AccountAssetCreate.defaultProps = {
    globalObject: "2.0.0",
    core: "1.3.0"
};


AccountAssetCreate = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__["default"])(AccountAssetCreate);



/***/ }),

/***/ 2931:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2391);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2163);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(571);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(420);
/* harmony import */ var _Utility_FormattedFee__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2932);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2003);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2126);
/* harmony import */ var _Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2928);
/* harmony import */ var _Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2445);
/* harmony import */ var _Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2827);
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(599);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(582);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2929);
/* harmony import */ var _AccountAssetCreate__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2930);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(583);
/* harmony import */ var chain_asset_constants__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(chain_asset_constants__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var _AssetWhitelist__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2933);
/* harmony import */ var _AssetFeedProducers__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(2934);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(1846);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(527);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_24__);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }




























var GRAPHENE_MAX_SHARE_SUPPLY = new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](chain_asset_constants__WEBPACK_IMPORTED_MODULE_19___default.a.GRAPHENE_MAX_SHARE_SUPPLY);

var disabledBackingAssetChangeCallback = function disabledBackingAssetChangeCallback() {
    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_23__["Notification"].error({
        message: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.invalid_backing_asset_change")
    });
};

var AccountAssetUpdate = function (_React$Component) {
    _inherits(AccountAssetUpdate, _React$Component);

    function AccountAssetUpdate(props) {
        _classCallCheck(this, AccountAssetUpdate);

        var _this = _possibleConstructorReturn(this, (AccountAssetUpdate.__proto__ || Object.getPrototypeOf(AccountAssetUpdate)).call(this, props));

        _this.state = _this.resetState(props);

        _this.showAssetUpdateConfirmationModal = _this.showAssetUpdateConfirmationModal.bind(_this);
        _this.hideAssetUpdateConfirmationModal = _this.hideAssetUpdateConfirmationModal.bind(_this);
        return _this;
    }

    _createClass(AccountAssetUpdate, [{
        key: "_openConfirm",
        value: function _openConfirm() {
            this.showAssetUpdateConfirmationModal();
        }
    }, {
        key: "_cancelConfirm",
        value: function _cancelConfirm() {
            this.hideAssetUpdateConfirmationModal();
        }
    }, {
        key: "resetState",
        value: function resetState(props) {
            var asset = props.asset.toJS();
            var isBitAsset = asset.bitasset_data_id !== undefined;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(asset.precision);
            var corePrecision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(props.core.get("precision"));

            var max_market_fee = new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](asset.options.max_market_fee).div(precision).toString();
            var max_supply = new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](asset.options.max_supply).div(precision).toString();
            var core_exchange_rate = asset.options.core_exchange_rate;
            core_exchange_rate.quote.amount = core_exchange_rate.quote.asset_id === asset.id ? new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](core_exchange_rate.quote.amount).div(precision).toString() : new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](core_exchange_rate.quote.amount).div(corePrecision).toString();

            core_exchange_rate.base.amount = core_exchange_rate.base.asset_id === asset.id ? new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](core_exchange_rate.base.amount).div(precision).toString() : new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](core_exchange_rate.base.amount).div(corePrecision).toString();

            var flagBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlagBooleans(asset.options.flags, isBitAsset);
            var permissionBooleans = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlagBooleans(asset.options.issuer_permissions, isBitAsset);
            asset.options.market_fee_percent /= 100;

            if (asset.options.extensions !== null && asset.options.extensions.reward_percent !== null) {
                asset.options.extensions.reward_percent /= 100;
            }

            var coreRateQuoteAssetName = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.quote.asset_id).get("symbol");
            var coreRateBaseAssetName = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.base.asset_id).get("symbol");

            // maybe undefined (extensions may be empty
            var whitelist_market_fee_sharing_val = props.asset.getIn(["options", "extensions", "whitelist_market_fee_sharing"]);
            var reward_percent = props.asset.getIn(["options", "extensions", "reward_percent"]);

            return {
                isAssetUpdateConfirmationModalVisible: false,
                update: {
                    max_supply: max_supply,
                    max_market_fee: max_market_fee,
                    reward_percent: reward_percent === undefined ? undefined : asset.options.extensions.reward_percent,
                    market_fee_percent: asset.options.market_fee_percent,
                    description: common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].parseDescription(asset.options.description)
                },
                core_exchange_rate: core_exchange_rate,
                issuer: asset.issuer,
                new_issuer_account_id: null,
                new_funder_account: props.account.get("id"),
                asset_to_update: asset.id,
                errors: {
                    max_supply: null
                },
                new_authority_id: null,
                authority_name: null,
                isValid: true,
                flagBooleans: flagBooleans,
                permissionBooleans: permissionBooleans,
                isBitAsset: isBitAsset,
                coreRateQuoteAssetName: coreRateQuoteAssetName,
                quoteAssetInput: coreRateQuoteAssetName,
                coreRateBaseAssetName: coreRateBaseAssetName,
                baseAssetInput: coreRateBaseAssetName,
                claimFeesAmount: 0,
                bitasset_opts: isBitAsset ? asset.bitasset.options : null,
                original_bitasset_opts: isBitAsset ? props.asset.getIn(["bitasset", "options"]).toJS() : null,
                marketInput: "",
                whitelist_authorities: props.asset.getIn(["options", "whitelist_authorities"]),
                blacklist_authorities: props.asset.getIn(["options", "blacklist_authorities"]),
                whitelist_markets: props.asset.getIn(["options", "whitelist_markets"]),
                whitelist_market_fee_sharing: whitelist_market_fee_sharing_val,
                blacklist_markets: props.asset.getIn(["options", "blacklist_markets"]),
                maxFeedProducers: props.globalObject.getIn(["parameters", "maximum_asset_feed_publishers"]),
                feedProducers: isBitAsset ? props.asset.getIn(["bitasset", "feeds"], []).map(function (a) {
                    return a.first();
                }) : null,
                originalFeedProducers: isBitAsset ? props.asset.getIn(["bitasset", "feeds"], []).map(function (a) {
                    return a.first();
                }) : null
            };
        }
    }, {
        key: "hideAssetUpdateConfirmationModal",
        value: function hideAssetUpdateConfirmationModal() {
            this.setState({
                isAssetUpdateConfirmationModalVisible: false
            });
        }
    }, {
        key: "showAssetUpdateConfirmationModal",
        value: function showAssetUpdateConfirmationModal() {
            this.setState({
                isAssetUpdateConfirmationModalVisible: true
            });
        }

        // Using JSON.stringify for (fast?) comparsion, could be improved, but seems enough here as the order is fixed

    }, {
        key: "assetChanged",
        value: function assetChanged() {
            var s = this.state;
            var p = this.resetState(this.props);
            return JSON.stringify(s.update) !== JSON.stringify(p.update) || JSON.stringify(s.core_exchange_rate) !== JSON.stringify(p.core_exchange_rate) || s.new_issuer_account_id !== null && s.new_issuer_account_id !== s.issuer || JSON.stringify(s.flagBooleans) !== JSON.stringify(p.flagBooleans) || JSON.stringify(s.permissionBooleans) !== JSON.stringify(p.permissionBooleans) || JSON.stringify(s.whitelist_authorities) !== JSON.stringify(p.whitelist_authorities) || JSON.stringify(s.blacklist_authorities) !== JSON.stringify(p.blacklist_authorities) || JSON.stringify(s.whitelist_markets) !== JSON.stringify(p.whitelist_markets) || JSON.stringify(s.blacklist_markets) !== JSON.stringify(p.blacklist_markets) || JSON.stringify(s.whitelist_market_fee_sharing) !== JSON.stringify(p.whitelist_market_fee_sharing);
        }

        // Return tab ID on change

    }, {
        key: "tabChanged",
        value: function tabChanged(tabId) {
            var tabsChanged = this.tabsChanged();
            return tabsChanged[tabId] ? tabsChanged[tabId] : false;
        }
    }, {
        key: "tabsChanged",
        value: function tabsChanged() {
            var s = this.state;
            var p = this.resetState(this.props);

            var tabUpdateIndex = [];

            /* Primary */
            if (s.update.max_supply !== p.update.max_supply || s.core_exchange_rate.base.amount !== p.core_exchange_rate.base.amount || s.core_exchange_rate.quote.amount !== p.core_exchange_rate.quote.amount) tabUpdateIndex["0"] = true;

            /* Whitelist */
            if (JSON.stringify(s.whitelist_authorities) !== JSON.stringify(p.whitelist_authorities) || JSON.stringify(s.blacklist_authorities) !== JSON.stringify(p.blacklist_authorities) || JSON.stringify(s.whitelist_markets) !== JSON.stringify(p.whitelist_markets) || JSON.stringify(s.blacklist_markets) !== JSON.stringify(p.blacklist_markets) || JSON.stringify(s.whitelist_market_fee_sharing) !== JSON.stringify(p.whitelist_market_fee_sharing)) tabUpdateIndex["1"] = true;

            /* Description */
            if (s.update.description.main !== p.update.description.main || s.update.description.short_name !== p.update.description.short_name || s.update.description.market !== p.update.description.market) tabUpdateIndex["2"] = true;

            /* Bitasset options */
            if (JSON.stringify(s.bitasset_opts) !== JSON.stringify(p.original_bitasset_opts)) tabUpdateIndex["3"] = true;

            /* Permissions */
            if (JSON.stringify(s.permissionBooleans) !== JSON.stringify(p.permissionBooleans)) tabUpdateIndex["4"] = true;

            /* Flags */

            if (JSON.stringify(s.flagBooleans) !== JSON.stringify(p.flagBooleans) || s.update.market_fee_percent !== p.update.market_fee_percent || s.update.max_market_fee !== p.update.max_market_fee || s.update.reward_percent !== p.update.reward_percent) tabUpdateIndex["5"] = true;

            if (JSON.stringify(s.feedProducers) !== JSON.stringify(p.originalFeedProducers)) tabUpdateIndex["6"] = true;

            return tabUpdateIndex;
        }
    }, {
        key: "pageChanged",
        value: function pageChanged() {
            var _state = this.state,
                isBitAsset = _state.isBitAsset,
                bitasset_opts = _state.bitasset_opts,
                original_bitasset_opts = _state.original_bitasset_opts,
                feedProducers = _state.feedProducers,
                originalFeedProducers = _state.originalFeedProducers;

            return this.assetChanged() || isBitAsset && (JSON.stringify(bitasset_opts) !== JSON.stringify(original_bitasset_opts) || !common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].are_equal_shallow(feedProducers.toJS(), originalFeedProducers.toJS()));
        }
    }, {
        key: "_updateAsset",
        value: function _updateAsset(e) {
            var _this2 = this;

            e.preventDefault();

            // Close confirm_modal if it's open
            this.hideAssetUpdateConfirmationModal();

            var _state2 = this.state,
                update = _state2.update,
                issuer = _state2.issuer,
                new_issuer_account_id = _state2.new_issuer_account_id,
                core_exchange_rate = _state2.core_exchange_rate,
                flagBooleans = _state2.flagBooleans,
                permissionBooleans = _state2.permissionBooleans,
                isBitAsset = _state2.isBitAsset,
                bitasset_opts = _state2.bitasset_opts,
                original_bitasset_opts = _state2.original_bitasset_opts,
                feedProducers = _state2.feedProducers,
                originalFeedProducers = _state2.originalFeedProducers;


            var flags = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlags(flagBooleans);

            // Handle incorrect flag from genesis
            if (this.props.asset.getIn(["options", "flags"]) & 128 && !(this.props.asset.getIn(["options", "issuer_permissions"]) & 128)) {
                flags += 128;
            }
            var permissions = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getPermissions(permissionBooleans, isBitAsset);

            if (this.state.marketInput !== update.description.market) {
                update.description.market = "";
            }
            var description = JSON.stringify(update.description);

            var auths = {
                whitelist_authorities: this.state.whitelist_authorities,
                blacklist_authorities: this.state.blacklist_authorities,
                whitelist_markets: this.state.whitelist_markets,
                blacklist_markets: this.state.blacklist_markets,
                whitelist_market_fee_sharing: this.state.whitelist_market_fee_sharing
            };

            var feedProducersJS = isBitAsset ? feedProducers.toJS() : null;
            var originalFeedProducersJS = isBitAsset ? originalFeedProducers.toJS() : null;

            actions_AssetActions__WEBPACK_IMPORTED_MODULE_3__["default"].updateAsset(issuer, new_issuer_account_id, update, core_exchange_rate, this.props.asset, flags, permissions, isBitAsset, bitasset_opts, original_bitasset_opts, description, auths, feedProducersJS, originalFeedProducersJS, this.assetChanged()).then(function () {
                console.log("... AssetActions.updateAsset(account_id, update)", issuer, new_issuer_account_id, _this2.props.asset.get("id"), update);
                setTimeout(function () {
                    bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(_this2.props.asset.get("id"));
                    _this2.setState(_this2.resetState(_this2.props));
                }, 3000);
            });
        }
    }, {
        key: "_reset",
        value: function _reset(e) {
            e.preventDefault();

            this.setState(this.resetState(this.props));
        }
    }, {
        key: "_forcePositive",
        value: function _forcePositive(number) {
            return parseFloat(number) < 0 ? "0" : number;
        }
    }, {
        key: "_onUpdateDescription",
        value: function _onUpdateDescription(value, e) {
            var update = this.state.update;

            var updateState = true;

            switch (value) {
                case "condition":
                    if (e.target.value.length > 60) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "short_name":
                    if (e.target.value.length > 32) {
                        updateState = false;
                        return;
                    }
                    update.description[value] = e.target.value;
                    break;

                case "market":
                    update.description[value] = e;
                    break;

                case "visible":
                    update.description[value] = !update.description[value];
                    break;

                default:
                    update.description[value] = e.target.value;
                    break;
            }

            if (updateState) {
                this.forceUpdate();
                this._validateEditFields(update);
            }
        }
    }, {
        key: "onChangeBitAssetOpts",
        value: function onChangeBitAssetOpts(value, e) {
            var bitasset_opts = this.state.bitasset_opts;


            switch (value) {
                case "force_settlement_offset_percent":
                case "maximum_force_settlement_volume":
                    bitasset_opts[value] = parseFloat(e.target.value) * chain_asset_constants__WEBPACK_IMPORTED_MODULE_19___default.a.GRAPHENE_1_PERCENT;
                    break;

                case "feed_lifetime_sec":
                case "force_settlement_delay_sec":
                    console.log(e.target.value, parseInt(parseFloat(e.target.value) * 60, 10));
                    bitasset_opts[value] = parseInt(parseFloat(e.target.value) * 60, 10);
                    break;

                case "short_backing_asset":
                    bitasset_opts[value] = e;
                    break;

                case "minimum_feeds":
                    bitasset_opts[value] = parseInt(e.target.value, 10);
                    break;

                default:
                    break;
            }

            this.forceUpdate();
        }
    }, {
        key: "_onUpdateInput",
        value: function _onUpdateInput(value, e) {
            var update = this.state.update;

            var updateState = true;
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(this.props.asset.get("precision"));

            switch (value) {
                case "market_fee_percent":
                    update[value] = this._forcePositive(e.target.value);
                    break;
                case "reward_percent":
                    update[value] = this._forcePositive(e.target.value);
                    break;
                case "max_market_fee":
                    var marketFee = e.amount.replace(/,/g, "");
                    if (new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](marketFee).times(precision).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                        updateState = false;
                        return this.setState({
                            errors: {
                                max_market_fee: "The number you tried to enter is too large"
                            }
                        });
                    }
                    update[value] = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(marketFee, this.props.asset.get("precision"));
                    break;

                case "max_supply":
                    var maxSupply = e.amount.replace(/,/g, "");
                    // try {
                    //     if ((new big(maxSupply)).times(Math.pow(10, precision)).gt(GRAPHENE_MAX_SHARE_SUPPLY)) {
                    //         updateState = false;
                    //         return this.setState({errors: {max_supply: "The number you tried to enter is too large"}});
                    //     }
                    update[value] = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(maxSupply, this.props.asset.get("precision"));
                    // } catch(e) {}
                    break;

                default:
                    update[value] = e.target.value;
                    break;
            }

            if (updateState) {
                this.setState({ update: update });
                this._validateEditFields(update);
            }
        }
    }, {
        key: "_validateEditFields",
        value: function _validateEditFields(new_state) {
            var cer = new_state.core_exchange_rate;
            var feedProducers = new_state.feedProducers ? new_state.feedProducers : this.state.feedProducers;
            var flagBooleans = this.state.flagBooleans;
            var _props = this.props,
                asset = _props.asset,
                core = _props.core;


            var errors = {
                max_supply: null,
                quote_asset: null,
                base_asset: null,
                max_feed_producer: null,
                conflict_producer: null,
                invalid_market_pair: null
            };

            var p = this.props.asset.get("precision");
            try {
                errors.max_supply = new_state.max_supply <= 0 ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.max_positive") : new bignumber_js__WEBPACK_IMPORTED_MODULE_15__["default"](parseInt(new_state.max_supply, 10)).times(Math.pow(10, p)).gt(GRAPHENE_MAX_SHARE_SUPPLY) ? counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large") : null;
            } catch (err) {
                console.log("err:", err);
                errors.max_supply = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_large");
            }

            if (cer) {
                if (cer.quote.asset_id !== asset.get("id") && cer.base.asset_id !== asset.get("id")) {
                    errors.quote_asset = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.need_asset", { name: asset.get("symbol") });
                }

                if (cer.quote.asset_id !== core.get("id") && cer.base.asset_id !== core.get("id")) {
                    errors.base_asset = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.need_asset", { name: core.get("symbol") });
                }
            }
            if (feedProducers) {
                if (feedProducers.size > this.state.maxFeedProducers) {
                    errors.max_feed_producer = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.too_many_feed", { max: this.state.maxFeedProducers });
                }
            }
            if (flagBooleans.committee_fed_asset && flagBooleans.witness_fed_asset) {
                errors.conflict_producer = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.conflict_feed");
            }

            if (this.state.marketInput == this.props.asset.get("symbol")) {
                errors.invalid_market_pair = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.invalid_market_pair");
            }

            var isValid = !errors.invalid_market_pair && !errors.max_supply && !errors.base_asset && !errors.quote_asset && !errors.max_feed_producer && !errors.conflict_producer;

            this.setState({ isValid: isValid, errors: errors });
        }
    }, {
        key: "_onCoreRateChange",
        value: function _onCoreRateChange(type, amount) {
            amount.amount = amount.amount == "" ? "0" : amount.amount.replace(/,/g, "");

            amount.amount = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].limitByPrecision(amount.amount, amount.asset.get("precision"));

            var core_exchange_rate = this.state.core_exchange_rate;

            core_exchange_rate[type] = {
                amount: amount.amount,
                asset_id: amount.asset.get("id")
            };
            this.forceUpdate();
        }
    }, {
        key: "onAccountChanged",
        value: function onAccountChanged(key, account) {
            this.setState(_defineProperty({}, key, account ? account.get("id") : null));
        }
    }, {
        key: "onAccountNameChanged",
        value: function onAccountNameChanged(key, name) {
            this.setState(_defineProperty({}, key, name));
        }
    }, {
        key: "_onInputCoreAsset",
        value: function _onInputCoreAsset(type, asset) {
            if (type === "quote") {
                this.setState({
                    quoteAssetInput: asset
                });
            } else if (type === "base") {
                this.setState({
                    baseAssetInput: asset
                });
            }
        }
    }, {
        key: "_onFoundCoreAsset",
        value: function _onFoundCoreAsset(type, asset) {
            if (asset) {
                var core_rate = this.state.core_exchange_rate;
                core_rate[type].asset_id = asset.get("id");

                this.setState({
                    core_exchange_rate: core_rate
                });

                this._validateEditFields({
                    max_supply: this.state.max_supply,
                    core_exchange_rate: core_rate
                });
            }
        }
    }, {
        key: "_onInputMarket",
        value: function _onInputMarket(asset) {
            this.setState({
                marketInput: asset
            });
        }
    }, {
        key: "_onFoundMarketAsset",
        value: function _onFoundMarketAsset(asset) {
            if (asset) {
                this._onUpdateDescription("market", asset.get("symbol"));
            }
        }
    }, {
        key: "_onFlagChange",
        value: function _onFlagChange(key) {
            var booleans = this.state.flagBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                flagBooleans: booleans
            });
            this._validateEditFields({});
        }
    }, {
        key: "_getCurrentSupply",
        value: function _getCurrentSupply() {
            var _props2 = this.props,
                asset = _props2.asset,
                getDynamicObject = _props2.getDynamicObject;


            return getDynamicObject && getDynamicObject(asset.get("dynamic_asset_data_id")).get("current_supply");
        }
    }, {
        key: "_onPermissionChange",
        value: function _onPermissionChange(key) {
            var _state3 = this.state,
                isBitAsset = _state3.isBitAsset,
                permissionBooleans = _state3.permissionBooleans;


            var disabled = !common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlagBooleans(this.props.asset.getIn(["options", "issuer_permissions"]), isBitAsset)[key];

            if (this._getCurrentSupply() > 0 && disabled) {
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_23__["Notification"].error({
                    message: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.invalid_permissions_change")
                });
                return;
            }

            var booleans = permissionBooleans;
            booleans[key] = !booleans[key];
            this.setState({
                permissionBooleans: booleans
            });
        }
    }, {
        key: "_onClaimInput",
        value: function _onClaimInput(asset) {
            this.setState({
                claimFeesAmount: asset.amount
            });
        }
    }, {
        key: "onChangeList",
        value: function onChangeList(key) {
            var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "add";
            var id = arguments[2];

            var current = this.state[key];
            if (current === undefined) {
                current = new immutable__WEBPACK_IMPORTED_MODULE_24___default.a.List([]);
            }
            if (action === "add" && !current.includes(id)) {
                current = current.push(id);
            } else if (action === "remove" && current.includes(id)) {
                current = current.remove(current.indexOf(id));
            }
            this.setState(_defineProperty({}, key, current));
        }
    }, {
        key: "onChangeFeedProducerList",
        value: function onChangeFeedProducerList() {
            var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "add";
            var id = arguments[1];

            var current = this.state.feedProducers;
            if (action === "add" && !current.includes(id)) {
                current = current.push(id);
            } else if (action === "remove" && current.includes(id)) {
                current = current.remove(current.indexOf(id));
            }
            this.setState({ feedProducers: current });
            this._validateEditFields({ feedProducers: current });
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var asset = this.props.asset;
            var _state4 = this.state,
                errors = _state4.errors,
                isValid = _state4.isValid,
                update = _state4.update,
                core_exchange_rate = _state4.core_exchange_rate,
                flagBooleans = _state4.flagBooleans,
                permissionBooleans = _state4.permissionBooleans,
                claimFeesAmount = _state4.claimFeesAmount,
                isBitAsset = _state4.isBitAsset,
                bitasset_opts = _state4.bitasset_opts;

            // Estimate the asset update fee

            var symbol = asset.get("symbol");
            var updateFee = "N/A";

            updateFee = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedFee__WEBPACK_IMPORTED_MODULE_7__["default"], { opType: "asset_update" });

            var cr_quote_asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.quote.asset_id);
            var precision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(cr_quote_asset.get("precision"));
            var cr_base_asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(core_exchange_rate.base.asset_id);
            var basePrecision = common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].get_asset_precision(cr_base_asset.get("precision"));

            var cr_quote_amount = parseFloat(core_exchange_rate.quote.amount) * precision;
            var cr_base_amount = parseFloat(core_exchange_rate.base.amount) * basePrecision;
            var originalPermissions = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].getFlagBooleans(asset.getIn(["options", "issuer_permissions"]), asset.get("bitasset") !== undefined);
            // Loop over flags
            var flags = [];
            var getFlag = function getFlag(key, onClick, isChecked) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { key: "table_" + key, className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none", width: "80%" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                    content: "account.user_issued_assets." + key
                                }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { style: { border: "none", textAlign: "right" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_23__["Switch"], {
                                    checked: isChecked,
                                    onChange: onClick
                                })
                            )
                        )
                    )
                );
            };

            for (var key in originalPermissions) {
                if (originalPermissions[key] && key !== "charge_market_fee") {
                    flags.push(getFlag(key, this._onFlagChange.bind(this, key), flagBooleans[key]));
                }
            }

            flags.push(getFlag("visible", this._onUpdateDescription.bind(this, "visible"), update.description.visible ? false : update.description.visible === false ? true : false));

            // Loop over permissions
            var permissions = [];
            for (var _key in originalPermissions) {
                if (true) {
                    permissions.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "table",
                        { key: "table_" + _key, className: "table" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tbody",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { border: "none", width: "80%" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        content: "account.user_issued_assets." + _key
                                    }),
                                    ":"
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { border: "none" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_23__["Switch"], {
                                        checked: permissionBooleans[_key],
                                        onChange: this._onPermissionChange.bind(this, _key)
                                    })
                                )
                            )
                        )
                    ));
                }
            }

            var tabsChangedCount = 0;
            this.tabsChanged().forEach(function () {
                tabsChangedCount++;
            });

            var confirmButtons = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_2___default()("button", {
                            disabled: !isValid || !this.pageChanged()
                        }),
                        style: { width: "9rem" },
                        onClick: tabsChangedCount > 1 ? this._openConfirm.bind(this) : this._updateAsset.bind(this)
                    },
                    tabsChangedCount > 1 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.save_all" }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.save" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "button",
                    {
                        className: classnames__WEBPACK_IMPORTED_MODULE_2___default()("button primary hollow", {
                            disabled: !this.pageChanged()
                        }),
                        onClick: this._reset.bind(this)
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.perm.reset" })
                )
            );

            var cerValid = false;

            if ((cr_quote_asset.get("id") === "1.3.0" || cr_base_asset.get("id") === "1.3.0") && (cr_quote_asset.get("id") === asset.get("id") || cr_base_asset.get("id") === asset.get("id"))) {
                cerValid = true;
            }

            var isPredictionMarketAsset = asset.getIn(["bitasset", "is_prediction_market"]);

            var asset_description = common_asset_utils__WEBPACK_IMPORTED_MODULE_16__["default"].parseDescription(this.props.asset.toJS().options.description);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "tabs-header" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "h3",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "header.update_asset" }),
                                ":",
                                " ",
                                symbol
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tabs"],
                            {
                                setting: "updateAssetTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "grid-block padding-top shrink small-vertical medium-horizontal",
                                segmented: false,
                                actionButtons: confirmButtons,
                                onChangeTab: function onChangeTab(i) {
                                    _this3.setState({ activeTab: i });
                                }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.primary",
                                    updatedTab: this.tabChanged(0)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.precision" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "span",
                                            null,
                                            ": ",
                                            asset.get("precision")
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                            label: "account.user_issued_assets.max_supply",
                                            amount: update.max_supply,
                                            onChange: this._onUpdateInput.bind(this, "max_supply"),
                                            asset: asset.get("id"),
                                            assets: [asset.get("id")],
                                            placeholder: "0.0",
                                            tabIndex: 1
                                        })
                                    ),
                                    errors.max_supply ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.max_supply
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.core_exchange_rate"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "grid-block no-margin" },
                                            cerValid ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__["default"], {
                                                    label: "account.user_issued_assets.quote_name",
                                                    onChange: this._onInputCoreAsset.bind(this, "quote"),
                                                    asset: this.state.quoteAssetInput,
                                                    assetInput: this.state.quoteAssetInput,
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingRight: "10px"
                                                    },
                                                    onFound: this._onFoundCoreAsset.bind(this, "quote")
                                                })
                                            ),
                                            cerValid ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__["default"], {
                                                    label: "account.user_issued_assets.base_name",
                                                    onChange: this._onInputCoreAsset.bind(this, "base"),
                                                    asset: this.state.baseAssetInput,
                                                    assetInput: this.state.baseAssetInput,
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingLeft: "10px"
                                                    },
                                                    onFound: this._onFoundCoreAsset.bind(this, "base")
                                                })
                                            ),
                                            errors.quote_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.quote_asset
                                            ) : null,
                                            errors.base_asset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.base_asset
                                            ) : null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                                    label: "account.user_issued_assets.quote",
                                                    amount: core_exchange_rate.quote.amount,
                                                    onChange: this._onCoreRateChange.bind(this, "quote"),
                                                    asset: core_exchange_rate.quote.asset_id,
                                                    assets: [core_exchange_rate.quote.asset_id],
                                                    placeholder: "0.0",
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingRight: "10px"
                                                    }
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-block no-margin small-12 medium-6" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                                    label: "account.user_issued_assets.base",
                                                    amount: core_exchange_rate.base.amount,
                                                    onChange: this._onCoreRateChange.bind(this, "base"),
                                                    asset: core_exchange_rate.base.asset_id,
                                                    assets: [core_exchange_rate.base.asset_id],
                                                    placeholder: "0.0",
                                                    tabIndex: 1,
                                                    style: {
                                                        width: "100%",
                                                        paddingLeft: "10px"
                                                    }
                                                })
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "h5",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "exchange.price" }),
                                                ":",
                                                " ",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_13__["default"], {
                                                    style: { fontWeight: "bold" },
                                                    quote_amount: cr_quote_amount,
                                                    quote_asset: core_exchange_rate.quote.asset_id,
                                                    base_asset: core_exchange_rate.base.asset_id,
                                                    base_amount: cr_base_amount
                                                })
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_1",
                                            component: "label",
                                            className: "has-error"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            content: "account.user_issued_assets.cer_warning_2",
                                            component: "p"
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.whitelist.title",
                                    updatedTab: this.tabChanged(1)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    _AssetWhitelist__WEBPACK_IMPORTED_MODULE_20__["default"],
                                    {
                                        whiteListEnabled: flagBooleans["white_list"],
                                        marketFeeEnabled: flagBooleans["charge_market_fee"],
                                        whitelist_authorities: this.state.whitelist_authorities,
                                        blacklist_authorities: this.state.blacklist_authorities,
                                        whitelist_markets: this.state.whitelist_markets,
                                        whitelist_market_fee_sharing: this.state.whitelist_market_fee_sharing === undefined ? new immutable__WEBPACK_IMPORTED_MODULE_24___default.a.List([]) : this.state.whitelist_market_fee_sharing,
                                        blacklist_markets: this.state.blacklist_markets,
                                        new_authority_id: this.state.new_authority_id,
                                        authority_name: this.state.authority_name,
                                        onAccountNameChanged: this.onAccountNameChanged.bind(this),
                                        onAccountChanged: this.onAccountChanged.bind(this),
                                        onChangeList: this.onChangeList.bind(this)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.description",
                                    updatedTab: this.tabChanged(2)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                            style: { height: "7rem" },
                                            rows: "1",
                                            value: update.description.main || "",
                                            onChange: this._onUpdateDescription.bind(this, "main")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.short"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "text",
                                            rows: "1",
                                            value: update.description.short_name || "",
                                            onChange: this._onUpdateDescription.bind(this, "short_name")
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        component: "h3",
                                        content: "account.user_issued_assets.market"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_14__["default"], {
                                        label: "account.user_issued_assets.name",
                                        onChange: this._onInputMarket.bind(this),
                                        placeholder: asset_description.market,
                                        asset: this.state.marketInput,
                                        assetInput: this.state.marketInput,
                                        style: {
                                            width: "100%",
                                            paddingRight: "10px",
                                            paddingBottom: "20px"
                                        },
                                        onFound: this._onFoundMarketAsset.bind(this)
                                    }),
                                    errors.invalid_market_pair ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.invalid_market_pair
                                    ) : null,
                                    isPredictionMarketAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.condition"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "text",
                                                rows: "1",
                                                value: update.description.condition,
                                                onChange: this._onUpdateDescription.bind(this, "condition")
                                            })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                            component: "h3",
                                            content: "account.user_issued_assets.expiry"
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "label",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                type: "date",
                                                value: update.description.expiry,
                                                onChange: this._onUpdateDescription.bind(this, "expiry")
                                            })
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.bitasset_opts",
                                    updatedTab: this.tabChanged(3)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountAssetCreate__WEBPACK_IMPORTED_MODULE_18__["BitAssetOptions"], {
                                        bitasset_opts: bitasset_opts,
                                        onUpdate: this.onChangeBitAssetOpts.bind(this),
                                        backingAsset: bitasset_opts.short_backing_asset,
                                        assetPrecision: asset.get("precision"),
                                        assetSymbol: asset.get("symbol"),
                                        disableBackingAssetChange: this._getCurrentSupply() > 0,
                                        disabledBackingAssetChangeCallback: disabledBackingAssetChangeCallback
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ) : null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.permissions",
                                    updatedTab: this.tabChanged(4)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                        path: "components/AccountAssetCreate",
                                        section: "permissions"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.perm_warning" })
                                    ),
                                    permissions,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.flags",
                                    updatedTab: this.tabChanged(5)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "small-12 large-8 large-offset-2 grid-content" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                        path: "components/AccountAssetCreate",
                                        section: "flags"
                                    }),
                                    originalPermissions["charge_market_fee"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "h3",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                                component: "span",
                                                content: "account.user_issued_assets.market_fee",
                                                style: {
                                                    paddingRight: "20px"
                                                }
                                            }),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_23__["Switch"], {
                                                checked: flagBooleans.charge_market_fee,
                                                onChange: this._onFlagChange.bind(this, "charge_market_fee")
                                            })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_2___default()({
                                                    disabled: !flagBooleans.charge_market_fee
                                                }),
                                                style: {
                                                    marginTop: "10px",
                                                    marginLeft: "30px"
                                                }
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.market_fee" }),
                                                " ",
                                                "(%)",
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                    type: "number",
                                                    value: update.market_fee_percent,
                                                    onChange: this._onUpdateInput.bind(this, "market_fee_percent")
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "label",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelector__WEBPACK_IMPORTED_MODULE_12__["default"], {
                                                    label: "account.user_issued_assets.max_market_fee",
                                                    amount: update.max_market_fee,
                                                    onChange: this._onUpdateInput.bind(this, "max_market_fee"),
                                                    asset: asset.get("id"),
                                                    assets: [asset.get("id")],
                                                    placeholder: "0.0",
                                                    tabIndex: 1
                                                })
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "label",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_23__["Tooltip"],
                                                        {
                                                            title: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.user_issued_assets.reward_percent_tooltip")
                                                        },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.reward_percent" }),
                                                        " ",
                                                        "(%)"
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                                        type: "number",
                                                        value: update.reward_percent,
                                                        onChange: this._onUpdateInput.bind(this, "reward_percent")
                                                    })
                                                )
                                            ),
                                            errors.max_market_fee ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "p",
                                                { className: "grid-content has-error" },
                                                errors.max_market_fee
                                            ) : null
                                        )
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "h3",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.flags" })
                                    ),
                                    flags,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.approx_fee" }),
                                        ": ",
                                        updateFee
                                    ),
                                    errors.conflict_producer ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "grid-content has-error" },
                                        errors.conflict_producer
                                    ) : null
                                )
                            ),
                            isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tab"],
                                {
                                    title: "account.user_issued_assets.feed_producers",
                                    updatedTab: this.tabChanged(6)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AssetFeedProducers__WEBPACK_IMPORTED_MODULE_21__["default"], {
                                    asset: this.props.asset,
                                    account: this.props.account,
                                    witnessFed: flagBooleans["witness_fed_asset"],
                                    committeeFed: flagBooleans["committee_fed_asset"],
                                    producers: this.state.feedProducers,
                                    onChangeList: this.onChangeFeedProducerList.bind(this)
                                }),
                                errors.max_feed_producer ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "p",
                                    {
                                        className: "grid-content has-error large-8 large-offset-2",
                                        style: { marginTop: "20px" }
                                    },
                                    errors.max_feed_producer
                                ) : null
                            ) : null
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ConfirmModal, _extends({
                    visible: this.state.isAssetUpdateConfirmationModalVisible,
                    hideModal: this.hideAssetUpdateConfirmationModal,
                    showModal: this.showAssetUpdateConfirmationModal,
                    tabsChanged: this.tabsChanged(),
                    _cancelConfirm: this._cancelConfirm.bind(this),
                    _updateAsset: this._updateAsset.bind(this)
                }, this.props))
            );
        }
    }]);

    return AccountAssetUpdate;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountAssetUpdate.propTypes = {
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainObject.isRequired
};
AccountAssetUpdate.defaultProps = {
    globalObject: "2.0.0"
};

AccountAssetUpdate = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__["default"])(AccountAssetUpdate);
AccountAssetUpdate = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_11__["default"])(AccountAssetUpdate, {
    propNames: ["asset", "core"],
    defaultProps: {
        core: "1.3.0"
    },
    withDynamic: true
});

var ConfirmModal = function (_React$Component2) {
    _inherits(ConfirmModal, _React$Component2);

    function ConfirmModal() {
        _classCallCheck(this, ConfirmModal);

        return _possibleConstructorReturn(this, (ConfirmModal.__proto__ || Object.getPrototypeOf(ConfirmModal)).call(this));
    }

    _createClass(ConfirmModal, [{
        key: "render",
        value: function render() {
            var tabsChanged = this.props.tabsChanged;


            var footer = [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_23__["Button"],
                {
                    type: "primary",
                    key: "submit",
                    onClick: this.props._updateAsset
                },
                counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("global.confirm")
            ), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_23__["Button"],
                { key: "cancel", onClick: this.props.hideModal },
                counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("global.cancel")
            )];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_23__["Modal"],
                {
                    visible: this.props.visible,
                    footer: footer,
                    onCancel: this.props.hideModal,
                    title: counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.confirm_asset_modal.header")
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                    content: "account.confirm_asset_modal.are_you_sure",
                    component: "div",
                    style: { paddingBottom: "1rem" }
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "ul",
                        null,
                        tabsChanged["0"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.primary" })
                        ) : null,
                        tabsChanged["1"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.whitelist.title" })
                        ) : null,
                        tabsChanged["2"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.description" })
                        ) : null,
                        tabsChanged["3"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.bitasset_opts" })
                        ) : null,
                        tabsChanged["4"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.permissions" })
                        ) : null,
                        tabsChanged["5"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.flags" })
                        ) : null,
                        tabsChanged["6"] ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "li",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.user_issued_assets.feed_producers" })
                        ) : null
                    )
                )
            );
        }
    }]);

    return ConfirmModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var AssetUpdateWrapper = function (_React$Component3) {
    _inherits(AssetUpdateWrapper, _React$Component3);

    function AssetUpdateWrapper() {
        _classCallCheck(this, AssetUpdateWrapper);

        return _possibleConstructorReturn(this, (AssetUpdateWrapper.__proto__ || Object.getPrototypeOf(AssetUpdateWrapper)).apply(this, arguments));
    }

    _createClass(AssetUpdateWrapper, [{
        key: "render",
        value: function render() {
            var asset = this.props.match.params.asset.toUpperCase();
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountAssetUpdate, _extends({ asset: asset }, this.props));
        }
    }]);

    return AssetUpdateWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_22__["withRouter"])(AssetUpdateWrapper));

/***/ }),

/***/ 2932:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _FormattedAsset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2146);
/* harmony import */ var _ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2002);
/* harmony import */ var _BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2003);
/* harmony import */ var common_trxHelper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(597);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








/**
 *
 *  Given an operation type, displays the CORE fee for that operation
 *
 */

var FormattedFee = function (_React$Component) {
    _inherits(FormattedFee, _React$Component);

    function FormattedFee() {
        _classCallCheck(this, FormattedFee);

        return _possibleConstructorReturn(this, (FormattedFee.__proto__ || Object.getPrototypeOf(FormattedFee)).apply(this, arguments));
    }

    _createClass(FormattedFee, [{
        key: "getFee",
        value: function getFee() {
            // Return fee via refs
            return Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_5__["estimateFee"])(this.props.opType, this.props.options, this.props.globalObject);
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                opType = _props.opType,
                options = _props.options,
                globalObject = _props.globalObject;


            if (!opType || !options || !globalObject) {
                return null;
            }

            var amount = Object(common_trxHelper__WEBPACK_IMPORTED_MODULE_5__["estimateFee"])(opType, options, globalObject);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], { amount: amount, asset: "1.3.0" });
        }
    }]);

    return FormattedFee;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

FormattedFee.propTypes = {
    globalObject: _ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired,
    opType: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,
    options: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.array
};
FormattedFee.defaultProps = {
    globalObject: "2.0.0",
    options: []
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(FormattedFee));

/***/ }),

/***/ 2933:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2443);
/* harmony import */ var _Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2444);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1894);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2139);
/* harmony import */ var _Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2827);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1886);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(725);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(726);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }













var AssetWhitelist = function (_React$Component) {
    _inherits(AssetWhitelist, _React$Component);

    function AssetWhitelist(props) {
        _classCallCheck(this, AssetWhitelist);

        var _this = _possibleConstructorReturn(this, (AssetWhitelist.__proto__ || Object.getPrototypeOf(AssetWhitelist)).call(this));

        _this.state = {
            listType: props.assetWhiteListType,
            accountTable: props.assetWhiteListType.indexOf("markets") === -1,
            listTypes: ["whitelist_authorities", "blacklist_authorities", "whitelist_markets", "blacklist_markets", "whitelist_market_fee_sharing"],
            assetInput: null,
            asset_id: null
        };
        return _this;
    }

    _createClass(AssetWhitelist, [{
        key: "renderAccountTables",
        value: function renderAccountTables() {
            var _this2 = this;

            var listType = this.state.listType;


            var showFlagEnableError = false;
            var errorLabel = "explorer.asset.whitelist.enable_flag";

            if (listType === "whitelist_market_fee_sharing") {
                // market fee sharing whitelist
                if (!this.props.marketFeeEnabled) {
                    showFlagEnableError = true;
                    errorLabel = "explorer.asset.whitelist.market_fee_enable_flag";
                }
            } else {
                showFlagEnableError = !this.props.whiteListEnabled;
            }

            if (showFlagEnableError) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, {
                    className: "txtlabel cancel",
                    component: "p",
                    content: errorLabel
                })
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "explorer.account.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "account.perm.remove_text" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        this.props[listType].map(function (a) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                { key: a },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_1__["default"], { account: a })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    {
                                        className: "clickable",
                                        onClick: _this2.props.onChangeList.bind(_this2, listType, "remove", a)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                        name: "cross-circle",
                                        title: "icons.cross_circle.remove",
                                        className: "icon-14px"
                                    })
                                )
                            );
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        label: "account.whitelist." + listType,
                        accountName: this.props.authority_name,
                        account: this.props.authority_name,
                        onChange: this.props.onAccountNameChanged.bind(this, "authority_name"),
                        onAccountChanged: this.props.onAccountChanged.bind(this, "new_authority_id"),
                        error: null,
                        tabIndex: 1,
                        action_label: "account.perm.confirm_add",
                        onAction: this.props.onChangeList.bind(this, listType, "add", this.props.new_authority_id)
                    })
                )
            );
        }
    }, {
        key: "_onAssetChange",
        value: function _onAssetChange(asset) {
            this.setState({
                assetInput: asset
            });
        }
    }, {
        key: "_onAssetFound",
        value: function _onAssetFound(asset) {
            this.setState({
                asset_id: asset ? asset.get("id") : null
            });
        }
    }, {
        key: "renderMarketTable",
        value: function renderMarketTable() {
            var _this3 = this;

            var listType = this.state.listType;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "explorer.asset.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, { content: "account.perm.remove_text" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        this.props[listType].map(function (a) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                { key: a },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_2__["default"], { asset: a })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    {
                                        className: "clickable",
                                        onClick: _this3.props.onChangeList.bind(_this3, listType, "remove", a)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_3__["default"], {
                                        name: "cross-circle",
                                        title: "icons.cross_circle.remove",
                                        className: "icon-14px"
                                    })
                                )
                            );
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetSelector__WEBPACK_IMPORTED_MODULE_5__["default"], {
                        label: "explorer.asset.whitelist." + listType,
                        onChange: this._onAssetChange.bind(this),
                        asset: this.state.assetInput,
                        assetInput: this.state.assetInput,
                        tabIndex: 1,
                        style: { width: "100%" },
                        onFound: this._onAssetFound.bind(this),
                        action_label: "account.perm.confirm_add",
                        onAction: this.props.onChangeList.bind(this, listType, "add", this.state.asset_id)
                    })
                )
            );
        }
    }, {
        key: "_onSwitchType",
        value: function _onSwitchType(type) {
            this.setState({
                listType: type,
                accountTable: type.indexOf("markets") === -1
            });
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeViewSetting({
                assetWhiteListType: type
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var _state = this.state,
                accountTable = _state.accountTable,
                listType = _state.listType;

            var activeIndex = this.state.listTypes.indexOf(this.state.listType);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "small-12 large-8 large-offset-2 grid-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            className: "header-selector",
                            style: { paddingBottom: "2rem" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "selector" },
                            this.state.listTypes.map(function (type, index) {
                                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        key: type,
                                        className: classnames__WEBPACK_IMPORTED_MODULE_6___default()("inline-block", {
                                            inactive: activeIndex !== index
                                        }),
                                        onClick: _this4._onSwitchType.bind(_this4, type)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_7___default.a, {
                                        content: "explorer.asset.whitelist." + type
                                    })
                                );
                            })
                        )
                    ),
                    accountTable ? this.renderAccountTables() : this.renderMarketTable(),
                    this.props.children
                )
            );
        }
    }]);

    return AssetWhitelist;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(alt_react__WEBPACK_IMPORTED_MODULE_8__["connect"])(AssetWhitelist, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__["default"]];
    },
    getProps: function getProps() {
        return {
            assetWhiteListType: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__["default"].getState().viewSettings.get("assetWhiteListType", "whitelist_authorities")
        };
    }
}));

/***/ }),

/***/ 2934:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2391);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2139);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2443);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1894);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








var AccountFeedProducers = function (_React$Component) {
    _inherits(AccountFeedProducers, _React$Component);

    function AccountFeedProducers(props) {
        _classCallCheck(this, AccountFeedProducers);

        var _this = _possibleConstructorReturn(this, (AccountFeedProducers.__proto__ || Object.getPrototypeOf(AccountFeedProducers)).call(this, props));

        _this.state = {
            producer_name: null
        };
        return _this;
    }

    _createClass(AccountFeedProducers, [{
        key: "onAccountChanged",
        value: function onAccountChanged(account) {
            this.setState({
                new_producer_id: account ? account.get("id") : null
            });
        }
    }, {
        key: "onAccountNameChanged",
        value: function onAccountNameChanged(name) {
            this.setState({
                producer_name: name
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var _props = this.props,
                witnessFed = _props.witnessFed,
                committeeFed = _props.committeeFed;


            if (witnessFed || committeeFed) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-content small-12 large-8 large-offset-2" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                        component: "p",
                        content: "account.user_issued_assets.feed_not_allowed_1",
                        className: "has-error"
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, {
                        component: "p",
                        content: "account.user_issued_assets.feed_not_allowed_2"
                    })
                );
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content small-12 large-8 large-offset-2" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table dashboard-table table-hover" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                { style: { textAlign: "left" } },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.account.title" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "account.perm.remove_text" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        this.props.producers.map(function (a, i) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                { key: a },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { textAlign: "left" } },
                                    "#",
                                    i + 1
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    { style: { textAlign: "left" } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_3__["default"], { account: a })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "td",
                                    {
                                        className: "clickable",
                                        onClick: _this2.props.onChangeList.bind(_this2, "remove", a)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                        name: "cross-circle",
                                        title: "icons.cross_circle.remove",
                                        className: "icon-14px"
                                    })
                                )
                            );
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        label: "account.user_issued_assets.add_feed",
                        accountName: this.state.producer_name,
                        account: this.state.producer_name,
                        onChange: this.onAccountNameChanged.bind(this),
                        onAccountChanged: this.onAccountChanged.bind(this),
                        error: null,
                        tabIndex: 1,
                        action_label: "account.perm.confirm_add",
                        onAction: this.props.onChangeList.bind(this, "add", this.state.new_producer_id)
                    })
                )
            );
        }
    }]);

    return AccountFeedProducers;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountFeedProducers);

/***/ }),

/***/ 2935:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1846);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(420);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2003);
/* harmony import */ var _Statistics__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2936);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(569);
/* harmony import */ var _Utility_TimeAgo__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2552);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2163);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(570);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2929);
/* harmony import */ var branding__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(585);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _AccountReferralsTable__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2937);
/* harmony import */ var _api_apiConfig__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(731);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }



















var AccountMembership = function (_React$Component) {
    _inherits(AccountMembership, _React$Component);

    function AccountMembership(prop) {
        _classCallCheck(this, AccountMembership);

        return _possibleConstructorReturn(this, (AccountMembership.__proto__ || Object.getPrototypeOf(AccountMembership)).call(this, prop));
    }

    _createClass(AccountMembership, [{
        key: "upgradeAccount",
        value: function upgradeAccount(id, lifetime, e) {
            e.preventDefault();
            actions_AccountActions__WEBPACK_IMPORTED_MODULE_7__["default"].upgradeAccount(id, lifetime);
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            common_account_utils__WEBPACK_IMPORTED_MODULE_10__["default"].getFinalFeeAsset(this.props.account, "account_upgrade");
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.account !== this.props.account) {
                this.setState({ referralsIndex: [] });
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                gprops = _props.gprops,
                dprops = _props.dprops,
                core_asset = _props.core_asset;


            var account = this.props.account.toJS();

            var ltr = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccount(account.lifetime_referrer, false);
            if (ltr) account.lifetime_referrer_name = ltr.get("name");
            var ref = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccount(account.referrer, false);
            if (ref) account.referrer_name = ref.get("name");
            var reg = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccount(account.registrar, false);
            if (reg) account.registrar_name = reg.get("name");

            var account_name = account.name;

            var network_fee = account.network_fee_percentage / 100;
            var lifetime_fee = account.lifetime_referrer_fee_percentage / 100;
            var referrer_total_fee = 100 - network_fee - lifetime_fee;
            var referrer_fee = referrer_total_fee * account.referrer_rewards_percentage / 10000;
            var registrar_fee = 100 - referrer_fee - lifetime_fee - network_fee;

            var lifetime_cost = gprops.getIn(["parameters", "current_fees", "parameters", 8, 1, "membership_lifetime_fee"]) * gprops.getIn(["parameters", "current_fees", "scale"]) / 10000;

            var member_status = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAccountMemberStatus(this.props.account);
            var membership = "account.member." + member_status;
            var expiration = null;
            if (member_status === "annual") expiration = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                "(",
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.expires" }),
                " ",
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TimeAgo__WEBPACK_IMPORTED_MODULE_8__["default"], { time: account.membership_expiration_date }),
                ")"
            );
            var expiration_date = account.membership_expiration_date;
            if (expiration_date === "1969-12-31T23:59:59") expiration_date = "Never";else if (expiration_date === "1970-01-01T00:00:00") expiration_date = "N/A";

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tabs"],
                            {
                                segmented: false,
                                setting: "membershipTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_11__["Tab"],
                                { title: "account.member.membership" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "h3",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: membership }),
                                    " ",
                                    expiration
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block no-margin" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "no-margin grid-block vertical large-horizontal" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "grid-block large-12" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-content" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    { className: "grid-content" },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "div",
                                                        { className: "grid-block" },
                                                        member_status === "lifetime" ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "div",
                                                            {
                                                                className: "small-12 large-6",
                                                                style: {
                                                                    paddingRight: 10
                                                                }
                                                            },
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "div",
                                                                { className: "asset-card" },
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    "div",
                                                                    { className: "card-divider" },
                                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.lifetime_title" })
                                                                ),
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                                                    component: "p",
                                                                    content: "account.member.referral_info",
                                                                    feesCashback: 100 - network_fee
                                                                }),
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                                                    component: "h4",
                                                                    content: "account.member.referral_link"
                                                                }),
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                                                    component: "p",
                                                                    content: "account.member.referral_text",
                                                                    wallet_name: Object(branding__WEBPACK_IMPORTED_MODULE_12__["getWalletName"])()
                                                                }),
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    "h5",
                                                                    null,
                                                                    Object(branding__WEBPACK_IMPORTED_MODULE_12__["getWalletURL"])() + ("/?r=" + account.name)
                                                                )
                                                            )
                                                        ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "div",
                                                            {
                                                                className: "small-12 large-6",
                                                                style: {
                                                                    paddingRight: "10px !important"
                                                                }
                                                            },
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_9__["default"], {
                                                                path: "components/AccountMembership",
                                                                section: "lifetime",
                                                                feesCashback: 100 - network_fee,
                                                                price: {
                                                                    amount: lifetime_cost,
                                                                    asset: core_asset
                                                                }
                                                            }),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Button"],
                                                                {
                                                                    type: "primary",
                                                                    onClick: this.upgradeAccount.bind(this, account.id, true)
                                                                },
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.upgrade_lifetime" })
                                                            ),
                                                            " ",
                                                            "\xA0 \xA0",
                                                             true ? null : undefined
                                                        ),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "div",
                                                            { className: "small-12 large-6" },
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "div",
                                                                { className: "asset-card" },
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    "div",
                                                                    { className: "card-divider" },
                                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.fee_allocation" })
                                                                ),
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    "table",
                                                                    { className: "table key-value-table" },
                                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                        "tbody",
                                                                        null,
                                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                            "tr",
                                                                            null,
                                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                                "td",
                                                                                null,
                                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.network_percentage" })
                                                                            ),
                                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                                "td",
                                                                                null,
                                                                                network_fee,
                                                                                "%"
                                                                            )
                                                                        ),
                                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                            "tr",
                                                                            null,
                                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                                "td",
                                                                                null,
                                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.lifetime_referrer" }),
                                                                                " ",
                                                                                "\xA0 (",
                                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                                                                                    {
                                                                                        to: "/account/" + account.lifetime_referrer_name
                                                                                    },
                                                                                    account.lifetime_referrer_name
                                                                                ),
                                                                                ")"
                                                                            ),
                                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                                "td",
                                                                                null,
                                                                                lifetime_fee,
                                                                                "%"
                                                                            )
                                                                        ),
                                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                            "tr",
                                                                            null,
                                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                                "td",
                                                                                null,
                                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.registrar" }),
                                                                                " ",
                                                                                "\xA0 (",
                                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                                                                                    {
                                                                                        to: "/account/" + account.registrar_name
                                                                                    },
                                                                                    account.registrar_name
                                                                                ),
                                                                                ")"
                                                                            ),
                                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                                "td",
                                                                                null,
                                                                                registrar_fee,
                                                                                "%"
                                                                            )
                                                                        ),
                                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                            "tr",
                                                                            null,
                                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                                "td",
                                                                                null,
                                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.referrer" }),
                                                                                " ",
                                                                                "\xA0 (",
                                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                                                                                    {
                                                                                        to: "/account/" + account.referrer_name
                                                                                    },
                                                                                    account.referrer_name
                                                                                ),
                                                                                ")"
                                                                            ),
                                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                                "td",
                                                                                null,
                                                                                referrer_fee,
                                                                                "%"
                                                                            )
                                                                        ),
                                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                            "tr",
                                                                            null,
                                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                                "td",
                                                                                null,
                                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.membership_expiration" }),
                                                                                " "
                                                                            ),
                                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                                "td",
                                                                                null,
                                                                                expiration_date
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "div",
                                                                { className: "asset-card" },
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    "div",
                                                                    { className: "card-divider" },
                                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.fees_cashback" })
                                                                ),
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    "table",
                                                                    { className: "table key-value-table" },
                                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Statistics__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                                                        stat_object: account.statistics
                                                                    })
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "grid-block large-12" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                { className: "grid-content" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "div",
                                                    { className: "grid-content" },
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "div",
                                                        { className: "grid-block" },
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "div",
                                                            { className: "small-12 large-6" },
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "div",
                                                                { className: "asset-card" },
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    "div",
                                                                    { className: "card-divider" },
                                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.fee_pending" })
                                                                ),
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                                                    component: "p",
                                                                    content: "account.member.fee_pending_text",
                                                                    account: account_name,
                                                                    maintenanceInterval: gprops.getIn(["parameters", "maintenance_interval"]),
                                                                    nextMaintenanceTime: dprops.get("next_maintenance_time")
                                                                })
                                                            ),
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "div",
                                                                { className: "asset-card" },
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    "div",
                                                                    { className: "card-divider" },
                                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.fee_vesting" })
                                                                ),
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                                                    component: "p",
                                                                    content: "account.member.fee_vesting_text",
                                                                    account: account_name,
                                                                    vestingThresholdAmount: gprops.getIn(["parameters", "cashback_vesting_threshold"]) / Math.pow(10, core_asset.get("precision")),
                                                                    vestingThresholdAsset: core_asset.get("symbol"),
                                                                    vestingPeriod: gprops.getIn(["parameters", "cashback_vesting_period_seconds"]) / 60 / 60 / 24
                                                                })
                                                            )
                                                        ),
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "div",
                                                            { className: "small-12 large-6" },
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                "div",
                                                                { className: "asset-card" },
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    "div",
                                                                    { className: "card-divider" },
                                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.fee_division" })
                                                                ),
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                                                    component: "p",
                                                                    content: "account.member.fee_division_text.paragraph_1",
                                                                    account: account_name,
                                                                    fee_share_network: network_fee,
                                                                    fee_share_ltm: lifetime_fee,
                                                                    fee_share_affiliate: referrer_fee,
                                                                    fee_share_registrar: registrar_fee
                                                                }),
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                                                    component: "p",
                                                                    content: "account.member.fee_division_text.paragraph_2",
                                                                    account: account_name,
                                                                    fee_share_network: network_fee,
                                                                    fee_share_ltm: lifetime_fee,
                                                                    fee_share_affiliate: referrer_fee,
                                                                    fee_share_registrar: registrar_fee
                                                                }),
                                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                                                                    {
                                                                        to: "/account/" + account_name + "/vesting"
                                                                    },
                                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                                                        component: "p",
                                                                        content: "account.member.fee_division_text.paragraph_3"
                                                                    })
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                ),
                                member_status == "lifetime" && _api_apiConfig__WEBPACK_IMPORTED_MODULE_15__["settingsAPIs"].ES_WRAPPER_LIST.length > 0 ? // fixme access to ES could be wrapped in a store or something else
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "asset-card" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "card-divider" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.member.ref_distribution" })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountReferralsTable__WEBPACK_IMPORTED_MODULE_14__["default"], {
                                        account: account_name
                                    })
                                ) : null
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountMembership;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountMembership.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccount.isRequired,
    gprops: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainObject.isRequired,
    dprops: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainObject.isRequired,
    core_asset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAsset.isRequired
};
AccountMembership.defaultProps = {
    gprops: "2.0.0",
    dprops: "2.1.0",
    core_asset: "1.3.0"
};

AccountMembership = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(AccountMembership);

/* harmony default export */ __webpack_exports__["default"] = (AccountMembership);

/***/ }),

/***/ 2936:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2146);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2003);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }







var Statistics = function (_React$Component) {
    _inherits(Statistics, _React$Component);

    function Statistics() {
        _classCallCheck(this, Statistics);

        return _possibleConstructorReturn(this, (Statistics.__proto__ || Object.getPrototypeOf(Statistics)).apply(this, arguments));
    }

    _createClass(Statistics, [{
        key: "render",
        value: function render() {
            var stat_object = this.props.stat_object.toJS();

            return this.props.plainText ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], {
                amount: parseFloat(stat_object.lifetime_fees_paid),
                asset: "1.3.0"
            }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tbody",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.fees_paid" }),
                        " "
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], {
                            amount: parseFloat(stat_object.lifetime_fees_paid),
                            asset: "1.3.0"
                        })
                    )
                )
            );
        }
    }]);

    return Statistics;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

Statistics.propTypes = {
    stat_object: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(Statistics));

/***/ }),

/***/ 2937:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1886);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1846);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(420);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2002);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(553);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2003);
/* harmony import */ var _Statistics__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2936);
/* harmony import */ var _Utility_TimeAgo__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2552);
/* harmony import */ var api_apiConfig__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(731);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }














var AccountReferralsTable = function (_React$Component) {
    _inherits(AccountReferralsTable, _React$Component);

    function AccountReferralsTable(prop) {
        _classCallCheck(this, AccountReferralsTable);

        var _this = _possibleConstructorReturn(this, (AccountReferralsTable.__proto__ || Object.getPrototypeOf(AccountReferralsTable)).call(this, prop));

        _this.state = {
            referralsIndex: [],
            referralsCount: null,
            errorLoading: null
        };
        return _this;
    }

    _createClass(AccountReferralsTable, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            this._getReferrals(0, true);
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate(nextProps, nextState) {
            if (nextProps.account !== this.props.account) {
                this._getReferrals(0, true);
            }
        }
    }, {
        key: "_getReferrals",
        value: function () {
            var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
                var _this2 = this;

                var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
                var isAccountChanged = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

                var _props, myHiddenAccounts, myActiveAccounts, _state, referralsIndex, referralsCount, esNode, referralsCountResponse, referralsIndexResponse, results, objectsToFetch;

                return regeneratorRuntime.wrap(function _callee$(_context) {
                    while (1) {
                        switch (_context.prev = _context.next) {
                            case 0:
                                _props = this.props, myHiddenAccounts = _props.myHiddenAccounts, myActiveAccounts = _props.myActiveAccounts;
                                _state = this.state, referralsIndex = _state.referralsIndex, referralsCount = _state.referralsCount;

                                if (!(api_apiConfig__WEBPACK_IMPORTED_MODULE_10__["settingsAPIs"].ES_WRAPPER_LIST.length == 0)) {
                                    _context.next = 4;
                                    break;
                                }

                                return _context.abrupt("return");

                            case 4:

                                // fixme access to ES could be wrapped in a store or something else
                                esNode = api_apiConfig__WEBPACK_IMPORTED_MODULE_10__["settingsAPIs"].ES_WRAPPER_LIST[3].url;


                                if (isAccountChanged) {
                                    referralsCount = null;
                                    referralsIndex = [];
                                }

                                _context.prev = 6;

                                if (referralsCount) {
                                    _context.next = 19;
                                    break;
                                }

                                _context.next = 10;
                                return fetch(esNode + "/referrer_count?account_id=" + this.props.account.get("id"));

                            case 10:
                                referralsCountResponse = _context.sent;

                                if (referralsCountResponse.ok) {
                                    _context.next = 13;
                                    break;
                                }

                                throw new Error("Could not reach referrer_count endpoint on ES wrapper" + esNode);

                            case 13:
                                _context.t0 = this;
                                _context.next = 16;
                                return referralsCountResponse.json();

                            case 16:
                                _context.t1 = _context.sent;
                                _context.t2 = {
                                    referralsCount: _context.t1
                                };

                                _context.t0.setState.call(_context.t0, _context.t2);

                            case 19:
                                _context.next = 21;
                                return fetch(esNode + "/all_referrers?account_id=" + this.props.account.get("id") + "&page=" + page);

                            case 21:
                                referralsIndexResponse = _context.sent;

                                if (referralsIndexResponse.ok) {
                                    _context.next = 24;
                                    break;
                                }

                                throw new Error("Could not reach all_referrers endpoint on ES wrapper" + esNode);

                            case 24:
                                _context.next = 26;
                                return referralsIndexResponse.json();

                            case 26:
                                results = _context.sent;
                                objectsToFetch = [];

                                results.map(function (ref) {
                                    objectsToFetch.push(ref.account_id);
                                });
                                // Fetch Account Data
                                // console.log("Fetch Chain", objectsToFetch);
                                objectsToFetch.forEach(function (id_to_fetch) {
                                    Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["FetchChain"])("getAccount", id_to_fetch).then(function (account) {
                                        account = account.toJS();

                                        var network_fee = account.network_fee_percentage / 100;
                                        var lifetime_fee = account.lifetime_referrer_fee_percentage / 100;
                                        var referrer_total_fee = 100 - network_fee - lifetime_fee;
                                        var referrer_fee = referrer_total_fee * account.referrer_rewards_percentage / 10000;
                                        var registrar_fee = 100 - referrer_fee - lifetime_fee - network_fee;

                                        referralsIndex.push({
                                            id: account.id,
                                            name: account.name,
                                            lifetime_ref: {
                                                name: account.lifetime_referrer_name,
                                                value: lifetime_fee
                                            },
                                            registrar_ref: {
                                                name: account.registrar_name,
                                                value: registrar_fee
                                            },
                                            affiliate_ref: {
                                                name: account.referrer_name,
                                                value: referrer_fee
                                            },
                                            network: network_fee,
                                            statistics: account.statistics,
                                            membership_expiration: null
                                        });
                                        _this2.setState({
                                            referralsIndex: referralsIndex
                                        });
                                    });
                                });
                                _context.next = 36;
                                break;

                            case 32:
                                _context.prev = 32;
                                _context.t3 = _context["catch"](6);

                                console.error(_context.t3);
                                this.setState({
                                    errorLoading: true
                                });

                            case 36:
                            case "end":
                                return _context.stop();
                        }
                    }
                }, _callee, this, [[6, 32]]);
            }));

            function _getReferrals() {
                return _ref.apply(this, arguments);
            }

            return _getReferrals;
        }()
    }, {
        key: "onPaginationChange",
        value: function onPaginationChange(page) {
            this._getReferrals(page - 1);
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            // fixme access to ES could be wrapped in a store or something else
            if (api_apiConfig__WEBPACK_IMPORTED_MODULE_10__["settingsAPIs"].ES_WRAPPER_LIST.length == 0) return null;

            var account = this.props.account.toJS();

            var ltr = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAccount(account.lifetime_referrer, false);
            if (ltr) account.lifetime_referrer_name = ltr.get("name");
            var ref = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAccount(account.referrer, false);
            if (ref) account.referrer_name = ref.get("name");
            var reg = bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["ChainStore"].getAccount(account.registrar, false);
            if (reg) account.registrar_name = reg.get("name");

            var refData = this.state.referralsIndex;

            var refColumns = [{
                key: "name",
                title: "Name",
                render: function render(dataItem) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"],
                            { to: "/account/" + dataItem.name },
                            dataItem.name
                        )
                    );
                }
            }, {
                key: "statistics",
                title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.member.fees_paid" }),
                render: function render(dataItem) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Statistics__WEBPACK_IMPORTED_MODULE_8__["default"], {
                        plainText: true,
                        stat_object: dataItem.statistics
                    });
                }
            }, {
                key: "network",
                title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.member.network_percentage" }),
                render: function render(dataItem) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        null,
                        dataItem.network,
                        "%"
                    );
                }
            }, {
                key: "lifetime_ref",
                title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.member.lifetime_referrer" }),
                render: function render(dataItem) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        null,
                        dataItem.lifetime_ref.value,
                        "% (",
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"],
                            { to: "/account/" + dataItem.lifetime_ref.name },
                            dataItem.lifetime_ref.name
                        ),
                        ")"
                    );
                }
            }, {
                key: "registrar_ref",
                title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.member.registrar" }),
                render: function render(dataItem) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        null,
                        dataItem.registrar_ref.value,
                        "% (",
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"],
                            {
                                to: "/account/" + dataItem.registrar_ref.name
                            },
                            dataItem.registrar_ref.name
                        ),
                        ")"
                    );
                }
            }, {
                key: "affiliate_ref",
                title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.member.referrer" }),
                render: function render(dataItem) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        null,
                        dataItem.affiliate_ref.value,
                        "% (",
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"],
                            {
                                to: "/account/" + dataItem.affiliate_ref.name
                            },
                            dataItem.affiliate_ref.name
                        ),
                        ")"
                    );
                }
            }];
            if (this.state.errorLoading) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "errors.loading_from_es" });
            }
            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__["Table"], {
                rowKey: "accountReferrals",
                columns: refColumns,
                dataSource: refData,
                pagination: {
                    pageSize: Number(20),
                    total: this.state.referralsCount <= this.state.referralsIndex.length ? this.state.referralsIndex.length : this.state.referralsIndex.length + 20,
                    onChange: this.onPaginationChange.bind(this),
                    showTotal: function showTotal() {
                        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                            content: "account.member.total_ref",
                            total: _this3.state.referralsCount
                        });
                    }
                }
            });
        }
    }]);

    return AccountReferralsTable;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

AccountReferralsTable.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAccount.isRequired,
    gprops: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainObject.isRequired,
    dprops: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainObject.isRequired,
    core_asset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAsset.isRequired
};
AccountReferralsTable.defaultProps = {
    gprops: "2.0.0",
    dprops: "2.1.0",
    core_asset: "1.3.0"
};


AccountReferralsTable = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(AccountReferralsTable);

AccountReferralsTable = Object(alt_react__WEBPACK_IMPORTED_MODULE_0__["connect"])(AccountReferralsTable, {
    listenTo: function listenTo() {
        return [stores_AccountStore__WEBPACK_IMPORTED_MODULE_6__["default"]];
    },
    getProps: function getProps() {
        return {
            myActiveAccounts: stores_AccountStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().myActiveAccounts,
            myHiddenAccounts: stores_AccountStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().myHiddenAccounts
        };
    }
});

/* harmony default export */ __webpack_exports__["default"] = (AccountReferralsTable);

/***/ }),

/***/ 2938:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2146);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(420);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(571);
/* harmony import */ var actions_WalletActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1842);
/* harmony import */ var bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(489);
/* harmony import */ var bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var components_Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2916);
/* harmony import */ var _Utility_SearchInput__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2830);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_10__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }













var AccountVesting = function (_React$Component) {
    _inherits(AccountVesting, _React$Component);

    function AccountVesting(props) {
        _classCallCheck(this, AccountVesting);

        var _this = _possibleConstructorReturn(this, (AccountVesting.__proto__ || Object.getPrototypeOf(AccountVesting)).call(this, props));

        _this.state = {
            vesting_balances: [],
            searchTerm: "",
            loading: false,
            error: false
        };

        _this.onSearch = _this.onSearch.bind(_this);
        _this.retrieveVestingBalances = _this.retrieveVestingBalances.bind(_this);
        return _this;
    }

    _createClass(AccountVesting, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this.retrieveVestingBalances.call(this, this.props.account.get("id"));
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate(prevProps) {
            var oldId = prevProps.account.get("id");
            var newId = this.props.account.get("id");

            if (newId !== oldId) {
                this.retrieveVestingBalances.call(this, newId);
            }
        }
    }, {
        key: "retrieveVestingBalances",
        value: function retrieveVestingBalances(accountId) {
            var _this2 = this;

            this.setState({
                loading: true
            });
            accountId = accountId || this.props.account.get("id");
            bitsharesjs_ws__WEBPACK_IMPORTED_MODULE_6__["Apis"].instance().db_api().exec("get_vesting_balances", [accountId]).then(function (vesting_balances) {
                _this2.mapVestingBalances(vesting_balances);
                _this2.setState({
                    loading: false
                });
            }).catch(function (err) {
                console.log("error:", err);
                _this2.setState({
                    loading: false,
                    error: true
                });
            });
        }
    }, {
        key: "mapVestingBalances",
        value: function mapVestingBalances(vb) {
            if (!vb) {
                return null;
            }
            var vesting_balances = vb.filter(function (item) {
                return item.balance.amount && item.balance.asset_id;
            });
            vesting_balances = vesting_balances.map(function (item) {
                var cvbAsset = void 0,
                    balance = void 0,
                    available_percentage = 0,
                    days_earned = 0,
                    days_required = 0,
                    days_remaining = 0,
                    isCoinDays = true,
                    canClaim = true;

                if (item) {
                    balance = item.balance.amount;
                    cvbAsset = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getAsset(item.balance.asset_id);

                    if (item.policy && item.policy[0] !== 2) {
                        var start = Math.floor(new Date(item.policy[1].start_claim + "Z").getTime() / 1000);
                        var now = Math.floor(new Date().getTime() / 1000);

                        if (start > 0) {
                            // Vesting has a specific start date.
                            // Vesting with locked value required to mautre fully before claiming
                            // Full vesting period must pass before it can be claimed.
                            // Calculate days left before a claim is possible
                            // Example asset is BRIDGE.BCO - 1.3.1564

                            isCoinDays = false;

                            var seconds_earned = now - start;
                            var seconds_period = item.policy[1].vesting_seconds;

                            if (seconds_earned < seconds_period) {
                                canClaim = false;
                                days_earned = parseFloat(seconds_earned / 86400).toFixed(2);
                                days_required = parseFloat(seconds_period / 86400).toFixed(2);
                                days_remaining = (days_required - days_earned).toFixed(2);
                                available_percentage = 0;
                            } else {
                                available_percentage = 1;
                            }
                        } else {
                            // Vesting has no start time.
                            // Vesting balances has a vesting with maturing value
                            // If period is 0 we expect a 100% claimable balance
                            // otherwise we expect to be allowed to claim the matured percentage.

                            // Core is lazy calculating the vesting balance object, so we
                            // need to account for the time passed since it was last updated
                            var seconds_last_updated = Math.floor(new Date(item.policy[1].coin_seconds_earned_last_update + "Z").getTime() / 1000);
                            var _seconds_earned = parseFloat(item.policy[1].coin_seconds_earned) + balance * (now - seconds_last_updated);
                            var _seconds_period = item.policy[1].vesting_seconds;

                            available_percentage = _seconds_period === 0 ? 1 : _seconds_earned / (_seconds_period * balance);
                            // Make sure we don't go over 1
                            available_percentage = available_percentage > 1 ? 1 : available_percentage;

                            days_earned = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_amount(_seconds_earned / 86400, cvbAsset), 0);
                            days_required = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_amount(item.balance.amount * _seconds_period / 86400, cvbAsset), 0);
                            days_remaining = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].format_number(_seconds_period * (1 - available_percentage) / 86400 || 0, 2);
                        }
                    } else {
                        if (canClaim) {
                            available_percentage = 1;
                        }
                    }
                }
                return {
                    key: item.id,
                    vestingId: item.id,
                    vestingType: item.balance_type,
                    vestingBalance: {
                        amount: item.balance.amount,
                        asset: item.balance.asset_id
                    },
                    coinDaysRequired: {
                        days_required: days_required,
                        isCoinDays: isCoinDays
                    },
                    coinDaysEarned: {
                        days_earned: days_earned,
                        isCoinDays: isCoinDays
                    },
                    coinDaysRemaining: {
                        days_remaining: days_remaining,
                        isCoinDays: isCoinDays
                    },
                    availablePercent: available_percentage,
                    canClaim: canClaim,
                    vb: item
                };
            });
            this.setState({ vesting_balances: vesting_balances });
        }
    }, {
        key: "getHeader",
        value: function getHeader() {
            var _this3 = this;

            return [{
                title: "#",
                dataIndex: "vestingId",
                align: "left",
                defaultSortOrder: "ascend",
                sorter: function sorter(a, b) {
                    return a.vestingId > b.vestingId ? 1 : a.vestingId < b.vestingId ? -1 : 0;
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.balance_type" }),
                dataIndex: "vestingType",
                align: "left",
                sorter: function sorter(a, b) {
                    return a.vestingType > b.vestingType ? 1 : a.vestingType < b.vestingType ? -1 : 0;
                },
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                            content: "account.vesting.type." + item
                        })
                    );
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.cashback" }),
                dataIndex: "vestingBalance",
                align: "left",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        amount: item.amount,
                        asset: item.asset
                    });
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.required" }),
                dataIndex: "coinDaysRequired",
                align: "left",
                render: function render(item) {
                    return item.days_required ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        null,
                        item.days_required,
                        "\xA0",
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                            content: item.isCoinDays ? "account.member.coindays" : "account.member.days"
                        })
                    ) : null;
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.earned" }),
                dataIndex: "coinDaysEarned",
                align: "left",
                render: function render(item) {
                    return item.days_earned ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        null,
                        item.days_earned,
                        "\xA0",
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                            content: item.isCoinDays ? "account.member.coindays" : "account.member.days"
                        })
                    ) : null;
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.remaining" }),
                dataIndex: "coinDaysRemaining",
                align: "left",
                render: function render(item) {
                    return item.days_remaining ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        null,
                        item.days_remaining,
                        "\xA0",
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.days" })
                    ) : null;
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.available" }),
                dataIndex: "availablePercent",
                align: "left",
                render: function render(item) {
                    return item ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        null,
                        (item * 100).toFixed(2),
                        "%"
                    ) : null;
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.action" }),
                align: "center",
                render: function render(item) {
                    return item.canClaim ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_7__["Button"],
                        {
                            onClick: function onClick() {
                                return _this3.onClaim(item);
                            },
                            type: "secondary"
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.member.claim" })
                    ) : null;
                }
            }];
        }
    }, {
        key: "onClaim",
        value: function onClaim(_ref) {
            var _this4 = this;

            var vb = _ref.vb;

            var account_id = this.props.account.get("id");
            actions_WalletActions__WEBPACK_IMPORTED_MODULE_5__["default"].claimVestingBalance(account_id, vb, false).then(function () {
                _this4.retrieveVestingBalances();
            });
        }
    }, {
        key: "onSearch",
        value: function onSearch(event) {
            this.setState({
                searchTerm: event.target.value || ""
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this5 = this;

            var header = this.getHeader();

            var vb = this.state.vesting_balances.filter(function (item) {
                return (item.vestingId + "\0" + item.vestingType).toUpperCase().indexOf(_this5.state.searchTerm.toUpperCase()) !== -1;
            });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content vertical" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { component: "h1", content: "account.vesting.title" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.vesting.explain", component: "p" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "header-selector padding" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_SearchInput__WEBPACK_IMPORTED_MODULE_9__["default"], {
                        onChange: this.onSearch.bind(this),
                        value: this.state.searchTerm,
                        autoComplete: "off",
                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_10___default.a.translate("exchange.filter")
                    }),
                    this.state.error && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                        className: "header-selector--error",
                        content: "errors.loading_from_blockchain"
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_8__["default"], {
                        loading: this.state.loading,
                        rows: vb,
                        header: header,
                        pageSize: 10
                    })
                )
            );
        }
    }]);

    return AccountVesting;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountVesting);

/***/ }),

/***/ 2939:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(527);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(571);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(570);
/* harmony import */ var common_paperWallet__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2676);
/* harmony import */ var api_ApplicationApi__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(603);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(420);
/* harmony import */ var _AccountPermissionsList__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2940);
/* harmony import */ var _AccountPermissionsMigrate__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2944);
/* harmony import */ var _Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2946);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2929);
/* harmony import */ var _Utility_HelpContent__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2163);
/* harmony import */ var _RecentTransactions__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2947);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_15__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }


















var AccountPermissions = function (_React$Component) {
    _inherits(AccountPermissions, _React$Component);

    function AccountPermissions(props) {
        _classCallCheck(this, AccountPermissions);

        var _this = _possibleConstructorReturn(this, (AccountPermissions.__proto__ || Object.getPrototypeOf(AccountPermissions)).call(this, props));

        _this.state = {};
        _this.onPublish = _this.onPublish.bind(_this);
        _this.onReset = _this.onReset.bind(_this);
        return _this;
    }

    _createClass(AccountPermissions, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this.updateAccountData(this.props.account);
            common_account_utils__WEBPACK_IMPORTED_MODULE_5__["default"].getFinalFeeAsset(this.props.account, "account_update");
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            if (nextProps.account !== this.props.account) this.updateAccountData(nextProps.account);
        }
    }, {
        key: "permissionsFromImmutableObj",
        value: function permissionsFromImmutableObj(auths) {
            var threshold = auths.get("weight_threshold");
            var account_auths = auths.get("account_auths");
            var key_auths = auths.get("key_auths");
            var address_auths = auths.get("address_auths");

            var accounts = account_auths.map(function (a) {
                return a.get(0);
            });
            var keys = key_auths.map(function (a) {
                return a.get(0);
            });
            var addresses = address_auths.map(function (a) {
                return a.get(0);
            });

            var weights = account_auths.reduce(function (res, a) {
                res[a.get(0)] = a.get(1);
                return res;
            }, {});
            weights = key_auths.reduce(function (res, a) {
                res[a.get(0)] = a.get(1);
                return res;
            }, weights);
            weights = address_auths.reduce(function (res, a) {
                res[a.get(0)] = a.get(1);
                return res;
            }, weights);

            return { threshold: threshold, accounts: accounts, keys: keys, addresses: addresses, weights: weights };
        }
    }, {
        key: "permissionsToJson",
        value: function permissionsToJson(threshold, accounts, keys, addresses, weights) {
            var res = { weight_threshold: threshold };
            res["account_auths"] = accounts.sort(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].sortID).map(function (a) {
                return [a, weights[a]];
            }).toJS();
            res["key_auths"] = keys.sort(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].sortID).map(function (a) {
                return [a, weights[a]];
            }).toJS();
            res["address_auths"] = addresses.sort(common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].sortID).map(function (a) {
                return [a, weights[a]];
            }).toJS();
            return res;
        }
    }, {
        key: "updateAccountData",
        value: function updateAccountData(account) {
            var active = this.permissionsFromImmutableObj(account.get("active"));
            var owner = this.permissionsFromImmutableObj(account.get("owner"));
            var memo_key = account.get("options").get("memo_key");
            var state = {
                active_accounts: active.accounts,
                active_keys: active.keys,
                active_addresses: active.addresses,
                owner_accounts: owner.accounts,
                owner_keys: owner.keys,
                owner_addresses: owner.addresses,
                active_weights: active.weights,
                owner_weights: owner.weights,
                active_threshold: active.threshold,
                owner_threshold: owner.threshold,
                memo_key: memo_key,
                prev_active_accounts: active.accounts,
                prev_active_keys: active.keys,
                prev_active_addresses: active.addresses,
                prev_owner_accounts: owner.accounts,
                prev_owner_keys: owner.keys,
                prev_owner_addresses: owner.addresses,
                prev_active_weights: active.weights,
                prev_owner_weights: owner.weights,
                prev_active_threshold: active.threshold,
                prev_owner_threshold: owner.threshold,
                prev_memo_key: memo_key
            };
            this.setState(state);
        }
    }, {
        key: "isChanged",
        value: function isChanged() {
            var s = this.state;
            return s.active_accounts !== s.prev_active_accounts || s.active_keys !== s.prev_active_keys || s.active_addresses !== s.prev_active_addresses || s.owner_accounts !== s.prev_owner_accounts || s.owner_keys !== s.prev_owner_keys || s.owner_addresses !== s.prev_owner_addresses || s.active_threshold !== s.prev_active_threshold || s.owner_threshold !== s.prev_owner_threshold || s.memo_key !== s.prev_memo_key;
        }
    }, {
        key: "didChange",
        value: function didChange(type) {
            var s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state;

            if (type === "memo") {
                return s.memo_key !== s.prev_memo_key;
            }
            var didChange = false;
            ["_keys", "_active_addresses", "_accounts", "_threshold"].forEach(function (key) {
                var current = type + key;
                if (s[current] !== s["prev_" + current]) {
                    didChange = true;
                }
            });
            return didChange;
        }
    }, {
        key: "onPublish",
        value: function onPublish() {
            var s = this.state;
            var updated_account = this.props.account.toJS();

            // Set fee asset
            updated_account.fee = {
                amount: 0,
                asset_id: common_account_utils__WEBPACK_IMPORTED_MODULE_5__["default"].getFinalFeeAsset(updated_account.id, "account_update")
            };

            var updateObject = {
                account: updated_account.id
            };

            if (this.didChange("active")) {
                updateObject.active = this.permissionsToJson(s.active_threshold, s.active_accounts, s.active_keys, s.active_addresses, s.active_weights);
            }
            if (this.didChange("owner")) {
                updateObject.owner = this.permissionsToJson(s.owner_threshold, s.owner_accounts, s.owner_keys, s.owner_addresses, s.owner_weights);
            }
            if (this.didChange("owner") && s.owner_keys.size === 0 && s.owner_addresses.size === 0 && s.owner_accounts.size === 1 && s.owner_accounts.first() === updated_account.id) {
                return bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_15__["Notification"].warning({
                    message: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("notifications.account_permissions_update_warning")
                });
            }
            if (s.memo_key && this.didChange("memo") && this.isValidPubKey(s.memo_key)) {
                updateObject.new_options = this.props.account.get("options").toJS();
                updateObject.new_options.memo_key = s.memo_key;
            }

            // console.log("-- AccountPermissions.onPublish -->", updateObject, s.memo_key);
            api_ApplicationApi__WEBPACK_IMPORTED_MODULE_7__["default"].updateAccount(updateObject);
        }
    }, {
        key: "isValidPubKey",
        value: function isValidPubKey(value) {
            return !!bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["PublicKey"].fromPublicKeyString(value);
        }
    }, {
        key: "onReset",
        value: function onReset() {
            var s = this.state;
            this.setState({
                active_accounts: s.prev_active_accounts,
                active_keys: s.prev_active_keys,
                active_addresses: s.prev_active_addresses,
                owner_accounts: s.prev_owner_accounts,
                owner_keys: s.prev_owner_keys,
                owner_addresses: s.prev_owner_addresses,
                active_weights: s.prev_active_weights,
                owner_weights: s.prev_owner_weights,
                active_threshold: s.prev_active_threshold,
                owner_threshold: s.prev_owner_threshold,
                memo_key: s.prev_memo_key
            });
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(collection, item_value, weight) {
            var state = {};
            var list = collection + (common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].is_object_id(item_value) ? "_accounts" : "_keys");
            state[list] = this.state[list].push(item_value);
            this.state[collection + "_weights"][item_value] = weight;
            this.setState(state);
        }
    }, {
        key: "onRemoveItem",
        value: function onRemoveItem(collection, item_value, listSuffix) {
            console.log("onRemoveItem", collection, item_value, listSuffix);
            var state = {};
            var list = collection + listSuffix;

            state[list] = this.state[list].filter(function (i) {
                return i !== item_value;
            });
            this.setState(state);
        }
    }, {
        key: "onThresholdChanged",
        value: function onThresholdChanged(var_name, event) {
            var value = parseInt(event.target.value.trim());
            var state = {};
            state[var_name] = value;
            this.setState(state);
        }
    }, {
        key: "validateAccount",
        value: function validateAccount(collection, account) {
            return null;
        }
    }, {
        key: "sumUpWeights",
        value: function sumUpWeights(accounts, keys, addresses, weights) {
            var sum = accounts.reduce(function (sum, a) {
                return sum + weights[a];
            }, 0);
            sum = keys.reduce(function (sum, a) {
                return sum + weights[a];
            }, sum);
            return addresses.reduce(function (sum, a) {
                return sum + weights[a];
            }, sum);
        }
    }, {
        key: "onMemoKeyChanged",
        value: function onMemoKeyChanged(memo_key) {
            this.setState({ memo_key: memo_key });
        }
    }, {
        key: "onSetPasswordKeys",
        value: function onSetPasswordKeys(keys) {
            var roles = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ["active", "owner", "memo"];

            var newState = {};

            roles.forEach(function (role) {
                newState["password_" + role] = keys[role];
            });

            this.setState(newState);
        }
    }, {
        key: "onPdfCreate",
        value: function onPdfCreate() {
            Object(common_paperWallet__WEBPACK_IMPORTED_MODULE_6__["createPaperWalletAsPDF"])(this.props.account);
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var error1 = void 0,
                error2 = void 0;

            var _state = this.state,
                active_accounts = _state.active_accounts,
                active_keys = _state.active_keys,
                active_addresses = _state.active_addresses,
                active_weights = _state.active_weights;
            var _state2 = this.state,
                owner_accounts = _state2.owner_accounts,
                owner_keys = _state2.owner_keys,
                owner_addresses = _state2.owner_addresses,
                owner_weights = _state2.owner_weights;


            var threshold = this.state.active_threshold > 0 ? this.state.active_threshold : 0;
            var weights_total = this.sumUpWeights(active_accounts, active_keys, active_addresses, active_weights);
            if (this.didChange("active") && weights_total < threshold) error1 = counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.warning1", {
                weights_total: weights_total,
                threshold: threshold
            });

            threshold = this.state.owner_threshold > 0 ? this.state.owner_threshold : 0;
            weights_total = this.sumUpWeights(owner_accounts, owner_keys, owner_addresses, owner_weights);
            if (this.didChange("owner") && weights_total < threshold) error2 = counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.warning2", {
                weights_total: weights_total,
                threshold: threshold
            });

            var publish_buttons_class = "button" + (!(error1 || error2) && this.isChanged() && this.isValidPubKey(this.state.memo_key) ? "" : " disabled");
            var reset_buttons_class = "button" + (this.isChanged() ? "" : " disabled");

            var accountsList = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.Set();
            accountsList = accountsList.add(this.props.account.get("id"));

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tabs"],
                            {
                                defaultActiveTab: 1,
                                segmented: false,
                                setting: "permissionsTab",
                                className: "account-tabs",
                                tabsClass: "account-overview bordered-header content-block",
                                contentClass: "padding",
                                actionButtons: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "action-buttons" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "button",
                                        {
                                            className: reset_buttons_class,
                                            onClick: this.onReset,
                                            tabIndex: 8
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.reset" })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "button",
                                        {
                                            className: publish_buttons_class,
                                            onClick: this.onPublish,
                                            tabIndex: 9
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.publish" })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "button",
                                        {
                                            className: "button",
                                            style: { marginLeft: 10 },
                                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.create_paperwallet_private_hint"),
                                            onClick: function onClick() {
                                                _this2.onPdfCreate();
                                            },
                                            tabIndex: 10
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.create_paperwallet" })
                                    )
                                )
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                { title: "account.perm.active" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_13__["default"], { path: "components/AccountPermActive" }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "form",
                                    { className: "threshold" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        { className: "horizontal" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.threshold" }),
                                        " ",
                                        "\xA0 \xA0",
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "number",
                                            placeholder: "0",
                                            size: "5",
                                            value: this.state.active_threshold,
                                            onChange: this.onThresholdChanged.bind(this, "active_threshold"),
                                            autoComplete: "off",
                                            tabIndex: 1
                                        })
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissionsList__WEBPACK_IMPORTED_MODULE_9__["default"], {
                                    label: "account.perm.add_permission_label",
                                    accounts: active_accounts,
                                    keys: active_keys,
                                    weights: active_weights,
                                    addresses: active_addresses,
                                    validateAccount: this.validateAccount.bind(this, "active"),
                                    onAddItem: this.onAddItem.bind(this, "active"),
                                    onRemoveItem: this.onRemoveItem.bind(this, "active"),
                                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.account_name_or_key"),
                                    tabIndex: 2
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                error1 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block has-error" },
                                    error1
                                ) : null
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                { title: "account.perm.owner" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_13__["default"], { path: "components/AccountPermOwner" }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "form",
                                    { className: "threshold" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "label",
                                        { className: "horizontal" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.threshold" }),
                                        " ",
                                        "\xA0 \xA0",
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                            type: "number",
                                            placeholder: "0",
                                            size: "5",
                                            value: this.state.owner_threshold,
                                            onChange: this.onThresholdChanged.bind(this, "owner_threshold"),
                                            autoComplete: "off",
                                            tabIndex: 4
                                        })
                                    )
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissionsList__WEBPACK_IMPORTED_MODULE_9__["default"], {
                                    label: "account.perm.add_permission_label",
                                    accounts: owner_accounts,
                                    keys: owner_keys,
                                    weights: owner_weights,
                                    addresses: owner_addresses,
                                    validateAccount: this.validateAccount.bind(this, "owner"),
                                    onAddItem: this.onAddItem.bind(this, "owner"),
                                    onRemoveItem: this.onRemoveItem.bind(this, "owner"),
                                    placeholder: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.perm.account_name_or_key"),
                                    tabIndex: 5
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                error2 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block has-error" },
                                    error2
                                ) : null
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                { title: "account.perm.memo_key" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_HelpContent__WEBPACK_IMPORTED_MODULE_13__["default"], {
                                    style: { maxWidth: "800px" },
                                    path: "components/AccountPermMemo"
                                }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_11__["default"], {
                                    ref: "memo_key",
                                    value: this.state.memo_key,
                                    label: "account.perm.memo_public_key",
                                    placeholder: "Public Key",
                                    onChange: this.onMemoKeyChanged.bind(this),
                                    tabIndex: 7
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_12__["Tab"],
                                { title: "account.perm.password_model" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPermissionsMigrate__WEBPACK_IMPORTED_MODULE_10__["default"], {
                                    active: this.state.password_active,
                                    owner: this.state.password_owner,
                                    memo: this.state.password_memo,
                                    onSetPasswordKeys: this.onSetPasswordKeys.bind(this),
                                    account: this.props.account,
                                    activeKeys: this.state.active_keys,
                                    ownerKeys: this.state.owner_keys,
                                    memoKey: this.state.memo_key,
                                    onAddActive: this.onAddItem.bind(this, "active"),
                                    onRemoveActive: this.onRemoveItem.bind(this, "active"),
                                    onAddOwner: this.onAddItem.bind(this, "owner"),
                                    onRemoveOwner: this.onRemoveItem.bind(this, "owner"),
                                    onSetMemo: this.onMemoKeyChanged.bind(this)
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "tab-content", style: { padding: 10 } },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "divider" }),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_RecentTransactions__WEBPACK_IMPORTED_MODULE_14__["RecentTransactions"], {
                                accountsList: accountsList,
                                limit: 25,
                                compactView: false,
                                filter: "account_update",
                                style: { paddingBottom: "2rem" }
                            })
                        )
                    )
                )
            );
        }
    }]);

    return AccountPermissions;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountPermissions);

/***/ }),

/***/ 2940:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1846);
/* harmony import */ var _AccountSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2139);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _AccountImage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2140);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2003);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1894);
/* harmony import */ var components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2941);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(571);
/* harmony import */ var stores_AddressIndex__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(723);
/* harmony import */ var stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(718);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_13__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
















var AccountPermissionRow = function (_React$Component) {
    _inherits(AccountPermissionRow, _React$Component);

    function AccountPermissionRow() {
        _classCallCheck(this, AccountPermissionRow);

        return _possibleConstructorReturn(this, (AccountPermissionRow.__proto__ || Object.getPrototypeOf(AccountPermissionRow)).apply(this, arguments));
    }

    _createClass(AccountPermissionRow, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps) {
            return !common_utils__WEBPACK_IMPORTED_MODULE_10__["default"].are_equal_shallow(nextProps, this.props);
        }
    }, {
        key: "_lookUpPubKeyForAddress",
        value: function _lookUpPubKeyForAddress(address) {
            var addresses = stores_AddressIndex__WEBPACK_IMPORTED_MODULE_11__["default"].getState().addresses;
            var pubkey = addresses.get(address);
            return pubkey;
        }
    }, {
        key: "render",
        value: function render() {
            var name = void 0,
                item_id = void 0,
                name_or_key = void 0;
            var suffix = "_accounts";
            var pubKey = this.props.pubkey;

            var keys = stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_12__["default"].getState().keys;

            var has_private = false;

            if (this.props.account) {
                name = this.props.account.get("name");
                item_id = this.props.account.get("id");
                name_or_key = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"],
                    { to: "/account/" + name + "/permissions" },
                    name
                );
            } else if (pubKey) {
                name = item_id = pubKey;
                name_or_key = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__["default"],
                    { pubkey: pubKey },
                    pubKey
                );
                suffix = "_keys";
                has_private = keys.has(pubKey);
            } else if (this.props.address) {
                pubKey = this._lookUpPubKeyForAddress(this.props.address);
                item_id = this.props.address;
                name_or_key = !pubKey ? this.props.address : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__["default"],
                    { pubkey: pubKey },
                    pubKey
                );
                suffix = "_addresses";
                has_private = keys.has(pubKey);
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { key: name },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    this.props.account ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountImage__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        size: { height: 30, width: 30 },
                        account: name
                    }) : pubKey ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "account-image" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_8__["default"],
                            { pubkey: pubKey },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_7__["default"], { name: "key", title: "icons.key", size: "4x" })
                        )
                    ) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { className: (has_private ? "my-key" : "") + " pub-key" },
                    name_or_key
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    this.props.weights[item_id]
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            className: "button",
                            onClick: this.props.onRemoveItem.bind(this, item_id, suffix)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.votes.remove_witness" })
                    )
                )
            );
        }
    }]);

    return AccountPermissionRow;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPermissionRow.propTypes = {
    account: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.object,
    pubkey: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string,
    address: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string,
    onRemoveItem: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func.isRequired,
    weights: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.object
};

var AccountPermissionsList = function (_React$Component2) {
    _inherits(AccountPermissionsList, _React$Component2);

    function AccountPermissionsList(props) {
        _classCallCheck(this, AccountPermissionsList);

        var _this2 = _possibleConstructorReturn(this, (AccountPermissionsList.__proto__ || Object.getPrototypeOf(AccountPermissionsList)).call(this, props));

        _this2.state = {
            selected_item: null,
            item_name_input: "",
            weight_input: "",
            error: null
        };
        _this2.onItemChange = _this2.onItemChange.bind(_this2);
        _this2.onItemAccountChange = _this2.onItemAccountChange.bind(_this2);
        _this2.onAddItem = _this2.onAddItem.bind(_this2);
        return _this2;
    }

    _createClass(AccountPermissionsList, [{
        key: "onItemChange",
        value: function onItemChange(item_name_input) {
            this.setState({ item_name_input: item_name_input });
        }
    }, {
        key: "onItemAccountChange",
        value: function onItemAccountChange(selected_item) {
            var _this3 = this;

            this.setState({ selected_item: selected_item, error: null });
            if (selected_item && this.props.validateAccount) {
                var res = this.props.validateAccount(selected_item);
                if (res === null) return;
                if (typeof res === "string") this.setState({ error: res });else res.then(function (error) {
                    return _this3.setState({ error: error });
                });
            }
        }
    }, {
        key: "onWeightChanged",
        value: function onWeightChanged(event) {
            var value = event.target.value.trim();
            this.setState({ weight_input: parseInt(value) });
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(item) {
            if (!item) return;
            var next_state = {
                selected_item: null,
                item_name_input: "",
                weight_input: "",
                error: null
            };
            this.setState(next_state);
            var item_value = typeof item === "string" ? item : item.get("id");
            this.props.onAddItem(item_value, this.state.weight_input);
        }
    }, {
        key: "onWeightKeyDown",
        value: function onWeightKeyDown(event) {
            if (event.keyCode === 13 && this.state.weight_input && this.state.selected_item) this.onAddItem(this.state.selected_item);
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var key = 0;
            var account_rows = this.props.accounts.filter(function (i) {
                if (!i) return false;
                //if (this.state.item_name_input) return i.get("name").indexOf(this.state.item_name_input) !== -1;
                return true;
            }).sort(function (a, b) {
                if (a.get("name") > b.get("name")) return 1;else if (a.get("name") < b.get("name")) return -1;
                return 0;
            }).map(function (i) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPermissionRow, {
                    key: key++,
                    account: i,
                    weights: _this4.props.weights,
                    onRemoveItem: _this4.props.onRemoveItem
                });
            });

            var key_rows = this.props.keys.map(function (k) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPermissionRow, {
                    key: key++,
                    pubkey: k,
                    weights: _this4.props.weights,
                    onRemoveItem: _this4.props.onRemoveItem
                });
            });

            var address_rows = this.props.addresses.map(function (k) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountPermissionRow, {
                    key: key++,
                    address: k,
                    weights: _this4.props.weights,
                    onRemoveItem: _this4.props.onRemoveItem
                });
            });

            var error = this.state.error;
            if (!error && this.state.selected_item && this.props.accounts.indexOf(this.state.selected_item) !== -1) error = counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.perm.warning3");
            if (!error && this.state.item_name_input && this.props.keys.indexOf(this.state.item_name_input) !== -1) error = counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.perm.warning4");

            var cw = ["10%", "70%", "30%", "10%"];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    _AccountSelector__WEBPACK_IMPORTED_MODULE_2__["default"],
                    {
                        label: this.props.label,
                        error: error,
                        placeholder: this.props.placeholder,
                        account: this.state.item_name_input,
                        accountName: this.state.item_name_input,
                        onChange: this.onItemChange,
                        onAccountChanged: this.onItemAccountChange,
                        onAction: this.onAddItem,
                        action_label: "account.votes.add_witness",
                        tabIndex: this.props.tabIndex,
                        allowPubKey: true,
                        disableActionButton: !this.state.weight_input,
                        allowUppercase: true
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                        value: this.state.weight_input,
                        onChange: this.onWeightChanged.bind(this),
                        className: "weight-input",
                        type: "number",
                        autoComplete: "off",
                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("account.perm.weight"),
                        onKeyDown: this.onWeightKeyDown.bind(this),
                        tabIndex: this.props.tabIndex + 1
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { paddingTop: "2rem" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "table",
                        { className: "table" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "thead",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "tr",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", { style: { width: cw[0] } }),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "th",
                                    { style: { width: cw[1] } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.acct_or_key" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "th",
                                    { style: { width: cw[2] } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.weight" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "th",
                                    { style: { width: cw[3] } },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.action" })
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tbody",
                            null,
                            account_rows,
                            key_rows,
                            address_rows
                        )
                    )
                )
            );
        }
    }]);

    return AccountPermissionsList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPermissionsList.propTypes = {
    accounts: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainObjectsList,
    onAddItem: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func.isRequired,
    onRemoveItem: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func.isRequired,
    validateAccount: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.func,
    label: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string.isRequired, // a translation key for the label,
    placeholder: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.string, // the placeholder text to be displayed when there is no user_input
    tabIndex: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.number, // tabindex property to be passed to input tag
    weights: prop_types__WEBPACK_IMPORTED_MODULE_13___default.a.object // weights: hash of {account id -> weight}
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(AccountPermissionsList, { autosubscribe: false }));

/***/ }),

/***/ 2941:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(604);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(605);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(718);
/* harmony import */ var _Modal_QrcodeModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2942);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var PrivateKeyView = function (_Component) {
    _inherits(PrivateKeyView, _Component);

    function PrivateKeyView() {
        _classCallCheck(this, PrivateKeyView);

        var _this = _possibleConstructorReturn(this, (PrivateKeyView.__proto__ || Object.getPrototypeOf(PrivateKeyView)).call(this));

        _this.state = _this._getInitialState();

        _this.showModal = _this.showModal.bind(_this);
        _this.hideModal = _this.hideModal.bind(_this);

        _this.showQrModal = _this.showQrModal.bind(_this);
        _this.hideQrModal = _this.hideQrModal.bind(_this);

        _this.onClose = _this.onClose.bind(_this);
        return _this;
    }

    _createClass(PrivateKeyView, [{
        key: "_getInitialState",
        value: function _getInitialState() {
            return {
                isModalVisible: false,
                isQrModalVisible: false,
                wif: null
            };
        }
    }, {
        key: "reset",
        value: function reset() {
            this.setState(this._getInitialState());
        }
    }, {
        key: "hideModal",
        value: function hideModal() {
            this.setState({
                isModalVisible: false
            });
        }
    }, {
        key: "showModal",
        value: function showModal() {
            this.setState({
                isModalVisible: true
            });
        }
    }, {
        key: "hideQrModal",
        value: function hideQrModal() {
            this.setState({
                isQrModalVisible: false
            });
        }
    }, {
        key: "showQrModal",
        value: function showQrModal() {
            this.setState({
                isQrModalVisible: true
            });
        }
    }, {
        key: "render",
        value: function render() {
            var modalId = "key_view_modal" + this.props.pubkey;
            var keys = stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().keys;

            var has_private = keys.has(this.props.pubkey);
            if (!has_private) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                this.props.children
            );
            var key = keys.get(this.props.pubkey);

            var footer = [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Button"],
                { key: "cancel", onClick: this.onClose },
                counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("transfer.close")
            )];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "a",
                    { onClick: this.onOpen.bind(this) },
                    this.props.children
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Modal"],
                    {
                        visible: this.state.isModalVisible,
                        title: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.perm.key_viewer"),
                        ref: modalId,
                        id: modalId,
                        onCancel: this.onClose,
                        footer: footer
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "grid-block vertical" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "content-block" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.public" })
                                ),
                                this.props.pubkey
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-block grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.private" })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    null,
                                    this.state.wif ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "p",
                                            { style: { fontWeight: 600 } },
                                            this.state.wif
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { className: "button-group" },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                {
                                                    className: "button",
                                                    onClick: this.onHide.bind(this)
                                                },
                                                "hide"
                                            ),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                {
                                                    className: "clickable",
                                                    onClick: this.showQrModal
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
                                                    style: { height: 50 },
                                                    src: __webpack_require__(2943)
                                                })
                                            )
                                        )
                                    ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: "button",
                                                onClick: this.onShow.bind(this)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.show" })
                                        )
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-block grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.brain" })
                                ),
                                key.brainkey_sequence == null ? "Non-deterministic" : key.brainkey_sequence
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                            key.import_account_names && key.import_account_names.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "grid-block grid-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.from" })
                                ),
                                key.import_account_names.join(", "),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null)
                            ) : null
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_QrcodeModal__WEBPACK_IMPORTED_MODULE_5__["default"], {
                    showModal: this.showQrModal,
                    hideModal: this.hideQrModal,
                    visible: this.state.isQrModalVisible,
                    keyValue: this.state.wif
                })
            );
        }
    }, {
        key: "onOpen",
        value: function onOpen() {
            this.showModal();
        }
    }, {
        key: "onClose",
        value: function onClose() {
            this.reset();
            this.hideModal();
        }
    }, {
        key: "onShow",
        value: function onShow() {
            var _this2 = this;

            actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_1__["default"].unlock().then(function () {
                var private_key = stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__["default"].getPrivateKey(_this2.props.pubkey);
                _this2.setState({ wif: private_key.toWif() });
            }).catch(function () {});
        }
    }, {
        key: "onHide",
        value: function onHide() {
            this.setState({ wif: null });
        }
    }]);

    return PrivateKeyView;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

PrivateKeyView.propTypes = {
    pubkey: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string.isRequired
};
/* harmony default export */ __webpack_exports__["default"] = (PrivateKeyView);

/***/ }),

/***/ 2942:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2354);
/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(qrcode_react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(420);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }









var QrcodeModal = function (_React$Component) {
    _inherits(QrcodeModal, _React$Component);

    function QrcodeModal(props) {
        _classCallCheck(this, QrcodeModal);

        var _this = _possibleConstructorReturn(this, (QrcodeModal.__proto__ || Object.getPrototypeOf(QrcodeModal)).call(this, props));

        _this.state = _this._getInitialState();
        _this.onPasswordEnter = _this.onPasswordEnter.bind(_this);
        _this.onKeyDown = _this.onKeyDown.bind(_this);
        _this.onCancel = _this.onCancel.bind(_this);
        _this.onClose = _this.onClose.bind(_this);
        return _this;
    }

    _createClass(QrcodeModal, [{
        key: "_getInitialState",
        value: function _getInitialState() {
            return {
                isShowQrcode: false,
                keyString: null
            };
        }
    }, {
        key: "onCancel",
        value: function onCancel() {
            this.props.hideModal();
            this.onClose();
        }
    }, {
        key: "onClose",
        value: function onClose() {
            if (this.refs.password_input) this.refs.password_input.value = "";
            this.setState(this._getInitialState());
        }
    }, {
        key: "onPasswordEnter",
        value: function onPasswordEnter(e) {
            e.preventDefault();
            var pwd = this.refs.password_input.value;
            var key = this.props.keyValue;
            if (pwd != null && pwd != "") {
                if (key !== undefined && key != null && key != "") {
                    var pwd_aes = bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["Aes"].fromSeed(pwd);
                    var qrkey = pwd_aes.encryptToHex(key);
                    this.setState({ isShowQrcode: true, keyString: qrkey });
                }
            } else {
                //notify.error("You'd better enter a password to encrypt the qr code");
                this.setState({ isShowQrcode: true, keyString: key });
            }
        }
    }, {
        key: "onKeyDown",
        value: function onKeyDown(e) {
            if (e.keyCode === 13) this.onPasswordEnter(e);
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var pos = null;
            if (this.state.isShowQrcode) pos = { textAlign: "center" };

            var footer = [];

            if (!this.state.isShowQrcode) {
                footer.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__["Button"],
                    {
                        type: "primary",
                        key: "submit",
                        onClick: this.onPasswordEnter
                    },
                    counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("modal.ok")
                ));
            }

            footer.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__["Button"],
                { key: "cancel", onClick: this.onCancel },
                counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("cancel")
            ));

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__["Modal"],
                {
                    visible: this.props.visible,
                    onCancel: this.onCancel,
                    footer: footer
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "text-center" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { style: { margin: "1.5rem 0" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                            component: "h4",
                            content: "modal.qrcode.title"
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "form",
                        {
                            className: "full-width",
                            style: { margin: "0 3.5rem" },
                            onSubmit: this.onPasswordEnter,
                            noValidate: true
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "form-group" },
                            this.state.isShowQrcode ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "section",
                                { style: pos },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "span",
                                    {
                                        style: {
                                            background: "#fff",
                                            padding: ".75rem",
                                            display: "inline-block"
                                        }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(qrcode_react__WEBPACK_IMPORTED_MODULE_4___default.a, {
                                        size: 256,
                                        value: this.state.keyString
                                    })
                                )
                            ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "section",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "label",
                                    { className: "left-label" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                                        unsafe: true,
                                        content: "modal.qrcode.input_message"
                                    })
                                ),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                    name: "password",
                                    type: "text",
                                    onFocus: function onFocus() {
                                        _this2.refs.password_input.setAttribute("type", "password");
                                    },
                                    ref: "password_input",
                                    autoComplete: "off",
                                    onKeyDown: this.onKeyDown
                                })
                            )
                        )
                    )
                )
            );
        }
    }]);

    return QrcodeModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

QrcodeModal.propTypes = {
    modalId: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,
    keyValue: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string
};
QrcodeModal.defaultProps = {
    modalId: "qr_code_password_modal"
};
/* harmony default export */ __webpack_exports__["default"] = (QrcodeModal);

/***/ }),

/***/ 2943:
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QoLBzEKr7oFDgAAIABJREFUeNq9fXmYXVWV71p773PuvVUVSAL2o40KmjCEgiSEVFUSAiRR6U9Bwan9tPG1OPLk2bQTaQd89rOfooJD80RBUfTz4RPnVpx9bZuEzIHMAaICraIiZKjpnrP3Xuv9se5dtetU1U1SiveP+m5uztln77XXtH9rOPjWt751y5YtzrkQQpZlIQRjjDGGiOB4PsxsjIkxjoyMbNmyhZkBABHlf4nIGNPX19fT0+O9995v2rQpvRcR5Rr5rrfLP/VKItq7d+/VV19tjAGAPM9DCMyc5/ncuXM//elPy4179ux54xvfWK/XiUjWJU/pPH9rbQgBAJQC8mhmjjEODAy4bdu2rV+/Xn6NMSKizDud4rF8ZHSZ9+joaKPRkAGNMTJUWZbbt2+31nrv0ykKlWUE/V1ukQ2T+cgFiHjo0KFt27Z57+VHWaG1ttlsxhittcw8ODh4zz336MR0qDzP06dPJJbuUIxRZyKTQUSnU0nvkWUfF7F09BBCvV6X7/J4mXGe50RUYVjdGyGZ8pE8XcmnXxDRGNNsNnVVwgsxRiGZ/g4AzjkdWTfsWJZQobLOygh10l2Vx0/jY4yR+SFiCCHGGGMU6lRIL49LJ2etFUKkgsnM3nsdR4aSnRDKKhWMMYcOHdIHOefku0wmxigD6uZN/MjTZUD5yO7qjiKikbHkV6GiPIOP8yO3K6Gdc9Zaa22WZTKPPM9VlFSCAMB7X6vVdELOOUTMsuzss88GgCzLZBxZSQhBuIOIGo1GX1+fEDHGuG/fvnSzRT7yPO/v75cZeu/Lspxq/rorIQQZcGhoSMbUa5xMSNSkiqtz7njFUJlfNbGKmLU2xijKoiKGwtf6Vy8wxsyYMUNuF8WvnJvnuQw4OjqqkiKqUDZG9kDYVigrukz5cdL5V5hOGPbIkSOqsIwxTqiYXic8fLwKPtWFKkcVXSCLnHhL5Ue5RamWqggiKopCZVnkS9aZZZkaKL1ApqG0Vqp1sIk6iOyfEFekzaRaUK47qpXt8CRlHNFBkyopXbyqM/lF1bPcqOJQUXYiLHLlyMiIXiwjqJirdVYpUbJ2mLxogImMYoyx1o55E8LM6YZ3/lRYWr/rbug/RdlX3BGdligXdVxE8RHR5z73uSzLRIUtWLBAx1yxYoWMFkK47777ZObOOSWrem3yFO+9PnfTpk1TLUc0IyL29fWJUkpdxTGd9WR/KhZduS/lLN18nZ+QTHZVLIA6bsqbqon0u4wwUa6Pa7YVsRhTUE82pYSh1PmUL7KZ+stE56uyYDFBYmGFHMIv6iLIIMKGcv00dIgq8qn0tXmyiSXP1s1XaRKFolqywho6b71S6SJKXSRUr1RJ9N6L1P/pM6/ok78EsVQp1Go18R7UysinKAphhJRwHZhU2WdkZOSee+7Rwc8991xx65xzqQE9Xsue0qhy41+Is1Kekm0XfklVe2V++r8VudBxurq61MtBxO7ubvmvoiimYc0nEjT1Qv5yOit1GlSRy+anB2YlxMSjiRybU59DbbeMmVrbPM//FJ3VaeP/AtZQ6aKnqFSFjx1Tk4Oh+Maqs9QRVYMoBqurq0tdBIWV5OxSYcNjF8aUtSscOh3OEke8glV1dvZSRKEyJ/HgJ4rh4sWLVWDVeiLixo0bL7zwQgWFjooaHaOyT7EzdWv/DJyVrqGCQx0LZx0jJ2ZZpkBNyon1el3tpvpcuiXq7oqva4xRZK0zSKfjpMeMytLctGUq3fOjmjD5e1SyKjuo5lY8T72qoihkPQpsioJT5i3LUqFBEWE5Y3c+xumYuhzxQo6JWFORQDlf/JqjqlL1sPTGzqdZuSyEMDw8rFCvc857L6c84ZQU85LP8PCwzFncfbUSWZbJJIWCHbZW2HNwcFDuTV25oxBrKlGfqKo6L16vd86NjIyIgBzVKgHAvn37lIsXLFhw3333idz19vYqgdJTt2xeyshyLBUaiR+7bNmyzuuStYQQJp4ipslZFZC+8+J1wQpadRZbPdwdOXJE/ICyLOv1uopJrVar6GAhop6H1O+VQ1Ke54pVTHXoUz4VwU/PBn8GnSVzOkadVbn3qFYpna5Em1J0xXsvroOqcEVBlNbiOsjBSHScTniqOYjjVoHX/wwefIoWHIvzUkEpjxpkkxkL1i7+p/hZcrsKsnq2qd8r85Fly152dXUp4NFhtxRfVdFzzvX09Iy7aNWqVRUf51j2v4PY1mo1USiKdqrzIu7iRGcvBf51AuJnyTg7duww7U05d+ECHwMzx+jvWb9WWXvhwoXq9G7atCm1/ROduOP9OOdWrlxpFEVVn2UaQcP0uFAURQhBxEcRD3WanHNydlMWSO1UigurBy+IqJDXWtvV1WWNsKrLs7oAEhKMkaiSkr5er6e70gGAPyoTyLBG5D/d2GnDygrIOucErdYQVqpKxLTL3og2ybJMNHSK0lRg28xlFcsrke0KDi6EE93UbDbTcOT0FpXiqO7gwYOpEtGNnUZ0R2ght3vv5QGyAPHuxN9RJkoJquqvBeA6J0sV859lWRliltWIwuGDh2IIzrksy2yWi2ir/hZTIGMKb+oJtHJKOy4FTUQHDx5EsRdijysw5vESS7ZdpViEQiiVenf6T+9jltlEhNl7v2XLNg2JHzlyRDDlPM8HBpYZA0VR1GrCYgxgjhw58sAD+/M8HxkZmT179rx583Q/hFjNZlMMgrLk9EJ83vs8z1E34c8FLaaHNRWZtWvXilopy/Lss8+eMWMGMWaZQ4RI0RobyYsmwraBVn4RP4sBKEZrkSmgMQCGGQGRYgwh1Gq19GAEAAww2hxt1BsMDAAISEyIaACnvTpMcV6Vwc5AwhRjRZFE2duhoaG77rrrK1/5yo9//FOhYJ7nzWZTNtkYc/6S/he84AVXXXXVnDl/TUwx+sxlPvjcTVi2RGuADTBD/MC//Mt3v/tdtBbBRobcZUVRCP+q64uIz7v0+b29vZdffrkGe2KMeZbj8ftJY6Sg9kfPENOI3UsAfLQ5yOx//ZuHXvqyK4wFQDAWJoYPWs9Gi8YBmKXLl+27fz9xHC1GiKOi7OlMZH7eF8z+da/9rwiABowBMGMpLhoebqk/BOMsILzs5X978PAhYg4UI09vaa0pQX9/fyUW3dnVcpD1zj+HmQP5yJL9wUwcikPM5fXvfg8AIIKoUYO5WpM0+IqIFiCzDsCYrAts7Y3//R+bkT1zJCbmZrPJHJkjM4fQoplnH0bpmte8yBpwCHUE42am3tP4g5cxxunfO7/81cDsmYk9M0dPzEzMgWMZCiYW1mPmtWvX6vIlXjmW69DV1aVjKyLRwcmOEJ/ylKeIQjFowAAAMZHN6osXLLpv195arVEUo8ZZFo8HuK+v77nPfa44FkT005/+dOvWrcEXIQZrbfRNNO7WT/7vdT9fu337VrRQFr5eqwFA2Szyes1aJAKG4ME3cnFKoF53ZTNQCJVjnSIctSwrysIAGgNE8MpXvGJ4tPmqv7/SGEYAY0WviQ/sUjdAbhe6a+5U67N69eo07iQOZGcxXr58ufctWaHofTnCsTnv1DkZQmZzAAcGAeHZz7nke9//sdj+iSy9e/ful7/8ZQjQlVsEQLSu1nPK0+cG5sBclG3fMqjoRM+eA1991eUtcUP42C13qrRKBEywmo0bN77rnWsa9byWOxk8r3Wjaxx4+NEg1xPHGCNTYBYeUydGUxKNMcuXLx+XKXTxxRdXDpCdw/fG4cBA39hK2DM3L1x+ngWo2xqCA3A9M078fz/79xDZB05dapmNOCtl8MzxoV/sP23OUxyAFRG3XQMrVgbmIjIJlYmZAlPwvvBccuDXXvl8RMzrNQDz/o/ekaq2siyTjYkc/Esuv6yROVEJYGqrLrnMMweKvmzG6Ik5EkdiVWUhhB07dqjTd84551SJlToUqZqf9AMIS5f2hxA4cvSByb/33W/PDCBA7moA2V8/9dQ/PPZ4SVGmImvQAfWfgTlGT36E/fAFSxZ059aiQ5ODyT904ycCs2+rqhhK0V+jNMKB33L1y1sQALr/8dEvCKumzCsIJ1Ng9hzL8xeeU3c2z3MAB7b26BMj8mhmT8whMkVm4jVr1ogMLlq0SBIpJqp5I7iPeqFCXXUjJkmgMJYIrLFgCDk++utff+ADNwYCBihDnDV79oO/+MXsk2cDBQAyCIq3qFLIsoyIENgYgy6LxOvu2XjKKacAB6ASmNasecfhI8MRUDSnsVZcOIcOAgyPDAmDi24ty1JObEVRiKoVVCsSMQEgfu72z8YQfVkCEMS4cdN2knMikdgFNABI9XpdDkZyxkyTvMZBNJXjzsSI7ngElWtZ3mwOAxNmeO2116I1AIBZDgg/X7eOgYjJWRNjCUBi/iSpTASwZd0BY2QAZ/MGZNnP/uM/LEJN3NJI1113nbMABoghBAJs62PD9Sw3yBQiAGdWWKaFdggs04I6rItEALBg8aIsw66aQyAAuu++vRSF+Gn0hCrhyDQ3cYxYgsaKQVFCdggfGbBEUK/XAPmJxx77+rf+LQRicBzDG6+55oyz5jXqGSISk7Nj2QmyJImzt3wWZmMtAxBgCPTUpz/tmmvewBGAIyDeftttPjAxMIJ1jhlBrAZiCMG0Y9tEAZIkWM2xISIGtM6R9wBw3sJziyI4BAQYGhpBCwRs2qgpM8vpQ1hECDIpu4zL9tYg+5g3NG5EAADKOQwPA3oosls+doOzmQMACGC6P3zTTQbZcHSMljPgVjJuZX9agwNCJARCJrTO2Ox97/ufooktRIT4ma98N+NmACAA5BIRS4hgAZwNDE5svzUa5kmZAhENAHNhsgawa8e7awYoy2xgYITIDAwWAGgMfUfEtWvXimwpviSfgYEBk+Z5p7lbim2l6fNEBD64Wj1yBAvf+Ma3yuAZwLr88he/pOasBQQAppbgdDozoT7RGjQA0N3dGOg7p21q8Gt3fQXQUtsXijE6cHJUtBaNzYCNgr+CzAjPtpL/mAw0KBwBsHv27rSmzraIkC1c0OuEzuLKIqABAGw0GgJMpjCWhiattY1Gw3TOGUwLH9LsfotZeeSJfff/J4DJrI2RX//611oDDGPIkSxzyjMXMBhmljkBANh6dvnllwG0VMnPf/pDQOsQkAkArLEGAAgQDUUoyxLQMKPiPCoHLbgVgSIb2/PQLzY0R2qem4EMYL6s/zxhv/ZSQU7Waapqmgc85gZIHnyadZfmRlWSbzT3sCQGgK2bN4h3xIyA+UUrlqfPOJYjavpQ0ZLPee5qC0RM1uUwOvy7Px7G1iYjAEQKLdgaENEaY9OET0gqMmQTEBGweNd17wcogDOwpndJ/zPmzERg4DaR2uqoLEtNPtdjX5oHD62TaJIKkSauVMJzLeeewToHjLt3b/XRABIRnXzas7rqxjAARTkTHhUIkSsMCpIFzAjMZ83vtQAGTYzBONjzwC8BwLQ4lJxxgC2eyPOcoo+hFEnUmpukIMIgFnd+8Utf/9b32QABQ6x9+MMfRAAD7GxOkcVgyapvuOGGI0eOiL2W+C4R7dmzp+o6TBqkmYqznEUwBhB//9uHIxhAQOBnnXGmITCYhnCOGh0Yz30GmV02Y5YFcJkBRi5H//N3f7TQZl4iHtttKotRAGqM54U0wEMB3v+B66989Zvy7oYnAAyve8ObL1k5EKMHMAAGUBSsEMsIz8oZQ1hMY5fqUTupLKhAo2kIU3V8i6xEzTIA46O/fUigOiSeefJJDICgUU8wRm7sAIABMyGKr2AZLYABcCd2ZwebEYyzBIOj5RiohMjAwGAzY42NFOs1e+D+PRs2bBDtLvF9Y8wDDzywfv36Oz7/mZGRwEhDw7Wsy/3N6hd/4uPvdQwkW8ggVqUSixa4TbPn06CJMcZphcZUWSVCKVV1BiCr5QAwNHwYwIADDnDCzBPboSpqsQwfBUFEAAALEAGIARAtAEbPM2ee8NhvHofMGoJmIcQitA6BI4QMIcYYKRoAX8Q7brv1i5++MVXGCvk7BMQcnOE4/L73fmrNmqstBPCMmSGGGME5YAaDQj3UkK2WmSGiFOGNBQk3bdpUyTHTUGiadaaAHKIJcRTIFUgAkEOtsIBNZGgVaJVlCQiMR1HzRIJ7QaCIgMxABNYZ9l5QHwvQ3d0NzEyi4AwCC4GFKXIECM0xuQMGBEAbAgGYgFnXjJPf8Y63HRp8Ys2aq1sbaBHBGITMtUZsiWSbP2KMa9eubTQaAi4sWLAg9Q1dyodpKYB+EaRYAf/ABMQQY6PelWeuLIYB4fDBx8VyhxD1/IHGMMcpFZcBQAg+uiwPxMaARYLgDw0NGWsgxgDQ090FKA4mMIPFdpCRyVosI4PJiYpWhIVaxX/W2RDC7JNOueVTn3zpS64QkSnKop7XiL2BrAN8rABMxUMQp9epA0VEgmSlxX1iUNWsil9Syyw4+9Snneb9RgCT1+HXDz1EDIjWOIHiRMF3ygFBBCJyWQZgrAEfPLN3GR8ZIXYZoPEMp845JfEzEIABwGUZgwkRnIUVq56zesUCIBZ1s3nzxu/823djCM7CE4899qq/e8mtn/6bH/7ge2iplteCB5dR55wBEUD5m6Y0id/r9u3b9/jjj0sYbuHChYr8CSsJjbZv3y5kbsX+iQHo6afNM0CAObP/5YP7GYEiW4vel3luseWg89ReFgmGaQzECIjsHD70wO4SgMXuYXb6M0+NAA4MACFihOioVaDCjMZlqy953vve8XpisihcjAD0T29/x003fdyY6Ev695/85LLnv+TuH36dCGwGDNzBQpdlaa096aSTFi5cWKvVarWaJj5ba8844wwYGBiQpBxNXVU8q1JqpIGGpQN9HMPPfvLtOkLN1MEAQPejfzwyOFpGJgHORQ16X0wVAgjkiYJAXEVJzDE0H//eN28Xmwim5mb8VWAuSIA5z8yeS/Z8zWuvQLQADkz2z5/4QmQKFFtoH8fm6CCTv/3WWxCh0egGcADuIx/5lA9MXPpYHjU2IV5bBeAVspju7m6tkqnIoFaXpmIMBh0wIPf1r2AGZAQEC/R/7/pavZ5xy3UBHB+Cn0wMbTvVC2wmpSnuhz/4KYJFZGvw/P5llluBDwhtFARbyfFoDDCHEBDQokgQee9r9a4Y6TVveP11b/9vzdHCGAIM7/yndz36+8eK6NFkHUJeGlFPk7xUwROREUqpX5omM8pfyYfSMltgOShxV8/ss8+cE5kBwUC87bO3h7YuTAORU7ukaE1G0QMSAEQmzBqf/9ydLZc9lle++iqITZZjEfIYjYENMHAEpkZeK4tCwZksqwEYBgPgPvi/bjj9WXMyZwAxxKFLL73U2a4OyU7GGFXZac556naZFNZQVJOINm/evGHDhu3bt+/fv3/+/PlLliy54IILLrjgAjDGMABiUfrXv/Yq1zqN8L4dO3bu3BMpapFN56wVjiCQFmLL+H79K18tPAASMhHTi150udBRWFRdWSICJrmrKJridreML4APZJ0LkdE1vvntL3sfgCyg371n1+dvv4v46GkNlRyp9HAOK1eurKTJT5U/1U57dsuXXcTEVI6ODj0uoAxCDpift2TZaGDPXDI3y1Fmz1SkiH4K8HtmHyWUVzI3mctTTp5lAWytDuguu+IlxOwDE7OPgUjUhw+R3/yaKyS2g2Cu//jnp9Q9xMzxTa9+KQJ0AQD0mKzn9yPEHCn6EIKEKUIIzJFjmQY+UsU9DoPvnLFXqaQxxlhniEPwEV1W757xxte92jlAiIh479atH7vpY+JC5Vk9RgY06tBWKgYsgDMIAL4sgfEt//APTzxxkBFiGcCYG264QfgJAZyxiPa4UxMQIDRv/tyXZtVhBFzdlBT4NVe+MpIhcNbaGALqQaV97hcdouJVHbQzZ4kuS2kMCEv6+9pb533zsEMwCNZmYnq+ffcPPHNJHChOzAQQW0NEzLE5Oszkmcsv3XE7ihZDB1h71WveEJgLX5IYuJHRFmMdD2cFZt8cJC6/8KmbAEzNALguQPez9ZuGi0DMRDQyPMgchec1yzCFWyqfKZNnent7TzjhBAAYHh7etWvX4OAgEfX09Cw679zzzjuvLCjLDRDYrHb33d+89NIXxeidyVyeXX7pZV+88/+88hV/K9HqNP1M82iZGZhqeQYAN97w4Xe/+3rB9YBh5sl/ddttt8o2C4xTq4SFj5W1CGs9GIdedfU//uvNt2zb+6scRjy6573gikOP/zYCOMRGVxcwhwiI8PvfPfrII49o0a0IxIwZM/TE04mzlJtE649Fh7iITMQcvMh2ydxc8/Y316zJTSvDwbr6ylXP/ePjh6mt6dJcD2Gu0Bx+cN/uhb1n1Z1FgFqtkde6AbI9+x8OzJ4pchniaKQilL4dBD0OziKOgZmpJOZf7d3mnHFyejeNa697z6gfm5oor+uuu64SrM/zvK+v71h1lmSjaQ5Eq6gFDBBTAOPAOUfMAPaGj3z0yitfGYmNAWOAol+/fu3JJ8164QuvuOOOO/bu3avyX5bltm3bbr755sV9S86Yf87+Bw+UgVxWKwpflsWO3bvnn/mMUAYjRDcO2NjMwXQyHI0FKinDWD79rEVv+PuXm8zmBkxmPvGRDz388MMhsgDbEkA84YQTpGuLwqST9GLpwFlqAdPshxhKJiZiYiaOkUNbyMuP3/ghZzF3rYvzei3FSzUzU8+G2mnGufzU0+bdf+Bhzxxa8WcmotHRUXXNp8FZTMJcftQHLg/Va5mcb11WO7N3gSTtUMv2xfe+970aoNX46bJly46Js9atW7dx48atW7fu2rUrRaZ++eAvt2zeKuSNFBHQOgcMwHzt296ye/fOufOe6YwFgFAWEsJJGyuNtY6QI6Zk70R++OGHvvHNr/sA1kKkVpSlXq8TME2Lr4ACgbEERXR1W3LW/dlb/pXRNDITfHH/vn233voZAAgMzhmg2EZNgkKhk9SwXXTRRWnFiLBJ6tNPzM1dvHhxNdMs+e598cMffv/Zz17lsrGYQBo91EolQepdO+wAprZwyfKDR0Ylkab0LW5q+WLEZTHKXL7uqldiCzzM3vfBj3Vws6g1pUAUIhXM/vzFCwABrRHn8A9/fCxITgbT9ddfr417dMlLly4dZw0llATjuzBV+kRVMt3T+ra0ME6QL+fcRRdddMkllwDAj370o02btuzdu/dXv/qVbECWZX19ffPmzbvkkuc8bc6cvr7z9+y5HwEYyFnYsXXLSSed9PVvfO2Flz7POQmAsLU2xBIYszxnCmvWvPMNV18TyQSwzzj1tCkZi4mIMtuqPkdwAHT33Xf/6pHfGGPKshwDFRA0mT5FDSY5fqxevVrjiJwYL72n0g3GGDMwMDA6OjppcmVZtjJevC/ky/g0oNZR3ntfFEWMPobm2992bWunEa3NrKsDuDddc20rH4hJNl98Lopehm3BFfHoaY9ERBTaU/I+tn13ij4GsezE/J73vKdSjiGZaOM46/TTTy/LsizLQ4cOaaMFa+3555+f6uO0r1xfX1+atq6+Rft03gq3yAPUOAjaoxPK8xyAKPJHbrxx1apVV7zgCmKG6CNEALjlkzd/5zvfXrfhnlNOOcUaEwEsQKDoTAYERIwWECgz1LlWq51G3soMLssyz+ut2ESSuCy/CAKqNZ+T5HxMzMxTVyh1jlImkhiHlJ2k7pj6vul3oZE+Qsdsd7OKMTRjaP7u1w8/8+lPdQAAJs/r7WiVu+NLX24GDsyRA3FszYJa/OLDaAeeknnKE4W52kmqraVpXQIzizWs1D1VdJZJs9W1wEP7e02sDxJmEQw6TWLS4J0mH4zlaCTYhvZTkZBtWQZjMzTuv8x56i8ffvhlL3sxAJVlExGNtYjw6iv/7tkrV40MNSlEBCPujXKEs3nn8pgELLIxcrNZwvgmZzp/TQZJeapaIy0+p1bITkz+rhT0TKzLa38n76Mo+HaHMFspINDKV+ccUEtIGZAgxDJkzt1511fvbKeMSa2A4M4hkHNS6KNWxYUg+MmUcUmKMTLJ1nrvXZbV2qUWmpmkG6k1bFoRqsDWGLH27t176NAh6X2SBlNTcCflrBjjzJkzzzrrrEr9u8Y7tNpEVpi2+xrnkSAyE7bIx1leR5A8Wi91T1LThczAxlkDDKJjrMUQAxA45yjClHgEs7HWoB13OIVxRZ5CR1msODRZlp1wwglz586Vy6SV3thnxYoVlRLKzmH3tO/ZpEV8abOLFJnRDJyJI0xsulkRJfmrmJx+0lsWLVokmiiEsH79eu13IEm0or/Wrl2rK01T8yu52JyAEKkRb0XKFLpKY6udC75Vso5a+at5pGkNvmq09MexfBXTSj4QXFz+aiwvxZG0DHliHwi5sdFoqFEWPZvGBCskU99dvcj0MqOPl3KhSnX1pA3ZpJxQmeio9f/GGNGmaVHOuCBIkjymRiDPc8mZ0h5uabqdaBblYqnVShvhaRfX9GCr9bWpAtWOcJC0VEnT/nRrnWbL5Hm+cOHCPM8nPxYlOksD1/rXGLNu3bpJr1+wYIH0H5LOKJroUunPptO48MILpZPf8PDw3r17hR0ajcb8+fMhaYIiBvcPf/jDAw88UOmgV5bljBkzlixZIlpv3rx5WgIp/qBo7jzPL7zwQlHkRVFIbFRbwAkTSPdNGX/WrFlw8cUXKwnFJ2o7JpN/JtZKaBvaSXVWmlMum59WCFWYJc0L27Fjh2h6AEhP/22glUMIO3fuVEkcGBiooOZSd98+sXpm3rBhg4r5qlWrNEFfa6oBYMmSJfqgLVu2QLuP3sDAgEvL1CZqzUlDIAp4KlMctbMsjG/5WommaN2xyLgQd2hoqFUhNN7mpJMcHBxMu1bD+P47mnKQ9mtRB2h4eFi742nerPpPojFED4gf09XVZVJ9UelEMOlHSVOWpZ5yOseXlLHTnnyqNer1ujKL+ofSE6WS0pkGPmTDFKSW85NSTTZGRpPEhVRWVNgSAAAGi0lEQVS1yZakiQpSWSzcJDXxyg0y51aJHkzR9Xnz5s2TOg3qEBCRSEfnGuGNGzcK73R3d/f29tbrdc2U0y8iHTLU3r17Dx48mOf5gQMHFi1aJC1v58yZs23bNslFkLvEYtx3333aXvXgwYP33nuvKCaxntKjW4UmhLBnzx7t9TM0NLR9+3ahzoEDBxYsWCAe9Zw5c/bv3z8yMkJEBw4cSBMwjyluOJV8pQqis5+lajVt+aDaJC201z07//zzVQdt27atcvKYWJwFEzrJVqrd0hbiFdu6ZMkSndvmzZtTjaR/V65c+aR3ZktFQ/suaIRNjFpqYVVsU+9EEKEErgDtuZyufFyoPTlpac/o1JdMp6fz0RYOk4rLk04sFRwFDlPnKFWRaSWU5mJUWqqkFaQV9VrJG06746V5oROLBaW6P6W4NDefWBvypDdIlP0UG7d79+7BwUEhRH9/vxhBY4xgZ7KSjRs3lmWZZdnhw4d37tzZbDadcw8++OCiRYvErT106ND999+vO5G+EkA3YNasWWeccUZ6NhJH9IknntBO6GkV3GOPPbZz586yLEdGRn7729+ec845YgdGRkZ27dp1rBHpP11nTVQTlWcp6qR8pFVReq+g/vLZs2dPxTvT1Cj5kue5WB61sCJZMcatW7dW/I+Kk2GM6e/vV8fw3nvv/YvqrNSGqkylCLfYbFUx9Xq9LMvKqz4UBdGMfrXo6TlJdFZZllo1m7qBFcgl9QEkRCjgkiLsIQSJJP7ldFbaLjhtJ5civymckEY6lRCNRkOP1uJApOiuSLoM7pyTwkP1wjTRTKDdiWcGOepqtCLtjT6h88CTr7PUIe7r64N208IdO3boOxCWLl1aMfnMPGPGjHPPPVfuFQUkpJk5c+a5557b3d2drk3eYbF//37xRYeHh7dv3y4EmjVr1llnnSUSeuKJJy5evFiUetq7SFOQnXNnn3228mDV5V61alXlKCN71QHYUt83zWaahi5Ta6UnuLTwbPny5fK7nhYrXyr/u23btkoqmvxzYGBgqsSYdD4TowREpGdJa+3FF19slC6VFxp0AB4qR7zOPf86q7NKiV5abyt4gPayVQBW0xP1bKSYn0JMqX+nAYEOQGYlg3Ri6+AWF2uHz/TSChqXeuG686p0p9eaSsOUqcKKMcqCBbQTH0KWKm6X9tiC9ksr5AAg/6Xd7tJWd5U1T7T4+r3SAFqvh3ZHfTdp93RjzJIlS9SOVPpcyv2HDx/WDmHH+64sADjzzDNnzpwpHVd37twpYddZs2bJgrMsO3LkyO7du8W0dXd3L1y4UN9YsmvXrjzPRSbkJOi9P3DggAaZ6vX6GWec0dXVVRTF/PnzhXnT0odJ+asiWIg4e/Zs8QGzLDv99NNh1apVAjNpJ2JFi1KRTk9zFQ1yLH7WpDiXfqnA+SmviaD19/crLrZu3brJOwElH4n3pXwkkXoh/URgLlXWqQKVu8Yw+PSFHCkgN/H1JtWmne3I4DTelZWCpemrwFIUVFEzsffp4UPP3np4qlgefbGUOCLSKgzajfZSEVGhmQhwV5xVKZ7J0hCpJn9PVdOlb4CqFPpMz6uotHytsJvIuD5C27Zqs0AxNbVaTb6oNdBGi5LMJ+GSSY97KXUq3Z+FyzSwhIhOnFcR6fvvv//gwYOaV5MqyIluhEYiBCOfBhqhYTsdSpWr6J1FixYVRYGIc+fO3b59u0z1kUcekdoaY8zQ0NCePXtEzc2ePXvu3LnyEr/TTjtN8C9jTE9PT29vr1BheHh49+7dijHos5xzixYtSskkNB0dHd2+fbsQoaenB1avXj2pppg2xqDsnQKbaRbJRAgfxveOlL9Lly5VGRckMs0Ok3u3bt2qYpXmJQgmJQOed955qnTknRcw4S0olYwzVVvy3j+5bOnSpW7iy7umfaypvJFv0hdPTBVPrUTCK+9tCO0+WaqY5H9Tf3iqF+mJ3ql0R0yNTxpDqQAS6VSzLHOpIKgfMO2mrjLjZrMp8HGqCwTxkP44aRxfGgGmTo22OSmKQpD1sX4S1koSWnp4lKH0eo1Oaj9Z8dfSh6YaXU3ZxFWri9cC4yR7WWHfNCB4XMTSd44NDg6KWpUR+vv7G40GEY2MjKRd4NRLFt0k75xTQF2aTmqudXd394oVK4QEvb296ql3dXUtX75cFLz+Lnj/8uXLRX/19vZqw4aenp5ly5al4ShZsrSrm9g2uVarLVu2TDasv7///wMCmdZm6AM8jAAAAABJRU5ErkJggg=="

/***/ }),

/***/ 2944:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Forms_PasswordInput__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2945);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(605);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(420);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








var AccountPermissionsMigrate = function (_React$Component) {
    _inherits(AccountPermissionsMigrate, _React$Component);

    function AccountPermissionsMigrate() {
        _classCallCheck(this, AccountPermissionsMigrate);

        var _this = _possibleConstructorReturn(this, (AccountPermissionsMigrate.__proto__ || Object.getPrototypeOf(AccountPermissionsMigrate)).call(this));

        _this.state = {
            validPassword: false,
            pass: null,
            generatedPassword: "P" + bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["key"].get_random_key().toWif().toString()
        };
        return _this;
    }

    _createClass(AccountPermissionsMigrate, [{
        key: "onSubmit",
        value: function onSubmit() {}
    }, {
        key: "onPasswordChange",
        value: function onPasswordChange(e) {
            var valid = e.valid;

            var name = this.props.account.get("name");

            var active = !valid ? null : stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__["default"].generateKeyFromPassword(name, "active", e.value).pubKey;
            var owner = !valid ? null : stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__["default"].generateKeyFromPassword(name, "owner", e.value).pubKey;
            var memo = !valid ? null : stores_WalletDb__WEBPACK_IMPORTED_MODULE_2__["default"].generateKeyFromPassword(name, "memo", e.value).pubKey;
            this.setState({ validPassword: e.valid, pass: e.value });
            this.props.onSetPasswordKeys({ active: active, owner: owner, memo: memo });
        }
    }, {
        key: "checkKeyUse",
        value: function checkKeyUse(key, role) {
            if (!key) return false;
            if (role === "memo") {
                return key === this.props.memoKey;
            } else {
                return this.props[role + "Keys"].reduce(function (a, b) {
                    return b === key || a;
                }, false);
            }
        }
    }, {
        key: "_onUseKey",
        value: function _onUseKey(role) {
            var remove = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

            if (remove) {
                this.props[role === "active" ? "onRemoveActive" : "onRemoveOwner"](this.props[role], "_keys");
            } else if (this.props[role]) {
                var weights = {
                    active: this.props.account.getIn(["active", "weight_threshold"]),
                    owner: this.props.account.getIn(["owner", "weight_threshold"])
                };
                console.log("key", this.props[role], "weights", weights, "weight of role:", weights[role]);
                this.props[role === "active" ? "onAddActive" : role === "owner" ? "onAddOwner" : "onSetMemo"](this.props[role], weights[role]);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var activeInUse = this.checkKeyUse(this.props.active && this.props.active, "active");
            var ownerInUse = this.checkKeyUse(this.props.owner && this.props.owner, "owner");
            var memoInUse = this.checkKeyUse(this.props.memo && this.props.memo, "memo");

            var useText = counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("account.perm.use_text");
            var removeText = counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("account.perm.remove_text");

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    { style: { maxWidth: "800px" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.password_model_1" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    { style: { maxWidth: "800px" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "wallet.password_model_1" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    { style: { maxWidth: "800px" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { unsafe: true, content: "wallet.password_model_2" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "divider" }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "form",
                    {
                        style: { maxWidth: "40rem" },
                        onSubmit: this.onSubmit.bind(this),
                        noValidate: true
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "label",
                        { className: "left-label" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "wallet.generated" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "p",
                        null,
                        this.state.generatedPassword
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "p",
                        { style: { fontWeight: "bold" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.password_model_2" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Forms_PasswordInput__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        ref: "password",
                        confirmation: true,
                        onChange: this.onPasswordChange.bind(this),
                        noLabel: true,
                        passwordLength: 12,
                        checkStrength: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    { className: "table" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            { className: activeInUse ? "in-use" : "" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.new_active" }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                this.props.active
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "text-right" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "button",
                                        onClick: this._onUseKey.bind(this, "active", activeInUse)
                                    },
                                    activeInUse ? removeText : useText
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            { className: ownerInUse ? "in-use" : "" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.new_owner" }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                this.props.owner
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "text-right" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "button",
                                        onClick: this._onUseKey.bind(this, "owner", ownerInUse)
                                    },
                                    ownerInUse ? removeText : useText
                                )
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            { className: memoInUse ? "in-use" : "" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.new_memo" }),
                                ":"
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                null,
                                this.props.memo
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "td",
                                { className: "text-right" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "button",
                                        style: {
                                            visibility: memoInUse ? "hidden" : ""
                                        },
                                        onClick: this._onUseKey.bind(this, "memo", memoInUse)
                                    },
                                    useText
                                )
                            )
                        )
                    )
                ),
                memoInUse ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "p",
                    {
                        style: { maxWidth: "800px", paddingTop: 10 },
                        className: "has-error"
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.memo_warning" })
                ) : null
            );
        }
    }]);

    return AccountPermissionsMigrate;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountPermissionsMigrate);

/***/ }),

/***/ 2945:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var zxcvbn_async__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2651);
/* harmony import */ var zxcvbn_async__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(zxcvbn_async__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _Utility_CopyButton__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2341);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }









var PasswordInput = function (_Component) {
    _inherits(PasswordInput, _Component);

    function PasswordInput(props) {
        _classCallCheck(this, PasswordInput);

        var _this = _possibleConstructorReturn(this, (PasswordInput.__proto__ || Object.getPrototypeOf(PasswordInput)).call(this));

        _this.handleChange = _this.handleChange.bind(_this);
        _this.onKeyDown = _this.onKeyDown.bind(_this);
        _this.state = {
            value: props.value || "",
            error: null,
            wrong: false,
            doesnt_match: false
        };
        return _this;
    }

    _createClass(PasswordInput, [{
        key: "value",
        value: function value() {
            var node = this.refs.password;
            return node ? node.value : "";
        }
    }, {
        key: "clear",
        value: function clear() {
            this.refs.password.value = "";
            if (this.props.confirmation) this.refs.confirm_password.value = "";
        }
    }, {
        key: "focus",
        value: function focus() {
            this.refs.password.focus();
        }
    }, {
        key: "valid",
        value: function valid() {
            return !(this.state.error || this.state.wrong || this.state.doesnt_match) && this.state.value.length >= this.props.passwordLength;
        }
    }, {
        key: "handleChange",
        value: function handleChange(e) {
            e.preventDefault();
            e.stopPropagation();
            var confirmation = this.props.confirmation ? this.refs.confirm_password.value : true;
            var password = this.refs.password.value;
            var doesnt_match = this.props.confirmation ? confirmation && password !== confirmation : false;

            var strength = 0,
                score = void 0;
            if (this.props.checkStrength) {
                if (this.state.value.length > 100) {
                    strength = { score: 4 };
                } else {
                    var zxcvbn = zxcvbn_async__WEBPACK_IMPORTED_MODULE_4___default.a.load({ sync: true });
                    strength = zxcvbn(this.state.value || "");
                }
                /* Require a length of passwordLength + 50% for the max score */
                score = Math.min(5, strength.score + Math.floor(this.state.value.length / (this.props.passwordLength * 1.5)));
            }

            var state = {
                valid: !this.state.error && !this.state.wrong && !(this.props.confirmation && doesnt_match) && confirmation && password.length >= this.props.passwordLength,
                value: password,
                score: score,
                doesnt_match: doesnt_match
            };
            if (this.props.onChange) this.props.onChange(state);
            this.setState(state);
        }
    }, {
        key: "onKeyDown",
        value: function onKeyDown(e) {
            if (this.props.onEnter && e.keyCode === 13) this.props.onEnter(e);
        }
    }, {
        key: "render",
        value: function render() {
            var _state = this.state,
                score = _state.score,
                value = _state.value;
            var _props = this.props,
                copy = _props.copy,
                visible = _props.visible,
                readonly = _props.readonly;

            var password_error = null,
                confirmation_error = null;
            if (this.state.wrong || this.props.wrongPassword) password_error = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "wallet.pass_incorrect" })
            );else if (this.state.error) password_error = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                this.state.error
            );
            if (!this.props.noValidation && !password_error && this.state.value.length > 0 && this.state.value.length < this.props.passwordLength) password_error = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                    content: "wallet.pass_length",
                    minLength: this.props.passwordLength
                })
            );
            if (this.state.doesnt_match) confirmation_error = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "wallet.confirm_error" })
            );
            var password_class_name = classnames__WEBPACK_IMPORTED_MODULE_2___default()("form-group", {
                "has-error": password_error
            });
            var password_confirmation_class_name = classnames__WEBPACK_IMPORTED_MODULE_2___default()("form-group", {
                "has-error": this.state.doesnt_match
            });
            // let {noLabel} = this.props;

            var confirmMatch = false;
            if (this.refs.confirm_password && this.refs.confirm_password.value && !this.state.doesnt_match) {
                confirmMatch = true;
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "account-selector" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: password_class_name },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "section",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "label",
                            {
                                className: "left-label " + (this.props.labelClass || "")
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "wallet.enter_password" })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "generated-password-section" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                style: {
                                    marginBottom: this.props.checkStrength ? 0 : null,
                                    display: copy ? "inline" : "block"
                                },
                                id: "current-password",
                                name: "password",
                                type: visible ? "text" : "password",
                                ref: "password",
                                autoComplete: "current-password",
                                onChange: this.handleChange,
                                onKeyDown: this.onKeyDown,
                                value: value,
                                readOnly: readonly
                            }),
                            copy && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_CopyButton__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                text: value,
                                tip: "tooltip.copy_password",
                                dataPlace: "top",
                                className: "button password-copy-button"
                            })
                        ),
                        this.props.checkStrength ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("progress", {
                            style: { height: 10 },
                            className: score === 5 ? "high" : score === 4 ? "medium" : "low",
                            value: score,
                            max: "5",
                            min: "0"
                        }) : null
                    ),
                    password_error
                ),
                this.props.confirmation ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: password_confirmation_class_name },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "label",
                        { className: "left-label" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "wallet.confirm_password" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "section",
                        {
                            style: { position: "relative", maxWidth: "30rem" }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                            id: "confirm_password",
                            name: "confirm_password",
                            type: "password",
                            ref: "confirm_password",
                            autoComplete: "confirm-password",
                            onChange: this.handleChange
                        }),
                        confirmMatch ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "ok-indicator success" },
                            "OK"
                        ) : null
                    ),
                    confirmation_error
                ) : null
            );
        }
    }]);

    return PasswordInput;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

PasswordInput.propTypes = {
    onChange: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,
    onEnter: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,
    confirmation: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,
    wrongPassword: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,
    noValidation: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,
    noLabel: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,
    passwordLength: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.number,
    checkStrength: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,
    value: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,
    copy: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,
    visible: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,
    readonly: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool
};
PasswordInput.defaultProps = {
    confirmation: false,
    wrongPassword: false,
    noValidation: false,
    noLabel: false,
    passwordLength: 8,
    checkStrength: false,
    value: "",
    copy: false,
    visible: false,
    readonly: false
};


/* harmony default export */ __webpack_exports__["default"] = (PasswordInput);

/***/ }),

/***/ 2946:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2941);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(420);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1894);
/* harmony import */ var stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(718);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_7__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }










/**
 * @brief Allows the user to enter a public key
 */

var PubKeyInput = function (_React$Component) {
    _inherits(PubKeyInput, _React$Component);

    function PubKeyInput(props) {
        _classCallCheck(this, PubKeyInput);

        return _possibleConstructorReturn(this, (PubKeyInput.__proto__ || Object.getPrototypeOf(PubKeyInput)).call(this, props));
    }

    _createClass(PubKeyInput, [{
        key: "isValidPubKey",
        value: function isValidPubKey(value) {
            return !!bitsharesjs__WEBPACK_IMPORTED_MODULE_4__["PublicKey"].fromPublicKeyString(value);
        }
    }, {
        key: "onInputChanged",
        value: function onInputChanged(event) {
            var value = event.target.value.trim();
            this.props.onChange(value);
        }
    }, {
        key: "onKeyDown",
        value: function onKeyDown(event) {
            if (event.keyCode === 13) this.onAction(event);
        }
    }, {
        key: "onAction",
        value: function onAction(event) {
            event.preventDefault();
            if (this.props.onAction && this.state.valid && !this.props.disableActionButton) {
                this.props.onAction(event);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var error = this.props.error;
            if (!error && this.props.value && !this.isValidPubKey(this.props.value)) error = "Not a valid public key";
            var action_class = classnames__WEBPACK_IMPORTED_MODULE_1___default()("button", {
                disabled: error || this.props.disableActionButton
            });
            var keys = stores_PrivateKeyStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().keys;
            var has_private = this.isValidPubKey(this.props.value) && keys.has(this.props.value);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "pubkey-input no-overflow" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-area" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "header-area" },
                        !error && this.props.value && this.isValidPubKey(this.props.value) ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "label",
                            { className: "right-label" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.perm.valid_pub" })
                        ) : null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                            className: "left-label",
                            component: "label",
                            content: this.props.label
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "input-area" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            { className: "inline-label" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "account-image" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    components_PrivateKeyView__WEBPACK_IMPORTED_MODULE_3__["default"],
                                    { pubkey: this.props.value },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                        name: "key",
                                        title: "icons.key",
                                        size: "4x"
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", {
                                type: "text",
                                className: has_private ? "my-key" : "",
                                value: this.props.value,
                                placeholder: this.props.placeholder || counterpart.translate("account.public_key"),
                                ref: "user_input",
                                onChange: this.onInputChanged.bind(this),
                                onKeyDown: this.onKeyDown.bind(this),
                                tabIndex: this.props.tabIndex
                            }),
                            this.props.onAction ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "button",
                                {
                                    className: action_class,
                                    onClick: this.onAction.bind(this)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, {
                                    content: this.props.action_label
                                })
                            ) : null
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "error-area has-error" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "span",
                            null,
                            error
                        )
                    )
                )
            );
        }
    }]);

    return PubKeyInput;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

PubKeyInput.propTypes = {
    label: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string.isRequired, // a translation key for the label
    value: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string, // current value
    error: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string, // the error message override
    placeholder: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string, // the placeholder text to be displayed when there is no user_input
    onChange: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.func, // a method to be called any time user input changes
    onAction: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.func, // a method called when Add button is clicked
    tabIndex: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.number, // tabindex property to be passed to input tag
    disableActionButton: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.bool // use it if you need to disable action button
};

/* harmony default export */ __webpack_exports__["default"] = (PubKeyInput);

/***/ }),

/***/ 2958:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2946);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2003);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2929);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2959);
/* harmony import */ var _Account_SignedMessage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2960);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }












/** This component gives a user interface for signing and verifying messages with the bitShares memo key.
 *  It consists of two tabs:
 *    - Sign message tab (code prefix: tabSM)
 *    - Verify message tab (code prefix: tabVM)
 *
 *  See SignedMessageAction for details on message format.
 *
 *    @author Stefan Schiessl <stefan.schiessl@blockchainprojectsbv.com>
 */

var AccountSignedMessages = function (_React$Component) {
    _inherits(AccountSignedMessages, _React$Component);

    function AccountSignedMessages(props) {
        _classCallCheck(this, AccountSignedMessages);

        // initialize state (do not use setState method!)
        var _this = _possibleConstructorReturn(this, (AccountSignedMessages.__proto__ || Object.getPrototypeOf(AccountSignedMessages)).call(this, props));

        _this.state = {
            tabsm_memo_key: _this.props.account.get("options").get("memo_key"),
            tabsm_popup: "",
            tabsm_message_text: "",
            tabsm_message_signed: "",
            tabvm_popup: "",
            tabvm_message_signed: "",
            tabvm_verified: null,
            tabvm_message_signed_and_verified: null,
            tabvm_flag_verifyonchange: false
        };
        return _this;
    }

    /**
     * Event when user pushes sign button. Memo message and meta will be signed and displayed
     * in the bottom textarea
     *
     * @param event
     */


    _createClass(AccountSignedMessages, [{
        key: "_tabSMSignAction",
        value: function _tabSMSignAction(event) {
            var _this2 = this;

            event.preventDefault();

            try {
                // validate keys are still the same. Better: make public memokey field uneditable
                var storedKey = this.props.account.get("options").get("memo_key");
                if (this.state.tabsm_memo_key !== storedKey) {
                    throw Error(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.keymismatch"));
                }

                // there should be a message entered
                if (this.state.tabsm_message_text) {
                    this._tabSMPopMessage(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.signing"), 0);
                    _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_7__["default"].signMessage(this.props.account, this.state.tabsm_message_text).then(function (res) {
                        _this2.setState({
                            tabsm_message_signed: res,
                            tabsm_popup: "" // clear loading message
                        });
                    }).catch(function (err) {
                        _this2._tabSMPopMessage(err.message);
                        _this2.setState({
                            tabsm_message_signed: null
                        });
                    });
                }
            } catch (err) {
                this._tabSMPopMessage(err.message);
                this.setState({
                    tabsm_message_signed: null
                });
            }
        }
    }, {
        key: "_tabSMHandleChange",
        value: function _tabSMHandleChange(event) {
            // event for textarea
            this.setState({ tabsm_message_text: event.target.value });
        }
    }, {
        key: "_tabSMHandleChangeKey",
        value: function _tabSMHandleChangeKey(value) {
            // event for textfield of public key
            this.setState({ tabsm_memo_key: value });
        }
    }, {
        key: "_tabSMCopyToClipBoard",
        value: function _tabSMCopyToClipBoard(event) {
            // event when user clicks into the signed message textarea
            if (event.target.value !== "") {
                event.target.focus();
                event.target.select();

                try {
                    var successful = document.execCommand("copy");
                    this._tabSMPopMessage(successful ? counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.copysuccessful") : counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.copyunsuccessful"));
                } catch (err) {
                    this._tabSMPopMessage(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.copyunsuccessful"));
                }
            }
        }

        /**
         * Displays an information to the user that disappears over time
         *
         * @param message
         * @param timeout
         */

    }, {
        key: "_tabSMPopMessage",
        value: function _tabSMPopMessage(message) {
            var _this3 = this;

            var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3000;

            this.setState({
                tabsm_popup: message
            });

            if (message !== "" && timeout > 0) {
                setTimeout(function () {
                    _this3.setState({
                        tabsm_popup: ""
                    });
                }, timeout);
            }
        }

        /**
         * Event when the user tries to verify a message, either manual through the button or onChange of the textarea.
         * The message is parsed and verified, the user gets the message restated in the bottom part of the site
         *
         * @param event
         */

    }, {
        key: "_tabVMAction",
        value: function _tabVMAction(event) {
            var _this4 = this;

            event.preventDefault();

            // reset to unverified state
            this.setState({
                tabvm_message_signed_and_verified: null,
                tabvm_verified: false
            });

            // attempt verifying
            if (this.state.tabvm_message_signed) {
                this._tabVMPopMessage(counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.verifying"), 0);

                setTimeout(function () {
                    // do not block gui
                    try {
                        var message_signed_and_verified = _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_7__["default"].verifyMemo(_this4.state.tabvm_message_signed);
                        _this4.setState({
                            tabvm_message_signed_and_verified: message_signed_and_verified,
                            tabvm_verified: true,
                            tabvm_popup: "" // clear verifying message
                        });
                    } catch (err) {
                        _this4._tabVMPopMessage(err.message);
                        _this4.setState({
                            tabvm_message_signed_and_verified: null,
                            tabvm_verified: false
                        });
                    }
                }, 0);
            }
        }
    }, {
        key: "_tabVMHandleChange",
        value: function _tabVMHandleChange(event) {
            // onchange event of the input textarea
            this.setState({
                tabvm_message_signed: event.target.value,
                tabvm_verified: false,
                tabvm_message_signed_and_verified: null
            });
            if (this.state.tabvm_flag_verifyonchange) {
                this._tabVMAction(event);
            }
        }

        /**
         * Displays an information to the user that disappears over time
         *
         * @param message
         * @param timeout
         */

    }, {
        key: "_tabVMPopMessage",
        value: function _tabVMPopMessage(message) {
            var _this5 = this;

            var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3000;

            this.setState({
                tabvm_popup: message
            });

            if (message !== "" && timeout > 0) {
                setTimeout(function () {
                    _this5.setState({
                        tabvm_popup: ""
                    });
                }, timeout);
            }
        }
    }, {
        key: "_tabVMToggleVerifyOnChange",
        value: function _tabVMToggleVerifyOnChange() {
            // event when the user enables / disables verifying while typing
            this.setState({
                tabvm_flag_verifyonchange: !this.state.tabvm_flag_verifyonchange
            });
        }
    }, {
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tabs"],
                            {
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block",
                                setting: "accountSignedMessagesTab",
                                contentClass: "grid-content shrink small-vertical medium-horizontal padding",
                                segmented: false
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tab"],
                                { title: "account.signedmessages.signmessage" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "grid-content",
                                        style: { overflowX: "hidden" }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "content-block no-margin" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "h3",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.signmessage" })
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Forms_PubKeyInput__WEBPACK_IMPORTED_MODULE_2__["default"], {
                                        ref: "memo_key",
                                        value: this.state.tabsm_memo_key,
                                        label: "account.perm.memo_public_key",
                                        placeholder: "Public Key",
                                        tabIndex: 7,
                                        onChange: this._tabSMHandleChangeKey.bind(this),
                                        disableActionButton: true
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                        rows: "10",
                                        value: this.state.tabsm_message_text,
                                        onChange: this._tabSMHandleChange.bind(this),
                                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.entermessage")
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "button",
                                            {
                                                className: "button",
                                                onClick: this._tabSMSignAction.bind(this)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.sign" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { style: { color: "gray" } },
                                            this.state.tabsm_popup
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                        rows: "14",
                                        value: this.state.tabsm_message_signed,
                                        style: { editable: false },
                                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.automaticcreation"),
                                        onClick: this._tabSMCopyToClipBoard.bind(this)
                                    })
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tab"],
                                { title: "account.signedmessages.verifymessage" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        className: "grid-content",
                                        style: { overflowX: "hidden" }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "content-block no-margin" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "h3",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.verifymessage" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                style: {
                                                    float: "right",
                                                    marginTop: "0.1em",
                                                    marginBottom: "0.5em"
                                                }
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "table",
                                                null,
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "tr",
                                                    null,
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        null,
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                            "label",
                                                            {
                                                                style: {
                                                                    marginBottom: 0,
                                                                    marginRight: "0.5rem"
                                                                }
                                                            },
                                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.verifyonchange" })
                                                        )
                                                    ),
                                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                        "td",
                                                        null,
                                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_9__["Switch"], {
                                                            checked: this.state.tabvm_flag_verifyonchange,
                                                            onChange: this._tabVMToggleVerifyOnChange.bind(this)
                                                        })
                                                    )
                                                )
                                            )
                                        )
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea", {
                                        rows: "10",
                                        value: this.state.tabvm_message_signed,
                                        onChange: this._tabVMHandleChange.bind(this),
                                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_6___default.a.translate("account.signedmessages.entermessage")
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "button",
                                            {
                                                className: "button",
                                                onClick: this._tabVMAction.bind(this)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.signedmessages.verify" })
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "text",
                                            { style: { color: "gray" } },
                                            this.state.tabvm_popup
                                        ),
                                        this.state.tabvm_verified !== null && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            { style: { float: "right" } },
                                            "Message is:",
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "div",
                                                {
                                                    style: {
                                                        backgroundColor: this.state.tabvm_verified ? "green" : "red"
                                                    }
                                                },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "label",
                                                    null,
                                                    this.state.tabvm_verified ? "verified" : "not verified"
                                                )
                                            )
                                        ),
                                        (this.state.tabvm_verified && this.state.tabvm_message_signed_and_verified !== null || this.state.tabvm_flag_verifyonchange) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            null,
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_SignedMessage__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                                message: this.state.tabvm_message_signed
                                            })
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountSignedMessages;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountSignedMessages.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAccount.isRequired
};

AccountSignedMessages = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(AccountSignedMessages);

/* harmony default export */ __webpack_exports__["default"] = (AccountSignedMessages);

/***/ }),

/***/ 2959:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var alt_instance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(555);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(420);
/* harmony import */ var actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(604);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(605);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }







var MSG_HEAD = "-----BEGIN BITSHARES SIGNED MESSAGE-----";
var MSG_META = "-----BEGIN META-----";
var MSG_SIGNATURE = "-----BEGIN SIGNATURE-----";
var MSG_FOOT = "-----END BITSHARES SIGNED MESSAGE-----";
var MSG_SENDER = "account";
var MSG_PUBLICKEY = "memokey";
var MSG_BLOCK = "block";
var MSG_DATE = "timestamp";

/** This action provides following functionalities:
 *    - Sign a message
 *    - Verify a given message
 *
 *  The message format that is underlying is as follows:
 *  -----BEGIN BITSHARES SIGNED MESSAGE-----
 *  <message from the account>
 *  -----BEGIN META-----
 *  account=<account name>
 *  memokey=<account memo public key>
 *  block=<last irreversible block>
 *  timestamp=<current time>
 *  -----BEGIN SIGNATURE-----
 *  <signature>
 *  -----END BITSHARES SIGNED MESSAGE-----
 *
 *    @author Stefan Schiessl <stefan.schiessl@blockchainprojectsbv.com>
 */

var SignedMessageAction = function () {
    function SignedMessageAction() {
        _classCallCheck(this, SignedMessageAction);
    }

    _createClass(SignedMessageAction, [{
        key: "parseMessage",

        /**
         * Parses the given raw string to a processing friendly dictionary
         *
         * @param message Message as raw string, properly formatted with head/meta/signature/footer
         *
         * @returns {*} parsed message as dictionary with the following fields:
         *              content : User message of the message
         *              meta : Dictionary with the meta data
         *                      account : Account name of the signer
         *                      key : Memo public key of the signer
         *                      block : Current last irreversible block of the bitShares blockchain
         *                      timestamp : Time the message was signed in UTC format
         *              signed : Seperate string that contains all data that will be signed (content + meta)
         *              signature : Signature of the signed data
         */
        value: function parseMessage(message) {
            var messageContent = void 0,
                messageMeta = void 0,
                messageSignature = void 0,
                messageSignedContent = void 0;
            try {
                // cut the sections
                messageContent = message.split(MSG_HEAD)[1]; // everything before the head is ignored
                messageMeta = messageContent.split(MSG_META);
                messageContent = messageMeta[0].replace(/^\n|\n$/g, "");
                messageSignature = messageMeta[1].split(MSG_SIGNATURE);
                messageMeta = messageSignature[0].trim();
                messageSignature = messageSignature[1].split(MSG_FOOT)[0].trim(); // everything after footer is ignored

                // how the signed content it built is crucial, consider encapsulating
                messageSignedContent = messageContent + "\n" + messageMeta;
            } catch (err) {
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidformat"));
            }

            var messageMetaAccount = void 0,
                messageMetaKey = void 0,
                messageMetaBlock = void 0,
                messageMetaTimestamp = void 0;
            if (messageMeta) {
                try {
                    // process meta
                    // ... sender
                    messageMetaAccount = messageMeta.split(MSG_SENDER + "=");
                    messageMetaAccount = messageMetaAccount[1].split("\n")[0].trim();

                    // ... and its public key
                    messageMetaKey = messageMeta.split(MSG_PUBLICKEY + "=");
                    messageMetaKey = messageMetaKey[1].split("\n")[0].trim();

                    // ... block number
                    messageMetaBlock = messageMeta.split(MSG_BLOCK + "=");
                    messageMetaBlock = messageMetaBlock[1].split("\n")[0].trim();

                    // ... time stamp
                    messageMetaTimestamp = messageMeta.split(MSG_DATE + "=");
                    messageMetaTimestamp = messageMetaTimestamp[1].split("\n")[0].trim();
                } catch (err) {
                    throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidformat"));
                }
            }

            return {
                content: messageContent,
                meta: {
                    account: messageMetaAccount,
                    key: messageMetaKey,
                    block: messageMetaBlock,
                    timestamp: messageMetaTimestamp
                },
                signed: messageSignedContent,
                signature: messageSignature
            };
        }

        /**
         * The given string message is parsed and then its signature verified. A positive verification return the parsed
         * message, anything else throws an exeption.
         *
         * @param message Message as raw string, properly formatted with head/meta/signature/footer, or already parsed message
         *
         * @returns parsed message, see parseMessage
         */

    }, {
        key: "verifyMemo",
        value: function verifyMemo(message) {
            var message_signed = void 0;
            if (typeof message === "string" || message instanceof String) {
                message_signed = this.parseMessage(message);
            } else {
                // assume its a dictionary
                message_signed = message;
            }

            // validate account and key
            var storedAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getAccount(message_signed.meta.account);
            if (storedAccount == null) {
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invaliduser"));
            }

            // verify message signed
            var verified = false;
            try {
                verified = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["Signature"].fromHex(message_signed.signature).verifyBuffer(message_signed.signed, bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["PublicKey"].fromPublicKeyString(message_signed.meta.key));
            } catch (err) {
                // wrap message that could be raised from Signature
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.errorverifying"));
            }
            if (!verified) {
                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidsignature"));
            }
            return message_signed;
        }

        /**
         * Given an account and the message text
         * @param account Account that writes the message
         * @param messageText String text of the message
         * @returns {Promise}
         */

    }, {
        key: "signMessage",
        value: function signMessage(account, messageText) {
            return new Promise(function (resolve, reject) {
                // make sure wallet is unlocked (we need private key)
                actions_WalletUnlockActions__WEBPACK_IMPORTED_MODULE_3__["default"].unlock().then(function () {
                    try {
                        // obtain all necessary keys
                        var memo_from_public = account.get("options").get("memo_key");
                        // The 1s are base58 for all zeros (null)
                        if (/111111111111111111111/.test(memo_from_public)) {
                            memo_from_public = null;
                        }
                        var memo_from_privkey = void 0;
                        if (messageText && memo_from_public) {
                            memo_from_privkey = stores_WalletDb__WEBPACK_IMPORTED_MODULE_4__["default"].getPrivateKey(memo_from_public);
                            if (!memo_from_privkey) {
                                throw new Error(counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.signedmessages.invalidkey"));
                            }
                        }
                        // get other meta data
                        var irr_block = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["ChainStore"].getObject("2.1.0").get("last_irreversible_block_num");
                        var now = new Date();

                        var meta = MSG_SENDER + "=" + account.get("name") + "\n" + MSG_PUBLICKEY + "=" + memo_from_public + "\n" + MSG_BLOCK + "=" + irr_block + "\n" + MSG_DATE + "=" + now.toUTCString();

                        var messageContentToBeSigned = messageText + "\n" + meta;

                        setTimeout(function () {
                            // do not block gui
                            try {
                                var memo_signature = bitsharesjs__WEBPACK_IMPORTED_MODULE_2__["Signature"].signBuffer(messageContentToBeSigned, memo_from_privkey, memo_from_public);
                                var memo_formatted = MSG_HEAD + "\n" + messageText + "\n" + MSG_META + "\n" + meta + "\n" + MSG_SIGNATURE + "\n" + memo_signature.toHex() + "\n" + MSG_FOOT;
                                resolve(memo_formatted);
                            } catch (err) {
                                reject(err);
                            }
                        }, 0);
                    } catch (err) {
                        reject(err);
                    }
                }).catch(function (res) {
                    reject(res);
                });
            });
        }
    }]);

    return SignedMessageAction;
}();

/* harmony default export */ __webpack_exports__["default"] = (alt_instance__WEBPACK_IMPORTED_MODULE_0__["default"].createActions(SignedMessageAction));

/***/ }),

/***/ 2960:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2959);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }







/** This component allows to display and verify a signed message
 *
 *  See SignedMessageAction for details on message format.
 *
 *    @author Stefan Schiessl <stefan.schiessl@blockchainprojectsbv.com>
 */

var SignedMessage = function (_React$Component) {
    _inherits(SignedMessage, _React$Component);

    function SignedMessage(props) {
        _classCallCheck(this, SignedMessage);

        var _this = _possibleConstructorReturn(this, (SignedMessage.__proto__ || Object.getPrototypeOf(SignedMessage)).call(this, props));

        _this.state = {
            message: _this.props.message,
            messageParsed: null,
            showRawMessage: false,
            //
            noVerification: _this.props.noVerification,
            //
            verified: null,
            //
            notification: null
        };
        return _this;
    }
    // static propTypes = {
    //     signedMessage: PropTypes.string.isRequired
    //    noVerification
    // };

    _createClass(SignedMessage, [{
        key: "_verifyMessage",
        value: function _verifyMessage(signedMessage) {
            var _this2 = this;

            this.setState({
                message: signedMessage,
                messageParsed: null,
                verified: null
            });
            var messageParsed = null;
            try {
                messageParsed = _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_4__["default"].parseMessage(signedMessage);
                this.setState({
                    verified: null,
                    messageParsed: messageParsed
                });

                if (!this.state.noVerification) {
                    this.setState({
                        verified: null,
                        notification: counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate("account.signedmessages.verifying")
                    });
                    setTimeout(function () {
                        // do not block gui
                        try {
                            _actions_SignedMessageAction__WEBPACK_IMPORTED_MODULE_4__["default"].verifyMemo(messageParsed);
                            _this2.setState({
                                verified: true,
                                notification: "" // clear popup
                            });
                        } catch (err) {
                            _this2._warning(err.message);
                            _this2.setState({
                                verified: false
                            });
                        }
                    }, 0);
                }
            } catch (err) {
                this._warning(err.message);
            }
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            this._verifyMessage(this.state.message);
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            var signedMessage = nextProps.message;
            if (signedMessage != undefined && signedMessage != null && signedMessage == this.state.message) {
                // already done
                return;
            }
            this._verifyMessage(signedMessage);
        }
    }, {
        key: "_warning",
        value: function _warning(message) {
            this.setState({
                notification: message
            });
        }
    }, {
        key: "_toggleRawMessage",
        value: function _toggleRawMessage() {
            this.setState({
                showRawMessage: !this.state.showRawMessage
            });
        }
    }, {
        key: "render",
        value: function render() {
            var legendMessage = void 0;
            var borderColor = void 0;
            if (this.state.messageParsed != null) {
                if (this.state.verified == null) {
                    borderColor = "#FFF";
                    legendMessage = "Unverified message from " + this.state.messageParsed.meta.account;
                } else if (this.state.verified) {
                    borderColor = "#FFF";
                    legendMessage = "Verified message from " + this.state.messageParsed.meta.account;
                } else {
                    borderColor = "#F00";
                    legendMessage = "Refuted message, indicated sender " + this.state.messageParsed.meta.account;
                }
            }
            var messageGiven = this.props.message != null && this.props.message != "";
            var notificationGiven = this.state.notification && this.state.notification != "";
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { style: { color: "gray", margin: "10px 10px" } },
                this.state.messageParsed != null && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "fieldset",
                    { style: { borderColor: borderColor } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "legend",
                        { style: { color: "white", weight: "bold" } },
                        legendMessage
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "pre",
                        {
                            style: {
                                position: "relative",
                                width: "100%",
                                display: "table"
                            }
                        },
                        this.state.messageParsed.content,
                        notificationGiven && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                style: {
                                    textAlign: "center",
                                    display: "table-cell",
                                    verticalAlign: "middle",
                                    position: "absolute",
                                    width: "calc(100% - 30px)",
                                    height: "calc(100% + 15px)",
                                    top: "0px",
                                    right: "30px",
                                    backgroundColor: "rgba(50,50,50,0.5)"
                                },
                                id: "overlay"
                            },
                            this.state.notification
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                fontSize: "small",
                                float: "right"
                            }
                        },
                        "Signed on ",
                        this.state.messageParsed.meta.timestamp,
                        " ",
                        "\xA0",
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                className: "button",
                                type: "button",
                                style: {
                                    fontSize: "small",
                                    float: "right",
                                    padding: "0px 0px",
                                    background: "#777"
                                },
                                onClick: this._toggleRawMessage.bind(this)
                            },
                            "\uD83D\uDD0D"
                        )
                    ),
                    this.state.showRawMessage && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                    this.state.showRawMessage && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                    this.state.showRawMessage && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            style: {
                                overflow: "auto",
                                width: "calc(100%)",
                                maxWidth: "1000px"
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "pre",
                            null,
                            this.state.message
                        )
                    )
                ),
                messageGiven && this.state.messageParsed == null && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "fieldset",
                    { style: { borderColor: "#F00" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "legend",
                        {
                            style: { color: "red", weight: "bold" },
                            className: "error"
                        },
                        "Error while parsing message, please check syntax from message below"
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "pre",
                        null,
                        this.props.message
                    )
                )
            );
        }
    }]);

    return SignedMessage;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

SignedMessage.defaultProps = {
    noVerification: false
};


/* harmony default export */ __webpack_exports__["default"] = (SignedMessage);

/***/ }),

/***/ 2961:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(420);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(725);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1886);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2929);
/* harmony import */ var chain_account_constants_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2465);
/* harmony import */ var chain_account_constants_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(chain_account_constants_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2139);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(527);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2003);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2443);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(602);
/* harmony import */ var stores_WalletDb_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(605);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
















var AccountRow = function (_React$Component) {
    _inherits(AccountRow, _React$Component);

    function AccountRow() {
        _classCallCheck(this, AccountRow);

        return _possibleConstructorReturn(this, (AccountRow.__proto__ || Object.getPrototypeOf(AccountRow)).apply(this, arguments));
    }

    _createClass(AccountRow, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                account = _props.account,
                onRemove = _props.onRemove;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    this.props.index
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    account.get("id")
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_11__["default"], { account: account.get("id") })
                ),
                onRemove ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "button",
                        {
                            onClick: onRemove.bind(this, account.get("id")),
                            className: "button outline"
                        },
                        "Remove"
                    )
                ) : null
            );
        }
    }]);

    return AccountRow;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountRow.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_9__["default"].ChainAccount.isRequired
};
AccountRow.defaultProps = {
    tempComponent: "tr"
};

AccountRow = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_10__["default"])(AccountRow);

var AccountList = function (_React$Component2) {
    _inherits(AccountList, _React$Component2);

    function AccountList() {
        _classCallCheck(this, AccountList);

        return _possibleConstructorReturn(this, (AccountList.__proto__ || Object.getPrototypeOf(AccountList)).apply(this, arguments));
    }

    _createClass(AccountList, [{
        key: "_onRemove",
        value: function _onRemove(listing, account, e) {
            if (account) {
                var currentState = this.props.getCurrentState(account);
                var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_12__["default"].new_transaction();
                tr.add_type_operation("account_whitelist", {
                    fee: {
                        amount: 0,
                        asset_id: bitsharesjs__WEBPACK_IMPORTED_MODULE_1__["ChainStore"].assets_by_symbol.get(this.props.settings.get("fee_asset")) || "1.3.0"
                    },
                    authorizing_account: this.props.account.get("id"),
                    account_to_list: account,
                    new_listing: currentState - chain_account_constants_js__WEBPACK_IMPORTED_MODULE_5___default.a.account_listing[listing]
                });
                stores_WalletDb_js__WEBPACK_IMPORTED_MODULE_13__["default"].process_transaction(tr, null, true);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props2 = this.props,
                removeButton = _props2.removeButton,
                white = _props2.white,
                list = _props2.list;


            var rows = list.map(function (account, index) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountRow, {
                    key: account,
                    onRemove: removeButton ? _this3._onRemove.bind(_this3, white ? "white_listed" : "black_listed") : null,
                    account: account,
                    index: index + 1
                });
            }).toArray();

            var showHeaders = true;
            if (!rows.length) {
                showHeaders = false;
                rows.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: "empty" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            style: { padding: "1rem 0" },
                            colSpan: removeButton ? 4 : 3
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_8___default.a, {
                            content: this.props.emptyText,
                            account: this.props.account.get("name")
                        })
                    )
                ));
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "table",
                { className: "table compact dashboard-table" },
                showHeaders ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "thead",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tr",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            "#"
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_8___default.a, { content: "account.id" })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "th",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_8___default.a, { content: "account.name" })
                        ),
                        removeButton ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null) : null
                    )
                ) : null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tbody",
                    null,
                    rows
                )
            );
        }
    }]);

    return AccountList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountList = Object(alt_react__WEBPACK_IMPORTED_MODULE_3__["connect"])(AccountList, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_2__["default"]];
    },
    getProps: function getProps() {
        return {
            settings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_2__["default"].getState().settings
        };
    }
});

var AccountWhitelist = function (_React$Component3) {
    _inherits(AccountWhitelist, _React$Component3);

    function AccountWhitelist(props) {
        _classCallCheck(this, AccountWhitelist);

        var _this4 = _possibleConstructorReturn(this, (AccountWhitelist.__proto__ || Object.getPrototypeOf(AccountWhitelist)).call(this, props));

        _this4.state = {
            accountName: "",
            accountToList: null
        };
        return _this4;
    }

    _createClass(AccountWhitelist, [{
        key: "_getCurrentState",
        value: function _getCurrentState(id) {
            var account = this.props.account;

            var white = account.get("whitelisted_accounts") || immutable__WEBPACK_IMPORTED_MODULE_7___default.a.List();
            var black = account.get("blacklisted_accounts") || immutable__WEBPACK_IMPORTED_MODULE_7___default.a.List();
            var current = chain_account_constants_js__WEBPACK_IMPORTED_MODULE_5___default.a.account_listing.no_listing;

            if (white.includes(id)) {
                current += chain_account_constants_js__WEBPACK_IMPORTED_MODULE_5___default.a.account_listing.white_listed;
            }

            if (black.includes(id)) {
                current += chain_account_constants_js__WEBPACK_IMPORTED_MODULE_5___default.a.account_listing.black_listed;
            }

            return current;
        }
    }, {
        key: "_onAdd",
        value: function _onAdd(listing, e) {
            var accountToList = this.state.accountToList;
            var account = this.props.account;


            var currentState = this._getCurrentState(accountToList);

            if (accountToList) {
                var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_12__["default"].new_transaction();
                tr.add_type_operation("account_whitelist", {
                    fee: {
                        amount: 0,
                        asset_id: "1.3.0"
                    },
                    authorizing_account: account.get("id"),
                    account_to_list: accountToList,
                    new_listing: currentState + chain_account_constants_js__WEBPACK_IMPORTED_MODULE_5___default.a.account_listing[listing]
                });
                stores_WalletDb_js__WEBPACK_IMPORTED_MODULE_13__["default"].process_transaction(tr, null, true);
            }
        }
    }, {
        key: "_onAccountFound",
        value: function _onAccountFound(account) {
            console.log("accountFound:", account);
            this.setState({
                accountName: account ? account.get("name") : null,
                accountToList: account ? account.get("id") : null
            });
        }
    }, {
        key: "_onAccountChanged",
        value: function _onAccountChanged(account) {
            console.log("account changed:", account);
            this.setState({
                accountName: account,
                accountToList: null
            });
        }
    }, {
        key: "render",
        value: function render() {
            var account = this.props.account;
            var accountName = this.state.accountName;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_4__["Tabs"],
                            {
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block",
                                setting: "whitelistTab",
                                contentClass: "grid-content shrink small-vertical medium-horizontal no-padding",
                                segmented: false
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_4__["Tab"],
                                { title: "account.whitelist.title" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty",
                                            account: account,
                                            getCurrentState: this._getCurrentState.bind(this),
                                            list: account.get("whitelisted_accounts") || immutable__WEBPACK_IMPORTED_MODULE_7___default.a.List(),
                                            removeButton: true,
                                            white: true
                                        })
                                    ),
                                    !account.get("whitelisted_accounts") ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "p",
                                        { className: "has-error" },
                                        "Please note, whitelisting is not working yet due to unresolved backend issue."
                                    ) : null,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { padding: "2rem 0" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                            label: "account.whitelist.add",
                                            accountName: accountName,
                                            onAccountChanged: this._onAccountFound.bind(this),
                                            onChange: this._onAccountChanged.bind(this),
                                            account: accountName,
                                            tabIndex: 2,
                                            onAction: this._onAdd.bind(this, "white_listed"),
                                            action_label: "account.perm.confirm_add",
                                            white: false,
                                            typeahead: true
                                        })
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_4__["Tab"],
                                { title: "account.whitelist.black" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty_black",
                                            account: account,
                                            getCurrentState: this._getCurrentState.bind(this),
                                            list: account.get("blacklisted_accounts"),
                                            removeButton: true
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { style: { padding: "2rem 1rem" } },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                            label: "account.whitelist.add_black",
                                            accountName: accountName,
                                            onAccountChanged: this._onAccountFound.bind(this),
                                            onChange: this._onAccountChanged.bind(this),
                                            account: accountName,
                                            tabIndex: 2,
                                            onAction: this._onAdd.bind(this, "black_listed"),
                                            action_label: "account.perm.confirm_add",
                                            typeahead: true
                                        })
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_4__["Tab"],
                                { title: "account.whitelist.white_by" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty_white_by",
                                            account: account,
                                            list: account.get("whitelisting_accounts")
                                        })
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_4__["Tab"],
                                { title: "account.whitelist.black_by" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        style: { paddingBottom: "1rem" },
                                        className: "small-12"
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountList, {
                                            emptyText: "account.whitelist.empty_black_by",
                                            account: account,
                                            list: account.get("blacklisting_accounts")
                                        })
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountWhitelist;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountWhitelist);

/***/ }),

/***/ 2962:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2963);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(527);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(570);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(420);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2003);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2002);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1846);
/* harmony import */ var api_ApplicationApi__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(603);
/* harmony import */ var _AccountSelector__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2139);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1894);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(725);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(553);
/* harmony import */ var _Voting_Witnesses__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2964);
/* harmony import */ var _Voting_Committee__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2967);
/* harmony import */ var _Voting_Workers__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2969);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }





















var WITNESSES_KEY = "witnesses";
var COMMITTEE_KEY = "committee";

var AccountVoting = function (_React$Component) {
    _inherits(AccountVoting, _React$Component);

    function AccountVoting(props) {
        _classCallCheck(this, AccountVoting);

        var _this = _possibleConstructorReturn(this, (AccountVoting.__proto__ || Object.getPrototypeOf(AccountVoting)).call(this, props));

        _this.onRemoveProxy = function () {
            _this.publish(null);
        };

        var proxyId = props.proxy.get("id");
        var proxyName = props.proxy.get("name");
        var accountName = typeof props.account === "string" ? props.account : props.account.get("name");
        _this.state = {
            proxy_account_id: proxyId === "1.2.5" ? "" : proxyId, //"1.2.16",
            prev_proxy_account_id: proxyId === "1.2.5" ? "" : proxyId,
            current_proxy_input: proxyId === "1.2.5" ? "" : proxyName,
            witnesses: null,
            committee: null,
            vote_ids: immutable__WEBPACK_IMPORTED_MODULE_2___default.a.Set(),
            proxy_vote_ids: immutable__WEBPACK_IMPORTED_MODULE_2___default.a.Set(),
            lastBudgetObject: props.initialBudget.get("id"),
            all_witnesses: immutable__WEBPACK_IMPORTED_MODULE_2___default.a.List(),
            all_committee: immutable__WEBPACK_IMPORTED_MODULE_2___default.a.List(),
            hideLegacyProposals: true,
            filterSearch: "",
            tabs: [{
                name: "witnesses",
                link: "/account/" + accountName + "/voting/witnesses",
                translate: "explorer.witnesses.title",
                content: _Voting_Witnesses__WEBPACK_IMPORTED_MODULE_16__["default"]
            }, {
                name: "committee",
                link: "/account/" + accountName + "/voting/committee",
                translate: "explorer.committee_members.title",
                content: _Voting_Committee__WEBPACK_IMPORTED_MODULE_17__["default"]
            }, {
                name: "workers",
                link: "/account/" + accountName + "/voting/workers",
                translate: "account.votes.workers_short",
                content: _Voting_Workers__WEBPACK_IMPORTED_MODULE_18__["default"]
            }]
        };

        _this.onProxyAccountFound = _this.onProxyAccountFound.bind(_this);
        _this.onPublish = _this.onPublish.bind(_this);
        _this.onReset = _this.onReset.bind(_this);
        _this._getVoteObjects = _this._getVoteObjects.bind(_this);
        return _this;
    }

    _createClass(AccountVoting, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            common_account_utils__WEBPACK_IMPORTED_MODULE_4__["default"].getFinalFeeAsset(this.props.account, "account_update");
            bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].fetchAllWorkers();
            this.getBudgetObject();
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            this.updateAccountData(this.props);
            this._getVoteObjects();
            this._getVoteObjects("committee");
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, ns) {
            return np.location.pathname !== this.props.location.pathname || ns.prev_proxy_account_id !== this.state.prev_proxy_account_id || ns.hideLegacyProposals !== this.state.hideLegacyProposals || ns.vote_ids.size !== this.state.vote_ids.size || ns.current_proxy_input !== this.state.current_proxy_input || ns.filterSearch !== this.state.filterSearch || ns.witnesses !== this.state.witnesses || ns.committee !== this.state.committee;
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.account !== this.props.account) {
                var proxyId = np.proxy.get("id");
                var newState = {
                    proxy_account_id: proxyId === "1.2.5" ? "" : proxyId
                };
                this.setState({ prev_proxy_account_id: newState.proxy_account_id });
                this.updateAccountData(np, newState);
            }
            this.getBudgetObject();
        }
    }, {
        key: "updateAccountData",
        value: function updateAccountData(_ref) {
            var _this2 = this;

            var account = _ref.account;
            var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state;
            var proxy_account_id = state.proxy_account_id;

            var proxy = bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getAccount(proxy_account_id);
            var options = account.get("options");
            var proxyOptions = proxy ? proxy.get("options") : null;
            // let proxy_account_id = proxy ? proxy.get("id") : "1.2.5";
            var current_proxy_input = proxy ? proxy.get("name") : "";
            if (proxy_account_id === "1.2.5") {
                proxy_account_id = "";
                current_proxy_input = "";
            }

            var votes = options.get("votes");
            var vote_ids = votes.toArray();
            var vids = immutable__WEBPACK_IMPORTED_MODULE_2___default.a.Set(vote_ids);
            bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getObjectsByVoteIds(vote_ids);

            var proxyPromise = null,
                proxy_vids = immutable__WEBPACK_IMPORTED_MODULE_2___default.a.Set([]);
            var hasProxy = proxy_account_id !== "1.2.5";
            if (hasProxy && proxyOptions) {
                var proxy_votes = proxyOptions.get("votes");
                var proxy_vote_ids = proxy_votes.toArray();
                proxy_vids = immutable__WEBPACK_IMPORTED_MODULE_2___default.a.Set(proxy_vote_ids);
                bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getObjectsByVoteIds(proxy_vote_ids);

                proxyPromise = Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getObjectByVoteID, proxy_vote_ids, 10000);
            }

            Promise.all([Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getObjectByVoteID, vote_ids, 10000), proxyPromise]).then(function (res) {
                var _res = _slicedToArray(res, 2),
                    vote_objs = _res[0],
                    proxy_vote_objs = _res[1];

                function sortVoteObjects(objects) {
                    var witnesses = new immutable__WEBPACK_IMPORTED_MODULE_2___default.a.List();
                    var committee = new immutable__WEBPACK_IMPORTED_MODULE_2___default.a.List();
                    var workers = new immutable__WEBPACK_IMPORTED_MODULE_2___default.a.Set();
                    objects.forEach(function (obj) {
                        var account_id = obj.get("committee_member_account");
                        if (account_id) {
                            committee = committee.push(account_id);
                        } else if (account_id = obj.get("worker_account")) {
                            // console.log( "worker: ", obj );
                            //     workers = workers.add(obj.get("id"));
                        } else if (account_id = obj.get("witness_account")) {
                            witnesses = witnesses.push(account_id);
                        }
                    });

                    return { witnesses: witnesses, committee: committee, workers: workers };
                }

                var _sortVoteObjects = sortVoteObjects(vote_objs),
                    witnesses = _sortVoteObjects.witnesses,
                    committee = _sortVoteObjects.committee,
                    workers = _sortVoteObjects.workers;

                var _sortVoteObjects2 = sortVoteObjects(proxy_vote_objs || []),
                    proxy_witnesses = _sortVoteObjects2.witnesses,
                    proxy_committee = _sortVoteObjects2.committee,
                    proxy_workers = _sortVoteObjects2.workers;

                var state = {
                    proxy_account_id: proxy_account_id,
                    current_proxy_input: current_proxy_input,
                    witnesses: witnesses,
                    committee: committee,
                    workers: workers,
                    proxy_witnesses: proxy_witnesses,
                    proxy_committee: proxy_committee,
                    proxy_workers: proxy_workers,
                    vote_ids: vids,
                    proxy_vote_ids: proxy_vids,
                    prev_witnesses: witnesses,
                    prev_committee: committee,
                    prev_workers: workers,
                    prev_vote_ids: vids
                };
                _this2.setState(state);
            });
        }
    }, {
        key: "isChanged",
        value: function isChanged() {
            var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state;

            return s.proxy_account_id !== s.prev_proxy_account_id || s.witnesses !== s.prev_witnesses || s.committee !== s.prev_committee || !immutable__WEBPACK_IMPORTED_MODULE_2___default.a.is(s.vote_ids, s.prev_vote_ids);
        }
    }, {
        key: "_getVoteObjects",
        value: function _getVoteObjects() {
            var _this3 = this;

            var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : WITNESSES_KEY;
            var vote_ids = arguments[1];

            var current = this.state["all_" + type];
            var isWitness = type === WITNESSES_KEY;
            var lastIdx = void 0;
            if (!vote_ids) {
                vote_ids = [];
                var active = this.props.globalObject.get(isWitness ? "active_witnesses" : "active_committee_members").sort(function (a, b) {
                    return parseInt(a.split(".")[2], 10) - parseInt(b.split(".")[2], 10);
                });
                var lastActive = active.last() || "1." + (isWitness ? "6" : "5") + ".1";
                lastIdx = parseInt(lastActive.split(".")[2], 10);
                for (var i = 1; i <= lastIdx + 10; i++) {
                    vote_ids.push("1." + (isWitness ? "6" : "5") + "." + i);
                }
            } else {
                lastIdx = parseInt(vote_ids[vote_ids.length - 1].split(".")[2], 10);
            }
            Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getObject, vote_ids, 5000, {}).then(function (vote_objs) {
                _this3.state["all_" + type] = current.concat(immutable__WEBPACK_IMPORTED_MODULE_2___default.a.List(vote_objs.filter(function (a) {
                    return !!a;
                }).map(function (a) {
                    return a.get(isWitness ? "witness_account" : "committee_member_account");
                })));
                if (!!vote_objs[vote_objs.length - 1]) {
                    // there are more valid vote objs, fetch 10 more
                    vote_ids = [];
                    for (var i = lastIdx + 11; i <= lastIdx + 20; i++) {
                        vote_ids.push("1." + (isWitness ? "6" : "5") + "." + i);
                    }
                    return _this3._getVoteObjects(type, vote_ids);
                }
                _this3.forceUpdate();
            });
        }
    }, {
        key: "onPublish",
        value: function onPublish() {
            this.publish(this.state.proxy_account_id);
        }
    }, {
        key: "publish",
        value: function publish(new_proxy_id) {
            var _this4 = this;

            var updated_account = this.props.account.toJS();
            var updateObject = { account: updated_account.id };
            var new_options = { memo_key: updated_account.options.memo_key };
            // updated_account.new_options = updated_account.options;
            new_options.voting_account = new_proxy_id ? new_proxy_id : "1.2.5";
            new_options.num_witness = this.state.witnesses.size;
            new_options.num_committee = this.state.committee.size;

            updateObject.new_options = new_options;
            // Set fee asset
            updateObject.fee = {
                amount: 0,
                asset_id: common_account_utils__WEBPACK_IMPORTED_MODULE_4__["default"].getFinalFeeAsset(updated_account.id, "account_update")
            };

            // Remove votes for expired workers
            var vote_ids = this.state.vote_ids;

            var workers = this._getWorkerArray();
            var now = new Date();

            function removeVote(list, vote) {
                if (list.includes(vote)) {
                    list = list.delete(vote);
                }
                return list;
            }

            workers.forEach(function (worker) {
                if (worker) {
                    if (new Date(worker.get("work_end_date")) <= now) {
                        vote_ids = removeVote(vote_ids, worker.get("vote_for"));
                    }

                    // TEMP Remove vote_against since they're no longer used
                    vote_ids = removeVote(vote_ids, worker.get("vote_against"));
                }
            });

            // Submit votes
            Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getWitnessById, this.state.witnesses.toArray(), 4000).then(function (res) {
                var witnesses_vote_ids = res.map(function (o) {
                    return o.get("vote_id");
                });
                return Promise.all([Promise.resolve(witnesses_vote_ids), Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getCommitteeMemberById, _this4.state.committee.toArray(), 4000)]);
            }).then(function (res) {
                updateObject.new_options.votes = res[0].concat(res[1].map(function (o) {
                    return o.get("vote_id");
                })).concat(vote_ids.filter(function (id) {
                    return id.split(":")[0] === "2";
                }).toArray()).sort(function (a, b) {
                    var a_split = a.split(":");
                    var b_split = b.split(":");

                    return parseInt(a_split[1], 10) - parseInt(b_split[1], 10);
                });
                api_ApplicationApi__WEBPACK_IMPORTED_MODULE_9__["default"].updateAccount(updateObject);
            });
        }
    }, {
        key: "_getWorkerArray",
        value: function _getWorkerArray() {
            var workerArray = [];

            bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].workers.forEach(function (workerId) {
                var worker = bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getObject(workerId, false, false);
                if (worker) workerArray.push(worker);
            });

            return workerArray;
        }
    }, {
        key: "onReset",
        value: function onReset() {
            var _this5 = this;

            var s = this.state;
            if (this.refs.voting_proxy && this.refs.voting_proxy.refs.bound_component) this.refs.voting_proxy.refs.bound_component.onResetProxy();
            this.setState({
                proxy_account_id: s.prev_proxy_account_id,
                current_proxy_input: s.prev_proxy_input,
                witnesses: s.prev_witnesses,
                committee: s.prev_committee,
                workers: s.prev_workers,
                vote_ids: s.prev_vote_ids
            }, function () {
                _this5.updateAccountData(_this5.props);
            });
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(collection, item_id) {
            var state = {};
            state[collection] = this.state[collection].push(item_id);
            this.setState(state);
        }
    }, {
        key: "onRemoveItem",
        value: function onRemoveItem(collection, item_id) {
            var state = {};
            state[collection] = this.state[collection].filter(function (i) {
                return i !== item_id;
            });
            this.setState(state);
        }
    }, {
        key: "onChangeVotes",
        value: function onChangeVotes(addVotes, removeVotes) {
            var state = {};
            state.vote_ids = this.state.vote_ids;
            if (addVotes.length) {
                addVotes.forEach(function (vote) {
                    state.vote_ids = state.vote_ids.add(vote);
                });
            }
            if (removeVotes) {
                removeVotes.forEach(function (vote) {
                    state.vote_ids = state.vote_ids.delete(vote);
                });
            }

            this.setState(state);
        }
    }, {
        key: "validateAccount",
        value: function validateAccount(collection, account) {
            if (!account) return null;
            if (collection === WITNESSES_KEY) {
                return Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getWitnessById, [account.get("id")], 3000).then(function (res) {
                    return res[0] ? null : "Not a witness";
                });
            }
            if (collection === "committee") {
                return Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getCommitteeMemberById, [account.get("id")], 3000).then(function (res) {
                    return res[0] ? null : "Not a committee member";
                });
            }
            return null;
        }
    }, {
        key: "onProxyChange",
        value: function onProxyChange(current_proxy_input) {
            var proxyAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getAccount(current_proxy_input);
            if (!proxyAccount || proxyAccount && proxyAccount.get("id") !== this.state.proxy_account_id) {
                this.setState({
                    proxy_account_id: "",
                    proxy_witnesses: immutable__WEBPACK_IMPORTED_MODULE_2___default.a.Set(),
                    proxy_committee: immutable__WEBPACK_IMPORTED_MODULE_2___default.a.Set(),
                    proxy_workers: immutable__WEBPACK_IMPORTED_MODULE_2___default.a.Set()
                });
            }
            this.setState({ current_proxy_input: current_proxy_input });
        }
    }, {
        key: "onProxyAccountFound",
        value: function onProxyAccountFound(proxy_account) {
            var _this6 = this;

            var proxy_account_id = proxy_account ? proxy_account.get("id") : "";
            if (this.state.proxy_account_id !== proxy_account_id) this.setState({
                proxy_account_id: proxy_account_id
            }, function () {
                _this6.updateAccountData(_this6.props);
            });
        }
    }, {
        key: "onClearProxy",
        value: function onClearProxy() {
            this.setState({
                proxy_account_id: ""
            });
        }
    }, {
        key: "getBudgetObject",
        value: function getBudgetObject() {
            var _this7 = this;

            var lastBudgetObject = this.state.lastBudgetObject;

            var budgetObject = void 0;
            budgetObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getObject(lastBudgetObject);
            var idIndex = parseInt(lastBudgetObject.split(".")[2], 10);
            if (budgetObject) {
                var timestamp = budgetObject.get("time");
                if (!/Z$/.test(timestamp)) {
                    timestamp += "Z";
                }
                var now = new Date();

                /* Use the last valid budget object to estimate the current budget object id.
                 ** Budget objects are created once per hour
                 */
                var currentID = idIndex + Math.floor((now - new Date(timestamp).getTime()) / 1000 / 60 / 60) - 1;
                if (idIndex >= currentID) return;
                var newID = "2.13." + Math.max(idIndex, currentID);
                var newIDInt = parseInt(newID.split(".")[2], 10);
                Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getObject, [newID], undefined, {}).then(function (res) {
                    var _res2 = _slicedToArray(res, 1),
                        lbo = _res2[0];

                    if (lbo === null) {
                        // The object does not exist, the id was too high
                        _this7.setState({ lastBudgetObject: "2.13." + (newIDInt - 1) }, _this7.getBudgetObject);
                    } else {
                        stores_SettingsStore__WEBPACK_IMPORTED_MODULE_13__["default"].setLastBudgetObject(newID);

                        _this7.setState({ lastBudgetObject: newID });
                    }
                });
            } else {
                // The object does not exist, decrement the ID
                var _newID = "2.13." + (idIndex - 1);
                Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["FetchChainObjects"])(bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getObject, [_newID], undefined, {}).then(function (res) {
                    var _res3 = _slicedToArray(res, 1),
                        lbo = _res3[0];

                    if (lbo === null) {
                        // The object does not exist, the id was too high
                        _this7.setState({ lastBudgetObject: "2.13." + (idIndex - 2) }, _this7.getBudgetObject);
                    } else {
                        stores_SettingsStore__WEBPACK_IMPORTED_MODULE_13__["default"].setLastBudgetObject(_newID);
                        _this7.setState({ lastBudgetObject: _newID });
                    }
                });
            }
        }
    }, {
        key: "handleFilterChange",
        value: function handleFilterChange(e) {
            this.setState({
                filterSearch: e.target.value || ""
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this8 = this;

            var _state = this.state,
                prev_proxy_account_id = _state.prev_proxy_account_id,
                hideLegacyProposals = _state.hideLegacyProposals,
                filterSearch = _state.filterSearch,
                all_witnesses = _state.all_witnesses,
                proxy_witnesses = _state.proxy_witnesses,
                witnesses = _state.witnesses,
                all_committee = _state.all_committee,
                proxy_committee = _state.proxy_committee,
                committee = _state.committee,
                vote_ids = _state.vote_ids,
                proxy_vote_ids = _state.proxy_vote_ids,
                proxy_account_id = _state.proxy_account_id;

            var accountHasProxy = !!prev_proxy_account_id;
            var preferredUnit = this.props.settings.get("unit") || "1.3.0";
            var hasProxy = !!proxy_account_id; // this.props.account.getIn(["options", "voting_account"]) !== "1.2.5";
            var _props = this.props,
                globalObject = _props.globalObject,
                account = _props.account;

            var _getBudgets2 = this._getBudgets(globalObject),
                totalBudget = _getBudgets2.totalBudget,
                workerBudget = _getBudgets2.workerBudget;

            var actionButtons = this._getActionButtons();

            var proxyInput = this._getProxyInput(accountHasProxy);

            var hideLegacy = this._getHideLegacyOptions();

            var onFilterChange = this.handleFilterChange.bind(this);
            var validateAccountHandler = this.validateAccount.bind(this, WITNESSES_KEY);
            var addWitnessHandler = this.onAddItem.bind(this, WITNESSES_KEY);
            var removeWitnessHandler = this.onRemoveItem.bind(this, WITNESSES_KEY);
            var onChangeVotes = this.onChangeVotes.bind(this);
            var getWorkerArray = this._getWorkerArray.bind(this);
            var addCommitteeHandler = this.onAddItem.bind(this, COMMITTEE_KEY);
            var removeCommitteeHandler = this.onRemoveItem.bind(this, COMMITTEE_KEY);

            var onTabChange = function onTabChange(value) {
                _this8.props.history.push(value);
            };

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "main-content grid-content" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "voting" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "padding" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "voting.title", component: "h1" }),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, {
                                content: "voting.description",
                                component: "p"
                            })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "proxy-row" },
                            proxyInput,
                            actionButtons
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__["Tabs"],
                        {
                            activeKey: this.props.location.pathname,
                            animated: false,
                            style: {
                                display: "table",
                                height: "100%",
                                width: "100%"
                            },
                            onChange: onTabChange
                        },
                        this.state.tabs.map(function (tab) {
                            var TabContent = tab.content;

                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__["Tabs"].TabPane,
                                {
                                    key: tab.link,
                                    tab: counterpart__WEBPACK_IMPORTED_MODULE_12___default.a.translate(tab.translate)
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TabContent, {
                                    all_witnesses: all_witnesses,
                                    proxy_witnesses: proxy_witnesses,
                                    witnesses: witnesses,
                                    proxy_account_id: proxy_account_id,
                                    onFilterChange: onFilterChange,
                                    validateAccountHandler: validateAccountHandler,
                                    addWitnessHandler: addWitnessHandler,
                                    removeWitnessHandler: removeWitnessHandler,
                                    hasProxy: hasProxy,
                                    globalObject: globalObject,
                                    filterSearch: filterSearch,
                                    account: account,
                                    all_committee: all_committee,
                                    proxy_committee: proxy_committee,
                                    committee: committee,
                                    addCommitteeHandler: addCommitteeHandler,
                                    removeCommitteeHandler: removeCommitteeHandler,
                                    vote_ids: vote_ids,
                                    proxy_vote_ids: proxy_vote_ids,
                                    hideLegacy: hideLegacy,
                                    preferredUnit: preferredUnit,
                                    totalBudget: totalBudget,
                                    workerBudget: workerBudget,
                                    hideLegacyProposals: hideLegacyProposals,
                                    onChangeVotes: onChangeVotes,
                                    getWorkerArray: getWorkerArray,
                                    viewSettings: _this8.props.viewSettings
                                })
                            );
                        })
                    )
                )
            );
        }
    }, {
        key: "_getBudgets",
        value: function _getBudgets(globalObject) {
            var budgetObject = void 0;
            if (this.state.lastBudgetObject) {
                budgetObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getObject(this.state.lastBudgetObject);
            }
            var totalBudget = 0;
            var workerBudget = globalObject ? parseInt(globalObject.getIn(["parameters", "worker_budget_per_day"]), 10) : 0;
            if (budgetObject) {
                workerBudget = Math.min(24 * budgetObject.getIn(["record", "worker_budget"]), workerBudget);
                totalBudget = Math.min(24 * budgetObject.getIn(["record", "worker_budget"]), workerBudget);
            }
            return { totalBudget: totalBudget, workerBudget: workerBudget };
        }
    }, {
        key: "_getProxyInput",
        value: function _getProxyInput(accountHasProxy) {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    _AccountSelector__WEBPACK_IMPORTED_MODULE_10__["default"],
                    {
                        label: "account.votes.proxy_short",
                        style: {
                            width: "50%",
                            maxWidth: 250,
                            display: "inline-block"
                        },
                        account: this.state.current_proxy_input,
                        accountName: this.state.current_proxy_input,
                        onChange: this.onProxyChange.bind(this),
                        onAccountChanged: this.onProxyAccountFound,
                        tabIndex: 1,
                        placeholder: counterpart__WEBPACK_IMPORTED_MODULE_12___default.a.translate("account.votes.set_proxy"),
                        tooltip: counterpart__WEBPACK_IMPORTED_MODULE_12___default.a.translate(!this.state.proxy_account_id ? "tooltip.proxy_search" : "tooltip.proxy_remove"),
                        hideImage: true
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                paddingLeft: 5,
                                position: "relative",
                                top: 9
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                            { to: "/help/voting" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_11__["default"], {
                                name: "question-circle",
                                title: "icons.question_circle",
                                size: "1x"
                            })
                        )
                    )
                ),
                accountHasProxy && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__["Button"],
                    {
                        style: { marginLeft: "1rem" },
                        onClick: this.onRemoveProxy,
                        tabIndex: 9
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.remove_proxy" })
                )
            );
        }
    }, {
        key: "_getHideLegacyOptions",
        value: function _getHideLegacyOptions() {
            var _this9 = this;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                {
                    className: "inline-block",
                    style: { marginLeft: "0.5em" },
                    onClick: function onClick() {
                        _this9.setState({
                            hideLegacyProposals: !_this9.state.hideLegacyProposals
                        });
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__["Tooltip"],
                    {
                        title: counterpart__WEBPACK_IMPORTED_MODULE_12___default.a.translate("tooltip.legacy_explanation")
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__["Switch"], {
                        style: { marginRight: 6, marginTop: -3 },
                        checked: this.state.hideLegacyProposals
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.votes.hide_legacy_proposals" })
                )
            );
        }
    }, {
        key: "_getActionButtons",
        value: function _getActionButtons() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__["Tooltip"],
                {
                    title: counterpart__WEBPACK_IMPORTED_MODULE_12___default.a.translate("account.votes.cast_votes_through_one_operation"),
                    mouseEnterDelay: 0.5
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    {
                        style: {
                            float: "right"
                        }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__["Button"],
                        {
                            type: "primary",
                            onClick: this.onPublish,
                            tabIndex: 4,
                            disabled: !this.isChanged() ? true : undefined
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.votes.publish" })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__["Button"],
                        {
                            style: { marginLeft: "8px" },
                            onClick: this.onReset,
                            tabIndex: 8
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_3___default.a, { content: "account.perm.reset" })
                    )
                )
            );
        }
    }]);

    return AccountVoting;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountVoting.propTypes = {
    initialBudget: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_7__["default"].ChainObject.isRequired,
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_7__["default"].ChainObject.isRequired,
    proxy: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_7__["default"].ChainAccount.isRequired
};
AccountVoting.defaultProps = {
    globalObject: "2.0.0"
};

AccountVoting = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(AccountVoting);

var FillMissingProps = function FillMissingProps(props) {
    var missingProps = {};
    if (!props.initialBudget) {
        missingProps.initialBudget = stores_SettingsStore__WEBPACK_IMPORTED_MODULE_13__["default"].getLastBudgetObject();
    }
    if (!props.account) {
        // don't use store listener, user might be looking at different account. this is for reasonable default
        var accountName = stores_AccountStore__WEBPACK_IMPORTED_MODULE_15__["default"].getState().currentAccount || stores_AccountStore__WEBPACK_IMPORTED_MODULE_15__["default"].getState().passwordAccount;
        accountName = accountName && accountName !== "null" ? accountName : "committee-account";
        missingProps.account = accountName;
    }
    if (!props.proxy) {
        var account = bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getAccount(props.account);
        var proxy = null;
        if (account) {
            proxy = account.getIn(["options", "voting_account"]);
        } else {
            throw "Account must be loaded";
        }
        missingProps.proxy = proxy;
    }

    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountVoting, _extends({}, props, missingProps));
};

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router__WEBPACK_IMPORTED_MODULE_1__["withRouter"])(FillMissingProps));

/***/ }),

/***/ 2964:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _VotingAccountsList__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2965);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Modal_JoinWitnessesModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2966);
/* harmony import */ var _Utility_SearchInput__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2830);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }










var Witnesses = function (_Component) {
    _inherits(Witnesses, _Component);

    function Witnesses(props) {
        _classCallCheck(this, Witnesses);

        var _this = _possibleConstructorReturn(this, (Witnesses.__proto__ || Object.getPrototypeOf(Witnesses)).call(this, props));

        _this.state = {
            showCreateWitnessModal: false
        };
        return _this;
    }

    _createClass(Witnesses, [{
        key: "render",
        value: function render() {
            var _this2 = this;

            var showWitnessModal = function showWitnessModal() {
                _this2.setState({
                    showCreateWitnessModal: !_this2.state.showCreateWitnessModal
                });
            };

            var onFilterChange = this.props.onFilterChange;
            var validateAccountHandler = this.props.validateAccountHandler;
            var addWitnessHandler = this.props.addWitnessHandler;
            var removeWitnessHandler = this.props.removeWitnessHandler;

            var showCreateWitnessModal = this.state.showCreateWitnessModal;
            var _props = this.props,
                all_witnesses = _props.all_witnesses,
                proxy_witnesses = _props.proxy_witnesses,
                witnesses = _props.witnesses,
                proxy_account_id = _props.proxy_account_id,
                hasProxy = _props.hasProxy,
                globalObject = _props.globalObject,
                filterSearch = _props.filterSearch,
                account = _props.account;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: classnames__WEBPACK_IMPORTED_MODULE_4___default()("content-block") },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "header-selector" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { style: { float: "right" } },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Button"],
                                { onClick: showWitnessModal },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.join_witnesses" })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "selector inline-block" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_SearchInput__WEBPACK_IMPORTED_MODULE_7__["default"], {
                                placeholder: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("explorer.witnesses.filter_by_name"),
                                value: filterSearch,
                                onChange: onFilterChange
                            })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_VotingAccountsList__WEBPACK_IMPORTED_MODULE_3__["default"], {
                        type: "witness",
                        label: "account.votes.add_witness_label",
                        items: all_witnesses,
                        validateAccount: validateAccountHandler,
                        onAddItem: addWitnessHandler,
                        onRemoveItem: removeWitnessHandler,
                        tabIndex: hasProxy ? -1 : 2,
                        supported: hasProxy ? proxy_witnesses : witnesses,
                        active: globalObject.get("active_witnesses"),
                        proxy: proxy_account_id,
                        filterSearch: filterSearch
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_JoinWitnessesModal__WEBPACK_IMPORTED_MODULE_6__["default"], {
                    visible: showCreateWitnessModal,
                    account: account,
                    hideModal: showWitnessModal
                })
            );
        }
    }]);

    return Witnesses;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

/* harmony default export */ __webpack_exports__["default"] = (Witnesses);

/***/ }),

/***/ 2965:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1894);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(420);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2002);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2146);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2003);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2443);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var components_Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2916);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(571);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }














function getWitnessOrCommittee(type, acct) {
    var url = "",
        votes = 0,
        account = void 0;
    if (type === "witness") {
        account = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getWitnessById(acct.get("id"));
    } else if (type === "committee") {
        account = bitsharesjs__WEBPACK_IMPORTED_MODULE_3__["ChainStore"].getCommitteeMemberById(acct.get("id"));
    }

    url = account ? account.get("url") : url;
    url = common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].sanitize(url);
    votes = account ? account.get("total_votes") : votes;
    return {
        url: url,
        votes: votes,
        id: account.get("id")
    };
}

var accountItemRow = function accountItemRow(props) {
    var account = props.account,
        type = props.type,
        action = props.action,
        isActive = props.isActive,
        idx = props.idx,
        proxy = props.proxy,
        onAction = props.onAction,
        key = props.key;

    var item_id = account.get("id");

    var _getWitnessOrCommitte = getWitnessOrCommittee(type, account),
        url = _getWitnessOrCommitte.url,
        votes = _getWitnessOrCommitte.votes;

    var link = url && url.length > 0 && url.indexOf("http") === -1 ? "http://" + url : url;
    var isSupported = action === "remove";

    return {
        key: key,
        num: idx + 1,
        name: account.get("id"),
        about: link && link.indexOf(".") !== -1 ? link : null,
        votes: votes,
        title: "account.votes." + (isActive ? "active_short" : "inactive"),
        supported: {
            translate: "settings." + (isSupported ? "yes" : "no"),
            proxy: proxy,
            item_id: item_id,
            onAction: onAction
        },
        toggle: { proxy: proxy, isSupported: isSupported, item_id: item_id, onAction: onAction }
    };
};

var VotingAccountsList = function (_React$Component) {
    _inherits(VotingAccountsList, _React$Component);

    function VotingAccountsList(props) {
        _classCallCheck(this, VotingAccountsList);

        var _this = _possibleConstructorReturn(this, (VotingAccountsList.__proto__ || Object.getPrototypeOf(VotingAccountsList)).call(this, props));

        _this.state = {
            selected_item: null,
            item_name_input: "",
            error: null
        };
        _this.onItemChange = _this.onItemChange.bind(_this);
        _this.onItemAccountChange = _this.onItemAccountChange.bind(_this);
        _this.onAddItem = _this.onAddItem.bind(_this);
        return _this;
    }

    _createClass(VotingAccountsList, [{
        key: "onItemChange",
        value: function onItemChange(item_name_input) {
            this.setState({ item_name_input: item_name_input });
        }
    }, {
        key: "onItemAccountChange",
        value: function onItemAccountChange(selected_item) {
            var _this2 = this;

            this.setState({ selected_item: selected_item, error: null });
            if (selected_item && this.props.validateAccount) {
                var res = this.props.validateAccount(selected_item);
                if (res === null) return;
                if (typeof res === "string") this.setState({ error: res });else res.then(function (error) {
                    return _this2.setState({ error: error });
                });
            }
        }
    }, {
        key: "onAddItem",
        value: function onAddItem(item) {
            if (!item) return;
            var next_state = {
                selected_item: null,
                item_name_input: "",
                error: null
            };
            this.setState(next_state);
            this.props.onAddItem(item.get("id"));
        }
    }, {
        key: "getHeader",
        value: function getHeader() {
            var _this3 = this;

            var cw = ["10%", "20%", "40%", "20%", "10%"];
            return [{
                title: "#",
                dataIndex: "num",
                align: "right",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                whiteSpace: "nowrap"
                            }
                        },
                        item
                    );
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.votes.name" }),
                dataIndex: "name",
                align: "left",
                sorter: function sorter(a, b) {
                    return a.key > b.key ? 1 : a.key < b.key ? -1 : 0;
                },
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                maxWidth: cw[1],
                                whiteSpace: "nowrap"
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_7__["default"], { account: item })
                    );
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.votes.about" }),
                dataIndex: "about",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                maxWidth: cw[2],
                                whiteSpace: "nowrap"
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            {
                                href: item,
                                target: "_blank",
                                rel: "noopener noreferrer"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_2__["default"], { name: "share", title: "icons.share" })
                        )
                    );
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.votes.votes" }),
                dataIndex: "votes",
                sorter: function sorter(a, b) {
                    return a.votes - b.votes;
                },
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                maxWidth: cw[3],
                                whiteSpace: "nowrap"
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_5__["default"], {
                            amount: item,
                            asset: "1.3.0",
                            decimalOffset: 5,
                            hide_asset: true
                        })
                    );
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.votes.status.title" }),
                dataIndex: "title",
                sorter: function sorter(a, b) {
                    return a.title > b.title ? 1 : a.title < b.title ? -1 : 0;
                },
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                maxWidth: cw[4],
                                whiteSpace: "nowrap"
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: item })
                    );
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.votes.supported" }),
                dataIndex: "supported",
                align: "center",
                sorter: function sorter(a, b) {
                    return a.supported.translate > b.supported.translate ? 1 : a.supported.translate < b.supported.translate ? -1 : 0;
                },
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                maxWidth: cw[0],
                                whiteSpace: "nowrap"
                            },
                            className: item.proxy ? "" : "clickable",
                            onClick: item.proxy ? function () {} : item.onAction.bind(_this3, item.item_id)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: item.translate })
                    );
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.votes.toggle" }),
                dataIndex: "toggle",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                maxWidth: cw[5],
                                whiteSpace: "nowrap"
                            },
                            className: item.proxy ? "" : "clickable",
                            onClick: item.proxy ? function () {} : item.onAction.bind(_this3, item.item_id)
                        },
                        !item.proxy ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_2__["default"], {
                            name: item.isSupported ? "checkmark-circle" : "minus-circle",
                            title: item.isSupported ? "icons.checkmark_circle.yes" : "icons.minus_circle.no"
                        }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_2__["default"], {
                            name: "locked",
                            title: "icons.locked.action"
                        })
                    );
                }
            }];
        }
    }, {
        key: "_decideRowClassName",
        value: function _decideRowClassName(row, index) {
            return row.toggle.isSupported ? "" : "unsupported";
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            if (!this.props.items) return null;

            var header = this.getHeader();

            var item_rows = this.props.items.filter(function (i) {
                if (!i) return false;
                if (_this4.props.filterSearch) {
                    if (i.get("name").indexOf(_this4.props.filterSearch) !== -1 || i.get("id").indexOf(_this4.props.filterSearch) !== -1) {
                        return true;
                    } else {
                        return false;
                    }
                }
                return true;
            }).sort(function (a, b) {
                var _getWitnessOrCommitte2 = getWitnessOrCommittee(_this4.props.type, a),
                    a_votes = _getWitnessOrCommitte2.votes;

                var _getWitnessOrCommitte3 = getWitnessOrCommittee(_this4.props.type, b),
                    b_votes = _getWitnessOrCommitte3.votes;

                if (a_votes !== b_votes) {
                    return parseInt(b_votes, 10) - parseInt(a_votes, 10);
                } else if (a.get("name") > b.get("name")) {
                    return 1;
                } else if (a.get("name") < b.get("name")) {
                    return -1;
                } else {
                    return 0;
                }
            }).map(function (i, idx) {
                var action = _this4.props.supported && _this4.props.supported.includes(i.get("id")) ? "remove" : "add";
                var isActive = _this4.props.active.includes(getWitnessOrCommittee(_this4.props.type, i).id);
                return accountItemRow({
                    idx: idx,
                    key: i.get("name"),
                    account: i,
                    type: _this4.props.type,
                    onAction: action === "add" ? _this4.props.onAddItem : _this4.props.onRemoveItem,
                    isSelected: _this4.props.items.indexOf(i) !== -1,
                    action: action,
                    isActive: isActive,
                    proxy: _this4.props.proxy
                });
            });

            var error = this.state.error;
            if (!error && this.state.selected_item && this.props.items.indexOf(this.state.selected_item) !== -1) {
                error = counterpart__WEBPACK_IMPORTED_MODULE_8___default.a.translate("account.votes.already");
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                item_rows.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_10__["default"], {
                    className: "table dashboard-table table-hover",
                    rowClassName: this._decideRowClassName.bind(this),
                    rows: item_rows,
                    header: header,
                    pageSize: 20,
                    label: "utility.total_x_assets",
                    leftPadding: "1.5rem"
                }) : null
            );
        }
    }]);

    return VotingAccountsList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

VotingAccountsList.propTypes = {
    items: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainObjectsList,
    onAddItem: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func.isRequired,
    onRemoveItem: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func.isRequired,
    validateAccount: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func,
    label: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string.isRequired, // a translation key for the label,
    placeholder: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string, // the placeholder text to be displayed when there is no user_input
    tabIndex: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.number, // tabindex property to be passed to input tag
    action: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,
    filterSearch: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string
};
VotingAccountsList.defaultProps = {
    action: "remove",
    filterSearch: null
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_6__["default"])(VotingAccountsList));

/***/ }),

/***/ 2966:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2139);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(569);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1894);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(420);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(571);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var JoinWitnessesModal = function (_React$Component) {
    _inherits(JoinWitnessesModal, _React$Component);

    function JoinWitnessesModal(props) {
        _classCallCheck(this, JoinWitnessesModal);

        var _this = _possibleConstructorReturn(this, (JoinWitnessesModal.__proto__ || Object.getPrototypeOf(JoinWitnessesModal)).call(this, props));

        _this.isValidPubKey = function (value) {
            return !bitsharesjs__WEBPACK_IMPORTED_MODULE_7__["PublicKey"].fromPublicKeyString(value);
        };

        _this.state = _this.getInitialState(props);
        return _this;
    }

    _createClass(JoinWitnessesModal, [{
        key: "getInitialState",
        value: function getInitialState(props) {
            return {
                witnessAccount: props.account,
                signingKey: "",
                url: ""
            };
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, ns) {
            return this.state.url !== ns.visible || this.props.visible !== np.visible || this.state.signingKey !== ns.signingKey || this.state.witnessAccount !== ns.witnessAccount;
        }
    }, {
        key: "onAddWitness",
        value: function onAddWitness() {
            var _state = this.state,
                witnessAccount = _state.witnessAccount,
                signingKey = _state.signingKey,
                url = _state.url;


            if (witnessAccount && signingKey) {
                actions_AccountActions__WEBPACK_IMPORTED_MODULE_3__["default"].createWitness({
                    account: witnessAccount,
                    url: url,
                    signingKey: signingKey
                });
            }
            this.props.hideModal();
        }
    }, {
        key: "onChangeCommittee",
        value: function onChangeCommittee(account) {
            this.setState({
                witnessAccount: account
            });
        }
    }, {
        key: "onMemoKeyChanged",
        value: function onMemoKeyChanged(e) {
            this.setState({
                signingKey: e.target.value
            });
        }
    }, {
        key: "onUrlChanged",
        value: function onUrlChanged(e) {
            this.setState({
                url: common_utils__WEBPACK_IMPORTED_MODULE_8__["default"].sanitize(e.target.value.toLowerCase())
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _state2 = this.state,
                witnessAccount = _state2.witnessAccount,
                signingKey = _state2.signingKey,
                url = _state2.url;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Modal"],
                {
                    title: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.witness.create_witness"),
                    onCancel: this.props.hideModal,
                    visible: this.props.visible,
                    footer: [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Button"],
                        {
                            key: "submit",
                            type: "primary",
                            onClick: this.onAddWitness.bind(this)
                        },
                        counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.witness.confirm")
                    ), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Button"],
                        {
                            key: "cancel",
                            style: { marginLeft: "8px" },
                            onClick: this.props.hideModal
                        },
                        counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.cancel")
                    )]
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Form"],
                    { className: "full-width", layout: "vertical" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        label: "modal.witness.witness_account",
                        accountName: witnessAccount && witnessAccount.get("name") || account.get("name"),
                        account: witnessAccount,
                        onAccountChanged: this.onChangeCommittee.bind(this),
                        size: 35,
                        typeahead: true
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                        content: "modal.witness.text",
                        unsafe: true,
                        component: "p"
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Form"].Item,
                        {
                            label: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.witness.url")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Input"], {
                            value: url,
                            onChange: this.onUrlChanged.bind(this),
                            placeholder: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.witness.web_example")
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Form"].Item,
                        {
                            label: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.witness.public_signing_key")
                        },
                        this.isValidPubKey(signingKey) ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "label",
                            {
                                className: "right-label",
                                style: {
                                    marginTop: "-30px",
                                    position: "static"
                                }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "modal.witness.invalid_key" })
                        ) : null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Input"], {
                            addonBefore: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_6__["default"], { name: "key", title: "icons.key", size: "1x" }),
                            value: signingKey,
                            onChange: this.onMemoKeyChanged.bind(this),
                            placeholder: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.witness.enter_public_signing_key")
                        })
                    )
                )
            );
        }
    }]);

    return JoinWitnessesModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (JoinWitnessesModal);

/***/ }),

/***/ 2967:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Modal_JoinCommitteeModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2968);
/* harmony import */ var _VotingAccountsList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2965);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _Utility_SearchInput__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2830);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }










var Committee = function (_Component) {
    _inherits(Committee, _Component);

    function Committee(props) {
        _classCallCheck(this, Committee);

        var _this = _possibleConstructorReturn(this, (Committee.__proto__ || Object.getPrototypeOf(Committee)).call(this, props));

        _this.state = {
            showCreateCommitteeModal: false
        };
        return _this;
    }

    _createClass(Committee, [{
        key: "render",
        value: function render() {
            var _this2 = this;

            var showCommitteeModal = function showCommitteeModal() {
                console.log("show committee modal");
                _this2.setState({
                    showCreateCommitteeModal: !_this2.state.showCreateCommitteeModal
                });
            };

            var onFilterChange = this.props.onFilterChange;
            var validateAccountHandler = this.props.validateAccountHandler;
            var addCommitteeHandler = this.props.addCommitteeHandler;
            var removeCommitteeHandler = this.props.removeCommitteeHandler;

            var showCreateCommitteeModal = this.state.showCreateCommitteeModal;
            var _props = this.props,
                all_committee = _props.all_committee,
                proxy_committee = _props.proxy_committee,
                committee = _props.committee,
                proxy_account_id = _props.proxy_account_id,
                hasProxy = _props.hasProxy,
                globalObject = _props.globalObject,
                filterSearch = _props.filterSearch,
                account = _props.account;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "header-selector" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { style: { float: "right" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_6__["Button"],
                            { onClick: showCommitteeModal },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.votes.join_committee" })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "selector inline-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_SearchInput__WEBPACK_IMPORTED_MODULE_7__["default"], {
                            placeholder: counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("explorer.witnesses.filter_by_name"),
                            value: filterSearch,
                            onChange: onFilterChange
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: classnames__WEBPACK_IMPORTED_MODULE_5___default()("content-block") },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_VotingAccountsList__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        type: "committee",
                        label: "account.votes.add_committee_label",
                        items: all_committee,
                        validateAccount: validateAccountHandler,
                        onAddItem: addCommitteeHandler,
                        onRemoveItem: removeCommitteeHandler,
                        tabIndex: hasProxy ? -1 : 3,
                        supported: hasProxy ? proxy_committee : committee,
                        active: globalObject.get("active_committee_members"),
                        proxy: proxy_account_id,
                        filterSearch: filterSearch
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_JoinCommitteeModal__WEBPACK_IMPORTED_MODULE_3__["default"], {
                    visible: showCreateCommitteeModal,
                    account: account,
                    hideModal: showCommitteeModal
                })
            );
        }
    }]);

    return Committee;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

/* harmony default export */ __webpack_exports__["default"] = (Committee);

/***/ }),

/***/ 2968:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Account_AccountSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2139);
/* harmony import */ var actions_AccountActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(569);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(571);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }









var JoinCommitteeModal = function (_React$Component) {
    _inherits(JoinCommitteeModal, _React$Component);

    function JoinCommitteeModal(props) {
        _classCallCheck(this, JoinCommitteeModal);

        var _this = _possibleConstructorReturn(this, (JoinCommitteeModal.__proto__ || Object.getPrototypeOf(JoinCommitteeModal)).call(this, props));

        _this.state = _this.getInitialState(props);
        return _this;
    }

    _createClass(JoinCommitteeModal, [{
        key: "getInitialState",
        value: function getInitialState() {
            return {
                committeeAccount: this.props.account,
                url: ""
            };
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, ns) {
            return this.props.visible !== np.visible || this.state.url !== ns.url || this.state.committeeAccount !== ns.committeeAccount;
        }
    }, {
        key: "onAddComittee",
        value: function onAddComittee() {
            var _state = this.state,
                committeeAccount = _state.committeeAccount,
                url = _state.url;


            if (committeeAccount && url) {
                actions_AccountActions__WEBPACK_IMPORTED_MODULE_3__["default"].createCommittee({ account: committeeAccount, url: url });
            }
            this.props.hideModal();
        }
    }, {
        key: "onChangeCommittee",
        value: function onChangeCommittee(account) {
            this.setState({
                committeeAccount: account
            });
        }
    }, {
        key: "onUrlChanged",
        value: function onUrlChanged(e) {
            this.setState({
                url: common_utils__WEBPACK_IMPORTED_MODULE_6__["default"].sanitize(e.target.value.toLowerCase())
            });
        }
    }, {
        key: "onClose",
        value: function onClose() {
            this.props.hideModal();
            this.setState(this.getInitialState(this.props));
        }
    }, {
        key: "render",
        value: function render() {
            var _state2 = this.state,
                url = _state2.url,
                committeeAccount = _state2.committeeAccount;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Modal"],
                {
                    title: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.committee.create_committee"),
                    visible: this.props.visible,
                    onCancel: this.props.hideModal,
                    footer: [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Button"],
                        {
                            key: "submit",
                            type: "primary",
                            onClick: this.onAddComittee.bind(this)
                        },
                        counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.committee.confirm")
                    ), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Button"],
                        {
                            key: "cancel",
                            style: { marginLeft: "8px" },
                            onClick: this.onClose.bind(this)
                        },
                        counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.cancel")
                    )]
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Form"],
                    { className: "full-width", layout: "vertical" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_AccountSelector__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        label: "modal.committee.from",
                        accountName: committeeAccount && committeeAccount.get("name") || account.get("name"),
                        account: committeeAccount || account,
                        onAccountChanged: this.onChangeCommittee.bind(this),
                        size: 35,
                        typeahead: true
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                        content: "modal.committee.text",
                        unsafe: true,
                        component: "p"
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Form"].Item,
                        {
                            label: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.committee.url")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Input"], {
                            value: url,
                            onChange: this.onUrlChanged.bind(this),
                            placeholder: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("modal.committee.web_example")
                        })
                    )
                )
            );
        }
    }]);

    return JoinCommitteeModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (JoinCommitteeModal);

/***/ }),

/***/ 2969:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _WorkersList__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2970);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1846);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2129);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2868);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2146);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Utility_SearchInput__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2830);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }












var Workers = function (_React$Component) {
    _inherits(Workers, _React$Component);

    function Workers(props) {
        _classCallCheck(this, Workers);

        var _this = _possibleConstructorReturn(this, (Workers.__proto__ || Object.getPrototypeOf(Workers)).call(this, props));

        _this.state = {
            newWorkersLength: null,
            activeWorkersLength: null,
            pollsLength: null,
            expiredWorkersLength: null,
            voteThreshold: null,
            workerTableIndex: props.viewSettings.get("workerTableIndex", 1)
        };
        return _this;
    }

    _createClass(Workers, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, ns) {
            return ns.newWorkersLength !== this.state.newWorkersLength || ns.activeWorkersLength !== this.state.activeWorkersLength || ns.pollsLength !== this.state.pollsLength || ns.expiredWorkersLength !== this.state.expiredWorkersLength || ns.voteThreshold !== this.state.voteThreshold || np.workerTableIndex !== this.state.workerTableIndex;
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var _props = this.props,
                vote_ids = _props.vote_ids,
                proxy_vote_ids = _props.proxy_vote_ids,
                hideLegacy = _props.hideLegacy,
                preferredUnit = _props.preferredUnit,
                globalObject = _props.globalObject,
                totalBudget = _props.totalBudget,
                workerBudget = _props.workerBudget,
                hideLegacyProposals = _props.hideLegacyProposals,
                hasProxy = _props.hasProxy,
                filterSearch = _props.filterSearch,
                onFilterChange = _props.onFilterChange,
                onChangeVotes = _props.onChangeVotes,
                getWorkerArray = _props.getWorkerArray;
            var _state = this.state,
                workerTableIndex = _state.workerTableIndex,
                newWorkersLength = _state.newWorkersLength,
                activeWorkersLength = _state.activeWorkersLength,
                pollsLength = _state.pollsLength,
                expiredWorkersLength = _state.expiredWorkersLength,
                voteThreshold = _state.voteThreshold;


            var setWorkerTableIndex = function setWorkerTableIndex(e) {
                _this2.setState({
                    workerTableIndex: e.target.value
                });
            };

            // fixme the way WorkersList is injected with workerslist is a complete design fail. use proper controlled component

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "header-selector" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { style: { float: "right" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Button"],
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Link"],
                                { to: "/create-worker" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.votes.create_worker" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "selector inline-block" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_SearchInput__WEBPACK_IMPORTED_MODULE_9__["default"], {
                            placeholder: counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("explorer.witnesses.filter_by_name"),
                            value: filterSearch,
                            onChange: onFilterChange
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Radio"].Group,
                            {
                                defaultValue: 1,
                                onChange: setWorkerTableIndex
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Radio"],
                                { value: 0 },
                                counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("account.votes.new", {
                                    count: newWorkersLength
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Radio"],
                                { value: 1 },
                                counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("account.votes.active", {
                                    count: activeWorkersLength
                                })
                            ),
                            pollsLength ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Radio"],
                                { value: 3 },
                                counterpart__WEBPACK_IMPORTED_MODULE_5___default.a.translate("account.votes.polls", { count: pollsLength })
                            ) : null,
                            expiredWorkersLength ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Radio"],
                                { value: 2 },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.votes.expired" })
                            ) : null
                        )
                    ),
                    hideLegacy,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Row"],
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Col"],
                            { span: 3 },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.votes.threshold" }),
                            " (",
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: preferredUnit }),
                            ")"
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Col"],
                            {
                                span: 3,
                                style: {
                                    marginLeft: "10px"
                                }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_7__["default"], {
                                decimalOffset: 4,
                                hide_asset: true,
                                amount: voteThreshold,
                                asset: "1.3.0"
                            })
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Row"],
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Col"],
                            { span: 3 },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "account.votes.total_budget" }),
                            " (",
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_4__["default"], { name: preferredUnit }),
                            ")"
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Col"],
                            {
                                span: 3,
                                style: {
                                    marginLeft: "10px"
                                }
                            },
                            globalObject ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_6__["EquivalentValueComponent"], {
                                hide_asset: true,
                                fromAsset: "1.3.0",
                                toAsset: preferredUnit,
                                amount: totalBudget
                            }) : null
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_WorkersList__WEBPACK_IMPORTED_MODULE_2__["default"], {
                    workerTableIndex: workerTableIndex,
                    preferredUnit: preferredUnit,
                    setWorkersLength: function setWorkersLength(_newWorkersLength, _activeWorkersLength, _pollsLength, _expiredWorkersLength, _voteThreshold) {
                        if (_newWorkersLength !== _this2.state.newWorkersLength || _activeWorkersLength !== _this2.state.activeWorkersLength || _pollsLength !== _this2.state.pollsLength || _expiredWorkersLength !== _this2.state.expiredWorkersLength || _voteThreshold !== _this2.state.voteThreshold) {
                            _this2.setState({
                                newWorkersLength: _newWorkersLength,
                                activeWorkersLength: _activeWorkersLength,
                                pollsLength: _pollsLength,
                                expiredWorkersLength: _expiredWorkersLength,
                                voteThreshold: _voteThreshold
                            });
                        }
                    },
                    workerBudget: workerBudget,
                    hideLegacyProposals: hideLegacyProposals,
                    hasProxy: hasProxy,
                    proxy_vote_ids: proxy_vote_ids,
                    vote_ids: vote_ids,
                    onChangeVotes: onChangeVotes,
                    getWorkerArray: getWorkerArray,
                    filterSearch: filterSearch
                })
            );
        }
    }]);

    return Workers;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Workers);

/***/ }),

/***/ 2970:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(571);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2146);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2443);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2003);
/* harmony import */ var _Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2868);
/* harmony import */ var components_Icon_Icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1894);
/* harmony import */ var components_Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2916);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2129);
/* harmony import */ var string_similarity__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2971);
/* harmony import */ var string_similarity__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(string_similarity__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _lib_common_hideProposals__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2972);
/* harmony import */ var sanitize__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(572);
/* harmony import */ var sanitize__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(sanitize__WEBPACK_IMPORTED_MODULE_13__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
















var WorkerList = function (_React$Component) {
    _inherits(WorkerList, _React$Component);

    function WorkerList(props) {
        _classCallCheck(this, WorkerList);

        return _possibleConstructorReturn(this, (WorkerList.__proto__ || Object.getPrototypeOf(WorkerList)).call(this, props));
    }

    _createClass(WorkerList, [{
        key: "onApprove",
        value: function onApprove(item) {
            var addVotes = [],
                removeVotes = [];

            if (item.vote_ids.has(item.worker.get("vote_against"))) {
                removeVotes.push(item.worker.get("vote_against"));
            }

            if (!item.vote_ids.has(item.worker.get("vote_for"))) {
                addVotes.push(item.worker.get("vote_for"));
            }

            this.props.onChangeVotes(addVotes, removeVotes);
        }
    }, {
        key: "onReject",
        value: function onReject(item) {
            var addVotes = [],
                removeVotes = [];

            if (item.vote_ids.has(item.worker.get("vote_against"))) {
                removeVotes.push(item.worker.get("vote_against"));
            }

            if (item.vote_ids.has(item.worker.get("vote_for"))) {
                removeVotes.push(item.worker.get("vote_for"));
            }

            this.props.onChangeVotes(addVotes, removeVotes);
        }
    }, {
        key: "getHeader",
        value: function getHeader(workerTableIndex, preferredUnit) {
            var _this2 = this;

            return [workerTableIndex === 2 ? null : {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_9___default.a, {
                    component: "span",
                    content: "account.votes.line",
                    style: { whiteSpace: "nowrap" }
                }),
                dataIndex: "line",
                align: "right",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                textAlign: "right",
                                paddingRight: 10,
                                paddingLeft: 0,
                                whiteSpace: "nowrap"
                            }
                        },
                        item ? item : counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("account.votes.expired")
                    );
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_9___default.a, {
                    content: "account.user_issued_assets.id",
                    style: { whiteSpace: "nowrap" }
                }),
                dataIndex: "assets_id",
                align: "center",
                sorter: function sorter(a, b) {
                    return a.assets_id > b.assets_id ? 1 : a.assets_id < b.assets_id ? -1 : 0;
                },
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        item
                    );
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_9___default.a, {
                    content: "account.user_issued_assets.description",
                    style: { whiteSpace: "nowrap" }
                }),
                dataIndex: "description",
                align: "left",
                sorter: function sorter(a, b) {
                    if (a.description.name > b.description.name) {
                        return 1;
                    }
                    if (a.description.name < b.description.name) {
                        return -1;
                    }
                    return 0;
                },
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                className: "inline-block",
                                style: {
                                    paddingRight: 5,
                                    position: "relative",
                                    top: -1,
                                    whiteSpace: "nowrap"
                                }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "a",
                                {
                                    style: {
                                        visibility: item.url && item.url.indexOf(".") !== -1 ? "visible" : "hidden"
                                    },
                                    href: common_utils__WEBPACK_IMPORTED_MODULE_2__["default"].sanitize(item.url),
                                    target: "_blank",
                                    rel: "noopener noreferrer"
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Icon_Icon__WEBPACK_IMPORTED_MODULE_7__["default"], {
                                    name: "share",
                                    size: "2x",
                                    title: "icons.share"
                                })
                            )
                        ),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "inline-block" },
                            item.name,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_4__["default"], {
                                account: item.worker_account,
                                maxDisplayAccountNameLength: null
                            })
                        )
                    );
                }
            }, {
                className: "column-hide-small",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_9___default.a, {
                    content: "account.votes.total_votes",
                    style: { whiteSpace: "nowrap" }
                }),
                dataIndex: "total_votes",
                align: "right",
                sorter: function sorter(a, b) {
                    return a.total_votes - b.total_votes;
                },
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_3__["default"], {
                        amount: item,
                        asset: "1.3.0",
                        decimalOffset: 5,
                        hide_asset: true,
                        style: { whiteSpace: "nowrap" }
                    });
                }
            }, workerTableIndex === 0 ? {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_9___default.a, {
                    content: "account.votes.missing",
                    style: { whiteSpace: "nowrap" }
                }),
                dataIndex: "missing",
                align: "right",
                sorter: function sorter(a, b) {
                    return a.missing - b.missing;
                },
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                textAlign: "right",
                                whiteSpace: "nowrap"
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_3__["default"], {
                            amount: Math.max(0, item),
                            asset: "1.3.0",
                            hide_asset: true,
                            decimalOffset: 5
                        })
                    );
                }
            } : null, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_9___default.a, {
                    content: "explorer.workers.period",
                    style: { whiteSpace: "nowrap" }
                }),
                dataIndex: "period",
                align: "right",
                sorter: function sorter(a, b) {
                    return new Date(a.period.startDate) - new Date(b.period.startDate);
                },
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        item.startDate,
                        " - ",
                        item.endDate
                    );
                }
            }, workerTableIndex === 2 || workerTableIndex === 0 ? null : {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_9___default.a, {
                    content: "account.votes.funding",
                    style: { whiteSpace: "nowrap" }
                }),
                dataIndex: "funding",
                align: "right",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                textAlign: "right",
                                whiteSpace: "nowrap"
                            },
                            className: "hide-column-small"
                        },
                        item.isExpired ? "-" : common_utils__WEBPACK_IMPORTED_MODULE_2__["default"].format_number(item.fundedPercent, 2) + "%"
                    );
                }
            }, workerTableIndex === 2 || workerTableIndex === 0 ? null : {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_9___default.a, {
                        content: "explorer.witnesses.budget",
                        style: { whiteSpace: "nowrap" }
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            style: {
                                paddingTop: 5,
                                fontSize: "0.8rem"
                            }
                        },
                        "(",
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], { name: preferredUnit }),
                        ")"
                    )
                ),
                dataIndex: "budget",
                align: "right",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            style: {
                                textAlign: "right",
                                whiteSpace: "nowrap"
                            }
                        },
                        item.rest <= 0 ? item.isExpired ? "-" : "0.00" : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_6__["EquivalentValueComponent"], {
                            hide_asset: true,
                            fromAsset: "1.3.0",
                            toAsset: item.preferredUnit,
                            amount: item.rest
                        })
                    );
                }
            }, {
                className: "column-hide-small",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_9___default.a, {
                        content: "account.votes.daily_pay",
                        style: { whiteSpace: "nowrap" }
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            style: {
                                paddingTop: 5,
                                fontSize: "0.8rem"
                            }
                        },
                        "(",
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_10__["default"], { name: preferredUnit }),
                        ")"
                    )
                ),
                dataIndex: "daily_pay",
                align: "right",
                sorter: function sorter(a, b) {
                    return a.daily_pay.daily_pay - b.daily_pay.daily_pay;
                },
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            className: !item.proxy ? "clickable" : "",
                            style: { whiteSpace: "nowrap" },
                            onClick: item.proxy ? function () {} : _this2[item.approvalState ? "onReject" : "onApprove"].bind(_this2, item)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_6__["EquivalentValueComponent"], {
                            hide_asset: true,
                            fromAsset: "1.3.0",
                            toAsset: item.preferredUnit,
                            amount: item.daily_pay,
                            style: { whiteSpace: "nowrap" }
                        })
                    );
                }
            }, {
                className: "column-hide-small",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_9___default.a, {
                    content: "account.votes.toggle",
                    style: { whiteSpace: "nowrap" }
                }),
                dataIndex: "toggle",
                align: "right",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        {
                            className: !item.proxy ? "clickable" : "",
                            style: { whiteSpace: "nowrap" },
                            onClick: item.proxy ? function () {} : _this2[item.approvalState ? "onReject" : "onApprove"].bind(_this2, item)
                        },
                        !item.proxy ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Icon_Icon__WEBPACK_IMPORTED_MODULE_7__["default"], {
                            name: item.approvalState ? "checkmark-circle" : "minus-circle",
                            title: item.approvalState ? "icons.checkmark_circle.approved" : "icons.minus_circle.disapproved"
                        }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Icon_Icon__WEBPACK_IMPORTED_MODULE_7__["default"], {
                            name: "locked",
                            title: "icons.locked.action"
                        })
                    );
                }
            }].filter(function (n) {
                return n;
            });
        }
    }, {
        key: "getData",
        value: function getData(workers) {
            var voteThreshold = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
            var _props = this.props,
                hasProxy = _props.hasProxy,
                proxy_vote_ids = _props.proxy_vote_ids,
                vote_ids = _props.vote_ids;

            vote_ids = hasProxy ? proxy_vote_ids : vote_ids;
            voteThreshold = voteThreshold || 0;
            return workers.map(function (item, index) {
                var worker = item.worker.toJS();
                var rank = index + 1;
                var total_votes = worker.total_votes_for - worker.total_votes_against;
                var approvalState = vote_ids.has(worker.vote_for) ? true : vote_ids.has(worker.vote_against) ? false : null;

                var fundedPercent = 0;

                if (worker.daily_pay < item.rest) {
                    fundedPercent = 100;
                } else if (item.rest > 0) {
                    fundedPercent = item.rest / worker.daily_pay * 100;
                }

                var startDate = counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.localize(new Date(worker.work_begin_date + "Z"), { type: "date", format: "short_custom" });
                var endDate = counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.localize(new Date(worker.work_end_date + "Z"), { type: "date", format: "short_custom" });

                var now = new Date();
                var isExpired = new Date(worker.work_end_date + "Z") <= now;
                var hasStarted = new Date(worker.work_begin_date + "Z") <= now;
                var isProposed = !isExpired && total_votes < voteThreshold || !hasStarted;
                var isPoll = !!item.poll;
                return {
                    key: worker.id,
                    line: !isPoll && isExpired ? null : !isExpired ? rank : null,
                    assets_id: worker.id,
                    description: worker,
                    total_votes: total_votes,
                    missing: voteThreshold - total_votes,
                    period: { startDate: startDate, endDate: endDate },
                    funding: !isPoll && (isExpired || isProposed) ? null : { isExpired: isExpired, fundedPercent: fundedPercent },
                    daily_pay: {
                        preferredUnit: item.preferredUnit,
                        daily_pay: worker.daily_pay,
                        proxy: hasProxy,
                        approvalState: approvalState,
                        worker: item.worker,
                        vote_ids: vote_ids
                    },
                    budget: !isPoll && (isExpired || isProposed) ? null : _defineProperty({
                        rest: item.rest,
                        isExpired: isExpired,
                        preferredUnit: item.preferredUnit
                    }, "rest", item.rest),
                    toggle: {
                        proxy: hasProxy,
                        approvalState: approvalState,
                        worker: item.worker,
                        vote_ids: vote_ids
                    }
                };
            });
        }
    }, {
        key: "_getMappedWorkers",
        value: function _getMappedWorkers(workers, maxDailyPayout, filterSearch) {
            var _this3 = this;

            var now = new Date();
            var remainingDailyPayout = maxDailyPayout;
            var voteThreshold = undefined;
            var mapped = workers.sort(function (a, b) {
                // first sort by votes so payout order is correct
                return _this3._getTotalVotes(b) - _this3._getTotalVotes(a);
            }).map(function (worker) {
                worker.isOngoing = new Date(worker.get("work_end_date") + "Z") > now && new Date(worker.get("work_begin_date") + "Z") <= now;
                worker.isUpcoming = new Date(worker.get("work_begin_date") + "Z") > now;
                worker.isExpired = new Date(worker.get("work_end_date") + "Z") <= now;
                var dailyPay = parseInt(worker.get("daily_pay"), 10);
                worker.votes = worker.get("total_votes_for") - worker.get("total_votes_against");
                if (remainingDailyPayout > 0 && worker.isOngoing) {
                    worker.active = true;
                    remainingDailyPayout = remainingDailyPayout - dailyPay;
                    if (remainingDailyPayout <= 0 && !voteThreshold) {
                        // remember when workers become inactive
                        voteThreshold = worker.votes;
                    }
                    worker.remainingPayout = remainingDailyPayout + dailyPay;
                } else {
                    worker.active = false;
                    worker.remainingPayout = 0;
                }
                return worker;
            }).filter(function (a) {
                var name = a.get("name").toLowerCase();
                return a && name.indexOf(filterSearch) !== -1;
            }).sort(function (a, b) {
                // sort out expired
                if (a.isExpired !== b.isExpired) {
                    return a.isExpired ? 1 : -1;
                } else {
                    return _this3._getTotalVotes(b) - _this3._getTotalVotes(a);
                }
            });
            return {
                mappedWorkers: mapped,
                voteThreshold: voteThreshold
            };
        }
    }, {
        key: "_getTotalVotes",
        value: function _getTotalVotes(worker) {
            return parseInt(worker.get("total_votes_for"), 10) - parseInt(worker.get("total_votes_against"), 10);
        }
    }, {
        key: "_decideRowClassName",
        value: function _decideRowClassName(row, index) {
            return row.toggle.approvalState ? "" : "unsupported";
        }
    }, {
        key: "render",
        value: function render() {
            var _props2 = this.props,
                workerTableIndex = _props2.workerTableIndex,
                preferredUnit = _props2.preferredUnit,
                setWorkersLength = _props2.setWorkersLength,
                workerBudget = _props2.workerBudget,
                hideLegacyProposals = _props2.hideLegacyProposals,
                getWorkerArray = _props2.getWorkerArray,
                filterSearch = _props2.filterSearch;

            var workersHeader = this.getHeader(workerTableIndex, preferredUnit);

            var workerArray = getWorkerArray();

            var _getMappedWorkers2 = this._getMappedWorkers(workerArray, workerBudget, filterSearch),
                mappedWorkers = _getMappedWorkers2.mappedWorkers,
                voteThreshold = _getMappedWorkers2.voteThreshold;

            var hideProposals = function hideProposals(filteredWorker, compareWith) {
                if (!hideLegacyProposals) {
                    return true;
                }

                var duplicated = compareWith.some(function (worker) {
                    var isSimilarName = string_similarity__WEBPACK_IMPORTED_MODULE_11___default.a.compareTwoStrings(filteredWorker.get("name"), worker.get("name")) > 0.8;
                    var sameId = worker.get("id") === filteredWorker.get("id");
                    var isNewer = worker.get("id").substr(5, worker.get("id").length) > filteredWorker.get("id").substr(5, worker.get("id").length);
                    return isSimilarName && !sameId && isNewer;
                });
                var newDate = new Date();
                var totalVotes = filteredWorker.get("total_votes_for") - filteredWorker.get("total_votes_against");
                var hasLittleVotes = totalVotes < 2000000000000;
                var hasStartedOverAMonthAgo = new Date(filteredWorker.get("work_begin_date") + "Z") <= new Date(newDate.setMonth(newDate.getMonth() - 2));

                var manualHidden = _lib_common_hideProposals__WEBPACK_IMPORTED_MODULE_12__["hiddenProposals"].includes(filteredWorker.get("id"));

                var hidden = (!!duplicated || hasStartedOverAMonthAgo) && hasLittleVotes || manualHidden;

                return !hidden;
            };

            var polls = mappedWorkers.filter(function (a) {
                var lowercase = a.get("name").toLowerCase();
                return lowercase.includes("bsip") || lowercase.includes("poll");
            }).map(function (worker) {
                return {
                    preferredUnit: preferredUnit,
                    rest: worker.remainingPayout,
                    poll: true,
                    worker: worker
                };
            }).filter(function (a) {
                return !!a;
            });

            // remove polls
            mappedWorkers = mappedWorkers.filter(function (a) {
                var lowercase = a.get("name").toLowerCase();
                return !lowercase.includes("bsip") && !lowercase.includes("poll");
            });

            var onGoingWorkers = mappedWorkers.filter(function (a) {
                return a.isOngoing;
            });
            var activeWorkers = mappedWorkers.filter(function (a) {
                return a.active && a.isOngoing;
            }).map(function (worker) {
                return {
                    preferredUnit: preferredUnit,
                    rest: worker.remainingPayout,
                    worker: worker
                };
            }).filter(function (a) {
                return !!a;
            });

            var newWorkers = mappedWorkers.filter(function (a) {
                return !a.active && !a.isExpired && hideProposals(a, onGoingWorkers);
            }).map(function (worker) {
                return {
                    preferredUnit: preferredUnit,
                    rest: 0,
                    worker: worker
                };
            });

            var expiredWorkers = workerArray.filter(function (a) {
                return a.isExpired;
            }).map(function (worker) {
                return {
                    preferredUnit: preferredUnit,
                    rest: 0,
                    worker: worker
                };
            });
            // fixme: don't call setState in render
            setTimeout(function () {
                setWorkersLength(newWorkers.length, activeWorkers.length, polls.length, expiredWorkers.length, voteThreshold);
            }, 250);
            var workers = workerTableIndex === 0 ? newWorkers : workerTableIndex === 1 ? activeWorkers : workerTableIndex === 2 ? expiredWorkers : polls;
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Utility_PaginatedList__WEBPACK_IMPORTED_MODULE_8__["default"], {
                className: "table dashboard-table table-hover",
                rowClassName: this._decideRowClassName.bind(this),
                rows: this.getData(workers, voteThreshold),
                header: workersHeader,
                pageSize: 50,
                label: "utility.total_x_assets",
                leftPadding: "1.5rem"
            });
        }
    }]);

    return WorkerList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_5__["default"])(WorkerList));

/***/ }),

/***/ 2972:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hiddenProposals", function() { return hiddenProposals; });
var hiddenProposals = ["1.14.114", // 201808_Rossul&GrapheneLab_New_UIUX, now under BBF with new name
"1.14.107" // Reinvention of Bitshares look and feel, abandoned from creator
];

/***/ }),

/***/ 2973:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(527);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2365);
/* harmony import */ var _MarginPositionsTable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2974);
/* harmony import */ var _RecentTransactions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2947);
/* harmony import */ var components_Account_Proposals__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2976);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(420);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(726);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(571);
/* harmony import */ var _Utility_Tabs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2929);
/* harmony import */ var _AccountOrders__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2981);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2469);
/* harmony import */ var common_accountHelper__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2993);
/* harmony import */ var _BalanceWrapper__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2392);
/* harmony import */ var _AccountTreemap__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2994);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2126);
/* harmony import */ var _AccountPortfolioList__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2997);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var _Utility_SearchInput__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(2830);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
























var AccountOverview = function (_React$Component) {
    _inherits(AccountOverview, _React$Component);

    function AccountOverview(props) {
        _classCallCheck(this, AccountOverview);

        var _this = _possibleConstructorReturn(this, (AccountOverview.__proto__ || Object.getPrototypeOf(AccountOverview)).call(this, props));

        _this.state = {
            shownAssets: props.viewSettings.get("shownAssets", "active"),
            alwaysShowAssets: ["BTS", "USD", "CNY", "GOLD", "SILVER",
            // "OPEN.BTC",
            // "OPEN.USDT",
            // "OPEN.ETH",
            // "OPEN.MAID",
            // "OPEN.STEEM",
            // "OPEN.DASH",

            "PPY", "RUDEX.BTC", "RUDEX.ETH", "RUDEX.USDT", "RUDEX.EOS", "RUDEX.GOLOS", "RUDEX.STEEM", "RUDEX.WLS", "RUDEX.SMOKE", "RUDEX.GRC", "RUDEX.GBG", "RUDEX.SBD", "RUDEX.KRM"],
            hideFishingProposals: true,
            question1: false,
            question2: false,
            question3: false
        };

        _this._handleFilterInput = _this._handleFilterInput.bind(_this);
        return _this;
    }

    _createClass(AccountOverview, [{
        key: "_handleFilterInput",
        value: function _handleFilterInput(e) {
            this.setState({
                filterValue: e.target.value
            });
        }
    }, {
        key: "componentWillMount",
        value: function componentWillMount() {
            this._checkMarginStatus();
        }
    }, {
        key: "_checkMarginStatus",
        value: function _checkMarginStatus() {
            var _this2 = this;

            var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;

            Object(common_accountHelper__WEBPACK_IMPORTED_MODULE_14__["checkMarginStatus"])(props.account).then(function (status) {
                var globalMarginStatus = null;
                for (var asset in status) {
                    globalMarginStatus = status[asset].statusClass || globalMarginStatus;
                }
                _this2.setState({ globalMarginStatus: globalMarginStatus });
            });
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.account !== this.props.account) {
                this._checkMarginStatus(np);
            }
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps, nextState) {
            return !common_utils__WEBPACK_IMPORTED_MODULE_9__["default"].are_equal_shallow(nextProps.balances, this.props.balances) || nextProps.account !== this.props.account || nextProps.isMyAccount !== this.props.isMyAccount || nextProps.settings !== this.props.settings || nextProps.hiddenAssets !== this.props.hiddenAssets || !common_utils__WEBPACK_IMPORTED_MODULE_9__["default"].are_equal_shallow(nextState, this.state) || this.state.filterValue !== nextState.filterValue || this.state.enabledColumns !== nextState.enabledColumns;
        }
    }, {
        key: "_changeShownAssets",
        value: function _changeShownAssets() {
            var shownAssets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "active";

            this.setState({
                shownAssets: shownAssets
            });
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_8__["default"].changeViewSetting({
                shownAssets: shownAssets
            });
        }
    }, {
        key: "_toggleHideProposal",
        value: function _toggleHideProposal() {
            this.setState({
                hideFishingProposals: !this.state.hideFishingProposals
            });
        }
    }, {
        key: "_toggleQ1",
        value: function _toggleQ1() {
            this.setState({
                question1: !this.state.question1
            });
        }
    }, {
        key: "_toggleQ2",
        value: function _toggleQ2() {
            this.setState({
                question2: !this.state.question2
            });
        }
    }, {
        key: "_toggleQ3",
        value: function _toggleQ3() {
            this.setState({
                question3: !this.state.question3
            });
        }
    }, {
        key: "_showProposals",
        value: function _showProposals() {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_8__["default"].changeSetting({
                setting: "showProposedTx",
                value: true
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props = this.props,
                account = _props.account,
                hiddenAssets = _props.hiddenAssets,
                settings = _props.settings,
                orders = _props.orders;
            var shownAssets = this.state.shownAssets;


            if (!account) {
                return null;
            }

            var preferredUnit = !settings.get("unit") ? this.props.core_asset.get("symbol") : settings.get("unit");

            var call_orders = [],
                collateral = {},
                debt = {};

            // Request all balance objects for dashboard view
            bitsharesjs__WEBPACK_IMPORTED_MODULE_7__["ChainStore"].requestAllDataForAccount(account.toJS().id, "balance");

            if (account.toJS && account.has("call_orders")) call_orders = account.get("call_orders").toJS();
            var includedPortfolioList = void 0,
                hiddenPortfolioList = void 0;
            var account_balances = account.get("balances");
            var includedBalancesList = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                hiddenBalancesList = immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List();
            call_orders.forEach(function (callID) {
                var position = bitsharesjs__WEBPACK_IMPORTED_MODULE_7__["ChainStore"].getObject(callID);
                if (position) {
                    var collateralAsset = position.getIn(["call_price", "base", "asset_id"]);
                    if (!collateral[collateralAsset]) {
                        collateral[collateralAsset] = parseInt(position.get("collateral"), 10);
                    } else {
                        collateral[collateralAsset] += parseInt(position.get("collateral"), 10);
                    }
                    var debtAsset = position.getIn(["call_price", "quote", "asset_id"]);
                    if (!debt[debtAsset]) {
                        debt[debtAsset] = parseInt(position.get("debt"), 10);
                    } else {
                        debt[debtAsset] += parseInt(position.get("debt"), 10);
                    }
                }
            });

            if (account_balances) {
                // Filter out balance objects that have 0 balance or are not included in open orders
                account_balances = account_balances.filter(function (a, index) {
                    var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_7__["ChainStore"].getObject(a);
                    if (balanceObject && !balanceObject.get("balance") && !orders[index]) {
                        return false;
                    } else {
                        return true;
                    }
                });

                // Separate balances into hidden and included
                account_balances.forEach(function (a, asset_type) {
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_7__["ChainStore"].getAsset(asset_type);

                    var assetName = "";
                    var filter = "";

                    if (_this3.state.filterValue) {
                        filter = _this3.state.filterValue ? String(_this3.state.filterValue).toLowerCase() : "";
                        assetName = asset.get("symbol").toLowerCase();

                        var _utils$replaceName = common_utils__WEBPACK_IMPORTED_MODULE_9__["default"].replaceName(asset),
                            isBitAsset = _utils$replaceName.isBitAsset;

                        if (isBitAsset) {
                            assetName = "bit" + assetName;
                        }
                    }

                    if (hiddenAssets.includes(asset_type) && assetName.includes(filter)) {
                        hiddenBalancesList = hiddenBalancesList.push(a);
                    } else if (assetName.includes(filter)) {
                        includedBalancesList = includedBalancesList.push(a);
                    }
                });
            }

            var portfolioHiddenAssetsBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], { noTip: true, balances: hiddenBalancesList, hide_asset: true });

            var portfolioActiveAssetsBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: includedBalancesList,
                hide_asset: true
            });
            var ordersValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                openOrders: orders,
                hide_asset: true
            });
            var marginValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                debt: debt,
                collateral: collateral,
                hide_asset: true
            });
            var debtValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                debt: debt,
                hide_asset: true
            });
            var collateralValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_3__["default"], {
                noTip: true,
                balances: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List(),
                collateral: collateral,
                hide_asset: true
            });

            var totalValueText = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_13__["default"], {
                noLink: true,
                string: "account.total",
                keys: [{ type: "asset", value: preferredUnit, arg: "asset" }]
            });

            var includedPortfolioBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                { key: "portfolio", className: "total-value" },
                totalValueText,
                ": ",
                portfolioActiveAssetsBalance
            );

            var hiddenPortfolioBalance = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                { key: "portfolio", className: "total-value" },
                totalValueText,
                ": ",
                portfolioHiddenAssetsBalance
            );

            includedPortfolioList = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPortfolioList__WEBPACK_IMPORTED_MODULE_18__["default"], {
                balanceList: includedBalancesList,
                optionalAssets: !this.state.filterValue ? this.state.alwaysShowAssets : null,
                visible: true,
                preferredUnit: preferredUnit,
                coreAsset: this.props.core_asset,
                coreSymbol: this.props.core_asset.get("symbol"),
                hiddenAssets: hiddenAssets,
                orders: orders,
                account: this.props.account,
                isMyAccount: this.props.isMyAccount,
                balances: this.props.balances,
                extraRow: includedPortfolioBalance,
                viewSettings: this.props.viewSettings,
                callOrders: call_orders
            });

            hiddenPortfolioList = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountPortfolioList__WEBPACK_IMPORTED_MODULE_18__["default"], {
                balanceList: hiddenBalancesList,
                optionalAssets: !this.state.filterValue ? this.state.alwaysShowAsset : null,
                visible: false,
                preferredUnit: preferredUnit,
                coreSymbol: this.props.core_asset.get("symbol"),
                settings: settings,
                hiddenAssets: hiddenAssets,
                orders: orders,
                account: this.props.account,
                isMyAccount: this.props.isMyAccount,
                balances: this.props.balances,
                extraRow: hiddenPortfolioBalance,
                viewSettings: this.props.viewSettings,
                enabledColumns: this.state.enabledColumns
            });

            // add unicode non-breaking space as subtext to Activity Tab to ensure that all titles are aligned
            // horizontally
            var hiddenSubText = "\xA0";

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "grid-content app-tables no-padding", ref: "appTables" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "content-block small-12" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "tabs-container generic-bordered-box" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            _Utility_Tabs__WEBPACK_IMPORTED_MODULE_10__["Tabs"],
                            {
                                defaultActiveTab: 0,
                                segmented: false,
                                setting: "overviewTab",
                                className: "account-tabs",
                                tabsClass: "account-overview no-padding bordered-header content-block"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_10__["Tab"],
                                {
                                    title: "account.portfolio",
                                    subText: portfolioActiveAssetsBalance
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "header-selector" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "filter inline-block" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_SearchInput__WEBPACK_IMPORTED_MODULE_21__["default"], {
                                            value: this.state.filterValue,
                                            onChange: this._handleFilterInput
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        {
                                            className: "selector inline-block",
                                            style: {
                                                position: "relative",
                                                top: "8px"
                                            }
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_12___default()("inline-block", {
                                                    inactive: shownAssets != "active"
                                                }),
                                                onClick: shownAssets != "active" ? this._changeShownAssets.bind(this, "active") : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.hide_hidden" })
                                        ),
                                        hiddenBalancesList.size ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_12___default()("inline-block", {
                                                    inactive: shownAssets != "hidden"
                                                }),
                                                onClick: shownAssets != "hidden" ? this._changeShownAssets.bind(this, "hidden") : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.show_hidden" })
                                        ) : null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "div",
                                            {
                                                className: classnames__WEBPACK_IMPORTED_MODULE_12___default()("inline-block", {
                                                    inactive: shownAssets != "visual"
                                                }),
                                                onClick: shownAssets != "visual" ? this._changeShownAssets.bind(this, "visual") : function () {}
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.show_visual" })
                                        )
                                    )
                                ),
                                shownAssets != "visual" ? shownAssets === "hidden" && hiddenBalancesList.size ? hiddenPortfolioList : includedPortfolioList : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AccountTreemap__WEBPACK_IMPORTED_MODULE_16__["default"], {
                                    balanceObjects: includedBalancesList
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_10__["Tab"],
                                {
                                    title: "account.open_orders",
                                    subText: ordersValue
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    _AccountOrders__WEBPACK_IMPORTED_MODULE_11__["default"],
                                    this.props,
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "total-value" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "span",
                                            { className: "text" },
                                            totalValueText
                                        ),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            "span",
                                            { className: "value" },
                                            ordersValue
                                        )
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_10__["Tab"],
                                {
                                    title: "account.collaterals",
                                    subText: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "span",
                                        {
                                            className: this.state.globalMarginStatus
                                        },
                                        marginValue
                                    )
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "content-block" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        { className: "generic-bordered-box" },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            _MarginPositionsTable__WEBPACK_IMPORTED_MODULE_4__["default"],
                                            {
                                                preferredUnit: preferredUnit,
                                                className: "dashboard-table",
                                                callOrders: call_orders,
                                                account: account
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                "tr",
                                                { className: "total-value" },
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    null,
                                                    totalValueText
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    null,
                                                    debtValue
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    { className: "column-hide-medium" },
                                                    collateralValue
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                                    "td",
                                                    null,
                                                    marginValue
                                                ),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { className: "column-hide-small" }),
                                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", { colSpan: "4" })
                                            )
                                        )
                                    )
                                )
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_10__["Tab"],
                                {
                                    title: "account.activity",
                                    subText: hiddenSubText
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_RecentTransactions__WEBPACK_IMPORTED_MODULE_5__["RecentTransactions"], {
                                    accountsList: immutable__WEBPACK_IMPORTED_MODULE_1___default.a.fromJS([account.get("id")]),
                                    compactView: false,
                                    showMore: true,
                                    fullHeight: true,
                                    limit: 100,
                                    showFilters: true,
                                    dashboard: true
                                })
                            ),
                            account.get("proposals") && account.get("proposals").size && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                _Utility_Tabs__WEBPACK_IMPORTED_MODULE_10__["Tab"],
                                {
                                    title: "explorer.proposals.title",
                                    subText: String(account.get("proposals") ? account.get("proposals").size : 0)
                                },
                                this.props.settings.get("showProposedTx") && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    {
                                        onClick: this._toggleHideProposal.bind(this),
                                        style: { cursor: "pointer" }
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Tooltip"],
                                        {
                                            title: counterpart__WEBPACK_IMPORTED_MODULE_20___default.a.translate("tooltip.propose_unhide"),
                                            placement: "bottom"
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Switch"], {
                                            style: { margin: 16 },
                                            checked: this.state.hideFishingProposals,
                                            onChange: this._toggleHideProposal.bind(this)
                                        }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.deactivate_suspicious_proposals" })
                                    )
                                ),
                                this.props.settings.get("showProposedTx") && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Account_Proposals__WEBPACK_IMPORTED_MODULE_6__["default"], {
                                    className: "dashboard-table",
                                    account: account,
                                    hideFishingProposals: this.state.hideFishingProposals
                                }),
                                !this.props.settings.get("showProposedTx") && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "padding" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.proposed_transactions.advanced_feature" }),
                                        ":"
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.proposed_transactions.question1" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Switch"], {
                                            style: { margin: 16 },
                                            checked: this.state.question1,
                                            onChange: this._toggleQ1.bind(this),
                                            checkedChildren: "Yes",
                                            unCheckedChildren: "No"
                                        })
                                    ),
                                    this.state.question1 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.proposed_transactions.question2" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Switch"], {
                                            style: { margin: 16 },
                                            checked: this.state.question2,
                                            onChange: this._toggleQ2.bind(this),
                                            checkedChildren: "Yes",
                                            unCheckedChildren: "No"
                                        })
                                    ),
                                    this.state.question2 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        null,
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.proposed_transactions.question3" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Switch"], {
                                            style: { margin: 16 },
                                            checked: this.state.question3,
                                            onChange: this._toggleQ3.bind(this),
                                            checkedChildren: "Yes",
                                            unCheckedChildren: "No"
                                        })
                                    ),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null),
                                    this.state.question3 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                        "div",
                                        {
                                            style: {
                                                marginTop: 16,
                                                marginBottom: 16
                                            }
                                        },
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.proposed_transactions.answered_no" }),
                                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_19__["Button"],
                                            {
                                                style: {
                                                    marginLeft: 16
                                                },
                                                onClick: this._showProposals.bind(this)
                                            },
                                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_2___default.a, { content: "account.proposed_transactions.show_me_proposals" })
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return AccountOverview;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountOverview = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_17__["default"])(AccountOverview, { propNames: ["core_asset"] });

var AccountOverviewWrapper = function (_React$Component2) {
    _inherits(AccountOverviewWrapper, _React$Component2);

    function AccountOverviewWrapper() {
        _classCallCheck(this, AccountOverviewWrapper);

        return _possibleConstructorReturn(this, (AccountOverviewWrapper.__proto__ || Object.getPrototypeOf(AccountOverviewWrapper)).apply(this, arguments));
    }

    _createClass(AccountOverviewWrapper, [{
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_BalanceWrapper__WEBPACK_IMPORTED_MODULE_15__["default"], _extends({}, this.props, { wrap: AccountOverview }));
        }
    }]);

    return AccountOverviewWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountOverviewWrapper);

/***/ }),

/***/ 2974:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _MarginPosition__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2975);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2003);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2126);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(420);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(571);
/* harmony import */ var _Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2469);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(527);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }















var alignRight = { textAlign: "right" };
var alignLeft = { textAlign: "left" };

/**
 * Renders whole margin list including call orders and placeholders
 */

var ListGenerator = function (_React$Component) {
    _inherits(ListGenerator, _React$Component);

    function ListGenerator(props) {
        _classCallCheck(this, ListGenerator);

        var _this = _possibleConstructorReturn(this, (ListGenerator.__proto__ || Object.getPrototypeOf(ListGenerator)).call(this, props));

        _this.state = {
            assetsPropsCount: 0,
            ordersJson: ""
        };
        return _this;
    }

    _createClass(ListGenerator, [{
        key: "render",
        value: function render() {
            var _this2 = this;

            var account = this.props.account;


            var rows = this.state.assets.sort(function (a, b) {
                // a,b - order ChainObject's
                // could be done via component's property `order_by`

                // if both have an order, sort by debt
                if (a.has_margin_order && b.has_margin_order) {
                    return b.order.get("debt") - a.order.get("debt");
                } else if (a.has_margin_order || b.has_margin_order) {
                    // having an order goes above having no order

                    return a.has_margin_order ? -1 : 1;
                } else {
                    // if both have no order, sort by symbol

                    var aName = common_utils__WEBPACK_IMPORTED_MODULE_8__["default"].replaceName(a.asset);
                    var bName = common_utils__WEBPACK_IMPORTED_MODULE_8__["default"].replaceName(b.asset);

                    var aSymbol = (aName.prefix != null ? aName.prefix : "") + aName.name;
                    var bSymbol = (bName.prefix != null ? bName.prefix : "") + bName.name;

                    return aSymbol.localeCompare(bSymbol);
                }
            }).map(function (a) {
                var debtAsset = void 0,
                    collateralAsset = void 0,
                    order_id = null;

                // user has margin on this asset
                if (a.has_margin_order) {
                    var order = a.order;

                    debtAsset = order.getIn(["call_price", "quote", "asset_id"]);
                    collateralAsset = order.getIn(["call_price", "base", "asset_id"]);

                    order_id = order.get("id");
                } else {
                    debtAsset = a.asset.get("id");
                    collateralAsset = a.asset.getIn(["bitasset", "options", "short_backing_asset"]);
                }

                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_MarginPosition__WEBPACK_IMPORTED_MODULE_1__["default"], _extends({
                    key: a.asset.get("id"),
                    object: order_id,
                    account: account,
                    debtAsset: debtAsset,
                    collateralAsset: collateralAsset
                }, _this2.props));
            });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tbody",
                null,
                rows
            );
        }
    }], [{
        key: "getDerivedStateFromProps",
        value: function getDerivedStateFromProps(nextProps, prevState) {
            // if we got new bitasset info
            // or call orders changed
            // then recalculate "cache" of maring items

            var callOrdersJson = JSON.stringify(nextProps.callOrders);

            if (prevState == null || prevState.assetsPropsCount != nextProps.bitAssets.length || prevState.ordersJson != callOrdersJson) {
                var assets = new Array();
                // construct map of bitassets
                var assetsMap = {};
                // index to track asset info
                var index = 0;

                nextProps.bitAssets.forEach(function (o) {
                    assetsMap[o.get("id")] = index++;
                    assets.push({
                        asset: o,
                        has_margin_order: false
                    });
                });

                if (nextProps.callOrders.length > 0) {
                    // add to iterated bitasets items that wasn't listed by default (component's callOrders prop)
                    nextProps.callOrders.forEach(function (o) {
                        // sometimes we get undefined resonses on very first api requests
                        if (!!o) {
                            var assetId = o.getIn(["call_price", "quote", "asset_id"]);

                            if (assetsMap[assetId] == null) {
                                var newAssetInfo = bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getObject(assetId);
                                if (typeof newAssetInfo != "undefined") {
                                    assetsMap[assetId] = index++;
                                    assets.push({
                                        asset: newAssetInfo,
                                        has_margin_order: true,
                                        order: o
                                    });
                                }
                            } else {
                                // mark as margin order
                                assets[assetsMap[assetId]].has_margin_order = true;
                                assets[assetsMap[assetId]].order = o;
                            }
                        }
                    });
                }

                return {
                    assetsPropsCount: nextProps.bitAssets.length,
                    assets: assets,
                    ordersJson: callOrdersJson
                };
            }

            return prevState;
        }
    }]);

    return ListGenerator;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ListGenerator.propTypes = {
    callOrders: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainObjectsList
};


ListGenerator = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(ListGenerator);
ListGenerator = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_4__["default"])(ListGenerator, {
    propNames: ["bitAssets"],
    defaultProps: {
        bitAssets: ["1.3.103", "1.3.120", "1.3.121", "1.3.1325", "1.3.105", "1.3.106", "1.3.113"]
    },
    asList: true
});

var MarginPositionsTable = function MarginPositionsTable(_ref) {
    var callOrders = _ref.callOrders,
        account = _ref.account,
        className = _ref.className,
        children = _ref.children,
        preferredUnit = _ref.preferredUnit;

    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "table",
        { className: "table table-hover " + className },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "thead",
            null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "explorer.asset.title" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "exchange.balance" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "transaction.borrow_amount" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight, className: "column-hide-medium" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "transaction.collateral" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__["Popover"],
                        {
                            placement: "top",
                            title: counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("header.collateral_ratio"),
                            content: counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.coll_ratio")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "borrow.coll_ratio" })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__["Popover"],
                        {
                            placement: "top",
                            content: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { style: { width: "600px" } },
                                counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("borrow.target_collateral_ratio_explanation")
                            ),
                            title: counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("borrow.target_collateral_ratio")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "borrow.target_collateral_ratio_short" })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_9__["default"], {
                        noLink: true,
                        string: "account.total",
                        keys: [{
                            type: "asset",
                            value: preferredUnit,
                            arg: "asset"
                        }]
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight, className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__["Popover"],
                        {
                            placement: "top",
                            content: counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.call_price")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "exchange.call" })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: alignRight, className: "column-hide-small" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_11__["Popover"],
                        {
                            placement: "top",
                            content: counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.feed_price")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "exchange.feed_price" })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { className: "column-hide-small", style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "explorer.assets.units" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    { style: { textAlign: "center" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "exchange.market" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "borrow.adjust_short" })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "th",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_6___default.a, { content: "transfer.close" })
                )
            )
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ListGenerator, {
            account: account,
            callOrders: immutable__WEBPACK_IMPORTED_MODULE_10___default.a.List(callOrders)
        }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "tbody",
            null,
            children
        )
    );
};

/* harmony default export */ __webpack_exports__["default"] = (MarginPositionsTable);

/***/ }),

/***/ 2975:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2146);
/* harmony import */ var _Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2445);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2003);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2129);
/* harmony import */ var _Utility_AssetImage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2792);
/* harmony import */ var _Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2845);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(602);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(420);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(605);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(571);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(1894);
/* harmony import */ var _Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2365);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(527);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(1846);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _lib_common_asset_utils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(582);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }





















var alignRight = { textAlign: "right" };
var alignLeft = { textAlign: "left" };
/**
 *  Given a collateral position object (call order) and account,
 *  display it in a pretty way, in case no call order id was provided - display a placeholder
 *
 *  Expects property, 'object' which should be a call order id
 *  and another property called 'account' which should be an
 *  account
 */

var MarginPosition = function (_React$Component) {
    _inherits(MarginPosition, _React$Component);

    function MarginPosition(props) {
        _classCallCheck(this, MarginPosition);

        var _this = _possibleConstructorReturn(this, (MarginPosition.__proto__ || Object.getPrototypeOf(MarginPosition)).call(this, props));

        var has_order = props.object != null;

        _this.state = {
            isBorrowModalVisible: false,
            modalRef: "cp_modal_" + (has_order ? _this.props.object.getIn(["call_price", "quote", "asset_id"]) : _this.props.debtAsset.get("id")),
            hasOrder: has_order
        };
        return _this;
    }

    _createClass(MarginPosition, [{
        key: "showBorrowModal",
        value: function showBorrowModal() {
            this.setState({
                isBorrowModalVisible: true
            });
        }
    }, {
        key: "hideBorrowModal",
        value: function hideBorrowModal() {
            this.setState({
                isBorrowModalVisible: false
            });
        }
    }, {
        key: "_onUpdatePosition",
        value: function _onUpdatePosition(e) {
            e.preventDefault();
            this.refs[this.state.modalRef].show();
        }
    }, {
        key: "_getFeedPrice",
        value: function _getFeedPrice() {
            if (!this.props) {
                return 1;
            }

            return 1 / common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].get_asset_price(_lib_common_asset_utils__WEBPACK_IMPORTED_MODULE_18__["default"].extractRawFeedPrice(this.props.debtAsset).getIn(["quote", "amount"]), this.props.collateralAsset, _lib_common_asset_utils__WEBPACK_IMPORTED_MODULE_18__["default"].extractRawFeedPrice(this.props.debtAsset).getIn(["base", "amount"]), this.props.debtAsset);
        }
    }, {
        key: "_onClosePosition",
        value: function _onClosePosition(e) {
            e.preventDefault();
            var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_8__["default"].new_transaction();

            tr.add_type_operation("call_order_update", {
                fee: {
                    amount: 0,
                    asset_id: 0
                },
                funding_account: this.props.object.get("borrower"),
                delta_collateral: {
                    amount: -this.props.object.get("collateral"),
                    asset_id: this.props.object.getIn(["call_price", "base", "asset_id"])
                },
                delta_debt: {
                    amount: -this.props.object.get("debt"),
                    asset_id: this.props.object.getIn(["call_price", "quote", "asset_id"])
                }
            });

            stores_WalletDb__WEBPACK_IMPORTED_MODULE_10__["default"].process_transaction(tr, null, true);
        }

        // how many units of the debt asset the borrower has
        // in his/her wallet. This has nothing to do with
        // how many of the asset the borrower has borrowed.

    }, {
        key: "_getBalance",
        value: function _getBalance() {
            var account = this.props.account;

            // the debt asset id which we want to display
            var row_asset_id = null;

            // in case we displaying a margin position, not a placeholder
            if (this.props.object != null) {
                row_asset_id = this.props.object.getIn(["call_price", "quote", "asset_id"]);
            } else {
                row_asset_id = this.props.debtAsset.get("id");
            }

            var account_balances = account.get("balances");

            var balance = 0;

            // for every debt the account has, we iterate
            // through every balance the user has
            if (account_balances) {
                account_balances.forEach(function (a, asset_type) {
                    if (asset_type == row_asset_id) {
                        var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_9__["ChainStore"].getObject(a);

                        // get the balance
                        balance = balanceObject.get("balance");
                    }
                });
            }

            // it's possible that the account doesn't hold
            // any of the asset here
            return balance;
        }
    }, {
        key: "_getCollateralRatio",
        value: function _getCollateralRatio() {
            var co = this.props.object.toJS();
            var c = common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].get_asset_amount(co.collateral, this.props.collateralAsset);
            var d = common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].get_asset_amount(co.debt, this.props.debtAsset);
            return c / (d / this._getFeedPrice());
        }
    }, {
        key: "_getMR",
        value: function _getMR() {
            return this.props.debtAsset.getIn(["bitasset", "current_feed", "maintenance_collateral_ratio"]) / 1000;
        }
    }, {
        key: "_getStatusClass",
        value: function _getStatusClass() {
            var cr = this._getCollateralRatio();
            var mr = this._getMR();

            if (isNaN(cr)) return null;
            if (cr < mr) {
                return "danger";
            } else if (cr < mr + 0.5) {
                return "warning";
            } else {
                return "";
            }
        }
    }, {
        key: "_getCRTip",
        value: function _getCRTip() {
            var statusClass = this._getStatusClass();
            var mr = this._getMR();
            if (!statusClass || statusClass === "") return null;

            if (statusClass === "danger") {
                return counterpart__WEBPACK_IMPORTED_MODULE_12___default.a.translate("tooltip.cr_danger", { mr: mr });
            } else if (statusClass === "warning") {
                return counterpart__WEBPACK_IMPORTED_MODULE_12___default.a.translate("tooltip.cr_warning", { mr: mr });
            } else {
                return null;
            }
        }
    }, {
        key: "_getTargetCollateralRatio",
        value: function _getTargetCollateralRatio() {
            var co = this.props.object && this.props.object.toJS();

            return co && !isNaN(co.target_collateral_ratio) ? co.target_collateral_ratio / 1000 : 0;
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                debtAsset = _props.debtAsset,
                collateralAsset = _props.collateralAsset,
                object = _props.object;


            var has_order = object != null;
            var balance = this._getBalance();
            var co = has_order ? object.toJS() : null;

            var _utils$replaceName = common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].replaceName(this.props.debtAsset),
                isBitAsset = _utils$replaceName.isBitAsset;

            var isPrediction = debtAsset.get("bitasset") && debtAsset.getIn(["bitasset", "is_prediction_market"]);

            var settlement_fund = this.props.debtAsset.getIn(["bitasset", "settlement_fund"]);

            var mcr = this.props.debtAsset.getIn(["bitasset", "current_feed", "maintenance_collateral_ratio"]);

            var hasGlobalSettlement = settlement_fund > 0 ? true : false;

            var balance_asset = has_order ? co.call_price.quote.asset_id : debtAsset.get("id");
            var debt_amount = has_order ? co.debt : 0;
            var collateral_amount = has_order ? co.collateral : 0;
            var collateral_asset = has_order ? co.call_price.base.asset_id : collateralAsset.get("id");
            var target_collateral_ratio = this._getTargetCollateralRatio();

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "tr",
                { className: "margin-row" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignLeft },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetImage__WEBPACK_IMPORTED_MODULE_6__["default"], {
                        replaceNoneToBts: false,
                        maxWidth: 30,
                        name: debtAsset.get("symbol")
                    }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_16__["Link"],
                        { to: "/asset/" + debtAsset.get("symbol") },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_5__["default"], { noTip: true, name: debtAsset.get("symbol") })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        amount: balance,
                        asset: balance_asset,
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        amount: debt_amount,
                        asset: balance_asset,
                        hide_asset: true
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-medium" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_1__["default"], {
                        decimalOffset: 3,
                        amount: collateral_amount,
                        asset: collateral_asset
                    })
                ),
                has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        "data-place": "bottom",
                        "data-tip": this._getCRTip(),
                        className: "center-content " + this._getStatusClass()
                    },
                    isPrediction ? "1:1" : common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].format_number(this._getCollateralRatio(), 2)
                ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    target_collateral_ratio && !isPrediction ? common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].format_number(target_collateral_ratio, 2) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight },
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TotalBalanceValue__WEBPACK_IMPORTED_MODULE_14__["default"], {
                        noTip: true,
                        balances: Object(immutable__WEBPACK_IMPORTED_MODULE_15__["List"])(),
                        debt: _defineProperty({}, debtAsset.get("id"), co.debt),
                        collateral: _defineProperty({}, collateralAsset.get("id"), parseInt(co.collateral, 10)),
                        hide_asset: true
                    }) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-small" },
                    has_order ? isPrediction ? "-" : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        base_amount: collateral_amount,
                        base_asset: collateralAsset.get("id"),
                        quote_amount: debt_amount * (mcr / 1000),
                        quote_asset: debtAsset.get("id"),
                        hide_symbols: true
                    }) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: alignRight, className: "column-hide-small" },
                    has_order ? isPrediction ? "1" : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        base_amount: _lib_common_asset_utils__WEBPACK_IMPORTED_MODULE_18__["default"].extractRawFeedPrice(debtAsset).getIn(["base", "amount"]),
                        base_asset: co.call_price.quote.asset_id,
                        quote_amount: _lib_common_asset_utils__WEBPACK_IMPORTED_MODULE_18__["default"].extractRawFeedPrice(debtAsset).getIn(["quote", "amount"]),
                        quote_asset: co.call_price.base.asset_id,
                        hide_symbols: true
                    }) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    {
                        className: "center-content column-hide-small",
                        style: alignLeft
                    },
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        base_amount: co.call_price.base.amount,
                        base_asset: co.call_price.base.asset_id,
                        quote_amount: co.call_price.quote.amount,
                        quote_asset: co.call_price.quote.asset_id,
                        hide_value: true
                    }) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    { style: { textAlign: "center" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_16__["Link"],
                        {
                            to: "/market/" + debtAsset.get("symbol") + "_" + collateralAsset.get("symbol")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_13__["default"], {
                            name: "trade",
                            title: "icons.trade.trade",
                            className: "icon-14px",
                            style: { marginRight: 5 }
                        })
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    hasGlobalSettlement ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_17__["Tooltip"],
                        {
                            placement: "left",
                            title: counterpart__WEBPACK_IMPORTED_MODULE_12___default.a.translate("tooltip.borrow_disabled", {
                                asset: isBitAsset ? "bit" + ("" + debtAsset.get("symbol")) : "" + debtAsset.get("symbol")
                            })
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { style: { paddingBottom: 5 } },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_17__["Icon"], { type: "question-circle" })
                        )
                    ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_17__["Tooltip"],
                        {
                            placement: "left",
                            title: counterpart__WEBPACK_IMPORTED_MODULE_12___default.a.translate("tooltip.update_position")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { style: { paddingBottom: 5 } },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "a",
                                { onClick: this._onUpdatePosition.bind(this) },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_13__["default"], {
                                    name: "adjust",
                                    title: "icons.adjust",
                                    className: "icon-14px rotate90"
                                })
                            )
                        )
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "td",
                    null,
                    has_order ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        {
                            "data-place": "left",
                            "data-tip": counterpart__WEBPACK_IMPORTED_MODULE_12___default.a.translate("tooltip.close_position", {
                                amount: common_utils__WEBPACK_IMPORTED_MODULE_11__["default"].get_asset_amount(co.debt, this.props.debtAsset),
                                asset: debtAsset.get("symbol")
                            }),
                            style: { paddingBottom: 5 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            { onClick: this._onClosePosition.bind(this) },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_13__["default"], {
                                name: "cross-circle",
                                title: "icons.cross_circle.close_position",
                                className: "icon-14px"
                            })
                        )
                    ) : null,
                    debtAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_7__["default"], {
                        visible: this.state.isBorrowModalVisible,
                        showModal: this.showBorrowModal.bind(this),
                        hideModal: this.hideBorrowModal.bind(this),
                        ref: this.state.modalRef,
                        modalId: this.state.modalRef,
                        quoteAssetObj: balance_asset,
                        backingAssetObj: debtAsset.getIn(["bitasset", "options", "short_backing_asset"]),
                        accountObj: this.props.account
                    }) : null
                )
            );
        }
    }]);

    return MarginPosition;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarginPosition.propTypes = {
    object: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject,
    debtAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAsset.isRequired,
    collateralAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAsset.isRequired
};
MarginPosition.defaultProps = {
    tempComponent: "tr"
};

MarginPosition = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(MarginPosition);

/* harmony default export */ __webpack_exports__["default"] = (MarginPosition);

/***/ }),

/***/ 2976:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var components_Blockchain_ProposedOperation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2466);
/* harmony import */ var components_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2003);
/* harmony import */ var components_Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2002);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(571);
/* harmony import */ var _Modal_ProposalModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2977);
/* harmony import */ var _Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2978);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(420);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var common_permission_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2979);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2443);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(553);
/* harmony import */ var common_account_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(570);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var components_Modal_JSONModal__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2546);
var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }



















var operations = bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainTypes"].operations;

var ops = Object.keys(operations);

var Proposals = function (_Component) {
    _inherits(Proposals, _Component);

    function Proposals() {
        _classCallCheck(this, Proposals);

        var _this = _possibleConstructorReturn(this, (Proposals.__proto__ || Object.getPrototypeOf(Proposals)).call(this));

        _this.closeJSONModal = function () {
            _this.setState({ visibleId: "" });
        };

        _this.state = {
            isModalVisible: false,
            modal: {
                action: null,
                proposalId: null,
                accountId: null
            },
            visibleId: ""
        };

        _this._proposals = [];
        _this._loading = false;

        _this.forceUpdate = _this.forceUpdate.bind(_this);
        _this._isScam = _this._isScam.bind(_this);
        _this._isUnknown = _this._isUnknown.bind(_this);
        _this.showModal = _this.showModal.bind(_this);
        _this.hideModal = _this.hideModal.bind(_this);
        return _this;
    }

    _createClass(Proposals, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            /*
            * Account objects don't get updated by underlying proposal changes, but
            * the ChainStore does, so in order to update this component when a proposal
            * changes, we need to update it whenever the ChainStore itself updates
            */
            bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].subscribe(this.forceUpdate);
        }
    }, {
        key: "_setProposals",
        value: function _setProposals() {
            this._loading = true;
            // resolve proposals
            var account = this.props.account;
            if (account.get("proposals").size) {
                var proposals = [];
                account.get("proposals").forEach(function (proposal_id) {
                    var proposal = bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].getObject(proposal_id);
                    if (proposal) {
                        var proposed_transaction = proposal.get("proposed_transaction");
                        var _operations = proposed_transaction.get("operations");
                        proposals.push({ operations: _operations, account: account, proposal: proposal });
                    }
                });
                proposals = proposals.sort(function (a, b) {
                    return common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].sortID(a.proposal.get("id"), b.proposal.get("id"), true);
                });
                proposals.forEach(function (proposal) {
                    var type = proposal.proposal.get("required_active_approvals").size ? "active" : "owner";
                    var required = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.proposal.get("required_" + type + "_approvals"));
                    proposal.requiredPermissions = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].unnest(required, type);
                });
                this._proposals = proposals;
                this._loading = false;
            }
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].unsubscribe(this.forceUpdate);
        }
    }, {
        key: "showModal",
        value: function showModal(_ref) {
            var action = _ref.action,
                proposalId = _ref.proposalId,
                accountId = _ref.accountId;

            this.setState({
                isModalVisible: true,
                modal: {
                    action: action,
                    proposalId: proposalId,
                    accountId: accountId
                }
            });
        }
    }, {
        key: "hideModal",
        value: function hideModal() {
            this.setState({
                isModalVisible: false,
                modal: {
                    action: null,
                    proposalId: null,
                    accountId: null
                }
            });
        }
    }, {
        key: "_onApproveModal",
        value: function _onApproveModal(proposalId, accountId, action) {
            this.showModal({ action: action, proposalId: proposalId, accountId: accountId });
        }
    }, {
        key: "_canReject",
        value: function _canReject(proposal) {
            return proposal.available_active_approvals.length || proposal.available_owner_approvals.length || proposal.available_key_approvals.length;
        }
    }, {
        key: "_isScam",
        value: function _isScam(proposal) {
            var _this2 = this;

            var isScam = false;

            var touchedAccounts = [];
            proposal.operations.forEach(function (o) {
                if (o.get(0) == 6) {
                    touchedAccounts.push(o.getIn([1, "active", "account_auths", 0, 0]));
                    touchedAccounts.push(o.getIn([1, "owner", "account_auths", 0, 0]));
                } else {
                    touchedAccounts.push(o.getIn([1, "to"]));
                }
            });

            var proposer = proposal.proposal.get("proposer");

            touchedAccounts.push(proposer);

            /* if (__DEV__) {
                console.log(
                    "Proposed transactions: ",
                    proposal,
                    " touching accounts ",
                    touchedAccounts
                );
            } */

            touchedAccounts.forEach(function (_account) {
                if (common_account_utils__WEBPACK_IMPORTED_MODULE_13__["default"].isKnownScammer(_account)) {
                    isScam = true;
                }
                if (_this2.props.account.get("blacklisted_accounts").some(function (item) {
                    return item === _account;
                })) {
                    isScam = true;
                }
            });
            return isScam;
        }
    }, {
        key: "_isUnknown",
        value: function _isUnknown(proposal) {
            var _this3 = this;

            var isUnknown = true;

            var touchedAccounts = [];
            proposal.operations.forEach(function (o) {
                if (o.get(0) == 6) {
                    touchedAccounts.push(o.getIn([1, "active", "account_auths", 0, 0]));
                    touchedAccounts.push(o.getIn([1, "owner", "account_auths", 0, 0]));
                } else {
                    touchedAccounts.push(o.getIn([1, "to"]));
                }
            });

            var proposer = proposal.proposal.get("proposer");

            touchedAccounts.push(proposer);
            touchedAccounts.forEach(function (_account) {
                if (_this3.props.account.get("whitelisted_accounts").some(function (item) {
                    return item === _account;
                })) {
                    isUnknown = false;
                }
                var starred = stores_AccountStore__WEBPACK_IMPORTED_MODULE_12__["default"].getState().starredAccounts;
                if (starred.some(function (item) {
                    var name = bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].getAccount(item, false);
                    if (!!name) {
                        return name.get("id") == _account;
                    } else {
                        return false;
                    }
                })) {
                    isUnknown = false;
                }
                var contacts = stores_AccountStore__WEBPACK_IMPORTED_MODULE_12__["default"].getState().accountContacts;
                if (contacts.some(function (item) {
                    var name = bitsharesjs__WEBPACK_IMPORTED_MODULE_8__["ChainStore"].getAccount(item, false);
                    if (!!name) {
                        return name.get("id") == _account;
                    }
                    return false;
                })) {
                    isUnknown = false;
                }
            });
            return isUnknown;
        }
    }, {
        key: "openJSONModal",
        value: function openJSONModal(id) {
            this.setState({ visibleId: id });
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var account = this.props.account;

            if (!account) return null;

            if (account.get("proposals").size > 0 && this._proposals.length == 0 || this._proposals.length > 0 && account !== this._proposals[0].account && !this._loading) {
                this._setProposals();
            }

            var proposalRows = this._proposals.reduce(function (result, proposal, index) {
                var id = proposal.proposal.get("id");
                var proposer = proposal.proposal.get("proposer");
                var expiration = proposal.proposal.get("expiration_time");
                var trxTypes = counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("transaction.trxTypes");
                var operations = proposal.operations && proposal.operations.toJS();
                var title = operations.length > 1 ? counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("transaction.operations") : trxTypes[ops[operations[0] && operations[0][0]]];

                var text = proposal.operations.map(function (o, index) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Blockchain_ProposedOperation__WEBPACK_IMPORTED_MODULE_2__["default"], {
                        key: proposal.proposal.get("id") + "_operation_" + index,
                        expiration: expiration,
                        index: index,
                        op: o.toJS(),
                        inverted: false,
                        hideFee: true,
                        hideOpLabel: true,
                        hideExpiration: true,
                        hideDate: true,
                        proposal: true,
                        id: id,
                        proposer: proposer,
                        collapsed: false
                    });
                }).toArray();

                var canReject = _this4._canReject(proposal.proposal.toJS());
                var proposalId = proposal.proposal.get("id");

                var type = proposal.proposal.get("required_active_approvals").size ? "active" : "owner";
                result.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: proposalId + "_id" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        {
                            colSpan: "4",
                            className: "proposal" + (index === 0 ? " first" : "")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Blockchain_ProposedOperation__WEBPACK_IMPORTED_MODULE_2__["TransactionIDAndExpiry"], {
                            id: id,
                            expiration: expiration,
                            openJSONModal: function openJSONModal() {
                                return _this4.openJSONModal(id);
                            }
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Modal_JSONModal__WEBPACK_IMPORTED_MODULE_15__["default"], {
                            visible: _this4.state.visibleId === id,
                            operation: operations.length > 1 ? operations : operations[0] && operations[0][1],
                            title: title || "",
                            hideModal: _this4.closeJSONModal
                        })
                    )
                ));

                var available = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.proposal.get("available_" + type + "_approvals"));
                var availableKeys = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.proposal.get("available_key_approvals"));

                var requiredPermissions = proposal.requiredPermissions;

                var _finalRequiredPerms = Object(_Modal_ProposalModal__WEBPACK_IMPORTED_MODULE_6__["finalRequiredPerms"])(requiredPermissions, available, availableKeys),
                    _finalRequiredPerms2 = _slicedToArray(_finalRequiredPerms, 2),
                    accounts = _finalRequiredPerms2[0],
                    keys = _finalRequiredPerms2[1];

                var accountNames = [];

                if (accounts.length) {
                    accounts.forEach(function (account) {
                        if (account && !proposal.proposal.get("available_" + type + "_approvals").includes(account)) {
                            accountNames.push(account);
                        }
                    });
                }

                var keyNames = [];
                if (keys.length) {
                    keys.forEach(function (key) {
                        var isMine = stores_AccountStore__WEBPACK_IMPORTED_MODULE_12__["default"].isMyKey(key);
                        if (isMine && !proposal.proposal.get("available_key_approvals").includes(key)) {
                            keyNames.push(key);
                        }
                    });
                }

                var canApprove = accountNames.length + keyNames.length > 0;

                var isScam = _this4._isScam(proposal);
                var isUnknown = _this4._isUnknown(proposal);

                result.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { className: "top-left-align", key: proposalId + "_content" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        text
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        requiredPermissions.map(function (account, index) {
                            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                {
                                    className: "list-item",
                                    key: proposalId + "_approver_" + index
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_11__["default"], {
                                    subpage: "permissions",
                                    account: account.id
                                })
                            );
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_7__["default"], {
                            proposal: proposal.proposal.get("id"),
                            type: type
                        })
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { className: "approval-buttons" },
                        isScam && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__["Tooltip"],
                            {
                                title: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("tooltip.propose_scam")
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "tooltip has-error scam-error" },
                                "SCAM ATTEMPT"
                            )
                        ),
                        _this4.props.hideFishingProposals && !isScam && isUnknown && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_14__["Tooltip"],
                            {
                                title: counterpart__WEBPACK_IMPORTED_MODULE_9___default.a.translate("tooltip.propose_unknown")
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "tooltip has-error scam-error" },
                                "UNKNOWN SOURCE"
                            )
                        ),
                        !isScam && (!isUnknown || !_this4.props.hideFishingProposals) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                onClick: canApprove ? _this4._onApproveModal.bind(_this4, proposalId, proposal.account.get("id"), "approve") : function () {},
                                className: "button primary hollow" + (canApprove ? "" : " hidden")
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "span",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.approve" })
                            )
                        ),
                        canReject ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                onClick: _this4._onApproveModal.bind(_this4, proposalId, proposal.account.get("id"), "reject"),
                                className: "button primary hollow"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.reject" })
                        ) : null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "button",
                            {
                                onClick: _this4._onApproveModal.bind(_this4, proposalId, proposal.account.get("id"), "delete"),
                                className: "button primary hollow"
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.delete" })
                        )
                    )
                ));
                result.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "tr",
                    { key: proposalId + "_separator" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "td",
                        { colSpan: "4" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("hr", null)
                    )
                ));
                return result;
            }, []);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "table",
                    {
                        className: "table proposals compact " + this.props.className
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "thead",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "tr",
                            null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.proposals" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.approvers" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.status" })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "th",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, { content: "proposal.action" })
                            )
                        )
                    ),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "tbody",
                        null,
                        proposalRows
                    )
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_ProposalModal__WEBPACK_IMPORTED_MODULE_6__["default"], {
                    ref: "modal",
                    visible: this.state.isModalVisible,
                    hideModal: this.hideModal,
                    showModal: this.showModal,
                    account: this.state && this.state.modal.accountId,
                    proposal: this.state && this.state.modal.proposalId,
                    action: this.state && this.state.modal.action
                })
            );
        }
    }]);

    return Proposals;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

Proposals.propTypes = {
    account: components_Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_4__["default"].ChainAccount.isRequired
};


/* harmony default export */ __webpack_exports__["default"] = (Object(components_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(Proposals));

/***/ }),

/***/ 2977:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "finalRequiredPerms", function() { return finalRequiredPerms; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2003);
/* harmony import */ var components_Forms_AccountSelect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2549);
/* harmony import */ var stores_AccountStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(553);
/* harmony import */ var stores_WalletDb__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(605);
/* harmony import */ var api_WalletApi__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(602);
/* harmony import */ var _Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2978);
/* harmony import */ var common_permission_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2979);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(420);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12__);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }















var finalRequiredPerms = function finalRequiredPerms(requiredPermissions, available, availableKeys) {
    var finalRequired = [];

    requiredPermissions.forEach(function (account) {
        finalRequired = finalRequired.concat(account.getMissingSigs(available));
    });

    var finalRequiredKeys = [];

    requiredPermissions.forEach(function (account) {
        finalRequiredKeys = finalRequiredKeys.concat(account.getMissingKeys(availableKeys));
    });

    return [finalRequired, finalRequiredKeys];
};

var ProposalModal = function (_React$Component) {
    _inherits(ProposalModal, _React$Component);

    function ProposalModal(props) {
        _classCallCheck(this, ProposalModal);

        var _this = _possibleConstructorReturn(this, (ProposalModal.__proto__ || Object.getPrototypeOf(ProposalModal)).call(this));

        _this.state = {
            active: null,
            key: null,
            owner: null,
            payee: null
        };
        return _this;
    }

    _createClass(ProposalModal, [{
        key: "onActiveAccount",
        value: function onActiveAccount(accountMap, keyMap, type, account) {
            var newState = {};

            if (keyMap[account]) {
                newState["key"] = account;
                newState[type] = null;
            } else if (account) {
                newState[type] = accountMap[account];
                newState["key"] = null;
            } else {
                newState[type] = null;
                newState["key"] = null;
            }
            this.setState(newState);
        }
    }, {
        key: "_onProposalAction",
        value: function _onProposalAction(oldProposal) {
            var _this2 = this;

            var proposalObject = oldProposal.toJS();
            var _state = this.state,
                active = _state.active,
                key = _state.key,
                owner = _state.owner,
                payee = _state.payee;

            var fee_paying_account = payee || active;

            if (this.props.action === "delete") {
                var transaction = api_WalletApi__WEBPACK_IMPORTED_MODULE_8__["default"].new_transaction();
                transaction.add_type_operation("proposal_delete", {
                    fee_paying_account: fee_paying_account || this.props.account.get("id"),
                    proposal: proposalObject.id,
                    using_owner_authority: false
                });
                stores_WalletDb__WEBPACK_IMPORTED_MODULE_7__["default"].process_transaction(transaction, null, true);
            } else {
                var proposal = {
                    fee_paying_account: fee_paying_account,
                    proposal: proposalObject.id,
                    active_approvals_to_add: [],
                    active_approvals_to_remove: [],
                    owner_approvals_to_add: [],
                    owner_approvals_to_remove: [],
                    key_approvals_to_add: [],
                    key_approvals_to_remove: []
                };

                var isAdd = this.props.action === "approve";

                var neededKeys = [];

                ["active", "owner", "key"].forEach(function (auth_type) {
                    var value = _this2.state[auth_type];
                    if (value) {
                        var hasValue = proposalObject["available_" + auth_type + "_approvals"].indexOf(value) !== -1;
                        if (isAdd && !hasValue || !isAdd && hasValue) {
                            if (_this2.props.action === "approve") {
                                proposal[auth_type + "_approvals_to_add"] = [value];
                                if (auth_type === "key") neededKeys.push(value);
                            } else if (_this2.props.action === "reject") {
                                proposal[auth_type + "_approvals_to_remove"] = [value];
                                if (auth_type === "key") neededKeys.push(value);
                            }
                        }
                    }
                });

                var tr = api_WalletApi__WEBPACK_IMPORTED_MODULE_8__["default"].new_transaction();
                tr.add_type_operation("proposal_update", proposal);
                stores_WalletDb__WEBPACK_IMPORTED_MODULE_7__["default"].process_transaction(tr, null, true, neededKeys);
            }

            this.props.hideModal();
        }
    }, {
        key: "onChangePayee",
        value: function onChangePayee(account) {
            var fullAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_11__["ChainStore"].getAccount(account);

            if (fullAccount) {
                this.setState({
                    payee: fullAccount.get("id")
                });
            }
        }
    }, {
        key: "onCancel",
        value: function onCancel() {
            this.props.hideModal();
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                proposal = _props.proposal,
                type = _props.type;


            var accountNames = [];
            var accountMap = {};
            var isAdd = this.props.action === "approve";

            if (this.props.accounts.length) {
                this.props.accounts.forEach(function (account) {
                    var accountCheck = isAdd ? account && !proposal.get("available_" + type + "_approvals").includes(account.get("id")) : account && proposal.get("available_" + type + "_approvals").includes(account.get("id"));
                    if (accountCheck) {
                        accountMap[account.get("name")] = account.get("id");
                        accountNames.push(account.get("name"));
                    }
                });
            }

            var keyNames = [];
            var keyMap = {};
            if (this.props.keys.length) {
                this.props.keys.forEach(function (key) {
                    var isMine = stores_AccountStore__WEBPACK_IMPORTED_MODULE_6__["default"].isMyKey(key);
                    var hasValue = proposal.get("available_key_approvals").includes(key);
                    if (isMine && isAdd && !hasValue || isMine && !isAdd && hasValue) {
                        keyMap[key] = true;
                        keyNames.push(key);
                    }
                });
            }

            var myAccounts = stores_AccountStore__WEBPACK_IMPORTED_MODULE_6__["default"].getMyAccounts();

            var footer = [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12__["Button"],
                {
                    key: "submit",
                    type: "primary",
                    onClick: this._onProposalAction.bind(this, proposal)
                },
                counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("proposal." + this.props.action)
            ), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12__["Button"],
                { key: "cancel", onClick: this.onCancel.bind(this) },
                counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("account.perm.cancel")
            )];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_12__["Modal"],
                {
                    visible: this.props.visible,
                    title: counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("modal.proposals.actions." + this.props.action),
                    footer: footer,
                    onCancel: this.props.hideModal
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { className: "grid-block vertical" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "form",
                        {
                            className: "grid-block vertical full-width-content",
                            style: { paddingTop: 0 }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "grid-container" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                {
                                    className: "content-block",
                                    style: { paddingRight: "20%" }
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Account_NestedApprovalState__WEBPACK_IMPORTED_MODULE_9__["default"], {
                                    expanded: true,
                                    proposal: proposal.get("id"),
                                    type: type,
                                    added: isAdd ? this.state.key ? this.state.key : this.state[type] || null : null,
                                    removed: !isAdd ? this.state.key ? this.state.key : this.state[type] || null : null,
                                    noFail: true
                                })
                            ),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "div",
                                { className: "content-block full-width-content" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "full-width-content form-group" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        content: "modal.proposals.pay_with",
                                        component: "label"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Forms_AccountSelect__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                        account_names: myAccounts,
                                        onChange: this.onChangePayee.bind(this),
                                        selected: myAccounts.length === 1 ? myAccounts : null
                                    })
                                ),
                                this.props.action !== "delete" && (accountNames.length || keyNames.length) ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "full-width-content form-group" },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                                        content: "modal.proposals.approval_" + (isAdd ? "add" : "remove"),
                                        component: "label"
                                    }),
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(components_Forms_AccountSelect__WEBPACK_IMPORTED_MODULE_5__["default"], {
                                        account_names: accountNames.concat(keyNames),
                                        onChange: this.onActiveAccount.bind(this, accountMap, keyMap, type)
                                    })
                                ) : null,
                                 false ? undefined : null
                            )
                        )
                    )
                )
            );
        }
    }]);

    return ProposalModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ProposalModal.propTypes = {
    accounts: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAccountsList
};

ProposalModal = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(ProposalModal);

var FirstLevel = function (_React$Component2) {
    _inherits(FirstLevel, _React$Component2);

    function FirstLevel() {
        _classCallCheck(this, FirstLevel);

        var _this3 = _possibleConstructorReturn(this, (FirstLevel.__proto__ || Object.getPrototypeOf(FirstLevel)).call(this));

        _this3._updateState = _this3._updateState.bind(_this3);
        return _this3;
    }

    _createClass(FirstLevel, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this._updateState();

            bitsharesjs__WEBPACK_IMPORTED_MODULE_11__["ChainStore"].subscribe(this._updateState);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            bitsharesjs__WEBPACK_IMPORTED_MODULE_11__["ChainStore"].unsubscribe(this._updateState);
        }
    }, {
        key: "_updateState",
        value: function _updateState() {
            var _props2 = this.props,
                proposal = _props2.proposal,
                account = _props2.account;

            var type = proposal.get("required_active_approvals").size ? "active" : "owner";

            var required = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.get("required_" + type + "_approvals"));
            var available = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.get("available_" + type + "_approvals"));
            var availableKeys = common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].listToIDs(proposal.get("available_key_approvals"));

            this.setState({
                requiredPermissions: common_permission_utils__WEBPACK_IMPORTED_MODULE_10__["default"].unnest(required, type),
                available: available,
                availableKeys: availableKeys,
                type: type
            });
        }
    }, {
        key: "render",
        value: function render() {
            var action = this.props.action;
            var _state2 = this.state,
                requiredPermissions = _state2.requiredPermissions,
                available = _state2.available,
                availableKeys = _state2.availableKeys,
                type = _state2.type;

            var _finalRequiredPerms = finalRequiredPerms(requiredPermissions, available, availableKeys),
                _finalRequiredPerms2 = _slicedToArray(_finalRequiredPerms, 2),
                finalRequired = _finalRequiredPerms2[0],
                finalRequiredKeys = _finalRequiredPerms2[1];

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ProposalModal, _extends({}, this.props, {
                type: type,
                accounts: action === "approve" ? finalRequired : available,
                keys: action === "approve" ? finalRequiredKeys : availableKeys
            }));
        }
    }]);

    return FirstLevel;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

FirstLevel.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainAccount.isRequired,
    proposal: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_3__["default"].ChainObject.isRequired
};

FirstLevel = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_4__["default"])(FirstLevel);

var ModalWrapper = function (_React$Component3) {
    _inherits(ModalWrapper, _React$Component3);

    function ModalWrapper() {
        _classCallCheck(this, ModalWrapper);

        return _possibleConstructorReturn(this, (ModalWrapper.__proto__ || Object.getPrototypeOf(ModalWrapper)).apply(this, arguments));
    }

    _createClass(ModalWrapper, [{
        key: "render",
        value: function render() {
            if (!this.props.account || !this.props.proposal || !this.props.action) return null;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FirstLevel, this.props);
        }
    }]);

    return ModalWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (ModalWrapper);

/***/ }),

/***/ 2978:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(606);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2002);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2003);
/* harmony import */ var _Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2443);
/* harmony import */ var common_permission_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2979);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(420);
/* harmony import */ var _NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2980);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__);


var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var AccountPermissionTree = function (_React$Component) {
    _inherits(AccountPermissionTree, _React$Component);

    function AccountPermissionTree(props) {
        _classCallCheck(this, AccountPermissionTree);

        var _this = _possibleConstructorReturn(this, (AccountPermissionTree.__proto__ || Object.getPrototypeOf(AccountPermissionTree)).call(this, props));

        _this.handleExpandToggle = function () {
            _this.setState({ expanded: !_this.state.expanded });
        };

        _this.state = { expanded: !!props.expanded };
        return _this;
    }

    _createClass(AccountPermissionTree, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                account = _props.account,
                available = _props.available,
                availableKeys = _props.availableKeys,
                permission = _props.permission,
                threshold = _props.threshold,
                level = _props.level,
                maxAuthorityDepth = _props.maxAuthorityDepth,
                hideRoot = _props.hideRoot;
            var expanded = this.state.expanded;


            var isOK = Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["isApproved"])(permission, available, availableKeys);
            var isNested = permission.isNested();
            var isMultiSig = permission.isMultiSig();

            var notNestedWeight = Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["notNestdWeight"])(permission.weight, threshold) || 1;

            var nestedWeight = Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["statusText"])(permission, available, availableKeys);

            var authorityDepthOverflow = level >= maxAuthorityDepth;

            var rootPerm = !isNested && !isMultiSig ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    { colSpan: "2" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ApprovedIcon"], { approved: isOK }),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        subpage: "permissions",
                        account: account.get("id")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    null,
                    !isNested && notNestedWeight ? "" + (notNestedWeight && notNestedWeight.length === 2 ? "\xA0\xA0" : "") + notNestedWeight + " " : null
                )
            ) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tr",
                null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    { colSpan: "2" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ApprovedIcon"], { approved: isOK }),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Utility_LinkToAccountById__WEBPACK_IMPORTED_MODULE_4__["default"], {
                        subpage: "permissions",
                        account: account.get("id")
                    })
                ),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "td",
                    null,
                    expanded ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        { className: isOK ? "success-text" : "" },
                        notNestedWeight
                    ) : notNestedWeight && "" + (notNestedWeight && notNestedWeight.length === 2 ? "\xA0\xA0" : "") + notNestedWeight + " ",
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ExpandButton"], {
                        onToggle: this.handleExpandToggle,
                        expanded: expanded
                    }),
                    expanded && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        { className: "appended" },
                        "(",
                        nestedWeight,
                        ")"
                    ),
                    authorityDepthOverflow ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["AuthorityDepthOverflowWarning"], null) : Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["hasAuthorityDepthProblem"])(maxAuthorityDepth, permission, level) && !expanded && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ChildAuthorityDepthOverflowWarning"], null)
                )
            );

            var status = [];

            if ((isNested || isMultiSig) && expanded) {
                permission.accounts.forEach(function (subAccount) {
                    status.push(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(BoundAccountPermissionTree, {
                        key: subAccount.id,
                        account: subAccount.id,
                        accounts: subAccount.accounts,
                        permission: subAccount,
                        available: available,
                        availableKeys: availableKeys,
                        threshold: permission.threshold,
                        level: level + 1,
                        maxAuthorityDepth: maxAuthorityDepth
                    }));
                });

                if (permission.keys.length) {
                    permission.keys.forEach(function (key) {
                        return status.push(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["KeyPermissionBranch"], {
                            key: key.id,
                            permission: key,
                            available: availableKeys,
                            level: level + (hideRoot ? 0 : 1),
                            weight: Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["notNestdWeight"])(key.weight, threshold)
                        }));
                    });
                }
            }

            return status.length > 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tbody",
                null,
                hideRoot || rootPerm,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "tr",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "td",
                        { colSpan: "3", className: "heading-perm" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                            "div",
                            { className: hideRoot ? "" : "table-container" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                                "table",
                                null,
                                status
                            )
                        ),
                        expanded && level === 0 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "spacer" })
                    )
                )
            ) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "tbody",
                null,
                rootPerm
            );
        }
    }]);

    return AccountPermissionTree;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

AccountPermissionTree.propTypes = {
    account: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccount.isRequired,
    accounts: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccountsList,
    level: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.number.isRequired
};
AccountPermissionTree.defaultProps = {
    level: 0
};

var BoundAccountPermissionTree = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(AccountPermissionTree);

var FirstLevel = function (_React$Component2) {
    _inherits(FirstLevel, _React$Component2);

    function FirstLevel(props) {
        _classCallCheck(this, FirstLevel);

        var _this2 = _possibleConstructorReturn(this, (FirstLevel.__proto__ || Object.getPrototypeOf(FirstLevel)).call(this, props));

        _this2.handleExpandToggle = function () {
            return _this2.setState({ expanded: !_this2.state.expanded });
        };

        _this2.state = {
            requiredPermissions: [],
            expanded: props.expanded
        };

        _this2._updateState = _this2._updateState.bind(_this2);
        return _this2;
    }

    _createClass(FirstLevel, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this._updateState();

            bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].subscribe(this._updateState);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].unsubscribe(this._updateState);
        }
    }, {
        key: "_updateState",
        value: function _updateState() {
            var required = common_permission_utils__WEBPACK_IMPORTED_MODULE_5__["default"].listToIDs(this.props.required);
            var available = common_permission_utils__WEBPACK_IMPORTED_MODULE_5__["default"].listToIDs(this.props.available);

            this.setState({
                requiredPermissions: common_permission_utils__WEBPACK_IMPORTED_MODULE_5__["default"].unnest(required, this.props.type),
                required: required,
                available: available
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var _props2 = this.props,
                type = _props2.type,
                added = _props2.added,
                removed = _props2.removed,
                availableKeys = _props2.availableKeys,
                globalObject = _props2.globalObject,
                reviewPeriodTime = _props2.reviewPeriodTime,
                noFail = _props2.noFail,
                failReason = _props2.failReason;
            var _state = this.state,
                requiredPermissions = _state.requiredPermissions,
                required = _state.required,
                available = _state.available,
                expanded = _state.expanded;


            available = Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__["default"])(available);
            availableKeys = availableKeys.toJS();

            if (added) {
                available.push(added);
                availableKeys.push(added);
            }

            if (removed) {
                if (available.indexOf(removed) !== -1) {
                    available.splice(available.indexOf(removed), 1);
                }
                if (availableKeys.indexOf(removed) !== -1) {
                    availableKeys.splice(availableKeys.indexOf(removed), 1);
                }
            }

            var approvedCount = requiredPermissions.reduce(function (total, perm) {
                return total + (Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["isApproved"])(perm, available, availableKeys) ? 1 : 0);
            }, 0);
            var approversCount = requiredPermissions.length;
            var isOK = approvedCount === approversCount;

            var failed = isOK && !reviewPeriodTime && !noFail;
            var pendingReview = isOK && reviewPeriodTime;

            var maxAuthorityDepth = globalObject.get("parameters").get("max_authority_depth");

            var onePerm = requiredPermissions.length === 1;
            var oPermission = onePerm ? requiredPermissions[0] : null;

            var nestedWeight = !onePerm && approvedCount + " / " + approversCount;

            var rows = requiredPermissions.map(function (account) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(BoundAccountPermissionTree, {
                    key: account.id,
                    account: account.id,
                    accounts: account.accounts,
                    permission: account,
                    available: available,
                    availableKeys: availableKeys,
                    expanded: _this3.props.expanded || onePerm,
                    level: 0,
                    maxAuthorityDepth: maxAuthorityDepth,
                    hideRoot: onePerm
                });
            });

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                "div",
                { className: "nested-approval-state" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "div",
                    { className: "root-status" },
                    failed ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["Failed"], { reason: failReason }) : pendingReview ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["Review"], null) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["Pending"], null),
                    " ",
                    !oPermission ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                        "span",
                        null,
                        "(",
                        nestedWeight,
                        ")"
                    ) : oPermission.threshold > 1 && Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["statusText"])(oPermission, available, availableKeys),
                    (!oPermission || oPermission.isMultiSig() || oPermission.isNested()) && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ExpandButton"], {
                        onToggle: this.handleExpandToggle,
                        expanded: expanded
                    }),
                    !expanded && requiredPermissions.some(function (permission) {
                        return Object(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["hasAuthorityDepthProblem"])(maxAuthorityDepth, permission, 0);
                    }) && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_NestedApprovalStateLib__WEBPACK_IMPORTED_MODULE_7__["ChildAuthorityDepthOverflowWarning"], null)
                ),
                expanded && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(
                    "table",
                    null,
                    rows
                )
            );
        }
    }]);

    return FirstLevel;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

FirstLevel.propTypes = {
    required: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccountsList,
    available: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainAccountsList
};
FirstLevel.defaultProps = {
    type: "active",
    added: null,
    removed: null
};

FirstLevel = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(FirstLevel);

var ProposalWrapper = function (_React$Component3) {
    _inherits(ProposalWrapper, _React$Component3);

    function ProposalWrapper() {
        _classCallCheck(this, ProposalWrapper);

        return _possibleConstructorReturn(this, (ProposalWrapper.__proto__ || Object.getPrototypeOf(ProposalWrapper)).apply(this, arguments));
    }

    _createClass(ProposalWrapper, [{
        key: "render",
        value: function render() {
            var _props3 = this.props,
                proposal = _props3.proposal,
                type = _props3.type;

            var available = proposal.get("available_" + type + "_approvals");
            var availableKeys = proposal.get("available_key_approvals");
            var required = proposal.get("required_" + type + "_approvals");
            var failReason = proposal.get("fail_reason") || " ";

            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(FirstLevel, _extends({}, this.props, {
                required: required,
                available: available,
                availableKeys: availableKeys,
                reviewPeriodTime: proposal.get("review_period_time"),
                failReason: failReason
            }));
        }
    }]);

    return ProposalWrapper;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);

ProposalWrapper.propTypes = {
    proposal: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainObject.isRequired,
    type: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.string.isRequired,
    globalObject: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_2__["default"].ChainObject.isRequired
};
ProposalWrapper.defaultProps = {
    type: "active",
    added: null,
    globalObject: "2.0.0"
};


/* harmony default export */ __webpack_exports__["default"] = (Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_3__["default"])(ProposalWrapper));

/***/ }),

/***/ 2979:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(420);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(527);
/* harmony import */ var immutable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_1__);



var KeyAuth = function KeyAuth(auth) {
    var _this = this;

    this.id = auth.toJS ? auth.get(0) : auth[0];
    this.weight = auth.toJS ? auth.get(1) : auth[1];

    this.isAvailable = function (auths) {
        return auths.includes ? auths.includes(_this.id) : auths.indexOf(_this) !== -1;
    };
};

var permissionUtils = {
    AccountPermission: function AccountPermission(account, weight, type) {
        var _this2 = this;

        this.id = account.get("id");
        this.weight = weight;
        this.threshold = account.getIn([type, "weight_threshold"]);
        this.accounts = [];
        this.keys = account.getIn([type, "key_auths"]).map(function (auth) {
            return new KeyAuth(auth);
        }).toArray();

        this.isAvailable = function (auths) {
            return auths.includes ? auths.includes(_this2.id) : auths.indexOf(_this2) !== -1;
        };

        this._sumWeights = function (auths) {
            if (!_this2.isNested() && !_this2.isMultiSig()) {
                return _this2.isAvailable(auths) ? _this2.weight : 0;
            } else {
                var sum = _this2.accounts.reduce(function (status, account) {
                    return status + (account._sumWeights(auths) ? account.weight : 0);
                }, 0);

                return Math.floor(sum / _this2.threshold);
            }
        };

        this.getStatus = function (auths, keyAuths) {
            if (!_this2.isNested()) {
                var sum = _this2._sumWeights(auths);
                if (_this2.isMultiSig()) {
                    sum += _this2.sumKeys(keyAuths);
                }
                return sum;
            } else {
                var _sum = _this2.accounts.reduce(function (status, account) {
                    return status + account._sumWeights(auths);
                }, 0);

                if (_this2.keys.length) {
                    _sum += _this2.sumKeys(keyAuths);
                }

                return _sum;
            }
        };

        this.sumKeys = function (keyAuths) {
            var keySum = _this2.keys.reduce(function (s, key) {
                return s + (key.isAvailable(keyAuths) ? key.weight : 0);
            }, 0);
            return keySum;
        };

        this.isNested = function () {
            return _this2.accounts.length > 0;
        };

        this.isMultiSig = function () {
            return _this2.keys.reduce(function (final, key) {
                return final || key.weight < _this2.threshold;
            }, false);
        };

        this.getMissingSigs = function (auths) {
            var missing = [];
            var nested = [];
            if (_this2.isNested()) {
                nested = _this2.accounts.reduce(function (a, account) {
                    return a.concat(account.getMissingSigs(auths));
                }, []);
            } else if (!_this2.isAvailable(auths)) {
                missing.push(_this2.id);
            }

            return missing.concat(nested);
        };

        this.getMissingKeys = function (auths) {
            var missing = [];
            var nested = [];
            if (_this2.keys.length && (_this2.isNested() || _this2.isMultiSig())) {
                _this2.keys.forEach(function (key) {
                    if (!key.isAvailable(auths)) {
                        missing.push(key.id);
                    }
                });
            }

            if (_this2.isNested()) {
                nested = _this2.accounts.reduce(function (a, account) {
                    return a.concat(account.getMissingKeys(auths));
                }, []);
            }

            return missing.concat(nested);
        };
    },

    listToIDs: function listToIDs(accountList) {
        var allAccounts = [];

        accountList.forEach(function (account) {
            if (account) {
                allAccounts.push(account.get ? account.get("id") : account);
            }
        });

        return allAccounts;
    },

    unravel: function unravel(accountPermission, type) {
        var _this3 = this;

        var recursive_count = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

        if (recursive_count < 3) {
            var account = bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["ChainStore"].getAccount(accountPermission.id);
            if (account && account.getIn([type, "account_auths"]).size) {
                account.getIn([type, "account_auths"]).forEach(function (auth) {
                    var nestedAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["ChainStore"].getAccount(auth.get(0));
                    if (nestedAccount) {
                        accountPermission.accounts.push(_this3.unravel(new _this3.AccountPermission(nestedAccount, auth.get(1), type), type, recursive_count + 1));
                    }
                });
            }
        }

        return accountPermission;
    },

    unnest: function unnest(accounts, type) {
        var _this4 = this;

        var map = [];
        accounts.forEach(function (id) {
            var fullAccount = bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["ChainStore"].getAccount(id);
            if (!fullAccount) return;
            var currentPermission = _this4.unravel(new _this4.AccountPermission(fullAccount, null, type), type);
            map.push(currentPermission);
        });

        return map;
    },

    flatten_auths: function flatten_auths(auths) {
        var existingAuths = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : immutable__WEBPACK_IMPORTED_MODULE_1___default.a.List();

        if (!auths.size) {
            return existingAuths;
        }

        auths.forEach(function (owner) {
            if (!existingAuths.includes(owner.get(0))) {
                existingAuths = existingAuths.push(owner.get(0));
            }
        });
        return existingAuths;
    }
};

/* harmony default export */ __webpack_exports__["default"] = (permissionUtils);

/***/ }),

/***/ 2980:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tooltip", function() { return Tooltip; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthorityDepthOverflowWarning", function() { return AuthorityDepthOverflowWarning; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChildAuthorityDepthOverflowWarning", function() { return ChildAuthorityDepthOverflowWarning; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Pending", function() { return Pending; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Review", function() { return Review; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Failed", function() { return Failed; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExpandButton", function() { return ExpandButton; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ApprovedIcon", function() { return ApprovedIcon; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KeyPermissionBranch", function() { return KeyPermissionBranch; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAuthorityDepthProblem", function() { return hasAuthorityDepthProblem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getStatus", function() { return getStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isApproved", function() { return isApproved; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "statusText", function() { return statusText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "notNestdWeight", function() { return notNestdWeight; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1894);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(571);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








var Tooltip = function (_React$Component) {
    _inherits(Tooltip, _React$Component);

    function Tooltip() {
        _classCallCheck(this, Tooltip);

        return _possibleConstructorReturn(this, (Tooltip.__proto__ || Object.getPrototypeOf(Tooltip)).apply(this, arguments));
    }

    _createClass(Tooltip, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                className = _props.className,
                children = _props.children,
                dataTip = _props.dataTip,
                content = _props.content;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_5__["Tooltip"],
                {
                    title: dataTip && dataTip.trim() || counterpart__WEBPACK_IMPORTED_MODULE_3___default.a.translate(content)
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    { className: "tooltip " + className },
                    children
                )
            );
        }
    }]);

    return Tooltip;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var AuthorityDepthOverflowWarning = function AuthorityDepthOverflowWarning() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        {
            className: "error appended",
            content: "explorer.proposals.authority_depth_warning"
        },
        "/!\\"
    );
};

var ChildAuthorityDepthOverflowWarning = function ChildAuthorityDepthOverflowWarning() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        {
            className: "error appended",
            content: "explorer.proposals.children_authority_depth_warning"
        },
        "/!\\"
    );
};

var Pending = function Pending() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        { className: "warning", content: "explorer.proposals.pending_approval" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.proposals.pending" })
    );
};

var Review = function Review() {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        { className: "warning", content: "explorer.proposals.pending_review" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.proposals.review" })
    );
};

var Failed = function Failed(_ref) {
    var reason = _ref.reason;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        Tooltip,
        {
            className: "error",
            dataTip: reason,
            content: "explorer.proposals.no_reason_available_switch_node"
        },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_4___default.a, { content: "explorer.proposals.failed" })
    );
};

var ExpandButton = function ExpandButton(_ref2) {
    var onToggle = _ref2.onToggle,
        expanded = _ref2.expanded;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "a",
        { className: "expand-button", onClick: onToggle },
        "[",
        expanded ? "-" : "+",
        "]"
    );
};

var ApprovedIcon = function ApprovedIcon(_ref3) {
    var approved = _ref3.approved;
    return approved ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_1__["default"], {
        name: "checkmark-circle",
        size: "1x",
        className: "success",
        title: "icons.checkmark_circle.operation_succeed"
    }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_1__["default"], {
        name: "cross-circle",
        size: "1x",
        className: "error",
        title: "icons.cross_circle.operation_failed"
    });
};

var KeyPermissionBranch = function KeyPermissionBranch(_ref4) {
    var available = _ref4.available,
        permission = _ref4.permission,
        weight = _ref4.weight,
        level = _ref4.level;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "tbody",
        null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "tr",
            null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "td",
                { colSpan: "2" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ApprovedIcon, { approved: permission.isAvailable(available) }),
                permission.id.substr(0, 20 - 4 * level),
                "..."
            ),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "td",
                null,
                weight
            )
        )
    );
};

var hasAuthorityDepthProblem = function hasAuthorityDepthProblem(maxAuthorityDepth, permission) {
    var level = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

    if (level > maxAuthorityDepth) {
        return true;
    } else if (!permission.isNested() && !permission.isMultiSig()) {
        return false;
    } else {
        return permission.accounts.some(function (subAccount) {
            return hasAuthorityDepthProblem(maxAuthorityDepth, subAccount, level + 1);
        });
    }
};

var getStatus = function getStatus(permission, available, availableKeys) {
    return permission.accounts.reduce(function (amount, subPermission) {
        return amount + (isApproved(subPermission, available, availableKeys) ? subPermission.weight : 0);
    }, 0) + permission.keys.reduce(function (amount, key) {
        return amount + (key.isAvailable(availableKeys) ? key.weight : 0);
    }, 0);
};

var isApproved = function isApproved(permission, available, availableKeys) {
    return permission.isNested() || permission.isMultiSig() ? getStatus(permission, available, availableKeys) >= permission.threshold : permission.isAvailable(available);
};

var statusText = function statusText(permission, available, availableKeys) {
    return permission && permission.threshold > 10 ? common_utils__WEBPACK_IMPORTED_MODULE_2__["default"].get_percentage(permission.getStatus(available, availableKeys), permission.threshold) + " / 100%" : permission.getStatus(available, availableKeys) + " / " + permission.threshold;
};

var notNestdWeight = function notNestdWeight(weight, threshold) {
    return threshold && threshold > 10 ? common_utils__WEBPACK_IMPORTED_MODULE_2__["default"].get_percentage(weight, threshold) : weight;
};

/***/ }),

/***/ 2981:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_meanBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2982);
/* harmony import */ var lodash_es_sumBy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2985);
/* harmony import */ var lodash_es_groupBy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2986);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var actions_MarketsActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2368);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(420);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(598);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1886);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(725);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(726);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2366);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _AccountOrderRowDescription__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(2990);
/* harmony import */ var _Utility_CollapsibleTable__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2991);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(2147);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(1846);
/* harmony import */ var _Utility_MarketPrice__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2992);
/* harmony import */ var _Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(2445);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(2129);
/* harmony import */ var _Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(2868);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(571);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(582);




var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

























var AccountOrders = function (_React$Component) {
    _inherits(AccountOrders, _React$Component);

    function AccountOrders(props) {
        _classCallCheck(this, AccountOrders);

        var _this = _possibleConstructorReturn(this, (AccountOrders.__proto__ || Object.getPrototypeOf(AccountOrders)).call(this, props));

        _this.state = {
            selectedOrders: [],
            filterValue: "",
            areAssetsGrouped: props.viewSettings.get("accountOrdersGrouppedByAsset")
        };
        return _this;
    }

    _createClass(AccountOrders, [{
        key: "_getFilteredOrders",
        value: function _getFilteredOrders(type) {
            var filterValue = this.state.filterValue;


            var orders = (type !== "settle" ? this.props.account.get("orders") : this.props.settleOrders) || [];

            return orders.filter(function (item) {
                var order = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getObject(item).toJS();
                var base = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(order.sell_price.base.asset_id);
                var quote = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(order.sell_price.quote.asset_id);

                var baseSymbol = base.get("symbol").toLowerCase();
                var quoteSymbol = quote.get("symbol").toLowerCase();

                return baseSymbol.indexOf(filterValue) > -1 || quoteSymbol.indexOf(filterValue) > -1;
            });
        }
    }, {
        key: "_getDataSource",
        value: function _getDataSource(orders, type) {
            var _this2 = this;

            var dataSource = [];
            var isSettle = type === "settle";

            orders.forEach(function (orderID) {
                var order = null;
                var base = null;
                var quote = null;
                var sqr = null;
                var feed_price = null;
                var bitasset_options = null;

                if (!isSettle) {
                    order = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getObject(orderID).toJS();
                    base = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(order.sell_price.base.asset_id);
                    quote = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(order.sell_price.quote.asset_id);
                } else {
                    order = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getObject(orderID).toJS();
                    base = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(order.balance.asset_id);
                    quote = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(base.getIn(["bitasset", "options", "short_backing_asset"]));
                }

                if (base && quote) {
                    var _assets;

                    var assets = (_assets = {}, _defineProperty(_assets, base.get("id"), { precision: base.get("precision") }), _defineProperty(_assets, quote.get("id"), { precision: quote.get("precision") }), _assets);

                    var _marketUtils$getMarke = common_market_utils__WEBPACK_IMPORTED_MODULE_11__["default"].getMarketName(base, quote),
                        marketName = _marketUtils$getMarke.marketName;

                    var direction = _this2.props.marketDirections.get(marketName);

                    var marketQuoteId = direction ? quote.get("id") : base.get("id");
                    var marketBaseId = direction ? base.get("id") : quote.get("id");
                    if (isSettle) {
                        var feedPriceRaw = common_asset_utils__WEBPACK_IMPORTED_MODULE_23__["default"].extractRawFeedPrice(base);
                        sqr = base.getIn(["bitasset", "current_feed", "maximum_short_squeeze_ratio"]);

                        feed_price = new common_MarketClasses__WEBPACK_IMPORTED_MODULE_7__["FeedPrice"]({
                            priceObject: feedPriceRaw,
                            market_base: marketBaseId,
                            sqr: sqr,
                            assets: assets
                        });

                        bitasset_options = base.getIn(["bitasset", "options"]);
                    }

                    var limitOrder = !isSettle ? new common_MarketClasses__WEBPACK_IMPORTED_MODULE_7__["LimitOrder"](order, assets, marketQuoteId) : new common_MarketClasses__WEBPACK_IMPORTED_MODULE_7__["SettleOrder"](order, assets, marketBaseId, feed_price, bitasset_options);

                    var marketBase = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(marketBaseId);
                    var marketQuote = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(marketQuoteId);

                    var isBid = limitOrder.isBid();
                    var dataItem = {
                        key: order.id,
                        order: limitOrder,
                        isBid: isBid,
                        quote: marketQuote,
                        base: marketBase,
                        marketName: marketName,
                        marketDirection: direction,
                        preferredUnit: _this2.props.settings ? _this2.props.settings.get("unit") : "1.3.0",
                        quoteColor: !isBid ? "value negative" : "value positive",
                        baseColor: isBid ? "value negative" : "value positive"
                    };
                    if (isSettle) dataItem = _extends({}, dataItem, {
                        settlement_date: order.settlement_date,
                        feed_price: feed_price
                    });

                    dataSource.push(dataItem);
                }
            });

            // Sort by price first
            dataSource.sort(function (a, b) {
                return a.order.getPrice() - b.order.getPrice();
            });

            // And then sort by market name - this way all records will be sorted by price inside, but by the market outside.
            dataSource.sort(function (a, b) {
                if (a.marketName > b.marketName) {
                    return 1;
                }
                if (a.marketName < b.marketName) {
                    return -1;
                }

                // Trick only for grouped orders on the same market, which preserves tables order on direction change
                return a.marketDirection ? 1 : -1;
            });

            return dataSource;
        }
    }, {
        key: "_getColumns",
        value: function _getColumns(areAssetsGrouped, groupedDataItems, type) {
            var _this3 = this;

            var onCell = function onCell(dataItem, rowIndex) {
                return {
                    onClick: _this3.onFlip.bind(_this3, dataItem.marketName)
                };
            };

            var firstDataItem = void 0,
                operation = void 0,
                forText = void 0,
                baseAsset = void 0,
                quoteAsset = void 0,
                baseName = void 0,
                quoteName = void 0,
                averagePrice = void 0,
                marketPrice = void 0,
                value = void 0;

            var isSettle = type === "settle";

            var getBaseAsset = function getBaseAsset(dataItem) {
                return dataItem.order[dataItem.isBid ? "amountToReceive" : "amountForSale"]().getAmount({ real: true });
            };
            var formatBaseAsset = function formatBaseAsset(baseAsset) {
                return common_utils__WEBPACK_IMPORTED_MODULE_22__["default"].format_number(baseAsset, firstDataItem.base.get("precision"), false);
            };

            var getQuoteAsset = function getQuoteAsset(dataItem) {
                return dataItem.order[dataItem.isBid ? "amountForSale" : "amountToReceive"]().getAmount({ real: true });
            };
            var formatQuoteAsset = function formatQuoteAsset(quoteAsset) {
                return common_utils__WEBPACK_IMPORTED_MODULE_22__["default"].format_number(quoteAsset, firstDataItem.quote.get("precision"), false);
            };

            var formatMarketPrice = function formatMarketPrice(dataItem) {
                return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_MarketPrice__WEBPACK_IMPORTED_MODULE_18__["MarketPrice"], {
                    base: dataItem.base.get("id"),
                    quote: dataItem.quote.get("id"),
                    force_direction: dataItem.base.get("symbol"),
                    hide_symbols: true,
                    hide_asset: true
                });
            };

            if (areAssetsGrouped) {
                // Assuming that first element always exist because data items were passed as grouped
                firstDataItem = groupedDataItems[0];

                operation = counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange." + (!isSettle ? firstDataItem.isBid ? "buy" : "sell" : "settlement_of"));

                forText = counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("transaction.for");

                baseAsset = formatBaseAsset(Object(lodash_es_sumBy__WEBPACK_IMPORTED_MODULE_1__["default"])(groupedDataItems, getBaseAsset));
                quoteAsset = formatQuoteAsset(Object(lodash_es_sumBy__WEBPACK_IMPORTED_MODULE_1__["default"])(groupedDataItems, getQuoteAsset));

                var quoteColor = !firstDataItem.isBid ? "value negative" : "value positive";
                var baseColor = firstDataItem.isBid ? "value negative" : "value positive";

                baseName = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_20__["default"], {
                    noTip: true,
                    customClass: quoteColor,
                    name: firstDataItem.quote.get("symbol")
                });
                quoteName = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_20__["default"], {
                    noTip: true,
                    customClass: baseColor,
                    name: firstDataItem.base.get("symbol")
                });

                averagePrice = Object(lodash_es_meanBy__WEBPACK_IMPORTED_MODULE_0__["default"])(groupedDataItems, function (dataItem) {
                    var price = dataItem.order.sellPrice().toReal(true);
                    return !dataItem.marketDirection ? price : 1 / price;
                });

                // Taken from FormattedPrice internal logic
                var decimals = Math.min(8, firstDataItem.order.sellPrice()[firstDataItem.isBid ? "base" : "quote"].precision);
                averagePrice = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedNumber"], {
                    value: averagePrice,
                    minimumFractionDigits: Math.max(2, decimals),
                    maximumFractionDigits: Math.max(2, decimals)
                });

                marketPrice = formatMarketPrice(firstDataItem);

                var valueAmount = Object(lodash_es_sumBy__WEBPACK_IMPORTED_MODULE_1__["default"])(groupedDataItems, function (dataItem) {
                    return dataItem.order.amountForSale().getAmount();
                });

                value = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_21__["EquivalentValueComponent"], {
                        hide_asset: true,
                        amount: valueAmount,
                        fromAsset: firstDataItem.order.amountForSale().asset_id,
                        noDecimals: true,
                        toAsset: firstDataItem.preferredUnit
                    }),
                    " ",
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_20__["default"], { name: firstDataItem.preferredUnit })
                );
            }

            // Conditional array items: https://stackoverflow.com/a/47771259
            return [{
                key: "trade",
                title: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("account.trade"),
                align: "center",
                render: function render(dataItem) {
                    return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        react_router_dom__WEBPACK_IMPORTED_MODULE_17__["Link"],
                        {
                            to: "/market/" + dataItem.quote.get("symbol") + "_" + dataItem.base.get("symbol"),
                            onClick: function onClick() {
                                return actions_MarketsActions__WEBPACK_IMPORTED_MODULE_5__["default"].switchMarket();
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Icon"], { type: "bar-chart" })
                    );
                }
            }, {
                key: "orderID",
                title: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("transaction.order_id"),
                render: function render(dataItem) {
                    return "#" + dataItem.order.id.substring(4);
                }
            }].concat(_toConsumableArray(areAssetsGrouped ? [{
                key: "operation",
                title: operation,
                render: function render(dataItem) {
                    return operation;
                },
                onCell: onCell,
                className: "clickable groupColumn"
            }].concat(_toConsumableArray(!isSettle ? [{
                key: "baseAsset",
                title: baseAsset,
                render: function render(dataItem) {
                    return formatBaseAsset(getBaseAsset(dataItem));
                },
                onCell: onCell,
                className: "clickable groupColumn"
            }, {
                key: "baseName",
                title: baseName,
                render: function render(dataItem) {
                    return baseName;
                },
                onCell: onCell,
                className: "clickable groupColumn"
            }, {
                key: "for",
                title: forText,
                render: function render(dataItem) {
                    return forText;
                },
                onCell: onCell,
                className: "clickable groupColumn"
            }, {
                key: "quoteAsset",
                title: quoteAsset,
                render: function render(dataItem) {
                    return formatQuoteAsset(getQuoteAsset(dataItem));
                },
                onCell: onCell,
                className: "clickable groupColumn"
            }, {
                key: "quoteName",
                title: quoteName,
                render: function render(dataItem) {
                    return quoteName;
                },
                onCell: onCell,
                className: "clickable groupColumn"
            }] : [{
                key: "quoteAsset",
                title: quoteAsset,
                render: function render(dataItem) {
                    return formatQuoteAsset(getQuoteAsset(dataItem));
                },
                className: "clickable groupColumn"
            }, {
                key: "baseName",
                title: baseName,
                render: function render(dataItem) {
                    return baseName;
                },
                className: "clickable groupColumn"
            }])) : [{
                key: "description",
                title: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.description"),
                render: function render(dataItem) {
                    return !isSettle ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_AccountOrderRowDescription__WEBPACK_IMPORTED_MODULE_14__["default"], dataItem) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, {
                        content: "exchange.settlement_description",
                        quoteAsset: common_utils__WEBPACK_IMPORTED_MODULE_22__["default"].format_number(dataItem.order.for_sale.getAmount({
                            real: true
                        }), dataItem.quote.get("precision"), false),
                        quoteName: react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_20__["default"], {
                            noTip: true,
                            customClass: dataItem.quoteColor,
                            name: dataItem.quote.get("symbol")
                        })
                    });
                },
                onCell: onCell,
                className: "clickable"
            }]), [{
                key: "price",
                title: areAssetsGrouped ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "account.average_price" }),
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("br", null),
                    averagePrice
                ) : counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.price"),
                align: areAssetsGrouped ? "right" : "left",
                render: function render(dataItem) {
                    return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_FormattedPrice__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        base_amount: dataItem.order.sellPrice().base.amount,
                        base_asset: dataItem.order.sellPrice().base.asset_id,
                        quote_amount: dataItem.order.sellPrice().quote.amount,
                        quote_asset: dataItem.order.sellPrice().quote.asset_id,
                        force_direction: dataItem.base.get("symbol"),
                        hide_symbols: true
                    });
                },
                onCell: onCell,
                className: "clickable"
            }, {
                key: "marketPrice",
                title: areAssetsGrouped ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.price_market" }),
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("br", null),
                    marketPrice
                ) : counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.price_market"),
                align: areAssetsGrouped ? "right" : "left",
                render: formatMarketPrice,
                onCell: onCell,
                className: "clickable"
            }, isSettle && !areAssetsGrouped ? {
                key: "settlement_date",
                title: areAssetsGrouped ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.settlement_date" }),
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("br", null),
                    marketPrice
                ) : counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.settlement_date"),
                align: areAssetsGrouped ? "right" : "left",
                render: function render(dataItem) {
                    return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        "span",
                        null,
                        dataItem.settlement_date
                    );
                },
                onCell: onCell,
                className: "clickable"
            } : {}, {
                key: "value",
                title: areAssetsGrouped ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "exchange.value" }),
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("br", null),
                    value
                ) : counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("exchange.value"),
                align: "right",
                render: function render(dataItem) {
                    return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        "div",
                        null,
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_21__["EquivalentValueComponent"], {
                            hide_asset: true,
                            amount: dataItem.order.amountForSale().getAmount(),
                            fromAsset: dataItem.order.amountForSale().asset_id,
                            noDecimals: true,
                            toAsset: dataItem.preferredUnit
                        }),
                        " ",
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_20__["default"], { name: dataItem.preferredUnit })
                    );
                },
                onCell: onCell,
                className: "clickable"
            }]);
        }
    }, {
        key: "_renderSettleOrdersTable",
        value: function _renderSettleOrdersTable() {
            var account = this.props.account;
            var filterValue = this.state.filterValue;


            var settleOrders = account.get("settle_orders");

            if (filterValue) {
                settleOrders = this._getFilteredOrders.call(this, "settle");
            }
            var dataSource = this._getDataSource(settleOrders, "settle");

            var pagination = {
                hideOnSinglePage: true,
                pageSize: 20,
                showTotal: function showTotal(total, range) {
                    return counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("utility.total_x_items", {
                        count: total
                    });
                }
            };

            var footer = function footer() {
                return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "span",
                    null,
                    "\xA0"
                );
            };

            var settleColumns = this._getColumns(false, dataSource, "settle");

            return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Table"], {
                columns: settleColumns,
                dataSource: dataSource,
                pagination: pagination,
                footer: footer
            });
        }
    }, {
        key: "_renderOrdersTable",
        value: function _renderOrdersTable() {
            var _this4 = this;

            var account = this.props.account;
            var _state = this.state,
                filterValue = _state.filterValue,
                areAssetsGrouped = _state.areAssetsGrouped;

            var orders = account.get("orders");

            if (filterValue) {
                orders = this._getFilteredOrders.call(this);
            }
            var dataSource = this._getDataSource(orders);

            var pagination = {
                hideOnSinglePage: true,
                pageSize: 20,
                showTotal: function showTotal(total, range) {
                    return counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("utility.total_x_items", {
                        count: total
                    });
                }
            };

            var footer = function footer() {
                return _this4.props.children;
            };

            var rowSelection = this.props.isMyAccount ? {
                // Uncomment the following line to show translated text as a cancellable column header instead of checkbox
                //columnTitle: counterpart.translate("wallet.cancel")
                onChange: function onChange(selectedRowKeys, selectedRows) {
                    _this4.setState({ selectedOrders: selectedRowKeys });
                },
                // Required in order resetSelected to work
                selectedRowKeys: this.state.selectedOrders
            } : null;

            var tables = [];

            if (areAssetsGrouped) {
                // Group by market name - this will group all records from the same market, no matter is it sell or buy order
                // And then group by base market ID - this will separate buy and sell records on the same market
                // Don't forget to count the direction - this allows to consider table as the same one when direction changes
                var grouped = Object(lodash_es_groupBy__WEBPACK_IMPORTED_MODULE_2__["default"])(dataSource, function (dataItem) {
                    return dataItem.marketName + "_" + (dataItem.marketDirection ? dataItem.base.get("id") : dataItem.quote.get("id"));
                });

                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = Object.entries(grouped)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var _ref = _step.value;

                        var _ref2 = _slicedToArray(_ref, 2);

                        var key = _ref2[0];
                        var value = _ref2[1];

                        var type = void 0;
                        if (value[0].settlement_date) type = "settle";
                        var columns = this._getColumns(areAssetsGrouped, value, type);
                        tables.push(react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "div",
                            { className: "grid-wrapper", key: key },
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Utility_CollapsibleTable__WEBPACK_IMPORTED_MODULE_15__["default"], {
                                columns: columns,
                                dataSource: value,
                                rowSelection: rowSelection,
                                pagination: pagination,
                                isCollapsed: true
                            })
                        ));
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }
            } else {
                var _columns = this._getColumns(areAssetsGrouped, dataSource);

                tables.push(react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    { className: "grid-wrapper", key: "ungroupedTable" },
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Table"], {
                        columns: _columns,
                        dataSource: dataSource,
                        rowSelection: rowSelection,
                        pagination: pagination,
                        footer: footer
                    })
                ));
            }

            return tables;
        }
    }, {
        key: "_cancelLimitOrders",
        value: function _cancelLimitOrders(orderId) {
            var _this5 = this;

            actions_MarketsActions__WEBPACK_IMPORTED_MODULE_5__["default"].cancelLimitOrders(this.props.account.get("id"), this.state.selectedOrders).then(function () {
                _this5.resetSelected();
            }).catch(function (err) {
                console.log("cancel orders error:", err);
            });
        }
    }, {
        key: "onFlip",
        value: function onFlip(marketId) {
            var setting = {};
            setting[marketId] = !this.props.marketDirections.get(marketId);
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeMarketDirection(setting);
        }
    }, {
        key: "setFilterValue",
        value: function setFilterValue(evt) {
            this.setState({ filterValue: evt.target.value.toLowerCase() });
        }
    }, {
        key: "resetSelected",
        value: function resetSelected() {
            this.setState({ selectedOrders: [] });
        }
    }, {
        key: "cancelSelected",
        value: function cancelSelected() {
            this._cancelLimitOrders.call(this);
        }
    }, {
        key: "render",
        value: function render() {
            var _this6 = this;

            var account = this.props.account;
            var selectedOrders = this.state.selectedOrders;


            var ordersTable = this._renderOrdersTable();
            var settleOrdersTable = this._renderSettleOrdersTable();

            var tables = [ordersTable];

            var onGroupChange = function onGroupChange(checked, evt) {
                actions_SettingsActions__WEBPACK_IMPORTED_MODULE_10__["default"].changeViewSetting({
                    accountOrdersGrouppedByAsset: checked
                });
                _this6.setState({ areAssetsGrouped: checked });
            };

            var settleOrdersCount = account.get("settle_orders").size;

            return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                "div",
                {
                    className: "grid-content no-overflow no-padding",
                    style: { paddingBottom: 15 }
                },
                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    {
                        className: "header-selector",
                        style: { display: "inline-block", width: "100%" }
                    },
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        "div",
                        { className: "filter-block" },
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "div",
                            { className: "filter" },
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Input"], {
                                type: "text",
                                placeholder: counterpart__WEBPACK_IMPORTED_MODULE_4___default.a.translate("account.filter_orders"),
                                onChange: this.setFilterValue.bind(this),
                                addonAfter: react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Icon"], { type: "search" })
                            })
                        ),
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            "div",
                            { className: "group-by" },
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Switch"], {
                                onChange: onGroupChange,
                                checked: this.state.areAssetsGrouped
                            }),
                            "\xA0\xA0",
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "account.group_by_asset" })
                        )
                    ),
                    selectedOrders.length ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        "span",
                        { className: "action-buttons" },
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Button"],
                            {
                                key: "submit",
                                type: "primary",
                                onClick: this.cancelSelected.bind(this)
                            },
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "account.cancel_orders" })
                        ),
                        "\xA0",
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                            bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_13__["Button"],
                            {
                                key: "cancel",
                                type: "secondary",
                                onClick: this.resetSelected.bind(this)
                            },
                            react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "account.reset_orders" })
                        )
                    ) : null
                ),
                react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    null,
                    settleOrdersCount > 0 && react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        "div",
                        { className: "header-selector" },
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "account.market_orders" })
                    ),
                    tables
                ),
                settleOrdersCount > 0 && react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                    "div",
                    { className: "grid-wrapper", key: "settleGroupedTable" },
                    react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(
                        "div",
                        { className: "header-selector" },
                        react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_12___default.a, { content: "account.settle_orders" })
                    ),
                    settleOrdersTable
                )
            );
        }
    }]);

    return AccountOrders;
}(react__WEBPACK_IMPORTED_MODULE_3___default.a.Component);

AccountOrders = Object(alt_react__WEBPACK_IMPORTED_MODULE_8__["connect"])(AccountOrders, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__["default"]];
    },
    getProps: function getProps() {
        return {
            marketDirections: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__["default"].getState().marketDirections,
            viewSettings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_9__["default"].getState().viewSettings
        };
    }
});

/* harmony default export */ __webpack_exports__["default"] = (AccountOrders);

/***/ }),

/***/ 2990:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(571);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2129);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






var AccountOrderRowDescription = function (_React$Component) {
    _inherits(AccountOrderRowDescription, _React$Component);

    function AccountOrderRowDescription() {
        _classCallCheck(this, AccountOrderRowDescription);

        return _possibleConstructorReturn(this, (AccountOrderRowDescription.__proto__ || Object.getPrototypeOf(AccountOrderRowDescription)).apply(this, arguments));
    }

    _createClass(AccountOrderRowDescription, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                base = _props.base,
                quote = _props.quote,
                order = _props.order;

            var isBid = order.isBid();

            var quoteColor = !isBid ? "value negative" : "value positive";
            var baseColor = isBid ? "value negative" : "value positive";

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_1___default.a, {
                content: isBid ? "exchange.buy_description" : "exchange.sell_description",
                baseAsset: common_utils__WEBPACK_IMPORTED_MODULE_2__["default"].format_number(order[isBid ? "amountToReceive" : "amountForSale"]().getAmount({ real: true }), base.get("precision"), false),
                quoteAsset: common_utils__WEBPACK_IMPORTED_MODULE_2__["default"].format_number(order[isBid ? "amountForSale" : "amountToReceive"]().getAmount({ real: true }), quote.get("precision"), false),
                baseName: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_3__["default"], {
                    noTip: true,
                    customClass: quoteColor,
                    name: quote.get("symbol")
                }),
                quoteName: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_3__["default"], {
                    noTip: true,
                    customClass: baseColor,
                    name: base.get("symbol")
                })
            });
        }
    }]);

    return AccountOrderRowDescription;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (AccountOrderRowDescription);

/***/ }),

/***/ 2991:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(399);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2__);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }





var CollapsibleTable = function (_React$Component) {
    _inherits(CollapsibleTable, _React$Component);

    function CollapsibleTable(props) {
        _classCallCheck(this, CollapsibleTable);

        var _this = _possibleConstructorReturn(this, (CollapsibleTable.__proto__ || Object.getPrototypeOf(CollapsibleTable)).call(this, props));

        _this.state = {
            isCollapsed: props.isCollapsed || false,
            isCollapseAnimationCompleted: props.isCollapsed || false
        };
        return _this;
    }

    _createClass(CollapsibleTable, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this2 = this;

            // This quite ugly way of tracking animation is required to add display: none at the end of the animation
            // otherwise collapsed element will take place on the page at the end of the animation
            // There's no possibility to manipulate with display property on animation directly in CSS
            var dom = react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.findDOMNode(this);
            var tbody = dom.querySelector(".ant-table-tbody");

            var onAnimationEnd = function onAnimationEnd() {
                _this2.setState({
                    isCollapseAnimationCompleted: _this2.state.isCollapsed
                });
            };

            tbody.addEventListener("animationend", onAnimationEnd);
            tbody.addEventListener("webkitAnimationEnd", onAnimationEnd);
            tbody.addEventListener("oAnimationEnd", onAnimationEnd);
            tbody.addEventListener("MSAnimationEnd", onAnimationEnd);
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            // Create a wrapper which allows to call externally passed onClick function after execution of our one, preserving all the other handlers intact
            var onHeaderRow = function onHeaderRow(column, index) {
                var handlers = {};

                var innerOnHeaderRow = _this3.props.onHeaderRow;
                if (innerOnHeaderRow) {
                    var innerHandlers = innerOnHeaderRow(column, index);
                    handlers = innerHandlers;
                }

                handlers.onClick = function (event) {
                    // Do nothing if selectable column is clicked
                    var className = event.target.getAttribute("class");
                    if (className && className.includes("ant-checkbox-input")) {
                        return;
                    }

                    _this3.setState({
                        isCollapsed: !_this3.state.isCollapsed
                    });

                    _this3.setState({
                        isCollapseAnimationCompleted: false
                    });

                    if (innerOnHeaderRow) {
                        var _innerHandlers = innerOnHeaderRow(column, index);
                        if (_innerHandlers.onClick) {
                            _innerHandlers.onClick(event);
                        }
                    }
                };

                return handlers;
            };

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2__["Table"], _extends({}, this.props, {
                onHeaderRow: onHeaderRow,
                className: "collapsible-table " + (this.state.isCollapsed ? "collapsible-table-collapsed" : "collapsible-table-uncollapsed") + "\n                " + (this.state.isCollapseAnimationCompleted ? "collapsible-table-collapsed-animation-completed" : null)
            }));
        }
    }]);

    return CollapsibleTable;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (CollapsibleTable);

/***/ }),

/***/ 2992:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MarketPrice", function() { return MarketPrice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MarketStats", function() { return MarketStats; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2126);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(740);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2367);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1886);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(571);
/* harmony import */ var _FormattedPrice__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2445);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2366);
var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }










var MarketStats = function (_React$Component) {
    _inherits(MarketStats, _React$Component);

    function MarketStats(props) {
        _classCallCheck(this, MarketStats);

        var _this = _possibleConstructorReturn(this, (MarketStats.__proto__ || Object.getPrototypeOf(MarketStats)).call(this));

        _this.statsInterval = null;

        var _marketUtils$getMarke = common_market_utils__WEBPACK_IMPORTED_MODULE_7__["default"].getMarketName(props.base, props.quote),
            marketName = _marketUtils$getMarke.marketName;

        _this.state = {
            marketName: marketName
        };
        return _this;
    }

    _createClass(MarketStats, [{
        key: "_checkStats",
        value: function _checkStats() {
            var newStats = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { close: {} };
            var oldStats = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { close: {} };

            return newStats.volumeBase !== oldStats.volumeBase || !common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].are_equal_shallow(newStats.close && newStats.close.base, oldStats.close && oldStats.close.base) || !common_utils__WEBPACK_IMPORTED_MODULE_5__["default"].are_equal_shallow(newStats.close && newStats.close.quote, oldStats.close && oldStats.close.quote);
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np) {
            return this._checkStats(np.allMarketStats.get(this.state.marketName), this.props.allMarketStats.get(this.state.marketName)) || np.base.get("id") !== this.props.base.get("id") || np.quote.get("id") !== this.props.quote.get("id");
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            if (this.statsInterval) this.statsInterval();
        }
    }]);

    return MarketStats;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

var MarketPriceInner = function (_MarketStats) {
    _inherits(MarketPriceInner, _MarketStats);

    function MarketPriceInner(props) {
        _classCallCheck(this, MarketPriceInner);

        return _possibleConstructorReturn(this, (MarketPriceInner.__proto__ || Object.getPrototypeOf(MarketPriceInner)).call(this, props));
    }

    _createClass(MarketPriceInner, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np) {
            return _get(MarketPriceInner.prototype.__proto__ || Object.getPrototypeOf(MarketPriceInner.prototype), "shouldComponentUpdate", this).call(this, np);
        }
    }, {
        key: "render",
        value: function render() {
            var allMarketStats = this.props.allMarketStats;
            var marketName = this.state.marketName;

            var marketStats = allMarketStats.get(marketName);
            var price = marketStats && marketStats.price ? marketStats.price : null;
            // if (!price && marketStatsInverted && marketStatsInverted.price) {
            //     price = marketStatsInverted.price.invert();
            // }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                { className: classnames__WEBPACK_IMPORTED_MODULE_2___default()("", this.props.className) },
                price ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FormattedPrice__WEBPACK_IMPORTED_MODULE_6__["default"], {
                    base_amount: price.base.amount,
                    base_asset: price.base.asset_id,
                    quote_amount: price.quote.amount,
                    quote_asset: price.quote.asset_id,
                    force_direction: this.props.force_direction,
                    hide_symbols: this.props.hide_symbols
                }) : "n/a"
            );
        }
    }]);

    return MarketPriceInner;
}(MarketStats);

MarketPriceInner = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_1__["default"])(MarketPriceInner, {
    propNames: ["quote", "base"]
});

var MarketPrice = function (_React$Component2) {
    _inherits(MarketPrice, _React$Component2);

    function MarketPrice() {
        _classCallCheck(this, MarketPrice);

        return _possibleConstructorReturn(this, (MarketPrice.__proto__ || Object.getPrototypeOf(MarketPrice)).apply(this, arguments));
    }

    _createClass(MarketPrice, [{
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarketPriceInner, this.props);
        }
    }]);

    return MarketPrice;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

MarketPrice = Object(alt_react__WEBPACK_IMPORTED_MODULE_4__["connect"])(MarketPrice, {
    listenTo: function listenTo() {
        return [stores_MarketsStore__WEBPACK_IMPORTED_MODULE_3__["default"]];
    },
    getProps: function getProps() {
        return {
            allMarketStats: stores_MarketsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().allMarketStats
        };
    }
});



/***/ }),

/***/ 2993:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkMarginStatus", function() { return checkMarginStatus; });
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(420);
/* harmony import */ var _MarketClasses__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(598);
/* harmony import */ var _asset_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(582);




var asyncCache = {};
var checkMarginStatusTTL = 60000 * 1; // 1 minute

function checkMarginStatus(account) {
    if (!account || account && !account.get("call_orders", []).size) return Promise.resolve(null);

    var key = account.get("name") + JSON.stringify(account.get("call_orders"));
    if (asyncCache[key]) {
        if (asyncCache[key].result) {
            return Promise.resolve(asyncCache[key].result);
        }
        return new Promise(function (res, rej) {
            asyncCache[key].queue.push({ res: res, rej: rej });
        });
    }
    return new Promise(function (res, rej) {
        asyncCache[key] = { queue: [{ res: res, rej: rej }], result: null };

        Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["FetchChain"])("getObject", account.get("call_orders").toArray()).then(function (call_orders) {
            var assets = [];
            call_orders.forEach(function (a) {
                var baseId = a.getIn(["call_price", "base", "asset_id"]);
                var quoteId = a.getIn(["call_price", "quote", "asset_id"]);
                if (assets.indexOf(baseId) === -1) assets.push(baseId);
                if (assets.indexOf(quoteId) === -1) assets.push(quoteId);
            });
            Object(bitsharesjs__WEBPACK_IMPORTED_MODULE_0__["FetchChain"])("getAsset", assets, 6000).then(function (assets) {
                var assetsMap = {};
                assets.forEach(function (asset) {
                    assetsMap[asset.get("id")] = asset.toJS();
                });
                var status = {};
                call_orders.forEach(function (co) {
                    var debtAsset = assetsMap[co.getIn(["call_price", "quote", "asset_id"])];
                    var collateralAsset = assetsMap[co.getIn(["call_price", "base", "asset_id"])];
                    var sp = _asset_utils__WEBPACK_IMPORTED_MODULE_2__["default"].extractRawFeedPrice(debtAsset);
                    if (sp.base.asset_id === sp.quote.asset_id) {
                        status[debtAsset.id] = { ratio: null };
                    } else {
                        var collateral = new _MarketClasses__WEBPACK_IMPORTED_MODULE_1__["Asset"]({
                            amount: co.get("collateral"),
                            asset_id: collateralAsset.id,
                            precision: collateralAsset.precision
                        });
                        var debt = new _MarketClasses__WEBPACK_IMPORTED_MODULE_1__["Asset"]({
                            amount: co.get("debt"),
                            asset_id: debtAsset.id,
                            precision: debtAsset.precision
                        });
                        var mr = debtAsset.bitasset.current_feed.maintenance_collateral_ratio / 1000;
                        var price = new _MarketClasses__WEBPACK_IMPORTED_MODULE_1__["FeedPrice"]({
                            priceObject: _asset_utils__WEBPACK_IMPORTED_MODULE_2__["default"].extractRawFeedPrice(debtAsset),
                            market_base: _asset_utils__WEBPACK_IMPORTED_MODULE_2__["default"].extractRawFeedPrice(debtAsset).quote.asset_id,
                            sqr: debtAsset.bitasset.current_feed.maximum_short_squeeze_ratio,
                            assets: assetsMap
                        });
                        var current = {
                            ratio: collateral.getAmount({ real: true }) / (debt.getAmount({ real: true }) / price.toReal())
                        };
                        if (isNaN(current.ratio)) return null;
                        if (current.ratio < mr) {
                            current.statusClass = "danger";
                        } else if (current.ratio < mr + 0.5) {
                            current.statusClass = "warning";
                        } else {
                            current.statusClass = null;
                        }
                        status[debtAsset.id] = current;
                    }
                });
                asyncCache[key].queue.forEach(function (promise) {
                    promise.res(status);
                });
                asyncCache[key] = { result: status };
                setTimeout(function () {
                    delete asyncCache[key];
                }, checkMarginStatusTTL);
            });
        }).catch(function () {
            asyncCache[key].queue.forEach(function (promise) {
                promise.rej();
            });
        });
    });
}



/***/ }),

/***/ 2994:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_highcharts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2843);
/* harmony import */ var react_highcharts__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_highcharts__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2995);
/* harmony import */ var highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2996);
/* harmony import */ var highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(571);
/* harmony import */ var _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2002);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(420);
/* harmony import */ var _Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2003);
/* harmony import */ var alt_container__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1989);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2366);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2367);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(725);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1846);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }















highcharts_modules_treemap__WEBPACK_IMPORTED_MODULE_2___default()(react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts);
highcharts_modules_heatmap__WEBPACK_IMPORTED_MODULE_3___default()(react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts);

var AccountTreemap = function (_React$Component) {
    _inherits(AccountTreemap, _React$Component);

    function AccountTreemap() {
        _classCallCheck(this, AccountTreemap);

        return _possibleConstructorReturn(this, (AccountTreemap.__proto__ || Object.getPrototypeOf(AccountTreemap)).apply(this, arguments));
    }

    _createClass(AccountTreemap, [{
        key: "render",


        // shouldComponentUpdate(nextProps) {
        //     return (
        //         !utils.are_equal_shallow(nextProps.balanceObjects, this.props.balanceObjects) ||
        //         !utils.are_equal_shallow(nextProps.assets, this.props.assets)
        //     );
        // }

        value: function render() {
            var _props = this.props,
                balanceObjects = _props.balanceObjects,
                core_asset = _props.core_asset,
                marketStats = _props.marketStats,
                preferredAsset = _props.preferredAsset,
                history = _props.history;


            var accountBalances = null;

            if (balanceObjects && balanceObjects.length > 0) {
                var totalValue = 0;
                accountBalances = balanceObjects.forEach(function (balance) {
                    if (!balance) return;
                    var balanceObject = typeof balance == "string" ? bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getObject(balance) : balance;
                    var asset_type = balanceObject.get("asset_type");
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(asset_type);
                    if (!asset || !preferredAsset) return;
                    var amount = Number(balanceObject.get("balance"));
                    var eqValue = common_market_utils__WEBPACK_IMPORTED_MODULE_9__["default"].convertValue(amount, preferredAsset, asset, marketStats, core_asset);

                    if (!eqValue) return;
                    var precision = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_precision(preferredAsset.get("precision"));
                    totalValue += eqValue / precision;
                });

                accountBalances = balanceObjects.map(function (balance, index) {
                    if (!balance) return null;
                    var balanceObject = typeof balance == "string" ? bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getObject(balance) : balance;
                    var asset_type = balanceObject.get("asset_type");
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_6__["ChainStore"].getAsset(asset_type);
                    if (!asset) return null;
                    var amount = Number(balanceObject.get("balance"));

                    var eqValue = common_market_utils__WEBPACK_IMPORTED_MODULE_9__["default"].convertValue(amount, preferredAsset, asset, marketStats, core_asset);

                    if (!eqValue) {
                        return null;
                    }

                    var precision = common_utils__WEBPACK_IMPORTED_MODULE_4__["default"].get_asset_precision(preferredAsset.get("precision"));
                    var finalValue = eqValue / precision;
                    var percent = finalValue / totalValue * 100;

                    /*
                    * Filter out assets that make up a small percentage of
                    * the total value of the account
                    */
                    if (percent < 0.5) return null;
                    if (finalValue < 1) return null;
                    var symbol = asset.get("symbol");
                    return {
                        symbol: symbol,
                        name: symbol + " (" + (totalValue === 0 ? 0 : percent.toFixed(2)) + "%)",
                        value: finalValue,
                        color: react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts.getOptions().colors[index]
                    };
                }).filter(function (n) {
                    return !!n;
                });
            }

            if (accountBalances && accountBalances.length === 1 && accountBalances[0].value === 0) {
                accountBalances = null;
            }

            var config = {
                chart: {
                    backgroundColor: "rgba(255, 0, 0, 0)",
                    height: 250,
                    spacingLeft: 0,
                    spacingRight: 0,
                    spacingBottom: 0
                },
                // colorAxis: {
                //     min: 0,
                //     minColor: "#ffffff",
                //     maxColor: ReactHighcharts.Highcharts.getOptions().colors[0]
                // },
                credits: {
                    enabled: false
                },
                legend: {
                    enabled: false
                },
                plotOptions: {
                    treemap: {
                        animation: false,
                        tooltip: {
                            pointFormatter: function pointFormatter() {
                                return "<b>" + this.name + "</b>: " + react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.Highcharts.numberFormat(this.value, 0) + " " + preferredAsset.get("symbol");
                            }
                        }
                    },
                    series: {
                        cursor: "pointer",
                        point: {
                            events: {
                                click: function click() {
                                    var link = "/asset/" + this.symbol;
                                    history.push(link);
                                }
                            }
                        }
                    }
                },
                series: [{
                    type: "treemap",
                    levels: [{
                        level: 1,
                        layoutAlgorithm: "sliceAndDice",
                        dataLabels: {
                            enabled: true,
                            align: "center",
                            verticalAlign: "middle"
                        }
                    }],
                    data: accountBalances
                }],
                title: {
                    text: null
                }
            };

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountTreemapView, {
                accountBalances: accountBalances,
                config: config
            });
        }
    }]);

    return AccountTreemap;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountTreemap.propTypes = {
    assets: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAssetsList,
    preferredAsset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAsset.isRequired
};
AccountTreemap.defaultProps = {
    assets: [],
    preferredAsset: "1.3.0"
};


function AccountTreemapView(_ref) {
    var accountBalances = _ref.accountBalances,
        config = _ref.config;

    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
        "div",
        { className: "account-treemap" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
            "div",
            { className: "account-treemap--legend" },
            accountBalances && accountBalances.map(function (_ref2, key) {
                var name = _ref2.name,
                    symbol = _ref2.symbol,
                    color = _ref2.color;

                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_12__["Link"],
                    { key: key, to: "/asset/" + symbol },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "div",
                        { className: "legend-item" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
                            className: "legend-square",
                            style: { backgroundColor: color }
                        }),
                        name
                    )
                );
            })
        ),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_highcharts__WEBPACK_IMPORTED_MODULE_1___default.a, { config: config })
    );
}

AccountTreemap = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(AccountTreemap);

var AccountTreemapBalanceWrapper = function (_React$Component2) {
    _inherits(AccountTreemapBalanceWrapper, _React$Component2);

    function AccountTreemapBalanceWrapper() {
        _classCallCheck(this, AccountTreemapBalanceWrapper);

        return _possibleConstructorReturn(this, (AccountTreemapBalanceWrapper.__proto__ || Object.getPrototypeOf(AccountTreemapBalanceWrapper)).apply(this, arguments));
    }

    _createClass(AccountTreemapBalanceWrapper, [{
        key: "render",
        value: function render() {
            var assets = this.props.balanceObjects.filter(function (a) {
                return !!a;
            }).map(function (a) {
                return a.get("asset_type");
            });
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountTreemap, _extends({
                preferredAsset: this.props.settings.get("unit", "1.3.0"),
                assets: assets
            }, this.props));
        }
    }]);

    return AccountTreemapBalanceWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountTreemapBalanceWrapper.propTypes = {
    balanceObjects: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainObjectsList,
    core_asset: _Utility_ChainTypes__WEBPACK_IMPORTED_MODULE_5__["default"].ChainAsset.isRequired
};
AccountTreemapBalanceWrapper.defaultProps = {
    balanceObjects: [],
    core_asset: "1.3.0"
};


AccountTreemapBalanceWrapper = Object(_Utility_BindToChainState__WEBPACK_IMPORTED_MODULE_7__["default"])(AccountTreemapBalanceWrapper);

var AccountTreemapWrapper = function (_React$Component3) {
    _inherits(AccountTreemapWrapper, _React$Component3);

    function AccountTreemapWrapper() {
        _classCallCheck(this, AccountTreemapWrapper);

        return _possibleConstructorReturn(this, (AccountTreemapWrapper.__proto__ || Object.getPrototypeOf(AccountTreemapWrapper)).apply(this, arguments));
    }

    _createClass(AccountTreemapWrapper, [{
        key: "render",
        value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                alt_container__WEBPACK_IMPORTED_MODULE_8__["default"],
                {
                    stores: [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_11__["default"], stores_MarketsStore__WEBPACK_IMPORTED_MODULE_10__["default"]],
                    inject: {
                        marketStats: function marketStats() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_10__["default"].getState().allMarketStats;
                        },
                        settings: function settings() {
                            return stores_SettingsStore__WEBPACK_IMPORTED_MODULE_11__["default"].getState().settings;
                        }
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AccountTreemapBalanceWrapper, _extends({}, this.props, {
                    ref: this.props.refCallback
                }))
            );
        }
    }]);

    return AccountTreemapWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_12__["withRouter"])(AccountTreemapWrapper));

/***/ }),

/***/ 2997:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_debounce_render__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2138);
/* harmony import */ var react_debounce_render__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_debounce_render__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2145);
/* harmony import */ var _Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2868);
/* harmony import */ var _Utility_MarketChangeComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2998);
/* harmony import */ var _Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2146);
/* harmony import */ var common_asset_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(582);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1846);
/* harmony import */ var _Utility_EquivalentPrice__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2999);
/* harmony import */ var _Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2444);
/* harmony import */ var _Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2845);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2370);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_tooltip__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var common_gatewayUtils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(2135);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(420);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(1886);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(725);
/* harmony import */ var stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2130);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2367);
/* harmony import */ var _Icon_Icon__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(1894);
/* harmony import */ var _Icon_PulseIcon__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(3000);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(571);
/* harmony import */ var _Modal_SendModal__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(2122);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(726);
/* harmony import */ var _Modal_SettleModal__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(2784);
/* harmony import */ var _Modal_DepositModal__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(2339);
/* harmony import */ var _Dashboard_SimpleDepositBlocktradesBridge__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(2858);
/* harmony import */ var _Modal_WithdrawModalNew__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(2383);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(733);
/* harmony import */ var react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_28__);
/* harmony import */ var _Modal_ReserveAssetModal__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(3001);
/* harmony import */ var _Utility_CustomTable__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(3002);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31__);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(1892);
/* harmony import */ var react_translate_component__WEBPACK_IMPORTED_MODULE_32___default = /*#__PURE__*/__webpack_require__.n(react_translate_component__WEBPACK_IMPORTED_MODULE_32__);
/* harmony import */ var _Utility_AssetName__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(2129);
/* harmony import */ var _Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(2469);
/* harmony import */ var actions_MarketsActions__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(2368);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }







































var AccountPortfolioList = function (_React$Component) {
    _inherits(AccountPortfolioList, _React$Component);

    function AccountPortfolioList(props) {
        _classCallCheck(this, AccountPortfolioList);

        var _this = _possibleConstructorReturn(this, (AccountPortfolioList.__proto__ || Object.getPrototypeOf(AccountPortfolioList)).call(this, props));

        _this.sortFunctions = {
            byKey: function byKey(a, b) {
                return a.key > b.key;
            },
            byInCollateral: function byInCollateral(a, b) {
                return this.sortFunctions.byTypedValue(a, b, this._sumCollateralBalances(a.inCollateral), this._sumCollateralBalances(b.inCollateral));
            },
            byBalance: function byBalance(a, b) {
                return this.sortFunctions.byTypedValue(a, b, Object(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_3__["balanceToAsset"])(a.balance).amount, Object(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_3__["balanceToAsset"])(b.balance).amount);
            },
            byVestingBalance: function byVestingBalance(a, b) {
                return this.sortFunctions.byTypedValue(a, b, this._sumVestingBalances(a.inVesting), this._sumVestingBalances(b.inVesting));
            },
            byInOrders: function byInOrders(a, b) {
                return this.sortFunctions.byTypedValue(a, b, a.inOrders, b.inOrders);
            },
            byTypedValue: function byTypedValue(a, b, aValue, bValue) {
                aValue = common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].convert_satoshi_to_typed(aValue, a.asset);
                bValue = common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].convert_satoshi_to_typed(bValue, b.asset);
                if (aValue && bValue) {
                    return aValue - bValue;
                } else if (!aValue && bValue) {
                    return -1;
                } else if (aValue && !bValue) {
                    return 1;
                } else {
                    return this.sortFunctions.byKey(a, b);
                }
            },

            byEquivalentPrice: function byEquivalentPrice(a, b) {
                var aPrice = Object(_Utility_EquivalentPrice__WEBPACK_IMPORTED_MODULE_9__["getFinalPrice"])(a.asset, a.adds.preferredAsset, this.props.coreAsset, null, true);
                var bPrice = Object(_Utility_EquivalentPrice__WEBPACK_IMPORTED_MODULE_9__["getFinalPrice"])(b.asset, b.adds.preferredAsset, this.props.coreAsset, null, true);
                if (aPrice && bPrice) {
                    return aPrice - bPrice;
                } else if (!aPrice && bPrice) {
                    return -1;
                } else if (aPrice && !bPrice) {
                    return 1;
                } else {
                    return this.sortFunctions.byKey(a, b);
                }
            },
            totalValue: function totalValue(a, b) {
                var aValue = Object(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_3__["getEquivalentValue"])(a.value, a.adds.preferredAsset, a.adds.asset, false);
                var bValue = Object(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_3__["getEquivalentValue"])(b.value, b.adds.preferredAsset, b.adds.asset, false);
                if (aValue && bValue) {
                    return aValue - bValue;
                } else if (!aValue && bValue) {
                    return -1;
                } else if (aValue && !bValue) {
                    return 1;
                } else {
                    return this.sortFunctions.byKey(a, b);
                }
            },
            changeValue: function changeValue(a, b) {
                var aValue = this.changeRefs[a.key];
                var bValue = this.changeRefs[b.key];

                if (aValue && bValue) {
                    var aChange = parseFloat(aValue) != "NaN" ? parseFloat(aValue) : aValue;
                    var bChange = parseFloat(bValue) != "NaN" ? parseFloat(bValue) : bValue;
                    return aChange - bChange;
                } else if (!aValue && bValue) {
                    return -1;
                } else if (aValue && !bValue) {
                    return 1;
                } else {
                    return this.sortFunctions.byKey(a, b);
                }
            }
        };

        _this._renderBuy = function (symbol, canBuy, assetName, emptyCell, balance) {
            if (symbol === "BTS" && balance <= 1000000) {
                // Precision of 5, 1 = 10^5
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            onClick: _this._showDepositWithdraw.bind(_this, "bridge_modal", assetName, false)
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_PulseIcon__WEBPACK_IMPORTED_MODULE_20__["default"], {
                            onIcon: "dollar",
                            offIcon: "dollar-green",
                            title: "icons.dollar.buy",
                            duration: 1000,
                            className: "icon-14px"
                        })
                    )
                );
            } else {
                var modalAction = _this._showDepositWithdraw.bind(_this, "bridge_modal", assetName, false);

                var linkElement = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        style: {
                            cursor: _this.props.isMyAccount ? "pointer" : "help"
                        },
                        name: "dollar",
                        title: "icons.dollar.buy",
                        className: "icon-14px",
                        onClick: _this.props.isMyAccount ? modalAction : null
                    })
                );

                if (canBuy && _this.props.isMyAccount) {
                    return linkElement;
                } else if (canBuy && !_this.props.isMyAccount) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31__["Tooltip"],
                        {
                            title: counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.login_required")
                        },
                        linkElement
                    );
                } else {
                    return emptyCell;
                }
            }
        };

        _this._renderGatewayAction = function (type, allowed, assetName, emptyCell) {
            var modalAction = type == "deposit" ? _this._showDepositModal.bind(_this, assetName) : _this._showDepositWithdraw.bind(_this, "withdraw_modal_new", assetName, false);

            var actionTitle = type == "deposit" ? "icons." + type + "." + type : "icons." + type;

            var linkElement = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                    style: {
                        cursor: _this.props.isMyAccount ? "pointer" : "help"
                    },
                    name: type,
                    title: actionTitle,
                    className: "icon-14x",
                    onClick: _this.props.isMyAccount ? modalAction : null
                })
            );
            if (allowed && _this.props.isMyAccount) {
                return linkElement;
            } else if (allowed && !_this.props.isMyAccount) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31__["Tooltip"],
                    {
                        title: counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.login_required")
                    },
                    linkElement
                );
            } else {
                return emptyCell;
            }
        };

        _this.state = {
            isBridgeModalVisible: false,
            isSettleModalVisible: false,
            isBorrowModalVisible: false,
            isDepositModalVisible: false,
            isWithdrawModalVisible: false,
            isBurnModalVisible: false,
            isBridgeModalVisibleBefore: false,
            isSettleModalVisibleBefore: false,
            isBorrowModalVisibleBefore: false,
            isDepositModalVisibleBefore: false,
            isWithdrawModalVisibleBefore: false,
            isBurnModalVisibleBefore: false,
            borrow: null,
            settleAsset: "1.3.0",
            depositAsset: null,
            withdrawAsset: null,
            bridgeAsset: null,
            allRefsAssigned: false,
            portfolioSort: props.viewSettings.get("portfolioSort", "value"),
            portfolioSortDirection: props.viewSettings.get("portfolioSortDirection", "descend")
        };

        _this.changeRefs = {};
        for (var key in _this.sortFunctions) {
            _this.sortFunctions[key] = _this.sortFunctions[key].bind(_this);
        }
        _this._checkRefAssignments = _this._checkRefAssignments.bind(_this);

        _this.showSettleModal = _this.showSettleModal.bind(_this);
        _this.hideSettleModal = _this.hideSettleModal.bind(_this);

        _this.showDepositModal = _this.showDepositModal.bind(_this);
        _this.hideDepositModal = _this.hideDepositModal.bind(_this);

        _this.showWithdrawModal = _this.showWithdrawModal.bind(_this);
        _this.hideWithdrawModal = _this.hideWithdrawModal.bind(_this);

        _this.showBorrowModal = _this.showBorrowModal.bind(_this);
        _this.hideBorrowModal = _this.hideBorrowModal.bind(_this);

        _this.showBurnModal = _this.showBurnModal.bind(_this);
        _this.hideBurnModal = _this.hideBurnModal.bind(_this);

        _this.showBridgeModal = _this.showBridgeModal.bind(_this);
        _this.hideBridgeModal = _this.hideBridgeModal.bind(_this);

        _this.toggleSortOrder = _this.toggleSortOrder.bind(_this);
        return _this;
    }

    _createClass(AccountPortfolioList, [{
        key: "componentWillMount",
        value: function componentWillMount() {
            this.refCheckInterval = setInterval(this._checkRefAssignments);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            clearInterval(this.refCheckInterval);
        }
    }, {
        key: "_checkRefAssignments",
        value: function _checkRefAssignments() {
            var _this2 = this;

            /*
             * In order for sorting to work all refs must be assigned, so we check
             * this here and update the state to trigger a rerender
             */
            if (!this.state.allRefsAssigned) {
                var refKeys = ["changeRefs"];
                var allRefsAssigned = refKeys.reduce(function (a, b) {
                    if (a === undefined) return !!Object.keys(_this2[b]).length;
                    return !!Object.keys(_this2[b]).length && a;
                }, undefined);
                if (allRefsAssigned) {
                    clearInterval(this.refCheckInterval);
                    this.setState({ allRefsAssigned: allRefsAssigned });
                }
            }
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, ns) {
            var _this3 = this;

            return !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(ns, this.state) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.backedCoins, this.props.backedCoins) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.balances, this.props.balances) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.balanceList, this.props.balanceList) || !common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].are_equal_shallow(np.optionalAssets, this.props.optionalAssets) || np.account !== this.props.account || np.visible !== this.props.visible || np.settings !== this.props.settings || np.hiddenAssets !== this.props.hiddenAssets || np.allMarketStats.reduce(function (a, value, key) {
                return common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].check_market_stats(value, _this3.props.allMarketStats.get(key)) || a;
            }, false);
        }
    }, {
        key: "showBridgeModal",
        value: function showBridgeModal() {
            this.setState({
                isBridgeModalVisible: true,
                isBridgeModalVisibleBefore: true
            });
        }
    }, {
        key: "hideBridgeModal",
        value: function hideBridgeModal() {
            this.setState({
                isBridgeModalVisible: false
            });
        }
    }, {
        key: "showWithdrawModal",
        value: function showWithdrawModal() {
            this.setState({
                isWithdrawModalVisible: true,
                isWithdrawModalVisibleBefore: true
            });
        }
    }, {
        key: "hideWithdrawModal",
        value: function hideWithdrawModal() {
            this.setState({
                isWithdrawModalVisible: false
            });
        }
    }, {
        key: "showBurnModal",
        value: function showBurnModal() {
            this.setState({
                isBurnModalVisible: true,
                isBurnModalVisibleBefore: true
            });
        }
    }, {
        key: "hideBurnModal",
        value: function hideBurnModal() {
            this.setState({
                isBurnModalVisible: false
            });
        }
    }, {
        key: "showSettleModal",
        value: function showSettleModal() {
            this.setState({
                isSettleModalVisible: true,
                isSettleModalVisibleBefore: true
            });
        }
    }, {
        key: "hideSettleModal",
        value: function hideSettleModal() {
            this.setState({
                isSettleModalVisible: false
            });
        }
    }, {
        key: "showDepositModal",
        value: function showDepositModal() {
            this.setState({
                isDepositModalVisible: true,
                isDepositModalVisibleBefore: true
            });
        }
    }, {
        key: "hideDepositModal",
        value: function hideDepositModal() {
            this.setState({
                isDepositModalVisible: false
            });
        }
    }, {
        key: "showBorrowModal",
        value: function showBorrowModal(quoteAsset, backingAsset, account) {
            this.setState({
                isBorrowModalVisible: true,
                isBorrowModalVisibleBefore: true,
                borrow: {
                    quoteAsset: quoteAsset,
                    backingAsset: backingAsset,
                    account: account
                }
            });
        }
    }, {
        key: "hideBorrowModal",
        value: function hideBorrowModal() {
            this.setState({
                borrow: null,
                isBorrowModalVisible: false
            });
        }
    }, {
        key: "triggerSend",
        value: function triggerSend(asset) {
            var _this4 = this;

            this.setState({ send_asset: asset }, function () {
                if (_this4.send_modal) _this4.send_modal.show();
            });
        }
    }, {
        key: "_onSettleAsset",
        value: function _onSettleAsset(id, e) {
            e.preventDefault();
            this.setState({
                settleAsset: id
            });

            this.showSettleModal();
        }
    }, {
        key: "_hideAsset",
        value: function _hideAsset(asset, status) {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_23__["default"].hideAsset(asset, status);
        }
    }, {
        key: "_burnAsset",
        value: function _burnAsset(asset, e) {
            e.preventDefault();
            this.setState({ reserve: asset });
            this.showBurnModal();
        }
    }, {
        key: "_showDepositModal",
        value: function _showDepositModal(asset, e) {
            var _this5 = this;

            e.preventDefault();
            this.setState({ depositAsset: asset }, function () {
                _this5.showDepositModal();
            });
        }
    }, {
        key: "_showDepositWithdraw",
        value: function _showDepositWithdraw(action, asset, fiatModal, e) {
            var _setState,
                _this6 = this;

            e.preventDefault();
            this.setState((_setState = {}, _defineProperty(_setState, action === "bridge_modal" ? "bridgeAsset" : action === "deposit_modal" ? "depositAsset" : "withdrawAsset", asset), _defineProperty(_setState, "fiatModal", fiatModal), _setState), function () {
                if (action === "bridge_modal") {
                    _this6.showBridgeModal();
                    return true;
                }

                if (action === "deposit_modal") {
                    _this6.showDepositModal();
                    return true;
                }

                _this6.showWithdrawModal();
            });
        }
    }, {
        key: "_getSeparator",
        value: function _getSeparator(render) {
            return render ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                "\xA0|\xA0"
            ) : null;
        }
    }, {
        key: "toggleSortOrder",
        value: function toggleSortOrder(pagination, filters, sorter) {
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_23__["default"].changeViewSetting({
                portfolioSortDirection: sorter.order,
                portfolioSort: sorter.columnKey
            });
        }
    }, {
        key: "getHeader",
        value: function getHeader(atLeastOneHas) {
            var _this7 = this;

            var settings = this.props.settings;
            var shownAssets = this.state.shownAssets;


            var preferredUnit = settings.get("unit") || this.props.core_asset.get("symbol");
            var showAssetPercent = settings.get("showAssetPercent", false);

            function getImageName(symbol) {
                //if (symbol === "OPEN.BTC" || symbol === "GDEX.BTC") return symbol;
                if (symbol.startsWith("RUDEX.")) return symbol;

                if (symbol == "PPY" || symbol == "DONATE" || symbol == "BTS" || symbol == "CNY" || symbol == "USD" || symbol == "EUR" || symbol == "RUBLE" || symbol == "BTC" || symbol == "GOLD" || symbol == "SILVER") return symbol;

                return "unknown";

                //let imgName = symbol.split(".");
                //return imgName.length === 2 ? imgName[1] : imgName[0];
            }

            var headerItems = [{
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "account.asset" }),
                dataIndex: "asset",
                align: "left",
                customizable: false,
                sorter: this.sortFunctions.byKey,
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        getImageName(item.get("symbol")) === "unknown" ? "" : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
                            ref: item.get("symbol").toLowerCase(),
                            className: "column-hide-small"
                            //onError={this._onError.bind(this, item.get("symbol").toLowerCase())}
                            , style: { maxWidth: 35, marginRight: 10 }
                            //src={`${__BASE_URL__}asset-symbols/${item.get("symbol").toLowerCase()}.png`}
                            , src: "" + "asset-symbols/" + getImageName(item.get("symbol")).toLowerCase() + ".png"
                        }),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_LinkToAssetById__WEBPACK_IMPORTED_MODULE_10__["default"], { asset: item.get("id") })
                    );
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "account.qty" }),
                dataIndex: "balance",
                align: "right",
                customizable: false,
                sorter: this.sortFunctions.byBalance,
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__["default"], {
                            balance: item.get("id"),
                            hide_asset: true
                        })
                    );
                }
            }, {
                className: "column-hide-small",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "account.inOrders" }),
                dataIndex: "inOrders",
                align: "right",
                sorter: this.sortFunctions.byInOrders,
                render: function render(item, row) {
                    if (!item) {
                        return "--";
                    }
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_5__["default"], {
                            amount: item,
                            asset: row.asset.get("id"),
                            hide_asset: true
                        })
                    );
                }
            }, {
                className: "column-hide-small",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "account.inVestingBalances" }),
                dataIndex: "inVesting",
                align: "right",
                sorter: this.sortFunctions.byVestingBalance,
                render: function render(item, row) {
                    if (!item || item.length == 0) {
                        return "--";
                    }
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "noWrap" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_5__["default"], {
                            amount: _this7._sumVestingBalances(item),
                            asset: row.asset.get("id"),
                            hide_asset: true
                        })
                    );
                }
            }, {
                className: "column-hide-small",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "account.inCollateral" }),
                dataIndex: "inCollateral",
                align: "right",
                sorter: this.sortFunctions.byInCollateral,
                render: function render(item, row) {
                    if (!item || item.length == 0) {
                        return "--";
                    }
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "noWrap" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_FormattedAsset__WEBPACK_IMPORTED_MODULE_5__["default"], {
                            amount: _this7._sumCollateralBalances(item),
                            asset: row.asset.get("id"),
                            hide_asset: true
                        })
                    );
                }
            }, {
                className: "column-hide-small",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    { style: { whiteSpace: "nowrap" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "exchange.price" }),
                    " (",
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AssetName__WEBPACK_IMPORTED_MODULE_33__["default"], { name: preferredUnit, noTip: true }),
                    ")"
                ),
                dataIndex: "price",
                align: "right",
                sorter: this.sortFunctions.byEquivalentPrice,
                render: function render(item, row) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentPrice__WEBPACK_IMPORTED_MODULE_9__["default"], {
                            fromAsset: row.asset.get("id"),
                            pulsate: { reverse: true, fill: "forwards" },
                            hide_symbols: true
                        })
                    );
                }
            }, {
                className: "column-hide-small",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "account.hour_24_short" }),
                dataIndex: "hour24",
                align: "right",
                sorter: this.sortFunctions.changeValue,
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        item
                    );
                }
            }, {
                className: "column-hide-small",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    { style: { whiteSpace: "nowrap" } },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_TranslateWithLinks__WEBPACK_IMPORTED_MODULE_34__["default"], {
                        noLink: true,
                        string: "account.eq_value_header",
                        keys: [{
                            type: "asset",
                            value: preferredUnit,
                            arg: "asset"
                        }],
                        noTip: true
                    })
                ),
                dataIndex: "value",
                align: "right",
                customizable: false,
                sorter: this.sortFunctions.totalValue,
                defaultSortOrder: "descend",
                render: function render(item, row) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_3__["BalanceValueComponent"], {
                            balance: row.adds.balanceObject.get("id"),
                            satoshis: item,
                            toAsset: preferredUnit,
                            hide_asset: true
                        })
                    );
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "account.percent" }),
                dataIndex: "percent",
                align: "right",
                customizable: {
                    default: showAssetPercent
                },
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        item
                    );
                }
            }, {
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "header.payments" }),
                dataIndex: "payments",
                align: "center",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        item
                    );
                }
            }, {
                className: "column-hide-medium",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "exchange.buy" }),
                customizable: atLeastOneHas.buy ? undefined : {
                    default: false
                },
                dataIndex: "buy",
                align: "center",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        item
                    );
                }
            }, {
                className: "column-hide-medium",
                title: atLeastOneHas.depositOnlyBTS ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,
                    null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31__["Tooltip"],
                        {
                            title: counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("external_service_provider.expect_more")
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "modal.deposit.submit" }),
                        "\xA0",
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31__["Icon"], { type: "question-circle" })
                    )
                ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "modal.deposit.submit" }),
                customizable: atLeastOneHas.deposit ? undefined : {
                    default: false
                },
                dataIndex: "deposit",
                align: "center",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        item
                    );
                }
            }, {
                className: "column-hide-medium",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "modal.withdraw.submit" }),
                customizable: atLeastOneHas.withdraw ? undefined : {
                    default: false
                },
                dataIndex: "withdraw",
                align: "center",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        item
                    );
                }
            }, {
                className: "column-hide-medium",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "account.trade" }),
                dataIndex: "trade",
                align: "center",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        item
                    );
                }
            }, {
                className: "column-hide-medium",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "exchange.borrow_short" }),
                dataIndex: "borrow",
                align: "center",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        item
                    );
                }
            }, {
                className: "column-hide-medium",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "account.settle" }),
                dataIndex: "settle",
                align: "center",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        item
                    );
                }
            }, {
                className: "column-hide-medium",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, { content: "modal.reserve.submit" }),
                dataIndex: "burn",
                align: "center",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        item
                    );
                }
            }, {
                className: "column-hide-medium",
                title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_translate_component__WEBPACK_IMPORTED_MODULE_32___default.a, {
                    content: shownAssets == "active" ? "exchange.hide" : "account.perm.show"
                }),
                dataIndex: "hide",
                align: "center",
                render: function render(item) {
                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        item
                    );
                }
            }];
            headerItems.forEach(function (item) {
                if (item.dataIndex == _this7.state.portfolioSort) {
                    item.defaultSortOrder = _this7.state.portfolioSortDirection;
                }
            });
            return headerItems;
        }
    }, {
        key: "_sumCollateralBalances",
        value: function _sumCollateralBalances(balances) {
            if (!balances || balances.length == 0) return 0;
            var sum = 0;
            balances.forEach(function (item) {
                sum = sum + +item.get("collateral");
            });
            return sum;
        }
    }, {
        key: "_sumVestingBalances",
        value: function _sumVestingBalances(balances) {
            if (!balances || balances.length == 0) return 0;
            var sum = 0;
            balances.forEach(function (item) {
                sum = sum + Object(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_3__["balanceToAsset"])(item).amount;
            });
            return sum;
        }
    }, {
        key: "_renderBalances",
        value: function _renderBalances(balanceList, optionalAssets, visible) {
            var _this8 = this;

            var _props = this.props,
                coreSymbol = _props.coreSymbol,
                preferredUnit = _props.preferredUnit,
                settings = _props.settings,
                hiddenAssets = _props.hiddenAssets,
                orders = _props.orders;


            var renderBorrow = function renderBorrow(asset, account) {
                var isBitAsset = asset && asset.has("bitasset_data_id");
                var isGlobalSettled = isBitAsset && asset.getIn(["bitasset", "settlement_fund"]) > 0 ? true : false;

                return {
                    isBitAsset: isBitAsset,
                    borrowLink: !isBitAsset || isGlobalSettled ? null : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            onClick: function onClick() {
                                react_tooltip__WEBPACK_IMPORTED_MODULE_12___default.a.hide();
                                _this8.showBorrowModal(asset.get("id"), asset.getIn(["bitasset", "options", "short_backing_asset"]), account);
                            }
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                            name: "dollar",
                            title: "icons.dollar.borrow",
                            className: "icon-14px"
                        })
                    )
                };
            };

            var balances = [];
            var emptyCell = "-";
            balanceList.forEach(function (balance) {
                var balanceObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getObject(balance);
                if (!balanceObject) return;
                var asset_type = balanceObject.get("asset_type");
                var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getObject(asset_type);
                if (!asset) return;

                var directMarketLink = void 0,
                    settleLink = void 0,
                    transferLink = void 0;
                var symbol = "";

                var assetName = asset.get("symbol");
                var notCore = asset.get("id") !== "1.3.0";
                var notCorePrefUnit = preferredUnit !== coreSymbol;

                var _assetUtils$parseDesc = common_asset_utils__WEBPACK_IMPORTED_MODULE_6__["default"].parseDescription(asset.getIn(["options", "description"])),
                    market = _assetUtils$parseDesc.market;

                symbol = asset.get("symbol");
                if (symbol.indexOf("OPEN.") !== -1 && !market) market = "USD";
                var preferredMarket = market ? market : preferredUnit;

                if (notCore && preferredMarket === symbol) preferredMarket = coreSymbol;

                /* Table content */
                directMarketLink = notCore ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                    {
                        to: "/market/" + asset.get("symbol") + "_" + preferredMarket,
                        onClick: function onClick() {
                            return actions_MarketsActions__WEBPACK_IMPORTED_MODULE_35__["default"].switchMarket();
                        }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "trade",
                        title: "icons.trade.trade",
                        className: "icon-14px"
                    })
                ) : notCorePrefUnit ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                    {
                        to: "/market/" + asset.get("symbol") + "_" + preferredUnit,
                        onClick: function onClick() {
                            return actions_MarketsActions__WEBPACK_IMPORTED_MODULE_35__["default"].switchMarket();
                        }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "trade",
                        title: "icons.trade.trade",
                        className: "icon-14px"
                    })
                ) : emptyCell;
                transferLink = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "a",
                    { onClick: _this8.triggerSend.bind(_this8, asset.get("id")) },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                        name: "transfer",
                        title: "icons.transfer",
                        className: "icon-14px"
                    })
                );

                var _renderBorrow = renderBorrow(asset, _this8.props.account),
                    isBitAsset = _renderBorrow.isBitAsset,
                    borrowLink = _renderBorrow.borrowLink;

                var includeAsset = !hiddenAssets.includes(asset_type);
                var hasBalance = !!balanceObject.get("balance");

                // Vesting balances
                var vestingBalances = [];

                var vbs = _this8.props.account.get("vesting_balances");
                vbs.forEach(function (vb) {
                    var vestingObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getObject(vb);
                    if (vestingObject.getIn(["balance", "asset_id"]) === asset.get("id")) {
                        if (+vestingObject.getIn(["balance", "amount"]) > 0) {
                            vestingBalances.push(vestingObject);
                        }
                    }
                });

                // Collateral
                var collateralBalances = [];

                _this8.props.callOrders.forEach(function (order) {
                    var collateralObject = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getObject(order);
                    if (collateralObject.getIn(["call_price", "base", "asset_id"]) === asset.get("id")) {
                        if (+collateralObject.get("collateral") > 0) {
                            collateralBalances.push(collateralObject);
                        }
                    }
                });

                var backedCoin = Object(common_gatewayUtils__WEBPACK_IMPORTED_MODULE_13__["getBackedCoin"])(asset.get("symbol"), _this8.props.backedCoins);
                var canDeposit = backedCoin && backedCoin.depositAllowed || asset.get("symbol") == "BTS";

                var canWithdraw = backedCoin && backedCoin.withdrawalAllowed && hasBalance && balanceObject.get("balance") != 0;

                var canBuy = !!_this8.props.bridgeCoins.get(symbol);

                /* Asset and Backing Asset Prefixes */
                var options = asset && asset.getIn(["bitasset", "options"]) ? asset.getIn(["bitasset", "options"]).toJS() : null;
                var backingAsset = options && options.short_backing_asset ? bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getAsset(options.short_backing_asset) : null;

                var _utils$replaceName = common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].replaceName(asset),
                    isAssetBitAsset = _utils$replaceName.isBitAsset;

                var _utils$replaceName2 = common_utils__WEBPACK_IMPORTED_MODULE_21__["default"].replaceName(backingAsset),
                    isBackingBitAsset = _utils$replaceName2.isBitAsset;

                var settlePriceTitle = void 0;

                if (isBitAsset) {
                    var globally_settled = asset.get("bitasset").get("settlement_fund") > 0;
                    var isPrediction = asset.getIn(["bitasset", "is_prediction_market"]);
                    if (globally_settled) {
                        settlePriceTitle = "tooltip.global_settle";
                    } else if (isPrediction) {
                        settlePriceTitle = "tooltip.settle_market_prediction";
                    } else {
                        settlePriceTitle = "tooltip.settle";
                    }
                    settleLink = isPrediction && !globally_settled ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31__["Icon"], { type: "question-circle" }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            onClick: _this8._onSettleAsset.bind(_this8, asset.get("id"))
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                            name: "settle",
                            title: "icons.settle",
                            className: "icon-14px"
                        })
                    );
                }

                var preferredAsset = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getAsset(preferredUnit);

                var marketId = asset.get("symbol") + "_" + preferredUnit;
                var currentMarketStats = _this8.props.allMarketStats.get(marketId);
                _this8.changeRefs[asset.get("symbol")] = currentMarketStats && currentMarketStats.change ? currentMarketStats.change : 0;
                var totalValue = Object(_Utility_EquivalentValueComponent__WEBPACK_IMPORTED_MODULE_3__["balanceToAsset"])(balanceObject).amount + (orders[asset.get("id")] ? orders[asset.get("id")] : 0) + _this8._sumVestingBalances(vestingBalances) + _this8._sumCollateralBalances(collateralBalances);

                balances.push({
                    key: asset.get("symbol"),
                    adds: {
                        balanceObject: balanceObject,
                        preferredAsset: preferredAsset,
                        asset: asset
                    },
                    asset: asset,
                    balance: balanceObject,
                    price: "dummy",
                    inOrders: orders[asset.get("id")],
                    inVesting: vestingBalances,
                    inCollateral: collateralBalances,
                    hour24: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_MarketChangeComponent__WEBPACK_IMPORTED_MODULE_4__["Market24HourChangeComponent"], {
                        base: asset.get("id"),
                        quote: preferredUnit,
                        marketId: marketId,
                        hide_symbols: true
                    }),
                    value: totalValue,
                    percent: hasBalance ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_2__["default"], { balance: balance, asPercentage: true }) : null,
                    payments: transferLink,
                    buy: _this8._renderBuy(asset.get("symbol"), canBuy, assetName, emptyCell, balanceObject.get("balance")),
                    deposit: _this8._renderGatewayAction("deposit", canDeposit, assetName, emptyCell),
                    withdraw: _this8._renderGatewayAction("withdraw", canWithdraw, assetName, emptyCell),
                    trade: directMarketLink,
                    borrow: isBitAsset && borrowLink ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31__["Tooltip"],
                        {
                            title: counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.borrow", {
                                asset: isAssetBitAsset ? "bit" + symbol : symbol
                            })
                        },
                        borrowLink
                    ) : isBitAsset && !borrowLink ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31__["Tooltip"],
                        {
                            title: counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.borrow_disabled", {
                                asset: isAssetBitAsset ? "bit" + symbol : symbol
                            })
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31__["Icon"], { type: "question-circle" })
                    ) : emptyCell,
                    settle: isBitAsset && backingAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31__["Tooltip"],
                        {
                            placement: "bottom",
                            title: counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate(settlePriceTitle, {
                                asset: isAssetBitAsset ? "bit" + symbol : symbol,
                                backingAsset: isBackingBitAsset ? "bit" + backingAsset.get("symbol") : backingAsset.get("symbol"),
                                settleDelay: options.force_settlement_delay_sec / 3600
                            })
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            { className: "inline-block" },
                            settleLink
                        )
                    ) : emptyCell,
                    burn: !isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        "a",
                        {
                            style: { marginRight: 0 },
                            onClick: _this8._burnAsset.bind(_this8, asset.get("id"))
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], { name: "fire", className: "icon-14px" })
                    ) : null,
                    hide: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31__["Tooltip"],
                        {
                            placement: "bottom",
                            title: counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip." + (includeAsset ? "hide_asset" : "show_asset"))
                        },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "a",
                            {
                                style: { marginRight: 0 },
                                className: includeAsset ? "order-cancel" : "action-plus",
                                onClick: _this8._hideAsset.bind(_this8, asset_type, includeAsset)
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                name: includeAsset ? "cross-circle" : "plus-circle",
                                title: includeAsset ? "icons.cross_circle.hide_asset" : "icons.plus_circle.show_asset",
                                className: "icon-14px"
                            })
                        )
                    )
                });
            });
            if (optionalAssets) {
                optionalAssets.filter(function (asset) {
                    var isAvailable = false;
                    _this8.props.backedCoins.get("OPEN", []).forEach(function (coin) {
                        if (coin && coin.symbol === asset) {
                            isAvailable = true;
                        }
                    });
                    if (!!_this8.props.bridgeCoins.get(asset)) {
                        isAvailable = true;
                    }
                    var keep = true;
                    balances.forEach(function (a) {
                        if (a.key === asset) keep = false;
                    });
                    return keep && isAvailable;
                }).forEach(function (a) {
                    var asset = bitsharesjs__WEBPACK_IMPORTED_MODULE_14__["ChainStore"].getAsset(a);
                    if (asset && _this8.props.isMyAccount) {
                        var includeAsset = !hiddenAssets.includes(asset.get("id"));

                        var thisAssetName = asset.get("symbol").split(".");
                        var canDeposit = !!_this8.props.backedCoins.get("OPEN", []).find(function (a) {
                            return a.backingCoinType === thisAssetName[1];
                        }) || !!_this8.props.backedCoins.get("RUDEX", []).find(function (a) {
                            return a.backingCoin === thisAssetName[1];
                        }) || asset.get("symbol") == "BTS";

                        var canBuy = !!_this8.props.bridgeCoins.get(asset.get("symbol"));

                        var notCore = asset.get("id") !== "1.3.0";

                        var _assetUtils$parseDesc2 = common_asset_utils__WEBPACK_IMPORTED_MODULE_6__["default"].parseDescription(asset.getIn(["options", "description"])),
                            market = _assetUtils$parseDesc2.market;

                        if (asset.get("symbol").indexOf("OPEN.") !== -1 && !market) market = "USD";
                        var preferredMarket = market ? market : coreSymbol;

                        var directMarketLink = notCore ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"],
                            {
                                to: "/market/" + asset.get("symbol") + "_" + preferredMarket,
                                onClick: function onClick() {
                                    return actions_MarketsActions__WEBPACK_IMPORTED_MODULE_35__["default"].switchMarket();
                                }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                name: "trade",
                                title: "icons.trade.trade",
                                className: "icon-14px"
                            })
                        ) : emptyCell;

                        var _renderBorrow2 = renderBorrow(asset, _this8.props.account),
                            isBitAsset = _renderBorrow2.isBitAsset,
                            borrowLink = _renderBorrow2.borrowLink;

                        if (includeAsset && visible || !includeAsset && !visible) balances.push({
                            key: asset.get("symbol"),
                            asset: asset,
                            balance: emptyCell,
                            price: emptyCell,
                            hour24: emptyCell,
                            value: emptyCell,
                            percent: emptyCell,
                            payments: emptyCell,
                            buy: canBuy && _this8.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "span",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "a",
                                    {
                                        onClick: _this8._showDepositWithdraw.bind(_this8, "bridge_modal", a, false)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                        name: "dollar",
                                        title: "icons.dollar.buy",
                                        className: "icon-14px"
                                    })
                                )
                            ) : emptyCell,
                            deposit: canDeposit && _this8.props.isMyAccount ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                "span",
                                null,
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                    style: { cursor: "pointer" },
                                    name: "deposit",
                                    title: "icons.deposit.deposit",
                                    className: "icon-14x",
                                    onClick: _this8._showDepositModal.bind(_this8, asset.get("symbol"))
                                })
                            ) : emptyCell,
                            withdraw: emptyCell,
                            trade: directMarketLink,
                            borrow: isBitAsset ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31__["Tooltip"],
                                {
                                    placement: "bottom",
                                    title: counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip.borrow", { asset: asset.get("symbol") })
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "div",
                                    { className: "inline-block" },
                                    borrowLink
                                )
                            ) : emptyCell,
                            settle: emptyCell,
                            burn: emptyCell,
                            hide: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_31__["Tooltip"],
                                {
                                    placement: "bottom",
                                    title: counterpart__WEBPACK_IMPORTED_MODULE_7___default.a.translate("tooltip." + (includeAsset ? "hide_asset" : "show_asset"))
                                },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                    "a",
                                    {
                                        style: { marginRight: 0 },
                                        className: includeAsset ? "order-cancel" : "action-plus",
                                        onClick: _this8._hideAsset.bind(_this8, asset.get("id"), includeAsset)
                                    },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_19__["default"], {
                                        name: includeAsset ? "cross-circle" : "plus-circle",
                                        title: includeAsset ? "icons.cross_circle.hide_asset" : "icons.plus_circle.show_asset",
                                        className: "icon-14px"
                                    })
                                )
                            )
                        });
                    }
                });
            }
            return balances;
        }
    }, {
        key: "_renderSendModal",
        value: function _renderSendModal() {
            var _this9 = this;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_SendModal__WEBPACK_IMPORTED_MODULE_22__["default"], {
                id: "send_modal_portfolio",
                refCallback: function refCallback(e) {
                    if (e) _this9.send_modal = e;
                },
                from_name: this.props.account.get("name"),
                asset_id: this.state.send_asset || "1.3.0"
            });
        }
    }, {
        key: "_renderBorrowModal",
        value: function _renderBorrowModal() {
            if (!this.state.borrow || !this.state.borrow.quoteAsset || !this.state.borrow.backingAsset || !this.state.borrow.account || !this.state.isBorrowModalVisibleBefore) {
                return null;
            }

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_BorrowModal__WEBPACK_IMPORTED_MODULE_11__["default"], {
                visible: this.state.isBorrowModalVisible,
                showModal: this.showBorrowModal,
                hideModal: this.hideBorrowModal,
                accountObj: this.state.borrow && this.state.borrow.account,
                quoteAssetObj: this.state.borrow && this.state.borrow.quoteAsset,
                backingAssetObj: this.state.borrow && this.state.borrow.backingAsset
            });
        }
    }, {
        key: "_renderSettleModal",
        value: function _renderSettleModal() {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_SettleModal__WEBPACK_IMPORTED_MODULE_24__["default"], {
                visible: this.state.isSettleModalVisible,
                hideModal: this.hideSettleModal,
                showModal: this.showSettleModal,
                asset: this.state.settleAsset,
                account: this.props.account
            });
        }
    }, {
        key: "render",
        value: function render() {
            var currentBridges = this.props.bridgeCoins.get(this.state.bridgeAsset) || null;

            var balanceRows = this._renderBalances(this.props.balanceList, this.props.optionalAssets, this.props.visible);
            var atLeastOneHas = {};
            balanceRows.forEach(function (_item) {
                if (!!_item.buy && _item.buy !== "-") {
                    atLeastOneHas.buy = true;
                }
                if (!!_item.deposit && _item.deposit !== "-") {
                    if (_item.key == "BTS" && stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"].anyAllowed()) {
                        atLeastOneHas.depositOnlyBTS = _item.key == "BTS" && !atLeastOneHas.deposit;
                        atLeastOneHas.deposit = true;
                    }
                }
                if (!!_item.withdraw && _item.withdraw !== "-") {
                    atLeastOneHas.withdraw = true;
                }
            });

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    _Utility_CustomTable__WEBPACK_IMPORTED_MODULE_30__["default"],
                    {
                        className: "table dashboard-table table-hover",
                        rows: balanceRows,
                        header: this.getHeader(atLeastOneHas),
                        label: "utility.total_x_assets",
                        extraRow: this.props.extraRow,
                        viewSettingsKey: "portfolioColumns",
                        allowCustomization: true,
                        toggleSortOrder: this.toggleSortOrder
                    },
                    this._renderSendModal(),
                    (this.state.isSettleModalVisible || this.state.isSettleModalVisibleBefore) && this._renderSettleModal(),
                    this._renderBorrowModal(),
                    (this.state.isWithdrawModalVisible || this.state.isWithdrawModalVisibleBefore) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_WithdrawModalNew__WEBPACK_IMPORTED_MODULE_27__["default"], {
                        hideModal: this.hideWithdrawModal,
                        visible: this.state.isWithdrawModalVisible,
                        backedCoins: this.props.backedCoins,
                        initialSymbol: this.state.withdrawAsset
                    }),
                    (this.state.isDepositModalVisible || this.state.isDepositModalVisibleBefore) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_DepositModal__WEBPACK_IMPORTED_MODULE_25__["default"], {
                        visible: this.state.isDepositModalVisible,
                        showModal: this.showDepositModal,
                        hideModal: this.hideDepositModal,
                        asset: this.state.depositAsset,
                        account: this.props.account.get("name"),
                        backedCoins: this.props.backedCoins
                    }),
                    (this.state.isBridgeModalVisible || this.state.isBridgeModalVisibleBefore) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Dashboard_SimpleDepositBlocktradesBridge__WEBPACK_IMPORTED_MODULE_26__["default"], {
                        visible: this.state.isBridgeModalVisible,
                        showModal: this.showBridgeModal,
                        hideModal: this.hideBridgeModal,
                        action: "deposit",
                        account: this.props.account.get("name"),
                        sender: this.props.account.get("id"),
                        asset: this.state.bridgeAsset,
                        balances: this.props.balances,
                        bridges: currentBridges,
                        isDown: this.props.gatewayDown.get("TRADE")
                    }),
                    (this.state.isBurnModalVisible || this.state.isBurnModalVisibleBefore) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Modal_ReserveAssetModal__WEBPACK_IMPORTED_MODULE_29__["default"], {
                        visible: this.state.isBurnModalVisible,
                        hideModal: this.hideBurnModal,
                        asset: this.state.reserve,
                        account: this.props.account,
                        onClose: function onClose() {
                            react_foundation_apps_src_utils_foundation_api__WEBPACK_IMPORTED_MODULE_28___default.a.publish("reserve_asset", "close");
                        }
                    })
                )
            );
        }
    }]);

    return AccountPortfolioList;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

AccountPortfolioList = Object(alt_react__WEBPACK_IMPORTED_MODULE_15__["connect"])(AccountPortfolioList, {
    listenTo: function listenTo() {
        return [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"], stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"], stores_MarketsStore__WEBPACK_IMPORTED_MODULE_18__["default"]];
    },
    getProps: function getProps() {
        return {
            settings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"].getState().settings,
            viewSettings: stores_SettingsStore__WEBPACK_IMPORTED_MODULE_16__["default"].getState().viewSettings,
            backedCoins: stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"].getState().backedCoins,
            bridgeCoins: stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"].getState().bridgeCoins,
            gatewayDown: stores_GatewayStore__WEBPACK_IMPORTED_MODULE_17__["default"].getState().down,
            allMarketStats: stores_MarketsStore__WEBPACK_IMPORTED_MODULE_18__["default"].getState().allMarketStats
        };
    }
});

AccountPortfolioList = react_debounce_render__WEBPACK_IMPORTED_MODULE_1___default()(AccountPortfolioList, 50, {
    leading: false
});

/* harmony default export */ __webpack_exports__["default"] = (AccountPortfolioList);

/***/ }),

/***/ 2998:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Market24HourChangeComponent", function() { return Market24HourChangeComponent; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2147);
/* harmony import */ var _AssetWrapper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2126);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1886);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2367);
/* harmony import */ var _Utility_MarketPrice__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2992);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }








/**
 *  Displays change in market value for an asset
 *
 *  Expects three properties
 *  -'quote' which should be a asset id
 *  -'base' which is the asset id of the original asset amount
 */

var MarketChangeComponent = function (_MarketStats) {
    _inherits(MarketChangeComponent, _MarketStats);

    function MarketChangeComponent(props) {
        _classCallCheck(this, MarketChangeComponent);

        return _possibleConstructorReturn(this, (MarketChangeComponent.__proto__ || Object.getPrototypeOf(MarketChangeComponent)).call(this, props));
    }

    _createClass(MarketChangeComponent, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np) {
            return _get(MarketChangeComponent.prototype.__proto__ || Object.getPrototypeOf(MarketChangeComponent.prototype), "shouldComponentUpdate", this).call(this, np) || np.base !== this.props.base;
        }
    }, {
        key: "getValue",
        value: function getValue() {
            var marketStats = this.props.marketStats;

            return marketStats && marketStats.change ? marketStats.change : 0;
        }
    }, {
        key: "render",
        value: function render() {
            var marketChangeValue = this.getValue();
            var dayChangeClass = parseFloat(marketChangeValue) === 0 ? "" : parseFloat(marketChangeValue) < 0 ? "change-down" : "change-up";
            var marketChangeFormattedValue = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_1__["FormattedNumber"], {
                style: "decimal",
                value: marketChangeValue,
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });

            // this is treating a sympton when MarketStore does not provide a proper value! #2511
            if (!isNaN(parseFloat(marketChangeValue))) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    { className: "value " + dayChangeClass },
                    marketChangeFormattedValue,
                    "%"
                );
            } else {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    { className: "value " + dayChangeClass },
                    "-"
                );
            }
        }
    }]);

    return MarketChangeComponent;
}(_Utility_MarketPrice__WEBPACK_IMPORTED_MODULE_5__["MarketStats"]);

MarketChangeComponent.defaultProps = {
    fullPrecision: false,
    noDecimals: false,
    hide_asset: false
};

MarketChangeComponent = Object(_AssetWrapper__WEBPACK_IMPORTED_MODULE_2__["default"])(MarketChangeComponent, {
    propNames: ["quote", "base"],
    defaultProps: { quote: "1.3.0" }
});

var Market24HourChangeComponent = function (_React$Component) {
    _inherits(Market24HourChangeComponent, _React$Component);

    function Market24HourChangeComponent() {
        _classCallCheck(this, Market24HourChangeComponent);

        return _possibleConstructorReturn(this, (Market24HourChangeComponent.__proto__ || Object.getPrototypeOf(Market24HourChangeComponent)).apply(this, arguments));
    }

    _createClass(Market24HourChangeComponent, [{
        key: "render",
        value: function render() {
            var _props = this.props,
                refCallback = _props.refCallback,
                others = _objectWithoutProperties(_props, ["refCallback"]);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MarketChangeComponent, _extends({}, others, { ref: refCallback }));
        }
    }]);

    return Market24HourChangeComponent;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

Market24HourChangeComponent = Object(alt_react__WEBPACK_IMPORTED_MODULE_3__["connect"])(Market24HourChangeComponent, {
    listenTo: function listenTo() {
        return [stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__["default"]];
    },
    getProps: function getProps(props) {
        return {
            marketStats: stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().allMarketStats.get(props.marketId),
            allMarketStats: stores_MarketsStore__WEBPACK_IMPORTED_MODULE_4__["default"].getState().allMarketStats
        };
    }
});



/***/ }),

/***/ 2999:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFinalPrice", function() { return getFinalPrice; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(571);
/* harmony import */ var alt_container__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1989);
/* harmony import */ var stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(725);
/* harmony import */ var _FormattedPrice__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2445);
/* harmony import */ var _MarketStatsCheck__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2369);
/* harmony import */ var stores_MarketsStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2367);
/* harmony import */ var common_market_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2366);
/* harmony import */ var _AssetWrapper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2126);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(420);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }












var getFinalPrice = function getFinalPrice(fromAsset, toAsset) {
    var coreAsset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
    var allMarketStats = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
    var real = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;

    try {
        return common_market_utils__WEBPACK_IMPORTED_MODULE_7__["default"].getFinalPrice(coreAsset ? coreAsset : bitsharesjs__WEBPACK_IMPORTED_MODULE_9__["ChainStore"].getAsset("1.3.0"), fromAsset, toAsset ? toAsset : bitsharesjs__WEBPACK_IMPORTED_MODULE_9__["ChainStore"].getAsset("1.3.0"), allMarketStats ? allMarketStats : stores_MarketsStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().allMarketStats, real);
    } catch (err) {
        console.log(err);
    }
};

var EquivalentPrice = function (_MarketStatsCheck) {
    _inherits(EquivalentPrice, _MarketStatsCheck);

    function EquivalentPrice() {
        _classCallCheck(this, EquivalentPrice);

        return _possibleConstructorReturn(this, (EquivalentPrice.__proto__ || Object.getPrototypeOf(EquivalentPrice)).apply(this, arguments));
    }

    _createClass(EquivalentPrice, [{
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(np, nextState) {
            return _get(EquivalentPrice.prototype.__proto__ || Object.getPrototypeOf(EquivalentPrice.prototype), "shouldComponentUpdate", this).call(this, np) || np.base_amount !== this.props.base_amount || np.quote_amount !== this.props.quote_amount || np.decimals !== this.props.decimals || !common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].are_equal_shallow(np.pulsate, this.props.pulsate) || !common_utils__WEBPACK_IMPORTED_MODULE_1__["default"].are_equal_shallow(nextState, this.state);
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                coreAsset = _props.coreAsset,
                fromAsset = _props.fromAsset,
                toAsset = _props.toAsset,
                allMarketStats = _props.allMarketStats,
                forceDirection = _props.forceDirection,
                others = _objectWithoutProperties(_props, ["coreAsset", "fromAsset", "toAsset", "allMarketStats", "forceDirection"]);

            var finalPrice = getFinalPrice(toAsset, fromAsset, coreAsset, allMarketStats);

            if (finalPrice === 1) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "span",
                    null,
                    "1.00"
                );
            }

            if (!finalPrice) return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "span",
                null,
                "--"
            );

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FormattedPrice__WEBPACK_IMPORTED_MODULE_4__["default"], _extends({
                force_direction: forceDirection ? toAsset.get("symbol") : false,
                base_amount: finalPrice.base.amount,
                base_asset: finalPrice.base.asset_id,
                quote_amount: finalPrice.quote.amount,
                quote_asset: finalPrice.quote.asset_id
            }, others));
        }
    }]);

    return EquivalentPrice;
}(_MarketStatsCheck__WEBPACK_IMPORTED_MODULE_5__["default"]);

EquivalentPrice.defaultProps = {
    forceDirection: true
};


EquivalentPrice = Object(_AssetWrapper__WEBPACK_IMPORTED_MODULE_8__["default"])(EquivalentPrice, {
    propNames: ["toAsset", "fromAsset", "coreAsset"],
    defaultProps: {
        toAsset: "1.3.0",
        coreAsset: "1.3.0"
    }
});

var EquivalentPriceWrapper = function (_React$Component) {
    _inherits(EquivalentPriceWrapper, _React$Component);

    function EquivalentPriceWrapper() {
        _classCallCheck(this, EquivalentPriceWrapper);

        return _possibleConstructorReturn(this, (EquivalentPriceWrapper.__proto__ || Object.getPrototypeOf(EquivalentPriceWrapper)).apply(this, arguments));
    }

    _createClass(EquivalentPriceWrapper, [{
        key: "render",
        value: function render() {
            var _this3 = this;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                alt_container__WEBPACK_IMPORTED_MODULE_2__["default"],
                {
                    stores: [stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"], stores_MarketsStore__WEBPACK_IMPORTED_MODULE_6__["default"]],
                    inject: {
                        toAsset: function toAsset() {
                            return _this3.props.toAsset || stores_SettingsStore__WEBPACK_IMPORTED_MODULE_3__["default"].getState().settings.get("unit", "1.3.0");
                        },
                        allMarketStats: function allMarketStats() {
                            return stores_MarketsStore__WEBPACK_IMPORTED_MODULE_6__["default"].getState().allMarketStats;
                        }
                    }
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EquivalentPrice, _extends({}, this.props, { ref: this.props.refCallback }))
            );
        }
    }]);

    return EquivalentPriceWrapper;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

/* harmony default export */ __webpack_exports__["default"] = (EquivalentPriceWrapper);




/***/ }),

/***/ 3000:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1894);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }






var PulseIcon = function (_Component) {
    _inherits(PulseIcon, _Component);

    function PulseIcon() {
        var _ref;

        var _temp, _this, _ret;

        _classCallCheck(this, PulseIcon);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = PulseIcon.__proto__ || Object.getPrototypeOf(PulseIcon)).call.apply(_ref, [this].concat(args))), _this), _this.tick = function () {
            var _this$props = _this.props,
                onIcon = _this$props.onIcon,
                offIcon = _this$props.offIcon;

            var _ref2 = _this.state || {},
                _ref2$name = _ref2.name,
                name = _ref2$name === undefined ? onIcon : _ref2$name;

            _this.setState({
                name: name === onIcon ? offIcon : onIcon
            });
        }, _temp), _possibleConstructorReturn(_this, _ret);
    }

    _createClass(PulseIcon, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var duration = this.props.duration;

            this.interval = setInterval(this.tick, duration);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            this.interval && clearInterval(this.interval);
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                onIcon = _props.onIcon,
                rest = _props.rest;

            var _ref3 = this.state || {},
                _ref3$name = _ref3.name,
                name = _ref3$name === undefined ? onIcon : _ref3$name;

            var title = this.props.title;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Icon__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({ name: name, title: title }, rest));
        }
    }]);

    return PulseIcon;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]);

PulseIcon.propTypes = {
    duration: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.number.isRequired,
    offIcon: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,
    onIcon: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,
    title: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired
};
/* harmony default export */ __webpack_exports__["default"] = (PulseIcon);

/***/ }),

/***/ 3001:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2145);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Utility_AmountSelectorStyleGuide__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2125);
/* harmony import */ var actions_AssetActions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2391);
/* harmony import */ var bitsharesjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(420);
/* harmony import */ var common_MarketClasses__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(598);
/* harmony import */ var _Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2126);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var ReserveAssetModal = function (_React$Component) {
    _inherits(ReserveAssetModal, _React$Component);

    function ReserveAssetModal(props) {
        _classCallCheck(this, ReserveAssetModal);

        var _this = _possibleConstructorReturn(this, (ReserveAssetModal.__proto__ || Object.getPrototypeOf(ReserveAssetModal)).call(this, props));

        _this.state = _this.getInitialState(props);

        _this.onSubmit = _this.onSubmit.bind(_this);
        return _this;
    }

    _createClass(ReserveAssetModal, [{
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(np) {
            if (np.asset && this.props.asset && np.asset.get("id") !== this.props.asset.get("id")) {
                this.setState(this.getInitialState(np));
            }
        }
    }, {
        key: "getInitialState",
        value: function getInitialState(props) {
            return {
                amount: 0,
                amountAsset: new common_MarketClasses__WEBPACK_IMPORTED_MODULE_6__["Asset"]({
                    amount: 0,
                    asset_id: props.asset.get("id"),
                    precision: props.asset.get("precision")
                })
            };
        }
    }, {
        key: "onAmountChanged",
        value: function onAmountChanged(_ref) {
            var amount = _ref.amount,
                asset = _ref.asset;

            this.state.amountAsset.setAmount({ real: amount });
            this.setState({ amount: amount, asset: asset });
        }
    }, {
        key: "onSubmit",
        value: function onSubmit() {
            var _this2 = this;

            actions_AssetActions__WEBPACK_IMPORTED_MODULE_4__["default"].reserveAsset(this.state.amountAsset.getAmount(), this.props.asset.get("id"), this.props.account.get("id")).then(function () {
                _this2.state.amountAsset.setAmount({ sats: 0 });
                _this2.setState({ amount: 0 });
            });
            this.props.hideModal();
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var assetId = this.props.asset.get("id");

            var currentBalance = this.props.account && this.props.account.get("balances", []).size && !!this.props.account.getIn(["balances", assetId]) ? bitsharesjs__WEBPACK_IMPORTED_MODULE_5__["ChainStore"].getObject(this.props.account.getIn(["balances", assetId])) : null;
            if (!currentBalance) return null;

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Modal"],
                {
                    visible: this.props.visible,
                    onCancel: this.props.hideModal,
                    title: counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("modal.reserve.title"),
                    footer: [react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Button"],
                        { type: "primary", key: "submit", onClick: this.onSubmit },
                        counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("modal.reserve.submit")
                    ), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Button"],
                        { onClick: this.props.hideModal, key: "cancel" },
                        counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("cancel")
                    )]
                },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Alert"], {
                    message: counterpart__WEBPACK_IMPORTED_MODULE_2___default.a.translate("modal.reserve.warning_message"),
                    type: "warning",
                    showIcon: true,
                    style: { marginBottom: "2em" }
                }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_8__["Form"],
                    { layout: "vertical" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_AmountSelectorStyleGuide__WEBPACK_IMPORTED_MODULE_3__["default"], {
                        label: "modal.reserve.amount",
                        amount: this.state.amount,
                        onChange: this.onAmountChanged.bind(this),
                        asset: assetId,
                        assets: [assetId],
                        display_balance: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            "div",
                            {
                                onClick: function onClick() {
                                    _this3.state.amountAsset.setAmount({
                                        sats: currentBalance.get("balance")
                                    });
                                    _this3.setState({
                                        amount: _this3.state.amountAsset.getAmount({ real: true })
                                    });
                                }
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Utility_BalanceComponent__WEBPACK_IMPORTED_MODULE_1__["default"], {
                                balance: this.props.account.getIn(["balances", assetId])
                            })
                        ),
                        tabIndex: 1
                    })
                )
            );
        }
    }]);

    return ReserveAssetModal;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

ReserveAssetModal = Object(_Utility_AssetWrapper__WEBPACK_IMPORTED_MODULE_7__["default"])(ReserveAssetModal, {
    propNames: ["asset"]
});

/* harmony default export */ __webpack_exports__["default"] = (ReserveAssetModal);

/***/ }),

/***/ 3002:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(390);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(587);
/* harmony import */ var counterpart__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(counterpart__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(736);
/* harmony import */ var bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var actions_SettingsActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(726);
/* harmony import */ var _PaginatedList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2916);
/* harmony import */ var _paginated_list_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2917);
/* harmony import */ var _paginated_list_scss__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_paginated_list_scss__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var alt_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1886);
/* harmony import */ var _stores_SettingsStore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(725);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(830);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }











var Option = bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2__["Select"].Option;

var CustomTable = function (_React$Component) {
    _inherits(CustomTable, _React$Component);

    function CustomTable(props) {
        _classCallCheck(this, CustomTable);

        var _this = _possibleConstructorReturn(this, (CustomTable.__proto__ || Object.getPrototypeOf(CustomTable)).call(this, props));

        _this.state = {
            columnSelector: "default",
            isDropDownOpen: false
        };

        _this._columnSelectorChange = _this._columnSelectorChange.bind(_this);
        _this.isColumnChecked = _this.isColumnChecked.bind(_this);
        return _this;
    }

    _createClass(CustomTable, [{
        key: "_getViewSettingsKey",
        value: function _getViewSettingsKey() {
            // add a prefix for all column customizations
            return "columns_" + this.props.viewSettingsKey;
        }
    }, {
        key: "_getEnabledColumns",
        value: function _getEnabledColumns() {
            var settings = this.props.viewSettings.get(this._getViewSettingsKey());
            return settings || {};
        }
    }, {
        key: "_getCustomizableColumns",
        value: function _getCustomizableColumns(header) {
            var _this2 = this;

            return header.filter(function (item) {
                // default is that customization is allowed
                return _this2._isColumnCustomizable(item).customizable;
            });
        }
    }, {
        key: "modHeader",
        value: function modHeader(header) {
            var _this3 = this;

            if (!this.props.allowCustomization) {
                return header;
            }
            return header.filter(function (item) {
                // per default show all, only hide if specifically set to false
                return !_this3._isColumnCustomizable(item) || _this3.isColumnChecked(item);
            });
        }
    }, {
        key: "_columnCheckboxChange",
        value: function _columnCheckboxChange(item) {
            // copy and modify for state
            var enabledColumns = this._getEnabledColumns();
            enabledColumns[item] = !this.isColumnChecked(item);

            // reflect change in Store
            actions_SettingsActions__WEBPACK_IMPORTED_MODULE_3__["default"].changeViewSetting(_defineProperty({}, this._getViewSettingsKey(), enabledColumns));
        }
    }, {
        key: "_isColumnCustomizable",
        value: function _isColumnCustomizable(column) {
            // filter out empty columns
            if (!column.dataIndex) {
                return {
                    customizable: false,
                    default: false
                };
            }

            var customizable = column.customizable == undefined ? true : column.customizable;

            // customizable can be bool or object
            var defaultVisibility = column.customizable == undefined || typeof column.customizable == "boolean" ? true : column.customizable.default;

            return {
                customizable: customizable,
                default: defaultVisibility
            };
        }
    }, {
        key: "isColumnChecked",
        value: function isColumnChecked(column) {
            if (typeof column == "string") {
                column = { dataIndex: column, customizable: true };
            }
            return this._getEnabledColumns()[column.dataIndex] == undefined ? this._isColumnCustomizable(column).default : this._getEnabledColumns()[column.dataIndex];
        }
    }, {
        key: "_renderEnabledColumnsSelector",
        value: function _renderEnabledColumnsSelector() {
            var _this4 = this;

            var header = this.props.header;


            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                { className: "customizable-column--selector" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2__["Select"],
                    {
                        defaultValue: this.state.columnSelector,
                        value: this.state.columnSelector,
                        onChange: this._columnSelectorChange,
                        dropdownClassName: "customizable-column--selector--dropdown",
                        onDropdownVisibleChange: function onDropdownVisibleChange(open) {
                            _this4.setState({
                                isDropDownOpen: open
                            });
                        }
                    },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                        Option,
                        {
                            className: "customizable-column--selector--option",
                            value: "default"
                        },
                        !this.state.isDropDownOpen && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2__["Icon"], { type: "setting" }),
                        this.state.isDropDownOpen && counterpart__WEBPACK_IMPORTED_MODULE_1___default.a.translate("customizable_table.customize_the_columns")
                    ),
                    this._getCustomizableColumns(header).map(function (item, key) {
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                            Option,
                            {
                                key: key,
                                className: "customizable-column--selector--option",
                                value: item.dataIndex,
                                disabled: true
                            },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                                bitshares_ui_style_guide__WEBPACK_IMPORTED_MODULE_2__["Checkbox"],
                                {
                                    checked: _this4.isColumnChecked(item),
                                    onChange: _this4._columnCheckboxChange.bind(_this4, item.dataIndex)
                                },
                                item.title
                            )
                        );
                    })
                )
            );
        }
    }, {
        key: "_columnSelectorChange",
        value: function _columnSelectorChange() {
            // Never let an option, other than default be selected
            this.setState({
                columnSelector: "default"
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _props = this.props,
                header = _props.header,
                other = _objectWithoutProperties(_props, ["header"]);

            // modify the header according to which columns the user would like to see


            header = this.modHeader(header);

            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                "div",
                null,
                this.props.allowCustomization && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(
                    "div",
                    { style: { position: "relative" } },
                    this._renderEnabledColumnsSelector()
                ),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_PaginatedList__WEBPACK_IMPORTED_MODULE_4__["default"], _extends({}, other, { header: header })),
                this.props.children
            );
        }
    }]);

    return CustomTable;
}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);

CustomTable.propTypes = {
    viewSettingsKey: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.string,
    viewSettings: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.object,
    allowCustomization: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.bool
};
CustomTable.defaultProps = {
    viewSettingsKey: null,
    viewSettings: null,
    allowCustomization: false
};


/* harmony default export */ __webpack_exports__["default"] = (CustomTable = Object(alt_react__WEBPACK_IMPORTED_MODULE_6__["connect"])(CustomTable, {
    listenTo: function listenTo() {
        return [_stores_SettingsStore__WEBPACK_IMPORTED_MODULE_7__["default"]];
    },
    getProps: function getProps(nextProps) {
        if (!nextProps.viewSettings) {
            return {
                viewSettings: _stores_SettingsStore__WEBPACK_IMPORTED_MODULE_7__["default"].getState().viewSettings
            };
        } else {
            return {};
        }
    }
}));

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3VudC4yOTNhZjk3NzliNzYwY2UzZjU0OC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRQYWdlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50QXNzZXRzLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvTW9kYWwvSXNzdWVNb2RhbC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudEFzc2V0Q3JlYXRlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50QXNzZXRVcGRhdGUuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9VdGlsaXR5L0Zvcm1hdHRlZEZlZS5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQXNzZXRXaGl0ZWxpc3QuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0Fzc2V0RmVlZFByb2R1Y2Vycy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudE1lbWJlcnNoaXAuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L1N0YXRpc3RpY3MuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRSZWZlcnJhbHNUYWJsZS5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudFZlc3RpbmcuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRQZXJtaXNzaW9ucy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudFBlcm1pc3Npb25zTGlzdC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL1ByaXZhdGVLZXlWaWV3LmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvTW9kYWwvUXJjb2RlTW9kYWwuanN4Iiwid2VicGFjazovLy8uL2FwcC9hc3NldHMvcXIucG5nIiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRQZXJtaXNzaW9uc01pZ3JhdGUuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9Gb3Jtcy9QYXNzd29yZElucHV0LmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvRm9ybXMvUHViS2V5SW5wdXQuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRTaWduZWRNZXNzYWdlcy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9hY3Rpb25zL1NpZ25lZE1lc3NhZ2VBY3Rpb24uanMiLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvU2lnbmVkTWVzc2FnZS5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudFdoaXRlbGlzdC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvQWNjb3VudFZvdGluZy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvVm90aW5nL1dpdG5lc3Nlcy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvVm90aW5nQWNjb3VudHNMaXN0LmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvTW9kYWwvSm9pbldpdG5lc3Nlc01vZGFsLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9Wb3RpbmcvQ29tbWl0dGVlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvTW9kYWwvSm9pbkNvbW1pdHRlZU1vZGFsLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9Wb3RpbmcvV29ya2Vycy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvV29ya2Vyc0xpc3QuanN4Iiwid2VicGFjazovLy9hcHAvbGliL2NvbW1vbi9oaWRlUHJvcG9zYWxzLmpzIiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRPdmVydmlldy5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL0FjY291bnQvTWFyZ2luUG9zaXRpb25zVGFibGUuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L01hcmdpblBvc2l0aW9uLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9Qcm9wb3NhbHMuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9Nb2RhbC9Qcm9wb3NhbE1vZGFsLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9OZXN0ZWRBcHByb3ZhbFN0YXRlLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2xpYi9jb21tb24vcGVybWlzc2lvbl91dGlscy5qcyIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9OZXN0ZWRBcHByb3ZhbFN0YXRlTGliLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50T3JkZXJzLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50T3JkZXJSb3dEZXNjcmlwdGlvbi5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL1V0aWxpdHkvQ29sbGFwc2libGVUYWJsZS5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL1V0aWxpdHkvTWFya2V0UHJpY2UuanN4Iiwid2VicGFjazovLy9hcHAvbGliL2NvbW1vbi9hY2NvdW50SGVscGVyLmpzIiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9BY2NvdW50L0FjY291bnRUcmVlbWFwLmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvQWNjb3VudC9BY2NvdW50UG9ydGZvbGlvTGlzdC5qc3giLCJ3ZWJwYWNrOi8vL2FwcC9jb21wb25lbnRzL1V0aWxpdHkvTWFya2V0Q2hhbmdlQ29tcG9uZW50LmpzeCIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvVXRpbGl0eS9FcXVpdmFsZW50UHJpY2UuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9JY29uL1B1bHNlSWNvbi5qcyIsIndlYnBhY2s6Ly8vYXBwL2NvbXBvbmVudHMvTW9kYWwvUmVzZXJ2ZUFzc2V0TW9kYWwuanN4Iiwid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9VdGlsaXR5L0N1c3RvbVRhYmxlLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBBY2NvdW50QWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9BY2NvdW50QWN0aW9uc1wiO1xyXG5pbXBvcnQgQWNjb3VudFN0b3JlIGZyb20gXCJzdG9yZXMvQWNjb3VudFN0b3JlXCI7XHJcbmltcG9ydCBTZXR0aW5nc1N0b3JlIGZyb20gXCJzdG9yZXMvU2V0dGluZ3NTdG9yZVwiO1xyXG5pbXBvcnQgV2FsbGV0VW5sb2NrU3RvcmUgZnJvbSBcInN0b3Jlcy9XYWxsZXRVbmxvY2tTdG9yZVwiO1xyXG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcclxuaW1wb3J0IHtjb25uZWN0fSBmcm9tIFwiYWx0LXJlYWN0XCI7XHJcbmltcG9ydCBhY2NvdW50VXRpbHMgZnJvbSBcImNvbW1vbi9hY2NvdW50X3V0aWxzXCI7XHJcbmltcG9ydCB7TGlzdCwgU2V0fSBmcm9tIFwiaW1tdXRhYmxlXCI7XHJcbmltcG9ydCBQYWdlNDA0IGZyb20gXCIuLi9QYWdlNDA0L1BhZ2U0MDRcIjtcclxuaW1wb3J0IHtSb3V0ZSwgU3dpdGNoLCBSZWRpcmVjdH0gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcclxuXHJcbi8qIE5lc3RlZCByb3V0ZXMgKi9cclxuaW1wb3J0IEFjY291bnRBc3NldHMgZnJvbSBcIi4vQWNjb3VudEFzc2V0c1wiO1xyXG5pbXBvcnQge0FjY291bnRBc3NldENyZWF0ZX0gZnJvbSBcIi4vQWNjb3VudEFzc2V0Q3JlYXRlXCI7XHJcbmltcG9ydCBBY2NvdW50QXNzZXRVcGRhdGUgZnJvbSBcIi4vQWNjb3VudEFzc2V0VXBkYXRlXCI7XHJcbmltcG9ydCBBY2NvdW50TWVtYmVyc2hpcCBmcm9tIFwiLi9BY2NvdW50TWVtYmVyc2hpcFwiO1xyXG5pbXBvcnQgQWNjb3VudFZlc3RpbmcgZnJvbSBcIi4vQWNjb3VudFZlc3RpbmdcIjtcclxuaW1wb3J0IEFjY291bnRQZXJtaXNzaW9ucyBmcm9tIFwiLi9BY2NvdW50UGVybWlzc2lvbnNcIjtcclxuaW1wb3J0IEFjY291bnRTaWduZWRNZXNzYWdlcyBmcm9tIFwiLi9BY2NvdW50U2lnbmVkTWVzc2FnZXNcIjtcclxuaW1wb3J0IEFjY291bnRXaGl0ZWxpc3QgZnJvbSBcIi4vQWNjb3VudFdoaXRlbGlzdFwiO1xyXG5pbXBvcnQgQWNjb3VudFZvdGluZyBmcm9tIFwiLi9BY2NvdW50Vm90aW5nXCI7XHJcbmltcG9ydCBBY2NvdW50T3ZlcnZpZXcgZnJvbSBcIi4vQWNjb3VudE92ZXJ2aWV3XCI7XHJcblxyXG5jbGFzcyBBY2NvdW50UGFnZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFjY291bnQ6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWNjb3VudCkge1xyXG4gICAgICAgICAgICBBY2NvdW50QWN0aW9ucy5zZXRDdXJyZW50QWNjb3VudC5kZWZlcihcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIC8vIEZldGNoIHBvc3NpYmxlIGZlZSBhc3NldHMgaGVyZSB0byBhdm9pZCBhc3luYyBpc3N1ZXMgbGF0ZXIgKHdpbGwgcmVzb2x2ZSBhc3NldHMpXHJcbiAgICAgICAgICAgIGFjY291bnRVdGlscy5nZXRQb3NzaWJsZUZlZXModGhpcy5wcm9wcy5hY2NvdW50LCBcInRyYW5zZmVyXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5wKSB7XHJcbiAgICAgICAgaWYgKG5wLmFjY291bnQpIHtcclxuICAgICAgICAgICAgY29uc3QgbnBOYW1lID0gbnAuYWNjb3VudC5nZXQoXCJuYW1lXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TmFtZSA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnQgJiYgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcIm5hbWVcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMucHJvcHMuYWNjb3VudCB8fCBucE5hbWUgIT09IGN1cnJlbnROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGN1cnJlbnQgYWNjb3VudCBpbiBvcmRlciB0byBhY2Nlc3MgdGhlIGhlYWRlciByaWdodCBtZW51IG9wdGlvbnNcclxuICAgICAgICAgICAgICAgIEFjY291bnRBY3Rpb25zLnNldEN1cnJlbnRBY2NvdW50LmRlZmVyKG5wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBGZXRjaCBwb3NzaWJsZSBmZWUgYXNzZXRzIGhlcmUgdG8gYXZvaWQgYXN5bmMgaXNzdWVzIGxhdGVyICh3aWxsIHJlc29sdmUgYXNzZXRzKVxyXG4gICAgICAgICAgICAgICAgYWNjb3VudFV0aWxzLmdldFBvc3NpYmxlRmVlcyhucC5hY2NvdW50LCBcInRyYW5zZmVyXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcclxuICAgICAgICBjb25zdCB7Y3VycmVudEFjY291bnQsIGhpc3RvcnksIGxvY2F0aW9ufSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgaWYgKHByZXZQcm9wcy5jdXJyZW50QWNjb3VudCAhPT0gY3VycmVudEFjY291bnQgJiYgY3VycmVudEFjY291bnQpIHtcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRQYXRoID0gbG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoXCIvXCIpO1xyXG4gICAgICAgICAgICBjdXJyZW50UGF0aFsyXSA9IGN1cnJlbnRBY2NvdW50O1xyXG4gICAgICAgICAgICBoaXN0b3J5LnB1c2goY3VycmVudFBhdGguam9pbihcIi9cIikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgbXlBY3RpdmVBY2NvdW50cyxcclxuICAgICAgICAgICAgc2VhcmNoQWNjb3VudHMsXHJcbiAgICAgICAgICAgIHNldHRpbmdzLFxyXG4gICAgICAgICAgICB3YWxsZXRfbG9ja2VkLFxyXG4gICAgICAgICAgICBhY2NvdW50LFxyXG4gICAgICAgICAgICBoaWRkZW5Bc3NldHNcclxuICAgICAgICB9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiA8UGFnZTQwNCAvPjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGFjY291bnRfbmFtZSA9IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpO1xyXG4gICAgICAgIGxldCBpc015QWNjb3VudCA9IEFjY291bnRTdG9yZS5pc015QWNjb3VudChhY2NvdW50KTtcclxuXHJcbiAgICAgICAgbGV0IHBhc3NPblByb3BzID0ge1xyXG4gICAgICAgICAgICBhY2NvdW50X25hbWUsXHJcbiAgICAgICAgICAgIG15QWN0aXZlQWNjb3VudHMsXHJcbiAgICAgICAgICAgIHNlYXJjaEFjY291bnRzLFxyXG4gICAgICAgICAgICBzZXR0aW5ncyxcclxuICAgICAgICAgICAgd2FsbGV0X2xvY2tlZCxcclxuICAgICAgICAgICAgYWNjb3VudCxcclxuICAgICAgICAgICAgaXNNeUFjY291bnQsXHJcbiAgICAgICAgICAgIGhpZGRlbkFzc2V0cyxcclxuICAgICAgICAgICAgY29udGFpbmVkOiB0cnVlLFxyXG4gICAgICAgICAgICBiYWxhbmNlczogYWNjb3VudC5nZXQoXCJiYWxhbmNlc1wiLCBMaXN0KCkpLnRvTGlzdCgpLFxyXG4gICAgICAgICAgICBvcmRlcnM6IGFjY291bnQuZ2V0KFwib3JkZXJzXCIsIExpc3QoKSkudG9MaXN0KCksXHJcbiAgICAgICAgICAgIHZpZXdTZXR0aW5nczogdGhpcy5wcm9wcy52aWV3U2V0dGluZ3MsXHJcbiAgICAgICAgICAgIHByb3h5OiBhY2NvdW50LmdldEluKFtcIm9wdGlvbnNcIiwgXCJ2b3RpbmdfYWNjb3VudFwiXSksXHJcbiAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMucHJvcHMuaGlzdG9yeVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxTd2l0Y2g+XHJcbiAgICAgICAgICAgICAgICA8Um91dGVcclxuICAgICAgICAgICAgICAgICAgICBwYXRoPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9YH1cclxuICAgICAgICAgICAgICAgICAgICBleGFjdFxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gPEFjY291bnRPdmVydmlldyB7Li4ucGFzc09uUHJvcHN9IC8+fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxSZWRpcmVjdFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb209e2AvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vb3ZlcnZpZXdgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRvPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9YH1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8Um91dGVcclxuICAgICAgICAgICAgICAgICAgICBwYXRoPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9L2Fzc2V0c2B9XHJcbiAgICAgICAgICAgICAgICAgICAgZXhhY3RcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXI9eygpID0+IDxBY2NvdW50QXNzZXRzIHsuLi5wYXNzT25Qcm9wc30gLz59XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPFJvdXRlXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS9jcmVhdGUtYXNzZXRgfVxyXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0XHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoKSA9PiA8QWNjb3VudEFzc2V0Q3JlYXRlIHsuLi5wYXNzT25Qcm9wc30gLz59XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPFJvdXRlXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS91cGRhdGUtYXNzZXQvOmFzc2V0YH1cclxuICAgICAgICAgICAgICAgICAgICBleGFjdFxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gPEFjY291bnRBc3NldFVwZGF0ZSB7Li4ucGFzc09uUHJvcHN9IC8+fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxSb3V0ZVxyXG4gICAgICAgICAgICAgICAgICAgIHBhdGg9e2AvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vbWVtYmVyLXN0YXRzYH1cclxuICAgICAgICAgICAgICAgICAgICBleGFjdFxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gPEFjY291bnRNZW1iZXJzaGlwIHsuLi5wYXNzT25Qcm9wc30gLz59XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPFJvdXRlXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS92ZXN0aW5nYH1cclxuICAgICAgICAgICAgICAgICAgICBleGFjdFxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gPEFjY291bnRWZXN0aW5nIHsuLi5wYXNzT25Qcm9wc30gLz59XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPFJvdXRlXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aD17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS9wZXJtaXNzaW9uc2B9XHJcbiAgICAgICAgICAgICAgICAgICAgZXhhY3RcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXI9eygpID0+IDxBY2NvdW50UGVybWlzc2lvbnMgey4uLnBhc3NPblByb3BzfSAvPn1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8Um91dGVcclxuICAgICAgICAgICAgICAgICAgICBwYXRoPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9L3ZvdGluZy86dGFiYH1cclxuICAgICAgICAgICAgICAgICAgICByZW5kZXI9eygpID0+IDxBY2NvdW50Vm90aW5nIHsuLi5wYXNzT25Qcm9wc30gLz59XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPFJlZGlyZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbT17YC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS92b3RpbmdgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRvPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9L3ZvdGluZy93aXRuZXNzZXNgfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxSb3V0ZVxyXG4gICAgICAgICAgICAgICAgICAgIHBhdGg9e2AvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vd2hpdGVsaXN0YH1cclxuICAgICAgICAgICAgICAgICAgICBleGFjdFxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gPEFjY291bnRXaGl0ZWxpc3Qgey4uLnBhc3NPblByb3BzfSAvPn1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8Um91dGVcclxuICAgICAgICAgICAgICAgICAgICBwYXRoPXtgL2FjY291bnQvJHthY2NvdW50X25hbWV9L3NpZ25lZG1lc3NhZ2VzYH1cclxuICAgICAgICAgICAgICAgICAgICBleGFjdFxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KCkgPT4gPEFjY291bnRTaWduZWRNZXNzYWdlcyB7Li4ucGFzc09uUHJvcHN9IC8+fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9Td2l0Y2g+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5BY2NvdW50UGFnZSA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudFBhZ2UsIHtcclxuICAgIHNob3dfbG9hZGVyOiB0cnVlXHJcbn0pO1xyXG5cclxuY2xhc3MgQWNjb3VudFBhZ2VTdG9yZVdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBhY2NvdW50X25hbWUgPSB0aGlzLnByb3BzLm1hdGNoLnBhcmFtcy5hY2NvdW50X25hbWU7XHJcbiAgICAgICAgcmV0dXJuIDxBY2NvdW50UGFnZSB7Li4udGhpcy5wcm9wc30gYWNjb3VudD17YWNjb3VudF9uYW1lfSAvPjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcclxuICAgIEFjY291bnRQYWdlU3RvcmVXcmFwcGVyLFxyXG4gICAge1xyXG4gICAgICAgIGxpc3RlblRvKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW0FjY291bnRTdG9yZSwgU2V0dGluZ3NTdG9yZSwgV2FsbGV0VW5sb2NrU3RvcmVdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0UHJvcHMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBteUFjdGl2ZUFjY291bnRzOiBBY2NvdW50U3RvcmUuZ2V0U3RhdGUoKS5teUFjdGl2ZUFjY291bnRzLFxyXG4gICAgICAgICAgICAgICAgc2VhcmNoQWNjb3VudHM6IEFjY291bnRTdG9yZS5nZXRTdGF0ZSgpLnNlYXJjaEFjY291bnRzLFxyXG4gICAgICAgICAgICAgICAgY3VycmVudEFjY291bnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgQWNjb3VudFN0b3JlLmdldFN0YXRlKCkuY3VycmVudEFjY291bnQgfHxcclxuICAgICAgICAgICAgICAgICAgICBBY2NvdW50U3RvcmUuZ2V0U3RhdGUoKS5wYXNzd29yZEFjY291bnQsXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nczogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnNldHRpbmdzLFxyXG4gICAgICAgICAgICAgICAgaGlkZGVuQXNzZXRzOiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkuaGlkZGVuQXNzZXRzLFxyXG4gICAgICAgICAgICAgICAgd2FsbGV0X2xvY2tlZDogV2FsbGV0VW5sb2NrU3RvcmUuZ2V0U3RhdGUoKS5sb2NrZWQsXHJcbiAgICAgICAgICAgICAgICB2aWV3U2V0dGluZ3M6IFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKS52aWV3U2V0dGluZ3NcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbik7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5pbXBvcnQge0xpbmt9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IEFzc2V0QWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9Bc3NldEFjdGlvbnNcIjtcclxuaW1wb3J0IEFzc2V0U3RvcmUgZnJvbSBcInN0b3Jlcy9Bc3NldFN0b3JlXCI7XHJcbmltcG9ydCBBY2NvdW50QWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9BY2NvdW50QWN0aW9uc1wiO1xyXG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcclxuaW1wb3J0IHtkZWJvdW5jZX0gZnJvbSBcImxvZGFzaC1lc1wiO1xyXG5pbXBvcnQgTG9hZGluZ0luZGljYXRvciBmcm9tIFwiLi4vTG9hZGluZ0luZGljYXRvclwiO1xyXG5pbXBvcnQgSXNzdWVNb2RhbCBmcm9tIFwiLi4vTW9kYWwvSXNzdWVNb2RhbFwiO1xyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gXCJhbHQtcmVhY3RcIjtcclxuaW1wb3J0IGFzc2V0VXRpbHMgZnJvbSBcImNvbW1vbi9hc3NldF91dGlsc1wiO1xyXG5pbXBvcnQge01hcCwgTGlzdH0gZnJvbSBcImltbXV0YWJsZVwiO1xyXG5pbXBvcnQgQXNzZXRXcmFwcGVyIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0V3JhcHBlclwiO1xyXG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xyXG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XHJcblxyXG5jbGFzcyBBY2NvdW50QXNzZXRzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgc3ltYm9sOiBcIlwiLFxyXG4gICAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IFwiXCIsXHJcbiAgICAgICAgbWF4X3N1cHBseTogMCxcclxuICAgICAgICBwcmVjaXNpb246IDBcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBzeW1ib2w6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgaXNJc3N1ZUFzc2V0TW9kYWxWaXNpYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgY3JlYXRlOiB7XHJcbiAgICAgICAgICAgICAgICBzeW1ib2w6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBtYXhfc3VwcGx5OiAxMDAwMDAwMDAwMDAwMDAwLFxyXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiA0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlzc3VlOiB7XHJcbiAgICAgICAgICAgICAgICBhbW91bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICB0bzogXCJcIixcclxuICAgICAgICAgICAgICAgIHRvX2lkOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBzeW1ib2w6IFwiXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3JzOiB7XHJcbiAgICAgICAgICAgICAgICBzeW1ib2w6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNWYWxpZDogZmFsc2UsXHJcbiAgICAgICAgICAgIHNlYXJjaFRlcm06IFwiXCJcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl9zZWFyY2hBY2NvdW50cyA9IGRlYm91bmNlKHRoaXMuX3NlYXJjaEFjY291bnRzLCAxNTApO1xyXG5cclxuICAgICAgICB0aGlzLnNob3dJc3N1ZUFzc2V0TW9kYWwgPSB0aGlzLnNob3dJc3N1ZUFzc2V0TW9kYWwuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmhpZGVJc3N1ZUFzc2V0TW9kYWwgPSB0aGlzLmhpZGVJc3N1ZUFzc2V0TW9kYWwuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93SXNzdWVBc3NldE1vZGFsKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc0lzc3VlQXNzZXRNb2RhbFZpc2libGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlSXNzdWVBc3NldE1vZGFsKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc0lzc3VlQXNzZXRNb2RhbFZpc2libGU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrQXNzZXRzKGFzc2V0cywgZm9yY2UpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY2NvdW50LmdldChcImFzc2V0c1wiKS5zaXplKSByZXR1cm47XHJcbiAgICAgICAgbGV0IGxhc3RBc3NldCA9IGFzc2V0c1xyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEuc3ltYm9sID4gYi5zeW1ib2wpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYS5zeW1ib2wgPCBiLnN5bWJvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5sYXN0KCk7XHJcblxyXG4gICAgICAgIGlmIChhc3NldHMuc2l6ZSA9PT0gMCB8fCBmb3JjZSkge1xyXG4gICAgICAgICAgICBBc3NldEFjdGlvbnMuZ2V0QXNzZXRMaXN0LmRlZmVyKFwiQVwiLCAxMDApO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHthc3NldHNGZXRjaGVkOiAxMDB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGFzc2V0cy5zaXplID49IHRoaXMuc3RhdGUuYXNzZXRzRmV0Y2hlZCkge1xyXG4gICAgICAgICAgICBBc3NldEFjdGlvbnMuZ2V0QXNzZXRMaXN0LmRlZmVyKGxhc3RBc3NldC5zeW1ib2wsIDEwMCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2Fzc2V0c0ZldGNoZWQ6IHRoaXMuc3RhdGUuYXNzZXRzRmV0Y2hlZCArIDk5fSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tBc3NldHMobmV4dFByb3BzLmFzc2V0cyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrQXNzZXRzKHRoaXMucHJvcHMuYXNzZXRzLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Jc3N1ZUlucHV0KHZhbHVlLCBlKSB7XHJcbiAgICAgICAgbGV0IGtleSA9IGUudGFyZ2V0LmlkO1xyXG4gICAgICAgIGxldCB7aXNzdWV9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgaWYgKGtleSA9PT0gXCJ0b1wiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaEFjY291bnRzKGUudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICAgICAgaXNzdWUudG8gPSBlLnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgbGV0IGFjY291bnQgPSB0aGlzLnByb3BzLnNlYXJjaEFjY291bnRzLmZpbmRFbnRyeShuYW1lID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuYW1lID09PSBlLnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpc3N1ZS50b19pZCA9IGFjY291bnQgPyBhY2NvdW50WzBdIDogbnVsbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpc3N1ZVt2YWx1ZV0gPSBlLnRhcmdldC52YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzc3VlOiBpc3N1ZX0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZWFyY2hBY2NvdW50cyhzZWFyY2hUZXJtKSB7XHJcbiAgICAgICAgQWNjb3VudEFjdGlvbnMuYWNjb3VudFNlYXJjaChzZWFyY2hUZXJtKTtcclxuICAgIH1cclxuXHJcbiAgICBfaXNzdWVCdXR0b25DbGljayhhc3NldF9pZCwgc3ltYm9sLCBlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGxldCB7aXNzdWV9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBpc3N1ZS5hc3NldF9pZCA9IGFzc2V0X2lkO1xyXG4gICAgICAgIGlzc3VlLnN5bWJvbCA9IHN5bWJvbDtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc3N1ZTogaXNzdWV9KTtcclxuICAgICAgICB0aGlzLnNob3dJc3N1ZUFzc2V0TW9kYWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBfZWRpdEJ1dHRvbkNsaWNrKHN5bWJvbCwgYWNjb3VudF9uYW1lLCBlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMucHJvcHMuaGlzdG9yeS5wdXNoKFxyXG4gICAgICAgICAgICBgL2FjY291bnQvJHthY2NvdW50X25hbWV9L3VwZGF0ZS1hc3NldC8ke3N5bWJvbH1gXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQnV0dG9uQ2xpY2soYWNjb3VudF9uYW1lKSB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goYC9hY2NvdW50LyR7YWNjb3VudF9uYW1lfS9jcmVhdGUtYXNzZXRgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHthY2NvdW50LCBhY2NvdW50X25hbWUsIGFzc2V0cywgYXNzZXRzTGlzdH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBsZXQgYWNjb3VudEV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiA8TG9hZGluZ0luZGljYXRvciB0eXBlPVwiY2lyY2xlXCIgLz47XHJcbiAgICAgICAgfSBlbHNlIGlmIChhY2NvdW50Lm5vdEZvdW5kKSB7XHJcbiAgICAgICAgICAgIGFjY291bnRFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFhY2NvdW50RXhpc3RzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImg1XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LmVycm9ycy5ub3RfZm91bmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17YWNjb3VudF9uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvaDU+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhc3NldHNMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBhc3NldHMgPSBhc3NldHMuY2xlYXIoKTtcclxuICAgICAgICAgICAgYXNzZXRzTGlzdC5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEpIGFzc2V0cyA9IGFzc2V0cy5zZXQoYS5nZXQoXCJpZFwiKSwgYS50b0pTKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG15QXNzZXRzID0gYXNzZXRzXHJcbiAgICAgICAgICAgIC5maWx0ZXIoYXNzZXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFzc2V0Lmlzc3VlciA9PT0gYWNjb3VudC5nZXQoXCJpZFwiKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoYS5pZC5zdWJzdHJpbmcoNCwgYS5pZC5sZW5ndGgpLCAxMCkgLVxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGIuaWQuc3Vic3RyaW5nKDQsIGIuaWQubGVuZ3RoKSwgMTApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAubWFwKGFzc2V0ID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IGFzc2V0VXRpbHMucGFyc2VEZXNjcmlwdGlvbihcclxuICAgICAgICAgICAgICAgICAgICBhc3NldC5vcHRpb25zLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRlc2MgPSBkZXNjcmlwdGlvbi5zaG9ydF9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgPyBkZXNjcmlwdGlvbi5zaG9ydF9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgOiBkZXNjcmlwdGlvbi5tYWluO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkZXNjLmxlbmd0aCA+IDEwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc2MgPSBkZXNjLnN1YnN0cigwLCAxMDApICsgXCIuLi5cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkeW5hbWljT2JqZWN0ID0gdGhpcy5wcm9wcy5nZXREeW5hbWljT2JqZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0LmR5bmFtaWNfYXNzZXRfZGF0YV9pZFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2Fzc2V0LnN5bWJvbH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL2Fzc2V0LyR7YXNzZXQuc3ltYm9sfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthc3NldC5zeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e3RleHRBbGlnbjogXCJsZWZ0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcImJpdGFzc2V0XCIgaW4gYXNzZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuYml0YXNzZXQuaXNfcHJlZGljdGlvbl9tYXJrZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnBtXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tcGFcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJVc2VyIElzc3VlZCBBc3NldFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2R5bmFtaWNPYmplY3QgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtwYXJzZUludChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR5bmFtaWNPYmplY3QuZ2V0KFwiY3VycmVudF9zdXBwbHlcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17YXNzZXQuaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17cGFyc2VJbnQoYXNzZXQub3B0aW9ucy5tYXhfc3VwcGx5LCAxMCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2Fzc2V0LmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFhc3NldC5iaXRhc3NldF9kYXRhX2lkID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX2lzc3VlQnV0dG9uQ2xpY2suYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LnN5bWJvbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJjcm9zcy1jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm90YXRlNDVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9lZGl0QnV0dG9uQ2xpY2suYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuc3ltYm9sLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJkYXNoYm9hcmRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudG9BcnJheSgpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBhcHAtdGFibGVzIG5vLXBhZGRpbmdcIiByZWY9XCJhcHBUYWJsZXNcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBzbWFsbC0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1jb250YWluZXIgZ2VuZXJpYy1ib3JkZXJlZC1ib3hcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwiaXNzdWVkQXNzZXRzVGFiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFjY291bnQtdGFic1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2xhc3M9XCJhY2NvdW50LW92ZXJ2aWV3IGJvcmRlcmVkLWhlYWRlciBjb250ZW50LWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cInBhZGRpbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuaXNzdWVkX2Fzc2V0c1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUgZGFzaGJvYXJkLXRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5zeW1ib2xcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t0ZXh0QWxpZ246IFwibGVmdFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5hc3NldC5zdW1tYXJ5LmFzc2V0X3R5cGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJ0aFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwibWFya2V0cy5zdXBwbHlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t0ZXh0QWxpZ246IFwicmlnaHRcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1heF9zdXBwbHlcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ0cmFuc2FjdGlvbi50cnhUeXBlcy5hc3NldF9pc3N1ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFwiY2VudGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInRyYW5zYWN0aW9uLnRyeFR5cGVzLmFzc2V0X3VwZGF0ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+e215QXNzZXRzfTwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fY3JlYXRlQnV0dG9uQ2xpY2suYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNhY3Rpb24udHJ4VHlwZXMuYXNzZXRfY3JlYXRlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8SXNzdWVNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLmlzSXNzdWVBc3NldE1vZGFsVmlzaWJsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsPXt0aGlzLmhpZGVJc3N1ZUFzc2V0TW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dNb2RhbD17dGhpcy5zaG93SXNzdWVBc3NldE1vZGFsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldF90b19pc3N1ZT17dGhpcy5zdGF0ZS5pc3N1ZS5hc3NldF9pZH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkFjY291bnRBc3NldHMgPSBBc3NldFdyYXBwZXIoQWNjb3VudEFzc2V0cywge1xyXG4gICAgcHJvcE5hbWVzOiBbXCJhc3NldHNMaXN0XCJdLFxyXG4gICAgYXNMaXN0OiB0cnVlLFxyXG4gICAgd2l0aER5bmFtaWM6IHRydWVcclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KFxyXG4gICAgQWNjb3VudEFzc2V0cyxcclxuICAgIHtcclxuICAgICAgICBsaXN0ZW5UbygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtBc3NldFN0b3JlXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldFByb3BzKHByb3BzKSB7XHJcbiAgICAgICAgICAgIGxldCBhc3NldHMgPSBNYXAoKSxcclxuICAgICAgICAgICAgICAgIGFzc2V0c0xpc3QgPSBMaXN0KCk7XHJcbiAgICAgICAgICAgIGlmIChwcm9wcy5hY2NvdW50LmdldChcImFzc2V0c1wiLCBbXSkuc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgcHJvcHMuYWNjb3VudC5nZXQoXCJhc3NldHNcIiwgW10pLmZvckVhY2goaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0c0xpc3QgPSBhc3NldHNMaXN0LnB1c2goaWQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhc3NldHMgPSBBc3NldFN0b3JlLmdldFN0YXRlKCkuYXNzZXRzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7YXNzZXRzLCBhc3NldHNMaXN0fTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbik7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgQXBwbGljYXRpb25BcGkgZnJvbSBcImFwaS9BcHBsaWNhdGlvbkFwaVwiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuLi9BY2NvdW50L0FjY291bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgQW1vdW50U2VsZWN0b3IgZnJvbSBcIi4uL1V0aWxpdHkvQW1vdW50U2VsZWN0b3JcIjtcclxuaW1wb3J0IHtOb3RpZmljYXRpb24sIE1vZGFsLCBCdXR0b259IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcclxuXHJcbmNsYXNzIElzc3VlTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBhc3NldF90b19pc3N1ZTogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgYW1vdW50OiBwcm9wcy5hbW91bnQsXHJcbiAgICAgICAgICAgIHRvOiBwcm9wcy50byxcclxuICAgICAgICAgICAgdG9faWQ6IG51bGwsXHJcbiAgICAgICAgICAgIG1lbW86IFwiXCJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIG9uQW1vdW50Q2hhbmdlZCh7YW1vdW50fSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2Ftb3VudDogYW1vdW50fSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Ub0FjY291bnRDaGFuZ2VkKHRvKSB7XHJcbiAgICAgICAgbGV0IHN0YXRlID0gdG9cclxuICAgICAgICAgICAgPyB7dG86IHRvLmdldChcIm5hbWVcIiksIHRvX2lkOiB0by5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgOiB7dG9faWQ6IG51bGx9O1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVG9DaGFuZ2VkKHRvKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dG86IHRvLCB0b19pZDogbnVsbH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU3VibWl0KCkge1xyXG4gICAgICAgIHRoaXMucHJvcHMuaGlkZU1vZGFsKCk7XHJcbiAgICAgICAgbGV0IHthc3NldF90b19pc3N1ZX0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCBwcmVjaXNpb24gPSB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKFxyXG4gICAgICAgICAgICBhc3NldF90b19pc3N1ZS5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBhbW91bnQgPSB0aGlzLnN0YXRlLmFtb3VudC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgXCJcIik7XHJcbiAgICAgICAgYW1vdW50ICo9IHByZWNpc2lvbjtcclxuXHJcbiAgICAgICAgQXBwbGljYXRpb25BcGkuaXNzdWVfYXNzZXQoXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudG9faWQsXHJcbiAgICAgICAgICAgIGFzc2V0X3RvX2lzc3VlLmdldChcImlzc3VlclwiKSxcclxuICAgICAgICAgICAgYXNzZXRfdG9faXNzdWUuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgIGFtb3VudCxcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5tZW1vXHJcbiAgICAgICAgICAgICAgICA/IG5ldyBCdWZmZXIodGhpcy5zdGF0ZS5tZW1vLCBcInV0Zi04XCIpXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuc3RhdGUubWVtb1xyXG4gICAgICAgICkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJpc3N1ZSBlcnJvciBjYXVnaHQgaGVyZTpcIiwgZXJyKTtcclxuICAgICAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICBcIm5vdGlmaWNhdGlvbnMuYXNzZXRfaXNzdWVfZmFpbHVyZVwiXHJcbiAgICAgICAgICAgICAgICApIC8vOiAke3RoaXMuc3RhdGUud2FsbGV0X3B1YmxpY19uYW1lfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGFtb3VudDogMCxcclxuICAgICAgICAgICAgdG86IFwiXCIsXHJcbiAgICAgICAgICAgIHRvX2lkOiBudWxsLFxyXG4gICAgICAgICAgICBtZW1vOiBcIlwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25NZW1vQ2hhbmdlZChlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bWVtbzogZS50YXJnZXQudmFsdWV9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IGFzc2V0X3RvX2lzc3VlID0gdGhpcy5wcm9wcy5hc3NldF90b19pc3N1ZS5nZXQoXCJpZFwiKTtcclxuICAgICAgICBsZXQgdGFiSW5kZXggPSAxO1xyXG5cclxuICAgICAgICBsZXQgZm9vdGVyID0gW1xyXG4gICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgICBrZXk9XCJzdWJtaXRcIlxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vblN1Ym1pdC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS50byxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmFtb3VudFxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXshdGhpcy5zdGF0ZS50b19pZCB8fCAhdGhpcy5zdGF0ZS5hbW91bnR9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJtb2RhbC5pc3N1ZS5zdWJtaXRcIil9XHJcbiAgICAgICAgICAgIDwvQnV0dG9uPixcclxuICAgICAgICAgICAgPEJ1dHRvbiBrZXk9XCJjYW5jZWxcIiBvbkNsaWNrPXt0aGlzLnByb3BzLmhpZGVNb2RhbH0+XHJcbiAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwiY2FuY2VsXCIpfVxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8TW9kYWxcclxuICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJtb2RhbC5pc3N1ZS5zdWJtaXRcIil9XHJcbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnByb3BzLnZpc2libGV9XHJcbiAgICAgICAgICAgICAgICBvbkNhbmNlbD17dGhpcy5wcm9wcy5oaWRlTW9kYWx9XHJcbiAgICAgICAgICAgICAgICBmb290ZXI9e2Zvb3Rlcn1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGZvcm0gY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbCBmdWxsLXdpZHRoLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGFpbmVyIFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogVCBPICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17XCJtb2RhbC5pc3N1ZS50b1wifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lPXt0aGlzLnN0YXRlLnRvfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjb3VudENoYW5nZWQ9e3RoaXMub25Ub0FjY291bnRDaGFuZ2VkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uVG9DaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5zdGF0ZS50b31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGFiSW5kZXgrK31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIEEgTSBPIFUgTiBUICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBbW91bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwibW9kYWwuaXNzdWUuYW1vdW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3RoaXMuc3RhdGUuYW1vdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQW1vdW50Q2hhbmdlZC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldF90b19pc3N1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHM9e1thc3NldF90b19pc3N1ZV19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9e3RhYkluZGV4Kyt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiAgTSBFIE0gTyAgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwic3BhblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJ0cmFuc2Zlci5tZW1vXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNmZXIub3B0aW9uYWxcIiAvPilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPVwiM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubWVtb31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGFiSW5kZXgrK31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbk1lbW9DaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgPC9Nb2RhbD5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCaW5kVG9DaGFpblN0YXRlKElzc3VlTW9kYWwpO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcclxuaW1wb3J0IEFzc2V0QWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9Bc3NldEFjdGlvbnNcIjtcclxuaW1wb3J0IEhlbHBDb250ZW50IGZyb20gXCIuLi9VdGlsaXR5L0hlbHBDb250ZW50XCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZSwgQ2hhaW5WYWxpZGF0aW9ufSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IEZvcm1hdHRlZEFzc2V0IGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZEFzc2V0XCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCBBc3NldFNlbGVjdG9yIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0U2VsZWN0b3JcIjtcclxuaW1wb3J0IGJpZyBmcm9tIFwiYmlnbnVtYmVyLmpzXCI7XHJcbmltcG9ydCBjbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcclxuaW1wb3J0IGFzc2V0VXRpbHMgZnJvbSBcImNvbW1vbi9hc3NldF91dGlsc1wiO1xyXG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xyXG5pbXBvcnQgQW1vdW50U2VsZWN0b3IgZnJvbSBcIi4uL1V0aWxpdHkvQW1vdW50U2VsZWN0b3JcIjtcclxuaW1wb3J0IGFzc2V0Q29uc3RhbnRzIGZyb20gXCJjaGFpbi9hc3NldF9jb25zdGFudHNcIjtcclxuaW1wb3J0IHtlc3RpbWF0ZUZlZX0gZnJvbSBcImNvbW1vbi90cnhIZWxwZXJcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5pbXBvcnQge1N3aXRjaH0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5cclxubGV0IEdSQVBIRU5FX01BWF9TSEFSRV9TVVBQTFkgPSBuZXcgYmlnKFxyXG4gICAgYXNzZXRDb25zdGFudHMuR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWVxyXG4pO1xyXG5cclxuY2xhc3MgQml0QXNzZXRPcHRpb25zIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYmFja2luZ0Fzc2V0OiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZCxcclxuICAgICAgICBpc1VwZGF0ZTogUHJvcFR5cGVzLmJvb2xcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBpc1VwZGF0ZTogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgYmFja2luZ0Fzc2V0OiBwcm9wcy5iYWNraW5nQXNzZXQuZ2V0KFwic3ltYm9sXCIpLFxyXG4gICAgICAgICAgICBlcnJvcjogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgX29uSW5wdXRCYWNraW5nQXNzZXQoYXNzZXQpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5kaXNhYmxlQmFja2luZ0Fzc2V0Q2hhbmdlKVxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmRpc2FibGVkQmFja2luZ0Fzc2V0Q2hhbmdlQ2FsbGJhY2soKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgYmFja2luZ0Fzc2V0OiBhc3NldC50b1VwcGVyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IG51bGxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uRm91bmRCYWNraW5nQXNzZXQoYXNzZXQpIHtcclxuICAgICAgICBpZiAoYXNzZXQpIHtcclxuICAgICAgICAgICAgbGV0IGJhY2tpbmcgPVxyXG4gICAgICAgICAgICAgICAgYXNzZXQuZ2V0KFwiYml0YXNzZXRcIikgJiZcclxuICAgICAgICAgICAgICAgIENoYWluU3RvcmUuZ2V0QXNzZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQuZ2V0SW4oW1wiYml0YXNzZXRcIiwgXCJvcHRpb25zXCIsIFwic2hvcnRfYmFja2luZ19hc3NldFwiXSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGxldCBiYWNraW5nX2JhY2tpbmcgPVxyXG4gICAgICAgICAgICAgICAgYmFja2luZyAmJlxyXG4gICAgICAgICAgICAgICAgYmFja2luZy5nZXQoXCJiaXRhc3NldFwiKSAmJlxyXG4gICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRBc3NldChcclxuICAgICAgICAgICAgICAgICAgICBiYWNraW5nLmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG9ydF9iYWNraW5nX2Fzc2V0XCJcclxuICAgICAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKGJhY2tpbmdfYmFja2luZyAmJiBiYWNraW5nX2JhY2tpbmcgIT09IFwiMS4zLjBcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5lcnJvcl90b29fZGVlcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uVXBkYXRlKFwiaW52YWxpZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghYXNzZXQuZ2V0SW4oW1wiYml0YXNzZXRcIiwgXCJpc19wcmVkaWN0aW9uX21hcmtldFwiXSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmlzUHJlZGljdGlvbk1hcmtldCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcInByZWNpc2lvblwiKSAhPT1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGhpcy5wcm9wcy5hc3NldFByZWNpc2lvbiwgMTApXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZXJyb3JfcHJlY2lzaW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YXNzZXQ6IHRoaXMucHJvcHMuYXNzZXRTeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uVXBkYXRlKFwiaW52YWxpZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZShcInNob3J0X2JhY2tpbmdfYXNzZXRcIiwgYXNzZXQuZ2V0KFwiaWRcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25VcGRhdGUoXCJpbnZhbGlkXCIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZXJyb3JfaW52YWxpZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uVXBkYXRlKFwiaW52YWxpZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25VcGRhdGUoXCJpbnZhbGlkXCIsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtiaXRhc3NldF9vcHRzfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IHtlcnJvcn0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZlZWRfbGlmZXRpbWVfc2VjXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtiaXRhc3NldF9vcHRzLmZlZWRfbGlmZXRpbWVfc2VjIC8gNjB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uVXBkYXRlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmZWVkX2xpZmV0aW1lX3NlY1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcblxyXG4gICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1pbmltdW1fZmVlZHNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2JpdGFzc2V0X29wdHMubWluaW11bV9mZWVkc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMucHJvcHMub25VcGRhdGUuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1pbmltdW1fZmVlZHNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mb3JjZV9zZXR0bGVtZW50X2RlbGF5X3NlY1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Yml0YXNzZXRfb3B0cy5mb3JjZV9zZXR0bGVtZW50X2RlbGF5X3NlYyAvIDYwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vblVwZGF0ZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZm9yY2Vfc2V0dGxlbWVudF9kZWxheV9zZWNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mb3JjZV9zZXR0bGVtZW50X29mZnNldF9wZXJjZW50XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHMuZm9yY2Vfc2V0dGxlbWVudF9vZmZzZXRfcGVyY2VudCAvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldENvbnN0YW50cy5HUkFQSEVORV8xX1BFUkNFTlRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vblVwZGF0ZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZm9yY2Vfc2V0dGxlbWVudF9vZmZzZXRfcGVyY2VudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcblxyXG4gICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1heGltdW1fZm9yY2Vfc2V0dGxlbWVudF92b2x1bWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0cy5tYXhpbXVtX2ZvcmNlX3NldHRsZW1lbnRfdm9sdW1lIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0Q29uc3RhbnRzLkdSQVBIRU5FXzFfUEVSQ0VOVFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uVXBkYXRlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXhpbXVtX2ZvcmNlX3NldHRsZW1lbnRfdm9sdW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tbWFyZ2luIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFzc2V0U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5iYWNraW5nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uSW5wdXRCYWNraW5nQXNzZXQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUuYmFja2luZ0Fzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldElucHV0PXt0aGlzLnN0YXRlLmJhY2tpbmdBc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwiLCBwYWRkaW5nUmlnaHQ6IFwiMTBweFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Gb3VuZD17dGhpcy5fb25Gb3VuZEJhY2tpbmdBc3NldC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAge2Vycm9yID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgaGFzLWVycm9yXCI+e2Vycm9yfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuQml0QXNzZXRPcHRpb25zID0gQmluZFRvQ2hhaW5TdGF0ZShCaXRBc3NldE9wdGlvbnMpO1xyXG5cclxuY2xhc3MgQWNjb3VudEFzc2V0Q3JlYXRlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgY29yZTogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWQsXHJcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBnbG9iYWxPYmplY3Q6IFwiMi4wLjBcIixcclxuICAgICAgICBjb3JlOiBcIjEuMy4wXCJcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLnJlc2V0U3RhdGUocHJvcHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0U3RhdGUocHJvcHMpIHtcclxuICAgICAgICAvLyBsZXQgYXNzZXQgPSBwcm9wcy5hc3NldC50b0pTKCk7XHJcbiAgICAgICAgbGV0IGlzQml0QXNzZXQgPSBmYWxzZTtcclxuICAgICAgICBsZXQgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbig0KTtcclxuICAgICAgICBsZXQgY29yZVByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXHJcbiAgICAgICAgICAgIHByb3BzLmNvcmUuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IHtmbGFnQm9vbGVhbnMsIHBlcm1pc3Npb25Cb29sZWFuc30gPSB0aGlzLl9nZXRQZXJtaXNzaW9ucyh7XHJcbiAgICAgICAgICAgIGlzQml0QXNzZXRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gbGV0IGZsYWdzID0gYXNzZXRVdGlscy5nZXRGbGFncyhmbGFnQm9vbGVhbnMpO1xyXG4gICAgICAgIC8vIGxldCBwZXJtaXNzaW9ucyA9IGFzc2V0VXRpbHMuZ2V0UGVybWlzc2lvbnMocGVybWlzc2lvbkJvb2xlYW5zLCBpc0JpdEFzc2V0KTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImFsbCBwZXJtaXNzaW9uczpcIiwgcGVybWlzc2lvbkJvb2xlYW5zLCBwZXJtaXNzaW9ucylcclxuXHJcbiAgICAgICAgbGV0IGNvcmVSYXRlQmFzZUFzc2V0TmFtZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQoXCIxLjMuMFwiKS5nZXQoXCJzeW1ib2xcIik7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVwZGF0ZToge1xyXG4gICAgICAgICAgICAgICAgc3ltYm9sOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiA0LFxyXG4gICAgICAgICAgICAgICAgbWF4X3N1cHBseTogMTAwMDAwLFxyXG4gICAgICAgICAgICAgICAgbWF4X21hcmtldF9mZWU6IDAsXHJcbiAgICAgICAgICAgICAgICBtYXJrZXRfZmVlX3BlcmNlbnQ6IDAsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge21haW46IFwiXCJ9LFxyXG4gICAgICAgICAgICAgICAgcmV3YXJkX3BlcmNlbnQ6IDBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3JzOiB7XHJcbiAgICAgICAgICAgICAgICBtYXhfc3VwcGx5OiBudWxsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlzVmFsaWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGZsYWdCb29sZWFuczogZmxhZ0Jvb2xlYW5zLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnM6IHBlcm1pc3Npb25Cb29sZWFucyxcclxuICAgICAgICAgICAgaXNCaXRBc3NldDogaXNCaXRBc3NldCxcclxuICAgICAgICAgICAgaXNfcHJlZGljdGlvbl9tYXJrZXQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGU6IHtcclxuICAgICAgICAgICAgICAgIHF1b3RlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRfaWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAxXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYmFzZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBcIjEuMy4wXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAxXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJpdGFzc2V0X29wdHM6IHtcclxuICAgICAgICAgICAgICAgIGZlZWRfbGlmZXRpbWVfc2VjOiA2MCAqIDYwICogMjQsXHJcbiAgICAgICAgICAgICAgICBtaW5pbXVtX2ZlZWRzOiA3LFxyXG4gICAgICAgICAgICAgICAgZm9yY2Vfc2V0dGxlbWVudF9kZWxheV9zZWM6IDYwICogNjAgKiAyNCxcclxuICAgICAgICAgICAgICAgIGZvcmNlX3NldHRsZW1lbnRfb2Zmc2V0X3BlcmNlbnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgMSAqIGFzc2V0Q29uc3RhbnRzLkdSQVBIRU5FXzFfUEVSQ0VOVCxcclxuICAgICAgICAgICAgICAgIG1heGltdW1fZm9yY2Vfc2V0dGxlbWVudF92b2x1bWU6XHJcbiAgICAgICAgICAgICAgICAgICAgMjAgKiBhc3NldENvbnN0YW50cy5HUkFQSEVORV8xX1BFUkNFTlQsXHJcbiAgICAgICAgICAgICAgICBzaG9ydF9iYWNraW5nX2Fzc2V0OiBcIjEuMy4wXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWFya2V0SW5wdXQ6IFwiXCJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRQZXJtaXNzaW9ucyhzdGF0ZSkge1xyXG4gICAgICAgIGxldCBmbGFnQm9vbGVhbnMgPSBhc3NldFV0aWxzLmdldEZsYWdCb29sZWFucygwLCBzdGF0ZS5pc0JpdEFzc2V0KTtcclxuICAgICAgICBsZXQgcGVybWlzc2lvbkJvb2xlYW5zID0gYXNzZXRVdGlscy5nZXRGbGFnQm9vbGVhbnMoXHJcbiAgICAgICAgICAgIFwiYWxsXCIsXHJcbiAgICAgICAgICAgIHN0YXRlLmlzQml0QXNzZXRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb29sZWFuc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUFzc2V0KGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgdXBkYXRlLFxyXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb29sZWFucyxcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLFxyXG4gICAgICAgICAgICBpc0JpdEFzc2V0LFxyXG4gICAgICAgICAgICBpc19wcmVkaWN0aW9uX21hcmtldCxcclxuICAgICAgICAgICAgYml0YXNzZXRfb3B0c1xyXG4gICAgICAgIH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBsZXQge2FjY291bnR9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgbGV0IGZsYWdzID0gYXNzZXRVdGlscy5nZXRGbGFncyhmbGFnQm9vbGVhbnMsIGlzQml0QXNzZXQpO1xyXG4gICAgICAgIGxldCBwZXJtaXNzaW9ucyA9IGFzc2V0VXRpbHMuZ2V0UGVybWlzc2lvbnMoXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb29sZWFucyxcclxuICAgICAgICAgICAgaXNCaXRBc3NldFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm1hcmtldElucHV0ICE9PSB1cGRhdGUuZGVzY3JpcHRpb24ubWFya2V0KSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvbi5tYXJrZXQgPSBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBKU09OLnN0cmluZ2lmeSh1cGRhdGUuZGVzY3JpcHRpb24pO1xyXG5cclxuICAgICAgICBBc3NldEFjdGlvbnMuY3JlYXRlQXNzZXQoXHJcbiAgICAgICAgICAgIGFjY291bnQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgIHVwZGF0ZSxcclxuICAgICAgICAgICAgZmxhZ3MsXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb25zLFxyXG4gICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUsXHJcbiAgICAgICAgICAgIGlzQml0QXNzZXQsXHJcbiAgICAgICAgICAgIGlzX3ByZWRpY3Rpb25fbWFya2V0LFxyXG4gICAgICAgICAgICBiaXRhc3NldF9vcHRzLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvblxyXG4gICAgICAgICkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICAgICAgIFwiLi4uIEFzc2V0QWN0aW9ucy5jcmVhdGVBc3NldChhY2NvdW50X2lkLCB1cGRhdGUpXCIsXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlLFxyXG4gICAgICAgICAgICAgICAgZmxhZ3MsXHJcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uc1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYXNDaGFuZ2VkKCkge1xyXG4gICAgICAgIHJldHVybiAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3coXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUsXHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRTdGF0ZSh0aGlzLnByb3BzKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgX3Jlc2V0KGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy5yZXNldFN0YXRlKHRoaXMucHJvcHMpKTtcclxuICAgIH1cclxuXHJcbiAgICBfZm9yY2VQb3NpdGl2ZShudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChudW1iZXIpIDwgMCA/IFwiMFwiIDogbnVtYmVyO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblVwZGF0ZURlc2NyaXB0aW9uKHZhbHVlLCBlKSB7XHJcbiAgICAgICAgbGV0IHt1cGRhdGV9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBsZXQgdXBkYXRlU3RhdGUgPSB0cnVlO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJjb25kaXRpb25cIjpcclxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZS5sZW5ndGggPiA2MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVN0YXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uW3ZhbHVlXSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwic2hvcnRfbmFtZVwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlLmxlbmd0aCA+IDMyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU3RhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJtYXJrZXRcIjpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV0gPSBlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwidmlzaWJsZVwiOlxyXG4gICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uW3ZhbHVlXSA9ICF1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uW3ZhbHVlXSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodXBkYXRlU3RhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl92YWxpZGF0ZUVkaXRGaWVsZHModXBkYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2VCaXRBc3NldE9wdHModmFsdWUsIGUpIHtcclxuICAgICAgICBsZXQge2JpdGFzc2V0X29wdHMsIGVycm9yc30gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJmb3JjZV9zZXR0bGVtZW50X29mZnNldF9wZXJjZW50XCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJtYXhpbXVtX2ZvcmNlX3NldHRsZW1lbnRfdm9sdW1lXCI6XHJcbiAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzW3ZhbHVlXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChlLnRhcmdldC52YWx1ZSkgKlxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0Q29uc3RhbnRzLkdSQVBIRU5FXzFfUEVSQ0VOVDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwibWluaW11bV9mZWVkc1wiOlxyXG4gICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0c1t2YWx1ZV0gPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSwgMTApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJmZWVkX2xpZmV0aW1lX3NlY1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwiZm9yY2Vfc2V0dGxlbWVudF9kZWxheV9zZWNcIjpcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpICogNjAsIDEwKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHNbdmFsdWVdID0gcGFyc2VJbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChlLnRhcmdldC52YWx1ZSkgKiA2MCxcclxuICAgICAgICAgICAgICAgICAgICAxMFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcInNob3J0X2JhY2tpbmdfYXNzZXRcIjpcclxuICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHNbdmFsdWVdID0gZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcImludmFsaWRcIjpcclxuICAgICAgICAgICAgICAgIGVycm9ycy5pbnZhbGlkX2JpdGFzc2V0ID0gZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHNbdmFsdWVdID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpc1ZhbGlkID1cclxuICAgICAgICAgICAgIWVycm9ycy5zeW1ib2wgJiYgIWVycm9ycy5tYXhfc3VwcGx5ICYmICFlcnJvcnMuaW52YWxpZF9iaXRhc3NldDtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNWYWxpZDogaXNWYWxpZCwgZXJyb3JzOiBlcnJvcnN9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25VcGRhdGVJbnB1dCh2YWx1ZSwgZSkge1xyXG4gICAgICAgIGxldCB7dXBkYXRlLCBlcnJvcnN9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBsZXQgdXBkYXRlU3RhdGUgPSB0cnVlO1xyXG4gICAgICAgIGxldCBzaG91bGRSZXN0b3JlQ3Vyc29yID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24odGhpcy5zdGF0ZS51cGRhdGUucHJlY2lzaW9uKTtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcclxuICAgICAgICBjb25zdCBjYXJldCA9IHRhcmdldC5zZWxlY3Rpb25TdGFydDtcclxuICAgICAgICBjb25zdCBpbnB1dFZhbHVlID0gdGFyZ2V0LnZhbHVlO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJtYXJrZXRfZmVlX3BlcmNlbnRcIjpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVt2YWx1ZV0gPSB0aGlzLl9mb3JjZVBvc2l0aXZlKHRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInJld2FyZF9wZXJjZW50XCI6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdGhpcy5fZm9yY2VQb3NpdGl2ZSh0YXJnZXQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJtYXhfbWFya2V0X2ZlZVwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBiaWcoaW5wdXRWYWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpbWVzKHByZWNpc2lvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmd0KEdSQVBIRU5FX01BWF9TSEFSRV9TVVBQTFkpXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcnMubWF4X21hcmtldF9mZWUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlRoZSBudW1iZXIgeW91IHRyaWVkIHRvIGVudGVyIGlzIHRvbyBsYXJnZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldFN0YXRlKHtlcnJvcnN9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZSA9IHV0aWxzLmxpbWl0QnlQcmVjaXNpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudXBkYXRlLnByZWNpc2lvblxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVt2YWx1ZV0gPSB0YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJwcmVjaXNpb25cIjpcclxuICAgICAgICAgICAgICAgIC8vIEVuZm9yY2UgcG9zaXRpdmUgbnVtYmVyXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdGhpcy5fZm9yY2VQb3NpdGl2ZSh0YXJnZXQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwibWF4X3N1cHBseVwiOlxyXG4gICAgICAgICAgICAgICAgc2hvdWxkUmVzdG9yZUN1cnNvciA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVnZXhwX251bWVyYWwgPSBuZXcgUmVnRXhwKC9bWzpkaWdpdDpdXS8pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSBpbnB1dCBpcyB2YWxpZFxyXG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleHBfbnVtZXJhbC50ZXN0KHRhcmdldC52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWUgPSB0YXJnZXQudmFsdWUucmVwbGFjZSgvW14wLTkuXS9nLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDYXRjaCBpbml0aWFsIGRlY2ltYWwgaW5wdXRcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQudmFsdWUuY2hhckF0KDApID09IFwiLlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlID0gXCIwLlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIENhdGNoIGRvdWJsZSBkZWNpbWFsIGFuZCByZW1vdmUgaWYgaW52YWxpZFxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZS5jaGFyQXQodGFyZ2V0LnZhbHVlLmxlbmd0aCkgIT1cclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWUuc2VhcmNoKFwiLlwiKVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlLnN1YnN0cigxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWUgPSB1dGlscy5saW1pdEJ5UHJlY2lzaW9uKFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnVwZGF0ZS5wcmVjaXNpb25cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdGFyZ2V0LnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGlmICgobmV3IGJpZyh0YXJnZXQudmFsdWUpKS50aW1lcyhNYXRoLnBvdygxMCwgcHJlY2lzaW9uKS5ndChHUkFQSEVORV9NQVhfU0hBUkVfU1VQUExZKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgdXBkYXRlLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBlcnJvcnM6IHttYXhfc3VwcGx5OiBcIlRoZSBudW1iZXIgeW91IHRyaWVkIHRvIGVudGVyIGlzIHRvbyBsYXJnZVwiXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfX0pO1xyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwic3ltYm9sXCI6XHJcbiAgICAgICAgICAgICAgICBzaG91bGRSZXN0b3JlQ3Vyc29yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vIEVuZm9yY2UgdXBwZXJjYXNlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzeW1ib2wgPSB0YXJnZXQudmFsdWUudG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIEVuZm9yY2UgY2hhcmFjdGVyc1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlZ2V4cCA9IG5ldyBSZWdFeHAoXCJeWy5BLVowLTldKyRcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3ltYm9sICE9PSBcIlwiICYmICFyZWdleHAudGVzdChzeW1ib2wpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldEFzc2V0KHN5bWJvbCk7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVbdmFsdWVdID0gdGhpcy5fZm9yY2VQb3NpdGl2ZShzeW1ib2wpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IHRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHVwZGF0ZVN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3VwZGF0ZTogdXBkYXRlfSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZFJlc3RvcmVDdXJzb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3Rpb25TdGFydCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0IC0gKGlucHV0VmFsdWUubGVuZ3RoIC0gdXBkYXRlW3ZhbHVlXS5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uU3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGVFZGl0RmllbGRzKHVwZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF92YWxpZGF0ZUVkaXRGaWVsZHMobmV3X3N0YXRlKSB7XHJcbiAgICAgICAgbGV0IHtlcnJvcnN9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBlcnJvcnMubWF4X3N1cHBseSA9IG51bGw7XHJcblxyXG4gICAgICAgIGVycm9ycy5zeW1ib2wgPSBDaGFpblZhbGlkYXRpb24uaXNfdmFsaWRfc3ltYm9sX2Vycm9yKG5ld19zdGF0ZS5zeW1ib2wpO1xyXG4gICAgICAgIGxldCBleGlzdGluZ0Fzc2V0ID0gQ2hhaW5TdG9yZS5nZXRBc3NldChuZXdfc3RhdGUuc3ltYm9sKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdBc3NldCkge1xyXG4gICAgICAgICAgICBlcnJvcnMuc3ltYm9sID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5leGlzdHNcIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZXJyb3JzLm1heF9zdXBwbHkgPVxyXG4gICAgICAgICAgICAgICAgbmV3X3N0YXRlLm1heF9zdXBwbHkgPD0gMFxyXG4gICAgICAgICAgICAgICAgICAgID8gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWF4X3Bvc2l0aXZlXCJcclxuICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICA6IG5ldyBiaWcobmV3X3N0YXRlLm1heF9zdXBwbHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnRpbWVzKE1hdGgucG93KDEwLCBuZXdfc3RhdGUucHJlY2lzaW9uKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAuZ3QoR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMudG9vX2xhcmdlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJlcnI6XCIsIGVycik7XHJcbiAgICAgICAgICAgIGVycm9ycy5tYXhfc3VwcGx5ID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy50b29fbGFyZ2VcIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGlzVmFsaWQgPVxyXG4gICAgICAgICAgICAhZXJyb3JzLnN5bWJvbCAmJiAhZXJyb3JzLm1heF9zdXBwbHkgJiYgIWVycm9ycy5pbnZhbGlkX2JpdGFzc2V0O1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc1ZhbGlkOiBpc1ZhbGlkLCBlcnJvcnM6IGVycm9yc30pO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkZsYWdDaGFuZ2Uoa2V5KSB7XHJcbiAgICAgICAgbGV0IGJvb2xlYW5zID0gdGhpcy5zdGF0ZS5mbGFnQm9vbGVhbnM7XHJcbiAgICAgICAgYm9vbGVhbnNba2V5XSA9ICFib29sZWFuc1trZXldO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnM6IGJvb2xlYW5zXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uUGVybWlzc2lvbkNoYW5nZShrZXkpIHtcclxuICAgICAgICBsZXQgYm9vbGVhbnMgPSB0aGlzLnN0YXRlLnBlcm1pc3Npb25Cb29sZWFucztcclxuICAgICAgICBib29sZWFuc1trZXldID0gIWJvb2xlYW5zW2tleV07XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb29sZWFuczogYm9vbGVhbnNcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25JbnB1dENvcmVBc3NldCh0eXBlLCBhc3NldCkge1xyXG4gICAgICAgIGlmICh0eXBlID09PSBcInF1b3RlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBxdW90ZUFzc2V0SW5wdXQ6IGFzc2V0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJiYXNlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBiYXNlQXNzZXRJbnB1dDogYXNzZXRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vbkZvdW5kQ29yZUFzc2V0KHR5cGUsIGFzc2V0KSB7XHJcbiAgICAgICAgaWYgKGFzc2V0KSB7XHJcbiAgICAgICAgICAgIGxldCBjb3JlX3JhdGUgPSB0aGlzLnN0YXRlLmNvcmVfZXhjaGFuZ2VfcmF0ZTtcclxuICAgICAgICAgICAgY29yZV9yYXRlW3R5cGVdLmFzc2V0X2lkID0gYXNzZXQuZ2V0KFwiaWRcIik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZTogY29yZV9yYXRlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGVFZGl0RmllbGRzKHtcclxuICAgICAgICAgICAgICAgIG1heF9zdXBwbHk6IHRoaXMuc3RhdGUubWF4X3N1cHBseSxcclxuICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZTogY29yZV9yYXRlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25JbnB1dE1hcmtldChhc3NldCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBtYXJrZXRJbnB1dDogYXNzZXRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Gb3VuZE1hcmtldEFzc2V0KGFzc2V0KSB7XHJcbiAgICAgICAgaWYgKGFzc2V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24oXCJtYXJrZXRcIiwgYXNzZXQuZ2V0KFwic3ltYm9sXCIpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uQ29yZVJhdGVDaGFuZ2UodHlwZSwgZSkge1xyXG4gICAgICAgIGxldCBhbW91bnQsIGFzc2V0O1xyXG4gICAgICAgIGlmICh0eXBlID09PSBcInF1b3RlXCIpIHtcclxuICAgICAgICAgICAgYW1vdW50ID0gdXRpbHMubGltaXRCeVByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS51cGRhdGUucHJlY2lzaW9uXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGFzc2V0ID0gbnVsbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIWUgfHwgIShcImFtb3VudFwiIGluIGUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYW1vdW50ID1cclxuICAgICAgICAgICAgICAgIGUuYW1vdW50ID09IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICA/IFwiMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgOiB1dGlscy5saW1pdEJ5UHJlY2lzaW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGUuYW1vdW50LnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCBcIlwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvcmUuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBhc3NldCA9IGUuYXNzZXQuZ2V0KFwiaWRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQge2NvcmVfZXhjaGFuZ2VfcmF0ZX0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZVt0eXBlXSA9IHtcclxuICAgICAgICAgICAgYW1vdW50OiBhbW91bnQsXHJcbiAgICAgICAgICAgIGFzc2V0X2lkOiBhc3NldFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblRvZ2dsZUJpdEFzc2V0KCkge1xyXG4gICAgICAgIGxldCB7dXBkYXRlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5pc0JpdEFzc2V0ID0gIXRoaXMuc3RhdGUuaXNCaXRBc3NldDtcclxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuaXNCaXRBc3NldCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmlzX3ByZWRpY3Rpb25fbWFya2V0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQge2ZsYWdCb29sZWFucywgcGVybWlzc2lvbkJvb2xlYW5zfSA9IHRoaXMuX2dldFBlcm1pc3Npb25zKFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnN0YXRlLmZsYWdCb29sZWFucyA9IGZsYWdCb29sZWFucztcclxuICAgICAgICB0aGlzLnN0YXRlLnBlcm1pc3Npb25Cb29sZWFucyA9IHBlcm1pc3Npb25Cb29sZWFucztcclxuXHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblRvZ2dsZVBNKCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUuaXNfcHJlZGljdGlvbl9tYXJrZXQgPSAhdGhpcy5zdGF0ZS5pc19wcmVkaWN0aW9uX21hcmtldDtcclxuICAgICAgICB0aGlzLnN0YXRlLnVwZGF0ZS5wcmVjaXNpb24gPSB0aGlzLnByb3BzLmNvcmUuZ2V0KFwicHJlY2lzaW9uXCIpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUuY29yZV9leGNoYW5nZV9yYXRlLmJhc2UuYXNzZXRfaWQgPSB0aGlzLnByb3BzLmNvcmUuZ2V0KFwiaWRcIik7XHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2dsb2JhbE9iamVjdCwgY29yZX0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIGVycm9ycyxcclxuICAgICAgICAgICAgaXNWYWxpZCxcclxuICAgICAgICAgICAgdXBkYXRlLFxyXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb29sZWFucyxcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLFxyXG4gICAgICAgICAgICBpc19wcmVkaWN0aW9uX21hcmtldCxcclxuICAgICAgICAgICAgaXNCaXRBc3NldCxcclxuICAgICAgICAgICAgYml0YXNzZXRfb3B0c1xyXG4gICAgICAgIH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICAvLyBFc3RpbWF0ZSB0aGUgYXNzZXQgY3JlYXRpb24gZmVlIGZyb20gdGhlIHN5bWJvbCBjaGFyYWN0ZXIgbGVuZ3RoXHJcbiAgICAgICAgbGV0IHN5bWJvbExlbmd0aCA9IHVwZGF0ZS5zeW1ib2wubGVuZ3RoLFxyXG4gICAgICAgICAgICBjcmVhdGVGZWUgPSBcIk4vQVwiO1xyXG5cclxuICAgICAgICBpZiAoc3ltYm9sTGVuZ3RoID09PSAzKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZUZlZSA9IChcclxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudD17ZXN0aW1hdGVGZWUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfY3JlYXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcInN5bWJvbDNcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbE9iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e1wiMS4zLjBcIn1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzeW1ib2xMZW5ndGggPT09IDQpIHtcclxuICAgICAgICAgICAgY3JlYXRlRmVlID0gKFxyXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtlc3RpbWF0ZUZlZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhc3NldF9jcmVhdGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgW1wic3ltYm9sNFwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsT2JqZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICBhc3NldD17XCIxLjMuMFwifVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHN5bWJvbExlbmd0aCA+IDQpIHtcclxuICAgICAgICAgICAgY3JlYXRlRmVlID0gKFxyXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtlc3RpbWF0ZUZlZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhc3NldF9jcmVhdGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgW1wibG9uZ19zeW1ib2xcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbE9iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e1wiMS4zLjBcIn1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBMb29wIG92ZXIgZmxhZ3NcclxuICAgICAgICBsZXQgZmxhZ3MgPSBbXTtcclxuICAgICAgICBsZXQgZ2V0RmxhZyA9IChrZXksIG9uQ2xpY2ssIGlzQ2hlY2tlZCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPHRhYmxlIGtleT17XCJ0YWJsZV9cIiArIGtleX0gY2xhc3NOYW1lPVwidGFibGVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e2JvcmRlcjogXCJub25lXCIsIHdpZHRoOiBcIjgwJVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtgYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuJHtrZXl9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwiLCB0ZXh0QWxpZ246IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTd2l0Y2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17aXNDaGVja2VkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25DbGlja31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBwZXJtaXNzaW9uQm9vbGVhbnMpIHtcclxuICAgICAgICAgICAgaWYgKHBlcm1pc3Npb25Cb29sZWFuc1trZXldICYmIGtleSAhPT0gXCJjaGFyZ2VfbWFya2V0X2ZlZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBmbGFncy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIGdldEZsYWcoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25GbGFnQ2hhbmdlLmJpbmQodGhpcywga2V5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zW2tleV1cclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmbGFncy5wdXNoKFxyXG4gICAgICAgICAgICBnZXRGbGFnKFxyXG4gICAgICAgICAgICAgICAgXCJ2aXNpYmxlXCIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQodGhpcywgXCJ2aXNpYmxlXCIpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uLnZpc2libGVcclxuICAgICAgICAgICAgICAgICAgICA/IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgOiB1cGRhdGUuZGVzY3JpcHRpb24udmlzaWJsZSA9PT0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIExvb3Agb3ZlciBwZXJtaXNzaW9uc1xyXG4gICAgICAgIGxldCBwZXJtaXNzaW9ucyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBwZXJtaXNzaW9uQm9vbGVhbnMpIHtcclxuICAgICAgICAgICAgcGVybWlzc2lvbnMucHVzaChcclxuICAgICAgICAgICAgICAgIDx0YWJsZSBrZXk9e1widGFibGVfXCIgKyBrZXl9IGNsYXNzTmFtZT1cInRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwiLCB3aWR0aDogXCI4MCVcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17YGFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLiR7a2V5fWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiBcIm5vbmVcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTd2l0Y2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17cGVybWlzc2lvbkJvb2xlYW5zW2tleV19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblBlcm1pc3Npb25DaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b25zID0gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fcmVzZXQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5wZXJtLnJlc2V0XCIpfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5yZXNldFwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoXCJidXR0b25cIiwge2Rpc2FibGVkOiAhaXNWYWxpZH0pfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX2NyZWF0ZUFzc2V0LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiaGVhZGVyLmNyZWF0ZV9hc3NldFwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgYXBwLXRhYmxlcyBuby1wYWRkaW5nXCIgcmVmPVwiYXBwVGFibGVzXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgc21hbGwtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtY29udGFpbmVyIGdlbmVyaWMtYm9yZGVyZWQtYm94XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1oZWFkZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJoZWFkZXIuY3JlYXRlX2Fzc2V0XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmc9XCJjcmVhdGVBc3NldFRhYlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY2NvdW50LXRhYnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic0NsYXNzPVwiYWNjb3VudC1vdmVydmlldyBuby1wYWRkaW5nIGJvcmRlcmVkLWhlYWRlciBjb250ZW50LWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cImdyaWQtYmxvY2sgc2hyaW5rIHNtYWxsLXZlcnRpY2FsIG1lZGl1bS1ob3Jpem9udGFsIHBhZGRpbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkJ1dHRvbnM9e2NvbmZpcm1CdXR0b25zfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMucHJpbWFyeVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnN5bWJvbFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3VwZGF0ZS5zeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzeW1ib2xcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLnN5bWJvbCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBoYXMtZXJyb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLnN5bWJvbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXhfc3VwcGx5XCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXBkYXRlLnN5bWJvbCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4oe3VwZGF0ZS5zeW1ib2x9KTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt1cGRhdGUubWF4X3N1cHBseX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVJbnB1dC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1heF9zdXBwbHlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLm1heF9zdXBwbHkgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfc3VwcGx5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmRlY2ltYWxzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbj1cIjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heD1cIjhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXA9XCIxXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicmFuZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt1cGRhdGUucHJlY2lzaW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZUlucHV0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHJlY2lzaW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+e3VwZGF0ZS5wcmVjaXNpb259PC9wPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5Cb3R0b206IDEwfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInR4dGxhYmVsIGNhbmNlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnByZWNpc2lvbl93YXJuaW5nXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRhYmxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiaW5oZXJpdFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiBcIm5vbmVcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1wYVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiBcIm5vbmVcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFN3aXRjaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2lzQml0QXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVG9nZ2xlQml0QXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lzQml0QXNzZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCJpbmhlcml0XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2JvcmRlcjogXCJub25lXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTd2l0Y2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19wcmVkaWN0aW9uX21hcmtldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblRvZ2dsZVBNLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIENFUiAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiaDNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmNvcmVfZXhjaGFuZ2VfcmF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tbWFyZ2luXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5xdW90ZV9hc3NldCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5xdW90ZV9hc3NldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMuYmFzZV9hc3NldCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5iYXNlX2Fzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpbiBzbWFsbC0xMiBtZWRpdW0tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhbW91bnQtc2VsZWN0b3JcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBcIjEwcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMucXVvdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5saW5lLWxhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25Db3JlUmF0ZUNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicXVvdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucXVvdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1tYXJnaW4gc21hbGwtMTIgbWVkaXVtLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFtb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmJhc2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25Db3JlUmF0ZUNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLmJhc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFzc2V0X2lkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHM9e1tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiBcIjEwcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnByaWNlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3V0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuZ2V0X2Fzc2V0X3ByaWNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5xdW90ZS5hbW91bnQgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucHJlY2lzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVjaXNpb246XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLnByZWNpc2lvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iYXNlLmFtb3VudCAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5nZXRfYXNzZXRfcHJlY2lzaW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocGFyc2VJbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucHJlY2lzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB8fCA4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1cGRhdGUuc3ltYm9sfS9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb3JlLmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY2VyX3dhcm5pbmdfMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwibGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhhcy1lcnJvclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5jZXJfd2FybmluZ18yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5hcHByb3hfZmVlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHtjcmVhdGVGZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5kZXNjcmlwdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5kZXNjcmlwdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7aGVpZ2h0OiBcIjdyZW1cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz1cIjFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt1cGRhdGUuZGVzY3JpcHRpb24ubWFpbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVEZXNjcmlwdGlvbi5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1haW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwibGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnNob3J0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvbi5zaG9ydF9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2hvcnRfbmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJsYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWFya2V0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25JbnB1dE1hcmtldC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17dGhpcy5zdGF0ZS5tYXJrZXRJbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0SW5wdXQ9e3RoaXMuc3RhdGUubWFya2V0SW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IFwiMTBweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Gb3VuZD17dGhpcy5fb25Gb3VuZE1hcmtldEFzc2V0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc19wcmVkaWN0aW9uX21hcmtldCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5jb25kaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmRpdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29uZGl0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5leHBpcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJkYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmV4cGlyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhwaXJ5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0JpdEFzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5iaXRhc3NldF9vcHRzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCaXRBc3NldE9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHM9e2JpdGFzc2V0X29wdHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZT17dGhpcy5vbkNoYW5nZUJpdEFzc2V0T3B0cy5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNraW5nQXNzZXQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHMuc2hvcnRfYmFja2luZ19hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRQcmVjaXNpb249e3VwZGF0ZS5wcmVjaXNpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldFN5bWJvbD17dXBkYXRlLnN5bWJvbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUHJlZGljdGlvbk1hcmtldD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcHJlZGljdGlvbl9tYXJrZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnBlcm1pc3Npb25zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e21heFdpZHRoOiA4MDB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIZWxwQ29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbXBvbmVudHMvQWNjb3VudEFzc2V0Q3JlYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbj1cInBlcm1pc3Npb25zXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cGVybWlzc2lvbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZmxhZ3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7bWF4V2lkdGg6IDgwMH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEhlbHBDb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29tcG9uZW50cy9BY2NvdW50QXNzZXRDcmVhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uPVwiZmxhZ3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwZXJtaXNzaW9uQm9vbGVhbnNbXCJjaGFyZ2VfbWFya2V0X2ZlZVwiXSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJzcGFuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXJrZXRfZmVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBcIjIwcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFN3aXRjaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLmNoYXJnZV9tYXJrZXRfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25GbGFnQ2hhbmdlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNoYXJnZV9tYXJrZXRfZmVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhZmxhZ0Jvb2xlYW5zLmNoYXJnZV9tYXJrZXRfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luVG9wOiBcIjEwcHhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IFwiMzBweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXJrZXRfZmVlXCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLm1hcmtldF9mZWVfcGVyY2VudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVJbnB1dC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1hcmtldF9mZWVfcGVyY2VudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXhfbWFya2V0X2ZlZVwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHt1cGRhdGUuc3ltYm9sfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLm1heF9tYXJrZXRfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZUlucHV0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWF4X21hcmtldF9mZWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICEoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5tYXJrZXRfZmVlX3BlcmNlbnQgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5yZXdhcmRfcGVyY2VudFwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICglKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLnJld2FyZF9wZXJjZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJld2FyZF9wZXJjZW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMubWF4X21hcmtldF9mZWUgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfbWFya2V0X2ZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZsYWdzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZsYWdzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5BY2NvdW50QXNzZXRDcmVhdGUgPSBCaW5kVG9DaGFpblN0YXRlKEFjY291bnRBc3NldENyZWF0ZSk7XHJcblxyXG5leHBvcnQge0FjY291bnRBc3NldENyZWF0ZSwgQml0QXNzZXRPcHRpb25zfTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XHJcbmltcG9ydCBBc3NldEFjdGlvbnMgZnJvbSBcImFjdGlvbnMvQXNzZXRBY3Rpb25zXCI7XHJcbmltcG9ydCBIZWxwQ29udGVudCBmcm9tIFwiLi4vVXRpbGl0eS9IZWxwQ29udGVudFwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgRm9ybWF0dGVkRmVlIGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZEZlZVwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgQXNzZXRXcmFwcGVyIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0V3JhcHBlclwiO1xyXG5pbXBvcnQgQW1vdW50U2VsZWN0b3IgZnJvbSBcIi4uL1V0aWxpdHkvQW1vdW50U2VsZWN0b3JcIjtcclxuaW1wb3J0IEZvcm1hdHRlZFByaWNlIGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZFByaWNlXCI7XHJcbmltcG9ydCBBc3NldFNlbGVjdG9yIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0U2VsZWN0b3JcIjtcclxuaW1wb3J0IGJpZyBmcm9tIFwiYmlnbnVtYmVyLmpzXCI7XHJcbmltcG9ydCBjbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcclxuaW1wb3J0IGFzc2V0VXRpbHMgZnJvbSBcImNvbW1vbi9hc3NldF91dGlsc1wiO1xyXG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xyXG5pbXBvcnQge0JpdEFzc2V0T3B0aW9uc30gZnJvbSBcIi4vQWNjb3VudEFzc2V0Q3JlYXRlXCI7XHJcbmltcG9ydCBhc3NldENvbnN0YW50cyBmcm9tIFwiY2hhaW4vYXNzZXRfY29uc3RhbnRzXCI7XHJcbmltcG9ydCBBc3NldFdoaXRlbGlzdCBmcm9tIFwiLi9Bc3NldFdoaXRlbGlzdFwiO1xyXG5pbXBvcnQgQXNzZXRGZWVkUHJvZHVjZXJzIGZyb20gXCIuL0Fzc2V0RmVlZFByb2R1Y2Vyc1wiO1xyXG5pbXBvcnQge3dpdGhSb3V0ZXJ9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XHJcbmltcG9ydCB7XHJcbiAgICBNb2RhbCxcclxuICAgIEJ1dHRvbixcclxuICAgIE5vdGlmaWNhdGlvbixcclxuICAgIFN3aXRjaCxcclxuICAgIFRvb2x0aXBcclxufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcbmltcG9ydCBJbW11dGFibGUgZnJvbSBcImltbXV0YWJsZVwiO1xyXG5cclxubGV0IEdSQVBIRU5FX01BWF9TSEFSRV9TVVBQTFkgPSBuZXcgYmlnKFxyXG4gICAgYXNzZXRDb25zdGFudHMuR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWVxyXG4pO1xyXG5cclxuY29uc3QgZGlzYWJsZWRCYWNraW5nQXNzZXRDaGFuZ2VDYWxsYmFjayA9ICgpID0+IHtcclxuICAgIE5vdGlmaWNhdGlvbi5lcnJvcih7XHJcbiAgICAgICAgbWVzc2FnZTogY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmludmFsaWRfYmFja2luZ19hc3NldF9jaGFuZ2VcIlxyXG4gICAgICAgIClcclxuICAgIH0pO1xyXG59O1xyXG5cclxuY2xhc3MgQWNjb3VudEFzc2V0VXBkYXRlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBnbG9iYWxPYmplY3Q6IFwiMi4wLjBcIlxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMucmVzZXRTdGF0ZShwcm9wcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd0Fzc2V0VXBkYXRlQ29uZmlybWF0aW9uTW9kYWwgPSB0aGlzLnNob3dBc3NldFVwZGF0ZUNvbmZpcm1hdGlvbk1vZGFsLmJpbmQoXHJcbiAgICAgICAgICAgIHRoaXNcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuaGlkZUFzc2V0VXBkYXRlQ29uZmlybWF0aW9uTW9kYWwgPSB0aGlzLmhpZGVBc3NldFVwZGF0ZUNvbmZpcm1hdGlvbk1vZGFsLmJpbmQoXHJcbiAgICAgICAgICAgIHRoaXNcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIF9vcGVuQ29uZmlybSgpIHtcclxuICAgICAgICB0aGlzLnNob3dBc3NldFVwZGF0ZUNvbmZpcm1hdGlvbk1vZGFsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NhbmNlbENvbmZpcm0oKSB7XHJcbiAgICAgICAgdGhpcy5oaWRlQXNzZXRVcGRhdGVDb25maXJtYXRpb25Nb2RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0U3RhdGUocHJvcHMpIHtcclxuICAgICAgICBsZXQgYXNzZXQgPSBwcm9wcy5hc3NldC50b0pTKCk7XHJcbiAgICAgICAgbGV0IGlzQml0QXNzZXQgPSBhc3NldC5iaXRhc3NldF9kYXRhX2lkICE9PSB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IHByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oYXNzZXQucHJlY2lzaW9uKTtcclxuICAgICAgICBsZXQgY29yZVByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXHJcbiAgICAgICAgICAgIHByb3BzLmNvcmUuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IG1heF9tYXJrZXRfZmVlID0gbmV3IGJpZyhhc3NldC5vcHRpb25zLm1heF9tYXJrZXRfZmVlKVxyXG4gICAgICAgICAgICAuZGl2KHByZWNpc2lvbilcclxuICAgICAgICAgICAgLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgbGV0IG1heF9zdXBwbHkgPSBuZXcgYmlnKGFzc2V0Lm9wdGlvbnMubWF4X3N1cHBseSlcclxuICAgICAgICAgICAgLmRpdihwcmVjaXNpb24pXHJcbiAgICAgICAgICAgIC50b1N0cmluZygpO1xyXG4gICAgICAgIGxldCBjb3JlX2V4Y2hhbmdlX3JhdGUgPSBhc3NldC5vcHRpb25zLmNvcmVfZXhjaGFuZ2VfcmF0ZTtcclxuICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGUuYW1vdW50ID1cclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLnF1b3RlLmFzc2V0X2lkID09PSBhc3NldC5pZFxyXG4gICAgICAgICAgICAgICAgPyBuZXcgYmlnKGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZS5hbW91bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAuZGl2KHByZWNpc2lvbilcclxuICAgICAgICAgICAgICAgICAgICAgIC50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICA6IG5ldyBiaWcoY29yZV9leGNoYW5nZV9yYXRlLnF1b3RlLmFtb3VudClcclxuICAgICAgICAgICAgICAgICAgICAgIC5kaXYoY29yZVByZWNpc2lvbilcclxuICAgICAgICAgICAgICAgICAgICAgIC50b1N0cmluZygpO1xyXG5cclxuICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZS5hbW91bnQgPVxyXG4gICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZS5hc3NldF9pZCA9PT0gYXNzZXQuaWRcclxuICAgICAgICAgICAgICAgID8gbmV3IGJpZyhjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZS5hbW91bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAuZGl2KHByZWNpc2lvbilcclxuICAgICAgICAgICAgICAgICAgICAgIC50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICA6IG5ldyBiaWcoY29yZV9leGNoYW5nZV9yYXRlLmJhc2UuYW1vdW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgLmRpdihjb3JlUHJlY2lzaW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgIGxldCBmbGFnQm9vbGVhbnMgPSBhc3NldFV0aWxzLmdldEZsYWdCb29sZWFucyhcclxuICAgICAgICAgICAgYXNzZXQub3B0aW9ucy5mbGFncyxcclxuICAgICAgICAgICAgaXNCaXRBc3NldFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IHBlcm1pc3Npb25Cb29sZWFucyA9IGFzc2V0VXRpbHMuZ2V0RmxhZ0Jvb2xlYW5zKFxyXG4gICAgICAgICAgICBhc3NldC5vcHRpb25zLmlzc3Vlcl9wZXJtaXNzaW9ucyxcclxuICAgICAgICAgICAgaXNCaXRBc3NldFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgYXNzZXQub3B0aW9ucy5tYXJrZXRfZmVlX3BlcmNlbnQgLz0gMTAwO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGFzc2V0Lm9wdGlvbnMuZXh0ZW5zaW9ucyAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICBhc3NldC5vcHRpb25zLmV4dGVuc2lvbnMucmV3YXJkX3BlcmNlbnQgIT09IG51bGxcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgYXNzZXQub3B0aW9ucy5leHRlbnNpb25zLnJld2FyZF9wZXJjZW50IC89IDEwMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBjb3JlUmF0ZVF1b3RlQXNzZXROYW1lID0gQ2hhaW5TdG9yZS5nZXRBc3NldChcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLnF1b3RlLmFzc2V0X2lkXHJcbiAgICAgICAgKS5nZXQoXCJzeW1ib2xcIik7XHJcbiAgICAgICAgbGV0IGNvcmVSYXRlQmFzZUFzc2V0TmFtZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQoXHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFzc2V0X2lkXHJcbiAgICAgICAgKS5nZXQoXCJzeW1ib2xcIik7XHJcblxyXG4gICAgICAgIC8vIG1heWJlIHVuZGVmaW5lZCAoZXh0ZW5zaW9ucyBtYXkgYmUgZW1wdHlcclxuICAgICAgICBsZXQgd2hpdGVsaXN0X21hcmtldF9mZWVfc2hhcmluZ192YWwgPSBwcm9wcy5hc3NldC5nZXRJbihbXHJcbiAgICAgICAgICAgIFwib3B0aW9uc1wiLFxyXG4gICAgICAgICAgICBcImV4dGVuc2lvbnNcIixcclxuICAgICAgICAgICAgXCJ3aGl0ZWxpc3RfbWFya2V0X2ZlZV9zaGFyaW5nXCJcclxuICAgICAgICBdKTtcclxuICAgICAgICBsZXQgcmV3YXJkX3BlcmNlbnQgPSBwcm9wcy5hc3NldC5nZXRJbihbXHJcbiAgICAgICAgICAgIFwib3B0aW9uc1wiLFxyXG4gICAgICAgICAgICBcImV4dGVuc2lvbnNcIixcclxuICAgICAgICAgICAgXCJyZXdhcmRfcGVyY2VudFwiXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlzQXNzZXRVcGRhdGVDb25maXJtYXRpb25Nb2RhbFZpc2libGU6IGZhbHNlLFxyXG4gICAgICAgICAgICB1cGRhdGU6IHtcclxuICAgICAgICAgICAgICAgIG1heF9zdXBwbHk6IG1heF9zdXBwbHksXHJcbiAgICAgICAgICAgICAgICBtYXhfbWFya2V0X2ZlZTogbWF4X21hcmtldF9mZWUsXHJcbiAgICAgICAgICAgICAgICByZXdhcmRfcGVyY2VudDpcclxuICAgICAgICAgICAgICAgICAgICByZXdhcmRfcGVyY2VudCA9PT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYXNzZXQub3B0aW9ucy5leHRlbnNpb25zLnJld2FyZF9wZXJjZW50LFxyXG4gICAgICAgICAgICAgICAgbWFya2V0X2ZlZV9wZXJjZW50OiBhc3NldC5vcHRpb25zLm1hcmtldF9mZWVfcGVyY2VudCxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBhc3NldFV0aWxzLnBhcnNlRGVzY3JpcHRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQub3B0aW9ucy5kZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGU6IGNvcmVfZXhjaGFuZ2VfcmF0ZSxcclxuICAgICAgICAgICAgaXNzdWVyOiBhc3NldC5pc3N1ZXIsXHJcbiAgICAgICAgICAgIG5ld19pc3N1ZXJfYWNjb3VudF9pZDogbnVsbCxcclxuICAgICAgICAgICAgbmV3X2Z1bmRlcl9hY2NvdW50OiBwcm9wcy5hY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICBhc3NldF90b191cGRhdGU6IGFzc2V0LmlkLFxyXG4gICAgICAgICAgICBlcnJvcnM6IHtcclxuICAgICAgICAgICAgICAgIG1heF9zdXBwbHk6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbmV3X2F1dGhvcml0eV9pZDogbnVsbCxcclxuICAgICAgICAgICAgYXV0aG9yaXR5X25hbWU6IG51bGwsXHJcbiAgICAgICAgICAgIGlzVmFsaWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGZsYWdCb29sZWFuczogZmxhZ0Jvb2xlYW5zLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnM6IHBlcm1pc3Npb25Cb29sZWFucyxcclxuICAgICAgICAgICAgaXNCaXRBc3NldDogaXNCaXRBc3NldCxcclxuICAgICAgICAgICAgY29yZVJhdGVRdW90ZUFzc2V0TmFtZTogY29yZVJhdGVRdW90ZUFzc2V0TmFtZSxcclxuICAgICAgICAgICAgcXVvdGVBc3NldElucHV0OiBjb3JlUmF0ZVF1b3RlQXNzZXROYW1lLFxyXG4gICAgICAgICAgICBjb3JlUmF0ZUJhc2VBc3NldE5hbWU6IGNvcmVSYXRlQmFzZUFzc2V0TmFtZSxcclxuICAgICAgICAgICAgYmFzZUFzc2V0SW5wdXQ6IGNvcmVSYXRlQmFzZUFzc2V0TmFtZSxcclxuICAgICAgICAgICAgY2xhaW1GZWVzQW1vdW50OiAwLFxyXG4gICAgICAgICAgICBiaXRhc3NldF9vcHRzOiBpc0JpdEFzc2V0ID8gYXNzZXQuYml0YXNzZXQub3B0aW9ucyA6IG51bGwsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsX2JpdGFzc2V0X29wdHM6IGlzQml0QXNzZXRcclxuICAgICAgICAgICAgICAgID8gcHJvcHMuYXNzZXQuZ2V0SW4oW1wiYml0YXNzZXRcIiwgXCJvcHRpb25zXCJdKS50b0pTKClcclxuICAgICAgICAgICAgICAgIDogbnVsbCxcclxuICAgICAgICAgICAgbWFya2V0SW5wdXQ6IFwiXCIsXHJcbiAgICAgICAgICAgIHdoaXRlbGlzdF9hdXRob3JpdGllczogcHJvcHMuYXNzZXQuZ2V0SW4oW1xyXG4gICAgICAgICAgICAgICAgXCJvcHRpb25zXCIsXHJcbiAgICAgICAgICAgICAgICBcIndoaXRlbGlzdF9hdXRob3JpdGllc1wiXHJcbiAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICBibGFja2xpc3RfYXV0aG9yaXRpZXM6IHByb3BzLmFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgIFwib3B0aW9uc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJibGFja2xpc3RfYXV0aG9yaXRpZXNcIlxyXG4gICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgd2hpdGVsaXN0X21hcmtldHM6IHByb3BzLmFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgIFwib3B0aW9uc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJ3aGl0ZWxpc3RfbWFya2V0c1wiXHJcbiAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICB3aGl0ZWxpc3RfbWFya2V0X2ZlZV9zaGFyaW5nOiB3aGl0ZWxpc3RfbWFya2V0X2ZlZV9zaGFyaW5nX3ZhbCxcclxuICAgICAgICAgICAgYmxhY2tsaXN0X21hcmtldHM6IHByb3BzLmFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgICAgIFwib3B0aW9uc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJibGFja2xpc3RfbWFya2V0c1wiXHJcbiAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICBtYXhGZWVkUHJvZHVjZXJzOiBwcm9wcy5nbG9iYWxPYmplY3QuZ2V0SW4oW1xyXG4gICAgICAgICAgICAgICAgXCJwYXJhbWV0ZXJzXCIsXHJcbiAgICAgICAgICAgICAgICBcIm1heGltdW1fYXNzZXRfZmVlZF9wdWJsaXNoZXJzXCJcclxuICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgIGZlZWRQcm9kdWNlcnM6IGlzQml0QXNzZXRcclxuICAgICAgICAgICAgICAgID8gcHJvcHMuYXNzZXQuZ2V0SW4oW1wiYml0YXNzZXRcIiwgXCJmZWVkc1wiXSwgW10pLm1hcChhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsRmVlZFByb2R1Y2VyczogaXNCaXRBc3NldFxyXG4gICAgICAgICAgICAgICAgPyBwcm9wcy5hc3NldC5nZXRJbihbXCJiaXRhc3NldFwiLCBcImZlZWRzXCJdLCBbXSkubWFwKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIDogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZUFzc2V0VXBkYXRlQ29uZmlybWF0aW9uTW9kYWwoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzQXNzZXRVcGRhdGVDb25maXJtYXRpb25Nb2RhbFZpc2libGU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0Fzc2V0VXBkYXRlQ29uZmlybWF0aW9uTW9kYWwoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzQXNzZXRVcGRhdGVDb25maXJtYXRpb25Nb2RhbFZpc2libGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVc2luZyBKU09OLnN0cmluZ2lmeSBmb3IgKGZhc3Q/KSBjb21wYXJzaW9uLCBjb3VsZCBiZSBpbXByb3ZlZCwgYnV0IHNlZW1zIGVub3VnaCBoZXJlIGFzIHRoZSBvcmRlciBpcyBmaXhlZFxyXG4gICAgYXNzZXRDaGFuZ2VkKCkge1xyXG4gICAgICAgIGxldCBzID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBsZXQgcCA9IHRoaXMucmVzZXRTdGF0ZSh0aGlzLnByb3BzKTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLnVwZGF0ZSkgIT09IEpTT04uc3RyaW5naWZ5KHAudXBkYXRlKSB8fFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLmNvcmVfZXhjaGFuZ2VfcmF0ZSkgIT09XHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLmNvcmVfZXhjaGFuZ2VfcmF0ZSkgfHxcclxuICAgICAgICAgICAgKHMubmV3X2lzc3Vlcl9hY2NvdW50X2lkICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICBzLm5ld19pc3N1ZXJfYWNjb3VudF9pZCAhPT0gcy5pc3N1ZXIpIHx8XHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMuZmxhZ0Jvb2xlYW5zKSAhPT0gSlNPTi5zdHJpbmdpZnkocC5mbGFnQm9vbGVhbnMpIHx8XHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMucGVybWlzc2lvbkJvb2xlYW5zKSAhPT1cclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAucGVybWlzc2lvbkJvb2xlYW5zKSB8fFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLndoaXRlbGlzdF9hdXRob3JpdGllcykgIT09XHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLndoaXRlbGlzdF9hdXRob3JpdGllcykgfHxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy5ibGFja2xpc3RfYXV0aG9yaXRpZXMpICE9PVxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC5ibGFja2xpc3RfYXV0aG9yaXRpZXMpIHx8XHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMud2hpdGVsaXN0X21hcmtldHMpICE9PVxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC53aGl0ZWxpc3RfbWFya2V0cykgfHxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy5ibGFja2xpc3RfbWFya2V0cykgIT09XHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLmJsYWNrbGlzdF9tYXJrZXRzKSB8fFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLndoaXRlbGlzdF9tYXJrZXRfZmVlX3NoYXJpbmcpICE9PVxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC53aGl0ZWxpc3RfbWFya2V0X2ZlZV9zaGFyaW5nKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRhYiBJRCBvbiBjaGFuZ2VcclxuICAgIHRhYkNoYW5nZWQodGFiSWQpIHtcclxuICAgICAgICBsZXQgdGFic0NoYW5nZWQgPSB0aGlzLnRhYnNDaGFuZ2VkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRhYnNDaGFuZ2VkW3RhYklkXSA/IHRhYnNDaGFuZ2VkW3RhYklkXSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHRhYnNDaGFuZ2VkKCkge1xyXG4gICAgICAgIGxldCBzID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBsZXQgcCA9IHRoaXMucmVzZXRTdGF0ZSh0aGlzLnByb3BzKTtcclxuXHJcbiAgICAgICAgbGV0IHRhYlVwZGF0ZUluZGV4ID0gW107XHJcblxyXG4gICAgICAgIC8qIFByaW1hcnkgKi9cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHMudXBkYXRlLm1heF9zdXBwbHkgIT09IHAudXBkYXRlLm1heF9zdXBwbHkgfHxcclxuICAgICAgICAgICAgcy5jb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZS5hbW91bnQgIT09XHJcbiAgICAgICAgICAgICAgICBwLmNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFtb3VudCB8fFxyXG4gICAgICAgICAgICBzLmNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZS5hbW91bnQgIT09XHJcbiAgICAgICAgICAgICAgICBwLmNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZS5hbW91bnRcclxuICAgICAgICApXHJcbiAgICAgICAgICAgIHRhYlVwZGF0ZUluZGV4W1wiMFwiXSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8qIFdoaXRlbGlzdCAqL1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy53aGl0ZWxpc3RfYXV0aG9yaXRpZXMpICE9PVxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC53aGl0ZWxpc3RfYXV0aG9yaXRpZXMpIHx8XHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMuYmxhY2tsaXN0X2F1dGhvcml0aWVzKSAhPT1cclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAuYmxhY2tsaXN0X2F1dGhvcml0aWVzKSB8fFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLndoaXRlbGlzdF9tYXJrZXRzKSAhPT1cclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAud2hpdGVsaXN0X21hcmtldHMpIHx8XHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHMuYmxhY2tsaXN0X21hcmtldHMpICE9PVxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocC5ibGFja2xpc3RfbWFya2V0cykgfHxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy53aGl0ZWxpc3RfbWFya2V0X2ZlZV9zaGFyaW5nKSAhPT1cclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHAud2hpdGVsaXN0X21hcmtldF9mZWVfc2hhcmluZylcclxuICAgICAgICApXHJcbiAgICAgICAgICAgIHRhYlVwZGF0ZUluZGV4W1wiMVwiXSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8qIERlc2NyaXB0aW9uICovXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBzLnVwZGF0ZS5kZXNjcmlwdGlvbi5tYWluICE9PSBwLnVwZGF0ZS5kZXNjcmlwdGlvbi5tYWluIHx8XHJcbiAgICAgICAgICAgIHMudXBkYXRlLmRlc2NyaXB0aW9uLnNob3J0X25hbWUgIT09XHJcbiAgICAgICAgICAgICAgICBwLnVwZGF0ZS5kZXNjcmlwdGlvbi5zaG9ydF9uYW1lIHx8XHJcbiAgICAgICAgICAgIHMudXBkYXRlLmRlc2NyaXB0aW9uLm1hcmtldCAhPT0gcC51cGRhdGUuZGVzY3JpcHRpb24ubWFya2V0XHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICB0YWJVcGRhdGVJbmRleFtcIjJcIl0gPSB0cnVlO1xyXG5cclxuICAgICAgICAvKiBCaXRhc3NldCBvcHRpb25zICovXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLmJpdGFzc2V0X29wdHMpICE9PVxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLm9yaWdpbmFsX2JpdGFzc2V0X29wdHMpXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICB0YWJVcGRhdGVJbmRleFtcIjNcIl0gPSB0cnVlO1xyXG5cclxuICAgICAgICAvKiBQZXJtaXNzaW9ucyAqL1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy5wZXJtaXNzaW9uQm9vbGVhbnMpICE9PVxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLnBlcm1pc3Npb25Cb29sZWFucylcclxuICAgICAgICApXHJcbiAgICAgICAgICAgIHRhYlVwZGF0ZUluZGV4W1wiNFwiXSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8qIEZsYWdzICovXHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocy5mbGFnQm9vbGVhbnMpICE9PSBKU09OLnN0cmluZ2lmeShwLmZsYWdCb29sZWFucykgfHxcclxuICAgICAgICAgICAgcy51cGRhdGUubWFya2V0X2ZlZV9wZXJjZW50ICE9PSBwLnVwZGF0ZS5tYXJrZXRfZmVlX3BlcmNlbnQgfHxcclxuICAgICAgICAgICAgcy51cGRhdGUubWF4X21hcmtldF9mZWUgIT09IHAudXBkYXRlLm1heF9tYXJrZXRfZmVlIHx8XHJcbiAgICAgICAgICAgIHMudXBkYXRlLnJld2FyZF9wZXJjZW50ICE9PSBwLnVwZGF0ZS5yZXdhcmRfcGVyY2VudFxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgdGFiVXBkYXRlSW5kZXhbXCI1XCJdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzLmZlZWRQcm9kdWNlcnMpICE9PVxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwLm9yaWdpbmFsRmVlZFByb2R1Y2VycylcclxuICAgICAgICApXHJcbiAgICAgICAgICAgIHRhYlVwZGF0ZUluZGV4W1wiNlwiXSA9IHRydWU7XHJcblxyXG4gICAgICAgIHJldHVybiB0YWJVcGRhdGVJbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBwYWdlQ2hhbmdlZCgpIHtcclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICBpc0JpdEFzc2V0LFxyXG4gICAgICAgICAgICBiaXRhc3NldF9vcHRzLFxyXG4gICAgICAgICAgICBvcmlnaW5hbF9iaXRhc3NldF9vcHRzLFxyXG4gICAgICAgICAgICBmZWVkUHJvZHVjZXJzLFxyXG4gICAgICAgICAgICBvcmlnaW5hbEZlZWRQcm9kdWNlcnNcclxuICAgICAgICB9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICB0aGlzLmFzc2V0Q2hhbmdlZCgpIHx8XHJcbiAgICAgICAgICAgIChpc0JpdEFzc2V0ICYmXHJcbiAgICAgICAgICAgICAgICAoSlNPTi5zdHJpbmdpZnkoYml0YXNzZXRfb3B0cykgIT09XHJcbiAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkob3JpZ2luYWxfYml0YXNzZXRfb3B0cykgfHxcclxuICAgICAgICAgICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3coXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlZWRQcm9kdWNlcnMudG9KUygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEZlZWRQcm9kdWNlcnMudG9KUygpXHJcbiAgICAgICAgICAgICAgICAgICAgKSkpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfdXBkYXRlQXNzZXQoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgLy8gQ2xvc2UgY29uZmlybV9tb2RhbCBpZiBpdCdzIG9wZW5cclxuICAgICAgICB0aGlzLmhpZGVBc3NldFVwZGF0ZUNvbmZpcm1hdGlvbk1vZGFsKCk7XHJcblxyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIHVwZGF0ZSxcclxuICAgICAgICAgICAgaXNzdWVyLFxyXG4gICAgICAgICAgICBuZXdfaXNzdWVyX2FjY291bnRfaWQsXHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZSxcclxuICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIGlzQml0QXNzZXQsXHJcbiAgICAgICAgICAgIGJpdGFzc2V0X29wdHMsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsX2JpdGFzc2V0X29wdHMsXHJcbiAgICAgICAgICAgIGZlZWRQcm9kdWNlcnMsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsRmVlZFByb2R1Y2Vyc1xyXG4gICAgICAgIH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBsZXQgZmxhZ3MgPSBhc3NldFV0aWxzLmdldEZsYWdzKGZsYWdCb29sZWFucyk7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBpbmNvcnJlY3QgZmxhZyBmcm9tIGdlbmVzaXNcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXQuZ2V0SW4oW1wib3B0aW9uc1wiLCBcImZsYWdzXCJdKSAmIDEyOCAmJlxyXG4gICAgICAgICAgICAhKHRoaXMucHJvcHMuYXNzZXQuZ2V0SW4oW1wib3B0aW9uc1wiLCBcImlzc3Vlcl9wZXJtaXNzaW9uc1wiXSkgJiAxMjgpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGZsYWdzICs9IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHBlcm1pc3Npb25zID0gYXNzZXRVdGlscy5nZXRQZXJtaXNzaW9ucyhcclxuICAgICAgICAgICAgcGVybWlzc2lvbkJvb2xlYW5zLFxyXG4gICAgICAgICAgICBpc0JpdEFzc2V0XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUubWFya2V0SW5wdXQgIT09IHVwZGF0ZS5kZXNjcmlwdGlvbi5tYXJrZXQpIHtcclxuICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uLm1hcmtldCA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IEpTT04uc3RyaW5naWZ5KHVwZGF0ZS5kZXNjcmlwdGlvbik7XHJcblxyXG4gICAgICAgIGxldCBhdXRocyA9IHtcclxuICAgICAgICAgICAgd2hpdGVsaXN0X2F1dGhvcml0aWVzOiB0aGlzLnN0YXRlLndoaXRlbGlzdF9hdXRob3JpdGllcyxcclxuICAgICAgICAgICAgYmxhY2tsaXN0X2F1dGhvcml0aWVzOiB0aGlzLnN0YXRlLmJsYWNrbGlzdF9hdXRob3JpdGllcyxcclxuICAgICAgICAgICAgd2hpdGVsaXN0X21hcmtldHM6IHRoaXMuc3RhdGUud2hpdGVsaXN0X21hcmtldHMsXHJcbiAgICAgICAgICAgIGJsYWNrbGlzdF9tYXJrZXRzOiB0aGlzLnN0YXRlLmJsYWNrbGlzdF9tYXJrZXRzLFxyXG4gICAgICAgICAgICB3aGl0ZWxpc3RfbWFya2V0X2ZlZV9zaGFyaW5nOiB0aGlzLnN0YXRlXHJcbiAgICAgICAgICAgICAgICAud2hpdGVsaXN0X21hcmtldF9mZWVfc2hhcmluZ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBmZWVkUHJvZHVjZXJzSlMgPSBpc0JpdEFzc2V0ID8gZmVlZFByb2R1Y2Vycy50b0pTKCkgOiBudWxsO1xyXG4gICAgICAgIGxldCBvcmlnaW5hbEZlZWRQcm9kdWNlcnNKUyA9IGlzQml0QXNzZXRcclxuICAgICAgICAgICAgPyBvcmlnaW5hbEZlZWRQcm9kdWNlcnMudG9KUygpXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuXHJcbiAgICAgICAgQXNzZXRBY3Rpb25zLnVwZGF0ZUFzc2V0KFxyXG4gICAgICAgICAgICBpc3N1ZXIsXHJcbiAgICAgICAgICAgIG5ld19pc3N1ZXJfYWNjb3VudF9pZCxcclxuICAgICAgICAgICAgdXBkYXRlLFxyXG4gICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUsXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXQsXHJcbiAgICAgICAgICAgIGZsYWdzLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9ucyxcclxuICAgICAgICAgICAgaXNCaXRBc3NldCxcclxuICAgICAgICAgICAgYml0YXNzZXRfb3B0cyxcclxuICAgICAgICAgICAgb3JpZ2luYWxfYml0YXNzZXRfb3B0cyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIGF1dGhzLFxyXG4gICAgICAgICAgICBmZWVkUHJvZHVjZXJzSlMsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsRmVlZFByb2R1Y2Vyc0pTLFxyXG4gICAgICAgICAgICB0aGlzLmFzc2V0Q2hhbmdlZCgpXHJcbiAgICAgICAgKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgICAgICBcIi4uLiBBc3NldEFjdGlvbnMudXBkYXRlQXNzZXQoYWNjb3VudF9pZCwgdXBkYXRlKVwiLFxyXG4gICAgICAgICAgICAgICAgaXNzdWVyLFxyXG4gICAgICAgICAgICAgICAgbmV3X2lzc3Vlcl9hY2NvdW50X2lkLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIENoYWluU3RvcmUuZ2V0QXNzZXQodGhpcy5wcm9wcy5hc3NldC5nZXQoXCJpZFwiKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMucmVzZXRTdGF0ZSh0aGlzLnByb3BzKSk7XHJcbiAgICAgICAgICAgIH0sIDMwMDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZXNldChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMucmVzZXRTdGF0ZSh0aGlzLnByb3BzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2ZvcmNlUG9zaXRpdmUobnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQobnVtYmVyKSA8IDAgPyBcIjBcIiA6IG51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICBfb25VcGRhdGVEZXNjcmlwdGlvbih2YWx1ZSwgZSkge1xyXG4gICAgICAgIGxldCB7dXBkYXRlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHVwZGF0ZVN0YXRlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiY29uZGl0aW9uXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUubGVuZ3RoID4gNjApIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTdGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV0gPSBlLnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcInNob3J0X25hbWVcIjpcclxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZS5sZW5ndGggPiAzMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVN0YXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uW3ZhbHVlXSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwibWFya2V0XCI6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb25bdmFsdWVdID0gZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcInZpc2libGVcIjpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV0gPSAhdXBkYXRlLmRlc2NyaXB0aW9uW3ZhbHVlXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvblt2YWx1ZV0gPSBlLnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHVwZGF0ZVN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGVFZGl0RmllbGRzKHVwZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlQml0QXNzZXRPcHRzKHZhbHVlLCBlKSB7XHJcbiAgICAgICAgbGV0IHtiaXRhc3NldF9vcHRzfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIHN3aXRjaCAodmFsdWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImZvcmNlX3NldHRsZW1lbnRfb2Zmc2V0X3BlcmNlbnRcIjpcclxuICAgICAgICAgICAgY2FzZSBcIm1heGltdW1fZm9yY2Vfc2V0dGxlbWVudF92b2x1bWVcIjpcclxuICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHNbdmFsdWVdID1cclxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGUudGFyZ2V0LnZhbHVlKSAqXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRDb25zdGFudHMuR1JBUEhFTkVfMV9QRVJDRU5UO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwiZmVlZF9saWZldGltZV9zZWNcIjpcclxuICAgICAgICAgICAgY2FzZSBcImZvcmNlX3NldHRsZW1lbnRfZGVsYXlfc2VjXCI6XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChwYXJzZUZsb2F0KGUudGFyZ2V0LnZhbHVlKSAqIDYwLCAxMClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzW3ZhbHVlXSA9IHBhcnNlSW50KFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpICogNjAsXHJcbiAgICAgICAgICAgICAgICAgICAgMTBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJzaG9ydF9iYWNraW5nX2Fzc2V0XCI6XHJcbiAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzW3ZhbHVlXSA9IGU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJtaW5pbXVtX2ZlZWRzXCI6XHJcbiAgICAgICAgICAgICAgICBiaXRhc3NldF9vcHRzW3ZhbHVlXSA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25VcGRhdGVJbnB1dCh2YWx1ZSwgZSkge1xyXG4gICAgICAgIGxldCB7dXBkYXRlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHVwZGF0ZVN0YXRlID0gdHJ1ZTtcclxuICAgICAgICBsZXQgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJtYXJrZXRfZmVlX3BlcmNlbnRcIjpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVt2YWx1ZV0gPSB0aGlzLl9mb3JjZVBvc2l0aXZlKGUudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwicmV3YXJkX3BlcmNlbnRcIjpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVt2YWx1ZV0gPSB0aGlzLl9mb3JjZVBvc2l0aXZlKGUudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwibWF4X21hcmtldF9mZWVcIjpcclxuICAgICAgICAgICAgICAgIGxldCBtYXJrZXRGZWUgPSBlLmFtb3VudC5yZXBsYWNlKC8sL2csIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBiaWcobWFya2V0RmVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGltZXMocHJlY2lzaW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ3QoR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWSlcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVN0YXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF9tYXJrZXRfZmVlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiVGhlIG51bWJlciB5b3UgdHJpZWQgdG8gZW50ZXIgaXMgdG9vIGxhcmdlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IHV0aWxzLmxpbWl0QnlQcmVjaXNpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0RmVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwibWF4X3N1cHBseVwiOlxyXG4gICAgICAgICAgICAgICAgbGV0IG1heFN1cHBseSA9IGUuYW1vdW50LnJlcGxhY2UoLywvZywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAvLyB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIGlmICgobmV3IGJpZyhtYXhTdXBwbHkpKS50aW1lcyhNYXRoLnBvdygxMCwgcHJlY2lzaW9uKSkuZ3QoR1JBUEhFTkVfTUFYX1NIQVJFX1NVUFBMWSkpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgdXBkYXRlU3RhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUoe2Vycm9yczoge21heF9zdXBwbHk6IFwiVGhlIG51bWJlciB5b3UgdHJpZWQgdG8gZW50ZXIgaXMgdG9vIGxhcmdlXCJ9fSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IHV0aWxzLmxpbWl0QnlQcmVjaXNpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4U3VwcGx5LFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgLy8gfSBjYXRjaChlKSB7fVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdXBkYXRlW3ZhbHVlXSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodXBkYXRlU3RhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dXBkYXRlOiB1cGRhdGV9KTtcclxuICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGVFZGl0RmllbGRzKHVwZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF92YWxpZGF0ZUVkaXRGaWVsZHMobmV3X3N0YXRlKSB7XHJcbiAgICAgICAgbGV0IGNlciA9IG5ld19zdGF0ZS5jb3JlX2V4Y2hhbmdlX3JhdGU7XHJcbiAgICAgICAgbGV0IGZlZWRQcm9kdWNlcnMgPSBuZXdfc3RhdGUuZmVlZFByb2R1Y2Vyc1xyXG4gICAgICAgICAgICA/IG5ld19zdGF0ZS5mZWVkUHJvZHVjZXJzXHJcbiAgICAgICAgICAgIDogdGhpcy5zdGF0ZS5mZWVkUHJvZHVjZXJzO1xyXG4gICAgICAgIGxldCBmbGFnQm9vbGVhbnMgPSB0aGlzLnN0YXRlLmZsYWdCb29sZWFucztcclxuICAgICAgICBsZXQge2Fzc2V0LCBjb3JlfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGxldCBlcnJvcnMgPSB7XHJcbiAgICAgICAgICAgIG1heF9zdXBwbHk6IG51bGwsXHJcbiAgICAgICAgICAgIHF1b3RlX2Fzc2V0OiBudWxsLFxyXG4gICAgICAgICAgICBiYXNlX2Fzc2V0OiBudWxsLFxyXG4gICAgICAgICAgICBtYXhfZmVlZF9wcm9kdWNlcjogbnVsbCxcclxuICAgICAgICAgICAgY29uZmxpY3RfcHJvZHVjZXI6IG51bGwsXHJcbiAgICAgICAgICAgIGludmFsaWRfbWFya2V0X3BhaXI6IG51bGxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBwID0gdGhpcy5wcm9wcy5hc3NldC5nZXQoXCJwcmVjaXNpb25cIik7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZXJyb3JzLm1heF9zdXBwbHkgPVxyXG4gICAgICAgICAgICAgICAgbmV3X3N0YXRlLm1heF9zdXBwbHkgPD0gMFxyXG4gICAgICAgICAgICAgICAgICAgID8gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWF4X3Bvc2l0aXZlXCJcclxuICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICA6IG5ldyBiaWcocGFyc2VJbnQobmV3X3N0YXRlLm1heF9zdXBwbHksIDEwKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAudGltZXMoTWF0aC5wb3coMTAsIHApKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5ndChHUkFQSEVORV9NQVhfU0hBUkVfU1VQUExZKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy50b29fbGFyZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycjpcIiwgZXJyKTtcclxuICAgICAgICAgICAgZXJyb3JzLm1heF9zdXBwbHkgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnRvb19sYXJnZVwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2VyKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIGNlci5xdW90ZS5hc3NldF9pZCAhPT0gYXNzZXQuZ2V0KFwiaWRcIikgJiZcclxuICAgICAgICAgICAgICAgIGNlci5iYXNlLmFzc2V0X2lkICE9PSBhc3NldC5nZXQoXCJpZFwiKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIGVycm9ycy5xdW90ZV9hc3NldCA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm5lZWRfYXNzZXRcIixcclxuICAgICAgICAgICAgICAgICAgICB7bmFtZTogYXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgY2VyLnF1b3RlLmFzc2V0X2lkICE9PSBjb3JlLmdldChcImlkXCIpICYmXHJcbiAgICAgICAgICAgICAgICBjZXIuYmFzZS5hc3NldF9pZCAhPT0gY29yZS5nZXQoXCJpZFwiKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIGVycm9ycy5iYXNlX2Fzc2V0ID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubmVlZF9hc3NldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHtuYW1lOiBjb3JlLmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZlZWRQcm9kdWNlcnMpIHtcclxuICAgICAgICAgICAgaWYgKGZlZWRQcm9kdWNlcnMuc2l6ZSA+IHRoaXMuc3RhdGUubWF4RmVlZFByb2R1Y2Vycykge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLm1heF9mZWVkX3Byb2R1Y2VyID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMudG9vX21hbnlfZmVlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHttYXg6IHRoaXMuc3RhdGUubWF4RmVlZFByb2R1Y2Vyc31cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnMuY29tbWl0dGVlX2ZlZF9hc3NldCAmJlxyXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnMud2l0bmVzc19mZWRfYXNzZXRcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgZXJyb3JzLmNvbmZsaWN0X3Byb2R1Y2VyID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5jb25mbGljdF9mZWVkXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm1hcmtldElucHV0ID09IHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwic3ltYm9sXCIpKSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5pbnZhbGlkX21hcmtldF9wYWlyID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgXCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5pbnZhbGlkX21hcmtldF9wYWlyXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpc1ZhbGlkID1cclxuICAgICAgICAgICAgIWVycm9ycy5pbnZhbGlkX21hcmtldF9wYWlyICYmXHJcbiAgICAgICAgICAgICFlcnJvcnMubWF4X3N1cHBseSAmJlxyXG4gICAgICAgICAgICAhZXJyb3JzLmJhc2VfYXNzZXQgJiZcclxuICAgICAgICAgICAgIWVycm9ycy5xdW90ZV9hc3NldCAmJlxyXG4gICAgICAgICAgICAhZXJyb3JzLm1heF9mZWVkX3Byb2R1Y2VyICYmXHJcbiAgICAgICAgICAgICFlcnJvcnMuY29uZmxpY3RfcHJvZHVjZXI7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzVmFsaWQ6IGlzVmFsaWQsIGVycm9yczogZXJyb3JzfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uQ29yZVJhdGVDaGFuZ2UodHlwZSwgYW1vdW50KSB7XHJcbiAgICAgICAgYW1vdW50LmFtb3VudCA9XHJcbiAgICAgICAgICAgIGFtb3VudC5hbW91bnQgPT0gXCJcIiA/IFwiMFwiIDogYW1vdW50LmFtb3VudC5yZXBsYWNlKC8sL2csIFwiXCIpO1xyXG5cclxuICAgICAgICBhbW91bnQuYW1vdW50ID0gdXRpbHMubGltaXRCeVByZWNpc2lvbihcclxuICAgICAgICAgICAgYW1vdW50LmFtb3VudCxcclxuICAgICAgICAgICAgYW1vdW50LmFzc2V0LmdldChcInByZWNpc2lvblwiKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGxldCB7Y29yZV9leGNoYW5nZV9yYXRlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlW3R5cGVdID0ge1xyXG4gICAgICAgICAgICBhbW91bnQ6IGFtb3VudC5hbW91bnQsXHJcbiAgICAgICAgICAgIGFzc2V0X2lkOiBhbW91bnQuYXNzZXQuZ2V0KFwiaWRcIilcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkFjY291bnRDaGFuZ2VkKGtleSwgYWNjb3VudCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBba2V5XTogYWNjb3VudCA/IGFjY291bnQuZ2V0KFwiaWRcIikgOiBudWxsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25BY2NvdW50TmFtZUNoYW5nZWQoa2V5LCBuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIFtrZXldOiBuYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uSW5wdXRDb3JlQXNzZXQodHlwZSwgYXNzZXQpIHtcclxuICAgICAgICBpZiAodHlwZSA9PT0gXCJxdW90ZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgcXVvdGVBc3NldElucHV0OiBhc3NldFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiYmFzZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgYmFzZUFzc2V0SW5wdXQ6IGFzc2V0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25Gb3VuZENvcmVBc3NldCh0eXBlLCBhc3NldCkge1xyXG4gICAgICAgIGlmIChhc3NldCkge1xyXG4gICAgICAgICAgICBsZXQgY29yZV9yYXRlID0gdGhpcy5zdGF0ZS5jb3JlX2V4Y2hhbmdlX3JhdGU7XHJcbiAgICAgICAgICAgIGNvcmVfcmF0ZVt0eXBlXS5hc3NldF9pZCA9IGFzc2V0LmdldChcImlkXCIpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGU6IGNvcmVfcmF0ZVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRlRWRpdEZpZWxkcyh7XHJcbiAgICAgICAgICAgICAgICBtYXhfc3VwcGx5OiB0aGlzLnN0YXRlLm1heF9zdXBwbHksXHJcbiAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGU6IGNvcmVfcmF0ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uSW5wdXRNYXJrZXQoYXNzZXQpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgbWFya2V0SW5wdXQ6IGFzc2V0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uRm91bmRNYXJrZXRBc3NldChhc3NldCkge1xyXG4gICAgICAgIGlmIChhc3NldCkge1xyXG4gICAgICAgICAgICB0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uKFwibWFya2V0XCIsIGFzc2V0LmdldChcInN5bWJvbFwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vbkZsYWdDaGFuZ2Uoa2V5KSB7XHJcbiAgICAgICAgbGV0IGJvb2xlYW5zID0gdGhpcy5zdGF0ZS5mbGFnQm9vbGVhbnM7XHJcbiAgICAgICAgYm9vbGVhbnNba2V5XSA9ICFib29sZWFuc1trZXldO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnM6IGJvb2xlYW5zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fdmFsaWRhdGVFZGl0RmllbGRzKHt9KTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0Q3VycmVudFN1cHBseSgpIHtcclxuICAgICAgICBjb25zdCB7YXNzZXQsIGdldER5bmFtaWNPYmplY3R9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgZ2V0RHluYW1pY09iamVjdCAmJlxyXG4gICAgICAgICAgICBnZXREeW5hbWljT2JqZWN0KGFzc2V0LmdldChcImR5bmFtaWNfYXNzZXRfZGF0YV9pZFwiKSkuZ2V0KFxyXG4gICAgICAgICAgICAgICAgXCJjdXJyZW50X3N1cHBseVwiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblBlcm1pc3Npb25DaGFuZ2Uoa2V5KSB7XHJcbiAgICAgICAgY29uc3Qge2lzQml0QXNzZXQsIHBlcm1pc3Npb25Cb29sZWFuc30gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBjb25zdCBkaXNhYmxlZCA9ICFhc3NldFV0aWxzLmdldEZsYWdCb29sZWFucyhcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5hc3NldC5nZXRJbihbXCJvcHRpb25zXCIsIFwiaXNzdWVyX3Blcm1pc3Npb25zXCJdKSxcclxuICAgICAgICAgICAgaXNCaXRBc3NldFxyXG4gICAgICAgIClba2V5XTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2dldEN1cnJlbnRTdXBwbHkoKSA+IDAgJiYgZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmludmFsaWRfcGVybWlzc2lvbnNfY2hhbmdlXCJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBib29sZWFucyA9IHBlcm1pc3Npb25Cb29sZWFucztcclxuICAgICAgICBib29sZWFuc1trZXldID0gIWJvb2xlYW5zW2tleV07XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb29sZWFuczogYm9vbGVhbnNcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25DbGFpbUlucHV0KGFzc2V0KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGNsYWltRmVlc0Ftb3VudDogYXNzZXQuYW1vdW50XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2VMaXN0KGtleSwgYWN0aW9uID0gXCJhZGRcIiwgaWQpIHtcclxuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMuc3RhdGVba2V5XTtcclxuICAgICAgICBpZiAoY3VycmVudCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBuZXcgSW1tdXRhYmxlLkxpc3QoW10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYWN0aW9uID09PSBcImFkZFwiICYmICFjdXJyZW50LmluY2x1ZGVzKGlkKSkge1xyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wdXNoKGlkKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJyZW1vdmVcIiAmJiBjdXJyZW50LmluY2x1ZGVzKGlkKSkge1xyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5yZW1vdmUoY3VycmVudC5pbmRleE9mKGlkKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1trZXldOiBjdXJyZW50fSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2VGZWVkUHJvZHVjZXJMaXN0KGFjdGlvbiA9IFwiYWRkXCIsIGlkKSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnN0YXRlLmZlZWRQcm9kdWNlcnM7XHJcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gXCJhZGRcIiAmJiAhY3VycmVudC5pbmNsdWRlcyhpZCkpIHtcclxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucHVzaChpZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwicmVtb3ZlXCIgJiYgY3VycmVudC5pbmNsdWRlcyhpZCkpIHtcclxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucmVtb3ZlKGN1cnJlbnQuaW5kZXhPZihpZCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtmZWVkUHJvZHVjZXJzOiBjdXJyZW50fSk7XHJcbiAgICAgICAgdGhpcy5fdmFsaWRhdGVFZGl0RmllbGRzKHtmZWVkUHJvZHVjZXJzOiBjdXJyZW50fSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7YXNzZXR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICBlcnJvcnMsXHJcbiAgICAgICAgICAgIGlzVmFsaWQsXHJcbiAgICAgICAgICAgIHVwZGF0ZSxcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLFxyXG4gICAgICAgICAgICBmbGFnQm9vbGVhbnMsXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb29sZWFucyxcclxuICAgICAgICAgICAgY2xhaW1GZWVzQW1vdW50LFxyXG4gICAgICAgICAgICBpc0JpdEFzc2V0LFxyXG4gICAgICAgICAgICBiaXRhc3NldF9vcHRzXHJcbiAgICAgICAgfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIC8vIEVzdGltYXRlIHRoZSBhc3NldCB1cGRhdGUgZmVlXHJcbiAgICAgICAgbGV0IHN5bWJvbCA9IGFzc2V0LmdldChcInN5bWJvbFwiKTtcclxuICAgICAgICBsZXQgdXBkYXRlRmVlID0gXCJOL0FcIjtcclxuXHJcbiAgICAgICAgdXBkYXRlRmVlID0gPEZvcm1hdHRlZEZlZSBvcFR5cGU9XCJhc3NldF91cGRhdGVcIiAvPjtcclxuXHJcbiAgICAgICAgbGV0IGNyX3F1b3RlX2Fzc2V0ID0gQ2hhaW5TdG9yZS5nZXRBc3NldChcclxuICAgICAgICAgICAgY29yZV9leGNoYW5nZV9yYXRlLnF1b3RlLmFzc2V0X2lkXHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihcclxuICAgICAgICAgICAgY3JfcXVvdGVfYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgY3JfYmFzZV9hc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQoXHJcbiAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlLmFzc2V0X2lkXHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgYmFzZVByZWNpc2lvbiA9IHV0aWxzLmdldF9hc3NldF9wcmVjaXNpb24oXHJcbiAgICAgICAgICAgIGNyX2Jhc2VfYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IGNyX3F1b3RlX2Ftb3VudCA9XHJcbiAgICAgICAgICAgIHBhcnNlRmxvYXQoY29yZV9leGNoYW5nZV9yYXRlLnF1b3RlLmFtb3VudCkgKiBwcmVjaXNpb247XHJcbiAgICAgICAgbGV0IGNyX2Jhc2VfYW1vdW50ID1cclxuICAgICAgICAgICAgcGFyc2VGbG9hdChjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZS5hbW91bnQpICogYmFzZVByZWNpc2lvbjtcclxuICAgICAgICBsZXQgb3JpZ2luYWxQZXJtaXNzaW9ucyA9IGFzc2V0VXRpbHMuZ2V0RmxhZ0Jvb2xlYW5zKFxyXG4gICAgICAgICAgICBhc3NldC5nZXRJbihbXCJvcHRpb25zXCIsIFwiaXNzdWVyX3Blcm1pc3Npb25zXCJdKSxcclxuICAgICAgICAgICAgYXNzZXQuZ2V0KFwiYml0YXNzZXRcIikgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgLy8gTG9vcCBvdmVyIGZsYWdzXHJcbiAgICAgICAgbGV0IGZsYWdzID0gW107XHJcbiAgICAgICAgbGV0IGdldEZsYWcgPSAoa2V5LCBvbkNsaWNrLCBpc0NoZWNrZWQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDx0YWJsZSBrZXk9e1widGFibGVfXCIgKyBrZXl9IGNsYXNzTmFtZT1cInRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwiLCB3aWR0aDogXCI4MCVcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17YGFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLiR7a2V5fWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiBcIm5vbmVcIiwgdGV4dEFsaWduOiBcInJpZ2h0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2lzQ2hlY2tlZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2xpY2t9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIG9yaWdpbmFsUGVybWlzc2lvbnMpIHtcclxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsUGVybWlzc2lvbnNba2V5XSAmJiBrZXkgIT09IFwiY2hhcmdlX21hcmtldF9mZWVcIikge1xyXG4gICAgICAgICAgICAgICAgZmxhZ3MucHVzaChcclxuICAgICAgICAgICAgICAgICAgICBnZXRGbGFnKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uRmxhZ0NoYW5nZS5iaW5kKHRoaXMsIGtleSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdCb29sZWFuc1trZXldXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZmxhZ3MucHVzaChcclxuICAgICAgICAgICAgZ2V0RmxhZyhcclxuICAgICAgICAgICAgICAgIFwidmlzaWJsZVwiLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25VcGRhdGVEZXNjcmlwdGlvbi5iaW5kKHRoaXMsIFwidmlzaWJsZVwiKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvbi52aXNpYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgPyBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIDogdXBkYXRlLmRlc2NyaXB0aW9uLnZpc2libGUgPT09IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBMb29wIG92ZXIgcGVybWlzc2lvbnNcclxuICAgICAgICBsZXQgcGVybWlzc2lvbnMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gb3JpZ2luYWxQZXJtaXNzaW9ucykge1xyXG4gICAgICAgICAgICBpZiAodHJ1ZSB8fCBvcmlnaW5hbFBlcm1pc3Npb25zW2tleV0pIHtcclxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb25zLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGtleT17XCJ0YWJsZV9cIiArIGtleX0gY2xhc3NOYW1lPVwidGFibGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e2JvcmRlcjogXCJub25lXCIsIHdpZHRoOiBcIjgwJVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2BhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy4ke2tleX1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IFwibm9uZVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTd2l0Y2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3Blcm1pc3Npb25Cb29sZWFuc1trZXldfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uUGVybWlzc2lvbkNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGFic0NoYW5nZWRDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy50YWJzQ2hhbmdlZCgpLmZvckVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRhYnNDaGFuZ2VkQ291bnQrKztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGNvbmZpcm1CdXR0b25zID0gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhcImJ1dHRvblwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhaXNWYWxpZCB8fCAhdGhpcy5wYWdlQ2hhbmdlZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogXCI5cmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2hhbmdlZENvdW50ID4gMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9vcGVuQ29uZmlybS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX3VwZGF0ZUFzc2V0LmJpbmQodGhpcylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAge3RhYnNDaGFuZ2VkQ291bnQgPiAxID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0uc2F2ZV9hbGxcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5zYXZlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKFwiYnV0dG9uIHByaW1hcnkgaG9sbG93XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICF0aGlzLnBhZ2VDaGFuZ2VkKClcclxuICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9yZXNldC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5yZXNldFwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IGNlclZhbGlkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgKGNyX3F1b3RlX2Fzc2V0LmdldChcImlkXCIpID09PSBcIjEuMy4wXCIgfHxcclxuICAgICAgICAgICAgICAgIGNyX2Jhc2VfYXNzZXQuZ2V0KFwiaWRcIikgPT09IFwiMS4zLjBcIikgJiZcclxuICAgICAgICAgICAgKGNyX3F1b3RlX2Fzc2V0LmdldChcImlkXCIpID09PSBhc3NldC5nZXQoXCJpZFwiKSB8fFxyXG4gICAgICAgICAgICAgICAgY3JfYmFzZV9hc3NldC5nZXQoXCJpZFwiKSA9PT0gYXNzZXQuZ2V0KFwiaWRcIikpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGNlclZhbGlkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpc1ByZWRpY3Rpb25NYXJrZXRBc3NldCA9IGFzc2V0LmdldEluKFtcclxuICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxyXG4gICAgICAgICAgICBcImlzX3ByZWRpY3Rpb25fbWFya2V0XCJcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgbGV0IGFzc2V0X2Rlc2NyaXB0aW9uID0gYXNzZXRVdGlscy5wYXJzZURlc2NyaXB0aW9uKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFzc2V0LnRvSlMoKS5vcHRpb25zLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgYXBwLXRhYmxlcyBuby1wYWRkaW5nXCIgcmVmPVwiYXBwVGFibGVzXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgc21hbGwtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYnMtY29udGFpbmVyIGdlbmVyaWMtYm9yZGVyZWQtYm94XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1oZWFkZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJoZWFkZXIudXBkYXRlX2Fzc2V0XCIgLz46e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzeW1ib2x9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmc9XCJ1cGRhdGVBc3NldFRhYlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY2NvdW50LXRhYnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic0NsYXNzPVwiYWNjb3VudC1vdmVydmlldyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50Q2xhc3M9XCJncmlkLWJsb2NrIHBhZGRpbmctdG9wIHNocmluayBzbWFsbC12ZXJ0aWNhbCBtZWRpdW0taG9yaXpvbnRhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9ucz17Y29uZmlybUJ1dHRvbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZVRhYj17aSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YWN0aXZlVGFiOiBpfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wcmltYXJ5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVGFiPXt0aGlzLnRhYkNoYW5nZWQoMCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBsYXJnZS04IGxhcmdlLW9mZnNldC0yIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wcmVjaXNpb25cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+OiB7YXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QW1vdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1heF9zdXBwbHlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dXBkYXRlLm1heF9zdXBwbHl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXhfc3VwcGx5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXthc3NldC5nZXQoXCJpZFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHM9e1thc3NldC5nZXQoXCJpZFwiKV19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfc3VwcGx5ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMubWF4X3N1cHBseX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJoM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY29yZV9leGNoYW5nZV9yYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjZXJWYWxpZCA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBuby1tYXJnaW4gc21hbGwtMTIgbWVkaXVtLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5xdW90ZV9uYW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25JbnB1dENvcmVBc3NldC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInF1b3RlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnF1b3RlQXNzZXRJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldElucHV0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnF1b3RlQXNzZXRJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogXCIxMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRm91bmQ9e3RoaXMuX29uRm91bmRDb3JlQXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NlclZhbGlkID8gbnVsbCA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpbiBzbWFsbC0xMiBtZWRpdW0tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmJhc2VfbmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uSW5wdXRDb3JlQXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhc2VBc3NldElucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0SW5wdXQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFzZUFzc2V0SW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDogXCIxMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRm91bmQ9e3RoaXMuX29uRm91bmRDb3JlQXNzZXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYXNlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLnF1b3RlX2Fzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLnF1b3RlX2Fzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5iYXNlX2Fzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLmJhc2VfYXNzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgbm8tbWFyZ2luIHNtYWxsLTEyIG1lZGl1bS02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBbW91bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5xdW90ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25Db3JlUmF0ZUNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5xdW90ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogXCIxMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIG5vLW1hcmdpbiBzbWFsbC0xMiBtZWRpdW0tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QW1vdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuYmFzZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hbW91bnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbkNvcmVSYXRlQ2hhbmdlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJhc2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVfZXhjaGFuZ2VfcmF0ZS5iYXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hc3NldF9pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMC4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6IFwiMTBweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UucHJpY2VcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkUHJpY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7Zm9udFdlaWdodDogXCJib2xkXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYW1vdW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcl9xdW90ZV9hbW91bnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlX2Fzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUucXVvdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFzc2V0X2lkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlX2Fzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2V4Y2hhbmdlX3JhdGUuYmFzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VfYW1vdW50PXtjcl9iYXNlX2Ftb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g1PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmNlcl93YXJuaW5nXzFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoYXMtZXJyb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY2VyX3dhcm5pbmdfMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwicFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmFwcHJveF9mZWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoge3VwZGF0ZUZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC53aGl0ZWxpc3QudGl0bGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUYWI9e3RoaXMudGFiQ2hhbmdlZCgxKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXRXaGl0ZWxpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVMaXN0RW5hYmxlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnQm9vbGVhbnNbXCJ3aGl0ZV9saXN0XCJdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0RmVlRW5hYmxlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnQm9vbGVhbnNbXCJjaGFyZ2VfbWFya2V0X2ZlZVwiXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlbGlzdF9hdXRob3JpdGllcz17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLndoaXRlbGlzdF9hdXRob3JpdGllc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWNrbGlzdF9hdXRob3JpdGllcz17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmJsYWNrbGlzdF9hdXRob3JpdGllc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlbGlzdF9tYXJrZXRzPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUud2hpdGVsaXN0X21hcmtldHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZWxpc3RfbWFya2V0X2ZlZV9zaGFyaW5nPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAud2hpdGVsaXN0X21hcmtldF9mZWVfc2hhcmluZyA9PT1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3IEltbXV0YWJsZS5MaXN0KFtdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC53aGl0ZWxpc3RfbWFya2V0X2ZlZV9zaGFyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhY2tsaXN0X21hcmtldHM9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5ibGFja2xpc3RfbWFya2V0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld19hdXRob3JpdHlfaWQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5uZXdfYXV0aG9yaXR5X2lkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXR5X25hbWU9e3RoaXMuc3RhdGUuYXV0aG9yaXR5X25hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjb3VudE5hbWVDaGFuZ2VkPXt0aGlzLm9uQWNjb3VudE5hbWVDaGFuZ2VkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjb3VudENoYW5nZWQ9e3RoaXMub25BY2NvdW50Q2hhbmdlZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUxpc3Q9e3RoaXMub25DaGFuZ2VMaXN0LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5hcHByb3hfZmVlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt1cGRhdGVGZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Fzc2V0V2hpdGVsaXN0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZGVzY3JpcHRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUYWI9e3RoaXMudGFiQ2hhbmdlZCgyKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGxhcmdlLTggbGFyZ2Utb2Zmc2V0LTIgZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7aGVpZ2h0OiBcIjdyZW1cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz1cIjFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uLm1haW4gfHwgXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25VcGRhdGVEZXNjcmlwdGlvbi5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1haW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiaDNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnNob3J0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZXNjcmlwdGlvbi5zaG9ydF9uYW1lIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlRGVzY3JpcHRpb24uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG9ydF9uYW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImgzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5tYXJrZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5uYW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbklucHV0TWFya2V0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXthc3NldF9kZXNjcmlwdGlvbi5tYXJrZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17dGhpcy5zdGF0ZS5tYXJrZXRJbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0SW5wdXQ9e3RoaXMuc3RhdGUubWFya2V0SW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IFwiMTBweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdCb3R0b206IFwiMjBweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Gb3VuZD17dGhpcy5fb25Gb3VuZE1hcmtldEFzc2V0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5pbnZhbGlkX21hcmtldF9wYWlyID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMuaW52YWxpZF9tYXJrZXRfcGFpcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXNQcmVkaWN0aW9uTWFya2V0QXNzZXQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiaDNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuY29uZGl0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPVwiMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25kaXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbmRpdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiaDNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZXhwaXJ5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiZGF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5leHBpcnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vblVwZGF0ZURlc2NyaXB0aW9uLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4cGlyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5hcHByb3hfZmVlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt1cGRhdGVGZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0JpdEFzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5iaXRhc3NldF9vcHRzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFRhYj17dGhpcy50YWJDaGFuZ2VkKDMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBsYXJnZS04IGxhcmdlLW9mZnNldC0yIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJpdEFzc2V0T3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdHM9e2JpdGFzc2V0X29wdHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25VcGRhdGU9e3RoaXMub25DaGFuZ2VCaXRBc3NldE9wdHMuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2luZ0Fzc2V0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0YXNzZXRfb3B0cy5zaG9ydF9iYWNraW5nX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0UHJlY2lzaW9uPXthc3NldC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHJlY2lzaW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0U3ltYm9sPXthc3NldC5nZXQoXCJzeW1ib2xcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUJhY2tpbmdBc3NldENoYW5nZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2dldEN1cnJlbnRTdXBwbHkoKSA+IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRCYWNraW5nQXNzZXRDaGFuZ2VDYWxsYmFjaz17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkQmFja2luZ0Fzc2V0Q2hhbmdlQ2FsbGJhY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5hcHByb3hfZmVlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7dXBkYXRlRmVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LnBlcm1pc3Npb25zXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVGFiPXt0aGlzLnRhYkNoYW5nZWQoNCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBsYXJnZS04IGxhcmdlLW9mZnNldC0yIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SGVscENvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e1wiY29tcG9uZW50cy9BY2NvdW50QXNzZXRDcmVhdGVcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb249XCJwZXJtaXNzaW9uc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBoYXMtZXJyb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnBlcm1fd2FybmluZ1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Blcm1pc3Npb25zfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5hcHByb3hfZmVlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt1cGRhdGVGZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZsYWdzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVGFiPXt0aGlzLnRhYkNoYW5nZWQoNSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBsYXJnZS04IGxhcmdlLW9mZnNldC0yIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SGVscENvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9e1wiY29tcG9uZW50cy9BY2NvdW50QXNzZXRDcmVhdGVcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb249XCJmbGFnc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvcmlnaW5hbFBlcm1pc3Npb25zW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGFyZ2VfbWFya2V0X2ZlZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwic3BhblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWFya2V0X2ZlZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogXCIyMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTd2l0Y2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdCb29sZWFucy5jaGFyZ2VfbWFya2V0X2ZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uRmxhZ0NoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGFyZ2VfbWFya2V0X2ZlZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuYW1lcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogIWZsYWdCb29sZWFucy5jaGFyZ2VfbWFya2V0X2ZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogXCIxMHB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiBcIjMwcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMubWFya2V0X2ZlZVwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5tYXJrZXRfZmVlX3BlcmNlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXJrZXRfZmVlX3BlcmNlbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QW1vdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLm1heF9tYXJrZXRfZmVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUubWF4X21hcmtldF9mZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXhfbWFya2V0X2ZlZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17YXNzZXQuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzPXtbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcImlkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjAuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLnJld2FyZF9wZXJjZW50X3Rvb2x0aXBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMucmV3YXJkX3BlcmNlbnRcIiAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlLnJld2FyZF9wZXJjZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uVXBkYXRlSW5wdXQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJld2FyZF9wZXJjZW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMubWF4X21hcmtldF9mZWUgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfbWFya2V0X2ZlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmZsYWdzXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZsYWdzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5hcHByb3hfZmVlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt1cGRhdGVGZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5jb25mbGljdF9wcm9kdWNlciA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBoYXMtZXJyb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3JzLmNvbmZsaWN0X3Byb2R1Y2VyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0JpdEFzc2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mZWVkX3Byb2R1Y2Vyc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUYWI9e3RoaXMudGFiQ2hhbmdlZCg2KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldEZlZWRQcm9kdWNlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXt0aGlzLnByb3BzLmFzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5wcm9wcy5hY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0bmVzc0ZlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zW1wid2l0bmVzc19mZWRfYXNzZXRcIl1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdHRlZUZlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ0Jvb2xlYW5zW1wiY29tbWl0dGVlX2ZlZF9hc3NldFwiXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjZXJzPXt0aGlzLnN0YXRlLmZlZWRQcm9kdWNlcnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUxpc3Q9e3RoaXMub25DaGFuZ2VGZWVkUHJvZHVjZXJMaXN0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9ycy5tYXhfZmVlZF9wcm9kdWNlciA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGhhcy1lcnJvciBsYXJnZS04IGxhcmdlLW9mZnNldC0yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpblRvcDogXCIyMHB4XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvcnMubWF4X2ZlZWRfcHJvZHVjZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgey8qIENvbmZpcm1hdGlvbiBNb2RhbCBvbiBNdWx0aXBsZSBDaGFuZ2VzICovfVxyXG4gICAgICAgICAgICAgICAgPENvbmZpcm1Nb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMuc3RhdGUuaXNBc3NldFVwZGF0ZUNvbmZpcm1hdGlvbk1vZGFsVmlzaWJsZX1cclxuICAgICAgICAgICAgICAgICAgICBoaWRlTW9kYWw9e3RoaXMuaGlkZUFzc2V0VXBkYXRlQ29uZmlybWF0aW9uTW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd01vZGFsPXt0aGlzLnNob3dBc3NldFVwZGF0ZUNvbmZpcm1hdGlvbk1vZGFsfVxyXG4gICAgICAgICAgICAgICAgICAgIHRhYnNDaGFuZ2VkPXt0aGlzLnRhYnNDaGFuZ2VkKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgX2NhbmNlbENvbmZpcm09e3RoaXMuX2NhbmNlbENvbmZpcm0uYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICBfdXBkYXRlQXNzZXQ9e3RoaXMuX3VwZGF0ZUFzc2V0LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbkFjY291bnRBc3NldFVwZGF0ZSA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudEFzc2V0VXBkYXRlKTtcclxuQWNjb3VudEFzc2V0VXBkYXRlID0gQXNzZXRXcmFwcGVyKEFjY291bnRBc3NldFVwZGF0ZSwge1xyXG4gICAgcHJvcE5hbWVzOiBbXCJhc3NldFwiLCBcImNvcmVcIl0sXHJcbiAgICBkZWZhdWx0UHJvcHM6IHtcclxuICAgICAgICBjb3JlOiBcIjEuMy4wXCJcclxuICAgIH0sXHJcbiAgICB3aXRoRHluYW1pYzogdHJ1ZVxyXG59KTtcclxuXHJcbmNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge3RhYnNDaGFuZ2VkfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGNvbnN0IGZvb3RlciA9IFtcclxuICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxyXG4gICAgICAgICAgICAgICAga2V5PVwic3VibWl0XCJcclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMuX3VwZGF0ZUFzc2V0fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwiZ2xvYmFsLmNvbmZpcm1cIil9XHJcbiAgICAgICAgICAgIDwvQnV0dG9uPixcclxuICAgICAgICAgICAgPEJ1dHRvbiBrZXk9XCJjYW5jZWxcIiBvbkNsaWNrPXt0aGlzLnByb3BzLmhpZGVNb2RhbH0+XHJcbiAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwiZ2xvYmFsLmNhbmNlbFwiKX1cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE1vZGFsXHJcbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnByb3BzLnZpc2libGV9XHJcbiAgICAgICAgICAgICAgICBmb290ZXI9e2Zvb3Rlcn1cclxuICAgICAgICAgICAgICAgIG9uQ2FuY2VsPXt0aGlzLnByb3BzLmhpZGVNb2RhbH1cclxuICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LmNvbmZpcm1fYXNzZXRfbW9kYWwuaGVhZGVyXCJcclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC5jb25maXJtX2Fzc2V0X21vZGFsLmFyZV95b3Vfc3VyZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiZGl2XCJcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206IFwiMXJlbVwifX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDx1bD5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RhYnNDaGFuZ2VkW1wiMFwiXSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5wcmltYXJ5XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGFic0NoYW5nZWRbXCIxXCJdID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQud2hpdGVsaXN0LnRpdGxlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGFic0NoYW5nZWRbXCIyXCJdID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmRlc2NyaXB0aW9uXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGFic0NoYW5nZWRbXCIzXCJdID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmJpdGFzc2V0X29wdHNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGFic0NoYW5nZWRbXCI0XCJdID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybWlzc2lvbnNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0YWJzQ2hhbmdlZFtcIjVcIl0gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZmxhZ3NcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogTkVFRFMgQ0hFQ0tJTkcgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0YWJzQ2hhbmdlZFtcIjZcIl0gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZmVlZF9wcm9kdWNlcnNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L01vZGFsPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEFzc2V0VXBkYXRlV3JhcHBlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IGFzc2V0ID0gdGhpcy5wcm9wcy5tYXRjaC5wYXJhbXMuYXNzZXQudG9VcHBlckNhc2UoKTtcclxuICAgICAgICByZXR1cm4gPEFjY291bnRBc3NldFVwZGF0ZSBhc3NldD17YXNzZXR9IHsuLi50aGlzLnByb3BzfSAvPjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcihBc3NldFVwZGF0ZVdyYXBwZXIpO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuaW1wb3J0IEZvcm1hdHRlZEFzc2V0IGZyb20gXCIuL0Zvcm1hdHRlZEFzc2V0XCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuL0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4vQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQge2VzdGltYXRlRmVlfSBmcm9tIFwiY29tbW9uL3RyeEhlbHBlclwiO1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqICBHaXZlbiBhbiBvcGVyYXRpb24gdHlwZSwgZGlzcGxheXMgdGhlIENPUkUgZmVlIGZvciB0aGF0IG9wZXJhdGlvblxyXG4gKlxyXG4gKi9cclxuXHJcbmNsYXNzIEZvcm1hdHRlZEZlZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGdsb2JhbE9iamVjdDogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIG9wVHlwZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgICAgICBvcHRpb25zOiBQcm9wVHlwZXMuYXJyYXlcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBnbG9iYWxPYmplY3Q6IFwiMi4wLjBcIixcclxuICAgICAgICBvcHRpb25zOiBbXVxyXG4gICAgfTtcclxuXHJcbiAgICBnZXRGZWUoKSB7XHJcbiAgICAgICAgLy8gUmV0dXJuIGZlZSB2aWEgcmVmc1xyXG4gICAgICAgIHJldHVybiBlc3RpbWF0ZUZlZShcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vcFR5cGUsXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMub3B0aW9ucyxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5nbG9iYWxPYmplY3RcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge29wVHlwZSwgb3B0aW9ucywgZ2xvYmFsT2JqZWN0fSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGlmICghb3BUeXBlIHx8ICFvcHRpb25zIHx8ICFnbG9iYWxPYmplY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYW1vdW50ID0gZXN0aW1hdGVGZWUob3BUeXBlLCBvcHRpb25zLCBnbG9iYWxPYmplY3QpO1xyXG5cclxuICAgICAgICByZXR1cm4gPEZvcm1hdHRlZEFzc2V0IGFtb3VudD17YW1vdW50fSBhc3NldD1cIjEuMy4wXCIgLz47XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJpbmRUb0NoYWluU3RhdGUoRm9ybWF0dGVkRmVlKTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgTGlua1RvQWNjb3VudEJ5SWQgZnJvbSBcIi4uL1V0aWxpdHkvTGlua1RvQWNjb3VudEJ5SWRcIjtcclxuaW1wb3J0IExpbmtUb0Fzc2V0QnlJZCBmcm9tIFwiLi4vVXRpbGl0eS9MaW5rVG9Bc3NldEJ5SWRcIjtcclxuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuLi9BY2NvdW50L0FjY291bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgQXNzZXRTZWxlY3RvciBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldFNlbGVjdG9yXCI7XHJcbmltcG9ydCBjbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gXCJhbHQtcmVhY3RcIjtcclxuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XHJcbmltcG9ydCBTZXR0aW5nc0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvU2V0dGluZ3NBY3Rpb25zXCI7XHJcblxyXG5jbGFzcyBBc3NldFdoaXRlbGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGxpc3RUeXBlOiBwcm9wcy5hc3NldFdoaXRlTGlzdFR5cGUsXHJcbiAgICAgICAgICAgIGFjY291bnRUYWJsZTogcHJvcHMuYXNzZXRXaGl0ZUxpc3RUeXBlLmluZGV4T2YoXCJtYXJrZXRzXCIpID09PSAtMSxcclxuICAgICAgICAgICAgbGlzdFR5cGVzOiBbXHJcbiAgICAgICAgICAgICAgICBcIndoaXRlbGlzdF9hdXRob3JpdGllc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJibGFja2xpc3RfYXV0aG9yaXRpZXNcIixcclxuICAgICAgICAgICAgICAgIFwid2hpdGVsaXN0X21hcmtldHNcIixcclxuICAgICAgICAgICAgICAgIFwiYmxhY2tsaXN0X21hcmtldHNcIixcclxuICAgICAgICAgICAgICAgIFwid2hpdGVsaXN0X21hcmtldF9mZWVfc2hhcmluZ1wiXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIGFzc2V0SW5wdXQ6IG51bGwsXHJcbiAgICAgICAgICAgIGFzc2V0X2lkOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJBY2NvdW50VGFibGVzKCkge1xyXG4gICAgICAgIGNvbnN0IHtsaXN0VHlwZX0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBsZXQgc2hvd0ZsYWdFbmFibGVFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBlcnJvckxhYmVsID0gXCJleHBsb3Jlci5hc3NldC53aGl0ZWxpc3QuZW5hYmxlX2ZsYWdcIjtcclxuXHJcbiAgICAgICAgaWYgKGxpc3RUeXBlID09PSBcIndoaXRlbGlzdF9tYXJrZXRfZmVlX3NoYXJpbmdcIikge1xyXG4gICAgICAgICAgICAvLyBtYXJrZXQgZmVlIHNoYXJpbmcgd2hpdGVsaXN0XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5wcm9wcy5tYXJrZXRGZWVFbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICBzaG93RmxhZ0VuYWJsZUVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGVycm9yTGFiZWwgPSBcImV4cGxvcmVyLmFzc2V0LndoaXRlbGlzdC5tYXJrZXRfZmVlX2VuYWJsZV9mbGFnXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzaG93RmxhZ0VuYWJsZUVycm9yID0gIXRoaXMucHJvcHMud2hpdGVMaXN0RW5hYmxlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzaG93RmxhZ0VuYWJsZUVycm9yKVxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInR4dGxhYmVsIGNhbmNlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cInBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtlcnJvckxhYmVsfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZSBkYXNoYm9hcmQtdGFibGUgdGFibGUtaG92ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5hY2NvdW50LnRpdGxlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnJlbW92ZV90ZXh0XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzW2xpc3RUeXBlXS5tYXAoYSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2F9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQWNjb3VudEJ5SWQgYWNjb3VudD17YX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjbGlja2FibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNoYW5nZUxpc3QuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicmVtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmNyb3NzX2NpcmNsZS5yZW1vdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3twYWRkaW5nVG9wOiBcIjJyZW1cIn19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e2BhY2NvdW50LndoaXRlbGlzdC4ke2xpc3RUeXBlfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lPXt0aGlzLnByb3BzLmF1dGhvcml0eV9uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmF1dGhvcml0eV9uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5vbkFjY291bnROYW1lQ2hhbmdlZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYXV0aG9yaXR5X25hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFjY291bnRDaGFuZ2VkPXt0aGlzLnByb3BzLm9uQWNjb3VudENoYW5nZWQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5ld19hdXRob3JpdHlfaWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcj17bnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbl9sYWJlbD1cImFjY291bnQucGVybS5jb25maXJtX2FkZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWN0aW9uPXt0aGlzLnByb3BzLm9uQ2hhbmdlTGlzdC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubmV3X2F1dGhvcml0eV9pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Bc3NldENoYW5nZShhc3NldCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBhc3NldElucHV0OiBhc3NldFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkFzc2V0Rm91bmQoYXNzZXQpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgYXNzZXRfaWQ6IGFzc2V0ID8gYXNzZXQuZ2V0KFwiaWRcIikgOiBudWxsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyTWFya2V0VGFibGUoKSB7XHJcbiAgICAgICAgY29uc3Qge2xpc3RUeXBlfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFibGUgZGFzaGJvYXJkLXRhYmxlIHRhYmxlLWhvdmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIuYXNzZXQudGl0bGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucmVtb3ZlX3RleHRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHNbbGlzdFR5cGVdLm1hcChhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17YX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rVG9Bc3NldEJ5SWQgYXNzZXQ9e2F9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY2xpY2thYmxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25DaGFuZ2VMaXN0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0VHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJlbW92ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImNyb3NzLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5jcm9zc19jaXJjbGUucmVtb3ZlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZ1RvcDogXCIycmVtXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICA8QXNzZXRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17YGV4cGxvcmVyLmFzc2V0LndoaXRlbGlzdC4ke2xpc3RUeXBlfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbkFzc2V0Q2hhbmdlLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXt0aGlzLnN0YXRlLmFzc2V0SW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0SW5wdXQ9e3RoaXMuc3RhdGUuYXNzZXRJbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Gb3VuZD17dGhpcy5fb25Bc3NldEZvdW5kLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbl9sYWJlbD1cImFjY291bnQucGVybS5jb25maXJtX2FkZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWN0aW9uPXt0aGlzLnByb3BzLm9uQ2hhbmdlTGlzdC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYXNzZXRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uU3dpdGNoVHlwZSh0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGxpc3RUeXBlOiB0eXBlLFxyXG4gICAgICAgICAgICBhY2NvdW50VGFibGU6IHR5cGUuaW5kZXhPZihcIm1hcmtldHNcIikgPT09IC0xXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcclxuICAgICAgICAgICAgYXNzZXRXaGl0ZUxpc3RUeXBlOiB0eXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHthY2NvdW50VGFibGUsIGxpc3RUeXBlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlSW5kZXggPSB0aGlzLnN0YXRlLmxpc3RUeXBlcy5pbmRleE9mKHRoaXMuc3RhdGUubGlzdFR5cGUpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIGxhcmdlLTggbGFyZ2Utb2Zmc2V0LTIgZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGVhZGVyLXNlbGVjdG9yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiBcIjJyZW1cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlbGVjdG9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5saXN0VHlwZXMubWFwKCh0eXBlLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17dHlwZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFwiaW5saW5lLWJsb2NrXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmFjdGl2ZTogYWN0aXZlSW5kZXggIT09IGluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uU3dpdGNoVHlwZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2BleHBsb3Jlci5hc3NldC53aGl0ZWxpc3QuJHt0eXBlfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIHthY2NvdW50VGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnJlbmRlckFjY291bnRUYWJsZXMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMucmVuZGVyTWFya2V0VGFibGUoKX1cclxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KFxyXG4gICAgQXNzZXRXaGl0ZWxpc3QsXHJcbiAgICB7XHJcbiAgICAgICAgbGlzdGVuVG8oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbU2V0dGluZ3NTdG9yZV07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRQcm9wcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGFzc2V0V2hpdGVMaXN0VHlwZTogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnZpZXdTZXR0aW5ncy5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhc3NldFdoaXRlTGlzdFR5cGVcIixcclxuICAgICAgICAgICAgICAgICAgICBcIndoaXRlbGlzdF9hdXRob3JpdGllc1wiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4pO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBBc3NldEFjdGlvbnMgZnJvbSBcImFjdGlvbnMvQXNzZXRBY3Rpb25zXCI7XHJcbmltcG9ydCBBY2NvdW50U2VsZWN0b3IgZnJvbSBcIi4uL0FjY291bnQvQWNjb3VudFNlbGVjdG9yXCI7XHJcbmltcG9ydCBMaW5rVG9BY2NvdW50QnlJZCBmcm9tIFwiLi4vVXRpbGl0eS9MaW5rVG9BY2NvdW50QnlJZFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBJY29uIGZyb20gXCIuLi9JY29uL0ljb25cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFjY291bnRGZWVkUHJvZHVjZXJzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBwcm9kdWNlcl9uYW1lOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBvbkFjY291bnRDaGFuZ2VkKGFjY291bnQpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgbmV3X3Byb2R1Y2VyX2lkOiBhY2NvdW50ID8gYWNjb3VudC5nZXQoXCJpZFwiKSA6IG51bGxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkFjY291bnROYW1lQ2hhbmdlZChuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHByb2R1Y2VyX25hbWU6IG5hbWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3Qge3dpdG5lc3NGZWQsIGNvbW1pdHRlZUZlZH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBpZiAod2l0bmVzc0ZlZCB8fCBjb21taXR0ZWVGZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IHNtYWxsLTEyIGxhcmdlLTggbGFyZ2Utb2Zmc2V0LTJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cInBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC51c2VyX2lzc3VlZF9hc3NldHMuZmVlZF9ub3RfYWxsb3dlZF8xXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGFzLWVycm9yXCJcclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwicFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5mZWVkX25vdF9hbGxvd2VkXzJcIlxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IHNtYWxsLTEyIGxhcmdlLTggbGFyZ2Utb2Zmc2V0LTJcIj5cclxuICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZSBkYXNoYm9hcmQtdGFibGUgdGFibGUtaG92ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4cGxvcmVyLmFjY291bnQudGl0bGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucmVtb3ZlX3RleHRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMucHJvZHVjZXJzLm1hcCgoYSwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIga2V5PXthfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI3tpICsgMX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7dGV4dEFsaWduOiBcImxlZnRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtUb0FjY291bnRCeUlkIGFjY291bnQ9e2F9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY2xpY2thYmxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25DaGFuZ2VMaXN0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJlbW92ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImNyb3NzLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5jcm9zc19jaXJjbGUucmVtb3ZlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZ1RvcDogXCIycmVtXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtcImFjY291bnQudXNlcl9pc3N1ZWRfYXNzZXRzLmFkZF9mZWVkXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lPXt0aGlzLnN0YXRlLnByb2R1Y2VyX25hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMuc3RhdGUucHJvZHVjZXJfbmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25BY2NvdW50TmFtZUNoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5vbkFjY291bnRDaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yPXtudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uX2xhYmVsPVwiYWNjb3VudC5wZXJtLmNvbmZpcm1fYWRkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY3Rpb249e3RoaXMucHJvcHMub25DaGFuZ2VMaXN0LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubmV3X3Byb2R1Y2VyX2lkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHtMaW5rfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgU3RhdGlzdGljcyBmcm9tIFwiLi9TdGF0aXN0aWNzXCI7XHJcbmltcG9ydCBBY2NvdW50QWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9BY2NvdW50QWN0aW9uc1wiO1xyXG5pbXBvcnQgVGltZUFnbyBmcm9tIFwiLi4vVXRpbGl0eS9UaW1lQWdvXCI7XHJcbmltcG9ydCBIZWxwQ29udGVudCBmcm9tIFwiLi4vVXRpbGl0eS9IZWxwQ29udGVudFwiO1xyXG5pbXBvcnQgYWNjb3VudFV0aWxzIGZyb20gXCJjb21tb24vYWNjb3VudF91dGlsc1wiO1xyXG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xyXG5pbXBvcnQge2dldFdhbGxldE5hbWV9IGZyb20gXCJicmFuZGluZ1wiO1xyXG5pbXBvcnQge2dldFdhbGxldFVSTH0gZnJvbSBcIi4uLy4uL2JyYW5kaW5nXCI7XHJcbmltcG9ydCB7QnV0dG9ufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcbmltcG9ydCBBY2NvdW50UmVmZXJyYWxzVGFibGUgZnJvbSBcIi4vQWNjb3VudFJlZmVycmFsc1RhYmxlXCI7XHJcbmltcG9ydCB7c2V0dGluZ3NBUElzfSBmcm9tIFwiLi4vLi4vYXBpL2FwaUNvbmZpZ1wiO1xyXG5cclxuY2xhc3MgQWNjb3VudE1lbWJlcnNoaXAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcCkge1xyXG4gICAgICAgIHN1cGVyKHByb3ApO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYWNjb3VudDogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnQuaXNSZXF1aXJlZCxcclxuICAgICAgICBncHJvcHM6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZCxcclxuICAgICAgICBkcHJvcHM6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZCxcclxuICAgICAgICBjb3JlX2Fzc2V0OiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIGdwcm9wczogXCIyLjAuMFwiLFxyXG4gICAgICAgIGRwcm9wczogXCIyLjEuMFwiLFxyXG4gICAgICAgIGNvcmVfYXNzZXQ6IFwiMS4zLjBcIlxyXG4gICAgfTtcclxuXHJcbiAgICB1cGdyYWRlQWNjb3VudChpZCwgbGlmZXRpbWUsIGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgQWNjb3VudEFjdGlvbnMudXBncmFkZUFjY291bnQoaWQsIGxpZmV0aW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICAgICAgYWNjb3VudFV0aWxzLmdldEZpbmFsRmVlQXNzZXQodGhpcy5wcm9wcy5hY2NvdW50LCBcImFjY291bnRfdXBncmFkZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5wKSB7XHJcbiAgICAgICAgaWYgKG5wLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtyZWZlcnJhbHNJbmRleDogW119KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7Z3Byb3BzLCBkcHJvcHMsIGNvcmVfYXNzZXR9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgbGV0IGFjY291bnQgPSB0aGlzLnByb3BzLmFjY291bnQudG9KUygpO1xyXG5cclxuICAgICAgICBsZXQgbHRyID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGFjY291bnQubGlmZXRpbWVfcmVmZXJyZXIsIGZhbHNlKTtcclxuICAgICAgICBpZiAobHRyKSBhY2NvdW50LmxpZmV0aW1lX3JlZmVycmVyX25hbWUgPSBsdHIuZ2V0KFwibmFtZVwiKTtcclxuICAgICAgICBsZXQgcmVmID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGFjY291bnQucmVmZXJyZXIsIGZhbHNlKTtcclxuICAgICAgICBpZiAocmVmKSBhY2NvdW50LnJlZmVycmVyX25hbWUgPSByZWYuZ2V0KFwibmFtZVwiKTtcclxuICAgICAgICBsZXQgcmVnID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGFjY291bnQucmVnaXN0cmFyLCBmYWxzZSk7XHJcbiAgICAgICAgaWYgKHJlZykgYWNjb3VudC5yZWdpc3RyYXJfbmFtZSA9IHJlZy5nZXQoXCJuYW1lXCIpO1xyXG5cclxuICAgICAgICBsZXQgYWNjb3VudF9uYW1lID0gYWNjb3VudC5uYW1lO1xyXG5cclxuICAgICAgICBsZXQgbmV0d29ya19mZWUgPSBhY2NvdW50Lm5ldHdvcmtfZmVlX3BlcmNlbnRhZ2UgLyAxMDA7XHJcbiAgICAgICAgbGV0IGxpZmV0aW1lX2ZlZSA9IGFjY291bnQubGlmZXRpbWVfcmVmZXJyZXJfZmVlX3BlcmNlbnRhZ2UgLyAxMDA7XHJcbiAgICAgICAgbGV0IHJlZmVycmVyX3RvdGFsX2ZlZSA9IDEwMCAtIG5ldHdvcmtfZmVlIC0gbGlmZXRpbWVfZmVlO1xyXG4gICAgICAgIGxldCByZWZlcnJlcl9mZWUgPVxyXG4gICAgICAgICAgICAocmVmZXJyZXJfdG90YWxfZmVlICogYWNjb3VudC5yZWZlcnJlcl9yZXdhcmRzX3BlcmNlbnRhZ2UpIC8gMTAwMDA7XHJcbiAgICAgICAgbGV0IHJlZ2lzdHJhcl9mZWUgPSAxMDAgLSByZWZlcnJlcl9mZWUgLSBsaWZldGltZV9mZWUgLSBuZXR3b3JrX2ZlZTtcclxuXHJcbiAgICAgICAgbGV0IGxpZmV0aW1lX2Nvc3QgPVxyXG4gICAgICAgICAgICAoZ3Byb3BzLmdldEluKFtcclxuICAgICAgICAgICAgICAgIFwicGFyYW1ldGVyc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJjdXJyZW50X2ZlZXNcIixcclxuICAgICAgICAgICAgICAgIFwicGFyYW1ldGVyc1wiLFxyXG4gICAgICAgICAgICAgICAgOCxcclxuICAgICAgICAgICAgICAgIDEsXHJcbiAgICAgICAgICAgICAgICBcIm1lbWJlcnNoaXBfbGlmZXRpbWVfZmVlXCJcclxuICAgICAgICAgICAgXSkgKlxyXG4gICAgICAgICAgICAgICAgZ3Byb3BzLmdldEluKFtcInBhcmFtZXRlcnNcIiwgXCJjdXJyZW50X2ZlZXNcIiwgXCJzY2FsZVwiXSkpIC9cclxuICAgICAgICAgICAgMTAwMDA7XHJcblxyXG4gICAgICAgIGxldCBtZW1iZXJfc3RhdHVzID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50TWVtYmVyU3RhdHVzKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnRcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBtZW1iZXJzaGlwID0gXCJhY2NvdW50Lm1lbWJlci5cIiArIG1lbWJlcl9zdGF0dXM7XHJcbiAgICAgICAgbGV0IGV4cGlyYXRpb24gPSBudWxsO1xyXG4gICAgICAgIGlmIChtZW1iZXJfc3RhdHVzID09PSBcImFubnVhbFwiKVxyXG4gICAgICAgICAgICBleHBpcmF0aW9uID0gKFxyXG4gICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLmV4cGlyZXNcIiAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICA8VGltZUFnbyB0aW1lPXthY2NvdW50Lm1lbWJlcnNoaXBfZXhwaXJhdGlvbl9kYXRlfSAvPilcclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBsZXQgZXhwaXJhdGlvbl9kYXRlID0gYWNjb3VudC5tZW1iZXJzaGlwX2V4cGlyYXRpb25fZGF0ZTtcclxuICAgICAgICBpZiAoZXhwaXJhdGlvbl9kYXRlID09PSBcIjE5NjktMTItMzFUMjM6NTk6NTlcIilcclxuICAgICAgICAgICAgZXhwaXJhdGlvbl9kYXRlID0gXCJOZXZlclwiO1xyXG4gICAgICAgIGVsc2UgaWYgKGV4cGlyYXRpb25fZGF0ZSA9PT0gXCIxOTcwLTAxLTAxVDAwOjAwOjAwXCIpXHJcbiAgICAgICAgICAgIGV4cGlyYXRpb25fZGF0ZSA9IFwiTi9BXCI7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLWNvbnRhaW5lciBnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFic1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmc9XCJtZW1iZXJzaGlwVGFiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFjY291bnQtdGFic1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2xhc3M9XCJhY2NvdW50LW92ZXJ2aWV3IGJvcmRlcmVkLWhlYWRlciBjb250ZW50LWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cInBhZGRpbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5tZW1iZXIubWVtYmVyc2hpcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PXttZW1iZXJzaGlwfSAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2V4cGlyYXRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIG5vLW1hcmdpblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5vLW1hcmdpbiBncmlkLWJsb2NrIHZlcnRpY2FsIGxhcmdlLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBsYXJnZS0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bWVtYmVyX3N0YXR1cyA9PT1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxpZmV0aW1lXCIgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNtYWxsLTEyIGxhcmdlLTZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IDEwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFzc2V0LWNhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtZGl2aWRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5saWZldGltZV90aXRsZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQubWVtYmVyLnJlZmVycmFsX2luZm9cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWVzQ2FzaGJhY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwIC1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwiaDRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIucmVmZXJyYWxfbGlua1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cInBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIucmVmZXJyYWxfdGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhbGxldF9uYW1lPXtnZXRXYWxsZXROYW1lKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRXYWxsZXRVUkwoKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgLz9yPSR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g1PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNtYWxsLTEyIGxhcmdlLTZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiMTBweCAhaW1wb3J0YW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIZWxwQ29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9XCJjb21wb25lbnRzL0FjY291bnRNZW1iZXJzaGlwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uPVwibGlmZXRpbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlZXNDYXNoYmFjaz17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwMCAtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbGlmZXRpbWVfY29zdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ6IGNvcmVfYXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnVwZ3JhZGVBY2NvdW50LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLnVwZ3JhZGVfbGlmZXRpbWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7ICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RydWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlcl9zdGF0dXMgPT09XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhbm51YWxcIiA/IG51bGwgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudXBncmFkZUFjY291bnQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLnN1YnNjcmliZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgbGFyZ2UtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFzc2V0LWNhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1kaXZpZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuZmVlX2FsbG9jYXRpb25cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGtleS12YWx1ZS10YWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLm5ldHdvcmtfcGVyY2VudGFnZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0d29ya19mZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5saWZldGltZV9yZWZlcnJlclwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17YC9hY2NvdW50LyR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmxpZmV0aW1lX3JlZmVycmVyX25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmxpZmV0aW1lX3JlZmVycmVyX25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTGluaz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpZmV0aW1lX2ZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLnJlZ2lzdHJhclwiIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17YC9hY2NvdW50LyR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LnJlZ2lzdHJhcl9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5yZWdpc3RyYXJfbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmFyX2ZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLnJlZmVycmVyXCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvPXtgL2FjY291bnQvJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQucmVmZXJyZXJfbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQucmVmZXJyZXJfbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJyZXJfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIubWVtYmVyc2hpcF9leHBpcmF0aW9uXCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbl9kYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFzc2V0LWNhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1kaXZpZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuZmVlc19jYXNoYmFja1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0YWJsZSBrZXktdmFsdWUtdGFibGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3RhdGlzdGljc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0X29iamVjdD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LnN0YXRpc3RpY3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIGxhcmdlLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgbGFyZ2UtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFzc2V0LWNhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1kaXZpZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuZmVlX3BlbmRpbmdcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwicFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQubWVtYmVyLmZlZV9wZW5kaW5nX3RleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbnRlbmFuY2VJbnRlcnZhbD17Z3Byb3BzLmdldEluKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFtZXRlcnNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWFpbnRlbmFuY2VfaW50ZXJ2YWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0TWFpbnRlbmFuY2VUaW1lPXtkcHJvcHMuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5leHRfbWFpbnRlbmFuY2VfdGltZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFzc2V0LWNhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1kaXZpZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuZmVlX3Zlc3RpbmdcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwicFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQubWVtYmVyLmZlZV92ZXN0aW5nX3RleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVzdGluZ1RocmVzaG9sZEFtb3VudD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdwcm9wcy5nZXRJbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFtZXRlcnNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNhc2hiYWNrX3Zlc3RpbmdfdGhyZXNob2xkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgucG93KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2Fzc2V0LmdldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInByZWNpc2lvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVzdGluZ1RocmVzaG9sZEFzc2V0PXtjb3JlX2Fzc2V0LmdldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzeW1ib2xcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVzdGluZ1BlcmlvZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdwcm9wcy5nZXRJbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFtZXRlcnNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNhc2hiYWNrX3Zlc3RpbmdfcGVyaW9kX3NlY29uZHNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNjAgL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA2MCAvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDI0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBsYXJnZS02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXNzZXQtY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWRpdmlkZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5mZWVfZGl2aXNpb25cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwicFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQubWVtYmVyLmZlZV9kaXZpc2lvbl90ZXh0LnBhcmFncmFwaF8xXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudF9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlZV9zaGFyZV9uZXR3b3JrPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0d29ya19mZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVlX3NoYXJlX2x0bT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpZmV0aW1lX2ZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWVfc2hhcmVfYWZmaWxpYXRlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJyZXJfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlZV9zaGFyZV9yZWdpc3RyYXI9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXJfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuZmVlX2RpdmlzaW9uX3RleHQucGFyYWdyYXBoXzJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVlX3NoYXJlX25ldHdvcms9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXR3b3JrX2ZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWVfc2hhcmVfbHRtPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlmZXRpbWVfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlZV9zaGFyZV9hZmZpbGlhdGU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcnJlcl9mZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVlX3NoYXJlX3JlZ2lzdHJhcj17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhcl9mZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG89e2AvYWNjb3VudC8ke2FjY291bnRfbmFtZX0vdmVzdGluZ2B9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQubWVtYmVyLmZlZV9kaXZpc2lvbl90ZXh0LnBhcmFncmFwaF8zXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bWVtYmVyX3N0YXR1cyA9PSBcImxpZmV0aW1lXCIgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc0FQSXMuRVNfV1JBUFBFUl9MSVNULmxlbmd0aCA+IDAgPyAoIC8vIGZpeG1lIGFjY2VzcyB0byBFUyBjb3VsZCBiZSB3cmFwcGVkIGluIGEgc3RvcmUgb3Igc29tZXRoaW5nIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhc3NldC1jYXJkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtZGl2aWRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLnJlZl9kaXN0cmlidXRpb25cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFJlZmVycmFsc1RhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudF9uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuQWNjb3VudE1lbWJlcnNoaXAgPSBCaW5kVG9DaGFpblN0YXRlKEFjY291bnRNZW1iZXJzaGlwKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFjY291bnRNZW1iZXJzaGlwO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IEZvcm1hdHRlZEFzc2V0IGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZEFzc2V0XCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5cclxuY2xhc3MgU3RhdGlzdGljcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIHN0YXRfb2JqZWN0OiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBzdGF0X29iamVjdCA9IHRoaXMucHJvcHMuc3RhdF9vYmplY3QudG9KUygpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5wbGFpblRleHQgPyAoXHJcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgYW1vdW50PXtwYXJzZUZsb2F0KHN0YXRfb2JqZWN0LmxpZmV0aW1lX2ZlZXNfcGFpZCl9XHJcbiAgICAgICAgICAgICAgICBhc3NldD1cIjEuMy4wXCJcclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApIDogKFxyXG4gICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5mZWVzX3BhaWRcIiAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3BhcnNlRmxvYXQoc3RhdF9vYmplY3QubGlmZXRpbWVfZmVlc19wYWlkKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PVwiMS4zLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJpbmRUb0NoYWluU3RhdGUoU3RhdGlzdGljcyk7XHJcbiIsImltcG9ydCB7Y29ubmVjdH0gZnJvbSBcImFsdC1yZWFjdFwiO1xyXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7TGlua30gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQge0NoYWluU3RvcmUsIEZldGNoQ2hhaW59IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XHJcbmltcG9ydCBBY2NvdW50U3RvcmUgZnJvbSBcInN0b3Jlcy9BY2NvdW50U3RvcmVcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgU3RhdGlzdGljcyBmcm9tIFwiLi9TdGF0aXN0aWNzXCI7XHJcbmltcG9ydCBUaW1lQWdvIGZyb20gXCIuLi9VdGlsaXR5L1RpbWVBZ29cIjtcclxuaW1wb3J0IHtzZXR0aW5nc0FQSXN9IGZyb20gXCJhcGkvYXBpQ29uZmlnXCI7XHJcbmltcG9ydCB7VGFibGV9IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcclxuXHJcbmNsYXNzIEFjY291bnRSZWZlcnJhbHNUYWJsZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHJlZmVycmFsc0luZGV4OiBbXSxcclxuICAgICAgICAgICAgcmVmZXJyYWxzQ291bnQ6IG51bGwsXHJcbiAgICAgICAgICAgIGVycm9yTG9hZGluZzogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBhY2NvdW50OiBDaGFpblR5cGVzLkNoYWluQWNjb3VudC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIGdwcm9wczogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIGRwcm9wczogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIGNvcmVfYXNzZXQ6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgZ3Byb3BzOiBcIjIuMC4wXCIsXHJcbiAgICAgICAgZHByb3BzOiBcIjIuMS4wXCIsXHJcbiAgICAgICAgY29yZV9hc3NldDogXCIxLjMuMFwiXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMuX2dldFJlZmVycmFscygwLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcclxuICAgICAgICBpZiAobmV4dFByb3BzLmFjY291bnQgIT09IHRoaXMucHJvcHMuYWNjb3VudCkge1xyXG4gICAgICAgICAgICB0aGlzLl9nZXRSZWZlcnJhbHMoMCwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9nZXRSZWZlcnJhbHMocGFnZSA9IDAsIGlzQWNjb3VudENoYW5nZWQgPSBmYWxzZSkge1xyXG4gICAgICAgIGxldCB7bXlIaWRkZW5BY2NvdW50cywgbXlBY3RpdmVBY2NvdW50c30gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCB7cmVmZXJyYWxzSW5kZXgsIHJlZmVycmFsc0NvdW50fSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIGlmIChzZXR0aW5nc0FQSXMuRVNfV1JBUFBFUl9MSVNULmxlbmd0aCA9PSAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIGZpeG1lIGFjY2VzcyB0byBFUyBjb3VsZCBiZSB3cmFwcGVkIGluIGEgc3RvcmUgb3Igc29tZXRoaW5nIGVsc2VcclxuICAgICAgICBjb25zdCBlc05vZGUgPSBzZXR0aW5nc0FQSXMuRVNfV1JBUFBFUl9MSVNUWzNdLnVybDtcclxuXHJcbiAgICAgICAgaWYgKGlzQWNjb3VudENoYW5nZWQpIHtcclxuICAgICAgICAgICAgcmVmZXJyYWxzQ291bnQgPSBudWxsO1xyXG4gICAgICAgICAgICByZWZlcnJhbHNJbmRleCA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKCFyZWZlcnJhbHNDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlZmVycmFsc0NvdW50UmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuICAgICAgICAgICAgICAgICAgICBlc05vZGUgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIi9yZWZlcnJlcl9jb3VudD9hY2NvdW50X2lkPVwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyZWZlcnJhbHNDb3VudFJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkNvdWxkIG5vdCByZWFjaCByZWZlcnJlcl9jb3VudCBlbmRwb2ludCBvbiBFUyB3cmFwcGVyXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXNOb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZmVycmFsc0NvdW50OiBhd2FpdCByZWZlcnJhbHNDb3VudFJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCByZWZlcnJhbHNJbmRleFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgICAgICAgICAgICBlc05vZGUgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiL2FsbF9yZWZlcnJlcnM/YWNjb3VudF9pZD1cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpICtcclxuICAgICAgICAgICAgICAgICAgICBcIiZwYWdlPVwiICtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmICghcmVmZXJyYWxzSW5kZXhSZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiQ291bGQgbm90IHJlYWNoIGFsbF9yZWZlcnJlcnMgZW5kcG9pbnQgb24gRVMgd3JhcHBlclwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXNOb2RlXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCByZXN1bHRzID0gYXdhaXQgcmVmZXJyYWxzSW5kZXhSZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgb2JqZWN0c1RvRmV0Y2ggPSBbXTtcclxuICAgICAgICAgICAgcmVzdWx0cy5tYXAocmVmID0+IHtcclxuICAgICAgICAgICAgICAgIG9iamVjdHNUb0ZldGNoLnB1c2gocmVmLmFjY291bnRfaWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gRmV0Y2ggQWNjb3VudCBEYXRhXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiRmV0Y2ggQ2hhaW5cIiwgb2JqZWN0c1RvRmV0Y2gpO1xyXG4gICAgICAgICAgICBvYmplY3RzVG9GZXRjaC5mb3JFYWNoKGlkX3RvX2ZldGNoID0+IHtcclxuICAgICAgICAgICAgICAgIEZldGNoQ2hhaW4oXCJnZXRBY2NvdW50XCIsIGlkX3RvX2ZldGNoKS50aGVuKGFjY291bnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQgPSBhY2NvdW50LnRvSlMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ldHdvcmtfZmVlID0gYWNjb3VudC5uZXR3b3JrX2ZlZV9wZXJjZW50YWdlIC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaWZldGltZV9mZWUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmxpZmV0aW1lX3JlZmVycmVyX2ZlZV9wZXJjZW50YWdlIC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZWZlcnJlcl90b3RhbF9mZWUgPSAxMDAgLSBuZXR3b3JrX2ZlZSAtIGxpZmV0aW1lX2ZlZTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVmZXJyZXJfZmVlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKHJlZmVycmVyX3RvdGFsX2ZlZSAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LnJlZmVycmVyX3Jld2FyZHNfcGVyY2VudGFnZSkgL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAxMDAwMDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVnaXN0cmFyX2ZlZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDEwMCAtIHJlZmVycmVyX2ZlZSAtIGxpZmV0aW1lX2ZlZSAtIG5ldHdvcmtfZmVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZWZlcnJhbHNJbmRleC5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGFjY291bnQuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGFjY291bnQubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlmZXRpbWVfcmVmOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBhY2NvdW50LmxpZmV0aW1lX3JlZmVycmVyX25hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbGlmZXRpbWVfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhcl9yZWY6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGFjY291bnQucmVnaXN0cmFyX25hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVnaXN0cmFyX2ZlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZmZpbGlhdGVfcmVmOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBhY2NvdW50LnJlZmVycmVyX25hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVmZXJyZXJfZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcms6IG5ldHdvcmtfZmVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0aXN0aWNzOiBhY2NvdW50LnN0YXRpc3RpY3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlcnNoaXBfZXhwaXJhdGlvbjogbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZlcnJhbHNJbmRleDogcmVmZXJyYWxzSW5kZXhcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGVycm9yTG9hZGluZzogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25QYWdpbmF0aW9uQ2hhbmdlKHBhZ2UpIHtcclxuICAgICAgICB0aGlzLl9nZXRSZWZlcnJhbHMocGFnZSAtIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICAvLyBmaXhtZSBhY2Nlc3MgdG8gRVMgY291bGQgYmUgd3JhcHBlZCBpbiBhIHN0b3JlIG9yIHNvbWV0aGluZyBlbHNlXHJcbiAgICAgICAgaWYgKHNldHRpbmdzQVBJcy5FU19XUkFQUEVSX0xJU1QubGVuZ3RoID09IDApIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICBsZXQgYWNjb3VudCA9IHRoaXMucHJvcHMuYWNjb3VudC50b0pTKCk7XHJcblxyXG4gICAgICAgIGxldCBsdHIgPSBDaGFpblN0b3JlLmdldEFjY291bnQoYWNjb3VudC5saWZldGltZV9yZWZlcnJlciwgZmFsc2UpO1xyXG4gICAgICAgIGlmIChsdHIpIGFjY291bnQubGlmZXRpbWVfcmVmZXJyZXJfbmFtZSA9IGx0ci5nZXQoXCJuYW1lXCIpO1xyXG4gICAgICAgIGxldCByZWYgPSBDaGFpblN0b3JlLmdldEFjY291bnQoYWNjb3VudC5yZWZlcnJlciwgZmFsc2UpO1xyXG4gICAgICAgIGlmIChyZWYpIGFjY291bnQucmVmZXJyZXJfbmFtZSA9IHJlZi5nZXQoXCJuYW1lXCIpO1xyXG4gICAgICAgIGxldCByZWcgPSBDaGFpblN0b3JlLmdldEFjY291bnQoYWNjb3VudC5yZWdpc3RyYXIsIGZhbHNlKTtcclxuICAgICAgICBpZiAocmVnKSBhY2NvdW50LnJlZ2lzdHJhcl9uYW1lID0gcmVnLmdldChcIm5hbWVcIik7XHJcblxyXG4gICAgICAgIGxldCByZWZEYXRhID0gdGhpcy5zdGF0ZS5yZWZlcnJhbHNJbmRleDtcclxuXHJcbiAgICAgICAgbGV0IHJlZkNvbHVtbnMgPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGtleTogXCJuYW1lXCIsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJOYW1lXCIsXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6IGRhdGFJdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL2FjY291bnQvJHtkYXRhSXRlbS5uYW1lfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkYXRhSXRlbS5uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAga2V5OiBcInN0YXRpc3RpY3NcIixcclxuICAgICAgICAgICAgICAgIHRpdGxlOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5mZWVzX3BhaWRcIiAvPixcclxuICAgICAgICAgICAgICAgIHJlbmRlcjogZGF0YUl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTdGF0aXN0aWNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpblRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRfb2JqZWN0PXtkYXRhSXRlbS5zdGF0aXN0aWNzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGtleTogXCJuZXR3b3JrXCIsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogKFxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLm5ldHdvcmtfcGVyY2VudGFnZVwiIC8+XHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBkYXRhSXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxzcGFuPntkYXRhSXRlbS5uZXR3b3JrfSU8L3NwYW4+O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBrZXk6IFwibGlmZXRpbWVfcmVmXCIsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIubGlmZXRpbWVfcmVmZXJyZXJcIiAvPixcclxuICAgICAgICAgICAgICAgIHJlbmRlcjogZGF0YUl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RhdGFJdGVtLmxpZmV0aW1lX3JlZi52YWx1ZX0lIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL2FjY291bnQvJHtkYXRhSXRlbS5saWZldGltZV9yZWYubmFtZX1gfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGF0YUl0ZW0ubGlmZXRpbWVfcmVmLm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBrZXk6IFwicmVnaXN0cmFyX3JlZlwiLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLnJlZ2lzdHJhclwiIC8+LFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBkYXRhSXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGF0YUl0ZW0ucmVnaXN0cmFyX3JlZi52YWx1ZX0lIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG89e2AvYWNjb3VudC8ke2RhdGFJdGVtLnJlZ2lzdHJhcl9yZWYubmFtZX1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkYXRhSXRlbS5yZWdpc3RyYXJfcmVmLm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBrZXk6IFwiYWZmaWxpYXRlX3JlZlwiLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLnJlZmVycmVyXCIgLz4sXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6IGRhdGFJdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkYXRhSXRlbS5hZmZpbGlhdGVfcmVmLnZhbHVlfSUgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17YC9hY2NvdW50LyR7ZGF0YUl0ZW0uYWZmaWxpYXRlX3JlZi5uYW1lfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RhdGFJdGVtLmFmZmlsaWF0ZV9yZWYubmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmVycm9yTG9hZGluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gPFRyYW5zbGF0ZSBjb250ZW50PVwiZXJyb3JzLmxvYWRpbmdfZnJvbV9lc1wiIC8+O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8VGFibGVcclxuICAgICAgICAgICAgICAgIHJvd0tleT1cImFjY291bnRSZWZlcnJhbHNcIlxyXG4gICAgICAgICAgICAgICAgY29sdW1ucz17cmVmQ29sdW1uc31cclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U9e3JlZkRhdGF9XHJcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU6IE51bWJlcigyMCksXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWw6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVmZXJyYWxzQ291bnQgPD1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZWZlcnJhbHNJbmRleC5sZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5zdGF0ZS5yZWZlcnJhbHNJbmRleC5sZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5zdGF0ZS5yZWZlcnJhbHNJbmRleC5sZW5ndGggKyAyMCxcclxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5vblBhZ2luYXRpb25DaGFuZ2UuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICBzaG93VG90YWw6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIudG90YWxfcmVmXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbD17dGhpcy5zdGF0ZS5yZWZlcnJhbHNDb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5BY2NvdW50UmVmZXJyYWxzVGFibGUgPSBCaW5kVG9DaGFpblN0YXRlKEFjY291bnRSZWZlcnJhbHNUYWJsZSk7XHJcblxyXG5BY2NvdW50UmVmZXJyYWxzVGFibGUgPSBjb25uZWN0KFxyXG4gICAgQWNjb3VudFJlZmVycmFsc1RhYmxlLFxyXG4gICAge1xyXG4gICAgICAgIGxpc3RlblRvKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW0FjY291bnRTdG9yZV07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRQcm9wcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG15QWN0aXZlQWNjb3VudHM6IEFjY291bnRTdG9yZS5nZXRTdGF0ZSgpLm15QWN0aXZlQWNjb3VudHMsXHJcbiAgICAgICAgICAgICAgICBteUhpZGRlbkFjY291bnRzOiBBY2NvdW50U3RvcmUuZ2V0U3RhdGUoKS5teUhpZGRlbkFjY291bnRzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWNjb3VudFJlZmVycmFsc1RhYmxlO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IEZvcm1hdHRlZEFzc2V0IGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZEFzc2V0XCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBXYWxsZXRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL1dhbGxldEFjdGlvbnNcIjtcclxuaW1wb3J0IHtBcGlzfSBmcm9tIFwiYml0c2hhcmVzanMtd3NcIjtcclxuaW1wb3J0IHtCdXR0b259IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcclxuaW1wb3J0IFBhZ2luYXRlZExpc3QgZnJvbSBcImNvbXBvbmVudHMvVXRpbGl0eS9QYWdpbmF0ZWRMaXN0XCI7XHJcbmltcG9ydCBTZWFyY2hJbnB1dCBmcm9tIFwiLi4vVXRpbGl0eS9TZWFyY2hJbnB1dFwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcblxyXG5jbGFzcyBBY2NvdW50VmVzdGluZyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgdmVzdGluZ19iYWxhbmNlczogW10sXHJcbiAgICAgICAgICAgIHNlYXJjaFRlcm06IFwiXCIsXHJcbiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICBlcnJvcjogZmFsc2VcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLm9uU2VhcmNoID0gdGhpcy5vblNlYXJjaC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmV0cmlldmVWZXN0aW5nQmFsYW5jZXMgPSB0aGlzLnJldHJpZXZlVmVzdGluZ0JhbGFuY2VzLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMucmV0cmlldmVWZXN0aW5nQmFsYW5jZXMuY2FsbCh0aGlzLCB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIikpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcclxuICAgICAgICBsZXQgb2xkSWQgPSBwcmV2UHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKTtcclxuICAgICAgICBsZXQgbmV3SWQgPSB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIik7XHJcblxyXG4gICAgICAgIGlmIChuZXdJZCAhPT0gb2xkSWQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXRyaWV2ZVZlc3RpbmdCYWxhbmNlcy5jYWxsKHRoaXMsIG5ld0lkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0cmlldmVWZXN0aW5nQmFsYW5jZXMoYWNjb3VudElkKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGxvYWRpbmc6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBhY2NvdW50SWQgPSBhY2NvdW50SWQgfHwgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpO1xyXG4gICAgICAgIEFwaXMuaW5zdGFuY2UoKVxyXG4gICAgICAgICAgICAuZGJfYXBpKClcclxuICAgICAgICAgICAgLmV4ZWMoXCJnZXRfdmVzdGluZ19iYWxhbmNlc1wiLCBbYWNjb3VudElkXSlcclxuICAgICAgICAgICAgLnRoZW4odmVzdGluZ19iYWxhbmNlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcFZlc3RpbmdCYWxhbmNlcyh2ZXN0aW5nX2JhbGFuY2VzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHRydWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBtYXBWZXN0aW5nQmFsYW5jZXModmIpIHtcclxuICAgICAgICBpZiAoIXZiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdmVzdGluZ19iYWxhbmNlcyA9IHZiLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uYmFsYW5jZS5hbW91bnQgJiYgaXRlbS5iYWxhbmNlLmFzc2V0X2lkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZlc3RpbmdfYmFsYW5jZXMgPSB2ZXN0aW5nX2JhbGFuY2VzLm1hcChpdGVtID0+IHtcclxuICAgICAgICAgICAgbGV0IGN2YkFzc2V0LFxyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSxcclxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZV9wZXJjZW50YWdlID0gMCxcclxuICAgICAgICAgICAgICAgIGRheXNfZWFybmVkID0gMCxcclxuICAgICAgICAgICAgICAgIGRheXNfcmVxdWlyZWQgPSAwLFxyXG4gICAgICAgICAgICAgICAgZGF5c19yZW1haW5pbmcgPSAwLFxyXG4gICAgICAgICAgICAgICAgaXNDb2luRGF5cyA9IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjYW5DbGFpbSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSA9IGl0ZW0uYmFsYW5jZS5hbW91bnQ7XHJcbiAgICAgICAgICAgICAgICBjdmJBc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQoaXRlbS5iYWxhbmNlLmFzc2V0X2lkKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5wb2xpY3kgJiYgaXRlbS5wb2xpY3lbMF0gIT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSBNYXRoLmZsb29yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShpdGVtLnBvbGljeVsxXS5zdGFydF9jbGFpbSArIFwiWlwiKS5nZXRUaW1lKCkgL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwMFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXN0aW5nIGhhcyBhIHNwZWNpZmljIHN0YXJ0IGRhdGUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlc3Rpbmcgd2l0aCBsb2NrZWQgdmFsdWUgcmVxdWlyZWQgdG8gbWF1dHJlIGZ1bGx5IGJlZm9yZSBjbGFpbWluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGdWxsIHZlc3RpbmcgcGVyaW9kIG11c3QgcGFzcyBiZWZvcmUgaXQgY2FuIGJlIGNsYWltZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBkYXlzIGxlZnQgYmVmb3JlIGEgY2xhaW0gaXMgcG9zc2libGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhhbXBsZSBhc3NldCBpcyBCUklER0UuQkNPIC0gMS4zLjE1NjRcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29pbkRheXMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZWNvbmRzX2Vhcm5lZCA9IG5vdyAtIHN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2Vjb25kc19wZXJpb2QgPSBpdGVtLnBvbGljeVsxXS52ZXN0aW5nX3NlY29uZHM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Vjb25kc19lYXJuZWQgPCBzZWNvbmRzX3BlcmlvZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuQ2xhaW0gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheXNfZWFybmVkID0gcGFyc2VGbG9hdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzX2Vhcm5lZCAvIDg2NDAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnRvRml4ZWQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlzX3JlcXVpcmVkID0gcGFyc2VGbG9hdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzX3BlcmlvZCAvIDg2NDAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnRvRml4ZWQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlzX3JlbWFpbmluZyA9IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlzX3JlcXVpcmVkIC0gZGF5c19lYXJuZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkudG9GaXhlZCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZV9wZXJjZW50YWdlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZV9wZXJjZW50YWdlID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlc3RpbmcgaGFzIG5vIHN0YXJ0IHRpbWUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlc3RpbmcgYmFsYW5jZXMgaGFzIGEgdmVzdGluZyB3aXRoIG1hdHVyaW5nIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHBlcmlvZCBpcyAwIHdlIGV4cGVjdCBhIDEwMCUgY2xhaW1hYmxlIGJhbGFuY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHdlIGV4cGVjdCB0byBiZSBhbGxvd2VkIHRvIGNsYWltIHRoZSBtYXR1cmVkIHBlcmNlbnRhZ2UuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3JlIGlzIGxhenkgY2FsY3VsYXRpbmcgdGhlIHZlc3RpbmcgYmFsYW5jZSBvYmplY3QsIHNvIHdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWQgdG8gYWNjb3VudCBmb3IgdGhlIHRpbWUgcGFzc2VkIHNpbmNlIGl0IHdhcyBsYXN0IHVwZGF0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlY29uZHNfbGFzdF91cGRhdGVkID0gTWF0aC5mbG9vcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucG9saWN5WzFdLmNvaW5fc2Vjb25kc19lYXJuZWRfbGFzdF91cGRhdGUgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlpcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5nZXRUaW1lKCkgLyAxMDAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZWNvbmRzX2Vhcm5lZCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGl0ZW0ucG9saWN5WzFdLmNvaW5fc2Vjb25kc19lYXJuZWQpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2UgKiAobm93IC0gc2Vjb25kc19sYXN0X3VwZGF0ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2Vjb25kc19wZXJpb2QgPSBpdGVtLnBvbGljeVsxXS52ZXN0aW5nX3NlY29uZHM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVfcGVyY2VudGFnZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzX3BlcmlvZCA9PT0gMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2Vjb25kc19lYXJuZWQgLyAoc2Vjb25kc19wZXJpb2QgKiBiYWxhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGRvbid0IGdvIG92ZXIgMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVfcGVyY2VudGFnZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVfcGVyY2VudGFnZSA+IDEgPyAxIDogYXZhaWxhYmxlX3BlcmNlbnRhZ2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlzX2Vhcm5lZCA9IHV0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5nZXRfYXNzZXRfYW1vdW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHNfZWFybmVkIC8gODY0MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3ZiQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheXNfcmVxdWlyZWQgPSB1dGlscy5mb3JtYXRfbnVtYmVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuZ2V0X2Fzc2V0X2Ftb3VudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaXRlbS5iYWxhbmNlLmFtb3VudCAqIHNlY29uZHNfcGVyaW9kKSAvIDg2NDAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN2YkFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlzX3JlbWFpbmluZyA9IHV0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc2Vjb25kc19wZXJpb2QgKiAoMSAtIGF2YWlsYWJsZV9wZXJjZW50YWdlKSkgL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDg2NDAwIHx8IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FuQ2xhaW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlX3BlcmNlbnRhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAga2V5OiBpdGVtLmlkLFxyXG4gICAgICAgICAgICAgICAgdmVzdGluZ0lkOiBpdGVtLmlkLFxyXG4gICAgICAgICAgICAgICAgdmVzdGluZ1R5cGU6IGl0ZW0uYmFsYW5jZV90eXBlLFxyXG4gICAgICAgICAgICAgICAgdmVzdGluZ0JhbGFuY2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGl0ZW0uYmFsYW5jZS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQ6IGl0ZW0uYmFsYW5jZS5hc3NldF9pZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNvaW5EYXlzUmVxdWlyZWQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXlzX3JlcXVpcmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQ29pbkRheXNcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb2luRGF5c0Vhcm5lZDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRheXNfZWFybmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQ29pbkRheXNcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb2luRGF5c1JlbWFpbmluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRheXNfcmVtYWluaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQ29pbkRheXNcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhdmFpbGFibGVQZXJjZW50OiBhdmFpbGFibGVfcGVyY2VudGFnZSxcclxuICAgICAgICAgICAgICAgIGNhbkNsYWltLFxyXG4gICAgICAgICAgICAgICAgdmI6IGl0ZW1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHt2ZXN0aW5nX2JhbGFuY2VzfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SGVhZGVyKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIiNcIixcclxuICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJ2ZXN0aW5nSWRcIixcclxuICAgICAgICAgICAgICAgIGFsaWduOiBcImxlZnRcIixcclxuICAgICAgICAgICAgICAgIGRlZmF1bHRTb3J0T3JkZXI6IFwiYXNjZW5kXCIsXHJcbiAgICAgICAgICAgICAgICBzb3J0ZXI6IChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEudmVzdGluZ0lkID4gYi52ZXN0aW5nSWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYS52ZXN0aW5nSWQgPCBiLnZlc3RpbmdJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAtMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuYmFsYW5jZV90eXBlXCIgLz4sXHJcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwidmVzdGluZ1R5cGVcIixcclxuICAgICAgICAgICAgICAgIGFsaWduOiBcImxlZnRcIixcclxuICAgICAgICAgICAgICAgIHNvcnRlcjogKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS52ZXN0aW5nVHlwZSA+IGIudmVzdGluZ1R5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYS52ZXN0aW5nVHlwZSA8IGIudmVzdGluZ1R5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gLTFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6IGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1wiYWNjb3VudC52ZXN0aW5nLnR5cGUuXCIgKyBpdGVtfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5jYXNoYmFja1wiIC8+LFxyXG4gICAgICAgICAgICAgICAgZGF0YUluZGV4OiBcInZlc3RpbmdCYWxhbmNlXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogXCJsZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6IGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtpdGVtLmFtb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtpdGVtLmFzc2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5yZXF1aXJlZFwiIC8+LFxyXG4gICAgICAgICAgICAgICAgZGF0YUluZGV4OiBcImNvaW5EYXlzUmVxdWlyZWRcIixcclxuICAgICAgICAgICAgICAgIGFsaWduOiBcImxlZnRcIixcclxuICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZGF5c19yZXF1aXJlZCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXRlbS5kYXlzX3JlcXVpcmVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uaXNDb2luRGF5c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImFjY291bnQubWVtYmVyLmNvaW5kYXlzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJhY2NvdW50Lm1lbWJlci5kYXlzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5lYXJuZWRcIiAvPixcclxuICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJjb2luRGF5c0Vhcm5lZFwiLFxyXG4gICAgICAgICAgICAgICAgYWxpZ246IFwibGVmdFwiLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5kYXlzX2Vhcm5lZCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXRlbS5kYXlzX2Vhcm5lZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmlzQ29pbkRheXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJhY2NvdW50Lm1lbWJlci5jb2luZGF5c1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiYWNjb3VudC5tZW1iZXIuZGF5c1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIucmVtYWluaW5nXCIgLz4sXHJcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwiY29pbkRheXNSZW1haW5pbmdcIixcclxuICAgICAgICAgICAgICAgIGFsaWduOiBcImxlZnRcIixcclxuICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZGF5c19yZW1haW5pbmcgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2l0ZW0uZGF5c19yZW1haW5pbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLmRheXNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1lbWJlci5hdmFpbGFibGVcIiAvPixcclxuICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJhdmFpbGFibGVQZXJjZW50XCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogXCJsZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6IGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57KGl0ZW0gKiAxMDApLnRvRml4ZWQoMil9JTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubWVtYmVyLmFjdGlvblwiIC8+LFxyXG4gICAgICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6IGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmNhbkNsYWltID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLm9uQ2xhaW0oaXRlbSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwic2Vjb25kYXJ5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5tZW1iZXIuY2xhaW1cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgb25DbGFpbSh7dmJ9KSB7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudF9pZCA9IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKTtcclxuICAgICAgICBXYWxsZXRBY3Rpb25zLmNsYWltVmVzdGluZ0JhbGFuY2UoYWNjb3VudF9pZCwgdmIsIGZhbHNlKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXRyaWV2ZVZlc3RpbmdCYWxhbmNlcygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU2VhcmNoKGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHNlYXJjaFRlcm06IGV2ZW50LnRhcmdldC52YWx1ZSB8fCBcIlwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IHRoaXMuZ2V0SGVhZGVyKCk7XHJcblxyXG4gICAgICAgIGxldCB2YiA9IHRoaXMuc3RhdGUudmVzdGluZ19iYWxhbmNlcy5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICBgJHtpdGVtLnZlc3RpbmdJZH1cXDAke2l0ZW0udmVzdGluZ1R5cGV9YFxyXG4gICAgICAgICAgICAgICAgICAgIC50b1VwcGVyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YodGhpcy5zdGF0ZS5zZWFyY2hUZXJtLnRvVXBwZXJDYXNlKCkpICE9PSAtMVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGVudCB2ZXJ0aWNhbFwiPlxyXG4gICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb21wb25lbnQ9XCJoMVwiIGNvbnRlbnQ9XCJhY2NvdW50LnZlc3RpbmcudGl0bGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52ZXN0aW5nLmV4cGxhaW5cIiBjb21wb25lbnQ9XCJwXCIgLz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLXNlbGVjdG9yIHBhZGRpbmdcIj5cclxuICAgICAgICAgICAgICAgICAgICA8U2VhcmNoSW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25TZWFyY2guYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuc2VhcmNoVGVybX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImV4Y2hhbmdlLmZpbHRlclwiKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmVycm9yICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGVhZGVyLXNlbGVjdG9yLS1lcnJvclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiZXJyb3JzLmxvYWRpbmdfZnJvbV9ibG9ja2NoYWluXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxQYWdpbmF0ZWRMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e3RoaXMuc3RhdGUubG9hZGluZ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17dmJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcj17aGVhZGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZT17MTB9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBY2NvdW50VmVzdGluZztcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgSW1tdXRhYmxlIGZyb20gXCJpbW11dGFibGVcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBhY2NvdW50VXRpbHMgZnJvbSBcImNvbW1vbi9hY2NvdW50X3V0aWxzXCI7XHJcbmltcG9ydCB7Y3JlYXRlUGFwZXJXYWxsZXRBc1BERn0gZnJvbSBcImNvbW1vbi9wYXBlcldhbGxldFwiO1xyXG5pbXBvcnQgQXBwbGljYXRpb25BcGkgZnJvbSBcImFwaS9BcHBsaWNhdGlvbkFwaVwiO1xyXG5pbXBvcnQge1B1YmxpY0tleX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBBY2NvdW50UGVybWlzc2lvbnNMaXN0IGZyb20gXCIuL0FjY291bnRQZXJtaXNzaW9uc0xpc3RcIjtcclxuaW1wb3J0IEFjY291bnRQZXJtaXNzaW9uc01pZ3JhdGUgZnJvbSBcIi4vQWNjb3VudFBlcm1pc3Npb25zTWlncmF0ZVwiO1xyXG5pbXBvcnQgUHViS2V5SW5wdXQgZnJvbSBcIi4uL0Zvcm1zL1B1YktleUlucHV0XCI7XHJcbmltcG9ydCB7VGFicywgVGFifSBmcm9tIFwiLi4vVXRpbGl0eS9UYWJzXCI7XHJcbmltcG9ydCBIZWxwQ29udGVudCBmcm9tIFwiLi4vVXRpbGl0eS9IZWxwQ29udGVudFwiO1xyXG5pbXBvcnQge1JlY2VudFRyYW5zYWN0aW9uc30gZnJvbSBcIi4vUmVjZW50VHJhbnNhY3Rpb25zXCI7XHJcbmltcG9ydCB7Tm90aWZpY2F0aW9ufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcblxyXG5jbGFzcyBBY2NvdW50UGVybWlzc2lvbnMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHt9O1xyXG4gICAgICAgIHRoaXMub25QdWJsaXNoID0gdGhpcy5vblB1Ymxpc2guYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uUmVzZXQgPSB0aGlzLm9uUmVzZXQuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVBY2NvdW50RGF0YSh0aGlzLnByb3BzLmFjY291bnQpO1xyXG4gICAgICAgIGFjY291bnRVdGlscy5nZXRGaW5hbEZlZUFzc2V0KHRoaXMucHJvcHMuYWNjb3VudCwgXCJhY2NvdW50X3VwZGF0ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xyXG4gICAgICAgIGlmIChuZXh0UHJvcHMuYWNjb3VudCAhPT0gdGhpcy5wcm9wcy5hY2NvdW50KVxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFjY291bnREYXRhKG5leHRQcm9wcy5hY2NvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwZXJtaXNzaW9uc0Zyb21JbW11dGFibGVPYmooYXV0aHMpIHtcclxuICAgICAgICBsZXQgdGhyZXNob2xkID0gYXV0aHMuZ2V0KFwid2VpZ2h0X3RocmVzaG9sZFwiKTtcclxuICAgICAgICBsZXQgYWNjb3VudF9hdXRocyA9IGF1dGhzLmdldChcImFjY291bnRfYXV0aHNcIik7XHJcbiAgICAgICAgbGV0IGtleV9hdXRocyA9IGF1dGhzLmdldChcImtleV9hdXRoc1wiKTtcclxuICAgICAgICBsZXQgYWRkcmVzc19hdXRocyA9IGF1dGhzLmdldChcImFkZHJlc3NfYXV0aHNcIik7XHJcblxyXG4gICAgICAgIGxldCBhY2NvdW50cyA9IGFjY291bnRfYXV0aHMubWFwKGEgPT4gYS5nZXQoMCkpO1xyXG4gICAgICAgIGxldCBrZXlzID0ga2V5X2F1dGhzLm1hcChhID0+IGEuZ2V0KDApKTtcclxuICAgICAgICBsZXQgYWRkcmVzc2VzID0gYWRkcmVzc19hdXRocy5tYXAoYSA9PiBhLmdldCgwKSk7XHJcblxyXG4gICAgICAgIGxldCB3ZWlnaHRzID0gYWNjb3VudF9hdXRocy5yZWR1Y2UoKHJlcywgYSkgPT4ge1xyXG4gICAgICAgICAgICByZXNbYS5nZXQoMCldID0gYS5nZXQoMSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgfSwge30pO1xyXG4gICAgICAgIHdlaWdodHMgPSBrZXlfYXV0aHMucmVkdWNlKChyZXMsIGEpID0+IHtcclxuICAgICAgICAgICAgcmVzW2EuZ2V0KDApXSA9IGEuZ2V0KDEpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgIH0sIHdlaWdodHMpO1xyXG4gICAgICAgIHdlaWdodHMgPSBhZGRyZXNzX2F1dGhzLnJlZHVjZSgocmVzLCBhKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc1thLmdldCgwKV0gPSBhLmdldCgxKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICB9LCB3ZWlnaHRzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHt0aHJlc2hvbGQsIGFjY291bnRzLCBrZXlzLCBhZGRyZXNzZXMsIHdlaWdodHN9O1xyXG4gICAgfVxyXG5cclxuICAgIHBlcm1pc3Npb25zVG9Kc29uKHRocmVzaG9sZCwgYWNjb3VudHMsIGtleXMsIGFkZHJlc3Nlcywgd2VpZ2h0cykge1xyXG4gICAgICAgIGxldCByZXMgPSB7d2VpZ2h0X3RocmVzaG9sZDogdGhyZXNob2xkfTtcclxuICAgICAgICByZXNbXCJhY2NvdW50X2F1dGhzXCJdID0gYWNjb3VudHNcclxuICAgICAgICAgICAgLnNvcnQodXRpbHMuc29ydElEKVxyXG4gICAgICAgICAgICAubWFwKGEgPT4gW2EsIHdlaWdodHNbYV1dKVxyXG4gICAgICAgICAgICAudG9KUygpO1xyXG4gICAgICAgIHJlc1tcImtleV9hdXRoc1wiXSA9IGtleXNcclxuICAgICAgICAgICAgLnNvcnQodXRpbHMuc29ydElEKVxyXG4gICAgICAgICAgICAubWFwKGEgPT4gW2EsIHdlaWdodHNbYV1dKVxyXG4gICAgICAgICAgICAudG9KUygpO1xyXG4gICAgICAgIHJlc1tcImFkZHJlc3NfYXV0aHNcIl0gPSBhZGRyZXNzZXNcclxuICAgICAgICAgICAgLnNvcnQodXRpbHMuc29ydElEKVxyXG4gICAgICAgICAgICAubWFwKGEgPT4gW2EsIHdlaWdodHNbYV1dKVxyXG4gICAgICAgICAgICAudG9KUygpO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQWNjb3VudERhdGEoYWNjb3VudCkge1xyXG4gICAgICAgIGxldCBhY3RpdmUgPSB0aGlzLnBlcm1pc3Npb25zRnJvbUltbXV0YWJsZU9iaihhY2NvdW50LmdldChcImFjdGl2ZVwiKSk7XHJcbiAgICAgICAgbGV0IG93bmVyID0gdGhpcy5wZXJtaXNzaW9uc0Zyb21JbW11dGFibGVPYmooYWNjb3VudC5nZXQoXCJvd25lclwiKSk7XHJcbiAgICAgICAgbGV0IG1lbW9fa2V5ID0gYWNjb3VudC5nZXQoXCJvcHRpb25zXCIpLmdldChcIm1lbW9fa2V5XCIpO1xyXG4gICAgICAgIGxldCBzdGF0ZSA9IHtcclxuICAgICAgICAgICAgYWN0aXZlX2FjY291bnRzOiBhY3RpdmUuYWNjb3VudHMsXHJcbiAgICAgICAgICAgIGFjdGl2ZV9rZXlzOiBhY3RpdmUua2V5cyxcclxuICAgICAgICAgICAgYWN0aXZlX2FkZHJlc3NlczogYWN0aXZlLmFkZHJlc3NlcyxcclxuICAgICAgICAgICAgb3duZXJfYWNjb3VudHM6IG93bmVyLmFjY291bnRzLFxyXG4gICAgICAgICAgICBvd25lcl9rZXlzOiBvd25lci5rZXlzLFxyXG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzZXM6IG93bmVyLmFkZHJlc3NlcyxcclxuICAgICAgICAgICAgYWN0aXZlX3dlaWdodHM6IGFjdGl2ZS53ZWlnaHRzLFxyXG4gICAgICAgICAgICBvd25lcl93ZWlnaHRzOiBvd25lci53ZWlnaHRzLFxyXG4gICAgICAgICAgICBhY3RpdmVfdGhyZXNob2xkOiBhY3RpdmUudGhyZXNob2xkLFxyXG4gICAgICAgICAgICBvd25lcl90aHJlc2hvbGQ6IG93bmVyLnRocmVzaG9sZCxcclxuICAgICAgICAgICAgbWVtb19rZXk6IG1lbW9fa2V5LFxyXG4gICAgICAgICAgICBwcmV2X2FjdGl2ZV9hY2NvdW50czogYWN0aXZlLmFjY291bnRzLFxyXG4gICAgICAgICAgICBwcmV2X2FjdGl2ZV9rZXlzOiBhY3RpdmUua2V5cyxcclxuICAgICAgICAgICAgcHJldl9hY3RpdmVfYWRkcmVzc2VzOiBhY3RpdmUuYWRkcmVzc2VzLFxyXG4gICAgICAgICAgICBwcmV2X293bmVyX2FjY291bnRzOiBvd25lci5hY2NvdW50cyxcclxuICAgICAgICAgICAgcHJldl9vd25lcl9rZXlzOiBvd25lci5rZXlzLFxyXG4gICAgICAgICAgICBwcmV2X293bmVyX2FkZHJlc3Nlczogb3duZXIuYWRkcmVzc2VzLFxyXG4gICAgICAgICAgICBwcmV2X2FjdGl2ZV93ZWlnaHRzOiBhY3RpdmUud2VpZ2h0cyxcclxuICAgICAgICAgICAgcHJldl9vd25lcl93ZWlnaHRzOiBvd25lci53ZWlnaHRzLFxyXG4gICAgICAgICAgICBwcmV2X2FjdGl2ZV90aHJlc2hvbGQ6IGFjdGl2ZS50aHJlc2hvbGQsXHJcbiAgICAgICAgICAgIHByZXZfb3duZXJfdGhyZXNob2xkOiBvd25lci50aHJlc2hvbGQsXHJcbiAgICAgICAgICAgIHByZXZfbWVtb19rZXk6IG1lbW9fa2V5XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0NoYW5nZWQoKSB7XHJcbiAgICAgICAgbGV0IHMgPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHMuYWN0aXZlX2FjY291bnRzICE9PSBzLnByZXZfYWN0aXZlX2FjY291bnRzIHx8XHJcbiAgICAgICAgICAgIHMuYWN0aXZlX2tleXMgIT09IHMucHJldl9hY3RpdmVfa2V5cyB8fFxyXG4gICAgICAgICAgICBzLmFjdGl2ZV9hZGRyZXNzZXMgIT09IHMucHJldl9hY3RpdmVfYWRkcmVzc2VzIHx8XHJcbiAgICAgICAgICAgIHMub3duZXJfYWNjb3VudHMgIT09IHMucHJldl9vd25lcl9hY2NvdW50cyB8fFxyXG4gICAgICAgICAgICBzLm93bmVyX2tleXMgIT09IHMucHJldl9vd25lcl9rZXlzIHx8XHJcbiAgICAgICAgICAgIHMub3duZXJfYWRkcmVzc2VzICE9PSBzLnByZXZfb3duZXJfYWRkcmVzc2VzIHx8XHJcbiAgICAgICAgICAgIHMuYWN0aXZlX3RocmVzaG9sZCAhPT0gcy5wcmV2X2FjdGl2ZV90aHJlc2hvbGQgfHxcclxuICAgICAgICAgICAgcy5vd25lcl90aHJlc2hvbGQgIT09IHMucHJldl9vd25lcl90aHJlc2hvbGQgfHxcclxuICAgICAgICAgICAgcy5tZW1vX2tleSAhPT0gcy5wcmV2X21lbW9fa2V5XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBkaWRDaGFuZ2UodHlwZSwgcyA9IHRoaXMuc3RhdGUpIHtcclxuICAgICAgICBpZiAodHlwZSA9PT0gXCJtZW1vXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHMubWVtb19rZXkgIT09IHMucHJldl9tZW1vX2tleTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGRpZENoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIFtcIl9rZXlzXCIsIFwiX2FjdGl2ZV9hZGRyZXNzZXNcIiwgXCJfYWNjb3VudHNcIiwgXCJfdGhyZXNob2xkXCJdLmZvckVhY2goXHJcbiAgICAgICAgICAgIGtleSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudCA9IHR5cGUgKyBrZXk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc1tjdXJyZW50XSAhPT0gc1tcInByZXZfXCIgKyBjdXJyZW50XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpZENoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBkaWRDaGFuZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgb25QdWJsaXNoKCkge1xyXG4gICAgICAgIGxldCBzID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBsZXQgdXBkYXRlZF9hY2NvdW50ID0gdGhpcy5wcm9wcy5hY2NvdW50LnRvSlMoKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IGZlZSBhc3NldFxyXG4gICAgICAgIHVwZGF0ZWRfYWNjb3VudC5mZWUgPSB7XHJcbiAgICAgICAgICAgIGFtb3VudDogMCxcclxuICAgICAgICAgICAgYXNzZXRfaWQ6IGFjY291bnRVdGlscy5nZXRGaW5hbEZlZUFzc2V0KFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZF9hY2NvdW50LmlkLFxyXG4gICAgICAgICAgICAgICAgXCJhY2NvdW50X3VwZGF0ZVwiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgdXBkYXRlT2JqZWN0ID0ge1xyXG4gICAgICAgICAgICBhY2NvdW50OiB1cGRhdGVkX2FjY291bnQuaWRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kaWRDaGFuZ2UoXCJhY3RpdmVcIikpIHtcclxuICAgICAgICAgICAgdXBkYXRlT2JqZWN0LmFjdGl2ZSA9IHRoaXMucGVybWlzc2lvbnNUb0pzb24oXHJcbiAgICAgICAgICAgICAgICBzLmFjdGl2ZV90aHJlc2hvbGQsXHJcbiAgICAgICAgICAgICAgICBzLmFjdGl2ZV9hY2NvdW50cyxcclxuICAgICAgICAgICAgICAgIHMuYWN0aXZlX2tleXMsXHJcbiAgICAgICAgICAgICAgICBzLmFjdGl2ZV9hZGRyZXNzZXMsXHJcbiAgICAgICAgICAgICAgICBzLmFjdGl2ZV93ZWlnaHRzXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRpZENoYW5nZShcIm93bmVyXCIpKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZU9iamVjdC5vd25lciA9IHRoaXMucGVybWlzc2lvbnNUb0pzb24oXHJcbiAgICAgICAgICAgICAgICBzLm93bmVyX3RocmVzaG9sZCxcclxuICAgICAgICAgICAgICAgIHMub3duZXJfYWNjb3VudHMsXHJcbiAgICAgICAgICAgICAgICBzLm93bmVyX2tleXMsXHJcbiAgICAgICAgICAgICAgICBzLm93bmVyX2FkZHJlc3NlcyxcclxuICAgICAgICAgICAgICAgIHMub3duZXJfd2VpZ2h0c1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuZGlkQ2hhbmdlKFwib3duZXJcIikgJiZcclxuICAgICAgICAgICAgcy5vd25lcl9rZXlzLnNpemUgPT09IDAgJiZcclxuICAgICAgICAgICAgcy5vd25lcl9hZGRyZXNzZXMuc2l6ZSA9PT0gMCAmJlxyXG4gICAgICAgICAgICBzLm93bmVyX2FjY291bnRzLnNpemUgPT09IDEgJiZcclxuICAgICAgICAgICAgcy5vd25lcl9hY2NvdW50cy5maXJzdCgpID09PSB1cGRhdGVkX2FjY291bnQuaWRcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5vdGlmaWNhdGlvbi53YXJuaW5nKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICBcIm5vdGlmaWNhdGlvbnMuYWNjb3VudF9wZXJtaXNzaW9uc191cGRhdGVfd2FybmluZ1wiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHMubWVtb19rZXkgJiZcclxuICAgICAgICAgICAgdGhpcy5kaWRDaGFuZ2UoXCJtZW1vXCIpICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNWYWxpZFB1YktleShzLm1lbW9fa2V5KVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB1cGRhdGVPYmplY3QubmV3X29wdGlvbnMgPSB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwib3B0aW9uc1wiKS50b0pTKCk7XHJcbiAgICAgICAgICAgIHVwZGF0ZU9iamVjdC5uZXdfb3B0aW9ucy5tZW1vX2tleSA9IHMubWVtb19rZXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIi0tIEFjY291bnRQZXJtaXNzaW9ucy5vblB1Ymxpc2ggLS0+XCIsIHVwZGF0ZU9iamVjdCwgcy5tZW1vX2tleSk7XHJcbiAgICAgICAgQXBwbGljYXRpb25BcGkudXBkYXRlQWNjb3VudCh1cGRhdGVPYmplY3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVmFsaWRQdWJLZXkodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gISFQdWJsaWNLZXkuZnJvbVB1YmxpY0tleVN0cmluZyh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZXNldCgpIHtcclxuICAgICAgICBsZXQgcyA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGFjdGl2ZV9hY2NvdW50czogcy5wcmV2X2FjdGl2ZV9hY2NvdW50cyxcclxuICAgICAgICAgICAgYWN0aXZlX2tleXM6IHMucHJldl9hY3RpdmVfa2V5cyxcclxuICAgICAgICAgICAgYWN0aXZlX2FkZHJlc3Nlczogcy5wcmV2X2FjdGl2ZV9hZGRyZXNzZXMsXHJcbiAgICAgICAgICAgIG93bmVyX2FjY291bnRzOiBzLnByZXZfb3duZXJfYWNjb3VudHMsXHJcbiAgICAgICAgICAgIG93bmVyX2tleXM6IHMucHJldl9vd25lcl9rZXlzLFxyXG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzZXM6IHMucHJldl9vd25lcl9hZGRyZXNzZXMsXHJcbiAgICAgICAgICAgIGFjdGl2ZV93ZWlnaHRzOiBzLnByZXZfYWN0aXZlX3dlaWdodHMsXHJcbiAgICAgICAgICAgIG93bmVyX3dlaWdodHM6IHMucHJldl9vd25lcl93ZWlnaHRzLFxyXG4gICAgICAgICAgICBhY3RpdmVfdGhyZXNob2xkOiBzLnByZXZfYWN0aXZlX3RocmVzaG9sZCxcclxuICAgICAgICAgICAgb3duZXJfdGhyZXNob2xkOiBzLnByZXZfb3duZXJfdGhyZXNob2xkLFxyXG4gICAgICAgICAgICBtZW1vX2tleTogcy5wcmV2X21lbW9fa2V5XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25BZGRJdGVtKGNvbGxlY3Rpb24sIGl0ZW1fdmFsdWUsIHdlaWdodCkge1xyXG4gICAgICAgIGxldCBzdGF0ZSA9IHt9O1xyXG4gICAgICAgIGxldCBsaXN0ID1cclxuICAgICAgICAgICAgY29sbGVjdGlvbiArXHJcbiAgICAgICAgICAgICh1dGlscy5pc19vYmplY3RfaWQoaXRlbV92YWx1ZSkgPyBcIl9hY2NvdW50c1wiIDogXCJfa2V5c1wiKTtcclxuICAgICAgICBzdGF0ZVtsaXN0XSA9IHRoaXMuc3RhdGVbbGlzdF0ucHVzaChpdGVtX3ZhbHVlKTtcclxuICAgICAgICB0aGlzLnN0YXRlW2NvbGxlY3Rpb24gKyBcIl93ZWlnaHRzXCJdW2l0ZW1fdmFsdWVdID0gd2VpZ2h0O1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVtb3ZlSXRlbShjb2xsZWN0aW9uLCBpdGVtX3ZhbHVlLCBsaXN0U3VmZml4KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJvblJlbW92ZUl0ZW1cIiwgY29sbGVjdGlvbiwgaXRlbV92YWx1ZSwgbGlzdFN1ZmZpeCk7XHJcbiAgICAgICAgbGV0IHN0YXRlID0ge307XHJcbiAgICAgICAgbGV0IGxpc3QgPSBjb2xsZWN0aW9uICsgbGlzdFN1ZmZpeDtcclxuXHJcbiAgICAgICAgc3RhdGVbbGlzdF0gPSB0aGlzLnN0YXRlW2xpc3RdLmZpbHRlcihpID0+IGkgIT09IGl0ZW1fdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVGhyZXNob2xkQ2hhbmdlZCh2YXJfbmFtZSwgZXZlbnQpIHtcclxuICAgICAgICBsZXQgdmFsdWUgPSBwYXJzZUludChldmVudC50YXJnZXQudmFsdWUudHJpbSgpKTtcclxuICAgICAgICBsZXQgc3RhdGUgPSB7fTtcclxuICAgICAgICBzdGF0ZVt2YXJfbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICB2YWxpZGF0ZUFjY291bnQoY29sbGVjdGlvbiwgYWNjb3VudCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHN1bVVwV2VpZ2h0cyhhY2NvdW50cywga2V5cywgYWRkcmVzc2VzLCB3ZWlnaHRzKSB7XHJcbiAgICAgICAgbGV0IHN1bSA9IGFjY291bnRzLnJlZHVjZSgoc3VtLCBhKSA9PiBzdW0gKyB3ZWlnaHRzW2FdLCAwKTtcclxuICAgICAgICBzdW0gPSBrZXlzLnJlZHVjZSgoc3VtLCBhKSA9PiBzdW0gKyB3ZWlnaHRzW2FdLCBzdW0pO1xyXG4gICAgICAgIHJldHVybiBhZGRyZXNzZXMucmVkdWNlKChzdW0sIGEpID0+IHN1bSArIHdlaWdodHNbYV0sIHN1bSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25NZW1vS2V5Q2hhbmdlZChtZW1vX2tleSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe21lbW9fa2V5fSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25TZXRQYXNzd29yZEtleXMoa2V5cywgcm9sZXMgPSBbXCJhY3RpdmVcIiwgXCJvd25lclwiLCBcIm1lbW9cIl0pIHtcclxuICAgICAgICBsZXQgbmV3U3RhdGUgPSB7fTtcclxuXHJcbiAgICAgICAgcm9sZXMuZm9yRWFjaChyb2xlID0+IHtcclxuICAgICAgICAgICAgbmV3U3RhdGVbYHBhc3N3b3JkXyR7cm9sZX1gXSA9IGtleXNbcm9sZV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUGRmQ3JlYXRlKCkge1xyXG4gICAgICAgIGNyZWF0ZVBhcGVyV2FsbGV0QXNQREYodGhpcy5wcm9wcy5hY2NvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IGVycm9yMSwgZXJyb3IyO1xyXG5cclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICBhY3RpdmVfYWNjb3VudHMsXHJcbiAgICAgICAgICAgIGFjdGl2ZV9rZXlzLFxyXG4gICAgICAgICAgICBhY3RpdmVfYWRkcmVzc2VzLFxyXG4gICAgICAgICAgICBhY3RpdmVfd2VpZ2h0c1xyXG4gICAgICAgIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIG93bmVyX2FjY291bnRzLFxyXG4gICAgICAgICAgICBvd25lcl9rZXlzLFxyXG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzZXMsXHJcbiAgICAgICAgICAgIG93bmVyX3dlaWdodHNcclxuICAgICAgICB9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgbGV0IHRocmVzaG9sZCA9XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYWN0aXZlX3RocmVzaG9sZCA+IDAgPyB0aGlzLnN0YXRlLmFjdGl2ZV90aHJlc2hvbGQgOiAwO1xyXG4gICAgICAgIGxldCB3ZWlnaHRzX3RvdGFsID0gdGhpcy5zdW1VcFdlaWdodHMoXHJcbiAgICAgICAgICAgIGFjdGl2ZV9hY2NvdW50cyxcclxuICAgICAgICAgICAgYWN0aXZlX2tleXMsXHJcbiAgICAgICAgICAgIGFjdGl2ZV9hZGRyZXNzZXMsXHJcbiAgICAgICAgICAgIGFjdGl2ZV93ZWlnaHRzXHJcbiAgICAgICAgKTtcclxuICAgICAgICBpZiAodGhpcy5kaWRDaGFuZ2UoXCJhY3RpdmVcIikgJiYgd2VpZ2h0c190b3RhbCA8IHRocmVzaG9sZClcclxuICAgICAgICAgICAgZXJyb3IxID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5wZXJtLndhcm5pbmcxXCIsIHtcclxuICAgICAgICAgICAgICAgIHdlaWdodHNfdG90YWwsXHJcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGRcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRocmVzaG9sZCA9XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUub3duZXJfdGhyZXNob2xkID4gMCA/IHRoaXMuc3RhdGUub3duZXJfdGhyZXNob2xkIDogMDtcclxuICAgICAgICB3ZWlnaHRzX3RvdGFsID0gdGhpcy5zdW1VcFdlaWdodHMoXHJcbiAgICAgICAgICAgIG93bmVyX2FjY291bnRzLFxyXG4gICAgICAgICAgICBvd25lcl9rZXlzLFxyXG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzZXMsXHJcbiAgICAgICAgICAgIG93bmVyX3dlaWdodHNcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmICh0aGlzLmRpZENoYW5nZShcIm93bmVyXCIpICYmIHdlaWdodHNfdG90YWwgPCB0aHJlc2hvbGQpXHJcbiAgICAgICAgICAgIGVycm9yMiA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQucGVybS53YXJuaW5nMlwiLCB7XHJcbiAgICAgICAgICAgICAgICB3ZWlnaHRzX3RvdGFsLFxyXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgcHVibGlzaF9idXR0b25zX2NsYXNzID1cclxuICAgICAgICAgICAgXCJidXR0b25cIiArXHJcbiAgICAgICAgICAgICghKGVycm9yMSB8fCBlcnJvcjIpICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNDaGFuZ2VkKCkgJiZcclxuICAgICAgICAgICAgdGhpcy5pc1ZhbGlkUHViS2V5KHRoaXMuc3RhdGUubWVtb19rZXkpXHJcbiAgICAgICAgICAgICAgICA/IFwiXCJcclxuICAgICAgICAgICAgICAgIDogXCIgZGlzYWJsZWRcIik7XHJcbiAgICAgICAgbGV0IHJlc2V0X2J1dHRvbnNfY2xhc3MgPVxyXG4gICAgICAgICAgICBcImJ1dHRvblwiICsgKHRoaXMuaXNDaGFuZ2VkKCkgPyBcIlwiIDogXCIgZGlzYWJsZWRcIik7XHJcblxyXG4gICAgICAgIGxldCBhY2NvdW50c0xpc3QgPSBJbW11dGFibGUuU2V0KCk7XHJcbiAgICAgICAgYWNjb3VudHNMaXN0ID0gYWNjb3VudHNMaXN0LmFkZCh0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIikpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBhcHAtdGFibGVzIG5vLXBhZGRpbmdcIiByZWY9XCJhcHBUYWJsZXNcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9jayBzbWFsbC0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1jb250YWluZXIgZ2VuZXJpYy1ib3JkZXJlZC1ib3hcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRBY3RpdmVUYWI9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZz1cInBlcm1pc3Npb25zVGFiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFjY291bnQtdGFic1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2xhc3M9XCJhY2NvdW50LW92ZXJ2aWV3IGJvcmRlcmVkLWhlYWRlciBjb250ZW50LWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cInBhZGRpbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9ucz17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb24tYnV0dG9uc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3Jlc2V0X2J1dHRvbnNfY2xhc3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uUmVzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17OH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnJlc2V0XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3B1Ymxpc2hfYnV0dG9uc19jbGFzc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25QdWJsaXNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5wdWJsaXNoXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XCJidXR0b25cIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luTGVmdDogMTB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10aXA9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQucGVybS5jcmVhdGVfcGFwZXJ3YWxsZXRfcHJpdmF0ZV9oaW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblBkZkNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsxMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLmNyZWF0ZV9wYXBlcndhbGxldFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5wZXJtLmFjdGl2ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIZWxwQ29udGVudCBwYXRoPVwiY29tcG9uZW50cy9BY2NvdW50UGVybUFjdGl2ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gY2xhc3NOYW1lPVwidGhyZXNob2xkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0udGhyZXNob2xkXCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDsgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCI1XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5hY3RpdmVfdGhyZXNob2xkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uVGhyZXNob2xkQ2hhbmdlZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZV90aHJlc2hvbGRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50UGVybWlzc2lvbnNMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC5wZXJtLmFkZF9wZXJtaXNzaW9uX2xhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudHM9e2FjdGl2ZV9hY2NvdW50c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5cz17YWN0aXZlX2tleXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHM9e2FjdGl2ZV93ZWlnaHRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzZXM9e2FjdGl2ZV9hZGRyZXNzZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQWNjb3VudD17dGhpcy52YWxpZGF0ZUFjY291bnQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWRkSXRlbT17dGhpcy5vbkFkZEl0ZW0uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlSXRlbT17dGhpcy5vblJlbW92ZUl0ZW0uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQucGVybS5hY2NvdW50X25hbWVfb3Jfa2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3IxID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3IxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnBlcm0ub3duZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SGVscENvbnRlbnQgcGF0aD1cImNvbXBvbmVudHMvQWNjb3VudFBlcm1Pd25lclwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gY2xhc3NOYW1lPVwidGhyZXNob2xkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0udGhyZXNob2xkXCIgLz57XCIgXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDsgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCI1XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5vd25lcl90aHJlc2hvbGR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25UaHJlc2hvbGRDaGFuZ2VkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3duZXJfdGhyZXNob2xkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFBlcm1pc3Npb25zTGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQucGVybS5hZGRfcGVybWlzc2lvbl9sYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRzPXtvd25lcl9hY2NvdW50c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5cz17b3duZXJfa2V5c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cz17b3duZXJfd2VpZ2h0c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzc2VzPXtvd25lcl9hZGRyZXNzZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQWNjb3VudD17dGhpcy52YWxpZGF0ZUFjY291bnQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm93bmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BZGRJdGVtPXt0aGlzLm9uQWRkSXRlbS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3duZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZUl0ZW09e3RoaXMub25SZW1vdmVJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvd25lclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQucGVybS5hY2NvdW50X25hbWVfb3Jfa2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3IyID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2sgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3IyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LnBlcm0ubWVtb19rZXlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SGVscENvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXhXaWR0aDogXCI4MDBweFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD1cImNvbXBvbmVudHMvQWNjb3VudFBlcm1NZW1vXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQdWJLZXlJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9XCJtZW1vX2tleVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm1lbW9fa2V5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQucGVybS5tZW1vX3B1YmxpY19rZXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlB1YmxpYyBLZXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbk1lbW9LZXlDaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs3fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5wZXJtLnBhc3N3b3JkX21vZGVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRQZXJtaXNzaW9uc01pZ3JhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlPXt0aGlzLnN0YXRlLnBhc3N3b3JkX2FjdGl2ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3duZXI9e3RoaXMuc3RhdGUucGFzc3dvcmRfb3duZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW89e3RoaXMuc3RhdGUucGFzc3dvcmRfbWVtb31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZXRQYXNzd29yZEtleXM9e3RoaXMub25TZXRQYXNzd29yZEtleXMuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5wcm9wcy5hY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVLZXlzPXt0aGlzLnN0YXRlLmFjdGl2ZV9rZXlzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcktleXM9e3RoaXMuc3RhdGUub3duZXJfa2V5c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb0tleT17dGhpcy5zdGF0ZS5tZW1vX2tleX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BZGRBY3RpdmU9e3RoaXMub25BZGRJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZUFjdGl2ZT17dGhpcy5vblJlbW92ZUl0ZW0uYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWRkT3duZXI9e3RoaXMub25BZGRJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvd25lclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlT3duZXI9e3RoaXMub25SZW1vdmVJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvd25lclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2V0TWVtbz17dGhpcy5vbk1lbW9LZXlDaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYi1jb250ZW50XCIgc3R5bGU9e3twYWRkaW5nOiAxMH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXZpZGVyXCIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UmVjZW50VHJhbnNhY3Rpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudHNMaXN0PXthY2NvdW50c0xpc3R9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ9ezI1fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhY3RWaWV3PXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXI9XCJhY2NvdW50X3VwZGF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiBcIjJyZW1cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBY2NvdW50UGVybWlzc2lvbnM7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHtMaW5rfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuL0FjY291bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBBY2NvdW50SW1hZ2UgZnJvbSBcIi4vQWNjb3VudEltYWdlXCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XHJcbmltcG9ydCBQcml2YXRlS2V5VmlldyBmcm9tIFwiY29tcG9uZW50cy9Qcml2YXRlS2V5Vmlld1wiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBBZGRyZXNzSW5kZXggZnJvbSBcInN0b3Jlcy9BZGRyZXNzSW5kZXhcIjtcclxuaW1wb3J0IFByaXZhdGVLZXlTdG9yZSBmcm9tIFwic3RvcmVzL1ByaXZhdGVLZXlTdG9yZVwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcblxyXG5jbGFzcyBBY2NvdW50UGVybWlzc2lvblJvdyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFjY291bnQ6IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgICAgICAgcHVia2V5OiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgICAgIGFkZHJlc3M6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICAgICAgb25SZW1vdmVJdGVtOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgICAgIHdlaWdodHM6IFByb3BUeXBlcy5vYmplY3RcclxuICAgIH07XHJcblxyXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcykge1xyXG4gICAgICAgIHJldHVybiAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobmV4dFByb3BzLCB0aGlzLnByb3BzKTtcclxuICAgIH1cclxuXHJcbiAgICBfbG9va1VwUHViS2V5Rm9yQWRkcmVzcyhhZGRyZXNzKSB7XHJcbiAgICAgICAgdmFyIGFkZHJlc3NlcyA9IEFkZHJlc3NJbmRleC5nZXRTdGF0ZSgpLmFkZHJlc3NlcztcclxuICAgICAgICB2YXIgcHVia2V5ID0gYWRkcmVzc2VzLmdldChhZGRyZXNzKTtcclxuICAgICAgICByZXR1cm4gcHVia2V5O1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgbmFtZSwgaXRlbV9pZCwgbmFtZV9vcl9rZXk7XHJcbiAgICAgICAgbGV0IHN1ZmZpeCA9IFwiX2FjY291bnRzXCI7XHJcbiAgICAgICAgbGV0IHB1YktleSA9IHRoaXMucHJvcHMucHVia2V5O1xyXG5cclxuICAgICAgICBjb25zdCBrZXlzID0gUHJpdmF0ZUtleVN0b3JlLmdldFN0YXRlKCkua2V5cztcclxuXHJcbiAgICAgICAgbGV0IGhhc19wcml2YXRlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjY291bnQpIHtcclxuICAgICAgICAgICAgbmFtZSA9IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpO1xyXG4gICAgICAgICAgICBpdGVtX2lkID0gdGhpcy5wcm9wcy5hY2NvdW50LmdldChcImlkXCIpO1xyXG4gICAgICAgICAgICBuYW1lX29yX2tleSA9IChcclxuICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL2FjY291bnQvJHtuYW1lfS9wZXJtaXNzaW9uc2B9PntuYW1lfTwvTGluaz5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHB1YktleSkge1xyXG4gICAgICAgICAgICBuYW1lID0gaXRlbV9pZCA9IHB1YktleTtcclxuICAgICAgICAgICAgbmFtZV9vcl9rZXkgPSAoXHJcbiAgICAgICAgICAgICAgICA8UHJpdmF0ZUtleVZpZXcgcHVia2V5PXtwdWJLZXl9PntwdWJLZXl9PC9Qcml2YXRlS2V5Vmlldz5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgc3VmZml4ID0gXCJfa2V5c1wiO1xyXG4gICAgICAgICAgICBoYXNfcHJpdmF0ZSA9IGtleXMuaGFzKHB1YktleSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmFkZHJlc3MpIHtcclxuICAgICAgICAgICAgcHViS2V5ID0gdGhpcy5fbG9va1VwUHViS2V5Rm9yQWRkcmVzcyh0aGlzLnByb3BzLmFkZHJlc3MpO1xyXG4gICAgICAgICAgICBpdGVtX2lkID0gdGhpcy5wcm9wcy5hZGRyZXNzO1xyXG4gICAgICAgICAgICBuYW1lX29yX2tleSA9ICFwdWJLZXkgPyAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFkZHJlc3NcclxuICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgIDxQcml2YXRlS2V5VmlldyBwdWJrZXk9e3B1YktleX0+e3B1YktleX08L1ByaXZhdGVLZXlWaWV3PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBzdWZmaXggPSBcIl9hZGRyZXNzZXNcIjtcclxuICAgICAgICAgICAgaGFzX3ByaXZhdGUgPSBrZXlzLmhhcyhwdWJLZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHRyIGtleT17bmFtZX0+XHJcbiAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuYWNjb3VudCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT17e2hlaWdodDogMzAsIHdpZHRoOiAzMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXtuYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBwdWJLZXkgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWNjb3VudC1pbWFnZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFByaXZhdGVLZXlWaWV3IHB1YmtleT17cHViS2V5fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvbiBuYW1lPVwia2V5XCIgdGl0bGU9XCJpY29ucy5rZXlcIiBzaXplPVwiNHhcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qcml2YXRlS2V5Vmlldz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT17KGhhc19wcml2YXRlID8gXCJteS1rZXlcIiA6IFwiXCIpICsgXCIgcHViLWtleVwifT5cclxuICAgICAgICAgICAgICAgICAgICB7bmFtZV9vcl9rZXl9XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPnt0aGlzLnByb3BzLndlaWdodHNbaXRlbV9pZF19PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25SZW1vdmVJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbV9pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5yZW1vdmVfd2l0bmVzc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEFjY291bnRQZXJtaXNzaW9uc0xpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBhY2NvdW50czogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdHNMaXN0LFxyXG4gICAgICAgIG9uQWRkSXRlbTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgICAgICBvblJlbW92ZUl0ZW06IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXHJcbiAgICAgICAgdmFsaWRhdGVBY2NvdW50OiBQcm9wVHlwZXMuZnVuYyxcclxuICAgICAgICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLCAvLyBhIHRyYW5zbGF0aW9uIGtleSBmb3IgdGhlIGxhYmVsLFxyXG4gICAgICAgIHBsYWNlaG9sZGVyOiBQcm9wVHlwZXMuc3RyaW5nLCAvLyB0aGUgcGxhY2Vob2xkZXIgdGV4dCB0byBiZSBkaXNwbGF5ZWQgd2hlbiB0aGVyZSBpcyBubyB1c2VyX2lucHV0XHJcbiAgICAgICAgdGFiSW5kZXg6IFByb3BUeXBlcy5udW1iZXIsIC8vIHRhYmluZGV4IHByb3BlcnR5IHRvIGJlIHBhc3NlZCB0byBpbnB1dCB0YWdcclxuICAgICAgICB3ZWlnaHRzOiBQcm9wVHlwZXMub2JqZWN0IC8vIHdlaWdodHM6IGhhc2ggb2Yge2FjY291bnQgaWQgLT4gd2VpZ2h0fVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBzZWxlY3RlZF9pdGVtOiBudWxsLFxyXG4gICAgICAgICAgICBpdGVtX25hbWVfaW5wdXQ6IFwiXCIsXHJcbiAgICAgICAgICAgIHdlaWdodF9pbnB1dDogXCJcIixcclxuICAgICAgICAgICAgZXJyb3I6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub25JdGVtQ2hhbmdlID0gdGhpcy5vbkl0ZW1DaGFuZ2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uSXRlbUFjY291bnRDaGFuZ2UgPSB0aGlzLm9uSXRlbUFjY291bnRDaGFuZ2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uQWRkSXRlbSA9IHRoaXMub25BZGRJdGVtLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgb25JdGVtQ2hhbmdlKGl0ZW1fbmFtZV9pbnB1dCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2l0ZW1fbmFtZV9pbnB1dH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uSXRlbUFjY291bnRDaGFuZ2Uoc2VsZWN0ZWRfaXRlbSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkX2l0ZW0sIGVycm9yOiBudWxsfSk7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkX2l0ZW0gJiYgdGhpcy5wcm9wcy52YWxpZGF0ZUFjY291bnQpIHtcclxuICAgICAgICAgICAgbGV0IHJlcyA9IHRoaXMucHJvcHMudmFsaWRhdGVBY2NvdW50KHNlbGVjdGVkX2l0ZW0pO1xyXG4gICAgICAgICAgICBpZiAocmVzID09PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzID09PSBcInN0cmluZ1wiKSB0aGlzLnNldFN0YXRlKHtlcnJvcjogcmVzfSk7XHJcbiAgICAgICAgICAgIGVsc2UgcmVzLnRoZW4oZXJyb3IgPT4gdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6IGVycm9yfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbldlaWdodENoYW5nZWQoZXZlbnQpIHtcclxuICAgICAgICBsZXQgdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWUudHJpbSgpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3dlaWdodF9pbnB1dDogcGFyc2VJbnQodmFsdWUpfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25BZGRJdGVtKGl0ZW0pIHtcclxuICAgICAgICBpZiAoIWl0ZW0pIHJldHVybjtcclxuICAgICAgICBsZXQgbmV4dF9zdGF0ZSA9IHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRfaXRlbTogbnVsbCxcclxuICAgICAgICAgICAgaXRlbV9uYW1lX2lucHV0OiBcIlwiLFxyXG4gICAgICAgICAgICB3ZWlnaHRfaW5wdXQ6IFwiXCIsXHJcbiAgICAgICAgICAgIGVycm9yOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKG5leHRfc3RhdGUpO1xyXG4gICAgICAgIGxldCBpdGVtX3ZhbHVlID0gdHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIgPyBpdGVtIDogaXRlbS5nZXQoXCJpZFwiKTtcclxuICAgICAgICB0aGlzLnByb3BzLm9uQWRkSXRlbShpdGVtX3ZhbHVlLCB0aGlzLnN0YXRlLndlaWdodF9pbnB1dCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25XZWlnaHRLZXlEb3duKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBldmVudC5rZXlDb2RlID09PSAxMyAmJlxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLndlaWdodF9pbnB1dCAmJlxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNlbGVjdGVkX2l0ZW1cclxuICAgICAgICApXHJcbiAgICAgICAgICAgIHRoaXMub25BZGRJdGVtKHRoaXMuc3RhdGUuc2VsZWN0ZWRfaXRlbSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHZhciBrZXkgPSAwO1xyXG4gICAgICAgIGxldCBhY2NvdW50X3Jvd3MgPSB0aGlzLnByb3BzLmFjY291bnRzXHJcbiAgICAgICAgICAgIC5maWx0ZXIoaSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vaWYgKHRoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0KSByZXR1cm4gaS5nZXQoXCJuYW1lXCIpLmluZGV4T2YodGhpcy5zdGF0ZS5pdGVtX25hbWVfaW5wdXQpICE9PSAtMTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEuZ2V0KFwibmFtZVwiKSA+IGIuZ2V0KFwibmFtZVwiKSkgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhLmdldChcIm5hbWVcIikgPCBiLmdldChcIm5hbWVcIikpIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAubWFwKGkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFBlcm1pc3Npb25Sb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtrZXkrK31cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17aX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cz17dGhpcy5wcm9wcy53ZWlnaHRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZUl0ZW09e3RoaXMucHJvcHMub25SZW1vdmVJdGVtfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGtleV9yb3dzID0gdGhpcy5wcm9wcy5rZXlzLm1hcChrID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxBY2NvdW50UGVybWlzc2lvblJvd1xyXG4gICAgICAgICAgICAgICAgICAgIGtleT17a2V5Kyt9XHJcbiAgICAgICAgICAgICAgICAgICAgcHVia2V5PXtrfVxyXG4gICAgICAgICAgICAgICAgICAgIHdlaWdodHM9e3RoaXMucHJvcHMud2VpZ2h0c31cclxuICAgICAgICAgICAgICAgICAgICBvblJlbW92ZUl0ZW09e3RoaXMucHJvcHMub25SZW1vdmVJdGVtfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGFkZHJlc3Nfcm93cyA9IHRoaXMucHJvcHMuYWRkcmVzc2VzLm1hcChrID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxBY2NvdW50UGVybWlzc2lvblJvd1xyXG4gICAgICAgICAgICAgICAgICAgIGtleT17a2V5Kyt9XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzcz17a31cclxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzPXt0aGlzLnByb3BzLndlaWdodHN9XHJcbiAgICAgICAgICAgICAgICAgICAgb25SZW1vdmVJdGVtPXt0aGlzLnByb3BzLm9uUmVtb3ZlSXRlbX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBlcnJvciA9IHRoaXMuc3RhdGUuZXJyb3I7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhZXJyb3IgJiZcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZF9pdGVtICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudHMuaW5kZXhPZih0aGlzLnN0YXRlLnNlbGVjdGVkX2l0ZW0pICE9PSAtMVxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgZXJyb3IgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0ud2FybmluZzNcIik7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhZXJyb3IgJiZcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pdGVtX25hbWVfaW5wdXQgJiZcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5rZXlzLmluZGV4T2YodGhpcy5zdGF0ZS5pdGVtX25hbWVfaW5wdXQpICE9PSAtMVxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgZXJyb3IgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0ud2FybmluZzRcIik7XHJcblxyXG4gICAgICAgIGxldCBjdyA9IFtcIjEwJVwiLCBcIjcwJVwiLCBcIjMwJVwiLCBcIjEwJVwiXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbD17dGhpcy5wcm9wcy5sYWJlbH1cclxuICAgICAgICAgICAgICAgICAgICBlcnJvcj17ZXJyb3J9XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17dGhpcy5zdGF0ZS5pdGVtX25hbWVfaW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU9e3RoaXMuc3RhdGUuaXRlbV9uYW1lX2lucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uSXRlbUNoYW5nZX1cclxuICAgICAgICAgICAgICAgICAgICBvbkFjY291bnRDaGFuZ2VkPXt0aGlzLm9uSXRlbUFjY291bnRDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgb25BY3Rpb249e3RoaXMub25BZGRJdGVtfVxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbl9sYWJlbD1cImFjY291bnQudm90ZXMuYWRkX3dpdG5lc3NcIlxyXG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXt0aGlzLnByb3BzLnRhYkluZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93UHViS2V5PXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVBY3Rpb25CdXR0b249eyF0aGlzLnN0YXRlLndlaWdodF9pbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICBhbGxvd1VwcGVyY2FzZT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUud2VpZ2h0X2lucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbldlaWdodENoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwid2VpZ2h0LWlucHV0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQucGVybS53ZWlnaHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMub25XZWlnaHRLZXlEb3duLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXt0aGlzLnByb3BzLnRhYkluZGV4ICsgMX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9BY2NvdW50U2VsZWN0b3I+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e3BhZGRpbmdUb3A6IFwiMnJlbVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t3aWR0aDogY3dbMF19fSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3dpZHRoOiBjd1sxXX19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0uYWNjdF9vcl9rZXlcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7d2lkdGg6IGN3WzJdfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS53ZWlnaHRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7d2lkdGg6IGN3WzNdfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5hY3Rpb25cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWNjb3VudF9yb3dzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2tleV9yb3dzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2FkZHJlc3Nfcm93c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudFBlcm1pc3Npb25zTGlzdCwge2F1dG9zdWJzY3JpYmU6IGZhbHNlfSk7XHJcbiIsImltcG9ydCBSZWFjdCwge0NvbXBvbmVudH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBXYWxsZXRVbmxvY2tBY3Rpb25zIGZyb20gXCJhY3Rpb25zL1dhbGxldFVubG9ja0FjdGlvbnNcIjtcclxuaW1wb3J0IFdhbGxldERiIGZyb20gXCJzdG9yZXMvV2FsbGV0RGJcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgUHJpdmF0ZUtleVN0b3JlIGZyb20gXCJzdG9yZXMvUHJpdmF0ZUtleVN0b3JlXCI7XHJcbmltcG9ydCBRcmNvZGVNb2RhbCBmcm9tIFwiLi9Nb2RhbC9RcmNvZGVNb2RhbFwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuaW1wb3J0IHtNb2RhbCwgQnV0dG9ufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcml2YXRlS2V5VmlldyBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIHB1YmtleTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuX2dldEluaXRpYWxTdGF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLnNob3dNb2RhbCA9IHRoaXMuc2hvd01vZGFsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5oaWRlTW9kYWwgPSB0aGlzLmhpZGVNb2RhbC5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLnNob3dRck1vZGFsID0gdGhpcy5zaG93UXJNb2RhbC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaGlkZVFyTW9kYWwgPSB0aGlzLmhpZGVRck1vZGFsLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMub25DbG9zZSA9IHRoaXMub25DbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbml0aWFsU3RhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaXNNb2RhbFZpc2libGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc1FyTW9kYWxWaXNpYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgd2lmOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMuX2dldEluaXRpYWxTdGF0ZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlTW9kYWwoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzTW9kYWxWaXNpYmxlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dNb2RhbCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXNNb2RhbFZpc2libGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlUXJNb2RhbCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXNRck1vZGFsVmlzaWJsZTogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93UXJNb2RhbCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXNRck1vZGFsVmlzaWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB2YXIgbW9kYWxJZCA9IFwia2V5X3ZpZXdfbW9kYWxcIiArIHRoaXMucHJvcHMucHVia2V5O1xyXG4gICAgICAgIHZhciBrZXlzID0gUHJpdmF0ZUtleVN0b3JlLmdldFN0YXRlKCkua2V5cztcclxuXHJcbiAgICAgICAgdmFyIGhhc19wcml2YXRlID0ga2V5cy5oYXModGhpcy5wcm9wcy5wdWJrZXkpO1xyXG4gICAgICAgIGlmICghaGFzX3ByaXZhdGUpIHJldHVybiA8c3Bhbj57dGhpcy5wcm9wcy5jaGlsZHJlbn08L3NwYW4+O1xyXG4gICAgICAgIHZhciBrZXkgPSBrZXlzLmdldCh0aGlzLnByb3BzLnB1YmtleSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZvb3RlciA9IFtcclxuICAgICAgICAgICAgPEJ1dHRvbiBrZXk9XCJjYW5jZWxcIiBvbkNsaWNrPXt0aGlzLm9uQ2xvc2V9PlxyXG4gICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInRyYW5zZmVyLmNsb3NlXCIpfVxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgIDxhIG9uQ2xpY2s9e3RoaXMub25PcGVuLmJpbmQodGhpcyl9Pnt0aGlzLnByb3BzLmNoaWxkcmVufTwvYT5cclxuICAgICAgICAgICAgICAgIDxNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMuc3RhdGUuaXNNb2RhbFZpc2libGV9XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQucGVybS5rZXlfdmlld2VyXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlZj17bW9kYWxJZH1cclxuICAgICAgICAgICAgICAgICAgICBpZD17bW9kYWxJZH1cclxuICAgICAgICAgICAgICAgICAgICBvbkNhbmNlbD17dGhpcy5vbkNsb3NlfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvb3Rlcj17Zm9vdGVyfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucHVibGljXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnB1YmtleX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnByaXZhdGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUud2lmID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9e3tmb250V2VpZ2h0OiA2MDB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUud2lmfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbi1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkhpZGUuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjbGlja2FibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zaG93UXJNb2RhbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7aGVpZ2h0OiA1MH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtyZXF1aXJlKFwiYXNzZXRzL3FyLnBuZ1wiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uU2hvdy5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnNob3dcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtYmxvY2sgZ3JpZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0uYnJhaW5cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2tleS5icmFpbmtleV9zZXF1ZW5jZSA9PSBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJOb24tZGV0ZXJtaW5pc3RpY1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoga2V5LmJyYWlua2V5X3NlcXVlbmNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7a2V5LmltcG9ydF9hY2NvdW50X25hbWVzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkuaW1wb3J0X2FjY291bnRfbmFtZXMubGVuZ3RoID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayBncmlkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLmZyb21cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7a2V5LmltcG9ydF9hY2NvdW50X25hbWVzLmpvaW4oXCIsIFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L01vZGFsPlxyXG4gICAgICAgICAgICAgICAgPFFyY29kZU1vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd01vZGFsPXt0aGlzLnNob3dRck1vZGFsfVxyXG4gICAgICAgICAgICAgICAgICAgIGhpZGVNb2RhbD17dGhpcy5oaWRlUXJNb2RhbH1cclxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLmlzUXJNb2RhbFZpc2libGV9XHJcbiAgICAgICAgICAgICAgICAgICAga2V5VmFsdWU9e3RoaXMuc3RhdGUud2lmfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIHRoaXMuc2hvd01vZGFsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICAgICAgdGhpcy5oaWRlTW9kYWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBvblNob3coKSB7XHJcbiAgICAgICAgV2FsbGV0VW5sb2NrQWN0aW9ucy51bmxvY2soKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJpdmF0ZV9rZXkgPSBXYWxsZXREYi5nZXRQcml2YXRlS2V5KHRoaXMucHJvcHMucHVia2V5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3dpZjogcHJpdmF0ZV9rZXkudG9XaWYoKX0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4ge30pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uSGlkZSgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHt3aWY6IG51bGx9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBRUkNvZGUgZnJvbSBcInFyY29kZS5yZWFjdFwiO1xyXG5pbXBvcnQge0Flc30gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCB7TW9kYWwsIEJ1dHRvbn0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5cclxuY2xhc3MgUXJjb2RlTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuX2dldEluaXRpYWxTdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMub25QYXNzd29yZEVudGVyID0gdGhpcy5vblBhc3N3b3JkRW50ZXIuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uS2V5RG93biA9IHRoaXMub25LZXlEb3duLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbkNhbmNlbCA9IHRoaXMub25DYW5jZWwuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uQ2xvc2UgPSB0aGlzLm9uQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5pdGlhbFN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlzU2hvd1FyY29kZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGtleVN0cmluZzogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgb25DYW5jZWwoKSB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5oaWRlTW9kYWwoKTtcclxuICAgICAgICB0aGlzLm9uQ2xvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlZnMucGFzc3dvcmRfaW5wdXQpIHRoaXMucmVmcy5wYXNzd29yZF9pbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLl9nZXRJbml0aWFsU3RhdGUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25QYXNzd29yZEVudGVyKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgbGV0IHB3ZCA9IHRoaXMucmVmcy5wYXNzd29yZF9pbnB1dC52YWx1ZTtcclxuICAgICAgICBsZXQga2V5ID0gdGhpcy5wcm9wcy5rZXlWYWx1ZTtcclxuICAgICAgICBpZiAocHdkICE9IG51bGwgJiYgcHdkICE9IFwiXCIpIHtcclxuICAgICAgICAgICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkICYmIGtleSAhPSBudWxsICYmIGtleSAhPSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcHdkX2FlcyA9IEFlcy5mcm9tU2VlZChwd2QpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHFya2V5ID0gcHdkX2Flcy5lbmNyeXB0VG9IZXgoa2V5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzU2hvd1FyY29kZTogdHJ1ZSwga2V5U3RyaW5nOiBxcmtleX0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy9ub3RpZnkuZXJyb3IoXCJZb3UnZCBiZXR0ZXIgZW50ZXIgYSBwYXNzd29yZCB0byBlbmNyeXB0IHRoZSBxciBjb2RlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc1Nob3dRcmNvZGU6IHRydWUsIGtleVN0cmluZzoga2V5fSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uS2V5RG93bihlKSB7XHJcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHRoaXMub25QYXNzd29yZEVudGVyKGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgcG9zID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc1Nob3dRcmNvZGUpIHBvcyA9IHt0ZXh0QWxpZ246IFwiY2VudGVyXCJ9O1xyXG5cclxuICAgICAgICBjb25zdCBmb290ZXIgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmlzU2hvd1FyY29kZSkge1xyXG4gICAgICAgICAgICBmb290ZXIucHVzaChcclxuICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAga2V5PVwic3VibWl0XCJcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uUGFzc3dvcmRFbnRlcn1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwibW9kYWwub2tcIil9XHJcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvb3Rlci5wdXNoKFxyXG4gICAgICAgICAgICA8QnV0dG9uIGtleT1cImNhbmNlbFwiIG9uQ2xpY2s9e3RoaXMub25DYW5jZWx9PlxyXG4gICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImNhbmNlbFwiKX1cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE1vZGFsXHJcbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnByb3BzLnZpc2libGV9XHJcbiAgICAgICAgICAgICAgICBvbkNhbmNlbD17dGhpcy5vbkNhbmNlbH1cclxuICAgICAgICAgICAgICAgIGZvb3Rlcj17Zm9vdGVyfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e21hcmdpbjogXCIxLjVyZW0gMFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImg0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJtb2RhbC5xcmNvZGUudGl0bGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxmb3JtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZ1bGwtd2lkdGhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbjogXCIwIDMuNXJlbVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25TdWJtaXQ9e3RoaXMub25QYXNzd29yZEVudGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub1ZhbGlkYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU2hvd1FyY29kZSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBzdHlsZT17cG9zfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjZmZmXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogXCIuNzVyZW1cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UVJDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT17MjU2fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmtleVN0cmluZ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwibGVmdC1sYWJlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2FmZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJtb2RhbC5xcmNvZGUuaW5wdXRfbWVzc2FnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJwYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkZvY3VzPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZzLnBhc3N3b3JkX2lucHV0LnNldEF0dHJpYnV0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwicGFzc3dvcmRfaW5wdXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5vbktleURvd259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvTW9kYWw+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuUXJjb2RlTW9kYWwucHJvcFR5cGVzID0ge1xyXG4gICAgbW9kYWxJZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAga2V5VmFsdWU6IFByb3BUeXBlcy5zdHJpbmdcclxufTtcclxuUXJjb2RlTW9kYWwuZGVmYXVsdFByb3BzID0ge1xyXG4gICAgbW9kYWxJZDogXCJxcl9jb2RlX3Bhc3N3b3JkX21vZGFsXCJcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgUXJjb2RlTW9kYWw7XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUdRQUFBQmtDQUlBQUFEL2dBSURBQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQUIzUkpUVVVINFFvTEJ6RUtyN29GRGdBQUlBQkpSRUZVZU5xOWZYbVlYVldWNzFwNzczUHV2VlVWU0FMMm80MEttakNFZ2lTRVZGVVNBaVJSNlU5Qndhbjl0UEcxT1BMazJiUVRhUWQ4OXJPZm9vSkQ4MFJCVWZUejRSUG5WcHg5Ylp1RXpJSE1BYUlDcmFJaVpLanBuclAzWHV2OXNlNWR0ZXRVMVUxU2l2ZVArbTV1enRsbjc3WFh0SDlyT1BqV3Q3NTF5NVl0enJrUVFwWmxJUVJqakRHR2lPQjRQc3hzaklreGpveU1iTm15aFprQkFCSGxmNG5JR05QWDE5ZlQwK085OTk1djJyUXB2UmNSNVJyNXJyZkxQL1ZLSXRxN2QrL1ZWMTl0akFHQVBNOURDTXljNS9uY3VYTS8vZWxQeTQxNzl1eDU0eHZmV0svWGlValdKVS9wUEg5cmJRZ0JBSlFDOG1obWpqRU9EQXk0YmR1MnJWKy9YbjZOTVNLaXpEdWQ0ckY4WkhTWjkram9hS1BSa0FHTk1USlVXWmJidDIrMzFucnYweWtLbFdVRS9WMXVrUTJUK2NnRmlIam8wS0Z0MjdaNTcrVkhXYUcxdHRsc3hoaXR0Y3c4T0RoNHp6MzM2TVIwcUR6UDA2ZFBKSmJ1VUl4Ulp5S1RRVVNuVTBudmtXVWZGN0YwOUJCQ3ZWNlg3L0o0bVhHZTUwUlVZVmpkR3lHWjhwRThYY21uWHhEUkdOTnNOblZWd2dzeFJpR1ovZzRBemprZFdUZnNXSlpRb2JMT3lnaDEwbDJWeDAvalk0eVIrU0ZpQ0NIR0dHTVU2bFJJTDQ5TEoyZXRGVUtrZ3NuTTNuc2RSNGFTblJES0toV01NWWNPSGRJSE9lZmt1MHdteGlnRDZ1Wk4vTWpUWlVENXlPN3FqaUtpa2JIa1Y2R2lQSU9QOHlPM0s2R2RjOVphYTIyV1pUS1BQTTlWbEZTQ0FNQjdYNnZWZEVMT09VVE1zdXpzczg4R2dDekxaQnhaU1FoQnVJT0lHbzFHWDErZkVESEd1Ry9mdm5TelJUN3lQTy92NzVjWmV1L0xzcHhxL3JvcklRUVpjR2hvU01iVWE1eE1TTlNraXF0ejduakZVSmxmTmJHS21MVTJ4aWpLb2lLR3d0ZjZWeTh3eHN5WU1VTnVGOFd2bkp2bnVRdzRPanFxa2lLcVVEWkc5a0RZVmlncnVrejVjZEw1VjVoT0dQYklrU09xc0l3eFRxaVlYaWM4Zkx3S1B0V0ZLa2NWWFNDTG5IaEw1VWU1UmFtV3FnZ2lLb3BDWlZua1M5YVpaWmthS0wxQXBxRzBWcXAxc0lrNmlPeWZFRmVremFSYVVLNDdxcFh0OENSbEhORkJreW9wWGJ5cU0vbEYxYlBjcU9KUVVYWWlMSExseU1pSVhpd2pxSmlyZFZZcFViSjJtTHhvZ0ltTVlveXgxbzU1RThMTTZZWjMvbFJZV3IvcmJ1Zy9SZGxYM0JHZGxpZ1hkVnhFOFJIUjV6NzN1U3pMUklVdFdMQkF4MXl4WW9XTUZrSzQ3Nzc3Wk9iT09TV3JlbTN5Rk8rOVBuZlRwazFUTFVjMEl5TDI5ZldKVWtwZHhUR2Q5V1IvS2haZHVTL2xMTjE4blorUVRIWlZMSUE2YnNxYnFvbjB1NHd3VWE2UGE3WVZzUmhUVUU4MnBZU2gxUG1VTDdLWitzdEU1NnV5WURGQlltR0ZITUl2NmlMSUlNS0djdjAwZElncThxbjB0WG15aVNYUDFzMVhhUktGb2xxeXdobzZiNzFTNlNKS1hTUlVyMVJKOU42TDFQL3BNNi9vazc4RXNWUXAxR28xOFI3VXlzaW5LQXBoaEpSd0haaFUyV2RrWk9TZWUrN1J3Yzg5OTF4eDY1eHpxUUU5WHN1ZTBxaHk0MStJczFLZWttMFhma2xWZTJWKytyOFZ1ZEJ4dXJxNjFNdEJ4Tzd1YnZtdm9paW1ZYzBuRWpUMVF2NXlPaXQxR2xTUnkrYW5CMllseE1TamlSeWJVNTlEYmJlTW1WcmJQTS8vRkozVmFlUC9BdFpRNmFLbnFGU0ZqeDFUazRPaCtNYXFzOVFSVllNb0JxdXJxMHRkQklXVjVPeFNZY05qRjhhVXRTc2NPaDNPRWtlOGdsVjFkdlpTUktFeUovSGdKNHJoNHNXTFZXRFZlaUxpeG8wYkw3endRZ1dGam9vYUhhT3lUN0V6ZFd2L0RKeVZycUdDUXgwTFp4MGpKMlpacGtCTnlvbjFlbDN0cHZwY3VpWHE3b3F2YTR4UlpLMHpTS2ZqcE1lTXl0TGN0R1VxM2ZPam1qRDVlMVN5S2p1bzVsWThUNzJxb2loa1BRcHNpb0pUNWkzTFVxRkJFV0U1WTNjK3h1bVl1aHp4UW82SldGT1JRRGxmL0pxanFsTDFzUFRHenFkWnVTeUVNRHc4ckZDdmM4NTdMNmM4NFpRVTg1TFA4UEN3ekZuY2ZiVVNXWmJKSklXQ0hiWlcySE53Y0ZEdVRWMjVveEJyS2xHZnFLbzZMMTZ2ZDg2TmpJeUlnQnpWS2dIQXZuMzdsSXNYTEZodzMzMzNpZHoxOXZZcWdkSlR0MnhleXNoeUxCVWFpUis3Yk5teXp1dVN0WVFRSnA0aXBzbFpGWkMrOCtKMXdRcGFkUlpiUGR3ZE9YSkUvSUN5TE92MXVvcEpyVmFyNkdBaG9wNkgxTytWUTFLZTU0cFZUSFhvVXo0VndVL1BCbjhHblNWek9rYWRWYm4zcUZZcG5hNUVtMUoweFhzdnJvT3FjRVZCbE5iaU9zakJTSFNjVG5pcU9ZampWb0hYL3d3ZWZJb1dISXZ6VWtFcGp4cGtreGtMMWk3K3AvaFpjcnNLc25xMnFkOHI4NUZseTE1MmRYVXA0TkZodHhSZlZkRnp6dlgwOUl5N2FOV3FWUlVmNTFqMnY0UFkxbW8xVVNpS2RxcnpJdTdpUkdjdkJmNTFBdUpueVRnN2R1d3c3VTA1ZCtFQ0h3TXp4K2p2V2I5V1dYdmh3b1hxOUc3YXRDbTEvUk9kdU9QOU9PZFdybHhwRkVWVm4yVWFRY1AwdUZBVVJRaEJ4RWNSRDNXYW5ITnlkbE1XU08xVWlndXJCeStJcUpEWFd0dlYxV1dOc0tyTHM3b0FFaEtNa2FpU2tyNWVyNmU3MGdHQVB5b1R5TEJHNUQvZDJHbkR5Z3JJT3VjRXJkWVFWcXBLeExUTDNvZzJ5YkpNTkhTSzBsUmcyOHhsRmNzcmtlMEtEaTZFRTkzVWJEYlRjT1QwRnBYaXFPN2d3WU9wRXRHTm5VWjBSMmdodDN2djVRR3lBUEh1eE45Ukprb0pxdXF2QmVBNkowc1Y4NTlsV1JsaWx0V0l3dUdEaDJJSXpya3N5MnlXaTJpci9oWlRJR01LYitvSnRISktPeTRGVFVRSER4NUVzUmRpanlzdzV2RVNTN1pkcFZpRVFpaVZlbmY2VCs5amx0bEVoTmw3djJYTE5nMkpIemx5UkREbFBNOEhCcFlaQTBWUjFHckNZZ3hnamh3NThzQUQrL004SHhrWm1UMTc5cng1ODNRL2hGak5abE1NZ3JMazlFSjgzdnM4ejFFMzRjOEZMYWFITlJXWnRXdlhpbG9weS9Mc3M4K2VNV01HTVdhWlE0UkkwUm9ieVlzbXdyYUJWbjRSUDRzQktFWnJrU21nTVFDR0dRR1JZZ3doMUdxMTlHQUVBQXd3Mmh4dDFCc01EQUFJU0V5SWFBQ252VHBNY1Y2VndjNUF3aFJqUlpGRTJkdWhvYUc3N3JycksxLzV5bzkvL0ZPaFlKN256V1pUTnRrWWMvNlMvaGU4NEFWWFhYWFZuRGwvVFV3eCtzeGxQdmpjVFZpMlJHdUFEVEJEL01DLy9NdDN2L3RkdEJiQlJvYmNaVVZSQ1ArcTY0dUl6N3YwK2IyOXZaZGZmcmtHZTJLTWVaYmo4ZnRKWTZTZzlrZlBFTk9JM1VzQWZMUTV5T3gvL1p1SFh2cXlLNHdGUURBV0pvWVBXczlHaThZQm1LWExsKzI3Zno5eEhDMUdpS09pN09sTVpIN2VGOHorZGEvOXJ3aUFCb3dCTUdNcExob2VicWsvQk9Nc0lMenM1WDk3OFBBaFlnNFVJMDl2YWEwcFFYOS9meVVXM2RuVmNwRDF6aitIbVFQNXlKTDl3VXdjaWtQTTVmWHZmZzhBSUlLb1VZTzVXcE0wK0lxSUZpQ3pEc0NZckF0czdZMy8vUitia1QxekpDYm1aclBKSEprak00ZlFvcGxuSDBicG10ZTh5QnB3Q0hVRTQyYW0zdFA0ZzVjeHh1bmZPNy84MWNEc21ZazlNMGRQekV6TWdXTVpDaVlXMW1QbXRXdlg2dklsWGptVzY5RFYxYVZqS3lMUndjbU9FSi95bEtlSVFqRm93QUFBTVpITjZvc1hMTHB2MTk1YXJWRVVvOFpaRm84SHVLK3Y3N25QZmE0NEZrVDAwNS8rZE92V3JjRVhJUVpyYmZSTk5PN1dULzd2ZFQ5ZnUzMzdWclJRRnI1ZXF3RkEyU3p5ZXMxYUpBS0c0TUUzY25GS29GNTNaVE5RQ0pWam5TSWN0U3dyeXNJQUdnTkU4TXBYdkdKNHRQbXF2Ny9TR0VZQVkwV3ZpUS9zVWpkQWJoZTZhKzVVNjdONjllbzA3aVFPWkdjeFhyNTh1ZmN0V2FIb2ZUbkNzVG52MURrWlFtWnpBQWNHQWVIWno3bmtlOS8vc2RqK2lTeTllL2Z1bDcvOFpRalFsVnNFUUxTdTFuUEswK2NHNXNCY2xHM2ZNcWpvUk0rZUExOTkxZVV0Y1VQNDJDMTNxclJLQkV5d21vMGJONzdybldzYTlieVdPeGs4cjNXamF4eDQrTkVnMXhQSEdDTlRZQlllVXlkR1V4S05NY3VYTHgrWEtYVHh4UmRYRHBDZHcvZkc0Y0JBMzloSzJETTNMMXgrbmdXbzJ4cUNBM0E5TTA3OGZ6Lzc5eERaQjA1ZGFwbU5PQ3RsOE16eG9WL3NQMjNPVXh5QUZSRzNYUU1yVmdibUlqSUpsWW1aQWxQd3Z2QmNjdURYWHZsOFJNenJOUUR6L28vZWthcTJzaXlUallrYy9Fc3V2NnlST1ZFSllHcXJMcm5NTXdlS3Ztekc2SWs1RWtkaVZXVWhoQjA3ZHFqVGQ4NDU1MVNKbFRvVXFacWY5QU1JUzVmMmh4QTRjdlNCeWIvMzNXL1BEQ0JBN21vQTJWOC85ZFEvUFBaNFNWR21JbXZRQWZXZmdUbEdUMzZFL2ZBRlN4WjA1OWFpUTVPRHlUOTA0eWNDczIrcnFoaEswVitqTk1LQjMzTDF5MXNRQUxyLzhkRXZDS3VtekNzSUoxTmc5aHpMOHhlZVUzYzJ6M01BQjdiMjZCTWo4bWhtVDh3aE1rVm00alZyMW9nTUxscTBTQklwSnFwNUk3aVBlcUZDWFhVakprbWdNSllJckxGZ0NEaysrdXRmZitBRE53WUNCaWhEbkRWNzlvTy8rTVhzazJjREJRQXlDSXEzcUZMSXNveUlFTmdZZ3k2THhPdnUyWGpLS2FjQUI2QVNtTmFzZWNmaEk4TVJVRFNuc1ZaY09JY09BZ3lQREFtRGkyNHR5MUpPYkVWUmlLb1ZWQ3NTTVFFZ2Z1NzJ6OFlRZlZrQ0VNUzRjZE4ya25NaWtkZ0ZOQUJJOVhwZERrWnl4a3lUdk1aQk5KWGp6c1NJN25nRWxXdFozbXdPQXhObWVPMjExNkkxQUlCWkRnZy9YN2VPZ1lqSldSTmpDVUJpL2lTcFRBU3daZDBCWTJRQVovTUdaTm5QL3VNL0xFSk4zTkpJMTExM25iTUFCb2doQkFKczYyUEQ5U3czeUJRaUFHZFdXS2FGZGdnczA0STZySXRFQUxCZzhhSXN3NjZhUXlBQXV1Kyt2UlNGK0duMGhDcmh5RFEzY1l4WWdzYUtRVkZDZGdnZkdiQkVVSy9YQVBtSnh4NzcrcmYrTFFSaWNCekRHNis1NW95ejVqWHFHU0lTazdOajJRbXlKSW16dDN3V1ptTXRBeEJnQ1BUVXB6L3RtbXZld0JHQUl5RGVmdHR0UGpBeE1JSjFqaGxCckFaaUNNRzBZOXRFQVpJa1dNMnhJU0lHdE02Ujl3Qnczc0p6aXlJNEJBUVlHaHBCQ3dSczJxZ3BNOHZwUTFoRUNESXB1NHpMOXRZZys1ZzNORzVFQUFES09Rd1BBM29vc2xzK2RvT3ptUU1BQ0dDNlAzelRUUWJaY0hTTWxqUGdWakp1Wlg5YWd3TkNKQVJDSnJUTzJPeDk3L3Vmb29rdFJJVDRtYTk4TitObUFDQUE1QklSUzRoZ0Fad05ERTVzdnpVYTVrbVpBaEVOQUhOaHNnYXdhOGU3YXdZb3kyeGdZSVRJREF3V0FHZ01mVWZFdFd2WGltd3B2aVNmZ1lFQmsrWjVwN2xiaW0ybDZmTkVCRDY0V2oxeUJBdmYrTWEzeXVBWndMcjg4aGUvcE9hc0JRUUFwcGJnZERvem9UN1JHalFBME4zZEdPZzdwMjFxOEd0M2ZRWFFVdHNYaWpFNmNISlV0QmFOellDTmdyK0N6QWpQdHBML21BdzBLQndCc0h2MjdyU216cmFJa0MxYzBPdUV6dUxLSXFBQkFHdzBHZ0pNcGpDV2hpYXR0WTFHdzNUT0dVd0xIOUxzZm90WmVlU0pmZmYvSjRESnJJMlJYLy82MTFvRERHUElrU3h6eWpNWE1CaG1samtCQU5oNmR2bmxsd0cwVk1uUGYvcERRT3NRa0FrQXJMRUdBQWdRRFVVb3l4TFFNS1BpUENvSExiZ1ZnU0liMi9QUUx6WTBSMnFlbTRFTVlMNnMvenhodi9aU1FVN1dhYXBxbWdjODVnWklIbnlhZFpmbVJsV1NielQzc0NRR2dLMmJONGgzeEl5QStVVXJscWZQT0pZamF2cFEwWkxQZWU1cUMwUk0xdVV3T3Z5N1B4N0cxaVlqQUVRS0xkZ2FFTkVhWTlPRVQwZ3FNbVFURUJHd2VOZDE3d2NvZ0RPd3BuZEovelBtekVSZzREYVIydXFvTEV0TlB0ZGpYNW9IRDYyVGFKSUtrU2F1Vk1KekxlZWV3VG9Iakx0M2IvWFJBQklSblh6YXM3cnF4akFBUlRrVEhoVUlrU3NNQ3BJRnpBak1aODN2dFFBR1RZekJPTmp6d0M4QndMUTRsSnh4Z0MyZXlQT2NvbytoRkVuVW1wdWtJTUlnRm5kKzhVdGYvOWIzMlFBQlE2eDkrTU1mUkFBRDdHeE9rY1ZneWFwdnVPR0dJMGVPaUwyVytDNFI3ZG16cCtvNlRCcWttWXF6bkVVd0JoQi8vOXVISXhoQVFPQm5uWEdtSVRDWWhuQ09HaDBZejMwR21WMDJZNVlGY0prQlJpNUgvL04zZjdUUVpsNGlIdHR0S290UkFHcU01NFUwd0VNQjN2K0I2Njk4OVp2eTdvWW5BQXl2ZThPYkwxazVFS01ITUFBR1VCU3NFTXNJejhvWlExaE1ZNWZxVVR1cExLaEFvMmtJVTNWOGk2eEV6VElBNDZPL2ZVaWdPaVNlZWZKSkRJQ2dVVTh3Um03c0FJQUJNeUdLcjJBWkxZQUJjQ2QyWndlYkVZeXpCSU9qNVJpb2hNakF3R0F6WTQyTkZPczFlK0QrUFJzMmJCRHRMdkY5WTh3RER6eXdmdjM2T3o3L21aR1J3RWhEdzdXc3kvM042aGQvNHVQdmRRd2tXOGdnVnFVU2l4YTRUYlBuMDZDSk1jWnBoY1pVV1NWQ0tWVjFCaUNyNVFBd05Id1l3SUFERG5EQ3pCUGJvU3Bxc1F3ZkJVRkVBQUFMRUFHSUFSQXRBRWJQTTJlZThOaHZIb2ZNR29KbUljUWl0QTZCSTRRTUljWVlLUm9BWDhRN2JydjFpNSsrTVZYR0N2azdCTVFjbk9FNC9MNzNmbXJObXFzdEJQQ01tU0dHR01FNVlBYURRajNVa0syV21TR2lGT0dOQlFrM2JkcFV5VEhUVUdpYWRhYUFIS0lKY1JUSUZVZ0FrRU90c0lCTlpHZ1ZhSlZsQ1FpTVIxSHpSSUo3UWFDSWdNeEFCTllaOWw1UUh3dlEzZDBOekV5aTRBd0NDNEdGS1hJRUNNMHh1UU1HQkVBYkFnR1lnRm5YakpQZjhZNjNIUnA4WXMyYXExc2JhQkhCR0lUTXRVWnNpV1NiUDJLTWE5ZXViVFFhQWk0c1dMQWc5UTFkeW9kcEtZQitFYVJZQWYvQUJNUVFZNlBlbFdldUxJWUI0ZkRCeDhWeWh4RDEvSUhHTU1jcEZaY0JRQWcrdWl3UHhNYUFSWUxnRHcwTkdXc2d4Z0RRMDkwRktBNG1NSVBGZHBDUnlWb3NJNFBKaVlwV2hJVmF4WC9XMlJEQzdKTk91ZVZUbjN6cFM2NFFrU25Lb3A3WGlMMkJyQU44ckFCTXhVTVFwOWVwQTBWRWdtU2x4WDFpVU5Xc2lsOVN5eXc0KzlTbm5lYjlSZ0NUMStIWER6MUVESWpXT0lIaVJNRjN5Z0ZCQkNKeVdRWmdyQUVmUExOM0dSOFpJWFlab1BFTXA4NDVKZkV6RUlBQndHVVpnd2tSbklVVnE1Nnplc1VDSUJaMXMzbnp4dS84MjNkakNNN0NFNDg5OXFxL2U4bXRuLzZiSC83Z2UyaXBsdGVDQjVkUjU1d0JFVUQ1bTZZMGlkL3I5dTNiOS9qamowc1lidUhDaFlyOENTc0pqYlp2M3k1a2JzWCtpUUhvNmFmTk0wQ0FPYlAvNVlQN0dZRWlXNHZlbDNsdXNlV2c4OVJlRmdtR2FRekVDSWpzSEQ3MHdPNFNnTVh1WVhiNk0wK05BQTRNQUNGaWhPaW9WYURDak1abHF5OTUzdnZlOFhwaXNpaGNqQUQwVDI5L3gwMDNmZHlZNkV2Njk1Lzg1TExuditUdUgzNmRDR3dHRE56QlFwZGxhYTA5NmFTVEZpNWNXS3ZWYXJXYUpqNWJhODg0NHd3WUdCaVFwQnhOWFZVOHExSnFwSUdHcFFOOUhNUFBmdkx0T2tMTjFNRUFRUGVqZnp3eU9GcEdKZ0hPUlExNlgwd1ZBZ2praVlKQVhFVkp6REUwSC8vZU4yOFhtd2ltNW1iOFZXQXVTSUE1ejh5ZVMvWjh6V3V2UUxRQURrejJ6NS80UW1RS0ZGdG9IOGZtNkNDVHYvM1dXeENoMGVnR2NBRHVJeC81bEE5TVhQcFlIalUySVY1YkJlQVZzcGp1N202dGtxbklvRmFYcG1JTUJoMHdJUGYxcjJBR1pBUUVDL1IvNy9wYXZaNXh5M1VCSEIrQ24wd01iVHZWQzJ3bXBTbnVoei80S1lKRlpHdncvUDVsbGx1QkR3aHRGQVJieWZGb0REQ0hFQkRRb2tnUWVlOXI5YTRZNlRWdmVQMTFiLzl2emRIQ0dBSU03L3luZHozNis4ZUs2TkZrSFVKZUdsRlBrN3hVd1JPUkVVcXBYNW9tTThwZnlZZlNNbHRnT1NoeFY4L3NzOCtjRTVrQndVQzg3Yk8zaDdZdVRBT1JVN3VrYUUxRzBRTVNBRVFtekJxZi85eWRMWmM5bGxlKytpcUlUWlpqRWZJWWpZRU5NSEFFcGtaZUs0dEN3WmtzcXdFWUJnUGdQdmkvYmpqOVdYTXlad0F4eEtGTEw3M1UyYTRPeVU3R0dGWFphYzU1Nm5hWkZOWlFWSk9JTm0vZXZHSERodTNidCsvZnYzLysvUGxMbGl5NTRJSUxMcmpnQWpER01BQmlVZnJYdi9ZcTF6cU44TDRkTzNidTNCTXBhcEZONTZ3VmppQ1FGbUxMK0g3OUsxOHRQQUFTTWhIVGkxNTB1ZEJSV0ZSZFdTSUNKcm1yS0pyaWRyZU1MNEFQWkowTGtkRTF2dm50TDNzZmdDeWczNzFuMStkdnY0djQ2R2tObFJ5cDlIQU9LMWV1cktUSlQ1VS8xVTU3ZHN1WFhjVEVWSTZPRGowdW9BeENEcGlmdDJUWmFHRFBYREkzeTFGbXoxU2tpSDRLOEh0bUh5V1VWekkzbWN0VFRwNWxBV3l0RHVndXUrSWx4T3dERTdPUGdValVodytSMy95YUt5UzJnMkN1Ly9qbnA5UTl4TXp4VGE5K0tRSjBBUUQwbUt6bjl5UEVIQ242RUlLRUtVSUl6SkZqbVFZK1VzVTlEb1B2bkxGWHFhUXh4bGhuaUVQd0VWMVc3NTd4eHRlOTJqbEFpSWg0NzlhdEg3dnBZK0pDNVZrOVJnWTA2dEJXS2dZc2dETUlBTDRzZ2ZFdC8vQVBUenh4a0JGaUdjQ1lHMjY0UWZnSkFaeXhpUGE0VXhNUUlEUnYvdHlYWnRWaEJGemRsQlQ0TlZlK01wSWhjTmJhR0FMcVFhVjk3aGNkb3VKVkhiUXpaNGt1UzJrTUNFdjYrOXBiNTMzenNFTXdDTlptWW5xK2ZmY1BQSE5KSENoT3pBUVFXME5FekxFNU9zemttY3N2M1hFN2loWkRCMWg3MVd2ZUVKZ0xYNUlZdUpIUkZtTWREMmNGWnQ4Y0pDNi84S21iQUV6TkFMZ3VRUGV6OVp1R2kwRE1SRFF5UE1nY2hlYzF5ekNGV3lxZktaTm5lbnQ3VHpqaEJBQVlIaDdldFd2WDRPQWdFZlgwOUN3Njc5enp6anV2TENqTERSRFlySGIzM2QrODlOSVh4ZWlkeVZ5ZVhYN3BaVis4OC8rODhoVi9LOUhxTlAxTTgyaVpHWmhxZVFZQU45N3c0WGUvKzNyQjlZQmg1c2wvZGR0dHQ4bzJDNHhUcTRTRmo1VzFDR3M5R0lkZWRmVS8vdXZOdDJ6Yis2c2NSank2NTczZ2lrT1AvellDT01SR1Z4Y3dod2lJOFB2ZlBmcklJNDlvMGEwSXhJd1pNL1RFMDRtemxKdEU2NDlGaDdpSVRNUWN2TWgyeWR4YzgvWTMxNnpKVFN2RHdicjZ5bFhQL2VQamg2bXQ2ZEpjRDJHdTBCeCtjTi91aGIxbjFaMUZnRnF0a2RlNkFiSTkreDhPeko0cGNobmlhS1FpbEw0ZEJEME96aUtPZ1ptcEpPWmY3ZDNtbkhGeWVqZU5hNjk3ejZnZm01b29yK3V1dTY0U3JNL3p2Syt2NzFoMWxtU2phUTVFcTZnRkRCQlRBT1BBT1VmTUFQYUdqM3oweWl0ZkdZbU5BV09Bb2wrL2Z1M0pKODE2NFF1dnVPT09PL2J1M2F2eVg1Ymx0bTNiYnI3NTVzVjlTODZZZjg3K0J3K1VnVnhXS3dwZmxzV08zYnZubi9tTVVBWWpSRGNPMk5qTXdYUXlISTBGS2luRFdENzlyRVZ2K1B1WG04em1Ca3htUHZHUkR6Mzg4TU1oc2dEYkVrQTg0WVFUcEd1THdxU1Q5R0xwd0ZscUFkUHNoeGhLSmlaaVlpYU9rVU5ieU11UDMvZ2haekYzcll2emVpM0ZTelV6VTgrRzJtbkd1ZnpVMCtiZGYrQmh6eHhhOFdjbW90SFJVWFhOcDhGWlRNSmNmdFFITGcvVmE1bWNiMTFXTzdOM2dTVHRVTXYyeGZlKzk3MGFvTlg0NmJKbHk0NkpzOWF0VzdkeDQ4YXRXN2Z1MnJVclJhWisrZUF2dDJ6ZUt1U05GQkhRT2djTXdIenQyOTZ5ZS9mT3VmT2U2WXdGZ0ZBV0VzSkpHeXVOdFk2UUk2Wms3MFIrK09HSHZ2SE5yL3NBMWtLa1ZwU2xYcThUTUUyTHI0QUNnYkVFUlhSMVczTFcvZGxiL3BYUk5ESVRmSEgvdm4yMzN2b1pBQWdNemhtZzJFWk5na0toazlTd1hYVFJSV25GaUxCSjZ0TlB6TTFkdkhoeE5kTXMrZTU5OGNNZmZ2L1p6MTdsc3JHWVFCbzkxRW9sUWVwZE8rd0Fwclp3eWZLRFIwWWxrYWIwTFc1cStXTEVaVEhLWEw3dXFsZGlDenpNM3ZmQmozVndzNmcxcFVBVUloWE0vdnpGQ3dBQnJSSG44QTkvZkN4SVRnYlQ5ZGRmcjQxN2RNbExseTRkWncwbGxBVGp1ekJWK2tSVk10M1QrcmEwTUU2UUwrZmNSUmRkZE1rbGx3REFqMzcwbzAyYnR1emR1L2RYdi9xVmJFQ1daWDE5ZmZQbXpidmtrdWM4YmM2Y3ZyN3o5K3k1SHdFWXlGbllzWFhMU1NlZDlQVnZmTzJGbHo3UE9RbUFzTFUyeEJJWXN6eG5DbXZXdlBNTlYxOFR5UVN3enpqMXRDa1ppNG1JTXR1cVBrZHdBSFQzM1hmLzZwSGZHR1BLc2h3REZSQTBtVDVGRFNZNWZxeGV2VnJqaUp3WUw3Mm4wZzNHR0RNd01EQTZPanBwY21WWnRqSmV2Qy9reS9nMG9OWlIzbnRmRkVXTVBvYm0yOTkyYld1bkVhM05yS3NEdURkZGMyMHJINGhKTmw5OExvcGVobTNCRmZIb2FZOUVSQlRhVS9JK3RuMTNpajRHc2V6RS9KNzN2S2RTamlHWmFPTTQ2L1RUVHkvTHNpekxRNGNPYWFNRmErMzU1NStmNnVPMHIxeGZYMSthdHE2K1JmdDAzZ3EzeUFQVU9BamFveFBLOHh5QUtQSkhicnh4MWFwVlY3emdDbUtHNkNORUFMamxremQvNXp2ZlhyZmhubE5PT2NVYUV3RXNRS0RvVEFZRVJJd1dFQ2d6MUxsV3E1MUczc29NTHNzeXordXQyRVNTdUN5L0NBS3FOWitUNUh4TXpNeFRWeWgxamxJbWtoaUhsSjJrN3BqNnZ1bDNvWkUrUXNkc2Q3T0tNVFJqYVA3dTF3OC84K2xQZFFBQUpzL3I3V2lWdStOTFgyNEdEc3lSQTNGc3pZSmEvT0xEYUFlZWtubktFNFc1MmttcXJhVnBYUUl6aXpXczFEMVZkSlpKczlXMXdFUDdlMDJzRHhKbUVRdzZUV0xTNEowbUg0emxhQ1RZaHZaVGtaQnRXUVpqTXpUdXY4eDU2aThmZnZobEwzc3hBSlZsRXhHTnRZanc2aXYvN3RrclY0ME1OU2xFQkNQdWpYS0VzM25uOHBnRUxMSXhjck5ad3ZnbVp6cC9UUVpKZWFwYUl5MCtwMWJJVGt6K3JoVDBUS3pMYTM4bjc2TW8rSGFITUZzcElOREtWK2NjVUV0SUdaQWd4REprenQxNTExZnZiS2VNU2EyQTRNNGhrSE5TNktOV3hZVWcrTW1VY1VtS01UTEoxbnJ2WFpiVjJxVVdtcG1rRzZrMWJGb1Jxc0RXR0xIMjd0MTc2TkFoNlgyU0JsTlRjQ2ZsckJqanpKa3p6enJyckVyOXU4WTd0TnBFVnBpMit4cm5rU0F5RTdiSXgxbGVSNUE4V2k5MVQxTFRoY3pBeGxrRERLSmpyTVVRQXhBNDV5akNsSGdFczdIV29CMTNPSVZ4Ulo1Q1IxbXNPRFJabHAxd3dnbHo1ODZWeTZTVjN0aG54WW9WbFJMS3ptSDN0Ty9acEVWOGFiT0xGSm5SREp5SkkweHN1bGtSSmZtcm1KeCswbHNXTFZva21paUVzSDc5ZXUxM0lFbTBvci9XcmwyckswMVQ4eXU1Mkp5QUVLa1JiMFhLRkxwS1k2dWRDNzVWc281YSthdDVwR2tOdm1xMDlNZXhmQlhUU2o0UVhGeithaXd2eFpHMERIbGlId2k1c2RGb3FGRVdQWnZHQkNza1U5OWR2Y2owTXFPUGwzS2hTblgxcEEzWnBKeFFtZWlvOWYvR0dOR21hVkhPdUNCSWtqeW1SaURQYzhtWjBoNXVhYnFkYUJibFlxblZTaHZoYVJmWDlHQ3I5YldwQXRXT2NKQzBWRW5UL25Scm5XYkw1SG0rY09IQ1BNOG5QeFlsT2tzRDEvclhHTE51M2JwSnIxK3dZSUgwSDVMT0tKcm9VdW5QcHRPNDhNSUxwWlBmOFBEdzNyMTdoUjBhamNiOCtmTWhhWUlpQnZjUGYvakRBdzg4VU9tZ1Y1YmxqQmt6bGl4WklscHYzcng1V2dJcC9xQm83anpQTDd6d1FsSGtSVkZJYkZSYndBa1RTUGROR1gvV3JGbHc4Y1VYS3duRkoybzdKcE4vSnRaS2FCdmFTWFZXbWxNdW01OVdDRldZSmMwTDI3RmpoMmg2QUVoUC8yMmdsVU1JTzNmdVZFa2NHQmlvb09aU2Q5OCtzWHBtM3JCaGc0cjVxbFdyTkVGZmE2b0JZTW1TSmZxZ0xWdTJRTHVQM3NEQWdFdkwxQ1pxelVsRElBcDRLbE1jdGJNc2pHLzVXb21tYU4yeHlMZ1FkMmhvcUZVaE5ON21wSk1jSEJ4TXUxYkQrUDQ3bW5LUTltdFJCMmg0ZUZpNzQybmVyUHBQb2pGRUQ0Z2YwOVhWWlZKOVVlbEVNT2xIU1ZPV3BaNXlPc2VYbExIVG5ueXFOZXIxdWpLTCtvZlNFNldTMHBrR1BtVERGS1NXODVOU1RUWkdScFBFaFZSV1ZOZ1NBQUFHaTBsRVFWUzF5WmFraVFwU1dTemNKRFh4eWcweTUxYUpIa3pSOVhuejVzMlRPZzNxRUJDUlNFZm5HdUdOR3pjSzczUjNkL2YyOXRicmRjMlUweThpSFRMVTNyMTdEeDQ4bU9mNWdRTUhGaTFhSkMxdjU4eVpzMjNiTnNsRmtMdkVZdHgzMzMzYVh2WGd3WVAzM251dktDYXhudEtqVzRVbWhMQm56eDd0OVRNME5MUjkrM2Foem9FREJ4WXNXQ0FlOVp3NWMvYnYzejh5TWtKRUJ3NGNTQk13anlsdU9KVjhwUXFpczUrbGFqVnQrYURhSkMyMDF6MDcvL3p6VlFkdDI3YXRjdktZV0p3RkV6ckpWcXJkMGhiaUZkdTZaTWtTbmR2bXpadFRqYVIvVjY1YythUjNaa3RGUS9zdWFJUk5qRnBxWVZWc1UrOUVFS0VFcmdEdHVaeXVmRnlvUFRscGFjL28xSmRNcDZmejBSWU9rNHJMazA0c0ZSd0ZEbFBuS0ZXUmFTV1U1bUpVV3Fxa0ZhUVY5VnJKRzA2NzQ2VjVvUk9MQmFXNlA2VzRORGVmV0J2eXBEZElsUDBVRzdkNzkrN0J3VUVoUkg5L3Z4aEJZNHhnWjdLU2pSczNsbVdaWmRuaHc0ZDM3dHpaYkRhZGN3OCsrT0NpUll2RXJUMTA2TkQ5OTkrdk81RytFa0EzWU5hc1dXZWNjVVo2TmhKSDlJa25udEJPNkdrVjNHT1BQYlp6NTg2eUxFZEdSbjc3MjkrZWM4NDVZZ2RHUmtaMjdkcDFyQkhwUDExblRWUVRsV2NwNnFSOHBGVlJlcStnL3ZMWnMyZFB4VHZUMUNqNWt1ZTVXQjYxc0NKWk1jYXRXN2RXL0krS2syR002ZS92VjhmdzNudnYvWXZxck5TR3FreWxDTGZZYkZVeDlYcTlMTXZLcXo0VUJkR01mclhvNlRsSmRGWlpsbG8xbTdxQkZjZ2w5UUVrUkNqZ2tpTHNJUVNKSlA3bGRGYmFMamh0SjVjaXZ5bWNrRVk2bFJDTlJrT1AxdUpBcE9pdVNMb003cHlUd2tQMXdqVFJUS0RkaVdjR09lcHF0Q0x0alQ2aDg4Q1RyN1BVSWU3cjY0TjIwOElkTzNib094Q1dMbDFhTWZuTVBHUEdqSFBQUFZmdUZRVWtwSms1YythNTU1N2IzZDJkcmszZVliRi8vMzd4UlllSGg3ZHYzeTRFbWpWcjFsbG5uU1VTZXVLSkp5NWV2RmlVZXRxN1NGT1FuWE5ubjMyMjhtRFY1VjYxYWxYbEtDTjcxUUhZVXQ4M3pXYWFoaTVUYTZVbnVMVHdiUG55NWZLN25oWXJYeXIvdTIzYnRrb3Ftdnh6WUdCZ3FzU1lkRDRUb3dSRXBHZEphKzNGRjE5c2xDNlZGeHAwQUI0cVI3ek9QZjg2cTdOS2lWNWFieXQ0Z1BheVZRQlcweFAxYktTWW4wSk1xWCtuQVlFT1FHWWxnM1JpNitBV0YydUh6L1RTQ2hxWGV1RzY4NnAwcDllYVNzT1VxY0tLTWNxQ0JiUVRIMEtXS202WDl0aUM5a3NyNUFBZy82WGQ3dEpXZDVVMVQ3VDQrcjNTQUZxdmgzWkhmVGRwOTNSanpKSWxTOVNPVlBwY3l2MkhEeC9XRG1ISCs2NHNBRGp6ekRObnpwd3BIVmQzN3R3cFlkZFpzMmJKZ3JNc08zTGt5TzdkdThXMGRYZDNMMXk0VU45WXNtdlhyanpQUlNia0pPaTlQM0RnZ0FhWjZ2WDZHV2VjMGRYVlZSVEYvUG56aFhuVDBvZEorYXNpV0lnNGUvWnM4UUd6TER2OTlOTmgxYXBWQWpOcEoySkZpMUtSVGs5ekZRMXlMSDdXcERpWGZxbkErU212aWFEMTkvY3JMclp1M2JySk93RWxING4zcFh3a2tYb2gvVVJnTGxYV3FRS1Z1OFl3K1BTRkhDa2dOL0gxSnRXbW5lM0k0RFRlbFpXQ3BlbXJ3RklVVkZFenNmZnA0VVBQM25wNHFsZ2VmYkdVT0NMU0tnemFqZlpTRVZHaG1RaHdWNXhWS1o3SjBoQ3BKbjlQVmRPbGI0Q3FGUHBNejZ1b3RIeXRzSnZJdUQ1QzI3WnFzMEF4TmJWYVRiNm9OZEJHaTVMTUorR1NTWTk3S1hVcTNaK0Z5elN3aEloT25GY1I2ZnZ2di8vZ3dZT2FWNU1xeUlsdWhFWWlCQ09mQmhxaFlUc2RTcFdyNkoxRml4WVZSWUdJYytmTzNiNTl1MHoxa1VjZWtkb2FZOHpRME5DZVBYdEV6YzJlUFh2dTNMbnlFci9UVGp0TjhDOWpURTlQVDI5dnIxQmhlSGg0OSs3ZGlqSG9zNXh6aXhZdFNza2tOQjBkSGQyK2Zic1FvYWVuQjFhdlhqMnBwcGcyeHFEc25RS2JhUmJKUkFnZnh2ZU9sTDlMbHk1VkdSY2tNczBPazN1M2J0MnFZcFhtSlFnbUpRT2VkOTU1cW5Ua25SY3c0UzBvbFl3elZWdnkzais1Yk9uU3BXN2l5N3VtZmF5cHZKRnYwaGRQVEJWUHJVVENLKzl0Q08wK1dhcVk1SDlUZjNpcUYrbUozcWwwUjB5TlR4cERxUUFTNlZTekxIT3BJS2dmTU8ybXJqTGpack1wOEhHcUN3VHhrUDQ0YVJ4ZkdnR21UbzIyT1NtS1FwRDFzWDRTMWtvU1ducDRsS0gwZW8xT2FqOVo4ZGZTaDZZYVhVM1p4RldyaTljQzR5UjdXV0hmTkNCNFhNVFNkNDRORGc2S1dwVVIrdnY3RzQwR0VZMk1qS1JkNE5STEZ0MGs3NXhUUUYyYVRtcXVkWGQzOTRvVks0UUV2YjI5NnFsM2RYVXRYNzVjRkx6K0xuai84dVhMUlgvMTl2WnF3NGFlbnA1bHk1YWw0U2hac3JTcm05ZzJ1VmFyTFZ1MlREYXN2Ny8vL3dNQ21kWm02QU04akFBQUFBQkpSVTVFcmtKZ2dnPT1cIiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFBhc3N3b3JkSW5wdXQgZnJvbSBcIi4vLi4vRm9ybXMvUGFzc3dvcmRJbnB1dFwiO1xyXG5pbXBvcnQgV2FsbGV0RGIgZnJvbSBcInN0b3Jlcy9XYWxsZXREYlwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IHtrZXl9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWNjb3VudFBlcm1pc3Npb25zTWlncmF0ZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHZhbGlkUGFzc3dvcmQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBwYXNzOiBudWxsLFxyXG4gICAgICAgICAgICBnZW5lcmF0ZWRQYXNzd29yZDpcclxuICAgICAgICAgICAgICAgIFwiUFwiICtcclxuICAgICAgICAgICAgICAgIGtleVxyXG4gICAgICAgICAgICAgICAgICAgIC5nZXRfcmFuZG9tX2tleSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRvV2lmKClcclxuICAgICAgICAgICAgICAgICAgICAudG9TdHJpbmcoKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgb25TdWJtaXQoKSB7fVxyXG5cclxuICAgIG9uUGFzc3dvcmRDaGFuZ2UoZSkge1xyXG4gICAgICAgIGxldCB7dmFsaWR9ID0gZTtcclxuICAgICAgICBsZXQgbmFtZSA9IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBhY3RpdmUgPSAhdmFsaWRcclxuICAgICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICAgIDogV2FsbGV0RGIuZ2VuZXJhdGVLZXlGcm9tUGFzc3dvcmQobmFtZSwgXCJhY3RpdmVcIiwgZS52YWx1ZSkucHViS2V5O1xyXG4gICAgICAgIGNvbnN0IG93bmVyID0gIXZhbGlkXHJcbiAgICAgICAgICAgID8gbnVsbFxyXG4gICAgICAgICAgICA6IFdhbGxldERiLmdlbmVyYXRlS2V5RnJvbVBhc3N3b3JkKG5hbWUsIFwib3duZXJcIiwgZS52YWx1ZSkucHViS2V5O1xyXG4gICAgICAgIGNvbnN0IG1lbW8gPSAhdmFsaWRcclxuICAgICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICAgIDogV2FsbGV0RGIuZ2VuZXJhdGVLZXlGcm9tUGFzc3dvcmQobmFtZSwgXCJtZW1vXCIsIGUudmFsdWUpLnB1YktleTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHt2YWxpZFBhc3N3b3JkOiBlLnZhbGlkLCBwYXNzOiBlLnZhbHVlfSk7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5vblNldFBhc3N3b3JkS2V5cyh7YWN0aXZlLCBvd25lciwgbWVtb30pO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrS2V5VXNlKGtleSwgcm9sZSkge1xyXG4gICAgICAgIGlmICgha2V5KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKHJvbGUgPT09IFwibWVtb1wiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBrZXkgPT09IHRoaXMucHJvcHMubWVtb0tleTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wc1tgJHtyb2xlfUtleXNgXS5yZWR1Y2UoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiID09PSBrZXkgfHwgYTtcclxuICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25Vc2VLZXkocm9sZSwgcmVtb3ZlID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAocmVtb3ZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHNbcm9sZSA9PT0gXCJhY3RpdmVcIiA/IFwib25SZW1vdmVBY3RpdmVcIiA6IFwib25SZW1vdmVPd25lclwiXShcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHNbcm9sZV0sXHJcbiAgICAgICAgICAgICAgICBcIl9rZXlzXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHNbcm9sZV0pIHtcclxuICAgICAgICAgICAgY29uc3Qgd2VpZ2h0cyA9IHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZTogdGhpcy5wcm9wcy5hY2NvdW50LmdldEluKFtcclxuICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwid2VpZ2h0X3RocmVzaG9sZFwiXHJcbiAgICAgICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgICAgIG93bmVyOiB0aGlzLnByb3BzLmFjY291bnQuZ2V0SW4oW1wib3duZXJcIiwgXCJ3ZWlnaHRfdGhyZXNob2xkXCJdKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICAgICAgIFwia2V5XCIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzW3JvbGVdLFxyXG4gICAgICAgICAgICAgICAgXCJ3ZWlnaHRzXCIsXHJcbiAgICAgICAgICAgICAgICB3ZWlnaHRzLFxyXG4gICAgICAgICAgICAgICAgXCJ3ZWlnaHQgb2Ygcm9sZTpcIixcclxuICAgICAgICAgICAgICAgIHdlaWdodHNbcm9sZV1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy5wcm9wc1tcclxuICAgICAgICAgICAgICAgIHJvbGUgPT09IFwiYWN0aXZlXCJcclxuICAgICAgICAgICAgICAgICAgICA/IFwib25BZGRBY3RpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIDogcm9sZSA9PT0gXCJvd25lclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJvbkFkZE93bmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIm9uU2V0TWVtb1wiXHJcbiAgICAgICAgICAgIF0odGhpcy5wcm9wc1tyb2xlXSwgd2VpZ2h0c1tyb2xlXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgYWN0aXZlSW5Vc2UgPSB0aGlzLmNoZWNrS2V5VXNlKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjdGl2ZSAmJiB0aGlzLnByb3BzLmFjdGl2ZSxcclxuICAgICAgICAgICAgXCJhY3RpdmVcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IG93bmVySW5Vc2UgPSB0aGlzLmNoZWNrS2V5VXNlKFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLm93bmVyICYmIHRoaXMucHJvcHMub3duZXIsXHJcbiAgICAgICAgICAgIFwib3duZXJcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IG1lbW9JblVzZSA9IHRoaXMuY2hlY2tLZXlVc2UoXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMubWVtbyAmJiB0aGlzLnByb3BzLm1lbW8sXHJcbiAgICAgICAgICAgIFwibWVtb1wiXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IHVzZVRleHQgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0udXNlX3RleHRcIik7XHJcbiAgICAgICAgbGV0IHJlbW92ZVRleHQgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnBlcm0ucmVtb3ZlX3RleHRcIik7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICA8cCBzdHlsZT17e21heFdpZHRoOiBcIjgwMHB4XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucGFzc3dvcmRfbW9kZWxfMVwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3A+XHJcblxyXG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9e3ttYXhXaWR0aDogXCI4MDBweFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwid2FsbGV0LnBhc3N3b3JkX21vZGVsXzFcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9e3ttYXhXaWR0aDogXCI4MDBweFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSB1bnNhZmUgY29udGVudD1cIndhbGxldC5wYXNzd29yZF9tb2RlbF8yXCIgLz5cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpdmlkZXJcIiAvPlxyXG5cclxuICAgICAgICAgICAgICAgIDxmb3JtXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXhXaWR0aDogXCI0MHJlbVwifX1cclxuICAgICAgICAgICAgICAgICAgICBvblN1Ym1pdD17dGhpcy5vblN1Ym1pdC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgIG5vVmFsaWRhdGVcclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwibGVmdC1sYWJlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ3YWxsZXQuZ2VuZXJhdGVkXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwPnt0aGlzLnN0YXRlLmdlbmVyYXRlZFBhc3N3b3JkfTwvcD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9e3tmb250V2VpZ2h0OiBcImJvbGRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ucGFzc3dvcmRfbW9kZWxfMlwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8UGFzc3dvcmRJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9XCJwYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1hdGlvbj17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25QYXNzd29yZENoYW5nZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub0xhYmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkTGVuZ3RoPXsxMn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tTdHJlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Zvcm0+XHJcblxyXG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3NOYW1lPXthY3RpdmVJblVzZSA/IFwiaW4tdXNlXCIgOiBcIlwifT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ubmV3X2FjdGl2ZVwiIC8+OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57dGhpcy5wcm9wcy5hY3RpdmV9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ0ZXh0LXJpZ2h0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblVzZUtleS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWN0aXZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVJblVzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2FjdGl2ZUluVXNlID8gcmVtb3ZlVGV4dCA6IHVzZVRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3NOYW1lPXtvd25lckluVXNlID8gXCJpbi11c2VcIiA6IFwiXCJ9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucGVybS5uZXdfb3duZXJcIiAvPjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e3RoaXMucHJvcHMub3duZXJ9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ0ZXh0LXJpZ2h0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblVzZUtleS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3duZXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVySW5Vc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvd25lckluVXNlID8gcmVtb3ZlVGV4dCA6IHVzZVRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3NOYW1lPXttZW1vSW5Vc2UgPyBcImluLXVzZVwiIDogXCJcIn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLm5ld19tZW1vXCIgLz46XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnt0aGlzLnByb3BzLm1lbW99PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ0ZXh0LXJpZ2h0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogbWVtb0luVXNlID8gXCJoaWRkZW5cIiA6IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25Vc2VLZXkuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1lbW9cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9JblVzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3VzZVRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG5cclxuICAgICAgICAgICAgICAgIHttZW1vSW5Vc2UgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXhXaWR0aDogXCI4MDBweFwiLCBwYWRkaW5nVG9wOiAxMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhhcy1lcnJvclwiXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0ubWVtb193YXJuaW5nXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7Q29tcG9uZW50fSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5pbXBvcnQgY25hbWUgZnJvbSBcImNsYXNzbmFtZXNcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgenhjdmJuQXN5bmMgZnJvbSBcInp4Y3Zibi1hc3luY1wiO1xyXG5pbXBvcnQgQ29weUJ1dHRvbiBmcm9tIFwiLi4vVXRpbGl0eS9Db3B5QnV0dG9uXCI7XHJcblxyXG5jbGFzcyBQYXNzd29yZElucHV0IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxyXG4gICAgICAgIG9uRW50ZXI6IFByb3BUeXBlcy5mdW5jLFxyXG4gICAgICAgIGNvbmZpcm1hdGlvbjogUHJvcFR5cGVzLmJvb2wsXHJcbiAgICAgICAgd3JvbmdQYXNzd29yZDogUHJvcFR5cGVzLmJvb2wsXHJcbiAgICAgICAgbm9WYWxpZGF0aW9uOiBQcm9wVHlwZXMuYm9vbCxcclxuICAgICAgICBub0xhYmVsOiBQcm9wVHlwZXMuYm9vbCxcclxuICAgICAgICBwYXNzd29yZExlbmd0aDogUHJvcFR5cGVzLm51bWJlcixcclxuICAgICAgICBjaGVja1N0cmVuZ3RoOiBQcm9wVHlwZXMuYm9vbCxcclxuICAgICAgICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgICAgICBjb3B5OiBQcm9wVHlwZXMuYm9vbCxcclxuICAgICAgICB2aXNpYmxlOiBQcm9wVHlwZXMuYm9vbCxcclxuICAgICAgICByZWFkb25seTogUHJvcFR5cGVzLmJvb2xcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBjb25maXJtYXRpb246IGZhbHNlLFxyXG4gICAgICAgIHdyb25nUGFzc3dvcmQ6IGZhbHNlLFxyXG4gICAgICAgIG5vVmFsaWRhdGlvbjogZmFsc2UsXHJcbiAgICAgICAgbm9MYWJlbDogZmFsc2UsXHJcbiAgICAgICAgcGFzc3dvcmRMZW5ndGg6IDgsXHJcbiAgICAgICAgY2hlY2tTdHJlbmd0aDogZmFsc2UsXHJcbiAgICAgICAgdmFsdWU6IFwiXCIsXHJcbiAgICAgICAgY29weTogZmFsc2UsXHJcbiAgICAgICAgdmlzaWJsZTogZmFsc2UsXHJcbiAgICAgICAgcmVhZG9ubHk6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmhhbmRsZUNoYW5nZSA9IHRoaXMuaGFuZGxlQ2hhbmdlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbktleURvd24gPSB0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBwcm9wcy52YWx1ZSB8fCBcIlwiLFxyXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcclxuICAgICAgICAgICAgd3Jvbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICBkb2VzbnRfbWF0Y2g6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB2YWx1ZSgpIHtcclxuICAgICAgICBsZXQgbm9kZSA9IHRoaXMucmVmcy5wYXNzd29yZDtcclxuICAgICAgICByZXR1cm4gbm9kZSA/IG5vZGUudmFsdWUgOiBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMucmVmcy5wYXNzd29yZC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuY29uZmlybWF0aW9uKSB0aGlzLnJlZnMuY29uZmlybV9wYXNzd29yZC52YWx1ZSA9IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZm9jdXMoKSB7XHJcbiAgICAgICAgdGhpcy5yZWZzLnBhc3N3b3JkLmZvY3VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFsaWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIShcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXJyb3IgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUud3JvbmcgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZG9lc250X21hdGNoXHJcbiAgICAgICAgICAgICkgJiYgdGhpcy5zdGF0ZS52YWx1ZS5sZW5ndGggPj0gdGhpcy5wcm9wcy5wYXNzd29yZExlbmd0aFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ2hhbmdlKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjb25zdCBjb25maXJtYXRpb24gPSB0aGlzLnByb3BzLmNvbmZpcm1hdGlvblxyXG4gICAgICAgICAgICA/IHRoaXMucmVmcy5jb25maXJtX3Bhc3N3b3JkLnZhbHVlXHJcbiAgICAgICAgICAgIDogdHJ1ZTtcclxuICAgICAgICBjb25zdCBwYXNzd29yZCA9IHRoaXMucmVmcy5wYXNzd29yZC52YWx1ZTtcclxuICAgICAgICBjb25zdCBkb2VzbnRfbWF0Y2ggPSB0aGlzLnByb3BzLmNvbmZpcm1hdGlvblxyXG4gICAgICAgICAgICA/IGNvbmZpcm1hdGlvbiAmJiBwYXNzd29yZCAhPT0gY29uZmlybWF0aW9uXHJcbiAgICAgICAgICAgIDogZmFsc2U7XHJcblxyXG4gICAgICAgIGxldCBzdHJlbmd0aCA9IDAsXHJcbiAgICAgICAgICAgIHNjb3JlO1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNoZWNrU3RyZW5ndGgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUudmFsdWUubGVuZ3RoID4gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICBzdHJlbmd0aCA9IHtzY29yZTogNH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgenhjdmJuID0genhjdmJuQXN5bmMubG9hZCh7c3luYzogdHJ1ZX0pO1xyXG4gICAgICAgICAgICAgICAgc3RyZW5ndGggPSB6eGN2Ym4odGhpcy5zdGF0ZS52YWx1ZSB8fCBcIlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKiBSZXF1aXJlIGEgbGVuZ3RoIG9mIHBhc3N3b3JkTGVuZ3RoICsgNTAlIGZvciB0aGUgbWF4IHNjb3JlICovXHJcbiAgICAgICAgICAgIHNjb3JlID0gTWF0aC5taW4oXHJcbiAgICAgICAgICAgICAgICA1LFxyXG4gICAgICAgICAgICAgICAgc3RyZW5ndGguc2NvcmUgK1xyXG4gICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudmFsdWUubGVuZ3RoIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnByb3BzLnBhc3N3b3JkTGVuZ3RoICogMS41KVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzdGF0ZSA9IHtcclxuICAgICAgICAgICAgdmFsaWQ6XHJcbiAgICAgICAgICAgICAgICAhdGhpcy5zdGF0ZS5lcnJvciAmJlxyXG4gICAgICAgICAgICAgICAgIXRoaXMuc3RhdGUud3JvbmcgJiZcclxuICAgICAgICAgICAgICAgICEodGhpcy5wcm9wcy5jb25maXJtYXRpb24gJiYgZG9lc250X21hdGNoKSAmJlxyXG4gICAgICAgICAgICAgICAgY29uZmlybWF0aW9uICYmXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZC5sZW5ndGggPj0gdGhpcy5wcm9wcy5wYXNzd29yZExlbmd0aCxcclxuICAgICAgICAgICAgdmFsdWU6IHBhc3N3b3JkLFxyXG4gICAgICAgICAgICBzY29yZSxcclxuICAgICAgICAgICAgZG9lc250X21hdGNoXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkNoYW5nZSkgdGhpcy5wcm9wcy5vbkNoYW5nZShzdGF0ZSk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25LZXlEb3duKGUpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkVudGVyICYmIGUua2V5Q29kZSA9PT0gMTMpIHRoaXMucHJvcHMub25FbnRlcihlKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtzY29yZSwgdmFsdWV9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBjb25zdCB7Y29weSwgdmlzaWJsZSwgcmVhZG9ubHl9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQgcGFzc3dvcmRfZXJyb3IgPSBudWxsLFxyXG4gICAgICAgICAgICBjb25maXJtYXRpb25fZXJyb3IgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLndyb25nIHx8IHRoaXMucHJvcHMud3JvbmdQYXNzd29yZClcclxuICAgICAgICAgICAgcGFzc3dvcmRfZXJyb3IgPSAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cIndhbGxldC5wYXNzX2luY29ycmVjdFwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBlbHNlIGlmICh0aGlzLnN0YXRlLmVycm9yKVxyXG4gICAgICAgICAgICBwYXNzd29yZF9lcnJvciA9IDxkaXY+e3RoaXMuc3RhdGUuZXJyb3J9PC9kaXY+O1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgIXRoaXMucHJvcHMubm9WYWxpZGF0aW9uICYmXHJcbiAgICAgICAgICAgICFwYXNzd29yZF9lcnJvciAmJlxyXG4gICAgICAgICAgICAodGhpcy5zdGF0ZS52YWx1ZS5sZW5ndGggPiAwICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnZhbHVlLmxlbmd0aCA8IHRoaXMucHJvcHMucGFzc3dvcmRMZW5ndGgpXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICBwYXNzd29yZF9lcnJvciA9IChcclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwid2FsbGV0LnBhc3NfbGVuZ3RoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluTGVuZ3RoPXt0aGlzLnByb3BzLnBhc3N3b3JkTGVuZ3RofVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5kb2VzbnRfbWF0Y2gpXHJcbiAgICAgICAgICAgIGNvbmZpcm1hdGlvbl9lcnJvciA9IChcclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwid2FsbGV0LmNvbmZpcm1fZXJyb3JcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgbGV0IHBhc3N3b3JkX2NsYXNzX25hbWUgPSBjbmFtZShcImZvcm0tZ3JvdXBcIiwge1xyXG4gICAgICAgICAgICBcImhhcy1lcnJvclwiOiBwYXNzd29yZF9lcnJvclxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBwYXNzd29yZF9jb25maXJtYXRpb25fY2xhc3NfbmFtZSA9IGNuYW1lKFwiZm9ybS1ncm91cFwiLCB7XHJcbiAgICAgICAgICAgIFwiaGFzLWVycm9yXCI6IHRoaXMuc3RhdGUuZG9lc250X21hdGNoXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gbGV0IHtub0xhYmVsfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGxldCBjb25maXJtTWF0Y2ggPSBmYWxzZTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMucmVmcy5jb25maXJtX3Bhc3N3b3JkICYmXHJcbiAgICAgICAgICAgIHRoaXMucmVmcy5jb25maXJtX3Bhc3N3b3JkLnZhbHVlICYmXHJcbiAgICAgICAgICAgICF0aGlzLnN0YXRlLmRvZXNudF9tYXRjaFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25maXJtTWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY2NvdW50LXNlbGVjdG9yXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17cGFzc3dvcmRfY2xhc3NfbmFtZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgey8qIHtub0xhYmVsID8gbnVsbCA6IDxUcmFuc2xhdGUgY29tcG9uZW50PVwibGFiZWxcIiBjb250ZW50PVwid2FsbGV0LnBhc3N3b3JkXCIgLz59ICovfVxyXG4gICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJsZWZ0LWxhYmVsIFwiICsgKHRoaXMucHJvcHMubGFiZWxDbGFzcyB8fCBcIlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ3YWxsZXQuZW50ZXJfcGFzc3dvcmRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdlbmVyYXRlZC1wYXNzd29yZC1zZWN0aW9uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206IHRoaXMucHJvcHMuY2hlY2tTdHJlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGNvcHkgPyBcImlubGluZVwiIDogXCJibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cImN1cnJlbnQtcGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJwYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT17dmlzaWJsZSA/IFwidGV4dFwiIDogXCJwYXNzd29yZFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cInBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvQ29tcGxldGU9XCJjdXJyZW50LXBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLm9uS2V5RG93bn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9e3JlYWRvbmx5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb3B5ICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29weUJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0PXt2YWx1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlwPVwidG9vbHRpcC5jb3B5X3Bhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVBsYWNlPVwidG9wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uIHBhc3N3b3JkLWNvcHktYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoZWNrU3RyZW5ndGggPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cHJvZ3Jlc3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2hlaWdodDogMTB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlID09PSA1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiaGlnaFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNjb3JlID09PSA0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIm1lZGl1bVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImxvd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtzY29yZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg9XCI1XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW49XCIwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAge3Bhc3N3b3JkX2Vycm9yfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jb25maXJtYXRpb24gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3Bhc3N3b3JkX2NvbmZpcm1hdGlvbl9jbGFzc19uYW1lfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIHtub0xhYmVsID8gbnVsbCA6IDxUcmFuc2xhdGUgY29tcG9uZW50PVwibGFiZWxcIiBjb250ZW50PVwid2FsbGV0LmNvbmZpcm1cIiAvPn0gKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJsZWZ0LWxhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ3YWxsZXQuY29uZmlybV9wYXNzd29yZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3Bvc2l0aW9uOiBcInJlbGF0aXZlXCIsIG1heFdpZHRoOiBcIjMwcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cImNvbmZpcm1fcGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJjb25maXJtX3Bhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cImNvbmZpcm1fcGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cImNvbmZpcm0tcGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y29uZmlybU1hdGNoID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtcIm9rLWluZGljYXRvciBzdWNjZXNzXCJ9Pk9LPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Y29uZmlybWF0aW9uX2Vycm9yfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBhc3N3b3JkSW5wdXQ7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgUHJpdmF0ZUtleVZpZXcgZnJvbSBcImNvbXBvbmVudHMvUHJpdmF0ZUtleVZpZXdcIjtcclxuaW1wb3J0IHtQdWJsaWNLZXl9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XHJcbmltcG9ydCBQcml2YXRlS2V5U3RvcmUgZnJvbSBcInN0b3Jlcy9Qcml2YXRlS2V5U3RvcmVcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5cclxuLyoqXHJcbiAqIEBicmllZiBBbGxvd3MgdGhlIHVzZXIgdG8gZW50ZXIgYSBwdWJsaWMga2V5XHJcbiAqL1xyXG5cclxuY2xhc3MgUHViS2V5SW5wdXQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLCAvLyBhIHRyYW5zbGF0aW9uIGtleSBmb3IgdGhlIGxhYmVsXHJcbiAgICAgICAgdmFsdWU6IFByb3BUeXBlcy5zdHJpbmcsIC8vIGN1cnJlbnQgdmFsdWVcclxuICAgICAgICBlcnJvcjogUHJvcFR5cGVzLnN0cmluZywgLy8gdGhlIGVycm9yIG1lc3NhZ2Ugb3ZlcnJpZGVcclxuICAgICAgICBwbGFjZWhvbGRlcjogUHJvcFR5cGVzLnN0cmluZywgLy8gdGhlIHBsYWNlaG9sZGVyIHRleHQgdG8gYmUgZGlzcGxheWVkIHdoZW4gdGhlcmUgaXMgbm8gdXNlcl9pbnB1dFxyXG4gICAgICAgIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYywgLy8gYSBtZXRob2QgdG8gYmUgY2FsbGVkIGFueSB0aW1lIHVzZXIgaW5wdXQgY2hhbmdlc1xyXG4gICAgICAgIG9uQWN0aW9uOiBQcm9wVHlwZXMuZnVuYywgLy8gYSBtZXRob2QgY2FsbGVkIHdoZW4gQWRkIGJ1dHRvbiBpcyBjbGlja2VkXHJcbiAgICAgICAgdGFiSW5kZXg6IFByb3BUeXBlcy5udW1iZXIsIC8vIHRhYmluZGV4IHByb3BlcnR5IHRvIGJlIHBhc3NlZCB0byBpbnB1dCB0YWdcclxuICAgICAgICBkaXNhYmxlQWN0aW9uQnV0dG9uOiBQcm9wVHlwZXMuYm9vbCAvLyB1c2UgaXQgaWYgeW91IG5lZWQgdG8gZGlzYWJsZSBhY3Rpb24gYnV0dG9uXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVmFsaWRQdWJLZXkodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gISFQdWJsaWNLZXkuZnJvbVB1YmxpY0tleVN0cmluZyh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25JbnB1dENoYW5nZWQoZXZlbnQpIHtcclxuICAgICAgICBsZXQgdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWUudHJpbSgpO1xyXG4gICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uS2V5RG93bihldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykgdGhpcy5vbkFjdGlvbihldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25BY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkFjdGlvbiAmJlxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnZhbGlkICYmXHJcbiAgICAgICAgICAgICF0aGlzLnByb3BzLmRpc2FibGVBY3Rpb25CdXR0b25cclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkFjdGlvbihldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgZXJyb3IgPSB0aGlzLnByb3BzLmVycm9yO1xyXG4gICAgICAgIGlmICghZXJyb3IgJiYgdGhpcy5wcm9wcy52YWx1ZSAmJiAhdGhpcy5pc1ZhbGlkUHViS2V5KHRoaXMucHJvcHMudmFsdWUpKVxyXG4gICAgICAgICAgICBlcnJvciA9IFwiTm90IGEgdmFsaWQgcHVibGljIGtleVwiO1xyXG4gICAgICAgIGxldCBhY3Rpb25fY2xhc3MgPSBjbGFzc25hbWVzKFwiYnV0dG9uXCIsIHtcclxuICAgICAgICAgICAgZGlzYWJsZWQ6IGVycm9yIHx8IHRoaXMucHJvcHMuZGlzYWJsZUFjdGlvbkJ1dHRvblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGtleXMgPSBQcml2YXRlS2V5U3RvcmUuZ2V0U3RhdGUoKS5rZXlzO1xyXG4gICAgICAgIGNvbnN0IGhhc19wcml2YXRlID1cclxuICAgICAgICAgICAgdGhpcy5pc1ZhbGlkUHViS2V5KHRoaXMucHJvcHMudmFsdWUpICYmIGtleXMuaGFzKHRoaXMucHJvcHMudmFsdWUpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB1YmtleS1pbnB1dCBuby1vdmVyZmxvd1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWFyZWFcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1hcmVhXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHshZXJyb3IgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy52YWx1ZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVmFsaWRQdWJLZXkodGhpcy5wcm9wcy52YWx1ZSkgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwicmlnaHQtbGFiZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcm0udmFsaWRfcHViXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJsZWZ0LWxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e3RoaXMucHJvcHMubGFiZWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dC1hcmVhXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImlubGluZS1sYWJlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY2NvdW50LWltYWdlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFByaXZhdGVLZXlWaWV3IHB1YmtleT17dGhpcy5wcm9wcy52YWx1ZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwia2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMua2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCI0eFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qcml2YXRlS2V5Vmlldz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17aGFzX3ByaXZhdGUgPyBcIm15LWtleVwiIDogXCJcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5wcm9wcy52YWx1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucGxhY2Vob2xkZXIgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5wdWJsaWNfa2V5XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj1cInVzZXJfaW5wdXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uSW5wdXRDaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXt0aGlzLnByb3BzLnRhYkluZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLm9uQWN0aW9uID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXthY3Rpb25fY2xhc3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25BY3Rpb24uYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e3RoaXMucHJvcHMuYWN0aW9uX2xhYmVsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVycm9yLWFyZWEgaGFzLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntlcnJvcn08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBQdWJLZXlJbnB1dDtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBQdWJLZXlJbnB1dCBmcm9tIFwiLi4vRm9ybXMvUHViS2V5SW5wdXRcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCB7VGFicywgVGFifSBmcm9tIFwiLi4vVXRpbGl0eS9UYWJzXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IFNpZ25lZE1lc3NhZ2VBY3Rpb24gZnJvbSBcIi4uLy4uL2FjdGlvbnMvU2lnbmVkTWVzc2FnZUFjdGlvblwiO1xyXG5pbXBvcnQgU2lnbmVkTWVzc2FnZSBmcm9tIFwiLi4vQWNjb3VudC9TaWduZWRNZXNzYWdlXCI7XHJcbmltcG9ydCB7U3dpdGNofSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcblxyXG4vKiogVGhpcyBjb21wb25lbnQgZ2l2ZXMgYSB1c2VyIGludGVyZmFjZSBmb3Igc2lnbmluZyBhbmQgdmVyaWZ5aW5nIG1lc3NhZ2VzIHdpdGggdGhlIGJpdFNoYXJlcyBtZW1vIGtleS5cclxuICogIEl0IGNvbnNpc3RzIG9mIHR3byB0YWJzOlxyXG4gKiAgICAtIFNpZ24gbWVzc2FnZSB0YWIgKGNvZGUgcHJlZml4OiB0YWJTTSlcclxuICogICAgLSBWZXJpZnkgbWVzc2FnZSB0YWIgKGNvZGUgcHJlZml4OiB0YWJWTSlcclxuICpcclxuICogIFNlZSBTaWduZWRNZXNzYWdlQWN0aW9uIGZvciBkZXRhaWxzIG9uIG1lc3NhZ2UgZm9ybWF0LlxyXG4gKlxyXG4gKiAgICBAYXV0aG9yIFN0ZWZhbiBTY2hpZXNzbCA8c3RlZmFuLnNjaGllc3NsQGJsb2NrY2hhaW5wcm9qZWN0c2J2LmNvbT5cclxuICovXHJcbmNsYXNzIEFjY291bnRTaWduZWRNZXNzYWdlcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFjY291bnQ6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBzdGF0ZSAoZG8gbm90IHVzZSBzZXRTdGF0ZSBtZXRob2QhKVxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHRhYnNtX21lbW9fa2V5OiB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwib3B0aW9uc1wiKS5nZXQoXCJtZW1vX2tleVwiKSxcclxuICAgICAgICAgICAgdGFic21fcG9wdXA6IFwiXCIsXHJcbiAgICAgICAgICAgIHRhYnNtX21lc3NhZ2VfdGV4dDogXCJcIixcclxuICAgICAgICAgICAgdGFic21fbWVzc2FnZV9zaWduZWQ6IFwiXCIsXHJcbiAgICAgICAgICAgIHRhYnZtX3BvcHVwOiBcIlwiLFxyXG4gICAgICAgICAgICB0YWJ2bV9tZXNzYWdlX3NpZ25lZDogXCJcIixcclxuICAgICAgICAgICAgdGFidm1fdmVyaWZpZWQ6IG51bGwsXHJcbiAgICAgICAgICAgIHRhYnZtX21lc3NhZ2Vfc2lnbmVkX2FuZF92ZXJpZmllZDogbnVsbCxcclxuICAgICAgICAgICAgdGFidm1fZmxhZ192ZXJpZnlvbmNoYW5nZTogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZlbnQgd2hlbiB1c2VyIHB1c2hlcyBzaWduIGJ1dHRvbi4gTWVtbyBtZXNzYWdlIGFuZCBtZXRhIHdpbGwgYmUgc2lnbmVkIGFuZCBkaXNwbGF5ZWRcclxuICAgICAqIGluIHRoZSBib3R0b20gdGV4dGFyZWFcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRcclxuICAgICAqL1xyXG4gICAgX3RhYlNNU2lnbkFjdGlvbihldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIHZhbGlkYXRlIGtleXMgYXJlIHN0aWxsIHRoZSBzYW1lLiBCZXR0ZXI6IG1ha2UgcHVibGljIG1lbW9rZXkgZmllbGQgdW5lZGl0YWJsZVxyXG4gICAgICAgICAgICBsZXQgc3RvcmVkS2V5ID0gdGhpcy5wcm9wcy5hY2NvdW50LmdldChcIm9wdGlvbnNcIikuZ2V0KFwibWVtb19rZXlcIik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnRhYnNtX21lbW9fa2V5ICE9PSBzdG9yZWRLZXkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQuc2lnbmVkbWVzc2FnZXMua2V5bWlzbWF0Y2hcIilcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHRoZXJlIHNob3VsZCBiZSBhIG1lc3NhZ2UgZW50ZXJlZFxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS50YWJzbV9tZXNzYWdlX3RleHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RhYlNNUG9wTWVzc2FnZShcclxuICAgICAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLnNpZ25pbmdcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgMFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIFNpZ25lZE1lc3NhZ2VBY3Rpb24uc2lnbk1lc3NhZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudGFic21fbWVzc2FnZV90ZXh0XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzbV9tZXNzYWdlX3NpZ25lZDogcmVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic21fcG9wdXA6IFwiXCIgLy8gY2xlYXIgbG9hZGluZyBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RhYlNNUG9wTWVzc2FnZShlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic21fbWVzc2FnZV9zaWduZWQ6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGFiU01Qb3BNZXNzYWdlKGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICB0YWJzbV9tZXNzYWdlX3NpZ25lZDogbnVsbFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3RhYlNNSGFuZGxlQ2hhbmdlKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gZXZlbnQgZm9yIHRleHRhcmVhXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dGFic21fbWVzc2FnZV90ZXh0OiBldmVudC50YXJnZXQudmFsdWV9KTtcclxuICAgIH1cclxuXHJcbiAgICBfdGFiU01IYW5kbGVDaGFuZ2VLZXkodmFsdWUpIHtcclxuICAgICAgICAvLyBldmVudCBmb3IgdGV4dGZpZWxkIG9mIHB1YmxpYyBrZXlcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHt0YWJzbV9tZW1vX2tleTogdmFsdWV9KTtcclxuICAgIH1cclxuXHJcbiAgICBfdGFiU01Db3B5VG9DbGlwQm9hcmQoZXZlbnQpIHtcclxuICAgICAgICAvLyBldmVudCB3aGVuIHVzZXIgY2xpY2tzIGludG8gdGhlIHNpZ25lZCBtZXNzYWdlIHRleHRhcmVhXHJcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICBldmVudC50YXJnZXQuZm9jdXMoKTtcclxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnNlbGVjdCgpO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzZnVsID0gZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGFiU01Qb3BNZXNzYWdlKFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NmdWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5jb3B5c3VjY2Vzc2Z1bFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmNvcHl1bnN1Y2Nlc3NmdWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGFiU01Qb3BNZXNzYWdlKFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmNvcHl1bnN1Y2Nlc3NmdWxcIlxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwbGF5cyBhbiBpbmZvcm1hdGlvbiB0byB0aGUgdXNlciB0aGF0IGRpc2FwcGVhcnMgb3ZlciB0aW1lXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB0aW1lb3V0XHJcbiAgICAgKi9cclxuICAgIF90YWJTTVBvcE1lc3NhZ2UobWVzc2FnZSwgdGltZW91dCA9IDMwMDApIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgdGFic21fcG9wdXA6IG1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKG1lc3NhZ2UgIT09IFwiXCIgJiYgdGltZW91dCA+IDApIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJzbV9wb3B1cDogXCJcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50IHdoZW4gdGhlIHVzZXIgdHJpZXMgdG8gdmVyaWZ5IGEgbWVzc2FnZSwgZWl0aGVyIG1hbnVhbCB0aHJvdWdoIHRoZSBidXR0b24gb3Igb25DaGFuZ2Ugb2YgdGhlIHRleHRhcmVhLlxyXG4gICAgICogVGhlIG1lc3NhZ2UgaXMgcGFyc2VkIGFuZCB2ZXJpZmllZCwgdGhlIHVzZXIgZ2V0cyB0aGUgbWVzc2FnZSByZXN0YXRlZCBpbiB0aGUgYm90dG9tIHBhcnQgb2YgdGhlIHNpdGVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRcclxuICAgICAqL1xyXG4gICAgX3RhYlZNQWN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgLy8gcmVzZXQgdG8gdW52ZXJpZmllZCBzdGF0ZVxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICB0YWJ2bV9tZXNzYWdlX3NpZ25lZF9hbmRfdmVyaWZpZWQ6IG51bGwsXHJcbiAgICAgICAgICAgIHRhYnZtX3ZlcmlmaWVkOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBhdHRlbXB0IHZlcmlmeWluZ1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnRhYnZtX21lc3NhZ2Vfc2lnbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RhYlZNUG9wTWVzc2FnZShcclxuICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQuc2lnbmVkbWVzc2FnZXMudmVyaWZ5aW5nXCIpLFxyXG4gICAgICAgICAgICAgICAgMFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBkbyBub3QgYmxvY2sgZ3VpXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlX3NpZ25lZF9hbmRfdmVyaWZpZWQgPSBTaWduZWRNZXNzYWdlQWN0aW9uLnZlcmlmeU1lbW8oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudGFidm1fbWVzc2FnZV9zaWduZWRcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJ2bV9tZXNzYWdlX3NpZ25lZF9hbmRfdmVyaWZpZWQ6IG1lc3NhZ2Vfc2lnbmVkX2FuZF92ZXJpZmllZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFidm1fdmVyaWZpZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYnZtX3BvcHVwOiBcIlwiIC8vIGNsZWFyIHZlcmlmeWluZyBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90YWJWTVBvcE1lc3NhZ2UoZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJ2bV9tZXNzYWdlX3NpZ25lZF9hbmRfdmVyaWZpZWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYnZtX3ZlcmlmaWVkOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3RhYlZNSGFuZGxlQ2hhbmdlKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gb25jaGFuZ2UgZXZlbnQgb2YgdGhlIGlucHV0IHRleHRhcmVhXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHRhYnZtX21lc3NhZ2Vfc2lnbmVkOiBldmVudC50YXJnZXQudmFsdWUsXHJcbiAgICAgICAgICAgIHRhYnZtX3ZlcmlmaWVkOiBmYWxzZSxcclxuICAgICAgICAgICAgdGFidm1fbWVzc2FnZV9zaWduZWRfYW5kX3ZlcmlmaWVkOiBudWxsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUudGFidm1fZmxhZ192ZXJpZnlvbmNoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLl90YWJWTUFjdGlvbihldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGlzcGxheXMgYW4gaW5mb3JtYXRpb24gdG8gdGhlIHVzZXIgdGhhdCBkaXNhcHBlYXJzIG92ZXIgdGltZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0gdGltZW91dFxyXG4gICAgICovXHJcbiAgICBfdGFiVk1Qb3BNZXNzYWdlKG1lc3NhZ2UsIHRpbWVvdXQgPSAzMDAwKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHRhYnZtX3BvcHVwOiBtZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChtZXNzYWdlICE9PSBcIlwiICYmIHRpbWVvdXQgPiAwKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFidm1fcG9wdXA6IFwiXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3RhYlZNVG9nZ2xlVmVyaWZ5T25DaGFuZ2UoKSB7XHJcbiAgICAgICAgLy8gZXZlbnQgd2hlbiB0aGUgdXNlciBlbmFibGVzIC8gZGlzYWJsZXMgdmVyaWZ5aW5nIHdoaWxlIHR5cGluZ1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICB0YWJ2bV9mbGFnX3ZlcmlmeW9uY2hhbmdlOiAhdGhpcy5zdGF0ZS50YWJ2bV9mbGFnX3ZlcmlmeW9uY2hhbmdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLWNvbnRhaW5lciBnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFic1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWNjb3VudC10YWJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNDbGFzcz1cImFjY291bnQtb3ZlcnZpZXcgbm8tcGFkZGluZyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwiYWNjb3VudFNpZ25lZE1lc3NhZ2VzVGFiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cImdyaWQtY29udGVudCBzaHJpbmsgc21hbGwtdmVydGljYWwgbWVkaXVtLWhvcml6b250YWwgcGFkZGluZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5zaWdubWVzc2FnZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tvdmVyZmxvd1g6IFwiaGlkZGVuXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIG5vLW1hcmdpblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuc2lnbmVkbWVzc2FnZXMuc2lnbm1lc3NhZ2VcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQdWJLZXlJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPVwibWVtb19rZXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudGFic21fbWVtb19rZXl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cImFjY291bnQucGVybS5tZW1vX3B1YmxpY19rZXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQdWJsaWMgS2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs3fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX3RhYlNNSGFuZGxlQ2hhbmdlS2V5LmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVBY3Rpb25CdXR0b249e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS50YWJzbV9tZXNzYWdlX3RleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fdGFiU01IYW5kbGVDaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQuc2lnbmVkbWVzc2FnZXMuZW50ZXJtZXNzYWdlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fdGFiU01TaWduQWN0aW9uLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuc2lnbmVkbWVzc2FnZXMuc2lnblwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tjb2xvcjogXCJncmF5XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS50YWJzbV9wb3B1cH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPVwiMTRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudGFic21fbWVzc2FnZV9zaWduZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2VkaXRhYmxlOiBmYWxzZX19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5hdXRvbWF0aWNjcmVhdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fdGFiU01Db3B5VG9DbGlwQm9hcmQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYiB0aXRsZT1cImFjY291bnQuc2lnbmVkbWVzc2FnZXMudmVyaWZ5bWVzc2FnZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tvdmVyZmxvd1g6IFwiaGlkZGVuXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIG5vLW1hcmdpblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuc2lnbmVkbWVzc2FnZXMudmVyaWZ5bWVzc2FnZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0OiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogXCIwLjFlbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206IFwiMC41ZW1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjAuNXJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLnZlcmlmeW9uY2hhbmdlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50YWJ2bV9mbGFnX3ZlcmlmeW9uY2hhbmdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX3RhYlZNVG9nZ2xlVmVyaWZ5T25DaGFuZ2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCIxMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS50YWJ2bV9tZXNzYWdlX3NpZ25lZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl90YWJWTUhhbmRsZUNoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5lbnRlcm1lc3NhZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl90YWJWTUFjdGlvbi5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLnZlcmlmeVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0IHN0eWxlPXt7Y29sb3I6IFwiZ3JheVwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUudGFidm1fcG9wdXB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RleHQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS50YWJ2bV92ZXJpZmllZCAhPT0gbnVsbCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Zsb2F0OiBcInJpZ2h0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZSBpczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50YWJ2bV92ZXJpZmllZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiZ3JlZW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwicmVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGFidm1fdmVyaWZpZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcInZlcmlmaWVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIm5vdCB2ZXJpZmllZFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeygodGhpcy5zdGF0ZS50YWJ2bV92ZXJpZmllZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRhYnZtX21lc3NhZ2Vfc2lnbmVkX2FuZF92ZXJpZmllZCAhPT1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50YWJ2bV9mbGFnX3ZlcmlmeW9uY2hhbmdlKSAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTaWduZWRNZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50YWJ2bV9tZXNzYWdlX3NpZ25lZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbkFjY291bnRTaWduZWRNZXNzYWdlcyA9IEJpbmRUb0NoYWluU3RhdGUoQWNjb3VudFNpZ25lZE1lc3NhZ2VzKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFjY291bnRTaWduZWRNZXNzYWdlcztcclxuIiwiaW1wb3J0IGFsdCBmcm9tIFwiYWx0LWluc3RhbmNlXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IHtTaWduYXR1cmUsIENoYWluU3RvcmUsIFB1YmxpY0tleX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBXYWxsZXRVbmxvY2tBY3Rpb25zIGZyb20gXCJhY3Rpb25zL1dhbGxldFVubG9ja0FjdGlvbnNcIjtcclxuaW1wb3J0IFdhbGxldERiIGZyb20gXCJzdG9yZXMvV2FsbGV0RGJcIjtcclxuXHJcbmNvbnN0IE1TR19IRUFEID0gXCItLS0tLUJFR0lOIEJJVFNIQVJFUyBTSUdORUQgTUVTU0FHRS0tLS0tXCI7XHJcbmNvbnN0IE1TR19NRVRBID0gXCItLS0tLUJFR0lOIE1FVEEtLS0tLVwiO1xyXG5jb25zdCBNU0dfU0lHTkFUVVJFID0gXCItLS0tLUJFR0lOIFNJR05BVFVSRS0tLS0tXCI7XHJcbmNvbnN0IE1TR19GT09UID0gXCItLS0tLUVORCBCSVRTSEFSRVMgU0lHTkVEIE1FU1NBR0UtLS0tLVwiO1xyXG5jb25zdCBNU0dfU0VOREVSID0gXCJhY2NvdW50XCI7XHJcbmNvbnN0IE1TR19QVUJMSUNLRVkgPSBcIm1lbW9rZXlcIjtcclxuY29uc3QgTVNHX0JMT0NLID0gXCJibG9ja1wiO1xyXG5jb25zdCBNU0dfREFURSA9IFwidGltZXN0YW1wXCI7XHJcblxyXG4vKiogVGhpcyBhY3Rpb24gcHJvdmlkZXMgZm9sbG93aW5nIGZ1bmN0aW9uYWxpdGllczpcclxuICogICAgLSBTaWduIGEgbWVzc2FnZVxyXG4gKiAgICAtIFZlcmlmeSBhIGdpdmVuIG1lc3NhZ2VcclxuICpcclxuICogIFRoZSBtZXNzYWdlIGZvcm1hdCB0aGF0IGlzIHVuZGVybHlpbmcgaXMgYXMgZm9sbG93czpcclxuICogIC0tLS0tQkVHSU4gQklUU0hBUkVTIFNJR05FRCBNRVNTQUdFLS0tLS1cclxuICogIDxtZXNzYWdlIGZyb20gdGhlIGFjY291bnQ+XHJcbiAqICAtLS0tLUJFR0lOIE1FVEEtLS0tLVxyXG4gKiAgYWNjb3VudD08YWNjb3VudCBuYW1lPlxyXG4gKiAgbWVtb2tleT08YWNjb3VudCBtZW1vIHB1YmxpYyBrZXk+XHJcbiAqICBibG9jaz08bGFzdCBpcnJldmVyc2libGUgYmxvY2s+XHJcbiAqICB0aW1lc3RhbXA9PGN1cnJlbnQgdGltZT5cclxuICogIC0tLS0tQkVHSU4gU0lHTkFUVVJFLS0tLS1cclxuICogIDxzaWduYXR1cmU+XHJcbiAqICAtLS0tLUVORCBCSVRTSEFSRVMgU0lHTkVEIE1FU1NBR0UtLS0tLVxyXG4gKlxyXG4gKiAgICBAYXV0aG9yIFN0ZWZhbiBTY2hpZXNzbCA8c3RlZmFuLnNjaGllc3NsQGJsb2NrY2hhaW5wcm9qZWN0c2J2LmNvbT5cclxuICovXHJcbmNsYXNzIFNpZ25lZE1lc3NhZ2VBY3Rpb24ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgdGhlIGdpdmVuIHJhdyBzdHJpbmcgdG8gYSBwcm9jZXNzaW5nIGZyaWVuZGx5IGRpY3Rpb25hcnlcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBNZXNzYWdlIGFzIHJhdyBzdHJpbmcsIHByb3Blcmx5IGZvcm1hdHRlZCB3aXRoIGhlYWQvbWV0YS9zaWduYXR1cmUvZm9vdGVyXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgeyp9IHBhcnNlZCBtZXNzYWdlIGFzIGRpY3Rpb25hcnkgd2l0aCB0aGUgZm9sbG93aW5nIGZpZWxkczpcclxuICAgICAqICAgICAgICAgICAgICBjb250ZW50IDogVXNlciBtZXNzYWdlIG9mIHRoZSBtZXNzYWdlXHJcbiAgICAgKiAgICAgICAgICAgICAgbWV0YSA6IERpY3Rpb25hcnkgd2l0aCB0aGUgbWV0YSBkYXRhXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50IDogQWNjb3VudCBuYW1lIG9mIHRoZSBzaWduZXJcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIGtleSA6IE1lbW8gcHVibGljIGtleSBvZiB0aGUgc2lnbmVyXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICBibG9jayA6IEN1cnJlbnQgbGFzdCBpcnJldmVyc2libGUgYmxvY2sgb2YgdGhlIGJpdFNoYXJlcyBibG9ja2NoYWluXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXAgOiBUaW1lIHRoZSBtZXNzYWdlIHdhcyBzaWduZWQgaW4gVVRDIGZvcm1hdFxyXG4gICAgICogICAgICAgICAgICAgIHNpZ25lZCA6IFNlcGVyYXRlIHN0cmluZyB0aGF0IGNvbnRhaW5zIGFsbCBkYXRhIHRoYXQgd2lsbCBiZSBzaWduZWQgKGNvbnRlbnQgKyBtZXRhKVxyXG4gICAgICogICAgICAgICAgICAgIHNpZ25hdHVyZSA6IFNpZ25hdHVyZSBvZiB0aGUgc2lnbmVkIGRhdGFcclxuICAgICAqL1xyXG4gICAgcGFyc2VNZXNzYWdlKG1lc3NhZ2UpIHtcclxuICAgICAgICBsZXQgbWVzc2FnZUNvbnRlbnQsIG1lc3NhZ2VNZXRhLCBtZXNzYWdlU2lnbmF0dXJlLCBtZXNzYWdlU2lnbmVkQ29udGVudDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBjdXQgdGhlIHNlY3Rpb25zXHJcbiAgICAgICAgICAgIG1lc3NhZ2VDb250ZW50ID0gbWVzc2FnZS5zcGxpdChNU0dfSEVBRClbMV07IC8vIGV2ZXJ5dGhpbmcgYmVmb3JlIHRoZSBoZWFkIGlzIGlnbm9yZWRcclxuICAgICAgICAgICAgbWVzc2FnZU1ldGEgPSBtZXNzYWdlQ29udGVudC5zcGxpdChNU0dfTUVUQSk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDb250ZW50ID0gbWVzc2FnZU1ldGFbMF0ucmVwbGFjZSgvXlxcbnxcXG4kL2csIFwiXCIpO1xyXG4gICAgICAgICAgICBtZXNzYWdlU2lnbmF0dXJlID0gbWVzc2FnZU1ldGFbMV0uc3BsaXQoTVNHX1NJR05BVFVSRSk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VNZXRhID0gbWVzc2FnZVNpZ25hdHVyZVswXS50cmltKCk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VTaWduYXR1cmUgPSBtZXNzYWdlU2lnbmF0dXJlWzFdLnNwbGl0KE1TR19GT09UKVswXS50cmltKCk7IC8vIGV2ZXJ5dGhpbmcgYWZ0ZXIgZm9vdGVyIGlzIGlnbm9yZWRcclxuXHJcbiAgICAgICAgICAgIC8vIGhvdyB0aGUgc2lnbmVkIGNvbnRlbnQgaXQgYnVpbHQgaXMgY3J1Y2lhbCwgY29uc2lkZXIgZW5jYXBzdWxhdGluZ1xyXG4gICAgICAgICAgICBtZXNzYWdlU2lnbmVkQ29udGVudCA9IG1lc3NhZ2VDb250ZW50ICsgXCJcXG5cIiArIG1lc3NhZ2VNZXRhO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmludmFsaWRmb3JtYXRcIilcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBtZXNzYWdlTWV0YUFjY291bnQsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VNZXRhS2V5LFxyXG4gICAgICAgICAgICBtZXNzYWdlTWV0YUJsb2NrLFxyXG4gICAgICAgICAgICBtZXNzYWdlTWV0YVRpbWVzdGFtcDtcclxuICAgICAgICBpZiAobWVzc2FnZU1ldGEpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIHByb2Nlc3MgbWV0YVxyXG4gICAgICAgICAgICAgICAgLy8gLi4uIHNlbmRlclxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFBY2NvdW50ID0gbWVzc2FnZU1ldGEuc3BsaXQoTVNHX1NFTkRFUiArIFwiPVwiKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VNZXRhQWNjb3VudCA9IG1lc3NhZ2VNZXRhQWNjb3VudFsxXVxyXG4gICAgICAgICAgICAgICAgICAgIC5zcGxpdChcIlxcblwiKVswXVxyXG4gICAgICAgICAgICAgICAgICAgIC50cmltKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gLi4uIGFuZCBpdHMgcHVibGljIGtleVxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFLZXkgPSBtZXNzYWdlTWV0YS5zcGxpdChNU0dfUFVCTElDS0VZICsgXCI9XCIpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFLZXkgPSBtZXNzYWdlTWV0YUtleVsxXS5zcGxpdChcIlxcblwiKVswXS50cmltKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gLi4uIGJsb2NrIG51bWJlclxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFCbG9jayA9IG1lc3NhZ2VNZXRhLnNwbGl0KE1TR19CTE9DSyArIFwiPVwiKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VNZXRhQmxvY2sgPSBtZXNzYWdlTWV0YUJsb2NrWzFdLnNwbGl0KFwiXFxuXCIpWzBdLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAuLi4gdGltZSBzdGFtcFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU1ldGFUaW1lc3RhbXAgPSBtZXNzYWdlTWV0YS5zcGxpdChNU0dfREFURSArIFwiPVwiKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VNZXRhVGltZXN0YW1wID0gbWVzc2FnZU1ldGFUaW1lc3RhbXBbMV1cclxuICAgICAgICAgICAgICAgICAgICAuc3BsaXQoXCJcXG5cIilbMF1cclxuICAgICAgICAgICAgICAgICAgICAudHJpbSgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5pbnZhbGlkZm9ybWF0XCJcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlQ29udGVudCxcclxuICAgICAgICAgICAgbWV0YToge1xyXG4gICAgICAgICAgICAgICAgYWNjb3VudDogbWVzc2FnZU1ldGFBY2NvdW50LFxyXG4gICAgICAgICAgICAgICAga2V5OiBtZXNzYWdlTWV0YUtleSxcclxuICAgICAgICAgICAgICAgIGJsb2NrOiBtZXNzYWdlTWV0YUJsb2NrLFxyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBtZXNzYWdlTWV0YVRpbWVzdGFtcFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzaWduZWQ6IG1lc3NhZ2VTaWduZWRDb250ZW50LFxyXG4gICAgICAgICAgICBzaWduYXR1cmU6IG1lc3NhZ2VTaWduYXR1cmVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGdpdmVuIHN0cmluZyBtZXNzYWdlIGlzIHBhcnNlZCBhbmQgdGhlbiBpdHMgc2lnbmF0dXJlIHZlcmlmaWVkLiBBIHBvc2l0aXZlIHZlcmlmaWNhdGlvbiByZXR1cm4gdGhlIHBhcnNlZFxyXG4gICAgICogbWVzc2FnZSwgYW55dGhpbmcgZWxzZSB0aHJvd3MgYW4gZXhlcHRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgTWVzc2FnZSBhcyByYXcgc3RyaW5nLCBwcm9wZXJseSBmb3JtYXR0ZWQgd2l0aCBoZWFkL21ldGEvc2lnbmF0dXJlL2Zvb3Rlciwgb3IgYWxyZWFkeSBwYXJzZWQgbWVzc2FnZVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHBhcnNlZCBtZXNzYWdlLCBzZWUgcGFyc2VNZXNzYWdlXHJcbiAgICAgKi9cclxuICAgIHZlcmlmeU1lbW8obWVzc2FnZSkge1xyXG4gICAgICAgIGxldCBtZXNzYWdlX3NpZ25lZDtcclxuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgfHwgbWVzc2FnZSBpbnN0YW5jZW9mIFN0cmluZykge1xyXG4gICAgICAgICAgICBtZXNzYWdlX3NpZ25lZCA9IHRoaXMucGFyc2VNZXNzYWdlKG1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGFzc3VtZSBpdHMgYSBkaWN0aW9uYXJ5XHJcbiAgICAgICAgICAgIG1lc3NhZ2Vfc2lnbmVkID0gbWVzc2FnZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHZhbGlkYXRlIGFjY291bnQgYW5kIGtleVxyXG4gICAgICAgIGxldCBzdG9yZWRBY2NvdW50ID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KG1lc3NhZ2Vfc2lnbmVkLm1ldGEuYWNjb3VudCk7XHJcbiAgICAgICAgaWYgKHN0b3JlZEFjY291bnQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmludmFsaWR1c2VyXCIpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB2ZXJpZnkgbWVzc2FnZSBzaWduZWRcclxuICAgICAgICBsZXQgdmVyaWZpZWQgPSBmYWxzZTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2ZXJpZmllZCA9IFNpZ25hdHVyZS5mcm9tSGV4KG1lc3NhZ2Vfc2lnbmVkLnNpZ25hdHVyZSkudmVyaWZ5QnVmZmVyKFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZV9zaWduZWQuc2lnbmVkLFxyXG4gICAgICAgICAgICAgICAgUHVibGljS2V5LmZyb21QdWJsaWNLZXlTdHJpbmcobWVzc2FnZV9zaWduZWQubWV0YS5rZXkpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIC8vIHdyYXAgbWVzc2FnZSB0aGF0IGNvdWxkIGJlIHJhaXNlZCBmcm9tIFNpZ25hdHVyZVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLmVycm9ydmVyaWZ5aW5nXCIpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdmVyaWZpZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgY291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5zaWduZWRtZXNzYWdlcy5pbnZhbGlkc2lnbmF0dXJlXCIpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlX3NpZ25lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIGFuIGFjY291bnQgYW5kIHRoZSBtZXNzYWdlIHRleHRcclxuICAgICAqIEBwYXJhbSBhY2NvdW50IEFjY291bnQgdGhhdCB3cml0ZXMgdGhlIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlVGV4dCBTdHJpbmcgdGV4dCBvZiB0aGUgbWVzc2FnZVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICAgKi9cclxuICAgIHNpZ25NZXNzYWdlKGFjY291bnQsIG1lc3NhZ2VUZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHdhbGxldCBpcyB1bmxvY2tlZCAod2UgbmVlZCBwcml2YXRlIGtleSlcclxuICAgICAgICAgICAgV2FsbGV0VW5sb2NrQWN0aW9ucy51bmxvY2soKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9idGFpbiBhbGwgbmVjZXNzYXJ5IGtleXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lbW9fZnJvbV9wdWJsaWMgPSBhY2NvdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KFwib3B0aW9uc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldChcIm1lbW9fa2V5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgMXMgYXJlIGJhc2U1OCBmb3IgYWxsIHplcm9zIChudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoLzExMTExMTExMTExMTExMTExMTExMS8udGVzdChtZW1vX2Zyb21fcHVibGljKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb19mcm9tX3B1YmxpYyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lbW9fZnJvbV9wcml2a2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZVRleHQgJiYgbWVtb19mcm9tX3B1YmxpYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb19mcm9tX3ByaXZrZXkgPSBXYWxsZXREYi5nZXRQcml2YXRlS2V5KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9fZnJvbV9wdWJsaWNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lbW9fZnJvbV9wcml2a2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQuc2lnbmVkbWVzc2FnZXMuaW52YWxpZGtleVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBvdGhlciBtZXRhIGRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlycl9ibG9jayA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KFwiMi4xLjBcIikuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJsYXN0X2lycmV2ZXJzaWJsZV9ibG9ja19udW1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZXRhID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TR19TRU5ERVIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI9XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5nZXQoXCJuYW1lXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTVNHX1BVQkxJQ0tFWSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIj1cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vX2Zyb21fcHVibGljICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTVNHX0JMT0NLICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPVwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlycl9ibG9jayArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcblwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TR19EQVRFICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPVwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdy50b1VUQ1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2VDb250ZW50VG9CZVNpZ25lZCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlVGV4dCArIFwiXFxuXCIgKyBtZXRhO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3QgYmxvY2sgZ3VpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZW1vX3NpZ25hdHVyZSA9IFNpZ25hdHVyZS5zaWduQnVmZmVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQ29udGVudFRvQmVTaWduZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9fZnJvbV9wcml2a2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vX2Zyb21fcHVibGljXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVtb19mb3JtYXR0ZWQgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNU0dfSEVBRCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlVGV4dCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNU0dfTUVUQSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TR19TSUdOQVRVUkUgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcblwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb19zaWduYXR1cmUudG9IZXgoKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNU0dfRk9PVDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG1lbW9fZm9ybWF0dGVkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXMpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFsdC5jcmVhdGVBY3Rpb25zKFNpZ25lZE1lc3NhZ2VBY3Rpb24pO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCBTaWduZWRNZXNzYWdlQWN0aW9uIGZyb20gXCIuLi8uLi9hY3Rpb25zL1NpZ25lZE1lc3NhZ2VBY3Rpb25cIjtcclxuXHJcbi8qKiBUaGlzIGNvbXBvbmVudCBhbGxvd3MgdG8gZGlzcGxheSBhbmQgdmVyaWZ5IGEgc2lnbmVkIG1lc3NhZ2VcclxuICpcclxuICogIFNlZSBTaWduZWRNZXNzYWdlQWN0aW9uIGZvciBkZXRhaWxzIG9uIG1lc3NhZ2UgZm9ybWF0LlxyXG4gKlxyXG4gKiAgICBAYXV0aG9yIFN0ZWZhbiBTY2hpZXNzbCA8c3RlZmFuLnNjaGllc3NsQGJsb2NrY2hhaW5wcm9qZWN0c2J2LmNvbT5cclxuICovXHJcbmNsYXNzIFNpZ25lZE1lc3NhZ2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgLy8gc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgIC8vICAgICBzaWduZWRNZXNzYWdlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcclxuICAgIC8vICAgIG5vVmVyaWZpY2F0aW9uXHJcbiAgICAvLyB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgbm9WZXJpZmljYXRpb246IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMucHJvcHMubWVzc2FnZSxcclxuICAgICAgICAgICAgbWVzc2FnZVBhcnNlZDogbnVsbCxcclxuICAgICAgICAgICAgc2hvd1Jhd01lc3NhZ2U6IGZhbHNlLFxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICBub1ZlcmlmaWNhdGlvbjogdGhpcy5wcm9wcy5ub1ZlcmlmaWNhdGlvbixcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgdmVyaWZpZWQ6IG51bGwsXHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbjogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgX3ZlcmlmeU1lc3NhZ2Uoc2lnbmVkTWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBzaWduZWRNZXNzYWdlLFxyXG4gICAgICAgICAgICBtZXNzYWdlUGFyc2VkOiBudWxsLFxyXG4gICAgICAgICAgICB2ZXJpZmllZDogbnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBtZXNzYWdlUGFyc2VkID0gbnVsbDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBtZXNzYWdlUGFyc2VkID0gU2lnbmVkTWVzc2FnZUFjdGlvbi5wYXJzZU1lc3NhZ2Uoc2lnbmVkTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgdmVyaWZpZWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlUGFyc2VkOiBtZXNzYWdlUGFyc2VkXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLm5vVmVyaWZpY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJpZmllZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb246IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnNpZ25lZG1lc3NhZ2VzLnZlcmlmeWluZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3QgYmxvY2sgZ3VpXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2lnbmVkTWVzc2FnZUFjdGlvbi52ZXJpZnlNZW1vKG1lc3NhZ2VQYXJzZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmaWVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uOiBcIlwiIC8vIGNsZWFyIHBvcHVwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl93YXJuaW5nKGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZmllZDogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgdGhpcy5fd2FybmluZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcclxuICAgICAgICB0aGlzLl92ZXJpZnlNZXNzYWdlKHRoaXMuc3RhdGUubWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcclxuICAgICAgICBsZXQgc2lnbmVkTWVzc2FnZSA9IG5leHRQcm9wcy5tZXNzYWdlO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgc2lnbmVkTWVzc2FnZSAhPSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgc2lnbmVkTWVzc2FnZSAhPSBudWxsICYmXHJcbiAgICAgICAgICAgIHNpZ25lZE1lc3NhZ2UgPT0gdGhpcy5zdGF0ZS5tZXNzYWdlXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIC8vIGFscmVhZHkgZG9uZVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3ZlcmlmeU1lc3NhZ2Uoc2lnbmVkTWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3dhcm5pbmcobWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb246IG1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlUmF3TWVzc2FnZSgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2hvd1Jhd01lc3NhZ2U6ICF0aGlzLnN0YXRlLnNob3dSYXdNZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBsZWdlbmRNZXNzYWdlO1xyXG4gICAgICAgIGxldCBib3JkZXJDb2xvcjtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5tZXNzYWdlUGFyc2VkICE9IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUudmVyaWZpZWQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyQ29sb3IgPSBcIiNGRkZcIjtcclxuICAgICAgICAgICAgICAgIGxlZ2VuZE1lc3NhZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgIFwiVW52ZXJpZmllZCBtZXNzYWdlIGZyb20gXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubWVzc2FnZVBhcnNlZC5tZXRhLmFjY291bnQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS52ZXJpZmllZCkge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyQ29sb3IgPSBcIiNGRkZcIjtcclxuICAgICAgICAgICAgICAgIGxlZ2VuZE1lc3NhZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgIFwiVmVyaWZpZWQgbWVzc2FnZSBmcm9tIFwiICtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLm1lc3NhZ2VQYXJzZWQubWV0YS5hY2NvdW50O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyQ29sb3IgPSBcIiNGMDBcIjtcclxuICAgICAgICAgICAgICAgIGxlZ2VuZE1lc3NhZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgIFwiUmVmdXRlZCBtZXNzYWdlLCBpbmRpY2F0ZWQgc2VuZGVyIFwiICtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLm1lc3NhZ2VQYXJzZWQubWV0YS5hY2NvdW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBtZXNzYWdlR2l2ZW4gPVxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLm1lc3NhZ2UgIT0gbnVsbCAmJiB0aGlzLnByb3BzLm1lc3NhZ2UgIT0gXCJcIjtcclxuICAgICAgICBsZXQgbm90aWZpY2F0aW9uR2l2ZW4gPVxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLm5vdGlmaWNhdGlvbiAmJiB0aGlzLnN0YXRlLm5vdGlmaWNhdGlvbiAhPSBcIlwiO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tjb2xvcjogXCJncmF5XCIsIG1hcmdpbjogXCIxMHB4IDEwcHhcIn19PlxyXG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUubWVzc2FnZVBhcnNlZCAhPSBudWxsICYmIChcclxuICAgICAgICAgICAgICAgICAgICA8ZmllbGRzZXQgc3R5bGU9e3tib3JkZXJDb2xvcjogYm9yZGVyQ29sb3J9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxlZ2VuZCBzdHlsZT17e2NvbG9yOiBcIndoaXRlXCIsIHdlaWdodDogXCJib2xkXCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsZWdlbmRNZXNzYWdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xlZ2VuZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHByZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcInRhYmxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLm1lc3NhZ2VQYXJzZWQuY29udGVudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtub3RpZmljYXRpb25HaXZlbiAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJ0YWJsZS1jZWxsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcImNhbGMoMTAwJSAtIDMwcHgpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFwiY2FsYygxMDAlICsgMTVweClcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogXCIwcHhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBcIjMwcHhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDUwLDUwLDUwLDAuNSlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cIm92ZXJsYXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUubm90aWZpY2F0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wcmU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcInNtYWxsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IFwicmlnaHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2lnbmVkIG9uIHt0aGlzLnN0YXRlLm1lc3NhZ2VQYXJzZWQubWV0YS50aW1lc3RhbXB9e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogXCJzbWFsbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdDogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiBcIjBweCAwcHhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjNzc3XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3RvZ2dsZVJhd01lc3NhZ2UuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmI3gxZjUwZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnNob3dSYXdNZXNzYWdlICYmIDxiciAvPn1cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuc2hvd1Jhd01lc3NhZ2UgJiYgPGJyIC8+fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5zaG93UmF3TWVzc2FnZSAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCJjYWxjKDEwMCUpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiBcIjEwMDBweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cHJlPnt0aGlzLnN0YXRlLm1lc3NhZ2V9PC9wcmU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA8L2ZpZWxkc2V0PlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIHttZXNzYWdlR2l2ZW4gJiZcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLm1lc3NhZ2VQYXJzZWQgPT0gbnVsbCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxmaWVsZHNldCBzdHlsZT17e2JvcmRlckNvbG9yOiBcIiNGMDBcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxlZ2VuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7Y29sb3I6IFwicmVkXCIsIHdlaWdodDogXCJib2xkXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImVycm9yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcnJvciB3aGlsZSBwYXJzaW5nIG1lc3NhZ2UsIHBsZWFzZSBjaGVjayBzeW50YXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tIG1lc3NhZ2UgYmVsb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGVnZW5kPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHByZT57dGhpcy5wcm9wcy5tZXNzYWdlfTwvcHJlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2ZpZWxkc2V0PlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNpZ25lZE1lc3NhZ2U7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XHJcbmltcG9ydCB7Y29ubmVjdH0gZnJvbSBcImFsdC1yZWFjdFwiO1xyXG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xyXG5pbXBvcnQgY29uc3RhbnRzIGZyb20gXCJjaGFpbi9hY2NvdW50X2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuLi9BY2NvdW50L0FjY291bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgSW1tdXRhYmxlIGZyb20gXCJpbW11dGFibGVcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiLi4vVXRpbGl0eS9DaGFpblR5cGVzXCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcclxuaW1wb3J0IExpbmtUb0FjY291bnRCeUlkIGZyb20gXCIuLi9VdGlsaXR5L0xpbmtUb0FjY291bnRCeUlkXCI7XHJcbmltcG9ydCBXYWxsZXRBcGkgZnJvbSBcImFwaS9XYWxsZXRBcGlcIjtcclxuaW1wb3J0IFdhbGxldERiIGZyb20gXCJzdG9yZXMvV2FsbGV0RGIuanNcIjtcclxuXHJcbmNsYXNzIEFjY291bnRSb3cgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBhY2NvdW50OiBDaGFpblR5cGVzLkNoYWluQWNjb3VudC5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgdGVtcENvbXBvbmVudDogXCJ0clwiXHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2FjY291bnQsIG9uUmVtb3ZlfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0ZD57dGhpcy5wcm9wcy5pbmRleH08L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPnthY2NvdW50LmdldChcImlkXCIpfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPExpbmtUb0FjY291bnRCeUlkIGFjY291bnQ9e2FjY291bnQuZ2V0KFwiaWRcIil9IC8+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAge29uUmVtb3ZlID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17b25SZW1vdmUuYmluZCh0aGlzLCBhY2NvdW50LmdldChcImlkXCIpKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvbiBvdXRsaW5lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVtb3ZlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbkFjY291bnRSb3cgPSBCaW5kVG9DaGFpblN0YXRlKEFjY291bnRSb3cpO1xyXG5cclxuY2xhc3MgQWNjb3VudExpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgX29uUmVtb3ZlKGxpc3RpbmcsIGFjY291bnQsIGUpIHtcclxuICAgICAgICBpZiAoYWNjb3VudCkge1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudFN0YXRlID0gdGhpcy5wcm9wcy5nZXRDdXJyZW50U3RhdGUoYWNjb3VudCk7XHJcbiAgICAgICAgICAgIGxldCB0ciA9IFdhbGxldEFwaS5uZXdfdHJhbnNhY3Rpb24oKTtcclxuICAgICAgICAgICAgdHIuYWRkX3R5cGVfb3BlcmF0aW9uKFwiYWNjb3VudF93aGl0ZWxpc3RcIiwge1xyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0X2lkOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmFzc2V0c19ieV9zeW1ib2wuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zZXR0aW5ncy5nZXQoXCJmZWVfYXNzZXRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSB8fCBcIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemluZ19hY2NvdW50OiB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50X3RvX2xpc3Q6IGFjY291bnQsXHJcbiAgICAgICAgICAgICAgICBuZXdfbGlzdGluZzogY3VycmVudFN0YXRlIC0gY29uc3RhbnRzLmFjY291bnRfbGlzdGluZ1tsaXN0aW5nXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgV2FsbGV0RGIucHJvY2Vzc190cmFuc2FjdGlvbih0ciwgbnVsbCwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge3JlbW92ZUJ1dHRvbiwgd2hpdGUsIGxpc3R9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgbGV0IHJvd3MgPSBsaXN0XHJcbiAgICAgICAgICAgIC5tYXAoKGFjY291bnQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxBY2NvdW50Um93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25SZW1vdmU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9vblJlbW92ZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUgPyBcIndoaXRlX2xpc3RlZFwiIDogXCJibGFja19saXN0ZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXtpbmRleCArIDF9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50b0FycmF5KCk7XHJcblxyXG4gICAgICAgIGxldCBzaG93SGVhZGVycyA9IHRydWU7XHJcbiAgICAgICAgaWYgKCFyb3dzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzaG93SGVhZGVycyA9IGZhbHNlO1xyXG4gICAgICAgICAgICByb3dzLnB1c2goXHJcbiAgICAgICAgICAgICAgICA8dHIga2V5PVwiZW1wdHlcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nOiBcIjFyZW0gMFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sU3Bhbj17cmVtb3ZlQnV0dG9uID8gNCA6IDN9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXt0aGlzLnByb3BzLmVtcHR5VGV4dH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIGNvbXBhY3QgZGFzaGJvYXJkLXRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICB7c2hvd0hlYWRlcnMgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+IzwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5pZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQubmFtZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbW92ZUJ1dHRvbiA/IDx0aCAvPiA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPHRib2R5Pntyb3dzfTwvdGJvZHk+XHJcbiAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuQWNjb3VudExpc3QgPSBjb25uZWN0KFxyXG4gICAgQWNjb3VudExpc3QsXHJcbiAgICB7XHJcbiAgICAgICAgbGlzdGVuVG8oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbU2V0dGluZ3NTdG9yZV07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRQcm9wcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzOiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkuc2V0dGluZ3NcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbik7XHJcblxyXG5jbGFzcyBBY2NvdW50V2hpdGVsaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBhY2NvdW50TmFtZTogXCJcIixcclxuICAgICAgICAgICAgYWNjb3VudFRvTGlzdDogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgX2dldEN1cnJlbnRTdGF0ZShpZCkge1xyXG4gICAgICAgIGxldCB7YWNjb3VudH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCB3aGl0ZSA9IGFjY291bnQuZ2V0KFwid2hpdGVsaXN0ZWRfYWNjb3VudHNcIikgfHwgSW1tdXRhYmxlLkxpc3QoKTtcclxuICAgICAgICBsZXQgYmxhY2sgPSBhY2NvdW50LmdldChcImJsYWNrbGlzdGVkX2FjY291bnRzXCIpIHx8IEltbXV0YWJsZS5MaXN0KCk7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBjb25zdGFudHMuYWNjb3VudF9saXN0aW5nLm5vX2xpc3Rpbmc7XHJcblxyXG4gICAgICAgIGlmICh3aGl0ZS5pbmNsdWRlcyhpZCkpIHtcclxuICAgICAgICAgICAgY3VycmVudCArPSBjb25zdGFudHMuYWNjb3VudF9saXN0aW5nLndoaXRlX2xpc3RlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChibGFjay5pbmNsdWRlcyhpZCkpIHtcclxuICAgICAgICAgICAgY3VycmVudCArPSBjb25zdGFudHMuYWNjb3VudF9saXN0aW5nLmJsYWNrX2xpc3RlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjdXJyZW50O1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkFkZChsaXN0aW5nLCBlKSB7XHJcbiAgICAgICAgbGV0IHthY2NvdW50VG9MaXN0fSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IHthY2NvdW50fSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGxldCBjdXJyZW50U3RhdGUgPSB0aGlzLl9nZXRDdXJyZW50U3RhdGUoYWNjb3VudFRvTGlzdCk7XHJcblxyXG4gICAgICAgIGlmIChhY2NvdW50VG9MaXN0KSB7XHJcbiAgICAgICAgICAgIGxldCB0ciA9IFdhbGxldEFwaS5uZXdfdHJhbnNhY3Rpb24oKTtcclxuICAgICAgICAgICAgdHIuYWRkX3R5cGVfb3BlcmF0aW9uKFwiYWNjb3VudF93aGl0ZWxpc3RcIiwge1xyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBcIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemluZ19hY2NvdW50OiBhY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudF90b19saXN0OiBhY2NvdW50VG9MaXN0LFxyXG4gICAgICAgICAgICAgICAgbmV3X2xpc3Rpbmc6IGN1cnJlbnRTdGF0ZSArIGNvbnN0YW50cy5hY2NvdW50X2xpc3RpbmdbbGlzdGluZ11cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFdhbGxldERiLnByb2Nlc3NfdHJhbnNhY3Rpb24odHIsIG51bGwsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25BY2NvdW50Rm91bmQoYWNjb3VudCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiYWNjb3VudEZvdW5kOlwiLCBhY2NvdW50KTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgYWNjb3VudE5hbWU6IGFjY291bnQgPyBhY2NvdW50LmdldChcIm5hbWVcIikgOiBudWxsLFxyXG4gICAgICAgICAgICBhY2NvdW50VG9MaXN0OiBhY2NvdW50ID8gYWNjb3VudC5nZXQoXCJpZFwiKSA6IG51bGxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25BY2NvdW50Q2hhbmdlZChhY2NvdW50KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJhY2NvdW50IGNoYW5nZWQ6XCIsIGFjY291bnQpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBhY2NvdW50TmFtZTogYWNjb3VudCxcclxuICAgICAgICAgICAgYWNjb3VudFRvTGlzdDogbnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2FjY291bnR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQge2FjY291bnROYW1lfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1jb250ZW50IGFwcC10YWJsZXMgbm8tcGFkZGluZ1wiIHJlZj1cImFwcFRhYmxlc1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLWNvbnRhaW5lciBnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFic1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWNjb3VudC10YWJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNDbGFzcz1cImFjY291bnQtb3ZlcnZpZXcgbm8tcGFkZGluZyBib3JkZXJlZC1oZWFkZXIgY29udGVudC1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nPVwid2hpdGVsaXN0VGFiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRDbGFzcz1cImdyaWQtY29udGVudCBzaHJpbmsgc21hbGwtdmVydGljYWwgbWVkaXVtLWhvcml6b250YWwgbm8tcGFkZGluZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC53aGl0ZWxpc3QudGl0bGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIxcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzbWFsbC0xMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlUZXh0PVwiYWNjb3VudC53aGl0ZWxpc3QuZW1wdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Q3VycmVudFN0YXRlPXt0aGlzLl9nZXRDdXJyZW50U3RhdGUuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aGl0ZWxpc3RlZF9hY2NvdW50c1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgfHwgSW1tdXRhYmxlLkxpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IWFjY291bnQuZ2V0KFwid2hpdGVsaXN0ZWRfYWNjb3VudHNcIikgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJoYXMtZXJyb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbGVhc2Ugbm90ZSwgd2hpdGVsaXN0aW5nIGlzIG5vdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtpbmcgeWV0IGR1ZSB0byB1bnJlc29sdmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VuZCBpc3N1ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3twYWRkaW5nOiBcIjJyZW0gMFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e1wiYWNjb3VudC53aGl0ZWxpc3QuYWRkXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU9e2FjY291bnROYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjb3VudENoYW5nZWQ9e3RoaXMuX29uQWNjb3VudEZvdW5kLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9vbkFjY291bnRDaGFuZ2VkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnROYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXsyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWN0aW9uPXt0aGlzLl9vbkFkZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndoaXRlX2xpc3RlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25fbGFiZWw9XCJhY2NvdW50LnBlcm0uY29uZmlybV9hZGRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlYWhlYWQ9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWIgdGl0bGU9XCJhY2NvdW50LndoaXRlbGlzdC5ibGFja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3twYWRkaW5nQm90dG9tOiBcIjFyZW1cIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNtYWxsLTEyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudExpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eVRleHQ9XCJhY2NvdW50LndoaXRlbGlzdC5lbXB0eV9ibGFja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDdXJyZW50U3RhdGU9e3RoaXMuX2dldEN1cnJlbnRTdGF0ZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0PXthY2NvdW50LmdldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJibGFja2xpc3RlZF9hY2NvdW50c1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZzogXCIycmVtIDFyZW1cIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LndoaXRlbGlzdC5hZGRfYmxhY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZT17YWNjb3VudE5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5fb25BY2NvdW50Rm91bmQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uQWNjb3VudENoYW5nZWQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudE5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY3Rpb249e3RoaXMuX29uQWRkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYmxhY2tfbGlzdGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbl9sYWJlbD1cImFjY291bnQucGVybS5jb25maXJtX2FkZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZWFoZWFkPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC53aGl0ZWxpc3Qud2hpdGVfYnlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIxcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzbWFsbC0xMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlUZXh0PVwiYWNjb3VudC53aGl0ZWxpc3QuZW1wdHlfd2hpdGVfYnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdD17YWNjb3VudC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2hpdGVsaXN0aW5nX2FjY291bnRzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiIHRpdGxlPVwiYWNjb3VudC53aGl0ZWxpc3QuYmxhY2tfYnlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogXCIxcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzbWFsbC0xMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlUZXh0PVwiYWNjb3VudC53aGl0ZWxpc3QuZW1wdHlfYmxhY2tfYnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdD17YWNjb3VudC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYmxhY2tsaXN0aW5nX2FjY291bnRzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFjY291bnRXaGl0ZWxpc3Q7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHt3aXRoUm91dGVyfSBmcm9tIFwicmVhY3Qtcm91dGVyXCI7XHJcbmltcG9ydCBJbW11dGFibGUgZnJvbSBcImltbXV0YWJsZVwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBhY2NvdW50VXRpbHMgZnJvbSBcImNvbW1vbi9hY2NvdW50X3V0aWxzXCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZSwgRmV0Y2hDaGFpbk9iamVjdHN9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IHtMaW5rfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5pbXBvcnQgQXBwbGljYXRpb25BcGkgZnJvbSBcImFwaS9BcHBsaWNhdGlvbkFwaVwiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuL0FjY291bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XHJcbmltcG9ydCB7U3dpdGNoLCBUb29sdGlwLCBCdXR0b24sIFRhYnN9IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcclxuaW1wb3J0IEFjY291bnRTdG9yZSBmcm9tIFwic3RvcmVzL0FjY291bnRTdG9yZVwiO1xyXG5pbXBvcnQgV2l0bmVzc2VzIGZyb20gXCIuL1ZvdGluZy9XaXRuZXNzZXNcIjtcclxuaW1wb3J0IENvbW1pdHRlZSBmcm9tIFwiLi9Wb3RpbmcvQ29tbWl0dGVlXCI7XHJcbmltcG9ydCBXb3JrZXJzIGZyb20gXCIuL1ZvdGluZy9Xb3JrZXJzXCI7XHJcblxyXG5jb25zdCBXSVRORVNTRVNfS0VZID0gXCJ3aXRuZXNzZXNcIjtcclxuY29uc3QgQ09NTUlUVEVFX0tFWSA9IFwiY29tbWl0dGVlXCI7XHJcblxyXG5jbGFzcyBBY2NvdW50Vm90aW5nIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgaW5pdGlhbEJ1ZGdldDogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIGdsb2JhbE9iamVjdDogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIHByb3h5OiBDaGFpblR5cGVzLkNoYWluQWNjb3VudC5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBcIjIuMC4wXCJcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgY29uc3QgcHJveHlJZCA9IHByb3BzLnByb3h5LmdldChcImlkXCIpO1xyXG4gICAgICAgIGNvbnN0IHByb3h5TmFtZSA9IHByb3BzLnByb3h5LmdldChcIm5hbWVcIik7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudE5hbWUgPVxyXG4gICAgICAgICAgICB0eXBlb2YgcHJvcHMuYWNjb3VudCA9PT0gXCJzdHJpbmdcIlxyXG4gICAgICAgICAgICAgICAgPyBwcm9wcy5hY2NvdW50XHJcbiAgICAgICAgICAgICAgICA6IHByb3BzLmFjY291bnQuZ2V0KFwibmFtZVwiKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBwcm94eV9hY2NvdW50X2lkOiBwcm94eUlkID09PSBcIjEuMi41XCIgPyBcIlwiIDogcHJveHlJZCwgLy9cIjEuMi4xNlwiLFxyXG4gICAgICAgICAgICBwcmV2X3Byb3h5X2FjY291bnRfaWQ6IHByb3h5SWQgPT09IFwiMS4yLjVcIiA/IFwiXCIgOiBwcm94eUlkLFxyXG4gICAgICAgICAgICBjdXJyZW50X3Byb3h5X2lucHV0OiBwcm94eUlkID09PSBcIjEuMi41XCIgPyBcIlwiIDogcHJveHlOYW1lLFxyXG4gICAgICAgICAgICB3aXRuZXNzZXM6IG51bGwsXHJcbiAgICAgICAgICAgIGNvbW1pdHRlZTogbnVsbCxcclxuICAgICAgICAgICAgdm90ZV9pZHM6IEltbXV0YWJsZS5TZXQoKSxcclxuICAgICAgICAgICAgcHJveHlfdm90ZV9pZHM6IEltbXV0YWJsZS5TZXQoKSxcclxuICAgICAgICAgICAgbGFzdEJ1ZGdldE9iamVjdDogcHJvcHMuaW5pdGlhbEJ1ZGdldC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgYWxsX3dpdG5lc3NlczogSW1tdXRhYmxlLkxpc3QoKSxcclxuICAgICAgICAgICAgYWxsX2NvbW1pdHRlZTogSW1tdXRhYmxlLkxpc3QoKSxcclxuICAgICAgICAgICAgaGlkZUxlZ2FjeVByb3Bvc2FsczogdHJ1ZSxcclxuICAgICAgICAgICAgZmlsdGVyU2VhcmNoOiBcIlwiLFxyXG4gICAgICAgICAgICB0YWJzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJ3aXRuZXNzZXNcIixcclxuICAgICAgICAgICAgICAgICAgICBsaW5rOiBcIi9hY2NvdW50L1wiICsgYWNjb3VudE5hbWUgKyBcIi92b3Rpbmcvd2l0bmVzc2VzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlOiBcImV4cGxvcmVyLndpdG5lc3Nlcy50aXRsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFdpdG5lc3Nlc1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcImNvbW1pdHRlZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IFwiL2FjY291bnQvXCIgKyBhY2NvdW50TmFtZSArIFwiL3ZvdGluZy9jb21taXR0ZWVcIixcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGU6IFwiZXhwbG9yZXIuY29tbWl0dGVlX21lbWJlcnMudGl0bGVcIixcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBDb21taXR0ZWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJ3b3JrZXJzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbGluazogXCIvYWNjb3VudC9cIiArIGFjY291bnROYW1lICsgXCIvdm90aW5nL3dvcmtlcnNcIixcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGU6IFwiYWNjb3VudC52b3Rlcy53b3JrZXJzX3Nob3J0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogV29ya2Vyc1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5vblByb3h5QWNjb3VudEZvdW5kID0gdGhpcy5vblByb3h5QWNjb3VudEZvdW5kLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vblB1Ymxpc2ggPSB0aGlzLm9uUHVibGlzaC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub25SZXNldCA9IHRoaXMub25SZXNldC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX2dldFZvdGVPYmplY3RzID0gdGhpcy5fZ2V0Vm90ZU9iamVjdHMuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICAgICAgYWNjb3VudFV0aWxzLmdldEZpbmFsRmVlQXNzZXQodGhpcy5wcm9wcy5hY2NvdW50LCBcImFjY291bnRfdXBkYXRlXCIpO1xyXG4gICAgICAgIENoYWluU3RvcmUuZmV0Y2hBbGxXb3JrZXJzKCk7XHJcbiAgICAgICAgdGhpcy5nZXRCdWRnZXRPYmplY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZUFjY291bnREYXRhKHRoaXMucHJvcHMpO1xyXG4gICAgICAgIHRoaXMuX2dldFZvdGVPYmplY3RzKCk7XHJcbiAgICAgICAgdGhpcy5fZ2V0Vm90ZU9iamVjdHMoXCJjb21taXR0ZWVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5wLCBucykge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIG5wLmxvY2F0aW9uLnBhdGhuYW1lICE9PSB0aGlzLnByb3BzLmxvY2F0aW9uLnBhdGhuYW1lIHx8XHJcbiAgICAgICAgICAgIG5zLnByZXZfcHJveHlfYWNjb3VudF9pZCAhPT0gdGhpcy5zdGF0ZS5wcmV2X3Byb3h5X2FjY291bnRfaWQgfHxcclxuICAgICAgICAgICAgbnMuaGlkZUxlZ2FjeVByb3Bvc2FscyAhPT0gdGhpcy5zdGF0ZS5oaWRlTGVnYWN5UHJvcG9zYWxzIHx8XHJcbiAgICAgICAgICAgIG5zLnZvdGVfaWRzLnNpemUgIT09IHRoaXMuc3RhdGUudm90ZV9pZHMuc2l6ZSB8fFxyXG4gICAgICAgICAgICBucy5jdXJyZW50X3Byb3h5X2lucHV0ICE9PSB0aGlzLnN0YXRlLmN1cnJlbnRfcHJveHlfaW5wdXQgfHxcclxuICAgICAgICAgICAgbnMuZmlsdGVyU2VhcmNoICE9PSB0aGlzLnN0YXRlLmZpbHRlclNlYXJjaCB8fFxyXG4gICAgICAgICAgICBucy53aXRuZXNzZXMgIT09IHRoaXMuc3RhdGUud2l0bmVzc2VzIHx8XHJcbiAgICAgICAgICAgIG5zLmNvbW1pdHRlZSAhPT0gdGhpcy5zdGF0ZS5jb21taXR0ZWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobnApIHtcclxuICAgICAgICBpZiAobnAuYWNjb3VudCAhPT0gdGhpcy5wcm9wcy5hY2NvdW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3h5SWQgPSBucC5wcm94eS5nZXQoXCJpZFwiKTtcclxuICAgICAgICAgICAgbGV0IG5ld1N0YXRlID0ge1xyXG4gICAgICAgICAgICAgICAgcHJveHlfYWNjb3VudF9pZDogcHJveHlJZCA9PT0gXCIxLjIuNVwiID8gXCJcIiA6IHByb3h5SWRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cHJldl9wcm94eV9hY2NvdW50X2lkOiBuZXdTdGF0ZS5wcm94eV9hY2NvdW50X2lkfSk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQWNjb3VudERhdGEobnAsIG5ld1N0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZXRCdWRnZXRPYmplY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVBY2NvdW50RGF0YSh7YWNjb3VudH0sIHN0YXRlID0gdGhpcy5zdGF0ZSkge1xyXG4gICAgICAgIGxldCB7cHJveHlfYWNjb3VudF9pZH0gPSBzdGF0ZTtcclxuICAgICAgICBjb25zdCBwcm94eSA9IENoYWluU3RvcmUuZ2V0QWNjb3VudChwcm94eV9hY2NvdW50X2lkKTtcclxuICAgICAgICBsZXQgb3B0aW9ucyA9IGFjY291bnQuZ2V0KFwib3B0aW9uc1wiKTtcclxuICAgICAgICBsZXQgcHJveHlPcHRpb25zID0gcHJveHkgPyBwcm94eS5nZXQoXCJvcHRpb25zXCIpIDogbnVsbDtcclxuICAgICAgICAvLyBsZXQgcHJveHlfYWNjb3VudF9pZCA9IHByb3h5ID8gcHJveHkuZ2V0KFwiaWRcIikgOiBcIjEuMi41XCI7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRfcHJveHlfaW5wdXQgPSBwcm94eSA/IHByb3h5LmdldChcIm5hbWVcIikgOiBcIlwiO1xyXG4gICAgICAgIGlmIChwcm94eV9hY2NvdW50X2lkID09PSBcIjEuMi41XCIpIHtcclxuICAgICAgICAgICAgcHJveHlfYWNjb3VudF9pZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGN1cnJlbnRfcHJveHlfaW5wdXQgPSBcIlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHZvdGVzID0gb3B0aW9ucy5nZXQoXCJ2b3Rlc1wiKTtcclxuICAgICAgICBsZXQgdm90ZV9pZHMgPSB2b3Rlcy50b0FycmF5KCk7XHJcbiAgICAgICAgbGV0IHZpZHMgPSBJbW11dGFibGUuU2V0KHZvdGVfaWRzKTtcclxuICAgICAgICBDaGFpblN0b3JlLmdldE9iamVjdHNCeVZvdGVJZHModm90ZV9pZHMpO1xyXG5cclxuICAgICAgICBsZXQgcHJveHlQcm9taXNlID0gbnVsbCxcclxuICAgICAgICAgICAgcHJveHlfdmlkcyA9IEltbXV0YWJsZS5TZXQoW10pO1xyXG4gICAgICAgIGNvbnN0IGhhc1Byb3h5ID0gcHJveHlfYWNjb3VudF9pZCAhPT0gXCIxLjIuNVwiO1xyXG4gICAgICAgIGlmIChoYXNQcm94eSAmJiBwcm94eU9wdGlvbnMpIHtcclxuICAgICAgICAgICAgbGV0IHByb3h5X3ZvdGVzID0gcHJveHlPcHRpb25zLmdldChcInZvdGVzXCIpO1xyXG4gICAgICAgICAgICBsZXQgcHJveHlfdm90ZV9pZHMgPSBwcm94eV92b3Rlcy50b0FycmF5KCk7XHJcbiAgICAgICAgICAgIHByb3h5X3ZpZHMgPSBJbW11dGFibGUuU2V0KHByb3h5X3ZvdGVfaWRzKTtcclxuICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRPYmplY3RzQnlWb3RlSWRzKHByb3h5X3ZvdGVfaWRzKTtcclxuXHJcbiAgICAgICAgICAgIHByb3h5UHJvbWlzZSA9IEZldGNoQ2hhaW5PYmplY3RzKFxyXG4gICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRPYmplY3RCeVZvdGVJRCxcclxuICAgICAgICAgICAgICAgIHByb3h5X3ZvdGVfaWRzLFxyXG4gICAgICAgICAgICAgICAgMTAwMDBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgRmV0Y2hDaGFpbk9iamVjdHMoQ2hhaW5TdG9yZS5nZXRPYmplY3RCeVZvdGVJRCwgdm90ZV9pZHMsIDEwMDAwKSxcclxuICAgICAgICAgICAgcHJveHlQcm9taXNlXHJcbiAgICAgICAgXSkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBbdm90ZV9vYmpzLCBwcm94eV92b3RlX29ianNdID0gcmVzO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBzb3J0Vm90ZU9iamVjdHMob2JqZWN0cykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHdpdG5lc3NlcyA9IG5ldyBJbW11dGFibGUuTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbW1pdHRlZSA9IG5ldyBJbW11dGFibGUuTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHdvcmtlcnMgPSBuZXcgSW1tdXRhYmxlLlNldCgpO1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0cy5mb3JFYWNoKG9iaiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFjY291bnRfaWQgPSBvYmouZ2V0KFwiY29tbWl0dGVlX21lbWJlcl9hY2NvdW50XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY2NvdW50X2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdHRlZSA9IGNvbW1pdHRlZS5wdXNoKGFjY291bnRfaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKGFjY291bnRfaWQgPSBvYmouZ2V0KFwid29ya2VyX2FjY291bnRcIikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCBcIndvcmtlcjogXCIsIG9iaiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgd29ya2VycyA9IHdvcmtlcnMuYWRkKG9iai5nZXQoXCJpZFwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoYWNjb3VudF9pZCA9IG9iai5nZXQoXCJ3aXRuZXNzX2FjY291bnRcIikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdG5lc3NlcyA9IHdpdG5lc3Nlcy5wdXNoKGFjY291bnRfaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB7d2l0bmVzc2VzLCBjb21taXR0ZWUsIHdvcmtlcnN9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQge3dpdG5lc3NlcywgY29tbWl0dGVlLCB3b3JrZXJzfSA9IHNvcnRWb3RlT2JqZWN0cyh2b3RlX29ianMpO1xyXG4gICAgICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICAgICAgd2l0bmVzc2VzOiBwcm94eV93aXRuZXNzZXMsXHJcbiAgICAgICAgICAgICAgICBjb21taXR0ZWU6IHByb3h5X2NvbW1pdHRlZSxcclxuICAgICAgICAgICAgICAgIHdvcmtlcnM6IHByb3h5X3dvcmtlcnNcclxuICAgICAgICAgICAgfSA9IHNvcnRWb3RlT2JqZWN0cyhwcm94eV92b3RlX29ianMgfHwgW10pO1xyXG4gICAgICAgICAgICBsZXQgc3RhdGUgPSB7XHJcbiAgICAgICAgICAgICAgICBwcm94eV9hY2NvdW50X2lkLFxyXG4gICAgICAgICAgICAgICAgY3VycmVudF9wcm94eV9pbnB1dCxcclxuICAgICAgICAgICAgICAgIHdpdG5lc3Nlczogd2l0bmVzc2VzLFxyXG4gICAgICAgICAgICAgICAgY29tbWl0dGVlOiBjb21taXR0ZWUsXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJzOiB3b3JrZXJzLFxyXG4gICAgICAgICAgICAgICAgcHJveHlfd2l0bmVzc2VzOiBwcm94eV93aXRuZXNzZXMsXHJcbiAgICAgICAgICAgICAgICBwcm94eV9jb21taXR0ZWU6IHByb3h5X2NvbW1pdHRlZSxcclxuICAgICAgICAgICAgICAgIHByb3h5X3dvcmtlcnM6IHByb3h5X3dvcmtlcnMsXHJcbiAgICAgICAgICAgICAgICB2b3RlX2lkczogdmlkcyxcclxuICAgICAgICAgICAgICAgIHByb3h5X3ZvdGVfaWRzOiBwcm94eV92aWRzLFxyXG4gICAgICAgICAgICAgICAgcHJldl93aXRuZXNzZXM6IHdpdG5lc3NlcyxcclxuICAgICAgICAgICAgICAgIHByZXZfY29tbWl0dGVlOiBjb21taXR0ZWUsXHJcbiAgICAgICAgICAgICAgICBwcmV2X3dvcmtlcnM6IHdvcmtlcnMsXHJcbiAgICAgICAgICAgICAgICBwcmV2X3ZvdGVfaWRzOiB2aWRzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ2hhbmdlZChzID0gdGhpcy5zdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHMucHJveHlfYWNjb3VudF9pZCAhPT0gcy5wcmV2X3Byb3h5X2FjY291bnRfaWQgfHxcclxuICAgICAgICAgICAgcy53aXRuZXNzZXMgIT09IHMucHJldl93aXRuZXNzZXMgfHxcclxuICAgICAgICAgICAgcy5jb21taXR0ZWUgIT09IHMucHJldl9jb21taXR0ZWUgfHxcclxuICAgICAgICAgICAgIUltbXV0YWJsZS5pcyhzLnZvdGVfaWRzLCBzLnByZXZfdm90ZV9pZHMpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0Vm90ZU9iamVjdHModHlwZSA9IFdJVE5FU1NFU19LRVksIHZvdGVfaWRzKSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnN0YXRlW2BhbGxfJHt0eXBlfWBdO1xyXG4gICAgICAgIGNvbnN0IGlzV2l0bmVzcyA9IHR5cGUgPT09IFdJVE5FU1NFU19LRVk7XHJcbiAgICAgICAgbGV0IGxhc3RJZHg7XHJcbiAgICAgICAgaWYgKCF2b3RlX2lkcykge1xyXG4gICAgICAgICAgICB2b3RlX2lkcyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgYWN0aXZlID0gdGhpcy5wcm9wcy5nbG9iYWxPYmplY3RcclxuICAgICAgICAgICAgICAgIC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgaXNXaXRuZXNzID8gXCJhY3RpdmVfd2l0bmVzc2VzXCIgOiBcImFjdGl2ZV9jb21taXR0ZWVfbWVtYmVyc1wiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGEuc3BsaXQoXCIuXCIpWzJdLCAxMCkgLVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChiLnNwbGl0KFwiLlwiKVsyXSwgMTApXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBsYXN0QWN0aXZlID0gYWN0aXZlLmxhc3QoKSB8fCBgMS4ke2lzV2l0bmVzcyA/IFwiNlwiIDogXCI1XCJ9LjFgO1xyXG4gICAgICAgICAgICBsYXN0SWR4ID0gcGFyc2VJbnQobGFzdEFjdGl2ZS5zcGxpdChcIi5cIilbMl0sIDEwKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gbGFzdElkeCArIDEwOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZvdGVfaWRzLnB1c2goYDEuJHtpc1dpdG5lc3MgPyBcIjZcIiA6IFwiNVwifS4ke2l9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXN0SWR4ID0gcGFyc2VJbnQodm90ZV9pZHNbdm90ZV9pZHMubGVuZ3RoIC0gMV0uc3BsaXQoXCIuXCIpWzJdLCAxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEZldGNoQ2hhaW5PYmplY3RzKENoYWluU3RvcmUuZ2V0T2JqZWN0LCB2b3RlX2lkcywgNTAwMCwge30pLnRoZW4oXHJcbiAgICAgICAgICAgIHZvdGVfb2JqcyA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlW2BhbGxfJHt0eXBlfWBdID0gY3VycmVudC5jb25jYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgSW1tdXRhYmxlLkxpc3QoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVfb2Jqc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihhID0+ICEhYSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoYSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1dpdG5lc3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJ3aXRuZXNzX2FjY291bnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImNvbW1pdHRlZV9tZW1iZXJfYWNjb3VudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISF2b3RlX29ianNbdm90ZV9vYmpzLmxlbmd0aCAtIDFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgYXJlIG1vcmUgdmFsaWQgdm90ZSBvYmpzLCBmZXRjaCAxMCBtb3JlXHJcbiAgICAgICAgICAgICAgICAgICAgdm90ZV9pZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gbGFzdElkeCArIDExOyBpIDw9IGxhc3RJZHggKyAyMDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVfaWRzLnB1c2goYDEuJHtpc1dpdG5lc3MgPyBcIjZcIiA6IFwiNVwifS4ke2l9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRWb3RlT2JqZWN0cyh0eXBlLCB2b3RlX2lkcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVtb3ZlUHJveHkgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wdWJsaXNoKG51bGwpO1xyXG4gICAgfTtcclxuXHJcbiAgICBvblB1Ymxpc2goKSB7XHJcbiAgICAgICAgdGhpcy5wdWJsaXNoKHRoaXMuc3RhdGUucHJveHlfYWNjb3VudF9pZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGlzaChuZXdfcHJveHlfaWQpIHtcclxuICAgICAgICBsZXQgdXBkYXRlZF9hY2NvdW50ID0gdGhpcy5wcm9wcy5hY2NvdW50LnRvSlMoKTtcclxuICAgICAgICBsZXQgdXBkYXRlT2JqZWN0ID0ge2FjY291bnQ6IHVwZGF0ZWRfYWNjb3VudC5pZH07XHJcbiAgICAgICAgbGV0IG5ld19vcHRpb25zID0ge21lbW9fa2V5OiB1cGRhdGVkX2FjY291bnQub3B0aW9ucy5tZW1vX2tleX07XHJcbiAgICAgICAgLy8gdXBkYXRlZF9hY2NvdW50Lm5ld19vcHRpb25zID0gdXBkYXRlZF9hY2NvdW50Lm9wdGlvbnM7XHJcbiAgICAgICAgbmV3X29wdGlvbnMudm90aW5nX2FjY291bnQgPSBuZXdfcHJveHlfaWQgPyBuZXdfcHJveHlfaWQgOiBcIjEuMi41XCI7XHJcbiAgICAgICAgbmV3X29wdGlvbnMubnVtX3dpdG5lc3MgPSB0aGlzLnN0YXRlLndpdG5lc3Nlcy5zaXplO1xyXG4gICAgICAgIG5ld19vcHRpb25zLm51bV9jb21taXR0ZWUgPSB0aGlzLnN0YXRlLmNvbW1pdHRlZS5zaXplO1xyXG5cclxuICAgICAgICB1cGRhdGVPYmplY3QubmV3X29wdGlvbnMgPSBuZXdfb3B0aW9ucztcclxuICAgICAgICAvLyBTZXQgZmVlIGFzc2V0XHJcbiAgICAgICAgdXBkYXRlT2JqZWN0LmZlZSA9IHtcclxuICAgICAgICAgICAgYW1vdW50OiAwLFxyXG4gICAgICAgICAgICBhc3NldF9pZDogYWNjb3VudFV0aWxzLmdldEZpbmFsRmVlQXNzZXQoXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2FjY291bnQuaWQsXHJcbiAgICAgICAgICAgICAgICBcImFjY291bnRfdXBkYXRlXCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSB2b3RlcyBmb3IgZXhwaXJlZCB3b3JrZXJzXHJcbiAgICAgICAgbGV0IHt2b3RlX2lkc30gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGxldCB3b3JrZXJzID0gdGhpcy5fZ2V0V29ya2VyQXJyYXkoKTtcclxuICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlVm90ZShsaXN0LCB2b3RlKSB7XHJcbiAgICAgICAgICAgIGlmIChsaXN0LmluY2x1ZGVzKHZvdGUpKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0ID0gbGlzdC5kZWxldGUodm90ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3b3JrZXJzLmZvckVhY2god29ya2VyID0+IHtcclxuICAgICAgICAgICAgaWYgKHdvcmtlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ldyBEYXRlKHdvcmtlci5nZXQoXCJ3b3JrX2VuZF9kYXRlXCIpKSA8PSBub3cpIHtcclxuICAgICAgICAgICAgICAgICAgICB2b3RlX2lkcyA9IHJlbW92ZVZvdGUodm90ZV9pZHMsIHdvcmtlci5nZXQoXCJ2b3RlX2ZvclwiKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVEVNUCBSZW1vdmUgdm90ZV9hZ2FpbnN0IHNpbmNlIHRoZXkncmUgbm8gbG9uZ2VyIHVzZWRcclxuICAgICAgICAgICAgICAgIHZvdGVfaWRzID0gcmVtb3ZlVm90ZSh2b3RlX2lkcywgd29ya2VyLmdldChcInZvdGVfYWdhaW5zdFwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gU3VibWl0IHZvdGVzXHJcbiAgICAgICAgRmV0Y2hDaGFpbk9iamVjdHMoXHJcbiAgICAgICAgICAgIENoYWluU3RvcmUuZ2V0V2l0bmVzc0J5SWQsXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUud2l0bmVzc2VzLnRvQXJyYXkoKSxcclxuICAgICAgICAgICAgNDAwMFxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB3aXRuZXNzZXNfdm90ZV9pZHMgPSByZXMubWFwKG8gPT4gby5nZXQoXCJ2b3RlX2lkXCIpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHdpdG5lc3Nlc192b3RlX2lkcyksXHJcbiAgICAgICAgICAgICAgICAgICAgRmV0Y2hDaGFpbk9iamVjdHMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENoYWluU3RvcmUuZ2V0Q29tbWl0dGVlTWVtYmVyQnlJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5jb21taXR0ZWUudG9BcnJheSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA0MDAwXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVPYmplY3QubmV3X29wdGlvbnMudm90ZXMgPSByZXNbMF1cclxuICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHJlc1sxXS5tYXAobyA9PiBvLmdldChcInZvdGVfaWRcIikpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jb25jYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVfaWRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGlkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWQuc3BsaXQoXCI6XCIpWzBdID09PSBcIjJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9BcnJheSgpXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhX3NwbGl0ID0gYS5zcGxpdChcIjpcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiX3NwbGl0ID0gYi5zcGxpdChcIjpcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoYV9zcGxpdFsxXSwgMTApIC0gcGFyc2VJbnQoYl9zcGxpdFsxXSwgMTApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbkFwaS51cGRhdGVBY2NvdW50KHVwZGF0ZU9iamVjdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRXb3JrZXJBcnJheSgpIHtcclxuICAgICAgICBsZXQgd29ya2VyQXJyYXkgPSBbXTtcclxuXHJcbiAgICAgICAgQ2hhaW5TdG9yZS53b3JrZXJzLmZvckVhY2god29ya2VySWQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgd29ya2VyID0gQ2hhaW5TdG9yZS5nZXRPYmplY3Qod29ya2VySWQsIGZhbHNlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGlmICh3b3JrZXIpIHdvcmtlckFycmF5LnB1c2god29ya2VyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHdvcmtlckFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVzZXQoKSB7XHJcbiAgICAgICAgbGV0IHMgPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5yZWZzLnZvdGluZ19wcm94eSAmJlxyXG4gICAgICAgICAgICB0aGlzLnJlZnMudm90aW5nX3Byb3h5LnJlZnMuYm91bmRfY29tcG9uZW50XHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICB0aGlzLnJlZnMudm90aW5nX3Byb3h5LnJlZnMuYm91bmRfY29tcG9uZW50Lm9uUmVzZXRQcm94eSgpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWQ6IHMucHJldl9wcm94eV9hY2NvdW50X2lkLFxyXG4gICAgICAgICAgICAgICAgY3VycmVudF9wcm94eV9pbnB1dDogcy5wcmV2X3Byb3h5X2lucHV0LFxyXG4gICAgICAgICAgICAgICAgd2l0bmVzc2VzOiBzLnByZXZfd2l0bmVzc2VzLFxyXG4gICAgICAgICAgICAgICAgY29tbWl0dGVlOiBzLnByZXZfY29tbWl0dGVlLFxyXG4gICAgICAgICAgICAgICAgd29ya2Vyczogcy5wcmV2X3dvcmtlcnMsXHJcbiAgICAgICAgICAgICAgICB2b3RlX2lkczogcy5wcmV2X3ZvdGVfaWRzXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQWNjb3VudERhdGEodGhpcy5wcm9wcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQWRkSXRlbShjb2xsZWN0aW9uLCBpdGVtX2lkKSB7XHJcbiAgICAgICAgbGV0IHN0YXRlID0ge307XHJcbiAgICAgICAgc3RhdGVbY29sbGVjdGlvbl0gPSB0aGlzLnN0YXRlW2NvbGxlY3Rpb25dLnB1c2goaXRlbV9pZCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZW1vdmVJdGVtKGNvbGxlY3Rpb24sIGl0ZW1faWQpIHtcclxuICAgICAgICBsZXQgc3RhdGUgPSB7fTtcclxuICAgICAgICBzdGF0ZVtjb2xsZWN0aW9uXSA9IHRoaXMuc3RhdGVbY29sbGVjdGlvbl0uZmlsdGVyKGkgPT4gaSAhPT0gaXRlbV9pZCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2VWb3RlcyhhZGRWb3RlcywgcmVtb3ZlVm90ZXMpIHtcclxuICAgICAgICBsZXQgc3RhdGUgPSB7fTtcclxuICAgICAgICBzdGF0ZS52b3RlX2lkcyA9IHRoaXMuc3RhdGUudm90ZV9pZHM7XHJcbiAgICAgICAgaWYgKGFkZFZvdGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBhZGRWb3Rlcy5mb3JFYWNoKHZvdGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgc3RhdGUudm90ZV9pZHMgPSBzdGF0ZS52b3RlX2lkcy5hZGQodm90ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVtb3ZlVm90ZXMpIHtcclxuICAgICAgICAgICAgcmVtb3ZlVm90ZXMuZm9yRWFjaCh2b3RlID0+IHtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnZvdGVfaWRzID0gc3RhdGUudm90ZV9pZHMuZGVsZXRlKHZvdGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbGlkYXRlQWNjb3VudChjb2xsZWN0aW9uLCBhY2NvdW50KSB7XHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4gbnVsbDtcclxuICAgICAgICBpZiAoY29sbGVjdGlvbiA9PT0gV0lUTkVTU0VTX0tFWSkge1xyXG4gICAgICAgICAgICByZXR1cm4gRmV0Y2hDaGFpbk9iamVjdHMoXHJcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldFdpdG5lc3NCeUlkLFxyXG4gICAgICAgICAgICAgICAgW2FjY291bnQuZ2V0KFwiaWRcIildLFxyXG4gICAgICAgICAgICAgICAgMzAwMFxyXG4gICAgICAgICAgICApLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNbMF0gPyBudWxsIDogXCJOb3QgYSB3aXRuZXNzXCI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29sbGVjdGlvbiA9PT0gXCJjb21taXR0ZWVcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gRmV0Y2hDaGFpbk9iamVjdHMoXHJcbiAgICAgICAgICAgICAgICBDaGFpblN0b3JlLmdldENvbW1pdHRlZU1lbWJlckJ5SWQsXHJcbiAgICAgICAgICAgICAgICBbYWNjb3VudC5nZXQoXCJpZFwiKV0sXHJcbiAgICAgICAgICAgICAgICAzMDAwXHJcbiAgICAgICAgICAgICkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc1swXSA/IG51bGwgOiBcIk5vdCBhIGNvbW1pdHRlZSBtZW1iZXJcIjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUHJveHlDaGFuZ2UoY3VycmVudF9wcm94eV9pbnB1dCkge1xyXG4gICAgICAgIGxldCBwcm94eUFjY291bnQgPSBDaGFpblN0b3JlLmdldEFjY291bnQoY3VycmVudF9wcm94eV9pbnB1dCk7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhcHJveHlBY2NvdW50IHx8XHJcbiAgICAgICAgICAgIChwcm94eUFjY291bnQgJiZcclxuICAgICAgICAgICAgICAgIHByb3h5QWNjb3VudC5nZXQoXCJpZFwiKSAhPT0gdGhpcy5zdGF0ZS5wcm94eV9hY2NvdW50X2lkKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBwcm94eV93aXRuZXNzZXM6IEltbXV0YWJsZS5TZXQoKSxcclxuICAgICAgICAgICAgICAgIHByb3h5X2NvbW1pdHRlZTogSW1tdXRhYmxlLlNldCgpLFxyXG4gICAgICAgICAgICAgICAgcHJveHlfd29ya2VyczogSW1tdXRhYmxlLlNldCgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50X3Byb3h5X2lucHV0fSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Qcm94eUFjY291bnRGb3VuZChwcm94eV9hY2NvdW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJveHlfYWNjb3VudF9pZCA9IHByb3h5X2FjY291bnQgPyBwcm94eV9hY2NvdW50LmdldChcImlkXCIpIDogXCJcIjtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5wcm94eV9hY2NvdW50X2lkICE9PSBwcm94eV9hY2NvdW50X2lkKVxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBY2NvdW50RGF0YSh0aGlzLnByb3BzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsZWFyUHJveHkoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWQ6IFwiXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRCdWRnZXRPYmplY3QoKSB7XHJcbiAgICAgICAgbGV0IHtsYXN0QnVkZ2V0T2JqZWN0fSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IGJ1ZGdldE9iamVjdDtcclxuICAgICAgICBidWRnZXRPYmplY3QgPSBDaGFpblN0b3JlLmdldE9iamVjdChsYXN0QnVkZ2V0T2JqZWN0KTtcclxuICAgICAgICBsZXQgaWRJbmRleCA9IHBhcnNlSW50KGxhc3RCdWRnZXRPYmplY3Quc3BsaXQoXCIuXCIpWzJdLCAxMCk7XHJcbiAgICAgICAgaWYgKGJ1ZGdldE9iamVjdCkge1xyXG4gICAgICAgICAgICBsZXQgdGltZXN0YW1wID0gYnVkZ2V0T2JqZWN0LmdldChcInRpbWVcIik7XHJcbiAgICAgICAgICAgIGlmICghL1okLy50ZXN0KHRpbWVzdGFtcCkpIHtcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcCArPSBcIlpcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIC8qIFVzZSB0aGUgbGFzdCB2YWxpZCBidWRnZXQgb2JqZWN0IHRvIGVzdGltYXRlIHRoZSBjdXJyZW50IGJ1ZGdldCBvYmplY3QgaWQuXHJcbiAgICAgICAgICAgICAqKiBCdWRnZXQgb2JqZWN0cyBhcmUgY3JlYXRlZCBvbmNlIHBlciBob3VyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudElEID1cclxuICAgICAgICAgICAgICAgIGlkSW5kZXggK1xyXG4gICAgICAgICAgICAgICAgTWF0aC5mbG9vcihcclxuICAgICAgICAgICAgICAgICAgICAobm93IC0gbmV3IERhdGUodGltZXN0YW1wKS5nZXRUaW1lKCkpIC8gMTAwMCAvIDYwIC8gNjBcclxuICAgICAgICAgICAgICAgICkgLVxyXG4gICAgICAgICAgICAgICAgMTtcclxuICAgICAgICAgICAgaWYgKGlkSW5kZXggPj0gY3VycmVudElEKSByZXR1cm47XHJcbiAgICAgICAgICAgIGxldCBuZXdJRCA9IFwiMi4xMy5cIiArIE1hdGgubWF4KGlkSW5kZXgsIGN1cnJlbnRJRCk7XHJcbiAgICAgICAgICAgIGxldCBuZXdJREludCA9IHBhcnNlSW50KG5ld0lELnNwbGl0KFwiLlwiKVsyXSwgMTApO1xyXG4gICAgICAgICAgICBGZXRjaENoYWluT2JqZWN0cyhcclxuICAgICAgICAgICAgICAgIENoYWluU3RvcmUuZ2V0T2JqZWN0LFxyXG4gICAgICAgICAgICAgICAgW25ld0lEXSxcclxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIHt9XHJcbiAgICAgICAgICAgICkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IFtsYm9dID0gcmVzO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxibyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBvYmplY3QgZG9lcyBub3QgZXhpc3QsIHRoZSBpZCB3YXMgdG9vIGhpZ2hcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7bGFzdEJ1ZGdldE9iamVjdDogYDIuMTMuJHtuZXdJREludCAtIDF9YH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0QnVkZ2V0T2JqZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3NTdG9yZS5zZXRMYXN0QnVkZ2V0T2JqZWN0KG5ld0lEKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bGFzdEJ1ZGdldE9iamVjdDogbmV3SUR9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGhlIG9iamVjdCBkb2VzIG5vdCBleGlzdCwgZGVjcmVtZW50IHRoZSBJRFxyXG4gICAgICAgICAgICBsZXQgbmV3SUQgPSBgMi4xMy4ke2lkSW5kZXggLSAxfWA7XHJcbiAgICAgICAgICAgIEZldGNoQ2hhaW5PYmplY3RzKFxyXG4gICAgICAgICAgICAgICAgQ2hhaW5TdG9yZS5nZXRPYmplY3QsXHJcbiAgICAgICAgICAgICAgICBbbmV3SURdLFxyXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAge31cclxuICAgICAgICAgICAgKS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgW2xib10gPSByZXM7XHJcbiAgICAgICAgICAgICAgICBpZiAobGJvID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG9iamVjdCBkb2VzIG5vdCBleGlzdCwgdGhlIGlkIHdhcyB0b28gaGlnaFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtsYXN0QnVkZ2V0T2JqZWN0OiBgMi4xMy4ke2lkSW5kZXggLSAyfWB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEJ1ZGdldE9iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIFNldHRpbmdzU3RvcmUuc2V0TGFzdEJ1ZGdldE9iamVjdChuZXdJRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bGFzdEJ1ZGdldE9iamVjdDogbmV3SUR9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUZpbHRlckNoYW5nZShlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGZpbHRlclNlYXJjaDogZS50YXJnZXQudmFsdWUgfHwgXCJcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgIHByZXZfcHJveHlfYWNjb3VudF9pZCxcclxuICAgICAgICAgICAgaGlkZUxlZ2FjeVByb3Bvc2FscyxcclxuICAgICAgICAgICAgZmlsdGVyU2VhcmNoLFxyXG4gICAgICAgICAgICBhbGxfd2l0bmVzc2VzLFxyXG4gICAgICAgICAgICBwcm94eV93aXRuZXNzZXMsXHJcbiAgICAgICAgICAgIHdpdG5lc3NlcyxcclxuICAgICAgICAgICAgYWxsX2NvbW1pdHRlZSxcclxuICAgICAgICAgICAgcHJveHlfY29tbWl0dGVlLFxyXG4gICAgICAgICAgICBjb21taXR0ZWUsXHJcbiAgICAgICAgICAgIHZvdGVfaWRzLFxyXG4gICAgICAgICAgICBwcm94eV92b3RlX2lkcyxcclxuICAgICAgICAgICAgcHJveHlfYWNjb3VudF9pZFxyXG4gICAgICAgIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGNvbnN0IGFjY291bnRIYXNQcm94eSA9ICEhcHJldl9wcm94eV9hY2NvdW50X2lkO1xyXG4gICAgICAgIGNvbnN0IHByZWZlcnJlZFVuaXQgPSB0aGlzLnByb3BzLnNldHRpbmdzLmdldChcInVuaXRcIikgfHwgXCIxLjMuMFwiO1xyXG4gICAgICAgIGNvbnN0IGhhc1Byb3h5ID0gISFwcm94eV9hY2NvdW50X2lkOyAvLyB0aGlzLnByb3BzLmFjY291bnQuZ2V0SW4oW1wib3B0aW9uc1wiLCBcInZvdGluZ19hY2NvdW50XCJdKSAhPT0gXCIxLjIuNVwiO1xyXG4gICAgICAgIGNvbnN0IHtnbG9iYWxPYmplY3QsIGFjY291bnR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCB7dG90YWxCdWRnZXQsIHdvcmtlckJ1ZGdldH0gPSB0aGlzLl9nZXRCdWRnZXRzKGdsb2JhbE9iamVjdCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGlvbkJ1dHRvbnMgPSB0aGlzLl9nZXRBY3Rpb25CdXR0b25zKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHByb3h5SW5wdXQgPSB0aGlzLl9nZXRQcm94eUlucHV0KGFjY291bnRIYXNQcm94eSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGhpZGVMZWdhY3kgPSB0aGlzLl9nZXRIaWRlTGVnYWN5T3B0aW9ucygpO1xyXG5cclxuICAgICAgICBjb25zdCBvbkZpbHRlckNoYW5nZSA9IHRoaXMuaGFuZGxlRmlsdGVyQ2hhbmdlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgY29uc3QgdmFsaWRhdGVBY2NvdW50SGFuZGxlciA9IHRoaXMudmFsaWRhdGVBY2NvdW50LmJpbmQoXHJcbiAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgIFdJVE5FU1NFU19LRVlcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IGFkZFdpdG5lc3NIYW5kbGVyID0gdGhpcy5vbkFkZEl0ZW0uYmluZCh0aGlzLCBXSVRORVNTRVNfS0VZKTtcclxuICAgICAgICBjb25zdCByZW1vdmVXaXRuZXNzSGFuZGxlciA9IHRoaXMub25SZW1vdmVJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgIFdJVE5FU1NFU19LRVlcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IG9uQ2hhbmdlVm90ZXMgPSB0aGlzLm9uQ2hhbmdlVm90ZXMuYmluZCh0aGlzKTtcclxuICAgICAgICBjb25zdCBnZXRXb3JrZXJBcnJheSA9IHRoaXMuX2dldFdvcmtlckFycmF5LmJpbmQodGhpcyk7XHJcbiAgICAgICAgY29uc3QgYWRkQ29tbWl0dGVlSGFuZGxlciA9IHRoaXMub25BZGRJdGVtLmJpbmQodGhpcywgQ09NTUlUVEVFX0tFWSk7XHJcbiAgICAgICAgY29uc3QgcmVtb3ZlQ29tbWl0dGVlSGFuZGxlciA9IHRoaXMub25SZW1vdmVJdGVtLmJpbmQoXHJcbiAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgIENPTU1JVFRFRV9LRVlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBvblRhYkNoYW5nZSA9IHZhbHVlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2godmFsdWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWFpbi1jb250ZW50IGdyaWQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ2b3RpbmdcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZGRpbmdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInZvdGluZy50aXRsZVwiIGNvbXBvbmVudD1cImgxXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwidm90aW5nLmRlc2NyaXB0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb3h5LXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3Byb3h5SW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWN0aW9uQnV0dG9uc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxUYWJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUtleT17dGhpcy5wcm9wcy5sb2NhdGlvbi5wYXRobmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJ0YWJsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25UYWJDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS50YWJzLm1hcCh0YWIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgVGFiQ29udGVudCA9IHRhYi5jb250ZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYnMuVGFiUGFuZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3RhYi5saW5rfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWI9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZSh0YWIudHJhbnNsYXRlKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJDb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxfd2l0bmVzc2VzPXthbGxfd2l0bmVzc2VzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHlfd2l0bmVzc2VzPXtwcm94eV93aXRuZXNzZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRuZXNzZXM9e3dpdG5lc3Nlc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWQ9e3Byb3h5X2FjY291bnRfaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkZpbHRlckNoYW5nZT17b25GaWx0ZXJDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUFjY291bnRIYW5kbGVyPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUFjY291bnRIYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRXaXRuZXNzSGFuZGxlcj17YWRkV2l0bmVzc0hhbmRsZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVXaXRuZXNzSGFuZGxlcj17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlV2l0bmVzc0hhbmRsZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1Byb3h5PXtoYXNQcm94eX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbE9iamVjdD17Z2xvYmFsT2JqZWN0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyU2VhcmNoPXtmaWx0ZXJTZWFyY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsX2NvbW1pdHRlZT17YWxsX2NvbW1pdHRlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5X2NvbW1pdHRlZT17cHJveHlfY29tbWl0dGVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0dGVlPXtjb21taXR0ZWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRDb21taXR0ZWVIYW5kbGVyPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRDb21taXR0ZWVIYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDb21taXR0ZWVIYW5kbGVyPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDb21taXR0ZWVIYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b3RlX2lkcz17dm90ZV9pZHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm94eV92b3RlX2lkcz17cHJveHlfdm90ZV9pZHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlTGVnYWN5PXtoaWRlTGVnYWN5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkVW5pdD17cHJlZmVycmVkVW5pdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQnVkZ2V0PXt0b3RhbEJ1ZGdldH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlckJ1ZGdldD17d29ya2VyQnVkZ2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUxlZ2FjeVByb3Bvc2Fscz17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUxlZ2FjeVByb3Bvc2Fsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VWb3Rlcz17b25DaGFuZ2VWb3Rlc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFdvcmtlckFycmF5PXtnZXRXb3JrZXJBcnJheX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdTZXR0aW5ncz17dGhpcy5wcm9wcy52aWV3U2V0dGluZ3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0QnVkZ2V0cyhnbG9iYWxPYmplY3QpIHtcclxuICAgICAgICBsZXQgYnVkZ2V0T2JqZWN0O1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmxhc3RCdWRnZXRPYmplY3QpIHtcclxuICAgICAgICAgICAgYnVkZ2V0T2JqZWN0ID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QodGhpcy5zdGF0ZS5sYXN0QnVkZ2V0T2JqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRvdGFsQnVkZ2V0ID0gMDtcclxuICAgICAgICBsZXQgd29ya2VyQnVkZ2V0ID0gZ2xvYmFsT2JqZWN0XHJcbiAgICAgICAgICAgID8gcGFyc2VJbnQoXHJcbiAgICAgICAgICAgICAgICAgIGdsb2JhbE9iamVjdC5nZXRJbihbXCJwYXJhbWV0ZXJzXCIsIFwid29ya2VyX2J1ZGdldF9wZXJfZGF5XCJdKSxcclxuICAgICAgICAgICAgICAgICAgMTBcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIDogMDtcclxuICAgICAgICBpZiAoYnVkZ2V0T2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHdvcmtlckJ1ZGdldCA9IE1hdGgubWluKFxyXG4gICAgICAgICAgICAgICAgMjQgKiBidWRnZXRPYmplY3QuZ2V0SW4oW1wicmVjb3JkXCIsIFwid29ya2VyX2J1ZGdldFwiXSksXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJCdWRnZXRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdG90YWxCdWRnZXQgPSBNYXRoLm1pbihcclxuICAgICAgICAgICAgICAgIDI0ICogYnVkZ2V0T2JqZWN0LmdldEluKFtcInJlY29yZFwiLCBcIndvcmtlcl9idWRnZXRcIl0pLFxyXG4gICAgICAgICAgICAgICAgd29ya2VyQnVkZ2V0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7dG90YWxCdWRnZXQsIHdvcmtlckJ1ZGdldH07XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFByb3h5SW5wdXQoYWNjb3VudEhhc1Byb3h5KSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiYWNjb3VudC52b3Rlcy5wcm94eV9zaG9ydFwiXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiNTAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiAyNTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMuc3RhdGUuY3VycmVudF9wcm94eV9pbnB1dH1cclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZT17dGhpcy5zdGF0ZS5jdXJyZW50X3Byb3h5X2lucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uUHJveHlDaGFuZ2UuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICBvbkFjY291bnRDaGFuZ2VkPXt0aGlzLm9uUHJveHlBY2NvdW50Rm91bmR9XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2NvdW50LnZvdGVzLnNldF9wcm94eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnN0YXRlLnByb3h5X2FjY291bnRfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJ0b29sdGlwLnByb3h5X3NlYXJjaFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwidG9vbHRpcC5wcm94eV9yZW1vdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZUltYWdlXHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiA1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89XCIvaGVscC92b3RpbmdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInF1ZXN0aW9uLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5xdWVzdGlvbl9jaXJjbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCIxeFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9BY2NvdW50U2VsZWN0b3I+XHJcbiAgICAgICAgICAgICAgICB7YWNjb3VudEhhc1Byb3h5ICYmIChcclxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luTGVmdDogXCIxcmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uUmVtb3ZlUHJveHl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs5fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnJlbW92ZV9wcm94eVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldEhpZGVMZWdhY3lPcHRpb25zKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlubGluZS1ibG9ja1wiXHJcbiAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbkxlZnQ6IFwiMC41ZW1cIn19XHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVMZWdhY3lQcm9wb3NhbHM6ICF0aGlzLnN0YXRlLmhpZGVMZWdhY3lQcm9wb3NhbHNcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInRvb2x0aXAubGVnYWN5X2V4cGxhbmF0aW9uXCIpfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxTd2l0Y2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5SaWdodDogNiwgbWFyZ2luVG9wOiAtM319XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMuc3RhdGUuaGlkZUxlZ2FjeVByb3Bvc2Fsc31cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuaGlkZV9sZWdhY3lfcHJvcG9zYWxzXCIgLz5cclxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0QWN0aW9uQnV0dG9ucygpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudm90ZXMuY2FzdF92b3Rlc190aHJvdWdoX29uZV9vcGVyYXRpb25cIlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIG1vdXNlRW50ZXJEZWxheT17MC41fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IFwicmlnaHRcIlxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25QdWJsaXNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17NH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLmlzQ2hhbmdlZCgpID8gdHJ1ZSA6IHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMucHVibGlzaFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbkxlZnQ6IFwiOHB4XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uUmVzZXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXs4fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5wZXJtLnJlc2V0XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5BY2NvdW50Vm90aW5nID0gQmluZFRvQ2hhaW5TdGF0ZShBY2NvdW50Vm90aW5nKTtcclxuXHJcbmNvbnN0IEZpbGxNaXNzaW5nUHJvcHMgPSBwcm9wcyA9PiB7XHJcbiAgICBsZXQgbWlzc2luZ1Byb3BzID0ge307XHJcbiAgICBpZiAoIXByb3BzLmluaXRpYWxCdWRnZXQpIHtcclxuICAgICAgICBtaXNzaW5nUHJvcHMuaW5pdGlhbEJ1ZGdldCA9IFNldHRpbmdzU3RvcmUuZ2V0TGFzdEJ1ZGdldE9iamVjdCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwcm9wcy5hY2NvdW50KSB7XHJcbiAgICAgICAgLy8gZG9uJ3QgdXNlIHN0b3JlIGxpc3RlbmVyLCB1c2VyIG1pZ2h0IGJlIGxvb2tpbmcgYXQgZGlmZmVyZW50IGFjY291bnQuIHRoaXMgaXMgZm9yIHJlYXNvbmFibGUgZGVmYXVsdFxyXG4gICAgICAgIGxldCBhY2NvdW50TmFtZSA9XHJcbiAgICAgICAgICAgIEFjY291bnRTdG9yZS5nZXRTdGF0ZSgpLmN1cnJlbnRBY2NvdW50IHx8XHJcbiAgICAgICAgICAgIEFjY291bnRTdG9yZS5nZXRTdGF0ZSgpLnBhc3N3b3JkQWNjb3VudDtcclxuICAgICAgICBhY2NvdW50TmFtZSA9XHJcbiAgICAgICAgICAgIGFjY291bnROYW1lICYmIGFjY291bnROYW1lICE9PSBcIm51bGxcIlxyXG4gICAgICAgICAgICAgICAgPyBhY2NvdW50TmFtZVxyXG4gICAgICAgICAgICAgICAgOiBcImNvbW1pdHRlZS1hY2NvdW50XCI7XHJcbiAgICAgICAgbWlzc2luZ1Byb3BzLmFjY291bnQgPSBhY2NvdW50TmFtZTtcclxuICAgIH1cclxuICAgIGlmICghcHJvcHMucHJveHkpIHtcclxuICAgICAgICBjb25zdCBhY2NvdW50ID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KHByb3BzLmFjY291bnQpO1xyXG4gICAgICAgIGxldCBwcm94eSA9IG51bGw7XHJcbiAgICAgICAgaWYgKGFjY291bnQpIHtcclxuICAgICAgICAgICAgcHJveHkgPSBhY2NvdW50LmdldEluKFtcIm9wdGlvbnNcIiwgXCJ2b3RpbmdfYWNjb3VudFwiXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJBY2NvdW50IG11c3QgYmUgbG9hZGVkXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1pc3NpbmdQcm9wcy5wcm94eSA9IHByb3h5O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiA8QWNjb3VudFZvdGluZyB7Li4ucHJvcHN9IHsuLi5taXNzaW5nUHJvcHN9IC8+O1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcihGaWxsTWlzc2luZ1Byb3BzKTtcclxuIiwiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBWb3RpbmdBY2NvdW50c0xpc3QgZnJvbSBcIi4uL1ZvdGluZ0FjY291bnRzTGlzdFwiO1xyXG5pbXBvcnQgY25hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XHJcbmltcG9ydCB7SW5wdXQsIEljb24gYXMgQW50SWNvbiwgQnV0dG9ufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcbmltcG9ydCBKb2luV2l0bmVzc2VzTW9kYWwgZnJvbSBcIi4uLy4uL01vZGFsL0pvaW5XaXRuZXNzZXNNb2RhbFwiO1xyXG5pbXBvcnQgU2VhcmNoSW5wdXQgZnJvbSBcIi4uLy4uL1V0aWxpdHkvU2VhcmNoSW5wdXRcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpdG5lc3NlcyBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBzaG93Q3JlYXRlV2l0bmVzc01vZGFsOiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHNob3dXaXRuZXNzTW9kYWwgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgc2hvd0NyZWF0ZVdpdG5lc3NNb2RhbDogIXRoaXMuc3RhdGUuc2hvd0NyZWF0ZVdpdG5lc3NNb2RhbFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBvbkZpbHRlckNoYW5nZSA9IHRoaXMucHJvcHMub25GaWx0ZXJDaGFuZ2U7XHJcbiAgICAgICAgY29uc3QgdmFsaWRhdGVBY2NvdW50SGFuZGxlciA9IHRoaXMucHJvcHMudmFsaWRhdGVBY2NvdW50SGFuZGxlcjtcclxuICAgICAgICBjb25zdCBhZGRXaXRuZXNzSGFuZGxlciA9IHRoaXMucHJvcHMuYWRkV2l0bmVzc0hhbmRsZXI7XHJcbiAgICAgICAgY29uc3QgcmVtb3ZlV2l0bmVzc0hhbmRsZXIgPSB0aGlzLnByb3BzLnJlbW92ZVdpdG5lc3NIYW5kbGVyO1xyXG5cclxuICAgICAgICBjb25zdCB7c2hvd0NyZWF0ZVdpdG5lc3NNb2RhbH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgYWxsX3dpdG5lc3NlcyxcclxuICAgICAgICAgICAgcHJveHlfd2l0bmVzc2VzLFxyXG4gICAgICAgICAgICB3aXRuZXNzZXMsXHJcbiAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWQsXHJcbiAgICAgICAgICAgIGhhc1Byb3h5LFxyXG4gICAgICAgICAgICBnbG9iYWxPYmplY3QsXHJcbiAgICAgICAgICAgIGZpbHRlclNlYXJjaCxcclxuICAgICAgICAgICAgYWNjb3VudFxyXG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y25hbWVzKFwiY29udGVudC1ibG9ja1wiKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXItc2VsZWN0b3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Zsb2F0OiBcInJpZ2h0XCJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17c2hvd1dpdG5lc3NNb2RhbH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5qb2luX3dpdG5lc3Nlc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlbGVjdG9yIGlubGluZS1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlYXJjaElucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleHBsb3Jlci53aXRuZXNzZXMuZmlsdGVyX2J5X25hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2ZpbHRlclNlYXJjaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25GaWx0ZXJDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8Vm90aW5nQWNjb3VudHNMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ3aXRuZXNzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnZvdGVzLmFkZF93aXRuZXNzX2xhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM9e2FsbF93aXRuZXNzZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQWNjb3VudD17dmFsaWRhdGVBY2NvdW50SGFuZGxlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25BZGRJdGVtPXthZGRXaXRuZXNzSGFuZGxlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25SZW1vdmVJdGVtPXtyZW1vdmVXaXRuZXNzSGFuZGxlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9e2hhc1Byb3h5ID8gLTEgOiAyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWQ9e2hhc1Byb3h5ID8gcHJveHlfd2l0bmVzc2VzIDogd2l0bmVzc2VzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU9e2dsb2JhbE9iamVjdC5nZXQoXCJhY3RpdmVfd2l0bmVzc2VzXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm94eT17cHJveHlfYWNjb3VudF9pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyU2VhcmNoPXtmaWx0ZXJTZWFyY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPEpvaW5XaXRuZXNzZXNNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGU9e3Nob3dDcmVhdGVXaXRuZXNzTW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICBoaWRlTW9kYWw9e3Nob3dXaXRuZXNzTW9kYWx9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEZvcm1hdHRlZEFzc2V0IGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZEFzc2V0XCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcclxuaW1wb3J0IExpbmtUb0FjY291bnRCeUlkIGZyb20gXCIuLi9VdGlsaXR5L0xpbmtUb0FjY291bnRCeUlkXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5pbXBvcnQgUGFnaW5hdGVkTGlzdCBmcm9tIFwiY29tcG9uZW50cy9VdGlsaXR5L1BhZ2luYXRlZExpc3RcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuXHJcbmZ1bmN0aW9uIGdldFdpdG5lc3NPckNvbW1pdHRlZSh0eXBlLCBhY2N0KSB7XHJcbiAgICBsZXQgdXJsID0gXCJcIixcclxuICAgICAgICB2b3RlcyA9IDAsXHJcbiAgICAgICAgYWNjb3VudDtcclxuICAgIGlmICh0eXBlID09PSBcIndpdG5lc3NcIikge1xyXG4gICAgICAgIGFjY291bnQgPSBDaGFpblN0b3JlLmdldFdpdG5lc3NCeUlkKGFjY3QuZ2V0KFwiaWRcIikpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcImNvbW1pdHRlZVwiKSB7XHJcbiAgICAgICAgYWNjb3VudCA9IENoYWluU3RvcmUuZ2V0Q29tbWl0dGVlTWVtYmVyQnlJZChhY2N0LmdldChcImlkXCIpKTtcclxuICAgIH1cclxuXHJcbiAgICB1cmwgPSBhY2NvdW50ID8gYWNjb3VudC5nZXQoXCJ1cmxcIikgOiB1cmw7XHJcbiAgICB1cmwgPSB1dGlscy5zYW5pdGl6ZSh1cmwpO1xyXG4gICAgdm90ZXMgPSBhY2NvdW50ID8gYWNjb3VudC5nZXQoXCJ0b3RhbF92b3Rlc1wiKSA6IHZvdGVzO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB1cmwsXHJcbiAgICAgICAgdm90ZXMsXHJcbiAgICAgICAgaWQ6IGFjY291bnQuZ2V0KFwiaWRcIilcclxuICAgIH07XHJcbn1cclxuXHJcbmNvbnN0IGFjY291bnRJdGVtUm93ID0gcHJvcHMgPT4ge1xyXG4gICAgbGV0IHthY2NvdW50LCB0eXBlLCBhY3Rpb24sIGlzQWN0aXZlLCBpZHgsIHByb3h5LCBvbkFjdGlvbiwga2V5fSA9IHByb3BzO1xyXG4gICAgbGV0IGl0ZW1faWQgPSBhY2NvdW50LmdldChcImlkXCIpO1xyXG5cclxuICAgIGxldCB7dXJsLCB2b3Rlc30gPSBnZXRXaXRuZXNzT3JDb21taXR0ZWUodHlwZSwgYWNjb3VudCk7XHJcblxyXG4gICAgbGV0IGxpbmsgPVxyXG4gICAgICAgIHVybCAmJiB1cmwubGVuZ3RoID4gMCAmJiB1cmwuaW5kZXhPZihcImh0dHBcIikgPT09IC0xXHJcbiAgICAgICAgICAgID8gXCJodHRwOi8vXCIgKyB1cmxcclxuICAgICAgICAgICAgOiB1cmw7XHJcbiAgICBjb25zdCBpc1N1cHBvcnRlZCA9IGFjdGlvbiA9PT0gXCJyZW1vdmVcIjtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGtleSxcclxuICAgICAgICBudW06IGlkeCArIDEsXHJcbiAgICAgICAgbmFtZTogYWNjb3VudC5nZXQoXCJpZFwiKSxcclxuICAgICAgICBhYm91dDogbGluayAmJiBsaW5rLmluZGV4T2YoXCIuXCIpICE9PSAtMSA/IGxpbmsgOiBudWxsLFxyXG4gICAgICAgIHZvdGVzLFxyXG4gICAgICAgIHRpdGxlOiBgYWNjb3VudC52b3Rlcy4ke2lzQWN0aXZlID8gXCJhY3RpdmVfc2hvcnRcIiA6IFwiaW5hY3RpdmVcIn1gLFxyXG4gICAgICAgIHN1cHBvcnRlZDoge1xyXG4gICAgICAgICAgICB0cmFuc2xhdGU6IGBzZXR0aW5ncy4ke2lzU3VwcG9ydGVkID8gXCJ5ZXNcIiA6IFwibm9cIn1gLFxyXG4gICAgICAgICAgICBwcm94eSxcclxuICAgICAgICAgICAgaXRlbV9pZCxcclxuICAgICAgICAgICAgb25BY3Rpb25cclxuICAgICAgICB9LFxyXG4gICAgICAgIHRvZ2dsZToge3Byb3h5LCBpc1N1cHBvcnRlZCwgaXRlbV9pZCwgb25BY3Rpb259XHJcbiAgICB9O1xyXG59O1xyXG5cclxuY2xhc3MgVm90aW5nQWNjb3VudHNMaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgaXRlbXM6IENoYWluVHlwZXMuQ2hhaW5PYmplY3RzTGlzdCxcclxuICAgICAgICBvbkFkZEl0ZW06IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXHJcbiAgICAgICAgb25SZW1vdmVJdGVtOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgICAgIHZhbGlkYXRlQWNjb3VudDogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgICAgICAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCwgLy8gYSB0cmFuc2xhdGlvbiBrZXkgZm9yIHRoZSBsYWJlbCxcclxuICAgICAgICBwbGFjZWhvbGRlcjogUHJvcFR5cGVzLnN0cmluZywgLy8gdGhlIHBsYWNlaG9sZGVyIHRleHQgdG8gYmUgZGlzcGxheWVkIHdoZW4gdGhlcmUgaXMgbm8gdXNlcl9pbnB1dFxyXG4gICAgICAgIHRhYkluZGV4OiBQcm9wVHlwZXMubnVtYmVyLCAvLyB0YWJpbmRleCBwcm9wZXJ0eSB0byBiZSBwYXNzZWQgdG8gaW5wdXQgdGFnXHJcbiAgICAgICAgYWN0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgICAgIGZpbHRlclNlYXJjaDogUHJvcFR5cGVzLnN0cmluZ1xyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIGFjdGlvbjogXCJyZW1vdmVcIixcclxuICAgICAgICBmaWx0ZXJTZWFyY2g6IG51bGxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRfaXRlbTogbnVsbCxcclxuICAgICAgICAgICAgaXRlbV9uYW1lX2lucHV0OiBcIlwiLFxyXG4gICAgICAgICAgICBlcnJvcjogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vbkl0ZW1DaGFuZ2UgPSB0aGlzLm9uSXRlbUNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub25JdGVtQWNjb3VudENoYW5nZSA9IHRoaXMub25JdGVtQWNjb3VudENoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub25BZGRJdGVtID0gdGhpcy5vbkFkZEl0ZW0uYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkl0ZW1DaGFuZ2UoaXRlbV9uYW1lX2lucHV0KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXRlbV9uYW1lX2lucHV0fSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25JdGVtQWNjb3VudENoYW5nZShzZWxlY3RlZF9pdGVtKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRfaXRlbSwgZXJyb3I6IG51bGx9KTtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRfaXRlbSAmJiB0aGlzLnByb3BzLnZhbGlkYXRlQWNjb3VudCkge1xyXG4gICAgICAgICAgICBsZXQgcmVzID0gdGhpcy5wcm9wcy52YWxpZGF0ZUFjY291bnQoc2VsZWN0ZWRfaXRlbSk7XHJcbiAgICAgICAgICAgIGlmIChyZXMgPT09IG51bGwpIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiByZXMgPT09IFwic3RyaW5nXCIpIHRoaXMuc2V0U3RhdGUoe2Vycm9yOiByZXN9KTtcclxuICAgICAgICAgICAgZWxzZSByZXMudGhlbihlcnJvciA9PiB0aGlzLnNldFN0YXRlKHtlcnJvcjogZXJyb3J9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQWRkSXRlbShpdGVtKSB7XHJcbiAgICAgICAgaWYgKCFpdGVtKSByZXR1cm47XHJcbiAgICAgICAgbGV0IG5leHRfc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkX2l0ZW06IG51bGwsXHJcbiAgICAgICAgICAgIGl0ZW1fbmFtZV9pbnB1dDogXCJcIixcclxuICAgICAgICAgICAgZXJyb3I6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUobmV4dF9zdGF0ZSk7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5vbkFkZEl0ZW0oaXRlbS5nZXQoXCJpZFwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SGVhZGVyKCkge1xyXG4gICAgICAgIGxldCBjdyA9IFtcIjEwJVwiLCBcIjIwJVwiLCBcIjQwJVwiLCBcIjIwJVwiLCBcIjEwJVwiXTtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogXCIjXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwibnVtXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXRlbX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLm5hbWVcIiAvPixcclxuICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJuYW1lXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogXCJsZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICBzb3J0ZXI6IChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEua2V5ID4gYi5rZXkgPyAxIDogYS5rZXkgPCBiLmtleSA/IC0xIDogMDtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6IGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiBjd1sxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQWNjb3VudEJ5SWQgYWNjb3VudD17aXRlbX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLmFib3V0XCIgLz4sXHJcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwiYWJvdXRcIixcclxuICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6IGN3WzJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwibm93cmFwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj17aXRlbX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJzaGFyZVwiIHRpdGxlPVwiaWNvbnMuc2hhcmVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMudm90ZXNcIiAvPixcclxuICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJ2b3Rlc1wiLFxyXG4gICAgICAgICAgICAgICAgc29ydGVyOiAoYSwgYikgPT4gYS52b3RlcyAtIGIudm90ZXMsXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6IGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiBjd1szXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2l0ZW19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9XCIxLjMuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjaW1hbE9mZnNldD17NX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuc3RhdHVzLnRpdGxlXCIgLz4sXHJcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwidGl0bGVcIixcclxuICAgICAgICAgICAgICAgIHNvcnRlcjogKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS50aXRsZSA+IGIudGl0bGUgPyAxIDogYS50aXRsZSA8IGIudGl0bGUgPyAtMSA6IDA7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogY3dbNF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVTcGFjZTogXCJub3dyYXBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PXtpdGVtfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuc3VwcG9ydGVkXCIgLz4sXHJcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwic3VwcG9ydGVkXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcclxuICAgICAgICAgICAgICAgIHNvcnRlcjogKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5zdXBwb3J0ZWQudHJhbnNsYXRlID4gYi5zdXBwb3J0ZWQudHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGEuc3VwcG9ydGVkLnRyYW5zbGF0ZSA8IGIuc3VwcG9ydGVkLnRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAtMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAwO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6IGN3WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwibm93cmFwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2l0ZW0ucHJveHkgPyBcIlwiIDogXCJjbGlja2FibGVcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucHJveHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKSA9PiB7fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGl0ZW0ub25BY3Rpb24uYmluZCh0aGlzLCBpdGVtLml0ZW1faWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD17aXRlbS50cmFuc2xhdGV9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy50b2dnbGVcIiAvPixcclxuICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJ0b2dnbGVcIixcclxuICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6IGN3WzVdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwibm93cmFwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2l0ZW0ucHJveHkgPyBcIlwiIDogXCJjbGlja2FibGVcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucHJveHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKSA9PiB7fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGl0ZW0ub25BY3Rpb24uYmluZCh0aGlzLCBpdGVtLml0ZW1faWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshaXRlbS5wcm94eSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uaXNTdXBwb3J0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiY2hlY2ttYXJrLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIm1pbnVzLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5pc1N1cHBvcnRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJpY29ucy5jaGVja21hcmtfY2lyY2xlLnllc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImljb25zLm1pbnVzX2NpcmNsZS5ub1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibG9ja2VkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5sb2NrZWQuYWN0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIF9kZWNpZGVSb3dDbGFzc05hbWUocm93LCBpbmRleCkge1xyXG4gICAgICAgIHJldHVybiByb3cudG9nZ2xlLmlzU3VwcG9ydGVkID8gXCJcIiA6IFwidW5zdXBwb3J0ZWRcIjtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLml0ZW1zKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy5nZXRIZWFkZXIoKTtcclxuXHJcbiAgICAgICAgbGV0IGl0ZW1fcm93cyA9IHRoaXMucHJvcHMuaXRlbXNcclxuICAgICAgICAgICAgLmZpbHRlcihpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuZmlsdGVyU2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpLmdldChcIm5hbWVcIikuaW5kZXhPZih0aGlzLnByb3BzLmZpbHRlclNlYXJjaCkgIT09IC0xIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkuZ2V0KFwiaWRcIikuaW5kZXhPZih0aGlzLnByb3BzLmZpbHRlclNlYXJjaCkgIT09IC0xXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB7dm90ZXM6IGFfdm90ZXN9ID0gZ2V0V2l0bmVzc09yQ29tbWl0dGVlKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBhXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgbGV0IHt2b3RlczogYl92b3Rlc30gPSBnZXRXaXRuZXNzT3JDb21taXR0ZWUoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIGJcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYV92b3RlcyAhPT0gYl92b3Rlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChiX3ZvdGVzLCAxMCkgLSBwYXJzZUludChhX3ZvdGVzLCAxMCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEuZ2V0KFwibmFtZVwiKSA+IGIuZ2V0KFwibmFtZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhLmdldChcIm5hbWVcIikgPCBiLmdldChcIm5hbWVcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAubWFwKChpLCBpZHgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBhY3Rpb24gPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuc3VwcG9ydGVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zdXBwb3J0ZWQuaW5jbHVkZXMoaS5nZXQoXCJpZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcInJlbW92ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJhZGRcIjtcclxuICAgICAgICAgICAgICAgIGxldCBpc0FjdGl2ZSA9IHRoaXMucHJvcHMuYWN0aXZlLmluY2x1ZGVzKFxyXG4gICAgICAgICAgICAgICAgICAgIGdldFdpdG5lc3NPckNvbW1pdHRlZSh0aGlzLnByb3BzLnR5cGUsIGkpLmlkXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjY291bnRJdGVtUm93KHtcclxuICAgICAgICAgICAgICAgICAgICBpZHgsXHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiBpLmdldChcIm5hbWVcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogaSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0aGlzLnByb3BzLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgb25BY3Rpb246XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbiA9PT0gXCJhZGRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLm9uQWRkSXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnByb3BzLm9uUmVtb3ZlSXRlbSxcclxuICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkOiB0aGlzLnByb3BzLml0ZW1zLmluZGV4T2YoaSkgIT09IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBpc0FjdGl2ZSxcclxuICAgICAgICAgICAgICAgICAgICBwcm94eTogdGhpcy5wcm9wcy5wcm94eVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgZXJyb3IgPSB0aGlzLnN0YXRlLmVycm9yO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgIWVycm9yICYmXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRfaXRlbSAmJlxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLml0ZW1zLmluZGV4T2YodGhpcy5zdGF0ZS5zZWxlY3RlZF9pdGVtKSAhPT0gLTFcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgZXJyb3IgPSBjb3VudGVycGFydC50cmFuc2xhdGUoXCJhY2NvdW50LnZvdGVzLmFscmVhZHlcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAge2l0ZW1fcm93cy5sZW5ndGggPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPFBhZ2luYXRlZExpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFibGUgZGFzaGJvYXJkLXRhYmxlIHRhYmxlLWhvdmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93Q2xhc3NOYW1lPXt0aGlzLl9kZWNpZGVSb3dDbGFzc05hbWUuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17aXRlbV9yb3dzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e2hlYWRlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU9ezIwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cInV0aWxpdHkudG90YWxfeF9hc3NldHNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0UGFkZGluZz1cIjEuNXJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCaW5kVG9DaGFpblN0YXRlKFZvdGluZ0FjY291bnRzTGlzdCk7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuLi9BY2NvdW50L0FjY291bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgQWNjb3VudEFjdGlvbnMgZnJvbSBcImFjdGlvbnMvQWNjb3VudEFjdGlvbnNcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQge01vZGFsLCBCdXR0b24sIElucHV0LCBTZWxlY3QsIEZvcm19IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcclxuaW1wb3J0IEljb24gZnJvbSBcIi4uL0ljb24vSWNvblwiO1xyXG5pbXBvcnQge1B1YmxpY0tleX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcblxyXG5jbGFzcyBKb2luV2l0bmVzc2VzTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuZ2V0SW5pdGlhbFN0YXRlKHByb3BzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbml0aWFsU3RhdGUocHJvcHMpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3aXRuZXNzQWNjb3VudDogcHJvcHMuYWNjb3VudCxcclxuICAgICAgICAgICAgc2lnbmluZ0tleTogXCJcIixcclxuICAgICAgICAgICAgdXJsOiBcIlwiXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobnAsIG5zKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS51cmwgIT09IG5zLnZpc2libGUgfHxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy52aXNpYmxlICE9PSBucC52aXNpYmxlIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuc2lnbmluZ0tleSAhPT0gbnMuc2lnbmluZ0tleSB8fFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLndpdG5lc3NBY2NvdW50ICE9PSBucy53aXRuZXNzQWNjb3VudFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgb25BZGRXaXRuZXNzKCkge1xyXG4gICAgICAgIGNvbnN0IHt3aXRuZXNzQWNjb3VudCwgc2lnbmluZ0tleSwgdXJsfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIGlmICh3aXRuZXNzQWNjb3VudCAmJiBzaWduaW5nS2V5KSB7XHJcbiAgICAgICAgICAgIEFjY291bnRBY3Rpb25zLmNyZWF0ZVdpdG5lc3Moe1xyXG4gICAgICAgICAgICAgICAgYWNjb3VudDogd2l0bmVzc0FjY291bnQsXHJcbiAgICAgICAgICAgICAgICB1cmwsXHJcbiAgICAgICAgICAgICAgICBzaWduaW5nS2V5XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnByb3BzLmhpZGVNb2RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlQ29tbWl0dGVlKGFjY291bnQpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgd2l0bmVzc0FjY291bnQ6IGFjY291bnRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbk1lbW9LZXlDaGFuZ2VkKGUpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2lnbmluZ0tleTogZS50YXJnZXQudmFsdWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvblVybENoYW5nZWQoZSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICB1cmw6IHV0aWxzLnNhbml0aXplKGUudGFyZ2V0LnZhbHVlLnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNWYWxpZFB1YktleSA9IHZhbHVlID0+IHtcclxuICAgICAgICByZXR1cm4gIVB1YmxpY0tleS5mcm9tUHVibGljS2V5U3RyaW5nKHZhbHVlKTtcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHt3aXRuZXNzQWNjb3VudCwgc2lnbmluZ0tleSwgdXJsfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxNb2RhbFxyXG4gICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcIm1vZGFsLndpdG5lc3MuY3JlYXRlX3dpdG5lc3NcIil9XHJcbiAgICAgICAgICAgICAgICBvbkNhbmNlbD17dGhpcy5wcm9wcy5oaWRlTW9kYWx9XHJcbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnByb3BzLnZpc2libGV9XHJcbiAgICAgICAgICAgICAgICBmb290ZXI9e1tcclxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT1cInN1Ym1pdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkFkZFdpdG5lc3MuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJtb2RhbC53aXRuZXNzLmNvbmZpcm1cIil9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+LFxyXG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PVwiY2FuY2VsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5MZWZ0OiBcIjhweFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5oaWRlTW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwibW9kYWwuY2FuY2VsXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgXX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPEZvcm0gY2xhc3NOYW1lPVwiZnVsbC13aWR0aFwiIGxheW91dD1cInZlcnRpY2FsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFjY291bnRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIm1vZGFsLndpdG5lc3Mud2l0bmVzc19hY2NvdW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHdpdG5lc3NBY2NvdW50ICYmIHdpdG5lc3NBY2NvdW50LmdldChcIm5hbWVcIikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmdldChcIm5hbWVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt3aXRuZXNzQWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5vbkNoYW5nZUNvbW1pdHRlZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPXszNX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZWFoZWFkPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwibW9kYWwud2l0bmVzcy50ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zYWZlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cInBcIlxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFwibW9kYWwud2l0bmVzcy51cmxcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt1cmx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vblVybENoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtb2RhbC53aXRuZXNzLndlYl9leGFtcGxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtb2RhbC53aXRuZXNzLnB1YmxpY19zaWduaW5nX2tleVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5pc1ZhbGlkUHViS2V5KHNpZ25pbmdLZXkpID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicmlnaHQtbGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogXCItMzBweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJzdGF0aWNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwibW9kYWwud2l0bmVzcy5pbnZhbGlkX2tleVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkb25CZWZvcmU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJrZXlcIiB0aXRsZT1cImljb25zLmtleVwiIHNpemU9XCIxeFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c2lnbmluZ0tleX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uTWVtb0tleUNoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtb2RhbC53aXRuZXNzLmVudGVyX3B1YmxpY19zaWduaW5nX2tleVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxyXG4gICAgICAgICAgICAgICAgPC9Gb3JtPlxyXG4gICAgICAgICAgICA8L01vZGFsPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEpvaW5XaXRuZXNzZXNNb2RhbDtcclxuIiwiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCBKb2luQ29tbWl0dGVlTW9kYWwgZnJvbSBcIi4uLy4uL01vZGFsL0pvaW5Db21taXR0ZWVNb2RhbFwiO1xyXG5pbXBvcnQgVm90aW5nQWNjb3VudHNMaXN0IGZyb20gXCIuLi9Wb3RpbmdBY2NvdW50c0xpc3RcIjtcclxuaW1wb3J0IGNuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xyXG5pbXBvcnQge0lucHV0LCBJY29uIGFzIEFudEljb24sIEJ1dHRvbn0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5pbXBvcnQgU2VhcmNoSW5wdXQgZnJvbSBcIi4uLy4uL1V0aWxpdHkvU2VhcmNoSW5wdXRcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbW1pdHRlZSBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBzaG93Q3JlYXRlQ29tbWl0dGVlTW9kYWw6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3Qgc2hvd0NvbW1pdHRlZU1vZGFsID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInNob3cgY29tbWl0dGVlIG1vZGFsXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHNob3dDcmVhdGVDb21taXR0ZWVNb2RhbDogIXRoaXMuc3RhdGUuc2hvd0NyZWF0ZUNvbW1pdHRlZU1vZGFsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IG9uRmlsdGVyQ2hhbmdlID0gdGhpcy5wcm9wcy5vbkZpbHRlckNoYW5nZTtcclxuICAgICAgICBjb25zdCB2YWxpZGF0ZUFjY291bnRIYW5kbGVyID0gdGhpcy5wcm9wcy52YWxpZGF0ZUFjY291bnRIYW5kbGVyO1xyXG4gICAgICAgIGNvbnN0IGFkZENvbW1pdHRlZUhhbmRsZXIgPSB0aGlzLnByb3BzLmFkZENvbW1pdHRlZUhhbmRsZXI7XHJcbiAgICAgICAgY29uc3QgcmVtb3ZlQ29tbWl0dGVlSGFuZGxlciA9IHRoaXMucHJvcHMucmVtb3ZlQ29tbWl0dGVlSGFuZGxlcjtcclxuXHJcbiAgICAgICAgY29uc3Qge3Nob3dDcmVhdGVDb21taXR0ZWVNb2RhbH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgYWxsX2NvbW1pdHRlZSxcclxuICAgICAgICAgICAgcHJveHlfY29tbWl0dGVlLFxyXG4gICAgICAgICAgICBjb21taXR0ZWUsXHJcbiAgICAgICAgICAgIHByb3h5X2FjY291bnRfaWQsXHJcbiAgICAgICAgICAgIGhhc1Byb3h5LFxyXG4gICAgICAgICAgICBnbG9iYWxPYmplY3QsXHJcbiAgICAgICAgICAgIGZpbHRlclNlYXJjaCxcclxuICAgICAgICAgICAgYWNjb3VudFxyXG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1zZWxlY3RvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmbG9hdDogXCJyaWdodFwifX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17c2hvd0NvbW1pdHRlZU1vZGFsfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuam9pbl9jb21taXR0ZWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3RvciBpbmxpbmUtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlYXJjaElucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhwbG9yZXIud2l0bmVzc2VzLmZpbHRlcl9ieV9uYW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZmlsdGVyU2VhcmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uRmlsdGVyQ2hhbmdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y25hbWVzKFwiY29udGVudC1ibG9ja1wiKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPFZvdGluZ0FjY291bnRzTGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY29tbWl0dGVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJhY2NvdW50LnZvdGVzLmFkZF9jb21taXR0ZWVfbGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcz17YWxsX2NvbW1pdHRlZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVBY2NvdW50PXt2YWxpZGF0ZUFjY291bnRIYW5kbGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFkZEl0ZW09e2FkZENvbW1pdHRlZUhhbmRsZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlSXRlbT17cmVtb3ZlQ29tbWl0dGVlSGFuZGxlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9e2hhc1Byb3h5ID8gLTEgOiAzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWQ9e2hhc1Byb3h5ID8gcHJveHlfY29tbWl0dGVlIDogY29tbWl0dGVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU9e2dsb2JhbE9iamVjdC5nZXQoXCJhY3RpdmVfY29tbWl0dGVlX21lbWJlcnNcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5PXtwcm94eV9hY2NvdW50X2lkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJTZWFyY2g9e2ZpbHRlclNlYXJjaH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8Sm9pbkNvbW1pdHRlZU1vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZT17c2hvd0NyZWF0ZUNvbW1pdHRlZU1vZGFsfVxyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2FjY291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsPXtzaG93Q29tbWl0dGVlTW9kYWx9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdG9yIGZyb20gXCIuLi9BY2NvdW50L0FjY291bnRTZWxlY3RvclwiO1xyXG5pbXBvcnQgQWNjb3VudEFjdGlvbnMgZnJvbSBcImFjdGlvbnMvQWNjb3VudEFjdGlvbnNcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQge01vZGFsLCBCdXR0b24sIElucHV0LCBTZWxlY3QsIEZvcm19IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuXHJcbmNsYXNzIEpvaW5Db21taXR0ZWVNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5nZXRJbml0aWFsU3RhdGUocHJvcHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEluaXRpYWxTdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjb21taXR0ZWVBY2NvdW50OiB0aGlzLnByb3BzLmFjY291bnQsXHJcbiAgICAgICAgICAgIHVybDogXCJcIlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5wLCBucykge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMudmlzaWJsZSAhPT0gbnAudmlzaWJsZSB8fFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnVybCAhPT0gbnMudXJsIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuY29tbWl0dGVlQWNjb3VudCAhPT0gbnMuY29tbWl0dGVlQWNjb3VudFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgb25BZGRDb21pdHRlZSgpIHtcclxuICAgICAgICBjb25zdCB7Y29tbWl0dGVlQWNjb3VudCwgdXJsfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIGlmIChjb21taXR0ZWVBY2NvdW50ICYmIHVybCkge1xyXG4gICAgICAgICAgICBBY2NvdW50QWN0aW9ucy5jcmVhdGVDb21taXR0ZWUoe2FjY291bnQ6IGNvbW1pdHRlZUFjY291bnQsIHVybH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnByb3BzLmhpZGVNb2RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlQ29tbWl0dGVlKGFjY291bnQpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgY29tbWl0dGVlQWNjb3VudDogYWNjb3VudFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVXJsQ2hhbmdlZChlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHVybDogdXRpbHMuc2FuaXRpemUoZS50YXJnZXQudmFsdWUudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMucHJvcHMuaGlkZU1vZGFsKCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLmdldEluaXRpYWxTdGF0ZSh0aGlzLnByb3BzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHt1cmwsIGNvbW1pdHRlZUFjY291bnR9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE1vZGFsXHJcbiAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgIFwibW9kYWwuY29tbWl0dGVlLmNyZWF0ZV9jb21taXR0ZWVcIlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMucHJvcHMudmlzaWJsZX1cclxuICAgICAgICAgICAgICAgIG9uQ2FuY2VsPXt0aGlzLnByb3BzLmhpZGVNb2RhbH1cclxuICAgICAgICAgICAgICAgIGZvb3Rlcj17W1xyXG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PVwic3VibWl0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uQWRkQ29taXR0ZWUuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJtb2RhbC5jb21taXR0ZWUuY29uZmlybVwiKX1cclxuICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj4sXHJcbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9XCJjYW5jZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbkxlZnQ6IFwiOHB4XCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uQ2xvc2UuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJtb2RhbC5jYW5jZWxcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICBdfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8Rm9ybSBjbGFzc05hbWU9XCJmdWxsLXdpZHRoXCIgbGF5b3V0PVwidmVydGljYWxcIj5cclxuICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwibW9kYWwuY29tbWl0dGVlLmZyb21cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY29tbWl0dGVlQWNjb3VudCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdHRlZUFjY291bnQuZ2V0KFwibmFtZVwiKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuZ2V0KFwibmFtZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e2NvbW1pdHRlZUFjY291bnQgfHwgYWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY2NvdW50Q2hhbmdlZD17dGhpcy5vbkNoYW5nZUNvbW1pdHRlZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPXszNX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZWFoZWFkPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwibW9kYWwuY29tbWl0dGVlLnRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnNhZmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwicFwiXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJtb2RhbC5jb21taXR0ZWUudXJsXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dXJsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25VcmxDaGFuZ2VkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibW9kYWwuY29tbWl0dGVlLndlYl9leGFtcGxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XHJcbiAgICAgICAgICAgICAgICA8L0Zvcm0+XHJcbiAgICAgICAgICAgIDwvTW9kYWw+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSm9pbkNvbW1pdHRlZU1vZGFsO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IFdvcmtlcnNMaXN0IGZyb20gXCIuLi9Xb3JrZXJzTGlzdFwiO1xyXG5pbXBvcnQge0xpbmt9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XHJcbmltcG9ydCBBc3NldE5hbWUgZnJvbSBcIi4uLy4uL1V0aWxpdHkvQXNzZXROYW1lXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IHtFcXVpdmFsZW50VmFsdWVDb21wb25lbnR9IGZyb20gXCIuLi8uLi9VdGlsaXR5L0VxdWl2YWxlbnRWYWx1ZUNvbXBvbmVudFwiO1xyXG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uLy4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcclxuaW1wb3J0IHtcclxuICAgIFJvdyxcclxuICAgIENvbCxcclxuICAgIFJhZGlvLFxyXG4gICAgSW5wdXQsXHJcbiAgICBJY29uIGFzIEFudEljb24sXHJcbiAgICBCdXR0b25cclxufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcbmltcG9ydCBTZWFyY2hJbnB1dCBmcm9tIFwiLi4vLi4vVXRpbGl0eS9TZWFyY2hJbnB1dFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV29ya2VycyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBuZXdXb3JrZXJzTGVuZ3RoOiBudWxsLFxyXG4gICAgICAgICAgICBhY3RpdmVXb3JrZXJzTGVuZ3RoOiBudWxsLFxyXG4gICAgICAgICAgICBwb2xsc0xlbmd0aDogbnVsbCxcclxuICAgICAgICAgICAgZXhwaXJlZFdvcmtlcnNMZW5ndGg6IG51bGwsXHJcbiAgICAgICAgICAgIHZvdGVUaHJlc2hvbGQ6IG51bGwsXHJcbiAgICAgICAgICAgIHdvcmtlclRhYmxlSW5kZXg6IHByb3BzLnZpZXdTZXR0aW5ncy5nZXQoXCJ3b3JrZXJUYWJsZUluZGV4XCIsIDEpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobnAsIG5zKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgbnMubmV3V29ya2Vyc0xlbmd0aCAhPT0gdGhpcy5zdGF0ZS5uZXdXb3JrZXJzTGVuZ3RoIHx8XHJcbiAgICAgICAgICAgIG5zLmFjdGl2ZVdvcmtlcnNMZW5ndGggIT09IHRoaXMuc3RhdGUuYWN0aXZlV29ya2Vyc0xlbmd0aCB8fFxyXG4gICAgICAgICAgICBucy5wb2xsc0xlbmd0aCAhPT0gdGhpcy5zdGF0ZS5wb2xsc0xlbmd0aCB8fFxyXG4gICAgICAgICAgICBucy5leHBpcmVkV29ya2Vyc0xlbmd0aCAhPT0gdGhpcy5zdGF0ZS5leHBpcmVkV29ya2Vyc0xlbmd0aCB8fFxyXG4gICAgICAgICAgICBucy52b3RlVGhyZXNob2xkICE9PSB0aGlzLnN0YXRlLnZvdGVUaHJlc2hvbGQgfHxcclxuICAgICAgICAgICAgbnAud29ya2VyVGFibGVJbmRleCAhPT0gdGhpcy5zdGF0ZS53b3JrZXJUYWJsZUluZGV4XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3Qge1xyXG4gICAgICAgICAgICB2b3RlX2lkcyxcclxuICAgICAgICAgICAgcHJveHlfdm90ZV9pZHMsXHJcbiAgICAgICAgICAgIGhpZGVMZWdhY3ksXHJcbiAgICAgICAgICAgIHByZWZlcnJlZFVuaXQsXHJcbiAgICAgICAgICAgIGdsb2JhbE9iamVjdCxcclxuICAgICAgICAgICAgdG90YWxCdWRnZXQsXHJcbiAgICAgICAgICAgIHdvcmtlckJ1ZGdldCxcclxuICAgICAgICAgICAgaGlkZUxlZ2FjeVByb3Bvc2FscyxcclxuICAgICAgICAgICAgaGFzUHJveHksXHJcbiAgICAgICAgICAgIGZpbHRlclNlYXJjaCxcclxuICAgICAgICAgICAgb25GaWx0ZXJDaGFuZ2UsXHJcbiAgICAgICAgICAgIG9uQ2hhbmdlVm90ZXMsXHJcbiAgICAgICAgICAgIGdldFdvcmtlckFycmF5XHJcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgd29ya2VyVGFibGVJbmRleCxcclxuICAgICAgICAgICAgbmV3V29ya2Vyc0xlbmd0aCxcclxuICAgICAgICAgICAgYWN0aXZlV29ya2Vyc0xlbmd0aCxcclxuICAgICAgICAgICAgcG9sbHNMZW5ndGgsXHJcbiAgICAgICAgICAgIGV4cGlyZWRXb3JrZXJzTGVuZ3RoLFxyXG4gICAgICAgICAgICB2b3RlVGhyZXNob2xkXHJcbiAgICAgICAgfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIGNvbnN0IHNldFdvcmtlclRhYmxlSW5kZXggPSBlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICB3b3JrZXJUYWJsZUluZGV4OiBlLnRhcmdldC52YWx1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBmaXhtZSB0aGUgd2F5IFdvcmtlcnNMaXN0IGlzIGluamVjdGVkIHdpdGggd29ya2Vyc2xpc3QgaXMgYSBjb21wbGV0ZSBkZXNpZ24gZmFpbC4gdXNlIHByb3BlciBjb250cm9sbGVkIGNvbXBvbmVudFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXItc2VsZWN0b3JcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZmxvYXQ6IFwicmlnaHRcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89XCIvY3JlYXRlLXdvcmtlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuY3JlYXRlX3dvcmtlclwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlbGVjdG9yIGlubGluZS1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VhcmNoSW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJleHBsb3Jlci53aXRuZXNzZXMuZmlsdGVyX2J5X25hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmaWx0ZXJTZWFyY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25GaWx0ZXJDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxSYWRpby5Hcm91cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3NldFdvcmtlclRhYmxlSW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxSYWRpbyB2YWx1ZT17MH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQudm90ZXMubmV3XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IG5ld1dvcmtlcnNMZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvUmFkaW8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJhZGlvIHZhbHVlPXsxfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC52b3Rlcy5hY3RpdmVcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogYWN0aXZlV29ya2Vyc0xlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9SYWRpbz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cG9sbHNMZW5ndGggPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJhZGlvIHZhbHVlPXszfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudC52b3Rlcy5wb2xsc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50OiBwb2xsc0xlbmd0aH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1JhZGlvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2V4cGlyZWRXb3JrZXJzTGVuZ3RoID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxSYWRpbyB2YWx1ZT17Mn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQudm90ZXMuZXhwaXJlZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9SYWRpbz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L1JhZGlvLkdyb3VwPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7aGlkZUxlZ2FjeX1cclxuICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8Um93PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Q29sIHNwYW49ezN9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC52b3Rlcy50aHJlc2hvbGRcIiAvPiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lIG5hbWU9e3ByZWZlcnJlZFVuaXR9IC8+KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0NvbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPENvbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbj17M31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogXCIxMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2ltYWxPZmZzZXQ9ezR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dm90ZVRocmVzaG9sZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD1cIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQ29sPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvUm93PlxyXG4gICAgICAgICAgICAgICAgICAgIDxSb3c+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxDb2wgc3Bhbj17M30+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLnRvdGFsX2J1ZGdldFwiIC8+IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWUgbmFtZT17cHJlZmVycmVkVW5pdH0gLz4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQ29sPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Q29sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuPXszfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiBcIjEwcHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2dsb2JhbE9iamVjdCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RXF1aXZhbGVudFZhbHVlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUFzc2V0PVwiMS4zLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0Fzc2V0PXtwcmVmZXJyZWRVbml0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3RvdGFsQnVkZ2V0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Db2w+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Sb3c+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxXb3JrZXJzTGlzdFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlclRhYmxlSW5kZXg9e3dvcmtlclRhYmxlSW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkVW5pdD17cHJlZmVycmVkVW5pdH1cclxuICAgICAgICAgICAgICAgICAgICBzZXRXb3JrZXJzTGVuZ3RoPXsoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9uZXdXb3JrZXJzTGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYWN0aXZlV29ya2Vyc0xlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3BvbGxzTGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZXhwaXJlZFdvcmtlcnNMZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF92b3RlVGhyZXNob2xkXHJcbiAgICAgICAgICAgICAgICAgICAgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9uZXdXb3JrZXJzTGVuZ3RoICE9PSB0aGlzLnN0YXRlLm5ld1dvcmtlcnNMZW5ndGggfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3RpdmVXb3JrZXJzTGVuZ3RoICE9PVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYWN0aXZlV29ya2Vyc0xlbmd0aCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3BvbGxzTGVuZ3RoICE9PSB0aGlzLnN0YXRlLnBvbGxzTGVuZ3RoIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZXhwaXJlZFdvcmtlcnNMZW5ndGggIT09XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHBpcmVkV29ya2Vyc0xlbmd0aCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZvdGVUaHJlc2hvbGQgIT09IHRoaXMuc3RhdGUudm90ZVRocmVzaG9sZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1dvcmtlcnNMZW5ndGg6IF9uZXdXb3JrZXJzTGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVdvcmtlcnNMZW5ndGg6IF9hY3RpdmVXb3JrZXJzTGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGxzTGVuZ3RoOiBfcG9sbHNMZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlZFdvcmtlcnNMZW5ndGg6IF9leHBpcmVkV29ya2Vyc0xlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b3RlVGhyZXNob2xkOiBfdm90ZVRocmVzaG9sZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlckJ1ZGdldD17d29ya2VyQnVkZ2V0fVxyXG4gICAgICAgICAgICAgICAgICAgIGhpZGVMZWdhY3lQcm9wb3NhbHM9e2hpZGVMZWdhY3lQcm9wb3NhbHN9XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzUHJveHk9e2hhc1Byb3h5fVxyXG4gICAgICAgICAgICAgICAgICAgIHByb3h5X3ZvdGVfaWRzPXtwcm94eV92b3RlX2lkc31cclxuICAgICAgICAgICAgICAgICAgICB2b3RlX2lkcz17dm90ZV9pZHN9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VWb3Rlcz17b25DaGFuZ2VWb3Rlc31cclxuICAgICAgICAgICAgICAgICAgICBnZXRXb3JrZXJBcnJheT17Z2V0V29ya2VyQXJyYXl9XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyU2VhcmNoPXtmaWx0ZXJTZWFyY2h9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcclxuaW1wb3J0IExpbmtUb0FjY291bnRCeUlkIGZyb20gXCIuLi9VdGlsaXR5L0xpbmtUb0FjY291bnRCeUlkXCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcclxuaW1wb3J0IHtFcXVpdmFsZW50VmFsdWVDb21wb25lbnR9IGZyb20gXCIuLi9VdGlsaXR5L0VxdWl2YWxlbnRWYWx1ZUNvbXBvbmVudFwiO1xyXG5pbXBvcnQgSWNvbiBmcm9tIFwiY29tcG9uZW50cy9JY29uL0ljb25cIjtcclxuaW1wb3J0IFBhZ2luYXRlZExpc3QgZnJvbSBcImNvbXBvbmVudHMvVXRpbGl0eS9QYWdpbmF0ZWRMaXN0XCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IEFzc2V0TmFtZSBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldE5hbWVcIjtcclxuaW1wb3J0IHN0cmluZ1NpbWlsYXJpdHkgZnJvbSBcInN0cmluZy1zaW1pbGFyaXR5XCI7XHJcbmltcG9ydCB7aGlkZGVuUHJvcG9zYWxzfSBmcm9tIFwiLi4vLi4vbGliL2NvbW1vbi9oaWRlUHJvcG9zYWxzXCI7XHJcbmltcG9ydCBzYW5pdGl6ZSBmcm9tIFwic2FuaXRpemVcIjtcclxuXHJcbmNsYXNzIFdvcmtlckxpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB9XHJcblxyXG4gICAgb25BcHByb3ZlKGl0ZW0pIHtcclxuICAgICAgICBsZXQgYWRkVm90ZXMgPSBbXSxcclxuICAgICAgICAgICAgcmVtb3ZlVm90ZXMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKGl0ZW0udm90ZV9pZHMuaGFzKGl0ZW0ud29ya2VyLmdldChcInZvdGVfYWdhaW5zdFwiKSkpIHtcclxuICAgICAgICAgICAgcmVtb3ZlVm90ZXMucHVzaChpdGVtLndvcmtlci5nZXQoXCJ2b3RlX2FnYWluc3RcIikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFpdGVtLnZvdGVfaWRzLmhhcyhpdGVtLndvcmtlci5nZXQoXCJ2b3RlX2ZvclwiKSkpIHtcclxuICAgICAgICAgICAgYWRkVm90ZXMucHVzaChpdGVtLndvcmtlci5nZXQoXCJ2b3RlX2ZvclwiKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlVm90ZXMoYWRkVm90ZXMsIHJlbW92ZVZvdGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlamVjdChpdGVtKSB7XHJcbiAgICAgICAgbGV0IGFkZFZvdGVzID0gW10sXHJcbiAgICAgICAgICAgIHJlbW92ZVZvdGVzID0gW107XHJcblxyXG4gICAgICAgIGlmIChpdGVtLnZvdGVfaWRzLmhhcyhpdGVtLndvcmtlci5nZXQoXCJ2b3RlX2FnYWluc3RcIikpKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZVZvdGVzLnB1c2goaXRlbS53b3JrZXIuZ2V0KFwidm90ZV9hZ2FpbnN0XCIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpdGVtLnZvdGVfaWRzLmhhcyhpdGVtLndvcmtlci5nZXQoXCJ2b3RlX2ZvclwiKSkpIHtcclxuICAgICAgICAgICAgcmVtb3ZlVm90ZXMucHVzaChpdGVtLndvcmtlci5nZXQoXCJ2b3RlX2ZvclwiKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlVm90ZXMoYWRkVm90ZXMsIHJlbW92ZVZvdGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRIZWFkZXIod29ya2VyVGFibGVJbmRleCwgcHJlZmVycmVkVW5pdCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHdvcmtlclRhYmxlSW5kZXggPT09IDJcclxuICAgICAgICAgICAgICAgID8gbnVsbFxyXG4gICAgICAgICAgICAgICAgOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50PVwic3BhblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLmxpbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YUluZGV4OiBcImxpbmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICByZW5kZXI6IGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVTcGFjZTogXCJub3dyYXBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2l0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQudm90ZXMuZXhwaXJlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IChcclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5pZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2hpdGVTcGFjZTogXCJub3dyYXBcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwiYXNzZXRzX2lkXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcclxuICAgICAgICAgICAgICAgIHNvcnRlcjogKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5hc3NldHNfaWQgPiBiLmFzc2V0c19pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBhLmFzc2V0c19pZCA8IGIuYXNzZXRzX2lkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IC0xXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDA7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPHNwYW4gc3R5bGU9e3t3aGl0ZVNwYWNlOiBcIm5vd3JhcFwifX0+e2l0ZW19PC9zcGFuPjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IChcclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnVzZXJfaXNzdWVkX2Fzc2V0cy5kZXNjcmlwdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2hpdGVTcGFjZTogXCJub3dyYXBcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwiZGVzY3JpcHRpb25cIixcclxuICAgICAgICAgICAgICAgIGFsaWduOiBcImxlZnRcIixcclxuICAgICAgICAgICAgICAgIHNvcnRlcjogKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYS5kZXNjcmlwdGlvbi5uYW1lID4gYi5kZXNjcmlwdGlvbi5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYS5kZXNjcmlwdGlvbi5uYW1lIDwgYi5kZXNjcmlwdGlvbi5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAtMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVTcGFjZTogXCJub3dyYXBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS51cmwgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnVybC5pbmRleE9mKFwiLlwiKSAhPT0gLTFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcInZpc2libGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiaGlkZGVuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj17dXRpbHMuc2FuaXRpemUoaXRlbS51cmwpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwic2hhcmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cIjJ4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMuc2hhcmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXRlbS5uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rVG9BY2NvdW50QnlJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXtpdGVtLndvcmtlcl9hY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhEaXNwbGF5QWNjb3VudE5hbWVMZW5ndGg9e251bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNvbHVtbi1oaWRlLXNtYWxsXCIsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogKFxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudm90ZXMudG90YWxfdm90ZXNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgZGF0YUluZGV4OiBcInRvdGFsX3ZvdGVzXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgc29ydGVyOiAoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnRvdGFsX3ZvdGVzIC0gYi50b3RhbF92b3RlcztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6IGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtpdGVtfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9XCIxLjMuMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsT2Zmc2V0PXs1fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aGl0ZVNwYWNlOiBcIm5vd3JhcFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB3b3JrZXJUYWJsZUluZGV4ID09PSAwXHJcbiAgICAgICAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PVwiYWNjb3VudC52b3Rlcy5taXNzaW5nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aGl0ZVNwYWNlOiBcIm5vd3JhcFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJtaXNzaW5nXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgc29ydGVyOiAoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLm1pc3NpbmcgLSBiLm1pc3Npbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgcmVuZGVyOiBpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFwicmlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e01hdGgubWF4KDAsIGl0ZW0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PVwiMS4zLjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsT2Zmc2V0PXs1fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDogbnVsbCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IChcclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJleHBsb3Jlci53b3JrZXJzLnBlcmlvZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2hpdGVTcGFjZTogXCJub3dyYXBcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwicGVyaW9kXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgc29ydGVyOiAoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKGEucGVyaW9kLnN0YXJ0RGF0ZSkgLVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShiLnBlcmlvZC5zdGFydERhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6IGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7d2hpdGVTcGFjZTogXCJub3dyYXBcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2l0ZW0uc3RhcnREYXRlfSAtIHtpdGVtLmVuZERhdGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB3b3JrZXJUYWJsZUluZGV4ID09PSAyIHx8IHdvcmtlclRhYmxlSW5kZXggPT09IDBcclxuICAgICAgICAgICAgICAgID8gbnVsbFxyXG4gICAgICAgICAgICAgICAgOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudm90ZXMuZnVuZGluZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2hpdGVTcGFjZTogXCJub3dyYXBcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwiZnVuZGluZ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgYWxpZ246IFwicmlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVTcGFjZTogXCJub3dyYXBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGUtY29sdW1uLXNtYWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2l0ZW0uaXNFeHBpcmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIi1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmZ1bmRlZFBlcmNlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSArIFwiJVwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgd29ya2VyVGFibGVJbmRleCA9PT0gMiB8fCB3b3JrZXJUYWJsZUluZGV4ID09PSAwXHJcbiAgICAgICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgICAgIDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImV4cGxvcmVyLndpdG5lc3Nlcy5idWRnZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aGl0ZVNwYWNlOiBcIm5vd3JhcFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nVG9wOiA1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjAuOHJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoPEFzc2V0TmFtZSBuYW1lPXtwcmVmZXJyZWRVbml0fSAvPilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJidWRnZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICByZW5kZXI6IGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwibm93cmFwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLnJlc3QgPD0gMCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmlzRXhwaXJlZCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCItXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjAuMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEVxdWl2YWxlbnRWYWx1ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21Bc3NldD1cIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9Bc3NldD17aXRlbS5wcmVmZXJyZWRVbml0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2l0ZW0ucmVzdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjb2x1bW4taGlkZS1zbWFsbFwiLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IChcclxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cImFjY291bnQudm90ZXMuZGFpbHlfcGF5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2hpdGVTcGFjZTogXCJub3dyYXBcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1RvcDogNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogXCIwLjhyZW1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKDxBc3NldE5hbWUgbmFtZT17cHJlZmVycmVkVW5pdH0gLz4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwiZGFpbHlfcGF5XCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgc29ydGVyOiAoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmRhaWx5X3BheS5kYWlseV9wYXkgLSBiLmRhaWx5X3BheS5kYWlseV9wYXk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXshaXRlbS5wcm94eSA/IFwiY2xpY2thYmxlXCIgOiBcIlwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aGl0ZVNwYWNlOiBcIm5vd3JhcFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucHJveHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKSA9PiB7fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXNbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYXBwcm92YWxTdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIm9uUmVqZWN0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJvbkFwcHJvdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uYmluZCh0aGlzLCBpdGVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RXF1aXZhbGVudFZhbHVlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21Bc3NldD1cIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0Fzc2V0PXtpdGVtLnByZWZlcnJlZFVuaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtpdGVtLmRhaWx5X3BheX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjb2x1bW4taGlkZS1zbWFsbFwiLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IChcclxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9XCJhY2NvdW50LnZvdGVzLnRvZ2dsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2hpdGVTcGFjZTogXCJub3dyYXBcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwidG9nZ2xlXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXshaXRlbS5wcm94eSA/IFwiY2xpY2thYmxlXCIgOiBcIlwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aGl0ZVNwYWNlOiBcIm5vd3JhcFwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucHJveHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKSA9PiB7fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXNbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYXBwcm92YWxTdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIm9uUmVqZWN0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJvbkFwcHJvdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uYmluZCh0aGlzLCBpdGVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IWl0ZW0ucHJveHkgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFwcHJvdmFsU3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiY2hlY2ttYXJrLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIm1pbnVzLWNpcmNsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5hcHByb3ZhbFN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImljb25zLmNoZWNrbWFya19jaXJjbGUuYXBwcm92ZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJpY29ucy5taW51c19jaXJjbGUuZGlzYXBwcm92ZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImxvY2tlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMubG9ja2VkLmFjdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXS5maWx0ZXIobiA9PiBuKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhKHdvcmtlcnMsIHZvdGVUaHJlc2hvbGQgPSAwKSB7XHJcbiAgICAgICAgbGV0IHtoYXNQcm94eSwgcHJveHlfdm90ZV9pZHMsIHZvdGVfaWRzfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgdm90ZV9pZHMgPSBoYXNQcm94eSA/IHByb3h5X3ZvdGVfaWRzIDogdm90ZV9pZHM7XHJcbiAgICAgICAgdm90ZVRocmVzaG9sZCA9IHZvdGVUaHJlc2hvbGQgfHwgMDtcclxuICAgICAgICByZXR1cm4gd29ya2Vycy5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB3b3JrZXIgPSBpdGVtLndvcmtlci50b0pTKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmsgPSBpbmRleCArIDE7XHJcbiAgICAgICAgICAgIGxldCB0b3RhbF92b3RlcyA9XHJcbiAgICAgICAgICAgICAgICB3b3JrZXIudG90YWxfdm90ZXNfZm9yIC0gd29ya2VyLnRvdGFsX3ZvdGVzX2FnYWluc3Q7XHJcbiAgICAgICAgICAgIGxldCBhcHByb3ZhbFN0YXRlID0gdm90ZV9pZHMuaGFzKHdvcmtlci52b3RlX2ZvcilcclxuICAgICAgICAgICAgICAgID8gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgOiB2b3RlX2lkcy5oYXMod29ya2VyLnZvdGVfYWdhaW5zdClcclxuICAgICAgICAgICAgICAgICAgICA/IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xyXG5cclxuICAgICAgICAgICAgbGV0IGZ1bmRlZFBlcmNlbnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdvcmtlci5kYWlseV9wYXkgPCBpdGVtLnJlc3QpIHtcclxuICAgICAgICAgICAgICAgIGZ1bmRlZFBlcmNlbnQgPSAxMDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5yZXN0ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZnVuZGVkUGVyY2VudCA9IChpdGVtLnJlc3QgLyB3b3JrZXIuZGFpbHlfcGF5KSAqIDEwMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHN0YXJ0RGF0ZSA9IGNvdW50ZXJwYXJ0LmxvY2FsaXplKFxyXG4gICAgICAgICAgICAgICAgbmV3IERhdGUod29ya2VyLndvcmtfYmVnaW5fZGF0ZSArIFwiWlwiKSxcclxuICAgICAgICAgICAgICAgIHt0eXBlOiBcImRhdGVcIiwgZm9ybWF0OiBcInNob3J0X2N1c3RvbVwifVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBsZXQgZW5kRGF0ZSA9IGNvdW50ZXJwYXJ0LmxvY2FsaXplKFxyXG4gICAgICAgICAgICAgICAgbmV3IERhdGUod29ya2VyLndvcmtfZW5kX2RhdGUgKyBcIlpcIiksXHJcbiAgICAgICAgICAgICAgICB7dHlwZTogXCJkYXRlXCIsIGZvcm1hdDogXCJzaG9ydF9jdXN0b21cIn1cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBsZXQgaXNFeHBpcmVkID0gbmV3IERhdGUod29ya2VyLndvcmtfZW5kX2RhdGUgKyBcIlpcIikgPD0gbm93O1xyXG4gICAgICAgICAgICBsZXQgaGFzU3RhcnRlZCA9IG5ldyBEYXRlKHdvcmtlci53b3JrX2JlZ2luX2RhdGUgKyBcIlpcIikgPD0gbm93O1xyXG4gICAgICAgICAgICBsZXQgaXNQcm9wb3NlZCA9XHJcbiAgICAgICAgICAgICAgICAoIWlzRXhwaXJlZCAmJiB0b3RhbF92b3RlcyA8IHZvdGVUaHJlc2hvbGQpIHx8ICFoYXNTdGFydGVkO1xyXG4gICAgICAgICAgICBsZXQgaXNQb2xsID0gISFpdGVtLnBvbGw7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBrZXk6IHdvcmtlci5pZCxcclxuICAgICAgICAgICAgICAgIGxpbmU6ICFpc1BvbGwgJiYgaXNFeHBpcmVkID8gbnVsbCA6ICFpc0V4cGlyZWQgPyByYW5rIDogbnVsbCxcclxuICAgICAgICAgICAgICAgIGFzc2V0c19pZDogd29ya2VyLmlkLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHdvcmtlcixcclxuICAgICAgICAgICAgICAgIHRvdGFsX3ZvdGVzOiB0b3RhbF92b3RlcyxcclxuICAgICAgICAgICAgICAgIG1pc3Npbmc6IHZvdGVUaHJlc2hvbGQgLSB0b3RhbF92b3RlcyxcclxuICAgICAgICAgICAgICAgIHBlcmlvZDoge3N0YXJ0RGF0ZSwgZW5kRGF0ZX0sXHJcbiAgICAgICAgICAgICAgICBmdW5kaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgICFpc1BvbGwgJiYgKGlzRXhwaXJlZCB8fCBpc1Byb3Bvc2VkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiB7aXNFeHBpcmVkLCBmdW5kZWRQZXJjZW50fSxcclxuICAgICAgICAgICAgICAgIGRhaWx5X3BheToge1xyXG4gICAgICAgICAgICAgICAgICAgIHByZWZlcnJlZFVuaXQ6IGl0ZW0ucHJlZmVycmVkVW5pdCxcclxuICAgICAgICAgICAgICAgICAgICBkYWlseV9wYXk6IHdvcmtlci5kYWlseV9wYXksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJveHk6IGhhc1Byb3h5LFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsU3RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyOiBpdGVtLndvcmtlcixcclxuICAgICAgICAgICAgICAgICAgICB2b3RlX2lkc1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ1ZGdldDpcclxuICAgICAgICAgICAgICAgICAgICAhaXNQb2xsICYmIChpc0V4cGlyZWQgfHwgaXNQcm9wb3NlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN0OiBpdGVtLnJlc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRXhwaXJlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkVW5pdDogaXRlbS5wcmVmZXJyZWRVbml0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN0OiBpdGVtLnJlc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJveHk6IGhhc1Byb3h5LFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsU3RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyOiBpdGVtLndvcmtlcixcclxuICAgICAgICAgICAgICAgICAgICB2b3RlX2lkc1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRNYXBwZWRXb3JrZXJzKHdvcmtlcnMsIG1heERhaWx5UGF5b3V0LCBmaWx0ZXJTZWFyY2gpIHtcclxuICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBsZXQgcmVtYWluaW5nRGFpbHlQYXlvdXQgPSBtYXhEYWlseVBheW91dDtcclxuICAgICAgICBsZXQgdm90ZVRocmVzaG9sZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgbWFwcGVkID0gd29ya2Vyc1xyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gZmlyc3Qgc29ydCBieSB2b3RlcyBzbyBwYXlvdXQgb3JkZXIgaXMgY29ycmVjdFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFRvdGFsVm90ZXMoYikgLSB0aGlzLl9nZXRUb3RhbFZvdGVzKGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAubWFwKHdvcmtlciA9PiB7XHJcbiAgICAgICAgICAgICAgICB3b3JrZXIuaXNPbmdvaW5nID1cclxuICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSh3b3JrZXIuZ2V0KFwid29ya19lbmRfZGF0ZVwiKSArIFwiWlwiKSA+IG5vdyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHdvcmtlci5nZXQoXCJ3b3JrX2JlZ2luX2RhdGVcIikgKyBcIlpcIikgPD0gbm93O1xyXG4gICAgICAgICAgICAgICAgd29ya2VyLmlzVXBjb21pbmcgPVxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHdvcmtlci5nZXQoXCJ3b3JrX2JlZ2luX2RhdGVcIikgKyBcIlpcIikgPiBub3c7XHJcbiAgICAgICAgICAgICAgICB3b3JrZXIuaXNFeHBpcmVkID1cclxuICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSh3b3JrZXIuZ2V0KFwid29ya19lbmRfZGF0ZVwiKSArIFwiWlwiKSA8PSBub3c7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGFpbHlQYXkgPSBwYXJzZUludCh3b3JrZXIuZ2V0KFwiZGFpbHlfcGF5XCIpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICB3b3JrZXIudm90ZXMgPVxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlci5nZXQoXCJ0b3RhbF92b3Rlc19mb3JcIikgLVxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlci5nZXQoXCJ0b3RhbF92b3Rlc19hZ2FpbnN0XCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ0RhaWx5UGF5b3V0ID4gMCAmJiB3b3JrZXIuaXNPbmdvaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nRGFpbHlQYXlvdXQgPSByZW1haW5pbmdEYWlseVBheW91dCAtIGRhaWx5UGF5O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmdEYWlseVBheW91dCA8PSAwICYmICF2b3RlVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHdoZW4gd29ya2VycyBiZWNvbWUgaW5hY3RpdmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm90ZVRocmVzaG9sZCA9IHdvcmtlci52b3RlcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLnJlbWFpbmluZ1BheW91dCA9IHJlbWFpbmluZ0RhaWx5UGF5b3V0ICsgZGFpbHlQYXk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlci5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB3b3JrZXIucmVtYWluaW5nUGF5b3V0ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB3b3JrZXI7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoYSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYS5nZXQoXCJuYW1lXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYSAmJiBuYW1lLmluZGV4T2YoZmlsdGVyU2VhcmNoKSAhPT0gLTE7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBzb3J0IG91dCBleHBpcmVkXHJcbiAgICAgICAgICAgICAgICBpZiAoYS5pc0V4cGlyZWQgIT09IGIuaXNFeHBpcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuaXNFeHBpcmVkID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VG90YWxWb3RlcyhiKSAtIHRoaXMuX2dldFRvdGFsVm90ZXMoYSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG1hcHBlZFdvcmtlcnM6IG1hcHBlZCxcclxuICAgICAgICAgICAgdm90ZVRocmVzaG9sZDogdm90ZVRocmVzaG9sZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRvdGFsVm90ZXMod29ya2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgcGFyc2VJbnQod29ya2VyLmdldChcInRvdGFsX3ZvdGVzX2ZvclwiKSwgMTApIC1cclxuICAgICAgICAgICAgcGFyc2VJbnQod29ya2VyLmdldChcInRvdGFsX3ZvdGVzX2FnYWluc3RcIiksIDEwKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgX2RlY2lkZVJvd0NsYXNzTmFtZShyb3csIGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHJvdy50b2dnbGUuYXBwcm92YWxTdGF0ZSA/IFwiXCIgOiBcInVuc3VwcG9ydGVkXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIHdvcmtlclRhYmxlSW5kZXgsXHJcbiAgICAgICAgICAgIHByZWZlcnJlZFVuaXQsXHJcbiAgICAgICAgICAgIHNldFdvcmtlcnNMZW5ndGgsXHJcbiAgICAgICAgICAgIHdvcmtlckJ1ZGdldCxcclxuICAgICAgICAgICAgaGlkZUxlZ2FjeVByb3Bvc2FscyxcclxuICAgICAgICAgICAgZ2V0V29ya2VyQXJyYXksXHJcbiAgICAgICAgICAgIGZpbHRlclNlYXJjaFxyXG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGNvbnN0IHdvcmtlcnNIZWFkZXIgPSB0aGlzLmdldEhlYWRlcih3b3JrZXJUYWJsZUluZGV4LCBwcmVmZXJyZWRVbml0KTtcclxuXHJcbiAgICAgICAgbGV0IHdvcmtlckFycmF5ID0gZ2V0V29ya2VyQXJyYXkoKTtcclxuICAgICAgICBsZXQge21hcHBlZFdvcmtlcnMsIHZvdGVUaHJlc2hvbGR9ID0gdGhpcy5fZ2V0TWFwcGVkV29ya2VycyhcclxuICAgICAgICAgICAgd29ya2VyQXJyYXksXHJcbiAgICAgICAgICAgIHdvcmtlckJ1ZGdldCxcclxuICAgICAgICAgICAgZmlsdGVyU2VhcmNoXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgaGlkZVByb3Bvc2FscyA9IChmaWx0ZXJlZFdvcmtlciwgY29tcGFyZVdpdGgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFoaWRlTGVnYWN5UHJvcG9zYWxzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGR1cGxpY2F0ZWQgPSBjb21wYXJlV2l0aC5zb21lKHdvcmtlciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc1NpbWlsYXJOYW1lID1cclxuICAgICAgICAgICAgICAgICAgICBzdHJpbmdTaW1pbGFyaXR5LmNvbXBhcmVUd29TdHJpbmdzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZFdvcmtlci5nZXQoXCJuYW1lXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIuZ2V0KFwibmFtZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICkgPiAwLjg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzYW1lSWQgPSB3b3JrZXIuZ2V0KFwiaWRcIikgPT09IGZpbHRlcmVkV29ya2VyLmdldChcImlkXCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNOZXdlciA9XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLmdldChcImlkXCIpLnN1YnN0cig1LCB3b3JrZXIuZ2V0KFwiaWRcIikubGVuZ3RoKSA+XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRXb3JrZXIuZ2V0KFwiaWRcIikuc3Vic3RyKDUsIHdvcmtlci5nZXQoXCJpZFwiKS5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzU2ltaWxhck5hbWUgJiYgIXNhbWVJZCAmJiBpc05ld2VyO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgbmV3RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsVm90ZXMgPVxyXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRXb3JrZXIuZ2V0KFwidG90YWxfdm90ZXNfZm9yXCIpIC1cclxuICAgICAgICAgICAgICAgIGZpbHRlcmVkV29ya2VyLmdldChcInRvdGFsX3ZvdGVzX2FnYWluc3RcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc0xpdHRsZVZvdGVzID0gdG90YWxWb3RlcyA8IDIwMDAwMDAwMDAwMDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc1N0YXJ0ZWRPdmVyQU1vbnRoQWdvID1cclxuICAgICAgICAgICAgICAgIG5ldyBEYXRlKGZpbHRlcmVkV29ya2VyLmdldChcIndvcmtfYmVnaW5fZGF0ZVwiKSArIFwiWlwiKSA8PVxyXG4gICAgICAgICAgICAgICAgbmV3IERhdGUobmV3RGF0ZS5zZXRNb250aChuZXdEYXRlLmdldE1vbnRoKCkgLSAyKSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYW51YWxIaWRkZW4gPSBoaWRkZW5Qcm9wb3NhbHMuaW5jbHVkZXMoXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJlZFdvcmtlci5nZXQoXCJpZFwiKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgbGV0IGhpZGRlbiA9XHJcbiAgICAgICAgICAgICAgICAoKCEhZHVwbGljYXRlZCB8fCBoYXNTdGFydGVkT3ZlckFNb250aEFnbykgJiYgaGFzTGl0dGxlVm90ZXMpIHx8XHJcbiAgICAgICAgICAgICAgICBtYW51YWxIaWRkZW47XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gIWhpZGRlbjtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgcG9sbHMgPSBtYXBwZWRXb3JrZXJzXHJcbiAgICAgICAgICAgIC5maWx0ZXIoYSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbG93ZXJjYXNlID0gYS5nZXQoXCJuYW1lXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbG93ZXJjYXNlLmluY2x1ZGVzKFwiYnNpcFwiKSB8fCBsb3dlcmNhc2UuaW5jbHVkZXMoXCJwb2xsXCIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAubWFwKHdvcmtlciA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHByZWZlcnJlZFVuaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdDogd29ya2VyLnJlbWFpbmluZ1BheW91dCxcclxuICAgICAgICAgICAgICAgICAgICBwb2xsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlcjogd29ya2VyXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGEgPT4gISFhKTtcclxuXHJcbiAgICAgICAgLy8gcmVtb3ZlIHBvbGxzXHJcbiAgICAgICAgbWFwcGVkV29ya2VycyA9IG1hcHBlZFdvcmtlcnMuZmlsdGVyKGEgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbG93ZXJjYXNlID0gYS5nZXQoXCJuYW1lXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiAhbG93ZXJjYXNlLmluY2x1ZGVzKFwiYnNpcFwiKSAmJiAhbG93ZXJjYXNlLmluY2x1ZGVzKFwicG9sbFwiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IG9uR29pbmdXb3JrZXJzID0gbWFwcGVkV29ya2Vycy5maWx0ZXIoYSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLmlzT25nb2luZztcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgYWN0aXZlV29ya2VycyA9IG1hcHBlZFdvcmtlcnNcclxuICAgICAgICAgICAgLmZpbHRlcihhID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLmFjdGl2ZSAmJiBhLmlzT25nb2luZztcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm1hcCh3b3JrZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRVbml0LFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3Q6IHdvcmtlci5yZW1haW5pbmdQYXlvdXQsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyOiB3b3JrZXJcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoYSA9PiAhIWEpO1xyXG5cclxuICAgICAgICBsZXQgbmV3V29ya2VycyA9IG1hcHBlZFdvcmtlcnNcclxuICAgICAgICAgICAgLmZpbHRlcihhID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgIWEuYWN0aXZlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIWEuaXNFeHBpcmVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZVByb3Bvc2FscyhhLCBvbkdvaW5nV29ya2VycylcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5tYXAod29ya2VyID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkVW5pdCxcclxuICAgICAgICAgICAgICAgICAgICByZXN0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlcjogd29ya2VyXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGV4cGlyZWRXb3JrZXJzID0gd29ya2VyQXJyYXlcclxuICAgICAgICAgICAgLmZpbHRlcihhID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLmlzRXhwaXJlZDtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm1hcCh3b3JrZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRVbml0LFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3Q6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyOiB3b3JrZXJcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGZpeG1lOiBkb24ndCBjYWxsIHNldFN0YXRlIGluIHJlbmRlclxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBzZXRXb3JrZXJzTGVuZ3RoKFxyXG4gICAgICAgICAgICAgICAgbmV3V29ya2Vycy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVXb3JrZXJzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHBvbGxzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIGV4cGlyZWRXb3JrZXJzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHZvdGVUaHJlc2hvbGRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9LCAyNTApO1xyXG4gICAgICAgIGNvbnN0IHdvcmtlcnMgPVxyXG4gICAgICAgICAgICB3b3JrZXJUYWJsZUluZGV4ID09PSAwXHJcbiAgICAgICAgICAgICAgICA/IG5ld1dvcmtlcnNcclxuICAgICAgICAgICAgICAgIDogd29ya2VyVGFibGVJbmRleCA9PT0gMVxyXG4gICAgICAgICAgICAgICAgICAgID8gYWN0aXZlV29ya2Vyc1xyXG4gICAgICAgICAgICAgICAgICAgIDogd29ya2VyVGFibGVJbmRleCA9PT0gMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGV4cGlyZWRXb3JrZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcG9sbHM7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPFBhZ2luYXRlZExpc3RcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRhYmxlIGRhc2hib2FyZC10YWJsZSB0YWJsZS1ob3ZlclwiXHJcbiAgICAgICAgICAgICAgICByb3dDbGFzc05hbWU9e3RoaXMuX2RlY2lkZVJvd0NsYXNzTmFtZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgcm93cz17dGhpcy5nZXREYXRhKHdvcmtlcnMsIHZvdGVUaHJlc2hvbGQpfVxyXG4gICAgICAgICAgICAgICAgaGVhZGVyPXt3b3JrZXJzSGVhZGVyfVxyXG4gICAgICAgICAgICAgICAgcGFnZVNpemU9ezUwfVxyXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJ1dGlsaXR5LnRvdGFsX3hfYXNzZXRzXCJcclxuICAgICAgICAgICAgICAgIGxlZnRQYWRkaW5nPVwiMS41cmVtXCJcclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCaW5kVG9DaGFpblN0YXRlKFdvcmtlckxpc3QpO1xyXG4iLCJleHBvcnQgY29uc3QgaGlkZGVuUHJvcG9zYWxzID0gW1xyXG4gICAgXCIxLjE0LjExNFwiLCAvLyAyMDE4MDhfUm9zc3VsJkdyYXBoZW5lTGFiX05ld19VSVVYLCBub3cgdW5kZXIgQkJGIHdpdGggbmV3IG5hbWVcclxuICAgIFwiMS4xNC4xMDdcIiAvLyBSZWludmVudGlvbiBvZiBCaXRzaGFyZXMgbG9vayBhbmQgZmVlbCwgYWJhbmRvbmVkIGZyb20gY3JlYXRvclxyXG5dO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgSW1tdXRhYmxlIGZyb20gXCJpbW11dGFibGVcIjtcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcbmltcG9ydCBUb3RhbEJhbGFuY2VWYWx1ZSBmcm9tIFwiLi4vVXRpbGl0eS9Ub3RhbEJhbGFuY2VWYWx1ZVwiO1xuaW1wb3J0IE1hcmdpblBvc2l0aW9uc1RhYmxlIGZyb20gXCIuL01hcmdpblBvc2l0aW9uc1RhYmxlXCI7XG5pbXBvcnQge1JlY2VudFRyYW5zYWN0aW9uc30gZnJvbSBcIi4vUmVjZW50VHJhbnNhY3Rpb25zXCI7XG5pbXBvcnQgUHJvcG9zYWxzIGZyb20gXCJjb21wb25lbnRzL0FjY291bnQvUHJvcG9zYWxzXCI7XG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xuaW1wb3J0IFNldHRpbmdzQWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9TZXR0aW5nc0FjdGlvbnNcIjtcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XG5pbXBvcnQge1RhYnMsIFRhYn0gZnJvbSBcIi4uL1V0aWxpdHkvVGFic1wiO1xuaW1wb3J0IEFjY291bnRPcmRlcnMgZnJvbSBcIi4vQWNjb3VudE9yZGVyc1wiO1xuaW1wb3J0IGNuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xuaW1wb3J0IFRyYW5zbGF0ZVdpdGhMaW5rcyBmcm9tIFwiLi4vVXRpbGl0eS9UcmFuc2xhdGVXaXRoTGlua3NcIjtcbmltcG9ydCB7Y2hlY2tNYXJnaW5TdGF0dXN9IGZyb20gXCJjb21tb24vYWNjb3VudEhlbHBlclwiO1xuaW1wb3J0IEJhbGFuY2VXcmFwcGVyIGZyb20gXCIuL0JhbGFuY2VXcmFwcGVyXCI7XG5pbXBvcnQgQWNjb3VudFRyZWVtYXAgZnJvbSBcIi4vQWNjb3VudFRyZWVtYXBcIjtcbmltcG9ydCBBc3NldFdyYXBwZXIgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXRXcmFwcGVyXCI7XG5pbXBvcnQgQWNjb3VudFBvcnRmb2xpb0xpc3QgZnJvbSBcIi4vQWNjb3VudFBvcnRmb2xpb0xpc3RcIjtcbmltcG9ydCB7SW5wdXQsIEljb24sIFN3aXRjaCwgVG9vbHRpcCwgQnV0dG9ufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XG5pbXBvcnQgU2VhcmNoSW5wdXQgZnJvbSBcIi4uL1V0aWxpdHkvU2VhcmNoSW5wdXRcIjtcblxuY2xhc3MgQWNjb3VudE92ZXJ2aWV3IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzaG93bkFzc2V0czogcHJvcHMudmlld1NldHRpbmdzLmdldChcInNob3duQXNzZXRzXCIsIFwiYWN0aXZlXCIpLFxuICAgICAgICAgICAgYWx3YXlzU2hvd0Fzc2V0czogW1xuICAgICAgICAgICAgICAgIFwiQlRTXCIsXG5cbiAgICAgICAgICAgICAgICBcIlVTRFwiLFxuICAgICAgICAgICAgICAgIFwiQ05ZXCIsXG4gICAgICAgICAgICAgICAgXCJHT0xEXCIsXG4gICAgICAgICAgICAgICAgXCJTSUxWRVJcIixcbiAgICAgICAgICAgICAgICAvLyBcIk9QRU4uQlRDXCIsXG4gICAgICAgICAgICAgICAgLy8gXCJPUEVOLlVTRFRcIixcbiAgICAgICAgICAgICAgICAvLyBcIk9QRU4uRVRIXCIsXG4gICAgICAgICAgICAgICAgLy8gXCJPUEVOLk1BSURcIixcbiAgICAgICAgICAgICAgICAvLyBcIk9QRU4uU1RFRU1cIixcbiAgICAgICAgICAgICAgICAvLyBcIk9QRU4uREFTSFwiLFxuXG4gICAgICAgICAgICAgICAgXCJQUFlcIixcbiAgICAgICAgICAgICAgICBcIlJVREVYLkJUQ1wiLFxuICAgICAgICAgICAgICAgIFwiUlVERVguRVRIXCIsXG4gICAgICAgICAgICAgICAgXCJSVURFWC5VU0RUXCIsXG4gICAgICAgICAgICAgICAgXCJSVURFWC5FT1NcIixcbiAgICAgICAgICAgICAgICBcIlJVREVYLkdPTE9TXCIsXG4gICAgICAgICAgICAgICAgXCJSVURFWC5TVEVFTVwiLFxuICAgICAgICAgICAgICAgIFwiUlVERVguV0xTXCIsXG4gICAgICAgICAgICAgICAgXCJSVURFWC5TTU9LRVwiLFxuXG4gICAgICAgICAgICAgICAgXCJSVURFWC5HUkNcIixcbiAgICAgICAgICAgICAgICBcIlJVREVYLkdCR1wiLFxuICAgICAgICAgICAgICAgIFwiUlVERVguU0JEXCIsXG4gICAgICAgICAgICAgICAgXCJSVURFWC5LUk1cIlxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGhpZGVGaXNoaW5nUHJvcG9zYWxzOiB0cnVlLFxuICAgICAgICAgICAgcXVlc3Rpb24xOiBmYWxzZSxcbiAgICAgICAgICAgIHF1ZXN0aW9uMjogZmFsc2UsXG4gICAgICAgICAgICBxdWVzdGlvbjM6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5faGFuZGxlRmlsdGVySW5wdXQgPSB0aGlzLl9oYW5kbGVGaWx0ZXJJbnB1dC5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIF9oYW5kbGVGaWx0ZXJJbnB1dChlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZmlsdGVyVmFsdWU6IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgdGhpcy5fY2hlY2tNYXJnaW5TdGF0dXMoKTtcbiAgICB9XG5cbiAgICBfY2hlY2tNYXJnaW5TdGF0dXMocHJvcHMgPSB0aGlzLnByb3BzKSB7XG4gICAgICAgIGNoZWNrTWFyZ2luU3RhdHVzKHByb3BzLmFjY291bnQpLnRoZW4oc3RhdHVzID0+IHtcbiAgICAgICAgICAgIGxldCBnbG9iYWxNYXJnaW5TdGF0dXMgPSBudWxsO1xuICAgICAgICAgICAgZm9yIChsZXQgYXNzZXQgaW4gc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsTWFyZ2luU3RhdHVzID1cbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzW2Fzc2V0XS5zdGF0dXNDbGFzcyB8fCBnbG9iYWxNYXJnaW5TdGF0dXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtnbG9iYWxNYXJnaW5TdGF0dXN9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhucCkge1xuICAgICAgICBpZiAobnAuYWNjb3VudCAhPT0gdGhpcy5wcm9wcy5hY2NvdW50KSB7XG4gICAgICAgICAgICB0aGlzLl9jaGVja01hcmdpblN0YXR1cyhucCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhuZXh0UHJvcHMuYmFsYW5jZXMsIHRoaXMucHJvcHMuYmFsYW5jZXMpIHx8XG4gICAgICAgICAgICBuZXh0UHJvcHMuYWNjb3VudCAhPT0gdGhpcy5wcm9wcy5hY2NvdW50IHx8XG4gICAgICAgICAgICBuZXh0UHJvcHMuaXNNeUFjY291bnQgIT09IHRoaXMucHJvcHMuaXNNeUFjY291bnQgfHxcbiAgICAgICAgICAgIG5leHRQcm9wcy5zZXR0aW5ncyAhPT0gdGhpcy5wcm9wcy5zZXR0aW5ncyB8fFxuICAgICAgICAgICAgbmV4dFByb3BzLmhpZGRlbkFzc2V0cyAhPT0gdGhpcy5wcm9wcy5oaWRkZW5Bc3NldHMgfHxcbiAgICAgICAgICAgICF1dGlscy5hcmVfZXF1YWxfc2hhbGxvdyhuZXh0U3RhdGUsIHRoaXMuc3RhdGUpIHx8XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmZpbHRlclZhbHVlICE9PSBuZXh0U3RhdGUuZmlsdGVyVmFsdWUgfHxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZW5hYmxlZENvbHVtbnMgIT09IG5leHRTdGF0ZS5lbmFibGVkQ29sdW1uc1xuICAgICAgICApO1xuICAgIH1cblxuICAgIF9jaGFuZ2VTaG93bkFzc2V0cyhzaG93bkFzc2V0cyA9IFwiYWN0aXZlXCIpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93bkFzc2V0c1xuICAgICAgICB9KTtcbiAgICAgICAgU2V0dGluZ3NBY3Rpb25zLmNoYW5nZVZpZXdTZXR0aW5nKHtcbiAgICAgICAgICAgIHNob3duQXNzZXRzXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF90b2dnbGVIaWRlUHJvcG9zYWwoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaGlkZUZpc2hpbmdQcm9wb3NhbHM6ICF0aGlzLnN0YXRlLmhpZGVGaXNoaW5nUHJvcG9zYWxzXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF90b2dnbGVRMSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBxdWVzdGlvbjE6ICF0aGlzLnN0YXRlLnF1ZXN0aW9uMVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfdG9nZ2xlUTIoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgcXVlc3Rpb24yOiAhdGhpcy5zdGF0ZS5xdWVzdGlvbjJcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX3RvZ2dsZVEzKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHF1ZXN0aW9uMzogIXRoaXMuc3RhdGUucXVlc3Rpb24zXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9zaG93UHJvcG9zYWxzKCkge1xuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlU2V0dGluZyh7XG4gICAgICAgICAgICBzZXR0aW5nOiBcInNob3dQcm9wb3NlZFR4XCIsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7YWNjb3VudCwgaGlkZGVuQXNzZXRzLCBzZXR0aW5ncywgb3JkZXJzfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB7c2hvd25Bc3NldHN9ID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJlZmVycmVkVW5pdCA9ICFzZXR0aW5ncy5nZXQoXCJ1bml0XCIpXG4gICAgICAgICAgICA/IHRoaXMucHJvcHMuY29yZV9hc3NldC5nZXQoXCJzeW1ib2xcIilcbiAgICAgICAgICAgIDogc2V0dGluZ3MuZ2V0KFwidW5pdFwiKTtcblxuICAgICAgICBsZXQgY2FsbF9vcmRlcnMgPSBbXSxcbiAgICAgICAgICAgIGNvbGxhdGVyYWwgPSB7fSxcbiAgICAgICAgICAgIGRlYnQgPSB7fTtcblxuICAgICAgICAvLyBSZXF1ZXN0IGFsbCBiYWxhbmNlIG9iamVjdHMgZm9yIGRhc2hib2FyZCB2aWV3XG4gICAgICAgIENoYWluU3RvcmUucmVxdWVzdEFsbERhdGFGb3JBY2NvdW50KGFjY291bnQudG9KUygpLmlkLCBcImJhbGFuY2VcIik7XG5cbiAgICAgICAgaWYgKGFjY291bnQudG9KUyAmJiBhY2NvdW50LmhhcyhcImNhbGxfb3JkZXJzXCIpKVxuICAgICAgICAgICAgY2FsbF9vcmRlcnMgPSBhY2NvdW50LmdldChcImNhbGxfb3JkZXJzXCIpLnRvSlMoKTtcbiAgICAgICAgbGV0IGluY2x1ZGVkUG9ydGZvbGlvTGlzdCwgaGlkZGVuUG9ydGZvbGlvTGlzdDtcbiAgICAgICAgbGV0IGFjY291bnRfYmFsYW5jZXMgPSBhY2NvdW50LmdldChcImJhbGFuY2VzXCIpO1xuICAgICAgICBsZXQgaW5jbHVkZWRCYWxhbmNlc0xpc3QgPSBJbW11dGFibGUuTGlzdCgpLFxuICAgICAgICAgICAgaGlkZGVuQmFsYW5jZXNMaXN0ID0gSW1tdXRhYmxlLkxpc3QoKTtcbiAgICAgICAgY2FsbF9vcmRlcnMuZm9yRWFjaChjYWxsSUQgPT4ge1xuICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QoY2FsbElEKTtcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIGxldCBjb2xsYXRlcmFsQXNzZXQgPSBwb3NpdGlvbi5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgIFwiY2FsbF9wcmljZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImJhc2VcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgaWYgKCFjb2xsYXRlcmFsW2NvbGxhdGVyYWxBc3NldF0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGF0ZXJhbFtjb2xsYXRlcmFsQXNzZXRdID0gcGFyc2VJbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi5nZXQoXCJjb2xsYXRlcmFsXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgMTBcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2xsYXRlcmFsW2NvbGxhdGVyYWxBc3NldF0gKz0gcGFyc2VJbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi5nZXQoXCJjb2xsYXRlcmFsXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgMTBcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGRlYnRBc3NldCA9IHBvc2l0aW9uLmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgXCJjYWxsX3ByaWNlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwicXVvdGVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgaWYgKCFkZWJ0W2RlYnRBc3NldF0pIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidFtkZWJ0QXNzZXRdID0gcGFyc2VJbnQocG9zaXRpb24uZ2V0KFwiZGVidFwiKSwgMTApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnRbZGVidEFzc2V0XSArPSBwYXJzZUludChwb3NpdGlvbi5nZXQoXCJkZWJ0XCIpLCAxMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYWNjb3VudF9iYWxhbmNlcykge1xuICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBiYWxhbmNlIG9iamVjdHMgdGhhdCBoYXZlIDAgYmFsYW5jZSBvciBhcmUgbm90IGluY2x1ZGVkIGluIG9wZW4gb3JkZXJzXG4gICAgICAgICAgICBhY2NvdW50X2JhbGFuY2VzID0gYWNjb3VudF9iYWxhbmNlcy5maWx0ZXIoKGEsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGJhbGFuY2VPYmplY3QgPSBDaGFpblN0b3JlLmdldE9iamVjdChhKTtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGJhbGFuY2VPYmplY3QgJiZcbiAgICAgICAgICAgICAgICAgICAgKCFiYWxhbmNlT2JqZWN0LmdldChcImJhbGFuY2VcIikgJiYgIW9yZGVyc1tpbmRleF0pXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gU2VwYXJhdGUgYmFsYW5jZXMgaW50byBoaWRkZW4gYW5kIGluY2x1ZGVkXG4gICAgICAgICAgICBhY2NvdW50X2JhbGFuY2VzLmZvckVhY2goKGEsIGFzc2V0X3R5cGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQoYXNzZXRfdHlwZSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgYXNzZXROYW1lID0gXCJcIjtcbiAgICAgICAgICAgICAgICBsZXQgZmlsdGVyID0gXCJcIjtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlciA9IHRoaXMuc3RhdGUuZmlsdGVyVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gU3RyaW5nKHRoaXMuc3RhdGUuZmlsdGVyVmFsdWUpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXROYW1lID0gYXNzZXQuZ2V0KFwic3ltYm9sXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB7aXNCaXRBc3NldH0gPSB1dGlscy5yZXBsYWNlTmFtZShhc3NldCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0JpdEFzc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWUgPSBcImJpdFwiICsgYXNzZXROYW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBoaWRkZW5Bc3NldHMuaW5jbHVkZXMoYXNzZXRfdHlwZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgYXNzZXROYW1lLmluY2x1ZGVzKGZpbHRlcilcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuQmFsYW5jZXNMaXN0ID0gaGlkZGVuQmFsYW5jZXNMaXN0LnB1c2goYSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhc3NldE5hbWUuaW5jbHVkZXMoZmlsdGVyKSkge1xuICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZEJhbGFuY2VzTGlzdCA9IGluY2x1ZGVkQmFsYW5jZXNMaXN0LnB1c2goYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcG9ydGZvbGlvSGlkZGVuQXNzZXRzQmFsYW5jZSA9IChcbiAgICAgICAgICAgIDxUb3RhbEJhbGFuY2VWYWx1ZSBub1RpcCBiYWxhbmNlcz17aGlkZGVuQmFsYW5jZXNMaXN0fSBoaWRlX2Fzc2V0IC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IHBvcnRmb2xpb0FjdGl2ZUFzc2V0c0JhbGFuY2UgPSAoXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWVcbiAgICAgICAgICAgICAgICBub1RpcFxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXtpbmNsdWRlZEJhbGFuY2VzTGlzdH1cbiAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgICBsZXQgb3JkZXJzVmFsdWUgPSAoXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWVcbiAgICAgICAgICAgICAgICBub1RpcFxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXtJbW11dGFibGUuTGlzdCgpfVxuICAgICAgICAgICAgICAgIG9wZW5PcmRlcnM9e29yZGVyc31cbiAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgICBsZXQgbWFyZ2luVmFsdWUgPSAoXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWVcbiAgICAgICAgICAgICAgICBub1RpcFxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXtJbW11dGFibGUuTGlzdCgpfVxuICAgICAgICAgICAgICAgIGRlYnQ9e2RlYnR9XG4gICAgICAgICAgICAgICAgY29sbGF0ZXJhbD17Y29sbGF0ZXJhbH1cbiAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgICBsZXQgZGVidFZhbHVlID0gKFxuICAgICAgICAgICAgPFRvdGFsQmFsYW5jZVZhbHVlXG4gICAgICAgICAgICAgICAgbm9UaXBcbiAgICAgICAgICAgICAgICBiYWxhbmNlcz17SW1tdXRhYmxlLkxpc3QoKX1cbiAgICAgICAgICAgICAgICBkZWJ0PXtkZWJ0fVxuICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgICAgIGxldCBjb2xsYXRlcmFsVmFsdWUgPSAoXG4gICAgICAgICAgICA8VG90YWxCYWxhbmNlVmFsdWVcbiAgICAgICAgICAgICAgICBub1RpcFxuICAgICAgICAgICAgICAgIGJhbGFuY2VzPXtJbW11dGFibGUuTGlzdCgpfVxuICAgICAgICAgICAgICAgIGNvbGxhdGVyYWw9e2NvbGxhdGVyYWx9XG4gICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCB0b3RhbFZhbHVlVGV4dCA9IChcbiAgICAgICAgICAgIDxUcmFuc2xhdGVXaXRoTGlua3NcbiAgICAgICAgICAgICAgICBub0xpbmtcbiAgICAgICAgICAgICAgICBzdHJpbmc9XCJhY2NvdW50LnRvdGFsXCJcbiAgICAgICAgICAgICAgICBrZXlzPXtbe3R5cGU6IFwiYXNzZXRcIiwgdmFsdWU6IHByZWZlcnJlZFVuaXQsIGFyZzogXCJhc3NldFwifV19XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGluY2x1ZGVkUG9ydGZvbGlvQmFsYW5jZSA9IChcbiAgICAgICAgICAgIDxzcGFuIGtleT1cInBvcnRmb2xpb1wiIGNsYXNzTmFtZT1cInRvdGFsLXZhbHVlXCI+XG4gICAgICAgICAgICAgICAge3RvdGFsVmFsdWVUZXh0fToge3BvcnRmb2xpb0FjdGl2ZUFzc2V0c0JhbGFuY2V9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgaGlkZGVuUG9ydGZvbGlvQmFsYW5jZSA9IChcbiAgICAgICAgICAgIDxzcGFuIGtleT1cInBvcnRmb2xpb1wiIGNsYXNzTmFtZT1cInRvdGFsLXZhbHVlXCI+XG4gICAgICAgICAgICAgICAge3RvdGFsVmFsdWVUZXh0fToge3BvcnRmb2xpb0hpZGRlbkFzc2V0c0JhbGFuY2V9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICk7XG5cbiAgICAgICAgaW5jbHVkZWRQb3J0Zm9saW9MaXN0ID0gKFxuICAgICAgICAgICAgPEFjY291bnRQb3J0Zm9saW9MaXN0XG4gICAgICAgICAgICAgICAgYmFsYW5jZUxpc3Q9e2luY2x1ZGVkQmFsYW5jZXNMaXN0fVxuICAgICAgICAgICAgICAgIG9wdGlvbmFsQXNzZXRzPXtcbiAgICAgICAgICAgICAgICAgICAgIXRoaXMuc3RhdGUuZmlsdGVyVmFsdWUgPyB0aGlzLnN0YXRlLmFsd2F5c1Nob3dBc3NldHMgOiBudWxsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZpc2libGU9e3RydWV9XG4gICAgICAgICAgICAgICAgcHJlZmVycmVkVW5pdD17cHJlZmVycmVkVW5pdH1cbiAgICAgICAgICAgICAgICBjb3JlQXNzZXQ9e3RoaXMucHJvcHMuY29yZV9hc3NldH1cbiAgICAgICAgICAgICAgICBjb3JlU3ltYm9sPXt0aGlzLnByb3BzLmNvcmVfYXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxuICAgICAgICAgICAgICAgIGhpZGRlbkFzc2V0cz17aGlkZGVuQXNzZXRzfVxuICAgICAgICAgICAgICAgIG9yZGVycz17b3JkZXJzfVxuICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudH1cbiAgICAgICAgICAgICAgICBpc015QWNjb3VudD17dGhpcy5wcm9wcy5pc015QWNjb3VudH1cbiAgICAgICAgICAgICAgICBiYWxhbmNlcz17dGhpcy5wcm9wcy5iYWxhbmNlc31cbiAgICAgICAgICAgICAgICBleHRyYVJvdz17aW5jbHVkZWRQb3J0Zm9saW9CYWxhbmNlfVxuICAgICAgICAgICAgICAgIHZpZXdTZXR0aW5ncz17dGhpcy5wcm9wcy52aWV3U2V0dGluZ3N9XG4gICAgICAgICAgICAgICAgY2FsbE9yZGVycz17Y2FsbF9vcmRlcnN9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuXG4gICAgICAgIGhpZGRlblBvcnRmb2xpb0xpc3QgPSAoXG4gICAgICAgICAgICA8QWNjb3VudFBvcnRmb2xpb0xpc3RcbiAgICAgICAgICAgICAgICBiYWxhbmNlTGlzdD17aGlkZGVuQmFsYW5jZXNMaXN0fVxuICAgICAgICAgICAgICAgIG9wdGlvbmFsQXNzZXRzPXtcbiAgICAgICAgICAgICAgICAgICAgIXRoaXMuc3RhdGUuZmlsdGVyVmFsdWUgPyB0aGlzLnN0YXRlLmFsd2F5c1Nob3dBc3NldCA6IG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmlzaWJsZT17ZmFsc2V9XG4gICAgICAgICAgICAgICAgcHJlZmVycmVkVW5pdD17cHJlZmVycmVkVW5pdH1cbiAgICAgICAgICAgICAgICBjb3JlU3ltYm9sPXt0aGlzLnByb3BzLmNvcmVfYXNzZXQuZ2V0KFwic3ltYm9sXCIpfVxuICAgICAgICAgICAgICAgIHNldHRpbmdzPXtzZXR0aW5nc31cbiAgICAgICAgICAgICAgICBoaWRkZW5Bc3NldHM9e2hpZGRlbkFzc2V0c31cbiAgICAgICAgICAgICAgICBvcmRlcnM9e29yZGVyc31cbiAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnR9XG4gICAgICAgICAgICAgICAgaXNNeUFjY291bnQ9e3RoaXMucHJvcHMuaXNNeUFjY291bnR9XG4gICAgICAgICAgICAgICAgYmFsYW5jZXM9e3RoaXMucHJvcHMuYmFsYW5jZXN9XG4gICAgICAgICAgICAgICAgZXh0cmFSb3c9e2hpZGRlblBvcnRmb2xpb0JhbGFuY2V9XG4gICAgICAgICAgICAgICAgdmlld1NldHRpbmdzPXt0aGlzLnByb3BzLnZpZXdTZXR0aW5nc31cbiAgICAgICAgICAgICAgICBlbmFibGVkQ29sdW1ucz17dGhpcy5zdGF0ZS5lbmFibGVkQ29sdW1uc31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gYWRkIHVuaWNvZGUgbm9uLWJyZWFraW5nIHNwYWNlIGFzIHN1YnRleHQgdG8gQWN0aXZpdHkgVGFiIHRvIGVuc3VyZSB0aGF0IGFsbCB0aXRsZXMgYXJlIGFsaWduZWRcbiAgICAgICAgLy8gaG9yaXpvbnRhbGx5XG4gICAgICAgIGNvbnN0IGhpZGRlblN1YlRleHQgPSBcIlxcdTAwYTBcIjtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRlbnQgYXBwLXRhYmxlcyBuby1wYWRkaW5nXCIgcmVmPVwiYXBwVGFibGVzXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIHNtYWxsLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1jb250YWluZXIgZ2VuZXJpYy1ib3JkZXJlZC1ib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEFjdGl2ZVRhYj17MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmc9XCJvdmVydmlld1RhYlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWNjb3VudC10YWJzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzQ2xhc3M9XCJhY2NvdW50LW92ZXJ2aWV3IG5vLXBhZGRpbmcgYm9yZGVyZWQtaGVhZGVyIGNvbnRlbnQtYmxvY2tcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LnBvcnRmb2xpb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRleHQ9e3BvcnRmb2xpb0FjdGl2ZUFzc2V0c0JhbGFuY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1zZWxlY3RvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWx0ZXIgaW5saW5lLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlYXJjaElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmZpbHRlclZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5faGFuZGxlRmlsdGVySW5wdXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNlbGVjdG9yIGlubGluZS1ibG9ja1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBcIjhweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y25hbWVzKFwiaW5saW5lLWJsb2NrXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3duQXNzZXRzICE9IFwiYWN0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgIT0gXCJhY3RpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5fY2hhbmdlU2hvd25Bc3NldHMuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY3RpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgpID0+IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuaGlkZV9oaWRkZW5cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtoaWRkZW5CYWxhbmNlc0xpc3Quc2l6ZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbmxpbmUtYmxvY2tcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgIT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaGlkZGVuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgIT0gXCJoaWRkZW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX2NoYW5nZVNob3duQXNzZXRzLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJoaWRkZW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCkgPT4ge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5zaG93X2hpZGRlblwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbmFtZXMoXCJpbmxpbmUtYmxvY2tcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5hY3RpdmU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgIT0gXCJ2aXN1YWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93bkFzc2V0cyAhPSBcInZpc3VhbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9jaGFuZ2VTaG93bkFzc2V0cy5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInZpc3VhbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCkgPT4ge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5zaG93X3Zpc3VhbFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Nob3duQXNzZXRzICE9IFwidmlzdWFsXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93bkFzc2V0cyA9PT0gXCJoaWRkZW5cIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZGVuQmFsYW5jZXNMaXN0LnNpemUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGRlblBvcnRmb2xpb0xpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZFBvcnRmb2xpb0xpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFRyZWVtYXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlT2JqZWN0cz17aW5jbHVkZWRCYWxhbmNlc0xpc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImFjY291bnQub3Blbl9vcmRlcnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUZXh0PXtvcmRlcnNWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50T3JkZXJzIHsuLi50aGlzLnByb3BzfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidG90YWwtdmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0b3RhbFZhbHVlVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge29yZGVyc1ZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0FjY291bnRPcmRlcnM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiYWNjb3VudC5jb2xsYXRlcmFsc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRleHQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmdsb2JhbE1hcmdpblN0YXR1c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bWFyZ2luVmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnZW5lcmljLWJvcmRlcmVkLWJveFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxNYXJnaW5Qb3NpdGlvbnNUYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRVbml0PXtwcmVmZXJyZWRVbml0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJkYXNoYm9hcmQtdGFibGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsT3JkZXJzPXtjYWxsX29yZGVyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9XCJ0b3RhbC12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnt0b3RhbFZhbHVlVGV4dH08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2RlYnRWYWx1ZX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLW1lZGl1bVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb2xsYXRlcmFsVmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e21hcmdpblZhbHVlfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiY29sdW1uLWhpZGUtc21hbGxcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiNFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9NYXJnaW5Qb3NpdGlvbnNUYWJsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJhY2NvdW50LmFjdGl2aXR5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViVGV4dD17aGlkZGVuU3ViVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxSZWNlbnRUcmFuc2FjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRzTGlzdD17SW1tdXRhYmxlLmZyb21KUyhbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5nZXQoXCJpZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYWN0Vmlldz17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93TW9yZT17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxIZWlnaHQ9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1pdD17MTAwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0ZpbHRlcnM9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXNoYm9hcmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY2NvdW50LmdldChcInByb3Bvc2Fsc1wiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50LmdldChcInByb3Bvc2Fsc1wiKS5zaXplICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJleHBsb3Jlci5wcm9wb3NhbHMudGl0bGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViVGV4dD17U3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuZ2V0KFwicHJvcG9zYWxzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYWNjb3VudC5nZXQoXCJwcm9wb3NhbHNcIikuc2l6ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnNldHRpbmdzLmdldChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNob3dQcm9wb3NlZFR4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fdG9nZ2xlSGlkZVByb3Bvc2FsLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7Y3Vyc29yOiBcInBvaW50ZXJcIn19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAucHJvcG9zZV91bmhpZGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTd2l0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbjogMTZ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlkZUZpc2hpbmdQcm9wb3NhbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX3RvZ2dsZUhpZGVQcm9wb3NhbC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LmRlYWN0aXZhdGVfc3VzcGljaW91c19wcm9wb3NhbHNcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuc2V0dGluZ3MuZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2hvd1Byb3Bvc2VkVHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFByb3Bvc2Fsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJkYXNoYm9hcmQtdGFibGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlRmlzaGluZ1Byb3Bvc2Fscz17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVGaXNoaW5nUHJvcG9zYWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshdGhpcy5wcm9wcy5zZXR0aW5ncy5nZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG93UHJvcG9zZWRUeFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZGRpbmdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucHJvcG9zZWRfdHJhbnNhY3Rpb25zLmFkdmFuY2VkX2ZlYXR1cmVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucHJvcG9zZWRfdHJhbnNhY3Rpb25zLnF1ZXN0aW9uMVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW46IDE2fX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5xdWVzdGlvbjFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX3RvZ2dsZVExLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWRDaGlsZHJlbj17XCJZZXNcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bkNoZWNrZWRDaGlsZHJlbj17XCJOb1wifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnF1ZXN0aW9uMSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucHJvcG9zZWRfdHJhbnNhY3Rpb25zLnF1ZXN0aW9uMlwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFN3aXRjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbjogMTZ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucXVlc3Rpb24yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX3RvZ2dsZVEyLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWRDaGlsZHJlbj17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlllc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5DaGVja2VkQ2hpbGRyZW49e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJOb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnF1ZXN0aW9uMiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucHJvcG9zZWRfdHJhbnNhY3Rpb25zLnF1ZXN0aW9uM1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFN3aXRjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbjogMTZ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucXVlc3Rpb24zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX3RvZ2dsZVEzLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWRDaGlsZHJlbj17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlllc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5DaGVja2VkQ2hpbGRyZW49e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJOb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5xdWVzdGlvbjMgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogMTYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogMTZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQucHJvcG9zZWRfdHJhbnNhY3Rpb25zLmFuc3dlcmVkX25vXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiAxNlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9zaG93UHJvcG9zYWxzLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnByb3Bvc2VkX3RyYW5zYWN0aW9ucy5zaG93X21lX3Byb3Bvc2Fsc1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5BY2NvdW50T3ZlcnZpZXcgPSBBc3NldFdyYXBwZXIoQWNjb3VudE92ZXJ2aWV3LCB7cHJvcE5hbWVzOiBbXCJjb3JlX2Fzc2V0XCJdfSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFjY291bnRPdmVydmlld1dyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIDxCYWxhbmNlV3JhcHBlciB7Li4udGhpcy5wcm9wc30gd3JhcD17QWNjb3VudE92ZXJ2aWV3fSAvPjtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgTWFyZ2luUG9zaXRpb24gZnJvbSBcIi4vTWFyZ2luUG9zaXRpb25cIjtcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCIuLi9VdGlsaXR5L0JpbmRUb0NoYWluU3RhdGVcIjtcbmltcG9ydCBBc3NldFdyYXBwZXIgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXRXcmFwcGVyXCI7XG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcblxuaW1wb3J0IFRyYW5zbGF0ZVdpdGhMaW5rcyBmcm9tIFwiLi4vVXRpbGl0eS9UcmFuc2xhdGVXaXRoTGlua3NcIjtcbmltcG9ydCBJbW11dGFibGUgZnJvbSBcImltbXV0YWJsZVwiO1xuaW1wb3J0IHtQb3BvdmVyfSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XG5cbmNvbnN0IGFsaWduUmlnaHQgPSB7dGV4dEFsaWduOiBcInJpZ2h0XCJ9O1xuY29uc3QgYWxpZ25MZWZ0ID0ge3RleHRBbGlnbjogXCJsZWZ0XCJ9O1xuXG4vKipcbiAqIFJlbmRlcnMgd2hvbGUgbWFyZ2luIGxpc3QgaW5jbHVkaW5nIGNhbGwgb3JkZXJzIGFuZCBwbGFjZWhvbGRlcnNcbiAqL1xuY2xhc3MgTGlzdEdlbmVyYXRvciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgY2FsbE9yZGVyczogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdHNMaXN0XG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgYXNzZXRzUHJvcHNDb3VudDogMCxcbiAgICAgICAgICAgIG9yZGVyc0pzb246IFwiXCJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgIC8vIGlmIHdlIGdvdCBuZXcgYml0YXNzZXQgaW5mb1xuICAgICAgICAvLyBvciBjYWxsIG9yZGVycyBjaGFuZ2VkXG4gICAgICAgIC8vIHRoZW4gcmVjYWxjdWxhdGUgXCJjYWNoZVwiIG9mIG1hcmluZyBpdGVtc1xuXG4gICAgICAgIGNvbnN0IGNhbGxPcmRlcnNKc29uID0gSlNPTi5zdHJpbmdpZnkobmV4dFByb3BzLmNhbGxPcmRlcnMpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHByZXZTdGF0ZSA9PSBudWxsIHx8XG4gICAgICAgICAgICBwcmV2U3RhdGUuYXNzZXRzUHJvcHNDb3VudCAhPSBuZXh0UHJvcHMuYml0QXNzZXRzLmxlbmd0aCB8fFxuICAgICAgICAgICAgcHJldlN0YXRlLm9yZGVyc0pzb24gIT0gY2FsbE9yZGVyc0pzb25cbiAgICAgICAgKSB7XG4gICAgICAgICAgICBsZXQgYXNzZXRzID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICAvLyBjb25zdHJ1Y3QgbWFwIG9mIGJpdGFzc2V0c1xuICAgICAgICAgICAgbGV0IGFzc2V0c01hcCA9IHt9O1xuICAgICAgICAgICAgLy8gaW5kZXggdG8gdHJhY2sgYXNzZXQgaW5mb1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcblxuICAgICAgICAgICAgbmV4dFByb3BzLmJpdEFzc2V0cy5mb3JFYWNoKG8gPT4ge1xuICAgICAgICAgICAgICAgIGFzc2V0c01hcFtvLmdldChcImlkXCIpXSA9IGluZGV4Kys7XG4gICAgICAgICAgICAgICAgYXNzZXRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBhc3NldDogbyxcbiAgICAgICAgICAgICAgICAgICAgaGFzX21hcmdpbl9vcmRlcjogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAobmV4dFByb3BzLmNhbGxPcmRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIGFkZCB0byBpdGVyYXRlZCBiaXRhc2V0cyBpdGVtcyB0aGF0IHdhc24ndCBsaXN0ZWQgYnkgZGVmYXVsdCAoY29tcG9uZW50J3MgY2FsbE9yZGVycyBwcm9wKVxuICAgICAgICAgICAgICAgIG5leHRQcm9wcy5jYWxsT3JkZXJzLmZvckVhY2gobyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNvbWV0aW1lcyB3ZSBnZXQgdW5kZWZpbmVkIHJlc29uc2VzIG9uIHZlcnkgZmlyc3QgYXBpIHJlcXVlc3RzXG4gICAgICAgICAgICAgICAgICAgIGlmICghIW8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhc3NldElkID0gby5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjYWxsX3ByaWNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhc3NldHNNYXBbYXNzZXRJZF0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdBc3NldEluZm8gPSBDaGFpblN0b3JlLmdldE9iamVjdChhc3NldElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5ld0Fzc2V0SW5mbyAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0c01hcFthc3NldElkXSA9IGluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0OiBuZXdBc3NldEluZm8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfbWFyZ2luX29yZGVyOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI6IG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXJrIGFzIG1hcmdpbiBvcmRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0c1thc3NldHNNYXBbYXNzZXRJZF1dLmhhc19tYXJnaW5fb3JkZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0c1thc3NldHNNYXBbYXNzZXRJZF1dLm9yZGVyID0gbztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFzc2V0c1Byb3BzQ291bnQ6IG5leHRQcm9wcy5iaXRBc3NldHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGFzc2V0czogYXNzZXRzLFxuICAgICAgICAgICAgICAgIG9yZGVyc0pzb246IGNhbGxPcmRlcnNKc29uXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHByZXZTdGF0ZTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7YWNjb3VudH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIGxldCByb3dzID0gdGhpcy5zdGF0ZS5hc3NldHNcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gYSxiIC0gb3JkZXIgQ2hhaW5PYmplY3Qnc1xuICAgICAgICAgICAgICAgIC8vIGNvdWxkIGJlIGRvbmUgdmlhIGNvbXBvbmVudCdzIHByb3BlcnR5IGBvcmRlcl9ieWBcblxuICAgICAgICAgICAgICAgIC8vIGlmIGJvdGggaGF2ZSBhbiBvcmRlciwgc29ydCBieSBkZWJ0XG4gICAgICAgICAgICAgICAgaWYgKGEuaGFzX21hcmdpbl9vcmRlciAmJiBiLmhhc19tYXJnaW5fb3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIub3JkZXIuZ2V0KFwiZGVidFwiKSAtIGEub3JkZXIuZ2V0KFwiZGVidFwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEuaGFzX21hcmdpbl9vcmRlciB8fCBiLmhhc19tYXJnaW5fb3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaGF2aW5nIGFuIG9yZGVyIGdvZXMgYWJvdmUgaGF2aW5nIG5vIG9yZGVyXG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuaGFzX21hcmdpbl9vcmRlciA/IC0xIDogMTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiBib3RoIGhhdmUgbm8gb3JkZXIsIHNvcnQgYnkgc3ltYm9sXG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGFOYW1lID0gdXRpbHMucmVwbGFjZU5hbWUoYS5hc3NldCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBiTmFtZSA9IHV0aWxzLnJlcGxhY2VOYW1lKGIuYXNzZXQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBhU3ltYm9sID1cbiAgICAgICAgICAgICAgICAgICAgICAgIChhTmFtZS5wcmVmaXggIT0gbnVsbCA/IGFOYW1lLnByZWZpeCA6IFwiXCIpICsgYU5hbWUubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJTeW1ib2wgPVxuICAgICAgICAgICAgICAgICAgICAgICAgKGJOYW1lLnByZWZpeCAhPSBudWxsID8gYk5hbWUucHJlZml4IDogXCJcIikgKyBiTmFtZS5uYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhU3ltYm9sLmxvY2FsZUNvbXBhcmUoYlN5bWJvbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5tYXAoYSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGRlYnRBc3NldCxcbiAgICAgICAgICAgICAgICAgICAgY29sbGF0ZXJhbEFzc2V0LFxuICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvLyB1c2VyIGhhcyBtYXJnaW4gb24gdGhpcyBhc3NldFxuICAgICAgICAgICAgICAgIGlmIChhLmhhc19tYXJnaW5fb3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9yZGVyID0gYS5vcmRlcjtcblxuICAgICAgICAgICAgICAgICAgICBkZWJ0QXNzZXQgPSBvcmRlci5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNhbGxfcHJpY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicXVvdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgY29sbGF0ZXJhbEFzc2V0ID0gb3JkZXIuZ2V0SW4oW1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJjYWxsX3ByaWNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJhc2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgICAgICAgICBdKTtcblxuICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZCA9IG9yZGVyLmdldChcImlkXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnRBc3NldCA9IGEuYXNzZXQuZ2V0KFwiaWRcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxhdGVyYWxBc3NldCA9IGEuYXNzZXQuZ2V0SW4oW1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInNob3J0X2JhY2tpbmdfYXNzZXRcIlxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8TWFyZ2luUG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YS5hc3NldC5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdD17b3JkZXJfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidEFzc2V0PXtkZWJ0QXNzZXR9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXRlcmFsQXNzZXQ9e2NvbGxhdGVyYWxBc3NldH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gPHRib2R5Pntyb3dzfTwvdGJvZHk+O1xuICAgIH1cbn1cblxuTGlzdEdlbmVyYXRvciA9IEJpbmRUb0NoYWluU3RhdGUoTGlzdEdlbmVyYXRvcik7XG5MaXN0R2VuZXJhdG9yID0gQXNzZXRXcmFwcGVyKExpc3RHZW5lcmF0b3IsIHtcbiAgICBwcm9wTmFtZXM6IFtcImJpdEFzc2V0c1wiXSxcbiAgICBkZWZhdWx0UHJvcHM6IHtcbiAgICAgICAgYml0QXNzZXRzOiBbXG4gICAgICAgICAgICBcIjEuMy4xMDNcIixcbiAgICAgICAgICAgIFwiMS4zLjEyMFwiLFxuICAgICAgICAgICAgXCIxLjMuMTIxXCIsXG4gICAgICAgICAgICBcIjEuMy4xMzI1XCIsXG4gICAgICAgICAgICBcIjEuMy4xMDVcIixcbiAgICAgICAgICAgIFwiMS4zLjEwNlwiLFxuICAgICAgICAgICAgXCIxLjMuMTEzXCJcbiAgICAgICAgXVxuICAgIH0sXG4gICAgYXNMaXN0OiB0cnVlXG59KTtcblxuY29uc3QgTWFyZ2luUG9zaXRpb25zVGFibGUgPSAoe1xuICAgIGNhbGxPcmRlcnMsXG4gICAgYWNjb3VudCxcbiAgICBjbGFzc05hbWUsXG4gICAgY2hpbGRyZW4sXG4gICAgcHJlZmVycmVkVW5pdFxufSkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICAgIDx0YWJsZSBjbGFzc05hbWU9e1widGFibGUgdGFibGUtaG92ZXIgXCIgKyBjbGFzc05hbWV9PlxuICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXthbGlnbkxlZnR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIuYXNzZXQudGl0bGVcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e2FsaWduUmlnaHR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UuYmFsYW5jZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17YWxpZ25SaWdodH0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJ0cmFuc2FjdGlvbi5ib3Jyb3dfYW1vdW50XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1tZWRpdW1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInRyYW5zYWN0aW9uLmNvbGxhdGVyYWxcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UG9wb3ZlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInRvcFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJoZWFkZXIuY29sbGF0ZXJhbF9yYXRpb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5jb2xsX3JhdGlvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImJvcnJvdy5jb2xsX3JhdGlvXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wb3Zlcj5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJ0b3BcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7d2lkdGg6IFwiNjAwcHhcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJvcnJvdy50YXJnZXRfY29sbGF0ZXJhbF9yYXRpb19leHBsYW5hdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJib3Jyb3cudGFyZ2V0X2NvbGxhdGVyYWxfcmF0aW9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYm9ycm93LnRhcmdldF9jb2xsYXRlcmFsX3JhdGlvX3Nob3J0XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wb3Zlcj5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXthbGlnblJpZ2h0fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVXaXRoTGlua3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub0xpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmc9XCJhY2NvdW50LnRvdGFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcmVmZXJyZWRVbml0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnOiBcImFzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9e2FsaWduUmlnaHR9IGNsYXNzTmFtZT1cImNvbHVtbi1oaWRlLXNtYWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UG9wb3ZlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInRvcFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAuY2FsbF9wcmljZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5jYWxsXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wb3Zlcj5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJ0b3BcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLmZlZWRfcHJpY2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UuZmVlZF9wcmljZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1BvcG92ZXI+XG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiIHN0eWxlPXthbGlnbkxlZnR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIuYXNzZXRzLnVuaXRzXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7dGV4dEFsaWduOiBcImNlbnRlclwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5tYXJrZXRcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJib3Jyb3cuYWRqdXN0X3Nob3J0XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwidHJhbnNmZXIuY2xvc2VcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgPExpc3RHZW5lcmF0b3JcbiAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50fVxuICAgICAgICAgICAgICAgIGNhbGxPcmRlcnM9e0ltbXV0YWJsZS5MaXN0KGNhbGxPcmRlcnMpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDx0Ym9keT57Y2hpbGRyZW59PC90Ym9keT5cbiAgICAgICAgPC90YWJsZT5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTWFyZ2luUG9zaXRpb25zVGFibGU7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcbmltcG9ydCBGb3JtYXR0ZWRQcmljZSBmcm9tIFwiLi4vVXRpbGl0eS9Gb3JtYXR0ZWRQcmljZVwiO1xuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xuaW1wb3J0IEFzc2V0TmFtZSBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldE5hbWVcIjtcbmltcG9ydCBBc3NldEltYWdlIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0SW1hZ2VcIjtcbmltcG9ydCBCb3Jyb3dNb2RhbCBmcm9tIFwiLi4vTW9kYWwvQm9ycm93TW9kYWxcIjtcbmltcG9ydCBXYWxsZXRBcGkgZnJvbSBcImFwaS9XYWxsZXRBcGlcIjtcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XG5pbXBvcnQgV2FsbGV0RGIgZnJvbSBcInN0b3Jlcy9XYWxsZXREYlwiO1xuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcbmltcG9ydCBJY29uIGZyb20gXCIuLi9JY29uL0ljb25cIjtcbmltcG9ydCBUb3RhbEJhbGFuY2VWYWx1ZSBmcm9tIFwiLi4vVXRpbGl0eS9Ub3RhbEJhbGFuY2VWYWx1ZVwiO1xuaW1wb3J0IHtMaXN0fSBmcm9tIFwiaW1tdXRhYmxlXCI7XG5pbXBvcnQge0xpbmt9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XG5pbXBvcnQge1Rvb2x0aXAsIEljb24gYXMgQW50SWNvbn0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xuaW1wb3J0IGFzc2V0X3V0aWxzIGZyb20gXCIuLi8uLi9saWIvY29tbW9uL2Fzc2V0X3V0aWxzXCI7XG5cbmNvbnN0IGFsaWduUmlnaHQgPSB7dGV4dEFsaWduOiBcInJpZ2h0XCJ9O1xuY29uc3QgYWxpZ25MZWZ0ID0ge3RleHRBbGlnbjogXCJsZWZ0XCJ9O1xuLyoqXG4gKiAgR2l2ZW4gYSBjb2xsYXRlcmFsIHBvc2l0aW9uIG9iamVjdCAoY2FsbCBvcmRlcikgYW5kIGFjY291bnQsXG4gKiAgZGlzcGxheSBpdCBpbiBhIHByZXR0eSB3YXksIGluIGNhc2Ugbm8gY2FsbCBvcmRlciBpZCB3YXMgcHJvdmlkZWQgLSBkaXNwbGF5IGEgcGxhY2Vob2xkZXJcbiAqXG4gKiAgRXhwZWN0cyBwcm9wZXJ0eSwgJ29iamVjdCcgd2hpY2ggc2hvdWxkIGJlIGEgY2FsbCBvcmRlciBpZFxuICogIGFuZCBhbm90aGVyIHByb3BlcnR5IGNhbGxlZCAnYWNjb3VudCcgd2hpY2ggc2hvdWxkIGJlIGFuXG4gKiAgYWNjb3VudFxuICovXG5cbmNsYXNzIE1hcmdpblBvc2l0aW9uIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBvYmplY3Q6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QsXG4gICAgICAgIGRlYnRBc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWQsXG4gICAgICAgIGNvbGxhdGVyYWxBc3NldDogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0LmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgdGVtcENvbXBvbmVudDogXCJ0clwiXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICBsZXQgaGFzX29yZGVyID0gcHJvcHMub2JqZWN0ICE9IG51bGw7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGlzQm9ycm93TW9kYWxWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIG1vZGFsUmVmOlxuICAgICAgICAgICAgICAgIFwiY3BfbW9kYWxfXCIgK1xuICAgICAgICAgICAgICAgIChoYXNfb3JkZXJcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLm9iamVjdC5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2FsbF9wcmljZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInF1b3RlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5wcm9wcy5kZWJ0QXNzZXQuZ2V0KFwiaWRcIikpLFxuICAgICAgICAgICAgaGFzT3JkZXI6IGhhc19vcmRlclxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHNob3dCb3Jyb3dNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0JvcnJvd01vZGFsVmlzaWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoaWRlQm9ycm93TW9kYWwoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNCb3Jyb3dNb2RhbFZpc2libGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9vblVwZGF0ZVBvc2l0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnJlZnNbdGhpcy5zdGF0ZS5tb2RhbFJlZl0uc2hvdygpO1xuICAgIH1cblxuICAgIF9nZXRGZWVkUHJpY2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5wcm9wcykge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgMSAvXG4gICAgICAgICAgICB1dGlscy5nZXRfYXNzZXRfcHJpY2UoXG4gICAgICAgICAgICAgICAgYXNzZXRfdXRpbHNcbiAgICAgICAgICAgICAgICAgICAgLmV4dHJhY3RSYXdGZWVkUHJpY2UodGhpcy5wcm9wcy5kZWJ0QXNzZXQpXG4gICAgICAgICAgICAgICAgICAgIC5nZXRJbihbXCJxdW90ZVwiLCBcImFtb3VudFwiXSksXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jb2xsYXRlcmFsQXNzZXQsXG4gICAgICAgICAgICAgICAgYXNzZXRfdXRpbHNcbiAgICAgICAgICAgICAgICAgICAgLmV4dHJhY3RSYXdGZWVkUHJpY2UodGhpcy5wcm9wcy5kZWJ0QXNzZXQpXG4gICAgICAgICAgICAgICAgICAgIC5nZXRJbihbXCJiYXNlXCIsIFwiYW1vdW50XCJdKSxcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmRlYnRBc3NldFxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9vbkNsb3NlUG9zaXRpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGxldCB0ciA9IFdhbGxldEFwaS5uZXdfdHJhbnNhY3Rpb24oKTtcblxuICAgICAgICB0ci5hZGRfdHlwZV9vcGVyYXRpb24oXCJjYWxsX29yZGVyX3VwZGF0ZVwiLCB7XG4gICAgICAgICAgICBmZWU6IHtcbiAgICAgICAgICAgICAgICBhbW91bnQ6IDAsXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5kaW5nX2FjY291bnQ6IHRoaXMucHJvcHMub2JqZWN0LmdldChcImJvcnJvd2VyXCIpLFxuICAgICAgICAgICAgZGVsdGFfY29sbGF0ZXJhbDoge1xuICAgICAgICAgICAgICAgIGFtb3VudDogLXRoaXMucHJvcHMub2JqZWN0LmdldChcImNvbGxhdGVyYWxcIiksXG4gICAgICAgICAgICAgICAgYXNzZXRfaWQ6IHRoaXMucHJvcHMub2JqZWN0LmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgXCJjYWxsX3ByaWNlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYmFzZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImFzc2V0X2lkXCJcbiAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlbHRhX2RlYnQ6IHtcbiAgICAgICAgICAgICAgICBhbW91bnQ6IC10aGlzLnByb3BzLm9iamVjdC5nZXQoXCJkZWJ0XCIpLFxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiB0aGlzLnByb3BzLm9iamVjdC5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgIFwiY2FsbF9wcmljZVwiLFxuICAgICAgICAgICAgICAgICAgICBcInF1b3RlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFdhbGxldERiLnByb2Nlc3NfdHJhbnNhY3Rpb24odHIsIG51bGwsIHRydWUpO1xuICAgIH1cblxuICAgIC8vIGhvdyBtYW55IHVuaXRzIG9mIHRoZSBkZWJ0IGFzc2V0IHRoZSBib3Jyb3dlciBoYXNcbiAgICAvLyBpbiBoaXMvaGVyIHdhbGxldC4gVGhpcyBoYXMgbm90aGluZyB0byBkbyB3aXRoXG4gICAgLy8gaG93IG1hbnkgb2YgdGhlIGFzc2V0IHRoZSBib3Jyb3dlciBoYXMgYm9ycm93ZWQuXG4gICAgX2dldEJhbGFuY2UoKSB7XG4gICAgICAgIGxldCBhY2NvdW50ID0gdGhpcy5wcm9wcy5hY2NvdW50O1xuXG4gICAgICAgIC8vIHRoZSBkZWJ0IGFzc2V0IGlkIHdoaWNoIHdlIHdhbnQgdG8gZGlzcGxheVxuICAgICAgICBsZXQgcm93X2Fzc2V0X2lkID0gbnVsbDtcblxuICAgICAgICAvLyBpbiBjYXNlIHdlIGRpc3BsYXlpbmcgYSBtYXJnaW4gcG9zaXRpb24sIG5vdCBhIHBsYWNlaG9sZGVyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9iamVjdCAhPSBudWxsKSB7XG4gICAgICAgICAgICByb3dfYXNzZXRfaWQgPSB0aGlzLnByb3BzLm9iamVjdC5nZXRJbihbXG4gICAgICAgICAgICAgICAgXCJjYWxsX3ByaWNlXCIsXG4gICAgICAgICAgICAgICAgXCJxdW90ZVwiLFxuICAgICAgICAgICAgICAgIFwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByb3dfYXNzZXRfaWQgPSB0aGlzLnByb3BzLmRlYnRBc3NldC5nZXQoXCJpZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBhY2NvdW50X2JhbGFuY2VzID0gYWNjb3VudC5nZXQoXCJiYWxhbmNlc1wiKTtcblxuICAgICAgICBsZXQgYmFsYW5jZSA9IDA7XG5cbiAgICAgICAgLy8gZm9yIGV2ZXJ5IGRlYnQgdGhlIGFjY291bnQgaGFzLCB3ZSBpdGVyYXRlXG4gICAgICAgIC8vIHRocm91Z2ggZXZlcnkgYmFsYW5jZSB0aGUgdXNlciBoYXNcbiAgICAgICAgaWYgKGFjY291bnRfYmFsYW5jZXMpIHtcbiAgICAgICAgICAgIGFjY291bnRfYmFsYW5jZXMuZm9yRWFjaCgoYSwgYXNzZXRfdHlwZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhc3NldF90eXBlID09IHJvd19hc3NldF9pZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmFsYW5jZU9iamVjdCA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgYmFsYW5jZVxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlID0gYmFsYW5jZU9iamVjdC5nZXQoXCJiYWxhbmNlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBhY2NvdW50IGRvZXNuJ3QgaG9sZFxuICAgICAgICAvLyBhbnkgb2YgdGhlIGFzc2V0IGhlcmVcbiAgICAgICAgcmV0dXJuIGJhbGFuY2U7XG4gICAgfVxuXG4gICAgX2dldENvbGxhdGVyYWxSYXRpbygpIHtcbiAgICAgICAgY29uc3QgY28gPSB0aGlzLnByb3BzLm9iamVjdC50b0pTKCk7XG4gICAgICAgIGNvbnN0IGMgPSB1dGlscy5nZXRfYXNzZXRfYW1vdW50KFxuICAgICAgICAgICAgY28uY29sbGF0ZXJhbCxcbiAgICAgICAgICAgIHRoaXMucHJvcHMuY29sbGF0ZXJhbEFzc2V0XG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGQgPSB1dGlscy5nZXRfYXNzZXRfYW1vdW50KGNvLmRlYnQsIHRoaXMucHJvcHMuZGVidEFzc2V0KTtcbiAgICAgICAgcmV0dXJuIGMgLyAoZCAvIHRoaXMuX2dldEZlZWRQcmljZSgpKTtcbiAgICB9XG5cbiAgICBfZ2V0TVIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICB0aGlzLnByb3BzLmRlYnRBc3NldC5nZXRJbihbXG4gICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxuICAgICAgICAgICAgICAgIFwiY3VycmVudF9mZWVkXCIsXG4gICAgICAgICAgICAgICAgXCJtYWludGVuYW5jZV9jb2xsYXRlcmFsX3JhdGlvXCJcbiAgICAgICAgICAgIF0pIC8gMTAwMFxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9nZXRTdGF0dXNDbGFzcygpIHtcbiAgICAgICAgbGV0IGNyID0gdGhpcy5fZ2V0Q29sbGF0ZXJhbFJhdGlvKCk7XG4gICAgICAgIGNvbnN0IG1yID0gdGhpcy5fZ2V0TVIoKTtcblxuICAgICAgICBpZiAoaXNOYU4oY3IpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKGNyIDwgbXIpIHtcbiAgICAgICAgICAgIHJldHVybiBcImRhbmdlclwiO1xuICAgICAgICB9IGVsc2UgaWYgKGNyIDwgbXIgKyAwLjUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIndhcm5pbmdcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2dldENSVGlwKCkge1xuICAgICAgICBjb25zdCBzdGF0dXNDbGFzcyA9IHRoaXMuX2dldFN0YXR1c0NsYXNzKCk7XG4gICAgICAgIGNvbnN0IG1yID0gdGhpcy5fZ2V0TVIoKTtcbiAgICAgICAgaWYgKCFzdGF0dXNDbGFzcyB8fCBzdGF0dXNDbGFzcyA9PT0gXCJcIikgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgaWYgKHN0YXR1c0NsYXNzID09PSBcImRhbmdlclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gY291bnRlcnBhcnQudHJhbnNsYXRlKFwidG9vbHRpcC5jcl9kYW5nZXJcIiwge21yfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzQ2xhc3MgPT09IFwid2FybmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gY291bnRlcnBhcnQudHJhbnNsYXRlKFwidG9vbHRpcC5jcl93YXJuaW5nXCIsIHttcn0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfZ2V0VGFyZ2V0Q29sbGF0ZXJhbFJhdGlvKCkge1xuICAgICAgICBjb25zdCBjbyA9IHRoaXMucHJvcHMub2JqZWN0ICYmIHRoaXMucHJvcHMub2JqZWN0LnRvSlMoKTtcblxuICAgICAgICByZXR1cm4gY28gJiYgIWlzTmFOKGNvLnRhcmdldF9jb2xsYXRlcmFsX3JhdGlvKVxuICAgICAgICAgICAgPyBjby50YXJnZXRfY29sbGF0ZXJhbF9yYXRpbyAvIDEwMDBcbiAgICAgICAgICAgIDogMDtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7ZGVidEFzc2V0LCBjb2xsYXRlcmFsQXNzZXQsIG9iamVjdH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIGxldCBoYXNfb3JkZXIgPSBvYmplY3QgIT0gbnVsbDtcbiAgICAgICAgY29uc3QgYmFsYW5jZSA9IHRoaXMuX2dldEJhbGFuY2UoKTtcbiAgICAgICAgbGV0IGNvID0gaGFzX29yZGVyID8gb2JqZWN0LnRvSlMoKSA6IG51bGw7XG5cbiAgICAgICAgbGV0IHtpc0JpdEFzc2V0fSA9IHV0aWxzLnJlcGxhY2VOYW1lKHRoaXMucHJvcHMuZGVidEFzc2V0KTtcblxuICAgICAgICBsZXQgaXNQcmVkaWN0aW9uID1cbiAgICAgICAgICAgIGRlYnRBc3NldC5nZXQoXCJiaXRhc3NldFwiKSAmJlxuICAgICAgICAgICAgZGVidEFzc2V0LmdldEluKFtcImJpdGFzc2V0XCIsIFwiaXNfcHJlZGljdGlvbl9tYXJrZXRcIl0pO1xuXG4gICAgICAgIGxldCBzZXR0bGVtZW50X2Z1bmQgPSB0aGlzLnByb3BzLmRlYnRBc3NldC5nZXRJbihbXG4gICAgICAgICAgICBcImJpdGFzc2V0XCIsXG4gICAgICAgICAgICBcInNldHRsZW1lbnRfZnVuZFwiXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGxldCBtY3IgPSB0aGlzLnByb3BzLmRlYnRBc3NldC5nZXRJbihbXG4gICAgICAgICAgICBcImJpdGFzc2V0XCIsXG4gICAgICAgICAgICBcImN1cnJlbnRfZmVlZFwiLFxuICAgICAgICAgICAgXCJtYWludGVuYW5jZV9jb2xsYXRlcmFsX3JhdGlvXCJcbiAgICAgICAgXSk7XG5cbiAgICAgICAgbGV0IGhhc0dsb2JhbFNldHRsZW1lbnQgPSBzZXR0bGVtZW50X2Z1bmQgPiAwID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IGJhbGFuY2VfYXNzZXQgPSBoYXNfb3JkZXJcbiAgICAgICAgICAgID8gY28uY2FsbF9wcmljZS5xdW90ZS5hc3NldF9pZFxuICAgICAgICAgICAgOiBkZWJ0QXNzZXQuZ2V0KFwiaWRcIik7XG4gICAgICAgIGNvbnN0IGRlYnRfYW1vdW50ID0gaGFzX29yZGVyID8gY28uZGVidCA6IDA7XG4gICAgICAgIGNvbnN0IGNvbGxhdGVyYWxfYW1vdW50ID0gaGFzX29yZGVyID8gY28uY29sbGF0ZXJhbCA6IDA7XG4gICAgICAgIGNvbnN0IGNvbGxhdGVyYWxfYXNzZXQgPSBoYXNfb3JkZXJcbiAgICAgICAgICAgID8gY28uY2FsbF9wcmljZS5iYXNlLmFzc2V0X2lkXG4gICAgICAgICAgICA6IGNvbGxhdGVyYWxBc3NldC5nZXQoXCJpZFwiKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0X2NvbGxhdGVyYWxfcmF0aW8gPSB0aGlzLl9nZXRUYXJnZXRDb2xsYXRlcmFsUmF0aW8oKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT1cIm1hcmdpbi1yb3dcIj5cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e2FsaWduTGVmdH0+XG4gICAgICAgICAgICAgICAgICAgIDxBc3NldEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlTm9uZVRvQnRzPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoPXszMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2RlYnRBc3NldC5nZXQoXCJzeW1ib2xcIil9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL2Fzc2V0LyR7ZGVidEFzc2V0LmdldChcInN5bWJvbFwiKX1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWUgbm9UaXAgbmFtZT17ZGVidEFzc2V0LmdldChcInN5bWJvbFwiKX0gLz5cbiAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fT5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2JhbGFuY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17YmFsYW5jZV9hc3NldH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17YWxpZ25SaWdodH0+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtkZWJ0X2Ftb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtiYWxhbmNlX2Fzc2V0fVxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1tZWRpdW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsT2Zmc2V0PXszfVxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtjb2xsYXRlcmFsX2Ftb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0PXtjb2xsYXRlcmFsX2Fzc2V0fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAge2hhc19vcmRlciA/IChcbiAgICAgICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBsYWNlPVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGlwPXt0aGlzLl9nZXRDUlRpcCgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcImNlbnRlci1jb250ZW50IFwiICsgdGhpcy5fZ2V0U3RhdHVzQ2xhc3MoKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2lzUHJlZGljdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCIxOjFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdXRpbHMuZm9ybWF0X251bWJlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9nZXRDb2xsYXRlcmFsUmF0aW8oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIDx0ZCAvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICB7dGFyZ2V0X2NvbGxhdGVyYWxfcmF0aW8gJiYgIWlzUHJlZGljdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgPyB1dGlscy5mb3JtYXRfbnVtYmVyKHRhcmdldF9jb2xsYXRlcmFsX3JhdGlvLCAyKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsfVxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fT5cbiAgICAgICAgICAgICAgICAgICAge2hhc19vcmRlciA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUb3RhbEJhbGFuY2VWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vVGlwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZXM9e0xpc3QoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ0PXt7W2RlYnRBc3NldC5nZXQoXCJpZFwiKV06IGNvLmRlYnR9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhdGVyYWw9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NvbGxhdGVyYWxBc3NldC5nZXQoXCJpZFwiKV06IHBhcnNlSW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY28uY29sbGF0ZXJhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfYXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXthbGlnblJpZ2h0fSBjbGFzc05hbWU9e1wiY29sdW1uLWhpZGUtc21hbGxcIn0+XG4gICAgICAgICAgICAgICAgICAgIHtoYXNfb3JkZXIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1ByZWRpY3Rpb24gPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZFByaWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VfYW1vdW50PXtjb2xsYXRlcmFsX2Ftb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9hc3NldD17Y29sbGF0ZXJhbEFzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZV9hbW91bnQ9e2RlYnRfYW1vdW50ICogKG1jciAvIDEwMDApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZV9hc3NldD17ZGVidEFzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX3N5bWJvbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17YWxpZ25SaWdodH0gY2xhc3NOYW1lPXtcImNvbHVtbi1oaWRlLXNtYWxsXCJ9PlxuICAgICAgICAgICAgICAgICAgICB7aGFzX29yZGVyID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQcmVkaWN0aW9uID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRQcmljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlX2Ftb3VudD17YXNzZXRfdXRpbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5leHRyYWN0UmF3RmVlZFByaWNlKGRlYnRBc3NldClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRJbihbXCJiYXNlXCIsIFwiYW1vdW50XCJdKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9hc3NldD17Y28uY2FsbF9wcmljZS5xdW90ZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYW1vdW50PXthc3NldF91dGlsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmV4dHJhY3RSYXdGZWVkUHJpY2UoZGVidEFzc2V0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldEluKFtcInF1b3RlXCIsIFwiYW1vdW50XCJdKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYXNzZXQ9e2NvLmNhbGxfcHJpY2UuYmFzZS5hc3NldF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9zeW1ib2xzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGRcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcImNlbnRlci1jb250ZW50IGNvbHVtbi1oaWRlLXNtYWxsXCJ9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXthbGlnbkxlZnR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7aGFzX29yZGVyID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZFByaWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9hbW91bnQ9e2NvLmNhbGxfcHJpY2UuYmFzZS5hbW91bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9hc3NldD17Y28uY2FsbF9wcmljZS5iYXNlLmFzc2V0X2lkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlX2Ftb3VudD17Y28uY2FsbF9wcmljZS5xdW90ZS5hbW91bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYXNzZXQ9e2NvLmNhbGxfcHJpY2UucXVvdGUuYXNzZXRfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV92YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3t0ZXh0QWxpZ246IFwiY2VudGVyXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgPExpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvPXtgL21hcmtldC8ke2RlYnRBc3NldC5nZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzeW1ib2xcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1fJHtjb2xsYXRlcmFsQXNzZXQuZ2V0KFwic3ltYm9sXCIpfWB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInRyYWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLnRyYWRlLnRyYWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luUmlnaHQ6IDV9fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICB7aGFzR2xvYmFsU2V0dGxlbWVudCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PXtcImxlZnRcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAuYm9ycm93X2Rpc2FibGVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0OiBpc0JpdEFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJpdFwiICsgYCR7ZGVidEFzc2V0LmdldChcInN5bWJvbFwiKX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBgJHtkZWJ0QXNzZXQuZ2V0KFwic3ltYm9sXCIpfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e3BhZGRpbmdCb3R0b206IDV9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFudEljb24gdHlwZT17XCJxdWVzdGlvbi1jaXJjbGVcIn0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PXtcImxlZnRcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAudXBkYXRlX3Bvc2l0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3twYWRkaW5nQm90dG9tOiA1fX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIG9uQ2xpY2s9e3RoaXMuX29uVXBkYXRlUG9zaXRpb24uYmluZCh0aGlzKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJhZGp1c3RcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMuYWRqdXN0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHggcm90YXRlOTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICB7aGFzX29yZGVyID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcGxhY2U9XCJsZWZ0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRpcD17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAuY2xvc2VfcG9zaXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB1dGlscy5nZXRfYXNzZXRfYW1vdW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvLmRlYnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5kZWJ0QXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldDogZGVidEFzc2V0LmdldChcInN5bWJvbFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdCb3R0b206IDV9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIG9uQ2xpY2s9e3RoaXMuX29uQ2xvc2VQb3NpdGlvbi5iaW5kKHRoaXMpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJjcm9zcy1jaXJjbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5jcm9zc19jaXJjbGUuY2xvc2VfcG9zaXRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIHtkZWJ0QXNzZXQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Qm9ycm93TW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLmlzQm9ycm93TW9kYWxWaXNpYmxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dNb2RhbD17dGhpcy5zaG93Qm9ycm93TW9kYWwuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlTW9kYWw9e3RoaXMuaGlkZUJvcnJvd01vZGFsLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXt0aGlzLnN0YXRlLm1vZGFsUmVmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsSWQ9e3RoaXMuc3RhdGUubW9kYWxSZWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVBc3NldE9iaj17YmFsYW5jZV9hc3NldH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNraW5nQXNzZXRPYmo9e2RlYnRBc3NldC5nZXRJbihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2hvcnRfYmFja2luZ19hc3NldFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE9iaj17dGhpcy5wcm9wcy5hY2NvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICk7XG4gICAgfVxufVxuTWFyZ2luUG9zaXRpb24gPSBCaW5kVG9DaGFpblN0YXRlKE1hcmdpblBvc2l0aW9uKTtcblxuZXhwb3J0IGRlZmF1bHQgTWFyZ2luUG9zaXRpb247XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7Q29tcG9uZW50fSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgUHJvcG9zZWRPcGVyYXRpb24sIHtcclxuICAgIFRyYW5zYWN0aW9uSURBbmRFeHBpcnlcclxufSBmcm9tIFwiY29tcG9uZW50cy9CbG9ja2NoYWluL1Byb3Bvc2VkT3BlcmF0aW9uXCI7XHJcbmltcG9ydCBCaW5kVG9DaGFpblN0YXRlIGZyb20gXCJjb21wb25lbnRzL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgQ2hhaW5UeXBlcyBmcm9tIFwiY29tcG9uZW50cy9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IFByb3Bvc2FsTW9kYWwsIHtmaW5hbFJlcXVpcmVkUGVybXN9IGZyb20gXCIuLi9Nb2RhbC9Qcm9wb3NhbE1vZGFsXCI7XHJcbmltcG9ydCBOZXN0ZWRBcHByb3ZhbFN0YXRlIGZyb20gXCIuLi9BY2NvdW50L05lc3RlZEFwcHJvdmFsU3RhdGVcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlLCBDaGFpblR5cGVzIGFzIGdyYXBoZW5lQ2hhaW5UeXBlc30gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IHBlcm1pc3Npb25fdXRpbHMgZnJvbSBcImNvbW1vbi9wZXJtaXNzaW9uX3V0aWxzXCI7XHJcbmltcG9ydCBMaW5rVG9BY2NvdW50QnlJZCBmcm9tIFwiLi4vVXRpbGl0eS9MaW5rVG9BY2NvdW50QnlJZFwiO1xyXG5pbXBvcnQgQWNjb3VudFN0b3JlIGZyb20gXCJzdG9yZXMvQWNjb3VudFN0b3JlXCI7XHJcbmltcG9ydCBhY2NvdW50VXRpbHMgZnJvbSBcImNvbW1vbi9hY2NvdW50X3V0aWxzXCI7XHJcbmltcG9ydCB7VG9vbHRpcH0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5pbXBvcnQgSlNPTk1vZGFsIGZyb20gXCJjb21wb25lbnRzL01vZGFsL0pTT05Nb2RhbFwiO1xyXG5cclxuY29uc3Qge29wZXJhdGlvbnN9ID0gZ3JhcGhlbmVDaGFpblR5cGVzO1xyXG5jb25zdCBvcHMgPSBPYmplY3Qua2V5cyhvcGVyYXRpb25zKTtcclxuXHJcbmNsYXNzIFByb3Bvc2FscyBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFjY291bnQ6IENoYWluVHlwZXMuQ2hhaW5BY2NvdW50LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgaXNNb2RhbFZpc2libGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBtb2RhbDoge1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgcHJvcG9zYWxJZDogbnVsbCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB2aXNpYmxlSWQ6IFwiXCJcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl9wcm9wb3NhbHMgPSBbXTtcclxuICAgICAgICB0aGlzLl9sb2FkaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUgPSB0aGlzLmZvcmNlVXBkYXRlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5faXNTY2FtID0gdGhpcy5faXNTY2FtLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5faXNVbmtub3duID0gdGhpcy5faXNVbmtub3duLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zaG93TW9kYWwgPSB0aGlzLnNob3dNb2RhbC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaGlkZU1vZGFsID0gdGhpcy5oaWRlTW9kYWwuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICAvKlxyXG4gICAgICAgICogQWNjb3VudCBvYmplY3RzIGRvbid0IGdldCB1cGRhdGVkIGJ5IHVuZGVybHlpbmcgcHJvcG9zYWwgY2hhbmdlcywgYnV0XHJcbiAgICAgICAgKiB0aGUgQ2hhaW5TdG9yZSBkb2VzLCBzbyBpbiBvcmRlciB0byB1cGRhdGUgdGhpcyBjb21wb25lbnQgd2hlbiBhIHByb3Bvc2FsXHJcbiAgICAgICAgKiBjaGFuZ2VzLCB3ZSBuZWVkIHRvIHVwZGF0ZSBpdCB3aGVuZXZlciB0aGUgQ2hhaW5TdG9yZSBpdHNlbGYgdXBkYXRlc1xyXG4gICAgICAgICovXHJcbiAgICAgICAgQ2hhaW5TdG9yZS5zdWJzY3JpYmUodGhpcy5mb3JjZVVwZGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldFByb3Bvc2FscygpIHtcclxuICAgICAgICB0aGlzLl9sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAvLyByZXNvbHZlIHByb3Bvc2Fsc1xyXG4gICAgICAgIGxldCBhY2NvdW50ID0gdGhpcy5wcm9wcy5hY2NvdW50O1xyXG4gICAgICAgIGlmIChhY2NvdW50LmdldChcInByb3Bvc2Fsc1wiKS5zaXplKSB7XHJcbiAgICAgICAgICAgIGxldCBwcm9wb3NhbHMgPSBbXTtcclxuICAgICAgICAgICAgYWNjb3VudC5nZXQoXCJwcm9wb3NhbHNcIikuZm9yRWFjaChwcm9wb3NhbF9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcHJvcG9zYWwgPSBDaGFpblN0b3JlLmdldE9iamVjdChwcm9wb3NhbF9pZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcG9zYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvcG9zZWRfdHJhbnNhY3Rpb24gPSBwcm9wb3NhbC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicHJvcG9zZWRfdHJhbnNhY3Rpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9wZXJhdGlvbnMgPSBwcm9wb3NlZF90cmFuc2FjdGlvbi5nZXQoXCJvcGVyYXRpb25zXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3Bvc2Fscy5wdXNoKHtvcGVyYXRpb25zLCBhY2NvdW50LCBwcm9wb3NhbH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcHJvcG9zYWxzID0gcHJvcG9zYWxzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1dGlscy5zb3J0SUQoXHJcbiAgICAgICAgICAgICAgICAgICAgYS5wcm9wb3NhbC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgICAgICBiLnByb3Bvc2FsLmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBwcm9wb3NhbHMuZm9yRWFjaChwcm9wb3NhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdHlwZSA9IHByb3Bvc2FsLnByb3Bvc2FsLmdldChcInJlcXVpcmVkX2FjdGl2ZV9hcHByb3ZhbHNcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgID8gXCJhY3RpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIDogXCJvd25lclwiO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWQgPSBwZXJtaXNzaW9uX3V0aWxzLmxpc3RUb0lEcyhcclxuICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbC5nZXQoYHJlcXVpcmVkXyR7dHlwZX1fYXBwcm92YWxzYClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBwcm9wb3NhbC5yZXF1aXJlZFBlcm1pc3Npb25zID0gcGVybWlzc2lvbl91dGlscy51bm5lc3QoXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb3Bvc2FscyA9IHByb3Bvc2FscztcclxuICAgICAgICAgICAgdGhpcy5fbG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgICAgICBDaGFpblN0b3JlLnVuc3Vic2NyaWJlKHRoaXMuZm9yY2VVcGRhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dNb2RhbCh7YWN0aW9uLCBwcm9wb3NhbElkLCBhY2NvdW50SWR9KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzTW9kYWxWaXNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBtb2RhbDoge1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgcHJvcG9zYWxJZCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZU1vZGFsKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc01vZGFsVmlzaWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIG1vZGFsOiB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb246IG51bGwsXHJcbiAgICAgICAgICAgICAgICBwcm9wb3NhbElkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25BcHByb3ZlTW9kYWwocHJvcG9zYWxJZCwgYWNjb3VudElkLCBhY3Rpb24pIHtcclxuICAgICAgICB0aGlzLnNob3dNb2RhbCh7YWN0aW9uLCBwcm9wb3NhbElkLCBhY2NvdW50SWR9KTtcclxuICAgIH1cclxuXHJcbiAgICBfY2FuUmVqZWN0KHByb3Bvc2FsKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgcHJvcG9zYWwuYXZhaWxhYmxlX2FjdGl2ZV9hcHByb3ZhbHMubGVuZ3RoIHx8XHJcbiAgICAgICAgICAgIHByb3Bvc2FsLmF2YWlsYWJsZV9vd25lcl9hcHByb3ZhbHMubGVuZ3RoIHx8XHJcbiAgICAgICAgICAgIHByb3Bvc2FsLmF2YWlsYWJsZV9rZXlfYXBwcm92YWxzLmxlbmd0aFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgX2lzU2NhbShwcm9wb3NhbCkge1xyXG4gICAgICAgIGxldCBpc1NjYW0gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IHRvdWNoZWRBY2NvdW50cyA9IFtdO1xyXG4gICAgICAgIHByb3Bvc2FsLm9wZXJhdGlvbnMuZm9yRWFjaChvID0+IHtcclxuICAgICAgICAgICAgaWYgKG8uZ2V0KDApID09IDYpIHtcclxuICAgICAgICAgICAgICAgIHRvdWNoZWRBY2NvdW50cy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIG8uZ2V0SW4oWzEsIFwiYWN0aXZlXCIsIFwiYWNjb3VudF9hdXRoc1wiLCAwLCAwXSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB0b3VjaGVkQWNjb3VudHMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICBvLmdldEluKFsxLCBcIm93bmVyXCIsIFwiYWNjb3VudF9hdXRoc1wiLCAwLCAwXSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0b3VjaGVkQWNjb3VudHMucHVzaChvLmdldEluKFsxLCBcInRvXCJdKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IHByb3Bvc2VyID0gcHJvcG9zYWwucHJvcG9zYWwuZ2V0KFwicHJvcG9zZXJcIik7XHJcblxyXG4gICAgICAgIHRvdWNoZWRBY2NvdW50cy5wdXNoKHByb3Bvc2VyKTtcclxuXHJcbiAgICAgICAgLyogaWYgKF9fREVWX18pIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgICAgICBcIlByb3Bvc2VkIHRyYW5zYWN0aW9uczogXCIsXHJcbiAgICAgICAgICAgICAgICBwcm9wb3NhbCxcclxuICAgICAgICAgICAgICAgIFwiIHRvdWNoaW5nIGFjY291bnRzIFwiLFxyXG4gICAgICAgICAgICAgICAgdG91Y2hlZEFjY291bnRzXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSAqL1xyXG5cclxuICAgICAgICB0b3VjaGVkQWNjb3VudHMuZm9yRWFjaChfYWNjb3VudCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhY2NvdW50VXRpbHMuaXNLbm93blNjYW1tZXIoX2FjY291bnQpKSB7XHJcbiAgICAgICAgICAgICAgICBpc1NjYW0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJibGFja2xpc3RlZF9hY2NvdW50c1wiKS5zb21lKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtID09PSBfYWNjb3VudDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgaXNTY2FtID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBpc1NjYW07XHJcbiAgICB9XHJcblxyXG4gICAgX2lzVW5rbm93bihwcm9wb3NhbCkge1xyXG4gICAgICAgIGxldCBpc1Vua25vd24gPSB0cnVlO1xyXG5cclxuICAgICAgICBsZXQgdG91Y2hlZEFjY291bnRzID0gW107XHJcbiAgICAgICAgcHJvcG9zYWwub3BlcmF0aW9ucy5mb3JFYWNoKG8gPT4ge1xyXG4gICAgICAgICAgICBpZiAoby5nZXQoMCkgPT0gNikge1xyXG4gICAgICAgICAgICAgICAgdG91Y2hlZEFjY291bnRzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgby5nZXRJbihbMSwgXCJhY3RpdmVcIiwgXCJhY2NvdW50X2F1dGhzXCIsIDAsIDBdKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHRvdWNoZWRBY2NvdW50cy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIG8uZ2V0SW4oWzEsIFwib3duZXJcIiwgXCJhY2NvdW50X2F1dGhzXCIsIDAsIDBdKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRvdWNoZWRBY2NvdW50cy5wdXNoKG8uZ2V0SW4oWzEsIFwidG9cIl0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgcHJvcG9zZXIgPSBwcm9wb3NhbC5wcm9wb3NhbC5nZXQoXCJwcm9wb3NlclwiKTtcclxuXHJcbiAgICAgICAgdG91Y2hlZEFjY291bnRzLnB1c2gocHJvcG9zZXIpO1xyXG4gICAgICAgIHRvdWNoZWRBY2NvdW50cy5mb3JFYWNoKF9hY2NvdW50ID0+IHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmdldChcIndoaXRlbGlzdGVkX2FjY291bnRzXCIpLnNvbWUoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0gPT09IF9hY2NvdW50O1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBpc1Vua25vd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgc3RhcnJlZCA9IEFjY291bnRTdG9yZS5nZXRTdGF0ZSgpLnN0YXJyZWRBY2NvdW50cztcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgc3RhcnJlZC5zb21lKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuYW1lID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGl0ZW0sIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISFuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lLmdldChcImlkXCIpID09IF9hY2NvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIGlzVW5rbm93biA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBjb250YWN0cyA9IEFjY291bnRTdG9yZS5nZXRTdGF0ZSgpLmFjY291bnRDb250YWN0cztcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgY29udGFjdHMuc29tZShpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IENoYWluU3RvcmUuZ2V0QWNjb3VudChpdGVtLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZS5nZXQoXCJpZFwiKSA9PSBfYWNjb3VudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBpc1Vua25vd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBpc1Vua25vd247XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbkpTT05Nb2RhbChpZCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Zpc2libGVJZDogaWR9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZUpTT05Nb2RhbCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHt2aXNpYmxlSWQ6IFwiXCJ9KTtcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7YWNjb3VudH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGlmICghYWNjb3VudCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgKGFjY291bnQuZ2V0KFwicHJvcG9zYWxzXCIpLnNpemUgPiAwICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9wb3NhbHMubGVuZ3RoID09IDApIHx8XHJcbiAgICAgICAgICAgICh0aGlzLl9wcm9wb3NhbHMubGVuZ3RoID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgYWNjb3VudCAhPT0gdGhpcy5fcHJvcG9zYWxzWzBdLmFjY291bnQgJiZcclxuICAgICAgICAgICAgICAgICF0aGlzLl9sb2FkaW5nKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRQcm9wb3NhbHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBwcm9wb3NhbFJvd3MgPSB0aGlzLl9wcm9wb3NhbHMucmVkdWNlKChyZXN1bHQsIHByb3Bvc2FsLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpZCA9IHByb3Bvc2FsLnByb3Bvc2FsLmdldChcImlkXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wb3NlciA9IHByb3Bvc2FsLnByb3Bvc2FsLmdldChcInByb3Bvc2VyXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBleHBpcmF0aW9uID0gcHJvcG9zYWwucHJvcG9zYWwuZ2V0KFwiZXhwaXJhdGlvbl90aW1lXCIpO1xyXG4gICAgICAgICAgICBjb25zdCB0cnhUeXBlcyA9IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInRyYW5zYWN0aW9uLnRyeFR5cGVzXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBvcGVyYXRpb25zID1cclxuICAgICAgICAgICAgICAgIHByb3Bvc2FsLm9wZXJhdGlvbnMgJiYgcHJvcG9zYWwub3BlcmF0aW9ucy50b0pTKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID1cclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbnMubGVuZ3RoID4gMVxyXG4gICAgICAgICAgICAgICAgICAgID8gY291bnRlcnBhcnQudHJhbnNsYXRlKFwidHJhbnNhY3Rpb24ub3BlcmF0aW9uc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIDogdHJ4VHlwZXNbb3BzW29wZXJhdGlvbnNbMF0gJiYgb3BlcmF0aW9uc1swXVswXV1dO1xyXG5cclxuICAgICAgICAgICAgbGV0IHRleHQgPSBwcm9wb3NhbC5vcGVyYXRpb25zXHJcbiAgICAgICAgICAgICAgICAubWFwKChvLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxQcm9wb3NlZE9wZXJhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbC5nZXQoXCJpZFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJfb3BlcmF0aW9uX1wiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbj17ZXhwaXJhdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXtpbmRleH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wPXtvLnRvSlMoKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmVydGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVGZWU9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlT3BMYWJlbD17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVFeHBpcmF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlRGF0ZT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2lkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zZXI9e3Byb3Bvc2VyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50b0FycmF5KCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY2FuUmVqZWN0ID0gdGhpcy5fY2FuUmVqZWN0KHByb3Bvc2FsLnByb3Bvc2FsLnRvSlMoKSk7XHJcbiAgICAgICAgICAgIGxldCBwcm9wb3NhbElkID0gcHJvcG9zYWwucHJvcG9zYWwuZ2V0KFwiaWRcIik7XHJcblxyXG4gICAgICAgICAgICBsZXQgdHlwZSA9IHByb3Bvc2FsLnByb3Bvc2FsLmdldChcInJlcXVpcmVkX2FjdGl2ZV9hcHByb3ZhbHNcIikuc2l6ZVxyXG4gICAgICAgICAgICAgICAgPyBcImFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICA6IFwib3duZXJcIjtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goXHJcbiAgICAgICAgICAgICAgICA8dHIga2V5PXtgJHtwcm9wb3NhbElkfV9pZGB9PlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xTcGFuPVwiNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XCJwcm9wb3NhbFwiICsgKGluZGV4ID09PSAwID8gXCIgZmlyc3RcIiA6IFwiXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zYWN0aW9uSURBbmRFeHBpcnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtpZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb249e2V4cGlyYXRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuSlNPTk1vZGFsPXsoKSA9PiB0aGlzLm9wZW5KU09OTW9kYWwoaWQpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8SlNPTk1vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLnZpc2libGVJZCA9PT0gaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb249e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbnMubGVuZ3RoID4gMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG9wZXJhdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBvcGVyYXRpb25zWzBdICYmIG9wZXJhdGlvbnNbMF1bMV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZSB8fCBcIlwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsPXt0aGlzLmNsb3NlSlNPTk1vZGFsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYXZhaWxhYmxlID0gcGVybWlzc2lvbl91dGlscy5saXN0VG9JRHMoXHJcbiAgICAgICAgICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbC5nZXQoYGF2YWlsYWJsZV8ke3R5cGV9X2FwcHJvdmFsc2ApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZUtleXMgPSBwZXJtaXNzaW9uX3V0aWxzLmxpc3RUb0lEcyhcclxuICAgICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsLmdldChcImF2YWlsYWJsZV9rZXlfYXBwcm92YWxzXCIpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBsZXQgcmVxdWlyZWRQZXJtaXNzaW9ucyA9IHByb3Bvc2FsLnJlcXVpcmVkUGVybWlzc2lvbnM7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBbYWNjb3VudHMsIGtleXNdID0gZmluYWxSZXF1aXJlZFBlcm1zKFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWRQZXJtaXNzaW9ucyxcclxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZSxcclxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZUtleXNcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnROYW1lcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFjY291bnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgYWNjb3VudHMuZm9yRWFjaChhY2NvdW50ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXByb3Bvc2FsLnByb3Bvc2FsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KGBhdmFpbGFibGVfJHt0eXBlfV9hcHByb3ZhbHNgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGFjY291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lcy5wdXNoKGFjY291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBrZXlOYW1lcyA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoa2V5cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpc01pbmUgPSBBY2NvdW50U3RvcmUuaXNNeUtleShrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNNaW5lICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICFwcm9wb3NhbC5wcm9wb3NhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldChcImF2YWlsYWJsZV9rZXlfYXBwcm92YWxzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoa2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlOYW1lcy5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbkFwcHJvdmUgPSBhY2NvdW50TmFtZXMubGVuZ3RoICsga2V5TmFtZXMubGVuZ3RoID4gMDtcclxuXHJcbiAgICAgICAgICAgIGxldCBpc1NjYW0gPSB0aGlzLl9pc1NjYW0ocHJvcG9zYWwpO1xyXG4gICAgICAgICAgICBsZXQgaXNVbmtub3duID0gdGhpcy5faXNVbmtub3duKHByb3Bvc2FsKTtcclxuXHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT1cInRvcC1sZWZ0LWFsaWduXCIga2V5PXtgJHtwcm9wb3NhbElkfV9jb250ZW50YH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPnt0ZXh0fTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7cmVxdWlyZWRQZXJtaXNzaW9ucy5tYXAoKGFjY291bnQsIGluZGV4KSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibGlzdC1pdGVtXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake3Byb3Bvc2FsSWR9X2FwcHJvdmVyXyR7aW5kZXh9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQWNjb3VudEJ5SWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VicGFnZT1cInBlcm1pc3Npb25zXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudD17YWNjb3VudC5pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TmVzdGVkQXBwcm92YWxTdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWw9e3Byb3Bvc2FsLnByb3Bvc2FsLmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT17dHlwZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJhcHByb3ZhbC1idXR0b25zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtpc1NjYW0gJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAucHJvcG9zZV9zY2FtXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidG9vbHRpcCBoYXMtZXJyb3Igc2NhbS1lcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTQ0FNIEFUVEVNUFRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuaGlkZUZpc2hpbmdQcm9wb3NhbHMgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpc1NjYW0gJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVW5rbm93biAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5wcm9wb3NlX3Vua25vd25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0b29sdGlwIGhhcy1lcnJvciBzY2FtLWVycm9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVTktOT1dOIFNPVVJDRVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IWlzU2NhbSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFpc1Vua25vd24gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5wcm9wcy5oaWRlRmlzaGluZ1Byb3Bvc2FscykgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5BcHByb3ZlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9vbkFwcHJvdmVNb2RhbC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWxJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbC5hY2NvdW50LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYXBwcm92ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoKSA9PiB7fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJ1dHRvbiBwcmltYXJ5IGhvbGxvd1wiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjYW5BcHByb3ZlID8gXCJcIiA6IFwiIGhpZGRlblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cInByb3Bvc2FsLmFwcHJvdmVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Y2FuUmVqZWN0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uQXBwcm92ZU1vZGFsLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsLmFjY291bnQuZ2V0KFwiaWRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicmVqZWN0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvbiBwcmltYXJ5IGhvbGxvd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwicHJvcG9zYWwucmVqZWN0XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25BcHByb3ZlTW9kYWwuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zYWwuYWNjb3VudC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRlbGV0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uIHByaW1hcnkgaG9sbG93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwicHJvcG9zYWwuZGVsZXRlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgPHRyIGtleT17YCR7cHJvcG9zYWxJZH1fc2VwYXJhdG9yYH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49XCI0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0sIFtdKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDx0YWJsZVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidGFibGUgcHJvcG9zYWxzIGNvbXBhY3QgXCIgKyB0aGlzLnByb3BzLmNsYXNzTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJwcm9wb3NhbC5wcm9wb3NhbHNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJwcm9wb3NhbC5hcHByb3ZlcnNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJwcm9wb3NhbC5zdGF0dXNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJwcm9wb3NhbC5hY3Rpb25cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT57cHJvcG9zYWxSb3dzfTwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgICAgPFByb3Bvc2FsTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICByZWY9e1wibW9kYWxcIn1cclxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLmlzTW9kYWxWaXNpYmxlfVxyXG4gICAgICAgICAgICAgICAgICAgIGhpZGVNb2RhbD17dGhpcy5oaWRlTW9kYWx9XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd01vZGFsPXt0aGlzLnNob3dNb2RhbH1cclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnN0YXRlICYmIHRoaXMuc3RhdGUubW9kYWwuYWNjb3VudElkfVxyXG4gICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsPXt0aGlzLnN0YXRlICYmIHRoaXMuc3RhdGUubW9kYWwucHJvcG9zYWxJZH1cclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb249e3RoaXMuc3RhdGUgJiYgdGhpcy5zdGF0ZS5tb2RhbC5hY3Rpb259XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCaW5kVG9DaGFpblN0YXRlKFByb3Bvc2Fscyk7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSBcImNvdW50ZXJwYXJ0XCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgQWNjb3VudFNlbGVjdCBmcm9tIFwiY29tcG9uZW50cy9Gb3Jtcy9BY2NvdW50U2VsZWN0XCI7XHJcbmltcG9ydCBBY2NvdW50U3RvcmUgZnJvbSBcInN0b3Jlcy9BY2NvdW50U3RvcmVcIjtcclxuaW1wb3J0IFdhbGxldERiIGZyb20gXCJzdG9yZXMvV2FsbGV0RGJcIjtcclxuaW1wb3J0IFdhbGxldEFwaSBmcm9tIFwiYXBpL1dhbGxldEFwaVwiO1xyXG5pbXBvcnQgTmVzdGVkQXBwcm92YWxTdGF0ZSBmcm9tIFwiLi4vQWNjb3VudC9OZXN0ZWRBcHByb3ZhbFN0YXRlXCI7XHJcbmltcG9ydCBwdSBmcm9tIFwiY29tbW9uL3Blcm1pc3Npb25fdXRpbHNcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IHtNb2RhbCwgQnV0dG9ufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcblxyXG5leHBvcnQgY29uc3QgZmluYWxSZXF1aXJlZFBlcm1zID0gKFxyXG4gICAgcmVxdWlyZWRQZXJtaXNzaW9ucyxcclxuICAgIGF2YWlsYWJsZSxcclxuICAgIGF2YWlsYWJsZUtleXNcclxuKSA9PiB7XHJcbiAgICBsZXQgZmluYWxSZXF1aXJlZCA9IFtdO1xyXG5cclxuICAgIHJlcXVpcmVkUGVybWlzc2lvbnMuZm9yRWFjaChhY2NvdW50ID0+IHtcclxuICAgICAgICBmaW5hbFJlcXVpcmVkID0gZmluYWxSZXF1aXJlZC5jb25jYXQoYWNjb3VudC5nZXRNaXNzaW5nU2lncyhhdmFpbGFibGUpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGxldCBmaW5hbFJlcXVpcmVkS2V5cyA9IFtdO1xyXG5cclxuICAgIHJlcXVpcmVkUGVybWlzc2lvbnMuZm9yRWFjaChhY2NvdW50ID0+IHtcclxuICAgICAgICBmaW5hbFJlcXVpcmVkS2V5cyA9IGZpbmFsUmVxdWlyZWRLZXlzLmNvbmNhdChcclxuICAgICAgICAgICAgYWNjb3VudC5nZXRNaXNzaW5nS2V5cyhhdmFpbGFibGVLZXlzKVxyXG4gICAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gW2ZpbmFsUmVxdWlyZWQsIGZpbmFsUmVxdWlyZWRLZXlzXTtcclxufTtcclxuXHJcbmNsYXNzIFByb3Bvc2FsTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBhY2NvdW50czogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnRzTGlzdFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgYWN0aXZlOiBudWxsLFxyXG4gICAgICAgICAgICBrZXk6IG51bGwsXHJcbiAgICAgICAgICAgIG93bmVyOiBudWxsLFxyXG4gICAgICAgICAgICBwYXllZTogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgb25BY3RpdmVBY2NvdW50KGFjY291bnRNYXAsIGtleU1hcCwgdHlwZSwgYWNjb3VudCkge1xyXG4gICAgICAgIGxldCBuZXdTdGF0ZSA9IHt9O1xyXG5cclxuICAgICAgICBpZiAoa2V5TWFwW2FjY291bnRdKSB7XHJcbiAgICAgICAgICAgIG5ld1N0YXRlW1wia2V5XCJdID0gYWNjb3VudDtcclxuICAgICAgICAgICAgbmV3U3RhdGVbdHlwZV0gPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYWNjb3VudCkge1xyXG4gICAgICAgICAgICBuZXdTdGF0ZVt0eXBlXSA9IGFjY291bnRNYXBbYWNjb3VudF07XHJcbiAgICAgICAgICAgIG5ld1N0YXRlW1wia2V5XCJdID0gbnVsbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZXdTdGF0ZVt0eXBlXSA9IG51bGw7XHJcbiAgICAgICAgICAgIG5ld1N0YXRlW1wia2V5XCJdID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uUHJvcG9zYWxBY3Rpb24ob2xkUHJvcG9zYWwpIHtcclxuICAgICAgICBsZXQgcHJvcG9zYWxPYmplY3QgPSBvbGRQcm9wb3NhbC50b0pTKCk7XHJcbiAgICAgICAgbGV0IHthY3RpdmUsIGtleSwgb3duZXIsIHBheWVlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgY29uc3QgZmVlX3BheWluZ19hY2NvdW50ID0gcGF5ZWUgfHwgYWN0aXZlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3Rpb24gPT09IFwiZGVsZXRlXCIpIHtcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBXYWxsZXRBcGkubmV3X3RyYW5zYWN0aW9uKCk7XHJcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLmFkZF90eXBlX29wZXJhdGlvbihcInByb3Bvc2FsX2RlbGV0ZVwiLCB7XHJcbiAgICAgICAgICAgICAgICBmZWVfcGF5aW5nX2FjY291bnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZmVlX3BheWluZ19hY2NvdW50IHx8IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgIHByb3Bvc2FsOiBwcm9wb3NhbE9iamVjdC5pZCxcclxuICAgICAgICAgICAgICAgIHVzaW5nX293bmVyX2F1dGhvcml0eTogZmFsc2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFdhbGxldERiLnByb2Nlc3NfdHJhbnNhY3Rpb24odHJhbnNhY3Rpb24sIG51bGwsIHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBwcm9wb3NhbCA9IHtcclxuICAgICAgICAgICAgICAgIGZlZV9wYXlpbmdfYWNjb3VudCxcclxuICAgICAgICAgICAgICAgIHByb3Bvc2FsOiBwcm9wb3NhbE9iamVjdC5pZCxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZV9hcHByb3ZhbHNfdG9fYWRkOiBbXSxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZV9hcHByb3ZhbHNfdG9fcmVtb3ZlOiBbXSxcclxuICAgICAgICAgICAgICAgIG93bmVyX2FwcHJvdmFsc190b19hZGQ6IFtdLFxyXG4gICAgICAgICAgICAgICAgb3duZXJfYXBwcm92YWxzX3RvX3JlbW92ZTogW10sXHJcbiAgICAgICAgICAgICAgICBrZXlfYXBwcm92YWxzX3RvX2FkZDogW10sXHJcbiAgICAgICAgICAgICAgICBrZXlfYXBwcm92YWxzX3RvX3JlbW92ZTogW11cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGxldCBpc0FkZCA9IHRoaXMucHJvcHMuYWN0aW9uID09PSBcImFwcHJvdmVcIjtcclxuXHJcbiAgICAgICAgICAgIGxldCBuZWVkZWRLZXlzID0gW107XHJcblxyXG4gICAgICAgICAgICBbXCJhY3RpdmVcIiwgXCJvd25lclwiLCBcImtleVwiXS5mb3JFYWNoKGF1dGhfdHlwZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLnN0YXRlW2F1dGhfdHlwZV07XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaGFzVmFsdWUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbE9iamVjdFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBhdmFpbGFibGVfJHthdXRoX3R5cGV9X2FwcHJvdmFsc2BcclxuICAgICAgICAgICAgICAgICAgICAgICAgXS5pbmRleE9mKHZhbHVlKSAhPT0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChpc0FkZCAmJiAhaGFzVmFsdWUpIHx8ICghaXNBZGQgJiYgaGFzVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmFjdGlvbiA9PT0gXCJhcHByb3ZlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsW2Ake2F1dGhfdHlwZX1fYXBwcm92YWxzX3RvX2FkZGBdID0gW3ZhbHVlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdXRoX3R5cGUgPT09IFwia2V5XCIpIG5lZWRlZEtleXMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5hY3Rpb24gPT09IFwicmVqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2FsW2Ake2F1dGhfdHlwZX1fYXBwcm92YWxzX3RvX3JlbW92ZWBdID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF1dGhfdHlwZSA9PT0gXCJrZXlcIikgbmVlZGVkS2V5cy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdHIgPSBXYWxsZXRBcGkubmV3X3RyYW5zYWN0aW9uKCk7XHJcbiAgICAgICAgICAgIHRyLmFkZF90eXBlX29wZXJhdGlvbihcInByb3Bvc2FsX3VwZGF0ZVwiLCBwcm9wb3NhbCk7XHJcbiAgICAgICAgICAgIFdhbGxldERiLnByb2Nlc3NfdHJhbnNhY3Rpb24odHIsIG51bGwsIHRydWUsIG5lZWRlZEtleXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wcm9wcy5oaWRlTW9kYWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNoYW5nZVBheWVlKGFjY291bnQpIHtcclxuICAgICAgICBsZXQgZnVsbEFjY291bnQgPSBDaGFpblN0b3JlLmdldEFjY291bnQoYWNjb3VudCk7XHJcblxyXG4gICAgICAgIGlmIChmdWxsQWNjb3VudCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHBheWVlOiBmdWxsQWNjb3VudC5nZXQoXCJpZFwiKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DYW5jZWwoKSB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5oaWRlTW9kYWwoKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtwcm9wb3NhbCwgdHlwZX0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBsZXQgYWNjb3VudE5hbWVzID0gW107XHJcbiAgICAgICAgbGV0IGFjY291bnRNYXAgPSB7fTtcclxuICAgICAgICBsZXQgaXNBZGQgPSB0aGlzLnByb3BzLmFjdGlvbiA9PT0gXCJhcHByb3ZlXCI7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjY291bnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnRzLmZvckVhY2goYWNjb3VudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWNjb3VudENoZWNrID0gaXNBZGRcclxuICAgICAgICAgICAgICAgICAgICA/IGFjY291bnQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICFwcm9wb3NhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoYGF2YWlsYWJsZV8ke3R5cGV9X2FwcHJvdmFsc2ApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGFjY291bnQuZ2V0KFwiaWRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBhY2NvdW50ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoYGF2YWlsYWJsZV8ke3R5cGV9X2FwcHJvdmFsc2ApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGFjY291bnQuZ2V0KFwiaWRcIikpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnRDaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRNYXBbYWNjb3VudC5nZXQoXCJuYW1lXCIpXSA9IGFjY291bnQuZ2V0KFwiaWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWVzLnB1c2goYWNjb3VudC5nZXQoXCJuYW1lXCIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQga2V5TmFtZXMgPSBbXTtcclxuICAgICAgICBsZXQga2V5TWFwID0ge307XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMua2V5cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5rZXlzLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBpc01pbmUgPSBBY2NvdW50U3RvcmUuaXNNeUtleShrZXkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGhhc1ZhbHVlID0gcHJvcG9zYWxcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0KFwiYXZhaWxhYmxlX2tleV9hcHByb3ZhbHNcIilcclxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoa2V5KTtcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAoaXNNaW5lICYmIGlzQWRkICYmICFoYXNWYWx1ZSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAoaXNNaW5lICYmICFpc0FkZCAmJiBoYXNWYWx1ZSlcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleU1hcFtrZXldID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBrZXlOYW1lcy5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG15QWNjb3VudHMgPSBBY2NvdW50U3RvcmUuZ2V0TXlBY2NvdW50cygpO1xyXG5cclxuICAgICAgICBsZXQgZm9vdGVyID0gW1xyXG4gICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICBrZXk9XCJzdWJtaXRcIlxyXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25Qcm9wb3NhbEFjdGlvbi5iaW5kKHRoaXMsIHByb3Bvc2FsKX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShgcHJvcG9zYWwuJHt0aGlzLnByb3BzLmFjdGlvbn1gKX1cclxuICAgICAgICAgICAgPC9CdXR0b24+LFxyXG4gICAgICAgICAgICA8QnV0dG9uIGtleT1cImNhbmNlbFwiIG9uQ2xpY2s9e3RoaXMub25DYW5jZWwuYmluZCh0aGlzKX0+XHJcbiAgICAgICAgICAgICAgICB7Y291bnRlcnBhcnQudHJhbnNsYXRlKFwiYWNjb3VudC5wZXJtLmNhbmNlbFwiKX1cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE1vZGFsXHJcbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnByb3BzLnZpc2libGV9XHJcbiAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgIGBtb2RhbC5wcm9wb3NhbHMuYWN0aW9ucy4ke3RoaXMucHJvcHMuYWN0aW9ufWBcclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICBmb290ZXI9e2Zvb3Rlcn1cclxuICAgICAgICAgICAgICAgIG9uQ2FuY2VsPXt0aGlzLnByb3BzLmhpZGVNb2RhbH1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWJsb2NrIHZlcnRpY2FsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGZvcm1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1ibG9jayB2ZXJ0aWNhbCBmdWxsLXdpZHRoLWNvbnRlbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3BhZGRpbmdUb3A6IDB9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNvbnRlbnQtYmxvY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ1JpZ2h0OiBcIjIwJVwifX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TmVzdGVkQXBwcm92YWxTdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wb3NhbD17cHJvcG9zYWwuZ2V0KFwiaWRcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9e3R5cGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnN0YXRlLmtleVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUua2V5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5zdGF0ZVt0eXBlXSB8fCBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaXNBZGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUua2V5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5zdGF0ZS5rZXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnN0YXRlW3R5cGVdIHx8IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub0ZhaWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrIGZ1bGwtd2lkdGgtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbC13aWR0aC1jb250ZW50IGZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD1cIm1vZGFsLnByb3Bvc2Fscy5wYXlfd2l0aFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ9XCJsYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50U2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X25hbWVzPXtteUFjY291bnRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VQYXllZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15QWNjb3VudHMubGVuZ3RoID09PSAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbXlBY2NvdW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuYWN0aW9uICE9PSBcImRlbGV0ZVwiICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjY291bnROYW1lcy5sZW5ndGggfHwga2V5TmFtZXMubGVuZ3RoKSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmdWxsLXdpZHRoLWNvbnRlbnQgZm9ybS1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2Btb2RhbC5wcm9wb3NhbHMuYXBwcm92YWxfJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBZGQgPyBcImFkZFwiIDogXCJyZW1vdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfbmFtZXM9e2FjY291bnROYW1lcy5jb25jYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleU5hbWVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkFjdGl2ZUFjY291bnQuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE1hcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5TWFwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmFsc2UgJiYga2V5TmFtZXMubGVuZ3RoID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZ1bGwtd2lkdGgtY29udGVudCBmb3JtLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17YG1vZGFsLnByb3Bvc2Fscy5rZXlfYXBwcm92YWxfJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBZGQgPyBcImFkZFwiIDogXCJyZW1vdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjb3VudFNlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfbmFtZXM9e2tleU5hbWVzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQWN0aXZlQWNjb3VudC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlNYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwia2V5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvTW9kYWw+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5Qcm9wb3NhbE1vZGFsID0gQmluZFRvQ2hhaW5TdGF0ZShQcm9wb3NhbE1vZGFsKTtcclxuXHJcbmNsYXNzIEZpcnN0TGV2ZWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBhY2NvdW50OiBDaGFpblR5cGVzLkNoYWluQWNjb3VudC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIHByb3Bvc2FsOiBDaGFpblR5cGVzLkNoYWluT2JqZWN0LmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcclxuICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSgpO1xyXG5cclxuICAgICAgICBDaGFpblN0b3JlLnN1YnNjcmliZSh0aGlzLl91cGRhdGVTdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICAgICAgQ2hhaW5TdG9yZS51bnN1YnNjcmliZSh0aGlzLl91cGRhdGVTdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3VwZGF0ZVN0YXRlKCkge1xyXG4gICAgICAgIGxldCB7cHJvcG9zYWwsIGFjY291bnR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQgdHlwZSA9IHByb3Bvc2FsLmdldChcInJlcXVpcmVkX2FjdGl2ZV9hcHByb3ZhbHNcIikuc2l6ZVxyXG4gICAgICAgICAgICA/IFwiYWN0aXZlXCJcclxuICAgICAgICAgICAgOiBcIm93bmVyXCI7XHJcblxyXG4gICAgICAgIGxldCByZXF1aXJlZCA9IHB1Lmxpc3RUb0lEcyhwcm9wb3NhbC5nZXQoYHJlcXVpcmVkXyR7dHlwZX1fYXBwcm92YWxzYCkpO1xyXG4gICAgICAgIGxldCBhdmFpbGFibGUgPSBwdS5saXN0VG9JRHMoXHJcbiAgICAgICAgICAgIHByb3Bvc2FsLmdldChgYXZhaWxhYmxlXyR7dHlwZX1fYXBwcm92YWxzYClcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBhdmFpbGFibGVLZXlzID0gcHUubGlzdFRvSURzKFxyXG4gICAgICAgICAgICBwcm9wb3NhbC5nZXQoXCJhdmFpbGFibGVfa2V5X2FwcHJvdmFsc1wiKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICByZXF1aXJlZFBlcm1pc3Npb25zOiBwdS51bm5lc3QocmVxdWlyZWQsIHR5cGUpLFxyXG4gICAgICAgICAgICBhdmFpbGFibGUsXHJcbiAgICAgICAgICAgIGF2YWlsYWJsZUtleXMsXHJcbiAgICAgICAgICAgIHR5cGVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHthY3Rpb259ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQge3JlcXVpcmVkUGVybWlzc2lvbnMsIGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cywgdHlwZX0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBjb25zdCBbZmluYWxSZXF1aXJlZCwgZmluYWxSZXF1aXJlZEtleXNdID0gZmluYWxSZXF1aXJlZFBlcm1zKFxyXG4gICAgICAgICAgICByZXF1aXJlZFBlcm1pc3Npb25zLFxyXG4gICAgICAgICAgICBhdmFpbGFibGUsXHJcbiAgICAgICAgICAgIGF2YWlsYWJsZUtleXNcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8UHJvcG9zYWxNb2RhbFxyXG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgICAgICB0eXBlPXt0eXBlfVxyXG4gICAgICAgICAgICAgICAgYWNjb3VudHM9e2FjdGlvbiA9PT0gXCJhcHByb3ZlXCIgPyBmaW5hbFJlcXVpcmVkIDogYXZhaWxhYmxlfVxyXG4gICAgICAgICAgICAgICAga2V5cz17YWN0aW9uID09PSBcImFwcHJvdmVcIiA/IGZpbmFsUmVxdWlyZWRLZXlzIDogYXZhaWxhYmxlS2V5c31cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbkZpcnN0TGV2ZWwgPSBCaW5kVG9DaGFpblN0YXRlKEZpcnN0TGV2ZWwpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMucHJvcHMuYWNjb3VudCB8fCAhdGhpcy5wcm9wcy5wcm9wb3NhbCB8fCAhdGhpcy5wcm9wcy5hY3Rpb24pXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICByZXR1cm4gPEZpcnN0TGV2ZWwgey4uLnRoaXMucHJvcHN9IC8+O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IENoYWluVHlwZXMgZnJvbSBcIi4uL1V0aWxpdHkvQ2hhaW5UeXBlc1wiO1xyXG5pbXBvcnQgQmluZFRvQ2hhaW5TdGF0ZSBmcm9tIFwiLi4vVXRpbGl0eS9CaW5kVG9DaGFpblN0YXRlXCI7XHJcbmltcG9ydCBMaW5rVG9BY2NvdW50QnlJZCBmcm9tIFwiLi4vVXRpbGl0eS9MaW5rVG9BY2NvdW50QnlJZFwiO1xyXG5pbXBvcnQgcHUgZnJvbSBcImNvbW1vbi9wZXJtaXNzaW9uX3V0aWxzXCI7XHJcbmltcG9ydCB7Y2xvbmVEZWVwfSBmcm9tIFwibG9kYXNoLWVzXCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCB7XHJcbiAgICBBdXRob3JpdHlEZXB0aE92ZXJmbG93V2FybmluZyxcclxuICAgIENoaWxkQXV0aG9yaXR5RGVwdGhPdmVyZmxvd1dhcm5pbmcsXHJcbiAgICBQZW5kaW5nLFxyXG4gICAgUmV2aWV3LFxyXG4gICAgRmFpbGVkLFxyXG4gICAgRXhwYW5kQnV0dG9uLFxyXG4gICAgQXBwcm92ZWRJY29uLFxyXG4gICAgS2V5UGVybWlzc2lvbkJyYW5jaCxcclxuICAgIGhhc0F1dGhvcml0eURlcHRoUHJvYmxlbSxcclxuICAgIGlzQXBwcm92ZWQsXHJcbiAgICBzdGF0dXNUZXh0LFxyXG4gICAgbm90TmVzdGRXZWlnaHRcclxufSBmcm9tIFwiLi9OZXN0ZWRBcHByb3ZhbFN0YXRlTGliXCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuXHJcbmNsYXNzIEFjY291bnRQZXJtaXNzaW9uVHJlZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge2V4cGFuZGVkOiAhIXByb3BzLmV4cGFuZGVkfTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYWNjb3VudDogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnQuaXNSZXF1aXJlZCxcclxuICAgICAgICBhY2NvdW50czogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnRzTGlzdCxcclxuICAgICAgICBsZXZlbDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgbGV2ZWw6IDBcclxuICAgIH07XHJcblxyXG4gICAgaGFuZGxlRXhwYW5kVG9nZ2xlID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2V4cGFuZGVkOiAhdGhpcy5zdGF0ZS5leHBhbmRlZH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3Qge1xyXG4gICAgICAgICAgICBhY2NvdW50LFxyXG4gICAgICAgICAgICBhdmFpbGFibGUsXHJcbiAgICAgICAgICAgIGF2YWlsYWJsZUtleXMsXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb24sXHJcbiAgICAgICAgICAgIHRocmVzaG9sZCxcclxuICAgICAgICAgICAgbGV2ZWwsXHJcbiAgICAgICAgICAgIG1heEF1dGhvcml0eURlcHRoLFxyXG4gICAgICAgICAgICBoaWRlUm9vdFxyXG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGNvbnN0IHtleHBhbmRlZH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBjb25zdCBpc09LID0gaXNBcHByb3ZlZChwZXJtaXNzaW9uLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpO1xyXG4gICAgICAgIGNvbnN0IGlzTmVzdGVkID0gcGVybWlzc2lvbi5pc05lc3RlZCgpO1xyXG4gICAgICAgIGNvbnN0IGlzTXVsdGlTaWcgPSBwZXJtaXNzaW9uLmlzTXVsdGlTaWcoKTtcclxuXHJcbiAgICAgICAgY29uc3Qgbm90TmVzdGVkV2VpZ2h0ID1cclxuICAgICAgICAgICAgbm90TmVzdGRXZWlnaHQocGVybWlzc2lvbi53ZWlnaHQsIHRocmVzaG9sZCkgfHwgMTtcclxuXHJcbiAgICAgICAgY29uc3QgbmVzdGVkV2VpZ2h0ID0gc3RhdHVzVGV4dChwZXJtaXNzaW9uLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpO1xyXG5cclxuICAgICAgICBjb25zdCBhdXRob3JpdHlEZXB0aE92ZXJmbG93ID0gbGV2ZWwgPj0gbWF4QXV0aG9yaXR5RGVwdGg7XHJcblxyXG4gICAgICAgIGNvbnN0IHJvb3RQZXJtID1cclxuICAgICAgICAgICAgIWlzTmVzdGVkICYmICFpc011bHRpU2lnID8gKFxyXG4gICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QXBwcm92ZWRJY29uIGFwcHJvdmVkPXtpc09LfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQWNjb3VudEJ5SWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnBhZ2U9XCJwZXJtaXNzaW9uc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IWlzTmVzdGVkICYmIG5vdE5lc3RlZFdlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdE5lc3RlZFdlaWdodCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90TmVzdGVkV2VpZ2h0Lmxlbmd0aCA9PT0gMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJcXHUwMEEwXFx1MDBBMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0ke25vdE5lc3RlZFdlaWdodH0gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QXBwcm92ZWRJY29uIGFwcHJvdmVkPXtpc09LfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TGlua1RvQWNjb3VudEJ5SWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnBhZ2U9XCJwZXJtaXNzaW9uc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50LmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZXhwYW5kZWQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2lzT0sgPyBcInN1Y2Nlc3MtdGV4dFwiIDogXCJcIn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25vdE5lc3RlZFdlaWdodH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdE5lc3RlZFdlaWdodCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90TmVzdGVkV2VpZ2h0ICYmIG5vdE5lc3RlZFdlaWdodC5sZW5ndGggPT09IDJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlxcdTAwQTBcXHUwMEEwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9JHtub3ROZXN0ZWRXZWlnaHR9IGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEV4cGFuZEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Ub2dnbGU9e3RoaXMuaGFuZGxlRXhwYW5kVG9nZ2xlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kZWQ9e2V4cGFuZGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZXhwYW5kZWQgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYXBwZW5kZWRcIj4oe25lc3RlZFdlaWdodH0pPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7YXV0aG9yaXR5RGVwdGhPdmVyZmxvdyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBdXRob3JpdHlEZXB0aE92ZXJmbG93V2FybmluZyAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXV0aG9yaXR5RGVwdGhQcm9ibGVtKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEF1dGhvcml0eURlcHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFleHBhbmRlZCAmJiA8Q2hpbGRBdXRob3JpdHlEZXB0aE92ZXJmbG93V2FybmluZyAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBzdGF0dXMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKChpc05lc3RlZCB8fCBpc011bHRpU2lnKSAmJiBleHBhbmRlZCkge1xyXG4gICAgICAgICAgICBwZXJtaXNzaW9uLmFjY291bnRzLmZvckVhY2goc3ViQWNjb3VudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICA8Qm91bmRBY2NvdW50UGVybWlzc2lvblRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtzdWJBY2NvdW50LmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXtzdWJBY2NvdW50LmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50cz17c3ViQWNjb3VudC5hY2NvdW50c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbj17c3ViQWNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlPXthdmFpbGFibGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZUtleXM9e2F2YWlsYWJsZUtleXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocmVzaG9sZD17cGVybWlzc2lvbi50aHJlc2hvbGR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsPXtsZXZlbCArIDF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heEF1dGhvcml0eURlcHRoPXttYXhBdXRob3JpdHlEZXB0aH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocGVybWlzc2lvbi5rZXlzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbi5rZXlzLmZvckVhY2goa2V5ID0+XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxLZXlQZXJtaXNzaW9uQnJhbmNoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2tleS5pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb249e2tleX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZT17YXZhaWxhYmxlS2V5c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsPXtsZXZlbCArIChoaWRlUm9vdCA/IDAgOiAxKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodD17bm90TmVzdGRXZWlnaHQoa2V5LndlaWdodCwgdGhyZXNob2xkKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc3RhdHVzLmxlbmd0aCA+IDAgPyAoXHJcbiAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgIHtoaWRlUm9vdCB8fCByb290UGVybX1cclxuICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj1cIjNcIiBjbGFzc05hbWU9XCJoZWFkaW5nLXBlcm1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2hpZGVSb290ID8gXCJcIiA6IFwidGFibGUtY29udGFpbmVyXCJ9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlPntzdGF0dXN9PC90YWJsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtleHBhbmRlZCAmJiBsZXZlbCA9PT0gMCAmJiA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlclwiIC8+fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgIDx0Ym9keT57cm9vdFBlcm19PC90Ym9keT5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IEJvdW5kQWNjb3VudFBlcm1pc3Npb25UcmVlID0gQmluZFRvQ2hhaW5TdGF0ZShBY2NvdW50UGVybWlzc2lvblRyZWUpO1xyXG5cclxuY2xhc3MgRmlyc3RMZXZlbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIHJlcXVpcmVkOiBDaGFpblR5cGVzLkNoYWluQWNjb3VudHNMaXN0LFxyXG4gICAgICAgIGF2YWlsYWJsZTogQ2hhaW5UeXBlcy5DaGFpbkFjY291bnRzTGlzdFxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIHR5cGU6IFwiYWN0aXZlXCIsXHJcbiAgICAgICAgYWRkZWQ6IG51bGwsXHJcbiAgICAgICAgcmVtb3ZlZDogbnVsbFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgcmVxdWlyZWRQZXJtaXNzaW9uczogW10sXHJcbiAgICAgICAgICAgIGV4cGFuZGVkOiBwcm9wcy5leHBhbmRlZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUoKTtcclxuXHJcbiAgICAgICAgQ2hhaW5TdG9yZS5zdWJzY3JpYmUodGhpcy5fdXBkYXRlU3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgICAgIENoYWluU3RvcmUudW5zdWJzY3JpYmUodGhpcy5fdXBkYXRlU3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIF91cGRhdGVTdGF0ZSgpIHtcclxuICAgICAgICBsZXQgcmVxdWlyZWQgPSBwdS5saXN0VG9JRHModGhpcy5wcm9wcy5yZXF1aXJlZCk7XHJcbiAgICAgICAgbGV0IGF2YWlsYWJsZSA9IHB1Lmxpc3RUb0lEcyh0aGlzLnByb3BzLmF2YWlsYWJsZSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICByZXF1aXJlZFBlcm1pc3Npb25zOiBwdS51bm5lc3QocmVxdWlyZWQsIHRoaXMucHJvcHMudHlwZSksXHJcbiAgICAgICAgICAgIHJlcXVpcmVkLFxyXG4gICAgICAgICAgICBhdmFpbGFibGVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVFeHBhbmRUb2dnbGUgPSAoKSA9PiB0aGlzLnNldFN0YXRlKHtleHBhbmRlZDogIXRoaXMuc3RhdGUuZXhwYW5kZWR9KTtcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgdHlwZSxcclxuICAgICAgICAgICAgYWRkZWQsXHJcbiAgICAgICAgICAgIHJlbW92ZWQsXHJcbiAgICAgICAgICAgIGF2YWlsYWJsZUtleXMsXHJcbiAgICAgICAgICAgIGdsb2JhbE9iamVjdCxcclxuICAgICAgICAgICAgcmV2aWV3UGVyaW9kVGltZSxcclxuICAgICAgICAgICAgbm9GYWlsLFxyXG4gICAgICAgICAgICBmYWlsUmVhc29uXHJcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IHtyZXF1aXJlZFBlcm1pc3Npb25zLCByZXF1aXJlZCwgYXZhaWxhYmxlLCBleHBhbmRlZH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBhdmFpbGFibGUgPSBjbG9uZURlZXAoYXZhaWxhYmxlKTtcclxuICAgICAgICBhdmFpbGFibGVLZXlzID0gYXZhaWxhYmxlS2V5cy50b0pTKCk7XHJcblxyXG4gICAgICAgIGlmIChhZGRlZCkge1xyXG4gICAgICAgICAgICBhdmFpbGFibGUucHVzaChhZGRlZCk7XHJcbiAgICAgICAgICAgIGF2YWlsYWJsZUtleXMucHVzaChhZGRlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVtb3ZlZCkge1xyXG4gICAgICAgICAgICBpZiAoYXZhaWxhYmxlLmluZGV4T2YocmVtb3ZlZCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBhdmFpbGFibGUuc3BsaWNlKGF2YWlsYWJsZS5pbmRleE9mKHJlbW92ZWQpLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYXZhaWxhYmxlS2V5cy5pbmRleE9mKHJlbW92ZWQpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlS2V5cy5zcGxpY2UoYXZhaWxhYmxlS2V5cy5pbmRleE9mKHJlbW92ZWQpLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYXBwcm92ZWRDb3VudCA9IHJlcXVpcmVkUGVybWlzc2lvbnMucmVkdWNlKFxyXG4gICAgICAgICAgICAodG90YWwsIHBlcm0pID0+XHJcbiAgICAgICAgICAgICAgICB0b3RhbCArIChpc0FwcHJvdmVkKHBlcm0sIGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cykgPyAxIDogMCksXHJcbiAgICAgICAgICAgIDBcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IGFwcHJvdmVyc0NvdW50ID0gcmVxdWlyZWRQZXJtaXNzaW9ucy5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgaXNPSyA9IGFwcHJvdmVkQ291bnQgPT09IGFwcHJvdmVyc0NvdW50O1xyXG5cclxuICAgICAgICBjb25zdCBmYWlsZWQgPSBpc09LICYmICFyZXZpZXdQZXJpb2RUaW1lICYmICFub0ZhaWw7XHJcbiAgICAgICAgY29uc3QgcGVuZGluZ1JldmlldyA9IGlzT0sgJiYgcmV2aWV3UGVyaW9kVGltZTtcclxuXHJcbiAgICAgICAgY29uc3QgbWF4QXV0aG9yaXR5RGVwdGggPSBnbG9iYWxPYmplY3RcclxuICAgICAgICAgICAgLmdldChcInBhcmFtZXRlcnNcIilcclxuICAgICAgICAgICAgLmdldChcIm1heF9hdXRob3JpdHlfZGVwdGhcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IG9uZVBlcm0gPSByZXF1aXJlZFBlcm1pc3Npb25zLmxlbmd0aCA9PT0gMTtcclxuICAgICAgICBjb25zdCBvUGVybWlzc2lvbiA9IG9uZVBlcm0gPyByZXF1aXJlZFBlcm1pc3Npb25zWzBdIDogbnVsbDtcclxuXHJcbiAgICAgICAgY29uc3QgbmVzdGVkV2VpZ2h0ID0gIW9uZVBlcm0gJiYgYCR7YXBwcm92ZWRDb3VudH0gLyAke2FwcHJvdmVyc0NvdW50fWA7XHJcblxyXG4gICAgICAgIGNvbnN0IHJvd3MgPSByZXF1aXJlZFBlcm1pc3Npb25zLm1hcChhY2NvdW50ID0+IChcclxuICAgICAgICAgICAgPEJvdW5kQWNjb3VudFBlcm1pc3Npb25UcmVlXHJcbiAgICAgICAgICAgICAgICBrZXk9e2FjY291bnQuaWR9XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50PXthY2NvdW50LmlkfVxyXG4gICAgICAgICAgICAgICAgYWNjb3VudHM9e2FjY291bnQuYWNjb3VudHN9XHJcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uPXthY2NvdW50fVxyXG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlPXthdmFpbGFibGV9XHJcbiAgICAgICAgICAgICAgICBhdmFpbGFibGVLZXlzPXthdmFpbGFibGVLZXlzfVxyXG4gICAgICAgICAgICAgICAgZXhwYW5kZWQ9e3RoaXMucHJvcHMuZXhwYW5kZWQgfHwgb25lUGVybX1cclxuICAgICAgICAgICAgICAgIGxldmVsPXswfVxyXG4gICAgICAgICAgICAgICAgbWF4QXV0aG9yaXR5RGVwdGg9e21heEF1dGhvcml0eURlcHRofVxyXG4gICAgICAgICAgICAgICAgaGlkZVJvb3Q9e29uZVBlcm19XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmVzdGVkLWFwcHJvdmFsLXN0YXRlXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvb3Qtc3RhdHVzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge2ZhaWxlZCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPEZhaWxlZCByZWFzb249e2ZhaWxSZWFzb259IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IHBlbmRpbmdSZXZpZXcgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxSZXZpZXcgLz5cclxuICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8UGVuZGluZyAvPlxyXG4gICAgICAgICAgICAgICAgICAgICl9e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgIHshb1Blcm1pc3Npb24gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPih7bmVzdGVkV2VpZ2h0fSk8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgb1Blcm1pc3Npb24udGhyZXNob2xkID4gMSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0KG9QZXJtaXNzaW9uLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpXHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICB7KCFvUGVybWlzc2lvbiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvUGVybWlzc2lvbi5pc011bHRpU2lnKCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb1Blcm1pc3Npb24uaXNOZXN0ZWQoKSkgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8RXhwYW5kQnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblRvZ2dsZT17dGhpcy5oYW5kbGVFeHBhbmRUb2dnbGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRlZD17ZXhwYW5kZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICB7IWV4cGFuZGVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkUGVybWlzc2lvbnMuc29tZShwZXJtaXNzaW9uID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNBdXRob3JpdHlEZXB0aFByb2JsZW0oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4QXV0aG9yaXR5RGVwdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgJiYgPENoaWxkQXV0aG9yaXR5RGVwdGhPdmVyZmxvd1dhcm5pbmcgLz59XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIHtleHBhbmRlZCAmJiA8dGFibGU+e3Jvd3N9PC90YWJsZT59XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuRmlyc3RMZXZlbCA9IEJpbmRUb0NoYWluU3RhdGUoRmlyc3RMZXZlbCk7XHJcblxyXG5jbGFzcyBQcm9wb3NhbFdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICBwcm9wb3NhbDogQ2hhaW5UeXBlcy5DaGFpbk9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgICAgIHR5cGU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcclxuICAgICAgICBnbG9iYWxPYmplY3Q6IENoYWluVHlwZXMuQ2hhaW5PYmplY3QuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIHR5cGU6IFwiYWN0aXZlXCIsXHJcbiAgICAgICAgYWRkZWQ6IG51bGwsXHJcbiAgICAgICAgZ2xvYmFsT2JqZWN0OiBcIjIuMC4wXCJcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7cHJvcG9zYWwsIHR5cGV9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQgYXZhaWxhYmxlID0gcHJvcG9zYWwuZ2V0KGBhdmFpbGFibGVfJHt0eXBlfV9hcHByb3ZhbHNgKTtcclxuICAgICAgICBsZXQgYXZhaWxhYmxlS2V5cyA9IHByb3Bvc2FsLmdldChcImF2YWlsYWJsZV9rZXlfYXBwcm92YWxzXCIpO1xyXG4gICAgICAgIGxldCByZXF1aXJlZCA9IHByb3Bvc2FsLmdldChgcmVxdWlyZWRfJHt0eXBlfV9hcHByb3ZhbHNgKTtcclxuICAgICAgICBsZXQgZmFpbFJlYXNvbiA9IHByb3Bvc2FsLmdldChcImZhaWxfcmVhc29uXCIpIHx8IFwiIFwiO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8Rmlyc3RMZXZlbFxyXG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWR9XHJcbiAgICAgICAgICAgICAgICBhdmFpbGFibGU9e2F2YWlsYWJsZX1cclxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZUtleXM9e2F2YWlsYWJsZUtleXN9XHJcbiAgICAgICAgICAgICAgICByZXZpZXdQZXJpb2RUaW1lPXtwcm9wb3NhbC5nZXQoXCJyZXZpZXdfcGVyaW9kX3RpbWVcIil9XHJcbiAgICAgICAgICAgICAgICBmYWlsUmVhc29uPXtmYWlsUmVhc29ufVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJpbmRUb0NoYWluU3RhdGUoUHJvcG9zYWxXcmFwcGVyKTtcclxuIiwiaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IEltbXV0YWJsZSBmcm9tIFwiaW1tdXRhYmxlXCI7XHJcblxyXG5sZXQgS2V5QXV0aCA9IGZ1bmN0aW9uKGF1dGgpIHtcclxuICAgIHRoaXMuaWQgPSBhdXRoLnRvSlMgPyBhdXRoLmdldCgwKSA6IGF1dGhbMF07XHJcbiAgICB0aGlzLndlaWdodCA9IGF1dGgudG9KUyA/IGF1dGguZ2V0KDEpIDogYXV0aFsxXTtcclxuXHJcbiAgICB0aGlzLmlzQXZhaWxhYmxlID0gYXV0aHMgPT4ge1xyXG4gICAgICAgIHJldHVybiBhdXRocy5pbmNsdWRlc1xyXG4gICAgICAgICAgICA/IGF1dGhzLmluY2x1ZGVzKHRoaXMuaWQpXHJcbiAgICAgICAgICAgIDogYXV0aHMuaW5kZXhPZih0aGlzKSAhPT0gLTE7XHJcbiAgICB9O1xyXG59O1xyXG5cclxubGV0IHBlcm1pc3Npb25VdGlscyA9IHtcclxuICAgIEFjY291bnRQZXJtaXNzaW9uOiBmdW5jdGlvbihhY2NvdW50LCB3ZWlnaHQsIHR5cGUpIHtcclxuICAgICAgICB0aGlzLmlkID0gYWNjb3VudC5nZXQoXCJpZFwiKTtcclxuICAgICAgICB0aGlzLndlaWdodCA9IHdlaWdodDtcclxuICAgICAgICB0aGlzLnRocmVzaG9sZCA9IGFjY291bnQuZ2V0SW4oW3R5cGUsIFwid2VpZ2h0X3RocmVzaG9sZFwiXSk7XHJcbiAgICAgICAgdGhpcy5hY2NvdW50cyA9IFtdO1xyXG4gICAgICAgIHRoaXMua2V5cyA9IGFjY291bnRcclxuICAgICAgICAgICAgLmdldEluKFt0eXBlLCBcImtleV9hdXRoc1wiXSlcclxuICAgICAgICAgICAgLm1hcChhdXRoID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgS2V5QXV0aChhdXRoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRvQXJyYXkoKTtcclxuXHJcbiAgICAgICAgdGhpcy5pc0F2YWlsYWJsZSA9IGF1dGhzID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGF1dGhzLmluY2x1ZGVzXHJcbiAgICAgICAgICAgICAgICA/IGF1dGhzLmluY2x1ZGVzKHRoaXMuaWQpXHJcbiAgICAgICAgICAgICAgICA6IGF1dGhzLmluZGV4T2YodGhpcykgIT09IC0xO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuX3N1bVdlaWdodHMgPSBhdXRocyA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc05lc3RlZCgpICYmICF0aGlzLmlzTXVsdGlTaWcoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNBdmFpbGFibGUoYXV0aHMpID8gdGhpcy53ZWlnaHQgOiAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN1bSA9IHRoaXMuYWNjb3VudHMucmVkdWNlKChzdGF0dXMsIGFjY291bnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYWNjb3VudC5fc3VtV2VpZ2h0cyhhdXRocykgPyBhY2NvdW50LndlaWdodCA6IDApXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0sIDApO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKHN1bSAvIHRoaXMudGhyZXNob2xkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0U3RhdHVzID0gKGF1dGhzLCBrZXlBdXRocykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNOZXN0ZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN1bSA9IHRoaXMuX3N1bVdlaWdodHMoYXV0aHMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNdWx0aVNpZygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VtICs9IHRoaXMuc3VtS2V5cyhrZXlBdXRocyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VtO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN1bSA9IHRoaXMuYWNjb3VudHMucmVkdWNlKChzdGF0dXMsIGFjY291bnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdHVzICsgYWNjb3VudC5fc3VtV2VpZ2h0cyhhdXRocyk7XHJcbiAgICAgICAgICAgICAgICB9LCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5rZXlzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1bSArPSB0aGlzLnN1bUtleXMoa2V5QXV0aHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzdW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnN1bUtleXMgPSBrZXlBdXRocyA9PiB7XHJcbiAgICAgICAgICAgIGxldCBrZXlTdW0gPSB0aGlzLmtleXMucmVkdWNlKChzLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzICsgKGtleS5pc0F2YWlsYWJsZShrZXlBdXRocykgPyBrZXkud2VpZ2h0IDogMCk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICByZXR1cm4ga2V5U3VtO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuaXNOZXN0ZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY291bnRzLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5pc011bHRpU2lnID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5rZXlzLnJlZHVjZSgoZmluYWwsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbmFsIHx8IGtleS53ZWlnaHQgPCB0aGlzLnRocmVzaG9sZDtcclxuICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0TWlzc2luZ1NpZ3MgPSBhdXRocyA9PiB7XHJcbiAgICAgICAgICAgIGxldCBtaXNzaW5nID0gW107XHJcbiAgICAgICAgICAgIGxldCBuZXN0ZWQgPSBbXTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNOZXN0ZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgbmVzdGVkID0gdGhpcy5hY2NvdW50cy5yZWR1Y2UoKGEsIGFjY291bnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5jb25jYXQoYWNjb3VudC5nZXRNaXNzaW5nU2lncyhhdXRocykpO1xyXG4gICAgICAgICAgICAgICAgfSwgW10pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmlzQXZhaWxhYmxlKGF1dGhzKSkge1xyXG4gICAgICAgICAgICAgICAgbWlzc2luZy5wdXNoKHRoaXMuaWQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWlzc2luZy5jb25jYXQobmVzdGVkKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldE1pc3NpbmdLZXlzID0gYXV0aHMgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbWlzc2luZyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgbmVzdGVkID0gW107XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmtleXMubGVuZ3RoICYmICh0aGlzLmlzTmVzdGVkKCkgfHwgdGhpcy5pc011bHRpU2lnKCkpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmtleXMuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgha2V5LmlzQXZhaWxhYmxlKGF1dGhzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaXNzaW5nLnB1c2goa2V5LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNOZXN0ZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgbmVzdGVkID0gdGhpcy5hY2NvdW50cy5yZWR1Y2UoKGEsIGFjY291bnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5jb25jYXQoYWNjb3VudC5nZXRNaXNzaW5nS2V5cyhhdXRocykpO1xyXG4gICAgICAgICAgICAgICAgfSwgW10pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWlzc2luZy5jb25jYXQobmVzdGVkKTtcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBsaXN0VG9JRHM6IGZ1bmN0aW9uKGFjY291bnRMaXN0KSB7XHJcbiAgICAgICAgbGV0IGFsbEFjY291bnRzID0gW107XHJcblxyXG4gICAgICAgIGFjY291bnRMaXN0LmZvckVhY2goYWNjb3VudCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhY2NvdW50KSB7XHJcbiAgICAgICAgICAgICAgICBhbGxBY2NvdW50cy5wdXNoKGFjY291bnQuZ2V0ID8gYWNjb3VudC5nZXQoXCJpZFwiKSA6IGFjY291bnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBhbGxBY2NvdW50cztcclxuICAgIH0sXHJcblxyXG4gICAgdW5yYXZlbDogZnVuY3Rpb24oYWNjb3VudFBlcm1pc3Npb24sIHR5cGUsIHJlY3Vyc2l2ZV9jb3VudCA9IDApIHtcclxuICAgICAgICBpZiAocmVjdXJzaXZlX2NvdW50IDwgMykge1xyXG4gICAgICAgICAgICBsZXQgYWNjb3VudCA9IENoYWluU3RvcmUuZ2V0QWNjb3VudChhY2NvdW50UGVybWlzc2lvbi5pZCk7XHJcbiAgICAgICAgICAgIGlmIChhY2NvdW50ICYmIGFjY291bnQuZ2V0SW4oW3R5cGUsIFwiYWNjb3VudF9hdXRoc1wiXSkuc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgYWNjb3VudC5nZXRJbihbdHlwZSwgXCJhY2NvdW50X2F1dGhzXCJdKS5mb3JFYWNoKGF1dGggPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXN0ZWRBY2NvdW50ID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGF1dGguZ2V0KDApKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmVzdGVkQWNjb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50UGVybWlzc2lvbi5hY2NvdW50cy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bnJhdmVsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyB0aGlzLkFjY291bnRQZXJtaXNzaW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXN0ZWRBY2NvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoLmdldCgxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmVfY291bnQgKyAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhY2NvdW50UGVybWlzc2lvbjtcclxuICAgIH0sXHJcblxyXG4gICAgdW5uZXN0OiBmdW5jdGlvbihhY2NvdW50cywgdHlwZSkge1xyXG4gICAgICAgIGxldCBtYXAgPSBbXTtcclxuICAgICAgICBhY2NvdW50cy5mb3JFYWNoKGlkID0+IHtcclxuICAgICAgICAgICAgbGV0IGZ1bGxBY2NvdW50ID0gQ2hhaW5TdG9yZS5nZXRBY2NvdW50KGlkKTtcclxuICAgICAgICAgICAgaWYgKCFmdWxsQWNjb3VudCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudFBlcm1pc3Npb24gPSB0aGlzLnVucmF2ZWwoXHJcbiAgICAgICAgICAgICAgICBuZXcgdGhpcy5BY2NvdW50UGVybWlzc2lvbihmdWxsQWNjb3VudCwgbnVsbCwgdHlwZSksXHJcbiAgICAgICAgICAgICAgICB0eXBlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1hcC5wdXNoKGN1cnJlbnRQZXJtaXNzaW9uKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1hcDtcclxuICAgIH0sXHJcblxyXG4gICAgZmxhdHRlbl9hdXRocyhhdXRocywgZXhpc3RpbmdBdXRocyA9IEltbXV0YWJsZS5MaXN0KCkpIHtcclxuICAgICAgICBpZiAoIWF1dGhzLnNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nQXV0aHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhdXRocy5mb3JFYWNoKG93bmVyID0+IHtcclxuICAgICAgICAgICAgaWYgKCFleGlzdGluZ0F1dGhzLmluY2x1ZGVzKG93bmVyLmdldCgwKSkpIHtcclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nQXV0aHMgPSBleGlzdGluZ0F1dGhzLnB1c2gob3duZXIuZ2V0KDApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBleGlzdGluZ0F1dGhzO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcGVybWlzc2lvblV0aWxzO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBJY29uIGZyb20gXCIuLi9JY29uL0ljb25cIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gXCJyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50XCI7XHJcbmltcG9ydCB7VG9vbHRpcCBhcyBBbnRUb29sdGlwfSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVG9vbHRpcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3Qge2NsYXNzTmFtZSwgY2hpbGRyZW4sIGRhdGFUaXAsIGNvbnRlbnR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8QW50VG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgdGl0bGU9e1xyXG4gICAgICAgICAgICAgICAgICAgIChkYXRhVGlwICYmIGRhdGFUaXAudHJpbSgpKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShjb250ZW50KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e1widG9vbHRpcCBcIiArIGNsYXNzTmFtZX0+e2NoaWxkcmVufTwvc3Bhbj5cclxuICAgICAgICAgICAgPC9BbnRUb29sdGlwPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBBdXRob3JpdHlEZXB0aE92ZXJmbG93V2FybmluZyA9ICgpID0+IChcclxuICAgIDxUb29sdGlwXHJcbiAgICAgICAgY2xhc3NOYW1lPVwiZXJyb3IgYXBwZW5kZWRcIlxyXG4gICAgICAgIGNvbnRlbnQ9XCJleHBsb3Jlci5wcm9wb3NhbHMuYXV0aG9yaXR5X2RlcHRoX3dhcm5pbmdcIlxyXG4gICAgPlxyXG4gICAgICAgIC8hXFxcclxuICAgIDwvVG9vbHRpcD5cclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBDaGlsZEF1dGhvcml0eURlcHRoT3ZlcmZsb3dXYXJuaW5nID0gKCkgPT4gKFxyXG4gICAgPFRvb2x0aXBcclxuICAgICAgICBjbGFzc05hbWU9XCJlcnJvciBhcHBlbmRlZFwiXHJcbiAgICAgICAgY29udGVudD1cImV4cGxvcmVyLnByb3Bvc2Fscy5jaGlsZHJlbl9hdXRob3JpdHlfZGVwdGhfd2FybmluZ1wiXHJcbiAgICA+XHJcbiAgICAgICAgLyFcXFxyXG4gICAgPC9Ub29sdGlwPlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IFBlbmRpbmcgPSAoKSA9PiAoXHJcbiAgICA8VG9vbHRpcCBjbGFzc05hbWU9XCJ3YXJuaW5nXCIgY29udGVudD1cImV4cGxvcmVyLnByb3Bvc2Fscy5wZW5kaW5nX2FwcHJvdmFsXCI+XHJcbiAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLnBlbmRpbmdcIiAvPlxyXG4gICAgPC9Ub29sdGlwPlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IFJldmlldyA9ICgpID0+IChcclxuICAgIDxUb29sdGlwIGNsYXNzTmFtZT1cIndhcm5pbmdcIiBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLnBlbmRpbmdfcmV2aWV3XCI+XHJcbiAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhwbG9yZXIucHJvcG9zYWxzLnJldmlld1wiIC8+XHJcbiAgICA8L1Rvb2x0aXA+XHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgRmFpbGVkID0gKHtyZWFzb259KSA9PiAoXHJcbiAgICA8VG9vbHRpcFxyXG4gICAgICAgIGNsYXNzTmFtZT1cImVycm9yXCJcclxuICAgICAgICBkYXRhVGlwPXtyZWFzb259XHJcbiAgICAgICAgY29udGVudD1cImV4cGxvcmVyLnByb3Bvc2Fscy5ub19yZWFzb25fYXZhaWxhYmxlX3N3aXRjaF9ub2RlXCJcclxuICAgID5cclxuICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleHBsb3Jlci5wcm9wb3NhbHMuZmFpbGVkXCIgLz5cclxuICAgIDwvVG9vbHRpcD5cclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBFeHBhbmRCdXR0b24gPSAoe29uVG9nZ2xlLCBleHBhbmRlZH0pID0+IChcclxuICAgIDxhIGNsYXNzTmFtZT1cImV4cGFuZC1idXR0b25cIiBvbkNsaWNrPXtvblRvZ2dsZX0+XHJcbiAgICAgICAgW3tleHBhbmRlZCA/IFwiLVwiIDogXCIrXCJ9XVxyXG4gICAgPC9hPlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IEFwcHJvdmVkSWNvbiA9ICh7YXBwcm92ZWR9KSA9PlxyXG4gICAgYXBwcm92ZWQgPyAoXHJcbiAgICAgICAgPEljb25cclxuICAgICAgICAgICAgbmFtZT1cImNoZWNrbWFyay1jaXJjbGVcIlxyXG4gICAgICAgICAgICBzaXplPVwiMXhcIlxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJzdWNjZXNzXCJcclxuICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5jaGVja21hcmtfY2lyY2xlLm9wZXJhdGlvbl9zdWNjZWVkXCJcclxuICAgICAgICAvPlxyXG4gICAgKSA6IChcclxuICAgICAgICA8SWNvblxyXG4gICAgICAgICAgICBuYW1lPVwiY3Jvc3MtY2lyY2xlXCJcclxuICAgICAgICAgICAgc2l6ZT1cIjF4XCJcclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZXJyb3JcIlxyXG4gICAgICAgICAgICB0aXRsZT1cImljb25zLmNyb3NzX2NpcmNsZS5vcGVyYXRpb25fZmFpbGVkXCJcclxuICAgICAgICAvPlxyXG4gICAgKTtcclxuXHJcbmV4cG9ydCBjb25zdCBLZXlQZXJtaXNzaW9uQnJhbmNoID0gKHthdmFpbGFibGUsIHBlcm1pc3Npb24sIHdlaWdodCwgbGV2ZWx9KSA9PiAoXHJcbiAgICA8dGJvZHk+XHJcbiAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICA8dGQgY29sU3Bhbj1cIjJcIj5cclxuICAgICAgICAgICAgICAgIDxBcHByb3ZlZEljb24gYXBwcm92ZWQ9e3Blcm1pc3Npb24uaXNBdmFpbGFibGUoYXZhaWxhYmxlKX0gLz5cclxuICAgICAgICAgICAgICAgIHtwZXJtaXNzaW9uLmlkLnN1YnN0cigwLCAyMCAtIDQgKiBsZXZlbCl9XHJcbiAgICAgICAgICAgICAgICAuLi5cclxuICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgPHRkPnt3ZWlnaHR9PC90ZD5cclxuICAgICAgICA8L3RyPlxyXG4gICAgPC90Ym9keT5cclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBoYXNBdXRob3JpdHlEZXB0aFByb2JsZW0gPSAoXHJcbiAgICBtYXhBdXRob3JpdHlEZXB0aCxcclxuICAgIHBlcm1pc3Npb24sXHJcbiAgICBsZXZlbCA9IDBcclxuKSA9PiB7XHJcbiAgICBpZiAobGV2ZWwgPiBtYXhBdXRob3JpdHlEZXB0aCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIGlmICghcGVybWlzc2lvbi5pc05lc3RlZCgpICYmICFwZXJtaXNzaW9uLmlzTXVsdGlTaWcoKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHBlcm1pc3Npb24uYWNjb3VudHMuc29tZShzdWJBY2NvdW50ID0+XHJcbiAgICAgICAgICAgIGhhc0F1dGhvcml0eURlcHRoUHJvYmxlbShtYXhBdXRob3JpdHlEZXB0aCwgc3ViQWNjb3VudCwgbGV2ZWwgKyAxKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0U3RhdHVzID0gKHBlcm1pc3Npb24sIGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cykgPT5cclxuICAgIHBlcm1pc3Npb24uYWNjb3VudHMucmVkdWNlKFxyXG4gICAgICAgIChhbW91bnQsIHN1YlBlcm1pc3Npb24pID0+XHJcbiAgICAgICAgICAgIGFtb3VudCArXHJcbiAgICAgICAgICAgIChpc0FwcHJvdmVkKHN1YlBlcm1pc3Npb24sIGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cylcclxuICAgICAgICAgICAgICAgID8gc3ViUGVybWlzc2lvbi53ZWlnaHRcclxuICAgICAgICAgICAgICAgIDogMCksXHJcblxyXG4gICAgICAgIDBcclxuICAgICkgK1xyXG4gICAgcGVybWlzc2lvbi5rZXlzLnJlZHVjZShcclxuICAgICAgICAoYW1vdW50LCBrZXkpID0+XHJcbiAgICAgICAgICAgIGFtb3VudCArIChrZXkuaXNBdmFpbGFibGUoYXZhaWxhYmxlS2V5cykgPyBrZXkud2VpZ2h0IDogMCksXHJcbiAgICAgICAgMFxyXG4gICAgKTtcclxuXHJcbmV4cG9ydCBjb25zdCBpc0FwcHJvdmVkID0gKHBlcm1pc3Npb24sIGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cykgPT5cclxuICAgIHBlcm1pc3Npb24uaXNOZXN0ZWQoKSB8fCBwZXJtaXNzaW9uLmlzTXVsdGlTaWcoKVxyXG4gICAgICAgID8gZ2V0U3RhdHVzKHBlcm1pc3Npb24sIGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cykgPj1cclxuICAgICAgICAgIHBlcm1pc3Npb24udGhyZXNob2xkXHJcbiAgICAgICAgOiBwZXJtaXNzaW9uLmlzQXZhaWxhYmxlKGF2YWlsYWJsZSk7XHJcblxyXG5leHBvcnQgY29uc3Qgc3RhdHVzVGV4dCA9IChwZXJtaXNzaW9uLCBhdmFpbGFibGUsIGF2YWlsYWJsZUtleXMpID0+XHJcbiAgICBwZXJtaXNzaW9uICYmIHBlcm1pc3Npb24udGhyZXNob2xkID4gMTBcclxuICAgICAgICA/IGAke3V0aWxzLmdldF9wZXJjZW50YWdlKFxyXG4gICAgICAgICAgICAgIHBlcm1pc3Npb24uZ2V0U3RhdHVzKGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cyksXHJcbiAgICAgICAgICAgICAgcGVybWlzc2lvbi50aHJlc2hvbGRcclxuICAgICAgICAgICl9IC8gMTAwJWBcclxuICAgICAgICA6IGAke3Blcm1pc3Npb24uZ2V0U3RhdHVzKGF2YWlsYWJsZSwgYXZhaWxhYmxlS2V5cyl9IC8gJHtcclxuICAgICAgICAgICAgICBwZXJtaXNzaW9uLnRocmVzaG9sZFxyXG4gICAgICAgICAgfWA7XHJcblxyXG5leHBvcnQgY29uc3Qgbm90TmVzdGRXZWlnaHQgPSAod2VpZ2h0LCB0aHJlc2hvbGQpID0+XHJcbiAgICB0aHJlc2hvbGQgJiYgdGhyZXNob2xkID4gMTBcclxuICAgICAgICA/IHV0aWxzLmdldF9wZXJjZW50YWdlKHdlaWdodCwgdGhyZXNob2xkKVxyXG4gICAgICAgIDogd2VpZ2h0O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IE1hcmtldHNBY3Rpb25zIGZyb20gXCJhY3Rpb25zL01hcmtldHNBY3Rpb25zXCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCB7TGltaXRPcmRlciwgU2V0dGxlT3JkZXIsIEZlZWRQcmljZX0gZnJvbSBcImNvbW1vbi9NYXJrZXRDbGFzc2VzXCI7XHJcbmltcG9ydCB7Y29ubmVjdH0gZnJvbSBcImFsdC1yZWFjdFwiO1xyXG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tIFwic3RvcmVzL1NldHRpbmdzU3RvcmVcIjtcclxuaW1wb3J0IFNldHRpbmdzQWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9TZXR0aW5nc0FjdGlvbnNcIjtcclxuaW1wb3J0IG1hcmtldFV0aWxzIGZyb20gXCJjb21tb24vbWFya2V0X3V0aWxzXCI7XHJcbmltcG9ydCBUcmFuc2xhdGUgZnJvbSBcInJlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IHtJbnB1dCwgSWNvbiwgVGFibGUsIFN3aXRjaCwgQnV0dG9ufSBmcm9tIFwiYml0c2hhcmVzLXVpLXN0eWxlLWd1aWRlXCI7XHJcbmltcG9ydCBBY2NvdW50T3JkZXJSb3dEZXNjcmlwdGlvbiBmcm9tIFwiLi9BY2NvdW50T3JkZXJSb3dEZXNjcmlwdGlvblwiO1xyXG5pbXBvcnQgQ29sbGFwc2libGVUYWJsZSBmcm9tIFwiLi4vVXRpbGl0eS9Db2xsYXBzaWJsZVRhYmxlXCI7XHJcbmltcG9ydCB7Z3JvdXBCeSwgc3VtQnksIG1lYW5CeX0gZnJvbSBcImxvZGFzaC1lc1wiO1xyXG5pbXBvcnQge0Zvcm1hdHRlZE51bWJlcn0gZnJvbSBcInJlYWN0LWludGxcIjtcclxuXHJcbmltcG9ydCB7TGlua30gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcclxuaW1wb3J0IHtNYXJrZXRQcmljZX0gZnJvbSBcIi4uL1V0aWxpdHkvTWFya2V0UHJpY2VcIjtcclxuaW1wb3J0IEZvcm1hdHRlZFByaWNlIGZyb20gXCIuLi9VdGlsaXR5L0Zvcm1hdHRlZFByaWNlXCI7XHJcbmltcG9ydCBBc3NldE5hbWUgZnJvbSBcIi4uL1V0aWxpdHkvQXNzZXROYW1lXCI7XHJcbmltcG9ydCB7RXF1aXZhbGVudFZhbHVlQ29tcG9uZW50fSBmcm9tIFwiLi4vVXRpbGl0eS9FcXVpdmFsZW50VmFsdWVDb21wb25lbnRcIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcclxuaW1wb3J0IGFzc2V0X3V0aWxzIGZyb20gXCJjb21tb24vYXNzZXRfdXRpbHNcIjtcclxuXHJcbmNsYXNzIEFjY291bnRPcmRlcnMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkT3JkZXJzOiBbXSxcclxuICAgICAgICAgICAgZmlsdGVyVmFsdWU6IFwiXCIsXHJcbiAgICAgICAgICAgIGFyZUFzc2V0c0dyb3VwZWQ6IHByb3BzLnZpZXdTZXR0aW5ncy5nZXQoXHJcbiAgICAgICAgICAgICAgICBcImFjY291bnRPcmRlcnNHcm91cHBlZEJ5QXNzZXRcIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0RmlsdGVyZWRPcmRlcnModHlwZSkge1xyXG4gICAgICAgIGxldCB7ZmlsdGVyVmFsdWV9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgbGV0IG9yZGVycyA9XHJcbiAgICAgICAgICAgICh0eXBlICE9PSBcInNldHRsZVwiXHJcbiAgICAgICAgICAgICAgICA/IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJvcmRlcnNcIilcclxuICAgICAgICAgICAgICAgIDogdGhpcy5wcm9wcy5zZXR0bGVPcmRlcnMpIHx8IFtdO1xyXG5cclxuICAgICAgICByZXR1cm4gb3JkZXJzLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgbGV0IG9yZGVyID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QoaXRlbSkudG9KUygpO1xyXG4gICAgICAgICAgICBsZXQgYmFzZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQob3JkZXIuc2VsbF9wcmljZS5iYXNlLmFzc2V0X2lkKTtcclxuICAgICAgICAgICAgbGV0IHF1b3RlID0gQ2hhaW5TdG9yZS5nZXRBc3NldChvcmRlci5zZWxsX3ByaWNlLnF1b3RlLmFzc2V0X2lkKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBiYXNlU3ltYm9sID0gYmFzZS5nZXQoXCJzeW1ib2xcIikudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgbGV0IHF1b3RlU3ltYm9sID0gcXVvdGUuZ2V0KFwic3ltYm9sXCIpLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgYmFzZVN5bWJvbC5pbmRleE9mKGZpbHRlclZhbHVlKSA+IC0xIHx8XHJcbiAgICAgICAgICAgICAgICBxdW90ZVN5bWJvbC5pbmRleE9mKGZpbHRlclZhbHVlKSA+IC0xXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldERhdGFTb3VyY2Uob3JkZXJzLCB0eXBlKSB7XHJcbiAgICAgICAgbGV0IGRhdGFTb3VyY2UgPSBbXTtcclxuICAgICAgICBjb25zdCBpc1NldHRsZSA9IHR5cGUgPT09IFwic2V0dGxlXCI7XHJcblxyXG4gICAgICAgIG9yZGVycy5mb3JFYWNoKG9yZGVySUQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgb3JkZXIgPSBudWxsO1xyXG4gICAgICAgICAgICBsZXQgYmFzZSA9IG51bGw7XHJcbiAgICAgICAgICAgIGxldCBxdW90ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIGxldCBzcXIgPSBudWxsO1xyXG4gICAgICAgICAgICBsZXQgZmVlZF9wcmljZSA9IG51bGw7XHJcbiAgICAgICAgICAgIGxldCBiaXRhc3NldF9vcHRpb25zID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGlmICghaXNTZXR0bGUpIHtcclxuICAgICAgICAgICAgICAgIG9yZGVyID0gQ2hhaW5TdG9yZS5nZXRPYmplY3Qob3JkZXJJRCkudG9KUygpO1xyXG4gICAgICAgICAgICAgICAgYmFzZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQob3JkZXIuc2VsbF9wcmljZS5iYXNlLmFzc2V0X2lkKTtcclxuICAgICAgICAgICAgICAgIHF1b3RlID0gQ2hhaW5TdG9yZS5nZXRBc3NldChvcmRlci5zZWxsX3ByaWNlLnF1b3RlLmFzc2V0X2lkKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9yZGVyID0gQ2hhaW5TdG9yZS5nZXRPYmplY3Qob3JkZXJJRCkudG9KUygpO1xyXG4gICAgICAgICAgICAgICAgYmFzZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQob3JkZXIuYmFsYW5jZS5hc3NldF9pZCk7XHJcbiAgICAgICAgICAgICAgICBxdW90ZSA9IENoYWluU3RvcmUuZ2V0QXNzZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZS5nZXRJbihbXCJiaXRhc3NldFwiLCBcIm9wdGlvbnNcIiwgXCJzaG9ydF9iYWNraW5nX2Fzc2V0XCJdKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGJhc2UgJiYgcXVvdGUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBhc3NldHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgW2Jhc2UuZ2V0KFwiaWRcIildOiB7cHJlY2lzaW9uOiBiYXNlLmdldChcInByZWNpc2lvblwiKX0sXHJcbiAgICAgICAgICAgICAgICAgICAgW3F1b3RlLmdldChcImlkXCIpXToge3ByZWNpc2lvbjogcXVvdGUuZ2V0KFwicHJlY2lzaW9uXCIpfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB7bWFya2V0TmFtZX0gPSBtYXJrZXRVdGlscy5nZXRNYXJrZXROYW1lKGJhc2UsIHF1b3RlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMucHJvcHMubWFya2V0RGlyZWN0aW9ucy5nZXQobWFya2V0TmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG1hcmtldFF1b3RlSWQgPSBkaXJlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICA/IHF1b3RlLmdldChcImlkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBiYXNlLmdldChcImlkXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1hcmtldEJhc2VJZCA9IGRpcmVjdGlvbiA/IGJhc2UuZ2V0KFwiaWRcIikgOiBxdW90ZS5nZXQoXCJpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChpc1NldHRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlZWRQcmljZVJhdyA9IGFzc2V0X3V0aWxzLmV4dHJhY3RSYXdGZWVkUHJpY2UoYmFzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3FyID0gYmFzZS5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjdXJyZW50X2ZlZWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXhpbXVtX3Nob3J0X3NxdWVlemVfcmF0aW9cIlxyXG4gICAgICAgICAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmZWVkX3ByaWNlID0gbmV3IEZlZWRQcmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlT2JqZWN0OiBmZWVkUHJpY2VSYXcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldF9iYXNlOiBtYXJrZXRCYXNlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNxcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdGlvbnMgPSBiYXNlLmdldEluKFtcImJpdGFzc2V0XCIsIFwib3B0aW9uc1wiXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGxpbWl0T3JkZXIgPSAhaXNTZXR0bGVcclxuICAgICAgICAgICAgICAgICAgICA/IG5ldyBMaW1pdE9yZGVyKG9yZGVyLCBhc3NldHMsIG1hcmtldFF1b3RlSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgU2V0dGxlT3JkZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldEJhc2VJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBmZWVkX3ByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGFzc2V0X29wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG1hcmtldEJhc2UgPSBDaGFpblN0b3JlLmdldEFzc2V0KG1hcmtldEJhc2VJZCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWFya2V0UXVvdGUgPSBDaGFpblN0b3JlLmdldEFzc2V0KG1hcmtldFF1b3RlSWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBpc0JpZCA9IGxpbWl0T3JkZXIuaXNCaWQoKTtcclxuICAgICAgICAgICAgICAgIGxldCBkYXRhSXRlbSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6IG9yZGVyLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiBsaW1pdE9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQmlkOiBpc0JpZCxcclxuICAgICAgICAgICAgICAgICAgICBxdW90ZTogbWFya2V0UXVvdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZTogbWFya2V0QmFzZSxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXROYW1lOiBtYXJrZXROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldERpcmVjdGlvbjogZGlyZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIHByZWZlcnJlZFVuaXQ6IHRoaXMucHJvcHMuc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLnNldHRpbmdzLmdldChcInVuaXRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIjEuMy4wXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGVDb2xvcjogIWlzQmlkID8gXCJ2YWx1ZSBuZWdhdGl2ZVwiIDogXCJ2YWx1ZSBwb3NpdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VDb2xvcjogaXNCaWQgPyBcInZhbHVlIG5lZ2F0aXZlXCIgOiBcInZhbHVlIHBvc2l0aXZlXCJcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNTZXR0bGUpXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YUl0ZW0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFJdGVtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0bGVtZW50X2RhdGU6IG9yZGVyLnNldHRsZW1lbnRfZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmVlZF9wcmljZVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZS5wdXNoKGRhdGFJdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTb3J0IGJ5IHByaWNlIGZpcnN0XHJcbiAgICAgICAgZGF0YVNvdXJjZS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLm9yZGVyLmdldFByaWNlKCkgLSBiLm9yZGVyLmdldFByaWNlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFuZCB0aGVuIHNvcnQgYnkgbWFya2V0IG5hbWUgLSB0aGlzIHdheSBhbGwgcmVjb3JkcyB3aWxsIGJlIHNvcnRlZCBieSBwcmljZSBpbnNpZGUsIGJ1dCBieSB0aGUgbWFya2V0IG91dHNpZGUuXHJcbiAgICAgICAgZGF0YVNvdXJjZS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhLm1hcmtldE5hbWUgPiBiLm1hcmtldE5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhLm1hcmtldE5hbWUgPCBiLm1hcmtldE5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVHJpY2sgb25seSBmb3IgZ3JvdXBlZCBvcmRlcnMgb24gdGhlIHNhbWUgbWFya2V0LCB3aGljaCBwcmVzZXJ2ZXMgdGFibGVzIG9yZGVyIG9uIGRpcmVjdGlvbiBjaGFuZ2VcclxuICAgICAgICAgICAgcmV0dXJuIGEubWFya2V0RGlyZWN0aW9uID8gMSA6IC0xO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZGF0YVNvdXJjZTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0Q29sdW1ucyhhcmVBc3NldHNHcm91cGVkLCBncm91cGVkRGF0YUl0ZW1zLCB0eXBlKSB7XHJcbiAgICAgICAgbGV0IG9uQ2VsbCA9IChkYXRhSXRlbSwgcm93SW5kZXgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMub25GbGlwLmJpbmQodGhpcywgZGF0YUl0ZW0ubWFya2V0TmFtZSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgZmlyc3REYXRhSXRlbSxcclxuICAgICAgICAgICAgb3BlcmF0aW9uLFxyXG4gICAgICAgICAgICBmb3JUZXh0LFxyXG4gICAgICAgICAgICBiYXNlQXNzZXQsXHJcbiAgICAgICAgICAgIHF1b3RlQXNzZXQsXHJcbiAgICAgICAgICAgIGJhc2VOYW1lLFxyXG4gICAgICAgICAgICBxdW90ZU5hbWUsXHJcbiAgICAgICAgICAgIGF2ZXJhZ2VQcmljZSxcclxuICAgICAgICAgICAgbWFya2V0UHJpY2UsXHJcbiAgICAgICAgICAgIHZhbHVlO1xyXG5cclxuICAgICAgICBjb25zdCBpc1NldHRsZSA9IHR5cGUgPT09IFwic2V0dGxlXCI7XHJcblxyXG4gICAgICAgIGxldCBnZXRCYXNlQXNzZXQgPSBkYXRhSXRlbSA9PlxyXG4gICAgICAgICAgICBkYXRhSXRlbS5vcmRlcltcclxuICAgICAgICAgICAgICAgIGRhdGFJdGVtLmlzQmlkID8gXCJhbW91bnRUb1JlY2VpdmVcIiA6IFwiYW1vdW50Rm9yU2FsZVwiXHJcbiAgICAgICAgICAgIF0oKS5nZXRBbW91bnQoe3JlYWw6IHRydWV9KTtcclxuICAgICAgICBsZXQgZm9ybWF0QmFzZUFzc2V0ID0gYmFzZUFzc2V0ID0+XHJcbiAgICAgICAgICAgIHV0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICBiYXNlQXNzZXQsXHJcbiAgICAgICAgICAgICAgICBmaXJzdERhdGFJdGVtLmJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpLFxyXG4gICAgICAgICAgICAgICAgZmFsc2VcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IGdldFF1b3RlQXNzZXQgPSBkYXRhSXRlbSA9PlxyXG4gICAgICAgICAgICBkYXRhSXRlbS5vcmRlcltcclxuICAgICAgICAgICAgICAgIGRhdGFJdGVtLmlzQmlkID8gXCJhbW91bnRGb3JTYWxlXCIgOiBcImFtb3VudFRvUmVjZWl2ZVwiXHJcbiAgICAgICAgICAgIF0oKS5nZXRBbW91bnQoe3JlYWw6IHRydWV9KTtcclxuICAgICAgICBsZXQgZm9ybWF0UXVvdGVBc3NldCA9IHF1b3RlQXNzZXQgPT5cclxuICAgICAgICAgICAgdXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgIHF1b3RlQXNzZXQsXHJcbiAgICAgICAgICAgICAgICBmaXJzdERhdGFJdGVtLnF1b3RlLmdldChcInByZWNpc2lvblwiKSxcclxuICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIGxldCBmb3JtYXRNYXJrZXRQcmljZSA9IGRhdGFJdGVtID0+IChcclxuICAgICAgICAgICAgPE1hcmtldFByaWNlXHJcbiAgICAgICAgICAgICAgICBiYXNlPXtkYXRhSXRlbS5iYXNlLmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgcXVvdGU9e2RhdGFJdGVtLnF1b3RlLmdldChcImlkXCIpfVxyXG4gICAgICAgICAgICAgICAgZm9yY2VfZGlyZWN0aW9uPXtkYXRhSXRlbS5iYXNlLmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgIGhpZGVfc3ltYm9sc1xyXG4gICAgICAgICAgICAgICAgaGlkZV9hc3NldFxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmIChhcmVBc3NldHNHcm91cGVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFzc3VtaW5nIHRoYXQgZmlyc3QgZWxlbWVudCBhbHdheXMgZXhpc3QgYmVjYXVzZSBkYXRhIGl0ZW1zIHdlcmUgcGFzc2VkIGFzIGdyb3VwZWRcclxuICAgICAgICAgICAgZmlyc3REYXRhSXRlbSA9IGdyb3VwZWREYXRhSXRlbXNbMF07XHJcblxyXG4gICAgICAgICAgICBvcGVyYXRpb24gPSBjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICBcImV4Y2hhbmdlLlwiICtcclxuICAgICAgICAgICAgICAgICAgICAoIWlzU2V0dGxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gZmlyc3REYXRhSXRlbS5pc0JpZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJ1eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwic2VsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJzZXR0bGVtZW50X29mXCIpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBmb3JUZXh0ID0gY291bnRlcnBhcnQudHJhbnNsYXRlKFwidHJhbnNhY3Rpb24uZm9yXCIpO1xyXG5cclxuICAgICAgICAgICAgYmFzZUFzc2V0ID0gZm9ybWF0QmFzZUFzc2V0KHN1bUJ5KGdyb3VwZWREYXRhSXRlbXMsIGdldEJhc2VBc3NldCkpO1xyXG4gICAgICAgICAgICBxdW90ZUFzc2V0ID0gZm9ybWF0UXVvdGVBc3NldChcclxuICAgICAgICAgICAgICAgIHN1bUJ5KGdyb3VwZWREYXRhSXRlbXMsIGdldFF1b3RlQXNzZXQpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBsZXQgcXVvdGVDb2xvciA9ICFmaXJzdERhdGFJdGVtLmlzQmlkXHJcbiAgICAgICAgICAgICAgICA/IFwidmFsdWUgbmVnYXRpdmVcIlxyXG4gICAgICAgICAgICAgICAgOiBcInZhbHVlIHBvc2l0aXZlXCI7XHJcbiAgICAgICAgICAgIGxldCBiYXNlQ29sb3IgPSBmaXJzdERhdGFJdGVtLmlzQmlkXHJcbiAgICAgICAgICAgICAgICA/IFwidmFsdWUgbmVnYXRpdmVcIlxyXG4gICAgICAgICAgICAgICAgOiBcInZhbHVlIHBvc2l0aXZlXCI7XHJcblxyXG4gICAgICAgICAgICBiYXNlTmFtZSA9IChcclxuICAgICAgICAgICAgICAgIDxBc3NldE5hbWVcclxuICAgICAgICAgICAgICAgICAgICBub1RpcFxyXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbUNsYXNzPXtxdW90ZUNvbG9yfVxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9e2ZpcnN0RGF0YUl0ZW0ucXVvdGUuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcXVvdGVOYW1lID0gKFxyXG4gICAgICAgICAgICAgICAgPEFzc2V0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIG5vVGlwXHJcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tQ2xhc3M9e2Jhc2VDb2xvcn1cclxuICAgICAgICAgICAgICAgICAgICBuYW1lPXtmaXJzdERhdGFJdGVtLmJhc2UuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGF2ZXJhZ2VQcmljZSA9IG1lYW5CeShncm91cGVkRGF0YUl0ZW1zLCBkYXRhSXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcHJpY2UgPSBkYXRhSXRlbS5vcmRlci5zZWxsUHJpY2UoKS50b1JlYWwodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIWRhdGFJdGVtLm1hcmtldERpcmVjdGlvbiA/IHByaWNlIDogMSAvIHByaWNlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRha2VuIGZyb20gRm9ybWF0dGVkUHJpY2UgaW50ZXJuYWwgbG9naWNcclxuICAgICAgICAgICAgbGV0IGRlY2ltYWxzID0gTWF0aC5taW4oXHJcbiAgICAgICAgICAgICAgICA4LFxyXG4gICAgICAgICAgICAgICAgZmlyc3REYXRhSXRlbS5vcmRlci5zZWxsUHJpY2UoKVtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdERhdGFJdGVtLmlzQmlkID8gXCJiYXNlXCIgOiBcInF1b3RlXCJcclxuICAgICAgICAgICAgICAgIF0ucHJlY2lzaW9uXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGF2ZXJhZ2VQcmljZSA9IChcclxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWROdW1iZXJcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17YXZlcmFnZVByaWNlfVxyXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0cz17TWF0aC5tYXgoMiwgZGVjaW1hbHMpfVxyXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0cz17TWF0aC5tYXgoMiwgZGVjaW1hbHMpfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIG1hcmtldFByaWNlID0gZm9ybWF0TWFya2V0UHJpY2UoZmlyc3REYXRhSXRlbSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgdmFsdWVBbW91bnQgPSBzdW1CeShncm91cGVkRGF0YUl0ZW1zLCBkYXRhSXRlbSA9PlxyXG4gICAgICAgICAgICAgICAgZGF0YUl0ZW0ub3JkZXIuYW1vdW50Rm9yU2FsZSgpLmdldEFtb3VudCgpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICB2YWx1ZSA9IChcclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPEVxdWl2YWxlbnRWYWx1ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudD17dmFsdWVBbW91bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21Bc3NldD17Zmlyc3REYXRhSXRlbS5vcmRlci5hbW91bnRGb3JTYWxlKCkuYXNzZXRfaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vRGVjaW1hbHM9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvQXNzZXQ9e2ZpcnN0RGF0YUl0ZW0ucHJlZmVycmVkVW5pdH1cclxuICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cclxuICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lIG5hbWU9e2ZpcnN0RGF0YUl0ZW0ucHJlZmVycmVkVW5pdH0gLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ29uZGl0aW9uYWwgYXJyYXkgaXRlbXM6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80Nzc3MTI1OVxyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGtleTogXCJ0cmFkZVwiLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImFjY291bnQudHJhZGVcIiksXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcclxuICAgICAgICAgICAgICAgIHJlbmRlcjogZGF0YUl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17YC9tYXJrZXQvJHtkYXRhSXRlbS5xdW90ZS5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzeW1ib2xcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1fJHtkYXRhSXRlbS5iYXNlLmdldChcInN5bWJvbFwiKX1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gTWFya2V0c0FjdGlvbnMuc3dpdGNoTWFya2V0KCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIHR5cGU9XCJiYXItY2hhcnRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAga2V5OiBcIm9yZGVySURcIixcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBjb3VudGVycGFydC50cmFuc2xhdGUoXCJ0cmFuc2FjdGlvbi5vcmRlcl9pZFwiKSxcclxuICAgICAgICAgICAgICAgIHJlbmRlcjogZGF0YUl0ZW0gPT4gXCIjXCIgKyBkYXRhSXRlbS5vcmRlci5pZC5zdWJzdHJpbmcoNClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLi4uKGFyZUFzc2V0c0dyb3VwZWRcclxuICAgICAgICAgICAgICAgID8gW1xyXG4gICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXCJvcGVyYXRpb25cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogb3BlcmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcjogZGF0YUl0ZW0gPT4gb3BlcmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2VsbDogb25DZWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjbGlja2FibGUgZ3JvdXBDb2x1bW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgIC4uLighaXNTZXR0bGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXCJiYXNlQXNzZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGJhc2VBc3NldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyOiBkYXRhSXRlbSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0QmFzZUFzc2V0KGdldEJhc2VBc3NldChkYXRhSXRlbSkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNlbGw6IG9uQ2VsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNsaWNrYWJsZSBncm91cENvbHVtblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXCJiYXNlTmFtZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogYmFzZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcjogZGF0YUl0ZW0gPT4gYmFzZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2VsbDogb25DZWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2xpY2thYmxlIGdyb3VwQ29sdW1uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcImZvclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogZm9yVGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyOiBkYXRhSXRlbSA9PiBmb3JUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNlbGw6IG9uQ2VsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNsaWNrYWJsZSBncm91cENvbHVtblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXCJxdW90ZUFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBxdW90ZUFzc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI6IGRhdGFJdGVtID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRRdW90ZUFzc2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFF1b3RlQXNzZXQoZGF0YUl0ZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNlbGw6IG9uQ2VsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNsaWNrYWJsZSBncm91cENvbHVtblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXCJxdW90ZU5hbWVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHF1b3RlTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyOiBkYXRhSXRlbSA9PiBxdW90ZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2VsbDogb25DZWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2xpY2thYmxlIGdyb3VwQ29sdW1uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFwicXVvdGVBc3NldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogcXVvdGVBc3NldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyOiBkYXRhSXRlbSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0UXVvdGVBc3NldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRRdW90ZUFzc2V0KGRhdGFJdGVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNsaWNrYWJsZSBncm91cENvbHVtblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXCJiYXNlTmFtZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogYmFzZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcjogZGF0YUl0ZW0gPT4gYmFzZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjbGlja2FibGUgZ3JvdXBDb2x1bW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pXHJcbiAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIDogW1xyXG4gICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXCJkZXNjcmlwdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBjb3VudGVycGFydC50cmFuc2xhdGUoXCJleGNoYW5nZS5kZXNjcmlwdGlvblwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI6IGRhdGFJdGVtID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpc1NldHRsZSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50T3JkZXJSb3dEZXNjcmlwdGlvbiB7Li4uZGF0YUl0ZW19IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhjaGFuZ2Uuc2V0dGxlbWVudF9kZXNjcmlwdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlQXNzZXQ9e3V0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFJdGVtLm9yZGVyLmZvcl9zYWxlLmdldEFtb3VudCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFsOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhSXRlbS5xdW90ZS5nZXQoXCJwcmVjaXNpb25cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZU5hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub1RpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tQ2xhc3M9e2RhdGFJdGVtLnF1b3RlQ29sb3J9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtkYXRhSXRlbS5xdW90ZS5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzeW1ib2xcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2VsbDogb25DZWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjbGlja2FibGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAga2V5OiBcInByaWNlXCIsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogYXJlQXNzZXRzR3JvdXBlZCA/IChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LmF2ZXJhZ2VfcHJpY2VcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2F2ZXJhZ2VQcmljZX1cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRlcnBhcnQudHJhbnNsYXRlKFwiZXhjaGFuZ2UucHJpY2VcIilcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogYXJlQXNzZXRzR3JvdXBlZCA/IFwicmlnaHRcIiA6IFwibGVmdFwiLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBkYXRhSXRlbSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZFByaWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VfYW1vdW50PXtkYXRhSXRlbS5vcmRlci5zZWxsUHJpY2UoKS5iYXNlLmFtb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9hc3NldD17ZGF0YUl0ZW0ub3JkZXIuc2VsbFByaWNlKCkuYmFzZS5hc3NldF9pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYW1vdW50PXtkYXRhSXRlbS5vcmRlci5zZWxsUHJpY2UoKS5xdW90ZS5hbW91bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlX2Fzc2V0PXtkYXRhSXRlbS5vcmRlci5zZWxsUHJpY2UoKS5xdW90ZS5hc3NldF9pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2VfZGlyZWN0aW9uPXtkYXRhSXRlbS5iYXNlLmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9zeW1ib2xzXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBvbkNlbGw6IG9uQ2VsbCxcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjbGlja2FibGVcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBrZXk6IFwibWFya2V0UHJpY2VcIixcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBhcmVBc3NldHNHcm91cGVkID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnByaWNlX21hcmtldFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7bWFya2V0UHJpY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcImV4Y2hhbmdlLnByaWNlX21hcmtldFwiKVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGFsaWduOiBhcmVBc3NldHNHcm91cGVkID8gXCJyaWdodFwiIDogXCJsZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6IGZvcm1hdE1hcmtldFByaWNlLFxyXG4gICAgICAgICAgICAgICAgb25DZWxsOiBvbkNlbGwsXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2xpY2thYmxlXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNTZXR0bGUgJiYgIWFyZUFzc2V0c0dyb3VwZWRcclxuICAgICAgICAgICAgICAgID8ge1xyXG4gICAgICAgICAgICAgICAgICAgICAga2V5OiBcInNldHRsZW1lbnRfZGF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGFyZUFzc2V0c0dyb3VwZWQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2Uuc2V0dGxlbWVudF9kYXRlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttYXJrZXRQcmljZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcnBhcnQudHJhbnNsYXRlKFwiZXhjaGFuZ2Uuc2V0dGxlbWVudF9kYXRlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgYWxpZ246IGFyZUFzc2V0c0dyb3VwZWQgPyBcInJpZ2h0XCIgOiBcImxlZnRcIixcclxuICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcjogZGF0YUl0ZW0gPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntkYXRhSXRlbS5zZXR0bGVtZW50X2RhdGV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2VsbDogb25DZWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNsaWNrYWJsZVwiXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDoge30sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGtleTogXCJ2YWx1ZVwiLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IGFyZUFzc2V0c0dyb3VwZWQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiZXhjaGFuZ2UudmFsdWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJleGNoYW5nZS52YWx1ZVwiKVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGFsaWduOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6IGRhdGFJdGVtID0+IChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8RXF1aXZhbGVudFZhbHVlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2RhdGFJdGVtLm9yZGVyLmFtb3VudEZvclNhbGUoKS5nZXRBbW91bnQoKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21Bc3NldD17ZGF0YUl0ZW0ub3JkZXIuYW1vdW50Rm9yU2FsZSgpLmFzc2V0X2lkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9EZWNpbWFscz17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvQXNzZXQ9e2RhdGFJdGVtLnByZWZlcnJlZFVuaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lIG5hbWU9e2RhdGFJdGVtLnByZWZlcnJlZFVuaXR9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgb25DZWxsOiBvbkNlbGwsXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2xpY2thYmxlXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgX3JlbmRlclNldHRsZU9yZGVyc1RhYmxlKCkge1xyXG4gICAgICAgIGNvbnN0IHthY2NvdW50fSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgY29uc3Qge2ZpbHRlclZhbHVlfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICAgIGxldCBzZXR0bGVPcmRlcnMgPSBhY2NvdW50LmdldChcInNldHRsZV9vcmRlcnNcIik7XHJcblxyXG4gICAgICAgIGlmIChmaWx0ZXJWYWx1ZSkge1xyXG4gICAgICAgICAgICBzZXR0bGVPcmRlcnMgPSB0aGlzLl9nZXRGaWx0ZXJlZE9yZGVycy5jYWxsKHRoaXMsIFwic2V0dGxlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZGF0YVNvdXJjZSA9IHRoaXMuX2dldERhdGFTb3VyY2Uoc2V0dGxlT3JkZXJzLCBcInNldHRsZVwiKTtcclxuXHJcbiAgICAgICAgbGV0IHBhZ2luYXRpb24gPSB7XHJcbiAgICAgICAgICAgIGhpZGVPblNpbmdsZVBhZ2U6IHRydWUsXHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiAyMCxcclxuICAgICAgICAgICAgc2hvd1RvdGFsOiAodG90YWwsIHJhbmdlKSA9PlxyXG4gICAgICAgICAgICAgICAgY291bnRlcnBhcnQudHJhbnNsYXRlKFwidXRpbGl0eS50b3RhbF94X2l0ZW1zXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudDogdG90YWxcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IGZvb3RlciA9ICgpID0+IDxzcGFuPiZuYnNwOzwvc3Bhbj47XHJcblxyXG4gICAgICAgIGxldCBzZXR0bGVDb2x1bW5zID0gdGhpcy5fZ2V0Q29sdW1ucyhmYWxzZSwgZGF0YVNvdXJjZSwgXCJzZXR0bGVcIik7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxUYWJsZVxyXG4gICAgICAgICAgICAgICAgY29sdW1ucz17c2V0dGxlQ29sdW1uc31cclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U9e2RhdGFTb3VyY2V9XHJcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uPXtwYWdpbmF0aW9ufVxyXG4gICAgICAgICAgICAgICAgZm9vdGVyPXtmb290ZXJ9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVuZGVyT3JkZXJzVGFibGUoKSB7XHJcbiAgICAgICAgY29uc3Qge2FjY291bnR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCB7ZmlsdGVyVmFsdWUsIGFyZUFzc2V0c0dyb3VwZWR9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBsZXQgb3JkZXJzID0gYWNjb3VudC5nZXQoXCJvcmRlcnNcIik7XHJcblxyXG4gICAgICAgIGlmIChmaWx0ZXJWYWx1ZSkge1xyXG4gICAgICAgICAgICBvcmRlcnMgPSB0aGlzLl9nZXRGaWx0ZXJlZE9yZGVycy5jYWxsKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRhU291cmNlID0gdGhpcy5fZ2V0RGF0YVNvdXJjZShvcmRlcnMpO1xyXG5cclxuICAgICAgICBsZXQgcGFnaW5hdGlvbiA9IHtcclxuICAgICAgICAgICAgaGlkZU9uU2luZ2xlUGFnZTogdHJ1ZSxcclxuICAgICAgICAgICAgcGFnZVNpemU6IDIwLFxyXG4gICAgICAgICAgICBzaG93VG90YWw6ICh0b3RhbCwgcmFuZ2UpID0+XHJcbiAgICAgICAgICAgICAgICBjb3VudGVycGFydC50cmFuc2xhdGUoXCJ1dGlsaXR5LnRvdGFsX3hfaXRlbXNcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiB0b3RhbFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgZm9vdGVyID0gKCkgPT4gdGhpcy5wcm9wcy5jaGlsZHJlbjtcclxuXHJcbiAgICAgICAgbGV0IHJvd1NlbGVjdGlvbiA9IHRoaXMucHJvcHMuaXNNeUFjY291bnRcclxuICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIFVuY29tbWVudCB0aGUgZm9sbG93aW5nIGxpbmUgdG8gc2hvdyB0cmFuc2xhdGVkIHRleHQgYXMgYSBjYW5jZWxsYWJsZSBjb2x1bW4gaGVhZGVyIGluc3RlYWQgb2YgY2hlY2tib3hcclxuICAgICAgICAgICAgICAgICAgLy9jb2x1bW5UaXRsZTogY291bnRlcnBhcnQudHJhbnNsYXRlKFwid2FsbGV0LmNhbmNlbFwiKVxyXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZTogKHNlbGVjdGVkUm93S2V5cywgc2VsZWN0ZWRSb3dzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZE9yZGVyczogc2VsZWN0ZWRSb3dLZXlzfSk7XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIC8vIFJlcXVpcmVkIGluIG9yZGVyIHJlc2V0U2VsZWN0ZWQgdG8gd29ya1xyXG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvd0tleXM6IHRoaXMuc3RhdGUuc2VsZWN0ZWRPcmRlcnNcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuXHJcbiAgICAgICAgbGV0IHRhYmxlcyA9IFtdO1xyXG5cclxuICAgICAgICBpZiAoYXJlQXNzZXRzR3JvdXBlZCkge1xyXG4gICAgICAgICAgICAvLyBHcm91cCBieSBtYXJrZXQgbmFtZSAtIHRoaXMgd2lsbCBncm91cCBhbGwgcmVjb3JkcyBmcm9tIHRoZSBzYW1lIG1hcmtldCwgbm8gbWF0dGVyIGlzIGl0IHNlbGwgb3IgYnV5IG9yZGVyXHJcbiAgICAgICAgICAgIC8vIEFuZCB0aGVuIGdyb3VwIGJ5IGJhc2UgbWFya2V0IElEIC0gdGhpcyB3aWxsIHNlcGFyYXRlIGJ1eSBhbmQgc2VsbCByZWNvcmRzIG9uIHRoZSBzYW1lIG1hcmtldFxyXG4gICAgICAgICAgICAvLyBEb24ndCBmb3JnZXQgdG8gY291bnQgdGhlIGRpcmVjdGlvbiAtIHRoaXMgYWxsb3dzIHRvIGNvbnNpZGVyIHRhYmxlIGFzIHRoZSBzYW1lIG9uZSB3aGVuIGRpcmVjdGlvbiBjaGFuZ2VzXHJcbiAgICAgICAgICAgIGxldCBncm91cGVkID0gZ3JvdXBCeShcclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2UsXHJcbiAgICAgICAgICAgICAgICBkYXRhSXRlbSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFJdGVtLm1hcmtldE5hbWUgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiX1wiICtcclxuICAgICAgICAgICAgICAgICAgICAoZGF0YUl0ZW0ubWFya2V0RGlyZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gZGF0YUl0ZW0uYmFzZS5nZXQoXCJpZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGFJdGVtLnF1b3RlLmdldChcImlkXCIpKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGdyb3VwZWQpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdHlwZTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZVswXS5zZXR0bGVtZW50X2RhdGUpIHR5cGUgPSBcInNldHRsZVwiO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbHVtbnMgPSB0aGlzLl9nZXRDb2x1bW5zKGFyZUFzc2V0c0dyb3VwZWQsIHZhbHVlLCB0eXBlKTtcclxuICAgICAgICAgICAgICAgIHRhYmxlcy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC13cmFwcGVyXCIga2V5PXtrZXl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Q29sbGFwc2libGVUYWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1ucz17Y29sdW1uc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U9e3ZhbHVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93U2VsZWN0aW9uPXtyb3dTZWxlY3Rpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uPXtwYWdpbmF0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDb2xsYXBzZWQ9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGNvbHVtbnMgPSB0aGlzLl9nZXRDb2x1bW5zKGFyZUFzc2V0c0dyb3VwZWQsIGRhdGFTb3VyY2UpO1xyXG5cclxuICAgICAgICAgICAgdGFibGVzLnB1c2goXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtd3JhcHBlclwiIGtleT1cInVuZ3JvdXBlZFRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnM9e2NvbHVtbnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U9e2RhdGFTb3VyY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd1NlbGVjdGlvbj17cm93U2VsZWN0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uPXtwYWdpbmF0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb290ZXI9e2Zvb3Rlcn1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGFibGVzO1xyXG4gICAgfVxyXG5cclxuICAgIF9jYW5jZWxMaW1pdE9yZGVycyhvcmRlcklkKSB7XHJcbiAgICAgICAgTWFya2V0c0FjdGlvbnMuY2FuY2VsTGltaXRPcmRlcnMoXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZE9yZGVyc1xyXG4gICAgICAgIClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldFNlbGVjdGVkKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjYW5jZWwgb3JkZXJzIGVycm9yOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkZsaXAobWFya2V0SWQpIHtcclxuICAgICAgICBsZXQgc2V0dGluZyA9IHt9O1xyXG4gICAgICAgIHNldHRpbmdbbWFya2V0SWRdID0gIXRoaXMucHJvcHMubWFya2V0RGlyZWN0aW9ucy5nZXQobWFya2V0SWQpO1xyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VNYXJrZXREaXJlY3Rpb24oc2V0dGluZyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RmlsdGVyVmFsdWUoZXZ0KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZmlsdGVyVmFsdWU6IGV2dC50YXJnZXQudmFsdWUudG9Mb3dlckNhc2UoKX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0U2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRPcmRlcnM6IFtdfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuY2VsU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FuY2VsTGltaXRPcmRlcnMuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3Qge2FjY291bnR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCB7c2VsZWN0ZWRPcmRlcnN9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgICAgY29uc3Qgb3JkZXJzVGFibGUgPSB0aGlzLl9yZW5kZXJPcmRlcnNUYWJsZSgpO1xyXG4gICAgICAgIGNvbnN0IHNldHRsZU9yZGVyc1RhYmxlID0gdGhpcy5fcmVuZGVyU2V0dGxlT3JkZXJzVGFibGUoKTtcclxuXHJcbiAgICAgICAgY29uc3QgdGFibGVzID0gW29yZGVyc1RhYmxlXTtcclxuXHJcbiAgICAgICAgbGV0IG9uR3JvdXBDaGFuZ2UgPSAoY2hlY2tlZCwgZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50T3JkZXJzR3JvdXBwZWRCeUFzc2V0OiBjaGVja2VkXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHthcmVBc3NldHNHcm91cGVkOiBjaGVja2VkfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IHNldHRsZU9yZGVyc0NvdW50ID0gYWNjb3VudC5nZXQoXCJzZXR0bGVfb3JkZXJzXCIpLnNpemU7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdyaWQtY29udGVudCBuby1vdmVyZmxvdyBuby1wYWRkaW5nXCJcclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7cGFkZGluZ0JvdHRvbTogMTV9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGVhZGVyLXNlbGVjdG9yXCJcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2Rpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIsIHdpZHRoOiBcIjEwMCVcIn19XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWx0ZXItYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWx0ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFjY291bnQuZmlsdGVyX29yZGVyc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5zZXRGaWx0ZXJWYWx1ZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZG9uQWZ0ZXI9ezxJY29uIHR5cGU9XCJzZWFyY2hcIiAvPn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyb3VwLWJ5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3dpdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uR3JvdXBDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5hcmVBc3NldHNHcm91cGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwOyZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5ncm91cF9ieV9hc3NldFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZE9yZGVycy5sZW5ndGggPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFjdGlvbi1idXR0b25zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PVwic3VibWl0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5jYW5jZWxTZWxlY3RlZC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuY2FuY2VsX29yZGVyc1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT1cImNhbmNlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInNlY29uZGFyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5yZXNldFNlbGVjdGVkLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5yZXNldF9vcmRlcnNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAge3NldHRsZU9yZGVyc0NvdW50ID4gMCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLXNlbGVjdG9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50Lm1hcmtldF9vcmRlcnNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIHt0YWJsZXN9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIHtzZXR0bGVPcmRlcnNDb3VudCA+IDAgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC13cmFwcGVyXCIga2V5PVwic2V0dGxlR3JvdXBlZFRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLXNlbGVjdG9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnNldHRsZV9vcmRlcnNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3NldHRsZU9yZGVyc1RhYmxlfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuQWNjb3VudE9yZGVycyA9IGNvbm5lY3QoXHJcbiAgICBBY2NvdW50T3JkZXJzLFxyXG4gICAge1xyXG4gICAgICAgIGxpc3RlblRvKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW1NldHRpbmdzU3RvcmVdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0UHJvcHMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBtYXJrZXREaXJlY3Rpb25zOiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkubWFya2V0RGlyZWN0aW9ucyxcclxuICAgICAgICAgICAgICAgIHZpZXdTZXR0aW5nczogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnZpZXdTZXR0aW5nc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFjY291bnRPcmRlcnM7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgQXNzZXROYW1lIGZyb20gXCIuLi9VdGlsaXR5L0Fzc2V0TmFtZVwiO1xyXG5cclxuY2xhc3MgQWNjb3VudE9yZGVyUm93RGVzY3JpcHRpb24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7YmFzZSwgcXVvdGUsIG9yZGVyfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgY29uc3QgaXNCaWQgPSBvcmRlci5pc0JpZCgpO1xyXG5cclxuICAgICAgICBsZXQgcXVvdGVDb2xvciA9ICFpc0JpZCA/IFwidmFsdWUgbmVnYXRpdmVcIiA6IFwidmFsdWUgcG9zaXRpdmVcIjtcclxuICAgICAgICBsZXQgYmFzZUNvbG9yID0gaXNCaWQgPyBcInZhbHVlIG5lZ2F0aXZlXCIgOiBcInZhbHVlIHBvc2l0aXZlXCI7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxUcmFuc2xhdGVcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQmlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJleGNoYW5nZS5idXlfZGVzY3JpcHRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwiZXhjaGFuZ2Uuc2VsbF9kZXNjcmlwdGlvblwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBiYXNlQXNzZXQ9e3V0aWxzLmZvcm1hdF9udW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmlkID8gXCJhbW91bnRUb1JlY2VpdmVcIiA6IFwiYW1vdW50Rm9yU2FsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgXSgpLmdldEFtb3VudCh7cmVhbDogdHJ1ZX0pLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2UuZ2V0KFwicHJlY2lzaW9uXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgcXVvdGVBc3NldD17dXRpbHMuZm9ybWF0X251bWJlcihcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcltcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCaWQgPyBcImFtb3VudEZvclNhbGVcIiA6IFwiYW1vdW50VG9SZWNlaXZlXCJcclxuICAgICAgICAgICAgICAgICAgICBdKCkuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSksXHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGUuZ2V0KFwicHJlY2lzaW9uXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgYmFzZU5hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgIDxBc3NldE5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9UaXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tQ2xhc3M9e3F1b3RlQ29sb3J9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3F1b3RlLmdldChcInN5bWJvbFwiKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcXVvdGVOYW1lPXtcclxuICAgICAgICAgICAgICAgICAgICA8QXNzZXROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vVGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbUNsYXNzPXtiYXNlQ29sb3J9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2Jhc2UuZ2V0KFwic3ltYm9sXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWNjb3VudE9yZGVyUm93RGVzY3JpcHRpb247XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcclxuaW1wb3J0IHtUYWJsZX0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5cclxuY2xhc3MgQ29sbGFwc2libGVUYWJsZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgaXNDb2xsYXBzZWQ6IHByb3BzLmlzQ29sbGFwc2VkIHx8IGZhbHNlLFxyXG4gICAgICAgICAgICBpc0NvbGxhcHNlQW5pbWF0aW9uQ29tcGxldGVkOiBwcm9wcy5pc0NvbGxhcHNlZCB8fCBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgLy8gVGhpcyBxdWl0ZSB1Z2x5IHdheSBvZiB0cmFja2luZyBhbmltYXRpb24gaXMgcmVxdWlyZWQgdG8gYWRkIGRpc3BsYXk6IG5vbmUgYXQgdGhlIGVuZCBvZiB0aGUgYW5pbWF0aW9uXHJcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGNvbGxhcHNlZCBlbGVtZW50IHdpbGwgdGFrZSBwbGFjZSBvbiB0aGUgcGFnZSBhdCB0aGUgZW5kIG9mIHRoZSBhbmltYXRpb25cclxuICAgICAgICAvLyBUaGVyZSdzIG5vIHBvc3NpYmlsaXR5IHRvIG1hbmlwdWxhdGUgd2l0aCBkaXNwbGF5IHByb3BlcnR5IG9uIGFuaW1hdGlvbiBkaXJlY3RseSBpbiBDU1NcclxuICAgICAgICBsZXQgZG9tID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyk7XHJcbiAgICAgICAgbGV0IHRib2R5ID0gZG9tLnF1ZXJ5U2VsZWN0b3IoXCIuYW50LXRhYmxlLXRib2R5XCIpO1xyXG5cclxuICAgICAgICBsZXQgb25BbmltYXRpb25FbmQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgaXNDb2xsYXBzZUFuaW1hdGlvbkNvbXBsZXRlZDogdGhpcy5zdGF0ZS5pc0NvbGxhcHNlZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0Ym9keS5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsIG9uQW5pbWF0aW9uRW5kKTtcclxuICAgICAgICB0Ym9keS5hZGRFdmVudExpc3RlbmVyKFwid2Via2l0QW5pbWF0aW9uRW5kXCIsIG9uQW5pbWF0aW9uRW5kKTtcclxuICAgICAgICB0Ym9keS5hZGRFdmVudExpc3RlbmVyKFwib0FuaW1hdGlvbkVuZFwiLCBvbkFuaW1hdGlvbkVuZCk7XHJcbiAgICAgICAgdGJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcIk1TQW5pbWF0aW9uRW5kXCIsIG9uQW5pbWF0aW9uRW5kKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgd3JhcHBlciB3aGljaCBhbGxvd3MgdG8gY2FsbCBleHRlcm5hbGx5IHBhc3NlZCBvbkNsaWNrIGZ1bmN0aW9uIGFmdGVyIGV4ZWN1dGlvbiBvZiBvdXIgb25lLCBwcmVzZXJ2aW5nIGFsbCB0aGUgb3RoZXIgaGFuZGxlcnMgaW50YWN0XHJcbiAgICAgICAgbGV0IG9uSGVhZGVyUm93ID0gKGNvbHVtbiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGhhbmRsZXJzID0ge307XHJcblxyXG4gICAgICAgICAgICBsZXQgaW5uZXJPbkhlYWRlclJvdyA9IHRoaXMucHJvcHMub25IZWFkZXJSb3c7XHJcbiAgICAgICAgICAgIGlmIChpbm5lck9uSGVhZGVyUm93KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5uZXJIYW5kbGVycyA9IGlubmVyT25IZWFkZXJSb3coY29sdW1uLCBpbmRleCk7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVycyA9IGlubmVySGFuZGxlcnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGhhbmRsZXJzLm9uQ2xpY2sgPSBldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHNlbGVjdGFibGUgY29sdW1uIGlzIGNsaWNrZWRcclxuICAgICAgICAgICAgICAgIGxldCBjbGFzc05hbWUgPSBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2xhc3NOYW1lICYmIGNsYXNzTmFtZS5pbmNsdWRlcyhcImFudC1jaGVja2JveC1pbnB1dFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0NvbGxhcHNlZDogIXRoaXMuc3RhdGUuaXNDb2xsYXBzZWRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQ29sbGFwc2VBbmltYXRpb25Db21wbGV0ZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXJPbkhlYWRlclJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbm5lckhhbmRsZXJzID0gaW5uZXJPbkhlYWRlclJvdyhjb2x1bW4sIGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXJIYW5kbGVycy5vbkNsaWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVySGFuZGxlcnMub25DbGljayhldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJzO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxUYWJsZVxyXG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgICAgICBvbkhlYWRlclJvdz17b25IZWFkZXJSb3d9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Bjb2xsYXBzaWJsZS10YWJsZSAke1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNDb2xsYXBzZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcImNvbGxhcHNpYmxlLXRhYmxlLWNvbGxhcHNlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJjb2xsYXBzaWJsZS10YWJsZS11bmNvbGxhcHNlZFwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAke1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNDb2xsYXBzZUFuaW1hdGlvbkNvbXBsZXRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwiY29sbGFwc2libGUtdGFibGUtY29sbGFwc2VkLWFuaW1hdGlvbi1jb21wbGV0ZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENvbGxhcHNpYmxlVGFibGU7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IEFzc2V0V3JhcHBlciBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldFdyYXBwZXJcIjtcclxuaW1wb3J0IGNuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xyXG5pbXBvcnQgTWFya2V0c1N0b3JlIGZyb20gXCJzdG9yZXMvTWFya2V0c1N0b3JlXCI7XHJcbmltcG9ydCB7Y29ubmVjdH0gZnJvbSBcImFsdC1yZWFjdFwiO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSBcImNvbW1vbi91dGlsc1wiO1xyXG5pbXBvcnQgRm9ybWF0dGVkUHJpY2UgZnJvbSBcIi4vRm9ybWF0dGVkUHJpY2VcIjtcclxuaW1wb3J0IG1hcmtldFV0aWxzIGZyb20gXCJjb21tb24vbWFya2V0X3V0aWxzXCI7XHJcblxyXG5jbGFzcyBNYXJrZXRTdGF0cyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdHNJbnRlcnZhbCA9IG51bGw7XHJcbiAgICAgICAgY29uc3Qge21hcmtldE5hbWV9ID0gbWFya2V0VXRpbHMuZ2V0TWFya2V0TmFtZShwcm9wcy5iYXNlLCBwcm9wcy5xdW90ZSk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgbWFya2V0TmFtZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrU3RhdHMobmV3U3RhdHMgPSB7Y2xvc2U6IHt9fSwgb2xkU3RhdHMgPSB7Y2xvc2U6IHt9fSkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIG5ld1N0YXRzLnZvbHVtZUJhc2UgIT09IG9sZFN0YXRzLnZvbHVtZUJhc2UgfHxcclxuICAgICAgICAgICAgIXV0aWxzLmFyZV9lcXVhbF9zaGFsbG93KFxyXG4gICAgICAgICAgICAgICAgbmV3U3RhdHMuY2xvc2UgJiYgbmV3U3RhdHMuY2xvc2UuYmFzZSxcclxuICAgICAgICAgICAgICAgIG9sZFN0YXRzLmNsb3NlICYmIG9sZFN0YXRzLmNsb3NlLmJhc2VcclxuICAgICAgICAgICAgKSB8fFxyXG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3coXHJcbiAgICAgICAgICAgICAgICBuZXdTdGF0cy5jbG9zZSAmJiBuZXdTdGF0cy5jbG9zZS5xdW90ZSxcclxuICAgICAgICAgICAgICAgIG9sZFN0YXRzLmNsb3NlICYmIG9sZFN0YXRzLmNsb3NlLnF1b3RlXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShucCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrU3RhdHMoXHJcbiAgICAgICAgICAgICAgICBucC5hbGxNYXJrZXRTdGF0cy5nZXQodGhpcy5zdGF0ZS5tYXJrZXROYW1lKSxcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWxsTWFya2V0U3RhdHMuZ2V0KHRoaXMuc3RhdGUubWFya2V0TmFtZSlcclxuICAgICAgICAgICAgKSB8fFxyXG4gICAgICAgICAgICBucC5iYXNlLmdldChcImlkXCIpICE9PSB0aGlzLnByb3BzLmJhc2UuZ2V0KFwiaWRcIikgfHxcclxuICAgICAgICAgICAgbnAucXVvdGUuZ2V0KFwiaWRcIikgIT09IHRoaXMucHJvcHMucXVvdGUuZ2V0KFwiaWRcIilcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRzSW50ZXJ2YWwpIHRoaXMuc3RhdHNJbnRlcnZhbCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBNYXJrZXRQcmljZUlubmVyIGV4dGVuZHMgTWFya2V0U3RhdHMge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5wKSB7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLnNob3VsZENvbXBvbmVudFVwZGF0ZShucCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7YWxsTWFya2V0U3RhdHN9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCB7bWFya2V0TmFtZX0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGNvbnN0IG1hcmtldFN0YXRzID0gYWxsTWFya2V0U3RhdHMuZ2V0KG1hcmtldE5hbWUpO1xyXG4gICAgICAgIGxldCBwcmljZSA9IG1hcmtldFN0YXRzICYmIG1hcmtldFN0YXRzLnByaWNlID8gbWFya2V0U3RhdHMucHJpY2UgOiBudWxsO1xyXG4gICAgICAgIC8vIGlmICghcHJpY2UgJiYgbWFya2V0U3RhdHNJbnZlcnRlZCAmJiBtYXJrZXRTdGF0c0ludmVydGVkLnByaWNlKSB7XHJcbiAgICAgICAgLy8gICAgIHByaWNlID0gbWFya2V0U3RhdHNJbnZlcnRlZC5wcmljZS5pbnZlcnQoKTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17Y25hbWVzKFwiXCIsIHRoaXMucHJvcHMuY2xhc3NOYW1lKX0+XHJcbiAgICAgICAgICAgICAgICB7cHJpY2UgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZFByaWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VfYW1vdW50PXtwcmljZS5iYXNlLmFtb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9hc3NldD17cHJpY2UuYmFzZS5hc3NldF9pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVfYW1vdW50PXtwcmljZS5xdW90ZS5hbW91bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlX2Fzc2V0PXtwcmljZS5xdW90ZS5hc3NldF9pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2VfZGlyZWN0aW9uPXt0aGlzLnByb3BzLmZvcmNlX2RpcmVjdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9zeW1ib2xzPXt0aGlzLnByb3BzLmhpZGVfc3ltYm9sc31cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICBcIm4vYVwiXHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuTWFya2V0UHJpY2VJbm5lciA9IEFzc2V0V3JhcHBlcihNYXJrZXRQcmljZUlubmVyLCB7XHJcbiAgICBwcm9wTmFtZXM6IFtcInF1b3RlXCIsIFwiYmFzZVwiXVxyXG59KTtcclxuXHJcbmNsYXNzIE1hcmtldFByaWNlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICByZXR1cm4gPE1hcmtldFByaWNlSW5uZXIgey4uLnRoaXMucHJvcHN9IC8+O1xyXG4gICAgfVxyXG59XHJcblxyXG5NYXJrZXRQcmljZSA9IGNvbm5lY3QoXHJcbiAgICBNYXJrZXRQcmljZSxcclxuICAgIHtcclxuICAgICAgICBsaXN0ZW5UbygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtNYXJrZXRzU3RvcmVdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0UHJvcHMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBhbGxNYXJrZXRTdGF0czogTWFya2V0c1N0b3JlLmdldFN0YXRlKCkuYWxsTWFya2V0U3RhdHNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbik7XHJcblxyXG5leHBvcnQge01hcmtldFByaWNlLCBNYXJrZXRTdGF0c307XHJcbiIsImltcG9ydCB7RmV0Y2hDaGFpbn0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcbmltcG9ydCB7RmVlZFByaWNlLCBBc3NldH0gZnJvbSBcIi4vTWFya2V0Q2xhc3Nlc1wiO1xyXG5pbXBvcnQgYXNzZXRfdXRpbHMgZnJvbSBcIi4vYXNzZXRfdXRpbHNcIjtcclxuXHJcbmxldCBhc3luY0NhY2hlID0ge307XHJcbmNvbnN0IGNoZWNrTWFyZ2luU3RhdHVzVFRMID0gNjAwMDAgKiAxOyAvLyAxIG1pbnV0ZVxyXG5cclxuZnVuY3Rpb24gY2hlY2tNYXJnaW5TdGF0dXMoYWNjb3VudCkge1xyXG4gICAgaWYgKCFhY2NvdW50IHx8IChhY2NvdW50ICYmICFhY2NvdW50LmdldChcImNhbGxfb3JkZXJzXCIsIFtdKS5zaXplKSlcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xyXG5cclxuICAgIGNvbnN0IGtleSA9XHJcbiAgICAgICAgYWNjb3VudC5nZXQoXCJuYW1lXCIpICsgSlNPTi5zdHJpbmdpZnkoYWNjb3VudC5nZXQoXCJjYWxsX29yZGVyc1wiKSk7XHJcbiAgICBpZiAoYXN5bmNDYWNoZVtrZXldKSB7XHJcbiAgICAgICAgaWYgKGFzeW5jQ2FjaGVba2V5XS5yZXN1bHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShhc3luY0NhY2hlW2tleV0ucmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xyXG4gICAgICAgICAgICBhc3luY0NhY2hlW2tleV0ucXVldWUucHVzaCh7cmVzLCByZWp9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcclxuICAgICAgICBhc3luY0NhY2hlW2tleV0gPSB7cXVldWU6IFt7cmVzLCByZWp9XSwgcmVzdWx0OiBudWxsfTtcclxuXHJcbiAgICAgICAgRmV0Y2hDaGFpbihcImdldE9iamVjdFwiLCBhY2NvdW50LmdldChcImNhbGxfb3JkZXJzXCIpLnRvQXJyYXkoKSlcclxuICAgICAgICAgICAgLnRoZW4oY2FsbF9vcmRlcnMgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFzc2V0cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgY2FsbF9vcmRlcnMuZm9yRWFjaChhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYmFzZUlkID0gYS5nZXRJbihbXCJjYWxsX3ByaWNlXCIsIFwiYmFzZVwiLCBcImFzc2V0X2lkXCJdKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcXVvdGVJZCA9IGEuZ2V0SW4oW1wiY2FsbF9wcmljZVwiLCBcInF1b3RlXCIsIFwiYXNzZXRfaWRcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhc3NldHMuaW5kZXhPZihiYXNlSWQpID09PSAtMSkgYXNzZXRzLnB1c2goYmFzZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXNzZXRzLmluZGV4T2YocXVvdGVJZCkgPT09IC0xKSBhc3NldHMucHVzaChxdW90ZUlkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgRmV0Y2hDaGFpbihcImdldEFzc2V0XCIsIGFzc2V0cywgNjAwMCkudGhlbihhc3NldHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhc3NldHNNYXAgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICBhc3NldHMuZm9yRWFjaChhc3NldCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0c01hcFthc3NldC5nZXQoXCJpZFwiKV0gPSBhc3NldC50b0pTKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXR1cyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxfb3JkZXJzLmZvckVhY2goY28gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVidEFzc2V0ID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0c01hcFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjby5nZXRJbihbXCJjYWxsX3ByaWNlXCIsIFwicXVvdGVcIiwgXCJhc3NldF9pZFwiXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2xsYXRlcmFsQXNzZXQgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzTWFwW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvLmdldEluKFtcImNhbGxfcHJpY2VcIiwgXCJiYXNlXCIsIFwiYXNzZXRfaWRcIl0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3AgPSBhc3NldF91dGlscy5leHRyYWN0UmF3RmVlZFByaWNlKGRlYnRBc3NldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcC5iYXNlLmFzc2V0X2lkID09PSBzcC5xdW90ZS5hc3NldF9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzW2RlYnRBc3NldC5pZF0gPSB7cmF0aW86IG51bGx9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbGxhdGVyYWwgPSBuZXcgQXNzZXQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogY28uZ2V0KFwiY29sbGF0ZXJhbFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldF9pZDogY29sbGF0ZXJhbEFzc2V0LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWNpc2lvbjogY29sbGF0ZXJhbEFzc2V0LnByZWNpc2lvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVidCA9IG5ldyBBc3NldCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBjby5nZXQoXCJkZWJ0XCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBkZWJ0QXNzZXQuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBkZWJ0QXNzZXQucHJlY2lzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtciA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidEFzc2V0LmJpdGFzc2V0LmN1cnJlbnRfZmVlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFpbnRlbmFuY2VfY29sbGF0ZXJhbF9yYXRpbyAvIDEwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJpY2UgPSBuZXcgRmVlZFByaWNlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZU9iamVjdDogYXNzZXRfdXRpbHMuZXh0cmFjdFJhd0ZlZWRQcmljZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXRfYmFzZTogYXNzZXRfdXRpbHMuZXh0cmFjdFJhd0ZlZWRQcmljZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidEFzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5xdW90ZS5hc3NldF9pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnRBc3NldC5iaXRhc3NldC5jdXJyZW50X2ZlZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXhpbXVtX3Nob3J0X3NxdWVlemVfcmF0aW8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzOiBhc3NldHNNYXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhdGVyYWwuZ2V0QW1vdW50KHtyZWFsOiB0cnVlfSkgL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZGVidC5nZXRBbW91bnQoe3JlYWw6IHRydWV9KSAvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZS50b1JlYWwoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4oY3VycmVudC5yYXRpbykpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQucmF0aW8gPCBtcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuc3RhdHVzQ2xhc3MgPSBcImRhbmdlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50LnJhdGlvIDwgbXIgKyAwLjUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LnN0YXR1c0NsYXNzID0gXCJ3YXJuaW5nXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuc3RhdHVzQ2xhc3MgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzW2RlYnRBc3NldC5pZF0gPSBjdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmNDYWNoZVtrZXldLnF1ZXVlLmZvckVhY2gocHJvbWlzZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UucmVzKHN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmNDYWNoZVtrZXldID0ge3Jlc3VsdDogc3RhdHVzfTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGFzeW5jQ2FjaGVba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBjaGVja01hcmdpblN0YXR1c1RUTCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGFzeW5jQ2FjaGVba2V5XS5xdWV1ZS5mb3JFYWNoKHByb21pc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UucmVqKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IHtjaGVja01hcmdpblN0YXR1c307XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFJlYWN0SGlnaGNoYXJ0cyBmcm9tIFwicmVhY3QtaGlnaGNoYXJ0c1wiO1xyXG5pbXBvcnQgVHJlZW1hcCBmcm9tIFwiaGlnaGNoYXJ0cy9tb2R1bGVzL3RyZWVtYXBcIjtcclxuaW1wb3J0IEhlYXRtYXAgZnJvbSBcImhpZ2hjaGFydHMvbW9kdWxlcy9oZWF0bWFwXCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBDaGFpblR5cGVzIGZyb20gXCIuLi9VdGlsaXR5L0NoYWluVHlwZXNcIjtcclxuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcclxuaW1wb3J0IEJpbmRUb0NoYWluU3RhdGUgZnJvbSBcIi4uL1V0aWxpdHkvQmluZFRvQ2hhaW5TdGF0ZVwiO1xyXG5pbXBvcnQgQWx0Q29udGFpbmVyIGZyb20gXCJhbHQtY29udGFpbmVyXCI7XHJcbmltcG9ydCBNYXJrZXRVdGlscyBmcm9tIFwiY29tbW9uL21hcmtldF91dGlsc1wiO1xyXG5pbXBvcnQgTWFya2V0c1N0b3JlIGZyb20gXCJzdG9yZXMvTWFya2V0c1N0b3JlXCI7XHJcbmltcG9ydCBTZXR0aW5nc1N0b3JlIGZyb20gXCJzdG9yZXMvU2V0dGluZ3NTdG9yZVwiO1xyXG5pbXBvcnQge0xpbmssIHdpdGhSb3V0ZXJ9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XHJcblxyXG5UcmVlbWFwKFJlYWN0SGlnaGNoYXJ0cy5IaWdoY2hhcnRzKTtcclxuSGVhdG1hcChSZWFjdEhpZ2hjaGFydHMuSGlnaGNoYXJ0cyk7XHJcblxyXG5jbGFzcyBBY2NvdW50VHJlZW1hcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGFzc2V0czogQ2hhaW5UeXBlcy5DaGFpbkFzc2V0c0xpc3QsXHJcbiAgICAgICAgcHJlZmVycmVkQXNzZXQ6IENoYWluVHlwZXMuQ2hhaW5Bc3NldC5pc1JlcXVpcmVkXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgYXNzZXRzOiBbXSxcclxuICAgICAgICBwcmVmZXJyZWRBc3NldDogXCIxLjMuMFwiXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMpIHtcclxuICAgIC8vICAgICByZXR1cm4gKFxyXG4gICAgLy8gICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobmV4dFByb3BzLmJhbGFuY2VPYmplY3RzLCB0aGlzLnByb3BzLmJhbGFuY2VPYmplY3RzKSB8fFxyXG4gICAgLy8gICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobmV4dFByb3BzLmFzc2V0cywgdGhpcy5wcm9wcy5hc3NldHMpXHJcbiAgICAvLyAgICAgKTtcclxuICAgIC8vIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgYmFsYW5jZU9iamVjdHMsXHJcbiAgICAgICAgICAgIGNvcmVfYXNzZXQsXHJcbiAgICAgICAgICAgIG1hcmtldFN0YXRzLFxyXG4gICAgICAgICAgICBwcmVmZXJyZWRBc3NldCxcclxuICAgICAgICAgICAgaGlzdG9yeVxyXG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBsZXQgYWNjb3VudEJhbGFuY2VzID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGJhbGFuY2VPYmplY3RzICYmIGJhbGFuY2VPYmplY3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IHRvdGFsVmFsdWUgPSAwO1xyXG4gICAgICAgICAgICBhY2NvdW50QmFsYW5jZXMgPSBiYWxhbmNlT2JqZWN0cy5mb3JFYWNoKGJhbGFuY2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFiYWxhbmNlKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBsZXQgYmFsYW5jZU9iamVjdCA9XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGJhbGFuY2UgPT0gXCJzdHJpbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IENoYWluU3RvcmUuZ2V0T2JqZWN0KGJhbGFuY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYmFsYW5jZTtcclxuICAgICAgICAgICAgICAgIGxldCBhc3NldF90eXBlID0gYmFsYW5jZU9iamVjdC5nZXQoXCJhc3NldF90eXBlXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGFzc2V0ID0gQ2hhaW5TdG9yZS5nZXRBc3NldChhc3NldF90eXBlKTtcclxuICAgICAgICAgICAgICAgIGlmICghYXNzZXQgfHwgIXByZWZlcnJlZEFzc2V0KSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBsZXQgYW1vdW50ID0gTnVtYmVyKGJhbGFuY2VPYmplY3QuZ2V0KFwiYmFsYW5jZVwiKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcVZhbHVlID0gTWFya2V0VXRpbHMuY29udmVydFZhbHVlKFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldCxcclxuICAgICAgICAgICAgICAgICAgICBhc3NldCxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRTdGF0cyxcclxuICAgICAgICAgICAgICAgICAgICBjb3JlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZXFWYWx1ZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldC5nZXQoXCJwcmVjaXNpb25cIilcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB0b3RhbFZhbHVlICs9IGVxVmFsdWUgLyBwcmVjaXNpb247XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYWNjb3VudEJhbGFuY2VzID0gYmFsYW5jZU9iamVjdHNcclxuICAgICAgICAgICAgICAgIC5tYXAoKGJhbGFuY2UsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiYWxhbmNlKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYmFsYW5jZU9iamVjdCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBiYWxhbmNlID09IFwic3RyaW5nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gQ2hhaW5TdG9yZS5nZXRPYmplY3QoYmFsYW5jZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYmFsYW5jZTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXNzZXRfdHlwZSA9IGJhbGFuY2VPYmplY3QuZ2V0KFwiYXNzZXRfdHlwZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXNzZXQgPSBDaGFpblN0b3JlLmdldEFzc2V0KGFzc2V0X3R5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYXNzZXQpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhbW91bnQgPSBOdW1iZXIoYmFsYW5jZU9iamVjdC5nZXQoXCJiYWxhbmNlXCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXFWYWx1ZSA9IE1hcmtldFV0aWxzLmNvbnZlcnRWYWx1ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldFN0YXRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3JlX2Fzc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlcVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlY2lzaW9uID0gdXRpbHMuZ2V0X2Fzc2V0X3ByZWNpc2lvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkQXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbFZhbHVlID0gZXFWYWx1ZSAvIHByZWNpc2lvbjtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwZXJjZW50ID0gKGZpbmFsVmFsdWUgLyB0b3RhbFZhbHVlKSAqIDEwMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgICogRmlsdGVyIG91dCBhc3NldHMgdGhhdCBtYWtlIHVwIGEgc21hbGwgcGVyY2VudGFnZSBvZlxyXG4gICAgICAgICAgICAgICAgKiB0aGUgdG90YWwgdmFsdWUgb2YgdGhlIGFjY291bnRcclxuICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlcmNlbnQgPCAwLjUpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbFZhbHVlIDwgMSkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ltYm9sID0gYXNzZXQuZ2V0KFwic3ltYm9sXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5bWJvbDogc3ltYm9sLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBgJHtzeW1ib2x9ICgke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxWYWx1ZSA9PT0gMCA/IDAgOiBwZXJjZW50LnRvRml4ZWQoMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSUpYCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZpbmFsVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBSZWFjdEhpZ2hjaGFydHMuSGlnaGNoYXJ0cy5nZXRPcHRpb25zKCkuY29sb3JzW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihuID0+ICEhbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGFjY291bnRCYWxhbmNlcyAmJlxyXG4gICAgICAgICAgICBhY2NvdW50QmFsYW5jZXMubGVuZ3RoID09PSAxICYmXHJcbiAgICAgICAgICAgIGFjY291bnRCYWxhbmNlc1swXS52YWx1ZSA9PT0gMFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBhY2NvdW50QmFsYW5jZXMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgY2hhcnQ6IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDI1NSwgMCwgMCwgMClcIixcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMjUwLFxyXG4gICAgICAgICAgICAgICAgc3BhY2luZ0xlZnQ6IDAsXHJcbiAgICAgICAgICAgICAgICBzcGFjaW5nUmlnaHQ6IDAsXHJcbiAgICAgICAgICAgICAgICBzcGFjaW5nQm90dG9tOiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGNvbG9yQXhpczoge1xyXG4gICAgICAgICAgICAvLyAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICAvLyAgICAgbWluQ29sb3I6IFwiI2ZmZmZmZlwiLFxyXG4gICAgICAgICAgICAvLyAgICAgbWF4Q29sb3I6IFJlYWN0SGlnaGNoYXJ0cy5IaWdoY2hhcnRzLmdldE9wdGlvbnMoKS5jb2xvcnNbMF1cclxuICAgICAgICAgICAgLy8gfSxcclxuICAgICAgICAgICAgY3JlZGl0czoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGVnZW5kOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwbG90T3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgdHJlZW1hcDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludEZvcm1hdHRlcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDxiPiR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9PC9iPjogJHtSZWFjdEhpZ2hjaGFydHMuSGlnaGNoYXJ0cy5udW1iZXJGb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfSAke3ByZWZlcnJlZEFzc2V0LmdldChcInN5bWJvbFwiKX1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNlcmllczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluayA9IGAvYXNzZXQvJHt0aGlzLnN5bWJvbH1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaChsaW5rKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2VyaWVzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0cmVlbWFwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWxzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0QWxnb3JpdGhtOiBcInNsaWNlQW5kRGljZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUxhYmVsczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogXCJtaWRkbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBhY2NvdW50QmFsYW5jZXNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgdGl0bGU6IHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IG51bGxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxBY2NvdW50VHJlZW1hcFZpZXdcclxuICAgICAgICAgICAgICAgIGFjY291bnRCYWxhbmNlcz17YWNjb3VudEJhbGFuY2VzfVxyXG4gICAgICAgICAgICAgICAgY29uZmlnPXtjb25maWd9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gQWNjb3VudFRyZWVtYXBWaWV3KHthY2NvdW50QmFsYW5jZXMsIGNvbmZpZ30pIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY2NvdW50LXRyZWVtYXBcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY2NvdW50LXRyZWVtYXAtLWxlZ2VuZFwiPlxyXG4gICAgICAgICAgICAgICAge2FjY291bnRCYWxhbmNlcyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRCYWxhbmNlcy5tYXAoKHtuYW1lLCBzeW1ib2wsIGNvbG9yfSwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGluayBrZXk9e2tleX0gdG89e2AvYXNzZXQvJHtzeW1ib2x9YH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsZWdlbmQtaXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJsZWdlbmQtc3F1YXJlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiBjb2xvcn19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPFJlYWN0SGlnaGNoYXJ0cyBjb25maWc9e2NvbmZpZ30gLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICk7XHJcbn1cclxuXHJcbkFjY291bnRUcmVlbWFwID0gQmluZFRvQ2hhaW5TdGF0ZShBY2NvdW50VHJlZW1hcCk7XHJcblxyXG5jbGFzcyBBY2NvdW50VHJlZW1hcEJhbGFuY2VXcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAgICAgYmFsYW5jZU9iamVjdHM6IENoYWluVHlwZXMuQ2hhaW5PYmplY3RzTGlzdCxcclxuICAgICAgICBjb3JlX2Fzc2V0OiBDaGFpblR5cGVzLkNoYWluQXNzZXQuaXNSZXF1aXJlZFxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIGJhbGFuY2VPYmplY3RzOiBbXSxcclxuICAgICAgICBjb3JlX2Fzc2V0OiBcIjEuMy4wXCJcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBhc3NldHMgPSB0aGlzLnByb3BzLmJhbGFuY2VPYmplY3RzLmZpbHRlcihhID0+ICEhYSkubWFwKGEgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gYS5nZXQoXCJhc3NldF90eXBlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxBY2NvdW50VHJlZW1hcFxyXG4gICAgICAgICAgICAgICAgcHJlZmVycmVkQXNzZXQ9e3RoaXMucHJvcHMuc2V0dGluZ3MuZ2V0KFwidW5pdFwiLCBcIjEuMy4wXCIpfVxyXG4gICAgICAgICAgICAgICAgYXNzZXRzPXthc3NldHN9XHJcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5BY2NvdW50VHJlZW1hcEJhbGFuY2VXcmFwcGVyID0gQmluZFRvQ2hhaW5TdGF0ZShBY2NvdW50VHJlZW1hcEJhbGFuY2VXcmFwcGVyKTtcclxuXHJcbmNsYXNzIEFjY291bnRUcmVlbWFwV3JhcHBlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPEFsdENvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgc3RvcmVzPXtbU2V0dGluZ3NTdG9yZSwgTWFya2V0c1N0b3JlXX1cclxuICAgICAgICAgICAgICAgIGluamVjdD17e1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldFN0YXRzOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXJrZXRzU3RvcmUuZ2V0U3RhdGUoKS5hbGxNYXJrZXRTdGF0cztcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCkuc2V0dGluZ3M7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPEFjY291bnRUcmVlbWFwQmFsYW5jZVdyYXBwZXJcclxuICAgICAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cclxuICAgICAgICAgICAgICAgICAgICByZWY9e3RoaXMucHJvcHMucmVmQ2FsbGJhY2t9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L0FsdENvbnRhaW5lcj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyKEFjY291bnRUcmVlbWFwV3JhcHBlcik7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBkZWJvdW5jZVJlbmRlciBmcm9tIFwicmVhY3QtZGVib3VuY2UtcmVuZGVyXCI7XG5pbXBvcnQgQmFsYW5jZUNvbXBvbmVudCBmcm9tIFwiLi4vVXRpbGl0eS9CYWxhbmNlQ29tcG9uZW50XCI7XG5pbXBvcnQge1xuICAgIEJhbGFuY2VWYWx1ZUNvbXBvbmVudCxcbiAgICBiYWxhbmNlVG9Bc3NldCxcbiAgICBnZXRFcXVpdmFsZW50VmFsdWVcbn0gZnJvbSBcIi4uL1V0aWxpdHkvRXF1aXZhbGVudFZhbHVlQ29tcG9uZW50XCI7XG5pbXBvcnQge01hcmtldDI0SG91ckNoYW5nZUNvbXBvbmVudH0gZnJvbSBcIi4uL1V0aWxpdHkvTWFya2V0Q2hhbmdlQ29tcG9uZW50XCI7XG5pbXBvcnQgRm9ybWF0dGVkQXNzZXQgZnJvbSBcIi4uL1V0aWxpdHkvRm9ybWF0dGVkQXNzZXRcIjtcbmltcG9ydCBhc3NldFV0aWxzIGZyb20gXCJjb21tb24vYXNzZXRfdXRpbHNcIjtcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcbmltcG9ydCB7TGlua30gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcbmltcG9ydCBFcXVpdmFsZW50UHJpY2UgZnJvbSBcIi4uL1V0aWxpdHkvRXF1aXZhbGVudFByaWNlXCI7XG5pbXBvcnQge2dldEZpbmFsUHJpY2V9IGZyb20gXCIuLi9VdGlsaXR5L0VxdWl2YWxlbnRQcmljZVwiO1xuaW1wb3J0IExpbmtUb0Fzc2V0QnlJZCBmcm9tIFwiLi4vVXRpbGl0eS9MaW5rVG9Bc3NldEJ5SWRcIjtcbmltcG9ydCBCb3Jyb3dNb2RhbCBmcm9tIFwiLi4vTW9kYWwvQm9ycm93TW9kYWxcIjtcbmltcG9ydCBSZWFjdFRvb2x0aXAgZnJvbSBcInJlYWN0LXRvb2x0aXBcIjtcbmltcG9ydCB7Z2V0QmFja2VkQ29pbiwgZ2V0QXNzZXRBbmRHYXRld2F5fSBmcm9tIFwiY29tbW9uL2dhdGV3YXlVdGlsc1wiO1xuaW1wb3J0IHtDaGFpblN0b3JlfSBmcm9tIFwiYml0c2hhcmVzanNcIjtcbmltcG9ydCB7Y29ubmVjdH0gZnJvbSBcImFsdC1yZWFjdFwiO1xuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XG5pbXBvcnQgR2F0ZXdheVN0b3JlIGZyb20gXCJzdG9yZXMvR2F0ZXdheVN0b3JlXCI7XG5pbXBvcnQgTWFya2V0c1N0b3JlIGZyb20gXCJzdG9yZXMvTWFya2V0c1N0b3JlXCI7XG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vSWNvbi9JY29uXCI7XG5pbXBvcnQgUHVsc2VJY29uIGZyb20gXCIuLi9JY29uL1B1bHNlSWNvblwiO1xuaW1wb3J0IHV0aWxzIGZyb20gXCJjb21tb24vdXRpbHNcIjtcbmltcG9ydCBTZW5kTW9kYWwgZnJvbSBcIi4uL01vZGFsL1NlbmRNb2RhbFwiO1xuaW1wb3J0IFNldHRpbmdzQWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9TZXR0aW5nc0FjdGlvbnNcIjtcbmltcG9ydCBTZXR0bGVNb2RhbCBmcm9tIFwiLi4vTW9kYWwvU2V0dGxlTW9kYWxcIjtcbmltcG9ydCBEZXBvc2l0TW9kYWwgZnJvbSBcIi4uL01vZGFsL0RlcG9zaXRNb2RhbFwiO1xuaW1wb3J0IFNpbXBsZURlcG9zaXRCbG9ja3RyYWRlc0JyaWRnZSBmcm9tIFwiLi4vRGFzaGJvYXJkL1NpbXBsZURlcG9zaXRCbG9ja3RyYWRlc0JyaWRnZVwiO1xuaW1wb3J0IFdpdGhkcmF3TW9kYWwgZnJvbSBcIi4uL01vZGFsL1dpdGhkcmF3TW9kYWxOZXdcIjtcbmltcG9ydCBaZkFwaSBmcm9tIFwicmVhY3QtZm91bmRhdGlvbi1hcHBzL3NyYy91dGlscy9mb3VuZGF0aW9uLWFwaVwiO1xuaW1wb3J0IFJlc2VydmVBc3NldE1vZGFsIGZyb20gXCIuLi9Nb2RhbC9SZXNlcnZlQXNzZXRNb2RhbFwiO1xuaW1wb3J0IEN1c3RvbVRhYmxlIGZyb20gXCIuLi9VdGlsaXR5L0N1c3RvbVRhYmxlXCI7XG5pbXBvcnQge1Rvb2x0aXAsIEljb24gYXMgQW50SWNvbn0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tIFwicmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudFwiO1xuaW1wb3J0IEFzc2V0TmFtZSBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldE5hbWVcIjtcbmltcG9ydCBUcmFuc2xhdGVXaXRoTGlua3MgZnJvbSBcIi4uL1V0aWxpdHkvVHJhbnNsYXRlV2l0aExpbmtzXCI7XG5pbXBvcnQgTWFya2V0c0FjdGlvbnMgZnJvbSBcImFjdGlvbnMvTWFya2V0c0FjdGlvbnNcIjtcblxuY2xhc3MgQWNjb3VudFBvcnRmb2xpb0xpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaXNCcmlkZ2VNb2RhbFZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgaXNTZXR0bGVNb2RhbFZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgaXNCb3Jyb3dNb2RhbFZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgaXNEZXBvc2l0TW9kYWxWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzV2l0aGRyYXdNb2RhbFZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgaXNCdXJuTW9kYWxWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzQnJpZGdlTW9kYWxWaXNpYmxlQmVmb3JlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzU2V0dGxlTW9kYWxWaXNpYmxlQmVmb3JlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzQm9ycm93TW9kYWxWaXNpYmxlQmVmb3JlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzRGVwb3NpdE1vZGFsVmlzaWJsZUJlZm9yZTogZmFsc2UsXG4gICAgICAgICAgICBpc1dpdGhkcmF3TW9kYWxWaXNpYmxlQmVmb3JlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzQnVybk1vZGFsVmlzaWJsZUJlZm9yZTogZmFsc2UsXG4gICAgICAgICAgICBib3Jyb3c6IG51bGwsXG4gICAgICAgICAgICBzZXR0bGVBc3NldDogXCIxLjMuMFwiLFxuICAgICAgICAgICAgZGVwb3NpdEFzc2V0OiBudWxsLFxuICAgICAgICAgICAgd2l0aGRyYXdBc3NldDogbnVsbCxcbiAgICAgICAgICAgIGJyaWRnZUFzc2V0OiBudWxsLFxuICAgICAgICAgICAgYWxsUmVmc0Fzc2lnbmVkOiBmYWxzZSxcbiAgICAgICAgICAgIHBvcnRmb2xpb1NvcnQ6IHByb3BzLnZpZXdTZXR0aW5ncy5nZXQoXCJwb3J0Zm9saW9Tb3J0XCIsIFwidmFsdWVcIiksXG4gICAgICAgICAgICBwb3J0Zm9saW9Tb3J0RGlyZWN0aW9uOiBwcm9wcy52aWV3U2V0dGluZ3MuZ2V0KFxuICAgICAgICAgICAgICAgIFwicG9ydGZvbGlvU29ydERpcmVjdGlvblwiLFxuICAgICAgICAgICAgICAgIFwiZGVzY2VuZFwiXG4gICAgICAgICAgICApXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5jaGFuZ2VSZWZzID0ge307XG4gICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLnNvcnRGdW5jdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuc29ydEZ1bmN0aW9uc1trZXldID0gdGhpcy5zb3J0RnVuY3Rpb25zW2tleV0uYmluZCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jaGVja1JlZkFzc2lnbm1lbnRzID0gdGhpcy5fY2hlY2tSZWZBc3NpZ25tZW50cy5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc2hvd1NldHRsZU1vZGFsID0gdGhpcy5zaG93U2V0dGxlTW9kYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oaWRlU2V0dGxlTW9kYWwgPSB0aGlzLmhpZGVTZXR0bGVNb2RhbC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc2hvd0RlcG9zaXRNb2RhbCA9IHRoaXMuc2hvd0RlcG9zaXRNb2RhbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhpZGVEZXBvc2l0TW9kYWwgPSB0aGlzLmhpZGVEZXBvc2l0TW9kYWwuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnNob3dXaXRoZHJhd01vZGFsID0gdGhpcy5zaG93V2l0aGRyYXdNb2RhbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhpZGVXaXRoZHJhd01vZGFsID0gdGhpcy5oaWRlV2l0aGRyYXdNb2RhbC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc2hvd0JvcnJvd01vZGFsID0gdGhpcy5zaG93Qm9ycm93TW9kYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oaWRlQm9ycm93TW9kYWwgPSB0aGlzLmhpZGVCb3Jyb3dNb2RhbC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc2hvd0J1cm5Nb2RhbCA9IHRoaXMuc2hvd0J1cm5Nb2RhbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhpZGVCdXJuTW9kYWwgPSB0aGlzLmhpZGVCdXJuTW9kYWwuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnNob3dCcmlkZ2VNb2RhbCA9IHRoaXMuc2hvd0JyaWRnZU1vZGFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGlkZUJyaWRnZU1vZGFsID0gdGhpcy5oaWRlQnJpZGdlTW9kYWwuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnRvZ2dsZVNvcnRPcmRlciA9IHRoaXMudG9nZ2xlU29ydE9yZGVyLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICB0aGlzLnJlZkNoZWNrSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLl9jaGVja1JlZkFzc2lnbm1lbnRzKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnJlZkNoZWNrSW50ZXJ2YWwpO1xuICAgIH1cblxuICAgIF9jaGVja1JlZkFzc2lnbm1lbnRzKCkge1xuICAgICAgICAvKlxuICAgICAgICAgKiBJbiBvcmRlciBmb3Igc29ydGluZyB0byB3b3JrIGFsbCByZWZzIG11c3QgYmUgYXNzaWduZWQsIHNvIHdlIGNoZWNrXG4gICAgICAgICAqIHRoaXMgaGVyZSBhbmQgdXBkYXRlIHRoZSBzdGF0ZSB0byB0cmlnZ2VyIGEgcmVyZW5kZXJcbiAgICAgICAgICovXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5hbGxSZWZzQXNzaWduZWQpIHtcbiAgICAgICAgICAgIGxldCByZWZLZXlzID0gW1wiY2hhbmdlUmVmc1wiXTtcbiAgICAgICAgICAgIGNvbnN0IGFsbFJlZnNBc3NpZ25lZCA9IHJlZktleXMucmVkdWNlKChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGEgPT09IHVuZGVmaW5lZCkgcmV0dXJuICEhT2JqZWN0LmtleXModGhpc1tiXSkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHJldHVybiAhIU9iamVjdC5rZXlzKHRoaXNbYl0pLmxlbmd0aCAmJiBhO1xuICAgICAgICAgICAgfSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGlmIChhbGxSZWZzQXNzaWduZWQpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMucmVmQ2hlY2tJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YWxsUmVmc0Fzc2lnbmVkfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobnAsIG5zKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobnMsIHRoaXMuc3RhdGUpIHx8XG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobnAuYmFja2VkQ29pbnMsIHRoaXMucHJvcHMuYmFja2VkQ29pbnMpIHx8XG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobnAuYmFsYW5jZXMsIHRoaXMucHJvcHMuYmFsYW5jZXMpIHx8XG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobnAuYmFsYW5jZUxpc3QsIHRoaXMucHJvcHMuYmFsYW5jZUxpc3QpIHx8XG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3coXG4gICAgICAgICAgICAgICAgbnAub3B0aW9uYWxBc3NldHMsXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vcHRpb25hbEFzc2V0c1xuICAgICAgICAgICAgKSB8fFxuICAgICAgICAgICAgbnAuYWNjb3VudCAhPT0gdGhpcy5wcm9wcy5hY2NvdW50IHx8XG4gICAgICAgICAgICBucC52aXNpYmxlICE9PSB0aGlzLnByb3BzLnZpc2libGUgfHxcbiAgICAgICAgICAgIG5wLnNldHRpbmdzICE9PSB0aGlzLnByb3BzLnNldHRpbmdzIHx8XG4gICAgICAgICAgICBucC5oaWRkZW5Bc3NldHMgIT09IHRoaXMucHJvcHMuaGlkZGVuQXNzZXRzIHx8XG4gICAgICAgICAgICBucC5hbGxNYXJrZXRTdGF0cy5yZWR1Y2UoKGEsIHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICB1dGlscy5jaGVja19tYXJrZXRfc3RhdHMoXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWxsTWFya2V0U3RhdHMuZ2V0KGtleSlcbiAgICAgICAgICAgICAgICAgICAgKSB8fCBhXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZhbHNlKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHNob3dCcmlkZ2VNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0JyaWRnZU1vZGFsVmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGlzQnJpZGdlTW9kYWxWaXNpYmxlQmVmb3JlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhpZGVCcmlkZ2VNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0JyaWRnZU1vZGFsVmlzaWJsZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2hvd1dpdGhkcmF3TW9kYWwoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNXaXRoZHJhd01vZGFsVmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGlzV2l0aGRyYXdNb2RhbFZpc2libGVCZWZvcmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGlkZVdpdGhkcmF3TW9kYWwoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNXaXRoZHJhd01vZGFsVmlzaWJsZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2hvd0J1cm5Nb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0J1cm5Nb2RhbFZpc2libGU6IHRydWUsXG4gICAgICAgICAgICBpc0J1cm5Nb2RhbFZpc2libGVCZWZvcmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGlkZUJ1cm5Nb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0J1cm5Nb2RhbFZpc2libGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3dTZXR0bGVNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc1NldHRsZU1vZGFsVmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGlzU2V0dGxlTW9kYWxWaXNpYmxlQmVmb3JlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhpZGVTZXR0bGVNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc1NldHRsZU1vZGFsVmlzaWJsZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2hvd0RlcG9zaXRNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0RlcG9zaXRNb2RhbFZpc2libGU6IHRydWUsXG4gICAgICAgICAgICBpc0RlcG9zaXRNb2RhbFZpc2libGVCZWZvcmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGlkZURlcG9zaXRNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0RlcG9zaXRNb2RhbFZpc2libGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3dCb3Jyb3dNb2RhbChxdW90ZUFzc2V0LCBiYWNraW5nQXNzZXQsIGFjY291bnQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0JvcnJvd01vZGFsVmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGlzQm9ycm93TW9kYWxWaXNpYmxlQmVmb3JlOiB0cnVlLFxuICAgICAgICAgICAgYm9ycm93OiB7XG4gICAgICAgICAgICAgICAgcXVvdGVBc3NldDogcXVvdGVBc3NldCxcbiAgICAgICAgICAgICAgICBiYWNraW5nQXNzZXQ6IGJhY2tpbmdBc3NldCxcbiAgICAgICAgICAgICAgICBhY2NvdW50OiBhY2NvdW50XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhpZGVCb3Jyb3dNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBib3Jyb3c6IG51bGwsXG4gICAgICAgICAgICBpc0JvcnJvd01vZGFsVmlzaWJsZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc29ydEZ1bmN0aW9ucyA9IHtcbiAgICAgICAgYnlLZXk6IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhLmtleSA+IGIua2V5O1xuICAgICAgICB9LFxuICAgICAgICBieUluQ29sbGF0ZXJhbDogZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc29ydEZ1bmN0aW9ucy5ieVR5cGVkVmFsdWUoXG4gICAgICAgICAgICAgICAgYSxcbiAgICAgICAgICAgICAgICBiLFxuICAgICAgICAgICAgICAgIHRoaXMuX3N1bUNvbGxhdGVyYWxCYWxhbmNlcyhhLmluQ29sbGF0ZXJhbCksXG4gICAgICAgICAgICAgICAgdGhpcy5fc3VtQ29sbGF0ZXJhbEJhbGFuY2VzKGIuaW5Db2xsYXRlcmFsKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICAgYnlCYWxhbmNlOiBmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb3J0RnVuY3Rpb25zLmJ5VHlwZWRWYWx1ZShcbiAgICAgICAgICAgICAgICBhLFxuICAgICAgICAgICAgICAgIGIsXG4gICAgICAgICAgICAgICAgYmFsYW5jZVRvQXNzZXQoYS5iYWxhbmNlKS5hbW91bnQsXG4gICAgICAgICAgICAgICAgYmFsYW5jZVRvQXNzZXQoYi5iYWxhbmNlKS5hbW91bnRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sXG4gICAgICAgIGJ5VmVzdGluZ0JhbGFuY2U6IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNvcnRGdW5jdGlvbnMuYnlUeXBlZFZhbHVlKFxuICAgICAgICAgICAgICAgIGEsXG4gICAgICAgICAgICAgICAgYixcbiAgICAgICAgICAgICAgICB0aGlzLl9zdW1WZXN0aW5nQmFsYW5jZXMoYS5pblZlc3RpbmcpLFxuICAgICAgICAgICAgICAgIHRoaXMuX3N1bVZlc3RpbmdCYWxhbmNlcyhiLmluVmVzdGluZylcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sXG4gICAgICAgIGJ5SW5PcmRlcnM6IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNvcnRGdW5jdGlvbnMuYnlUeXBlZFZhbHVlKFxuICAgICAgICAgICAgICAgIGEsXG4gICAgICAgICAgICAgICAgYixcbiAgICAgICAgICAgICAgICBhLmluT3JkZXJzLFxuICAgICAgICAgICAgICAgIGIuaW5PcmRlcnNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sXG4gICAgICAgIGJ5VHlwZWRWYWx1ZShhLCBiLCBhVmFsdWUsIGJWYWx1ZSkge1xuICAgICAgICAgICAgYVZhbHVlID0gdXRpbHMuY29udmVydF9zYXRvc2hpX3RvX3R5cGVkKGFWYWx1ZSwgYS5hc3NldCk7XG4gICAgICAgICAgICBiVmFsdWUgPSB1dGlscy5jb252ZXJ0X3NhdG9zaGlfdG9fdHlwZWQoYlZhbHVlLCBiLmFzc2V0KTtcbiAgICAgICAgICAgIGlmIChhVmFsdWUgJiYgYlZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFWYWx1ZSAtIGJWYWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWFWYWx1ZSAmJiBiVmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFWYWx1ZSAmJiAhYlZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNvcnRGdW5jdGlvbnMuYnlLZXkoYSwgYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGJ5RXF1aXZhbGVudFByaWNlOiBmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICBsZXQgYVByaWNlID0gZ2V0RmluYWxQcmljZShcbiAgICAgICAgICAgICAgICBhLmFzc2V0LFxuICAgICAgICAgICAgICAgIGEuYWRkcy5wcmVmZXJyZWRBc3NldCxcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvcmVBc3NldCxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBsZXQgYlByaWNlID0gZ2V0RmluYWxQcmljZShcbiAgICAgICAgICAgICAgICBiLmFzc2V0LFxuICAgICAgICAgICAgICAgIGIuYWRkcy5wcmVmZXJyZWRBc3NldCxcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvcmVBc3NldCxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoYVByaWNlICYmIGJQcmljZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhUHJpY2UgLSBiUHJpY2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFhUHJpY2UgJiYgYlByaWNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhUHJpY2UgJiYgIWJQcmljZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zb3J0RnVuY3Rpb25zLmJ5S2V5KGEsIGIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0b3RhbFZhbHVlOiBmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICBsZXQgYVZhbHVlID0gZ2V0RXF1aXZhbGVudFZhbHVlKFxuICAgICAgICAgICAgICAgIGEudmFsdWUsXG4gICAgICAgICAgICAgICAgYS5hZGRzLnByZWZlcnJlZEFzc2V0LFxuICAgICAgICAgICAgICAgIGEuYWRkcy5hc3NldCxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGxldCBiVmFsdWUgPSBnZXRFcXVpdmFsZW50VmFsdWUoXG4gICAgICAgICAgICAgICAgYi52YWx1ZSxcbiAgICAgICAgICAgICAgICBiLmFkZHMucHJlZmVycmVkQXNzZXQsXG4gICAgICAgICAgICAgICAgYi5hZGRzLmFzc2V0LFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGFWYWx1ZSAmJiBiVmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYVZhbHVlIC0gYlZhbHVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghYVZhbHVlICYmIGJWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYVZhbHVlICYmICFiVmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc29ydEZ1bmN0aW9ucy5ieUtleShhLCBiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2hhbmdlVmFsdWU6IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgIGxldCBhVmFsdWUgPSB0aGlzLmNoYW5nZVJlZnNbYS5rZXldO1xuICAgICAgICAgICAgbGV0IGJWYWx1ZSA9IHRoaXMuY2hhbmdlUmVmc1tiLmtleV07XG5cbiAgICAgICAgICAgIGlmIChhVmFsdWUgJiYgYlZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbGV0IGFDaGFuZ2UgPVxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGFWYWx1ZSkgIT0gXCJOYU5cIiA/IHBhcnNlRmxvYXQoYVZhbHVlKSA6IGFWYWx1ZTtcbiAgICAgICAgICAgICAgICBsZXQgYkNoYW5nZSA9XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoYlZhbHVlKSAhPSBcIk5hTlwiID8gcGFyc2VGbG9hdChiVmFsdWUpIDogYlZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBhQ2hhbmdlIC0gYkNoYW5nZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWFWYWx1ZSAmJiBiVmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFWYWx1ZSAmJiAhYlZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNvcnRGdW5jdGlvbnMuYnlLZXkoYSwgYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdHJpZ2dlclNlbmQoYXNzZXQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VuZF9hc3NldDogYXNzZXR9LCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZW5kX21vZGFsKSB0aGlzLnNlbmRfbW9kYWwuc2hvdygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfb25TZXR0bGVBc3NldChpZCwgZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2V0dGxlQXNzZXQ6IGlkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2hvd1NldHRsZU1vZGFsKCk7XG4gICAgfVxuXG4gICAgX2hpZGVBc3NldChhc3NldCwgc3RhdHVzKSB7XG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5oaWRlQXNzZXQoYXNzZXQsIHN0YXR1cyk7XG4gICAgfVxuXG4gICAgX2J1cm5Bc3NldChhc3NldCwgZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Jlc2VydmU6IGFzc2V0fSk7XG4gICAgICAgIHRoaXMuc2hvd0J1cm5Nb2RhbCgpO1xuICAgIH1cblxuICAgIF9zaG93RGVwb3NpdE1vZGFsKGFzc2V0LCBlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZGVwb3NpdEFzc2V0OiBhc3NldH0sICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0RlcG9zaXRNb2RhbCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfc2hvd0RlcG9zaXRXaXRoZHJhdyhhY3Rpb24sIGFzc2V0LCBmaWF0TW9kYWwsIGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFthY3Rpb24gPT09IFwiYnJpZGdlX21vZGFsXCJcbiAgICAgICAgICAgICAgICAgICAgPyBcImJyaWRnZUFzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgOiBhY3Rpb24gPT09IFwiZGVwb3NpdF9tb2RhbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwiZGVwb3NpdEFzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJ3aXRoZHJhd0Fzc2V0XCJdOiBhc3NldCxcbiAgICAgICAgICAgICAgICBmaWF0TW9kYWxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gXCJicmlkZ2VfbW9kYWxcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dCcmlkZ2VNb2RhbCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09PSBcImRlcG9zaXRfbW9kYWxcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEZXBvc2l0TW9kYWwoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93V2l0aGRyYXdNb2RhbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9nZXRTZXBhcmF0b3IocmVuZGVyKSB7XG4gICAgICAgIHJldHVybiByZW5kZXIgPyA8c3Bhbj4mbmJzcDt8Jm5ic3A7PC9zcGFuPiA6IG51bGw7XG4gICAgfVxuXG4gICAgX3JlbmRlckJ1eSA9IChzeW1ib2wsIGNhbkJ1eSwgYXNzZXROYW1lLCBlbXB0eUNlbGwsIGJhbGFuY2UpID0+IHtcbiAgICAgICAgaWYgKHN5bWJvbCA9PT0gXCJCVFNcIiAmJiBiYWxhbmNlIDw9IDEwMDAwMDApIHtcbiAgICAgICAgICAgIC8vIFByZWNpc2lvbiBvZiA1LCAxID0gMTBeNVxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3Nob3dEZXBvc2l0V2l0aGRyYXcuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYnJpZGdlX21vZGFsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UHVsc2VJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25JY29uPVwiZG9sbGFyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZJY29uPVwiZG9sbGFyLWdyZWVuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmRvbGxhci5idXlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uPXsxMDAwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBtb2RhbEFjdGlvbiA9IHRoaXMuX3Nob3dEZXBvc2l0V2l0aGRyYXcuYmluZChcbiAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgIFwiYnJpZGdlX21vZGFsXCIsXG4gICAgICAgICAgICAgICAgYXNzZXROYW1lLFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsZXQgbGlua0VsZW1lbnQgPSAoXG4gICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogdGhpcy5wcm9wcy5pc015QWNjb3VudCA/IFwicG9pbnRlclwiIDogXCJoZWxwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZG9sbGFyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMuZG9sbGFyLmJ1eVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5pc015QWNjb3VudCA/IG1vZGFsQWN0aW9uIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoY2FuQnV5ICYmIHRoaXMucHJvcHMuaXNNeUFjY291bnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlua0VsZW1lbnQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNhbkJ1eSAmJiAhdGhpcy5wcm9wcy5pc015QWNjb3VudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFwidG9vbHRpcC5sb2dpbl9yZXF1aXJlZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2xpbmtFbGVtZW50fVxuICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5Q2VsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBfcmVuZGVyR2F0ZXdheUFjdGlvbiA9ICh0eXBlLCBhbGxvd2VkLCBhc3NldE5hbWUsIGVtcHR5Q2VsbCkgPT4ge1xuICAgICAgICBsZXQgbW9kYWxBY3Rpb24gPVxuICAgICAgICAgICAgdHlwZSA9PSBcImRlcG9zaXRcIlxuICAgICAgICAgICAgICAgID8gdGhpcy5fc2hvd0RlcG9zaXRNb2RhbC5iaW5kKHRoaXMsIGFzc2V0TmFtZSlcbiAgICAgICAgICAgICAgICA6IHRoaXMuX3Nob3dEZXBvc2l0V2l0aGRyYXcuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgIFwid2l0aGRyYXdfbW9kYWxfbmV3XCIsXG4gICAgICAgICAgICAgICAgICAgICAgYXNzZXROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgIGxldCBhY3Rpb25UaXRsZSA9XG4gICAgICAgICAgICB0eXBlID09IFwiZGVwb3NpdFwiID8gYGljb25zLiR7dHlwZX0uJHt0eXBlfWAgOiBgaWNvbnMuJHt0eXBlfWA7XG5cbiAgICAgICAgbGV0IGxpbmtFbGVtZW50ID0gKFxuICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogdGhpcy5wcm9wcy5pc015QWNjb3VudCA/IFwicG9pbnRlclwiIDogXCJoZWxwXCJcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT17dHlwZX1cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2FjdGlvblRpdGxlfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0eFwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMuaXNNeUFjY291bnQgPyBtb2RhbEFjdGlvbiA6IG51bGx9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGFsbG93ZWQgJiYgdGhpcy5wcm9wcy5pc015QWNjb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuIGxpbmtFbGVtZW50O1xuICAgICAgICB9IGVsc2UgaWYgKGFsbG93ZWQgJiYgIXRoaXMucHJvcHMuaXNNeUFjY291bnQpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcInRvb2x0aXAubG9naW5fcmVxdWlyZWRcIil9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7bGlua0VsZW1lbnR9XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBlbXB0eUNlbGw7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdG9nZ2xlU29ydE9yZGVyKHBhZ2luYXRpb24sIGZpbHRlcnMsIHNvcnRlcikge1xuICAgICAgICBTZXR0aW5nc0FjdGlvbnMuY2hhbmdlVmlld1NldHRpbmcoe1xuICAgICAgICAgICAgcG9ydGZvbGlvU29ydERpcmVjdGlvbjogc29ydGVyLm9yZGVyLFxuICAgICAgICAgICAgcG9ydGZvbGlvU29ydDogc29ydGVyLmNvbHVtbktleVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRIZWFkZXIoYXRMZWFzdE9uZUhhcykge1xuICAgICAgICBsZXQge3NldHRpbmdzfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB7c2hvd25Bc3NldHN9ID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICBjb25zdCBwcmVmZXJyZWRVbml0ID1cbiAgICAgICAgICAgIHNldHRpbmdzLmdldChcInVuaXRcIikgfHwgdGhpcy5wcm9wcy5jb3JlX2Fzc2V0LmdldChcInN5bWJvbFwiKTtcbiAgICAgICAgY29uc3Qgc2hvd0Fzc2V0UGVyY2VudCA9IHNldHRpbmdzLmdldChcInNob3dBc3NldFBlcmNlbnRcIiwgZmFsc2UpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldEltYWdlTmFtZShzeW1ib2wpIHtcbiAgICAgICAgICAgIC8vaWYgKHN5bWJvbCA9PT0gXCJPUEVOLkJUQ1wiIHx8IHN5bWJvbCA9PT0gXCJHREVYLkJUQ1wiKSByZXR1cm4gc3ltYm9sO1xuICAgICAgICAgICAgaWYgKHN5bWJvbC5zdGFydHNXaXRoKFwiUlVERVguXCIpKSByZXR1cm4gc3ltYm9sO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgc3ltYm9sID09IFwiUFBZXCIgfHxcbiAgICAgICAgICAgICAgICBzeW1ib2wgPT0gXCJET05BVEVcIiB8fFxuICAgICAgICAgICAgICAgIHN5bWJvbCA9PSBcIkJUU1wiIHx8XG4gICAgICAgICAgICAgICAgc3ltYm9sID09IFwiQ05ZXCIgfHxcbiAgICAgICAgICAgICAgICBzeW1ib2wgPT0gXCJVU0RcIiB8fFxuICAgICAgICAgICAgICAgIHN5bWJvbCA9PSBcIkVVUlwiIHx8XG4gICAgICAgICAgICAgICAgc3ltYm9sID09IFwiUlVCTEVcIiB8fFxuICAgICAgICAgICAgICAgIHN5bWJvbCA9PSBcIkJUQ1wiIHx8XG4gICAgICAgICAgICAgICAgc3ltYm9sID09IFwiR09MRFwiIHx8XG4gICAgICAgICAgICAgICAgc3ltYm9sID09IFwiU0lMVkVSXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICByZXR1cm4gc3ltYm9sO1xuXG4gICAgICAgICAgICByZXR1cm4gXCJ1bmtub3duXCI7XG5cbiAgICAgICAgICAgIC8vbGV0IGltZ05hbWUgPSBzeW1ib2wuc3BsaXQoXCIuXCIpO1xuICAgICAgICAgICAgLy9yZXR1cm4gaW1nTmFtZS5sZW5ndGggPT09IDIgPyBpbWdOYW1lWzFdIDogaW1nTmFtZVswXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJJdGVtcyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5hc3NldFwiIC8+LFxuICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJhc3NldFwiLFxuICAgICAgICAgICAgICAgIGFsaWduOiBcImxlZnRcIixcbiAgICAgICAgICAgICAgICBjdXN0b21pemFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNvcnRlcjogdGhpcy5zb3J0RnVuY3Rpb25zLmJ5S2V5LFxuICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Z2V0SW1hZ2VOYW1lKGl0ZW0uZ2V0KFwic3ltYm9sXCIpKSA9PT0gXCJ1bmtub3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e2l0ZW0uZ2V0KFwic3ltYm9sXCIpLnRvTG93ZXJDYXNlKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjb2x1bW4taGlkZS1zbWFsbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL29uRXJyb3I9e3RoaXMuX29uRXJyb3IuYmluZCh0aGlzLCBpdGVtLmdldChcInN5bWJvbFwiKS50b0xvd2VyQ2FzZSgpKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWF4V2lkdGg6IDM1LCBtYXJnaW5SaWdodDogMTB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zcmM9e2Ake19fQkFTRV9VUkxfX31hc3NldC1zeW1ib2xzLyR7aXRlbS5nZXQoXCJzeW1ib2xcIikudG9Mb3dlckNhc2UoKX0ucG5nYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17YCR7X19CQVNFX1VSTF9ffWFzc2V0LXN5bWJvbHMvJHtnZXRJbWFnZU5hbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5nZXQoXCJzeW1ib2xcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkudG9Mb3dlckNhc2UoKX0ucG5nYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtUb0Fzc2V0QnlJZCBhc3NldD17aXRlbS5nZXQoXCJpZFwiKX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRpdGxlOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnF0eVwiIC8+LFxuICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJiYWxhbmNlXCIsXG4gICAgICAgICAgICAgICAgYWxpZ246IFwicmlnaHRcIixcbiAgICAgICAgICAgICAgICBjdXN0b21pemFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNvcnRlcjogdGhpcy5zb3J0RnVuY3Rpb25zLmJ5QmFsYW5jZSxcbiAgICAgICAgICAgICAgICByZW5kZXI6IGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3t3aGl0ZVNwYWNlOiBcIm5vd3JhcFwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhbGFuY2VDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZT17aXRlbS5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY29sdW1uLWhpZGUtc21hbGxcIixcbiAgICAgICAgICAgICAgICB0aXRsZTogPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5pbk9yZGVyc1wiIC8+LFxuICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJpbk9yZGVyc1wiLFxuICAgICAgICAgICAgICAgIGFsaWduOiBcInJpZ2h0XCIsXG4gICAgICAgICAgICAgICAgc29ydGVyOiB0aGlzLnNvcnRGdW5jdGlvbnMuYnlJbk9yZGVycyxcbiAgICAgICAgICAgICAgICByZW5kZXI6IChpdGVtLCByb3cpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCItLVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtpdGVtfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17cm93LmFzc2V0LmdldChcImlkXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjb2x1bW4taGlkZS1zbWFsbFwiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LmluVmVzdGluZ0JhbGFuY2VzXCIgLz4sXG4gICAgICAgICAgICAgICAgZGF0YUluZGV4OiBcImluVmVzdGluZ1wiLFxuICAgICAgICAgICAgICAgIGFsaWduOiBcInJpZ2h0XCIsXG4gICAgICAgICAgICAgICAgc29ydGVyOiB0aGlzLnNvcnRGdW5jdGlvbnMuYnlWZXN0aW5nQmFsYW5jZSxcbiAgICAgICAgICAgICAgICByZW5kZXI6IChpdGVtLCByb3cpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpdGVtIHx8IGl0ZW0ubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIi0tXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7d2hpdGVTcGFjZTogXCJub1dyYXBcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3RoaXMuX3N1bVZlc3RpbmdCYWxhbmNlcyhpdGVtKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3Jvdy5hc3NldC5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY29sdW1uLWhpZGUtc21hbGxcIixcbiAgICAgICAgICAgICAgICB0aXRsZTogPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC5pbkNvbGxhdGVyYWxcIiAvPixcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwiaW5Db2xsYXRlcmFsXCIsXG4gICAgICAgICAgICAgICAgYWxpZ246IFwicmlnaHRcIixcbiAgICAgICAgICAgICAgICBzb3J0ZXI6IHRoaXMuc29ydEZ1bmN0aW9ucy5ieUluQ29sbGF0ZXJhbCxcbiAgICAgICAgICAgICAgICByZW5kZXI6IChpdGVtLCByb3cpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpdGVtIHx8IGl0ZW0ubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIi0tXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7d2hpdGVTcGFjZTogXCJub1dyYXBcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3RoaXMuX3N1bUNvbGxhdGVyYWxCYWxhbmNlcyhpdGVtKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3Jvdy5hc3NldC5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZV9hc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY29sdW1uLWhpZGUtc21hbGxcIixcbiAgICAgICAgICAgICAgICB0aXRsZTogKFxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGUgY29udGVudD1cImV4Y2hhbmdlLnByaWNlXCIgLz4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEFzc2V0TmFtZSBuYW1lPXtwcmVmZXJyZWRVbml0fSBub1RpcCAvPilcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgZGF0YUluZGV4OiBcInByaWNlXCIsXG4gICAgICAgICAgICAgICAgYWxpZ246IFwicmlnaHRcIixcbiAgICAgICAgICAgICAgICBzb3J0ZXI6IHRoaXMuc29ydEZ1bmN0aW9ucy5ieUVxdWl2YWxlbnRQcmljZSxcbiAgICAgICAgICAgICAgICByZW5kZXI6IChpdGVtLCByb3cpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7d2hpdGVTcGFjZTogXCJub3dyYXBcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFcXVpdmFsZW50UHJpY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUFzc2V0PXtyb3cuYXNzZXQuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1bHNhdGU9e3tyZXZlcnNlOiB0cnVlLCBmaWxsOiBcImZvcndhcmRzXCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX3N5bWJvbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNvbHVtbi1oaWRlLXNtYWxsXCIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuaG91cl8yNF9zaG9ydFwiIC8+LFxuICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJob3VyMjRcIixcbiAgICAgICAgICAgICAgICBhbGlnbjogXCJyaWdodFwiLFxuICAgICAgICAgICAgICAgIHNvcnRlcjogdGhpcy5zb3J0RnVuY3Rpb25zLmNoYW5nZVZhbHVlLFxuICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8c3BhbiBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fT57aXRlbX08L3NwYW4+O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNvbHVtbi1oaWRlLXNtYWxsXCIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IChcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3t3aGl0ZVNwYWNlOiBcIm5vd3JhcFwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlV2l0aExpbmtzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9MaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nPVwiYWNjb3VudC5lcV92YWx1ZV9oZWFkZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByZWZlcnJlZFVuaXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmc6IFwiYXNzZXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub1RpcFxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgZGF0YUluZGV4OiBcInZhbHVlXCIsXG4gICAgICAgICAgICAgICAgYWxpZ246IFwicmlnaHRcIixcbiAgICAgICAgICAgICAgICBjdXN0b21pemFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNvcnRlcjogdGhpcy5zb3J0RnVuY3Rpb25zLnRvdGFsVmFsdWUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdFNvcnRPcmRlcjogXCJkZXNjZW5kXCIsXG4gICAgICAgICAgICAgICAgcmVuZGVyOiAoaXRlbSwgcm93KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QmFsYW5jZVZhbHVlQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2U9e3Jvdy5hZGRzLmJhbGFuY2VPYmplY3QuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdG9zaGlzPXtpdGVtfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0Fzc2V0PXtwcmVmZXJyZWRVbml0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlX2Fzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRpdGxlOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJhY2NvdW50LnBlcmNlbnRcIiAvPixcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwicGVyY2VudFwiLFxuICAgICAgICAgICAgICAgIGFsaWduOiBcInJpZ2h0XCIsXG4gICAgICAgICAgICAgICAgY3VzdG9taXphYmxlOiB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHNob3dBc3NldFBlcmNlbnRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8c3BhbiBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fT57aXRlbX08L3NwYW4+O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IDxUcmFuc2xhdGUgY29udGVudD1cImhlYWRlci5wYXltZW50c1wiIC8+LFxuICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJwYXltZW50c1wiLFxuICAgICAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8c3BhbiBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fT57aXRlbX08L3NwYW4+O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNvbHVtbi1oaWRlLW1lZGl1bVwiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5idXlcIiAvPixcbiAgICAgICAgICAgICAgICBjdXN0b21pemFibGU6IGF0TGVhc3RPbmVIYXMuYnV5XG4gICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGF0YUluZGV4OiBcImJ1eVwiLFxuICAgICAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8c3BhbiBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fT57aXRlbX08L3NwYW4+O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNvbHVtbi1oaWRlLW1lZGl1bVwiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBhdExlYXN0T25lSGFzLmRlcG9zaXRPbmx5QlRTID8gKFxuICAgICAgICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXh0ZXJuYWxfc2VydmljZV9wcm92aWRlci5leHBlY3RfbW9yZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJtb2RhbC5kZXBvc2l0LnN1Ym1pdFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFudEljb24gdHlwZT1cInF1ZXN0aW9uLWNpcmNsZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZSBjb250ZW50PVwibW9kYWwuZGVwb3NpdC5zdWJtaXRcIiAvPlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgY3VzdG9taXphYmxlOiBhdExlYXN0T25lSGFzLmRlcG9zaXRcbiAgICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwiZGVwb3NpdFwiLFxuICAgICAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8c3BhbiBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fT57aXRlbX08L3NwYW4+O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNvbHVtbi1oaWRlLW1lZGl1bVwiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJtb2RhbC53aXRoZHJhdy5zdWJtaXRcIiAvPixcbiAgICAgICAgICAgICAgICBjdXN0b21pemFibGU6IGF0TGVhc3RPbmVIYXMud2l0aGRyYXdcbiAgICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwid2l0aGRyYXdcIixcbiAgICAgICAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgICAgICAgICByZW5kZXI6IGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPHNwYW4gc3R5bGU9e3t3aGl0ZVNwYWNlOiBcIm5vd3JhcFwifX0+e2l0ZW19PC9zcGFuPjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjb2x1bW4taGlkZS1tZWRpdW1cIixcbiAgICAgICAgICAgICAgICB0aXRsZTogPFRyYW5zbGF0ZSBjb250ZW50PVwiYWNjb3VudC50cmFkZVwiIC8+LFxuICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJ0cmFkZVwiLFxuICAgICAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8c3BhbiBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fT57aXRlbX08L3NwYW4+O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNvbHVtbi1oaWRlLW1lZGl1bVwiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJleGNoYW5nZS5ib3Jyb3dfc2hvcnRcIiAvPixcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwiYm9ycm93XCIsXG4gICAgICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxzcGFuIHN0eWxlPXt7d2hpdGVTcGFjZTogXCJub3dyYXBcIn19PntpdGVtfTwvc3Bhbj47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY29sdW1uLWhpZGUtbWVkaXVtXCIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IDxUcmFuc2xhdGUgY29udGVudD1cImFjY291bnQuc2V0dGxlXCIgLz4sXG4gICAgICAgICAgICAgICAgZGF0YUluZGV4OiBcInNldHRsZVwiLFxuICAgICAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8c3BhbiBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fT57aXRlbX08L3NwYW4+O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNvbHVtbi1oaWRlLW1lZGl1bVwiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJtb2RhbC5yZXNlcnZlLnN1Ym1pdFwiIC8+LFxuICAgICAgICAgICAgICAgIGRhdGFJbmRleDogXCJidXJuXCIsXG4gICAgICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxzcGFuIHN0eWxlPXt7d2hpdGVTcGFjZTogXCJub3dyYXBcIn19PntpdGVtfTwvc3Bhbj47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY29sdW1uLWhpZGUtbWVkaXVtXCIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IChcbiAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25Bc3NldHMgPT0gXCJhY3RpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiZXhjaGFuZ2UuaGlkZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJhY2NvdW50LnBlcm0uc2hvd1wiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IFwiaGlkZVwiLFxuICAgICAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgIHJlbmRlcjogaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8c3BhbiBzdHlsZT17e3doaXRlU3BhY2U6IFwibm93cmFwXCJ9fT57aXRlbX08L3NwYW4+O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICAgICAgaGVhZGVySXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGlmIChpdGVtLmRhdGFJbmRleCA9PSB0aGlzLnN0YXRlLnBvcnRmb2xpb1NvcnQpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmRlZmF1bHRTb3J0T3JkZXIgPSB0aGlzLnN0YXRlLnBvcnRmb2xpb1NvcnREaXJlY3Rpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaGVhZGVySXRlbXM7XG4gICAgfVxuXG4gICAgX3N1bUNvbGxhdGVyYWxCYWxhbmNlcyhiYWxhbmNlcykge1xuICAgICAgICBpZiAoIWJhbGFuY2VzIHx8IGJhbGFuY2VzLmxlbmd0aCA9PSAwKSByZXR1cm4gMDtcbiAgICAgICAgbGV0IHN1bSA9IDA7XG4gICAgICAgIGJhbGFuY2VzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBzdW0gPSBzdW0gKyAraXRlbS5nZXQoXCJjb2xsYXRlcmFsXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN1bTtcbiAgICB9XG5cbiAgICBfc3VtVmVzdGluZ0JhbGFuY2VzKGJhbGFuY2VzKSB7XG4gICAgICAgIGlmICghYmFsYW5jZXMgfHwgYmFsYW5jZXMubGVuZ3RoID09IDApIHJldHVybiAwO1xuICAgICAgICBsZXQgc3VtID0gMDtcbiAgICAgICAgYmFsYW5jZXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIHN1bSA9IHN1bSArIGJhbGFuY2VUb0Fzc2V0KGl0ZW0pLmFtb3VudDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzdW07XG4gICAgfVxuXG4gICAgX3JlbmRlckJhbGFuY2VzKGJhbGFuY2VMaXN0LCBvcHRpb25hbEFzc2V0cywgdmlzaWJsZSkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjb3JlU3ltYm9sLFxuICAgICAgICAgICAgcHJlZmVycmVkVW5pdCxcbiAgICAgICAgICAgIHNldHRpbmdzLFxuICAgICAgICAgICAgaGlkZGVuQXNzZXRzLFxuICAgICAgICAgICAgb3JkZXJzXG4gICAgICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIGNvbnN0IHJlbmRlckJvcnJvdyA9IChhc3NldCwgYWNjb3VudCkgPT4ge1xuICAgICAgICAgICAgbGV0IGlzQml0QXNzZXQgPSBhc3NldCAmJiBhc3NldC5oYXMoXCJiaXRhc3NldF9kYXRhX2lkXCIpO1xuICAgICAgICAgICAgbGV0IGlzR2xvYmFsU2V0dGxlZCA9XG4gICAgICAgICAgICAgICAgaXNCaXRBc3NldCAmJiBhc3NldC5nZXRJbihbXCJiaXRhc3NldFwiLCBcInNldHRsZW1lbnRfZnVuZFwiXSkgPiAwXG4gICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICA6IGZhbHNlO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzQml0QXNzZXQsXG4gICAgICAgICAgICAgICAgYm9ycm93TGluazpcbiAgICAgICAgICAgICAgICAgICAgIWlzQml0QXNzZXQgfHwgaXNHbG9iYWxTZXR0bGVkID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdFRvb2x0aXAuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dCb3Jyb3dNb2RhbChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcImlkXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuZ2V0SW4oW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYml0YXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9wdGlvbnNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNob3J0X2JhY2tpbmdfYXNzZXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZG9sbGFyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5kb2xsYXIuYm9ycm93XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBiYWxhbmNlcyA9IFtdO1xuICAgICAgICBjb25zdCBlbXB0eUNlbGwgPSBcIi1cIjtcbiAgICAgICAgYmFsYW5jZUxpc3QuZm9yRWFjaChiYWxhbmNlID0+IHtcbiAgICAgICAgICAgIGxldCBiYWxhbmNlT2JqZWN0ID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QoYmFsYW5jZSk7XG4gICAgICAgICAgICBpZiAoIWJhbGFuY2VPYmplY3QpIHJldHVybjtcbiAgICAgICAgICAgIGxldCBhc3NldF90eXBlID0gYmFsYW5jZU9iamVjdC5nZXQoXCJhc3NldF90eXBlXCIpO1xuICAgICAgICAgICAgbGV0IGFzc2V0ID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QoYXNzZXRfdHlwZSk7XG4gICAgICAgICAgICBpZiAoIWFzc2V0KSByZXR1cm47XG5cbiAgICAgICAgICAgIGxldCBkaXJlY3RNYXJrZXRMaW5rLCBzZXR0bGVMaW5rLCB0cmFuc2Zlckxpbms7XG4gICAgICAgICAgICBsZXQgc3ltYm9sID0gXCJcIjtcblxuICAgICAgICAgICAgY29uc3QgYXNzZXROYW1lID0gYXNzZXQuZ2V0KFwic3ltYm9sXCIpO1xuICAgICAgICAgICAgY29uc3Qgbm90Q29yZSA9IGFzc2V0LmdldChcImlkXCIpICE9PSBcIjEuMy4wXCI7XG4gICAgICAgICAgICBjb25zdCBub3RDb3JlUHJlZlVuaXQgPSBwcmVmZXJyZWRVbml0ICE9PSBjb3JlU3ltYm9sO1xuXG4gICAgICAgICAgICBsZXQge21hcmtldH0gPSBhc3NldFV0aWxzLnBhcnNlRGVzY3JpcHRpb24oXG4gICAgICAgICAgICAgICAgYXNzZXQuZ2V0SW4oW1wib3B0aW9uc1wiLCBcImRlc2NyaXB0aW9uXCJdKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHN5bWJvbCA9IGFzc2V0LmdldChcInN5bWJvbFwiKTtcbiAgICAgICAgICAgIGlmIChzeW1ib2wuaW5kZXhPZihcIk9QRU4uXCIpICE9PSAtMSAmJiAhbWFya2V0KSBtYXJrZXQgPSBcIlVTRFwiO1xuICAgICAgICAgICAgbGV0IHByZWZlcnJlZE1hcmtldCA9IG1hcmtldCA/IG1hcmtldCA6IHByZWZlcnJlZFVuaXQ7XG5cbiAgICAgICAgICAgIGlmIChub3RDb3JlICYmIHByZWZlcnJlZE1hcmtldCA9PT0gc3ltYm9sKVxuICAgICAgICAgICAgICAgIHByZWZlcnJlZE1hcmtldCA9IGNvcmVTeW1ib2w7XG5cbiAgICAgICAgICAgIC8qIFRhYmxlIGNvbnRlbnQgKi9cbiAgICAgICAgICAgIGRpcmVjdE1hcmtldExpbmsgPSBub3RDb3JlID8gKFxuICAgICAgICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICAgICAgICAgIHRvPXtgL21hcmtldC8ke2Fzc2V0LmdldChcInN5bWJvbFwiKX1fJHtwcmVmZXJyZWRNYXJrZXR9YH1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gTWFya2V0c0FjdGlvbnMuc3dpdGNoTWFya2V0KCl9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInRyYWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMudHJhZGUudHJhZGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICApIDogbm90Q29yZVByZWZVbml0ID8gKFxuICAgICAgICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICAgICAgICAgIHRvPXtgL21hcmtldC8ke2Fzc2V0LmdldChcInN5bWJvbFwiKX1fJHtwcmVmZXJyZWRVbml0fWB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IE1hcmtldHNBY3Rpb25zLnN3aXRjaE1hcmtldCgpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0cmFkZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLnRyYWRlLnRyYWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICBlbXB0eUNlbGxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0cmFuc2ZlckxpbmsgPSAoXG4gICAgICAgICAgICAgICAgPGEgb25DbGljaz17dGhpcy50cmlnZ2VyU2VuZC5iaW5kKHRoaXMsIGFzc2V0LmdldChcImlkXCIpKX0+XG4gICAgICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwidHJhbnNmZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy50cmFuc2ZlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGxldCB7aXNCaXRBc3NldCwgYm9ycm93TGlua30gPSByZW5kZXJCb3Jyb3coXG4gICAgICAgICAgICAgICAgYXNzZXQsXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBpbmNsdWRlQXNzZXQgPSAhaGlkZGVuQXNzZXRzLmluY2x1ZGVzKGFzc2V0X3R5cGUpO1xuICAgICAgICAgICAgY29uc3QgaGFzQmFsYW5jZSA9ICEhYmFsYW5jZU9iamVjdC5nZXQoXCJiYWxhbmNlXCIpO1xuXG4gICAgICAgICAgICAvLyBWZXN0aW5nIGJhbGFuY2VzXG4gICAgICAgICAgICBsZXQgdmVzdGluZ0JhbGFuY2VzID0gW107XG5cbiAgICAgICAgICAgIGNvbnN0IHZicyA9IHRoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJ2ZXN0aW5nX2JhbGFuY2VzXCIpO1xuICAgICAgICAgICAgdmJzLmZvckVhY2godmIgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB2ZXN0aW5nT2JqZWN0ID0gQ2hhaW5TdG9yZS5nZXRPYmplY3QodmIpO1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgdmVzdGluZ09iamVjdC5nZXRJbihbXCJiYWxhbmNlXCIsIFwiYXNzZXRfaWRcIl0pID09PVxuICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJpZFwiKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoK3Zlc3RpbmdPYmplY3QuZ2V0SW4oW1wiYmFsYW5jZVwiLCBcImFtb3VudFwiXSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXN0aW5nQmFsYW5jZXMucHVzaCh2ZXN0aW5nT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBDb2xsYXRlcmFsXG4gICAgICAgICAgICBsZXQgY29sbGF0ZXJhbEJhbGFuY2VzID0gW107XG5cbiAgICAgICAgICAgIHRoaXMucHJvcHMuY2FsbE9yZGVycy5mb3JFYWNoKG9yZGVyID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgY29sbGF0ZXJhbE9iamVjdCA9IENoYWluU3RvcmUuZ2V0T2JqZWN0KG9yZGVyKTtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGNvbGxhdGVyYWxPYmplY3QuZ2V0SW4oW1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJjYWxsX3ByaWNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJhc2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgICAgICAgICBdKSA9PT0gYXNzZXQuZ2V0KFwiaWRcIilcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCtjb2xsYXRlcmFsT2JqZWN0LmdldChcImNvbGxhdGVyYWxcIikgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXRlcmFsQmFsYW5jZXMucHVzaChjb2xsYXRlcmFsT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBiYWNrZWRDb2luID0gZ2V0QmFja2VkQ29pbihcbiAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJzeW1ib2xcIiksXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5iYWNrZWRDb2luc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbkRlcG9zaXQgPVxuICAgICAgICAgICAgICAgIChiYWNrZWRDb2luICYmIGJhY2tlZENvaW4uZGVwb3NpdEFsbG93ZWQpIHx8XG4gICAgICAgICAgICAgICAgYXNzZXQuZ2V0KFwic3ltYm9sXCIpID09IFwiQlRTXCI7XG5cbiAgICAgICAgICAgIGNvbnN0IGNhbldpdGhkcmF3ID1cbiAgICAgICAgICAgICAgICBiYWNrZWRDb2luICYmXG4gICAgICAgICAgICAgICAgYmFja2VkQ29pbi53aXRoZHJhd2FsQWxsb3dlZCAmJlxuICAgICAgICAgICAgICAgIChoYXNCYWxhbmNlICYmIGJhbGFuY2VPYmplY3QuZ2V0KFwiYmFsYW5jZVwiKSAhPSAwKTtcblxuICAgICAgICAgICAgY29uc3QgY2FuQnV5ID0gISF0aGlzLnByb3BzLmJyaWRnZUNvaW5zLmdldChzeW1ib2wpO1xuXG4gICAgICAgICAgICAvKiBBc3NldCBhbmQgQmFja2luZyBBc3NldCBQcmVmaXhlcyAqL1xuICAgICAgICAgICAgbGV0IG9wdGlvbnMgPVxuICAgICAgICAgICAgICAgIGFzc2V0ICYmIGFzc2V0LmdldEluKFtcImJpdGFzc2V0XCIsIFwib3B0aW9uc1wiXSlcbiAgICAgICAgICAgICAgICAgICAgPyBhc3NldC5nZXRJbihbXCJiaXRhc3NldFwiLCBcIm9wdGlvbnNcIl0pLnRvSlMoKVxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICBsZXQgYmFja2luZ0Fzc2V0ID1cbiAgICAgICAgICAgICAgICBvcHRpb25zICYmIG9wdGlvbnMuc2hvcnRfYmFja2luZ19hc3NldFxuICAgICAgICAgICAgICAgICAgICA/IENoYWluU3RvcmUuZ2V0QXNzZXQob3B0aW9ucy5zaG9ydF9iYWNraW5nX2Fzc2V0KVxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICBsZXQge2lzQml0QXNzZXQ6IGlzQXNzZXRCaXRBc3NldH0gPSB1dGlscy5yZXBsYWNlTmFtZShhc3NldCk7XG4gICAgICAgICAgICBsZXQge2lzQml0QXNzZXQ6IGlzQmFja2luZ0JpdEFzc2V0fSA9IHV0aWxzLnJlcGxhY2VOYW1lKFxuICAgICAgICAgICAgICAgIGJhY2tpbmdBc3NldFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGxldCBzZXR0bGVQcmljZVRpdGxlO1xuXG4gICAgICAgICAgICBpZiAoaXNCaXRBc3NldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdsb2JhbGx5X3NldHRsZWQgPVxuICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJiaXRhc3NldFwiKS5nZXQoXCJzZXR0bGVtZW50X2Z1bmRcIikgPiAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzUHJlZGljdGlvbiA9IGFzc2V0LmdldEluKFtcbiAgICAgICAgICAgICAgICAgICAgXCJiaXRhc3NldFwiLFxuICAgICAgICAgICAgICAgICAgICBcImlzX3ByZWRpY3Rpb25fbWFya2V0XCJcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICBpZiAoZ2xvYmFsbHlfc2V0dGxlZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXR0bGVQcmljZVRpdGxlID0gXCJ0b29sdGlwLmdsb2JhbF9zZXR0bGVcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzUHJlZGljdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBzZXR0bGVQcmljZVRpdGxlID0gXCJ0b29sdGlwLnNldHRsZV9tYXJrZXRfcHJlZGljdGlvblwiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldHRsZVByaWNlVGl0bGUgPSBcInRvb2x0aXAuc2V0dGxlXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldHRsZUxpbmsgPVxuICAgICAgICAgICAgICAgICAgICBpc1ByZWRpY3Rpb24gJiYgIWdsb2JhbGx5X3NldHRsZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8QW50SWNvbiB0eXBlPXtcInF1ZXN0aW9uLWNpcmNsZVwifSAvPlxuICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblNldHRsZUFzc2V0LmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcImlkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwic2V0dGxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5zZXR0bGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBwcmVmZXJyZWRBc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQocHJlZmVycmVkVW5pdCk7XG5cbiAgICAgICAgICAgIGxldCBtYXJrZXRJZCA9IGFzc2V0LmdldChcInN5bWJvbFwiKSArIFwiX1wiICsgcHJlZmVycmVkVW5pdDtcbiAgICAgICAgICAgIGxldCBjdXJyZW50TWFya2V0U3RhdHMgPSB0aGlzLnByb3BzLmFsbE1hcmtldFN0YXRzLmdldChtYXJrZXRJZCk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVJlZnNbYXNzZXQuZ2V0KFwic3ltYm9sXCIpXSA9XG4gICAgICAgICAgICAgICAgY3VycmVudE1hcmtldFN0YXRzICYmIGN1cnJlbnRNYXJrZXRTdGF0cy5jaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgPyBjdXJyZW50TWFya2V0U3RhdHMuY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgIDogMDtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsVmFsdWUgPVxuICAgICAgICAgICAgICAgIGJhbGFuY2VUb0Fzc2V0KGJhbGFuY2VPYmplY3QpLmFtb3VudCArXG4gICAgICAgICAgICAgICAgKG9yZGVyc1thc3NldC5nZXQoXCJpZFwiKV0gPyBvcmRlcnNbYXNzZXQuZ2V0KFwiaWRcIildIDogMCkgK1xuICAgICAgICAgICAgICAgIHRoaXMuX3N1bVZlc3RpbmdCYWxhbmNlcyh2ZXN0aW5nQmFsYW5jZXMpICtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdW1Db2xsYXRlcmFsQmFsYW5jZXMoY29sbGF0ZXJhbEJhbGFuY2VzKTtcblxuICAgICAgICAgICAgYmFsYW5jZXMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5OiBhc3NldC5nZXQoXCJzeW1ib2xcIiksXG4gICAgICAgICAgICAgICAgYWRkczoge1xuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlT2JqZWN0OiBiYWxhbmNlT2JqZWN0LFxuICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRBc3NldDogcHJlZmVycmVkQXNzZXQsXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0OiBhc3NldFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYXNzZXQ6IGFzc2V0LFxuICAgICAgICAgICAgICAgIGJhbGFuY2U6IGJhbGFuY2VPYmplY3QsXG4gICAgICAgICAgICAgICAgcHJpY2U6IFwiZHVtbXlcIixcbiAgICAgICAgICAgICAgICBpbk9yZGVyczogb3JkZXJzW2Fzc2V0LmdldChcImlkXCIpXSxcbiAgICAgICAgICAgICAgICBpblZlc3Rpbmc6IHZlc3RpbmdCYWxhbmNlcyxcbiAgICAgICAgICAgICAgICBpbkNvbGxhdGVyYWw6IGNvbGxhdGVyYWxCYWxhbmNlcyxcbiAgICAgICAgICAgICAgICBob3VyMjQ6IChcbiAgICAgICAgICAgICAgICAgICAgPE1hcmtldDI0SG91ckNoYW5nZUNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZT17YXNzZXQuZ2V0KFwiaWRcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICBxdW90ZT17cHJlZmVycmVkVW5pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldElkPXttYXJrZXRJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfc3ltYm9sc1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRvdGFsVmFsdWUsXG4gICAgICAgICAgICAgICAgcGVyY2VudDogaGFzQmFsYW5jZSA/IChcbiAgICAgICAgICAgICAgICAgICAgPEJhbGFuY2VDb21wb25lbnQgYmFsYW5jZT17YmFsYW5jZX0gYXNQZXJjZW50YWdlPXt0cnVlfSAvPlxuICAgICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgICAgIHBheW1lbnRzOiB0cmFuc2ZlckxpbmssXG4gICAgICAgICAgICAgICAgYnV5OiB0aGlzLl9yZW5kZXJCdXkoXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcInN5bWJvbFwiKSxcbiAgICAgICAgICAgICAgICAgICAgY2FuQnV5LFxuICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGVtcHR5Q2VsbCxcbiAgICAgICAgICAgICAgICAgICAgYmFsYW5jZU9iamVjdC5nZXQoXCJiYWxhbmNlXCIpXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBkZXBvc2l0OiB0aGlzLl9yZW5kZXJHYXRld2F5QWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICBcImRlcG9zaXRcIixcbiAgICAgICAgICAgICAgICAgICAgY2FuRGVwb3NpdCxcbiAgICAgICAgICAgICAgICAgICAgYXNzZXROYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbXB0eUNlbGxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHdpdGhkcmF3OiB0aGlzLl9yZW5kZXJHYXRld2F5QWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICBcIndpdGhkcmF3XCIsXG4gICAgICAgICAgICAgICAgICAgIGNhbldpdGhkcmF3LFxuICAgICAgICAgICAgICAgICAgICBhc3NldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGVtcHR5Q2VsbFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgdHJhZGU6IGRpcmVjdE1hcmtldExpbmssXG4gICAgICAgICAgICAgICAgYm9ycm93OlxuICAgICAgICAgICAgICAgICAgICBpc0JpdEFzc2V0ICYmIGJvcnJvd0xpbmsgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXCJ0b29sdGlwLmJvcnJvd1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0OiBpc0Fzc2V0Qml0QXNzZXQgPyBcImJpdFwiICsgc3ltYm9sIDogc3ltYm9sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2JvcnJvd0xpbmt9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICAgICkgOiBpc0JpdEFzc2V0ICYmICFib3Jyb3dMaW5rID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvb2x0aXAuYm9ycm93X2Rpc2FibGVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0OiBpc0Fzc2V0Qml0QXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiYml0XCIgKyBzeW1ib2xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHN5bWJvbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QW50SWNvbiB0eXBlPXtcInF1ZXN0aW9uLWNpcmNsZVwifSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlDZWxsXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgc2V0dGxlOlxuICAgICAgICAgICAgICAgICAgICBpc0JpdEFzc2V0ICYmIGJhY2tpbmdBc3NldCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKHNldHRsZVByaWNlVGl0bGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ6IGlzQXNzZXRCaXRBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJpdFwiICsgc3ltYm9sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHN5bWJvbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2luZ0Fzc2V0OiBpc0JhY2tpbmdCaXRBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJpdFwiICsgYmFja2luZ0Fzc2V0LmdldChcInN5bWJvbFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBiYWNraW5nQXNzZXQuZ2V0KFwic3ltYm9sXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0bGVEZWxheTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZm9yY2Vfc2V0dGxlbWVudF9kZWxheV9zZWMgLyAzNjAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2tcIj57c2V0dGxlTGlua308L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5Q2VsbFxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIGJ1cm46ICFpc0JpdEFzc2V0ID8gKFxuICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5SaWdodDogMH19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9idXJuQXNzZXQuYmluZCh0aGlzLCBhc3NldC5nZXQoXCJpZFwiKSl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJmaXJlXCIgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgICAgIGhpZGU6IChcbiAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y291bnRlcnBhcnQudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbmNsdWRlQXNzZXQgPyBcImhpZGVfYXNzZXRcIiA6IFwic2hvd19hc3NldFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpblJpZ2h0OiAwfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlQXNzZXQgPyBcIm9yZGVyLWNhbmNlbFwiIDogXCJhY3Rpb24tcGx1c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX2hpZGVBc3NldC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldF90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImNyb3NzLWNpcmNsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcInBsdXMtY2lyY2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiaWNvbnMuY3Jvc3NfY2lyY2xlLmhpZGVfYXNzZXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJpY29ucy5wbHVzX2NpcmNsZS5zaG93X2Fzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uLTE0cHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChvcHRpb25hbEFzc2V0cykge1xuICAgICAgICAgICAgb3B0aW9uYWxBc3NldHNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGFzc2V0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlzQXZhaWxhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYmFja2VkQ29pbnMuZ2V0KFwiT1BFTlwiLCBbXSkuZm9yRWFjaChjb2luID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2luICYmIGNvaW4uc3ltYm9sID09PSBhc3NldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQXZhaWxhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJvcHMuYnJpZGdlQ29pbnMuZ2V0KGFzc2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNBdmFpbGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBrZWVwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYmFsYW5jZXMuZm9yRWFjaChhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhLmtleSA9PT0gYXNzZXQpIGtlZXAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBrZWVwICYmIGlzQXZhaWxhYmxlO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZvckVhY2goYSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhc3NldCA9IENoYWluU3RvcmUuZ2V0QXNzZXQoYSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhc3NldCAmJiB0aGlzLnByb3BzLmlzTXlBY2NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmNsdWRlQXNzZXQgPSAhaGlkZGVuQXNzZXRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcImlkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aGlzQXNzZXROYW1lID0gYXNzZXQuZ2V0KFwic3ltYm9sXCIpLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbkRlcG9zaXQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICEhdGhpcy5wcm9wcy5iYWNrZWRDb2luc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KFwiT1BFTlwiLCBbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0+IGEuYmFja2luZ0NvaW5UeXBlID09PSB0aGlzQXNzZXROYW1lWzFdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIXRoaXMucHJvcHMuYmFja2VkQ29pbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldChcIlJVREVYXCIsIFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPT4gYS5iYWNraW5nQ29pbiA9PT0gdGhpc0Fzc2V0TmFtZVsxXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuZ2V0KFwic3ltYm9sXCIpID09IFwiQlRTXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbkJ1eSA9ICEhdGhpcy5wcm9wcy5icmlkZ2VDb2lucy5nZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuZ2V0KFwic3ltYm9sXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RDb3JlID0gYXNzZXQuZ2V0KFwiaWRcIikgIT09IFwiMS4zLjBcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB7bWFya2V0fSA9IGFzc2V0VXRpbHMucGFyc2VEZXNjcmlwdGlvbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXRJbihbXCJvcHRpb25zXCIsIFwiZGVzY3JpcHRpb25cIl0pXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmdldChcInN5bWJvbFwiKS5pbmRleE9mKFwiT1BFTi5cIikgIT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIW1hcmtldFxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldCA9IFwiVVNEXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJlZmVycmVkTWFya2V0ID0gbWFya2V0ID8gbWFya2V0IDogY29yZVN5bWJvbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpcmVjdE1hcmtldExpbmsgPSBub3RDb3JlID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvPXtgL21hcmtldC8ke2Fzc2V0LmdldChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3ltYm9sXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1fJHtwcmVmZXJyZWRNYXJrZXR9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gTWFya2V0c0FjdGlvbnMuc3dpdGNoTWFya2V0KCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInRyYWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiaWNvbnMudHJhZGUudHJhZGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5Q2VsbFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB7aXNCaXRBc3NldCwgYm9ycm93TGlua30gPSByZW5kZXJCb3Jyb3coXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbmNsdWRlQXNzZXQgJiYgdmlzaWJsZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIWluY2x1ZGVBc3NldCAmJiAhdmlzaWJsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBhc3NldC5nZXQoXCJzeW1ib2xcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0OiBhc3NldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogZW1wdHlDZWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZTogZW1wdHlDZWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VyMjQ6IGVtcHR5Q2VsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVtcHR5Q2VsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudDogZW1wdHlDZWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50czogZW1wdHlDZWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5CdXkgJiYgdGhpcy5wcm9wcy5pc015QWNjb3VudCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3Nob3dEZXBvc2l0V2l0aGRyYXcuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYnJpZGdlX21vZGFsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZG9sbGFyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cImljb25zLmRvbGxhci5idXlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImljb24tMTRweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eUNlbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcG9zaXQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5EZXBvc2l0ICYmIHRoaXMucHJvcHMuaXNNeUFjY291bnQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2N1cnNvcjogXCJwb2ludGVyXCJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRlcG9zaXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJpY29ucy5kZXBvc2l0LmRlcG9zaXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fc2hvd0RlcG9zaXRNb2RhbC5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQuZ2V0KFwic3ltYm9sXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlDZWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoZHJhdzogZW1wdHlDZWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFkZTogZGlyZWN0TWFya2V0TGluayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9ycm93OiBpc0JpdEFzc2V0ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9vbHRpcC5ib3Jyb3dcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Fzc2V0OiBhc3NldC5nZXQoXCJzeW1ib2xcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlubGluZS1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Ym9ycm93TGlua31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5Q2VsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0bGU6IGVtcHR5Q2VsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVybjogZW1wdHlDZWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b29sdGlwLlwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbmNsdWRlQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiaGlkZV9hc3NldFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcInNob3dfYXNzZXRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luUmlnaHQ6IDB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIm9yZGVyLWNhbmNlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImFjdGlvbi1wbHVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9oaWRlQXNzZXQuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5nZXQoXCJpZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVBc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiY3Jvc3MtY2lyY2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcInBsdXMtY2lyY2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlQXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImljb25zLmNyb3NzX2NpcmNsZS5oaWRlX2Fzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImljb25zLnBsdXNfY2lyY2xlLnNob3dfYXNzZXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaWNvbi0xNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYWxhbmNlcztcbiAgICB9XG5cbiAgICBfcmVuZGVyU2VuZE1vZGFsKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFNlbmRNb2RhbFxuICAgICAgICAgICAgICAgIGlkPVwic2VuZF9tb2RhbF9wb3J0Zm9saW9cIlxuICAgICAgICAgICAgICAgIHJlZkNhbGxiYWNrPXtlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHRoaXMuc2VuZF9tb2RhbCA9IGU7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBmcm9tX25hbWU9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpfVxuICAgICAgICAgICAgICAgIGFzc2V0X2lkPXt0aGlzLnN0YXRlLnNlbmRfYXNzZXQgfHwgXCIxLjMuMFwifVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBfcmVuZGVyQm9ycm93TW9kYWwoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICF0aGlzLnN0YXRlLmJvcnJvdyB8fFxuICAgICAgICAgICAgIXRoaXMuc3RhdGUuYm9ycm93LnF1b3RlQXNzZXQgfHxcbiAgICAgICAgICAgICF0aGlzLnN0YXRlLmJvcnJvdy5iYWNraW5nQXNzZXQgfHxcbiAgICAgICAgICAgICF0aGlzLnN0YXRlLmJvcnJvdy5hY2NvdW50IHx8XG4gICAgICAgICAgICAhdGhpcy5zdGF0ZS5pc0JvcnJvd01vZGFsVmlzaWJsZUJlZm9yZVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxCb3Jyb3dNb2RhbFxuICAgICAgICAgICAgICAgIHZpc2libGU9e3RoaXMuc3RhdGUuaXNCb3Jyb3dNb2RhbFZpc2libGV9XG4gICAgICAgICAgICAgICAgc2hvd01vZGFsPXt0aGlzLnNob3dCb3Jyb3dNb2RhbH1cbiAgICAgICAgICAgICAgICBoaWRlTW9kYWw9e3RoaXMuaGlkZUJvcnJvd01vZGFsfVxuICAgICAgICAgICAgICAgIGFjY291bnRPYmo9e3RoaXMuc3RhdGUuYm9ycm93ICYmIHRoaXMuc3RhdGUuYm9ycm93LmFjY291bnR9XG4gICAgICAgICAgICAgICAgcXVvdGVBc3NldE9iaj17XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYm9ycm93ICYmIHRoaXMuc3RhdGUuYm9ycm93LnF1b3RlQXNzZXRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYmFja2luZ0Fzc2V0T2JqPXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5ib3Jyb3cgJiYgdGhpcy5zdGF0ZS5ib3Jyb3cuYmFja2luZ0Fzc2V0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBfcmVuZGVyU2V0dGxlTW9kYWwoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U2V0dGxlTW9kYWxcbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLmlzU2V0dGxlTW9kYWxWaXNpYmxlfVxuICAgICAgICAgICAgICAgIGhpZGVNb2RhbD17dGhpcy5oaWRlU2V0dGxlTW9kYWx9XG4gICAgICAgICAgICAgICAgc2hvd01vZGFsPXt0aGlzLnNob3dTZXR0bGVNb2RhbH1cbiAgICAgICAgICAgICAgICBhc3NldD17dGhpcy5zdGF0ZS5zZXR0bGVBc3NldH1cbiAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnR9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgY3VycmVudEJyaWRnZXMgPVxuICAgICAgICAgICAgdGhpcy5wcm9wcy5icmlkZ2VDb2lucy5nZXQodGhpcy5zdGF0ZS5icmlkZ2VBc3NldCkgfHwgbnVsbDtcblxuICAgICAgICBjb25zdCBiYWxhbmNlUm93cyA9IHRoaXMuX3JlbmRlckJhbGFuY2VzKFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5iYWxhbmNlTGlzdCxcbiAgICAgICAgICAgIHRoaXMucHJvcHMub3B0aW9uYWxBc3NldHMsXG4gICAgICAgICAgICB0aGlzLnByb3BzLnZpc2libGVcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgYXRMZWFzdE9uZUhhcyA9IHt9O1xuICAgICAgICBiYWxhbmNlUm93cy5mb3JFYWNoKF9pdGVtID0+IHtcbiAgICAgICAgICAgIGlmICghIV9pdGVtLmJ1eSAmJiBfaXRlbS5idXkgIT09IFwiLVwiKSB7XG4gICAgICAgICAgICAgICAgYXRMZWFzdE9uZUhhcy5idXkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhX2l0ZW0uZGVwb3NpdCAmJiBfaXRlbS5kZXBvc2l0ICE9PSBcIi1cIikge1xuICAgICAgICAgICAgICAgIGlmIChfaXRlbS5rZXkgPT0gXCJCVFNcIiAmJiBHYXRld2F5U3RvcmUuYW55QWxsb3dlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0TGVhc3RPbmVIYXMuZGVwb3NpdE9ubHlCVFMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZW0ua2V5ID09IFwiQlRTXCIgJiYgIWF0TGVhc3RPbmVIYXMuZGVwb3NpdDtcbiAgICAgICAgICAgICAgICAgICAgYXRMZWFzdE9uZUhhcy5kZXBvc2l0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISFfaXRlbS53aXRoZHJhdyAmJiBfaXRlbS53aXRoZHJhdyAhPT0gXCItXCIpIHtcbiAgICAgICAgICAgICAgICBhdExlYXN0T25lSGFzLndpdGhkcmF3ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPEN1c3RvbVRhYmxlXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRhYmxlIGRhc2hib2FyZC10YWJsZSB0YWJsZS1ob3ZlclwiXG4gICAgICAgICAgICAgICAgICAgIHJvd3M9e2JhbGFuY2VSb3dzfVxuICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e3RoaXMuZ2V0SGVhZGVyKGF0TGVhc3RPbmVIYXMpfVxuICAgICAgICAgICAgICAgICAgICBsYWJlbD1cInV0aWxpdHkudG90YWxfeF9hc3NldHNcIlxuICAgICAgICAgICAgICAgICAgICBleHRyYVJvdz17dGhpcy5wcm9wcy5leHRyYVJvd31cbiAgICAgICAgICAgICAgICAgICAgdmlld1NldHRpbmdzS2V5PVwicG9ydGZvbGlvQ29sdW1uc1wiXG4gICAgICAgICAgICAgICAgICAgIGFsbG93Q3VzdG9taXphdGlvbj17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlU29ydE9yZGVyPXt0aGlzLnRvZ2dsZVNvcnRPcmRlcn1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLl9yZW5kZXJTZW5kTW9kYWwoKX1cbiAgICAgICAgICAgICAgICAgICAgeyh0aGlzLnN0YXRlLmlzU2V0dGxlTW9kYWxWaXNpYmxlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzU2V0dGxlTW9kYWxWaXNpYmxlQmVmb3JlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyU2V0dGxlTW9kYWwoKX1cbiAgICAgICAgICAgICAgICAgICAge3RoaXMuX3JlbmRlckJvcnJvd01vZGFsKCl9XG5cbiAgICAgICAgICAgICAgICAgICAgeyh0aGlzLnN0YXRlLmlzV2l0aGRyYXdNb2RhbFZpc2libGUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNXaXRoZHJhd01vZGFsVmlzaWJsZUJlZm9yZSkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFdpdGhkcmF3TW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlTW9kYWw9e3RoaXMuaGlkZVdpdGhkcmF3TW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZT17dGhpcy5zdGF0ZS5pc1dpdGhkcmF3TW9kYWxWaXNpYmxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlZENvaW5zPXt0aGlzLnByb3BzLmJhY2tlZENvaW5zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxTeW1ib2w9e3RoaXMuc3RhdGUud2l0aGRyYXdBc3NldH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgICAgey8qIERlcG9zaXQgTW9kYWwgKi99XG4gICAgICAgICAgICAgICAgICAgIHsodGhpcy5zdGF0ZS5pc0RlcG9zaXRNb2RhbFZpc2libGUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNEZXBvc2l0TW9kYWxWaXNpYmxlQmVmb3JlKSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8RGVwb3NpdE1vZGFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZT17dGhpcy5zdGF0ZS5pc0RlcG9zaXRNb2RhbFZpc2libGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd01vZGFsPXt0aGlzLnNob3dEZXBvc2l0TW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsPXt0aGlzLmhpZGVEZXBvc2l0TW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUuZGVwb3NpdEFzc2V0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJuYW1lXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlZENvaW5zPXt0aGlzLnByb3BzLmJhY2tlZENvaW5zfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgICAgICB7LyogQnJpZGdlIG1vZGFsICovfVxuICAgICAgICAgICAgICAgICAgICB7KHRoaXMuc3RhdGUuaXNCcmlkZ2VNb2RhbFZpc2libGUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNCcmlkZ2VNb2RhbFZpc2libGVCZWZvcmUpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTaW1wbGVEZXBvc2l0QmxvY2t0cmFkZXNCcmlkZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLmlzQnJpZGdlTW9kYWxWaXNpYmxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dNb2RhbD17dGhpcy5zaG93QnJpZGdlTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsPXt0aGlzLmhpZGVCcmlkZ2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb249XCJkZXBvc2l0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwibmFtZVwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kZXI9e3RoaXMucHJvcHMuYWNjb3VudC5nZXQoXCJpZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldD17dGhpcy5zdGF0ZS5icmlkZ2VBc3NldH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlcz17dGhpcy5wcm9wcy5iYWxhbmNlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmlkZ2VzPXtjdXJyZW50QnJpZGdlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0Rvd249e3RoaXMucHJvcHMuZ2F0ZXdheURvd24uZ2V0KFwiVFJBREVcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICAgIHsvKiBCdXJuIE1vZGFsICovfVxuICAgICAgICAgICAgICAgICAgICB7KHRoaXMuc3RhdGUuaXNCdXJuTW9kYWxWaXNpYmxlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzQnVybk1vZGFsVmlzaWJsZUJlZm9yZSkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFJlc2VydmVBc3NldE1vZGFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZT17dGhpcy5zdGF0ZS5pc0J1cm5Nb2RhbFZpc2libGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsPXt0aGlzLmhpZGVCdXJuTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e3RoaXMuc3RhdGUucmVzZXJ2ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50PXt0aGlzLnByb3BzLmFjY291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBaZkFwaS5wdWJsaXNoKFwicmVzZXJ2ZV9hc3NldFwiLCBcImNsb3NlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvQ3VzdG9tVGFibGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbkFjY291bnRQb3J0Zm9saW9MaXN0ID0gY29ubmVjdChcbiAgICBBY2NvdW50UG9ydGZvbGlvTGlzdCxcbiAgICB7XG4gICAgICAgIGxpc3RlblRvKCkge1xuICAgICAgICAgICAgcmV0dXJuIFtTZXR0aW5nc1N0b3JlLCBHYXRld2F5U3RvcmUsIE1hcmtldHNTdG9yZV07XG4gICAgICAgIH0sXG4gICAgICAgIGdldFByb3BzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzZXR0aW5nczogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnNldHRpbmdzLFxuICAgICAgICAgICAgICAgIHZpZXdTZXR0aW5nczogU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnZpZXdTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICBiYWNrZWRDb2luczogR2F0ZXdheVN0b3JlLmdldFN0YXRlKCkuYmFja2VkQ29pbnMsXG4gICAgICAgICAgICAgICAgYnJpZGdlQ29pbnM6IEdhdGV3YXlTdG9yZS5nZXRTdGF0ZSgpLmJyaWRnZUNvaW5zLFxuICAgICAgICAgICAgICAgIGdhdGV3YXlEb3duOiBHYXRld2F5U3RvcmUuZ2V0U3RhdGUoKS5kb3duLFxuICAgICAgICAgICAgICAgIGFsbE1hcmtldFN0YXRzOiBNYXJrZXRzU3RvcmUuZ2V0U3RhdGUoKS5hbGxNYXJrZXRTdGF0c1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbik7XG5cbkFjY291bnRQb3J0Zm9saW9MaXN0ID0gZGVib3VuY2VSZW5kZXIoQWNjb3VudFBvcnRmb2xpb0xpc3QsIDUwLCB7XG4gICAgbGVhZGluZzogZmFsc2Vcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBBY2NvdW50UG9ydGZvbGlvTGlzdDtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHtGb3JtYXR0ZWROdW1iZXJ9IGZyb20gXCJyZWFjdC1pbnRsXCI7XHJcbmltcG9ydCBBc3NldFdyYXBwZXIgZnJvbSBcIi4vQXNzZXRXcmFwcGVyXCI7XHJcbmltcG9ydCB7Y29ubmVjdH0gZnJvbSBcImFsdC1yZWFjdFwiO1xyXG5pbXBvcnQgTWFya2V0c1N0b3JlIGZyb20gXCJzdG9yZXMvTWFya2V0c1N0b3JlXCI7XHJcbmltcG9ydCB7TWFya2V0U3RhdHN9IGZyb20gXCIuLi9VdGlsaXR5L01hcmtldFByaWNlXCI7XHJcblxyXG4vKipcclxuICogIERpc3BsYXlzIGNoYW5nZSBpbiBtYXJrZXQgdmFsdWUgZm9yIGFuIGFzc2V0XHJcbiAqXHJcbiAqICBFeHBlY3RzIHRocmVlIHByb3BlcnRpZXNcclxuICogIC0ncXVvdGUnIHdoaWNoIHNob3VsZCBiZSBhIGFzc2V0IGlkXHJcbiAqICAtJ2Jhc2UnIHdoaWNoIGlzIHRoZSBhc3NldCBpZCBvZiB0aGUgb3JpZ2luYWwgYXNzZXQgYW1vdW50XHJcbiAqL1xyXG5cclxuY2xhc3MgTWFya2V0Q2hhbmdlQ29tcG9uZW50IGV4dGVuZHMgTWFya2V0U3RhdHMge1xyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBmdWxsUHJlY2lzaW9uOiBmYWxzZSxcclxuICAgICAgICBub0RlY2ltYWxzOiBmYWxzZSxcclxuICAgICAgICBoaWRlX2Fzc2V0OiBmYWxzZVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobnApIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5wKSB8fCBucC5iYXNlICE9PSB0aGlzLnByb3BzLmJhc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VmFsdWUoKSB7XHJcbiAgICAgICAgbGV0IHttYXJrZXRTdGF0c30gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIHJldHVybiBtYXJrZXRTdGF0cyAmJiBtYXJrZXRTdGF0cy5jaGFuZ2UgPyBtYXJrZXRTdGF0cy5jaGFuZ2UgOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgbWFya2V0Q2hhbmdlVmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7XHJcbiAgICAgICAgbGV0IGRheUNoYW5nZUNsYXNzID1cclxuICAgICAgICAgICAgcGFyc2VGbG9hdChtYXJrZXRDaGFuZ2VWYWx1ZSkgPT09IDBcclxuICAgICAgICAgICAgICAgID8gXCJcIlxyXG4gICAgICAgICAgICAgICAgOiBwYXJzZUZsb2F0KG1hcmtldENoYW5nZVZhbHVlKSA8IDBcclxuICAgICAgICAgICAgICAgICAgICA/IFwiY2hhbmdlLWRvd25cIlxyXG4gICAgICAgICAgICAgICAgICAgIDogXCJjaGFuZ2UtdXBcIjtcclxuICAgICAgICBsZXQgbWFya2V0Q2hhbmdlRm9ybWF0dGVkVmFsdWUgPSAoXHJcbiAgICAgICAgICAgIDxGb3JtYXR0ZWROdW1iZXJcclxuICAgICAgICAgICAgICAgIHN0eWxlPVwiZGVjaW1hbFwiXHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17bWFya2V0Q2hhbmdlVmFsdWV9XHJcbiAgICAgICAgICAgICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM9ezJ9XHJcbiAgICAgICAgICAgICAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM9ezJ9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gdGhpcyBpcyB0cmVhdGluZyBhIHN5bXB0b24gd2hlbiBNYXJrZXRTdG9yZSBkb2VzIG5vdCBwcm92aWRlIGEgcHJvcGVyIHZhbHVlISAjMjUxMVxyXG4gICAgICAgIGlmICghaXNOYU4ocGFyc2VGbG9hdChtYXJrZXRDaGFuZ2VWYWx1ZSkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e1widmFsdWUgXCIgKyBkYXlDaGFuZ2VDbGFzc30+XHJcbiAgICAgICAgICAgICAgICAgICAge21hcmtldENoYW5nZUZvcm1hdHRlZFZhbHVlfSVcclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gPHNwYW4gY2xhc3NOYW1lPXtcInZhbHVlIFwiICsgZGF5Q2hhbmdlQ2xhc3N9Pi08L3NwYW4+O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5NYXJrZXRDaGFuZ2VDb21wb25lbnQgPSBBc3NldFdyYXBwZXIoTWFya2V0Q2hhbmdlQ29tcG9uZW50LCB7XHJcbiAgICBwcm9wTmFtZXM6IFtcInF1b3RlXCIsIFwiYmFzZVwiXSxcclxuICAgIGRlZmF1bHRQcm9wczoge3F1b3RlOiBcIjEuMy4wXCJ9XHJcbn0pO1xyXG5cclxuY2xhc3MgTWFya2V0MjRIb3VyQ2hhbmdlQ29tcG9uZW50IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge3JlZkNhbGxiYWNrLCAuLi5vdGhlcnN9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgcmV0dXJuIDxNYXJrZXRDaGFuZ2VDb21wb25lbnQgey4uLm90aGVyc30gcmVmPXtyZWZDYWxsYmFja30gLz47XHJcbiAgICB9XHJcbn1cclxuXHJcbk1hcmtldDI0SG91ckNoYW5nZUNvbXBvbmVudCA9IGNvbm5lY3QoXHJcbiAgICBNYXJrZXQyNEhvdXJDaGFuZ2VDb21wb25lbnQsXHJcbiAgICB7XHJcbiAgICAgICAgbGlzdGVuVG8oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbTWFya2V0c1N0b3JlXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldFByb3BzKHByb3BzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBtYXJrZXRTdGF0czogTWFya2V0c1N0b3JlLmdldFN0YXRlKCkuYWxsTWFya2V0U3RhdHMuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgIHByb3BzLm1hcmtldElkXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgYWxsTWFya2V0U3RhdHM6IE1hcmtldHNTdG9yZS5nZXRTdGF0ZSgpLmFsbE1hcmtldFN0YXRzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4pO1xyXG5cclxuZXhwb3J0IHtNYXJrZXQyNEhvdXJDaGFuZ2VDb21wb25lbnR9O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB1dGlscyBmcm9tIFwiY29tbW9uL3V0aWxzXCI7XHJcbmltcG9ydCBBbHRDb250YWluZXIgZnJvbSBcImFsdC1jb250YWluZXJcIjtcclxuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcInN0b3Jlcy9TZXR0aW5nc1N0b3JlXCI7XHJcbmltcG9ydCBGb3JtYXR0ZWRQcmljZSBmcm9tIFwiLi9Gb3JtYXR0ZWRQcmljZVwiO1xyXG5pbXBvcnQgTWFya2V0U3RhdHNDaGVjayBmcm9tIFwiLi9NYXJrZXRTdGF0c0NoZWNrXCI7XHJcbmltcG9ydCBNYXJrZXRzU3RvcmUgZnJvbSBcInN0b3Jlcy9NYXJrZXRzU3RvcmVcIjtcclxuaW1wb3J0IE1hcmtldFV0aWxzIGZyb20gXCJjb21tb24vbWFya2V0X3V0aWxzXCI7XHJcbmltcG9ydCBBc3NldFdyYXBwZXIgZnJvbSBcIi4vQXNzZXRXcmFwcGVyXCI7XHJcbmltcG9ydCB7Q2hhaW5TdG9yZX0gZnJvbSBcImJpdHNoYXJlc2pzXCI7XHJcblxyXG5jb25zdCBnZXRGaW5hbFByaWNlID0gZnVuY3Rpb24oXHJcbiAgICBmcm9tQXNzZXQsXHJcbiAgICB0b0Fzc2V0LFxyXG4gICAgY29yZUFzc2V0ID0gbnVsbCxcclxuICAgIGFsbE1hcmtldFN0YXRzID0gbnVsbCxcclxuICAgIHJlYWwgPSBmYWxzZVxyXG4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIE1hcmtldFV0aWxzLmdldEZpbmFsUHJpY2UoXHJcbiAgICAgICAgICAgIGNvcmVBc3NldCA/IGNvcmVBc3NldCA6IENoYWluU3RvcmUuZ2V0QXNzZXQoXCIxLjMuMFwiKSxcclxuICAgICAgICAgICAgZnJvbUFzc2V0LFxyXG4gICAgICAgICAgICB0b0Fzc2V0ID8gdG9Bc3NldCA6IENoYWluU3RvcmUuZ2V0QXNzZXQoXCIxLjMuMFwiKSxcclxuICAgICAgICAgICAgYWxsTWFya2V0U3RhdHNcclxuICAgICAgICAgICAgICAgID8gYWxsTWFya2V0U3RhdHNcclxuICAgICAgICAgICAgICAgIDogTWFya2V0c1N0b3JlLmdldFN0YXRlKCkuYWxsTWFya2V0U3RhdHMsXHJcbiAgICAgICAgICAgIHJlYWxcclxuICAgICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH1cclxufTtcclxuXHJcbmNsYXNzIEVxdWl2YWxlbnRQcmljZSBleHRlbmRzIE1hcmtldFN0YXRzQ2hlY2sge1xyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBmb3JjZURpcmVjdGlvbjogdHJ1ZVxyXG4gICAgfTtcclxuXHJcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobnAsIG5leHRTdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHN1cGVyLnNob3VsZENvbXBvbmVudFVwZGF0ZShucCkgfHxcclxuICAgICAgICAgICAgbnAuYmFzZV9hbW91bnQgIT09IHRoaXMucHJvcHMuYmFzZV9hbW91bnQgfHxcclxuICAgICAgICAgICAgbnAucXVvdGVfYW1vdW50ICE9PSB0aGlzLnByb3BzLnF1b3RlX2Ftb3VudCB8fFxyXG4gICAgICAgICAgICBucC5kZWNpbWFscyAhPT0gdGhpcy5wcm9wcy5kZWNpbWFscyB8fFxyXG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobnAucHVsc2F0ZSwgdGhpcy5wcm9wcy5wdWxzYXRlKSB8fFxyXG4gICAgICAgICAgICAhdXRpbHMuYXJlX2VxdWFsX3NoYWxsb3cobmV4dFN0YXRlLCB0aGlzLnN0YXRlKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgY29yZUFzc2V0LFxyXG4gICAgICAgICAgICBmcm9tQXNzZXQsXHJcbiAgICAgICAgICAgIHRvQXNzZXQsXHJcbiAgICAgICAgICAgIGFsbE1hcmtldFN0YXRzLFxyXG4gICAgICAgICAgICBmb3JjZURpcmVjdGlvbixcclxuICAgICAgICAgICAgLi4ub3RoZXJzXHJcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpbmFsUHJpY2UgPSBnZXRGaW5hbFByaWNlKFxyXG4gICAgICAgICAgICB0b0Fzc2V0LFxyXG4gICAgICAgICAgICBmcm9tQXNzZXQsXHJcbiAgICAgICAgICAgIGNvcmVBc3NldCxcclxuICAgICAgICAgICAgYWxsTWFya2V0U3RhdHNcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAoZmluYWxQcmljZSA9PT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gPHNwYW4+MS4wMDwvc3Bhbj47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWZpbmFsUHJpY2UpIHJldHVybiA8c3Bhbj4tLTwvc3Bhbj47XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRQcmljZVxyXG4gICAgICAgICAgICAgICAgZm9yY2VfZGlyZWN0aW9uPXtmb3JjZURpcmVjdGlvbiA/IHRvQXNzZXQuZ2V0KFwic3ltYm9sXCIpIDogZmFsc2V9XHJcbiAgICAgICAgICAgICAgICBiYXNlX2Ftb3VudD17ZmluYWxQcmljZS5iYXNlLmFtb3VudH1cclxuICAgICAgICAgICAgICAgIGJhc2VfYXNzZXQ9e2ZpbmFsUHJpY2UuYmFzZS5hc3NldF9pZH1cclxuICAgICAgICAgICAgICAgIHF1b3RlX2Ftb3VudD17ZmluYWxQcmljZS5xdW90ZS5hbW91bnR9XHJcbiAgICAgICAgICAgICAgICBxdW90ZV9hc3NldD17ZmluYWxQcmljZS5xdW90ZS5hc3NldF9pZH1cclxuICAgICAgICAgICAgICAgIHsuLi5vdGhlcnN9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuRXF1aXZhbGVudFByaWNlID0gQXNzZXRXcmFwcGVyKEVxdWl2YWxlbnRQcmljZSwge1xyXG4gICAgcHJvcE5hbWVzOiBbXCJ0b0Fzc2V0XCIsIFwiZnJvbUFzc2V0XCIsIFwiY29yZUFzc2V0XCJdLFxyXG4gICAgZGVmYXVsdFByb3BzOiB7XHJcbiAgICAgICAgdG9Bc3NldDogXCIxLjMuMFwiLFxyXG4gICAgICAgIGNvcmVBc3NldDogXCIxLjMuMFwiXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXF1aXZhbGVudFByaWNlV3JhcHBlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPEFsdENvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgc3RvcmVzPXtbU2V0dGluZ3NTdG9yZSwgTWFya2V0c1N0b3JlXX1cclxuICAgICAgICAgICAgICAgIGluamVjdD17e1xyXG4gICAgICAgICAgICAgICAgICAgIHRvQXNzZXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudG9Bc3NldCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpLnNldHRpbmdzLmdldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVuaXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjEuMy4wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFsbE1hcmtldFN0YXRzOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXJrZXRzU3RvcmUuZ2V0U3RhdGUoKS5hbGxNYXJrZXRTdGF0cztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8RXF1aXZhbGVudFByaWNlIHsuLi50aGlzLnByb3BzfSByZWY9e3RoaXMucHJvcHMucmVmQ2FsbGJhY2t9IC8+XHJcbiAgICAgICAgICAgIDwvQWx0Q29udGFpbmVyPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7Z2V0RmluYWxQcmljZX07XHJcbiIsImltcG9ydCBSZWFjdCwge0NvbXBvbmVudH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuXHJcbmltcG9ydCBJY29uIGZyb20gXCIuL0ljb25cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFB1bHNlSWNvbiBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgICAgIGR1cmF0aW9uOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXHJcbiAgICAgICAgb2ZmSWNvbjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAgICAgIG9uSWNvbjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAgICAgIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcclxuICAgIH07XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgY29uc3Qge2R1cmF0aW9ufSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMudGljaywgZHVyYXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgICAgIHRoaXMuaW50ZXJ2YWwgJiYgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcclxuICAgIH1cclxuXHJcbiAgICB0aWNrID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHtvbkljb24sIG9mZkljb259ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCB7bmFtZSA9IG9uSWNvbn0gPSB0aGlzLnN0YXRlIHx8IHt9O1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBuYW1lOiBuYW1lID09PSBvbkljb24gPyBvZmZJY29uIDogb25JY29uXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB7b25JY29uLCByZXN0fSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgY29uc3Qge25hbWUgPSBvbkljb259ID0gdGhpcy5zdGF0ZSB8fCB7fTtcclxuICAgICAgICBjb25zdCB7dGl0bGV9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICByZXR1cm4gPEljb24gbmFtZT17bmFtZX0gdGl0bGU9e3RpdGxlfSB7Li4ucmVzdH0gLz47XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgQmFsYW5jZUNvbXBvbmVudCBmcm9tIFwiLi4vVXRpbGl0eS9CYWxhbmNlQ29tcG9uZW50XCI7XHJcbmltcG9ydCBjb3VudGVycGFydCBmcm9tIFwiY291bnRlcnBhcnRcIjtcclxuaW1wb3J0IEFtb3VudFNlbGVjdG9yIGZyb20gXCIuLi9VdGlsaXR5L0Ftb3VudFNlbGVjdG9yU3R5bGVHdWlkZVwiO1xyXG5pbXBvcnQgQXNzZXRBY3Rpb25zIGZyb20gXCJhY3Rpb25zL0Fzc2V0QWN0aW9uc1wiO1xyXG5pbXBvcnQge0NoYWluU3RvcmV9IGZyb20gXCJiaXRzaGFyZXNqc1wiO1xyXG5pbXBvcnQge0Fzc2V0fSBmcm9tIFwiY29tbW9uL01hcmtldENsYXNzZXNcIjtcclxuaW1wb3J0IEFzc2V0V3JhcHBlciBmcm9tIFwiLi4vVXRpbGl0eS9Bc3NldFdyYXBwZXJcIjtcclxuaW1wb3J0IHtNb2RhbCwgQnV0dG9uLCBGb3JtLCBBbGVydH0gZnJvbSBcImJpdHNoYXJlcy11aS1zdHlsZS1ndWlkZVwiO1xyXG5cclxuY2xhc3MgUmVzZXJ2ZUFzc2V0TW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuZ2V0SW5pdGlhbFN0YXRlKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5vblN1Ym1pdCA9IHRoaXMub25TdWJtaXQuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5wKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBucC5hc3NldCAmJlxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFzc2V0ICYmXHJcbiAgICAgICAgICAgIG5wLmFzc2V0LmdldChcImlkXCIpICE9PSB0aGlzLnByb3BzLmFzc2V0LmdldChcImlkXCIpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy5nZXRJbml0aWFsU3RhdGUobnApKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5pdGlhbFN0YXRlKHByb3BzKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYW1vdW50OiAwLFxyXG4gICAgICAgICAgICBhbW91bnRBc3NldDogbmV3IEFzc2V0KHtcclxuICAgICAgICAgICAgICAgIGFtb3VudDogMCxcclxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBwcm9wcy5hc3NldC5nZXQoXCJpZFwiKSxcclxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogcHJvcHMuYXNzZXQuZ2V0KFwicHJlY2lzaW9uXCIpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBvbkFtb3VudENoYW5nZWQoe2Ftb3VudCwgYXNzZXR9KSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5hbW91bnRBc3NldC5zZXRBbW91bnQoe3JlYWw6IGFtb3VudH0pO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2Ftb3VudCwgYXNzZXR9KTtcclxuICAgIH1cclxuXHJcbiAgICBvblN1Ym1pdCgpIHtcclxuICAgICAgICBBc3NldEFjdGlvbnMucmVzZXJ2ZUFzc2V0KFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmFtb3VudEFzc2V0LmdldEFtb3VudCgpLFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFzc2V0LmdldChcImlkXCIpLFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiaWRcIilcclxuICAgICAgICApLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmFtb3VudEFzc2V0LnNldEFtb3VudCh7c2F0czogMH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHthbW91bnQ6IDB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnByb3BzLmhpZGVNb2RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgYXNzZXRJZCA9IHRoaXMucHJvcHMuYXNzZXQuZ2V0KFwiaWRcIik7XHJcblxyXG4gICAgICAgIGxldCBjdXJyZW50QmFsYW5jZSA9XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWNjb3VudCAmJlxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjY291bnQuZ2V0KFwiYmFsYW5jZXNcIiwgW10pLnNpemUgJiZcclxuICAgICAgICAgICAgISF0aGlzLnByb3BzLmFjY291bnQuZ2V0SW4oW1wiYmFsYW5jZXNcIiwgYXNzZXRJZF0pXHJcbiAgICAgICAgICAgICAgICA/IENoYWluU3RvcmUuZ2V0T2JqZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY2NvdW50LmdldEluKFtcImJhbGFuY2VzXCIsIGFzc2V0SWRdKVxyXG4gICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgaWYgKCFjdXJyZW50QmFsYW5jZSkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxNb2RhbFxyXG4gICAgICAgICAgICAgICAgdmlzaWJsZT17dGhpcy5wcm9wcy52aXNpYmxlfVxyXG4gICAgICAgICAgICAgICAgb25DYW5jZWw9e3RoaXMucHJvcHMuaGlkZU1vZGFsfVxyXG4gICAgICAgICAgICAgICAgdGl0bGU9e2NvdW50ZXJwYXJ0LnRyYW5zbGF0ZShcIm1vZGFsLnJlc2VydmUudGl0bGVcIil9XHJcbiAgICAgICAgICAgICAgICBmb290ZXI9e1tcclxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJwcmltYXJ5XCIga2V5PVwic3VibWl0XCIgb25DbGljaz17dGhpcy5vblN1Ym1pdH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJtb2RhbC5yZXNlcnZlLnN1Ym1pdFwiKX1cclxuICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj4sXHJcbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXt0aGlzLnByb3BzLmhpZGVNb2RhbH0ga2V5PVwiY2FuY2VsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudGVycGFydC50cmFuc2xhdGUoXCJjYW5jZWxcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICBdfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8QWxlcnRcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPXtjb3VudGVycGFydC50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibW9kYWwucmVzZXJ2ZS53YXJuaW5nX21lc3NhZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cIndhcm5pbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5Cb3R0b206IFwiMmVtXCJ9fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFtb3VudFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwibW9kYWwucmVzZXJ2ZS5hbW91bnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e3RoaXMuc3RhdGUuYW1vdW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkFtb3VudENoYW5nZWQuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ9e2Fzc2V0SWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cz17W2Fzc2V0SWRdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X2JhbGFuY2U9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5hbW91bnRBc3NldC5zZXRBbW91bnQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F0czogY3VycmVudEJhbGFuY2UuZ2V0KFwiYmFsYW5jZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHRoaXMuc3RhdGUuYW1vdW50QXNzZXQuZ2V0QW1vdW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZWFsOiB0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCYWxhbmNlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2U9e3RoaXMucHJvcHMuYWNjb3VudC5nZXRJbihbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJhbGFuY2VzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldElkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9Gb3JtPlxyXG4gICAgICAgICAgICA8L01vZGFsPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcblJlc2VydmVBc3NldE1vZGFsID0gQXNzZXRXcmFwcGVyKFJlc2VydmVBc3NldE1vZGFsLCB7XHJcbiAgICBwcm9wTmFtZXM6IFtcImFzc2V0XCJdXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVzZXJ2ZUFzc2V0TW9kYWw7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gXCJjb3VudGVycGFydFwiO1xyXG5pbXBvcnQge0NoZWNrYm94LCBJY29uLCBTZWxlY3R9IGZyb20gXCJiaXRzaGFyZXMtdWktc3R5bGUtZ3VpZGVcIjtcclxuaW1wb3J0IFNldHRpbmdzQWN0aW9ucyBmcm9tIFwiYWN0aW9ucy9TZXR0aW5nc0FjdGlvbnNcIjtcclxuaW1wb3J0IFBhZ2luYXRlZExpc3QgZnJvbSBcIi4vUGFnaW5hdGVkTGlzdFwiO1xyXG5pbXBvcnQgXCIuL3BhZ2luYXRlZC1saXN0LnNjc3NcIjtcclxuaW1wb3J0IHtjb25uZWN0fSBmcm9tIFwiYWx0LXJlYWN0XCI7XHJcbmltcG9ydCBTZXR0aW5nc1N0b3JlIGZyb20gXCIuLi8uLi9zdG9yZXMvU2V0dGluZ3NTdG9yZVwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcblxyXG5jb25zdCB7T3B0aW9ufSA9IFNlbGVjdDtcclxuY2xhc3MgQ3VzdG9tVGFibGUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcclxuICAgICAgICB2aWV3U2V0dGluZ3NLZXk6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICAgICAgdmlld1NldHRpbmdzOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gICAgICAgIGFsbG93Q3VzdG9taXphdGlvbjogUHJvcFR5cGVzLmJvb2xcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICB2aWV3U2V0dGluZ3NLZXk6IG51bGwsXHJcbiAgICAgICAgdmlld1NldHRpbmdzOiBudWxsLFxyXG4gICAgICAgIGFsbG93Q3VzdG9taXphdGlvbjogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGNvbHVtblNlbGVjdG9yOiBcImRlZmF1bHRcIixcclxuICAgICAgICAgICAgaXNEcm9wRG93bk9wZW46IGZhbHNlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5fY29sdW1uU2VsZWN0b3JDaGFuZ2UgPSB0aGlzLl9jb2x1bW5TZWxlY3RvckNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaXNDb2x1bW5DaGVja2VkID0gdGhpcy5pc0NvbHVtbkNoZWNrZWQuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0Vmlld1NldHRpbmdzS2V5KCkge1xyXG4gICAgICAgIC8vIGFkZCBhIHByZWZpeCBmb3IgYWxsIGNvbHVtbiBjdXN0b21pemF0aW9uc1xyXG4gICAgICAgIHJldHVybiBcImNvbHVtbnNfXCIgKyB0aGlzLnByb3BzLnZpZXdTZXR0aW5nc0tleTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0RW5hYmxlZENvbHVtbnMoKSB7XHJcbiAgICAgICAgbGV0IHNldHRpbmdzID0gdGhpcy5wcm9wcy52aWV3U2V0dGluZ3MuZ2V0KHRoaXMuX2dldFZpZXdTZXR0aW5nc0tleSgpKTtcclxuICAgICAgICByZXR1cm4gc2V0dGluZ3MgfHwge307XHJcbiAgICB9XHJcblxyXG4gICAgX2dldEN1c3RvbWl6YWJsZUNvbHVtbnMoaGVhZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlci5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGRlZmF1bHQgaXMgdGhhdCBjdXN0b21pemF0aW9uIGlzIGFsbG93ZWRcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzQ29sdW1uQ3VzdG9taXphYmxlKGl0ZW0pLmN1c3RvbWl6YWJsZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBtb2RIZWFkZXIoaGVhZGVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLmFsbG93Q3VzdG9taXphdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGVhZGVyLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgLy8gcGVyIGRlZmF1bHQgc2hvdyBhbGwsIG9ubHkgaGlkZSBpZiBzcGVjaWZpY2FsbHkgc2V0IHRvIGZhbHNlXHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAhdGhpcy5faXNDb2x1bW5DdXN0b21pemFibGUoaXRlbSkgfHwgdGhpcy5pc0NvbHVtbkNoZWNrZWQoaXRlbSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfY29sdW1uQ2hlY2tib3hDaGFuZ2UoaXRlbSkge1xyXG4gICAgICAgIC8vIGNvcHkgYW5kIG1vZGlmeSBmb3Igc3RhdGVcclxuICAgICAgICBsZXQgZW5hYmxlZENvbHVtbnMgPSB0aGlzLl9nZXRFbmFibGVkQ29sdW1ucygpO1xyXG4gICAgICAgIGVuYWJsZWRDb2x1bW5zW2l0ZW1dID0gIXRoaXMuaXNDb2x1bW5DaGVja2VkKGl0ZW0pO1xyXG5cclxuICAgICAgICAvLyByZWZsZWN0IGNoYW5nZSBpbiBTdG9yZVxyXG4gICAgICAgIFNldHRpbmdzQWN0aW9ucy5jaGFuZ2VWaWV3U2V0dGluZyh7XHJcbiAgICAgICAgICAgIFt0aGlzLl9nZXRWaWV3U2V0dGluZ3NLZXkoKV06IGVuYWJsZWRDb2x1bW5zXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2lzQ29sdW1uQ3VzdG9taXphYmxlKGNvbHVtbikge1xyXG4gICAgICAgIC8vIGZpbHRlciBvdXQgZW1wdHkgY29sdW1uc1xyXG4gICAgICAgIGlmICghY29sdW1uLmRhdGFJbmRleCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgY3VzdG9taXphYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY3VzdG9taXphYmxlID1cclxuICAgICAgICAgICAgY29sdW1uLmN1c3RvbWl6YWJsZSA9PSB1bmRlZmluZWQgPyB0cnVlIDogY29sdW1uLmN1c3RvbWl6YWJsZTtcclxuXHJcbiAgICAgICAgLy8gY3VzdG9taXphYmxlIGNhbiBiZSBib29sIG9yIG9iamVjdFxyXG4gICAgICAgIGxldCBkZWZhdWx0VmlzaWJpbGl0eSA9XHJcbiAgICAgICAgICAgIGNvbHVtbi5jdXN0b21pemFibGUgPT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgIHR5cGVvZiBjb2x1bW4uY3VzdG9taXphYmxlID09IFwiYm9vbGVhblwiXHJcbiAgICAgICAgICAgICAgICA/IHRydWVcclxuICAgICAgICAgICAgICAgIDogY29sdW1uLmN1c3RvbWl6YWJsZS5kZWZhdWx0O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjdXN0b21pemFibGU6IGN1c3RvbWl6YWJsZSxcclxuICAgICAgICAgICAgZGVmYXVsdDogZGVmYXVsdFZpc2liaWxpdHlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ29sdW1uQ2hlY2tlZChjb2x1bW4pIHtcclxuICAgICAgICBpZiAodHlwZW9mIGNvbHVtbiA9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIGNvbHVtbiA9IHtkYXRhSW5kZXg6IGNvbHVtbiwgY3VzdG9taXphYmxlOiB0cnVlfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldEVuYWJsZWRDb2x1bW5zKClbY29sdW1uLmRhdGFJbmRleF0gPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgID8gdGhpcy5faXNDb2x1bW5DdXN0b21pemFibGUoY29sdW1uKS5kZWZhdWx0XHJcbiAgICAgICAgICAgIDogdGhpcy5fZ2V0RW5hYmxlZENvbHVtbnMoKVtjb2x1bW4uZGF0YUluZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVuZGVyRW5hYmxlZENvbHVtbnNTZWxlY3RvcigpIHtcclxuICAgICAgICBsZXQge2hlYWRlcn0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImN1c3RvbWl6YWJsZS1jb2x1bW4tLXNlbGVjdG9yXCI+XHJcbiAgICAgICAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXt0aGlzLnN0YXRlLmNvbHVtblNlbGVjdG9yfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmNvbHVtblNlbGVjdG9yfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9jb2x1bW5TZWxlY3RvckNoYW5nZX1cclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bkNsYXNzTmFtZT1cImN1c3RvbWl6YWJsZS1jb2x1bW4tLXNlbGVjdG9yLS1kcm9wZG93blwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25Ecm9wZG93blZpc2libGVDaGFuZ2U9e29wZW4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRHJvcERvd25PcGVuOiBvcGVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPE9wdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjdXN0b21pemFibGUtY29sdW1uLS1zZWxlY3Rvci0tb3B0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9XCJkZWZhdWx0XCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHshdGhpcy5zdGF0ZS5pc0Ryb3BEb3duT3BlbiAmJiA8SWNvbiB0eXBlPVwic2V0dGluZ1wiIC8+fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc0Ryb3BEb3duT3BlbiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcnBhcnQudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY3VzdG9taXphYmxlX3RhYmxlLmN1c3RvbWl6ZV90aGVfY29sdW1uc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvT3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLl9nZXRDdXN0b21pemFibGVDb2x1bW5zKGhlYWRlcikubWFwKChpdGVtLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxPcHRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2tleX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjdXN0b21pemFibGUtY29sdW1uLS1zZWxlY3Rvci0tb3B0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17aXRlbS5kYXRhSW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5pc0NvbHVtbkNoZWNrZWQoaXRlbSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9jb2x1bW5DaGVja2JveENoYW5nZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZGF0YUluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXRlbS50aXRsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0NoZWNrYm94PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9PcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICA8L1NlbGVjdD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBfY29sdW1uU2VsZWN0b3JDaGFuZ2UoKSB7XHJcbiAgICAgICAgLy8gTmV2ZXIgbGV0IGFuIG9wdGlvbiwgb3RoZXIgdGhhbiBkZWZhdWx0IGJlIHNlbGVjdGVkXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGNvbHVtblNlbGVjdG9yOiBcImRlZmF1bHRcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQge2hlYWRlciwgLi4ub3RoZXJ9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgLy8gbW9kaWZ5IHRoZSBoZWFkZXIgYWNjb3JkaW5nIHRvIHdoaWNoIGNvbHVtbnMgdGhlIHVzZXIgd291bGQgbGlrZSB0byBzZWVcclxuICAgICAgICBoZWFkZXIgPSB0aGlzLm1vZEhlYWRlcihoZWFkZXIpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMuYWxsb3dDdXN0b21pemF0aW9uICYmIChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cG9zaXRpb246IFwicmVsYXRpdmVcIn19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5fcmVuZGVyRW5hYmxlZENvbHVtbnNTZWxlY3RvcigpfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIDxQYWdpbmF0ZWRMaXN0IHsuLi5vdGhlcn0gaGVhZGVyPXtoZWFkZXJ9IC8+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgKEN1c3RvbVRhYmxlID0gY29ubmVjdChcclxuICAgIEN1c3RvbVRhYmxlLFxyXG4gICAge1xyXG4gICAgICAgIGxpc3RlblRvKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW1NldHRpbmdzU3RvcmVdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0UHJvcHMobmV4dFByb3BzKSB7XHJcbiAgICAgICAgICAgIGlmICghbmV4dFByb3BzLnZpZXdTZXR0aW5ncykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICB2aWV3U2V0dGluZ3M6IFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKS52aWV3U2V0dGluZ3NcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbikpO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBS0E7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFkQTtBQUNBO0FBZ0JBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFyREE7QUE0REE7Ozs7QUF6SUE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBeUlBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFKQTtBQUNBO0FBTUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBaEJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDakxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFhQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBcEJBO0FBQ0E7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUE3QkE7QUE4QkE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQURBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBSUE7QUFFQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFOQTtBQUZBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBUEE7QUFGQTtBQWlCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBT0E7QUFQQTtBQURBO0FBckRBO0FBa0VBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFMQTtBQXhCQTtBQURBO0FBa0NBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFuQ0E7QUFEQTtBQXdDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFPQTtBQVBBO0FBREE7QUF6Q0E7QUFQQTtBQURBO0FBZ0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQWpFQTtBQURBO0FBMkVBOzs7O0FBNVVBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQURBO0FBVUE7QUFEQTtBQUNBO0FBQ0E7QUFvVUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFmQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3pXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUtBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFGQTtBQVFBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFSQTtBQVVBO0FBVkE7QUFZQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBUkE7QUFEQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFEQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBR0E7QUFKQTtBQUtBO0FBTEE7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVJBO0FBNUJBO0FBREE7QUFOQTtBQXNEQTs7OztBQWpKQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBQ0E7QUFDQTtBQWlKQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7OztBQVVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBTUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQVVBO0FBQ0E7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBRkE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUZBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQU5BO0FBRkE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBTkE7QUFGQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFYQTtBQW5FQTtBQW1GQTs7OztBQTFLQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBREE7QUFDQTtBQXFLQTtBQUNBO0FBQ0E7OztBQVdBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUhBO0FBSUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFTQTtBQURBO0FBUkE7QUFBQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQVJBO0FBVUE7QUF0Q0E7QUF3Q0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQU9BO0FBQ0E7OztBQUVBO0FBQ0E7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzQkE7QUFDQTtBQTZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhDQTtBQUNBO0FBa0NBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakZBO0FBQ0E7QUFtRkE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQXJCQTtBQUNBO0FBc0JBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFBQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFhQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBS0E7QUFOQTtBQVNBO0FBQ0E7QUFFQTtBQUtBO0FBTkE7QUFTQTtBQUNBO0FBRUE7QUFLQTtBQU5BO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBQUE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBUEE7QUFEQTtBQURBO0FBbUJBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBQUE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBUEE7QUFEQTtBQURBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBUkE7QUFDQTtBQWdCQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUZBO0FBV0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFMQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFGQTtBQWNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFBQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFUQTtBQURBO0FBSkE7QUEwQkE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUhBO0FBQUE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUdBO0FBSkE7QUFIQTtBQVhBO0FBREE7QUFKQTtBQWtDQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBUEE7QUFEQTtBQVhBO0FBREE7QUE2QkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBcEJBO0FBREE7QUF4Q0E7QUFvRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFRQTtBQURBO0FBVEE7QUEyQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBR0E7QUFIQTtBQTdCQTtBQURBO0FBckVBO0FBMkdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQU5BO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUF0UEE7QUFEQTtBQStQQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQURBO0FBWUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBTkE7QUFEQTtBQWNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFYQTtBQWdCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFQQTtBQURBO0FBZUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQU5BO0FBREE7QUF4QkE7QUF4REE7QUFEQTtBQW1HQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQVZBO0FBREE7QUFrQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBSkE7QUFEQTtBQVFBO0FBVEE7QUFEQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUpBO0FBREE7QUFRQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQU9BO0FBQ0E7QUFHQTtBQUpBO0FBUkE7QUFrQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBTEE7QUFIQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUVBO0FBRkE7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUxBO0FBSEE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBTEE7QUFIQTtBQVJBO0FBdUJBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUE5REE7QUFuQkE7QUF3RkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBckdBO0FBREE7QUEzWUE7QUFQQTtBQURBO0FBREE7QUFrZ0JBOzs7O0FBL25DQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFGQTtBQUNBO0FBQ0E7QUEwbkNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzMwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBOzs7QUFTQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFSQTtBQVdBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQVFBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBS0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFSQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFJQTtBQUlBO0FBSUE7QUFDQTtBQUlBO0FBSUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBbkVBO0FBc0VBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQW9CQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUtBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFPQTtBQVVBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFHQTtBQWlCQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzQkE7QUFDQTtBQTZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBN0JBO0FBQ0E7QUErQkE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFNQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE1Q0E7QUFDQTtBQThDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUxBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBSUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUxBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7OztBQUVBO0FBQ0E7QUFHQTs7O0FBRUE7QUFDQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBYUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFBQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFQQTtBQURBO0FBREE7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBQUE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBUEE7QUFEQTtBQURBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBTEE7QUFXQTtBQVhBO0FBaUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBSkE7QUFNQTtBQU5BO0FBbEJBO0FBQ0E7QUE0QkE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQURBO0FBY0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQW5CQTtBQURBO0FBMkJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFuQkE7QUFEQTtBQTJCQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQXBCQTtBQURBO0FBMkJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQXBCQTtBQURBO0FBOUZBO0FBMEhBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSUE7QUFJQTtBQWJBO0FBSEE7QUFEQTtBQTNIQTtBQWlKQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQWFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBN0xBO0FBSkE7QUF5TUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBUUE7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBckNBO0FBd0NBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBeENBO0FBSkE7QUFvREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQU5BO0FBREE7QUFjQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFQQTtBQURBO0FBZUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFiQTtBQWlCQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBUEE7QUFEQTtBQWVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFOQTtBQURBO0FBeEJBO0FBeUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBdkdBO0FBSkE7QUFtSEE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQWZBO0FBb0JBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBckJBO0FBSkE7QUFrQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFGQTtBQVZBO0FBSkE7QUFzQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQU9BO0FBQ0E7QUFHQTtBQUpBO0FBUkE7QUFrQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBTEE7QUFIQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSUE7QUFDQTtBQUdBO0FBQ0E7QUFkQTtBQURBO0FBa0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUFBO0FBTEE7QUFBQTtBQVFBO0FBQ0E7QUFDQTtBQUdBO0FBTEE7QUFUQTtBQURBO0FBc0JBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFoRUE7QUFuQkE7QUEwRkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBN0dBO0FBSkE7QUF3SEE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFWQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFuQkE7QUE3aUJBO0FBUEE7QUFEQTtBQXFsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQXRsQkE7QUFpbUJBOzs7O0FBemhEQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBREE7QUFNQTtBQURBO0FBQ0E7QUFxaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFDQTtBQU9BOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBT0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQW5DQTtBQURBO0FBYkE7QUF5REE7Ozs7QUEvRUE7QUFDQTtBQWlGQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUpBO0FBQ0E7QUFNQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzFxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7Ozs7Ozs7Ozs7O0FBWUE7QUFDQTtBQUNBO0FBS0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQS9CQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBUUE7QUFDQTtBQUZBO0FBQ0E7QUFDQTtBQXlCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQVhBO0FBSEE7QUFnQkE7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFDQTtBQVFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSkE7QUFEQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFUQTtBQUpBO0FBcUJBO0FBeEJBO0FBWEE7QUFzQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFmQTtBQURBO0FBdkNBO0FBaUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUpBO0FBREE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBVEE7QUFKQTtBQXFCQTtBQXhCQTtBQVhBO0FBc0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFEQTtBQXZDQTtBQTJEQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQVVBO0FBQ0E7QUFEQTtBQVZBO0FBZUE7QUFsQkE7QUFKQTtBQXlCQTtBQUdBO0FBN0JBO0FBREE7QUFrQ0E7Ozs7QUFoUEE7QUFDQTtBQWtQQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBTUE7QUFYQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2pRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBSEE7QUFNQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTEE7QUFEQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFSQTtBQVBBO0FBdUJBO0FBMUJBO0FBWkE7QUF5Q0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQURBO0FBMUNBO0FBNkRBOzs7O0FBdEdBO0FBQ0E7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTs7O0FBY0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQVdBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRkE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBUUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQXJCQTtBQU5BO0FBb0NBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQVBBO0FBWUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFRQTtBQVJBO0FBU0E7QUE3QkE7QUErQkEsb0ZBR0E7QUFsQ0E7QUErQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFFQTtBQUZBO0FBQUE7QUFKQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFNQTtBQU5BO0FBSkE7QUFBQTtBQWdCQTtBQUFBO0FBQUE7QUFFQTtBQUZBO0FBQUE7QUFqQkE7QUF5QkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU1BO0FBTkE7QUFKQTtBQUFBO0FBZ0JBO0FBQUE7QUFBQTtBQUVBO0FBRkE7QUFBQTtBQWpCQTtBQXlCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFOQTtBQUpBO0FBQUE7QUFnQkE7QUFBQTtBQUFBO0FBRUE7QUFGQTtBQUFBO0FBakJBO0FBeUJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUVBO0FBRkE7QUFKQTtBQXhGQTtBQURBO0FBTEE7QUE0R0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBSkE7QUE3R0E7QUF0RkE7QUFEQTtBQURBO0FBREE7QUF1TkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFNQTtBQVpBO0FBSkE7QUFxQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFjQTtBQUdBO0FBdkJBO0FBSkE7QUF0QkE7QUErREE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFmQTtBQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBZkE7QUFvQkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSEE7QUEzQ0E7QUFEQTtBQWhFQTtBQURBO0FBREE7QUFEQTtBQXhOQTtBQURBO0FBd1ZBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUpBO0FBaFdBO0FBUEE7QUFEQTtBQURBO0FBREE7QUF5WEE7Ozs7QUE5Y0E7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUxBO0FBYUE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQW1jQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBSkE7QUFEQTtBQWNBOzs7O0FBNUJBO0FBQ0E7QUFEQTtBQUVBO0FBREE7QUFDQTtBQUNBO0FBNEJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSEE7QUFRQTtBQUNBOzs7QUFjQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFFQTtBQUFBO0FBQ0E7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTs7Ozs7O0FBQ0E7QUFDQTs7QUFEQTtBQUNBO0FBSUE7Ozs7O0FBQ0E7QUFDQTs7QUFJQTs7QUFDQTtBQUNBOzs7O0FBREE7OztBQURBO0FBQ0E7OztBQUlBO0FBQ0E7O0FBREE7QUFDQTtBQU1BOzs7OztBQUNBO0FBQ0E7OztBQUlBO0FBQ0E7O0FBREE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBakJBO0FBbUJBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7Ozs7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQU1BO0FBWEE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBVkE7QUFhQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVBBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFGQTtBQUFBO0FBUUE7QUFiQTtBQWdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFGQTtBQUFBO0FBVUE7QUFmQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFGQTtBQUFBO0FBVUE7QUFmQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBZkE7QUFKQTtBQXVCQTs7OztBQXpRQTtBQUNBO0FBREE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBWEE7QUFtQkE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUNBO0FBd1BBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQVRBO0FBQ0E7QUFZQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDMVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBWEE7QUFZQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQU9BO0FBT0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUF0QkE7QUF3QkE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBWEE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBTUE7QUFuQkE7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBWEE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFIQTtBQVlBO0FBbEJBO0FBcUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUhBO0FBWUE7QUFsQkE7QUFxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFIQTtBQU1BO0FBWkE7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBUkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQU9BO0FBWkE7QUFlQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUVBO0FBQ0E7QUFGQTtBQVJBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFqQkE7QUEyQkE7Ozs7QUFqWEE7QUFDQTtBQW1YQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFLQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXRCQTtBQXdCQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFXQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQU9BO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFPQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBYUE7OztBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFjQTtBQUVBO0FBTUE7QUFFQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBRUE7QUFNQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBWEE7QUFoQkE7QUFSQTtBQXdDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFWQTtBQUhBO0FBREE7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBSUE7QUFHQTtBQXJCQTtBQXVCQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUE3Q0E7QUFtREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBVkE7QUFIQTtBQURBO0FBa0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUlBO0FBR0E7QUFyQkE7QUF1QkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBN0NBO0FBbURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUxBO0FBZUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBSUE7QUFJQTtBQTNCQTtBQURBO0FBN0pBO0FBOExBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFIQTtBQS9MQTtBQURBO0FBREE7QUFnTkE7Ozs7QUE3Z0JBO0FBQ0E7QUErZ0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2ppQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBU0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQVBBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFRQTtBQVJBO0FBREE7QUFuQkE7QUFpQ0E7Ozs7QUF2RkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUF3RkE7OztBQVlBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFWQTtBQVdBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBTUE7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWJBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBVkE7QUFmQTtBQTZCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVJBO0FBREE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQWZBO0FBREE7QUE5QkE7QUF1REE7Ozs7QUF4TEE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUFDQTtBQXdMQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFLQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFXQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFKQTtBQU1BO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQVRBO0FBSkE7QUF5QkE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFEQTtBQTNCQTtBQUpBO0FBMENBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSkE7QUFRQTtBQUVBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBTEE7QUFqRUE7QUFEQTtBQVJBO0FBcUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQXZGQTtBQStGQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBOzs7O0FBMUxBO0FBQ0E7QUFEQTtBQUVBO0FBREE7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBT0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBUEE7QUFEQTtBQWVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFQQTtBQWpCQTtBQU5BO0FBUEE7QUFMQTtBQThEQTs7OztBQXRJQTtBQUNBO0FBd0lBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQURBO0FBR0E7Ozs7Ozs7QUN4SkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVlBO0FBQ0E7OztBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBTEE7QUFPQTtBQVFBO0FBT0E7QUFDQTs7O0FBRUE7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBZEE7QUF3QkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVFBO0FBUkE7QUFEQTtBQUxBO0FBa0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFRQTtBQVJBO0FBREE7QUFMQTtBQWtCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBV0E7QUFYQTtBQURBO0FBTEE7QUFyQ0E7QUFEQTtBQThEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBckdBO0FBOEdBOzs7O0FBN01BO0FBQ0E7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBNkJBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBSkE7QUFVQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQU9BOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQVRBO0FBV0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU9BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZkE7QUFpQkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBbkJBO0FBMkJBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQVhBO0FBcENBO0FBb0RBO0FBdERBO0FBd0RBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFaQTtBQWVBO0FBcEJBO0FBMURBO0FBbUZBOzs7O0FBelBBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBREE7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQUNBO0FBQ0E7QUEwT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcFFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7OztBQVlBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBUkE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFEQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBYUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQURBO0FBSkE7QUF4QkE7QUFEQTtBQW9DQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFuREE7QUFEQTtBQTBEQTs7OztBQTlHQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFDQTtBQThHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzdIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFTQTs7O0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQUhBO0FBY0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQU1BO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQU1BO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBVEE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFOQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQU1BO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBVEE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBUEE7QUE5Q0E7QUFEQTtBQTZEQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBUEE7QUFEQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUxBO0FBREE7QUFaQTtBQURBO0FBUEE7QUFKQTtBQXVDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBTkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFNQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBVEE7QUFGQTtBQW9CQTtBQU1BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBdkNBO0FBckRBO0FBREE7QUFwRUE7QUFEQTtBQURBO0FBREE7QUFzTEE7Ozs7QUExWUE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBMFlBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQTs7Ozs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O0FBZUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBVEE7QUFXQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFnQkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDblFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBTUE7OztBQVVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBRkE7QUFhQTtBQXRCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFvQkE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBWkE7QUFjQTtBQWRBO0FBVEE7QUEyQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUFBO0FBTUE7QUFBQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBVEE7QUFBQTtBQUFBO0FBUkE7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFQQTtBQXhEQTtBQW9FQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVJBO0FBeEVBO0FBcUZBOzs7O0FBL01BO0FBQ0E7QUFEQTtBQU9BO0FBREE7QUFDQTtBQUNBO0FBME1BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzlOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFTQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBREE7QUFQQTtBQWtCQTs7OztBQS9CQTtBQUNBO0FBREE7QUFFQTtBQURBO0FBREE7QUFNQTtBQURBO0FBQ0E7QUEyQkE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQU9BO0FBQ0E7QUFDQTtBQVZBO0FBWUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQVFBO0FBQ0E7QUFYQTtBQWNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBREE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFSQTtBQURBO0FBYUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWZBO0FBa0JBOzs7O0FBakZBO0FBQ0E7QUFtRkE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBUkE7QUFDQTtBQVdBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFIQTtBQU9BO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUtBO0FBQ0E7QUFaQTtBQURBO0FBZ0JBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBakJBO0FBREE7QUEzQkE7QUFEQTtBQW9EQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFUQTtBQURBO0FBYUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFsQkE7QUFEQTtBQWpCQTtBQURBO0FBMkNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQUpBO0FBREE7QUFpQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBSkE7QUFEQTtBQXZIQTtBQURBO0FBREE7QUFEQTtBQStJQTs7OztBQXBOQTtBQUNBO0FBc05BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFXQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUF1T0E7QUFDQTtBQUNBO0FBdk9BO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUExQkE7QUFDQTtBQWtDQTtBQUNBO0FBQ0E7QUFDQTtBQTlDQTtBQStDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBVUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcEJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBMEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBZ0JBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFNQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFNQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQU9BO0FBbkJBO0FBQ0E7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBUUE7QUFFQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBU0E7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBREE7QUFJQTtBQUNBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWNBO0FBQ0E7QUFDQTtBQWpCQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBUkE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBUkE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQXJDQTtBQUpBO0FBNkNBO0FBM0RBO0FBZkE7QUFEQTtBQWdGQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFLQTtBQXBCQTtBQXNCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFQQTtBQXRCQTtBQXNDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUF4Q0E7QUFrREE7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBUEE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQVBBO0FBVEE7QUFvQkE7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQWJBO0FBTkE7QUE2QkE7Ozs7QUF0eEJBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFRQTtBQURBO0FBQ0E7QUFneEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvMEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFLQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXNCQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUxBO0FBREE7QUFQQTtBQWlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWxCQTtBQWdDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBakNBO0FBd0NBOzs7O0FBeEVBO0FBQ0E7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBQ0E7QUFLQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBYkE7QUFlQTtBQUNBO0FBQ0E7OztBQWtCQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQVRBO0FBVUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBTEE7QUFRQTtBQWRBO0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBTkE7QUFTQTtBQWxCQTtBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBTkE7QUFlQTtBQXBCQTtBQXVCQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTkE7QUFjQTtBQXBCQTtBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFOQTtBQVNBO0FBakJBO0FBb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBTkE7QUFZQTtBQVpBO0FBZUE7QUE1QkE7QUErQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBTkE7QUFZQTtBQUVBO0FBS0E7QUFOQTtBQWNBO0FBQ0E7QUFGQTtBQTFCQTtBQWlDQTtBQXRDQTtBQXlDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFGQTtBQWNBOzs7O0FBbFVBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBREE7QUFjQTtBQUNBO0FBRkE7QUFDQTtBQUNBO0FBc1RBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBc0RBO0FBQ0E7QUFDQTtBQXREQTtBQUZBO0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7OztBQUVBO0FBQ0E7QUFNQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBT0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQVpBO0FBcUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFIQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQVBBO0FBV0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQU5BO0FBakJBO0FBNUJBO0FBckJBO0FBZ0ZBOzs7O0FBOUlBO0FBQ0E7QUFnSkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBS0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXVCQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUxBO0FBREE7QUFQQTtBQWlCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQURBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQWpDQTtBQXdDQTs7OztBQXpFQTtBQUNBO0FBREE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUZBO0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBS0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFPQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBZEE7QUF1QkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUhBO0FBbEJBO0FBdkJBO0FBdURBOzs7O0FBMUdBO0FBQ0E7QUE0R0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNySEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUZBO0FBVUE7QUFDQTs7O0FBQ0E7QUFDQTtBQVFBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBd0JBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFEQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQVFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUExQkE7QUFSQTtBQXlDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFGQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU5BO0FBTEE7QUFtQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFQQTtBQUxBO0FBeEVBO0FBOEZBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkNBO0FBL0ZBO0FBc0lBOzs7O0FBak1BO0FBQ0E7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFRQTtBQVJBO0FBZUE7QUEzQkE7QUE4QkE7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFsQkE7QUFxQkE7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUZBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBT0E7QUFDQTtBQUNBO0FBVkE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBWkE7QUFUQTtBQTRCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFIQTtBQTdCQTtBQXVDQTtBQTNEQTtBQThEQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQXZCQTtBQTJCQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFOQTtBQWNBO0FBNUJBO0FBZ0NBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFJQTtBQXJCQTtBQTBCQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFMQTtBQU9BO0FBUEE7QUFlQTtBQTFCQTtBQStCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFBQTtBQU1BO0FBTkE7QUFBQTtBQUxBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQWJBO0FBc0JBO0FBM0NBO0FBOENBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBQUE7QUFNQTtBQU5BO0FBQUE7QUFMQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFiQTtBQXNCQTtBQS9DQTtBQWtEQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFhQTtBQUVBO0FBS0E7QUFOQTtBQWNBO0FBQ0E7QUFGQTtBQTNCQTtBQWtDQTtBQTlDQTtBQWdEQTtBQUFBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBSUE7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUE3QkE7QUFvQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFiQTtBQUFBO0FBQUE7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQVFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVVBOzs7O0FBeHJCQTtBQUNBO0FBMHJCQTs7Ozs7Ozs7QUMxc0JBO0FBQUE7QUFBQTtBQUVBO0FBRkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBbENBO0FBQ0E7QUFvQ0E7QUF2Q0E7QUF3Q0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQVVBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFJQTtBQUNBO0FBSUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUxBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoQkE7QUFDQTtBQW1CQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoQkE7QUFDQTtBQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFJQTtBQUxBO0FBY0E7QUFkQTtBQWdCQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBREE7QUFNQTtBQVRBO0FBa0JBO0FBbEJBO0FBcUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUlBO0FBTEE7QUFjQTtBQWRBO0FBN0NBO0FBUEE7QUF1RUE7QUFTQTtBQURBO0FBbkZBO0FBeUZBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSkE7QUFEQTtBQUpBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBTEE7QUFIQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBTkE7QUFEQTtBQURBO0FBWkE7QUFzQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBSkE7QUFpQkE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBUUE7QUFHQTtBQUFBO0FBQ0E7QUFHQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBSUE7QUFOQTtBQVVBO0FBaEJBO0FBTkE7QUEwQkE7QUFJQTtBQUNBO0FBQ0E7QUFIQTtBQVNBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQVRBO0FBRkE7QUFjQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBR0E7QUFHQTtBQVpBO0FBRkE7QUFvQkE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUdBO0FBR0E7QUFaQTtBQUZBO0FBb0JBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFKQTtBQVFBO0FBUkE7QUFQQTtBQWpFQTtBQXBEQTtBQXpLQTtBQURBO0FBREE7QUFEQTtBQTZUQTs7OztBQTVvQkE7QUFDQTtBQThvQkE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTs7OztBQUhBO0FBQ0E7QUFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDeHFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFHQTs7O0FBS0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSEE7QUFPQTtBQUNBOzs7QUFtRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7OztBQTFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUE5RUE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBQ0E7QUF3SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBV0E7QUFiQTtBQUNBO0FBZUE7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBTEE7QUFTQTtBQVRBO0FBREE7QUFhQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFNQTtBQVRBO0FBYUE7QUFiQTtBQURBO0FBaUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFKQTtBQURBO0FBYUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBTUE7QUFOQTtBQURBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBTUE7QUFOQTtBQURBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQXJGQTtBQURBO0FBMkZBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWhHQTtBQW1HQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzdTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFTQTs7O0FBV0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQVhBO0FBTEE7QUFrQkE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWFBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBUUE7QUFDQTtBQUNBO0FBRkE7QUFkQTtBQUNBO0FBdUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBT0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFDQTtBQVFBO0FBQ0E7QUFHQTtBQUNBO0FBSUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU5BO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBZUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQVZBO0FBRkE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFMQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQVRBO0FBTEE7QUFtQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFMQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFMQTtBQURBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBREE7QUFKQTtBQVdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFYQTtBQWdCQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBREE7QUFOQTtBQWxCQTtBQW9DQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFJQTtBQUxBO0FBUUE7QUFaQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQWRBO0FBdUJBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQVpBO0FBMUJBO0FBdktBO0FBbU5BOzs7O0FBN2JBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFRQTtBQURBO0FBQ0E7QUF1YkE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoZUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7O0FBS0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBME5BO0FBQ0E7QUFDQTtBQXpOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBUEE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwQkE7QUFxQkE7QUFDQTs7O0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUlBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUZBO0FBUUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQVFBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFLQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBTUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqQkE7QUFvQkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBUkE7QUFUQTtBQURBO0FBQ0E7QUF1QkE7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQTdFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBbUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQURBO0FBREE7QUFhQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFMQTtBQVVBO0FBR0E7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTEE7QUFVQTtBQUdBO0FBQUE7QUFDQTtBQVVBO0FBWEE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWhCQTtBQXFCQTtBQUNBO0FBQUE7QUFDQTtBQU1BO0FBUEE7QUFTQTtBQVRBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFNQTtBQVBBO0FBU0E7QUFUQTtBQTlEQTtBQXJCQTtBQWlHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVZBO0FBREE7QUFnQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXJCQTtBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUF4QkE7QUFtQ0E7Ozs7QUF2ZkE7QUFDQTtBQURBO0FBRUE7QUFEQTtBQUNBO0FBQ0E7QUF1ZkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2poQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUtBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFGQTtBQVFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFPQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQU9BO0FBbEJBO0FBSkE7QUEwQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTEE7QUFnQkE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBSkE7QUFNQTtBQUNBO0FBR0E7QUFKQTtBQVBBO0FBcUJBLGtEQUNBO0FBekNBO0FBM0JBO0FBSkE7QUFEQTtBQVJBO0FBd0dBOzs7O0FBM1FBO0FBQ0E7QUFEQTtBQUVBO0FBREE7QUFDQTtBQTJRQTtBQUNBO0FBQ0E7OztBQU1BO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUhBO0FBSUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBU0E7QUFHQTtBQUNBO0FBQ0E7QUFKQTtBQU9BOzs7O0FBOURBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBOERBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7O0FBTkE7QUFDQTtBQURBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3JYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBY0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFlQTtBQUNBO0FBQ0E7QUFmQTtBQUZBO0FBR0E7QUFDQTs7O0FBY0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFSQTtBQW9CQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQVdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQXBCQTtBQVJBO0FBQ0E7QUF5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUZBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUpBO0FBREE7QUFGQTtBQVlBO0FBQUE7QUFBQTtBQUFBO0FBRUE7Ozs7QUE1SkE7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBSEE7QUFMQTtBQVlBO0FBREE7QUFDQTtBQWtKQTtBQUNBO0FBQ0E7OztBQVlBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQWdDQTtBQUFBO0FBQ0E7QUE5QkE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBUkE7QUFTQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBOzs7QUFJQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBREE7QUFDQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBSUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUFBO0FBdkJBO0FBK0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFoQ0E7QUFtQ0E7Ozs7QUFuSkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBOElBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFhQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBU0E7Ozs7QUE5QkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVFBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFDQTtBQXdCQTs7Ozs7Ozs7QUMvV0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExS0E7QUFDQTtBQTRLQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU5BO0FBU0E7QUFiQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBZUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBREE7QUFDQTtBQVFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQURBO0FBQ0E7QUFRQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFDQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFEQTtBQUNBO0FBU0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFEQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFUQTtBQUNBO0FBZ0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFOQTtBQURBO0FBREE7QUFDQTtBQVlBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQVNBO0FBQUE7QUFYQTtBQUNBO0FBZUE7QUFBQTtBQUFBO0FBQ0E7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQVNBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUhBO0FBVUE7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFaQTtBQWNBO0FBR0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFNQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQU1BO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFEQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBTUE7QUFDQTtBQVJBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBSkE7QUFNQTtBQU5BO0FBU0E7QUFmQTtBQWtCQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFRQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUxBO0FBVUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFOQTtBQVNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFSQTtBQVdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBTEE7QUFVQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSUE7QUFQQTtBQVVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUpBO0FBVUE7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUdBO0FBRUE7QUFEQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFaQTtBQUpBO0FBMEJBO0FBQ0E7QUE5QkE7QUFrQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBREE7QUFVQTtBQUNBO0FBdkJBO0FBMEJBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBa0JBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFRQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBR0E7QUFDQTtBQWhCQTtBQW9CQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBUUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBTUE7QUFDQTtBQVJBO0FBREE7QUFZQTtBQUNBO0FBekJBO0FBNEJBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFEQTtBQURBO0FBSEE7QUFDQTtBQVFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQURBO0FBREE7QUFIQTtBQUNBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBUEE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQURBO0FBVUE7QUE3QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQThCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQURBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQU5BO0FBREE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFOQTtBQVhBO0FBb0JBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQURBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBVEE7QUF6QkE7QUE2Q0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBTkE7QUFRQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFKQTtBQTFEQTtBQW1FQTs7OztBQWx1QkE7QUFDQTtBQW91QkE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFUQTtBQUNBO0FBWUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDNXdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQU9BO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUE1QkE7QUFvQ0E7Ozs7QUE3Q0E7QUFDQTtBQStDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFIQTtBQU9BO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUhBO0FBZUE7Ozs7QUFsRkE7QUFDQTtBQW9GQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3pGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFKQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBREE7QUFMQTtBQVFBO0FBQ0E7OztBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFXQTs7O0FBRUE7QUFDQTtBQVFBOzs7QUFFQTtBQUNBO0FBQ0E7Ozs7QUF0Q0E7QUFDQTtBQXdDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUZBO0FBZUE7Ozs7QUFsQ0E7QUFDQTtBQW9DQTtBQUNBO0FBREE7QUFDQTtBQUdBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTs7OztBQUhBO0FBQ0E7QUFLQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFSQTtBQUNBOzs7Ozs7Ozs7QUNwR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFWQTtBQVlBO0FBQ0E7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQU5BO0FBVUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQVJBO0FBRkE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTtBQUZBO0FBZEE7QUEwQkE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFIQTtBQVVBO0FBYkE7QUFnQkE7QUFDQTtBQURBO0FBOURBO0FBQ0E7QUFrRUE7QUFFQTtBQUNBO0FBRkE7QUFLQTs7OztBQTVMQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFGQTtBQUNBO0FBQ0E7QUF1TEE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUxBO0FBREE7QUFVQTtBQWRBO0FBZ0JBO0FBakJBO0FBb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBV0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFNQTs7OztBQXRCQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFGQTtBQUNBO0FBQ0E7QUFpQkE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBRkE7QUFXQTtBQUVBO0FBRkE7QUFYQTtBQWlCQTs7OztBQXBCQTtBQUNBO0FBc0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzVSQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQWdNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQU9BO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbEhBO0FBQ0E7QUFoTUE7QUFvWEE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVJBO0FBREE7QUFtQkE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBREE7QUFDQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBL2FBO0FBaWJBO0FBQ0E7QUFTQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBREE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0ZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcEJBO0FBQ0E7QUF5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyREE7QUFzREE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQWNBO0FBTUE7QUFFQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUhBO0FBU0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBdUhBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7O0FBeUdBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBQUE7QUFZQTtBQWhCQTtBQW1CQTtBQTNCQTtBQThCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFmQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFRQTtBQW5CQTtBQXNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFRQTtBQW5CQTtBQXNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFRQTtBQW5CQTtBQXNCQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVFBO0FBckJBO0FBd0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVJBO0FBV0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFWQTtBQURBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFTQTtBQWxDQTtBQXFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVRBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFOQTtBQVNBO0FBQ0E7QUFDQTtBQUdBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFaQTtBQWVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBTEE7QUFPQTtBQVBBO0FBREE7QUFjQTtBQUdBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUExQkE7QUE2QkE7QUFDQTtBQUNBO0FBR0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVpBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVBBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVBBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVBBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVBBO0FBVUE7QUFDQTtBQUVBO0FBREE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFmQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBWkE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBZEE7QUFKQTtBQTBCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFBQTtBQUNBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFKQTtBQVdBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUpBO0FBYUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBQ0E7QUFwREE7QUFBQTtBQUFBO0FBQ0E7QUFnRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBM0hBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQWlJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU5BO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUNBO0FBR0E7QUFDQTtBQU9BO0FBTUE7QUFNQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFMQTtBQVFBO0FBQUE7QUFDQTtBQUdBO0FBREE7QUFIQTtBQVVBO0FBVkE7QUFlQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBUEE7QUFGQTtBQWFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFiQTtBQWtCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBTEE7QUFXQTtBQUNBO0FBS0E7QUFLQTtBQVhBO0FBWEE7QUFQQTtBQXBHQTtBQXVJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFJQTtBQUFBO0FBS0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUF4QkE7QUFBQTtBQUNBO0FBMEJBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTkE7QUFDQTtBQXBDQTtBQUFBO0FBQUE7QUFDQTtBQXFEQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVJBO0FBREE7QUFtQkE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFEQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBUEE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBUEE7QUFhQTtBQUNBO0FBS0E7QUFLQTtBQVhBO0FBYkE7QUFUQTtBQW5FQTtBQTBHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBU0E7OztBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQVJBO0FBYUE7OztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBQ0E7QUFHQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFXQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFlQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUEzREE7QUFEQTtBQXlFQTs7OztBQS9nREE7QUFDQTtBQWloREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQWJBO0FBQ0E7QUFnQkE7QUFDQTtBQURBO0FBQ0E7QUFHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25sREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFRQTs7O0FBT0E7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7QUEvQ0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQStDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7Ozs7QUFMQTtBQUNBO0FBT0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUpBO0FBTUE7QUFYQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUtBO0FBQ0E7QUFRQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBU0E7QUFDQTtBQU1BO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVNBOzs7O0FBakRBO0FBQ0E7QUFEQTtBQUVBO0FBREE7QUFDQTtBQUNBO0FBaURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBQ0E7QUFPQTs7Ozs7Ozs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFGQTtBQWlCQTtBQWpCQTtBQW9CQTs7OztBQXZCQTtBQUNBO0FBREE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBR0E7Ozs7O0FBZkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFVQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTs7OztBQTlCQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBS0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUZBO0FBUUE7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUNBO0FBREE7QUFSQTtBQWFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBS0E7QUFWQTtBQVlBO0FBQ0E7QUFEQTtBQVpBO0FBb0JBO0FBM0JBO0FBREE7QUFyQkE7QUFzREE7Ozs7QUFsSEE7QUFDQTtBQW9IQTtBQUNBO0FBREE7QUFDQTtBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzs7QUFhQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFUQTtBQVVBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBVEE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBTEE7QUFVQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFPQTtBQVBBO0FBTkE7QUFpQkE7QUF4Q0E7QUFEQTtBQTZDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBUEE7QUFVQTs7OztBQTlLQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBUUE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUNBO0FBd0tBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7Ozs7QSIsInNvdXJjZVJvb3QiOiIifQ==